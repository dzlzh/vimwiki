{"created_by":"Tampermonkey","version":"1","scripts":[{"name":"Google: Bypass Result Page Redirect","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["/^https?://(?:www|encrypted|ipv[46])\\.google\\.[^/]+/(?:$|[#?]|search|webhp|imgres)/"],"orig_matches":["https://news.google.com/*","https://cse.google.com/cse/*"],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1512981251951},"enabled":true,"position":1,"file_url":"https://greasyfork.org/scripts/14150-google-%E7%BB%95%E8%BF%87%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C%E7%BD%91%E9%A1%B5%E9%93%BE%E6%8E%A5%E9%87%8D%E5%AE%9A%E5%90%91/code/Google%EF%BC%9A%E7%BB%95%E8%BF%87%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C%E7%BD%91%E9%A1%B5%E9%93%BE%E6%8E%A5%E9%87%8D%E5%AE%9A%E5%90%91.user.js","uuid":"c65f0816-cf1f-429d-a2a7-50681993d6f3","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWVzcGFjZSAgIFZBX2kKLy8gQHZlcnNpb24gICAgIDguMC4wLjIwMTcxMTE2Ci8vIEBncmFudCAgICAgICBHTS5nZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgR00uc2V0VmFsdWUKLy8gQGdyYW50ICAgICAgIEdNX2dldFZhbHVlCi8vIEBncmFudCAgICAgICBHTV9zZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgdW5zYWZlV2luZG93Ci8vIEBpbmNsdWRlICAgICAvXmh0dHBzPzovLyg/Ond3d3xlbmNyeXB0ZWR8aXB2WzQ2XSlcLmdvb2dsZVwuW14vXSsvKD86JHxbIz9dfHNlYXJjaHx3ZWJocHxpbWdyZXMpLwovLyBAbWF0Y2ggICAgICAgaHR0cHM6Ly9uZXdzLmdvb2dsZS5jb20vKgovLyBAbWF0Y2ggICAgICAgaHR0cHM6Ly9jc2UuZ29vZ2xlLmNvbS9jc2UvKgovLyBAcnVuLWF0ICAgICAgZG9jdW1lbnQtc3RhcnQKLy8gQG5hbWUgICAgICAgIEdvb2dsZTogQnlwYXNzIFJlc3VsdCBQYWdlIFJlZGlyZWN0Ci8vIEBuYW1lOnpoLUNOICBHb29nbGXvvJrnu5Xov4fmkJzntKLnu5PmnpznvZHpobXpk77mjqXph43lrprlkJEKLy8gQG5hbWU6emgtVFcgIEdvb2dsZe+8mue5numBjuaQnOWwi+e1kOaenOe2sumggemPiOaOpemHjeWumuWQkQovLyBAZGVzY3JpcHRpb24gQXZvaWQgR29vZ2xlIHJlZGlyZWN0IGZvciBzZWFyY2ggcmVzdWx0IHBhZ2VzLgovLyBAZGVzY3JpcHRpb246emgtQ04g5LukIEdvb2dsZSDnm7TmjqXpk77mjqXoh7PmkJzntKLnu5PmnpznvZHpobXvvIzml6Dpobvph43lrprlkJHjgIIKLy8gQGRlc2NyaXB0aW9uOnpoLVRXIOS7pCBHb29nbGUg55u05o6l6Y+I5o6l6Iez5pCc5bCL57WQ5p6c57ay6aCB77yM54Sh6aCI6YeN5a6a5ZCR44CCCi8vID09L1VzZXJTY3JpcHQ9PQoKdmFyIE0gPSAodHlwZW9mIEdNICE9PSAndW5kZWZpbmVkJykgPyBHTSA6IHsKICBnZXRWYWx1ZTogZnVuY3Rpb24gKG5hbWUsIGFsdCkgewogICAgdmFyIHZhbHVlID0gR01fZ2V0VmFsdWUobmFtZSwgYWx0KTsKICAgIHJldHVybiB7IHRoZW46IGZ1bmN0aW9uIChjYWxsYmFjaykgeyBjYWxsYmFjayh2YWx1ZSk7IH0gfTsKICB9LAogIHNldFZhbHVlOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHsKICAgIEdNX3NldFZhbHVlKG5hbWUsIHZhbHVlKTsKICAgIHJldHVybiB7IHRoZW46IGZ1bmN0aW9uIChjYWxsYmFjaykgeyBjYWxsYmFjaygpOyB9IH07CiAgfQp9OwoKZnVuY3Rpb24gZ2V0T3B0aW9uKCkgewogIHZhciBvcHRfbm9vcGVuID0gZmFsc2U7CiAgLy8gRm9yIGV4YW1wbGU6IG9wZW4gaHR0cHM6Ly9pcHY0Lmdvb2dsZS5jb20vI3gtb3B0aW9uOm9wZW4taW5wbGFjZQogIHN3aXRjaCAobG9jYXRpb24uaGFzaCkgewogICAgLy8gT3BlbiBsaW5rcyBpbiB0aGUgY3VycmVudCB0YWIuCiAgICBjYXNlICcjeC1vcHRpb246b3Blbi1pbnBsYWNlJzogb3B0X25vb3BlbiA9IHRydWU7IGJyZWFrOwogICAgLy8gRG8gbm90IC4uLgogICAgY2FzZSAnI3gtb3B0aW9uOm5vLW9wZW4taW5wbGFjZSc6IG9wdF9ub29wZW4gPSBmYWxzZTsgYnJlYWs7CiAgICBkZWZhdWx0OiByZXR1cm4gTS5nZXRWYWx1ZSgnb3B0X25vb3BlbicsIG9wdF9ub29wZW4pOwogIH0KICBNLnNldFZhbHVlKCdvcHRfbm9vcGVuJywgb3B0X25vb3Blbik7CiAgcmV0dXJuIHsgdGhlbjogZnVuY3Rpb24gKGNhbGxiYWNrKSB7IGNhbGxiYWNrKG9wdF9ub29wZW4pOyB9IH07Cn0KCmZ1bmN0aW9uIHVuc2FmZUV2YWwoZnVuYywgb3B0KSB7CiAgbGV0IGJvZHkgPSAncmV0dXJuICgnICsgZnVuYyArICcpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyknOwogIHVuc2FmZVdpbmRvdy5GdW5jdGlvbihib2R5KS5jYWxsKHVuc2FmZVdpbmRvdywgb3B0KTsKfQoKZ2V0T3B0aW9uKCkudGhlbihmdW5jdGlvbiBydW4ob3B0X25vb3Blbikgewp1bnNhZmVFdmFsKGZ1bmN0aW9uIChvcHRfbm9vcGVuKSB7Cgp2YXIgZGVidWcgPSBmYWxzZTsKdmFyIGNvdW50ID0gMDsKCnZhciBvcHRpb25zID0ge29wdF9ub29wZW46IG9wdF9ub29wZW59OwpkZWJ1ZyAmJiBjb25zb2xlLmxvZygnT3B0aW9uczonLCBvcHRpb25zKTsKCi8vIHdlYiBwYWdlczogdXJsP3VybD0KLy8gY3VzdG9tIHNlYXJjaCBlbmdpbmU6IHVybD9xPQovLyBtYWx3YXJlOiBpbnRlcnN0aXRpYWw/dXJsPQp2YXIgcmUgPSAvXGJ1cmxcPy4qP1xiKD86dXJsfHEpPShodHRwcz9cYlteJiNdKykvaTsKdmFyIHJlc3RvcmUgPSBmdW5jdGlvbiAobGluaywgdXJsKSB7CiAgdmFyIG9sZFVybCA9IGxpbmsuZ2V0QXR0cmlidXRlKCdocmVmJykgfHwgJyc7CiAgdmFyIG5ld1VybCA9IHVybCB8fCBvbGRVcmw7CiAgdmFyIG1hdGNoZXMgPSBuZXdVcmwubWF0Y2gocmUpOwogIGlmIChtYXRjaGVzKSB7CiAgICBkZWJ1ZyAmJiBjb25zb2xlLmxvZygncmVzdG9yaW5nJywgbGluay5feF9pZCwgbmV3VXJsKTsKICAgIGxpbmsuc2V0QXR0cmlidXRlKCdocmVmJywgZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoZXNbMV0pKTsKICAgIGVuaGFuY2VMaW5rKGxpbmspOwogIH0gZWxzZSBpZiAodXJsICE9IG51bGwpIHsKICAgIGxpbmsuc2V0QXR0cmlidXRlKCdocmVmJywgbmV3VXJsKTsKICB9Cn07Cgp2YXIgcHVyaWZ5TGluayA9IGZ1bmN0aW9uIChhKSB7CiAgaWYgKC9cYnJ3dFwoLy50ZXN0KGEuZ2V0QXR0cmlidXRlKCdvbm1vdXNlZG93bicpKSkgewogICAgYS5yZW1vdmVBdHRyaWJ1dGUoJ29ubW91c2Vkb3duJyk7CiAgfQogIGlmIChhLnBhcmVudEVsZW1lbnQgJiYKICAgICAgL1xiY2xpY2tcYi8udGVzdChhLnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdqc2FjdGlvbicpIHx8ICcnKSkgewogICAgYS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7CiAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7CiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICB9LCB0cnVlKTsKICB9Cn07Cgp2YXIgZW5oYW5jZUxpbmsgPSBmdW5jdGlvbiAoYSkgewogIHB1cmlmeUxpbmsoYSk7CiAgYS5zZXRBdHRyaWJ1dGUoJ3JlbCcsICdub3JlZmVycmVyJyk7CiAgYS5zZXRBdHRyaWJ1dGUoJ3JlZmVycmVycG9saWN5JywgJ25vLXJlZmVycmVyJyk7CiAgaWYgKG9wdGlvbnMub3B0X25vb3BlbikgewogICAgYS5zZXRBdHRyaWJ1dGUoJ3RhcmdldCcsICdfc2VsZicpOwogICAgYS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkgewogICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTsKICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICB9LCB0cnVlKTsKICB9Cn07Cgp2YXIgZmFrZUxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CnZhciBub3JtYWxpemVVcmwgPSBmdW5jdGlvbiAodXJsKSB7CiAgZmFrZUxpbmsuaHJlZiA9IHVybDsKICByZXR1cm4gZmFrZUxpbmsuaHJlZjsKfTsKCnZhciBzZXR0ZXIgPSBmdW5jdGlvbiAodikgewogIHYgPSBTdHJpbmcodik7ICAvLyBpbiBjYXNlIGFuIG9iamVjdCBpcyBwYXNzZWQgYnkgY2xldmVyIEdvb2dsZQogIGRlYnVnICYmIGNvbnNvbGUubG9nKCdTdGF0ZTonLCBkb2N1bWVudC5yZWFkeVN0YXRlKTsKICBkZWJ1ZyAmJiBjb25zb2xlLmxvZygnc2V0JywgdGhpcy5feF9pZCwgdGhpcy5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSwgdik7CiAgcmVzdG9yZSh0aGlzLCB2KTsKfTsKdmFyIGdldHRlciA9IGZ1bmN0aW9uICgpIHsKICBkZWJ1ZyAmJiBjb25zb2xlLmxvZygnZ2V0JywgdGhpcy5feF9pZCwgdGhpcy5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSk7CiAgcmV0dXJuIG5vcm1hbGl6ZVVybCh0aGlzLmdldEF0dHJpYnV0ZSgnaHJlZicpKTsKfTsKdmFyIGJsb2NrZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICByZXN0b3JlKHRoaXMpOwogIGRlYnVnICYmIGNvbnNvbGUubG9nKCdibG9jaycsIHRoaXMuX3hfaWQsIHRoaXMuZ2V0QXR0cmlidXRlKCdocmVmJykpOwp9OwoKdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiAoYSkgewogIGlmIChhLl94X2lkKSB7CiAgICByZXN0b3JlKGEpOwogICAgcmV0dXJuOwogIH0KICBhLl94X2lkID0gKytjb3VudDsKICBkZWJ1ZyAmJiBhLnNldEF0dHJpYnV0ZSgneC1pZCcsIGEuX3hfaWQpOwogIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsKICAgIGRlYnVnICYmIGNvbnNvbGUubG9nKCdkZWZpbmUgcHJvcGVydHknLCBhLl94X2lkKTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCAnaHJlZicsIHtnZXQ6IGdldHRlciwgc2V0OiBzZXR0ZXJ9KTsKICB9IGVsc2UgaWYgKGEuX19kZWZpbmVTZXR0ZXJfXykgewogICAgZGVidWcgJiYgY29uc29sZS5sb2coJ2RlZmluZSBnZXR0ZXInLCBhLl94X2lkKTsKICAgIGEuX19kZWZpbmVTZXR0ZXJfXygnaHJlZicsIHNldHRlcik7CiAgICBhLl9fZGVmaW5lR2V0dGVyX18oJ2hyZWYnLCBnZXR0ZXIpOwogIH0gZWxzZSB7CiAgICBkZWJ1ZyAmJiBjb25zb2xlLmxvZygnZGVmaW5lIGxpc3RlbmVyJywgYS5feF9pZCk7CiAgICBhLm9ubW91c2VlbnRlciA9IGEub25tb3VzZW1vdmUgPSBhLm9ubW91c2V1cCA9IGEub25tb3VzZWRvd24gPQogICAgICBhLm9uZGJjbGljayA9IGEub25jbGljayA9IGEub25jb250ZXh0bWVudSA9IGJsb2NrZXI7CiAgfQogIGlmICgvXl8oPzpibGFua3xzZWxmKSQvLnRlc3QoYS5nZXRBdHRyaWJ1dGUoJ3RhcmdldCcpKSB8fAogICAgICAvXGJyd3RcKC8udGVzdChhLmdldEF0dHJpYnV0ZSgnb25tb3VzZWRvd24nKSkgfHwKICAgICAgL1xibW91c2UvLnRlc3QoYS5nZXRBdHRyaWJ1dGUoJ2pzYWN0aW9uJykpIHx8CiAgICAgIC9cYmNsaWNrXGIvLnRlc3QoYS5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnanNhY3Rpb24nKSkpIHsKICAgIGVuaGFuY2VMaW5rKGEpOwogIH0KICByZXN0b3JlKGEpOwp9OwoKdmFyIGNoZWNrTmV3Tm9kZXMgPSBmdW5jdGlvbiAobXV0YXRpb25zKSB7CiAgZGVidWcgJiYgY29uc29sZS5sb2coJ1N0YXRlOicsIGRvY3VtZW50LnJlYWR5U3RhdGUpOwogIGlmIChtdXRhdGlvbnMudGFyZ2V0KSB7CiAgICBjaGVja0F0dHJpYnV0ZShtdXRhdGlvbnMpOwogIH0gZWxzZSB7CiAgICBtdXRhdGlvbnMuZm9yRWFjaCAmJiBtdXRhdGlvbnMuZm9yRWFjaChjaGVja0F0dHJpYnV0ZSk7CiAgfQp9Owp2YXIgY2hlY2tBdHRyaWJ1dGUgPSBmdW5jdGlvbiAobXV0YXRpb24pIHsKICB2YXIgdGFyZ2V0ID0gbXV0YXRpb24udGFyZ2V0OwogIGlmICh0YXJnZXQgJiYgdGFyZ2V0Lm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT09ICdBJykgewogICAgaWYgKChtdXRhdGlvbi5hdHRyaWJ1dGVOYW1lIHx8IG11dGF0aW9uLmF0dHJOYW1lKSA9PT0gJ2hyZWYnKSB7CiAgICAgIGRlYnVnICYmIGNvbnNvbGUubG9nKCdyZXN0b3JlIGF0dHJpYnV0ZScsIHRhcmdldC5feF9pZCwgdGFyZ2V0LmdldEF0dHJpYnV0ZSgnaHJlZicpKTsKICAgIH0KICAgIGhhbmRsZXIodGFyZ2V0KTsKICB9IGVsc2UgaWYgKHRhcmdldCBpbnN0YW5jZW9mIEVsZW1lbnQpIHsKICAgIFtdLnNsaWNlLmNhbGwodGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKSkuZm9yRWFjaChoYW5kbGVyKTsKICB9Cn07Cgp2YXIgTXV0YXRpb25PYnNlcnZlciA9IHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyIHx8IHdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyOwoKaWYgKE11dGF0aW9uT2JzZXJ2ZXIpIHsKICBkZWJ1ZyAmJiBjb25zb2xlLmxvZygnTXV0YXRpb25PYnNlcnZlcjogdHJ1ZScpOwogIG5ldyBNdXRhdGlvbk9ic2VydmVyKGNoZWNrTmV3Tm9kZXMpLm9ic2VydmUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCB7CiAgICBjaGlsZExpc3Q6IHRydWUsCiAgICBhdHRyaWJ1dGVzOiB0cnVlLAogICAgYXR0cmlidXRlRmlsdGVyOiBbJ2hyZWYnXSwKICAgIHN1YnRyZWU6IHRydWUKICB9KTsKfSBlbHNlIHsKICBkZWJ1ZyAmJiBjb25zb2xlLmxvZygnTXV0YXRpb25FdmVudDogdHJ1ZScpOwogIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUF0dHJNb2RpZmllZCcsIGNoZWNrQXR0cmlidXRlLCBmYWxzZSk7CiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NTm9kZUluc2VydGVkJywgY2hlY2tOZXdOb2RlcywgZmFsc2UpOwp9Cgp9LCBvcHRfbm9vcGVuKTsKfSk7Cg=="},{"name":"gwdang","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["http://*.jd.com/*","https://*.jd.com/*","http://*.jd.hk/*","https://*.jd.hk/*","http://*.taobao.com/*","https://*.taobao.com/*","http://*.tmall.com/*","https://*.tmall.com/*","https://*.tmall.hk/*","http://*.yixun.com/*","http://*.51buy.com/*","http://*.yhd.com/*","http://*.suning.com/*","https://*.suning.com/*","http://*.dangdang.com/*","http://*.gome.com.cn/*","http://*.newegg.cn/*","http://*.paipai.com/*","https://*.amazon.com/*","https://*.amazon.cn/*","https://*.amazon.*/*","http://www.kjt.com/*","http://www.kaola.com/*","https://www.kaola.com/*","http://www.kaola.com.hk/*","https://www.kaola.com.hk/*","http://www.tcl.com/*","http://shop.hisense.com/*","http://*.oppo.com/*","http://shop.vivo.com.cn/*","http://www.ebay.com/*","http://t.dianping.com/*","http://*.nuomi.com/*","http://*.meituan.com/*","https://yao.95095.com/*","http://*.feiniu.com/*","http://*.meilishuo.com/*","http://*.mogujie.com/*","http://shop.coolpad.cn/*","http://*.sephora.cn/*","http://*.yesmywine.com/*","http://*.yiguo.com/*","http://*.wanggou.com/*","http://mall.jia.com/*","http://weigou.baidu.com/*","http://*.mi.com/*","http://shop.letv.com/*","http://*.handu.com/*","http://*.taoshu.com/*","http://*.1688.com/*","http://*.muyingzhijia.com/*","http://*.vmall.com/*","http://*.xiji.com/*","http://*.xijie.com/*","http://www.yougou.com/*","http://www.okbuy.com/*","http://*.001town.com/*","http://*.01goo.com/*","http://*.03l.cn/*","http://*.133china.com/*","http://*.139shop.com/*","http://yxp.163.com/*","http://*.168dg.com/*","http://*.186mall.com/*","http://*.18to82.com/*","http://*.1j.cn/*","http://*.22shop.com/*","http://*.24dq.com/*","http://*.24quan.com/*","http://*.258sd.com/*","http://*.2688.com/*","http://*.360buy.com/*","http://*.360hqb.com/*","http://*.360kxr.com/*","http://*.360mart.com/*","http://*.365goba.com/*","http://*.38hzt.com/*","http://*.39ty.com/*","http://*.4inlook.com/*","http://*.5188bag.com/*","http://*.51buy.com/*","http://51buy.com/","http://*.51dg.com/*","http://*.51eng.com/*","http://*.51sheyuan.com/*","http://*.51youpin.com/*","http://*.520eye.com/*","http://*.52shehua.com/*","http://*.5366.com/*","http://t.58.com/*","http://*.58hua.com/*","http://*.5lux.com/*","http://*.5yth.com/*","http://*.6919.com/*","http://*.6sbuy.com/*","http://*.77toy.com/*","http://*.7caihua.com/*","http://*.7cv.com/*","http://*.7sev.com/*","http://*.80ebus.com/*","http://*.8801.net/*","http://*.919it.com/*","http://*.929.cn/*","http://*.942radio.com/*","http://b2c.958shop.com/*","http://*.96128.com/*","http://*.99pto.com/*","http://*.99read.com/*","http://*.9dadao.com/*","http://*.9you.com/*","http://*.afffff.com/*","http://*.ai356.com/*","http://*.aibang.com/*","http://*.aidai.com/*","http://*.aiju.com/*","http://*.aim36.com/*","http://*.aimer.com.cn/*","http://*.aiyingshi.com/*","http://*.aizhigu.com.cn/*","http://*.amazon.cn/*","http://*.anni.com/*","http://*.apabi.com/*","http://*.augshow.com/*","http://*.autosup.com/*","http://*.baiyjk.com/*","http://*.bbesports.com/*","http://*.bookuu.com/*","http://*.bearbuy.com.cn/*","http://*.beautyplus.cn/*","http://*.beifabook.com/*","http://*.benq.com.cn/*","http://*.best1.com/*","http://*.biaoshang.hk/*","http://*.binggo.com/*","http://*.bloves.com/*","http://*.bobomobi.com/*","http://*.bookschina.com/*","http://*.boqii.com/*","http://*.buding.com/*","http://*.buy007.com/*","http://*.buy361.cn/*","http://*.buyfine.net/*","http://*.buynow.com.cn/*","http://*.caistv.com/*","http://*.caomeipai.com/*","http://*.car339.com.cn/*","http://*.car6688.com/*","http://*.carrefour.com.cn/*","http://*.cdream.com/*","http://*.ceetop.com/*","http://*.chashu.cn/*","http://*.chedangjia.com/*","http://*.chengdecs.com/*","http://*.china-gift.com/*","http://*.china-pub.com/*","http://emall.chinapay.com/*","http://*.chinayrs.com/*","http://*.chris-tina.com/*","http://*.clady.com/*","http://*.clinique.com.cn/*","http://*.cncard.com/*","http://*.cnfse.com/*","http://*.colebuy.com/*","http://*.conslive.com/*","http://*.coo8.com/*","http://*.cosize.com/*","http://*.cosme-de.com/*","http://*.ctrip.com/*","http://*.cw100.com/*","http://*.d1.com.cn/*","http://*.daisonghua.com/*","http://*.dangdang.com/*","http://*.daoyao.com/*","http://*.woyo.com/*","http://*.dazhe.cn/*","http://*.dazhongdianqi.com.cn/*","http://*.dianpu.com/*","http://*.didatuan.com/*","http://*.disiqu.cn/*","http://*.dixintong.com/*","http://*.doulaimai.com/*","http://*.dsgoo.com/*","http://*.dtoto.com/*","http://*.duhub.com/*","http://*.duoding.com/*","http://*.e-giordano.com/*","http://*.e-lining.com/*","http://*.e-my.com.cn/*","http://*.easy361.com/*","http://*.ebaimi.com/*","http://*.eboxbuy.com/*","http://*.ebtea.com/*","http://*.ecosme.cn/*","http://*.efeihu.com/*","http://*.ehaier.com/*","http://*.ejia.com/*","http://*.enet.com.cn/*","http://*.enjoyeye.com/*","http://*.epetbar.com/*","http://*.et5155.com/*","http://*.f508.com/*","http://*.fclub.cn/*","http://*.flowerby.com/*","http://*.flowercn.com/*","http://*.gap.cn/*","http://*.godida.com/*","http://*.gome.com.cn/*","http://*.goocctv.cn/*","http://*.goodjd.com/*","http://*.goodnourish.cn/*","http://*.gou3618.com/*","http://*.gouduo.com/*","http://*.gouwulian.com/*","http://*.gouxie.com/*","http://*.goyahome.com/*","http://*.guobuy.com/*","http://*.guopi.com/*","http://*.guuoo.com/*","http://*.hany.cn/*","http://*.happigo.com/*","http://*.hit168.com.cn/*","http://*.hitao.com/*","http://*.homeold.cn/*","http://*.homevv.com/*","http://*.hongkouzi.com/*","http://*.hopebook.net/*","http://*.huachu.com.cn/*","http://*.huimeifang.cn/*","http://*.hw2008.cn/*","http://*.icaifeng.com/*","http://*.icson.com/*","http://*.ideemall.com/*","http://*.ihush.com/*","http://*.iloveyou.com.cn/*","http://*.ilovezuan.com/*","http://*.imeelee.com/*","http://*.inoble.com.cn/*","http://*.inshion.com/*","http://*.ishop.cn/*","http://*.it88.com.cn/*","http://*.itzm.com/*","http://*.iyuyou.com/*","http://*.jiajiajk.com/*","http://*.jiaju.com/*","http://*.jiatx.com/*","http://*.jiayougo.com/*","http://*.jinbaidu.com/*","http://*.jmeishop.com/*","http://*.joyran.com/*","http://*.jsbcmall.com/*","http://*.jtlhome.com/*","http://*.jumei.com/*","http://*.junph.com/*","http://*.justonline.cn/*","http://*.jxdyf.com/*","http://*.k121.com/*","http://*.kadang.com/*","http://*.keede.com.cn/*","http://*.kela.cn/*","http://*.kuaishubao.com/*","http://*.kxtkx.com/*","http://*.ladypk.com/*","http://*.laeibelle.com/*","http://*.lafaso.com/*","http://*.lamiu.com/*","http://*.lancome.com.cn/*","http://*.lashou.com/*","http://*.ledaojia.com/*","http://*.leftlady.com/*","http://*.lenovo.com.cn/*","http://*.lens2005.com/*","http://*.letao.com/*","http://*.leyou.com/*","http://*.leyou.com.cn/*","http://*.lijiababy.com.cn/*","http://*.lijigou.com/*","http://*.likebuy.com/*","http://*.likeface.com/*","http://*.lingshi.com/*","http://*.liqunshop.com/*","http://*.liyi99.com/*","http://*.locknlock.com.cn/*","http://*.lovo.cn/*","http://*.luckigo.com/*","http://*.lusen.com/*","http://*.lyceem.com/*","http://*.m18.com/*","http://*.maichawang.com/*","http://*.maimaike.cn/*","http://*.mamabb.com/*","http://*.mamahao.cn/*","http://*.mangocity.com/*","http://*.manzuo.com/*","http://*.masamaso.com/*","http://*.maxfunbuy.com/*","http://*.maywon.com/*","http://*.mbaobao.com/*","http://*.meici.com/*","http://*.meilele.com/*","http://*.meilieasy.com/*","http://*.meituan.com/*","http://*.menglu.com/*","http://*.mengmai.com/*","http://*.minibuy.com/*","http://*.mmgw.cn/*","http://*.mmuses.com/*","http://*.mobi001.com/*","http://*.mokamall.com/*","http://*.momoyoyo.com/*","http://*.montrosechina.com/*","http://*.mooiee.com/*","http://*.moonbasa.com/*","http://*.motostore.com.cn/*","http://*.mpshow.com.cn/*","http://*.naccoo.com/*","http://*.naguu.com/*","http://*.nayao.com/*","http://*.newegg.com.cn/*","http://*.newgo5.com/*","http://*.nmlch.com/*","http://*.no5.com.cn/*","http://*.nokia.com.cn/*","http://*.nonmin88.com/*","http://*.obuy.cn/*","http://*.ofcard.com/*","http://*.ogage.cn/*","http://*.okbig.com/*","http://*.okbuy.com/*","http://*.okddy.com/*","http://*.okgolf.cn/*","http://*.olomo.com/*","http://*.olympus.com.cn/*","http://*.olymsports.com/*","http://*.ono.com.cn/*","http://*.orange3c.com/*","http://*.ouku.com/*","http://*.ourtasty.com/*","http://*.outice.com/*","http://*.oyego.com/*","http://*.paixie.net/*","http://*.palcent.com/*","http://*.ocj.com.cn/*","http://*.pb89.com/*","http://*.pcarm.com/*","http://*.petyoo.com/*","http://*.pgbao.com/*","http://*.piaoliang100.com/*","http://*.pirateship.com.cn/*","http://*.popyj.com/*","http://*.pupai.cn/*","http://*.purcotton.com/*","http://*.qianxun.com/*","http://*.qingci.com/*","http://*.qinqinbaby.com/*","http://*.qmango.com/*","http://*.qumei.com/*","http://*.quwan.com/*","http://*.qxian.com/*","http://*.rayi.cn/*","http://*.redbaby.com.cn/*","http://*.robam.com/*","http://*.salala.com.cn/*","http://*.samsclub.cn/*","http://*.sanfo.com/*","http://*.sapo.com.hk/*","http://*.sasa.com/*","http://*.sasacity.com/*","http://*.sawbuy.com/*","http://*.shanghai-sports.com/*","http://*.shentop.com/*","http://*.shishangqiyi.com/*","http://*.shjdq.com/*","http://*.shnn.com/*","http://*.shopin.net/*","http://*.shoubiao.com.cn/*","http://*.sigo.cn/*","http://mall.sina.com.cn/*","http://*.sinobuy.cn/*","http://*.skcoo.com/*","http://*.skomart.com/*","http://*.snyun.com/*","http://*.sonmai.cn/*","http://*.sport2008.com.cn/*","http://*.strawberrynet.com/*","http://*.suning.com/*","http://*.sz-esun.com/*","http://*.tao3c.com/*","http://item.taobao.com/*","http://*.taoxie.cn/*","http://*.the365.com/*","http://*.thinkshop.cn/*","http://*.tian10.com/*","http://*.tiantian.com/*","http://*.junph.com/*","http://*.tieyou.com/*","http://detail.tmall.com/*","http://*.togj.com/*","http://*.tooogooo.com/*","http://*.toy90.com/*","http://*.toys365.com/*","http://*.tpy100.com/*","http://*.tuniu.com/*","http://*.tztart.com/*","http://*.ugou.cn/*","http://*.uipmall.com/*","http://*.uiyi.cn/*","http://*.ushan.cn/*","http://*.uushouji.com/*","http://*.uya100.com/*","http://*.vaakav.com/*","http://*.vafox.com/*","http://*.vancl.com/*","http://*.vcotton.com/*","http://*.veedl.com/*","http://*.vegoos.com/*","http://*.venusveil.com/*","http://*.veryok.cn/*","http://*.viccol.com/*","http://*.vipshop.com/*","http://*.vipstore.com/*","http://*.vivian.cn/*","http://*.vjia.com/*","http://*.vnasi.com/*","http://*.voipyeah.com/*","http://*.w1.cn/*","http://*.waipowang.com/*","http://*.wangshanghai.com/*","http://*.wg365.com/*","http://*.winenice.com/*","http://*.wl.cn/*","http://*.womai.com/*","http://*.woye.com/*","http://*.wtaotao.com/*","http://*.wumeiwang.com/*","http://*.x-playboy.com/*","http://*.xiaokang.com/*","http://*.xiaozhuren.com/*","http://*.xinbaigo.com/*","http://*.xindou.com/*","http://*.xing800.com/*","http://*.xinhuabookstore.com/*","http://*.xiu.com/*","http://*.xtpo.cn/*","http://*.xzuan.com/*","http://*.yaja.com.cn/*","http://*.yaofang.cn/*","http://*.yasai.cn/*","http://*.yeecare.com/*","http://buy.yesky.com/*","http://*.yesmytea.com/*","http://*.yesmywine.com/*","http://*.yide.com/*","http://*.yifu.com/*","http://*.yihaodian.com/*","http://*.yintai.com/*","http://*.yinyuehe.net/*","http://*.yjcs.cn/*","http://*.yobrand.com/*","http://*.yoger.com.cn/*","http://*.yoho.cn/*","http://*.yongle.com.cn/*","http://*.yougou.com/*","http://*.youjk.com/*","http://*.yoyo18.com/*","http://*.yumaoclub.com/*","http://*.yyosso.com/*","http://*.zbird.com/*","http://*.zgcbb.com/*","http://*.zm7.cn/*","http://*.zopo.com/*","http://*.ibuying.com/*","http://*.33go.com.cn/*","http://*.xijie.com/*","http://*.nop.cn/*","http://*.asyp.com/*","http://*.sparty.cn/*","http://*.yizhedian.com/*","http://*.lvhezi.com/*","http://*.aishangbaobao.com/*","http://*.sportica.cn/*","http://*.jstsilk.cn/*","http://*.camel.com.cn/*","http://*.cottonpop.net/*","http://*.hyj.com/*","http://*.myxiequ.com/*","http://*.mfplaza.com/*","http://*.do93.com/*","http://*.3guo.cn/*","http://*.yaqifushi.com/*","http://*.trura.com/*","http://*.lbaobao.cn/*","http://*.xiutuan.com/*","http://*.usashopcn.com/*","http://*.ihaveu.com/*","http://*.vipku.com/*","http://*.vipchina.com/*","http://*.fanrry.cn/*","http://*.lesunvip.com/*","http://*.nala.com.cn/*","http://*.miqi.cn/*","http://*.meiribuy.com/*","http://*.pufung.com/*","http://*.xiaoye.com/*","http://*.hmeili.com/*","http://*.oulybuy.com/*","http://*.meifenzi.com/*","http://*.caomeishop.com/*","http://*.meifu360.com/*","http://*.bapashop.com/*","http://*.bulangxiongdi.com/*","http://*.gusubuy.com/*","http://*.opearl.net/*","http://*.ruci.cn/*","http://*.rax.cn/*","http://*.jiuxian.com/*","http://*.maimaicha.com/*","http://*.pinwine.cn/*","http://*.meiweidao.com/*","http://*.okliang.com/*","http://*.365wine.com/*","http://*.jjlg.com.cn/*","http://*.bianlishe.com/*","http://*.epkmall.com/*","http://*.gdcct.com/*","http://*.500ccc.com/*","http://*.me361.com/*","http://*.malatamobile.com/*","http://*.trioo.com/*","http://*.oohdear.com/*","http://*.yaahe.cn/*","http://*.easeeyes.com/*","http://*.dbox.cn/*","http://*.haotehui.com/*","http://*.m6go.com/*","http://*.bianyigo.com/*","http://*.okjee.com/*","http://*.mygeek.cn/*","http://*.tbb.cn/*","http://*.ushare360.com/*","http://*.gqt168.com/*","http://*.konjoy.com/*","http://*.aoliz.com/*","http://*.jianianle.com/*","http://*.akajia.com/*","http://*.miqi.com.cn/*","http://*.lehuimai.com/*","http://*.lifevc.com/*","http://*www.ouku.com/","http://nuomi.com/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1512981251975},"enabled":true,"position":2,"file_url":"https://greasyfork.org/scripts/14466-%E8%B4%AD%E7%89%A9%E5%85%9A%E6%AF%94%E4%BB%B7%E5%B7%A5%E5%85%B7/code/%E8%B4%AD%E7%89%A9%E5%85%9A%E6%AF%94%E4%BB%B7%E5%B7%A5%E5%85%B7.user.js","uuid":"5798ff4f-8510-459c-ac62-e880469923c8","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIGd3ZGFuZwovLyBAbmFtZTp6aC1DTiAgIOi0reeJqeWFmuavlOS7t+W3peWFtwovLyBAbmFtZXNwYWNlICAgbm8KLy8gQGRlc2NyaXB0aW9uIOa1j+iniOWVhuWTgemhtemdouaXtu+8jOiHquWKqOavlOi+g+WQjOasvuWVhuWTgeWcqOa3mOWunS/kuqzkuJwv5Lqa6ams6YCKL+W9k+W9ky/oi4/lroEv562J55m+5a625ZWG5Z+O55qE5pyA5L2O5Lu377yM5o+Q5L6b5Lu35qC85Y6G5Y+y44CB5Y+j56KR6K+E5YiG562J5p+l6K+i44CCCi8vIEBkZXNjcmlwdGlvbjp6aC1DTiDmtY/op4jllYblk4HpobXpnaLml7bvvIzoh6rliqjmr5TovoPlkIzmrL7llYblk4HlnKjmt5jlrp0v5Lqs5LicL+S6mumprOmAii/lvZPlvZMv6IuP5a6BL+etieeZvuWutuWVhuWfjueahOacgOS9juS7t++8jOaPkOS+m+S7t+agvOWOhuWPsuOAgeWPo+eikeivhOWIhuetieafpeivouOAggovLyBAcnVuLWF0ICAgICBkb2N1bWVudC1pZGxlCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5qZC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cHM6Ly8qLmpkLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5qZC5oay8qCi8vIEBpbmNsdWRlICAgICBodHRwczovLyouamQuaGsvKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudGFvYmFvLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwczovLyoudGFvYmFvLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi50bWFsbC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cHM6Ly8qLnRtYWxsLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwczovLyoudG1hbGwuaGsvKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueWl4dW4uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjUxYnV5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi55aGQuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnN1bmluZy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cHM6Ly8qLnN1bmluZy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZGFuZ2RhbmcuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmdvbWUuY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm5ld2VnZy5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5wYWlwYWkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vKi5hbWF6b24uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vKi5hbWF6b24uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cHM6Ly8qLmFtYXpvbi4qLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly93d3cua2p0LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vd3d3Lmthb2xhLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwczovL3d3dy5rYW9sYS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovL3d3dy5rYW9sYS5jb20uaGsvKgovLyBAaW5jbHVkZSAgICAgaHR0cHM6Ly93d3cua2FvbGEuY29tLmhrLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly93d3cudGNsLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vc2hvcC5oaXNlbnNlLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5vcHBvLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vc2hvcC52aXZvLmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vd3d3LmViYXkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly90LmRpYW5waW5nLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5udW9taS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubWVpdHVhbi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cHM6Ly95YW8uOTUwOTUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmZlaW5pdS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubWVpbGlzaHVvLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tb2d1amllLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vc2hvcC5jb29scGFkLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnNlcGhvcmEuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueWVzbXl3aW5lLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi55aWd1by5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoud2FuZ2dvdS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovL21hbGwuamlhLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vd2VpZ291LmJhaWR1LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5taS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovL3Nob3AubGV0di5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouaGFuZHUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnRhb3NodS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouMTY4OC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubXV5aW5nemhpamlhLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi52bWFsbC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueGlqaS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueGlqaWUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly93d3cueW91Z291LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vd3d3Lm9rYnV5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi4wMDF0b3duLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi4wMWdvby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouMDNsLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjEzM2NoaW5hLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi4xMzlzaG9wLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8veXhwLjE2My5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouMTY4ZGcuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjE4Nm1hbGwuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjE4dG84Mi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouMWouY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouMjJzaG9wLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi4yNGRxLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi4yNHF1YW4uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjI1OHNkLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi4yNjg4LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi4zNjBidXkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjM2MGhxYi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouMzYwa3hyLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi4zNjBtYXJ0LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi4zNjVnb2JhLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi4zOGh6dC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouMzl0eS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouNGlubG9vay5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouNTE4OGJhZy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouNTFidXkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly81MWJ1eS5jb20vCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi41MWRnLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi41MWVuZy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouNTFzaGV5dWFuLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi41MXlvdXBpbi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouNTIwZXllLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi41MnNoZWh1YS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouNTM2Ni5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovL3QuNTguY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjU4aHVhLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi41bHV4LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi41eXRoLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi42OTE5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi42c2J1eS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouNzd0b3kuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjdjYWlodWEuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjdjdi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouN3Nldi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouODBlYnVzLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi44ODAxLm5ldC8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi45MTlpdC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouOTI5LmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjk0MnJhZGlvLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vYjJjLjk1OHNob3AuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjk2MTI4LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi45OXB0by5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouOTlyZWFkLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi45ZGFkYW8uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjl5b3UuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmFmZmZmZi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYWkzNTYuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmFpYmFuZy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYWlkYWkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmFpanUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmFpbTM2LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5haW1lci5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYWl5aW5nc2hpLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5haXpoaWd1LmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5hbWF6b24uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYW5uaS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYXBhYmkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmF1Z3Nob3cuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmF1dG9zdXAuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmJhaXlqay5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYmJlc3BvcnRzLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5ib29rdXUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmJlYXJidXkuY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmJlYXV0eXBsdXMuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYmVpZmFib29rLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5iZW5xLmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5iZXN0MS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYmlhb3NoYW5nLmhrLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmJpbmdnby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYmxvdmVzLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5ib2JvbW9iaS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYm9va3NjaGluYS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYm9xaWkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmJ1ZGluZy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYnV5MDA3LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5idXkzNjEuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYnV5ZmluZS5uZXQvKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYnV5bm93LmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5jYWlzdHYuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmNhb21laXBhaS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouY2FyMzM5LmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5jYXI2Njg4LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5jYXJyZWZvdXIuY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmNkcmVhbS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouY2VldG9wLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5jaGFzaHUuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouY2hlZGFuZ2ppYS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouY2hlbmdkZWNzLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5jaGluYS1naWZ0LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5jaGluYS1wdWIuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly9lbWFsbC5jaGluYXBheS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouY2hpbmF5cnMuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmNocmlzLXRpbmEuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmNsYWR5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5jbGluaXF1ZS5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouY25jYXJkLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5jbmZzZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouY29sZWJ1eS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouY29uc2xpdmUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmNvbzguY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmNvc2l6ZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouY29zbWUtZGUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmN0cmlwLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5jdzEwMC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZDEuY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmRhaXNvbmdodWEuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmRhbmdkYW5nLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5kYW95YW8uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLndveW8uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmRhemhlLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmRhemhvbmdkaWFucWkuY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmRpYW5wdS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZGlkYXR1YW4uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmRpc2lxdS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5kaXhpbnRvbmcuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmRvdWxhaW1haS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZHNnb28uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmR0b3RvLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5kdWh1Yi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZHVvZGluZy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZS1naW9yZGFuby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZS1saW5pbmcuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmUtbXkuY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmVhc3kzNjEuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmViYWltaS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZWJveGJ1eS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZWJ0ZWEuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmVjb3NtZS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5lZmVpaHUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmVoYWllci5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZWppYS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZW5ldC5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZW5qb3lleWUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmVwZXRiYXIuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmV0NTE1NS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZjUwOC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZmNsdWIuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZmxvd2VyYnkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmZsb3dlcmNuLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5nYXAuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZ29kaWRhLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5nb21lLmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5nb29jY3R2LmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmdvb2RqZC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZ29vZG5vdXJpc2guY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZ291MzYxOC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZ291ZHVvLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5nb3V3dWxpYW4uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmdvdXhpZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZ295YWhvbWUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmd1b2J1eS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZ3VvcGkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmd1dW9vLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5oYW55LmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmhhcHBpZ28uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmhpdDE2OC5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouaGl0YW8uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmhvbWVvbGQuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouaG9tZXZ2LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5ob25na291emkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmhvcGVib29rLm5ldC8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5odWFjaHUuY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmh1aW1laWZhbmcuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouaHcyMDA4LmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmljYWlmZW5nLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5pY3Nvbi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouaWRlZW1hbGwuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmlodXNoLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5pbG92ZXlvdS5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouaWxvdmV6dWFuLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5pbWVlbGVlLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5pbm9ibGUuY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmluc2hpb24uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmlzaG9wLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLml0ODguY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLml0em0uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLml5dXlvdS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouamlhamlhamsuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmppYWp1LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5qaWF0eC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouamlheW91Z28uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmppbmJhaWR1LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5qbWVpc2hvcC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouam95cmFuLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5qc2JjbWFsbC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouanRsaG9tZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouanVtZWkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmp1bnBoLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5qdXN0b25saW5lLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmp4ZHlmLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5rMTIxLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5rYWRhbmcuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmtlZWRlLmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5rZWxhLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmt1YWlzaHViYW8uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmt4dGt4LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5sYWR5cGsuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmxhZWliZWxsZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubGFmYXNvLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5sYW1pdS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubGFuY29tZS5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubGFzaG91LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5sZWRhb2ppYS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubGVmdGxhZHkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmxlbm92by5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubGVuczIwMDUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmxldGFvLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5sZXlvdS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubGV5b3UuY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmxpamlhYmFieS5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubGlqaWdvdS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubGlrZWJ1eS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubGlrZWZhY2UuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmxpbmdzaGkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmxpcXVuc2hvcC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubGl5aTk5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5sb2NrbmxvY2suY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmxvdm8uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubHVja2lnby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubHVzZW4uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmx5Y2VlbS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubTE4LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tYWljaGF3YW5nLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tYWltYWlrZS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tYW1hYmIuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1hbWFoYW8uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubWFuZ29jaXR5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tYW56dW8uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1hc2FtYXNvLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tYXhmdW5idXkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1heXdvbi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubWJhb2Jhby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubWVpY2kuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1laWxlbGUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1laWxpZWFzeS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubWVpdHVhbi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubWVuZ2x1LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tZW5nbWFpLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5taW5pYnV5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tbWd3LmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1tdXNlcy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubW9iaTAwMS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubW9rYW1hbGwuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1vbW95b3lvLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tb250cm9zZWNoaW5hLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tb29pZWUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1vb25iYXNhLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tb3Rvc3RvcmUuY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1wc2hvdy5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubmFjY29vLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5uYWd1dS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubmF5YW8uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm5ld2VnZy5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubmV3Z281LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5ubWxjaC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubm81LmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5ub2tpYS5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubm9ubWluODguY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm9idXkuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoub2ZjYXJkLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5vZ2FnZS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5va2JpZy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoub2tidXkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm9rZGR5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5va2dvbGYuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoub2xvbW8uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm9seW1wdXMuY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm9seW1zcG9ydHMuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm9uby5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoub3JhbmdlM2MuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm91a3UuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm91cnRhc3R5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5vdXRpY2UuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm95ZWdvLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5wYWl4aWUubmV0LyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnBhbGNlbnQuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm9jai5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoucGI4OS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoucGNhcm0uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnBldHlvby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoucGdiYW8uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnBpYW9saWFuZzEwMC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoucGlyYXRlc2hpcC5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoucG9weWouY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnB1cGFpLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnB1cmNvdHRvbi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoucWlhbnh1bi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoucWluZ2NpLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5xaW5xaW5iYWJ5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5xbWFuZ28uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnF1bWVpLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5xdXdhbi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoucXhpYW4uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnJheWkuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoucmVkYmFieS5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoucm9iYW0uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnNhbGFsYS5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouc2Ftc2NsdWIuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouc2FuZm8uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnNhcG8uY29tLmhrLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnNhc2EuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnNhc2FjaXR5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5zYXdidXkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnNoYW5naGFpLXNwb3J0cy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouc2hlbnRvcC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouc2hpc2hhbmdxaXlpLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5zaGpkcS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouc2hubi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouc2hvcGluLm5ldC8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5zaG91Ymlhby5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouc2lnby5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vbWFsbC5zaW5hLmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5zaW5vYnV5LmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnNrY29vLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5za29tYXJ0LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5zbnl1bi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouc29ubWFpLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnNwb3J0MjAwOC5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouc3RyYXdiZXJyeW5ldC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouc3VuaW5nLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5zei1lc3VuLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi50YW8zYy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovL2l0ZW0udGFvYmFvLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi50YW94aWUuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudGhlMzY1LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi50aGlua3Nob3AuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudGlhbjEwLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi50aWFudGlhbi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouanVucGguY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnRpZXlvdS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovL2RldGFpbC50bWFsbC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudG9nai5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudG9vb2dvb28uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnRveTkwLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi50b3lzMzY1LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi50cHkxMDAuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnR1bml1LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi50enRhcnQuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnVnb3UuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudWlwbWFsbC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudWl5aS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi51c2hhbi5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi51dXNob3VqaS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudXlhMTAwLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi52YWFrYXYuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnZhZm94LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi52YW5jbC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudmNvdHRvbi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudmVlZGwuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnZlZ29vcy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudmVudXN2ZWlsLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi52ZXJ5b2suY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudmljY29sLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi52aXBzaG9wLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi52aXBzdG9yZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudml2aWFuLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnZqaWEuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnZuYXNpLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi52b2lweWVhaC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudzEuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoud2FpcG93YW5nLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi53YW5nc2hhbmdoYWkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLndnMzY1LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi53aW5lbmljZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoud2wuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoud29tYWkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLndveWUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnd0YW90YW8uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnd1bWVpd2FuZy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueC1wbGF5Ym95LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi54aWFva2FuZy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueGlhb3podXJlbi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueGluYmFpZ28uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnhpbmRvdS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueGluZzgwMC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueGluaHVhYm9va3N0b3JlLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi54aXUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnh0cG8uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueHp1YW4uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnlhamEuY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnlhb2ZhbmcuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueWFzYWkuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueWVlY2FyZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovL2J1eS55ZXNreS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueWVzbXl0ZWEuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnllc215d2luZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueWlkZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueWlmdS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueWloYW9kaWFuLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi55aW50YWkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnlpbnl1ZWhlLm5ldC8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi55amNzLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnlvYnJhbmQuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnlvZ2VyLmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi55b2hvLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnlvbmdsZS5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueW91Z291LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi55b3Vqay5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueW95bzE4LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi55dW1hb2NsdWIuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnl5b3Nzby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouemJpcmQuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnpnY2JiLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi56bTcuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouem9wby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouaWJ1eWluZy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouMzNnby5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueGlqaWUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm5vcC5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5hc3lwLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5zcGFydHkuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueWl6aGVkaWFuLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5sdmhlemkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmFpc2hhbmdiYW9iYW8uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnNwb3J0aWNhLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmpzdHNpbGsuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouY2FtZWwuY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmNvdHRvbnBvcC5uZXQvKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouaHlqLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5teXhpZXF1LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tZnBsYXphLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5kbzkzLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi4zZ3VvLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnlhcWlmdXNoaS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudHJ1cmEuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmxiYW9iYW8uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueGl1dHVhbi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudXNhc2hvcGNuLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5paGF2ZXUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnZpcGt1LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi52aXBjaGluYS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZmFucnJ5LmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmxlc3VudmlwLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5uYWxhLmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5taXFpLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1laXJpYnV5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5wdWZ1bmcuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnhpYW95ZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouaG1laWxpLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5vdWx5YnV5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tZWlmZW56aS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouY2FvbWVpc2hvcC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubWVpZnUzNjAuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmJhcGFzaG9wLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5idWxhbmd4aW9uZ2RpLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5ndXN1YnV5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5vcGVhcmwubmV0LyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnJ1Y2kuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoucmF4LmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmppdXhpYW4uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1haW1haWNoYS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoucGlud2luZS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tZWl3ZWlkYW8uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm9rbGlhbmcuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjM2NXdpbmUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmpqbGcuY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmJpYW5saXNoZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZXBrbWFsbC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZ2RjY3QuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjUwMGNjYy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubWUzNjEuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1hbGF0YW1vYmlsZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudHJpb28uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm9vaGRlYXIuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnlhYWhlLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmVhc2VleWVzLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5kYm94LmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmhhb3RlaHVpLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tNmdvLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5iaWFueWlnby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoub2tqZWUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm15Z2Vlay5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi50YmIuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudXNoYXJlMzYwLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5ncXQxNjguY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmtvbmpveS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYW9saXouY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmppYW5pYW5sZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYWthamlhLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5taXFpLmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5sZWh1aW1haS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubGlmZXZjLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKnd3dy5vdWt1LmNvbS8KLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly9udW9taS5jb20vKgovLyBAdmVyc2lvbiAgICAgMi4wLjQKLy8gQGdyYW50IAkJbm9uZQovLyA9PS9Vc2VyU2NyaXB0PT0KLyogQERhdGU6IFRodSBOb3YgMTYgMjAxNyAxNDowMjozMiBHTVQrMDgwMCAo5Lit5Zu95qCH5YeG5pe26Ze0KSovCiEgZnVuY3Rpb24oZSkgewoJZnVuY3Rpb24gdChpKSB7CgkJaWYgKG5baV0pIHJldHVybiBuW2ldLmV4cG9ydHM7CgkJdmFyIGEgPSBuW2ldID0gewoJCQlleHBvcnRzOiB7fSwKCQkJaWQ6IGksCgkJCWxvYWRlZDogITEKCQl9OwoJCXJldHVybiBlW2ldLmNhbGwoYS5leHBvcnRzLCBhLCBhLmV4cG9ydHMsIHQpLCBhLmxvYWRlZCA9ICEwLCBhLmV4cG9ydHMKCX0KCXZhciBuID0ge307CglyZXR1cm4gdC5tID0gZSwgdC5jID0gbiwgdC5wID0gIiIsIHQoMCkKfShbCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJKGZ1bmN0aW9uKGUpIHsKCQkJInVzZSBzdHJpY3QiOwoJCQkhIGZ1bmN0aW9uKCkgewoJCQkJdmFyIHQgPSBuKDIpKCk7CgkJCQlpZiAoIXQgfHwgIWxvY2F0aW9uLmhvc3QubWF0Y2goLyg/OnRhb2Jhb3x0bWFsbHx5YW9cLjk1MDk1fDE2ODhcLmNvbXxhbGlleHByZXNzXC5jb218aWVmcmFtZVwuZGxsKS8pKSB7CgkJCQkJaWYgKGxvY2F0aW9uLmhvc3QubWF0Y2goLyg/OnRhb2Jhb3x0bWFsbHx5YW9cLjk1MDk1fDE2ODhcLmNvbXxhbGlleHByZXNzXC5jb218aWVmcmFtZVwuZGxsKS8pKSB7CgkJCQkJCXZhciBpID0gKG5ldyBEYXRlKS5nZXREYXRlKCksCgkJCQkJCQlhID0gKG5ldyBEYXRlKS5nZXRIb3VycygpLAoJCQkJCQkJbyA9IChuZXcgRGF0ZSkuZ2V0TWludXRlcygpLAoJCQkJCQkJciA9IHZvaWQgMDsKCQkJCQkJaWYgKDEwID09PSBpICYmIDIzID09PSBhICYmIG8gPiA0OSAmJiAociA9ICEwKSwgKDExID09PSBpICYmIDAgPT09IGEgfHwgMTEgPT09IGkgJiYgMSA9PT0gYSAmJiA0OSA+PSBvKSAmJiAociA9ICEwKSwgMTEgPT09IGkgJiYgMSA9PT0gYSAmJiBvID4gNDkgJiYgKHIgPSAhMSksIHIpIHJldHVybgoJCQkJCX0KCQkJCQluKDMpLCBuKDUpLmluaXQoKSwgbigyNykuaW5pdCgpOwoJCQkJCXZhciBzID0gbigxMyk7CgkJCQkJcyAmJiBzLmluaXQoZS5nd2RfY256eiksICJtLmZpbmUzcS5jb20iID09PSBsb2NhdGlvbi5ob3N0ICYmIG4oMzEpLmluaXQoKSwgMCAhPT0gZS5wYWdlSW5mby50eXBlICYmIChuKDMyKS5pbml0KCksIG4oMzMpKCkgfHwgbigzNCkgfHwgKG4oMzYpLCBuKDM3KSwgZS5sb2dvTmFtZSA9IG4oMzgpKDgpLCBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIk1heHRob24iKSA+IC0xLCBlLnBsdWdpbnMgPSBbbigzOSksIG4oNDgpXSwgbig1MCksIG4oNTEpKCksIG4oNTMpLmNvbW1vbihmdW5jdGlvbih0KSB7CgkJCQkJCXZhciBpID0gWyJrYW9sYSIsICJib29raW5nIiwgImVsb25nIiwgIndiaWFvIiwgImFnb2RhIiwgImhvdGVscyIsICIyMjgiLCAicm9zZW9ubHkiLCAiZmVlbHVuaXF1ZSIsICJuaWtlIl07CgkJCQkJCSF0IHx8ICF0LnJlc3VsdCB8fCB0LnJlc3VsdCBpbnN0YW5jZW9mIEFycmF5IHx8IC0xICE9IHQucmVzdWx0LmFkZHJlc3MuaW5kZXhPZigi5YyX5LqsIikgfHwgLTEgIT0gdC5yZXN1bHQuYWRkcmVzcy5pbmRleE9mKCLkuIrmtbciKSB8fCAtMSAhPSB0LnJlc3VsdC5hZGRyZXNzLmluZGV4T2YoIuW5v+W3niIpIHx8IC0xICE9IHQucmVzdWx0LmFkZHJlc3MuaW5kZXhPZigi5rex5ZyzIikgfHwgLTEgIT0gdC5yZXN1bHQuYWRkcmVzcy5pbmRleE9mKCLmna3lt54iKSB8fCAtMSAhPSB0LnJlc3VsdC5hZGRyZXNzLmluZGV4T2YoIuWNl+S6rCIpID8gdCAmJiAtMSA9PSB0LnJlc3VsdC5hZGRyZXNzLmluZGV4T2YoIuWNl+S6rCIpICYmIChlLmZvcmJpZEFkID0gITApIDogKGkuaW5kZXhPZiAmJiBpLmluZGV4T2YoZS5zaXRlKSA+IC0xICYmIChlLnNldF9mb3JjZSA9ICEwLCBlLnVfc2VydmVyID0gImh0dHA6Ly8xMTguMTQ0Ljg4LjExOTo4MDg1IiksIGUuZm9yYmlkQWQgPSAhMCksIG4oNDApLmdldFJhdGUoZnVuY3Rpb24oKSB7CgkJCQkJCQluKDU0KS5nZXQoZnVuY3Rpb24oKSB7CgkJCQkJCQkJbig1NikuaW5pdCgpCgkJCQkJCQl9KQoJCQkJCQl9KQoJCQkJCX0pKSkKCQkJCX0KCQkJfSgpCgkJfSkuY2FsbCh0LCBuKDEpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkidXNlIHN0cmljdCI7CgkJZS5leHBvcnRzID0gewoJCQltb2R1bGVzOiB7fSwKCQkJdmVyc2lvbjogMTUxMDgxMjEwODc4NCwKCQkJYnJvd3Nlcjoge30sCgkJCWRlYnVnOiAvZ3dkZWJ1Zy8udGVzdCh3aW5kb3cubG9jYXRpb24uaHJlZiksCgkJCWV4dGVuZDogZnVuY3Rpb24oZSkgewoJCQkJZm9yICh2YXIgdCBpbiBlKSB0aGlzW3RdID0gZVt0XQoJCQl9CgkJfQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCkgewoJCQkidXNlIHN0cmljdCI7CgkJCWUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkgewoJCQkJdmFyIGUgPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC8oPzpNU0lFIHxUcmlkZW50XC8uKjsgcnY6KShcZCspLyk7CgkJCQlyZXR1cm4gZSAmJiAodFsiSUUiICsgcGFyc2VJbnQoZVsxXSldID0gITApLCBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZigibXNpZSIpID4gLTEgPyAhMCA6IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCJlZGdlIikgPiAtMSA/ICEwIDogZSA/IHBhcnNlSW50KGVbMV0pIDogdm9pZCAwCgkJCX0KCQl9KS5jYWxsKHQsIG4oMSkpCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCShmdW5jdGlvbihlKSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJbig0KSwgZS5leHRlbmQoewoJCQkJY3JjNjQ6ICEwLAoJCQkJdW5pb246ICJ1bmlvbl9nd2RhbmciLAoJCQkJc2hvd190aXA6IDEsCgkJCQlzaG93X3dpc2hsaXN0OiAxLAoJCQkJc2hvd19ndWVzczogMSwKCQkJCXNob3dfbWFpbmJhcjogMSwKCQkJCXNob3dfcHJvbW86IDEsCgkJCQlzZXRfZm9yY2U6ICExLAoJCQkJZGVmYXVsdF9zdHlsZTogInRvcCIsCgkJCQl1dDogIiZ0cmFucz0xIiwKCQkJCWZyb21fZGV2aWNlOiAiZGVmYXVsdCIsCgkJCQlleHRCcmFuZDogImd3ZCIsCgkJCQlleHROYW1lOiAiZ3dkYW5nIiwKCQkJCWdvX3VuaW9uOiAiaHR0cDovL3UuZ3dkYW5nLmNvbS91bmlvbi9nbyIsCgkJCQlwX2lkOiAiIiwKCQkJCWlzX29wZW46IDAsCgkJCQlwb3NpdGlvbjogMCwKCQkJCXN0eWxlOiAiIiwKCQkJCW5vdGljZTogMCwKCQkJCWZpcnN0OiAwLAoJCQkJZm9sZDogMCwKCQkJCXBfZm9sZDogMCwKCQkJCXBvcF9zaGFyZTogMSwKCQkJCWVtYWlsOiAiIiwKCQkJCXN1YnNpdGVfaWQ6ICIiLAoJCQkJZm9yY2U6IFtdLAoJCQkJb25fYnVpbGRpbmc6ICEwLAoJCQkJYnVpbHRfY291bnRlcjogMCwKCQkJCWNvbGxlY3Rpb25DaGFuZ2VkOiAhMCwKCQkJCWd3ZF9icm93c2VyX3R5cGU6IDEsCgkJCQlpc19zaXRlX3BhZ2U6IG51bGwsCgkJCQlocmVmOiB3aW5kb3cubG9jYXRpb24gPyB3aW5kb3cubG9jYXRpb24uaHJlZiA6ICIiLAoJCQkJY29sbGVjdEluZm86IHsKCQkJCQlkcF9pZDogIiIsCgkJCQkJdGl0bGU6ICIiLAoJCQkJCXNpdGVfaWQ6IDAsCgkJCQkJdXJsOiAiIiwKCQkJCQlpbWc6ICIiLAoJCQkJCXByaWNlOiAiIiwKCQkJCQljb21tZW50OiAiIgoJCQkJfSwKCQkJCW5vd19kcF9pZDogIiIsCgkJCQl3aGVyZV9idXlfZHBzOiAiIiwKCQkJCXdpZHRoOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggPiAwID8gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIDogZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCwKCQkJCXRpbWVyOiBudWxsLAoJCQkJdGltZXIyOiBudWxsLAoJCQkJdGltZXIzOiBudWxsLAoJCQkJdGltZXI0OiBudWxsLAoJCQkJdGltZXI1OiBudWxsLAoJCQkJdGltZXI1X211dGV4OiAhMCwKCQkJCWhlaWdodDogMCwKCQkJCXNjcm9sbFRvcDogMCwKCQkJCXBhZ2Vfc2l6ZTogNiwKCQkJCXBhZ2Vfc2l6ZV9taW5pOiA0LAoJCQkJcGFnZV9ub3c6IHsKCQkJCQliMmM6IDEsCgkJCQkJdGFvYmFvOiAxLAoJCQkJCXRtYWxsOiAxLAoJCQkJCWFsc29fYnV5OiAxLAoJCQkJCXByb21vdGlvbjogMSwKCQkJCQliMmNfZnV6enk6IDEKCQkJCX0sCgkJCQlwYWdlX3RvdGFsOiB7CgkJCQkJYjJjOiAxLAoJCQkJCXRhb2JhbzogMSwKCQkJCQl0bWFsbDogMSwKCQkJCQlhbHNvX2J1eTogMSwKCQkJCQlwcm9tb3Rpb246IDEsCgkJCQkJYjJjX2Z1enp5OiAxCgkJCQl9LAoJCQkJdG90YWxfbnVtOiB7CgkJCQkJYjJjOiA2LAoJCQkJCXRhb2JhbzogNiwKCQkJCQl0bWFsbDogNiwKCQkJCQlhbHNvX2J1eTogNiwKCQkJCQlwcm9tb3Rpb246IDYsCgkJCQkJYjJjX2Z1enp5OiA2CgkJCQl9LAoJCQkJbW9kdWxlX25hbWU6IFsiYjJjIiwgInRhb2JhbyIsICJ0bWFsbCIsICJhbHNvX2J1eSIsICJwcm9tb3Rpb24iLCAiYjJjX2Z1enp5Il0sCgkJCQlkcElzQm9vazogITEsCgkJCQloaWRkZW5GYXZvckJ1dHRvbjogITEsCgkJCQlzYXZlX3RicmVzX2RhdGE6IG51bGwsCgkJCQlzYXZlX3Byb21vX2xlbjogMCwKCQkJCXNhdmVfcHJpY2VfdHJlbmRfZGF0YTogbnVsbCwKCQkJCXNhdmVfcHJvbW9fZGF0YTogbnVsbCwKCQkJCXRvcFJlc2l6ZVRpbWVyOiBudWxsLAoJCQkJYm90dG9tUmVzaXplVGltZXI6IG51bGwKCQkJfSkKCQl9KS5jYWxsKHQsIG4oMSkpCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCShmdW5jdGlvbihlKSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJdmFyIHQgPSAiaHR0cHM6IiA9PT0gbG9jYXRpb24ucHJvdG9jb2wgPyAiaHR0cHM6IiA6ICJodHRwOiI7CgkJCWlmIChlLmV4dGVuZCh7CgkJCQlzZXJ2ZXI6ICJodHRwczovL2Jyb3dzZXIuZ3dkYW5nLmNvbSIsCgkJCQljX3NlcnZlcjogImh0dHBzOi8vd3d3Lmd3ZGFuZy5jb20iLAoJCQkJc19zZXJ2ZXI6IHQgKyAiLy9jZG4uZ3dkYW5nLmNvbSIsCgkJCQl2X3NlcnZlcjogImh0dHA6Ly92Lmd3ZGFuZy5jb20iLAoJCQkJdV9zZXJ2ZXI6ICJodHRwOi8vdS5nd2RhbmcuY29tIiwKCQkJCXVfc2VydmVyMjogImh0dHA6Ly91Lmd3ZGFuZy5jb20iLAoJCQkJdV9ob3VzZTogdCArICIvL3d3dy5sdWZhbmdqaWEuY29tIiwKCQkJCXRqX3NlcnZlcjogdCArICIvL3YuZ3dkYW5nLmNvbSIsCgkJCQlpbWdfc2VydmVyOiAiaHR0cDovL2Y2N2RmZTdlZTdlNjMuY2RuLnNvaHVjcy5jb20iLAoJCQkJaW1nNjRfc2VydmVyOiAiaHR0cDovLzY0NTU2OGI3MWQ2YjYuY2RuLnNvaHVjcy5jb20iLAoJCQkJcHJvZHVjdF9rZXl3b3JkOiB0ICsgIi8va2V5d29yZC5nd2RhbmcuY29tIiwKCQkJCXRvTW9iaWxlVXJsOiB0ICsgIi8vbS5nd2RhbmcuY29tIiwKCQkJCXVfa2V5OiAiZ3dkYW5nIiwKCQkJCWR2YWw6ICIjdGJzYi1ub3RpZmllcnMiLAoJCQkJbWJhcjogImd3ZGFuZy1tYWluIiwKCQkJCXdpc2hkb206ICJiamRfcGx0X2JnIiwKCQkJCXdpc2hkb20yOiAiZ3dkX3dpc2hsaXN0X2RpdiIsCgkJCQlwX2s6ICJwaW5nbHVudHVhbjEyMzQ1IiwKCQkJCWRvbWFpbjogImJyb3dzZXIiCgkJCX0pLCBsb2NhdGlvbi5ob3N0LmluZGV4T2YoInRhb2JhbyIpID4gLTEgfHwgbG9jYXRpb24uaG9zdC5pbmRleE9mKCJ0bWFsbCIpID4gLTEgfHwgbG9jYXRpb24uaG9zdC5pbmRleE9mKCIxNjg4IikgPiAtMSkgewoJCQkJZm9yICh2YXIgbiA9ICJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiIsIGkgPSAiIyIsIGEgPSAwOyA4ID4gYTsgYSsrKSBpICs9IG5bcGFyc2VJbnQoMjYgKiBNYXRoLnJhbmRvbSgpKV07CgkJCQllLmR2YWwgPSBpLCBlLndpc2hkb20gPSBpLnJlcGxhY2UoIiMiLCAiIikgKyAiX2JnIjsKCQkJCXZhciBvID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLAoJCQkJCXIgPSAvd2Via2l0L2kudGVzdChvKSAmJiAhKC9jaHJvbWUvaS50ZXN0KG8pICYmIC93ZWJraXQvaS50ZXN0KG8pICYmIC9tb3ppbGxhL2kudGVzdChvKSk7CgkJCQkoby5pbmRleE9mKCJtYXh0aG9uIikgPiAtMSB8fCBvLmluZGV4T2YoIjIzNDVleHBsb3JlciIpID4gLTEgfHwgcikgJiYgKGUud2lzaGRvbTIgPSAibWF4X2d3ZF93aXNobGlzdF9kaXYiLCBlLm1iYXIgPSAibWF4X2d3ZGFuZy1tYWluIikKCQkJfQoJCX0pLmNhbGwodCwgbigxKSkKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJKGZ1bmN0aW9uKHQsIGkpIHsKCQkJInVzZSBzdHJpY3QiOwoJCQl2YXIgYSwgbyA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLAoJCQkJciA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0OwoJCQllLmV4cG9ydHMuaXNBdmFpbGFibGVQYWdlID0gZnVuY3Rpb24oKSB7CgkJCQlmb3IgKHZhciBlIGluIGMpCgkJCQkJaWYgKHIubWF0Y2gobmV3IFJlZ0V4cChlLCAiaSIpKSkgcmV0dXJuIGNbZV07CgkJCQlyZXR1cm4gITEKCQkJfSwgZS5leHBvcnRzLmlzUHJvZHVjdFBhZ2UgPSBmdW5jdGlvbihlKSB7CgkJCQllID0gZSB8fCBvOwoJCQkJZm9yICh2YXIgdCBpbiBkKQoJCQkJCWlmIChlLm1hdGNoKG5ldyBSZWdFeHAodCwgImkiKSkpIHJldHVybiBkW3RdOwoJCQkJcmV0dXJuICExCgkJCX07CgkJCXZhciBzID0gZnVuY3Rpb24oZSkgewoJCQkJdmFyIG47CgkJCQlzd2l0Y2ggKGUpIHsKCQkJCQlkZWZhdWx0OiB0KCIjY29udGVudCBoMiIpLnRleHQoKS5pbmRleE9mKCLmgqjmn6XnnIvnmoTllYblk4Hmib7kuI3liLDkuoYiKSA+IC0xICYmIChuID0gITApCgkJCQl9CgkJCQlyZXR1cm4gbgoJCQl9OwoJCQllLmV4cG9ydHMuaXNJbkJhbkxpc3QgPSBmdW5jdGlvbigpIHsKCQkJCWlmICghaS5pZnJhbWUpIHsKCQkJCQl2YXIgZSA9IG8ubWF0Y2goL1smXD9dbm9fdXJsLyk7CgkJCQkJaWYgKCFlICYmIChzZWxmLmxvY2F0aW9uICE9IHRvcC5sb2NhdGlvbiB8fCBzZWxmLmZyYW1lRWxlbWVudCAmJiAiSUZSQU1FIiA9PSBzZWxmLmZyYW1lRWxlbWVudC50YWdOYW1lIHx8IHdpbmRvdy50b3AgIT0gd2luZG93LnNlbGYpKSByZXR1cm4gITAKCQkJCX0KCQkJCXZhciB0ID0gbzsKCQkJCXJldHVybiBsb2NhdGlvbi5ocmVmLmluZGV4T2YoIj8iKSA+IDAgJiYgKHQgPSBvLnN1YnN0cigwLCBvLmluZGV4T2YoIj8iKSkpLCB0Lm1hdGNoKC9cLmthbHVsaS5jb20vKSA/ICExIDogbnVsbCAhPSB0Lm1hdGNoKC8oPzpjYXJ0cmlkZ2V8Q2FtY29yZGVyfGNhcnRlcnN8ZmVpZmVpXC5jb21cL29yZGVyXC98cmVmPW9yZF9jYXJ0X3NocikvKSA/ICExIDogbG9jYXRpb24uaG9zdC5pbmRleE9mKGkuZXh0TmFtZSArICIuY29tIikgPiAtMSA/ICEwIDogdC5tYXRjaCgvZGV0YWlsXC56b2xcLmNvbVwuY24vKSA/ICExIDogbnVsbCAhPSB0Lm1hdGNoKC8oPzpjYXJ0fG1lbWJlcnxvcmRlcnxteWhvbWV8cGljdHVyZV9pbmRleHxoYW5kbGUtYnV5LWJveHxjaGF0fHQuc2luYS5jb20uY258ZGlzY3Vzc2lvbnx1bmlvbi5kYW5nZGFuZ3xldmUuMzYwYnV5fGJhbmsudm1hbGx8Y2hlY2tvdXR8Y29uZmlybXxnYXRld2F5fHRyYWRlfGh0dHA6XC9cL2kudGFvYmFvLmNvbXx3ZS50YW9iYW8uY29tfHBhc3Nwb3J0LnlvdWdvdS5jb20pL2dpKSA/ICEwIDogITEKCQkJfTsKCQkJdmFyIGwgPSBmdW5jdGlvbigpIHsKCQkJCQlpZiAoYSkgcmV0dXJuIGE7CgkJCQkJdmFyIHQgPSAiIjsKCQkJCQlyZXR1cm4gZS5leHBvcnRzLmlzSW5CYW5MaXN0KCkgPyBhID0gewoJCQkJCQl0eXBlOiAwLAoJCQkJCQlzaXRlTmFtZTogdAoJCQkJCX0gOiAodCA9IGUuZXhwb3J0cy5pc1Byb2R1Y3RQYWdlKCkpID8gKCJzdHJpbmciICE9IHR5cGVvZiB0ICYmIChpLmhpZGViYXIgPSB0LmhpZGViYXIsIHQgPSB0Lm5hbWUpLCBpLnNpdGUgPSB0LCBhID0gcyh0KSA/IHsKCQkJCQkJdHlwZTogMCwKCQkJCQkJc2l0ZU5hbWU6IHQKCQkJCQl9IDogewoJCQkJCQl0eXBlOiAyLAoJCQkJCQlzaXRlTmFtZTogdAoJCQkJCX0pIDogKHQgPSBlLmV4cG9ydHMuaXNBdmFpbGFibGVQYWdlKCksIHQgPyAoInN0cmluZyIgIT0gdHlwZW9mIHQgJiYgKGkuaGlkZWJhciA9IHQuaGlkZWJhciwgdCA9IHQubmFtZSksIGkuc2l0ZSA9IHQsIGEgPSB7CgkJCQkJCXR5cGU6IDEsCgkJCQkJCXNpdGVOYW1lOiB0CgkJCQkJfSkgOiBhID0gewoJCQkJCQl0eXBlOiAwLAoJCQkJCQlzaXRlTmFtZTogIiIKCQkJCQl9KQoJCQkJfSwKCQkJCWMgPSB7CgkJCQkJInd3d1xcLmtqdFxcLmNvbSI6ICJranQiLAoJCQkJCSJ3d3dcXC5saWZldmMuY29tIjogImxpZmV2YyIsCgkJCQkJInd3d1xcLmNvb2NhYVxcLmNvbSI6ICJjb29jYWEiLAoJCQkJCSIoPzp3d3d8c2hvcClcXC5udWJpYVxcLig/OmNufGNvbSkiOiAibnViaWEiLAoJCQkJCSJ3d3dcXC5remozNjVcXC5jb20iOiAia3pqMzY1IiwKCQkJCQkid3d3XFwua2FvbGFcXC5jb20iOiAia2FvbGEiLAoJCQkJCSJ3d3dcXC55bWF0b3VcXC5jb20iOiAieW1hdG91IiwKCQkJCQkid3d3XFwubWV0YW9cXC5jb20iOiAibWV0YW8iLAoJCQkJCSJzaG9wXFwucGhpbGlwc1xcLmNvbVxcLmNuIjogInBoaWxpcHMiLAoJCQkJCSJ3d3dcXC50Y2xcXC5jb20iOiAidGNsIiwKCQkJCQkid3d3XFwuZS1jaGFuZ2hvbmdcXC5jb20iOiAiY2hhbmdob25nIiwKCQkJCQkic2hvcFxcLmtvbmthXFwuY29tIjogImtvbmthIiwKCQkJCQkic2hvcFxcLmhpc2Vuc2VcXC5jb20iOiAiaGlzZW5zZSIsCgkJCQkJInd3d1xcLmluZWlnb1xcLmNvbSI6ICJpbmVpZ28iLAoJCQkJCSJ3d3dcXC5za2dcXC5jb20iOiAic2tnIiwKCQkJCQkid3d3XFwuay10b3VjaFxcLmNuIjogImstdG91Y2giLAoJCQkJCSIoPzp3d3d8c2hvcClcXC5naW9uZWVcXC5jb20iOiAiZ2lvbmVlIiwKCQkJCQkiKD86d3d3fHN0b3JlKVxcLm9wcG9cXC5jb20iOiAib3BwbyIsCgkJCQkJImdmaXZlXFwuYjJjXFwuZXFpbWluZ3hpbmdcXC5jb20iOiAiZ2ZpdmUiLAoJCQkJCSJzaG9wXFwudml2b1xcLmNvbVxcLmNuIjogInZpdm8iLAoJCQkJCSJ3d3dcXC5ncmFpbmdlclxcLmNuIjogImdyYWluZ2VyIiwKCQkJCQkiKD86bWFsbHxwaWFvKVxcLjE2M1xcLmNvbSI6ICJ3eTE2MyIsCgkJCQkJInRcXC5kaWFucGluZ1xcLmNvbSI6ICJkaWFucGluZyIsCgkJCQkJIlxcLm51b21pXFwuY29tIjogIm51b21pIiwKCQkJCQkiXFwubWVpdHVhblxcLmNvbSI6ICJtZWl0dWFuIiwKCQkJCQkid3d3XFwuZWJheVxcLmNvbSI6ICJlYmF5IiwKCQkJCQkieWFvXFwuOTUwOTVcXC5jb20iOiB7CgkJCQkJCW5hbWU6ICJ0YW9iYW8iLAoJCQkJCQloaWRlYmFyOiAhMAoJCQkJCX0sCgkJCQkJIlxcLmZlaW5pdVxcLmNvbSI6ICJmZWluaXUiLAoJCQkJCSJpdGVtXFwuZmVpbml1XFwuY29tIjogImZlaW5pdSIsCgkJCQkJIlxcLmZlaWZlaVxcLig/OmNufGNvbSkiOiAiZmVpZmVpIiwKCQkJCQkiXFwuZ3VhbmdcXC5jb20iOiAiZ3VhbmciLAoJCQkJCSJcXC5tZWlsaXNodW9cXC5jb20iOiAibWVpbGlzaHVvIiwKCQkJCQkiXFwubW9ndWppZVxcLmNvbSI6ICJtb2d1amllIiwKCQkJCQkic2hvcFxcLmNvb2xwYWRcXC5jbiI6ICJjb29scGFkIiwKCQkJCQkiXFwuc2VwaG9yYVxcLmNuIjogInNlcGhvcmFjcHMiLAoJCQkJCSJjblxcZCpcXC5zdHJhd2JlcnJ5bmV0XFwuY29tIjogInN0cmF3YmVycnluZXQiLAoJCQkJCSJcXC55ZXNteXdpbmVcXC5jb20iOiAieWVzbXl3aW5lIiwKCQkJCQkiKFxcLik/eWlndW9cXC5jb20iOiAieWlndW8iLAoJCQkJCSJcXC53YW5nZ291XFwuY29tIjogIndhbmdnb3UiLAoJCQkJCSJtYWxsXFwuamlhXFwuY29tIjogImppYSIsCgkJCQkJIndlaWdvdVxcLmJhaWR1XFwuY29tIjogImJhaWR1LXdlaWdvdSIsCgkJCQkJIlxcLih4aWFvKT9taVxcLmNvbSI6ICJ4aWFvbWkiLAoJCQkJCSJzaG9wXFwubGV0dlxcLmNvbSI6ICJsZW1hbGwiLAoJCQkJCSJcXC5oYW5kdVxcLmNvbSI6ICJoYW5kdSIsCgkJCQkJIig/Ond3d1xcLnxeKXRhb3NodVxcLmNvbSI6ICJ0YW9zaHUiLAoJCQkJCSJcXC5vdWt1XFwuY29tIjogIm91a3UiLAoJCQkJCSJcXC5qMVxcLmNvbSI6ICJqMSIsCgkJCQkJIlxcLnptN1xcLmNuIjogInptNyIsCgkJCQkJIlxcLjE2ODhcXC5jb20iOiB7CgkJCQkJCW5hbWU6ICIxNjg4IiwKCQkJCQkJaGlkZWJhcjogITAKCQkJCQl9LAoJCQkJCSJcXC55aXd1Z291XFwuY29tIjogInlpd3Vnb3UiLAoJCQkJCSJcXC56aGl3b1xcLmNvbSI6ICJ6aGl3byIsCgkJCQkJIlxcLm11eWluZ3poaWppYVxcLmNvbSI6ICJtdXlpbmd6aGlqaWEiLAoJCQkJCSJcXC52bWFsbFxcLmNvbSI6ICJ2bWFsbCIsCgkJCQkJIlxcLmRpZGFtYWxsXFwuY29tIjogImRpZGFtYWxsIiwKCQkJCQkiXFwueGlqaS5jb20iOiAieGlqaSIsCgkJCQkJIlxcLnhpamllLmNvbSI6ICJ4aWppZSIsCgkJCQkJIlxcLm1pcWlcXC5jbiI6ICJtaXFpIiwKCQkJCQkiXFwuem9sXFwuY29tKD86JHwvfFxcPykiOiAiem9sIiwKCQkJCQkiem9sXFwuY29tXFwuY24iOiAiem9sIiwKCQkJCQkiXFwuY2FtZWxcXC5jb21cXC5jbiI6ICJjYW1lbCIsCgkJCQkJImNhbWVsLmNvbS5jbiI6ICJjYW1lbCIsCgkJCQkJIihcXC4pP2hvbWV2dlxcLmNvbSI6ICJob21ldnYiLAoJCQkJCSJcXC5wYWl4aWVcXC5uZXQiOiAicGFpeGllIiwKCQkJCQkiXFwudGFvM2NcXC5jb20iOiAidGFvM2MiLAoJCQkJCSJcXC5hbWF6b25cXC4oPzpjbnxjb20pIjogImFtYXpvbiIsCgkJCQkJIlxcLmRhbmdkYW5nXFwuY29tIjogImRhbmdkYW5nIiwKCQkJCQkiczhcXC50YW9iYW9cXC5jb20iOiAiczgiLAoJCQkJCSJ0YW9iYW9cXC4oPzpjb218aGspIjogewoJCQkJCQluYW1lOiAidGFvYmFvIiwKCQkJCQkJaGlkZWJhcjogITAKCQkJCQl9LAoJCQkJCSJcXC4oPzozNjBidXl8amQpXFwuY29tIjogIjM2MGJ1eSIsCgkJCQkJIlxcLig/OjM2MGJ1eXxqZClcXC5oayI6ICIzNjBidXkiLAoJCQkJCSJcXC55aXlhb2pkLmNvbSI6ICIzNjBidXkiLAoJCQkJCSJcXC5uZXdlZ2coXFwuY29tKT9cXC5jbiI6ICJuZXdlZ2ciLAoJCQkJCSJcXC5yZWRiYWJ5XFwuY29tXFwuY24iOiAicmVkYmFieSIsCgkJCQkJIlxcLjUxYnV5XFwuY29tIjogIjUxYnV5IiwKCQkJCQkiXFwueWl4dW5cXC5jb20iOiAiNTFidXkiLAoJCQkJCSJcXC5va2J1eVxcLmNvbSI6ICJva2J1eSIsCgkJCQkJIlxcLnN1bmluZ1xcLmNvbSI6ICJzdW5pbmciLAoJCQkJCSJcXC5jb284XFwuY29tIjogImNvbzgiLAoJCQkJCSJcXC5sdXNlblxcLmNvbSI6ICJsdXNlbiIsCgkJCQkJIlxcLmdvbWVcXC5jb21cXC5jbiI6ICJnb21lIiwKCQkJCQkiXFwuZ29tZWhvbWVcXC5jb20iOiAiZ29tZSIsCgkJCQkJIlxcLmdvbWVoaWdvXFwuaGsiOiAiZ29tZWhpZ28iLAoJCQkJCSJcXC55aGRcXC5jb20iOiAieWloYW9kaWFuIiwKCQkJCQkiXFwueWloYW9kaWFuXFwuY29tIjogInlpaGFvZGlhbiIsCgkJCQkJIlxcLjFtYWxsXFwuY29tIjogInlpaGFvZGlhbiIsCgkJCQkJIlxcLndvbWFpXFwuY29tIjogIndvbWFpIiwKCQkJCQkiXFwubGV5b3VcXC5jb21cXC5jbiI6ICJsZXlvdSIsCgkJCQkJIlxcLnNob3BpblxcLm5ldCI6ICJzaG9waW4iLAoJCQkJCSJcXC5ubzVcXC5jb21cXC5jbiI6ICJubzUiLAoJCQkJCSJcXC54aXVcXC5jb20iOiAieGl1IiwKCQkJCQkiXFwubWJhb2Jhb1xcLmNvbSI6ICJtYmFvYmFvIiwKCQkJCQkiXFwuMzYwa3hyXFwuY29tIjogIjM2MGt4ciIsCgkJCQkJIlxcLm02Z29cXC5jb20iOiAibTZnbyIsCgkJCQkJIlxcLmdvdVxcLmNvbSI6ICJtNmdvIiwKCQkJCQkiXFwuOTlyZWFkXFwuY29tIjogIjk5cmVhZCIsCgkJCQkJIlxcLmNoaW5hLXB1YlxcLmNvbSI6ICJjaGluYS1wdWIiLAoJCQkJCSJcXC5ib29rc2NoaW5hXFwuY29tIjogImJvb2tzY2hpbmEiLAoJCQkJCSJcXC5lZmVpaHVcXC5jb20iOiAiZWZlaWh1IiwKCQkJCQkiXFwueWludGFpXFwuY29tIjogInlpbnRhaSIsCgkJCQkJIlxcLnF1d2FuXFwuY29tIjogInF1d2FuIiwKCQkJCQkiXFwuazEyMVxcLmNvbSI6ICJrMTIxIiwKCQkJCQkiXFwuaGFwcGlnb1xcLmNvbSI6ICJoYXBwaWdvIiwKCQkJCQkiXFwuZ2FwXFwuY24iOiAiZ2FwIiwKCQkJCQkiXFwuYmluZ2dvXFwuY29tLyI6ICJiaW5nZ28iLAoJCQkJCSJcXC55b3Vnb3VcXC5jb20iOiAieW91Z291IiwKCQkJCQkiXFwuanhkeWZcXC5jb20iOiAianhkeWYiLAoJCQkJCSJcXC53aW54dWFuXFwuY29tIjogIndpbnh1YW4iLAoJCQkJCSJcXC5ib29rdXVcXC5jb20iOiAiYm9va3V1IiwKCQkJCQkiXFwuaml1eGlhblxcLmNvbSI6ICJqaXV4aWFuIiwKCQkJCQkiXFwudmFuY2xcXC5jb20iOiAidmFuY2wiLAoJCQkJCSJcXC4xMTFcXC5jb21cXC5jbiI6ICIxMTEiLAoJCQkJCSJcXC5zZmJlc3RcXC4oPzpoa3xjb20pIjogInNmYmVzdCIsCgkJCQkJIlxcLnZpcChzaG9wKT9cXC5jb20iOiAidmlwc2hvcCIsCgkJCQkJIlxcLmp1bWVpXFwuY29tIjogImp1bWVpIiwKCQkJCQkianVtZWlnbG9iYWxcXC5jb20iOiAianVtZWlnbG9iYWwiLAoJCQkJCSJcXC5sZWZlbmdcXC5jb20iOiAibGVmZW5nIiwKCQkJCQkid3d3XFwuYmVubGFpXFwuY29tIjogImJlbmxhaSIsCgkJCQkJIig/OlxcLnxeKWxldGFvXFwuY29tIjogImxldGFvIiwKCQkJCQkiXFwuMTM5c2hvcFxcLmNvbSI6ICIxMzlzaG9wIiwKCQkJCQkiKD86XFwufF4penpsMzY1XFwuY29tIjogInp6bDM2NSIsCgkJCQkJIlxcLnRpYW50aWFuXFwuY29tIjogInRpYW50aWFuIiwKCQkJCQkiXFwudGFveGllXFwuY29tIjogInRhb3hpZSIsCgkJCQkJIlxcLmdqd1xcLmNvbSI6ICJnanciLAoJCQkJCSJ3d3dcXC5kMVxcLmNvbVxcLmNuIjogImQxIiwKCQkJCQkiXFwuaWh1c2hcXC5jb20iOiAiaWh1c2giLAoJCQkJCSJ3d3dcXC5zXFwuY24iOiAicyIsCgkJCQkJIlxcLig/Om1vb25iYXNhfGtvcmlybHxydXRpc2hlcnxzdW9yYW5nfGFsYXZlc3xpbmcyaW5nfDAtMTAwc3xxamhlcmJ8bW9udGVhbW9yKVxcLmNvbSI6ICJtb29uYmFzYSIsCgkJCQkJIlxcLndhbmdqaXVcXC5jb20iOiAid2FuZ2ppdSIsCgkJCQkJIlxcLmxpZWJvXFwuY29tIjogImxpZWJvIiwKCQkJCQkiXFwuZXNwcml0XFwuY24iOiAiZXNwcml0IiwKCQkJCQkiKD86XFwufF4pbGFtaXVcXC5jb20iOiAibGFtaXUiLAoJCQkJCSJcXC5haW1lclxcLmNvbVxcLmNuIjogImFpbWVyIiwKCQkJCQkid3d3XFwua2FkYW5nXFwuY29tIjogImthZGFuZyIsCgkJCQkJInd3d1xcLmxpemlcXC5jb20iOiAibGl6aSIsCgkJCQkJInd3d1xcLm1ldHJvbWFsbFxcLmNuIjogIm1ldHJvbWFsbCIsCgkJCQkJInd3d1xcLnBiYVxcLmNuIjogInBiYSIsCgkJCQkJIlxcLnNoYW5ncGluXFwuY29tIjogInNoYW5ncGluIiwKCQkJCQkiXFwud2JpYW9cXC5jbiI6ICJ3YmlhbyIsCgkJCQkJIlxcLmhhbmR1eWlzaGVcXC5jb20iOiAiaGFuZHV5aXNoZSIsCgkJCQkJIlxcLmVoYWllclxcLmNvbSI6ICJlaGFpZXIiLAoJCQkJCSJcXC5zZWNvb1xcLmNvbSI6ICJzZWNvbyIsCgkJCQkJIig/OnZpdmlhbnxsaW5rbWFzYXxtYXNhbWFzbylcXC4oPzpjb218Y24pIjogIm1hc2FtYXNvIiwKCQkJCQkid3d3XFwubmFydWtvXFwuY24iOiAibmFydWt1IiwKCQkJCQkid3d3XFwuc3BvcnRpY2FcXC5jbiI6ICJzcG9ydGljYSIsCgkJCQkJIig/OlxcLnxeKXhpZnVxdWFuXFwuY29tIjogInhpZnVxdWFuIiwKCQkJCQkid3d3XFwubWlsaWVyXFwuY29tIjogIm1pbGllciIsCgkJCQkJInd3d1xcLm5vcFxcLmNuIjogIm5vcCIsCgkJCQkJIlxcLmxlbm92b1xcLmNvbSI6ICJsZW5vdm8iLAoJCQkJCSJzaG9wXFwubGVub3ZvXFwuY29tXFwuY24iOiAibGVub3ZvIiwKCQkJCQkic2hvcFxcLmxlbm92b21vYmlsZVxcLmNvbSI6ICJsZW5vdm8iLAoJCQkJCSJcXC4xODlcXC5jbiI6ICIxODkiLAoJCQkJCSJcXC5oaWNkbWFcXC5jb20iOiAiaGljZG1hIiwKCQkJCQkiXFwuZTEwMFxcLmNuIjogImUxMDAiLAoJCQkJCSJzdG9yZVxcLnNhbXN1bmdcXC5jb20iOiAic2Ftc3VuZyIsCgkJCQkJInd3dy5hcHBsZVxcLmNvbSI6ICJhcHBsZSIsCgkJCQkJInN0b3JlLmFwcGxlXFwuY29tIjogImFwcGxlIiwKCQkJCQkiXFwubWVpenVcXC5jb20iOiAibWVpenUiLAoJCQkJCSJcXC45NThzaG9wXFwuY29tIjogIjk1OHNob3AiLAoJCQkJCSJcXC5va2hxYlxcLmNvbSI6ICJva2hxYiIsCgkJCQkJIlxcLnp0ZWRldmljZVxcLmNvbVxcLmNuIjogInp0ZWRldmljZSIsCgkJCQkJIlxcLmt1YWlzaHViYW9cXC5jb20iOiAia3VhaXNodWJhbyIsCgkJCQkJIlxcLmx2eW91bWFsbFxcLmNvbSI6ICJsdnlvdW1hbGwiLAoJCQkJCSIoPzp3d3dcXC58Xil4XFwuY29tXFwuY24iOiAieCIsCgkJCQkJIlxcLmxpbmdzaGlcXC5jb20iOiAibGluZ3NoaSIsCgkJCQkJInd3d1xcLmN0cmlwXFwuY29tIjogImN0cmlwIiwKCQkJCQkiXFwuenVpcGluXFwuY24iOiAienVpcGluIiwKCQkJCQkid3d3XFwueGdiYWJ5XFwuY29tIjogImJicmVhZHkiLAoJCQkJCSJcXC55b2hvYnV5XFwuY29tIjogInlvaG9idXkiLAoJCQkJCSJcXC5sdm1hbWFcXC5jb20iOiAibHZtYW1hIiwKCQkJCQkiKD86XFwufF4pcW1hbmdvXFwuY29tIjogInFtYW5nbyIsCgkJCQkJInd3d1xcLjIyOGNhaVxcLmNvbSI6ICIyMjhjYWkiLAoJCQkJCSJcXC5pa2p0YW9cXC5jb20iOiAiaWtqdGFvIiwKCQkJCQkid3d3XFwuYmVzdGtlZXBcXC5jbiI6ICJpa2p0YW8iLAoJCQkJCSJcXC5iYWd0cmVlXFwuY24iOiAiYmFndHJlZSIsCgkJCQkJInlpY2hlbmdwaW5cXC5jb20iOiAieWljaGVuZ3BpbiIsCgkJCQkJInpnemN3XFwuY29tIjogewoJCQkJCQluYW1lOiAiemd6Y3ciLAoJCQkJCQloaWRlYmFyOiAhMAoJCQkJCX0sCgkJCQkJInd3d1xcLm1pYVxcLmNvbSI6ICJtaXlhYmFvYmVpIiwKCQkJCQkiXFwubWl5YWJhb2JlaS5oayI6ICJtaXlhYmFvYmVpIiwKCQkJCQkiXFwudWxlXFwuY29tIjogInVsZSIsCgkJCQkJIm1pbnNoZW5nZWNcXC5jb20iOiAibWluc2hlbmdlYyIsCgkJCQkJIndhbmdmdWppbmdcXC5jb20iOiAid2FuZ2Z1amluZyIsCgkJCQkJIlxcLnF1bmFyXFwuY29tIjogInF1bmFyIiwKCQkJCQkiXFwubWVpbGVsZVxcLmNvbSI6ICJtZWlsZWxlIiwKCQkJCQkid3d3XFwuNTV0dWFuXFwuY29tIjogIjU1dHVhbiIsCgkJCQkJImppbmppYW5naW5uc1xcLmNvbSI6ICJqaW5qaWFuZ2lubnMiLAoJCQkJCSJcXC5lbG9uZ1xcLmNvbSI6ICJlbG9uZyIsCgkJCQkJInBvZGlubnNcXC5jb20iOiAicG9kaW5ucyIsCgkJCQkJIm1hbmdvY2l0eVxcLmNvbSI6ICJtYW5nb2NpdHkiLAoJCQkJCSJcXC41MDBcXC5jb20iOiAiNTAwIiwKCQkJCQkid3d3XFwubHlcXC5jb20iOiAibHkiLAoJCQkJCSJlLWxpbmluZ1xcLmNvbSI6ICJlLWxpbmluZyIsCgkJCQkJIlxcLmxpbmluZ1xcLmNvbSI6ICJsaW5pbmciLAoJCQkJCSJcXC5rb29sZWFyblxcLmNvbSI6ICJrb29sZWFybiIsCgkJCQkJIlxcLnNwcmluZ3RvdXJcXC5jb20iOiAic3ByaW5ndG91ciIsCgkJCQkJIlxcLnFpbnFpbmJhYnlcXC5jb20iOiAicWlucWluYmFieSIsCgkJCQkJIndpbmVuaWNlXFwuY29tIjogIndpbmVuaWNlIiwKCQkJCQkiXFwuc2FzYVxcLmNvbSI6ICJzYXNhIiwKCQkJCQkiKD86XFwufF4pNWx1eFxcLmNvbSI6ICI1bHV4IiwKCQkJCQkiXFwuMjI4XFwuY29tXFwuY24iOiAiMjI4IiwKCQkJCQkiXFwucnJzXFwuY29tIjogInJycyIsCgkJCQkJIlxcLnJyc2prLmNvbSI6ICJycnMiLAoJCQkJCSIoPzpcXC58XilidXlcXC5jY2JcXC5jb20iOiAiY2NiIiwKCQkJCQkiXFwuYmFuZ2dvXFwuY29tIjogImJhbmdnbyIsCgkJCQkJInd3d1xcLmFtYXpvblxcLmNvXFwuanAiOiAiYW1hem9uIiwKCQkJCQkid3d3XFwuYW1hem9uXFwuaW4iOiAiYW1hem9uIiwKCQkJCQkid3d3XFwuYW1hem9uXFwuZnIiOiAiYW1hem9uIiwKCQkJCQkid3d3XFwuYW1hem9uXFwuZGUiOiAiYW1hem9uIiwKCQkJCQkid3d3XFwuYW1hem9uXFwuaXQiOiAiYW1hem9uIiwKCQkJCQkid3d3XFwuYW1hem9uXFwuY28udWsiOiAiYW1hem9uIiwKCQkJCQkid3d3XFwuYW1hem9uXFwubmwiOiAiYW1hem9uIiwKCQkJCQkid3d3XFwuYW1hem9uXFwuZXMiOiAiYW1hem9uIiwKCQkJCQkid3d3XFwuYW1hem9uXFwuY2EiOiAiYW1hem9uIiwKCQkJCQkid3d3XFwuYW1hem9uXFwuY29tXFwubXgiOiAiYW1hem9uIiwKCQkJCQkid3d3XFwuYW1hem9uXFwuY29tXFwuYnIiOiAiYW1hem9uIiwKCQkJCQkid3d3XFwuYW1hem9uXFwuY29tXFwuYXUiOiAiYW1hem9uIiwKCQkJCQkic3RvcmVcXC5sb2dpdGVjaFxcLmNvbVxcLmNuIjogImxvZ2l0ZWNoIiwKCQkJCQkiXFwuYm9vaGVlXFwuY29tIjogImJvb2hlZSIsCgkJCQkJIm5pa2VcXC5jb20iOiAibmlrZSIsCgkJCQkJIlxcLmppYW5rZVxcLmNvbSI6ICJqaWFua2UiLAoJCQkJCSJcXC4zNjBrYWRcXC5jb20iOiAiMzYwa2FkIiwKCQkJCQkiXFwubGJ4Y25cXC5jb20iOiAibGJ4Y24iLAoJCQkJCSJcXC5tZWljaVxcLmNvbSI6ICJtZWljaSIsCgkJCQkJIlxcLmJlaWJlaVxcLmNvbSI6ICJiZWliZWkiLAoJCQkJCSJcXC5hbGlleHByZXNzLmNvbSI6IHsKCQkJCQkJbmFtZTogImFsaWV4cHJlc3MiLAoJCQkJCQloaWRlYmFyOiAhMAoJCQkJCX0sCgkJCQkJIlxcLjZwbVxcLmNvbSI6ICI2cHgiLAoJCQkJCSJcXC5nbmNcXC5jb20iOiAiZ25jIiwKCQkJCQkiXFwubXloYWJpdFxcLmNvbSI6ICJteWhhYml0IiwKCQkJCQkiXFwuc2hvcGJvcFxcLmNvbSI6ICJzaG9wYm9wIiwKCQkJCQkiXFwuZHJ1Z3N0b3JlXFwuY29tIjogImRydWdzdG9yZSIsCgkJCQkJInd3d1xcLndhbGdyZWVuc1xcLmNvbSI6ICJ3YWxncmVlbnMiLAoJCQkJCSJzaWVycmF0cmFkaW5ncG9zdFxcLmNvbSI6ICJzaWVycmF0cmFkaW5ncG9zdCIsCgkJCQkJIlxcLm5ld2VnZ1xcLmNvbSI6ICJuZXdlZ2ctdXMiLAoJCQkJCSJcXC5qb21hc2hvcFxcLmNvbSI6ICJqb21hc2hvcCIsCgkJCQkJIlxcLmFzaGZvcmRcXC5jb20iOiAiYXNoZm9yZCIsCgkJCQkJImxvb2tmYW50YXN0aWNcXC5jb20iOiAibG9va2ZhbnRhc3RpYy1jb20iLAoJCQkJCSJcXC5yZWlcXC5jb20iOiAicmVpIiwKCQkJCQkiXFwuaWhlcmJcXC5jb20iOiAiaWhlcmIiLAoJCQkJCSJcXC5jYXJ0ZXJzXFwuY29tIjogImNhcnRlcnMiLAoJCQkJCSJ3d3dcXC5lbmRjbG90aGluZ1xcLmNvbSI6ICJlbmRjbG90aGluZyIsCgkJCQkJIlxcLmNhbXBzYXZlclxcLmNvbSI6ICJjYW1wc2F2ZXIiLAoJCQkJCSJnbG9iYWxcXC5yYWt1dGVuXFwuY29tIjogInJha3V0ZW4iLAoJCQkJCSIoPzpcXC58XikxMDB5dWVcXC5jb20iOiAiMTAweXVlIiwKCQkJCQkid3d3XFwud29vdFxcLmNvbSI6ICJ3b290IiwKCQkJCQkid3d3XFwuaGFpdGFvY2hlbmdcXC5jb20iOiAiaGFpdGFvY2hlbmciLAoJCQkJCSJqb2VzbmV3YmFsYW5jZW91dGxldFxcLmNvbSI6ICJqb2VzbmV3YmFsYW5jZW91dGxldCIsCgkJCQkJIlxcLmZpbmlzaGxpbmVcXC5jb20iOiAiZmluaXNobGluZSIsCgkJCQkJIlxcLnZpdGFjb3N0XFwuY29tIjogInZpdGFjb3N0IiwKCQkJCQkiXFwuZ3JvdXBvbi5jb20iOiAiZ3JvdXBvbiIsCgkJCQkJIlxcLnN1cHVtYWxsXFwuY29tIjogInN1cHVtYWxsIiwKCQkJCQkid3d3MVxcLm1hY3lzXFwuY29tIjogIm1hY3lzIiwKCQkJCQkid3d3XFwubW9vc2VqYXdcXC5jb20iOiAibW9vc2VqYXciLAoJCQkJCSJ3d3dcXC5sZW1hbGxcXC5jb20iOiAibGVtYWxsIiwKCQkJCQkid3d3XFwuaml1bWVpXFwuY29tIjogImppdW1laSIsCgkJCQkJIig/OlxcLnxeKWNodW5zaHVpdGFuZ1xcLmNvbSI6ICJjaHVuc2h1aXRhbmciLAoJCQkJCSJ3d3dcXC5kYWxpbmcuY29tIjogImRhbGluZyIsCgkJCQkJInd3d1xcLm95ZWFoXFwuY29tIjogIm95ZWFoIiwKCQkJCQkid3d3XFwubW9yZWZvb2RcXC5jb20iOiAibW9yZWZvb2QiLAoJCQkJCSJ3d3dcXC55dW1teTc3XFwuY29tIjogInl1bW15NzciLAoJCQkJCSJ3d3dcXC5mcnVpdGRheVxcLmNvbSI6ICJmcnVpdGRheSIsCgkJCQkJInd3d1xcLmdpbHRcXC5jb20iOiAiZ2lsdCIsCgkJCQkJInd3d1xcLmZlbmdxdVxcLmNvbSI6ICJmZW5ncXUiLAoJCQkJCSJ3d3dcXC5tZWlcXC5jb20iOiAibWVpIiwKCQkJCQkiXFwudnNpZ29cXC5jbiI6ICJ2c2lnbyIsCgkJCQkJInd3d1xcLmtlZWRlXFwuY29tIjogImtlZWRlIiwKCQkJCQkid3d3XFwua2VkZVxcLmNvbSI6ICJrZWVkZSIsCgkJCQkJInd3d1xcLnNob3dqb3lcXC5jb20iOiAic2hvd2pveSIsCgkJCQkJIlxcLm9jalxcLmNvbVxcLmNuIjogIm9jaiIsCgkJCQkJIlxcLm9jalxcLmtyIjogIm9jaiIsCgkJCQkJIlxcLnRtYWxsXFwuKD86Y29tfGhrKSI6IHsKCQkJCQkJbmFtZTogInRtYWxsIiwKCQkJCQkJaGlkZWJhcjogITAKCQkJCQl9LAoJCQkJCSJ3d3dcXC5zdW5kYW5cXC5jb20iOiAic3VuZGFuIiwKCQkJCQkid3d3XFwuamlhZVxcLmNvbSI6ICJqaWFlIiwKCQkJCQkiKD86XFwufF4pemF6aGlwdVxcLmNvbSI6ICJ6YXpoaXB1IiwKCQkJCQkid3d3XFwuZWFzZWV5ZXNcXC5jb20iOiAiZWFzZWV5ZXMiLAoJCQkJCSJtaWNyb3NvZnRzdG9yZVxcLmNvbVxcLmNuIjogIm1pY3Jvc29mdHN0b3JlIiwKCQkJCQkiKD86XFwufF4peGdkcVxcLmNvbSI6ICJ4Z2RxIiwKCQkJCQkiXFwuYmVzdGNha2VcXC5jb20iOiAiYmVzdGNha2UiLAoJCQkJCSJcXC5sb3ZvXFwuY24iOiAibG92byIsCgkJCQkJInd3d1xcLmh1YVxcLmNvbSI6ICJodWEiLAoJCQkJCSJ3d3dcXC54dGVwXFwuY29tXFwuY24iOiAieHRlcCIsCgkJCQkJInd3d1xcLnN0YXBsZXNcXC5jbiI6ICJzdGFwbGVzIiwKCQkJCQkiKD86XFwufF4pZWZvdGlsZVxcLmNvbSI6ICJlZm90aWxlIiwKCQkJCQkid3d3XFwuemhlODAwXFwuY29tIjogInpoZTgwMCIsCgkJCQkJInd3d1xcLmFpZGFpXFwuY29tIjogImFpZGFpIiwKCQkJCQkid3d3XFwuYmZ0dlxcLmNvbSI6ICJiZnR2IiwKCQkJCQkiXFwudHVqaWFcXC5jb20iOiAidHVqaWEiLAoJCQkJCSJcXC5jb3NtZVxcLmNvbSI6ICJjb3NtZSIsCgkJCQkJInd3d1xcLmRpYXBlcnNcXC5jb20iOiAiZGlhcGVycyIsCgkJCQkJInd3d1xcLndpbmRlbG5cXC5kZSI6ICJ3aW5kZWxuIiwKCQkJCQkid3d3XFwuYmFieW5lb1xcLmRlIjogImJhYnluZW8iLAoJCQkJCSJ3d3dcXC5lc2NlbnR1YWxcXC5jb20iOiAiZXNjZW50dWFsIiwKCQkJCQkid3d3XFwudGhld2F0Y2hlcnlcXC5jb20iOiAidGhld2F0Y2hlcnkiLAoJCQkJCSJcXC5iaWNjYW1lcmEuY29tIjogImJpY2NhbWVyYSIsCgkJCQkJIlxcLnR1aHUuKD86Y258Y29tKSI6ICJ0dWh1IiwKCQkJCQkiZXNob3BcXC5odGNcXC5jb20iOiAiaHRjIiwKCQkJCQkicm9zZW9ubHlcXC5jb21cXC5jbiI6ICJyb3Nlb25seSIsCgkJCQkJIlxcLnJvbmczNjAuY29tIjogInJvbmczNjAiLAoJCQkJCSJcXC5uaXdvZGFpLmNvbSI6ICJuaXdvZGFpIiwKCQkJCQkid3d3XFwuZXN0ZWVsYXVkZXIuY29tIjogImVzdGVlbGF1ZGVyIiwKCQkJCQkiXFwuc2Frc2ZpZnRoYXZlbnVlLmNvbSI6ICJzYWtzZmlmdGhhdmVudWUiLAoJCQkJCSJcXC50YXF1LmNuIjogInRhcXUiLAoJCQkJCSJcXC5xeWVyLmNvbSI6ICJxeWVyIiwKCQkJCQkiXFwuYXhtYWxsXFwuY29tXFwuYXUiOiAiYXhtYWxsIiwKCQkJCQkiXFwubXVqaS5uZXQiOiAibXVqaSIsCgkJCQkJIig/OlxcLnxeKWdtYXJrZXQuY28ua3IiOiAiZ21hcmtldCIsCgkJCQkJImVuZ2xpc2guMTFzdC5jby5rciI6ICIxMXN0IiwKCQkJCQkiXFwuc21hcnRiYXJnYWluc1xcLmNvbSI6ICJzbWFydGJhcmdhaW5zIiwKCQkJCQkiXFwuc2hvcHBpbmdcXC55YWhvb1xcLmNvXFwuanAiOiAieWFob29zaG9wIiwKCQkJCQkiXFwuYmxvb21pbmdkYWxlc1xcLmNvbSI6ICJibG9vbWluZ2RhbGVzIiwKCQkJCQkiXFwubWlraWhvdXNlXFwuanAiOiAibWlraWhvdXNlIiwKCQkJCQkiXFwudG95c3J1c1xcLmNvXFwuanAiOiAidG95c3J1cyIsCgkJCQkJIlxcLmNvbWZvcnRmaXJzdFxcLmNvbSI6ICJjb21mb3J0Zmlyc3QiLAoJCQkJCSJcXC5neW1ib3JlZVxcLmNvbSI6ICJneW1ib3JlZSIsCgkJCQkJIlxcLmFsYmVlYmFieS5jb20iOiAiYWxiZWViYWJ5IiwKCQkJCQkiXFwuYmFieW1hcmt0LmRlIjogImJhYnltYXJrdCIsCgkJCQkJIlxcLnVnZ2F1c3RyYWxpYS5jby51ayI6ICJ1Z2dhdXN0cmFsaWEiLAoJCQkJCSJ3d3dcXC51Z2dcXC5jb20iOiAidWdnIiwKCQkJCQkibmVpbWFubWFyY3VzXFwuY29tIjogIm5laW1hbm1hcmN1cyIsCgkJCQkJInd3d1xcLnNob2VidXkuY29tIjogInNob2VidXkiLAoJCQkJCSJ3d3dcXC5zenVsXFwuY29tIjogInN6dWwiLAoJCQkJCSJ3d3dcXC50aW1leC5jb20iOiAidGltZXgiLAoJCQkJCSJcXC50aW1leC5jb20iOiAidGltZXgiLAoJCQkJCSJ3d3dcXC5rYXkuY29tIjogImtheSIsCgkJCQkJIlxcLmV3YXRjaGVzLmNvbSI6ICJld2F0Y2hlcyIsCgkJCQkJIlxcLnN3YXJvdnNraS5jb20iOiAic3dhcm92c2tpIiwKCQkJCQkiXFwud29ybGRvZndhdGNoZXMuY29tIjogIndvcmxkb2Z3YXRjaGVzIiwKCQkJCQkid3d3LmRhbmllbHdlbGxpbmd0b24uY29tIjogImRhbmllbHdlbGxpbmd0b24iLAoJCQkJCSJcXC5iZWF1dHliYXkuY29tIjogImJlYXV0eWJheSIsCgkJCQkJIlxcLmJlYXV0eS5jb20iOiAiYmVhdXR5IiwKCQkJCQkid3d3LmJlYXV0eWJhci5jb20iOiAiYmVhdXR5YmFyIiwKCQkJCQkic2tpbnN0b3JlLmNvbSI6ICJza2luc3RvcmUiLAoJCQkJCSJ3d3cubGFuZWlnZS5jb20iOiAibGFuZWlnZSIsCgkJCQkJIig/OlxcLnxeKWJvc2UuY29tIjogImJvc2UiLAoJCQkJCSIoPzpcXC58XiliZXN0YnV5LmNvbSI6ICJiZXN0YnV5IiwKCQkJCQkiYmhwaG90b3ZpZGVvLmNvbSI6ICJiaHBob3RvdmlkZW8iLAoJCQkJCSIoPzpcXC58Xilzb255LmpwIjogInNvbnkiLAoJCQkJCSJcXC5ibFxcLmNvbSI6ICJibCIsCgkJCQkJIig/OlxcLnxeKXlvdS4xNjMuY29tIjogInlvdTE2MyIsCgkJCQkJIig/OlxcLnxeKWppbmppYW5nLmNvbSI6ICJqaW5qaWFuZyIsCgkJCQkJIig/OlxcLnxeKWJlc3RpbmZvb2RzLmNvbSI6ICJiZXN0aW5mb29kcyIsCgkJCQkJIig/OlxcLnxeKWppbnhpYW5nLmNvbSI6ICJqaW54aWFuZyIsCgkJCQkJIig/OlxcLnxeKWd1b2ppbWFtaS5jb20iOiAiZ3VvamltYW1pIiwKCQkJCQkiKD86XFwufF4pYmFpeWFuZ3dhbmcuY29tIjogImJhaXlhbmd3YW5nIiwKCQkJCQkiXFwuYW95b3UuY29tIjogImFveW91IiwKCQkJCQkiKD86XFwufF4pcm95eW91bmdjaGVtaXN0LmNvbS5hdSI6ICJyb3l5b3VuZ2NoZW1pc3QiLAoJCQkJCSIoPzpcXC58XiltZWRpaGVhbHNob3AuY29tIjogIm1lZGloZWFsc2hvcCIsCgkJCQkJIig/OlxcLnxeKTEwMDFwaGFybWFjaWVzLmNvbSI6ICIxMDAxcGhhcm1hY2llcyIsCgkJCQkJIig/OlxcLnxeKWxvb2tmYW50YXN0aWMuY24iOiAibG9va2ZhbnRhc3RpYy1jbiIsCgkJCQkJIig/OlxcLnxeKTFcXC4xNjNcXC5jb20iOiAiMS0xNjMiLAoJCQkJCSJ3d3dcXC5rYWl4aW5iYW8uY29tIjogImthaXhpbmJhbyIsCgkJCQkJIig/OlxcLnxeKWJvb2tpbmcuY29tIjogImJvb2tpbmciLAoJCQkJCSIoPzpcXC58XilqdWFucGkuY29tIjogImp1YW5waSIsCgkJCQkJIig/OlxcLnxeKXBoYXJtYWN5b25saW5lLmNvbSI6ICJwaGFybWFjeW9ubGluZSIsCgkJCQkJIig/OlxcLnxeKWJvZHlndWFyZGFwb3RoZWtlLmNvbSI6ICJib2R5Z3VhcmRhcG90aGVrZSIsCgkJCQkJIig/OlxcLnxeKXB1cmNvdHRvbi5jb20iOiAicHVyY290dG9uIiwKCQkJCQkiKD86XFwufF4pd3N0eC5jb20iOiAid3N0eCIsCgkJCQkJInd3d1xcLm1pZGVhXFwuY29tIjogIm1pZGVhIiwKCQkJCQkibWFsbFxcLm1pZGVhXFwuY29tIjogIm1pZGVhIiwKCQkJCQkiXFwua2FsdWxpLmNvbSI6ICJrYWx1bGkiLAoJCQkJCSIoPzpcXC58Xil5dW5ob3VcXC5jb20iOiAieXVuaG91IiwKCQkJCQkiKD86XFwufF4paGFpdHVuY3VuXFwuY29tIjogImhhaXR1bmN1biIsCgkJCQkJIig/OlxcLnxeKXZtZWlcXC5jb20iOiAidm1laSIsCgkJCQkJIig/OlxcLnxeKWpnYlxcLmNuIjogImpnYiIsCgkJCQkJIig/OlxcLnxeKTUxZGluXFwuY29tIjogIjUxZGluIiwKCQkJCQkiKD86XFwufF4pYm9xaWlcXC5jb20iOiAiYm9xaWkiLAoJCQkJCSJjbi50b3Vyc2ZvcmZ1blxcLmNvbSI6ICJ0b3Vyc2ZvcmZ1biIsCgkJCQkJIig/OlxcLnxeKWx1bHV0cmlwXFwuY29tIjogImx1bHV0cmlwIiwKCQkJCQkiKD86XFwufF4pc3BpZGVyXFwuY29tXFwuY24iOiAic3BpZGVyIiwKCQkJCQkiKD86XFwufF4pd2FsbWFydFxcLmNvbSI6ICJ3YWxtYXJ0IiwKCQkJCQkibWFsbC50bzh0by5jb20iOiAidG84dG8iLAoJCQkJCSJ3d3cub3Bwb3Nob3AuY24iOiAib3Bwb3Nob3AiLAoJCQkJCSJiYW9iZWlnZXppLmNvbSI6ICJiYW9iZWlnZXppIiwKCQkJCQkid3d3LnlhbzEyMy5jb20iOiAieWFvMTIzIiwKCQkJCQkid3d3Lm1lbmdsdS5jb20iOiAibWVuZ2x1IiwKCQkJCQkid3d3Lmd1b3BpLmNvbSI6ICJndW9waSIsCgkJCQkJInd3dy5saWtlZmFjZS5jb20iOiAibGlrZWZhY2UiLAoJCQkJCSJ3d3cubWFsbHZ2LmNvbSI6ICJob21ldnYiLAoJCQkJCSJ3d3cubWFya21hbGwuY29tIjogIm1hcmttYWxsIiwKCQkJCQkid3d3XFwuYmFpY2hlbmdcXC5jb20iOiAiYmFpY2hlbmciLAoJCQkJCSJ3d3dcXC5zdWFuanV6aVxcLmNvbSI6ICJzdWFuanV6aSIsCgkJCQkJIlxcLmppbnhpYW5nXFwuY29tIjogImppbnhpYW5nIiwKCQkJCQkiXFwuYW9teWdvZFxcLmNvbSI6ICJhb215Z29kIiwKCQkJCQkiKD86XFwufF4pbHVvbGFpXFwuY24iOiAibHVvbGFpIiwKCQkJCQkiXFwudml2b1xcLmNvbVxcLmNuIjogInZpdm8iLAoJCQkJCSJcXC5kaXhpbnRvbmdcXC5jb20iOiAiZGl4aW50b25nIiwKCQkJCQkiXFwuY29vbHBhZFxcLmNvbSI6ICJjb29scGFkIiwKCQkJCQkiXFwuc2tnXFwuY29tIjogInNrZyIsCgkJCQkJInZpcFxcLmlxaXlpXFwuY29tIjogImlxaXlpIiwKCQkJCQkiXFxhb2xhaWdvXFwuY29tIjogImFvbGFpZ28iLAoJCQkJCSJ2aXBcXC5taXNzZnJlc2hcXC5jbiI6ICJtaXNzZnJlc2giLAoJCQkJCSJcXC5wdXNoZW5rdWFqaW5nXFwuY29tIjogInB1c2hlbmt1YWppbmciLAoJCQkJCSJjblxcLmZlZWx1bmlxdWVcXC5jb20iOiAiZmVlbHVuaXF1ZSIsCgkJCQkJIlxcLmNoZW1pc3RkaXJlY3RcXC5jb21cXC5hdSI6ICJjaGVtaXN0ZGlyZWN0IiwKCQkJCQkiXFwubmV0cGhhcm1hY3lcXC5jb1xcLm56IjogIm5ldHBoYXJtYWN5IiwKCQkJCQkiXFwucGhhcm1hY3k0bGVzc1xcLmNvbVxcLmF1IjogInBoYXJtYWN5NGxlc3MiLAoJCQkJCSJcXC5waGFybWFjeWRpcmVjdFxcLmNvXFwubnoiOiAicGhhcm1hY3lkaXJlY3QiLAoJCQkJCSJcXC5hbWNhbFxcLmNvbVxcLmF1IjogImFtY2FsIiwKCQkJCQkiXFwubGFyZWRvdXRlXFwuY24iOiAibGFyZWRvdXRlIiwKCQkJCQkiY25cXC51bnNlcmVrbGVpbmVhcG90aGVrZVxcLmRlIjogInVuc2VyZWtsZWluZWFwb3RoZWtlIiwKCQkJCQkiXFwuZXJ3aW5tdWVsbGVyXFwuY29tXFwuY24iOiAiZXJ3aW5tdWVsbGVyIiwKCQkJCQkiXFwua2l3aWRpc2NvdmVyeVxcLmNvXFwubnoiOiAia2l3aWRpc2NvdmVyeSIsCgkJCQkJIlxcLnNwcmluZ2xhbmVcXC5kZSI6ICJzcHJpbmdsYW5lIiwKCQkJCQkiXFwuamFrby1vXFwuY29tIjogImpha28tbyIsCgkJCQkJIlxcLmVhc3l0b3lzXFwuY24iOiAiZWFzeXRveXMiLAoJCQkJCSJcXC50bGNwaGFybWFjeVxcLmNuXFwuY29tIjogInRsY3BoYXJtYWN5IiwKCQkJCQkiXFwuYmllbm1hbmdlclxcLmNuIjogImJpZW5tYW5nZXIiLAoJCQkJCSJcXC5kZXdhcmVuXFwuY29tIjogImRld2FyZW4iLAoJCQkJCSJcXC5kaXNjb3VudC1hcG90aGVrZVxcLmRlIjogImRpc2NvdW50LWFwb3RoZWtlIiwKCQkJCQkiXFwuaG9sbGFuZC1hdC1ob21lXFwuY29tIjogImhvbGxhbmQtYXQtaG9tZSIsCgkJCQkJIlxcLnlvdXl1XFwuY29tIjogInlvdXl1IiwKCQkJCQkiXFwua2l3aXN0YXJjYXJlXFwuY29tIjogImtpd2lzdGFyY2FyZSIsCgkJCQkJIlxcLmxlbm92b21vYmlsZVxcLmNvbSI6ICJsZW5vdm9tb2JpbGUiLAoJCQkJCSJcXC41MXRhb3VrXFwuY29tIjogIjUxdGFvdWsiLAoJCQkJCSJcXC5raWVobHNcXC5jb20iOiAia2llaGxzIiwKCQkJCQkiXFwuemFwcG9zXFwuY29tIjogInphcHBvcyIsCgkJCQkJIlxcLmNvYWNoXFwuY29tIjogImNvYWNoIiwKCQkJCQkiXFwueW9veFxcLmNuIjogInlvb3giLAoJCQkJCSJcXC4xMXN0cmVldFxcLmNvbVxcLmNuIjogIjExc3RyZWV0IiwKCQkJCQkiXFwuYmFcXC5kZSI6ICJiYSIsCgkJCQkJInd3d1xcLmhxaGFpclxcLmNvbSI6ICJocWhhaXIiLAoJCQkJCSJ3d3dcXC5rYXRlc3BhZGVcXC5jb1xcLnVrIjogImthdGVzcGFkZSIsCgkJCQkJImNuXFwudml0YWZ5XFwuZGUiOiAidml0YWZ5IiwKCQkJCQkid3d3XFwueW9veFxcLmNuIjogInlvb3giLAoJCQkJCSJcXC5tMThcXC5jb20iOiAibTE4IiwKCQkJCQkiY29tZm9ydGZpcnN0XFwuY29tIjogImNvbWZvcnRmaXJzdCIsCgkJCQkJImNoaW5hXFwubG90dGVcXC5jb20iOiAibG90dGUiLAoJCQkJCSJcXC5jYXJyZWZvdXJcXC5jbiI6ICJjYXJyZWZvdXIiLAoJCQkJCSJ3d3dcXC50ZWE3XFwuY29tIjogInRlYTciLAoJCQkJCSJcXC56aG9uZ2ppdS5jbiI6ICJ6aG9uZ2ppdSIsCgkJCQkJIlxcLnB1emV5ZlxcLmNvbSI6ICJwdXpleWYiLAoJCQkJCSJ3d3dcXC5rb2hsc1xcLmNvbSI6ICJrb2hscyIsCgkJCQkJInd3d1xcLmJvZHlidWlsZGluZ1xcLmNvbSI6ICJib2R5YnVpbGRpbmciLAoJCQkJCSJcXC5ub3Jkc3Ryb21cXC5jb20iOiAibm9yZHN0cm9tIiwKCQkJCQkid3d3XFwuY29zdGNvXFwuY29tIjogImNvc3RjbyIsCgkJCQkJInd3d1xcLnRhcmdldFxcLmNvbSI6ICJ0YXJnZXQiLAoJCQkJCSJ3d3dcXC5rbWFydFxcLmNvbSI6ICJrbWFydCIsCgkJCQkJInd3d1xcLm92ZXJzdG9ja1xcLmNvbSI6ICJvdmVyc3RvY2siLAoJCQkJCSJ3d3dcXC5zZWFyc1xcLmNvbSI6ICJzZWFycyIsCgkJCQkJInd3d1xcLnNob3Byb2JhbVxcLmNvbSI6ICJzaG9wcm9iYW0iLAoJCQkJCSJtYWxsXFwuZ291bWluXFwuY29tIjogImdvdW1pbiIsCgkJCQkJInd3d1xcLmZseWNvXFwuY29tIjogImZseWNvIiwKCQkJCQkid3d3XFwub3BwbGVzdG9yZVxcLmNvbSI6ICJvcHBsZXN0b3JlIiwKCQkJCQkid3d3XFwuc3lzaG9wXFwuY29tIjogInN5c2hvcCIsCgkJCQkJInd3d1xcLnlmZHlmXFwuY29tIjogInlmZHlmIiwKCQkJCQkic3NsXFwuaG90ZWxzXFwuY24iOiAiaG90ZWxzIiwKCQkJCQkiYWlodWlzaG91XFwuY29tIjogImFpaHVpc2hvdSIsCgkJCQkJInd3d1xcLnRoZWJlYXN0c2hvcFxcLmNvbSI6ICJ0aGViZWFzdHNob3AiLAoJCQkJCSJ3d3dcXC5qb21vb3Nob3BcXC5jb20iOiAiam9tb29zaG9wIiwKCQkJCQkid3d3XFwuc2VwdHdvbHZlc1xcLmNuIjogInNlcHR3b2x2ZXMiLAoJCQkJCSJcXC5saWFuamlhXFwuY29tIjogewoJCQkJCQluYW1lOiAibGlhbmppYSIsCgkJCQkJCWhpZGViYXI6ICEwCgkJCQkJfSwKCQkJCQkiXFwuNWk1alxcLmNvbSI6IHsKCQkJCQkJbmFtZTogIjVpNWoiLAoJCQkJCQloaWRlYmFyOiAhMAoJCQkJCX0sCgkJCQkJIlxcLjZcXC5jbiI6ICJob21lNiIsCgkJCQkJInd3d1xcLjgwMHBoYXJtXFwuY29tIjogIjgwMHBoYXJtIiwKCQkJCQkid3d3XFwudWppcGluXFwuY29tIjogInVqaXBpbiIsCgkJCQkJInBjXFwubW1iXFwuY24iOiAibW1iIiwKCQkJCQkid3d3XFwuaWhhdmV1XFwuY29tIjogImloYXZldSIsCgkJCQkJIm1hbGxcXC5pa2FuZ1xcLmNvbSI6ICJpa2FuZyIsCgkJCQkJInd3d1xcLnd5bjg4XFwuY29tIjogInd5bjg4IiwKCQkJCQkid3d3XFwubWNha2VcXC5jb20iOiAibWNha2UiLAoJCQkJCSJ3d3dcXC54bWVpc2VcXC5jb20iOiAieG1laXNlIiwKCQkJCQkid3d3XFwubGVjYWtlXFwuY29tIjogImxlY2FrZSIsCgkJCQkJInd3d1xcLmpkMTAwXFwuY29tIjogImpkMTAwIiwKCQkJCQkid3d3XFwuamluZ2h1YVxcLmNvbSI6ICJqaW5naHVhIiwKCQkJCQkid3d3XFwudGFvaHd1XFwuY29tIjogInRhb2h3dSIsCgkJCQkJInd3d1xcLnpiaXJkXFwuY29tIjogInpiaXJkIiwKCQkJCQkid3d3XFwua20xODE4XFwuY29tIjogImttMTgxOCIsCgkJCQkJInd3d1xcLnpvY2FpXFwuY29tIjogInpvY2FpIiwKCQkJCQkid3d3XFwudGFvc2h1XFwuY29tIjogInRhb3NodSIsCgkJCQkJInd3d1xcLmFpemhpZ3VcXC5jb21cXC5jbiI6ICJhaXpoaWd1IiwKCQkJCQkid3d3XFwudGlleW91XFwuY29tIjogInRpZXlvdSIsCgkJCQkJInd3d1xcLmZpZWxkc2NoaW5hXFwuY29tIjogImZpZWxkc2NoaW5hIiwKCQkJCQkid3d3XFwud2RtY2FrZVxcLmNuIjogIndkbWNha2UiLAoJCQkJCSJtYWxsXFwubHF4c2hvcFxcLmNvbSI6ICJscXhzaG9wIiwKCQkJCQkid3d3XFwudXNhc2hvcGNuXFwuY29tIjogInVzYXNob3BjbiIsCgkJCQkJInd3d1xcLndpbmU5XFwuY29tIjogIndpbmU5IiwKCQkJCQkid3d3XFwucWlwYWltYWxsXFwuY29tIjogInFpcGFpbWFsbCIsCgkJCQkJInd3d1xcLnlvZG9kb1xcLmNuIjogInlvZG9kbyIsCgkJCQkJInd3d1xcLnlvZ2VyXFwuY29tXFwuY24iOiAieW9nZXIiLAoJCQkJCSJ3d3dcXC5kYXB1XFwuZGFwdSI6ICJkYXB1IiwKCQkJCQkid3d3XFwud2lub25hXFwuY24iOiAid2lub25hIiwKCQkJCQkid3d3XFwud2xcXC5jbiI6ICJ3bCIsCgkJCQkJInd3d1xcLnNoYW5tYWlcXC5jbiI6ICJzaGFubWFpIiwKCQkJCQkid3d3XFwuemdzaG9lc1xcLmNvbSI6ICJ6Z3Nob2VzIiwKCQkJCQkid3d3XFwubWFpY2hhd2FuZ1xcLmNvbSI6ICJtYWljaGF3YW5nIiwKCQkJCQkid3d3XFwudWVtYWxsXFwuY29tIjogInVlbWFsbCIsCgkJCQkJIlxcLjUxeW91XFwuY29tIjogIjUxeW91IiwKCQkJCQkiXFwuYmVpZmFib29rXFwuY29tIjogImJlaWZhYm9vayIsCgkJCQkJInd3d1xcLmpwZWVuXFwuY29tIjogImpwZWVuIiwKCQkJCQkid3d3XFwuaHVhdHVveWZcXC5jb20iOiAiaHVhdHVveWYiLAoJCQkJCSJ3d3dcXC5mZW5nYnV5XFwuY29tIjogImZlbmdidXkiLAoJCQkJCSJcXC51aXlpXFwuY29tIjogInVpeWkiLAoJCQkJCSJ3d3dcXC5oZWNoYVxcLmNuIjogImhlY2hhIiwKCQkJCQkid3d3XFwudDEwXFwuY29tIjogInQxMCIsCgkJCQkJInd3d1xcLnF3XFwuY2MiOiAicXciLAoJCQkJCSJcXC5taXV0b3VyXFwuY29tIjogIm1pdXRvdXIiLAoJCQkJCSJ3d3dcXC5laGFveWFvXFwuY29tIjogImVoYW95YW8iLAoJCQkJCSJ3d3dcXC5pZHhcXC5jb21cXC5jbiI6ICJpZHgiLAoJCQkJCSJ3d3dcXC51eWExMDBcXC5jb20iOiAidXlhMTAwIiwKCQkJCQkid3d3XFwuc3NuZXd5b3JrXFwuY29tIjogInNzbmV3eW9yayIsCgkJCQkJInd3d1xcLmNsaW5pcXVlXFwuY29tIjogImNsaW5pcXVlIiwKCQkJCQkid3d3XFwuaHhlcGF3blxcLmNvbSI6ICJoeGVwYXduIiwKCQkJCQkid3d3XFwuYnJvb2tzYnJvdGhlcnNcXC5jb20iOiAiYnJvb2tzYnJvdGhlcnMiLAoJCQkJCSJ3d3dcXC5vbXRhb1xcLmNvbSI6ICJvbXRhbyIsCgkJCQkJInd3d1xcLmVwMzY1XFwuY29tIjogImVwMzY1IiwKCQkJCQkid3d3XFwuY29sdW1iaWFzcG9ydHNcXC5jbiI6ICJjb2x1bWJpYXNwb3J0cyIsCgkJCQkJIlxcLmJzdGFwcFxcLmNuIjogImJzdGFwcCIsCgkJCQkJInd3d1xcLm5ld2JhbGFuY2VcXC5jb20iOiAibmV3YmFsYW5jZSIsCgkJCQkJIlxcLndqaWtlXFwuY29tIjogIndqaWtlIiwKCQkJCQkid3d3XFwuYmFsbHlcXC5jb1xcLnVrIjogImJhbGx5IiwKCQkJCQkiXFwuMWhhaVxcLmNuIjogIjFoYWkiLAoJCQkJCSJ3d3dcXC5qaWFsaWNoXFwuY24iOiAiamlhbGljaCIsCgkJCQkJIlxcLnRha2V5YVxcLmNvXFwuanAiOiAidGFrZXlhIiwKCQkJCQkid3d3XFwuZm9yZXZlcjIxXFwuY29tIjogImZvcmV2ZXIyMSIsCgkJCQkJInd3d1xcLm1vZGVybmF2ZW51ZVxcLmNvbSI6ICJtb2Rlcm5hdmVudWUiLAoJCQkJCSJ3d3dcXC5tdW5pYW9cXC5jb20iOiAibXVuaWFvIiwKCQkJCQkiXFwuY2VudGFuZXRcXC5jb20iOiAiY2VudGFuZXQiLAoJCQkJCSJ3d3dcXC56dWlodWl5b3VcXC5jb20iOiAienVpaHVpeW91IiwKCQkJCQkid3d3XFwuYm9iYmlicm93bmNvc21ldGljXFwuY29tIjogImJvYmJpYnJvd25jb3NtZXRpY3MiLAoJCQkJCSJ3d3dcXC5zdXBlci1pblxcLmNvbSI6ICJzdXBlci1pbiIsCgkJCQkJInd3d1xcLmhhbmdvd2FcXC5jb20iOiAiaGFuZ293YSIsCgkJCQkJInd3d1xcLmxldmlcXC5jb20iOiAibGV2aSIsCgkJCQkJInd3d1xcLmZpbGFcXC5jbiI6ICJmaWxhIiwKCQkJCQkid3d3XFwuY29udmVyc2VcXC5jb21cXC5jbiI6ICJjb252ZXJzZSIsCgkJCQkJInVzXFwubmV4dGRpcmVjdFxcLmNvbSI6ICJuZXh0ZGlyZWN0IiwKCQkJCQkid3d3XFwuaXRyaXBcXC5jb20iOiAiaXRyaXAiLAoJCQkJCSJ3d3dcXC5sYXNob3VcXC5jb20iOiAibGFzaG91IiwKCQkJCQkid3d3XFwubGl1ZmVuZ1xcLmNvbSI6ICJsaXVmZW5nIiwKCQkJCQkid3d3XFwudHJ0XFwuaGsiOiAidHJ0IiwKCQkJCQkid3d3MVxcLndvZGluZ2h1YVxcLmNvbSI6ICJ3b2RpbmdodWEiLAoJCQkJCSJcXC53dWxpd3VsaVxcLmNuIjogInd1bGl3dWxpIiwKCQkJCQkid3d3XFwuZm9yZXN0Zm9vZFxcLmNvbSI6ICJmb3Jlc3Rmb29kIiwKCQkJCQkiXFwuYm9uam91cmhrXFwuY29tIjogImJvbmpvdXJoayIsCgkJCQkJInd3d1xcLnZpdGFnb3VcXC5oayI6ICJ2aXRhZ291IiwKCQkJCQkiXFwua2luaG9tXFwuY29tIjogImtpbmhvbSIsCgkJCQkJInd3d1xcLjM2MGxqXFwuY29tIjogIjM2MGxqIiwKCQkJCQkidlxcLmNoYW5nYmFcXC5jb20iOiAiY2hhbmdiYSIsCgkJCQkJInd3d1xcLm9ha2xleVxcLmNvbSI6ICJvYWtsZXkiLAoJCQkJCSJ3d3dcXC5qcHlvb1xcLmNvbSI6ICJqcHlvbyIsCgkJCQkJInd3d1xcLmNsYXJrc3VzYVxcLmNvbSI6ICJjbGFya3N1c2EiLAoJCQkJCSJ3d3dcXC5zdGFyd29vZGhvdGVsc1xcLmNvbSI6ICJzdGFyd29vZGhvdGVscyIsCgkJCQkJInd3d1xcLm1hcnJpb3R0XFwuY29tIjogIm1hcnJpb3R0IiwKCQkJCQkid3d3XFwueWVzc3R5bGVcXC5jb20iOiAieWVzc3R5bGUiLAoJCQkJCSJeZXZpc3VcXC5jb20iOiAiZXZpc3UiLAoJCQkJCSJebGlmZXNlYXN5XFwuY29tXFwuY24iOiAibGlmZXNlYXN5IiwKCQkJCQkid3d3XFwuY2N4cGV0XFwuY29tIjogImNjeHBldCIsCgkJCQkJInd3d1xcLjAwNjFcXC5jb21cXC5hdSI6ICJ4MDA2MSIsCgkJCQkJInd3d1xcLmtrZ3VhblxcLmNvbSI6ICJra2d1YW4iLAoJCQkJCSJ3d3dcXC5zdHlsZS1vY2xvY2tcXC5jb20iOiAic3R5bGUtb2Nsb2NrIiwKCQkJCQkid3d3XFwucGVpa3VhXFwuY29tIjogInBlaWt1YSIsCgkJCQkJInd3d1xcLmFpcmZyYW5jZVxcLig/OnVzfGNvbSkiOiAiYWlyZnJhbmNlIiwKCQkJCQkid3d3XFwuYWNjb3Job3RlbHNcXC5jb20iOiAiYWNjb3Job3RlbHMiLAoJCQkJCSJ3d3dcXC5zcGFjZW5rXFwuY29tIjogInNwYWNlbmsiLAoJCQkJCSJ3d3dcXC5oYWljaHVmYW5nXFwuY29tIjogImhhaWNodWZhbmciLAoJCQkJCSJ1c1xcLndjb25jZXB0XFwuY29tIjogIndjb25jZXB0IiwKCQkJCQkid3d3XFwuZ2FudFxcLmNvXFwudWsiOiAiZ2FudCIsCgkJCQkJInd3d1xcLmNhdGZvb3R3ZWFyXFwuY29tIjogImNhdGZvb3R3ZWFyIiwKCQkJCQkid3d3XFwuc2F1Y29ueVxcLmNvbSI6ICJzYXVjb255IiwKCQkJCQkid3d3XFwuemFvenVvXFwuY29tIjogInphb3p1byIsCgkJCQkJImVcXC5saXR0bGVzd2FuXFwuY29tIjogImxpdHRsZXN3YW4iLAoJCQkJCSJ3d3dcXC5jYW5cXC50diI6ICJjYW4iLAoJCQkJCSJ3d3dcXC5zc3JqXFwuY29tIjogInNzcmoiLAoJCQkJCSJzaG9wXFwuZ3Vlc3NcXC5uZXRcXC5hdSI6ICJndWVzcyIsCgkJCQkJInd3d1xcLmV0aWhhZFxcLmNvbSI6ICJldGloYWQiLAoJCQkJCSJzdG9yZVxcLmZpaWxcXC5jb20iOiAiZmlpbCIsCgkJCQkJInd3d1xcLm1pYW5zaHVpMzY1XFwuY29tIjogIm1pYW5zaHVpMzY1IiwKCQkJCQkid3d3XFwudGVnb3VzaGVcXC5jb20iOiAidGVnb3VzaGUiLAoJCQkJCSJ3d3dcXC53aWdnbGVcXC5jbiI6ICJ3aWdnbGUiLAoJCQkJCSJ3d3dcXC5tZHJlYW1zXFwuY29tIjogIm1kcmVhbXMiLAoJCQkJCSJ3d3dcXC5lY292YWNzXFwuY24iOiAiZWNvdmFjcyIsCgkJCQkJInd3d1xcLmNhbHZpbmtsZWluXFwuY24iOiAiY2Fsdmlua2xlaW4iLAoJCQkJCSJjblxcLm1lbWVib3hcXC5jb20iOiAibWVtZWJveCIsCgkJCQkJInd3dzNcXC5oaWx0b25cXC5jb20iOiAiaGlsdG9uIiwKCQkJCQkid3d3XFwucmV2b2x2ZVxcLmNvbSI6ICJyZXZvbHZlIiwKCQkJCQkid3d3XFwuc2hpc2VpZG9cXC5jb20iOiAic2hpc2VpZG8iLAoJCQkJCSJ3d3dcXC5jbGFyaW5zdXNhXFwuY29tIjogImNsYXJpbnN1c2EiLAoJCQkJCSJzdG9yZVxcLnN0YXJidWNrc1xcLmNvbSI6ICJzdGFyYnVja3MiLAoJCQkJCSJ3d3dcXC5yYXktYmFuXFwuY29tIjogInJheS1iYW4iLAoJCQkJCSJ1c1xcLnB1bWFcXC5jb20iOiAicHVtYSIsCgkJCQkJInd3d1xcLm5hdXRpY2FcXC5jb20iOiAibmF1dGljYSIsCgkJCQkJInd3d1xcLmNyZW1lZGVsYW1lclxcLmNvbSI6ICJjcmVtZWRlbGFtZXIiLAoJCQkJCSJ3d3dcXC5raXBsaW5nLXVzYVxcLmNvbSI6ICJraXBsaW5nLXVzYSIsCgkJCQkJInd3d1xcLmp1cmxpcXVlXFwuY29tIjogImp1cmxpcXVlIiwKCQkJCQkid3d3XFwuaHVzaHB1cHBpZXNcXC5jb20iOiAiaHVzaHB1cHBpZXMiLAoJCQkJCSJ3d3dcXC5vcmlnaW5zXFwuY29tIjogIm9yaWdpbnMiLAoJCQkJCSJ3d3dcXC5mb2xsaWZvbGxpZVxcLnVzXFwuY29tIjogImZvbGxpZm9sbGllIiwKCQkJCQkidXNhXFwubG9jY2l0YW5lXFwuY29tIjogImxvY2NpdGFuZSIsCgkJCQkJIlxcLmhwc3RvcmVcXC5jbiI6ICJocHN0b3JlIiwKCQkJCQkiXFwuMDFob21lXFwuY29tIjogIjAxaG9tZSIsCgkJCQkJInd3d1xcLmhlYWx0aHBvc3RcXC5jb1xcLm56IjogImhlYWx0aHBvc3QiLAoJCQkJCSJcXC5pbWVuZ3hpYW5nXFwuY24iOiAiaW1lbmd4aWFuZyIsCgkJCQkJInd3d1xcLmh5c2pcXC5jb20iOiAiaHlzaiIsCgkJCQkJIlxcLnNhb2h1bzdcXC5jb20iOiAic2FvaHVvNyIsCgkJCQkJIlxcLnJlcGFpXFwuY29tIjogInJlcGFpIiwKCQkJCQkid3d3XFwubWF5aVxcLmNvbSI6ICJtYXlpIiwKCQkJCQkiXFwueWlucGlhb1xcLmNvbSI6ICJ5aW5waWFvIiwKCQkJCQkiXFwuaWhvbWUtaW5zLmNvbSI6ICJpaG9tZS1pbnMiLAoJCQkJCSJcXC5pbmNha2VcXC5uZXQiOiAiaW5jYWtlIiwKCQkJCQkiXFwua3V3b1xcLmNuIjogImt1d28iLAoJCQkJCSJ3d3dcXC55d2FydFxcLmNvbSI6ICJ5d2FydCIsCgkJCQkJInd3d1xcLmNjdFxcLmNuIjogImNjdCIsCgkJCQkJInd3d1xcLmFuc2dvXFwuY29tIjogImFuc2dvIiwKCQkJCQkid3d3XFwucGlsaWJhYmFcXC5jb20iOiAicGlsaWJhYmEiLAoJCQkJCSJ3d3dcXC54aWFvbml1ODhcXC5jb20iOiAieGlhb25pdTg4IiwKCQkJCQkid3d3XFwuYWhhdmFcXC5jb20iOiAiYWhhdmEiLAoJCQkJCSJcXC41LWZpZnRoXFwuY29tIjogIjUtZmlmdGgiLAoJCQkJCSJcXC50aGV3YXRjaGh1dFxcLmNvXFwudWsiOiAidGhld2F0Y2hodXQiLAoJCQkJCSJcXC5iYWJ5aGF2ZW5cXC5jb20iOiAiYmFieWhhdmVuIiwKCQkJCQkiY25cXC5jb3NtZS1kZVxcLmNvbSI6ICJjb3NtZS1kZSIsCgkJCQkJImNuXFwuZ2V0dGhlbGFiZWxcXC5jb20iOiAiZ2V0dGhlbGFiZWwiLAoJCQkJCSJjblxcLm1hdHN1eWFcXC5jb20iOiAibWF0c3V5YSIsCgkJCQkJInd3d1xcLnRpbWJlcmxhbmRcXC5jb20iOiAidGltYmVybGFuZCIsCgkJCQkJIlxcLnRvcG1hblxcLmNvbSI6ICJ0b3BtYW4iLAoJCQkJCSJ3d3dcXC5ob21lYXdheVxcLmNvbSI6ICJob21lYXdheSIsCgkJCQkJInd3d1xcLmJlYXV0eWV4cGVydFxcLmNvbSI6ICJiZWF1dHlleHBlcnQiLAoJCQkJCSJcXC5oYWltaVxcLmNvbSI6ICJoYWltaSIsCgkJCQkJInd3d1xcLm1hbmtpbmRcXC5jb1xcLnVrIjogIm1hbmtpbmQiLAoJCQkJCSJ3d3dcXC50aGVodXRcXC5jb20iOiAidGhlaHV0IiwKCQkJCQkid3d3XFwudG9wc2hvcFxcLmNvbSI6ICJ0b3BzaG9wIiwKCQkJCQkibWFtYWxhZGVuXFwuY29tIjogIm1hbWFsYWRlbiIsCgkJCQkJInd3d1xcLnRyYXZlbGVyLXN0b3JlXFwuY29tIjogInRyYXZlbGVyLXN0b3JlIiwKCQkJCQkid3d3XFwudHJhdmVsem9vXFwuY29tIjogInRyYXZlbHpvbyIsCgkJCQkJInd3d1xcLnVtaXNob2VzXFwuY29tIjogInVtaXNob2VzIiwKCQkJCQkid3d3XFwucGVycmljb25lbWRcXC5jb20iOiAicGVycmljb25lbWQiLAoJCQkJCSJzdG9yZVxcLmZlcnJhcmlcXC5jb20iOiAiZmVycmFyaSIsCgkJCQkJIndpbGxlcmV4cHJlc3NcXC5jb20iOiAid2lsbGVyZXhwcmVzcyIsCgkJCQkJInd3d1xcLnVuaW5lZWRcXC5jb20iOiAidW5pbmVlZCIsCgkJCQkJInd3d1xcLmFjbmVzdHVkaW9zXFwuY29tIjogImFjbmVzdHVkaW9zIiwKCQkJCQkid3d3XFwuYWVyb3Bvc3RhbGVcXC5jb20iOiAiYWVyb3Bvc3RhbGUiLAoJCQkJCSJ3d3dcXC5hZ29kYVxcLmNvbSI6ICJhZ29kYSIsCgkJCQkJInd3d1xcLmFsYmFtb2RhXFwuZGUiOiAiYWxiYW1vZGEiLAoJCQkJCSJ3d3dcXC5hbGxiZWF1dHlcXC5jb20iOiAiYWxsYmVhdXR5IiwKCQkJCQkid3d3XFwuYWxsc2FpbnRzXFwuY29tIjogImFsbHNhaW50cyIsCgkJCQkJInd3d1xcLmFsbHNvbGVcXC5jb20iOiAiYWxsc29sZSIsCgkJCQkJInd3d1xcLnVyYmFub3V0Zml0dGVyc1xcLmNvbSI6ICJ1cmJhbm91dGZpdHRlcnMiLAoJCQkJCSJ3d3dcXC52aXRhYmlvdGljc1xcLmNvbSI6ICJ2aXRhYmlvdGljcyIsCgkJCQkJInd3d1xcLmJlbGxlbWFpc29uXFwuanAiOiAiYmVsbGVtYWlzb24iLAoJCQkJCSJ3d3dcXC5iZW5lZml0Y29zbWV0aWNzXFwuY29tIjogImJlbmVmaXRjb3NtZXRpY3MiLAoJCQkJCSJ3d3dcXC5iaGNvc21ldGljc1xcLmNvbSI6ICJiaGNvc21ldGljcyIsCgkJCQkJInd3d1xcLmJqbXlsaWtlc1xcLmNvbSI6ICJiam15bGlrZXMiLAoJCQkJCSJ3d3dcXC52aXRhbWluYmF5XFwuY29tIjogInZpdGFtaW5iYXkiLAoJCQkJCSJ3d3dcXC53YWl0cm9zZVxcLmNvbSI6ICJ3YWl0cm9zZSIsCgkJCQkJInd3d1xcLndvbGZvcmRzaG9wXFwuY29cXC51ayI6ICJ3b2xmb3Jkc2hvcCIsCgkJCQkJInd3d1xcLmJvb2hvb1xcLmNvbSI6ICJib29ob28iLAoJCQkJCSJ3d3dcXC5ib290c1xcLmNvbSI6ICJib290cyIsCgkJCQkJInd3d1xcLmJyaXRpc2hjb3JuZXJzaG9wXFwuY29cXC51ayI6ICJicml0aXNoY29ybmVyc2hvcCIsCgkJCQkJInd3d1xcLnlpcmVuZGFpXFwuY29tIjogInlpcmVuZGFpIiwKCQkJCQkid3d3XFwueXM3XFwuY29tIjogInlzNyIsCgkJCQkJInd3d1xcLmNvZ2dsZXNcXC5jb20iOiAiY29nZ2xlcyIsCgkJCQkJInd3d1xcLmNvcnNldGRlYWxcXC5jb20iOiAiY29yc2V0ZGVhbCIsCgkJCQkJIl5jb3R0b25vblxcLmNvbSI6ICJjb3R0b25vbiIsCgkJCQkJInd3d1xcLmNyb2NzXFwuY29cXC51ayI6ICJjcm9jcyIsCgkJCQkJInd3d1xcLmNydWlzZWZhc2hpb25cXC5jb20iOiAiY3J1aXNlZmFzaGlvbiIsCgkJCQkJInd3d1xcLmRlbGxcXC5jb20iOiAiZGVsbCIsCgkJCQkJInd3d1xcLmRlcm1zdG9yZVxcLmNvbSI6ICJkZXJtc3RvcmUiLAoJCQkJCSJ3d3dcXC5kaXNuZXlzdG9yZVxcLmNvbSI6ICJkaXNuZXlzdG9yZSIsCgkJCQkJInd3d1xcLmRvcm90aHlwZXJraW5zXFwuY29tIjogImRvcm90aHlwZXJraW5zIiwKCQkJCQkid3d3XFwuZG91ZG91a2FuZ1xcLmNvbSI6ICJkb3Vkb3VrYW5nIiwKCQkJCQkid3d3XFwuZHVqaWFrZVxcLmNvbSI6ICJkdWppYWtlIiwKCQkJCQkid3d3XFwuZHVuZWxvbmRvblxcLmNvbSI6ICJkdW5lbG9uZG9uIiwKCQkJCQkid3d3XFwuZWFzdGJheVxcLmNvbSI6ICJlYXN0YmF5IiwKCQkJCQkid3d3XFwuZWFzdGRhbmVcXC5jb20iOiAiZWFzdGRhbmUiLAoJCQkJCSJ3d3dcXC56YWZ1bFxcLmNvbSI6ICJ6YWZ1bCIsCgkJCQkJInd3d1xcLnphdnZpXFwuY29tIjogInphdnZpIiwKCQkJCQkiY25cXC5mZWlua2VpdFxcLmRlIjogImZlaW5rZWl0IiwKCQkJCQkid3d3XFwuZWlibWFya3RcXC5jb20iOiAiZWlibWFya3QiLAoJCQkJCSJ3d3dcXC5iZWxsdW5hXFwuY24iOiAiYmVsbHVuYSIsCgkJCQkJInd3d1xcLmVtaXJhdGVzXFwuY29tIjogImVtaXJhdGVzIiwKCQkJCQkid3d3XFwuZW1zXFwuY29tIjogImVtcyIsCgkJCQkJInd3d1xcLmV0ZXJuYVxcLmRlIjogImV0ZXJuYSIsCgkJCQkJInd3d1xcLmV1cmFpbFxcLmNvbSI6ICJldXJhaWwiLAoJCQkJCSJ3d3dcXC5leGFudGVkaWV0XFwuY29tIjogImV4YW50ZWRpZXQiLAoJCQkJCSJ3d3dcXC5leHBlZGlhXFwuY29cXC51ayI6ICJleHBlZGlhIiwKCQkJCQkid3d3XFwuZmFsa2VcXC5jb20iOiAiZmFsa2UiLAoJCQkJCSJ3d3dcXC5mYW1vdXNmb290d2VhclxcLmNvbSI6ICJmYW1vdXNmb290d2VhciIsCgkJCQkJInd3d1xcLmZvcmVvXFwuY29tIjogImZvcmVvIiwKCQkJCQkid3d3XFwud2FuZ3hpbmxpY2FpXFwuY29tIjogIndhbmd4aW5saWNhaSIsCgkJCQkJInd3d1xcLmZvcmV2ZXJ1bmlxdWVcXC5jb1xcLnVrIjogImZvcmV2ZXJ1bmlxdWUiLAoJCQkJCSJ3d3dcXC5hdVxcLmZvcnppZXJpXFwuY29tIjogImZvcnppZXJpIiwKCQkJCQkid3d3XFwuZnJlZWNvdW50cnlcXC5jb20iOiAiZnJlZWNvdW50cnkiLAoJCQkJCSJ3d3dcXC5mcmVuY2hjb25uZWN0aW9uXFwuY29tIjogImZyZW5jaGNvbm5lY3Rpb24iLAoJCQkJCSJ3d3dcXC5naWZ0LWxhbmRcXC5jb20iOiAiZ2lmdC1sYW5kIiwKCQkJCQkiY25cXC5ncm93Z29yZ2VvdXNcXC5jb20iOiAiZ3Jvd2dvcmdlb3VzIiwKCQkJCQkid3d3XFwuaG90ZWxcXC5pbmZvIjogImhvdGVsIiwKCQkJCQkid3d3XFwuaG91c2VvZmZyYXNlclxcLmNvXFwudWsiOiAiaG91c2VvZmZyYXNlciIsCgkJCQkJInd3d1xcLmh1aXp1Y2hlXFwuY29tIjogImh1aXp1Y2hlIiwKCQkJCQkid3d3XFwuaXdhbnRvbmVvZnRob3NlXFwuY29tIjogIml3YW50b25lb2Z0aG9zZSIsCgkJCQkJInd3d1xcLmpqZ2xvYmFsXFwuY29tIjogImpqZ2xvYmFsIiwKCQkJCQkid3d3XFwuanVpY3ljb3V0dXJlXFwuY29tIjogImp1aWN5Y291dHVyZSIsCgkJCQkJInd3d1xcLmtlbmtvXFwuY29tIjogImtlbmtvIiwKCQkJCQkid3d3XFwua2lrb2Nvc21ldGljc1xcLmNvbSI6ICJraWtvY29zbWV0aWNzIiwKCQkJCQkid3d3XFwubGFuY2Vyc2tpbmNhcmVcXC5jb1xcLnVrIjogImxhbmNlcnNraW5jYXJlIiwKCQkJCQkic2hvcFxcLmxlZ29cXC5jb20iOiAibGVnbyIsCgkJCQkJInd3d1xcLmxvcmRhbmR0YXlsb3JcXC5jb20iOiAibG9yZGFuZHRheWxvciIsCgkJCQkJInd3d1xcLm1haXpoaVxcLmNvbSI6ICJtYWl6aGkiLAoJCQkJCSJ3d3dcXC5tYXRjaGVzZmFzaGlvblxcLmNvbSI6ICJtYXRjaGVzZmFzaGlvbiIsCgkJCQkJInd3d1xcLm1hdHN1a2l5b1xcLmNvXFwuanAiOiAibWF0c3VraXlvIiwKCQkJCQkid3d3XFwubWljcm9zb2Z0XFwuY29tIjogIm1pY3Jvc29mdCIsCgkJCQkJImNuXFwubWlvc2tpbmNhcmVcXC5jb20iOiAibWlvc2tpbmNhcmUiLAoJCQkJCSJ3d3dcXC5taXNzc2VsZnJpZGdlXFwuY29tIjogIm1pc3NzZWxmcmlkZ2UiLAoJCQkJCSJ3d3dcXC5tb3VudGFpbmdlYXJcXC5jb20iOiAibW91bnRhaW5nZWFyIiwKCQkJCQkid3d3XFwubXliYWdcXC5jb20iOiAibXliYWciLAoJCQkJCSJ3d3dcXC5teXByb3RlaW5cXC5jb20iOiAibXlwcm90ZWluIiwKCQkJCQkid3d3XFwubXl2aXRhbWluc1xcLmNvbSI6ICJteXZpdGFtaW5zIiwKCQkJCQkid3d3XFwubmV0LWEtcG9ydGVyXFwuY29tIjogIm5ldC1hLXBvcnRlciIsCgkJCQkJInd3d1xcLm5ld2JhbGFuY2VcXC5jb1xcLnVrIjogIm5ld2JhbGFuY2UtdWsiLAoJCQkJCSJ3d3dcXC5uZXdsb29rXFwuY29tIjogIm5ld2xvb2siLAoJCQkJCSJ3d3dcXC5uaWtlXFwuY29tXFwuYnIiOiAibmlrZS1iciIsCgkJCQkJInd3d1xcLm5pa2VcXC5jb21cXC5oayI6ICJuaWtlLWhrIiwKCQkJCQkid3d3XFwubnlhbmRjb21wYW55XFwuY29tIjogIm55YW5kY29tcGFueSIsCgkJCQkJInd3d1xcLm9hc2lzLXN0b3Jlc1xcLmNvbSI6ICJvYXNpcy1zdG9yZXMiLAoJCQkJCSJ3d3dcXC5vcmJpdHpcXC5jb20iOiAib3JiaXR6IiwKCQkJCQkid3d3XFwub3JjaGlyYVxcLmNvXFwudWsiOiAib3JjaGlyYSIsCgkJCQkJInd3d1xcLm9yaWdpbnNcXC5jb1xcLnVrIjogIm9yaWdpbnMtdWsiLAoJCQkJCSJ3d3dcXC5wZXRzbWFydFxcLmNvbSI6ICJwZXRzbWFydCIsCgkJCQkJInd3d1xcLnByb2Jpa2VraXRcXC5jb1xcLnVrIjogInByb2Jpa2VraXQiLAoJCQkJCSJ3d3dcXC5xYXRhcmFpcndheXNcXC5jb20iOiAicWF0YXJhaXJ3YXlzIiwKCQkJCQkid3d3XFwucmFkbGV5XFwuY29cXC51ayI6ICJyYWRsZXkiLAoJCQkJCSJ3d3dcXC5yYWxwaGxhdXJlblxcLmNuIjogInJhbHBobGF1cmVuIiwKCQkJCQkid3d3XFwucmViZWNjYW1pbmtvZmZcXC5jb20iOiAicmViZWNjYW1pbmtvZmYiLAoJCQkJCSJ3d3dcXC5yZW50YWxjYXJzXFwuY29tIjogInJlbnRhbGNhcnMiLAoJCQkJCSJ3d3dcXC5yaWNhdWRcXC5jb20iOiAicmljYXVkIiwKCQkJCQkid3d3XFwucm9ja3BvcnRcXC5jb20iOiAicm9ja3BvcnQiLAoJCQkJCSJ3d3dcXC5ydWVsYWxhXFwuY29tIjogInJ1ZWxhbGEiLAoJCQkJCSJ3d3dcXC5zYWtzb2ZmNXRoXFwuY29tIjogInNha3NvZmY1dGgiLAoJCQkJCSJ3d3dcXC5zYzI0XFwuY29tIjogInNjMjQiLAoJCQkJCSJ3d3dcXC5zaG9lc1xcLmNvbSI6ICJzaG9lcyIsCgkJCQkJInd3d1xcLnNob3BzcHJpbmdcXC5jb20iOiAic2hvcHNwcmluZyIsCgkJCQkJInd3d1xcLnNpbXBseXN1cHBsZW1lbnRzXFwuY29cXC51ayI6ICJzaW1wbHlzdXBwbGVtZW50cyIsCgkJCQkJInd3d1xcLnNzZW5zZVxcLmNvbSI6ICJzc2Vuc2UiLAoJCQkJCSJ3d3dcXC5zdGV2ZW1hZGRlblxcLmNvbSI6ICJzdGV2ZW1hZGRlbiIsCgkJCQkJInd3d1xcLnRhb2RvXFwuY29tIjogInRhb2RvIiwKCQkJCQkid3d3XFwubWljaGFlbGtvcnNcXC5jbiI6ICJtaWNoYWVsa29ycyIsCgkJCQkJInd3d1xcLnR0Y2pcXC50diI6ICJ0dGNqIiwKCQkJCQkid3d3XFwudWYtY2x1YlxcLmNvbSI6ICJ1Zi1jbHViIiwKCQkJCQkid3d3XFwuemhhaWRvdVxcLmNvbSI6ICJ6aGFpZG91IiwKCQkJCQkid3d3XFwuMTYzeXVuXFwuY29tIjogIjE2M3l1biIsCgkJCQkJImNuXFwuYXBvXFwuY29tIjogImFwbyIsCgkJCQkJImxvYW4tbVxcLmppbXVcXC5jb20iOiAiamltdSIsCgkJCQkJInd3d1xcLmhhbzI0XFwuY29tIjogImhhbzI0IiwKCQkJCQkibVxcLnNlYWdvb3JcXC5jb20iOiAic2VhZ29vciIsCgkJCQkJInd3d1xcLndhbm5hclxcLmNvbSI6ICJ3YW5uYXIiLAoJCQkJCSJ3d3dcXC5jYWloYW5nXFwuY29tIjogImNhaWhhbmciLAoJCQkJCSJ3d3dcXC5jc21hbGxcXC5jb20iOiAiY3NtYWxsIiwKCQkJCQkid3d3XFwua3VhamluZ1xcLmNvbSI6ICJrdWFqaW5nIiwKCQkJCQkid3d3XFwubWlsbGVubml1bWhvdGVsc1xcLmNvbSI6ICJtaWxsZW5uaXVtaG90ZWxzIiwKCQkJCQkid3d3XFwucmVlYm9uelxcLmNuIjogInJlZWJvbnoiLAoJCQkJCSJjblxcLndlbWFrZXByaWNlXFwuY29tIjogIndlbWFrZXByaWNlIiwKCQkJCQkid3d3XFwud3pob3VodWlcXC5jb20iOiAid3pob3VodWkiLAoJCQkJCSJ3d3dcXC5odWlqaWF5b3VcXC5jbiI6ICJodWlqaWF5b3UiLAoJCQkJCSJ3d3dcXC5tZWxpbWVsb1xcLmNuIjogIm1lbGltZWxvIiwKCQkJCQkid3d3XFwuOTF4Y21cXC5jb20iOiAiOTF4Y20iLAoJCQkJCSJ6aFxcLmFzaGZvcmRcXC5jb20iOiAiYXNoZm9yZC16aCIsCgkJCQkJImNqb25tYXJ0XFwuY24iOiAiY2pvbm1hcnQiLAoJCQkJCSJ3d3dcXC5jbnl0b1xcLm1lIjogImNueXRvIiwKCQkJCQkid3d3XFwuZ3JhbmRkZnNcXC5jb20iOiAiZ3JhbmRkZnMiLAoJCQkJCSJ3d3dcXC5vZmZpY2VkZXBvdFxcLmNvbSI6ICJvZmZpY2VkZXBvdCIsCgkJCQkJInd3d1xcLnRpYW5ob25nXFwuY24iOiAidGlhbmhvbmciLAoJCQkJCSJ3d3dcXC55aWxpbmdzaG9wXFwuY29tIjogInlpbGluZ3Nob3AiLAoJCQkJCSJ3d3dcXC5rbG9va1xcLmNvbSI6ICJrbG9vayIsCgkJCQkJIm1cXC5kZGt5XFwuY29tIjogImRka3kiLAoJCQkJCSJ3d3dcXC5jaGluYWFjY1xcLmNvbSI6ICJjaGluYWFjYyIsCgkJCQkJInd3d1xcLmJtYWlcXC5jb20iOiAiYm1haSIsCgkJCQkJIm1cXC5pbmtlXFwuY24iOiAiaW5rZSIsCgkJCQkJInd3d1xcLmp1bnJvbmdkYWlcXC5jb20iOiAianVucm9uZ2RhaSIsCgkJCQkJInd3d1xcLm5hcGFpXFwuY24iOiAibmFwYWkiLAoJCQkJCSJtYWxsXFwuZ3JlZVxcLmNvbSI6ICJncmVlIiwKCQkJCQkic2FsZXNcXC5hbGxpYW56XFwuY29tIjogImFsbGlhbnoiLAoJCQkJCSJ2XFwueW91bWlcXC5jbiI6ICJ5b3VtaSIsCgkJCQkJInd3d1xcLjIxY2FrZVxcLmNvbSI6ICIyMWNha2UiLAoJCQkJCSJ3d3dcXC41NnJlblxcLmNvbSI6ICI1NnJlbiIsCgkJCQkJInd3d1xcLmFuYW50YXJhXFwuY29tIjogImFuYW50YXJhIiwKCQkJCQkid3d3XFwuY2hlc3VkaVxcLmNvbSI6ICJjaGVzdWRpIiwKCQkJCQkid3d3XFwuZWhtYWxsXFwuY29tIjogImVobWFsbCIsCgkJCQkJInd3d1xcLmZhcmZldGNoXFwuY24iOiAiZmFyZmV0Y2giLAoJCQkJCSJ3d3dcXC5mcmVlcGVvcGxlXFwuY29tIjogImZyZWVwZW9wbGUiLAoJCQkJCSJ3d3dcXC5nYW9zb3V5aVxcLmNvbSI6ICJnYW9zb3V5aSIsCgkJCQkJInd3d1xcLmNoYXJtLWNvbG9yXFwuIjogImNoYXJtLWNvbG9yIiwKCQkJCQkid3d3XFwuZmVsaXNzaW1vXFwuY29cXC5qcCI6ICJmZWxpc3NpbW8iLAoJCQkJCSJ3d3dcXC5zdXJmc3RpdGNoXFwuY29tIjogInN1cmZzdGl0Y2giLAoJCQkJCSJ3d3dcXC5sb3JuYWphbmVcXC5zZyI6ICJsb3JuYWphbmUiLAoJCQkJCSJ3d3dcXC5yZWlzc1xcLmNvbSI6ICJyZWlzcyIsCgkJCQkJInd3d1xcLmd6bFxcLmNvbVxcLmNuIjogImd6bCIsCgkJCQkJInd3d1xcLjlkcnVnXFwuY29tIjogIjlkcnVnIiwKCQkJCQkid3d3XFwueXVuZ291YnNcXC5jb20iOiAieXVuZ291YnMiLAoJCQkJCSJ3d3dcXC55ZW5jaXR5XFwuY29tIjogInllbmNpdHkiLAoJCQkJCSJjbGFzc1xcLmh1amlhbmdcXC5jb20iOiAiaHVqaWFuZyIsCgkJCQkJImlwaHhcXC5tZWl0dWFuXFwuY29tIjogIm1laXR1YW4taXBoeCIsCgkJCQkJInd3d1xcLnN2Z291d3VcXC5jb20iOiAic3Znb3V3dSIsCgkJCQkJImxpbmt0ZWNoXFwuaHF3eFxcLmNvbSI6ICJocXd4IiwKCQkJCQkiY25cXC5paGVyYlxcLmNvbSI6ICJpaGVyYiIsCgkJCQkJInd3d1xcLmltb21va29cXC5jb20iOiAiaW1vbW9rbyIKCQkJCX0sCgkJCQlkID0gewoJCQkJCSJkZXN0L3Rlc3RcXC5odG1sIjogInRlc3QiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3cuOWRydWcuY29tL2dvb2RzLVxcZCtcXC5odG1sIjogIjlkcnVnIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3LnRlYTcuY29tL2l0ZW0vXFxkK1xcLmh0bWwiOiAidGVhNyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3dy4wMWhvbWUuY29tL3Byb2R1Y3QvW2EtejAtOS1dK1xcLmh0bWwiOiAiMDFob21lIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3Lmhwc3RvcmUuY24vd2FzZC1paS1bYS16MC05LV0rXFwuaHRtbCI6ICJocHN0b3JlIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3LmFsaWV4cHJlc3MuY29tL3N0b3JlL3Byb2R1Y3QvIjogImFsaWV4cHJlc3MiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3cuYWxpZXhwcmVzcy5jb20vaXRlbS9cXHcrIjogImFsaWV4cHJlc3MiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3cuZWFzeXRveXMuY24vXFxkK1xcLmh0bWwiOiAiZWFzeXRveXMiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3cua2l3aXN0YXJjYXJlLmNvbS9nb29kcy1cXGQrXFwuaHRtbCI6ICJraXdpc3RhcmNhcmUiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3cuY2FycmVmb3VyLmNuL3Byb2R1Y3QvXFxkKyI6ICJjYXJyZWZvdXIiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9jaGluYS5sb3R0ZS5jb20vZ29vZHMvdmlld0dvb2RzRGV0YWlsXFwubG90dGUiOiAibG90dGUiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3cuZXdhdGNoZXMuY29tL2RldGFpbFxcLmFzcCI6ICJld2F0Y2hlcyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL2dsb2JhbC50aW1leC5jb20vbm9kZS9cXGQrIjogInRpbWV4IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vY29tZm9ydGZpcnN0LmNvbS9bYS16MC05LV0rL1thLXowLTktXSsvW2EtejAtOS1dK1xcLmh0bWwiOiAiY29tZm9ydGZpcnN0IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3Lmx1b2xhaS5jbi9wcm9kdWN0LVxcZCtcXC5odG1sIjogImx1b2xhaSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3dy55b3V5dS5jb20vZ29vZHNcXD9zbj1cXGQrIjogInlvdXl1IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3Lnlvb3guY24vKD86Y24vKVthLXowLTlBLVpdKy9pdGVtIjogInlvb3giLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3cuc3Vhbmp1emkuY29tL3Byb2R1Y3QtXFxkK1xcLmh0bWwiOiAic3Vhbmp1emkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3cueWFvMTIzLmNvbS9wcm9kdWN0L1xcdysiOiAieWFvMTIzIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vaXRlbS5iYW9iZWlnZXppLmNvbS9wcm9kdWN0L1xcZCtcXC5odG1sIjogImJhb2JlaWdlemkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3cuYmFvYmVpZ2V6aS5jb20vcHJvZHVjdC9cXGQrXFwuaHRtbCI6ICJiYW9iZWlnZXppIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3Lm9wcG9zaG9wLmNuL3Byb2R1Y3RzL1xcZCtcXC5odG1sIjogIm9wcG9zaG9wIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3Lm9wcG9zaG9wLmNuL3Byb2R1Y3RzL1xcZCsiOiAib3Bwb3Nob3AiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9zdG9yZVxcLm9wcG9cXC5jb20vKD86Z29vZHN8cHJvZHVjdHMpL1xcZCsiOiAib3Bwb3Nob3AiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5vcHBvXFwuY29tL2NuL3Byb2R1Y3QiOiAib3Bwb3Nob3AiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9oZC5vcHBvLmNvbS9hY3QvXFxkKy9vcHBvUjlzIjogIm9wcG9zaG9wIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vbWFsbC50bzh0by5jb20vdGVtYWkvXFxkKy5odG1sIjogInRvOHRvIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vaXRlbVxcLnl1bmhvdVxcLmNvbS9cXGQrXFwuaHRtbCI6ICJ5dW5ob3UiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9pdGVtXFwueWhkXFwuY29tIjogInlpaGFvZGlhbiIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmhhaXR1bmN1blxcLmNvbS9bYS16XSsvW2Etel0rL1xcZCsvIjogImhhaXR1bmN1biIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLndhbG1hcnRcXC5jb20vaXAvW2EtekEtWjAtOS1dKy9cXGQrIjogIndhbG1hcnQiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC52bWVpXFwuY29tL3Byb2R1Y3QvWzAtOV0rIjogInZtZWkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5qZ2JcXC5jbi9wL1thLXowLTlfXStcXC5odG1sIjogImpnYiIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLjUxZGluXFwuY29tL3Byb2R1Y3QvWzAtOV0rL1swLTldK1xcLmh0bWwiOiAiNTFkaW4iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3cuNTFkaW4uY29tL3Byb2R1Y3QvKD8hbGlzdCkvWzAtOV0rLmpodG1sIjogIjUxZGluIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuYWlkYWlcXC5jb20vUHJvZHVjdFswLTldK1xcLmh0bWwiOiAiYWlkYWkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9zaG9wXFwuYm9xaWlcXC5jb20vcHJvZHVjdC1bMC05XStcXC5odG1sIjogImJvcWlpIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuc3BpZGVyXFwuY29tLmNuL1thLXpdKy9bMC05XStcXC5odG1sIjogInNwaWRlciIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnNwaWRlclxcLmNvbS5jbi9hdWN0aW9uLmh0bWw/YXVjdGlvbmlkPVswLTldKyAiOiAic3BpZGVyIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuamlhZVxcLmNvbS9wcm9kdWN0ZGV0YWlsP3Byb2R1Y3RJZD1bMC05XSsiOiAiamlhZSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL2l0ZW1cXC56YXpoaXB1XFwuY29tL1swLTldK1xcLmh0bWwiOiAiemF6aGlwdSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLndhbG1hcnRcXC5jb20vaXAvXFxkKyI6ICJ3YWxtYXJ0IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuc2hvcFxcLnBoaWxpcHNcXC5jb21cXC5jbi9pdGVtL1thLXowLTktXSsiOiAicGhpbGlwcyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3R1YW4uemhvbmdqaXUuY24vcHJvZHVjdC9kZXRhaWwvXFxkKy5odG0iOiAiemhvbmdqaXUiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3cuemhvbmdqaXUuY24vcHJvZHVjdGRldGFpbC9cXGQrLmh0bSI6ICJ6aG9uZ2ppdSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3dy5rYWx1bGkuY29tL3Byb2R1Y3QvXFxkKy5odG1sIjogImthbHVsaSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3Nob3Aud3N0eC5jb20vaXRlbS9cXGQrIjogIndzdHgiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3cucHVyY290dG9uLmNvbS9kZXRhaWwvXFxkKy9bMC05LV0rXFwuaHRtbCI6ICJwdXJjb3R0b24iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9zaG9wLmp1YW5waS5jb20vW2Etel0rL1xcZCsiOiAianVhbnBpIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3LmduYy5jb20vW0EtWmEtejAtOS1dKy9wcm9kdWN0LmpzcCI6ICJnbmMiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3cuamlueGlhbmcuY29tL3Byb2R1Y3QvXFxkK1xcLmh0bWwiOiAiamlueGlhbmciLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly8xLjE2My5jb20vZGV0YWlsL1xcZCstXFxkK1xcLmh0bWwiOiAiMS0xNjMiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3cuZ3VvamltYW1pLmNvbS9nb29kcy1cXGQrXFwuaHRtbCI6ICJndW9qaW1hbWkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3cuYmFpeWFuZ3dhbmcuY29tL3Byb2R1Y3QvXFxkK1xcLmh0bWwiOiAiYmFpeWFuZ3dhbmciLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9jbi5yb3l5b3VuZ2NoZW1pc3QuY29tLmF1L1xcZCtcXC5odG1sIjogInJveXlvdW5nY2hlbWlzdCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL2NuLm1lZGloZWFsc2hvcC5jb20vXFxkKyI6ICJtZWRpaGVhbHNob3AiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9jbi4xMDAxcGhhcm1hY2llcy5jb20vXFxkK1xcLmh0bWwiOiAiMTAwMXBoYXJtYWNpZXMiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3cubG9va2ZhbnRhc3RpYy5jbi9bYS16MC05LS5dKy9cXGQrIjogImxvb2tmYW50YXN0aWMtY24iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly95b3UuMTYzLmNvbS9pdGVtL2RldGFpbFxcP2lkPSI6ICJ5b3UxNjMiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9wcm9kdWN0LmJsLmNvbS9cXGQrXFwuaHRtbCI6ICJibCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3dy5iZXN0aW5mb29kcy5jb20vKD86XFw/fClwcm9kdWN0LVswLTldK1xcLmh0bWwiOiAiYmVzdGluZm9vZHMiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3cubXVqaS5uZXQvc3RvcmUvXFx3Ky9kZXRhaWwvWzAtOV0rIjogIm11amkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5lYXNlZXllc1xcLmNvbS9nb29kc1swLTldK1xcLmh0bWwiOiAiZWFzZWV5ZXMiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5saW5nc2hpXFwuY29tL3Byb2R1Y3QvbGluZ3NoaS1cXGQrXFwuaHRtIjogImxpbmdzaGkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5udWJpYVxcLmNvbS8oPzpudWJpYW4xfG51YmlhbXlwcmFndWV8cHJhZ3Vlc3xudWJpYXo5bWFya3xudWJpYXo5fG51YmlhejltYXh8bnViaWF6OW1heHxudWJpYXo5bWF4fG51YmlhejExbWluaXxudWJpYVoxMW1pbml8bnViaWF6MTFtYXh8bnViaWF6MTFtYXh8bnViaWF6MTFtYXh8bnViaWF6MTF8bnViaWF6MTF8bnViaWF6MTEpIjogIm51YmlhIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vc2hvcFxcLm51YmlhXFwuY29tL2FjdGl2ZS9cXHcrXFwuaHRtbCI6ICJudWJpYSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3Nob3BcXC5udWJpYVxcLmNvbS9wcm9kdWN0XFwucGhwXFw/KD86c3wpaWQ9XFxkKyI6ICJudWJpYSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovLyg/Ond3d3xzaG9wKVxcLm51YmlhXFwuY24vcHJvZHVjdFxcLnBocFxcP3NpZD1cXGQrIjogIm51YmlhIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3Lm51YmlhLmNvbS8oKD8hLnBocCkuKSokIjogIm51YmlhIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vc2hvcC5udWJpYS5jb20vYnV5Lyg/Om51YmlhbjF8bnViaWFteXByYWd1ZXxwcmFndWVzfG51YmlhejltYXJrfG51Ymlhejl8bnViaWF6OW1heHxudWJpYXo5bWF4fG51YmlhejltYXh8bnViaWF6MTFtaW5pfG51YmlhWjExbWluaXxudWJpYXoxMW1heHxudWJpYXoxMW1heHxudWJpYXoxMW1heHxudWJpYXoxMXxudWJpYXoxMXxudWJpYXoxMXxudWJpYVxcdyspIjogIm51YmlhIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwua3pqMzY1XFwuY29tL2dvb2RzLVxcZCtcXC5odG1sIjogImt6ajM2NSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmthb2xhXFwuY29tL3Byb2R1Y3QvXFxkK1xcLmh0bWwiOiAia2FvbGEiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5rYW9sYVxcLmNvbS5oay9wcm9kdWN0L1xcZCtcXC5odG1sIjogImthb2xhIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwueW1hdG91XFwuY29tL3Byb2R1Y3QvW2EtekEtWjAtOS1dK1xcLmh0bWwiOiAieW1hdG91IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vZGV0YWlsXFwubWV0YW9cXC5jb20vcHJvZHVjdHMvXFxkKyI6ICJtZXRhbyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTp0dlxcLmNvb2NhYVxcLmNvbS9nb29kcy9cXGQrLmh0bSI6ICJjb29jYWEiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5jb29jYWFcXC5jb20vZ29vZHMvZ2V0X1swLTldK1xcLmh0bWwiOiAiY29vY2FhIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwubGlmZXZjXFwuY29tL2l0ZW0vXFxkKyI6ICJsaWZldmMiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5zdXB1eVxcLmNvbS9wcm9kdWN0cy9cXGQrXFwuaHRtbCI6ICJzdXB1eSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnN1cHVtYWxsXFwuY29tL0dvb2RzL2dvb2RzaW5mby9nb29kc0NvZGUvWzAtOV0rIjogInN1cHV5IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwubWlhXFwuY29tL2l0ZW0tXFxkK1xcLmh0bWwiOiAibWl5YWJhb2JlaSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL21peWFiYW9iZWkuaGsvaXRlbS1bMC05XSsuaHRtbCI6ICJtaXlhYmFvYmVpIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3Lm1peWFiYW9iZWkuaGsvaXRlbS1bMC05XSsuaHRtbCI6ICJtaXlhYmFvYmVpIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vaXRlbS5nb21laGlnby5oay9bMC05YS16QS1aXSstLioiOiAiZ29tZWhpZ28iLAoJCQkJCSJodHRwOi8vd3d3XFwud2FuZ2Z1amluZ1xcLmNvbS9pdGVtL1swLTlBLVpdKyI6ICJ3YW5nZnVqaW5nIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vZ2xvYmFsXFwuZ291XFwuY29tL3Byb2R1Y3RfWzAtOV0rXFwuaHRtbCI6ICJnb3UiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5nb3VcXC5jb20vW2EtejAtOV9dK1xcLmh0bWwiOiAiZ291IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vKD86d3d3XFwufClpa2p0YW9cXC5jb20vZ29vZHMtWzAtOV0rXFwuaHRtbCI6ICJpa2p0YW8iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly8oPzp3d3dcXC58KWJlc3RrZWVwXFwuY24vaXRlbS9cXGQrIjogImlranRhbyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovLyg/Oml0ZW18bnApXFwudWxlXFwuY29tL2l0ZW0vWzAtOS1dK1xcLmh0bWwiOiAidWxlIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vc2hvcFxcLnBoaWxpcHNcXC5jb21cXC5jbi9wcm9kdWN0L1xcdysvZGV0YWlsXFwuaHRtIjogInBoaWxpcHMiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9zaG9wXFwudGNsXFwuY29tL1Byb2R1Y3REZXRhaWwvaW5kZXgvaWQvXFxkK1xcLmh0bWwiOiAidGNsIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vbWFsbFxcLnRjbFxcLmNvbS9mcm9udC9wcm9kdWN0L3RvUHJvZHVjdC9bYS16MC05XSsiOiAidGNsIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuZS1jaGFuZ2hvbmdcXC5jb20vd2ViYXBwL3djcy9zdG9yZXMvc2VydmxldC9Qcm9kdWN0W1xcd18tXSsiOiAiY2hhbmdob25nIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vc2hvcFxcLmtvbmthXFwuY29tL2dvb2RzXFwucGhwXFw/aWQ9XFxkKyI6ICJrb25rYSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3Nob3BcXC5rb25rYVxcLmNvbS9wcm9kdWN0LVswLTldK1xcLmh0bWwiOiAia29ua2EiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9zaG9wXFwuaGlzZW5zZVxcLmNvbS9Ib21lL1Byb2R1Y3RzL2RldGFpbC9naWQvXFxkKyI6ICJoaXNlbnNlIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vc2hvcFxcLmhpc2Vuc2VcXC5jb20vcHJvZHVjdC9bYS16MC05LV0rIjogImhpc2Vuc2UiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5pbmVpZ29cXC5jb20vUHJvZHVjdC9wcm9kdWN0LmFzcHhcXD8mP2lkPVxcZCsiOiAiaW5laWdvIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuc2tnXFwuY29tL1xcZCtcXC5odG1sIjogInNrZyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnNrZ1xcLmNvbS9wcm9kdWN0L1swLTldK1xcLmh0bSI6ICJza2ciLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5veWVhaFxcLmNvbS9naXZlYXdheS1bMC05YS16LV0rIjogIm95ZWFoIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwubW9yZWZvb2RcXC5jb20vcHJvZHVjdHMvaW5mby9bMC05XStcXC5odG1sIjogIm1vcmVmb29kIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuemhlblxcLmNvbS9wcm9kdWN0LVswLTldK1xcLmh0bWwiOiAiemhlbiIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3Nob3BcXC52aXZvXFwuY29tXFwuY24vaW5kZXhcXC5waHAvcHJvZHVjdC1cXGQrXFwuaHRtbCI6ICJ2aXZvIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vc2hvcFxcLnZpdm9cXC5jb21cXC5jbi9wcm9kdWN0LVswLTldKyI6ICJ2aXZvIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vc2hvcFxcLnZpdm9cXC5jb21cXC5jbi9wcm9kdWN0L1swLTldKyI6ICJ2aXZvIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vZ2ZpdmVcXC5iMmNcXC5lcWltaW5neGluZ1xcLmNvbS9wcm9kdWN0LVxcZCtcXC5odG1sIjogImdmaXZlIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuNnBtXFwuY29tL3Byb2R1Y3QvIjogIjZwbSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLjZwbVxcLmNvbS9bYS16XSstW2Etel0rLVswLTlhLXpdKyI6ICI2cG0iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC42cG1cXC5jb20vcC9cXHcrIjogIjZwbSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3Nob3BcXC5naW9uZWVcXC5jb20vZ29vZHMvXFxkKyI6ICJnaW9uZWUiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9zdG9yZVxcLmxpbmluZ1xcLmNvbS9zaG9wL2dvb2RzLVswLTldKyI6ICJsaW5pbmciLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5tZjkxMFxcLmNvbS9wcm9kdWN0LVswLTldK1xcLmh0bWwiOiAibWY5MTAiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5rLXRvdWNoXFwuY24vcHJvZHVjdC9kZXRhaWwvcHJvZF9pZC9cXGQrXFwuaHRtbCI6ICJrLXRvdWNoIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuay10b3VjaFxcLmNuL1Byb2R1Y3QvUHJvZHVjdERldGFpbFxcP3Byb2R1Y3RpZCI6ICJrLXRvdWNoIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vaXRlbVxcLmdyYWluZ2VyXFwuY24vZy9cXGQrIjogImdyYWluZ2VyIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vcGlhb1xcLjE2M1xcLmNvbS9cXHcrL21vdmllL1xcZCtcXC5odG1sIjogInd5MTYzIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vbWFsbFxcLjE2M1xcLmNvbS9wL3Byb2R1Y3QvXFxkK1xcLmh0bWwiOiAid3kxNjMiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9kZXRhaWxcXC55YW8uXFw5NTA5NVxcLmNvbS9pdGVtXFwuaHRtIjogInRhb2Jhby05NTA5NSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmViYXlcXC5jb20vaXRtL1swLTlhLXpBLVpdKyI6ICJlYmF5IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vKD86d3d3XFwufCkxMDB5dWVcXC5jb20vcHJvZHVjdC1bMC05XStcXC5odG1sIjogIjEwMHl1ZSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmZlaW5pdVxcLmNvbS9pdGVtL1stXFx3XSsiOiAiZmVpbml1IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwubGVtYWxsXFwuY29tL3Byb2R1Y3QvIjogImxlbWFsbCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmxlbWFsbFxcLmNvbS9jbi8oPzp0dnxzYWxlfHBob25lKS9cXHcrIjogImxlbWFsbCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmxlbWFsbFxcLmNvbS8oPzpsZV8yfGxlX21heHxsZV8xcHJvfHg1NXByb3x4NjV8eDU1fHg0M3N8eDQwc3x1bWF4MTIwfGNoYW80bWF4NzApIjogImxlbWFsbCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmxlbWFsbFxcLmNvbS8oPzpjaGFvNHxsZV9tYXh8bGVfbWF4MnxsZV8ycHJvfGxlXzJ8bGVfbWF4Mnx4NDBzeDQwcykvKD86XFx3Ky98KVxcdytcXC5odG1sIjogImxlbWFsbCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL2l0ZW1cXC5mZWluaXVcXC5jb20vWzAtOV0rIjogImZlaW5pdSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnhnYmFieVxcLmNvbS9wcm9kdWN0L1swLTldKyI6ICJiYnJlYWR5IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuenVpcGluXFwuY24vWzAtOWEtei1dK1xcLmh0bWwiOiAienVpcGluIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vaXRlbVxcLmZlaWZlaVxcLig/OmNufGNvbSkvXFx3K1xcLmh0bWwiOiAiZmVpZmVpIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuZmVpZmVpXFwuY29tL29yZGVyLy0vcHJvZHVjdC1pbmZvL3Byb2R1Y3RuYW1lL1swLTldK1xcLmh0bWwiOiAiZmVpZmVpIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vZ3VhbmdcXC5jb20vYmFvYmVpL1xcZCsiOiAiZ3VhbmciLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5oYWl0YW9jaGVuZ1xcLmNvbS9Qcm9kdWN0L0RldGFpbC1cXGQrXFwuaHRtbCI6ICJoYWl0YW9jaGVuZyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnJycyg/OmprfClcXC5jb20vcHJvZHVjdC9bMC05XStcXC5odG1sIjogInJycyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3Nob3BcXC5jY2JcXC5jb20vcHJvZHVjdHMvcGRfWzAtOV0rXFwuamh0bWwiOiAiY2NiIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwubWVpbGlzaHVvXFwuY29tLyg/OnByb218c2hhcmUpL2l0ZW0vXFxkKyI6ICJtZWlsaXNodW8iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5tZWlsaXNodW9cXC5jb20vc2hhcmUvW1xcZF0rIjogIm1laWxpc2h1byIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL2l0ZW1cXC5tZWlsaXNodW9cXC5jb20vZGV0YWlsLyI6ICJtZWlsaXNodW8iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5tb2d1amllXFwuY29tL3R1YW4vZGV0YWlsL1xcdysiOiAibW9ndWppZSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3Nob3BcXC5tb2d1amllXFwuY29tL2RldGFpbC9cXHcrIjogIm1vZ3VqaWUiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5tb2d1amllXFwuY29tL25vdGUvLio/c2hvd3R5cGU9Z29vZCI6ICJtb2d1amllIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuc3VwdW1hbGxcXC5jb20vcHJvZHVjdHMvWzAtOV0rXFwuaHRtbCI6ICJzdXB1bWFsbCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3Nob3BcXC5jb29scGFkXFwuKD86Y29tfGNuKS9nb29kcy9cXGQrXFwuaHRtIjogImNvb2xwYWQiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly8od3d3XFwuKT95aWd1b1xcLmNvbS9wcm9kdWN0L1xcZCtcXC5odG1sIjogInlpZ3VvIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vKHd3d1xcLik/eWlndW9cXC5jb20vQ29tbW9kaXR5RGV0YWlsXFwuYXNweFxcP0NvbW1vZGl0eUlkPSI6ICJ5aWd1byIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL2l0ZW1cXC53YW5nZ291XFwuY29tLyI6ICJ3YW5nZ291IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vbWFsbFxcLmppYVxcLmNvbS9pdGVtLyI6ICJqaWEiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5qaXVtZWlcXC5jb20vcHJvZHVjdC9bYS16MC05Xy1dK1xcLnNodG1sIjogImppdW1laSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3dlaWdvdVxcLmJhaWR1XFwuY29tL2l0ZW0iOiAiYmFpZHUtd2VpZ291IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vc2hvcFxcLmxldHZcXC5jb20vcHJvZHVjdC8iOiAibGV0diIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLih4aWFvKT9taVxcLmNvbS8oZ29vZHN8aXRlbSkvIjogInhpYW9taSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL2l0ZW1cXC5taVxcLmNvbS9bMC05XStcXC5odG1sIjogInhpYW9taSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL2l0ZW1cXC5taVxcLmNvbS9wcm9kdWN0L1swLTldK1xcLmh0bWwiOiAieGlhb21pIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vaXRlbVxcLm1pXFwuY29tL2J1eSg/OnBob25lfG1pdHZ8bWl0dlxcdyspL1thLXowLTldKyI6ICJ4aWFvbWkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9pdGVtXFwubWlcXC5jb20vc3RhdGljL1thLXowLTldKyI6ICJ4aWFvbWkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9pdGVtXFwubWlcXC5jb20vYnV5L1thLXowLTldKyI6ICJ4aWFvbWkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5taVxcLmNvbS8oPzptaTV8bWltYXh8cmVkbWlub3RlNHxub3RlM3xob25nbWkzc3xyZWRtaXByb3xob25nbWkzfGhvbmdtaTN4fG1pYm9va2FpcnxtaXBhZDJ8bWl0djNzfG1pdHYzc3xtaXR2M3N8bWl0djN8bWl0djN8bWl0djN8dHZ6anxoZXppM3N8aGV6aTN8aGV6aW1pbml8c2hifG1pdnIxY3xtaXdpZmkzfHNjb290ZXJ8bWliaWN5Y2xlfGtldHRsZXxkaWFuZmFuYmFvfG1pY2FtZXJhfHhpYW95aXxhaXIyfHdhdGVyfHdhdGVyMnxpaGVhbHRoMnxpaGVhbHRofG1qc21hcnRsYW1wfGRlc2tsYW1wfG1pdHV8Y3V0ZXx3YW5nZ3VhbnxzaG91aHVhbjJ8c2hvdWh1YW58c2NhbGV8bWl0dXdhdGNofG1pd2lmaW1pbml8bWl3aWZpbGl0ZXxtaXdpZmkzY3xtaXdpZml8ZGlhbnl1YW4xMDAwMHxkaWFueXVhbjEwMDAwfGRpYW55dWFuNTAwMHxjaGF4aWFuYmFuMnxwb3dlcnN0cmlwfHJlY2hhcmdlcnxjaG9uZ2RpYW5xaTRrb3V8aGVhZHBob25lfHF1YW50aWV8Y2Fwc3VsZWVhcnBob25lfHBvY2tldGF1ZGlvfGxpdHRsZWF1ZGlvfHlpbnhpYW5nfHNwZWFrZXJ8cmFkaW98bWltb3NkZ2V8Z2VscGVufHBpbGxvd1oxfHBpbGxvd1oyfHJvb21yb2JvdHxyZWNoYXJnZXI3fGNoYXJnZXJ8Ymx1ZXRvb3RoLWhlYWRzZXR8c3VpdGNhc2V8cmVkbWlcXHcrfG1pNXNwbHVzfG1pNXN8bWl4fG1pbm90ZVxcdyt8bWk1Y3xtYXhcXHcrfG1pNnxtaXBhZDN8bWl0dlxcdyspLyI6ICJ4aWFvbWkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5oYW5kdVxcLmNvbS9nb29kcy0iOiAiaGFuZHUiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC55dW1teTc3XFwuY29tL3Byb2R1Y3QvWzAtOV0rXFwuaHRtbCI6ICJ5dW1teTc3IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuZnJ1aXRkYXlcXC5jb20vd2ViL3Byby9bMC05XSsiOiAiZnJ1aXRkYXkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5mcnVpdGRheVxcLmNvbS9wcm9kZXRhaWwvaW5kZXgvWzAtOV0rIjogImZydWl0ZGF5IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuYmVubGFpXFwuY29tL2l0ZW0tXFxkKyI6ICJiZW5sYWkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5iZW5sYWlcXC5jb20vW2Etei9dKy9pdGVtLVswLTldK1xcLmh0bWwiOiAiYmVubGFpIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vdGFvc2h1XFwuY29tL1xcZCtcXC5odG1sIjogInRhb3NodSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLm1laWxlbGVcXC5jb20vY2F0ZWdvcnktW2Etel0rL2dvb2RzLVswLTldK1xcLmh0bWwiOiAibWVpbGVsZSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLm1laWxlbGVcXC5jb20vdHVhbmdvdS9pbmZvLVswLTldKy5odG1sIjogIm1laWxlbGUtdHVhbiIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLm1laWxlbGVcXC5jb20vbWlhb3NoYS9tcy1bMC05XSsuaHRtbCI6ICJtZWlsZWxlLW1zIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuZ2p3XFwuY29tL3Byb2R1Y3QvaXRlbSI6ICJnanciLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5nandcXC5jb20vSG9tZS9UdWFuSXRlbS9cXGQrXFwuaHRtIjogImdqdyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmdqd1xcLmNvbS9UcnlEcmluay9pdGVtLWlkLVswLTldK1xcLmh0bSI6ICJnanciLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9zdG9yZVxcLmFwcGxlXFwuY29tL2NuL3Byb2R1Y3QvIjogImFwcGxlIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuYXBwbGVcXC5jb20vY24vKD86bWFjYm9va3xpcGFkLXByb3xpcGFkfGlwYWQtbWluaS00fGlwaG9uZS03fGlwaG9uZS1cXHcrfGlwb2Qtc2h1ZmZsZSkvIjogImFwcGxlIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vc3RvcmVcXC5hcHBsZVxcLmNvbS9jbi9idXktaXBob25lL2lwaG9uZVxcdysiOiAiYXBwbGUiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9zdG9yZVxcLmFwcGxlXFwuY29tL2NuL2J1eS1tYWMvXFx3Ky1cXHcrXFw/cHJvZHVjdD1cXHcrL1xcdysiOiAiYXBwbGUiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9zdG9yZVxcLmFwcGxlXFwuY29tL2NuL2J1eS1pcGFkL2lwYWQtXFx3Ky1cXHcrIjogImFwcGxlIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vc3RvcmVcXC5hcHBsZVxcLmNvbS9jbi9idXktaXBvZC9pcG9kLVxcdystXFx3KyI6ICJhcHBsZSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmFwcGxlXFwuY29tL2NuL3Nob3AvYnV5LVthLXpdKy9bYS16MC05LV0rIjogImFwcGxlIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuajFcXC5jb20vcHJvZHVjdC8iOiAiajEiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9taWFvXFwuajFcXC5jb20vcHJvZHVjdC8iOiAiajEtbWlhbyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovLyg/Ond3d1xcLnwpenpsMzY1XFwuY29tL3Byb2R1Y3QtXFxkKyI6ICJ6emwzNjUiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9tb2JpbGVcXC4xMzlzaG9wXFwuY29tLy4qPy9cXGQrL1xcZCtcXC5odG0iOiAiMTM5c2hvcCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovLzEzOXNob3BcXC5jb20vW2EtejAtOS1dKy9bYS16MC05XSsvW2EtejAtOV0rXFwuaHRtIjogIjEzOXNob3AiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC55aXd1Z291XFwuY29tL3Byb2R1Y3QvZGV0YWlsL1swLTldK1xcLmh0bWwiOiAieWl3dWdvdSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnpoaXdvXFwuY29tL3Byb2R1Y3QvXFxkKyI6ICJ6aGl3byIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnpoaXdvXFwuY29tL2dyb3VwL1xcZCsiOiAiemhpd28tdHVhbiIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL1teXFwuXStcXC5taXFpXFwuY24vW14vXSsvcFxcZCsiOiAibWlxaSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLm1pcWlcXC5jbi9bYS16XSsvWzAtOV0rXFwuaHRtbCI6ICJtaXFpIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuY2FtZWxcXC5jb21cXC5jbi9bYS16QS1aMC05XSsoX1thLXpBLVowLTldKykrL1tcXHddK1xcLnNodG1sIjogImNhbWVsIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuY2FtZWxcXC5jb21cXC5jbi9bYS16QS1aMC05X10rL1tBLVphLXowLTldK1xcLnNodG1sIjogImNhbWVsIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwua3VhaXNodWJhb1xcLmNvbS9cXGQrL1xcZCsiOiAia3VhaXNodWJhbyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3dy5rdWFpc2h1YmFvLmNvbS9nLyI6ICJrdWFpc2h1YmFvIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuanVlZ2dcXC5jb20vdGVtcGxldHMvRGVmYXVsdEdyZWVuL1Byb2R1Y3RcXC5qc3AiOiAianVlZ2ciLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9tYWxsXFwuMTAwMTBcXC5jb20vZ29vZHNkZXRhaWwvW1xcZF0rXFwuaHRtbCI6ICJtYWxsMTAwMTAiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC53b3dzYWlcXC5jb20vZ29vZHMvIjogIndvd3NhaSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnRpYW5waW5cXC5jb20vaXRlbS8iOiAidGlhbnBpbiIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnRvb3Rvb1xcLmNuL3Byb2R1Y3QtIjogInRvb3RvbyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnRvb3Rvb1xcLmNuL1thLXpdKy9kZXRhaWwvWzAtOV0rIjogInRvb3RvbyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL2l0ZW1cXC5taW5zaGVuZ2VjXFwuY29tL1thLXpdLSg/OnxbYS16QS1aJTAtOV0rKS9bYS16MC05LV0rXFwuamh0bWwiOiAibWluc2hlbmdlYyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnNmYmVzdFxcLmNvbS9odG1sLyhzZnYpP3Byb2R1Y3RzLyI6ICJzZmJlc3QiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9odFxcLnNmYmVzdFxcLmhrL1swLTlhLXpfXStcXC5odG0iOiAic2ZiZXN0IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vc2hvcFxcLmxlbm92b1xcLmNvbVxcLmNuL3Byb2R1Y3QtIjogImxlbm92byIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3Nob3BcXC5sZW5vdm9tb2JpbGVcXC5jb20vU2hvd1Bob25lLmFzcHhcXD9HZHNJRD0iOiAibGVub3ZvIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwubGVub3ZvbW9iaWxlXFwuY29tL3N0b3JlL1xcZCtcXC5odG1sIjogImxlbm92byIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmxlbm92b1xcLmNvbVxcLmNuL3Byb2R1Y3QvWzAtOV0rXFwuaHRtbCI6ICJsZW5vdm8iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5sZW5vdm9cXC5jb21cXC5jbi9hYnRlc3QvWzAtOV9dK1xcLnNodG1sIjogImxlbm92byIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3RoaW5rcGFkXFwubGVub3ZvXFwuY29tXFwuY24vcHJvZHVjdC9bMC05XStcXC5odG1sIjogImxlbm92byIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnZtYWxsXFwuY29tL2l0ZW0vXFxkKy8oPzppbmRleHxidXkpIjogInZtYWxsIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwudm1hbGxcXC5jb20vcHJvZHVjdC9cXGQrXFwuaHRtbCI6ICJ2bWFsbCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmlodXNoXFwuY29tL3Byb2R1Y3QiOiAiaWh1c2giLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly8oPzp3d3dcXC4pP2ZjbHViXFwuY24vZ29vZHMiOiAiZmNsdWIiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9pdGVtXFwueW9ob2J1eVxcLmNvbS9wcm9kdWN0L1xcdysvXFx3K1xcLmh0bWwiOiAieW9ob2J1eSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL2l0ZW1cXC55b2hvYnV5XFwuY29tL1xcdytcXC5odG1sIjogInlvaG9idXkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5mY2x1YlxcLmNuL3R1YW5nb3VEZXRhaWxcXC5odG1sIjogImZjbHViIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vanVcXC50YW9iYW9cXC5jb20vdGcvaG9tZVxcLmh0bS4qKGl0ZW1fKT9pZD1bXFxkXSsiOiAidGFvYmFvLWp1IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vZGV0YWlsXFwudG1hbGxcXC5jb20vaXRlbVxcLmh0bSI6ICJ0bWFsbCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3dvcmxkXFwudG1hbGxcXC5jb20vaXRlbS9bMC05XSsuaHRtIjogInRtYWxsIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vZGV0YWlsXFwudG1hbGxcXC5oay9oay9pdGVtLmh0bSI6ICJ0bWFsbCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL2RldGFpbFxcLnRtYWxsXFwuaGsvaXRlbVxcLmh0bSI6ICJ0bWFsbCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL2l0ZW1cXC50YW9iYW9cXC5jb20vaXRlbS5odG0iOiAidGFvYmFvIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vMlxcLnRhb2Jhb1xcLmNvbS9pdGVtXFwuaHRtIjogInRhb2Jhby14aWFueXUiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9haVxcLnRhb2Jhb1xcLmNvbS9hdWN0aW9uIjogImFpLXRhb2JhbyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL2NoYW9zaGlcXC5kZXRhaWxcXC50bWFsbFxcLmNvbS9pdGVtXFwuaHRtIjogInRtYWxsIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vZGV0YWlsXFwuanVcXC50YW9iYW9cXC5jb20vaG9tZVxcLmh0bSI6ICJ0YW9iYW8tanUiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly8oPzphcmNoaXZlLXNob3B8c2hvcHx3d3d8ZGF5fGx1eClcXC52aXAoc2hvcCk/XFwuY29tL2RldGFpbCI6ICJ2aXBzaG9wIiwKCQkJCQkiKD86aHR0cHN8aHR0cCk6XFwvXFwvZGV0YWlsXFwudmlwXFwuY29tXFwvZGV0YWlsLVxcZCsiOiAidmlwc2hvcCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3R1YW5cXC5sZWZlbmdcXC5jb20vLio/L1xcZCtfXFxkK1xcLmh0bWwiOiAibGVmZW5nIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vKD86d3d3fHByb2R1Y3QpXFwubGVmZW5nXFwuY29tLyhwcm9kdWN0fHBrbGlzdCkvIjogImxlZmVuZyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovLyg/Ond3d3wxaG91cilcXC5qeGR5ZlxcLmNvbS9wcm9kdWN0Wy0vXVtcXGRdKyI6ICJqeGR5ZiIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmp4ZHlmXFwuY29tL1Byb2R1Y3RDb250ZW50IjogImp4ZHlmIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwudG5pY2VcXC5jb20vcHJvZHVjdC8iOiAidG5pY2UiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9hdWN0aW9uMVxcLnBhaXBhaVxcLmNvbS8iOiAicGFpcGFpIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vaXRlbVxcLnhpbmJhaWdvXFwuY29tL0dvb2RzL1N0eWxlRGV0YWlsIjogInhpbmJhaWdvIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwub3JiaXNcXC5jb21cXC5jbi4qcHJvZHVjdFxcLVtcXGRdKyI6ICJvcmJpcyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnNmaHRcXC5jb20vZGV0YWlsL1swLTldK1xcLmh0bWwiOiAic2ZodCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovLyg/Ond3d3xjb3NtZXRpYylcXC5kMVxcLmNvbVxcLmNuL3Byb2R1Y3QvIjogImQxIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuY2hhenVvXFwuY29tL1Byb2R1Y3QvcFxcLVtcXGRdKyI6ICJjaGF6dW8iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC51MWJhYnlcXC5jb20vcHJvZHVjdFxcLVtcXGRdKyI6ICJ1MWJhYnkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly8od3d3XFwuKT9ob21ldnZcXC5jb20vdnZzaG9wUHJvZHVjdFZpZXcvcGlkXFwtW1xcZF0rXFwuamh0bWwiOiAiaG9tZXZ2IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vKHd3d1xcLik/aG9tZXZ2XFwuY29tL3Z2c2hvcFByb2R1Y3RWaWV3XFwuamh0bWwiOiAiaG9tZXZ2IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwucGFpeGllXFwubmV0L3Nob2VcXC0uK1xcLmh0bWwiOiAicGFpeGllIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vdHVhblxcLnBhaXhpZVxcLm5ldC9bMC05XStcXC5odG1sIjogInBhaXhpZS10dWFuIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vZmF4aWFuXFwucGFpeGllXFwubmV0L1swLTldK1xcLmh0bWwiOiAicGFpeGllLWZheGlhbiIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnRhbzNjXFwuY29tLyhvdXRsZXRzLyk/cHJvZHVjdC9bXFxkXStcXC5odG1sIjogInRhbzNjIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuem03XFwuY24vZ29vZHMiOiAiem03IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vc1xcLmV0YW9cXC5jb20vaXRlbS9bXFxkXStcXC5odG1sIjogImV0YW8iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9zXFwuZXRhb1xcLmNvbS9zZWFyY2hcXD9lcGlkPVtcXGRdKyI6ICJldGFvIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vcHJvZHVjdFxcLnBjaG91c2VcXC5jb21cXC5jbi9pdGVtL1tcXGRdK1xcLmh0bWwiOiAicGNob3VzZSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL2J1eVxcLmRhcGhuZVxcLmNuL2dvb2RzXFwucGhwIjogImRhcGhuZSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmx1Y2VtYWxsXFwuY29tXFwuY24vLisvW1xcZF0rXFwuaHRtbCI6ICJsdWNlbWFsbCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmxpZmV2Y1xcLmNvbS9kZXRhaWwvIjogImxpZmV2YyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmVhc3kzNjFcXC5jb20vW15cXD9dKmdvb2RzLVtcXGRdK1xcLmh0bWwiOiAiZWFzeTM2MSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL2l0ZW1cXC4zNjBocWJcXC5jb20vc3B1XFwtW1xcZF0rXFwuaHRtbCI6ICIzNjBocWIiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9pdGVtXFwuMzYwaHFiXFwuY29tL1tcXGRdK1xcLmh0bWwiOiAiMzYwaHFiIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vcVxcLjM2MGhxYlxcLmNvbS9kZXRhaWwvW1xcZFxcX10rXFwuaHRtbCI6ICIzNjBocWIiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5nb3VqaXV3YW5nXFwuY29tL3Byb2R1Y3QvaXRlbVxcLWlkXFwtW1xcZF0rXFwuaHRtIjogImdvdWppdXdhbmciLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5odWltYWkzNjVcXC5jb20vZ29vZHNcXC1bXFxkXStcXC5odG1sIjogImh1aW1haTM2NSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovLyh3d3d8dHVhbnxkaW5nemhpKVxcLmppdXhpYW5cXC5jb20vKGdvb2RzfHR1YW5fZGV0YWlsKVxcLS4rXFwuaHRtIjogImppdXhpYW4iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC53aW5lbmljZVxcLmNvbS9wX1tcXGRdK1xcLnNodG1sIjogIndpbmVuaWNlIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwueWVzbXl3aW5lXFwuY29tL2dvb2RzL1tcXGRdK1xcLmh0bWwiOiAieWVzbXl3aW5lIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vbWFsbFxcLnllc215d2luZVxcLmNvbS9zaG9wL2p1bmthbmcvaXRlbS1bXFxkXSsiOiAieWVzbXl3aW5lIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vbWFsbFxcLnllc215d2luZVxcLmNvbS9zaG9wL1tcXHddKy9pdGVtLVtcXGRdKyI6ICJ5ZXNteXdpbmUiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9tYWxsXFwueWVzbXl3aW5lXFwuY29tL2dyb3VwYnV5L1xcZCtcXC5odG1sIjogInllc215d2luZSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmJhbmdnb1xcLmNvbS9Hb29kcy9bXFxkXStcXC5zaHRtbCI6ICJiYW5nZ28iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5iYW5nZ29cXC5jb20vZ29vZHNfWzAtOV0rXFwuc2h0bWwiOiAiYmFuZ2dvIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vcGxveVxcLmJhbmdnb1xcLmNvbS9zZWNvbmQvWzAtOS1fXStcXC5zaHRtbCI6ICJiYW5nZ28iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC55YW55dWVcXC5jbi9zbW9rZVxcLXByb2R1Y3RcXC1bXFxkXStcXC5odG1sIjogInlhbnl1ZSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmJlYXJidXlcXC5jb21cXC5jbi9nb29kc1xcLnBocFxcP2lkPVtcXGRdKyI6ICJiZWFyYnV5IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuYW1hem9uXFwuY24vLio/KD86ZHAvfGdwL3Byb2R1Y3QvfGRldGFpbEFwcCkiOiAiYW1hem9uIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuYW1hem9uXFwuKD86Y29tfGNvXFwudWt8ZGV8Y29cXC5qcHxmcnxjYXxjbnxpdHxlcykvLio/KD86ZHAvfGdwL3Byb2R1Y3QvfGRldGFpbEFwcCkoPyFzZWFyY2gpIjogImFtYXpvbiIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovLyg/OnByb2R1Y3RcXC5kYW5nZGFuZ1xcLmNvbS9bXlxcP10qcHJvZHVjdC5hc3B4fHJlY29cXC5kYW5nZGFuZ1xcLmNvbS9yZWNvX3B1YlxcLnBocClcXD9wcm9kdWN0X2lkPVxcZCsiOiAiZGFuZ2RhbmciLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly8oPzpwcm9kdWN0fGRldGFpbClcXC5kYW5nZGFuZ1xcLmNvbS9bXFxkXSsiOiAiZGFuZ2RhbmciLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly96XFwuamRcXC5jb20vcHJvamVjdC9kZXRhaWxzL1xcZCtcXC5odG1sIjogIjM2MGJ1eSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL2l0ZW1cXC5qZFxcLmNvbS9cXGQrXFwuaHRtbCI6ICIzNjBidXkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9pdGVtXFwueWl5YW9qZFxcLmNvbS9cXGQrXFwuaHRtbCI6ICIzNjBidXkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9pdGVtXFwuamRcXC5oay9cXGQrXFwuaHRtbCI6ICIzNjBidXkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9wYWltYWlcXC5qZFxcLmNvbS9cXGQrIjogIjM2MGJ1eS1wYWltYWkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9kYXlcXC5qZFxcLmNvbS9pdGVtLy4qXFwuaHRtbCI6ICIzNjBidXktZGF5IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuKD86MzYwYnV5fGpkKVxcLmNvbS9wcm9kdWN0L1xcZCtcXC5odG1sIjogIjM2MGJ1eSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovLyg/OmJvb2t8ZSlcXC4oPzozNjBidXl8amQpXFwuY29tL1xcZCtcXC5odG1sIjogIjM2MGJ1eS1ib29rIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vcmVcXC5qZFxcLmNvbS9jcHMvaXRlbS9bMC05XStcXC5odG1sIjogIjM2MGJ1eS1yZSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL2F1Y3Rpb25cXC5qZFxcLmNvbS9bMC05XSsiOiAiMzYwYnV5LWF1Y3Rpb24iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9tdmRcXC4oPzozNjBidXl8amQpXFwuY29tL1xcZCtcXC5odG1sIjogIjM2MGJ1eS1tdmQiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly90dWFuXFwuKD86MzYwYnV5fGpkKVxcLmNvbS90ZWFtXFwtXFxkK1xcLmh0bWwiOiAiMzYwYnV5LXR1YW4iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC4oPzozNjBidXl8amQpXFwuY29tL3R1YW4vW1xcZF0rXFwtW1xcZF0rXFwuaHRtbCI6ICIzNjBidXktdHVhbiIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLig/OjM2MGJ1eXxqZClcXC5jb20vYmlnaW1hZ2VcXC5hc3B4XFw/aWQ9XFxkKyI6ICIzNjBidXktYmlnaW1hZ2UiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9jbHViXFwuamRcXC5jb20vYmJzRGV0YWlsL1thLXowLTlfLV0rXFwuaHRtbCI6ICIzNjBidXktY2x1YiIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLjM2MHRvcFxcLmNvbS9wcm9kdWN0L1xcZCtcXC5odG1sIjogIjM2MHRvcCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL2RldGFpbFxcLnpvbFxcLmNvbVxcLmNuLy4qPyg/OmluZGV4KS4qP1xcLnNodG1sIjogInpvbCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL2RldGFpbFxcLnpvbFxcLmNvbVxcLmNuL1tcXGRdKy9bXFxkXSsvW2EtekEtWl0rXFwuc2h0bWwiOiAiem9sIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vZGVhbGVyXFwuem9sXFwuY29tXFwuY24vZGV0YWlsL1tcXGRdKy9bXFxkXStfW1xcZF0rLmh0bWwiOiAiem9sIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vKD86d3d3fG1hbGwpXFwuem9sXFwuY29tL2RldGFpbCI6ICJ6b2wiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9kZXRhaWxcXC56b2xcXC5jb21cXC5jbi9zZXJpZXMvWzAtOV0rL1swLTlfXStcXC5odG1sIjogInpvbCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmZnbGFkeVxcLmNuL0JNc2dMIjogImZnbGFkeSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovLyh3d3cufClvdWt1XFwuY29tLyg/Omdvb2RzfHByb2R1Y3QpIjogIm91a3UiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly8od3d3Lnwpb3VrdVxcLmNvbS9jbi9bMC05YS16LV9dK1xcLmh0bWwiOiAib3VrdSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLm5ld2VnZyhcXC5jb20pP1xcLmNuL1Byb2R1Y3QvLio/XFwuaHRtIjogIm5ld2VnZyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3poYWRhblxcLm5ld2VnZyhcXC5jb20pP1xcLmNuL0JvbWItXFxkK1xcLmh0bSI6ICJuZXdlZ2ciLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly96aGFkYW5cXC5uZXdlZ2dcXC5jbiI6ICJuZXdlZ2ctemhhZGFuIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vdHVhblxcLm5ld2VnZ1xcLmNuL2RlYWwvWzAtOV0rXFwuaHRtIjogIm5ld2VnZy10dWFuIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vcHJvZHVjdFxcLmtpbWlzc1xcLmNvbS9wcm9kdWN0LyI6ICJraW1pc3MiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5yZWRiYWJ5XFwuY29tXFwuY24vLio/L1xcZHs3fVxcZCtcXC5odG1sIjogInJlZGJhYnkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9wcm9kdWN0XFwubTE4XFwuY29tLyI6ICJtMTgiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9saXN0XFwubTE4XFwuY29tL2l0ZW0vIjogIm0xOCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL2xpc3RcXC5tMThcXC5jb20vZy8iOiAibTE4IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vbGlzdFxcLm0xOFxcLmNvbS8uKkdvb2RzLmFzcHgiOiAibTE4IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwubTE4XFwuY29tL2l0ZW0vIjogIm0xOCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLncxXFwuY24vZ29vZHMiOiAidzEiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5hc2hmb3JkXFwuY29tL3VzL3dhdGNoZXMvW2EtejAtOS1dKy9bYS16MC05LV0rIjogImFzaGZvcmQiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5zZXBob3JhXFwuY24vcHJvZHVjdERldGFpbEFjdGlvbi8iOiAic2VwaG9yYWNwcyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnNlcGhvcmFcXC5jbi9wcm9kdWN0L1xcZCtcXC5odG1sIjogInNlcGhvcmFjcHMiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5zZXBob3JhXFwuY24vdHJ5b3V0L1xcZCtcXC5odG1sIjogInNlcGhvcmFjcHMiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5sYWZhc29cXC5jb20vKD86cHJvZHVjdC98Z29vZHMvcHJvZHVjdF9kZXRhaWwpIjogImxhZmFzbyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnNcXC5jbi8oPyFwYWdlKVxcd3syLH1cXC1bQS1aYS16MC05XSs/WzAtOV0rP1tBLVphLXowLTldKz9bXFwtXypcXC5dLio/aHRtbCI6ICJzIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vdz9pdGVtXFwuKD86NTFidXl8eWl4dW4pXFwuY29tLyI6ICI1MWJ1eSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLm9rYnV5XFwuY29tLy4qPy9kZXRhaWwtIjogIm9rYnV5IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwub2tidXlcXC5jb20vLio/LVtcXGRdKy5odG1sIjogIm9rYnV5IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vKHd3d1xcLik/bGV0YW9cXC5jb20vW15cXD9dKnNob2VcXC1bXlxcfl0qJCI6ICJsZXRhbyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmJ1eTAwN1xcLmNvbS8uKj8vLio/L1tBLVphLXpcXGRcXF9cXC1dKj9cXC5odG1sIjogImJ1eTAwNyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnRhb3hpZVxcLmNvbS9jb21tb2RpdHkiOiAidGFveGllIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vanVcXC5zdW5pbmdcXC5jb20vcHJvZHVjdC1bYS16QS1aMC05XStcXC5odG0iOiAic3VuaW5nLWp1IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vaXRlbVxcLnN1bmluZ1xcLmNvbS9bMC05XStcXC5odG1sIjogInN1bmluZyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL2l0ZW1cXC5zdW5pbmdcXC5jb20vWzAtOV0rL1swLTldK1xcLmh0bWwiOiAic3VuaW5nIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuc3VuaW5nXFwuKD86Y29tfGNuKS93ZWJhcHAvd2NzL3N0b3Jlcy9zZXJ2bGV0LyhQcm9kfHByZCkiOiAic3VuaW5nIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vcGFpXFwuc3VuaW5nXFwuKD86Y29tfGNuKS9zaGFucGFpL2RldGFpbC8iOiAic3VuaW5nLXBhaSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3BhaVxcLnN1bmluZ1xcLig/OmNvbXxjbikvc2hhbnBhaS9bMC05XS9kZXRhaWwvZC9bMC05XSstWzAtOV0iOiAic3VuaW5nLXBhaSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL1tcXHddK1xcLnN1bmluZ1xcLig/OmNvbXxjbikvZW1hbGwvZGdmIjogInN1bmluZy1kZ2YiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9xaWFuZ1xcLnN1bmluZ1xcLmNvbS9ycHMtd2ViL3JwL3Nob3dBY3Rpdml0eV9bXFxkXStcXC5odG0iOiAic3VuaW5nLXFpYW5nIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vcHJvZHVjdFxcLnN1bmluZ1xcLmNvbS9cXGQrIjogInN1bmluZyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3Byb2R1Y3RcXC5zdW5pbmdcXC5jb20vZGV0YWlsWzAtOV9dK1xcLmh0bWwiOiAic3VuaW5nIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuc3VuaW5nXFwuY29tL2RldGFpbC8iOiAic3VuaW5nLWJvb2stbmV3IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vc25ib29rXFwuc3VuaW5nXFwuKD86Y29tfGNuKS93ZWIvcHJkLyI6ICJzdW5pbmctc25ib29rIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuY29vOFxcLmNvbS9wcm9kdWN0LyI6ICJjb284IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vKHd3dy58KWx1c2VuXFwuY29tL3Byb2R1Y3QvcHJvZHVjdGluZm8iOiAibHVzZW4iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5sdXNlblxcLmNvbS9UdWFuL0NvbWl0eUluZm9cXC5hc3B4XFw/aWQ9WzAtOV0rIjogImx1c2VuIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vaXRlbVxcLmdvbWVcXC5jb21cXC5jbi9bXlxcP10iOiAiZ29tZSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3Rhb1xcLmdvbWVcXC5jb21cXC5jbi9wXFwtRFswLTldKyI6ICJnb21lLXRhbyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3FcXC5nb21lXFwuY29tXFwuY24vaXRlbS9cXHdbMC05XStcXC5odG1sIjogImdvbWUtcSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3R1YW5cXC5nb21lXFwuY29tXFwuY24vZGVhbC9cXHcrXFwuaHRtbCI6ICJnb21lLXR1YW4iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5nb21laG9tZVxcLmNvbS9wcm9kdWN0L3Byb2R1Y3RpbmZvXFw/cD1bMC05LV0rIjogImdvbWUtaG9tZSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmdvbWVcXC5jb21cXC5jbi9lYy9ydXNoYnV5L2xpbWl0YnV5L2l0ZW1kZXRhaWwiOiAiZ29tZS1ydXNoYnV5IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vKD86d3d3fGl0ZW18cylcXC4oeWhkfHlpaGFvZGlhbnwxbWFsbClcXC5jb20vKD86cHJvZHVjdHxpdGVtKS9cXGQrIjogInlpaGFvZGlhbiIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL2l0ZW1cXC55aGRcXC5jb20vaXRlbS9scC9bMC05X10rIjogInlpaGFvZGlhbiIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3RyeVxcLnloZFxcLmNvbS8oZnJlZXxmZWUpL1xcZHs0LDZ9X1xcZCsvIjogInlpaGFvZGlhbiIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3RcXC4oeWhkfHlpaGFvZGlhbnwxbWFsbClcXC5jb20vZGV0YWlsL1xcZCsiOiAieWloYW9kaWFuLXR1YW4iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9bYS16QS1aXStcXC53b21haVxcLmNvbS8oLiopUHJvZHVjdCg/OlxcLXxcXC5kb1xcP20/aWQpIjogIndvbWFpIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vKHd3d3xzaHxnenx6cylcXC53b21haVxcLmNvbS9yZWxhdGVkLSI6ICJ3b21haS1yZWxhdGVkIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vKHd3d1xcLik/bGV5b3VcXC5jb21cXC5jbi9wcm9kdWN0L3NpbmdsZS8iOiAibGV5b3UiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9oYWl0YW9cXC5sZXlvdVxcLmNvbVxcLmNuL2l0ZW0vc2luZ2xlL3NrdS8iOiAibGV5b3UiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9sZWxlc2hhblxcLmxleW91XFwuY29tXFwuY24vcHJvZHVjdC9zaW5nbGUvW0EtWjAtOV0rIjogImxleW91LWxlbGVzaGFuIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuc2hvcGluXFwubmV0L3Byb2R1Y3QvIjogInNob3BpbiIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovLyg/Oml0ZW18d3d3fGViYXkpXFwueGl1XFwuY29tL3Byb2R1Y3QvIjogInhpdSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL291dGxldHNcXC54aXVcXC5jb20vW1xcZF0rXFwuc2h0bWwiOiAieGl1IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vZmVycmFnYW1vXFwueGl1XFwuY29tL1tcXGRdezYsMTB9XFwuc2h0bWwiOiAieGl1IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vdHVhblxcLnhpdVxcLmNvbS90ZWFtX1tcXGRdKyI6ICJ4aXUtdHVhbiIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL2l0ZW1cXC5tYmFvYmFvXFwuY29tL3BzaG93IjogIm1iYW9iYW8iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5tYmFvYmFvXFwuY29tL2l0ZW0vIjogIm1iYW9iYW8iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9pdGVtXFwudmppYVxcLmNvbS9bXFxkXSo/XFwuaHRtbCI6ICJ2amlhIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuN2N2XFwuY29tL3Byb2R1Y3QvIjogIjdjdiIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnFpbnFpbmJhYnlcXC5jb20vcHJvZHVjdC8iOiAicWlucWluYmFieSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnFpbnFpbmJhYnlcXC5jb20vZ29vZHMvWzAtOV0rIjogInFpbnFpbmJhYnkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5jaHVuc2h1aXRhbmdcXC5jb20vW2Etel0rL1swLTldK1xcLmh0bWwiOiAiY2h1bnNodWl0YW5nIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwueFxcLmNvbVxcLmNuL25fcHJvZHVjdC9bXFx3XStcXC5zaHRtbCI6ICJ4IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwueFxcLmNvbVxcLmNuL3Byb2R1Y3QiOiAieCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmd1b3BpXFwuY29tL3BcXC5qc3AiOiAiZ3VvcGkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5ubzVcXC5jb21cXC5jbi9nb29kcy8iOiAibm81IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwubm81XFwuY29tXFwuY24vcHJvZHVjdC9bMC05XStcXC5odG1sIjogIm5vNSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3dlYltcXGRdK1xcLnNhc2FcXC5jb20vU2FzYVdlYi9zY2gvcHJvZHVjdC92aWV3UHJvZHVjdERldGFpbCI6ICJzYXNhIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuc2FzYVxcLmNvbS9bYS16XSsvW2EtekEtWjAtOV8tXSsiOiAic2FzYSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmRoY1xcLm5ldFxcLmNuL2dkcy8oPzpkZXRhaWx8Y3NlYXJjaFxcLmpzcFxcP2NjZD1bXFxkXSspIjogImRoYyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLjlkYWRhb1xcLmNvbS9wcm9kdWN0LyI6ICI5ZGFkYW8iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC4zNjBreHJcXC5jb20vcHJvZHVjdC8iOiAiMzYwa3hyIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwubTZnb1xcLmNvbS9wcm9kdWN0IjogIm02Z28iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5nb3VcXC5jb20vcHJvZHVjdCI6ICJtNmdvIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwubTZnb1xcLmNvbS9xZy9wcm9kdWN0IjogIm02Z28iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5nb3VcXC5jb20vcWcvcHJvZHVjdCI6ICJtNmdvIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwubGlrZWZhY2VcXC5jb20vcHJvZHVjdCI6ICJsaWtlZmFjZSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnF4aWFuXFwuY29tLy4qP1swLTldKj9cXC5odG1sIjogInF4aWFuIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuZGlkYW1hbGxcXC5jb20vKD86cHJvZHVjdHN8bGliYW8pL2luZm8vIjogImRpZGFtYWxsIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwueWFvZGlhbjEwMFxcLmNvbS9lY21hbGwvcHJvZHVjdCI6ICJ5YW9kaWFuMTAwIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwueWFvZmFuZ1xcLmNuL2dvb2RzIjogInlhb2ZhbmciLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5saWppYWJhYnlcXC5jb21cXC5jbi8oPzplc2hvcC9wcm9kdWN0fENsb3RoaW5nLy4qPy9Qcm9kdWN0X2l0ZW1cXC5hc3B4KSI6ICJsaWppYWJhYnkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly85OXJlYWRcXC5jb20vUHJvZHVjdC9bYS16QS1aXSpcXGQrW2EtekEtWl0qXFwuYXNweCI6ICI5OXJlYWQiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9wcm9kdWN0XFwuY2hpbmEtcHViXFwuY29tIjogImNoaW5hLXB1YiIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovLyh3d3cufClib29rc2NoaW5hXFwuY29tL1tcXGRdK1xcLmh0bSI6ICJib29rc2NoaW5hIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vKHd3dy58KWJvb2tzY2hpbmFcXC5jb20vR1JPVVBCVVkvZ3JvdXBidXkuYXNweFxcP2dyb3VwaWRcXD1bMC05XSsiOiAiYm9va3NjaGluYS10dWFuIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuZWZlaWh1XFwuY29tLyg/OlByb2R1Y3QvfFBhZ2VzL1Byb2R1Y3RTaG93L1Byb2R1Y3REZXRhaWxzXFwuYXNweCkiOiAiZWZlaWh1IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vdHVhblxcLmVmZWlodVxcLmNvbS9bMC05YS16QS1aXSsvRGV0aWFscy5hc3B4XFw/aWQ9WzAtOV0rIjogImVmZWlodSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLjM2MG1hcnRcXC5jb20vcHJvZHVjdFtzXT8vLio/XFwuaHRtbCI6ICIzNjBtYXJ0IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwueWludGFpXFwuY29tL3Byb2R1Y3QvcHJvZHVjdGRldGFpbCI6ICJ5aW50YWkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9pdGVtXFwueWludGFpXFwuY29tLyI6ICJ5aW50YWkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5xdXdhblxcLmNvbS9nb29kcyI6ICJxdXdhbiIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnVyY29zbWVcXC5jb20vc2VhcmNoL2ZpbmFsIjogInVyY29zbWUiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9jblxcZCpcXC5zdHJhd2JlcnJ5bmV0XFwuY29tLy4qPy9bMC05XSsvIjogInN0cmF3YmVycnluZXQiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5sdWNlXFwuY29tXFwuY24vcHJvZHVjdC8iOiAibHVjZSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmsxMjFcXC5jb20vaXRlbSI6ICJrMTIxIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuaGFwcGlnb1xcLmNvbS9bXFx3XSsvW1xcd10rL1tcXHddKy9bXFxkXStcXC5odG1sIjogImhhcHBpZ28iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3cuaGFwcGlnby5jb20vaXRlbS1bMC05XSsuaHRtbCI6ICJoYXBwaWdvIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vbWFsbFxcLmhhcHBpZ29cXC5jb20vZ29vZHMtW1xcZF0rXFwuaHRtbCI6ICJoYXBwaWdvIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vbWFsbFxcLmhhcHBpZ29cXC5jb20vZ3JvdXBidXktWzAtOS1dK1xcLmh0bWwiOiAiaGFwcGlnbyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmdhcFxcLmNuL1teXFw/XSpwcm9kdWN0L1tcXGRdK1xcLmh0bWwiOiAiZ2FwIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwubWlzc2xlbGVcXC5jb20vLitbXFxkXStcXC5odG1sIjogIm1pc3NsZWxlIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuNWx1eFxcLmNvbS9nb29kcyI6ICI1bHV4IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vKD86d3d3fGh1aSlcXC41bHV4LmNvbS9nb29kL2RldGFpbC9bMC05XSsiOiAiNWx1eCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnhpYW96aHVyZW5cXC5jb20vKERpc25leS8pP2dvb2RzXFwucGhwIjogInhpYW96aHVyZW4iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5hbGwzY1xcLmNvbS9wcm9kdWN0LyI6ICJhbGwzYyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmlkYXBobmVcXC5jb20vZ29vZHMiOiAiaWRhcGhuZSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3Byb2R1Y3RcXC5wY2JhYnlcXC5jb21cXC5jbi9hLyI6ICJwY2JhYnkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5iaW5nZ29cXC5jb20vLio/L1xcZHs3fVxcZCtcXC5odG1sIjogImJpbmdnbyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnRpYW50aWFuXFwuY29tLy4rL1thLXpBLVpdP1tcXGRdK1xcLmh0bWwiOiAidGlhbnRpYW4iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly90dWFuXFwudGlhbnRpYW5cXC5jb20vU2FsZS8oPzpEZXRhaWxzfEZsYXNoRGV0YWlscykvW2EtekEtWjAtOV0rIjogInRpYW50aWFuLXR1YW4iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC54aWppXFwuY29tL3Byb2R1Y3QtWzAtOV0rXFwuaHRtbCI6ICJ4aWppIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwueGlqaWVcXC5jb20vcHJvZCI6ICJ4aWppZSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL21hbGxcXC5qdW1laVxcLmNvbVteXFw/XSovcHJvZHVjdF8iOiAianVtZWkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9wb3BcXC5qdW1laVxcLmNvbS9pL2RlYWwvXFx3K1xcLmh0bWwiOiAianVtZWkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly8oZ3p8Ymp8c2gpXFwuanVtZWlcXC5jb20vaS9kZWFsL1xcdytcXC5odG1sIjogImp1bWVpIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vaXRlbVxcLmp1bWVpXFwuY29tL1swLTlhLXpBLVpdK1xcLmh0bWwiOiAianVtZWkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5qdW1laWdsb2JhbFxcLmNvbS9kZWFsL1xcdytcXC5odG1sIjogImp1bWVpZ2xvYmFsIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vaXRlbVxcLmp1bWVpZ2xvYmFsXFwuY29tL1swLTlhLXpBLVpdK1xcLmh0bWwiOiAianVtZWlnbG9iYWwiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5qdW1laWdsb2JhbFxcLmNvbS9EZWFsL0NvbWJpbmF0aW9uXFw/IjogImp1bWVpZ2xvYmFsIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vYnV5XFwuY2FvbWVpcGFpXFwuY29tL2dvb2RzIjogImNhb21laXBhaSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmRhaHVvemhhblxcLmNvbS9wcm9kdWN0LyI6ICJkYWh1b3poYW4iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5kYXpoZVxcLmNuL2dvb2RzZGV0YWlsIjogImRhemhlIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuaHVvbGlkYVxcLmNvbS9wcm9kdWN0LyI6ICJodW9saWRhIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuMTJkaWFuXFwuY29tL3Byb2R1Y3QiOiAiMTJkaWFuIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwueW91Z291XFwuY29tL2NfIjogInlvdWdvdSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovLyg/Om91dGxldHN8d3d3KVxcLnlvdWdvdVxcLmNvbS9bXj9dK3NrdS1bXFx3XSsiOiAieW91Z291IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vKD86b3V0bGV0c3xzZW91bHx3d3cpXFwueW91Z291XFwuY29tL1thLXotXSsvc2t1LVthLXowLTktXStcXC5zaHRtbCI6ICJ5b3Vnb3UiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC4xMTFcXC5jb21cXC5jbi8oPzpwcm9kdWN0fGl0ZW0pLyI6ICIxMTEiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5kYW95YW9cXC5jb20vcHJvZHVjdCI6ICJkYW95YW8iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5qaWFua2VcXC5jb20vcHJvZHVjdC8iOiAiamlhbmtlIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuamlhbmtlXFwuY29tL3R1YW4vcHJvZHVjdC9bMC05XStcXC5odG1sIjogImppYW5rZSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLjM2MGthZFxcLmNvbS9wcm9kdWN0L1swLTlhLXpdK1xcLnNodG1sIjogIjM2MGthZCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmxieGNuLmNvbS8oPzpQcm9kdWN0fGl0ZW0pL1swLTldKy5odG1sIjogImxieGNuIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwubGJ4Y24uY29tL2hlcHN0b3JlZnJvbnQvbGJ4L3poL0xCWC8uKi9wL1swLTldKyI6ICJsYnhjbiIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL2Jvb2tcXC5kb3ViYW5cXC5jb20vc3ViamVjdC9bXFxkXSsiOiAiZG91YmFuIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vZG9uZ3hpXFwuZG91YmFuXFwuY29tL3Nob3cvW1xcZF0rIjogImRvdWJhbi1kb25neGkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9wcm9kdWN0XFwuaXQxNjhcXC5jb20vZGV0YWlsL2RvYy9bMC05XSsvaW5kZXhcXC5zaHRtbCI6ICJpdDE2OCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3Byb2R1Y3RcXC5wY29ubGluZVxcLmNvbVxcLmNuL1teL10qPy9bXi9dKj8vWzAtOV0rXFwuaHRtbCI6ICJwY29ubGluZSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3Byb2R1Y3RcXC5wY3BvcFxcLmNvbS9bMC05XSsvSW5kZXhcXC5odG1sIjogInBjcG9wIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vY29zbWVcXC5wY2xhZHlcXC5jb21cXC5jbi9wcm9kdWN0L1swLTldK1xcLmh0bWwiOiAicGNsYWR5IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vYnJhbmRcXC55b2thXFwuY29tL2Nvc21ldGljcy8uKj8vZGV0YWlsWzAtOV0rXFwuaHRtIjogInlva2EiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9kZXRhaWxcXC41NWJic1xcLmNvbS8uKj8vaW5kZXhbMC05XStcXC5zaHRtbCI6ICI1NWJicyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL2h6cFxcLm9ubHlsYWR5LmNvbS8uKj8vWzAtOV0rLyI6ICJvbmx5bGFkeSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLjI0ZHEuY29tL3Byb2R1Y3QuKj9odG1sIjogIjI0ZHEiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5tdXlpbmd6aGlqaWFcXC5jb20vU2hvcHBpbmcvUHJvZHVjdERldGFpbFxcLmFzcHgiOiAibXV5aW5nemhpamlhIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwubXV5aW5nemhpamlhXFwuY29tL3Byb2R1Y3QvXFxkK1xcLmh0bWwiOiAibXV5aW5nemhpamlhIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vaXRlbVxcLm11eWluZ3poaWppYVxcLmNvbS9cXGQrXFwuaHRtbCI6ICJtdXlpbmd6aGlqaWEiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5ob3VtYXJ0XFwuY29tL3BcXC1bXFxkXStcXC5odG1sIjogImhvdW1hcnQiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5vbmx5dHNcXC5jbi9nb29kcyI6ICJvbmx5dHMiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC53aW54dWFuXFwuY29tL3Byb2R1Y3QvLio/WzAtOV0qPyI6ICJ3aW54dWFuIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vaXRlbVxcLndpbnh1YW5cXC5jb20vWzAtOV0rIjogIndpbnh1YW4iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9kZXRhaWxcXC5ib29rdXVcXC5jb20vWzAtOV0qP1xcLmh0bWwiOiAiYm9va3V1IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vZVxcLmJvb2t1dVxcLmNvbS9kZXRhaWxcXC5waHBcXD9pZD1cXGQrIjogImJvb2t1dSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3dlbmp1XFwuYm9va3V1XFwuY29tL2RldGFpbFxcLnBocFxcP2lkPVxcZCsiOiAiYm9va3V1IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vYm9va1xcLmJlaWZhYm9va1xcLmNvbS9Qcm9kdWN0L0Jvb2tEZXRhaWwuYXNweCI6ICJiZWlmYWJvb2siLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9wcm9kdWN0XFwueWVza3lcXC5jb20vcHJvZHVjdC8uKj9bMC05XSo/LyI6ICJ5ZXNreSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3Byb2R1Y3RcXC5wY2hvbWVcXC5uZXQvLio/WzAtOV0qP1xcLmh0bWwiOiAicGNob21lIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vcHJvZHVjdFxcLmVuZXRcXC5jb21cXC5jbi9bYS16QS1aXFwtXS4qP1tcXGRdLio/XFwuaHRtbCI6ICJlbmV0IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vKHd3d1xcLik/KD86cnVpeWl8cmF5aSlcXC4oPzpjb218Y258Y29tXFwuY24pL1xcP3Byb2R1Y3QtW1xcZF0uKj9cXC5odG1sIjogInJ1aXlpIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwubm9wXFwuY24vcHJvZHVjdC1bXFxkXSo/XFwuaHRtbCI6ICJub3AiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9wcm9kdWN0XFwuaW1vYmlsZVxcLmNvbVxcLmNuL3Nob3cvW1xcZF0uKj9cXC5odG1sIjogImltb2JpbGUiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9wcm9kdWN0XFwuY25tb1xcLmNvbS9jZWxsX3Bob25lL2luZGV4W1xcZF0uKj9cXC5zaHRtbCI6ICJjbm1vIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vcGhvbmVcXC5zaG91amlcXC5jb21cXC5jbi9bXFxkXSsvZGV0YWlsL1tcXGRdKyI6ICJzaG91amkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9wcm9kdWN0XFwudG9tcGRhXFwuY29tL1thLXpBLVpdL1thLXpBLVpdL1tcXGRdKy9bXFxkXSsiOiAidG9tcGRhIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuMzUzM1xcLmNvbS9waG9uZS9waG9uZS4rXFwuaHRtIjogInBob25lMzUzMyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3Byb2R1Y3RcXC5pbnRvemdjXFwuY29tL1thLXpBLVpcXF9dK1xcX1tcXGRdKyI6ICJpbnRvemdjIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vcHJvZHVjdFxcLmNoaW5hYnl0ZVxcLmNvbS9wcm9kdWN0L1tcXGRdKy9bXFxkXSsiOiAiY2hpbmFieXRlIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vYXBwXFwudGVjaFxcLmlmZW5nXFwuY29tL1thLXpBLVpcXC1cXF9dKy9bYS16QS1aXFwtXFxfXSsvW2EtekEtWjAtOVxcLVxcX10rIjogImlmZW5nIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vYXBwXFwudGVjaFxcLmlmZW5nXFwuY29tL1thLXpBLVpcXC1cXF9dKy9kZXRhaWxcXC1pbmRleFxcLVswLTldK1xcLmh0bWwiOiAiaWZlbmciLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3cyXFwueGl0ZWtcXC5jb20vcHJvZHVjdGlvbi9wcm9kdWN0LnBocCI6ICJ4aXRlayIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3Byb2R1Y3RcXC5pbXAzXFwubmV0L3Byb2R1Y3RcXC5waHAiOiAiaW1wMyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLm1lbmdsdVxcLmNvbS9wcm9kdWN0L1tcXGRdK1xcLmh0bWwiOiAibWVuZ2x1IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vKD86bGFkeXxsaW5nZXJpZXx3d3d8ZmFzaGlvbnxzaGlwaW58aXRlbSlcXC5tb29uYmFzYVxcLmNvbS9bYS16QS1aXVxcLVtcXGRdK1xcLmh0bWwiOiAibW9vbmJhc2EiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC4oPzppbmcyaW5nfHFqaGVyYnxrb3Jpcmx8YWxhdmVzfDAtMTAwc3xjaGVycmllc3BpZXxjbGFmaWVsZHxiYW95ZWFofHN1b3Jhbmd8bW9udGVhbW9yfHJ1dGlzaGVyKVxcLmNvbS9wXFwtW1xcZF0rXFwuaHRtbCI6ICJtb29uYmFzYSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmtlZWRlXFwuY29tKFxcLmNuKT8vW2EtekEtWl0rW1xcZF0rXFwuaHRtbCI6ICJrZWVkZSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmtlZGVcXC5jb20oXFwuY24pPy9bYS16QS1aXStbXFxkXStcXC5odG1sIjogImtlZWRlIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vaXRlbShcXC52dCk/XFwudmFuY2xcXC5jb20vW1xcZF0rXFwuaHRtbCI6ICJ2YW5jbCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmRhemhvbmdkaWFucWlcXC5jb21cXC5jbi9kYXpob25nL3Byb2R1Y3RbXFwtXFxkXStcXC5odG0iOiAiZGF6aG9uZ2RpYW5xaSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnNraW5zdG9yZWNoaW5hXFwuY29tLy4rLy4rW1xcZF0rXFwtcFxcLmh0bWwiOiAic2tpbnN0b3JlY2hpbmEiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9pdGVtXFwuYnV5XFwucXFcXC5jb20vaXRlbS8iOiAicXEiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly8uKlxcLnpvbFxcLmNvbVxcLmNuL1xcZCsvXFxkK1xcLmh0bWwiOiAiem9sLWFydGljbGUiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly8uKlxcLnBjb25saW5lXFwuY29tXFwuY24vXFxkKy9cXGQrXFwuaHRtbCI6ICJwY29ubGluZS1hcnRpY2xlIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vLipcXC55ZXNreVxcLmNvbS9cXGQrL1xcZCtcXC5zaHRtbCI6ICJ5ZXNreS1hcnRpY2xlIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vLipcXC5pdDE2OFxcLmNvbS9bYS16XVxcZCsvXFxkKy9cXGQrL1xcZCtcXC5zaHRtbCI6ICJpdDE2OC1hcnRpY2xlIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vLipcXC5wY3BvcFxcLmNvbS9kb2MvXFxkKy9cXGQrL1xcZCtcXC5zaHRtbCI6ICJwY3BvcC1hcnRpY2xlIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vLipcXC5wY2hvbWVcXC5uZXQvY29udGVudC1cXGQrXFwuaHRtbCI6ICJwY2hvbWUtYXJ0aWNsZSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovLy4qXFwuMTM5c2hvcFxcLmNvbS8uKj8vXFxkKy9cXGQrXFwuaHRtIjogIjEzOXNob3AtYXJ0aWNsZSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLm1pbGllclxcLmNvbS9wcm9kdWN0LyI6ICJtaWxpZXIiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5zcG9ydGljYVxcLmNuL2dvb2RzIjogInNwb3J0aWNhIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuemhlbnBpblxcLmNvbS9wcm9kdWN0IjogInpoZW5waW4iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5nYW9qaWVcXC5jb20vcHJvZHVjdC8iOiAiZ2FvamllIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwubmFydWtvXFwuY29tXFwuY24vc2hvcC9wcm9kdWN0L0dvb2RzXFwuYXNweCI6ICJuYXJ1a28iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC4oPzp2aXZpYW58bWFzYW1hc298bGlua21hc2EpXFwuKD86Y29tfGNuKS9nb29kc18iOiAibWFzYW1hc28iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9pdGVtXFwuc2Vjb29cXC5jb20vIjogInNlY29vIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vcGFpbWFpXFwuc2Vjb29cXC5jb20vWzAtOV0rXFwuc2h0bWwiOiAic2Vjb28iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9zYWxlXFwuc2Vjb29cXC5jb20vWzAtOV0rXFwuc2h0bWwiOiAic2Vjb28iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly8oPzp3d3d8dHVhbilcXC5laGFpZXJcXC5jb20vcHJvZHVjdC8iOiAiZWhhaWVyIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vcWlqaVxcLmVoYWllclxcLmNvbS9uZXcvbmV3RXhwbG9yZU1hbmFnZXIvZGF0ZWlsL1swLTldKyI6ICJlaGFpZXIiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5oYW5kdXlpc2hlXFwuY29tL2dvb2RzIjogImhhbmR1eWlzaGUiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC53Ymlhb1xcLmNuL1thLXowLTktXStcXC5odG1sIjogIndiaWFvIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwud2JpYW9cXC5jbi9nb29kc1xcLnBocFxcP2dvb2RzX2lkPVswLTldKyI6ICJ3YmlhbyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLndiaWFvXFwuY24vdmFuLWRlci1iYXV3ZWRlLVxcd1swLTldK1xcLmh0bWwiOiAid2JpYW8iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5zaGFuZ3BpblxcLmNvbShcXC5oaykqLy4qP3Byb2R1Y3QvIjogInNoYW5ncGluIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwucGJhXFwuY24vKD86cHJvZHVjdHxzcCkiOiAicGJhIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwubWV0cm9tYWxsXFwuY24vUHJvZHVjdC8iOiAibWV0cm9tYWxsIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwubGl6aVxcLmNvbS9wcm9kdWN0IjogImxpemkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5rYWRhbmdcXC5jb20vW2EtekEtWjAtOS9dKmRldGFpbFxcZCsiOiAia2FkYW5nIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwua2FkYW5nXFwuY29tL3Byb2R1Y3QvWzAtOV0rIjogImthZGFuZyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmFpbWVyXFwuY29tXFwuY24vZ29vZHMvIjogImFpbWVyIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwubGFtaXVcXC5jb20vZ29vZHNfIjogImxhbWl1IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwubGFtaXVcXC5jb20vKD86Z29vZHNffHByb2R1Y3QtKSI6ICJsYW1pdSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmVzcHJpdFxcLmNuLyg/OnByb2R1Y3R8aXRlbSkvIjogImVzcHJpdCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmxpZWJvXFwuY29tL3Byb2R1Y3QvIjogImxpZWJvIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwud2FuZ2ppdVxcLmNvbS9wcm9kdWN0Lyg/IWZsYXNoUHJvbW90aW9uKSI6ICJ3YW5naml1IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3LndhbmdqaXUuY29tL21hbGwvaXRlbS1waWQtW2EtekEtWjAtOV0rXFwuaHRtbCI6ICJ3YW5naml1IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwueGlmdXF1YW5cXC5jb20vcHJvZHVjdC8iOiAieGlmdXF1YW4iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC4xODlcXC5jbi9wcm9kdWN0cy8iOiAiMTg5IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuaGljZG1hXFwuY29tL3Byb2R1Y3RfZGV0YWlsXyI6ICJoaWNkbWEiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9tYWxsXFwuMTAwMTBcXC5jb20vZ29vZHNkZXRhaWwvIjogIjEwMDEwIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuZTEwMFxcLmNuL2ViaXovY2hhbm5lbC8oLiovKStcXGQrXFwuaHRtbCI6ICJlMTAwIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vc3RvcmVcXC5zYW1zdW5nXFwuY29tL2NuLy4qL3AvLioiOiAic2Ftc3VuZyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3N0b3JlXFwubWVpenVcXC5jb20vcHJvZHVjdC8iOiAibWVpenUiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9kZXRhaWxcXC5tZWl6dVxcLmNvbS9pdGVtL1xcdysiOiAibWVpenUiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9iMmNcXC45NThzaG9wXFwuY29tLy4qL1xcZCtcXC5odG1sIjogIjk1OHNob3AiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5va2hxYlxcLmNvbS9pdGVtL1xcZCtcXC5odG1sIjogIm9raHFiIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwub2tocWJcXC5jb20vcWlhbmcvXFxkKy9cXGQrXFwuaHRtbCI6ICJva2hxYiIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnp0ZWRldmljZVxcLmNvbVxcLmNuL3Byb2R1Y3QvIjogInp0ZWRldmljZSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmRhbGluZ1xcLmNvbS9kZXRhaWwtWzAtOV0rXFwuaHRtbCI6ICJkYWxpbmciLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9pdGVtXFwuc2hvd2pveVxcLmNvbS9za3UvWzAtOV0rXFwuaHRtbCI6ICJzaG93am95IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwub2NqXFwuY29tXFwuY24vZGV0YWlsL1swLTldKyI6ICJvY2oiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5vY2pcXC5rci9kZXRhaWwvWzAtOV0rIjogIm9jai1rciIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLm9jalxcLmNvbVxcLmNuL290dWFucy9bYS16XSsvWzAtOV0rIjogIm9jai10dWFuIiwKCQkJCQkiXmh0dHA6Ly93d3dcXC5sdnlvdW1hbGxcXC5jb20vKHR1YW4vZ29vZHMtfHRtaC9nb29kcy18Z29vZHMvKVxcZCsiOiAibHZ5b3VtYWxsIiwKCQkJCQkiaHR0cDovL3d3d1xcLmtqdFxcLmNvbS9wcm9kdWN0L2RldGFpbC9cXGQrIjogImtqdCIsCgkJCQkJImh0dHA6Ly9zdG9yZVxcLmxvZ2l0ZWNoXFwuY29tXFwuY24vcHJvL3Byb0RldGFpbC9cXGQrIjogImxvZ2l0ZWNoIiwKCQkJCQkiaHR0cDovL3Nob3BcXC5ib29oZWVcXC5jb20vc3RvcmUvZ29vZHMvXFx3KyI6ICJib29oZWUiLAoJCQkJCSJodHRwOi8vd3d3XFwubWVpY2lcXC5jb20vcHJvZHVjdC1bYS16QS1aMC05LV0rXFwuaHRtbCI6ICJtZWljaSIsCgkJCQkJImh0dHA6Ly93d3dcXC5tZWljaVxcLmNvbS9wcm9kdWN0LioiOiAibWVpY2kiLAoJCQkJCSJodHRwOi8vKD86Z2xvYmFsfHlvdXx3d3cpXFwuYmVpYmVpXFwuY29tL2RldGFpbC9bMC05LV0rXFwuaHRtbCI6ICJiZWliZWkiLAoJCQkJCSJodHRwOi8vc3RvcmVcXC5uaWtlXFwuY29tL2NuL3poX2NuL3BkL1thLXpBLVowLTlcXHU0ZTAwLVxcdTlmYTUtXSsiOiAibmlrZSIsCgkJCQkJImh0dHA6Ly9zdG9yZVxcLm5pa2VcXC5jb20vY24vemhfY24vcHJvZHVjdC9bYS16QS1aMC05XFx1NGUwMC1cXHU5ZmE1LV0rIjogIm5pa2UiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5mZW5ncXVcXC5jb20vZGV0YWlsLyI6ICJmZW5ncXUiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5tZWlcXC5jb20vc2lsby8uKi1ldmVudC1ldmVudC8uKlxcLmh0bWwiOiAibWVpIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwudnNpZ29cXC5jbi8uKlxcLmh0bWwiOiAidnNpZ28iLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5zdW5kYW5cXC5jb20vcHJvZHVjdC1bMC05XSsiOiAic3VuZGFuIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwuamlhZVxcLmNvbS9wcm9kdWN0ZGV0YWlsIjogImppYWUiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9oZFxcLnphemhpcHVcXC5jb20vLipcXC5hc3BcXD9pZD1bMC05XSsiOiAiemF6aGlwdSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLm1pY3Jvc29mdHN0b3JlXFwuY29tXFwuY24vJUU3JUIxJUJCJUU1JTg4JUFCLy4qL3AvLioiOiAibWljcm9zb2Z0c3RvcmUiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC54Z2RxXFwuY29tL3Byb2R1Y3QtWzAtOV0rXFwuaHRtbCI6ICJ4Z2RxIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vKD86d3d3XFwufCl4dGVwXFwuY29tXFwuY24vZ29vZHMvZG9faW5kZXgiOiAieHRlcCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnh0ZXBcXC5jb21cXC5jbi90ZWFtLVswLTldK1xcLmh0bWwiOiAieHRlcCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLnh0ZXBcXC5jb21cXC5jbi9zcGlrZS1bMC05XStcXC5odG1sIjogInh0ZXAiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3dcXC5zdGFwbGVzXFwuY24vcHJvZHVjdC9bMC05YS16QS1aXSsiOiAic3RhcGxlcyIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL21hbGxcXC5taWRlYVxcLmNvbS9kZXRhaWwvaW5kZXgiOiAibWlkZWEiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3cxXFwubWFjeXNcXC5jb20vc2hvcC9wcm9kdWN0L1xcdysiOiAibWFjeXMiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9jbi5zaG9wYm9wLmNvbS9bYS16MC05LV0rL3ZwL1xcdysiOiAic2hvcGJvcCIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3d1xcLmh1YVxcLmNvbS9wcm9kdWN0L1swLTldK1xcLmh0bWwiOiAiaHVhIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vc2hvcC56aGU4MDAuY29tL3Byb2R1Y3RzL1swLTlhLXpdKyI6ICJ6aGU4MDAiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3cuY29zbWUuY29tL3Byb2R1Y3RzL2RldGFpbC5waHBcXD9wcm9kdWN0X2lkIjogImNvc21lIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3LmRpYXBlcnMuY29tL3AvIjogImRpYXBlcnMiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3cud2luZGVsbi5kZS96aC9cXHcrLSI6ICJ3aW5kZWxuIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3LmVzY2VudHVhbC5jb20vW2Etel0rWzAtOV0rLyI6ICJlc2NlbnR1YWwiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3cuYmljY2FtZXJhLmNvbS9iYy9kaXNwL1xcdysiOiAiYmljY2FtZXJhIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3LmVzdGVlbGF1ZGVyLmNvbS9wcm9kdWN0L1xcZCsvXFxkKy9cXHcrIjogImVzdGVlbGF1ZGVyIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3LnNha3NmaWZ0aGF2ZW51ZS5jb20vbWFpbi9Qcm9kdWN0RGV0YWlsLmpzcCI6ICJzYWtzZmlmdGhhdmVudWUiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3cudGhld2F0Y2hlcnkuY29tL2RldGFpbC5hc3AiOiAidGhld2F0Y2hlcnkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9pdGVtLnR1aHUuKGNufGNvbSkvUHJvZHVjdHMvIjogInR1aHUiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9pdGVtXFwudHVodVxcLmNuL1Byb2R1Y3RzL1tBLVotXSsvXFxkK1xcLmh0bWwiOiAidHVodSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL2VzaG9wLmh0Yy5jb20vbWFsbC96aC1DTi9odGMvW2EtejAtOS1dKyI6ICJodGMiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly9yb3Nlb25seS5jb20uY24vaXRlbS9bMC05XSsuaHRtbCI6ICJyb3Nlb25seSIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3dy50YXF1LmNuL2dvb2RzLVxcZCsuaHRtbCI6ICJ0YXF1IiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vc2hvcC5qeC4xODkuY24vd2ViL3Byb2R1Y3REZXRhaWwuYWN0aW9uXFw/cHJvZHVjdEluZm9JRCI6ICIxODkiLAoJCQkJCSJeKD86aHR0cHxodHRwcyk6Ly93d3cuYmZ0di5jb20vcHJvZHVjdC9bMC05XSsiOiAiYmZ0diIsCgkJCQkJIl4oPzpodHRwfGh0dHBzKTovL3d3dy5heG1hbGwuY29tLmF1L3AvXFxkK1xcLmh0bWwiOiAiYXhtYWxsIiwKCQkJCQkiXig/Omh0dHB8aHR0cHMpOi8vd3d3XFwubG92b1xcLmNuL3ByLVswLTldK1xcLmh0bSI6ICJsb3ZvIgoJCQkJfTsKCQkJZS5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHsKCQkJCXZhciBlID0gbCgpOwoJCQkJaS5wYWdlSW5mbyA9IGUsIGkuc2pmaXggfHwgKGkuc2l0ZSAmJiAoInRhb2JhbyIgPT0gaS5zaXRlIHx8ICJ0bWFsbCIgPT0gaS5zaXRlIHx8IGkuc2l0ZS5pbmRleE9mKCJ0YW9iYW8iKSA+IC0xIHx8ICIxNjg4IiA9PSBpLnNpdGUpICYmIChpLmFsaVNpdGUgPSAhMCksIGkubmV3X2V4dGVuc2lvbiAmJiAwID09PSBlLnR5cGUgJiYgKG4oNykuZ2V0UHVyZU1lZGlhdigpLCBuKDI1KS5pbml0KCkpKQoJCQl9CgkJfSkuY2FsbCh0LCBuKDYpLCBuKDEpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQl2YXIgaTsKCQkhIGZ1bmN0aW9uKHQsIG4pIHsKCQkJIm9iamVjdCIgPT0gdHlwZW9mIGUgJiYgIm9iamVjdCIgPT0gdHlwZW9mIGUuZXhwb3J0cyA/IGUuZXhwb3J0cyA9IHQuZG9jdW1lbnQgPyBuKHQsICEwKSA6IGZ1bmN0aW9uKGUpIHsKCQkJCWlmICghZS5kb2N1bWVudCkgdGhyb3cgbmV3IEVycm9yKCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50Iik7CgkJCQlyZXR1cm4gbihlKQoJCQl9IDogbih0KQoJCX0oInVuZGVmaW5lZCIgIT0gdHlwZW9mIHdpbmRvdyA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uKGEsIG8pIHsKCQkJZnVuY3Rpb24gcihlKSB7CgkJCQl2YXIgdCA9ICJsZW5ndGgiIGluIGUgJiYgZS5sZW5ndGgsCgkJCQkJbiA9IGxlLnR5cGUoZSk7CgkJCQlyZXR1cm4gImZ1bmN0aW9uIiA9PT0gbiB8fCBsZS5pc1dpbmRvdyhlKSA/ICExIDogMSA9PT0gZS5ub2RlVHlwZSAmJiB0ID8gITAgOiAiYXJyYXkiID09PSBuIHx8IDAgPT09IHQgfHwgIm51bWJlciIgPT0gdHlwZW9mIHQgJiYgdCA+IDAgJiYgdCAtIDEgaW4gZQoJCQl9CgoJCQlmdW5jdGlvbiBzKGUsIHQsIG4pIHsKCQkJCWlmIChsZS5pc0Z1bmN0aW9uKHQpKSByZXR1cm4gbGUuZ3JlcChlLCBmdW5jdGlvbihlLCBpKSB7CgkJCQkJcmV0dXJuICEhdC5jYWxsKGUsIGksIGUpICE9PSBuCgkJCQl9KTsKCQkJCWlmICh0Lm5vZGVUeXBlKSByZXR1cm4gbGUuZ3JlcChlLCBmdW5jdGlvbihlKSB7CgkJCQkJcmV0dXJuIGUgPT09IHQgIT09IG4KCQkJCX0pOwoJCQkJaWYgKCJzdHJpbmciID09IHR5cGVvZiB0KSB7CgkJCQkJaWYgKGdlLnRlc3QodCkpIHJldHVybiBsZS5maWx0ZXIodCwgZSwgbik7CgkJCQkJdCA9IGxlLmZpbHRlcih0LCBlKQoJCQkJfQoJCQkJcmV0dXJuIGxlLmdyZXAoZSwgZnVuY3Rpb24oZSkgewoJCQkJCXJldHVybiBsZS5pbkFycmF5KGUsIHQpID49IDAgIT09IG4KCQkJCX0pCgkJCX0KCgkJCWZ1bmN0aW9uIGwoZSwgdCkgewoJCQkJZG8gZSA9IGVbdF07IHdoaWxlIChlICYmIDEgIT09IGUubm9kZVR5cGUpOwoJCQkJcmV0dXJuIGUKCQkJfQoKCQkJZnVuY3Rpb24gYyhlKSB7CgkJCQl2YXIgdCA9IHplW2VdID0ge307CgkJCQlyZXR1cm4gbGUuZWFjaChlLm1hdGNoKGtlKSB8fCBbXSwgZnVuY3Rpb24oZSwgbikgewoJCQkJCXRbbl0gPSAhMAoJCQkJfSksIHQKCQkJfQoKCQkJZnVuY3Rpb24gZCgpIHsKCQkJCXhlLmFkZEV2ZW50TGlzdGVuZXIgPyAoeGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsIHAsICExKSwgYS5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIiwgcCwgITEpKSA6ICh4ZS5kZXRhY2hFdmVudCgib25yZWFkeXN0YXRlY2hhbmdlIiwgcCksIGEuZGV0YWNoRXZlbnQoIm9ubG9hZCIsIHApKQoJCQl9CgoJCQlmdW5jdGlvbiBwKCkgewoJCQkJKHhlLmFkZEV2ZW50TGlzdGVuZXIgfHwgImxvYWQiID09PSBldmVudC50eXBlIHx8ICJjb21wbGV0ZSIgPT09IHhlLnJlYWR5U3RhdGUpICYmIChkKCksIGxlLnJlYWR5KCkpCgkJCX0KCgkJCWZ1bmN0aW9uIGgoZSwgdCwgbikgewoJCQkJaWYgKHZvaWQgMCA9PT0gbiAmJiAxID09PSBlLm5vZGVUeXBlKSB7CgkJCQkJdmFyIGkgPSAiZGF0YS0iICsgdC5yZXBsYWNlKE5lLCAiLSQxIikudG9Mb3dlckNhc2UoKTsKCQkJCQlpZiAobiA9IGUuZ2V0QXR0cmlidXRlKGkpLCAic3RyaW5nIiA9PSB0eXBlb2YgbikgewoJCQkJCQl0cnkgewoJCQkJCQkJbiA9ICJ0cnVlIiA9PT0gbiA/ICEwIDogImZhbHNlIiA9PT0gbiA/ICExIDogIm51bGwiID09PSBuID8gbnVsbCA6ICtuICsgIiIgPT09IG4gPyArbiA6IFNlLnRlc3QobikgPyBsZS5wYXJzZUpTT04obikgOiBuCgkJCQkJCX0gY2F0Y2ggKGEpIHt9CgkJCQkJCWxlLmRhdGEoZSwgdCwgbikKCQkJCQl9IGVsc2UgbiA9IHZvaWQgMAoJCQkJfQoJCQkJcmV0dXJuIG4KCQkJfQoKCQkJZnVuY3Rpb24gdShlKSB7CgkJCQl2YXIgdDsKCQkJCWZvciAodCBpbiBlKQoJCQkJCWlmICgoImRhdGEiICE9PSB0IHx8ICFsZS5pc0VtcHR5T2JqZWN0KGVbdF0pKSAmJiAidG9KU09OIiAhPT0gdCkgcmV0dXJuICExOwoJCQkJcmV0dXJuICEwCgkJCX0KCgkJCWZ1bmN0aW9uIG0oZSwgdCwgbiwgaSkgewoJCQkJaWYgKGxlLmFjY2VwdERhdGEoZSkpIHsKCQkJCQl2YXIgYSwgbywgciA9IGxlLmV4cGFuZG8sCgkJCQkJCXMgPSBlLm5vZGVUeXBlLAoJCQkJCQlsID0gcyA/IGxlLmNhY2hlIDogZSwKCQkJCQkJYyA9IHMgPyBlW3JdIDogZVtyXSAmJiByOwoJCQkJCWlmIChjICYmIGxbY10gJiYgKGkgfHwgbFtjXS5kYXRhKSB8fCB2b2lkIDAgIT09IG4gfHwgInN0cmluZyIgIT0gdHlwZW9mIHQpIHJldHVybiBjIHx8IChjID0gcyA/IGVbcl0gPSBLLnBvcCgpIHx8IGxlLmd1aWQrKyA6IHIpLCBsW2NdIHx8IChsW2NdID0gcyA/IHt9IDogewoJCQkJCQl0b0pTT046IGxlLm5vb3AKCQkJCQl9KSwgKCJvYmplY3QiID09IHR5cGVvZiB0IHx8ICJmdW5jdGlvbiIgPT0gdHlwZW9mIHQpICYmIChpID8gbFtjXSA9IGxlLmV4dGVuZChsW2NdLCB0KSA6IGxbY10uZGF0YSA9IGxlLmV4dGVuZChsW2NdLmRhdGEsIHQpKSwgbyA9IGxbY10sIGkgfHwgKG8uZGF0YSB8fCAoby5kYXRhID0ge30pLCBvID0gby5kYXRhKSwgdm9pZCAwICE9PSBuICYmIChvW2xlLmNhbWVsQ2FzZSh0KV0gPSBuKSwgInN0cmluZyIgPT0gdHlwZW9mIHQgPyAoYSA9IG9bdF0sIG51bGwgPT0gYSAmJiAoYSA9IG9bbGUuY2FtZWxDYXNlKHQpXSkpIDogYSA9IG8sIGEKCQkJCX0KCQkJfQoKCQkJZnVuY3Rpb24gZihlLCB0LCBuKSB7CgkJCQlpZiAobGUuYWNjZXB0RGF0YShlKSkgewoJCQkJCXZhciBpLCBhLCBvID0gZS5ub2RlVHlwZSwKCQkJCQkJciA9IG8gPyBsZS5jYWNoZSA6IGUsCgkJCQkJCXMgPSBvID8gZVtsZS5leHBhbmRvXSA6IGxlLmV4cGFuZG87CgkJCQkJaWYgKHJbc10pIHsKCQkJCQkJaWYgKHQgJiYgKGkgPSBuID8gcltzXSA6IHJbc10uZGF0YSkpIHsKCQkJCQkJCWxlLmlzQXJyYXkodCkgPyB0ID0gdC5jb25jYXQobGUubWFwKHQsIGxlLmNhbWVsQ2FzZSkpIDogdCBpbiBpID8gdCA9IFt0XSA6ICh0ID0gbGUuY2FtZWxDYXNlKHQpLCB0ID0gdCBpbiBpID8gW3RdIDogdC5zcGxpdCgiICIpKSwgYSA9IHQubGVuZ3RoOwoJCQkJCQkJZm9yICg7IGEtLTspIGRlbGV0ZSBpW3RbYV1dOwoJCQkJCQkJaWYgKG4gPyAhdShpKSA6ICFsZS5pc0VtcHR5T2JqZWN0KGkpKSByZXR1cm4KCQkJCQkJfShuIHx8IChkZWxldGUgcltzXS5kYXRhLCB1KHJbc10pKSkgJiYgKG8gPyBsZS5jbGVhbkRhdGEoW2VdLCAhMCkgOiByZS5kZWxldGVFeHBhbmRvIHx8IHIgIT0gci53aW5kb3cgPyBkZWxldGUgcltzXSA6IHJbc10gPSBudWxsKQoJCQkJCX0KCQkJCX0KCQkJfQoKCQkJZnVuY3Rpb24gZygpIHsKCQkJCXJldHVybiAhMAoJCQl9CgoJCQlmdW5jdGlvbiBfKCkgewoJCQkJcmV0dXJuICExCgkJCX0KCgkJCWZ1bmN0aW9uIHgoKSB7CgkJCQl0cnkgewoJCQkJCXJldHVybiB4ZS5hY3RpdmVFbGVtZW50CgkJCQl9IGNhdGNoIChlKSB7fQoJCQl9CgoJCQlmdW5jdGlvbiB3KGUpIHsKCQkJCXZhciB0ID0gUmUuc3BsaXQoInwiKSwKCQkJCQluID0gZS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7CgkJCQlpZiAobi5jcmVhdGVFbGVtZW50KQoJCQkJCWZvciAoOyB0Lmxlbmd0aDspIG4uY3JlYXRlRWxlbWVudCh0LnBvcCgpKTsKCQkJCXJldHVybiBuCgkJCX0KCgkJCWZ1bmN0aW9uIHYoZSwgdCkgewoJCQkJdmFyIG4sIGksIGEgPSAwLAoJCQkJCW8gPSB0eXBlb2YgZS5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gQ2UgPyBlLmdldEVsZW1lbnRzQnlUYWdOYW1lKHQgfHwgIioiKSA6IHR5cGVvZiBlLnF1ZXJ5U2VsZWN0b3JBbGwgIT09IENlID8gZS5xdWVyeVNlbGVjdG9yQWxsKHQgfHwgIioiKSA6IHZvaWQgMDsKCQkJCWlmICghbykKCQkJCQlmb3IgKG8gPSBbXSwgbiA9IGUuY2hpbGROb2RlcyB8fCBlOyBudWxsICE9IChpID0gblthXSk7IGErKykgIXQgfHwgbGUubm9kZU5hbWUoaSwgdCkgPyBvLnB1c2goaSkgOiBsZS5tZXJnZShvLCB2KGksIHQpKTsKCQkJCXJldHVybiB2b2lkIDAgPT09IHQgfHwgdCAmJiBsZS5ub2RlTmFtZShlLCB0KSA/IGxlLm1lcmdlKFtlXSwgbykgOiBvCgkJCX0KCgkJCWZ1bmN0aW9uIGIoZSkgewoJCQkJcWUudGVzdChlLnR5cGUpICYmIChlLmRlZmF1bHRDaGVja2VkID0gZS5jaGVja2VkKQoJCQl9CgoJCQlmdW5jdGlvbiB5KGUsIHQpIHsKCQkJCXJldHVybiBsZS5ub2RlTmFtZShlLCAidGFibGUiKSAmJiBsZS5ub2RlTmFtZSgxMSAhPT0gdC5ub2RlVHlwZSA/IHQgOiB0LmZpcnN0Q2hpbGQsICJ0ciIpID8gZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKVswXSB8fCBlLmFwcGVuZENoaWxkKGUub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIpKSA6IGUKCQkJfQoKCQkJZnVuY3Rpb24gayhlKSB7CgkJCQlyZXR1cm4gZS50eXBlID0gKG51bGwgIT09IGxlLmZpbmQuYXR0cihlLCAidHlwZSIpKSArICIvIiArIGUudHlwZSwgZQoJCQl9CgoJCQlmdW5jdGlvbiB6KGUpIHsKCQkJCXZhciB0ID0gVmUuZXhlYyhlLnR5cGUpOwoJCQkJcmV0dXJuIHQgPyBlLnR5cGUgPSB0WzFdIDogZS5yZW1vdmVBdHRyaWJ1dGUoInR5cGUiKSwgZQoJCQl9CgoJCQlmdW5jdGlvbiBCKGUsIHQpIHsKCQkJCWZvciAodmFyIG4sIGkgPSAwOyBudWxsICE9IChuID0gZVtpXSk7IGkrKykgbGUuX2RhdGEobiwgImdsb2JhbEV2YWwiLCAhdCB8fCBsZS5fZGF0YSh0W2ldLCAiZ2xvYmFsRXZhbCIpKQoJCQl9CgoJCQlmdW5jdGlvbiBqKGUsIHQpIHsKCQkJCWlmICgxID09PSB0Lm5vZGVUeXBlICYmIGxlLmhhc0RhdGEoZSkpIHsKCQkJCQl2YXIgbiwgaSwgYSwgbyA9IGxlLl9kYXRhKGUpLAoJCQkJCQlyID0gbGUuX2RhdGEodCwgbyksCgkJCQkJCXMgPSBvLmV2ZW50czsKCQkJCQlpZiAocykgewoJCQkJCQlkZWxldGUgci5oYW5kbGUsIHIuZXZlbnRzID0ge307CgkJCQkJCWZvciAobiBpbiBzKQoJCQkJCQkJZm9yIChpID0gMCwgYSA9IHNbbl0ubGVuZ3RoOyBhID4gaTsgaSsrKSBsZS5ldmVudC5hZGQodCwgbiwgc1tuXVtpXSkKCQkJCQl9CgkJCQkJci5kYXRhICYmIChyLmRhdGEgPSBsZS5leHRlbmQoe30sIHIuZGF0YSkpCgkJCQl9CgkJCX0KCgkJCWZ1bmN0aW9uIEMoZSwgdCkgewoJCQkJdmFyIG4sIGksIGE7CgkJCQlpZiAoMSA9PT0gdC5ub2RlVHlwZSkgewoJCQkJCWlmIChuID0gdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLCAhcmUubm9DbG9uZUV2ZW50ICYmIHRbbGUuZXhwYW5kb10pIHsKCQkJCQkJYSA9IGxlLl9kYXRhKHQpOwoJCQkJCQlmb3IgKGkgaW4gYS5ldmVudHMpIGxlLnJlbW92ZUV2ZW50KHQsIGksIGEuaGFuZGxlKTsKCQkJCQkJdC5yZW1vdmVBdHRyaWJ1dGUobGUuZXhwYW5kbykKCQkJCQl9CgkJCQkJInNjcmlwdCIgPT09IG4gJiYgdC50ZXh0ICE9PSBlLnRleHQgPyAoayh0KS50ZXh0ID0gZS50ZXh0LCB6KHQpKSA6ICJvYmplY3QiID09PSBuID8gKHQucGFyZW50Tm9kZSAmJiAodC5vdXRlckhUTUwgPSBlLm91dGVySFRNTCksIHJlLmh0bWw1Q2xvbmUgJiYgZS5pbm5lckhUTUwgJiYgIWxlLnRyaW0odC5pbm5lckhUTUwpICYmICh0LmlubmVySFRNTCA9IGUuaW5uZXJIVE1MKSkgOiAiaW5wdXQiID09PSBuICYmIHFlLnRlc3QoZS50eXBlKSA/ICh0LmRlZmF1bHRDaGVja2VkID0gdC5jaGVja2VkID0gZS5jaGVja2VkLCB0LnZhbHVlICE9PSBlLnZhbHVlICYmICh0LnZhbHVlID0gZS52YWx1ZSkpIDogIm9wdGlvbiIgPT09IG4gPyB0LmRlZmF1bHRTZWxlY3RlZCA9IHQuc2VsZWN0ZWQgPSBlLmRlZmF1bHRTZWxlY3RlZCA6ICgiaW5wdXQiID09PSBuIHx8ICJ0ZXh0YXJlYSIgPT09IG4pICYmICh0LmRlZmF1bHRWYWx1ZSA9IGUuZGVmYXVsdFZhbHVlKQoJCQkJfQoJCQl9CgoJCQlmdW5jdGlvbiBTKGUsIHQpIHsKCQkJCXZhciBuLCBpID0gbGUodC5jcmVhdGVFbGVtZW50KGUpKS5hcHBlbmRUbyh0LmJvZHkpLAoJCQkJCW8gPSBhLmdldERlZmF1bHRDb21wdXRlZFN0eWxlICYmIChuID0gYS5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZShpWzBdKSkgPyBuLmRpc3BsYXkgOiBsZS5jc3MoaVswXSwgImRpc3BsYXkiKTsKCQkJCXJldHVybiBpLmRldGFjaCgpLCBvCgkJCX0KCgkJCWZ1bmN0aW9uIE4oZSkgewoJCQkJdmFyIHQgPSB4ZSwKCQkJCQluID0gaXRbZV07CgkJCQlyZXR1cm4gbiB8fCAobiA9IFMoZSwgdCksICJub25lIiAhPT0gbiAmJiBuIHx8IChudCA9IChudCB8fCBsZSgiPGlmcmFtZSBmcmFtZWJvcmRlcj0nMCcgd2lkdGg9JzAnIGhlaWdodD0nMCcvPiIpKS5hcHBlbmRUbyh0LmRvY3VtZW50RWxlbWVudCksIHQgPSAobnRbMF0uY29udGVudFdpbmRvdyB8fCBudFswXS5jb250ZW50RG9jdW1lbnQpLmRvY3VtZW50LCB0LndyaXRlKCksIHQuY2xvc2UoKSwgbiA9IFMoZSwgdCksIG50LmRldGFjaCgpKSwgaXRbZV0gPSBuKSwgbgoJCQl9CgoJCQlmdW5jdGlvbiBUKGUsIHQpIHsKCQkJCXJldHVybiB7CgkJCQkJZ2V0OiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIG4gPSBlKCk7CgkJCQkJCWlmIChudWxsICE9IG4pIHJldHVybiBuID8gdm9pZCBkZWxldGUgdGhpcy5nZXQgOiAodGhpcy5nZXQgPSB0KS5hcHBseSh0aGlzLCBhcmd1bWVudHMpCgkJCQkJfQoJCQkJfQoJCQl9CgoJCQlmdW5jdGlvbiBQKGUsIHQpIHsKCQkJCWlmICh0IGluIGUpIHJldHVybiB0OwoJCQkJZm9yICh2YXIgbiA9IHQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0LnNsaWNlKDEpLCBpID0gdCwgYSA9IGd0Lmxlbmd0aDsgYS0tOykKCQkJCQlpZiAodCA9IGd0W2FdICsgbiwgdCBpbiBlKSByZXR1cm4gdDsKCQkJCXJldHVybiBpCgkJCX0KCgkJCWZ1bmN0aW9uIEkoZSwgdCkgewoJCQkJZm9yICh2YXIgbiwgaSwgYSwgbyA9IFtdLCByID0gMCwgcyA9IGUubGVuZ3RoOyBzID4gcjsgcisrKSBpID0gZVtyXSwgaS5zdHlsZSAmJiAob1tyXSA9IGxlLl9kYXRhKGksICJvbGRkaXNwbGF5IiksIG4gPSBpLnN0eWxlLmRpc3BsYXksIHQgPyAob1tyXSB8fCAibm9uZSIgIT09IG4gfHwgKGkuc3R5bGUuZGlzcGxheSA9ICIiKSwgIiIgPT09IGkuc3R5bGUuZGlzcGxheSAmJiBJZShpKSAmJiAob1tyXSA9IGxlLl9kYXRhKGksICJvbGRkaXNwbGF5IiwgTihpLm5vZGVOYW1lKSkpKSA6IChhID0gSWUoaSksIChuICYmICJub25lIiAhPT0gbiB8fCAhYSkgJiYgbGUuX2RhdGEoaSwgIm9sZGRpc3BsYXkiLCBhID8gbiA6IGxlLmNzcyhpLCAiZGlzcGxheSIpKSkpOwoJCQkJZm9yIChyID0gMDsgcyA+IHI7IHIrKykgaSA9IGVbcl0sIGkuc3R5bGUgJiYgKHQgJiYgIm5vbmUiICE9PSBpLnN0eWxlLmRpc3BsYXkgJiYgIiIgIT09IGkuc3R5bGUuZGlzcGxheSB8fCAoaS5zdHlsZS5kaXNwbGF5ID0gdCA/IG9bcl0gfHwgIiIgOiAibm9uZSIpKTsKCQkJCXJldHVybiBlCgkJCX0KCgkJCWZ1bmN0aW9uIEEoZSwgdCwgbikgewoJCQkJdmFyIGkgPSBodC5leGVjKHQpOwoJCQkJcmV0dXJuIGkgPyBNYXRoLm1heCgwLCBpWzFdIC0gKG4gfHwgMCkpICsgKGlbMl0gfHwgInB4IikgOiB0CgkJCX0KCgkJCWZ1bmN0aW9uIHEoZSwgdCwgbiwgaSwgYSkgewoJCQkJZm9yICh2YXIgbyA9IG4gPT09IChpID8gImJvcmRlciIgOiAiY29udGVudCIpID8gNCA6ICJ3aWR0aCIgPT09IHQgPyAxIDogMCwgciA9IDA7IDQgPiBvOyBvICs9IDIpICJtYXJnaW4iID09PSBuICYmIChyICs9IGxlLmNzcyhlLCBuICsgUGVbb10sICEwLCBhKSksIGkgPyAoImNvbnRlbnQiID09PSBuICYmIChyIC09IGxlLmNzcyhlLCAicGFkZGluZyIgKyBQZVtvXSwgITAsIGEpKSwgIm1hcmdpbiIgIT09IG4gJiYgKHIgLT0gbGUuY3NzKGUsICJib3JkZXIiICsgUGVbb10gKyAiV2lkdGgiLCAhMCwgYSkpKSA6IChyICs9IGxlLmNzcyhlLCAicGFkZGluZyIgKyBQZVtvXSwgITAsIGEpLCAicGFkZGluZyIgIT09IG4gJiYgKHIgKz0gbGUuY3NzKGUsICJib3JkZXIiICsgUGVbb10gKyAiV2lkdGgiLCAhMCwgYSkpKTsKCQkJCXJldHVybiByCgkJCX0KCgkJCWZ1bmN0aW9uIEUoZSwgdCwgbikgewoJCQkJdmFyIGkgPSAhMCwKCQkJCQlhID0gIndpZHRoIiA9PT0gdCA/IGUub2Zmc2V0V2lkdGggOiBlLm9mZnNldEhlaWdodCwKCQkJCQlvID0gYXQoZSksCgkJCQkJciA9IHJlLmJveFNpemluZyAmJiAiYm9yZGVyLWJveCIgPT09IGxlLmNzcyhlLCAiYm94U2l6aW5nIiwgITEsIG8pOwoJCQkJaWYgKDAgPj0gYSB8fCBudWxsID09IGEpIHsKCQkJCQlpZiAoYSA9IG90KGUsIHQsIG8pLCAoMCA+IGEgfHwgbnVsbCA9PSBhKSAmJiAoYSA9IGUuc3R5bGVbdF0pLCBzdC50ZXN0KGEpKSByZXR1cm4gYTsKCQkJCQlpID0gciAmJiAocmUuYm94U2l6aW5nUmVsaWFibGUoKSB8fCBhID09PSBlLnN0eWxlW3RdKSwgYSA9IHBhcnNlRmxvYXQoYSkgfHwgMAoJCQkJfQoJCQkJcmV0dXJuIGEgKyBxKGUsIHQsIG4gfHwgKHIgPyAiYm9yZGVyIiA6ICJjb250ZW50IiksIGksIG8pICsgInB4IgoJCQl9CgoJCQlmdW5jdGlvbiBPKGUsIHQsIG4sIGksIGEpIHsKCQkJCXJldHVybiBuZXcgTy5wcm90b3R5cGUuaW5pdChlLCB0LCBuLCBpLCBhKQoJCQl9CgoJCQlmdW5jdGlvbiBMKCkgewoJCQkJcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJX3QgPSB2b2lkIDAKCQkJCX0pLCBfdCA9IGxlLm5vdygpCgkJCX0KCgkJCWZ1bmN0aW9uIEQoZSwgdCkgewoJCQkJdmFyIG4sIGkgPSB7CgkJCQkJCWhlaWdodDogZQoJCQkJCX0sCgkJCQkJYSA9IDA7CgkJCQlmb3IgKHQgPSB0ID8gMSA6IDA7IDQgPiBhOyBhICs9IDIgLSB0KSBuID0gUGVbYV0sIGlbIm1hcmdpbiIgKyBuXSA9IGlbInBhZGRpbmciICsgbl0gPSBlOwoJCQkJcmV0dXJuIHQgJiYgKGkub3BhY2l0eSA9IGkud2lkdGggPSBlKSwgaQoJCQl9CgoJCQlmdW5jdGlvbiBNKGUsIHQsIG4pIHsKCQkJCWZvciAodmFyIGksIGEgPSAoa3RbdF0gfHwgW10pLmNvbmNhdChrdFsiKiJdKSwgbyA9IDAsIHIgPSBhLmxlbmd0aDsgciA+IG87IG8rKykKCQkJCQlpZiAoaSA9IGFbb10uY2FsbChuLCB0LCBlKSkgcmV0dXJuIGkKCQkJfQoKCQkJZnVuY3Rpb24gUihlLCB0LCBuKSB7CgkJCQl2YXIgaSwgYSwgbywgciwgcywgbCwgYywgZCwgcCA9IHRoaXMsCgkJCQkJaCA9IHt9LAoJCQkJCXUgPSBlLnN0eWxlLAoJCQkJCW0gPSBlLm5vZGVUeXBlICYmIEllKGUpLAoJCQkJCWYgPSBsZS5fZGF0YShlLCAiZnhzaG93Iik7CgkJCQluLnF1ZXVlIHx8IChzID0gbGUuX3F1ZXVlSG9va3MoZSwgImZ4IiksIG51bGwgPT0gcy51bnF1ZXVlZCAmJiAocy51bnF1ZXVlZCA9IDAsIGwgPSBzLmVtcHR5LmZpcmUsIHMuZW1wdHkuZmlyZSA9IGZ1bmN0aW9uKCkgewoJCQkJCXMudW5xdWV1ZWQgfHwgbCgpCgkJCQl9KSwgcy51bnF1ZXVlZCsrLCBwLmFsd2F5cyhmdW5jdGlvbigpIHsKCQkJCQlwLmFsd2F5cyhmdW5jdGlvbigpIHsKCQkJCQkJcy51bnF1ZXVlZC0tLCBsZS5xdWV1ZShlLCAiZngiKS5sZW5ndGggfHwgcy5lbXB0eS5maXJlKCkKCQkJCQl9KQoJCQkJfSkpLCAxID09PSBlLm5vZGVUeXBlICYmICgiaGVpZ2h0IiBpbiB0IHx8ICJ3aWR0aCIgaW4gdCkgJiYgKG4ub3ZlcmZsb3cgPSBbdS5vdmVyZmxvdywgdS5vdmVyZmxvd1gsIHUub3ZlcmZsb3dZXSwgYyA9IGxlLmNzcyhlLCAiZGlzcGxheSIpLCBkID0gIm5vbmUiID09PSBjID8gbGUuX2RhdGEoZSwgIm9sZGRpc3BsYXkiKSB8fCBOKGUubm9kZU5hbWUpIDogYywgImlubGluZSIgPT09IGQgJiYgIm5vbmUiID09PSBsZS5jc3MoZSwgImZsb2F0IikgJiYgKHJlLmlubGluZUJsb2NrTmVlZHNMYXlvdXQgJiYgImlubGluZSIgIT09IE4oZS5ub2RlTmFtZSkgPyB1Lnpvb20gPSAxIDogdS5kaXNwbGF5ID0gImlubGluZS1ibG9jayIpKSwgbi5vdmVyZmxvdyAmJiAodS5vdmVyZmxvdyA9ICJoaWRkZW4iLCByZS5zaHJpbmtXcmFwQmxvY2tzKCkgfHwgcC5hbHdheXMoZnVuY3Rpb24oKSB7CgkJCQkJdS5vdmVyZmxvdyA9IG4ub3ZlcmZsb3dbMF0sIHUub3ZlcmZsb3dYID0gbi5vdmVyZmxvd1sxXSwgdS5vdmVyZmxvd1kgPSBuLm92ZXJmbG93WzJdCgkJCQl9KSk7CgkJCQlmb3IgKGkgaW4gdCkKCQkJCQlpZiAoYSA9IHRbaV0sIHd0LmV4ZWMoYSkpIHsKCQkJCQkJaWYgKGRlbGV0ZSB0W2ldLCBvID0gbyB8fCAidG9nZ2xlIiA9PT0gYSwgYSA9PT0gKG0gPyAiaGlkZSIgOiAic2hvdyIpKSB7CgkJCQkJCQlpZiAoInNob3ciICE9PSBhIHx8ICFmIHx8IHZvaWQgMCA9PT0gZltpXSkgY29udGludWU7CgkJCQkJCQltID0gITAKCQkJCQkJfQoJCQkJCQloW2ldID0gZiAmJiBmW2ldIHx8IGxlLnN0eWxlKGUsIGkpCgkJCQkJfSBlbHNlIGMgPSB2b2lkIDA7CgkJCQlpZiAobGUuaXNFbXB0eU9iamVjdChoKSkgImlubGluZSIgPT09ICgibm9uZSIgPT09IGMgPyBOKGUubm9kZU5hbWUpIDogYykgJiYgKHUuZGlzcGxheSA9IGMpOwoJCQkJZWxzZSB7CgkJCQkJZiA/ICJoaWRkZW4iIGluIGYgJiYgKG0gPSBmLmhpZGRlbikgOiBmID0gbGUuX2RhdGEoZSwgImZ4c2hvdyIsIHt9KSwgbyAmJiAoZi5oaWRkZW4gPSAhbSksIG0gPyBsZShlKS5zaG93KCkgOiBwLmRvbmUoZnVuY3Rpb24oKSB7CgkJCQkJCWxlKGUpLmhpZGUoKQoJCQkJCX0pLCBwLmRvbmUoZnVuY3Rpb24oKSB7CgkJCQkJCXZhciB0OwoJCQkJCQlsZS5fcmVtb3ZlRGF0YShlLCAiZnhzaG93Iik7CgkJCQkJCWZvciAodCBpbiBoKSBsZS5zdHlsZShlLCB0LCBoW3RdKQoJCQkJCX0pOwoJCQkJCWZvciAoaSBpbiBoKSByID0gTShtID8gZltpXSA6IDAsIGksIHApLCBpIGluIGYgfHwgKGZbaV0gPSByLnN0YXJ0LCBtICYmIChyLmVuZCA9IHIuc3RhcnQsIHIuc3RhcnQgPSAid2lkdGgiID09PSBpIHx8ICJoZWlnaHQiID09PSBpID8gMSA6IDApKQoJCQkJfQoJCQl9CgoJCQlmdW5jdGlvbiBGKGUsIHQpIHsKCQkJCXZhciBuLCBpLCBhLCBvLCByOwoJCQkJZm9yIChuIGluIGUpCgkJCQkJaWYgKGkgPSBsZS5jYW1lbENhc2UobiksIGEgPSB0W2ldLCBvID0gZVtuXSwgbGUuaXNBcnJheShvKSAmJiAoYSA9IG9bMV0sIG8gPSBlW25dID0gb1swXSksIG4gIT09IGkgJiYgKGVbaV0gPSBvLCBkZWxldGUgZVtuXSksIHIgPSBsZS5jc3NIb29rc1tpXSwgciAmJiAiZXhwYW5kIiBpbiByKSB7CgkJCQkJCW8gPSByLmV4cGFuZChvKSwgZGVsZXRlIGVbaV07CgkJCQkJCWZvciAobiBpbiBvKSBuIGluIGUgfHwgKGVbbl0gPSBvW25dLCB0W25dID0gYSkKCQkJCQl9IGVsc2UgdFtpXSA9IGEKCQkJfQoKCQkJZnVuY3Rpb24gJChlLCB0LCBuKSB7CgkJCQl2YXIgaSwgYSwgbyA9IDAsCgkJCQkJciA9IHl0Lmxlbmd0aCwKCQkJCQlzID0gbGUuRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKSB7CgkJCQkJCWRlbGV0ZSBsLmVsZW0KCQkJCQl9KSwKCQkJCQlsID0gZnVuY3Rpb24oKSB7CgkJCQkJCWlmIChhKSByZXR1cm4gITE7CgkJCQkJCWZvciAodmFyIHQgPSBfdCB8fCBMKCksIG4gPSBNYXRoLm1heCgwLCBjLnN0YXJ0VGltZSArIGMuZHVyYXRpb24gLSB0KSwgaSA9IG4gLyBjLmR1cmF0aW9uIHx8IDAsIG8gPSAxIC0gaSwgciA9IDAsIGwgPSBjLnR3ZWVucy5sZW5ndGg7IGwgPiByOyByKyspIGMudHdlZW5zW3JdLnJ1bihvKTsKCQkJCQkJcmV0dXJuIHMubm90aWZ5V2l0aChlLCBbYywgbywgbl0pLCAxID4gbyAmJiBsID8gbiA6IChzLnJlc29sdmVXaXRoKGUsIFtjXSksICExKQoJCQkJCX0sCgkJCQkJYyA9IHMucHJvbWlzZSh7CgkJCQkJCWVsZW06IGUsCgkJCQkJCXByb3BzOiBsZS5leHRlbmQoe30sIHQpLAoJCQkJCQlvcHRzOiBsZS5leHRlbmQoITAsIHsKCQkJCQkJCXNwZWNpYWxFYXNpbmc6IHt9CgkJCQkJCX0sIG4pLAoJCQkJCQlvcmlnaW5hbFByb3BlcnRpZXM6IHQsCgkJCQkJCW9yaWdpbmFsT3B0aW9uczogbiwKCQkJCQkJc3RhcnRUaW1lOiBfdCB8fCBMKCksCgkJCQkJCWR1cmF0aW9uOiBuLmR1cmF0aW9uLAoJCQkJCQl0d2VlbnM6IFtdLAoJCQkJCQljcmVhdGVUd2VlbjogZnVuY3Rpb24odCwgbikgewoJCQkJCQkJdmFyIGkgPSBsZS5Ud2VlbihlLCBjLm9wdHMsIHQsIG4sIGMub3B0cy5zcGVjaWFsRWFzaW5nW3RdIHx8IGMub3B0cy5lYXNpbmcpOwoJCQkJCQkJcmV0dXJuIGMudHdlZW5zLnB1c2goaSksIGkKCQkJCQkJfSwKCQkJCQkJc3RvcDogZnVuY3Rpb24odCkgewoJCQkJCQkJdmFyIG4gPSAwLAoJCQkJCQkJCWkgPSB0ID8gYy50d2VlbnMubGVuZ3RoIDogMDsKCQkJCQkJCWlmIChhKSByZXR1cm4gdGhpczsKCQkJCQkJCWZvciAoYSA9ICEwOyBpID4gbjsgbisrKSBjLnR3ZWVuc1tuXS5ydW4oMSk7CgkJCQkJCQlyZXR1cm4gdCA/IHMucmVzb2x2ZVdpdGgoZSwgW2MsIHRdKSA6IHMucmVqZWN0V2l0aChlLCBbYywgdF0pLCB0aGlzCgkJCQkJCX0KCQkJCQl9KSwKCQkJCQlkID0gYy5wcm9wczsKCQkJCWZvciAoRihkLCBjLm9wdHMuc3BlY2lhbEVhc2luZyk7IHIgPiBvOyBvKyspCgkJCQkJaWYgKGkgPSB5dFtvXS5jYWxsKGMsIGUsIGQsIGMub3B0cykpIHJldHVybiBpOwoJCQkJcmV0dXJuIGxlLm1hcChkLCBNLCBjKSwgbGUuaXNGdW5jdGlvbihjLm9wdHMuc3RhcnQpICYmIGMub3B0cy5zdGFydC5jYWxsKGUsIGMpLCBsZS5meC50aW1lcihsZS5leHRlbmQobCwgewoJCQkJCWVsZW06IGUsCgkJCQkJYW5pbTogYywKCQkJCQlxdWV1ZTogYy5vcHRzLnF1ZXVlCgkJCQl9KSksIGMucHJvZ3Jlc3MoYy5vcHRzLnByb2dyZXNzKS5kb25lKGMub3B0cy5kb25lLCBjLm9wdHMuY29tcGxldGUpLmZhaWwoYy5vcHRzLmZhaWwpLmFsd2F5cyhjLm9wdHMuYWx3YXlzKQoJCQl9CgoJCQlmdW5jdGlvbiBXKGUpIHsKCQkJCXJldHVybiBmdW5jdGlvbih0LCBuKSB7CgkJCQkJInN0cmluZyIgIT0gdHlwZW9mIHQgJiYgKG4gPSB0LCB0ID0gIioiKTsKCQkJCQl2YXIgaSwgYSA9IDAsCgkJCQkJCW8gPSB0LnRvTG93ZXJDYXNlKCkubWF0Y2goa2UpIHx8IFtdOwoJCQkJCWlmIChsZS5pc0Z1bmN0aW9uKG4pKQoJCQkJCQlmb3IgKDsgaSA9IG9bYSsrXTspICIrIiA9PT0gaS5jaGFyQXQoMCkgPyAoaSA9IGkuc2xpY2UoMSkgfHwgIioiLCAoZVtpXSA9IGVbaV0gfHwgW10pLnVuc2hpZnQobikpIDogKGVbaV0gPSBlW2ldIHx8IFtdKS5wdXNoKG4pCgkJCQl9CgkJCX0KCgkJCWZ1bmN0aW9uIEgoZSwgdCwgbiwgaSkgewoJCQkJZnVuY3Rpb24gYShzKSB7CgkJCQkJdmFyIGw7CgkJCQkJcmV0dXJuIG9bc10gPSAhMCwgbGUuZWFjaChlW3NdIHx8IFtdLCBmdW5jdGlvbihlLCBzKSB7CgkJCQkJCXZhciBjID0gcyh0LCBuLCBpKTsKCQkJCQkJcmV0dXJuICJzdHJpbmciICE9IHR5cGVvZiBjIHx8IHIgfHwgb1tjXSA/IHIgPyAhKGwgPSBjKSA6IHZvaWQgMCA6ICh0LmRhdGFUeXBlcy51bnNoaWZ0KGMpLCBhKGMpLCAhMSkKCQkJCQl9KSwgbAoJCQkJfQoJCQkJdmFyIG8gPSB7fSwKCQkJCQlyID0gZSA9PT0gR3Q7CgkJCQlyZXR1cm4gYSh0LmRhdGFUeXBlc1swXSkgfHwgIW9bIioiXSAmJiBhKCIqIikKCQkJfQoKCQkJZnVuY3Rpb24gVShlLCB0KSB7CgkJCQl2YXIgbiwgaSwgYSA9IGxlLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9ucyB8fCB7fTsKCQkJCWZvciAoaSBpbiB0KSB2b2lkIDAgIT09IHRbaV0gJiYgKChhW2ldID8gZSA6IG4gfHwgKG4gPSB7fSkpW2ldID0gdFtpXSk7CgkJCQlyZXR1cm4gbiAmJiBsZS5leHRlbmQoITAsIGUsIG4pLCBlCgkJCX0KCgkJCWZ1bmN0aW9uIFkoZSwgdCwgbikgewoJCQkJZm9yICh2YXIgaSwgYSwgbywgciwgcyA9IGUuY29udGVudHMsIGwgPSBlLmRhdGFUeXBlczsKCQkJCQkiKiIgPT09IGxbMF07KSBsLnNoaWZ0KCksIHZvaWQgMCA9PT0gYSAmJiAoYSA9IGUubWltZVR5cGUgfHwgdC5nZXRSZXNwb25zZUhlYWRlcigiQ29udGVudC1UeXBlIikpOwoJCQkJaWYgKGEpCgkJCQkJZm9yIChyIGluIHMpCgkJCQkJCWlmIChzW3JdICYmIHNbcl0udGVzdChhKSkgewoJCQkJCQkJbC51bnNoaWZ0KHIpOwoJCQkJCQkJYnJlYWsKCQkJCQkJfQoJCQkJaWYgKGxbMF0gaW4gbikgbyA9IGxbMF07CgkJCQllbHNlIHsKCQkJCQlmb3IgKHIgaW4gbikgewoJCQkJCQlpZiAoIWxbMF0gfHwgZS5jb252ZXJ0ZXJzW3IgKyAiICIgKyBsWzBdXSkgewoJCQkJCQkJbyA9IHI7CgkJCQkJCQlicmVhawoJCQkJCQl9CgkJCQkJCWkgfHwgKGkgPSByKQoJCQkJCX0KCQkJCQlvID0gbyB8fCBpCgkJCQl9CgkJCQlyZXR1cm4gbyA/IChvICE9PSBsWzBdICYmIGwudW5zaGlmdChvKSwgbltvXSkgOiB2b2lkIDAKCQkJfQoKCQkJZnVuY3Rpb24gRyhlLCB0LCBuLCBpKSB7CgkJCQl2YXIgYSwgbywgciwgcywgbCwgYyA9IHt9LAoJCQkJCWQgPSBlLmRhdGFUeXBlcy5zbGljZSgpOwoJCQkJaWYgKGRbMV0pCgkJCQkJZm9yIChyIGluIGUuY29udmVydGVycykgY1tyLnRvTG93ZXJDYXNlKCldID0gZS5jb252ZXJ0ZXJzW3JdOwoJCQkJZm9yIChvID0gZC5zaGlmdCgpOyBvOykKCQkJCQlpZiAoZS5yZXNwb25zZUZpZWxkc1tvXSAmJiAobltlLnJlc3BvbnNlRmllbGRzW29dXSA9IHQpLCAhbCAmJiBpICYmIGUuZGF0YUZpbHRlciAmJiAodCA9IGUuZGF0YUZpbHRlcih0LCBlLmRhdGFUeXBlKSksIGwgPSBvLCBvID0gZC5zaGlmdCgpKQoJCQkJCQlpZiAoIioiID09PSBvKSBvID0gbDsKCQkJCQkJZWxzZSBpZiAoIioiICE9PSBsICYmIGwgIT09IG8pIHsKCQkJCQlpZiAociA9IGNbbCArICIgIiArIG9dIHx8IGNbIiogIiArIG9dLCAhcikKCQkJCQkJZm9yIChhIGluIGMpCgkJCQkJCQlpZiAocyA9IGEuc3BsaXQoIiAiKSwgc1sxXSA9PT0gbyAmJiAociA9IGNbbCArICIgIiArIHNbMF1dIHx8IGNbIiogIiArIHNbMF1dKSkgewoJCQkJCQkJCXIgPT09ICEwID8gciA9IGNbYV0gOiBjW2FdICE9PSAhMCAmJiAobyA9IHNbMF0sIGQudW5zaGlmdChzWzFdKSk7CgkJCQkJCQkJYnJlYWsKCQkJCQkJCX0KCQkJCQlpZiAociAhPT0gITApCgkJCQkJCWlmIChyICYmIGVbInRocm93cyJdKSB0ID0gcih0KTsKCQkJCQkJZWxzZSB0cnkgewoJCQkJCQkJdCA9IHIodCkKCQkJCQkJfSBjYXRjaCAocCkgewoJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQlzdGF0ZTogInBhcnNlcmVycm9yIiwKCQkJCQkJCQllcnJvcjogciA/IHAgOiAiTm8gY29udmVyc2lvbiBmcm9tICIgKyBsICsgIiB0byAiICsgbwoJCQkJCQkJfQoJCQkJCQl9CgkJCQl9CgkJCQlyZXR1cm4gewoJCQkJCXN0YXRlOiAic3VjY2VzcyIsCgkJCQkJZGF0YTogdAoJCQkJfQoJCQl9CgoJCQlmdW5jdGlvbiBYKGUsIHQsIG4sIGkpIHsKCQkJCXZhciBhOwoJCQkJaWYgKGxlLmlzQXJyYXkodCkpIGxlLmVhY2godCwgZnVuY3Rpb24odCwgYSkgewoJCQkJCW4gfHwgVnQudGVzdChlKSA/IGkoZSwgYSkgOiBYKGUgKyAiWyIgKyAoIm9iamVjdCIgPT0gdHlwZW9mIGEgPyB0IDogIiIpICsgIl0iLCBhLCBuLCBpKQoJCQkJfSk7CgkJCQllbHNlIGlmIChuIHx8ICJvYmplY3QiICE9PSBsZS50eXBlKHQpKSBpKGUsIHQpOwoJCQkJZWxzZQoJCQkJCWZvciAoYSBpbiB0KSBYKGUgKyAiWyIgKyBhICsgIl0iLCB0W2FdLCBuLCBpKQoJCQl9CgoJCQlmdW5jdGlvbiBKKCkgewoJCQkJdHJ5IHsKCQkJCQlyZXR1cm4gbmV3IGEuWE1MSHR0cFJlcXVlc3QKCQkJCX0gY2F0Y2ggKGUpIHt9CgkJCX0KCgkJCWZ1bmN0aW9uIFooKSB7CgkJCQl0cnkgewoJCQkJCXJldHVybiBuZXcgYS5BY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MSFRUUCIpCgkJCQl9IGNhdGNoIChlKSB7fQoJCQl9CgoJCQlmdW5jdGlvbiBWKGUpIHsKCQkJCXJldHVybiBsZS5pc1dpbmRvdyhlKSA/IGUgOiA5ID09PSBlLm5vZGVUeXBlID8gZS5kZWZhdWx0VmlldyB8fCBlLnBhcmVudFdpbmRvdyA6ICExCgkJCX0KCQkJdmFyIEsgPSBbXSwKCQkJCVEgPSBLLnNsaWNlLAoJCQkJZWUgPSBLLmNvbmNhdCwKCQkJCXRlID0gSy5wdXNoLAoJCQkJbmUgPSBLLmluZGV4T2YsCgkJCQlpZSA9IHt9LAoJCQkJYWUgPSBpZS50b1N0cmluZywKCQkJCW9lID0gaWUuaGFzT3duUHJvcGVydHksCgkJCQlyZSA9IHt9LAoJCQkJc2UgPSAiMS4xMS4zIiwKCQkJCWxlID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJCXJldHVybiBuZXcgbGUuZm4uaW5pdChlLCB0KQoJCQkJfSwKCQkJCWNlID0gL15bXHNcdUZFRkZceEEwXSt8W1xzXHVGRUZGXHhBMF0rJC9nLAoJCQkJZGUgPSAvXi1tcy0vLAoJCQkJcGUgPSAvLShbXGRhLXpdKS9naSwKCQkJCWhlID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJCXJldHVybiB0LnRvVXBwZXJDYXNlKCkKCQkJCX07CgkJCWxlLmZuID0gbGUucHJvdG90eXBlID0gewoJCQkJanF1ZXJ5OiBzZSwKCQkJCWNvbnN0cnVjdG9yOiBsZSwKCQkJCXNlbGVjdG9yOiAiIiwKCQkJCWxlbmd0aDogMCwKCQkJCXRvQXJyYXk6IGZ1bmN0aW9uKCkgewoJCQkJCXJldHVybiBRLmNhbGwodGhpcykKCQkJCX0sCgkJCQlnZXQ6IGZ1bmN0aW9uKGUpIHsKCQkJCQlyZXR1cm4gbnVsbCAhPSBlID8gMCA+IGUgPyB0aGlzW2UgKyB0aGlzLmxlbmd0aF0gOiB0aGlzW2VdIDogUS5jYWxsKHRoaXMpCgkJCQl9LAoJCQkJcHVzaFN0YWNrOiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQgPSBsZS5tZXJnZSh0aGlzLmNvbnN0cnVjdG9yKCksIGUpOwoJCQkJCXJldHVybiB0LnByZXZPYmplY3QgPSB0aGlzLCB0LmNvbnRleHQgPSB0aGlzLmNvbnRleHQsIHQKCQkJCX0sCgkJCQllYWNoOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJcmV0dXJuIGxlLmVhY2godGhpcywgZSwgdCkKCQkJCX0sCgkJCQltYXA6IGZ1bmN0aW9uKGUpIHsKCQkJCQlyZXR1cm4gdGhpcy5wdXNoU3RhY2sobGUubWFwKHRoaXMsIGZ1bmN0aW9uKHQsIG4pIHsKCQkJCQkJcmV0dXJuIGUuY2FsbCh0LCBuLCB0KQoJCQkJCX0pKQoJCQkJfSwKCQkJCXNsaWNlOiBmdW5jdGlvbigpIHsKCQkJCQlyZXR1cm4gdGhpcy5wdXNoU3RhY2soUS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKQoJCQkJfSwKCQkJCWZpcnN0OiBmdW5jdGlvbigpIHsKCQkJCQlyZXR1cm4gdGhpcy5lcSgwKQoJCQkJfSwKCQkJCWxhc3Q6IGZ1bmN0aW9uKCkgewoJCQkJCXJldHVybiB0aGlzLmVxKC0xKQoJCQkJfSwKCQkJCWVxOiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQgPSB0aGlzLmxlbmd0aCwKCQkJCQkJbiA9ICtlICsgKDAgPiBlID8gdCA6IDApOwoJCQkJCXJldHVybiB0aGlzLnB1c2hTdGFjayhuID49IDAgJiYgdCA+IG4gPyBbdGhpc1tuXV0gOiBbXSkKCQkJCX0sCgkJCQllbmQ6IGZ1bmN0aW9uKCkgewoJCQkJCXJldHVybiB0aGlzLnByZXZPYmplY3QgfHwgdGhpcy5jb25zdHJ1Y3RvcihudWxsKQoJCQkJfSwKCQkJCXB1c2g6IHRlLAoJCQkJc29ydDogSy5zb3J0LAoJCQkJc3BsaWNlOiBLLnNwbGljZQoJCQl9LCBsZS5leHRlbmQgPSBsZS5mbi5leHRlbmQgPSBmdW5jdGlvbigpIHsKCQkJCXZhciBlLCB0LCBuLCBpLCBhLCBvLCByID0gYXJndW1lbnRzWzBdIHx8IHt9LAoJCQkJCXMgPSAxLAoJCQkJCWwgPSBhcmd1bWVudHMubGVuZ3RoLAoJCQkJCWMgPSAhMTsKCQkJCWZvciAoImJvb2xlYW4iID09IHR5cGVvZiByICYmIChjID0gciwgciA9IGFyZ3VtZW50c1tzXSB8fCB7fSwgcysrKSwgIm9iamVjdCIgPT0gdHlwZW9mIHIgfHwgbGUuaXNGdW5jdGlvbihyKSB8fCAociA9IHt9KSwgcyA9PT0gbCAmJiAociA9IHRoaXMsIHMtLSk7IGwgPiBzOyBzKyspCgkJCQkJaWYgKG51bGwgIT0gKGEgPSBhcmd1bWVudHNbc10pKQoJCQkJCQlmb3IgKGkgaW4gYSkgZSA9IHJbaV0sIG4gPSBhW2ldLCByICE9PSBuICYmIChjICYmIG4gJiYgKGxlLmlzUGxhaW5PYmplY3QobikgfHwgKHQgPSBsZS5pc0FycmF5KG4pKSkgPyAodCA/ICh0ID0gITEsIG8gPSBlICYmIGxlLmlzQXJyYXkoZSkgPyBlIDogW10pIDogbyA9IGUgJiYgbGUuaXNQbGFpbk9iamVjdChlKSA/IGUgOiB7fSwgcltpXSA9IGxlLmV4dGVuZChjLCBvLCBuKSkgOiB2b2lkIDAgIT09IG4gJiYgKHJbaV0gPSBuKSk7CgkJCQlyZXR1cm4gcgoJCQl9LCBsZS5leHRlbmQoewoJCQkJZXhwYW5kbzogImpRdWVyeSIgKyAoc2UgKyBNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKC9cRC9nLCAiIiksCgkJCQlpc1JlYWR5OiAhMCwKCQkJCWVycm9yOiBmdW5jdGlvbihlKSB7CgkJCQkJdGhyb3cgbmV3IEVycm9yKGUpCgkJCQl9LAoJCQkJbm9vcDogZnVuY3Rpb24oKSB7fSwKCQkJCWlzRnVuY3Rpb246IGZ1bmN0aW9uKGUpIHsKCQkJCQlyZXR1cm4gImZ1bmN0aW9uIiA9PT0gbGUudHlwZShlKQoJCQkJfSwKCQkJCWlzQXJyYXk6IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24oZSkgewoJCQkJCXJldHVybiAiYXJyYXkiID09PSBsZS50eXBlKGUpCgkJCQl9LAoJCQkJaXNXaW5kb3c6IGZ1bmN0aW9uKGUpIHsKCQkJCQlyZXR1cm4gbnVsbCAhPSBlICYmIGUgPT0gZS53aW5kb3cKCQkJCX0sCgkJCQlpc051bWVyaWM6IGZ1bmN0aW9uKGUpIHsKCQkJCQlyZXR1cm4gIWxlLmlzQXJyYXkoZSkgJiYgZSAtIHBhcnNlRmxvYXQoZSkgKyAxID49IDAKCQkJCX0sCgkJCQlpc0VtcHR5T2JqZWN0OiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQ7CgkJCQkJZm9yICh0IGluIGUpIHJldHVybiAhMTsKCQkJCQlyZXR1cm4gITAKCQkJCX0sCgkJCQlpc1BsYWluT2JqZWN0OiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQ7CgkJCQkJaWYgKCFlIHx8ICJvYmplY3QiICE9PSBsZS50eXBlKGUpIHx8IGUubm9kZVR5cGUgfHwgbGUuaXNXaW5kb3coZSkpIHJldHVybiAhMTsKCQkJCQl0cnkgewoJCQkJCQlpZiAoZS5jb25zdHJ1Y3RvciAmJiAhb2UuY2FsbChlLCAiY29uc3RydWN0b3IiKSAmJiAhb2UuY2FsbChlLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwgImlzUHJvdG90eXBlT2YiKSkgcmV0dXJuICExCgkJCQkJfSBjYXRjaCAobikgewoJCQkJCQlyZXR1cm4gITEKCQkJCQl9CgkJCQkJaWYgKHJlLm93bkxhc3QpCgkJCQkJCWZvciAodCBpbiBlKSByZXR1cm4gb2UuY2FsbChlLCB0KTsKCQkJCQlmb3IgKHQgaW4gZSk7CgkJCQkJcmV0dXJuIHZvaWQgMCA9PT0gdCB8fCBvZS5jYWxsKGUsIHQpCgkJCQl9LAoJCQkJdHlwZTogZnVuY3Rpb24oZSkgewoJCQkJCXJldHVybiBudWxsID09IGUgPyBlICsgIiIgOiAib2JqZWN0IiA9PSB0eXBlb2YgZSB8fCAiZnVuY3Rpb24iID09IHR5cGVvZiBlID8gaWVbYWUuY2FsbChlKV0gfHwgIm9iamVjdCIgOiB0eXBlb2YgZQoJCQkJfSwKCQkJCWdsb2JhbEV2YWw6IGZ1bmN0aW9uKGUpIHsKCQkJCQllICYmIGxlLnRyaW0oZSkgJiYgKGEuZXhlY1NjcmlwdCB8fCBmdW5jdGlvbihlKSB7CgkJCQkJCWEuZXZhbC5jYWxsKGEsIGUpCgkJCQkJfSkoZSkKCQkJCX0sCgkJCQljYW1lbENhc2U6IGZ1bmN0aW9uKGUpIHsKCQkJCQlyZXR1cm4gZS5yZXBsYWNlKGRlLCAibXMtIikucmVwbGFjZShwZSwgaGUpCgkJCQl9LAoJCQkJbm9kZU5hbWU6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQlyZXR1cm4gZS5ub2RlTmFtZSAmJiBlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IHQudG9Mb3dlckNhc2UoKQoJCQkJfSwKCQkJCWVhY2g6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQl2YXIgaSwgYSA9IDAsCgkJCQkJCW8gPSBlLmxlbmd0aCwKCQkJCQkJcyA9IHIoZSk7CgkJCQkJaWYgKG4pIHsKCQkJCQkJaWYgKHMpCgkJCQkJCQlmb3IgKDsgbyA+IGEgJiYgKGkgPSB0LmFwcGx5KGVbYV0sIG4pLCBpICE9PSAhMSk7IGErKyk7CgkJCQkJCWVsc2UKCQkJCQkJCWZvciAoYSBpbiBlKQoJCQkJCQkJCWlmIChpID0gdC5hcHBseShlW2FdLCBuKSwgaSA9PT0gITEpIGJyZWFrCgkJCQkJfSBlbHNlIGlmIChzKQoJCQkJCQlmb3IgKDsgbyA+IGEgJiYgKGkgPSB0LmNhbGwoZVthXSwgYSwgZVthXSksIGkgIT09ICExKTsgYSsrKTsKCQkJCQllbHNlCgkJCQkJCWZvciAoYSBpbiBlKQoJCQkJCQkJaWYgKGkgPSB0LmNhbGwoZVthXSwgYSwgZVthXSksIGkgPT09ICExKSBicmVhazsgcmV0dXJuIGUKCQkJCX0sCgkJCQl0cmltOiBmdW5jdGlvbihlKSB7CgkJCQkJcmV0dXJuIG51bGwgPT0gZSA/ICIiIDogKGUgKyAiIikucmVwbGFjZShjZSwgIiIpCgkJCQl9LAoJCQkJbWFrZUFycmF5OiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJdmFyIG4gPSB0IHx8IFtdOwoJCQkJCXJldHVybiBudWxsICE9IGUgJiYgKHIoT2JqZWN0KGUpKSA/IGxlLm1lcmdlKG4sICJzdHJpbmciID09IHR5cGVvZiBlID8gW2VdIDogZSkgOiB0ZS5jYWxsKG4sIGUpKSwgbgoJCQkJfSwKCQkJCWluQXJyYXk6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQl2YXIgaTsKCQkJCQlpZiAodCkgewoJCQkJCQlpZiAobmUpIHJldHVybiBuZS5jYWxsKHQsIGUsIG4pOwoJCQkJCQlmb3IgKGkgPSB0Lmxlbmd0aCwgbiA9IG4gPyAwID4gbiA/IE1hdGgubWF4KDAsIGkgKyBuKSA6IG4gOiAwOyBpID4gbjsgbisrKQoJCQkJCQkJaWYgKG4gaW4gdCAmJiB0W25dID09PSBlKSByZXR1cm4gbgoJCQkJCX0KCQkJCQlyZXR1cm4gLTEKCQkJCX0sCgkJCQltZXJnZTogZnVuY3Rpb24oZSwgdCkgewoJCQkJCWZvciAodmFyIG4gPSArdC5sZW5ndGgsIGkgPSAwLCBhID0gZS5sZW5ndGg7IG4gPiBpOykgZVthKytdID0gdFtpKytdOwoJCQkJCWlmIChuICE9PSBuKQoJCQkJCQlmb3IgKDsgdm9pZCAwICE9PSB0W2ldOykgZVthKytdID0gdFtpKytdOwoJCQkJCXJldHVybiBlLmxlbmd0aCA9IGEsIGUKCQkJCX0sCgkJCQlncmVwOiBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJZm9yICh2YXIgaSwgYSA9IFtdLCBvID0gMCwgciA9IGUubGVuZ3RoLCBzID0gIW47IHIgPiBvOyBvKyspIGkgPSAhdChlW29dLCBvKSwgaSAhPT0gcyAmJiBhLnB1c2goZVtvXSk7CgkJCQkJcmV0dXJuIGEKCQkJCX0sCgkJCQltYXA6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQl2YXIgaSwgYSA9IDAsCgkJCQkJCW8gPSBlLmxlbmd0aCwKCQkJCQkJcyA9IHIoZSksCgkJCQkJCWwgPSBbXTsKCQkJCQlpZiAocykKCQkJCQkJZm9yICg7IG8gPiBhOyBhKyspIGkgPSB0KGVbYV0sIGEsIG4pLCBudWxsICE9IGkgJiYgbC5wdXNoKGkpOwoJCQkJCWVsc2UKCQkJCQkJZm9yIChhIGluIGUpIGkgPSB0KGVbYV0sIGEsIG4pLCBudWxsICE9IGkgJiYgbC5wdXNoKGkpOwoJCQkJCXJldHVybiBlZS5hcHBseShbXSwgbCkKCQkJCX0sCgkJCQlndWlkOiAxLAoJCQkJcHJveHk6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQl2YXIgbiwgaSwgYTsKCQkJCQlyZXR1cm4gInN0cmluZyIgPT0gdHlwZW9mIHQgJiYgKGEgPSBlW3RdLCB0ID0gZSwgZSA9IGEpLCBsZS5pc0Z1bmN0aW9uKGUpID8gKG4gPSBRLmNhbGwoYXJndW1lbnRzLCAyKSwgaSA9IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gZS5hcHBseSh0IHx8IHRoaXMsIG4uY29uY2F0KFEuY2FsbChhcmd1bWVudHMpKSkKCQkJCQl9LCBpLmd1aWQgPSBlLmd1aWQgPSBlLmd1aWQgfHwgbGUuZ3VpZCsrLCBpKSA6IHZvaWQgMAoJCQkJfSwKCQkJCW5vdzogZnVuY3Rpb24oKSB7CgkJCQkJcmV0dXJuICtuZXcgRGF0ZQoJCQkJfSwKCQkJCXN1cHBvcnQ6IHJlCgkJCX0pLCBsZS5lYWNoKCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIi5zcGxpdCgiICIpLCBmdW5jdGlvbihlLCB0KSB7CgkJCQlpZVsiW29iamVjdCAiICsgdCArICJdIl0gPSB0LnRvTG93ZXJDYXNlKCkKCQkJfSk7CgkJCXZhciB1ZSA9IGZ1bmN0aW9uKGUpIHsKCQkJCWZ1bmN0aW9uIHQoZSwgdCwgbiwgaSkgewoJCQkJCXZhciBhLCBvLCByLCBzLCBsLCBjLCBwLCB1LCBtLCBmOwoJCQkJCWlmICgodCA/IHQub3duZXJEb2N1bWVudCB8fCB0IDogUikgIT09IEkgJiYgUCh0KSwgdCA9IHQgfHwgSSwgbiA9IG4gfHwgW10sIHMgPSB0Lm5vZGVUeXBlLCAic3RyaW5nIiAhPSB0eXBlb2YgZSB8fCAhZSB8fCAxICE9PSBzICYmIDkgIT09IHMgJiYgMTEgIT09IHMpIHJldHVybiBuOwoJCQkJCWlmICghaSAmJiBxKSB7CgkJCQkJCWlmICgxMSAhPT0gcyAmJiAoYSA9IHhlLmV4ZWMoZSkpKQoJCQkJCQkJaWYgKHIgPSBhWzFdKSB7CgkJCQkJCQkJaWYgKDkgPT09IHMpIHsKCQkJCQkJCQkJaWYgKG8gPSB0LmdldEVsZW1lbnRCeUlkKHIpLCAhbyB8fCAhby5wYXJlbnROb2RlKSByZXR1cm4gbjsKCQkJCQkJCQkJaWYgKG8uaWQgPT09IHIpIHJldHVybiBuLnB1c2gobyksIG4KCQkJCQkJCQl9IGVsc2UgaWYgKHQub3duZXJEb2N1bWVudCAmJiAobyA9IHQub3duZXJEb2N1bWVudC5nZXRFbGVtZW50QnlJZChyKSkgJiYgRCh0LCBvKSAmJiBvLmlkID09PSByKSByZXR1cm4gbi5wdXNoKG8pLCBuCgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCWlmIChhWzJdKSByZXR1cm4gSy5hcHBseShuLCB0LmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpKSwgbjsKCQkJCQkJCQlpZiAoKHIgPSBhWzNdKSAmJiBiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpIHJldHVybiBLLmFwcGx5KG4sIHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShyKSksIG4KCQkJCQkJCX0KCQkJCQkJaWYgKGIucXNhICYmICghRSB8fCAhRS50ZXN0KGUpKSkgewoJCQkJCQkJaWYgKHUgPSBwID0gTSwgbSA9IHQsIGYgPSAxICE9PSBzICYmIGUsIDEgPT09IHMgJiYgIm9iamVjdCIgIT09IHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSkgewoJCQkJCQkJCWZvciAoYyA9IEIoZSksIChwID0gdC5nZXRBdHRyaWJ1dGUoImlkIikpID8gdSA9IHAucmVwbGFjZSh2ZSwgIlxcJCYiKSA6IHQuc2V0QXR0cmlidXRlKCJpZCIsIHUpLCB1ID0gIltpZD0nIiArIHUgKyAiJ10gIiwgbCA9IGMubGVuZ3RoOyBsLS07KSBjW2xdID0gdSArIGgoY1tsXSk7CgkJCQkJCQkJbSA9IHdlLnRlc3QoZSkgJiYgZCh0LnBhcmVudE5vZGUpIHx8IHQsIGYgPSBjLmpvaW4oIiwiKQoJCQkJCQkJfQoJCQkJCQkJaWYgKGYpIHRyeSB7CgkJCQkJCQkJcmV0dXJuIEsuYXBwbHkobiwgbS5xdWVyeVNlbGVjdG9yQWxsKGYpKSwgbgoJCQkJCQkJfSBjYXRjaCAoZykge30gZmluYWxseSB7CgkJCQkJCQkJcCB8fCB0LnJlbW92ZUF0dHJpYnV0ZSgiaWQiKQoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJCXJldHVybiBDKGUucmVwbGFjZShsZSwgIiQxIiksIHQsIG4sIGkpCgkJCQl9CgoJCQkJZnVuY3Rpb24gbigpIHsKCQkJCQlmdW5jdGlvbiBlKG4sIGkpIHsKCQkJCQkJcmV0dXJuIHQucHVzaChuICsgIiAiKSA+IHkuY2FjaGVMZW5ndGggJiYgZGVsZXRlIGVbdC5zaGlmdCgpXSwgZVtuICsgIiAiXSA9IGkKCQkJCQl9CgkJCQkJdmFyIHQgPSBbXTsKCQkJCQlyZXR1cm4gZQoJCQkJfQoKCQkJCWZ1bmN0aW9uIGkoZSkgewoJCQkJCXJldHVybiBlW01dID0gITAsIGUKCQkJCX0KCgkJCQlmdW5jdGlvbiBhKGUpIHsKCQkJCQl2YXIgdCA9IEkuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQkJdHJ5IHsKCQkJCQkJcmV0dXJuICEhZSh0KQoJCQkJCX0gY2F0Y2ggKG4pIHsKCQkJCQkJcmV0dXJuICExCgkJCQkJfSBmaW5hbGx5IHsKCQkJCQkJdC5wYXJlbnROb2RlICYmIHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KSwgdCA9IG51bGwKCQkJCQl9CgkJCQl9CgoJCQkJZnVuY3Rpb24gbyhlLCB0KSB7CgkJCQkJZm9yICh2YXIgbiA9IGUuc3BsaXQoInwiKSwgaSA9IGUubGVuZ3RoOyBpLS07KSB5LmF0dHJIYW5kbGVbbltpXV0gPSB0CgkJCQl9CgoJCQkJZnVuY3Rpb24gcihlLCB0KSB7CgkJCQkJdmFyIG4gPSB0ICYmIGUsCgkJCQkJCWkgPSBuICYmIDEgPT09IGUubm9kZVR5cGUgJiYgMSA9PT0gdC5ub2RlVHlwZSAmJiAofnQuc291cmNlSW5kZXggfHwgRykgLSAofmUuc291cmNlSW5kZXggfHwgRyk7CgkJCQkJaWYgKGkpIHJldHVybiBpOwoJCQkJCWlmIChuKQoJCQkJCQlmb3IgKDsgbiA9IG4ubmV4dFNpYmxpbmc7KQoJCQkJCQkJaWYgKG4gPT09IHQpIHJldHVybiAtMTsKCQkJCQlyZXR1cm4gZSA/IDEgOiAtMQoJCQkJfQoKCQkJCWZ1bmN0aW9uIHMoZSkgewoJCQkJCXJldHVybiBmdW5jdGlvbih0KSB7CgkJCQkJCXZhciBuID0gdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOwoJCQkJCQlyZXR1cm4gImlucHV0IiA9PT0gbiAmJiB0LnR5cGUgPT09IGUKCQkJCQl9CgkJCQl9CgoJCQkJZnVuY3Rpb24gbChlKSB7CgkJCQkJcmV0dXJuIGZ1bmN0aW9uKHQpIHsKCQkJCQkJdmFyIG4gPSB0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CgkJCQkJCXJldHVybiAoImlucHV0IiA9PT0gbiB8fCAiYnV0dG9uIiA9PT0gbikgJiYgdC50eXBlID09PSBlCgkJCQkJfQoJCQkJfQoKCQkJCWZ1bmN0aW9uIGMoZSkgewoJCQkJCXJldHVybiBpKGZ1bmN0aW9uKHQpIHsKCQkJCQkJcmV0dXJuIHQgPSArdCwgaShmdW5jdGlvbihuLCBpKSB7CgkJCQkJCQlmb3IgKHZhciBhLCBvID0gZShbXSwgbi5sZW5ndGgsIHQpLCByID0gby5sZW5ndGg7IHItLTspIG5bYSA9IG9bcl1dICYmIChuW2FdID0gIShpW2FdID0gblthXSkpCgkJCQkJCX0pCgkJCQkJfSkKCQkJCX0KCgkJCQlmdW5jdGlvbiBkKGUpIHsKCQkJCQlyZXR1cm4gZSAmJiAidW5kZWZpbmVkIiAhPSB0eXBlb2YgZS5nZXRFbGVtZW50c0J5VGFnTmFtZSAmJiBlCgkJCQl9CgoJCQkJZnVuY3Rpb24gcCgpIHt9CgoJCQkJZnVuY3Rpb24gaChlKSB7CgkJCQkJZm9yICh2YXIgdCA9IDAsIG4gPSBlLmxlbmd0aCwgaSA9ICIiOyBuID4gdDsgdCsrKSBpICs9IGVbdF0udmFsdWU7CgkJCQkJcmV0dXJuIGkKCQkJCX0KCgkJCQlmdW5jdGlvbiB1KGUsIHQsIG4pIHsKCQkJCQl2YXIgaSA9IHQuZGlyLAoJCQkJCQlhID0gbiAmJiAicGFyZW50Tm9kZSIgPT09IGksCgkJCQkJCW8gPSAkKys7CgkJCQkJcmV0dXJuIHQuZmlyc3QgPyBmdW5jdGlvbih0LCBuLCBvKSB7CgkJCQkJCWZvciAoOyB0ID0gdFtpXTspCgkJCQkJCQlpZiAoMSA9PT0gdC5ub2RlVHlwZSB8fCBhKSByZXR1cm4gZSh0LCBuLCBvKQoJCQkJCX0gOiBmdW5jdGlvbih0LCBuLCByKSB7CgkJCQkJCXZhciBzLCBsLCBjID0gW0YsIG9dOwoJCQkJCQlpZiAocikgewoJCQkJCQkJZm9yICg7IHQgPSB0W2ldOykKCQkJCQkJCQlpZiAoKDEgPT09IHQubm9kZVR5cGUgfHwgYSkgJiYgZSh0LCBuLCByKSkgcmV0dXJuICEwCgkJCQkJCX0gZWxzZQoJCQkJCQkJZm9yICg7IHQgPSB0W2ldOykKCQkJCQkJCQlpZiAoMSA9PT0gdC5ub2RlVHlwZSB8fCBhKSB7CgkJCQkJCQkJCWlmIChsID0gdFtNXSB8fCAodFtNXSA9IHt9KSwgKHMgPSBsW2ldKSAmJiBzWzBdID09PSBGICYmIHNbMV0gPT09IG8pIHJldHVybiBjWzJdID0gc1syXTsKCQkJCQkJCQkJaWYgKGxbaV0gPSBjLCBjWzJdID0gZSh0LCBuLCByKSkgcmV0dXJuICEwCgkJCQkJCQkJfQoJCQkJCX0KCQkJCX0KCgkJCQlmdW5jdGlvbiBtKGUpIHsKCQkJCQlyZXR1cm4gZS5sZW5ndGggPiAxID8gZnVuY3Rpb24odCwgbiwgaSkgewoJCQkJCQlmb3IgKHZhciBhID0gZS5sZW5ndGg7IGEtLTspCgkJCQkJCQlpZiAoIWVbYV0odCwgbiwgaSkpIHJldHVybiAhMTsKCQkJCQkJcmV0dXJuICEwCgkJCQkJfSA6IGVbMF0KCQkJCX0KCgkJCQlmdW5jdGlvbiBmKGUsIG4sIGkpIHsKCQkJCQlmb3IgKHZhciBhID0gMCwgbyA9IG4ubGVuZ3RoOyBvID4gYTsgYSsrKSB0KGUsIG5bYV0sIGkpOwoJCQkJCXJldHVybiBpCgkJCQl9CgoJCQkJZnVuY3Rpb24gZyhlLCB0LCBuLCBpLCBhKSB7CgkJCQkJZm9yICh2YXIgbywgciA9IFtdLCBzID0gMCwgbCA9IGUubGVuZ3RoLCBjID0gbnVsbCAhPSB0OyBsID4gczsgcysrKShvID0gZVtzXSkgJiYgKCFuIHx8IG4obywgaSwgYSkpICYmIChyLnB1c2gobyksIGMgJiYgdC5wdXNoKHMpKTsKCQkJCQlyZXR1cm4gcgoJCQkJfQoKCQkJCWZ1bmN0aW9uIF8oZSwgdCwgbiwgYSwgbywgcikgewoJCQkJCXJldHVybiBhICYmICFhW01dICYmIChhID0gXyhhKSksIG8gJiYgIW9bTV0gJiYgKG8gPSBfKG8sIHIpKSwgaShmdW5jdGlvbihpLCByLCBzLCBsKSB7CgkJCQkJCXZhciBjLCBkLCBwLCBoID0gW10sCgkJCQkJCQl1ID0gW10sCgkJCQkJCQltID0gci5sZW5ndGgsCgkJCQkJCQlfID0gaSB8fCBmKHQgfHwgIioiLCBzLm5vZGVUeXBlID8gW3NdIDogcywgW10pLAoJCQkJCQkJeCA9ICFlIHx8ICFpICYmIHQgPyBfIDogZyhfLCBoLCBlLCBzLCBsKSwKCQkJCQkJCXcgPSBuID8gbyB8fCAoaSA/IGUgOiBtIHx8IGEpID8gW10gOiByIDogeDsKCQkJCQkJaWYgKG4gJiYgbih4LCB3LCBzLCBsKSwgYSkKCQkJCQkJCWZvciAoYyA9IGcodywgdSksIGEoYywgW10sIHMsIGwpLCBkID0gYy5sZW5ndGg7IGQtLTspKHAgPSBjW2RdKSAmJiAod1t1W2RdXSA9ICEoeFt1W2RdXSA9IHApKTsKCQkJCQkJaWYgKGkpIHsKCQkJCQkJCWlmIChvIHx8IGUpIHsKCQkJCQkJCQlpZiAobykgewoJCQkJCQkJCQlmb3IgKGMgPSBbXSwgZCA9IHcubGVuZ3RoOyBkLS07KShwID0gd1tkXSkgJiYgYy5wdXNoKHhbZF0gPSBwKTsKCQkJCQkJCQkJbyhudWxsLCB3ID0gW10sIGMsIGwpCgkJCQkJCQkJfQoJCQkJCQkJCWZvciAoZCA9IHcubGVuZ3RoOyBkLS07KShwID0gd1tkXSkgJiYgKGMgPSBvID8gZWUoaSwgcCkgOiBoW2RdKSA+IC0xICYmIChpW2NdID0gIShyW2NdID0gcCkpCgkJCQkJCQl9CgkJCQkJCX0gZWxzZSB3ID0gZyh3ID09PSByID8gdy5zcGxpY2UobSwgdy5sZW5ndGgpIDogdyksIG8gPyBvKG51bGwsIHIsIHcsIGwpIDogSy5hcHBseShyLCB3KQoJCQkJCX0pCgkJCQl9CgoJCQkJZnVuY3Rpb24geChlKSB7CgkJCQkJZm9yICh2YXIgdCwgbiwgaSwgYSA9IGUubGVuZ3RoLCBvID0geS5yZWxhdGl2ZVtlWzBdLnR5cGVdLCByID0gbyB8fCB5LnJlbGF0aXZlWyIgIl0sIHMgPSBvID8gMSA6IDAsIGwgPSB1KGZ1bmN0aW9uKGUpIHsKCQkJCQkJcmV0dXJuIGUgPT09IHQKCQkJCQl9LCByLCAhMCksIGMgPSB1KGZ1bmN0aW9uKGUpIHsKCQkJCQkJcmV0dXJuIGVlKHQsIGUpID4gLTEKCQkJCQl9LCByLCAhMCksIGQgPSBbCgkJCQkJCWZ1bmN0aW9uKGUsIG4sIGkpIHsKCQkJCQkJCXZhciBhID0gIW8gJiYgKGkgfHwgbiAhPT0gUykgfHwgKCh0ID0gbikubm9kZVR5cGUgPyBsKGUsIG4sIGkpIDogYyhlLCBuLCBpKSk7CgkJCQkJCQlyZXR1cm4gdCA9IG51bGwsIGEKCQkJCQkJfQoJCQkJCV07IGEgPiBzOyBzKyspCgkJCQkJCWlmIChuID0geS5yZWxhdGl2ZVtlW3NdLnR5cGVdKSBkID0gW3UobShkKSwgbildOwoJCQkJCQllbHNlIHsKCQkJCQkJCWlmIChuID0geS5maWx0ZXJbZVtzXS50eXBlXS5hcHBseShudWxsLCBlW3NdLm1hdGNoZXMpLCBuW01dKSB7CgkJCQkJCQkJZm9yIChpID0gKytzOyBhID4gaSAmJiAheS5yZWxhdGl2ZVtlW2ldLnR5cGVdOyBpKyspOwoJCQkJCQkJCXJldHVybiBfKHMgPiAxICYmIG0oZCksIHMgPiAxICYmIGgoZS5zbGljZSgwLCBzIC0gMSkuY29uY2F0KHsKCQkJCQkJCQkJdmFsdWU6ICIgIiA9PT0gZVtzIC0gMl0udHlwZSA/ICIqIiA6ICIiCgkJCQkJCQkJfSkpLnJlcGxhY2UobGUsICIkMSIpLCBuLCBpID4gcyAmJiB4KGUuc2xpY2UocywgaSkpLCBhID4gaSAmJiB4KGUgPSBlLnNsaWNlKGkpKSwgYSA+IGkgJiYgaChlKSkKCQkJCQkJCX0KCQkJCQkJCWQucHVzaChuKQoJCQkJCQl9CgkJCQkJcmV0dXJuIG0oZCkKCQkJCX0KCgkJCQlmdW5jdGlvbiB3KGUsIG4pIHsKCQkJCQl2YXIgYSA9IG4ubGVuZ3RoID4gMCwKCQkJCQkJbyA9IGUubGVuZ3RoID4gMCwKCQkJCQkJciA9IGZ1bmN0aW9uKGksIHIsIHMsIGwsIGMpIHsKCQkJCQkJCXZhciBkLCBwLCBoLCB1ID0gMCwKCQkJCQkJCQltID0gIjAiLAoJCQkJCQkJCWYgPSBpICYmIFtdLAoJCQkJCQkJCV8gPSBbXSwKCQkJCQkJCQl4ID0gUywKCQkJCQkJCQl3ID0gaSB8fCBvICYmIHkuZmluZC5UQUcoIioiLCBjKSwKCQkJCQkJCQl2ID0gRiArPSBudWxsID09IHggPyAxIDogTWF0aC5yYW5kb20oKSB8fCAuMSwKCQkJCQkJCQliID0gdy5sZW5ndGg7CgkJCQkJCQlmb3IgKGMgJiYgKFMgPSByICE9PSBJICYmIHIpOyBtICE9PSBiICYmIG51bGwgIT0gKGQgPSB3W21dKTsgbSsrKSB7CgkJCQkJCQkJaWYgKG8gJiYgZCkgewoJCQkJCQkJCQlmb3IgKHAgPSAwOyBoID0gZVtwKytdOykKCQkJCQkJCQkJCWlmIChoKGQsIHIsIHMpKSB7CgkJCQkJCQkJCQkJbC5wdXNoKGQpOwoJCQkJCQkJCQkJCWJyZWFrCgkJCQkJCQkJCQl9CgkJCQkJCQkJCWMgJiYgKEYgPSB2KQoJCQkJCQkJCX0KCQkJCQkJCQlhICYmICgoZCA9ICFoICYmIGQpICYmIHUtLSwgaSAmJiBmLnB1c2goZCkpCgkJCQkJCQl9CgkJCQkJCQlpZiAodSArPSBtLCBhICYmIG0gIT09IHUpIHsKCQkJCQkJCQlmb3IgKHAgPSAwOyBoID0gbltwKytdOykgaChmLCBfLCByLCBzKTsKCQkJCQkJCQlpZiAoaSkgewoJCQkJCQkJCQlpZiAodSA+IDApCgkJCQkJCQkJCQlmb3IgKDsgbS0tOykgZlttXSB8fCBfW21dIHx8IChfW21dID0gWi5jYWxsKGwpKTsKCQkJCQkJCQkJXyA9IGcoXykKCQkJCQkJCQl9CgkJCQkJCQkJSy5hcHBseShsLCBfKSwgYyAmJiAhaSAmJiBfLmxlbmd0aCA+IDAgJiYgdSArIG4ubGVuZ3RoID4gMSAmJiB0LnVuaXF1ZVNvcnQobCkKCQkJCQkJCX0KCQkJCQkJCXJldHVybiBjICYmIChGID0gdiwgUyA9IHgpLCBmCgkJCQkJCX07CgkJCQkJcmV0dXJuIGEgPyBpKHIpIDogcgoJCQkJfQoJCQkJdmFyIHYsIGIsIHksIGssIHosIEIsIGosIEMsIFMsIE4sIFQsIFAsIEksIEEsIHEsIEUsIE8sIEwsIEQsIE0gPSAic2l6emxlIiArIDEgKiBuZXcgRGF0ZSwKCQkJCQlSID0gZS5kb2N1bWVudCwKCQkJCQlGID0gMCwKCQkJCQkkID0gMCwKCQkJCQlXID0gbigpLAoJCQkJCUggPSBuKCksCgkJCQkJVSA9IG4oKSwKCQkJCQlZID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJCQlyZXR1cm4gZSA9PT0gdCAmJiAoVCA9ICEwKSwgMAoJCQkJCX0sCgkJCQkJRyA9IDEgPDwgMzEsCgkJCQkJWCA9IHt9Lmhhc093blByb3BlcnR5LAoJCQkJCUogPSBbXSwKCQkJCQlaID0gSi5wb3AsCgkJCQkJViA9IEoucHVzaCwKCQkJCQlLID0gSi5wdXNoLAoJCQkJCVEgPSBKLnNsaWNlLAoJCQkJCWVlID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJCQlmb3IgKHZhciBuID0gMCwgaSA9IGUubGVuZ3RoOyBpID4gbjsgbisrKQoJCQkJCQkJaWYgKGVbbl0gPT09IHQpIHJldHVybiBuOwoJCQkJCQlyZXR1cm4gLTEKCQkJCQl9LAoJCQkJCXRlID0gImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkIiwKCQkJCQluZSA9ICJbXFx4MjBcXHRcXHJcXG5cXGZdIiwKCQkJCQlpZSA9ICIoPzpcXFxcLnxbXFx3LV18W15cXHgwMC1cXHhhMF0pKyIsCgkJCQkJYWUgPSBpZS5yZXBsYWNlKCJ3IiwgIncjIiksCgkJCQkJb2UgPSAiXFxbIiArIG5lICsgIiooIiArIGllICsgIikoPzoiICsgbmUgKyAiKihbKl4kfCF+XT89KSIgKyBuZSArICIqKD86JygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCJ8KCIgKyBhZSArICIpKXwpIiArIG5lICsgIipcXF0iLAoJCQkJCXJlID0gIjooIiArIGllICsgIikoPzpcXCgoKCcoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwiKXwoKD86XFxcXC58W15cXFxcKClbXFxdXXwiICsgb2UgKyAiKSopfC4qKVxcKXwpIiwKCQkJCQlzZSA9IG5ldyBSZWdFeHAobmUgKyAiKyIsICJnIiksCgkJCQkJbGUgPSBuZXcgUmVnRXhwKCJeIiArIG5lICsgIit8KCg/Ol58W15cXFxcXSkoPzpcXFxcLikqKSIgKyBuZSArICIrJCIsICJnIiksCgkJCQkJY2UgPSBuZXcgUmVnRXhwKCJeIiArIG5lICsgIiosIiArIG5lICsgIioiKSwKCQkJCQlkZSA9IG5ldyBSZWdFeHAoIl4iICsgbmUgKyAiKihbPit+XXwiICsgbmUgKyAiKSIgKyBuZSArICIqIiksCgkJCQkJcGUgPSBuZXcgUmVnRXhwKCI9IiArIG5lICsgIiooW15cXF0nXCJdKj8pIiArIG5lICsgIipcXF0iLCAiZyIpLAoJCQkJCWhlID0gbmV3IFJlZ0V4cChyZSksCgkJCQkJdWUgPSBuZXcgUmVnRXhwKCJeIiArIGFlICsgIiQiKSwKCQkJCQltZSA9IHsKCQkJCQkJSUQ6IG5ldyBSZWdFeHAoIl4jKCIgKyBpZSArICIpIiksCgkJCQkJCUNMQVNTOiBuZXcgUmVnRXhwKCJeXFwuKCIgKyBpZSArICIpIiksCgkJCQkJCVRBRzogbmV3IFJlZ0V4cCgiXigiICsgaWUucmVwbGFjZSgidyIsICJ3KiIpICsgIikiKSwKCQkJCQkJQVRUUjogbmV3IFJlZ0V4cCgiXiIgKyBvZSksCgkJCQkJCVBTRVVETzogbmV3IFJlZ0V4cCgiXiIgKyByZSksCgkJCQkJCUNISUxEOiBuZXcgUmVnRXhwKCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXCgiICsgbmUgKyAiKihldmVufG9kZHwoKFsrLV18KShcXGQqKW58KSIgKyBuZSArICIqKD86KFsrLV18KSIgKyBuZSArICIqKFxcZCspfCkpIiArIG5lICsgIipcXCl8KSIsICJpIiksCgkJCQkJCWJvb2w6IG5ldyBSZWdFeHAoIl4oPzoiICsgdGUgKyAiKSQiLCAiaSIpLAoJCQkJCQluZWVkc0NvbnRleHQ6IG5ldyBSZWdFeHAoIl4iICsgbmUgKyAiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFwoIiArIG5lICsgIiooKD86LVxcZCk/XFxkKikiICsgbmUgKyAiKlxcKXwpKD89W14tXXwkKSIsICJpIikKCQkJCQl9LAoJCQkJCWZlID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSwKCQkJCQlnZSA9IC9eaFxkJC9pLAoJCQkJCV9lID0gL15bXntdK1x7XHMqXFtuYXRpdmUgXHcvLAoJCQkJCXhlID0gL14oPzojKFtcdy1dKyl8KFx3Kyl8XC4oW1x3LV0rKSkkLywKCQkJCQl3ZSA9IC9bK35dLywKCQkJCQl2ZSA9IC8nfFxcL2csCgkJCQkJYmUgPSBuZXcgUmVnRXhwKCJcXFxcKFtcXGRhLWZdezEsNn0iICsgbmUgKyAiP3woIiArIG5lICsgIil8LikiLCAiaWciKSwKCQkJCQl5ZSA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQkJdmFyIGkgPSAiMHgiICsgdCAtIDY1NTM2OwoJCQkJCQlyZXR1cm4gaSAhPT0gaSB8fCBuID8gdCA6IDAgPiBpID8gU3RyaW5nLmZyb21DaGFyQ29kZShpICsgNjU1MzYpIDogU3RyaW5nLmZyb21DaGFyQ29kZShpID4+IDEwIHwgNTUyOTYsIDEwMjMgJiBpIHwgNTYzMjApCgkJCQkJfSwKCQkJCQlrZSA9IGZ1bmN0aW9uKCkgewoJCQkJCQlQKCkKCQkJCQl9OwoJCQkJdHJ5IHsKCQkJCQlLLmFwcGx5KEogPSBRLmNhbGwoUi5jaGlsZE5vZGVzKSwgUi5jaGlsZE5vZGVzKSwgSltSLmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZQoJCQkJfSBjYXRjaCAoemUpIHsKCQkJCQlLID0gewoJCQkJCQlhcHBseTogSi5sZW5ndGggPyBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCQlWLmFwcGx5KGUsIFEuY2FsbCh0KSkKCQkJCQkJfSA6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQkJCWZvciAodmFyIG4gPSBlLmxlbmd0aCwgaSA9IDA7IGVbbisrXSA9IHRbaSsrXTspOwoJCQkJCQkJZS5sZW5ndGggPSBuIC0gMQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQkJYiA9IHQuc3VwcG9ydCA9IHt9LCB6ID0gdC5pc1hNTCA9IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCA9IGUgJiYgKGUub3duZXJEb2N1bWVudCB8fCBlKS5kb2N1bWVudEVsZW1lbnQ7CgkJCQkJcmV0dXJuIHQgPyAiSFRNTCIgIT09IHQubm9kZU5hbWUgOiAhMQoJCQkJfSwgUCA9IHQuc2V0RG9jdW1lbnQgPSBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQsIG4sIGkgPSBlID8gZS5vd25lckRvY3VtZW50IHx8IGUgOiBSOwoJCQkJCXJldHVybiBpICE9PSBJICYmIDkgPT09IGkubm9kZVR5cGUgJiYgaS5kb2N1bWVudEVsZW1lbnQgPyAoSSA9IGksIEEgPSBpLmRvY3VtZW50RWxlbWVudCwgbiA9IGkuZGVmYXVsdFZpZXcsIG4gJiYgbiAhPT0gbi50b3AgJiYgKG4uYWRkRXZlbnRMaXN0ZW5lciA/IG4uYWRkRXZlbnRMaXN0ZW5lcigidW5sb2FkIiwga2UsICExKSA6IG4uYXR0YWNoRXZlbnQgJiYgbi5hdHRhY2hFdmVudCgib251bmxvYWQiLCBrZSkpLCBxID0gIXooaSksIGIuYXR0cmlidXRlcyA9IGEoZnVuY3Rpb24oZSkgewoJCQkJCQlyZXR1cm4gZS5jbGFzc05hbWUgPSAiaSIsICFlLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIikKCQkJCQl9KSwgYi5nZXRFbGVtZW50c0J5VGFnTmFtZSA9IGEoZnVuY3Rpb24oZSkgewoJCQkJCQlyZXR1cm4gZS5hcHBlbmRDaGlsZChpLmNyZWF0ZUNvbW1lbnQoIiIpKSwgIWUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKS5sZW5ndGgKCQkJCQl9KSwgYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lID0gX2UudGVzdChpLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLCBiLmdldEJ5SWQgPSBhKGZ1bmN0aW9uKGUpIHsKCQkJCQkJcmV0dXJuIEEuYXBwZW5kQ2hpbGQoZSkuaWQgPSBNLCAhaS5nZXRFbGVtZW50c0J5TmFtZSB8fCAhaS5nZXRFbGVtZW50c0J5TmFtZShNKS5sZW5ndGgKCQkJCQl9KSwgYi5nZXRCeUlkID8gKHkuZmluZC5JRCA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQkJaWYgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiB0LmdldEVsZW1lbnRCeUlkICYmIHEpIHsKCQkJCQkJCXZhciBuID0gdC5nZXRFbGVtZW50QnlJZChlKTsKCQkJCQkJCXJldHVybiBuICYmIG4ucGFyZW50Tm9kZSA/IFtuXSA6IFtdCgkJCQkJCX0KCQkJCQl9LCB5LmZpbHRlci5JRCA9IGZ1bmN0aW9uKGUpIHsKCQkJCQkJdmFyIHQgPSBlLnJlcGxhY2UoYmUsIHllKTsKCQkJCQkJcmV0dXJuIGZ1bmN0aW9uKGUpIHsKCQkJCQkJCXJldHVybiBlLmdldEF0dHJpYnV0ZSgiaWQiKSA9PT0gdAoJCQkJCQl9CgkJCQkJfSkgOiAoZGVsZXRlIHkuZmluZC5JRCwgeS5maWx0ZXIuSUQgPSBmdW5jdGlvbihlKSB7CgkJCQkJCXZhciB0ID0gZS5yZXBsYWNlKGJlLCB5ZSk7CgkJCQkJCXJldHVybiBmdW5jdGlvbihlKSB7CgkJCQkJCQl2YXIgbiA9ICJ1bmRlZmluZWQiICE9IHR5cGVvZiBlLmdldEF0dHJpYnV0ZU5vZGUgJiYgZS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpOwoJCQkJCQkJcmV0dXJuIG4gJiYgbi52YWx1ZSA9PT0gdAoJCQkJCQl9CgkJCQkJfSksIHkuZmluZC5UQUcgPSBiLmdldEVsZW1lbnRzQnlUYWdOYW1lID8gZnVuY3Rpb24oZSwgdCkgewoJCQkJCQlyZXR1cm4gInVuZGVmaW5lZCIgIT0gdHlwZW9mIHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPyB0LmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpIDogYi5xc2EgPyB0LnF1ZXJ5U2VsZWN0b3JBbGwoZSkgOiB2b2lkIDAKCQkJCQl9IDogZnVuY3Rpb24oZSwgdCkgewoJCQkJCQl2YXIgbiwgaSA9IFtdLAoJCQkJCQkJYSA9IDAsCgkJCQkJCQlvID0gdC5nZXRFbGVtZW50c0J5VGFnTmFtZShlKTsKCQkJCQkJaWYgKCIqIiA9PT0gZSkgewoJCQkJCQkJZm9yICg7IG4gPSBvW2ErK107KSAxID09PSBuLm5vZGVUeXBlICYmIGkucHVzaChuKTsKCQkJCQkJCXJldHVybiBpCgkJCQkJCX0KCQkJCQkJcmV0dXJuIG8KCQkJCQl9LCB5LmZpbmQuQ0xBU1MgPSBiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUgJiYgZnVuY3Rpb24oZSwgdCkgewoJCQkJCQlyZXR1cm4gcSA/IHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShlKSA6IHZvaWQgMAoJCQkJCX0sIE8gPSBbXSwgRSA9IFtdLCAoYi5xc2EgPSBfZS50ZXN0KGkucXVlcnlTZWxlY3RvckFsbCkpICYmIChhKGZ1bmN0aW9uKGUpIHsKCQkJCQkJQS5hcHBlbmRDaGlsZChlKS5pbm5lckhUTUwgPSAiPGEgaWQ9JyIgKyBNICsgIic+PC9hPjxzZWxlY3QgaWQ9JyIgKyBNICsgIi1cZl0nIG1zYWxsb3djYXB0dXJlPScnPjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+IiwgZS5xdWVyeVNlbGVjdG9yQWxsKCJbbXNhbGxvd2NhcHR1cmVePScnXSIpLmxlbmd0aCAmJiBFLnB1c2goIlsqXiRdPSIgKyBuZSArICIqKD86Jyd8XCJcIikiKSwgZS5xdWVyeVNlbGVjdG9yQWxsKCJbc2VsZWN0ZWRdIikubGVuZ3RoIHx8IEUucHVzaCgiXFxbIiArIG5lICsgIiooPzp2YWx1ZXwiICsgdGUgKyAiKSIpLCBlLnF1ZXJ5U2VsZWN0b3JBbGwoIltpZH49IiArIE0gKyAiLV0iKS5sZW5ndGggfHwgRS5wdXNoKCJ+PSIpLCBlLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RoIHx8IEUucHVzaCgiOmNoZWNrZWQiKSwgZS5xdWVyeVNlbGVjdG9yQWxsKCJhIyIgKyBNICsgIisqIikubGVuZ3RoIHx8IEUucHVzaCgiLiMuK1srfl0iKQoJCQkJCX0pLCBhKGZ1bmN0aW9uKGUpIHsKCQkJCQkJdmFyIHQgPSBpLmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CgkJCQkJCXQuc2V0QXR0cmlidXRlKCJ0eXBlIiwgImhpZGRlbiIpLCBlLmFwcGVuZENoaWxkKHQpLnNldEF0dHJpYnV0ZSgibmFtZSIsICJEIiksIGUucXVlcnlTZWxlY3RvckFsbCgiW25hbWU9ZF0iKS5sZW5ndGggJiYgRS5wdXNoKCJuYW1lIiArIG5lICsgIipbKl4kfCF+XT89IiksIGUucXVlcnlTZWxlY3RvckFsbCgiOmVuYWJsZWQiKS5sZW5ndGggfHwgRS5wdXNoKCI6ZW5hYmxlZCIsICI6ZGlzYWJsZWQiKSwgZS5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4IiksIEUucHVzaCgiLC4qOiIpCgkJCQkJfSkpLCAoYi5tYXRjaGVzU2VsZWN0b3IgPSBfZS50ZXN0KEwgPSBBLm1hdGNoZXMgfHwgQS53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHwgQS5tb3pNYXRjaGVzU2VsZWN0b3IgfHwgQS5vTWF0Y2hlc1NlbGVjdG9yIHx8IEEubXNNYXRjaGVzU2VsZWN0b3IpKSAmJiBhKGZ1bmN0aW9uKGUpIHsKCQkJCQkJYi5kaXNjb25uZWN0ZWRNYXRjaCA9IEwuY2FsbChlLCAiZGl2IiksIEwuY2FsbChlLCAiW3MhPScnXTp4IiksIE8ucHVzaCgiIT0iLCByZSkKCQkJCQl9KSwgRSA9IEUubGVuZ3RoICYmIG5ldyBSZWdFeHAoRS5qb2luKCJ8IikpLCBPID0gTy5sZW5ndGggJiYgbmV3IFJlZ0V4cChPLmpvaW4oInwiKSksIHQgPSBfZS50ZXN0KEEuY29tcGFyZURvY3VtZW50UG9zaXRpb24pLCBEID0gdCB8fCBfZS50ZXN0KEEuY29udGFpbnMpID8gZnVuY3Rpb24oZSwgdCkgewoJCQkJCQl2YXIgbiA9IDkgPT09IGUubm9kZVR5cGUgPyBlLmRvY3VtZW50RWxlbWVudCA6IGUsCgkJCQkJCQlpID0gdCAmJiB0LnBhcmVudE5vZGU7CgkJCQkJCXJldHVybiBlID09PSBpIHx8ICEoIWkgfHwgMSAhPT0gaS5ub2RlVHlwZSB8fCAhKG4uY29udGFpbnMgPyBuLmNvbnRhaW5zKGkpIDogZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiAmJiAxNiAmIGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24oaSkpKQoJCQkJCX0gOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCWlmICh0KQoJCQkJCQkJZm9yICg7IHQgPSB0LnBhcmVudE5vZGU7KQoJCQkJCQkJCWlmICh0ID09PSBlKSByZXR1cm4gITA7CgkJCQkJCXJldHVybiAhMQoJCQkJCX0sIFkgPSB0ID8gZnVuY3Rpb24oZSwgdCkgewoJCQkJCQlpZiAoZSA9PT0gdCkgcmV0dXJuIFQgPSAhMCwgMDsKCQkJCQkJdmFyIG4gPSAhZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiAtICF0LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uOwoJCQkJCQlyZXR1cm4gbiA/IG4gOiAobiA9IChlLm93bmVyRG9jdW1lbnQgfHwgZSkgPT09ICh0Lm93bmVyRG9jdW1lbnQgfHwgdCkgPyBlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHQpIDogMSwgMSAmIG4gfHwgIWIuc29ydERldGFjaGVkICYmIHQuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZSkgPT09IG4gPyBlID09PSBpIHx8IGUub3duZXJEb2N1bWVudCA9PT0gUiAmJiBEKFIsIGUpID8gLTEgOiB0ID09PSBpIHx8IHQub3duZXJEb2N1bWVudCA9PT0gUiAmJiBEKFIsIHQpID8gMSA6IE4gPyBlZShOLCBlKSAtIGVlKE4sIHQpIDogMCA6IDQgJiBuID8gLTEgOiAxKQoJCQkJCX0gOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCWlmIChlID09PSB0KSByZXR1cm4gVCA9ICEwLCAwOwoJCQkJCQl2YXIgbiwgYSA9IDAsCgkJCQkJCQlvID0gZS5wYXJlbnROb2RlLAoJCQkJCQkJcyA9IHQucGFyZW50Tm9kZSwKCQkJCQkJCWwgPSBbZV0sCgkJCQkJCQljID0gW3RdOwoJCQkJCQlpZiAoIW8gfHwgIXMpIHJldHVybiBlID09PSBpID8gLTEgOiB0ID09PSBpID8gMSA6IG8gPyAtMSA6IHMgPyAxIDogTiA/IGVlKE4sIGUpIC0gZWUoTiwgdCkgOiAwOwoJCQkJCQlpZiAobyA9PT0gcykgcmV0dXJuIHIoZSwgdCk7CgkJCQkJCWZvciAobiA9IGU7IG4gPSBuLnBhcmVudE5vZGU7KSBsLnVuc2hpZnQobik7CgkJCQkJCWZvciAobiA9IHQ7IG4gPSBuLnBhcmVudE5vZGU7KSBjLnVuc2hpZnQobik7CgkJCQkJCWZvciAoOyBsW2FdID09PSBjW2FdOykgYSsrOwoJCQkJCQlyZXR1cm4gYSA/IHIobFthXSwgY1thXSkgOiBsW2FdID09PSBSID8gLTEgOiBjW2FdID09PSBSID8gMSA6IDAKCQkJCQl9LCBpKSA6IEkKCQkJCX0sIHQubWF0Y2hlcyA9IGZ1bmN0aW9uKGUsIG4pIHsKCQkJCQlyZXR1cm4gdChlLCBudWxsLCBudWxsLCBuKQoJCQkJfSwgdC5tYXRjaGVzU2VsZWN0b3IgPSBmdW5jdGlvbihlLCBuKSB7CgkJCQkJaWYgKChlLm93bmVyRG9jdW1lbnQgfHwgZSkgIT09IEkgJiYgUChlKSwgbiA9IG4ucmVwbGFjZShwZSwgIj0nJDEnXSIpLCBiLm1hdGNoZXNTZWxlY3RvciAmJiBxICYmICghTyB8fCAhTy50ZXN0KG4pKSAmJiAoIUUgfHwgIUUudGVzdChuKSkpIHRyeSB7CgkJCQkJCXZhciBpID0gTC5jYWxsKGUsIG4pOwoJCQkJCQlpZiAoaSB8fCBiLmRpc2Nvbm5lY3RlZE1hdGNoIHx8IGUuZG9jdW1lbnQgJiYgMTEgIT09IGUuZG9jdW1lbnQubm9kZVR5cGUpIHJldHVybiBpCgkJCQkJfSBjYXRjaCAoYSkge30KCQkJCQlyZXR1cm4gdChuLCBJLCBudWxsLCBbZV0pLmxlbmd0aCA+IDAKCQkJCX0sIHQuY29udGFpbnMgPSBmdW5jdGlvbihlLCB0KSB7CgkJCQkJcmV0dXJuIChlLm93bmVyRG9jdW1lbnQgfHwgZSkgIT09IEkgJiYgUChlKSwgRChlLCB0KQoJCQkJfSwgdC5hdHRyID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJCShlLm93bmVyRG9jdW1lbnQgfHwgZSkgIT09IEkgJiYgUChlKTsKCQkJCQl2YXIgbiA9IHkuYXR0ckhhbmRsZVt0LnRvTG93ZXJDYXNlKCldLAoJCQkJCQlpID0gbiAmJiBYLmNhbGwoeS5hdHRySGFuZGxlLCB0LnRvTG93ZXJDYXNlKCkpID8gbihlLCB0LCAhcSkgOiB2b2lkIDA7CgkJCQkJcmV0dXJuIHZvaWQgMCAhPT0gaSA/IGkgOiBiLmF0dHJpYnV0ZXMgfHwgIXEgPyBlLmdldEF0dHJpYnV0ZSh0KSA6IChpID0gZS5nZXRBdHRyaWJ1dGVOb2RlKHQpKSAmJiBpLnNwZWNpZmllZCA/IGkudmFsdWUgOiBudWxsCgkJCQl9LCB0LmVycm9yID0gZnVuY3Rpb24oZSkgewoJCQkJCXRocm93IG5ldyBFcnJvcigiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIiArIGUpCgkJCQl9LCB0LnVuaXF1ZVNvcnQgPSBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQsIG4gPSBbXSwKCQkJCQkJaSA9IDAsCgkJCQkJCWEgPSAwOwoJCQkJCWlmIChUID0gIWIuZGV0ZWN0RHVwbGljYXRlcywgTiA9ICFiLnNvcnRTdGFibGUgJiYgZS5zbGljZSgwKSwgZS5zb3J0KFkpLCBUKSB7CgkJCQkJCWZvciAoOyB0ID0gZVthKytdOykgdCA9PT0gZVthXSAmJiAoaSA9IG4ucHVzaChhKSk7CgkJCQkJCWZvciAoOyBpLS07KSBlLnNwbGljZShuW2ldLCAxKQoJCQkJCX0KCQkJCQlyZXR1cm4gTiA9IG51bGwsIGUKCQkJCX0sIGsgPSB0LmdldFRleHQgPSBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQsIG4gPSAiIiwKCQkJCQkJaSA9IDAsCgkJCQkJCWEgPSBlLm5vZGVUeXBlOwoJCQkJCWlmIChhKSB7CgkJCQkJCWlmICgxID09PSBhIHx8IDkgPT09IGEgfHwgMTEgPT09IGEpIHsKCQkJCQkJCWlmICgic3RyaW5nIiA9PSB0eXBlb2YgZS50ZXh0Q29udGVudCkgcmV0dXJuIGUudGV4dENvbnRlbnQ7CgkJCQkJCQlmb3IgKGUgPSBlLmZpcnN0Q2hpbGQ7IGU7IGUgPSBlLm5leHRTaWJsaW5nKSBuICs9IGsoZSkKCQkJCQkJfSBlbHNlIGlmICgzID09PSBhIHx8IDQgPT09IGEpIHJldHVybiBlLm5vZGVWYWx1ZQoJCQkJCX0gZWxzZQoJCQkJCQlmb3IgKDsgdCA9IGVbaSsrXTspIG4gKz0gayh0KTsKCQkJCQlyZXR1cm4gbgoJCQkJfSwgeSA9IHQuc2VsZWN0b3JzID0gewoJCQkJCWNhY2hlTGVuZ3RoOiA1MCwKCQkJCQljcmVhdGVQc2V1ZG86IGksCgkJCQkJbWF0Y2g6IG1lLAoJCQkJCWF0dHJIYW5kbGU6IHt9LAoJCQkJCWZpbmQ6IHt9LAoJCQkJCXJlbGF0aXZlOiB7CgkJCQkJCSI+IjogewoJCQkJCQkJZGlyOiAicGFyZW50Tm9kZSIsCgkJCQkJCQlmaXJzdDogITAKCQkJCQkJfSwKCQkJCQkJIiAiOiB7CgkJCQkJCQlkaXI6ICJwYXJlbnROb2RlIgoJCQkJCQl9LAoJCQkJCQkiKyI6IHsKCQkJCQkJCWRpcjogInByZXZpb3VzU2libGluZyIsCgkJCQkJCQlmaXJzdDogITAKCQkJCQkJfSwKCQkJCQkJIn4iOiB7CgkJCQkJCQlkaXI6ICJwcmV2aW91c1NpYmxpbmciCgkJCQkJCX0KCQkJCQl9LAoJCQkJCXByZUZpbHRlcjogewoJCQkJCQlBVFRSOiBmdW5jdGlvbihlKSB7CgkJCQkJCQlyZXR1cm4gZVsxXSA9IGVbMV0ucmVwbGFjZShiZSwgeWUpLCBlWzNdID0gKGVbM10gfHwgZVs0XSB8fCBlWzVdIHx8ICIiKS5yZXBsYWNlKGJlLCB5ZSksICJ+PSIgPT09IGVbMl0gJiYgKGVbM10gPSAiICIgKyBlWzNdICsgIiAiKSwgZS5zbGljZSgwLCA0KQoJCQkJCQl9LAoJCQkJCQlDSElMRDogZnVuY3Rpb24oZSkgewoJCQkJCQkJcmV0dXJuIGVbMV0gPSBlWzFdLnRvTG93ZXJDYXNlKCksICJudGgiID09PSBlWzFdLnNsaWNlKDAsIDMpID8gKGVbM10gfHwgdC5lcnJvcihlWzBdKSwgZVs0XSA9ICsoZVs0XSA/IGVbNV0gKyAoZVs2XSB8fCAxKSA6IDIgKiAoImV2ZW4iID09PSBlWzNdIHx8ICJvZGQiID09PSBlWzNdKSksIGVbNV0gPSArKGVbN10gKyBlWzhdIHx8ICJvZGQiID09PSBlWzNdKSkgOiBlWzNdICYmIHQuZXJyb3IoZVswXSksIGUKCQkJCQkJfSwKCQkJCQkJUFNFVURPOiBmdW5jdGlvbihlKSB7CgkJCQkJCQl2YXIgdCwgbiA9ICFlWzZdICYmIGVbMl07CgkJCQkJCQlyZXR1cm4gbWUuQ0hJTEQudGVzdChlWzBdKSA/IG51bGwgOiAoZVszXSA/IGVbMl0gPSBlWzRdIHx8IGVbNV0gfHwgIiIgOiBuICYmIGhlLnRlc3QobikgJiYgKHQgPSBCKG4sICEwKSkgJiYgKHQgPSBuLmluZGV4T2YoIikiLCBuLmxlbmd0aCAtIHQpIC0gbi5sZW5ndGgpICYmIChlWzBdID0gZVswXS5zbGljZSgwLCB0KSwgZVsyXSA9IG4uc2xpY2UoMCwgdCkpLCBlLnNsaWNlKDAsIDMpKQoJCQkJCQl9CgkJCQkJfSwKCQkJCQlmaWx0ZXI6IHsKCQkJCQkJVEFHOiBmdW5jdGlvbihlKSB7CgkJCQkJCQl2YXIgdCA9IGUucmVwbGFjZShiZSwgeWUpLnRvTG93ZXJDYXNlKCk7CgkJCQkJCQlyZXR1cm4gIioiID09PSBlID8gZnVuY3Rpb24oKSB7CgkJCQkJCQkJcmV0dXJuICEwCgkJCQkJCQl9IDogZnVuY3Rpb24oZSkgewoJCQkJCQkJCXJldHVybiBlLm5vZGVOYW1lICYmIGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gdAoJCQkJCQkJfQoJCQkJCQl9LAoJCQkJCQlDTEFTUzogZnVuY3Rpb24oZSkgewoJCQkJCQkJdmFyIHQgPSBXW2UgKyAiICJdOwoJCQkJCQkJcmV0dXJuIHQgfHwgKHQgPSBuZXcgUmVnRXhwKCIoXnwiICsgbmUgKyAiKSIgKyBlICsgIigiICsgbmUgKyAifCQpIikpICYmIFcoZSwgZnVuY3Rpb24oZSkgewoJCQkJCQkJCXJldHVybiB0LnRlc3QoInN0cmluZyIgPT0gdHlwZW9mIGUuY2xhc3NOYW1lICYmIGUuY2xhc3NOYW1lIHx8ICJ1bmRlZmluZWQiICE9IHR5cGVvZiBlLmdldEF0dHJpYnV0ZSAmJiBlLmdldEF0dHJpYnV0ZSgiY2xhc3MiKSB8fCAiIikKCQkJCQkJCX0pCgkJCQkJCX0sCgkJCQkJCUFUVFI6IGZ1bmN0aW9uKGUsIG4sIGkpIHsKCQkJCQkJCXJldHVybiBmdW5jdGlvbihhKSB7CgkJCQkJCQkJdmFyIG8gPSB0LmF0dHIoYSwgZSk7CgkJCQkJCQkJcmV0dXJuIG51bGwgPT0gbyA/ICIhPSIgPT09IG4gOiBuID8gKG8gKz0gIiIsICI9IiA9PT0gbiA/IG8gPT09IGkgOiAiIT0iID09PSBuID8gbyAhPT0gaSA6ICJePSIgPT09IG4gPyBpICYmIDAgPT09IG8uaW5kZXhPZihpKSA6ICIqPSIgPT09IG4gPyBpICYmIG8uaW5kZXhPZihpKSA+IC0xIDogIiQ9IiA9PT0gbiA/IGkgJiYgby5zbGljZSgtaS5sZW5ndGgpID09PSBpIDogIn49IiA9PT0gbiA/ICgiICIgKyBvLnJlcGxhY2Uoc2UsICIgIikgKyAiICIpLmluZGV4T2YoaSkgPiAtMSA6ICJ8PSIgPT09IG4gPyBvID09PSBpIHx8IG8uc2xpY2UoMCwgaS5sZW5ndGggKyAxKSA9PT0gaSArICItIiA6ICExKSA6ICEwCgkJCQkJCQl9CgkJCQkJCX0sCgkJCQkJCUNISUxEOiBmdW5jdGlvbihlLCB0LCBuLCBpLCBhKSB7CgkJCQkJCQl2YXIgbyA9ICJudGgiICE9PSBlLnNsaWNlKDAsIDMpLAoJCQkJCQkJCXIgPSAibGFzdCIgIT09IGUuc2xpY2UoLTQpLAoJCQkJCQkJCXMgPSAib2YtdHlwZSIgPT09IHQ7CgkJCQkJCQlyZXR1cm4gMSA9PT0gaSAmJiAwID09PSBhID8gZnVuY3Rpb24oZSkgewoJCQkJCQkJCXJldHVybiAhIWUucGFyZW50Tm9kZQoJCQkJCQkJfSA6IGZ1bmN0aW9uKHQsIG4sIGwpIHsKCQkJCQkJCQl2YXIgYywgZCwgcCwgaCwgdSwgbSwgZiA9IG8gIT09IHIgPyAibmV4dFNpYmxpbmciIDogInByZXZpb3VzU2libGluZyIsCgkJCQkJCQkJCWcgPSB0LnBhcmVudE5vZGUsCgkJCQkJCQkJCV8gPSBzICYmIHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSwKCQkJCQkJCQkJeCA9ICFsICYmICFzOwoJCQkJCQkJCWlmIChnKSB7CgkJCQkJCQkJCWlmIChvKSB7CgkJCQkJCQkJCQlmb3IgKDsgZjspIHsKCQkJCQkJCQkJCQlmb3IgKHAgPSB0OyBwID0gcFtmXTspCgkJCQkJCQkJCQkJCWlmIChzID8gcC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBfIDogMSA9PT0gcC5ub2RlVHlwZSkgcmV0dXJuICExOwoJCQkJCQkJCQkJCW0gPSBmID0gIm9ubHkiID09PSBlICYmICFtICYmICJuZXh0U2libGluZyIKCQkJCQkJCQkJCX0KCQkJCQkJCQkJCXJldHVybiAhMAoJCQkJCQkJCQl9CgkJCQkJCQkJCWlmIChtID0gW3IgPyBnLmZpcnN0Q2hpbGQgOiBnLmxhc3RDaGlsZF0sIHIgJiYgeCkgewoJCQkJCQkJCQkJZm9yIChkID0gZ1tNXSB8fCAoZ1tNXSA9IHt9KSwgYyA9IGRbZV0gfHwgW10sIHUgPSBjWzBdID09PSBGICYmIGNbMV0sIGggPSBjWzBdID09PSBGICYmIGNbMl0sIHAgPSB1ICYmIGcuY2hpbGROb2Rlc1t1XTsgcCA9ICsrdSAmJiBwICYmIHBbZl0gfHwgKGggPSB1ID0gMCkgfHwgbS5wb3AoKTspCgkJCQkJCQkJCQkJaWYgKDEgPT09IHAubm9kZVR5cGUgJiYgKytoICYmIHAgPT09IHQpIHsKCQkJCQkJCQkJCQkJZFtlXSA9IFtGLCB1LCBoXTsKCQkJCQkJCQkJCQkJYnJlYWsKCQkJCQkJCQkJCQl9CgkJCQkJCQkJCX0gZWxzZSBpZiAoeCAmJiAoYyA9ICh0W01dIHx8ICh0W01dID0ge30pKVtlXSkgJiYgY1swXSA9PT0gRikgaCA9IGNbMV07CgkJCQkJCQkJCWVsc2UKCQkJCQkJCQkJCWZvciAoOwoJCQkJCQkJCQkJCShwID0gKyt1ICYmIHAgJiYgcFtmXSB8fCAoaCA9IHUgPSAwKSB8fCBtLnBvcCgpKSAmJiAoKHMgPyBwLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09IF8gOiAxICE9PSBwLm5vZGVUeXBlKSB8fCAhKytoIHx8ICh4ICYmICgocFtNXSB8fCAocFtNXSA9IHt9KSlbZV0gPSBbRiwgaF0pLCBwICE9PSB0KSk7KTsKCQkJCQkJCQkJcmV0dXJuIGggLT0gYSwgaCA9PT0gaSB8fCBoICUgaSA9PT0gMCAmJiBoIC8gaSA+PSAwCgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9LAoJCQkJCQlQU0VVRE86IGZ1bmN0aW9uKGUsIG4pIHsKCQkJCQkJCXZhciBhLCBvID0geS5wc2V1ZG9zW2VdIHx8IHkuc2V0RmlsdGVyc1tlLnRvTG93ZXJDYXNlKCldIHx8IHQuZXJyb3IoInVuc3VwcG9ydGVkIHBzZXVkbzogIiArIGUpOwoJCQkJCQkJcmV0dXJuIG9bTV0gPyBvKG4pIDogby5sZW5ndGggPiAxID8gKGEgPSBbZSwgZSwgIiIsIG5dLCB5LnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoZS50b0xvd2VyQ2FzZSgpKSA/IGkoZnVuY3Rpb24oZSwgdCkgewoJCQkJCQkJCWZvciAodmFyIGksIGEgPSBvKGUsIG4pLCByID0gYS5sZW5ndGg7IHItLTspIGkgPSBlZShlLCBhW3JdKSwgZVtpXSA9ICEodFtpXSA9IGFbcl0pCgkJCQkJCQl9KSA6IGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQlyZXR1cm4gbyhlLCAwLCBhKQoJCQkJCQkJfSkgOiBvCgkJCQkJCX0KCQkJCQl9LAoJCQkJCXBzZXVkb3M6IHsKCQkJCQkJbm90OiBpKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCXZhciB0ID0gW10sCgkJCQkJCQkJbiA9IFtdLAoJCQkJCQkJCWEgPSBqKGUucmVwbGFjZShsZSwgIiQxIikpOwoJCQkJCQkJcmV0dXJuIGFbTV0gPyBpKGZ1bmN0aW9uKGUsIHQsIG4sIGkpIHsKCQkJCQkJCQlmb3IgKHZhciBvLCByID0gYShlLCBudWxsLCBpLCBbXSksIHMgPSBlLmxlbmd0aDsgcy0tOykobyA9IHJbc10pICYmIChlW3NdID0gISh0W3NdID0gbykpCgkJCQkJCQl9KSA6IGZ1bmN0aW9uKGUsIGksIG8pIHsKCQkJCQkJCQlyZXR1cm4gdFswXSA9IGUsIGEodCwgbnVsbCwgbywgbiksIHRbMF0gPSBudWxsLCAhbi5wb3AoKQoJCQkJCQkJfQoJCQkJCQl9KSwKCQkJCQkJaGFzOiBpKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCXJldHVybiBmdW5jdGlvbihuKSB7CgkJCQkJCQkJcmV0dXJuIHQoZSwgbikubGVuZ3RoID4gMAoJCQkJCQkJfQoJCQkJCQl9KSwKCQkJCQkJY29udGFpbnM6IGkoZnVuY3Rpb24oZSkgewoJCQkJCQkJcmV0dXJuIGUgPSBlLnJlcGxhY2UoYmUsIHllKSwKCQkJCQkJCQlmdW5jdGlvbih0KSB7CgkJCQkJCQkJCXJldHVybiAodC50ZXh0Q29udGVudCB8fCB0LmlubmVyVGV4dCB8fCBrKHQpKS5pbmRleE9mKGUpID4gLTEKCQkJCQkJCQl9CgkJCQkJCX0pLAoJCQkJCQlsYW5nOiBpKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCXJldHVybiB1ZS50ZXN0KGUgfHwgIiIpIHx8IHQuZXJyb3IoInVuc3VwcG9ydGVkIGxhbmc6ICIgKyBlKSwgZSA9IGUucmVwbGFjZShiZSwgeWUpLnRvTG93ZXJDYXNlKCksCgkJCQkJCQkJZnVuY3Rpb24odCkgewoJCQkJCQkJCQl2YXIgbjsKCQkJCQkJCQkJZG8KCQkJCQkJCQkJCWlmIChuID0gcSA/IHQubGFuZyA6IHQuZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpIHx8IHQuZ2V0QXR0cmlidXRlKCJsYW5nIikpIHJldHVybiBuID0gbi50b0xvd2VyQ2FzZSgpLCBuID09PSBlIHx8IDAgPT09IG4uaW5kZXhPZihlICsgIi0iKTsKCQkJCQkJCQkJd2hpbGUgKCh0ID0gdC5wYXJlbnROb2RlKSAmJiAxID09PSB0Lm5vZGVUeXBlKTsKCQkJCQkJCQkJcmV0dXJuICExCgkJCQkJCQkJfQoJCQkJCQl9KSwKCQkJCQkJdGFyZ2V0OiBmdW5jdGlvbih0KSB7CgkJCQkJCQl2YXIgbiA9IGUubG9jYXRpb24gJiYgZS5sb2NhdGlvbi5oYXNoOwoJCQkJCQkJcmV0dXJuIG4gJiYgbi5zbGljZSgxKSA9PT0gdC5pZAoJCQkJCQl9LAoJCQkJCQlyb290OiBmdW5jdGlvbihlKSB7CgkJCQkJCQlyZXR1cm4gZSA9PT0gQQoJCQkJCQl9LAoJCQkJCQlmb2N1czogZnVuY3Rpb24oZSkgewoJCQkJCQkJcmV0dXJuIGUgPT09IEkuYWN0aXZlRWxlbWVudCAmJiAoIUkuaGFzRm9jdXMgfHwgSS5oYXNGb2N1cygpKSAmJiAhIShlLnR5cGUgfHwgZS5ocmVmIHx8IH5lLnRhYkluZGV4KQoJCQkJCQl9LAoJCQkJCQllbmFibGVkOiBmdW5jdGlvbihlKSB7CgkJCQkJCQlyZXR1cm4gZS5kaXNhYmxlZCA9PT0gITEKCQkJCQkJfSwKCQkJCQkJZGlzYWJsZWQ6IGZ1bmN0aW9uKGUpIHsKCQkJCQkJCXJldHVybiBlLmRpc2FibGVkID09PSAhMAoJCQkJCQl9LAoJCQkJCQljaGVja2VkOiBmdW5jdGlvbihlKSB7CgkJCQkJCQl2YXIgdCA9IGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKCQkJCQkJCXJldHVybiAiaW5wdXQiID09PSB0ICYmICEhZS5jaGVja2VkIHx8ICJvcHRpb24iID09PSB0ICYmICEhZS5zZWxlY3RlZAoJCQkJCQl9LAoJCQkJCQlzZWxlY3RlZDogZnVuY3Rpb24oZSkgewoJCQkJCQkJcmV0dXJuIGUucGFyZW50Tm9kZSAmJiBlLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCwgZS5zZWxlY3RlZCA9PT0gITAKCQkJCQkJfSwKCQkJCQkJZW1wdHk6IGZ1bmN0aW9uKGUpIHsKCQkJCQkJCWZvciAoZSA9IGUuZmlyc3RDaGlsZDsgZTsgZSA9IGUubmV4dFNpYmxpbmcpCgkJCQkJCQkJaWYgKGUubm9kZVR5cGUgPCA2KSByZXR1cm4gITE7CgkJCQkJCQlyZXR1cm4gITAKCQkJCQkJfSwKCQkJCQkJcGFyZW50OiBmdW5jdGlvbihlKSB7CgkJCQkJCQlyZXR1cm4gIXkucHNldWRvcy5lbXB0eShlKQoJCQkJCQl9LAoJCQkJCQloZWFkZXI6IGZ1bmN0aW9uKGUpIHsKCQkJCQkJCXJldHVybiBnZS50ZXN0KGUubm9kZU5hbWUpCgkJCQkJCX0sCgkJCQkJCWlucHV0OiBmdW5jdGlvbihlKSB7CgkJCQkJCQlyZXR1cm4gZmUudGVzdChlLm5vZGVOYW1lKQoJCQkJCQl9LAoJCQkJCQlidXR0b246IGZ1bmN0aW9uKGUpIHsKCQkJCQkJCXZhciB0ID0gZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOwoJCQkJCQkJcmV0dXJuICJpbnB1dCIgPT09IHQgJiYgImJ1dHRvbiIgPT09IGUudHlwZSB8fCAiYnV0dG9uIiA9PT0gdAoJCQkJCQl9LAoJCQkJCQl0ZXh0OiBmdW5jdGlvbihlKSB7CgkJCQkJCQl2YXIgdDsKCQkJCQkJCXJldHVybiAiaW5wdXQiID09PSBlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgJiYgInRleHQiID09PSBlLnR5cGUgJiYgKG51bGwgPT0gKHQgPSBlLmdldEF0dHJpYnV0ZSgidHlwZSIpKSB8fCAidGV4dCIgPT09IHQudG9Mb3dlckNhc2UoKSkKCQkJCQkJfSwKCQkJCQkJZmlyc3Q6IGMoZnVuY3Rpb24oKSB7CgkJCQkJCQlyZXR1cm4gWzBdCgkJCQkJCX0pLAoJCQkJCQlsYXN0OiBjKGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQkJCXJldHVybiBbdCAtIDFdCgkJCQkJCX0pLAoJCQkJCQllcTogYyhmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJCQlyZXR1cm4gWzAgPiBuID8gbiArIHQgOiBuXQoJCQkJCQl9KSwKCQkJCQkJZXZlbjogYyhmdW5jdGlvbihlLCB0KSB7CgkJCQkJCQlmb3IgKHZhciBuID0gMDsgdCA+IG47IG4gKz0gMikgZS5wdXNoKG4pOwoJCQkJCQkJcmV0dXJuIGUKCQkJCQkJfSksCgkJCQkJCW9kZDogYyhmdW5jdGlvbihlLCB0KSB7CgkJCQkJCQlmb3IgKHZhciBuID0gMTsgdCA+IG47IG4gKz0gMikgZS5wdXNoKG4pOwoJCQkJCQkJcmV0dXJuIGUKCQkJCQkJfSksCgkJCQkJCWx0OiBjKGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQkJCWZvciAodmFyIGkgPSAwID4gbiA/IG4gKyB0IDogbjsgLS1pID49IDA7KSBlLnB1c2goaSk7CgkJCQkJCQlyZXR1cm4gZQoJCQkJCQl9KSwKCQkJCQkJZ3Q6IGMoZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCQkJZm9yICh2YXIgaSA9IDAgPiBuID8gbiArIHQgOiBuOyArK2kgPCB0OykgZS5wdXNoKGkpOwoJCQkJCQkJcmV0dXJuIGUKCQkJCQkJfSkKCQkJCQl9CgkJCQl9LCB5LnBzZXVkb3MubnRoID0geS5wc2V1ZG9zLmVxOwoJCQkJZm9yICh2IGluIHsKCQkJCQlyYWRpbzogITAsCgkJCQkJY2hlY2tib3g6ICEwLAoJCQkJCWZpbGU6ICEwLAoJCQkJCXBhc3N3b3JkOiAhMCwKCQkJCQlpbWFnZTogITAKCQkJCX0pIHkucHNldWRvc1t2XSA9IHModik7CgkJCQlmb3IgKHYgaW4gewoJCQkJCXN1Ym1pdDogITAsCgkJCQkJcmVzZXQ6ICEwCgkJCQl9KSB5LnBzZXVkb3Nbdl0gPSBsKHYpOwoJCQkJcmV0dXJuIHAucHJvdG90eXBlID0geS5maWx0ZXJzID0geS5wc2V1ZG9zLCB5LnNldEZpbHRlcnMgPSBuZXcgcCwgQiA9IHQudG9rZW5pemUgPSBmdW5jdGlvbihlLCBuKSB7CgkJCQkJdmFyIGksIGEsIG8sIHIsIHMsIGwsIGMsIGQgPSBIW2UgKyAiICJdOwoJCQkJCWlmIChkKSByZXR1cm4gbiA/IDAgOiBkLnNsaWNlKDApOwoJCQkJCWZvciAocyA9IGUsIGwgPSBbXSwgYyA9IHkucHJlRmlsdGVyOyBzOykgewoJCQkJCQkoIWkgfHwgKGEgPSBjZS5leGVjKHMpKSkgJiYgKGEgJiYgKHMgPSBzLnNsaWNlKGFbMF0ubGVuZ3RoKSB8fCBzKSwgbC5wdXNoKG8gPSBbXSkpLCBpID0gITEsIChhID0gZGUuZXhlYyhzKSkgJiYgKGkgPSBhLnNoaWZ0KCksIG8ucHVzaCh7CgkJCQkJCQl2YWx1ZTogaSwKCQkJCQkJCXR5cGU6IGFbMF0ucmVwbGFjZShsZSwgIiAiKQoJCQkJCQl9KSwgcyA9IHMuc2xpY2UoaS5sZW5ndGgpKTsKCQkJCQkJZm9yIChyIGluIHkuZmlsdGVyKSAhKGEgPSBtZVtyXS5leGVjKHMpKSB8fCBjW3JdICYmICEoYSA9IGNbcl0oYSkpIHx8IChpID0gYS5zaGlmdCgpLCBvLnB1c2goewoJCQkJCQkJdmFsdWU6IGksCgkJCQkJCQl0eXBlOiByLAoJCQkJCQkJbWF0Y2hlczogYQoJCQkJCQl9KSwgcyA9IHMuc2xpY2UoaS5sZW5ndGgpKTsKCQkJCQkJaWYgKCFpKSBicmVhawoJCQkJCX0KCQkJCQlyZXR1cm4gbiA/IHMubGVuZ3RoIDogcyA/IHQuZXJyb3IoZSkgOiBIKGUsIGwpLnNsaWNlKDApCgkJCQl9LCBqID0gdC5jb21waWxlID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJCXZhciBuLCBpID0gW10sCgkJCQkJCWEgPSBbXSwKCQkJCQkJbyA9IFVbZSArICIgIl07CgkJCQkJaWYgKCFvKSB7CgkJCQkJCWZvciAodCB8fCAodCA9IEIoZSkpLCBuID0gdC5sZW5ndGg7IG4tLTspIG8gPSB4KHRbbl0pLCBvW01dID8gaS5wdXNoKG8pIDogYS5wdXNoKG8pOwoJCQkJCQlvID0gVShlLCB3KGEsIGkpKSwgby5zZWxlY3RvciA9IGUKCQkJCQl9CgkJCQkJcmV0dXJuIG8KCQkJCX0sIEMgPSB0LnNlbGVjdCA9IGZ1bmN0aW9uKGUsIHQsIG4sIGkpIHsKCQkJCQl2YXIgYSwgbywgciwgcywgbCwgYyA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgJiYgZSwKCQkJCQkJcCA9ICFpICYmIEIoZSA9IGMuc2VsZWN0b3IgfHwgZSk7CgkJCQkJaWYgKG4gPSBuIHx8IFtdLCAxID09PSBwLmxlbmd0aCkgewoJCQkJCQlpZiAobyA9IHBbMF0gPSBwWzBdLnNsaWNlKDApLCBvLmxlbmd0aCA+IDIgJiYgIklEIiA9PT0gKHIgPSBvWzBdKS50eXBlICYmIGIuZ2V0QnlJZCAmJiA5ID09PSB0Lm5vZGVUeXBlICYmIHEgJiYgeS5yZWxhdGl2ZVtvWzFdLnR5cGVdKSB7CgkJCQkJCQlpZiAodCA9ICh5LmZpbmQuSUQoci5tYXRjaGVzWzBdLnJlcGxhY2UoYmUsIHllKSwgdCkgfHwgW10pWzBdLCAhdCkgcmV0dXJuIG47CgkJCQkJCQljICYmICh0ID0gdC5wYXJlbnROb2RlKSwgZSA9IGUuc2xpY2Uoby5zaGlmdCgpLnZhbHVlLmxlbmd0aCkKCQkJCQkJfQoJCQkJCQlmb3IgKGEgPSBtZS5uZWVkc0NvbnRleHQudGVzdChlKSA/IDAgOiBvLmxlbmd0aDsgYS0tICYmIChyID0gb1thXSwgIXkucmVsYXRpdmVbcyA9IHIudHlwZV0pOykKCQkJCQkJCWlmICgobCA9IHkuZmluZFtzXSkgJiYgKGkgPSBsKHIubWF0Y2hlc1swXS5yZXBsYWNlKGJlLCB5ZSksIHdlLnRlc3Qob1swXS50eXBlKSAmJiBkKHQucGFyZW50Tm9kZSkgfHwgdCkpKSB7CgkJCQkJCQkJaWYgKG8uc3BsaWNlKGEsIDEpLCBlID0gaS5sZW5ndGggJiYgaChvKSwgIWUpIHJldHVybiBLLmFwcGx5KG4sIGkpLCBuOwoJCQkJCQkJCWJyZWFrCgkJCQkJCQl9CgkJCQkJfQoJCQkJCXJldHVybiAoYyB8fCBqKGUsIHApKShpLCB0LCAhcSwgbiwgd2UudGVzdChlKSAmJiBkKHQucGFyZW50Tm9kZSkgfHwgdCksIG4KCQkJCX0sIGIuc29ydFN0YWJsZSA9IE0uc3BsaXQoIiIpLnNvcnQoWSkuam9pbigiIikgPT09IE0sIGIuZGV0ZWN0RHVwbGljYXRlcyA9ICEhVCwgUCgpLCBiLnNvcnREZXRhY2hlZCA9IGEoZnVuY3Rpb24oZSkgewoJCQkJCXJldHVybiAxICYgZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihJLmNyZWF0ZUVsZW1lbnQoImRpdiIpKQoJCQkJfSksIGEoZnVuY3Rpb24oZSkgewoJCQkJCXJldHVybiBlLmlubmVySFRNTCA9ICI8YSBocmVmPScjJz48L2E+IiwgIiMiID09PSBlLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJocmVmIikKCQkJCX0pIHx8IG8oInR5cGV8aHJlZnxoZWlnaHR8d2lkdGgiLCBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJcmV0dXJuIG4gPyB2b2lkIDAgOiBlLmdldEF0dHJpYnV0ZSh0LCAidHlwZSIgPT09IHQudG9Mb3dlckNhc2UoKSA/IDEgOiAyKQoJCQkJfSksIGIuYXR0cmlidXRlcyAmJiBhKGZ1bmN0aW9uKGUpIHsKCQkJCQlyZXR1cm4gZS5pbm5lckhUTUwgPSAiPGlucHV0Lz4iLCBlLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsICIiKSwgIiIgPT09IGUuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoInZhbHVlIikKCQkJCX0pIHx8IG8oInZhbHVlIiwgZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCXJldHVybiBuIHx8ICJpbnB1dCIgIT09IGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA/IHZvaWQgMCA6IGUuZGVmYXVsdFZhbHVlCgkJCQl9KSwgYShmdW5jdGlvbihlKSB7CgkJCQkJcmV0dXJuIG51bGwgPT0gZS5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIikKCQkJCX0pIHx8IG8odGUsIGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQl2YXIgaTsKCQkJCQlyZXR1cm4gbiA/IHZvaWQgMCA6IGVbdF0gPT09ICEwID8gdC50b0xvd2VyQ2FzZSgpIDogKGkgPSBlLmdldEF0dHJpYnV0ZU5vZGUodCkpICYmIGkuc3BlY2lmaWVkID8gaS52YWx1ZSA6IG51bGwKCQkJCX0pLCB0CgkJCX0oYSk7CgkJCWxlLmZpbmQgPSB1ZSwgbGUuZXhwciA9IHVlLnNlbGVjdG9ycywgbGUuZXhwclsiOiJdID0gbGUuZXhwci5wc2V1ZG9zLCBsZS51bmlxdWUgPSB1ZS51bmlxdWVTb3J0LCBsZS50ZXh0ID0gdWUuZ2V0VGV4dCwgbGUuaXNYTUxEb2MgPSB1ZS5pc1hNTCwgbGUuY29udGFpbnMgPSB1ZS5jb250YWluczsKCQkJdmFyIG1lID0gbGUuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQsCgkJCQlmZSA9IC9ePChcdyspXHMqXC8/Pig/OjxcL1wxPnwpJC8sCgkJCQlnZSA9IC9eLlteOiNcW1wuLF0qJC87CgkJCWxlLmZpbHRlciA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCXZhciBpID0gdFswXTsKCQkJCXJldHVybiBuICYmIChlID0gIjpub3QoIiArIGUgKyAiKSIpLCAxID09PSB0Lmxlbmd0aCAmJiAxID09PSBpLm5vZGVUeXBlID8gbGUuZmluZC5tYXRjaGVzU2VsZWN0b3IoaSwgZSkgPyBbaV0gOiBbXSA6IGxlLmZpbmQubWF0Y2hlcyhlLCBsZS5ncmVwKHQsIGZ1bmN0aW9uKGUpIHsKCQkJCQlyZXR1cm4gMSA9PT0gZS5ub2RlVHlwZQoJCQkJfSkpCgkJCX0sIGxlLmZuLmV4dGVuZCh7CgkJCQlmaW5kOiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQsIG4gPSBbXSwKCQkJCQkJaSA9IHRoaXMsCgkJCQkJCWEgPSBpLmxlbmd0aDsKCQkJCQlpZiAoInN0cmluZyIgIT0gdHlwZW9mIGUpIHJldHVybiB0aGlzLnB1c2hTdGFjayhsZShlKS5maWx0ZXIoZnVuY3Rpb24oKSB7CgkJCQkJCWZvciAodCA9IDA7IGEgPiB0OyB0KyspCgkJCQkJCQlpZiAobGUuY29udGFpbnMoaVt0XSwgdGhpcykpIHJldHVybiAhMAoJCQkJCX0pKTsKCQkJCQlmb3IgKHQgPSAwOyBhID4gdDsgdCsrKSBsZS5maW5kKGUsIGlbdF0sIG4pOwoJCQkJCXJldHVybiBuID0gdGhpcy5wdXNoU3RhY2soYSA+IDEgPyBsZS51bmlxdWUobikgOiBuKSwgbi5zZWxlY3RvciA9IHRoaXMuc2VsZWN0b3IgPyB0aGlzLnNlbGVjdG9yICsgIiAiICsgZSA6IGUsIG4KCQkJCX0sCgkJCQlmaWx0ZXI6IGZ1bmN0aW9uKGUpIHsKCQkJCQlyZXR1cm4gdGhpcy5wdXNoU3RhY2socyh0aGlzLCBlIHx8IFtdLCAhMSkpCgkJCQl9LAoJCQkJbm90OiBmdW5jdGlvbihlKSB7CgkJCQkJcmV0dXJuIHRoaXMucHVzaFN0YWNrKHModGhpcywgZSB8fCBbXSwgITApKQoJCQkJfSwKCQkJCWlzOiBmdW5jdGlvbihlKSB7CgkJCQkJcmV0dXJuICEhcyh0aGlzLCAic3RyaW5nIiA9PSB0eXBlb2YgZSAmJiBtZS50ZXN0KGUpID8gbGUoZSkgOiBlIHx8IFtdLCAhMSkubGVuZ3RoCgkJCQl9CgkJCX0pOwoJCQl2YXIgX2UsIHhlID0gYS5kb2N1bWVudCwKCQkJCXdlID0gL14oPzpccyooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0qKSkkLywKCQkJCXZlID0gbGUuZm4uaW5pdCA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQl2YXIgbiwgaTsKCQkJCQlpZiAoIWUpIHJldHVybiB0aGlzOwoJCQkJCWlmICgic3RyaW5nIiA9PSB0eXBlb2YgZSkgewoJCQkJCQlpZiAobiA9ICI8IiA9PT0gZS5jaGFyQXQoMCkgJiYgIj4iID09PSBlLmNoYXJBdChlLmxlbmd0aCAtIDEpICYmIGUubGVuZ3RoID49IDMgPyBbbnVsbCwgZSwgbnVsbF0gOiB3ZS5leGVjKGUpLCAhbiB8fCAhblsxXSAmJiB0KSByZXR1cm4gIXQgfHwgdC5qcXVlcnkgPyAodCB8fCBfZSkuZmluZChlKSA6IHRoaXMuY29uc3RydWN0b3IodCkuZmluZChlKTsKCQkJCQkJaWYgKG5bMV0pIHsKCQkJCQkJCWlmICh0ID0gdCBpbnN0YW5jZW9mIGxlID8gdFswXSA6IHQsIGxlLm1lcmdlKHRoaXMsIGxlLnBhcnNlSFRNTChuWzFdLCB0ICYmIHQubm9kZVR5cGUgPyB0Lm93bmVyRG9jdW1lbnQgfHwgdCA6IHhlLCAhMCkpLCBmZS50ZXN0KG5bMV0pICYmIGxlLmlzUGxhaW5PYmplY3QodCkpCgkJCQkJCQkJZm9yIChuIGluIHQpIGxlLmlzRnVuY3Rpb24odGhpc1tuXSkgPyB0aGlzW25dKHRbbl0pIDogdGhpcy5hdHRyKG4sIHRbbl0pOwoJCQkJCQkJcmV0dXJuIHRoaXMKCQkJCQkJfQoJCQkJCQlpZiAoaSA9IHhlLmdldEVsZW1lbnRCeUlkKG5bMl0pLCBpICYmIGkucGFyZW50Tm9kZSkgewoJCQkJCQkJaWYgKGkuaWQgIT09IG5bMl0pIHJldHVybiBfZS5maW5kKGUpOwoJCQkJCQkJdGhpcy5sZW5ndGggPSAxLCB0aGlzWzBdID0gaQoJCQkJCQl9CgkJCQkJCXJldHVybiB0aGlzLmNvbnRleHQgPSB4ZSwgdGhpcy5zZWxlY3RvciA9IGUsIHRoaXMKCQkJCQl9CgkJCQkJcmV0dXJuIGUubm9kZVR5cGUgPyAodGhpcy5jb250ZXh0ID0gdGhpc1swXSA9IGUsIHRoaXMubGVuZ3RoID0gMSwgdGhpcykgOiBsZS5pc0Z1bmN0aW9uKGUpID8gInVuZGVmaW5lZCIgIT0gdHlwZW9mIF9lLnJlYWR5ID8gX2UucmVhZHkoZSkgOiBlKGxlKSA6ICh2b2lkIDAgIT09IGUuc2VsZWN0b3IgJiYgKHRoaXMuc2VsZWN0b3IgPSBlLnNlbGVjdG9yLCB0aGlzLmNvbnRleHQgPSBlLmNvbnRleHQpLCBsZS5tYWtlQXJyYXkoZSwgdGhpcykpCgkJCQl9OwoJCQl2ZS5wcm90b3R5cGUgPSBsZS5mbiwgX2UgPSBsZSh4ZSk7CgkJCXZhciBiZSA9IC9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLAoJCQkJeWUgPSB7CgkJCQkJY2hpbGRyZW46ICEwLAoJCQkJCWNvbnRlbnRzOiAhMCwKCQkJCQluZXh0OiAhMCwKCQkJCQlwcmV2OiAhMAoJCQkJfTsKCQkJbGUuZXh0ZW5kKHsKCQkJCWRpcjogZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCWZvciAodmFyIGkgPSBbXSwgYSA9IGVbdF07IGEgJiYgOSAhPT0gYS5ub2RlVHlwZSAmJiAodm9pZCAwID09PSBuIHx8IDEgIT09IGEubm9kZVR5cGUgfHwgIWxlKGEpLmlzKG4pKTspIDEgPT09IGEubm9kZVR5cGUgJiYgaS5wdXNoKGEpLCBhID0gYVt0XTsKCQkJCQlyZXR1cm4gaQoJCQkJfSwKCQkJCXNpYmxpbmc6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQlmb3IgKHZhciBuID0gW107IGU7IGUgPSBlLm5leHRTaWJsaW5nKSAxID09PSBlLm5vZGVUeXBlICYmIGUgIT09IHQgJiYgbi5wdXNoKGUpOwoJCQkJCXJldHVybiBuCgkJCQl9CgkJCX0pLCBsZS5mbi5leHRlbmQoewoJCQkJaGFzOiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQsIG4gPSBsZShlLCB0aGlzKSwKCQkJCQkJaSA9IG4ubGVuZ3RoOwoJCQkJCXJldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpIHsKCQkJCQkJZm9yICh0ID0gMDsgaSA+IHQ7IHQrKykKCQkJCQkJCWlmIChsZS5jb250YWlucyh0aGlzLCBuW3RdKSkgcmV0dXJuICEwCgkJCQkJfSkKCQkJCX0sCgkJCQljbG9zZXN0OiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJZm9yICh2YXIgbiwgaSA9IDAsIGEgPSB0aGlzLmxlbmd0aCwgbyA9IFtdLCByID0gbWUudGVzdChlKSB8fCAic3RyaW5nIiAhPSB0eXBlb2YgZSA/IGxlKGUsIHQgfHwgdGhpcy5jb250ZXh0KSA6IDA7IGEgPiBpOyBpKyspCgkJCQkJCWZvciAobiA9IHRoaXNbaV07IG4gJiYgbiAhPT0gdDsgbiA9IG4ucGFyZW50Tm9kZSkKCQkJCQkJCWlmIChuLm5vZGVUeXBlIDwgMTEgJiYgKHIgPyByLmluZGV4KG4pID4gLTEgOiAxID09PSBuLm5vZGVUeXBlICYmIGxlLmZpbmQubWF0Y2hlc1NlbGVjdG9yKG4sIGUpKSkgewoJCQkJCQkJCW8ucHVzaChuKTsKCQkJCQkJCQlicmVhawoJCQkJCQkJfQoJCQkJCXJldHVybiB0aGlzLnB1c2hTdGFjayhvLmxlbmd0aCA+IDEgPyBsZS51bmlxdWUobykgOiBvKQoJCQkJfSwKCQkJCWluZGV4OiBmdW5jdGlvbihlKSB7CgkJCQkJcmV0dXJuIGUgPyAic3RyaW5nIiA9PSB0eXBlb2YgZSA/IGxlLmluQXJyYXkodGhpc1swXSwgbGUoZSkpIDogbGUuaW5BcnJheShlLmpxdWVyeSA/IGVbMF0gOiBlLCB0aGlzKSA6IHRoaXNbMF0gJiYgdGhpc1swXS5wYXJlbnROb2RlID8gdGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGggOiAtMQoJCQkJfSwKCQkJCWFkZDogZnVuY3Rpb24oZSwgdCkgewoJCQkJCXJldHVybiB0aGlzLnB1c2hTdGFjayhsZS51bmlxdWUobGUubWVyZ2UodGhpcy5nZXQoKSwgbGUoZSwgdCkpKSkKCQkJCX0sCgkJCQlhZGRCYWNrOiBmdW5jdGlvbihlKSB7CgkJCQkJcmV0dXJuIHRoaXMuYWRkKG51bGwgPT0gZSA/IHRoaXMucHJldk9iamVjdCA6IHRoaXMucHJldk9iamVjdC5maWx0ZXIoZSkpCgkJCQl9CgkJCX0pLCBsZS5lYWNoKHsKCQkJCXBhcmVudDogZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0ID0gZS5wYXJlbnROb2RlOwoJCQkJCXJldHVybiB0ICYmIDExICE9PSB0Lm5vZGVUeXBlID8gdCA6IG51bGwKCQkJCX0sCgkJCQlwYXJlbnRzOiBmdW5jdGlvbihlKSB7CgkJCQkJcmV0dXJuIGxlLmRpcihlLCAicGFyZW50Tm9kZSIpCgkJCQl9LAoJCQkJcGFyZW50c1VudGlsOiBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJcmV0dXJuIGxlLmRpcihlLCAicGFyZW50Tm9kZSIsIG4pCgkJCQl9LAoJCQkJbmV4dDogZnVuY3Rpb24oZSkgewoJCQkJCXJldHVybiBsKGUsICJuZXh0U2libGluZyIpCgkJCQl9LAoJCQkJcHJldjogZnVuY3Rpb24oZSkgewoJCQkJCXJldHVybiBsKGUsICJwcmV2aW91c1NpYmxpbmciKQoJCQkJfSwKCQkJCW5leHRBbGw6IGZ1bmN0aW9uKGUpIHsKCQkJCQlyZXR1cm4gbGUuZGlyKGUsICJuZXh0U2libGluZyIpCgkJCQl9LAoJCQkJcHJldkFsbDogZnVuY3Rpb24oZSkgewoJCQkJCXJldHVybiBsZS5kaXIoZSwgInByZXZpb3VzU2libGluZyIpCgkJCQl9LAoJCQkJbmV4dFVudGlsOiBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJcmV0dXJuIGxlLmRpcihlLCAibmV4dFNpYmxpbmciLCBuKQoJCQkJfSwKCQkJCXByZXZVbnRpbDogZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCXJldHVybiBsZS5kaXIoZSwgInByZXZpb3VzU2libGluZyIsIG4pCgkJCQl9LAoJCQkJc2libGluZ3M6IGZ1bmN0aW9uKGUpIHsKCQkJCQlyZXR1cm4gbGUuc2libGluZygoZS5wYXJlbnROb2RlIHx8IHt9KS5maXJzdENoaWxkLCBlKQoJCQkJfSwKCQkJCWNoaWxkcmVuOiBmdW5jdGlvbihlKSB7CgkJCQkJcmV0dXJuIGxlLnNpYmxpbmcoZS5maXJzdENoaWxkKQoJCQkJfSwKCQkJCWNvbnRlbnRzOiBmdW5jdGlvbihlKSB7CgkJCQkJcmV0dXJuIGxlLm5vZGVOYW1lKGUsICJpZnJhbWUiKSA/IGUuY29udGVudERvY3VtZW50IHx8IGUuY29udGVudFdpbmRvdy5kb2N1bWVudCA6IGxlLm1lcmdlKFtdLCBlLmNoaWxkTm9kZXMpCgkJCQl9CgkJCX0sIGZ1bmN0aW9uKGUsIHQpIHsKCQkJCWxlLmZuW2VdID0gZnVuY3Rpb24obiwgaSkgewoJCQkJCXZhciBhID0gbGUubWFwKHRoaXMsIHQsIG4pOwoJCQkJCXJldHVybiAiVW50aWwiICE9PSBlLnNsaWNlKC01KSAmJiAoaSA9IG4pLCBpICYmICJzdHJpbmciID09IHR5cGVvZiBpICYmIChhID0gbGUuZmlsdGVyKGksIGEpKSwgdGhpcy5sZW5ndGggPiAxICYmICh5ZVtlXSB8fCAoYSA9IGxlLnVuaXF1ZShhKSksIGJlLnRlc3QoZSkgJiYgKGEgPSBhLnJldmVyc2UoKSkpLCB0aGlzLnB1c2hTdGFjayhhKQoJCQkJfQoJCQl9KTsKCQkJdmFyIGtlID0gL1xTKy9nLAoJCQkJemUgPSB7fTsKCQkJbGUuQ2FsbGJhY2tzID0gZnVuY3Rpb24oZSkgewoJCQkJZSA9ICJzdHJpbmciID09IHR5cGVvZiBlID8gemVbZV0gfHwgYyhlKSA6IGxlLmV4dGVuZCh7fSwgZSk7CgkJCQl2YXIgdCwgbiwgaSwgYSwgbywgciwgcyA9IFtdLAoJCQkJCWwgPSAhZS5vbmNlICYmIFtdLAoJCQkJCWQgPSBmdW5jdGlvbihjKSB7CgkJCQkJCWZvciAobiA9IGUubWVtb3J5ICYmIGMsIGkgPSAhMCwgbyA9IHIgfHwgMCwgciA9IDAsIGEgPSBzLmxlbmd0aCwgdCA9ICEwOyBzICYmIGEgPiBvOyBvKyspCgkJCQkJCQlpZiAoc1tvXS5hcHBseShjWzBdLCBjWzFdKSA9PT0gITEgJiYgZS5zdG9wT25GYWxzZSkgewoJCQkJCQkJCW4gPSAhMTsKCQkJCQkJCQlicmVhawoJCQkJCQkJfQoJCQkJCQl0ID0gITEsIHMgJiYgKGwgPyBsLmxlbmd0aCAmJiBkKGwuc2hpZnQoKSkgOiBuID8gcyA9IFtdIDogcC5kaXNhYmxlKCkpCgkJCQkJfSwKCQkJCQlwID0gewoJCQkJCQlhZGQ6IGZ1bmN0aW9uKCkgewoJCQkJCQkJaWYgKHMpIHsKCQkJCQkJCQl2YXIgaSA9IHMubGVuZ3RoOwoJCQkJCQkJCSEgZnVuY3Rpb24gbyh0KSB7CgkJCQkJCQkJCWxlLmVhY2godCwgZnVuY3Rpb24odCwgbikgewoJCQkJCQkJCQkJdmFyIGkgPSBsZS50eXBlKG4pOwoJCQkJCQkJCQkJImZ1bmN0aW9uIiA9PT0gaSA/IGUudW5pcXVlICYmIHAuaGFzKG4pIHx8IHMucHVzaChuKSA6IG4gJiYgbi5sZW5ndGggJiYgInN0cmluZyIgIT09IGkgJiYgbyhuKQoJCQkJCQkJCQl9KQoJCQkJCQkJCX0oYXJndW1lbnRzKSwgdCA/IGEgPSBzLmxlbmd0aCA6IG4gJiYgKHIgPSBpLCBkKG4pKQoJCQkJCQkJfQoJCQkJCQkJcmV0dXJuIHRoaXMKCQkJCQkJfSwKCQkJCQkJcmVtb3ZlOiBmdW5jdGlvbigpIHsKCQkJCQkJCXJldHVybiBzICYmIGxlLmVhY2goYXJndW1lbnRzLCBmdW5jdGlvbihlLCBuKSB7CgkJCQkJCQkJZm9yICh2YXIgaTsKCQkJCQkJCQkJKGkgPSBsZS5pbkFycmF5KG4sIHMsIGkpKSA+IC0xOykgcy5zcGxpY2UoaSwgMSksIHQgJiYgKGEgPj0gaSAmJiBhLS0sIG8gPj0gaSAmJiBvLS0pCgkJCQkJCQl9KSwgdGhpcwoJCQkJCQl9LAoJCQkJCQloYXM6IGZ1bmN0aW9uKGUpIHsKCQkJCQkJCXJldHVybiBlID8gbGUuaW5BcnJheShlLCBzKSA+IC0xIDogISghcyB8fCAhcy5sZW5ndGgpCgkJCQkJCX0sCgkJCQkJCWVtcHR5OiBmdW5jdGlvbigpIHsKCQkJCQkJCXJldHVybiBzID0gW10sIGEgPSAwLCB0aGlzCgkJCQkJCX0sCgkJCQkJCWRpc2FibGU6IGZ1bmN0aW9uKCkgewoJCQkJCQkJcmV0dXJuIHMgPSBsID0gbiA9IHZvaWQgMCwgdGhpcwoJCQkJCQl9LAoJCQkJCQlkaXNhYmxlZDogZnVuY3Rpb24oKSB7CgkJCQkJCQlyZXR1cm4gIXMKCQkJCQkJfSwKCQkJCQkJbG9jazogZnVuY3Rpb24oKSB7CgkJCQkJCQlyZXR1cm4gbCA9IHZvaWQgMCwgbiB8fCBwLmRpc2FibGUoKSwgdGhpcwoJCQkJCQl9LAoJCQkJCQlsb2NrZWQ6IGZ1bmN0aW9uKCkgewoJCQkJCQkJcmV0dXJuICFsCgkJCQkJCX0sCgkJCQkJCWZpcmVXaXRoOiBmdW5jdGlvbihlLCBuKSB7CgkJCQkJCQlyZXR1cm4gIXMgfHwgaSAmJiAhbCB8fCAobiA9IG4gfHwgW10sIG4gPSBbZSwgbi5zbGljZSA/IG4uc2xpY2UoKSA6IG5dLCB0ID8gbC5wdXNoKG4pIDogZChuKSksIHRoaXMKCQkJCQkJfSwKCQkJCQkJZmlyZTogZnVuY3Rpb24oKSB7CgkJCQkJCQlyZXR1cm4gcC5maXJlV2l0aCh0aGlzLCBhcmd1bWVudHMpLCB0aGlzCgkJCQkJCX0sCgkJCQkJCWZpcmVkOiBmdW5jdGlvbigpIHsKCQkJCQkJCXJldHVybiAhIWkKCQkJCQkJfQoJCQkJCX07CgkJCQlyZXR1cm4gcAoJCQl9LCBsZS5leHRlbmQoewoJCQkJRGVmZXJyZWQ6IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCA9IFsKCQkJCQkJCVsicmVzb2x2ZSIsICJkb25lIiwgbGUuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLCAicmVzb2x2ZWQiXSwKCQkJCQkJCVsicmVqZWN0IiwgImZhaWwiLCBsZS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksICJyZWplY3RlZCJdLAoJCQkJCQkJWyJub3RpZnkiLCAicHJvZ3Jlc3MiLCBsZS5DYWxsYmFja3MoIm1lbW9yeSIpXQoJCQkJCQldLAoJCQkJCQluID0gInBlbmRpbmciLAoJCQkJCQlpID0gewoJCQkJCQkJc3RhdGU6IGZ1bmN0aW9uKCkgewoJCQkJCQkJCXJldHVybiBuCgkJCQkJCQl9LAoJCQkJCQkJYWx3YXlzOiBmdW5jdGlvbigpIHsKCQkJCQkJCQlyZXR1cm4gYS5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLCB0aGlzCgkJCQkJCQl9LAoJCQkJCQkJdGhlbjogZnVuY3Rpb24oKSB7CgkJCQkJCQkJdmFyIGUgPSBhcmd1bWVudHM7CgkJCQkJCQkJcmV0dXJuIGxlLkRlZmVycmVkKGZ1bmN0aW9uKG4pIHsKCQkJCQkJCQkJbGUuZWFjaCh0LCBmdW5jdGlvbih0LCBvKSB7CgkJCQkJCQkJCQl2YXIgciA9IGxlLmlzRnVuY3Rpb24oZVt0XSkgJiYgZVt0XTsKCQkJCQkJCQkJCWFbb1sxXV0oZnVuY3Rpb24oKSB7CgkJCQkJCQkJCQkJdmFyIGUgPSByICYmIHIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKCQkJCQkJCQkJCQllICYmIGxlLmlzRnVuY3Rpb24oZS5wcm9taXNlKSA/IGUucHJvbWlzZSgpLmRvbmUobi5yZXNvbHZlKS5mYWlsKG4ucmVqZWN0KS5wcm9ncmVzcyhuLm5vdGlmeSkgOiBuW29bMF0gKyAiV2l0aCJdKHRoaXMgPT09IGkgPyBuLnByb21pc2UoKSA6IHRoaXMsIHIgPyBbZV0gOiBhcmd1bWVudHMpCgkJCQkJCQkJCQl9KQoJCQkJCQkJCQl9KSwgZSA9IG51bGwKCQkJCQkJCQl9KS5wcm9taXNlKCkKCQkJCQkJCX0sCgkJCQkJCQlwcm9taXNlOiBmdW5jdGlvbihlKSB7CgkJCQkJCQkJcmV0dXJuIG51bGwgIT0gZSA/IGxlLmV4dGVuZChlLCBpKSA6IGkKCQkJCQkJCX0KCQkJCQkJfSwKCQkJCQkJYSA9IHt9OwoJCQkJCXJldHVybiBpLnBpcGUgPSBpLnRoZW4sIGxlLmVhY2godCwgZnVuY3Rpb24oZSwgbykgewoJCQkJCQl2YXIgciA9IG9bMl0sCgkJCQkJCQlzID0gb1szXTsKCQkJCQkJaVtvWzFdXSA9IHIuYWRkLCBzICYmIHIuYWRkKGZ1bmN0aW9uKCkgewoJCQkJCQkJbiA9IHMKCQkJCQkJfSwgdFsxIF4gZV1bMl0uZGlzYWJsZSwgdFsyXVsyXS5sb2NrKSwgYVtvWzBdXSA9IGZ1bmN0aW9uKCkgewoJCQkJCQkJcmV0dXJuIGFbb1swXSArICJXaXRoIl0odGhpcyA9PT0gYSA/IGkgOiB0aGlzLCBhcmd1bWVudHMpLCB0aGlzCgkJCQkJCX0sIGFbb1swXSArICJXaXRoIl0gPSByLmZpcmVXaXRoCgkJCQkJfSksIGkucHJvbWlzZShhKSwgZSAmJiBlLmNhbGwoYSwgYSksIGEKCQkJCX0sCgkJCQl3aGVuOiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQsIG4sIGksIGEgPSAwLAoJCQkJCQlvID0gUS5jYWxsKGFyZ3VtZW50cyksCgkJCQkJCXIgPSBvLmxlbmd0aCwKCQkJCQkJcyA9IDEgIT09IHIgfHwgZSAmJiBsZS5pc0Z1bmN0aW9uKGUucHJvbWlzZSkgPyByIDogMCwKCQkJCQkJbCA9IDEgPT09IHMgPyBlIDogbGUuRGVmZXJyZWQoKSwKCQkJCQkJYyA9IGZ1bmN0aW9uKGUsIG4sIGkpIHsKCQkJCQkJCXJldHVybiBmdW5jdGlvbihhKSB7CgkJCQkJCQkJbltlXSA9IHRoaXMsIGlbZV0gPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IFEuY2FsbChhcmd1bWVudHMpIDogYSwgaSA9PT0gdCA/IGwubm90aWZ5V2l0aChuLCBpKSA6IC0tcyB8fCBsLnJlc29sdmVXaXRoKG4sIGkpCgkJCQkJCQl9CgkJCQkJCX07CgkJCQkJaWYgKHIgPiAxKQoJCQkJCQlmb3IgKHQgPSBuZXcgQXJyYXkociksIG4gPSBuZXcgQXJyYXkociksIGkgPSBuZXcgQXJyYXkocik7IHIgPiBhOyBhKyspIG9bYV0gJiYgbGUuaXNGdW5jdGlvbihvW2FdLnByb21pc2UpID8gb1thXS5wcm9taXNlKCkuZG9uZShjKGEsIGksIG8pKS5mYWlsKGwucmVqZWN0KS5wcm9ncmVzcyhjKGEsIG4sIHQpKSA6IC0tczsKCQkJCQlyZXR1cm4gcyB8fCBsLnJlc29sdmVXaXRoKGksIG8pLCBsLnByb21pc2UoKQoJCQkJfQoJCQl9KTsKCQkJdmFyIEJlOwoJCQlsZS5mbi5yZWFkeSA9IGZ1bmN0aW9uKGUpIHsKCQkJCXJldHVybiBsZS5yZWFkeS5wcm9taXNlKCkuZG9uZShlKSwgdGhpcwoJCQl9LCBsZS5leHRlbmQoewoJCQkJaXNSZWFkeTogITEsCgkJCQlyZWFkeVdhaXQ6IDEsCgkJCQlob2xkUmVhZHk6IGZ1bmN0aW9uKGUpIHsKCQkJCQllID8gbGUucmVhZHlXYWl0KysgOiBsZS5yZWFkeSghMCkKCQkJCX0sCgkJCQlyZWFkeTogZnVuY3Rpb24oZSkgewoJCQkJCWlmIChlID09PSAhMCA/ICEtLWxlLnJlYWR5V2FpdCA6ICFsZS5pc1JlYWR5KSB7CgkJCQkJCWlmICgheGUuYm9keSkgcmV0dXJuIHNldFRpbWVvdXQobGUucmVhZHkpOwoJCQkJCQlsZS5pc1JlYWR5ID0gITAsIGUgIT09ICEwICYmIC0tbGUucmVhZHlXYWl0ID4gMCB8fCAoQmUucmVzb2x2ZVdpdGgoeGUsIFtsZV0pLCBsZS5mbi50cmlnZ2VySGFuZGxlciAmJiAobGUoeGUpLnRyaWdnZXJIYW5kbGVyKCJyZWFkeSIpLCBsZSh4ZSkub2ZmKCJyZWFkeSIpKSkKCQkJCQl9CgkJCQl9CgkJCX0pLCBsZS5yZWFkeS5wcm9taXNlID0gZnVuY3Rpb24oZSkgewoJCQkJaWYgKCFCZSkKCQkJCQlpZiAoQmUgPSBsZS5EZWZlcnJlZCgpLCAiY29tcGxldGUiID09PSB4ZS5yZWFkeVN0YXRlKSBzZXRUaW1lb3V0KGxlLnJlYWR5KTsKCQkJCQllbHNlIGlmICh4ZS5hZGRFdmVudExpc3RlbmVyKSB4ZS5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIiwgcCwgITEpLCBhLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLCBwLCAhMSk7CgkJCQllbHNlIHsKCQkJCQl4ZS5hdHRhY2hFdmVudCgib25yZWFkeXN0YXRlY2hhbmdlIiwgcCksIGEuYXR0YWNoRXZlbnQoIm9ubG9hZCIsIHApOwoJCQkJCXZhciB0ID0gITE7CgkJCQkJdHJ5IHsKCQkJCQkJdCA9IG51bGwgPT0gYS5mcmFtZUVsZW1lbnQgJiYgeGUuZG9jdW1lbnRFbGVtZW50CgkJCQkJfSBjYXRjaCAobikge30KCQkJCQl0ICYmIHQuZG9TY3JvbGwgJiYgISBmdW5jdGlvbiBpKCkgewoJCQkJCQlpZiAoIWxlLmlzUmVhZHkpIHsKCQkJCQkJCXRyeSB7CgkJCQkJCQkJdC5kb1Njcm9sbCgibGVmdCIpCgkJCQkJCQl9IGNhdGNoIChlKSB7CgkJCQkJCQkJcmV0dXJuIHNldFRpbWVvdXQoaSwgNTApCgkJCQkJCQl9CgkJCQkJCQlkKCksIGxlLnJlYWR5KCkKCQkJCQkJfQoJCQkJCX0oKQoJCQkJfQoJCQkJcmV0dXJuIEJlLnByb21pc2UoZSkKCQkJfTsKCQkJdmFyIGplLCBDZSA9ICJ1bmRlZmluZWQiOwoJCQlmb3IgKGplIGluIGxlKHJlKSkgYnJlYWs7CgkJCXJlLm93bkxhc3QgPSAiMCIgIT09IGplLCByZS5pbmxpbmVCbG9ja05lZWRzTGF5b3V0ID0gITEsIGxlKGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlLCB0LCBuLCBpOwoJCQkJCW4gPSB4ZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdLCBuICYmIG4uc3R5bGUgJiYgKHQgPSB4ZS5jcmVhdGVFbGVtZW50KCJkaXYiKSwgaSA9IHhlLmNyZWF0ZUVsZW1lbnQoImRpdiIpLCBpLnN0eWxlLmNzc1RleHQgPSAicG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHgiLCBuLmFwcGVuZENoaWxkKGkpLmFwcGVuZENoaWxkKHQpLCB0eXBlb2YgdC5zdHlsZS56b29tICE9PSBDZSAmJiAodC5zdHlsZS5jc3NUZXh0ID0gImRpc3BsYXk6aW5saW5lO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MXB4O3dpZHRoOjFweDt6b29tOjEiLCByZS5pbmxpbmVCbG9ja05lZWRzTGF5b3V0ID0gZSA9IDMgPT09IHQub2Zmc2V0V2lkdGgsIGUgJiYgKG4uc3R5bGUuem9vbSA9IDEpKSwgbi5yZW1vdmVDaGlsZChpKSkKCQkJCX0pLAoJCQkJZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSB4ZS5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCQlpZiAobnVsbCA9PSByZS5kZWxldGVFeHBhbmRvKSB7CgkJCQkJCXJlLmRlbGV0ZUV4cGFuZG8gPSAhMDsKCQkJCQkJdHJ5IHsKCQkJCQkJCWRlbGV0ZSBlLnRlc3QKCQkJCQkJfSBjYXRjaCAodCkgewoJCQkJCQkJcmUuZGVsZXRlRXhwYW5kbyA9ICExCgkJCQkJCX0KCQkJCQl9CgkJCQkJZSA9IG51bGwKCQkJCX0oKSwgbGUuYWNjZXB0RGF0YSA9IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCA9IGxlLm5vRGF0YVsoZS5ub2RlTmFtZSArICIgIikudG9Mb3dlckNhc2UoKV0sCgkJCQkJCW4gPSArZS5ub2RlVHlwZSB8fCAxOwoJCQkJCXJldHVybiAxICE9PSBuICYmIDkgIT09IG4gPyAhMSA6ICF0IHx8IHQgIT09ICEwICYmIGUuZ2V0QXR0cmlidXRlKCJjbGFzc2lkIikgPT09IHQKCQkJCX07CgkJCXZhciBTZSA9IC9eKD86XHtbXHdcV10qXH18XFtbXHdcV10qXF0pJC8sCgkJCQlOZSA9IC8oW0EtWl0pL2c7CgkJCWxlLmV4dGVuZCh7CgkJCQljYWNoZToge30sCgkJCQlub0RhdGE6IHsKCQkJCQkiYXBwbGV0ICI6ICEwLAoJCQkJCSJlbWJlZCAiOiAhMCwKCQkJCQkib2JqZWN0ICI6ICJjbHNpZDpEMjdDREI2RS1BRTZELTExY2YtOTZCOC00NDQ1NTM1NDAwMDAiCgkJCQl9LAoJCQkJaGFzRGF0YTogZnVuY3Rpb24oZSkgewoJCQkJCXJldHVybiBlID0gZS5ub2RlVHlwZSA/IGxlLmNhY2hlW2VbbGUuZXhwYW5kb11dIDogZVtsZS5leHBhbmRvXSwgISFlICYmICF1KGUpCgkJCQl9LAoJCQkJZGF0YTogZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCXJldHVybiBtKGUsIHQsIG4pCgkJCQl9LAoJCQkJcmVtb3ZlRGF0YTogZnVuY3Rpb24oZSwgdCkgewoJCQkJCXJldHVybiBmKGUsIHQpCgkJCQl9LAoJCQkJX2RhdGE6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQlyZXR1cm4gbShlLCB0LCBuLCAhMCkKCQkJCX0sCgkJCQlfcmVtb3ZlRGF0YTogZnVuY3Rpb24oZSwgdCkgewoJCQkJCXJldHVybiBmKGUsIHQsICEwKQoJCQkJfQoJCQl9KSwgbGUuZm4uZXh0ZW5kKHsKCQkJCWRhdGE6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQl2YXIgbiwgaSwgYSwgbyA9IHRoaXNbMF0sCgkJCQkJCXIgPSBvICYmIG8uYXR0cmlidXRlczsKCQkJCQlpZiAodm9pZCAwID09PSBlKSB7CgkJCQkJCWlmICh0aGlzLmxlbmd0aCAmJiAoYSA9IGxlLmRhdGEobyksIDEgPT09IG8ubm9kZVR5cGUgJiYgIWxlLl9kYXRhKG8sICJwYXJzZWRBdHRycyIpKSkgewoJCQkJCQkJZm9yIChuID0gci5sZW5ndGg7IG4tLTspIHJbbl0gJiYgKGkgPSByW25dLm5hbWUsIDAgPT09IGkuaW5kZXhPZigiZGF0YS0iKSAmJiAoaSA9IGxlLmNhbWVsQ2FzZShpLnNsaWNlKDUpKSwgaChvLCBpLCBhW2ldKSkpOwoJCQkJCQkJbGUuX2RhdGEobywgInBhcnNlZEF0dHJzIiwgITApCgkJCQkJCX0KCQkJCQkJcmV0dXJuIGEKCQkJCQl9CgkJCQkJcmV0dXJuICJvYmplY3QiID09IHR5cGVvZiBlID8gdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJCQlsZS5kYXRhKHRoaXMsIGUpCgkJCQkJfSkgOiBhcmd1bWVudHMubGVuZ3RoID4gMSA/IHRoaXMuZWFjaChmdW5jdGlvbigpIHsKCQkJCQkJbGUuZGF0YSh0aGlzLCBlLCB0KQoJCQkJCX0pIDogbyA/IGgobywgZSwgbGUuZGF0YShvLCBlKSkgOiB2b2lkIDAKCQkJCX0sCgkJCQlyZW1vdmVEYXRhOiBmdW5jdGlvbihlKSB7CgkJCQkJcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHsKCQkJCQkJbGUucmVtb3ZlRGF0YSh0aGlzLCBlKQoJCQkJCX0pCgkJCQl9CgkJCX0pLCBsZS5leHRlbmQoewoJCQkJcXVldWU6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQl2YXIgaTsKCQkJCQlyZXR1cm4gZSA/ICh0ID0gKHQgfHwgImZ4IikgKyAicXVldWUiLCBpID0gbGUuX2RhdGEoZSwgdCksIG4gJiYgKCFpIHx8IGxlLmlzQXJyYXkobikgPyBpID0gbGUuX2RhdGEoZSwgdCwgbGUubWFrZUFycmF5KG4pKSA6IGkucHVzaChuKSksIGkgfHwgW10pIDogdm9pZCAwCgkJCQl9LAoJCQkJZGVxdWV1ZTogZnVuY3Rpb24oZSwgdCkgewoJCQkJCXQgPSB0IHx8ICJmeCI7CgkJCQkJdmFyIG4gPSBsZS5xdWV1ZShlLCB0KSwKCQkJCQkJaSA9IG4ubGVuZ3RoLAoJCQkJCQlhID0gbi5zaGlmdCgpLAoJCQkJCQlvID0gbGUuX3F1ZXVlSG9va3MoZSwgdCksCgkJCQkJCXIgPSBmdW5jdGlvbigpIHsKCQkJCQkJCWxlLmRlcXVldWUoZSwgdCkKCQkJCQkJfTsKCQkJCQkiaW5wcm9ncmVzcyIgPT09IGEgJiYgKGEgPSBuLnNoaWZ0KCksIGktLSksIGEgJiYgKCJmeCIgPT09IHQgJiYgbi51bnNoaWZ0KCJpbnByb2dyZXNzIiksIGRlbGV0ZSBvLnN0b3AsIGEuY2FsbChlLCByLCBvKSksICFpICYmIG8gJiYgby5lbXB0eS5maXJlKCkKCQkJCX0sCgkJCQlfcXVldWVIb29rczogZnVuY3Rpb24oZSwgdCkgewoJCQkJCXZhciBuID0gdCArICJxdWV1ZUhvb2tzIjsKCQkJCQlyZXR1cm4gbGUuX2RhdGEoZSwgbikgfHwgbGUuX2RhdGEoZSwgbiwgewoJCQkJCQllbXB0eTogbGUuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLmFkZChmdW5jdGlvbigpIHsKCQkJCQkJCWxlLl9yZW1vdmVEYXRhKGUsIHQgKyAicXVldWUiKSwgbGUuX3JlbW92ZURhdGEoZSwgbikKCQkJCQkJfSkKCQkJCQl9KQoJCQkJfQoJCQl9KSwgbGUuZm4uZXh0ZW5kKHsKCQkJCXF1ZXVlOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJdmFyIG4gPSAyOwoJCQkJCXJldHVybiAic3RyaW5nIiAhPSB0eXBlb2YgZSAmJiAodCA9IGUsIGUgPSAiZngiLCBuLS0pLCBhcmd1bWVudHMubGVuZ3RoIDwgbiA/IGxlLnF1ZXVlKHRoaXNbMF0sIGUpIDogdm9pZCAwID09PSB0ID8gdGhpcyA6IHRoaXMuZWFjaChmdW5jdGlvbigpIHsKCQkJCQkJdmFyIG4gPSBsZS5xdWV1ZSh0aGlzLCBlLCB0KTsKCQkJCQkJbGUuX3F1ZXVlSG9va3ModGhpcywgZSksICJmeCIgPT09IGUgJiYgImlucHJvZ3Jlc3MiICE9PSBuWzBdICYmIGxlLmRlcXVldWUodGhpcywgZSkKCQkJCQl9KQoJCQkJfSwKCQkJCWRlcXVldWU6IGZ1bmN0aW9uKGUpIHsKCQkJCQlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJCQlsZS5kZXF1ZXVlKHRoaXMsIGUpCgkJCQkJfSkKCQkJCX0sCgkJCQljbGVhclF1ZXVlOiBmdW5jdGlvbihlKSB7CgkJCQkJcmV0dXJuIHRoaXMucXVldWUoZSB8fCAiZngiLCBbXSkKCQkJCX0sCgkJCQlwcm9taXNlOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJdmFyIG4sIGkgPSAxLAoJCQkJCQlhID0gbGUuRGVmZXJyZWQoKSwKCQkJCQkJbyA9IHRoaXMsCgkJCQkJCXIgPSB0aGlzLmxlbmd0aCwKCQkJCQkJcyA9IGZ1bmN0aW9uKCkgewoJCQkJCQkJLS1pIHx8IGEucmVzb2x2ZVdpdGgobywgW29dKQoJCQkJCQl9OwoJCQkJCWZvciAoInN0cmluZyIgIT0gdHlwZW9mIGUgJiYgKHQgPSBlLCBlID0gdm9pZCAwKSwgZSA9IGUgfHwgImZ4Ijsgci0tOykgbiA9IGxlLl9kYXRhKG9bcl0sIGUgKyAicXVldWVIb29rcyIpLCBuICYmIG4uZW1wdHkgJiYgKGkrKywgbi5lbXB0eS5hZGQocykpOwoJCQkJCXJldHVybiBzKCksIGEucHJvbWlzZSh0KQoJCQkJfQoJCQl9KTsKCQkJdmFyIFRlID0gL1srLV0/KD86XGQqXC58KVxkKyg/OltlRV1bKy1dP1xkK3wpLy5zb3VyY2UsCgkJCQlQZSA9IFsiVG9wIiwgIlJpZ2h0IiwgIkJvdHRvbSIsICJMZWZ0Il0sCgkJCQlJZSA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQlyZXR1cm4gZSA9IHQgfHwgZSwgIm5vbmUiID09PSBsZS5jc3MoZSwgImRpc3BsYXkiKSB8fCAhbGUuY29udGFpbnMoZS5vd25lckRvY3VtZW50LCBlKQoJCQkJfSwKCQkJCUFlID0gbGUuYWNjZXNzID0gZnVuY3Rpb24oZSwgdCwgbiwgaSwgYSwgbywgcikgewoJCQkJCXZhciBzID0gMCwKCQkJCQkJbCA9IGUubGVuZ3RoLAoJCQkJCQljID0gbnVsbCA9PSBuOwoJCQkJCWlmICgib2JqZWN0IiA9PT0gbGUudHlwZShuKSkgewoJCQkJCQlhID0gITA7CgkJCQkJCWZvciAocyBpbiBuKSBsZS5hY2Nlc3MoZSwgdCwgcywgbltzXSwgITAsIG8sIHIpCgkJCQkJfSBlbHNlIGlmICh2b2lkIDAgIT09IGkgJiYgKGEgPSAhMCwgbGUuaXNGdW5jdGlvbihpKSB8fCAociA9ICEwKSwgYyAmJiAociA/ICh0LmNhbGwoZSwgaSksIHQgPSBudWxsKSA6IChjID0gdCwgdCA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQkJcmV0dXJuIGMuY2FsbChsZShlKSwgbikKCQkJCQl9KSksIHQpKQoJCQkJCQlmb3IgKDsgbCA+IHM7IHMrKykgdChlW3NdLCBuLCByID8gaSA6IGkuY2FsbChlW3NdLCBzLCB0KGVbc10sIG4pKSk7CgkJCQkJcmV0dXJuIGEgPyBlIDogYyA/IHQuY2FsbChlKSA6IGwgPyB0KGVbMF0sIG4pIDogbwoJCQkJfSwKCQkJCXFlID0gL14oPzpjaGVja2JveHxyYWRpbykkL2k7CgkJCSEgZnVuY3Rpb24oKSB7CgkJCQl2YXIgZSA9IHhlLmNyZWF0ZUVsZW1lbnQoImlucHV0IiksCgkJCQkJdCA9IHhlLmNyZWF0ZUVsZW1lbnQoImRpdiIpLAoJCQkJCW4gPSB4ZS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7CgkJCQlpZiAodC5pbm5lckhUTUwgPSAiICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+IiwgcmUubGVhZGluZ1doaXRlc3BhY2UgPSAzID09PSB0LmZpcnN0Q2hpbGQubm9kZVR5cGUsIHJlLnRib2R5ID0gIXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRib2R5IikubGVuZ3RoLCByZS5odG1sU2VyaWFsaXplID0gISF0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJsaW5rIikubGVuZ3RoLCByZS5odG1sNUNsb25lID0gIjw6bmF2PjwvOm5hdj4iICE9PSB4ZS5jcmVhdGVFbGVtZW50KCJuYXYiKS5jbG9uZU5vZGUoITApLm91dGVySFRNTCwgZS50eXBlID0gImNoZWNrYm94IiwgZS5jaGVja2VkID0gITAsIG4uYXBwZW5kQ2hpbGQoZSksIHJlLmFwcGVuZENoZWNrZWQgPSBlLmNoZWNrZWQsIHQuaW5uZXJIVE1MID0gIjx0ZXh0YXJlYT54PC90ZXh0YXJlYT4iLCByZS5ub0Nsb25lQ2hlY2tlZCA9ICEhdC5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWUsIG4uYXBwZW5kQ2hpbGQodCksIHQuaW5uZXJIVE1MID0gIjxpbnB1dCB0eXBlPSdyYWRpbycgY2hlY2tlZD0nY2hlY2tlZCcgbmFtZT0ndCcvPiIsIHJlLmNoZWNrQ2xvbmUgPSB0LmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCwgcmUubm9DbG9uZUV2ZW50ID0gITAsIHQuYXR0YWNoRXZlbnQgJiYgKHQuYXR0YWNoRXZlbnQoIm9uY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQlyZS5ub0Nsb25lRXZlbnQgPSAhMQoJCQkJfSksIHQuY2xvbmVOb2RlKCEwKS5jbGljaygpKSwgbnVsbCA9PSByZS5kZWxldGVFeHBhbmRvKSB7CgkJCQkJcmUuZGVsZXRlRXhwYW5kbyA9ICEwOwoJCQkJCXRyeSB7CgkJCQkJCWRlbGV0ZSB0LnRlc3QKCQkJCQl9IGNhdGNoIChpKSB7CgkJCQkJCXJlLmRlbGV0ZUV4cGFuZG8gPSAhMQoJCQkJCX0KCQkJCX0KCQkJfSgpLAoJCQlmdW5jdGlvbigpIHsKCQkJCXZhciBlLCB0LCBuID0geGUuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQlmb3IgKGUgaW4gewoJCQkJCXN1Ym1pdDogITAsCgkJCQkJY2hhbmdlOiAhMCwKCQkJCQlmb2N1c2luOiAhMAoJCQkJfSkgdCA9ICJvbiIgKyBlLCAocmVbZSArICJCdWJibGVzIl0gPSB0IGluIGEpIHx8IChuLnNldEF0dHJpYnV0ZSh0LCAidCIpLCByZVtlICsgIkJ1YmJsZXMiXSA9IG4uYXR0cmlidXRlc1t0XS5leHBhbmRvID09PSAhMSk7CgkJCQluID0gbnVsbAoJCQl9KCk7CgkJCXZhciBFZSA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhKSQvaSwKCQkJCU9lID0gL15rZXkvLAoJCQkJTGUgPSAvXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnUpfGNsaWNrLywKCQkJCURlID0gL14oPzpmb2N1c2luZm9jdXN8Zm9jdXNvdXRibHVyKSQvLAoJCQkJTWUgPSAvXihbXi5dKikoPzpcLiguKyl8KSQvOwoJCQlsZS5ldmVudCA9IHsKCQkJCWdsb2JhbDoge30sCgkJCQlhZGQ6IGZ1bmN0aW9uKGUsIHQsIG4sIGksIGEpIHsKCQkJCQl2YXIgbywgciwgcywgbCwgYywgZCwgcCwgaCwgdSwgbSwgZiwgZyA9IGxlLl9kYXRhKGUpOwoJCQkJCWlmIChnKSB7CgkJCQkJCWZvciAobi5oYW5kbGVyICYmIChsID0gbiwgbiA9IGwuaGFuZGxlciwgYSA9IGwuc2VsZWN0b3IpLCBuLmd1aWQgfHwgKG4uZ3VpZCA9IGxlLmd1aWQrKyksIChyID0gZy5ldmVudHMpIHx8IChyID0gZy5ldmVudHMgPSB7fSksIChkID0gZy5oYW5kbGUpIHx8IChkID0gZy5oYW5kbGUgPSBmdW5jdGlvbihlKSB7CgkJCQkJCQlyZXR1cm4gdHlwZW9mIGxlID09PSBDZSB8fCBlICYmIGxlLmV2ZW50LnRyaWdnZXJlZCA9PT0gZS50eXBlID8gdm9pZCAwIDogbGUuZXZlbnQuZGlzcGF0Y2guYXBwbHkoZC5lbGVtLCBhcmd1bWVudHMpCgkJCQkJCX0sIGQuZWxlbSA9IGUpLCB0ID0gKHQgfHwgIiIpLm1hdGNoKGtlKSB8fCBbIiJdLCBzID0gdC5sZW5ndGg7IHMtLTspIG8gPSBNZS5leGVjKHRbc10pIHx8IFtdLCB1ID0gZiA9IG9bMV0sIG0gPSAob1syXSB8fCAiIikuc3BsaXQoIi4iKS5zb3J0KCksIHUgJiYgKGMgPSBsZS5ldmVudC5zcGVjaWFsW3VdIHx8IHt9LCB1ID0gKGEgPyBjLmRlbGVnYXRlVHlwZSA6IGMuYmluZFR5cGUpIHx8IHUsIGMgPSBsZS5ldmVudC5zcGVjaWFsW3VdIHx8IHt9LCBwID0gbGUuZXh0ZW5kKHsKCQkJCQkJCXR5cGU6IHUsCgkJCQkJCQlvcmlnVHlwZTogZiwKCQkJCQkJCWRhdGE6IGksCgkJCQkJCQloYW5kbGVyOiBuLAoJCQkJCQkJZ3VpZDogbi5ndWlkLAoJCQkJCQkJc2VsZWN0b3I6IGEsCgkJCQkJCQluZWVkc0NvbnRleHQ6IGEgJiYgbGUuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChhKSwKCQkJCQkJCW5hbWVzcGFjZTogbS5qb2luKCIuIikKCQkJCQkJfSwgbCksIChoID0gclt1XSkgfHwgKGggPSByW3VdID0gW10sIGguZGVsZWdhdGVDb3VudCA9IDAsIGMuc2V0dXAgJiYgYy5zZXR1cC5jYWxsKGUsIGksIG0sIGQpICE9PSAhMSB8fCAoZS5hZGRFdmVudExpc3RlbmVyID8gZS5hZGRFdmVudExpc3RlbmVyKHUsIGQsICExKSA6IGUuYXR0YWNoRXZlbnQgJiYgZS5hdHRhY2hFdmVudCgib24iICsgdSwgZCkpKSwgYy5hZGQgJiYgKGMuYWRkLmNhbGwoZSwgcCksIHAuaGFuZGxlci5ndWlkIHx8IChwLmhhbmRsZXIuZ3VpZCA9IG4uZ3VpZCkpLCBhID8gaC5zcGxpY2UoaC5kZWxlZ2F0ZUNvdW50KyssIDAsIHApIDogaC5wdXNoKHApLCBsZS5ldmVudC5nbG9iYWxbdV0gPSAhMCk7CgkJCQkJCWUgPSBudWxsCgkJCQkJfQoJCQkJfSwKCQkJCXJlbW92ZTogZnVuY3Rpb24oZSwgdCwgbiwgaSwgYSkgewoJCQkJCXZhciBvLCByLCBzLCBsLCBjLCBkLCBwLCBoLCB1LCBtLCBmLCBnID0gbGUuaGFzRGF0YShlKSAmJiBsZS5fZGF0YShlKTsKCQkJCQlpZiAoZyAmJiAoZCA9IGcuZXZlbnRzKSkgewoJCQkJCQlmb3IgKHQgPSAodCB8fCAiIikubWF0Y2goa2UpIHx8IFsiIl0sIGMgPSB0Lmxlbmd0aDsgYy0tOykKCQkJCQkJCWlmIChzID0gTWUuZXhlYyh0W2NdKSB8fCBbXSwgdSA9IGYgPSBzWzFdLCBtID0gKHNbMl0gfHwgIiIpLnNwbGl0KCIuIikuc29ydCgpLCB1KSB7CgkJCQkJCQkJZm9yIChwID0gbGUuZXZlbnQuc3BlY2lhbFt1XSB8fCB7fSwgdSA9IChpID8gcC5kZWxlZ2F0ZVR5cGUgOiBwLmJpbmRUeXBlKSB8fCB1LCBoID0gZFt1XSB8fCBbXSwgcyA9IHNbMl0gJiYgbmV3IFJlZ0V4cCgiKF58XFwuKSIgKyBtLmpvaW4oIlxcLig/Oi4qXFwufCkiKSArICIoXFwufCQpIiksIGwgPSBvID0gaC5sZW5ndGg7IG8tLTspIHIgPSBoW29dLCAhYSAmJiBmICE9PSByLm9yaWdUeXBlIHx8IG4gJiYgbi5ndWlkICE9PSByLmd1aWQgfHwgcyAmJiAhcy50ZXN0KHIubmFtZXNwYWNlKSB8fCBpICYmIGkgIT09IHIuc2VsZWN0b3IgJiYgKCIqKiIgIT09IGkgfHwgIXIuc2VsZWN0b3IpIHx8IChoLnNwbGljZShvLCAxKSwgci5zZWxlY3RvciAmJiBoLmRlbGVnYXRlQ291bnQtLSwgcC5yZW1vdmUgJiYgcC5yZW1vdmUuY2FsbChlLCByKSk7CgkJCQkJCQkJbCAmJiAhaC5sZW5ndGggJiYgKHAudGVhcmRvd24gJiYgcC50ZWFyZG93bi5jYWxsKGUsIG0sIGcuaGFuZGxlKSAhPT0gITEgfHwgbGUucmVtb3ZlRXZlbnQoZSwgdSwgZy5oYW5kbGUpLCBkZWxldGUgZFt1XSkKCQkJCQkJCX0gZWxzZQoJCQkJCQkJCWZvciAodSBpbiBkKSBsZS5ldmVudC5yZW1vdmUoZSwgdSArIHRbY10sIG4sIGksICEwKTsKCQkJCQkJbGUuaXNFbXB0eU9iamVjdChkKSAmJiAoZGVsZXRlIGcuaGFuZGxlLCBsZS5fcmVtb3ZlRGF0YShlLCAiZXZlbnRzIikpCgkJCQkJfQoJCQkJfSwKCQkJCXRyaWdnZXI6IGZ1bmN0aW9uKGUsIHQsIG4sIGkpIHsKCQkJCQl2YXIgbywgciwgcywgbCwgYywgZCwgcCwgaCA9IFtuIHx8IHhlXSwKCQkJCQkJdSA9IG9lLmNhbGwoZSwgInR5cGUiKSA/IGUudHlwZSA6IGUsCgkJCQkJCW0gPSBvZS5jYWxsKGUsICJuYW1lc3BhY2UiKSA/IGUubmFtZXNwYWNlLnNwbGl0KCIuIikgOiBbXTsKCQkJCQlpZiAocyA9IGQgPSBuID0gbiB8fCB4ZSwgMyAhPT0gbi5ub2RlVHlwZSAmJiA4ICE9PSBuLm5vZGVUeXBlICYmICFEZS50ZXN0KHUgKyBsZS5ldmVudC50cmlnZ2VyZWQpICYmICh1LmluZGV4T2YoIi4iKSA+PSAwICYmIChtID0gdS5zcGxpdCgiLiIpLCB1ID0gbS5zaGlmdCgpLCBtLnNvcnQoKSksIHIgPSB1LmluZGV4T2YoIjoiKSA8IDAgJiYgIm9uIiArIHUsIGUgPSBlW2xlLmV4cGFuZG9dID8gZSA6IG5ldyBsZS5FdmVudCh1LCAib2JqZWN0IiA9PSB0eXBlb2YgZSAmJiBlKSwgZS5pc1RyaWdnZXIgPSBpID8gMiA6IDMsIGUubmFtZXNwYWNlID0gbS5qb2luKCIuIiksIGUubmFtZXNwYWNlX3JlID0gZS5uYW1lc3BhY2UgPyBuZXcgUmVnRXhwKCIoXnxcXC4pIiArIG0uam9pbigiXFwuKD86LipcXC58KSIpICsgIihcXC58JCkiKSA6IG51bGwsIGUucmVzdWx0ID0gdm9pZCAwLCBlLnRhcmdldCB8fCAoZS50YXJnZXQgPSBuKSwgdCA9IG51bGwgPT0gdCA/IFtlXSA6IGxlLm1ha2VBcnJheSh0LCBbZV0pLCBjID0gbGUuZXZlbnQuc3BlY2lhbFt1XSB8fCB7fSwgaSB8fCAhYy50cmlnZ2VyIHx8IGMudHJpZ2dlci5hcHBseShuLCB0KSAhPT0gITEpKSB7CgkJCQkJCWlmICghaSAmJiAhYy5ub0J1YmJsZSAmJiAhbGUuaXNXaW5kb3cobikpIHsKCQkJCQkJCWZvciAobCA9IGMuZGVsZWdhdGVUeXBlIHx8IHUsIERlLnRlc3QobCArIHUpIHx8IChzID0gcy5wYXJlbnROb2RlKTsgczsgcyA9IHMucGFyZW50Tm9kZSkgaC5wdXNoKHMpLCBkID0gczsKCQkJCQkJCWQgPT09IChuLm93bmVyRG9jdW1lbnQgfHwgeGUpICYmIGgucHVzaChkLmRlZmF1bHRWaWV3IHx8IGQucGFyZW50V2luZG93IHx8IGEpCgkJCQkJCX0KCQkJCQkJZm9yIChwID0gMDsKCQkJCQkJCShzID0gaFtwKytdKSAmJiAhZS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpOykgZS50eXBlID0gcCA+IDEgPyBsIDogYy5iaW5kVHlwZSB8fCB1LCBvID0gKGxlLl9kYXRhKHMsICJldmVudHMiKSB8fCB7fSlbZS50eXBlXSAmJiBsZS5fZGF0YShzLCAiaGFuZGxlIiksIG8gJiYgby5hcHBseShzLCB0KSwgbyA9IHIgJiYgc1tyXSwgbyAmJiBvLmFwcGx5ICYmIGxlLmFjY2VwdERhdGEocykgJiYgKGUucmVzdWx0ID0gby5hcHBseShzLCB0KSwgZS5yZXN1bHQgPT09ICExICYmIGUucHJldmVudERlZmF1bHQoKSk7CgkJCQkJCWlmIChlLnR5cGUgPSB1LCAhaSAmJiAhZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSAmJiAoIWMuX2RlZmF1bHQgfHwgYy5fZGVmYXVsdC5hcHBseShoLnBvcCgpLCB0KSA9PT0gITEpICYmIGxlLmFjY2VwdERhdGEobikgJiYgciAmJiBuW3VdICYmICFsZS5pc1dpbmRvdyhuKSkgewoJCQkJCQkJZCA9IG5bcl0sIGQgJiYgKG5bcl0gPSBudWxsKSwgbGUuZXZlbnQudHJpZ2dlcmVkID0gdTsKCQkJCQkJCXRyeSB7CgkJCQkJCQkJblt1XSgpCgkJCQkJCQl9IGNhdGNoIChmKSB7fQoJCQkJCQkJbGUuZXZlbnQudHJpZ2dlcmVkID0gdm9pZCAwLCBkICYmIChuW3JdID0gZCkKCQkJCQkJfQoJCQkJCQlyZXR1cm4gZS5yZXN1bHQKCQkJCQl9CgkJCQl9LAoJCQkJZGlzcGF0Y2g6IGZ1bmN0aW9uKGUpIHsKCQkJCQllID0gbGUuZXZlbnQuZml4KGUpOwoJCQkJCXZhciB0LCBuLCBpLCBhLCBvLCByID0gW10sCgkJCQkJCXMgPSBRLmNhbGwoYXJndW1lbnRzKSwKCQkJCQkJbCA9IChsZS5fZGF0YSh0aGlzLCAiZXZlbnRzIikgfHwge30pW2UudHlwZV0gfHwgW10sCgkJCQkJCWMgPSBsZS5ldmVudC5zcGVjaWFsW2UudHlwZV0gfHwge307CgkJCQkJaWYgKHNbMF0gPSBlLCBlLmRlbGVnYXRlVGFyZ2V0ID0gdGhpcywgIWMucHJlRGlzcGF0Y2ggfHwgYy5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsIGUpICE9PSAhMSkgewoJCQkJCQlmb3IgKHIgPSBsZS5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsIGUsIGwpLCB0ID0gMDsKCQkJCQkJCShhID0gclt0KytdKSAmJiAhZS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpOykKCQkJCQkJCWZvciAoZS5jdXJyZW50VGFyZ2V0ID0gYS5lbGVtLCBvID0gMDsKCQkJCQkJCQkoaSA9IGEuaGFuZGxlcnNbbysrXSkgJiYgIWUuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKTspKCFlLm5hbWVzcGFjZV9yZSB8fCBlLm5hbWVzcGFjZV9yZS50ZXN0KGkubmFtZXNwYWNlKSkgJiYgKGUuaGFuZGxlT2JqID0gaSwgZS5kYXRhID0gaS5kYXRhLCBuID0gKChsZS5ldmVudC5zcGVjaWFsW2kub3JpZ1R5cGVdIHx8IHt9KS5oYW5kbGUgfHwgaS5oYW5kbGVyKS5hcHBseShhLmVsZW0sIHMpLCB2b2lkIDAgIT09IG4gJiYgKGUucmVzdWx0ID0gbikgPT09ICExICYmIChlLnByZXZlbnREZWZhdWx0KCksIGUuc3RvcFByb3BhZ2F0aW9uKCkpKTsKCQkJCQkJcmV0dXJuIGMucG9zdERpc3BhdGNoICYmIGMucG9zdERpc3BhdGNoLmNhbGwodGhpcywgZSksIGUucmVzdWx0CgkJCQkJfQoJCQkJfSwKCQkJCWhhbmRsZXJzOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJdmFyIG4sIGksIGEsIG8sIHIgPSBbXSwKCQkJCQkJcyA9IHQuZGVsZWdhdGVDb3VudCwKCQkJCQkJbCA9IGUudGFyZ2V0OwoJCQkJCWlmIChzICYmIGwubm9kZVR5cGUgJiYgKCFlLmJ1dHRvbiB8fCAiY2xpY2siICE9PSBlLnR5cGUpKQoJCQkJCQlmb3IgKDsgbCAhPSB0aGlzOyBsID0gbC5wYXJlbnROb2RlIHx8IHRoaXMpCgkJCQkJCQlpZiAoMSA9PT0gbC5ub2RlVHlwZSAmJiAobC5kaXNhYmxlZCAhPT0gITAgfHwgImNsaWNrIiAhPT0gZS50eXBlKSkgewoJCQkJCQkJCWZvciAoYSA9IFtdLCBvID0gMDsgcyA+IG87IG8rKykgaSA9IHRbb10sIG4gPSBpLnNlbGVjdG9yICsgIiAiLCB2b2lkIDAgPT09IGFbbl0gJiYgKGFbbl0gPSBpLm5lZWRzQ29udGV4dCA/IGxlKG4sIHRoaXMpLmluZGV4KGwpID49IDAgOiBsZS5maW5kKG4sIHRoaXMsIG51bGwsIFtsXSkubGVuZ3RoKSwgYVtuXSAmJiBhLnB1c2goaSk7CgkJCQkJCQkJYS5sZW5ndGggJiYgci5wdXNoKHsKCQkJCQkJCQkJZWxlbTogbCwKCQkJCQkJCQkJaGFuZGxlcnM6IGEKCQkJCQkJCQl9KQoJCQkJCQkJfQoJCQkJCXJldHVybiBzIDwgdC5sZW5ndGggJiYgci5wdXNoKHsKCQkJCQkJZWxlbTogdGhpcywKCQkJCQkJaGFuZGxlcnM6IHQuc2xpY2UocykKCQkJCQl9KSwgcgoJCQkJfSwKCQkJCWZpeDogZnVuY3Rpb24oZSkgewoJCQkJCWlmIChlW2xlLmV4cGFuZG9dKSByZXR1cm4gZTsKCQkJCQl2YXIgdCwgbiwgaSwgYSA9IGUudHlwZSwKCQkJCQkJbyA9IGUsCgkJCQkJCXIgPSB0aGlzLmZpeEhvb2tzW2FdOwoJCQkJCWZvciAociB8fCAodGhpcy5maXhIb29rc1thXSA9IHIgPSBMZS50ZXN0KGEpID8gdGhpcy5tb3VzZUhvb2tzIDogT2UudGVzdChhKSA/IHRoaXMua2V5SG9va3MgOiB7fSksIGkgPSByLnByb3BzID8gdGhpcy5wcm9wcy5jb25jYXQoci5wcm9wcykgOiB0aGlzLnByb3BzLCBlID0gbmV3IGxlLkV2ZW50KG8pLCB0ID0gaS5sZW5ndGg7IHQtLTspIG4gPSBpW3RdLCBlW25dID0gb1tuXTsKCQkJCQlyZXR1cm4gZS50YXJnZXQgfHwgKGUudGFyZ2V0ID0gby5zcmNFbGVtZW50IHx8IHhlKSwgMyA9PT0gZS50YXJnZXQubm9kZVR5cGUgJiYgKGUudGFyZ2V0ID0gZS50YXJnZXQucGFyZW50Tm9kZSksIGUubWV0YUtleSA9ICEhZS5tZXRhS2V5LCByLmZpbHRlciA/IHIuZmlsdGVyKGUsIG8pIDogZQoJCQkJfSwKCQkJCXByb3BzOiAiYWx0S2V5IGJ1YmJsZXMgY2FuY2VsYWJsZSBjdHJsS2V5IGN1cnJlbnRUYXJnZXQgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoIi5zcGxpdCgiICIpLAoJCQkJZml4SG9va3M6IHt9LAoJCQkJa2V5SG9va3M6IHsKCQkJCQlwcm9wczogImNoYXIgY2hhckNvZGUga2V5IGtleUNvZGUiLnNwbGl0KCIgIiksCgkJCQkJZmlsdGVyOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCXJldHVybiBudWxsID09IGUud2hpY2ggJiYgKGUud2hpY2ggPSBudWxsICE9IHQuY2hhckNvZGUgPyB0LmNoYXJDb2RlIDogdC5rZXlDb2RlKSwgZQoJCQkJCX0KCQkJCX0sCgkJCQltb3VzZUhvb2tzOiB7CgkJCQkJcHJvcHM6ICJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgZnJvbUVsZW1lbnQgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnQiLnNwbGl0KCIgIiksCgkJCQkJZmlsdGVyOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCXZhciBuLCBpLCBhLCBvID0gdC5idXR0b24sCgkJCQkJCQlyID0gdC5mcm9tRWxlbWVudDsKCQkJCQkJcmV0dXJuIG51bGwgPT0gZS5wYWdlWCAmJiBudWxsICE9IHQuY2xpZW50WCAmJiAoaSA9IGUudGFyZ2V0Lm93bmVyRG9jdW1lbnQgfHwgeGUsIGEgPSBpLmRvY3VtZW50RWxlbWVudCwgbiA9IGkuYm9keSwgZS5wYWdlWCA9IHQuY2xpZW50WCArIChhICYmIGEuc2Nyb2xsTGVmdCB8fCBuICYmIG4uc2Nyb2xsTGVmdCB8fCAwKSAtIChhICYmIGEuY2xpZW50TGVmdCB8fCBuICYmIG4uY2xpZW50TGVmdCB8fCAwKSwgZS5wYWdlWSA9IHQuY2xpZW50WSArIChhICYmIGEuc2Nyb2xsVG9wIHx8IG4gJiYgbi5zY3JvbGxUb3AgfHwgMCkgLSAoYSAmJiBhLmNsaWVudFRvcCB8fCBuICYmIG4uY2xpZW50VG9wIHx8IDApKSwgIWUucmVsYXRlZFRhcmdldCAmJiByICYmIChlLnJlbGF0ZWRUYXJnZXQgPSByID09PSBlLnRhcmdldCA/IHQudG9FbGVtZW50IDogciksIGUud2hpY2ggfHwgdm9pZCAwID09PSBvIHx8IChlLndoaWNoID0gMSAmIG8gPyAxIDogMiAmIG8gPyAzIDogNCAmIG8gPyAyIDogMCksIGUKCQkJCQl9CgkJCQl9LAoJCQkJc3BlY2lhbDogewoJCQkJCWxvYWQ6IHsKCQkJCQkJbm9CdWJibGU6ICEwCgkJCQkJfSwKCQkJCQlmb2N1czogewoJCQkJCQl0cmlnZ2VyOiBmdW5jdGlvbigpIHsKCQkJCQkJCWlmICh0aGlzICE9PSB4KCkgJiYgdGhpcy5mb2N1cykgdHJ5IHsKCQkJCQkJCQlyZXR1cm4gdGhpcy5mb2N1cygpLCAhMQoJCQkJCQkJfSBjYXRjaCAoZSkge30KCQkJCQkJfSwKCQkJCQkJZGVsZWdhdGVUeXBlOiAiZm9jdXNpbiIKCQkJCQl9LAoJCQkJCWJsdXI6IHsKCQkJCQkJdHJpZ2dlcjogZnVuY3Rpb24oKSB7CgkJCQkJCQlyZXR1cm4gdGhpcyA9PT0geCgpICYmIHRoaXMuYmx1ciA/ICh0aGlzLmJsdXIoKSwgITEpIDogdm9pZCAwCgkJCQkJCX0sCgkJCQkJCWRlbGVnYXRlVHlwZTogImZvY3Vzb3V0IgoJCQkJCX0sCgkJCQkJY2xpY2s6IHsKCQkJCQkJdHJpZ2dlcjogZnVuY3Rpb24oKSB7CgkJCQkJCQlyZXR1cm4gbGUubm9kZU5hbWUodGhpcywgImlucHV0IikgJiYgImNoZWNrYm94IiA9PT0gdGhpcy50eXBlICYmIHRoaXMuY2xpY2sgPyAodGhpcy5jbGljaygpLCAhMSkgOiB2b2lkIDAKCQkJCQkJfSwKCQkJCQkJX2RlZmF1bHQ6IGZ1bmN0aW9uKGUpIHsKCQkJCQkJCXJldHVybiBsZS5ub2RlTmFtZShlLnRhcmdldCwgImEiKQoJCQkJCQl9CgkJCQkJfSwKCQkJCQliZWZvcmV1bmxvYWQ6IHsKCQkJCQkJcG9zdERpc3BhdGNoOiBmdW5jdGlvbihlKSB7CgkJCQkJCQl2b2lkIDAgIT09IGUucmVzdWx0ICYmIGUub3JpZ2luYWxFdmVudCAmJiAoZS5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlID0gZS5yZXN1bHQpCgkJCQkJCX0KCQkJCQl9CgkJCQl9LAoJCQkJc2ltdWxhdGU6IGZ1bmN0aW9uKGUsIHQsIG4sIGkpIHsKCQkJCQl2YXIgYSA9IGxlLmV4dGVuZChuZXcgbGUuRXZlbnQsIG4sIHsKCQkJCQkJdHlwZTogZSwKCQkJCQkJaXNTaW11bGF0ZWQ6ICEwLAoJCQkJCQlvcmlnaW5hbEV2ZW50OiB7fQoJCQkJCX0pOwoJCQkJCWkgPyBsZS5ldmVudC50cmlnZ2VyKGEsIG51bGwsIHQpIDogbGUuZXZlbnQuZGlzcGF0Y2guY2FsbCh0LCBhKSwgYS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSAmJiBuLnByZXZlbnREZWZhdWx0KCkKCQkJCX0KCQkJfSwgbGUucmVtb3ZlRXZlbnQgPSB4ZS5yZW1vdmVFdmVudExpc3RlbmVyID8gZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJZS5yZW1vdmVFdmVudExpc3RlbmVyICYmIGUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LCBuLCAhMSkKCQkJfSA6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCXZhciBpID0gIm9uIiArIHQ7CgkJCQllLmRldGFjaEV2ZW50ICYmICh0eXBlb2YgZVtpXSA9PT0gQ2UgJiYgKGVbaV0gPSBudWxsKSwgZS5kZXRhY2hFdmVudChpLCBuKSkKCQkJfSwgbGUuRXZlbnQgPSBmdW5jdGlvbihlLCB0KSB7CgkJCQlyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGxlLkV2ZW50ID8gKGUgJiYgZS50eXBlID8gKHRoaXMub3JpZ2luYWxFdmVudCA9IGUsIHRoaXMudHlwZSA9IGUudHlwZSwgdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQgPSBlLmRlZmF1bHRQcmV2ZW50ZWQgfHwgdm9pZCAwID09PSBlLmRlZmF1bHRQcmV2ZW50ZWQgJiYgZS5yZXR1cm5WYWx1ZSA9PT0gITEgPyBnIDogXykgOiB0aGlzLnR5cGUgPSBlLCB0ICYmIGxlLmV4dGVuZCh0aGlzLCB0KSwgdGhpcy50aW1lU3RhbXAgPSBlICYmIGUudGltZVN0YW1wIHx8IGxlLm5vdygpLCB2b2lkKHRoaXNbbGUuZXhwYW5kb10gPSAhMCkpIDogbmV3IGxlLkV2ZW50KGUsIHQpCgkJCX0sIGxlLkV2ZW50LnByb3RvdHlwZSA9IHsKCQkJCWlzRGVmYXVsdFByZXZlbnRlZDogXywKCQkJCWlzUHJvcGFnYXRpb25TdG9wcGVkOiBfLAoJCQkJaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6IF8sCgkJCQlwcmV2ZW50RGVmYXVsdDogZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7CgkJCQkJdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQgPSBnLCBlICYmIChlLnByZXZlbnREZWZhdWx0ID8gZS5wcmV2ZW50RGVmYXVsdCgpIDogZS5yZXR1cm5WYWx1ZSA9ICExKQoJCQkJfSwKCQkJCXN0b3BQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7CgkJCQkJdGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZCA9IGcsIGUgJiYgKGUuc3RvcFByb3BhZ2F0aW9uICYmIGUuc3RvcFByb3BhZ2F0aW9uKCksIGUuY2FuY2VsQnViYmxlID0gITApCgkJCQl9LAoJCQkJc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDsKCQkJCQl0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID0gZywgZSAmJiBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiAmJiBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLCB0aGlzLnN0b3BQcm9wYWdhdGlvbigpCgkJCQl9CgkJCX0sIGxlLmVhY2goewoJCQkJbW91c2VlbnRlcjogIm1vdXNlb3ZlciIsCgkJCQltb3VzZWxlYXZlOiAibW91c2VvdXQiLAoJCQkJcG9pbnRlcmVudGVyOiAicG9pbnRlcm92ZXIiLAoJCQkJcG9pbnRlcmxlYXZlOiAicG9pbnRlcm91dCIKCQkJfSwgZnVuY3Rpb24oZSwgdCkgewoJCQkJbGUuZXZlbnQuc3BlY2lhbFtlXSA9IHsKCQkJCQlkZWxlZ2F0ZVR5cGU6IHQsCgkJCQkJYmluZFR5cGU6IHQsCgkJCQkJaGFuZGxlOiBmdW5jdGlvbihlKSB7CgkJCQkJCXZhciBuLCBpID0gdGhpcywKCQkJCQkJCWEgPSBlLnJlbGF0ZWRUYXJnZXQsCgkJCQkJCQlvID0gZS5oYW5kbGVPYmo7CgkJCQkJCXJldHVybiAoIWEgfHwgYSAhPT0gaSAmJiAhbGUuY29udGFpbnMoaSwgYSkpICYmIChlLnR5cGUgPSBvLm9yaWdUeXBlLCBuID0gby5oYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIGUudHlwZSA9IHQpLCBuCgkJCQkJfQoJCQkJfQoJCQl9KSwgcmUuc3VibWl0QnViYmxlcyB8fCAobGUuZXZlbnQuc3BlY2lhbC5zdWJtaXQgPSB7CgkJCQlzZXR1cDogZnVuY3Rpb24oKSB7CgkJCQkJcmV0dXJuIGxlLm5vZGVOYW1lKHRoaXMsICJmb3JtIikgPyAhMSA6IHZvaWQgbGUuZXZlbnQuYWRkKHRoaXMsICJjbGljay5fc3VibWl0IGtleXByZXNzLl9zdWJtaXQiLCBmdW5jdGlvbihlKSB7CgkJCQkJCXZhciB0ID0gZS50YXJnZXQsCgkJCQkJCQluID0gbGUubm9kZU5hbWUodCwgImlucHV0IikgfHwgbGUubm9kZU5hbWUodCwgImJ1dHRvbiIpID8gdC5mb3JtIDogdm9pZCAwOwoJCQkJCQluICYmICFsZS5fZGF0YShuLCAic3VibWl0QnViYmxlcyIpICYmIChsZS5ldmVudC5hZGQobiwgInN1Ym1pdC5fc3VibWl0IiwgZnVuY3Rpb24oZSkgewoJCQkJCQkJZS5fc3VibWl0X2J1YmJsZSA9ICEwCgkJCQkJCX0pLCBsZS5fZGF0YShuLCAic3VibWl0QnViYmxlcyIsICEwKSkKCQkJCQl9KQoJCQkJfSwKCQkJCXBvc3REaXNwYXRjaDogZnVuY3Rpb24oZSkgewoJCQkJCWUuX3N1Ym1pdF9idWJibGUgJiYgKGRlbGV0ZSBlLl9zdWJtaXRfYnViYmxlLCB0aGlzLnBhcmVudE5vZGUgJiYgIWUuaXNUcmlnZ2VyICYmIGxlLmV2ZW50LnNpbXVsYXRlKCJzdWJtaXQiLCB0aGlzLnBhcmVudE5vZGUsIGUsICEwKSkKCQkJCX0sCgkJCQl0ZWFyZG93bjogZnVuY3Rpb24oKSB7CgkJCQkJcmV0dXJuIGxlLm5vZGVOYW1lKHRoaXMsICJmb3JtIikgPyAhMSA6IHZvaWQgbGUuZXZlbnQucmVtb3ZlKHRoaXMsICIuX3N1Ym1pdCIpCgkJCQl9CgkJCX0pLCByZS5jaGFuZ2VCdWJibGVzIHx8IChsZS5ldmVudC5zcGVjaWFsLmNoYW5nZSA9IHsKCQkJCXNldHVwOiBmdW5jdGlvbigpIHsKCQkJCQlyZXR1cm4gRWUudGVzdCh0aGlzLm5vZGVOYW1lKSA/ICgoImNoZWNrYm94IiA9PT0gdGhpcy50eXBlIHx8ICJyYWRpbyIgPT09IHRoaXMudHlwZSkgJiYgKGxlLmV2ZW50LmFkZCh0aGlzLCAicHJvcGVydHljaGFuZ2UuX2NoYW5nZSIsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJImNoZWNrZWQiID09PSBlLm9yaWdpbmFsRXZlbnQucHJvcGVydHlOYW1lICYmICh0aGlzLl9qdXN0X2NoYW5nZWQgPSAhMCkKCQkJCQl9KSwgbGUuZXZlbnQuYWRkKHRoaXMsICJjbGljay5fY2hhbmdlIiwgZnVuY3Rpb24oZSkgewoJCQkJCQl0aGlzLl9qdXN0X2NoYW5nZWQgJiYgIWUuaXNUcmlnZ2VyICYmICh0aGlzLl9qdXN0X2NoYW5nZWQgPSAhMSksIGxlLmV2ZW50LnNpbXVsYXRlKCJjaGFuZ2UiLCB0aGlzLCBlLCAhMCkKCQkJCQl9KSksICExKSA6IHZvaWQgbGUuZXZlbnQuYWRkKHRoaXMsICJiZWZvcmVhY3RpdmF0ZS5fY2hhbmdlIiwgZnVuY3Rpb24oZSkgewoJCQkJCQl2YXIgdCA9IGUudGFyZ2V0OwoJCQkJCQlFZS50ZXN0KHQubm9kZU5hbWUpICYmICFsZS5fZGF0YSh0LCAiY2hhbmdlQnViYmxlcyIpICYmIChsZS5ldmVudC5hZGQodCwgImNoYW5nZS5fY2hhbmdlIiwgZnVuY3Rpb24oZSkgewoJCQkJCQkJIXRoaXMucGFyZW50Tm9kZSB8fCBlLmlzU2ltdWxhdGVkIHx8IGUuaXNUcmlnZ2VyIHx8IGxlLmV2ZW50LnNpbXVsYXRlKCJjaGFuZ2UiLCB0aGlzLnBhcmVudE5vZGUsIGUsICEwKQoJCQkJCQl9KSwgbGUuX2RhdGEodCwgImNoYW5nZUJ1YmJsZXMiLCAhMCkpCgkJCQkJfSkKCQkJCX0sCgkJCQloYW5kbGU6IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCA9IGUudGFyZ2V0OwoJCQkJCXJldHVybiB0aGlzICE9PSB0IHx8IGUuaXNTaW11bGF0ZWQgfHwgZS5pc1RyaWdnZXIgfHwgInJhZGlvIiAhPT0gdC50eXBlICYmICJjaGVja2JveCIgIT09IHQudHlwZSA/IGUuaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSA6IHZvaWQgMDsKCQkJCX0sCgkJCQl0ZWFyZG93bjogZnVuY3Rpb24oKSB7CgkJCQkJcmV0dXJuIGxlLmV2ZW50LnJlbW92ZSh0aGlzLCAiLl9jaGFuZ2UiKSwgIUVlLnRlc3QodGhpcy5ub2RlTmFtZSkKCQkJCX0KCQkJfSksIHJlLmZvY3VzaW5CdWJibGVzIHx8IGxlLmVhY2goewoJCQkJZm9jdXM6ICJmb2N1c2luIiwKCQkJCWJsdXI6ICJmb2N1c291dCIKCQkJfSwgZnVuY3Rpb24oZSwgdCkgewoJCQkJdmFyIG4gPSBmdW5jdGlvbihlKSB7CgkJCQkJbGUuZXZlbnQuc2ltdWxhdGUodCwgZS50YXJnZXQsIGxlLmV2ZW50LmZpeChlKSwgITApCgkJCQl9OwoJCQkJbGUuZXZlbnQuc3BlY2lhbFt0XSA9IHsKCQkJCQlzZXR1cDogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBpID0gdGhpcy5vd25lckRvY3VtZW50IHx8IHRoaXMsCgkJCQkJCQlhID0gbGUuX2RhdGEoaSwgdCk7CgkJCQkJCWEgfHwgaS5hZGRFdmVudExpc3RlbmVyKGUsIG4sICEwKSwgbGUuX2RhdGEoaSwgdCwgKGEgfHwgMCkgKyAxKQoJCQkJCX0sCgkJCQkJdGVhcmRvd246IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgaSA9IHRoaXMub3duZXJEb2N1bWVudCB8fCB0aGlzLAoJCQkJCQkJYSA9IGxlLl9kYXRhKGksIHQpIC0gMTsKCQkJCQkJYSA/IGxlLl9kYXRhKGksIHQsIGEpIDogKGkucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLCBuLCAhMCksIGxlLl9yZW1vdmVEYXRhKGksIHQpKQoJCQkJCX0KCQkJCX0KCQkJfSksIGxlLmZuLmV4dGVuZCh7CgkJCQlvbjogZnVuY3Rpb24oZSwgdCwgbiwgaSwgYSkgewoJCQkJCXZhciBvLCByOwoJCQkJCWlmICgib2JqZWN0IiA9PSB0eXBlb2YgZSkgewoJCQkJCQkic3RyaW5nIiAhPSB0eXBlb2YgdCAmJiAobiA9IG4gfHwgdCwgdCA9IHZvaWQgMCk7CgkJCQkJCWZvciAobyBpbiBlKSB0aGlzLm9uKG8sIHQsIG4sIGVbb10sIGEpOwoJCQkJCQlyZXR1cm4gdGhpcwoJCQkJCX0KCQkJCQlpZiAobnVsbCA9PSBuICYmIG51bGwgPT0gaSA/IChpID0gdCwgbiA9IHQgPSB2b2lkIDApIDogbnVsbCA9PSBpICYmICgic3RyaW5nIiA9PSB0eXBlb2YgdCA/IChpID0gbiwgbiA9IHZvaWQgMCkgOiAoaSA9IG4sIG4gPSB0LCB0ID0gdm9pZCAwKSksIGkgPT09ICExKSBpID0gXzsKCQkJCQllbHNlIGlmICghaSkgcmV0dXJuIHRoaXM7CgkJCQkJcmV0dXJuIDEgPT09IGEgJiYgKHIgPSBpLCBpID0gZnVuY3Rpb24oZSkgewoJCQkJCQlyZXR1cm4gbGUoKS5vZmYoZSksIHIuYXBwbHkodGhpcywgYXJndW1lbnRzKQoJCQkJCX0sIGkuZ3VpZCA9IHIuZ3VpZCB8fCAoci5ndWlkID0gbGUuZ3VpZCsrKSksIHRoaXMuZWFjaChmdW5jdGlvbigpIHsKCQkJCQkJbGUuZXZlbnQuYWRkKHRoaXMsIGUsIGksIG4sIHQpCgkJCQkJfSkKCQkJCX0sCgkJCQlvbmU6IGZ1bmN0aW9uKGUsIHQsIG4sIGkpIHsKCQkJCQlyZXR1cm4gdGhpcy5vbihlLCB0LCBuLCBpLCAxKQoJCQkJfSwKCQkJCW9mZjogZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCXZhciBpLCBhOwoJCQkJCWlmIChlICYmIGUucHJldmVudERlZmF1bHQgJiYgZS5oYW5kbGVPYmopIHJldHVybiBpID0gZS5oYW5kbGVPYmosIGxlKGUuZGVsZWdhdGVUYXJnZXQpLm9mZihpLm5hbWVzcGFjZSA/IGkub3JpZ1R5cGUgKyAiLiIgKyBpLm5hbWVzcGFjZSA6IGkub3JpZ1R5cGUsIGkuc2VsZWN0b3IsIGkuaGFuZGxlciksIHRoaXM7CgkJCQkJaWYgKCJvYmplY3QiID09IHR5cGVvZiBlKSB7CgkJCQkJCWZvciAoYSBpbiBlKSB0aGlzLm9mZihhLCB0LCBlW2FdKTsKCQkJCQkJcmV0dXJuIHRoaXMKCQkJCQl9CgkJCQkJcmV0dXJuICh0ID09PSAhMSB8fCAiZnVuY3Rpb24iID09IHR5cGVvZiB0KSAmJiAobiA9IHQsIHQgPSB2b2lkIDApLCBuID09PSAhMSAmJiAobiA9IF8pLCB0aGlzLmVhY2goZnVuY3Rpb24oKSB7CgkJCQkJCWxlLmV2ZW50LnJlbW92ZSh0aGlzLCBlLCBuLCB0KQoJCQkJCX0pCgkJCQl9LAoJCQkJdHJpZ2dlcjogZnVuY3Rpb24oZSwgdCkgewoJCQkJCXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7CgkJCQkJCWxlLmV2ZW50LnRyaWdnZXIoZSwgdCwgdGhpcykKCQkJCQl9KQoJCQkJfSwKCQkJCXRyaWdnZXJIYW5kbGVyOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJdmFyIG4gPSB0aGlzWzBdOwoJCQkJCXJldHVybiBuID8gbGUuZXZlbnQudHJpZ2dlcihlLCB0LCBuLCAhMCkgOiB2b2lkIDAKCQkJCX0KCQkJfSk7CgkJCXZhciBSZSA9ICJhYmJyfGFydGljbGV8YXNpZGV8YXVkaW98YmRpfGNhbnZhc3xkYXRhfGRhdGFsaXN0fGRldGFpbHN8ZmlnY2FwdGlvbnxmaWd1cmV8Zm9vdGVyfGhlYWRlcnxoZ3JvdXB8bWFya3xtZXRlcnxuYXZ8b3V0cHV0fHByb2dyZXNzfHNlY3Rpb258c3VtbWFyeXx0aW1lfHZpZGVvIiwKCQkJCUZlID0gLyBqUXVlcnlcZCs9Iig/Om51bGx8XGQrKSIvZywKCQkJCSRlID0gbmV3IFJlZ0V4cCgiPCg/OiIgKyBSZSArICIpW1xccy8+XSIsICJpIiksCgkJCQlXZSA9IC9eXHMrLywKCQkJCUhlID0gLzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1x3Ol0rKVtePl0qKVwvPi9naSwKCQkJCVVlID0gLzwoW1x3Ol0rKS8sCgkJCQlZZSA9IC88dGJvZHkvaSwKCQkJCUdlID0gLzx8JiM/XHcrOy8sCgkJCQlYZSA9IC88KD86c2NyaXB0fHN0eWxlfGxpbmspL2ksCgkJCQlKZSA9IC9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLAoJCQkJWmUgPSAvXiR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksCgkJCQlWZSA9IC9edHJ1ZVwvKC4qKS8sCgkJCQlLZSA9IC9eXHMqPCEoPzpcW0NEQVRBXFt8LS0pfCg/OlxdXF18LS0pPlxzKiQvZywKCQkJCVFlID0gewoJCQkJCW9wdGlvbjogWzEsICI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+IiwgIjwvc2VsZWN0PiJdLAoJCQkJCWxlZ2VuZDogWzEsICI8ZmllbGRzZXQ+IiwgIjwvZmllbGRzZXQ+Il0sCgkJCQkJYXJlYTogWzEsICI8bWFwPiIsICI8L21hcD4iXSwKCQkJCQlwYXJhbTogWzEsICI8b2JqZWN0PiIsICI8L29iamVjdD4iXSwKCQkJCQl0aGVhZDogWzEsICI8dGFibGU+IiwgIjwvdGFibGU+Il0sCgkJCQkJdHI6IFsyLCAiPHRhYmxlPjx0Ym9keT4iLCAiPC90Ym9keT48L3RhYmxlPiJdLAoJCQkJCWNvbDogWzIsICI8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPiIsICI8L2NvbGdyb3VwPjwvdGFibGU+Il0sCgkJCQkJdGQ6IFszLCAiPHRhYmxlPjx0Ym9keT48dHI+IiwgIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdLAoJCQkJCV9kZWZhdWx0OiByZS5odG1sU2VyaWFsaXplID8gWzAsICIiLCAiIl0gOiBbMSwgIlg8ZGl2PiIsICI8L2Rpdj4iXQoJCQkJfSwKCQkJCWV0ID0gdyh4ZSksCgkJCQl0dCA9IGV0LmFwcGVuZENoaWxkKHhlLmNyZWF0ZUVsZW1lbnQoImRpdiIpKTsKCQkJUWUub3B0Z3JvdXAgPSBRZS5vcHRpb24sIFFlLnRib2R5ID0gUWUudGZvb3QgPSBRZS5jb2xncm91cCA9IFFlLmNhcHRpb24gPSBRZS50aGVhZCwgUWUudGggPSBRZS50ZCwgbGUuZXh0ZW5kKHsKCQkJCWNsb25lOiBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJdmFyIGksIGEsIG8sIHIsIHMsIGwgPSBsZS5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsIGUpOwoJCQkJCWlmIChyZS5odG1sNUNsb25lIHx8IGxlLmlzWE1MRG9jKGUpIHx8ICEkZS50ZXN0KCI8IiArIGUubm9kZU5hbWUgKyAiPiIpID8gbyA9IGUuY2xvbmVOb2RlKCEwKSA6ICh0dC5pbm5lckhUTUwgPSBlLm91dGVySFRNTCwgdHQucmVtb3ZlQ2hpbGQobyA9IHR0LmZpcnN0Q2hpbGQpKSwgIShyZS5ub0Nsb25lRXZlbnQgJiYgcmUubm9DbG9uZUNoZWNrZWQgfHwgMSAhPT0gZS5ub2RlVHlwZSAmJiAxMSAhPT0gZS5ub2RlVHlwZSB8fCBsZS5pc1hNTERvYyhlKSkpCgkJCQkJCWZvciAoaSA9IHYobyksIHMgPSB2KGUpLCByID0gMDsgbnVsbCAhPSAoYSA9IHNbcl0pOyArK3IpIGlbcl0gJiYgQyhhLCBpW3JdKTsKCQkJCQlpZiAodCkKCQkJCQkJaWYgKG4pCgkJCQkJCQlmb3IgKHMgPSBzIHx8IHYoZSksIGkgPSBpIHx8IHYobyksIHIgPSAwOyBudWxsICE9IChhID0gc1tyXSk7IHIrKykgaihhLCBpW3JdKTsKCQkJCQkJZWxzZSBqKGUsIG8pOwoJCQkJCXJldHVybiBpID0gdihvLCAic2NyaXB0IiksIGkubGVuZ3RoID4gMCAmJiBCKGksICFsICYmIHYoZSwgInNjcmlwdCIpKSwgaSA9IHMgPSBhID0gbnVsbCwgbwoJCQkJfSwKCQkJCWJ1aWxkRnJhZ21lbnQ6IGZ1bmN0aW9uKGUsIHQsIG4sIGkpIHsKCQkJCQlmb3IgKHZhciBhLCBvLCByLCBzLCBsLCBjLCBkLCBwID0gZS5sZW5ndGgsIGggPSB3KHQpLCB1ID0gW10sIG0gPSAwOyBwID4gbTsgbSsrKQoJCQkJCQlpZiAobyA9IGVbbV0sIG8gfHwgMCA9PT0gbykKCQkJCQkJCWlmICgib2JqZWN0IiA9PT0gbGUudHlwZShvKSkgbGUubWVyZ2UodSwgby5ub2RlVHlwZSA/IFtvXSA6IG8pOwoJCQkJCQkJZWxzZSBpZiAoR2UudGVzdChvKSkgewoJCQkJCQlmb3IgKHMgPSBzIHx8IGguYXBwZW5kQ2hpbGQodC5jcmVhdGVFbGVtZW50KCJkaXYiKSksIGwgPSAoVWUuZXhlYyhvKSB8fCBbIiIsICIiXSlbMV0udG9Mb3dlckNhc2UoKSwgZCA9IFFlW2xdIHx8IFFlLl9kZWZhdWx0LCBzLmlubmVySFRNTCA9IGRbMV0gKyBvLnJlcGxhY2UoSGUsICI8JDE+PC8kMj4iKSArIGRbMl0sIGEgPSBkWzBdOyBhLS07KSBzID0gcy5sYXN0Q2hpbGQ7CgkJCQkJCWlmICghcmUubGVhZGluZ1doaXRlc3BhY2UgJiYgV2UudGVzdChvKSAmJiB1LnB1c2godC5jcmVhdGVUZXh0Tm9kZShXZS5leGVjKG8pWzBdKSksICFyZS50Ym9keSkKCQkJCQkJCWZvciAobyA9ICJ0YWJsZSIgIT09IGwgfHwgWWUudGVzdChvKSA/ICI8dGFibGU+IiAhPT0gZFsxXSB8fCBZZS50ZXN0KG8pID8gMCA6IHMgOiBzLmZpcnN0Q2hpbGQsIGEgPSBvICYmIG8uY2hpbGROb2Rlcy5sZW5ndGg7IGEtLTspIGxlLm5vZGVOYW1lKGMgPSBvLmNoaWxkTm9kZXNbYV0sICJ0Ym9keSIpICYmICFjLmNoaWxkTm9kZXMubGVuZ3RoICYmIG8ucmVtb3ZlQ2hpbGQoYyk7CgkJCQkJCWZvciAobGUubWVyZ2UodSwgcy5jaGlsZE5vZGVzKSwgcy50ZXh0Q29udGVudCA9ICIiOyBzLmZpcnN0Q2hpbGQ7KSBzLnJlbW92ZUNoaWxkKHMuZmlyc3RDaGlsZCk7CgkJCQkJCXMgPSBoLmxhc3RDaGlsZAoJCQkJCX0gZWxzZSB1LnB1c2godC5jcmVhdGVUZXh0Tm9kZShvKSk7CgkJCQkJZm9yIChzICYmIGgucmVtb3ZlQ2hpbGQocyksIHJlLmFwcGVuZENoZWNrZWQgfHwgbGUuZ3JlcCh2KHUsICJpbnB1dCIpLCBiKSwgbSA9IDA7IG8gPSB1W20rK107KQoJCQkJCQlpZiAoKCFpIHx8IC0xID09PSBsZS5pbkFycmF5KG8sIGkpKSAmJiAociA9IGxlLmNvbnRhaW5zKG8ub3duZXJEb2N1bWVudCwgbyksIHMgPSB2KGguYXBwZW5kQ2hpbGQobyksICJzY3JpcHQiKSwgciAmJiBCKHMpLCBuKSkKCQkJCQkJCWZvciAoYSA9IDA7IG8gPSBzW2ErK107KSBaZS50ZXN0KG8udHlwZSB8fCAiIikgJiYgbi5wdXNoKG8pOwoJCQkJCXJldHVybiBzID0gbnVsbCwgaAoJCQkJfSwKCQkJCWNsZWFuRGF0YTogZnVuY3Rpb24oZSwgdCkgewoJCQkJCWZvciAodmFyIG4sIGksIGEsIG8sIHIgPSAwLCBzID0gbGUuZXhwYW5kbywgbCA9IGxlLmNhY2hlLCBjID0gcmUuZGVsZXRlRXhwYW5kbywgZCA9IGxlLmV2ZW50LnNwZWNpYWw7IG51bGwgIT0gKG4gPSBlW3JdKTsgcisrKQoJCQkJCQlpZiAoKHQgfHwgbGUuYWNjZXB0RGF0YShuKSkgJiYgKGEgPSBuW3NdLCBvID0gYSAmJiBsW2FdKSkgewoJCQkJCQkJaWYgKG8uZXZlbnRzKQoJCQkJCQkJCWZvciAoaSBpbiBvLmV2ZW50cykgZFtpXSA/IGxlLmV2ZW50LnJlbW92ZShuLCBpKSA6IGxlLnJlbW92ZUV2ZW50KG4sIGksIG8uaGFuZGxlKTsKCQkJCQkJCWxbYV0gJiYgKGRlbGV0ZSBsW2FdLCBjID8gZGVsZXRlIG5bc10gOiB0eXBlb2Ygbi5yZW1vdmVBdHRyaWJ1dGUgIT09IENlID8gbi5yZW1vdmVBdHRyaWJ1dGUocykgOiBuW3NdID0gbnVsbCwgSy5wdXNoKGEpKQoJCQkJCQl9CgkJCQl9CgkJCX0pLCBsZS5mbi5leHRlbmQoewoJCQkJdGV4dDogZnVuY3Rpb24oZSkgewoJCQkJCXJldHVybiBBZSh0aGlzLCBmdW5jdGlvbihlKSB7CgkJCQkJCXJldHVybiB2b2lkIDAgPT09IGUgPyBsZS50ZXh0KHRoaXMpIDogdGhpcy5lbXB0eSgpLmFwcGVuZCgodGhpc1swXSAmJiB0aGlzWzBdLm93bmVyRG9jdW1lbnQgfHwgeGUpLmNyZWF0ZVRleHROb2RlKGUpKQoJCQkJCX0sIG51bGwsIGUsIGFyZ3VtZW50cy5sZW5ndGgpCgkJCQl9LAoJCQkJYXBwZW5kOiBmdW5jdGlvbigpIHsKCQkJCQlyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJaWYgKDEgPT09IHRoaXMubm9kZVR5cGUgfHwgMTEgPT09IHRoaXMubm9kZVR5cGUgfHwgOSA9PT0gdGhpcy5ub2RlVHlwZSkgewoJCQkJCQkJdmFyIHQgPSB5KHRoaXMsIGUpOwoJCQkJCQkJdC5hcHBlbmRDaGlsZChlKQoJCQkJCQl9CgkJCQkJfSkKCQkJCX0sCgkJCQlwcmVwZW5kOiBmdW5jdGlvbigpIHsKCQkJCQlyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJaWYgKDEgPT09IHRoaXMubm9kZVR5cGUgfHwgMTEgPT09IHRoaXMubm9kZVR5cGUgfHwgOSA9PT0gdGhpcy5ub2RlVHlwZSkgewoJCQkJCQkJdmFyIHQgPSB5KHRoaXMsIGUpOwoJCQkJCQkJdC5pbnNlcnRCZWZvcmUoZSwgdC5maXJzdENoaWxkKQoJCQkJCQl9CgkJCQkJfSkKCQkJCX0sCgkJCQliZWZvcmU6IGZ1bmN0aW9uKCkgewoJCQkJCXJldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cywgZnVuY3Rpb24oZSkgewoJCQkJCQl0aGlzLnBhcmVudE5vZGUgJiYgdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLCB0aGlzKQoJCQkJCX0pCgkJCQl9LAoJCQkJYWZ0ZXI6IGZ1bmN0aW9uKCkgewoJCQkJCXJldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cywgZnVuY3Rpb24oZSkgewoJCQkJCQl0aGlzLnBhcmVudE5vZGUgJiYgdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLCB0aGlzLm5leHRTaWJsaW5nKQoJCQkJCX0pCgkJCQl9LAoJCQkJcmVtb3ZlOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJZm9yICh2YXIgbiwgaSA9IGUgPyBsZS5maWx0ZXIoZSwgdGhpcykgOiB0aGlzLCBhID0gMDsgbnVsbCAhPSAobiA9IGlbYV0pOyBhKyspIHQgfHwgMSAhPT0gbi5ub2RlVHlwZSB8fCBsZS5jbGVhbkRhdGEodihuKSksIG4ucGFyZW50Tm9kZSAmJiAodCAmJiBsZS5jb250YWlucyhuLm93bmVyRG9jdW1lbnQsIG4pICYmIEIodihuLCAic2NyaXB0IikpLCBuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobikpOwoJCQkJCXJldHVybiB0aGlzCgkJCQl9LAoJCQkJZW1wdHk6IGZ1bmN0aW9uKCkgewoJCQkJCWZvciAodmFyIGUsIHQgPSAwOyBudWxsICE9IChlID0gdGhpc1t0XSk7IHQrKykgewoJCQkJCQlmb3IgKDEgPT09IGUubm9kZVR5cGUgJiYgbGUuY2xlYW5EYXRhKHYoZSwgITEpKTsgZS5maXJzdENoaWxkOykgZS5yZW1vdmVDaGlsZChlLmZpcnN0Q2hpbGQpOwoJCQkJCQllLm9wdGlvbnMgJiYgbGUubm9kZU5hbWUoZSwgInNlbGVjdCIpICYmIChlLm9wdGlvbnMubGVuZ3RoID0gMCkKCQkJCQl9CgkJCQkJcmV0dXJuIHRoaXMKCQkJCX0sCgkJCQljbG9uZTogZnVuY3Rpb24oZSwgdCkgewoJCQkJCXJldHVybiBlID0gbnVsbCA9PSBlID8gITEgOiBlLCB0ID0gbnVsbCA9PSB0ID8gZSA6IHQsIHRoaXMubWFwKGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gbGUuY2xvbmUodGhpcywgZSwgdCkKCQkJCQl9KQoJCQkJfSwKCQkJCWh0bWw6IGZ1bmN0aW9uKGUpIHsKCQkJCQlyZXR1cm4gQWUodGhpcywgZnVuY3Rpb24oZSkgewoJCQkJCQl2YXIgdCA9IHRoaXNbMF0gfHwge30sCgkJCQkJCQluID0gMCwKCQkJCQkJCWkgPSB0aGlzLmxlbmd0aDsKCQkJCQkJaWYgKHZvaWQgMCA9PT0gZSkgcmV0dXJuIDEgPT09IHQubm9kZVR5cGUgPyB0LmlubmVySFRNTC5yZXBsYWNlKEZlLCAiIikgOiB2b2lkIDA7CgkJCQkJCWlmICgic3RyaW5nIiA9PSB0eXBlb2YgZSAmJiAhWGUudGVzdChlKSAmJiAocmUuaHRtbFNlcmlhbGl6ZSB8fCAhJGUudGVzdChlKSkgJiYgKHJlLmxlYWRpbmdXaGl0ZXNwYWNlIHx8ICFXZS50ZXN0KGUpKSAmJiAhUWVbKFVlLmV4ZWMoZSkgfHwgWyIiLCAiIl0pWzFdLnRvTG93ZXJDYXNlKCldKSB7CgkJCQkJCQllID0gZS5yZXBsYWNlKEhlLCAiPCQxPjwvJDI+Iik7CgkJCQkJCQl0cnkgewoJCQkJCQkJCWZvciAoOyBpID4gbjsgbisrKSB0ID0gdGhpc1tuXSB8fCB7fSwgMSA9PT0gdC5ub2RlVHlwZSAmJiAobGUuY2xlYW5EYXRhKHYodCwgITEpKSwgdC5pbm5lckhUTUwgPSBlKTsKCQkJCQkJCQl0ID0gMAoJCQkJCQkJfSBjYXRjaCAoYSkge30KCQkJCQkJfQoJCQkJCQl0ICYmIHRoaXMuZW1wdHkoKS5hcHBlbmQoZSkKCQkJCQl9LCBudWxsLCBlLCBhcmd1bWVudHMubGVuZ3RoKQoJCQkJfSwKCQkJCXJlcGxhY2VXaXRoOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IGFyZ3VtZW50c1swXTsKCQkJCQlyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsIGZ1bmN0aW9uKHQpIHsKCQkJCQkJZSA9IHRoaXMucGFyZW50Tm9kZSwgbGUuY2xlYW5EYXRhKHYodGhpcykpLCBlICYmIGUucmVwbGFjZUNoaWxkKHQsIHRoaXMpCgkJCQkJfSksIGUgJiYgKGUubGVuZ3RoIHx8IGUubm9kZVR5cGUpID8gdGhpcyA6IHRoaXMucmVtb3ZlKCkKCQkJCX0sCgkJCQlkZXRhY2g6IGZ1bmN0aW9uKGUpIHsKCQkJCQlyZXR1cm4gdGhpcy5yZW1vdmUoZSwgITApCgkJCQl9LAoJCQkJZG9tTWFuaXA6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQllID0gZWUuYXBwbHkoW10sIGUpOwoJCQkJCXZhciBuLCBpLCBhLCBvLCByLCBzLCBsID0gMCwKCQkJCQkJYyA9IHRoaXMubGVuZ3RoLAoJCQkJCQlkID0gdGhpcywKCQkJCQkJcCA9IGMgLSAxLAoJCQkJCQloID0gZVswXSwKCQkJCQkJdSA9IGxlLmlzRnVuY3Rpb24oaCk7CgkJCQkJaWYgKHUgfHwgYyA+IDEgJiYgInN0cmluZyIgPT0gdHlwZW9mIGggJiYgIXJlLmNoZWNrQ2xvbmUgJiYgSmUudGVzdChoKSkgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihuKSB7CgkJCQkJCXZhciBpID0gZC5lcShuKTsKCQkJCQkJdSAmJiAoZVswXSA9IGguY2FsbCh0aGlzLCBuLCBpLmh0bWwoKSkpLCBpLmRvbU1hbmlwKGUsIHQpCgkJCQkJfSk7CgkJCQkJaWYgKGMgJiYgKHMgPSBsZS5idWlsZEZyYWdtZW50KGUsIHRoaXNbMF0ub3duZXJEb2N1bWVudCwgITEsIHRoaXMpLCBuID0gcy5maXJzdENoaWxkLCAxID09PSBzLmNoaWxkTm9kZXMubGVuZ3RoICYmIChzID0gbiksIG4pKSB7CgkJCQkJCWZvciAobyA9IGxlLm1hcCh2KHMsICJzY3JpcHQiKSwgayksIGEgPSBvLmxlbmd0aDsgYyA+IGw7IGwrKykgaSA9IHMsIGwgIT09IHAgJiYgKGkgPSBsZS5jbG9uZShpLCAhMCwgITApLCBhICYmIGxlLm1lcmdlKG8sIHYoaSwgInNjcmlwdCIpKSksIHQuY2FsbCh0aGlzW2xdLCBpLCBsKTsKCQkJCQkJaWYgKGEpCgkJCQkJCQlmb3IgKHIgPSBvW28ubGVuZ3RoIC0gMV0ub3duZXJEb2N1bWVudCwgbGUubWFwKG8sIHopLCBsID0gMDsgYSA+IGw7IGwrKykgaSA9IG9bbF0sIFplLnRlc3QoaS50eXBlIHx8ICIiKSAmJiAhbGUuX2RhdGEoaSwgImdsb2JhbEV2YWwiKSAmJiBsZS5jb250YWlucyhyLCBpKSAmJiAoaS5zcmMgPyBsZS5fZXZhbFVybCAmJiBsZS5fZXZhbFVybChpLnNyYykgOiBsZS5nbG9iYWxFdmFsKChpLnRleHQgfHwgaS50ZXh0Q29udGVudCB8fCBpLmlubmVySFRNTCB8fCAiIikucmVwbGFjZShLZSwgIiIpKSk7CgkJCQkJCXMgPSBuID0gbnVsbAoJCQkJCX0KCQkJCQlyZXR1cm4gdGhpcwoJCQkJfQoJCQl9KSwgbGUuZWFjaCh7CgkJCQlhcHBlbmRUbzogImFwcGVuZCIsCgkJCQlwcmVwZW5kVG86ICJwcmVwZW5kIiwKCQkJCWluc2VydEJlZm9yZTogImJlZm9yZSIsCgkJCQlpbnNlcnRBZnRlcjogImFmdGVyIiwKCQkJCXJlcGxhY2VBbGw6ICJyZXBsYWNlV2l0aCIKCQkJfSwgZnVuY3Rpb24oZSwgdCkgewoJCQkJbGUuZm5bZV0gPSBmdW5jdGlvbihlKSB7CgkJCQkJZm9yICh2YXIgbiwgaSA9IDAsIGEgPSBbXSwgbyA9IGxlKGUpLCByID0gby5sZW5ndGggLSAxOyByID49IGk7IGkrKykgbiA9IGkgPT09IHIgPyB0aGlzIDogdGhpcy5jbG9uZSghMCksIGxlKG9baV0pW3RdKG4pLCB0ZS5hcHBseShhLCBuLmdldCgpKTsKCQkJCQlyZXR1cm4gdGhpcy5wdXNoU3RhY2soYSkKCQkJCX0KCQkJfSk7CgkJCXZhciBudCwgaXQgPSB7fTsKCQkJISBmdW5jdGlvbigpIHsKCQkJCXZhciBlOwoJCQkJcmUuc2hyaW5rV3JhcEJsb2NrcyA9IGZ1bmN0aW9uKCkgewoJCQkJCWlmIChudWxsICE9IGUpIHJldHVybiBlOwoJCQkJCWUgPSAhMTsKCQkJCQl2YXIgdCwgbiwgaTsKCQkJCQlyZXR1cm4gbiA9IHhlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF0sIG4gJiYgbi5zdHlsZSA/ICh0ID0geGUuY3JlYXRlRWxlbWVudCgiZGl2IiksIGkgPSB4ZS5jcmVhdGVFbGVtZW50KCJkaXYiKSwgaS5zdHlsZS5jc3NUZXh0ID0gInBvc2l0aW9uOmFic29sdXRlO2JvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4Iiwgbi5hcHBlbmRDaGlsZChpKS5hcHBlbmRDaGlsZCh0KSwgdHlwZW9mIHQuc3R5bGUuem9vbSAhPT0gQ2UgJiYgKHQuc3R5bGUuY3NzVGV4dCA9ICItd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O2JveC1zaXppbmc6Y29udGVudC1ib3g7ZGlzcGxheTpibG9jazttYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjFweDt3aWR0aDoxcHg7em9vbToxIiwgdC5hcHBlbmRDaGlsZCh4ZS5jcmVhdGVFbGVtZW50KCJkaXYiKSkuc3R5bGUud2lkdGggPSAiNXB4IiwgZSA9IDMgIT09IHQub2Zmc2V0V2lkdGgpLCBuLnJlbW92ZUNoaWxkKGkpLCBlKSA6IHZvaWQgMAoJCQkJfQoJCQl9KCk7CgkJCXZhciBhdCwgb3QsIHJ0ID0gL15tYXJnaW4vLAoJCQkJc3QgPSBuZXcgUmVnRXhwKCJeKCIgKyBUZSArICIpKD8hcHgpW2EteiVdKyQiLCAiaSIpLAoJCQkJbHQgPSAvXih0b3B8cmlnaHR8Ym90dG9tfGxlZnQpJC87CgkJCWEuZ2V0Q29tcHV0ZWRTdHlsZSA/IChhdCA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlyZXR1cm4gZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3Lm9wZW5lciA/IGUub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGUsIG51bGwpIDogYS5nZXRDb21wdXRlZFN0eWxlKGUsIG51bGwpCgkJCQl9LCBvdCA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQl2YXIgaSwgYSwgbywgciwgcyA9IGUuc3R5bGU7CgkJCQkJcmV0dXJuIG4gPSBuIHx8IGF0KGUpLCByID0gbiA/IG4uZ2V0UHJvcGVydHlWYWx1ZSh0KSB8fCBuW3RdIDogdm9pZCAwLCBuICYmICgiIiAhPT0gciB8fCBsZS5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsIGUpIHx8IChyID0gbGUuc3R5bGUoZSwgdCkpLCBzdC50ZXN0KHIpICYmIHJ0LnRlc3QodCkgJiYgKGkgPSBzLndpZHRoLCBhID0gcy5taW5XaWR0aCwgbyA9IHMubWF4V2lkdGgsIHMubWluV2lkdGggPSBzLm1heFdpZHRoID0gcy53aWR0aCA9IHIsIHIgPSBuLndpZHRoLCBzLndpZHRoID0gaSwgcy5taW5XaWR0aCA9IGEsIHMubWF4V2lkdGggPSBvKSksIHZvaWQgMCA9PT0gciA/IHIgOiByICsgIiIKCQkJCX0pIDogeGUuZG9jdW1lbnRFbGVtZW50LmN1cnJlbnRTdHlsZSAmJiAoYXQgPSBmdW5jdGlvbihlKSB7CgkJCQkJcmV0dXJuIGUuY3VycmVudFN0eWxlCgkJCQl9LCBvdCA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQl2YXIgaSwgYSwgbywgciwgcyA9IGUuc3R5bGU7CgkJCQkJcmV0dXJuIG4gPSBuIHx8IGF0KGUpLCByID0gbiA/IG5bdF0gOiB2b2lkIDAsIG51bGwgPT0gciAmJiBzICYmIHNbdF0gJiYgKHIgPSBzW3RdKSwgc3QudGVzdChyKSAmJiAhbHQudGVzdCh0KSAmJiAoaSA9IHMubGVmdCwgYSA9IGUucnVudGltZVN0eWxlLCBvID0gYSAmJiBhLmxlZnQsIG8gJiYgKGEubGVmdCA9IGUuY3VycmVudFN0eWxlLmxlZnQpLCBzLmxlZnQgPSAiZm9udFNpemUiID09PSB0ID8gIjFlbSIgOiByLCByID0gcy5waXhlbExlZnQgKyAicHgiLCBzLmxlZnQgPSBpLCBvICYmIChhLmxlZnQgPSBvKSksIHZvaWQgMCA9PT0gciA/IHIgOiByICsgIiIgfHwgImF1dG8iCgkJCQl9KSwKCQkJCWZ1bmN0aW9uKCkgewoJCQkJCWZ1bmN0aW9uIGUoKSB7CgkJCQkJCXZhciBlLCB0LCBuLCBpOwoJCQkJCQl0ID0geGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXSwgdCAmJiB0LnN0eWxlICYmIChlID0geGUuY3JlYXRlRWxlbWVudCgiZGl2IiksIG4gPSB4ZS5jcmVhdGVFbGVtZW50KCJkaXYiKSwgbi5zdHlsZS5jc3NUZXh0ID0gInBvc2l0aW9uOmFic29sdXRlO2JvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4IiwgdC5hcHBlbmRDaGlsZChuKS5hcHBlbmRDaGlsZChlKSwgZS5zdHlsZS5jc3NUZXh0ID0gIi13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbi10b3A6MSU7dG9wOjElO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7d2lkdGg6NHB4O3Bvc2l0aW9uOmFic29sdXRlIiwgbyA9IHIgPSAhMSwgbCA9ICEwLCBhLmdldENvbXB1dGVkU3R5bGUgJiYgKG8gPSAiMSUiICE9PSAoYS5nZXRDb21wdXRlZFN0eWxlKGUsIG51bGwpIHx8IHt9KS50b3AsIHIgPSAiNHB4IiA9PT0gKGEuZ2V0Q29tcHV0ZWRTdHlsZShlLCBudWxsKSB8fCB7CgkJCQkJCQl3aWR0aDogIjRweCIKCQkJCQkJfSkud2lkdGgsIGkgPSBlLmFwcGVuZENoaWxkKHhlLmNyZWF0ZUVsZW1lbnQoImRpdiIpKSwgaS5zdHlsZS5jc3NUZXh0ID0gZS5zdHlsZS5jc3NUZXh0ID0gIi13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MCIsIGkuc3R5bGUubWFyZ2luUmlnaHQgPSBpLnN0eWxlLndpZHRoID0gIjAiLCBlLnN0eWxlLndpZHRoID0gIjFweCIsIGwgPSAhcGFyc2VGbG9hdCgoYS5nZXRDb21wdXRlZFN0eWxlKGksIG51bGwpIHx8IHt9KS5tYXJnaW5SaWdodCksIGUucmVtb3ZlQ2hpbGQoaSkpLCBlLmlubmVySFRNTCA9ICI8dGFibGU+PHRyPjx0ZD48L3RkPjx0ZD50PC90ZD48L3RyPjwvdGFibGU+IiwgaSA9IGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRkIiksIGlbMF0uc3R5bGUuY3NzVGV4dCA9ICJtYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjA7ZGlzcGxheTpub25lIiwgcyA9IDAgPT09IGlbMF0ub2Zmc2V0SGVpZ2h0LCBzICYmIChpWzBdLnN0eWxlLmRpc3BsYXkgPSAiIiwgaVsxXS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiLCBzID0gMCA9PT0gaVswXS5vZmZzZXRIZWlnaHQpLCB0LnJlbW92ZUNoaWxkKG4pKQoJCQkJCX0KCQkJCQl2YXIgdCwgbiwgaSwgbywgciwgcywgbDsKCQkJCQl0ID0geGUuY3JlYXRlRWxlbWVudCgiZGl2IiksIHQuaW5uZXJIVE1MID0gIiAgPGxpbmsvPjx0YWJsZT48L3RhYmxlPjxhIGhyZWY9Jy9hJz5hPC9hPjxpbnB1dCB0eXBlPSdjaGVja2JveCcvPiIsIGkgPSB0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJhIilbMF0sIG4gPSBpICYmIGkuc3R5bGUsIG4gJiYgKG4uY3NzVGV4dCA9ICJmbG9hdDpsZWZ0O29wYWNpdHk6LjUiLCByZS5vcGFjaXR5ID0gIjAuNSIgPT09IG4ub3BhY2l0eSwgcmUuY3NzRmxvYXQgPSAhIW4uY3NzRmxvYXQsIHQuc3R5bGUuYmFja2dyb3VuZENsaXAgPSAiY29udGVudC1ib3giLCB0LmNsb25lTm9kZSghMCkuc3R5bGUuYmFja2dyb3VuZENsaXAgPSAiIiwgcmUuY2xlYXJDbG9uZVN0eWxlID0gImNvbnRlbnQtYm94IiA9PT0gdC5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCwgcmUuYm94U2l6aW5nID0gIiIgPT09IG4uYm94U2l6aW5nIHx8ICIiID09PSBuLk1vekJveFNpemluZyB8fCAiIiA9PT0gbi5XZWJraXRCb3hTaXppbmcsIGxlLmV4dGVuZChyZSwgewoJCQkJCQlyZWxpYWJsZUhpZGRlbk9mZnNldHM6IGZ1bmN0aW9uKCkgewoJCQkJCQkJcmV0dXJuIG51bGwgPT0gcyAmJiBlKCksIHMKCQkJCQkJfSwKCQkJCQkJYm94U2l6aW5nUmVsaWFibGU6IGZ1bmN0aW9uKCkgewoJCQkJCQkJcmV0dXJuIG51bGwgPT0gciAmJiBlKCksIHIKCQkJCQkJfSwKCQkJCQkJcGl4ZWxQb3NpdGlvbjogZnVuY3Rpb24oKSB7CgkJCQkJCQlyZXR1cm4gbnVsbCA9PSBvICYmIGUoKSwgbwoJCQkJCQl9LAoJCQkJCQlyZWxpYWJsZU1hcmdpblJpZ2h0OiBmdW5jdGlvbigpIHsKCQkJCQkJCXJldHVybiBudWxsID09IGwgJiYgZSgpLCBsCgkJCQkJCX0KCQkJCQl9KSkKCQkJCX0oKSwgbGUuc3dhcCA9IGZ1bmN0aW9uKGUsIHQsIG4sIGkpIHsKCQkJCQl2YXIgYSwgbywgciA9IHt9OwoJCQkJCWZvciAobyBpbiB0KSByW29dID0gZS5zdHlsZVtvXSwgZS5zdHlsZVtvXSA9IHRbb107CgkJCQkJYSA9IG4uYXBwbHkoZSwgaSB8fCBbXSk7CgkJCQkJZm9yIChvIGluIHQpIGUuc3R5bGVbb10gPSByW29dOwoJCQkJCXJldHVybiBhCgkJCQl9OwoJCQl2YXIgY3QgPSAvYWxwaGFcKFteKV0qXCkvaSwKCQkJCWR0ID0gL29wYWNpdHlccyo9XHMqKFteKV0qKS8sCgkJCQlwdCA9IC9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLywKCQkJCWh0ID0gbmV3IFJlZ0V4cCgiXigiICsgVGUgKyAiKSguKikkIiwgImkiKSwKCQkJCXV0ID0gbmV3IFJlZ0V4cCgiXihbKy1dKT0oIiArIFRlICsgIikiLCAiaSIpLAoJCQkJbXQgPSB7CgkJCQkJcG9zaXRpb246ICJhYnNvbHV0ZSIsCgkJCQkJdmlzaWJpbGl0eTogImhpZGRlbiIsCgkJCQkJZGlzcGxheTogImJsb2NrIgoJCQkJfSwKCQkJCWZ0ID0gewoJCQkJCWxldHRlclNwYWNpbmc6ICIwIiwKCQkJCQlmb250V2VpZ2h0OiAiNDAwIgoJCQkJfSwKCQkJCWd0ID0gWyJXZWJraXQiLCAiTyIsICJNb3oiLCAibXMiXTsKCQkJbGUuZXh0ZW5kKHsKCQkJCWNzc0hvb2tzOiB7CgkJCQkJb3BhY2l0eTogewoJCQkJCQlnZXQ6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQkJCWlmICh0KSB7CgkJCQkJCQkJdmFyIG4gPSBvdChlLCAib3BhY2l0eSIpOwoJCQkJCQkJCXJldHVybiAiIiA9PT0gbiA/ICIxIiA6IG4KCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0sCgkJCQljc3NOdW1iZXI6IHsKCQkJCQljb2x1bW5Db3VudDogITAsCgkJCQkJZmlsbE9wYWNpdHk6ICEwLAoJCQkJCWZsZXhHcm93OiAhMCwKCQkJCQlmbGV4U2hyaW5rOiAhMCwKCQkJCQlmb250V2VpZ2h0OiAhMCwKCQkJCQlsaW5lSGVpZ2h0OiAhMCwKCQkJCQlvcGFjaXR5OiAhMCwKCQkJCQlvcmRlcjogITAsCgkJCQkJb3JwaGFuczogITAsCgkJCQkJd2lkb3dzOiAhMCwKCQkJCQl6SW5kZXg6ICEwLAoJCQkJCXpvb206ICEwCgkJCQl9LAoJCQkJY3NzUHJvcHM6IHsKCQkJCQkiZmxvYXQiOiByZS5jc3NGbG9hdCA/ICJjc3NGbG9hdCIgOiAic3R5bGVGbG9hdCIKCQkJCX0sCgkJCQlzdHlsZTogZnVuY3Rpb24oZSwgdCwgbiwgaSkgewoJCQkJCWlmIChlICYmIDMgIT09IGUubm9kZVR5cGUgJiYgOCAhPT0gZS5ub2RlVHlwZSAmJiBlLnN0eWxlKSB7CgkJCQkJCXZhciBhLCBvLCByLCBzID0gbGUuY2FtZWxDYXNlKHQpLAoJCQkJCQkJbCA9IGUuc3R5bGU7CgkJCQkJCWlmICh0ID0gbGUuY3NzUHJvcHNbc10gfHwgKGxlLmNzc1Byb3BzW3NdID0gUChsLCBzKSksIHIgPSBsZS5jc3NIb29rc1t0XSB8fCBsZS5jc3NIb29rc1tzXSwgdm9pZCAwID09PSBuKSByZXR1cm4gciAmJiAiZ2V0IiBpbiByICYmIHZvaWQgMCAhPT0gKGEgPSByLmdldChlLCAhMSwgaSkpID8gYSA6IGxbdF07CgkJCQkJCWlmIChvID0gdHlwZW9mIG4sICJzdHJpbmciID09PSBvICYmIChhID0gdXQuZXhlYyhuKSkgJiYgKG4gPSAoYVsxXSArIDEpICogYVsyXSArIHBhcnNlRmxvYXQobGUuY3NzKGUsIHQpKSwgbyA9ICJudW1iZXIiKSwgbnVsbCAhPSBuICYmIG4gPT09IG4gJiYgKCJudW1iZXIiICE9PSBvIHx8IGxlLmNzc051bWJlcltzXSB8fCAobiArPSAicHgiKSwgcmUuY2xlYXJDbG9uZVN0eWxlIHx8ICIiICE9PSBuIHx8IDAgIT09IHQuaW5kZXhPZigiYmFja2dyb3VuZCIpIHx8IChsW3RdID0gImluaGVyaXQiKSwgIShyICYmICJzZXQiIGluIHIgJiYgdm9pZCAwID09PSAobiA9IHIuc2V0KGUsIG4sIGkpKSkpKSB0cnkgewoJCQkJCQkJbFt0XSA9IG4KCQkJCQkJfSBjYXRjaCAoYykge30KCQkJCQl9CgkJCQl9LAoJCQkJY3NzOiBmdW5jdGlvbihlLCB0LCBuLCBpKSB7CgkJCQkJdmFyIGEsIG8sIHIsIHMgPSBsZS5jYW1lbENhc2UodCk7CgkJCQkJcmV0dXJuIHQgPSBsZS5jc3NQcm9wc1tzXSB8fCAobGUuY3NzUHJvcHNbc10gPSBQKGUuc3R5bGUsIHMpKSwgciA9IGxlLmNzc0hvb2tzW3RdIHx8IGxlLmNzc0hvb2tzW3NdLCByICYmICJnZXQiIGluIHIgJiYgKG8gPSByLmdldChlLCAhMCwgbikpLCB2b2lkIDAgPT09IG8gJiYgKG8gPSBvdChlLCB0LCBpKSksICJub3JtYWwiID09PSBvICYmIHQgaW4gZnQgJiYgKG8gPSBmdFt0XSksICIiID09PSBuIHx8IG4gPyAoYSA9IHBhcnNlRmxvYXQobyksIG4gPT09ICEwIHx8IGxlLmlzTnVtZXJpYyhhKSA/IGEgfHwgMCA6IG8pIDogbwoJCQkJfQoJCQl9KSwgbGUuZWFjaChbImhlaWdodCIsICJ3aWR0aCJdLCBmdW5jdGlvbihlLCB0KSB7CgkJCQlsZS5jc3NIb29rc1t0XSA9IHsKCQkJCQlnZXQ6IGZ1bmN0aW9uKGUsIG4sIGkpIHsKCQkJCQkJcmV0dXJuIG4gPyBwdC50ZXN0KGxlLmNzcyhlLCAiZGlzcGxheSIpKSAmJiAwID09PSBlLm9mZnNldFdpZHRoID8gbGUuc3dhcChlLCBtdCwgZnVuY3Rpb24oKSB7CgkJCQkJCQlyZXR1cm4gRShlLCB0LCBpKQoJCQkJCQl9KSA6IEUoZSwgdCwgaSkgOiB2b2lkIDAKCQkJCQl9LAoJCQkJCXNldDogZnVuY3Rpb24oZSwgbiwgaSkgewoJCQkJCQl2YXIgYSA9IGkgJiYgYXQoZSk7CgkJCQkJCXJldHVybiBBKGUsIG4sIGkgPyBxKGUsIHQsIGksIHJlLmJveFNpemluZyAmJiAiYm9yZGVyLWJveCIgPT09IGxlLmNzcyhlLCAiYm94U2l6aW5nIiwgITEsIGEpLCBhKSA6IDApCgkJCQkJfQoJCQkJfQoJCQl9KSwgcmUub3BhY2l0eSB8fCAobGUuY3NzSG9va3Mub3BhY2l0eSA9IHsKCQkJCWdldDogZnVuY3Rpb24oZSwgdCkgewoJCQkJCXJldHVybiBkdC50ZXN0KCh0ICYmIGUuY3VycmVudFN0eWxlID8gZS5jdXJyZW50U3R5bGUuZmlsdGVyIDogZS5zdHlsZS5maWx0ZXIpIHx8ICIiKSA/IC4wMSAqIHBhcnNlRmxvYXQoUmVnRXhwLiQxKSArICIiIDogdCA/ICIxIiA6ICIiCgkJCQl9LAoJCQkJc2V0OiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJdmFyIG4gPSBlLnN0eWxlLAoJCQkJCQlpID0gZS5jdXJyZW50U3R5bGUsCgkJCQkJCWEgPSBsZS5pc051bWVyaWModCkgPyAiYWxwaGEob3BhY2l0eT0iICsgMTAwICogdCArICIpIiA6ICIiLAoJCQkJCQlvID0gaSAmJiBpLmZpbHRlciB8fCBuLmZpbHRlciB8fCAiIjsKCQkJCQluLnpvb20gPSAxLCAodCA+PSAxIHx8ICIiID09PSB0KSAmJiAiIiA9PT0gbGUudHJpbShvLnJlcGxhY2UoY3QsICIiKSkgJiYgbi5yZW1vdmVBdHRyaWJ1dGUgJiYgKG4ucmVtb3ZlQXR0cmlidXRlKCJmaWx0ZXIiKSwgIiIgPT09IHQgfHwgaSAmJiAhaS5maWx0ZXIpIHx8IChuLmZpbHRlciA9IGN0LnRlc3QobykgPyBvLnJlcGxhY2UoY3QsIGEpIDogbyArICIgIiArIGEpCgkJCQl9CgkJCX0pLCBsZS5jc3NIb29rcy5tYXJnaW5SaWdodCA9IFQocmUucmVsaWFibGVNYXJnaW5SaWdodCwgZnVuY3Rpb24oZSwgdCkgewoJCQkJcmV0dXJuIHQgPyBsZS5zd2FwKGUsIHsKCQkJCQlkaXNwbGF5OiAiaW5saW5lLWJsb2NrIgoJCQkJfSwgb3QsIFtlLCAibWFyZ2luUmlnaHQiXSkgOiB2b2lkIDAKCQkJfSksIGxlLmVhY2goewoJCQkJbWFyZ2luOiAiIiwKCQkJCXBhZGRpbmc6ICIiLAoJCQkJYm9yZGVyOiAiV2lkdGgiCgkJCX0sIGZ1bmN0aW9uKGUsIHQpIHsKCQkJCWxlLmNzc0hvb2tzW2UgKyB0XSA9IHsKCQkJCQlleHBhbmQ6IGZ1bmN0aW9uKG4pIHsKCQkJCQkJZm9yICh2YXIgaSA9IDAsIGEgPSB7fSwgbyA9ICJzdHJpbmciID09IHR5cGVvZiBuID8gbi5zcGxpdCgiICIpIDogW25dOyA0ID4gaTsgaSsrKSBhW2UgKyBQZVtpXSArIHRdID0gb1tpXSB8fCBvW2kgLSAyXSB8fCBvWzBdOwoJCQkJCQlyZXR1cm4gYQoJCQkJCX0KCQkJCX0sIHJ0LnRlc3QoZSkgfHwgKGxlLmNzc0hvb2tzW2UgKyB0XS5zZXQgPSBBKQoJCQl9KSwgbGUuZm4uZXh0ZW5kKHsKCQkJCWNzczogZnVuY3Rpb24oZSwgdCkgewoJCQkJCXJldHVybiBBZSh0aGlzLCBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJCXZhciBpLCBhLCBvID0ge30sCgkJCQkJCQlyID0gMDsKCQkJCQkJaWYgKGxlLmlzQXJyYXkodCkpIHsKCQkJCQkJCWZvciAoaSA9IGF0KGUpLCBhID0gdC5sZW5ndGg7IGEgPiByOyByKyspIG9bdFtyXV0gPSBsZS5jc3MoZSwgdFtyXSwgITEsIGkpOwoJCQkJCQkJcmV0dXJuIG8KCQkJCQkJfQoJCQkJCQlyZXR1cm4gdm9pZCAwICE9PSBuID8gbGUuc3R5bGUoZSwgdCwgbikgOiBsZS5jc3MoZSwgdCkKCQkJCQl9LCBlLCB0LCBhcmd1bWVudHMubGVuZ3RoID4gMSkKCQkJCX0sCgkJCQlzaG93OiBmdW5jdGlvbigpIHsKCQkJCQlyZXR1cm4gSSh0aGlzLCAhMCkKCQkJCX0sCgkJCQloaWRlOiBmdW5jdGlvbigpIHsKCQkJCQlyZXR1cm4gSSh0aGlzKQoJCQkJfSwKCQkJCXRvZ2dsZTogZnVuY3Rpb24oZSkgewoJCQkJCXJldHVybiAiYm9vbGVhbiIgPT0gdHlwZW9mIGUgPyBlID8gdGhpcy5zaG93KCkgOiB0aGlzLmhpZGUoKSA6IHRoaXMuZWFjaChmdW5jdGlvbigpIHsKCQkJCQkJSWUodGhpcykgPyBsZSh0aGlzKS5zaG93KCkgOiBsZSh0aGlzKS5oaWRlKCkKCQkJCQl9KQoJCQkJfQoJCQl9KSwgbGUuVHdlZW4gPSBPLCBPLnByb3RvdHlwZSA9IHsKCQkJCWNvbnN0cnVjdG9yOiBPLAoJCQkJaW5pdDogZnVuY3Rpb24oZSwgdCwgbiwgaSwgYSwgbykgewoJCQkJCXRoaXMuZWxlbSA9IGUsIHRoaXMucHJvcCA9IG4sIHRoaXMuZWFzaW5nID0gYSB8fCAic3dpbmciLCB0aGlzLm9wdGlvbnMgPSB0LCB0aGlzLnN0YXJ0ID0gdGhpcy5ub3cgPSB0aGlzLmN1cigpLCB0aGlzLmVuZCA9IGksIHRoaXMudW5pdCA9IG8gfHwgKGxlLmNzc051bWJlcltuXSA/ICIiIDogInB4IikKCQkJCX0sCgkJCQljdXI6IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gTy5wcm9wSG9va3NbdGhpcy5wcm9wXTsKCQkJCQlyZXR1cm4gZSAmJiBlLmdldCA/IGUuZ2V0KHRoaXMpIDogTy5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpCgkJCQl9LAoJCQkJcnVuOiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQsIG4gPSBPLnByb3BIb29rc1t0aGlzLnByb3BdOwoJCQkJCXJldHVybiB0aGlzLm9wdGlvbnMuZHVyYXRpb24gPyB0aGlzLnBvcyA9IHQgPSBsZS5lYXNpbmdbdGhpcy5lYXNpbmddKGUsIHRoaXMub3B0aW9ucy5kdXJhdGlvbiAqIGUsIDAsIDEsIHRoaXMub3B0aW9ucy5kdXJhdGlvbikgOiB0aGlzLnBvcyA9IHQgPSBlLCB0aGlzLm5vdyA9ICh0aGlzLmVuZCAtIHRoaXMuc3RhcnQpICogdCArIHRoaXMuc3RhcnQsIHRoaXMub3B0aW9ucy5zdGVwICYmIHRoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLCB0aGlzLm5vdywgdGhpcyksIG4gJiYgbi5zZXQgPyBuLnNldCh0aGlzKSA6IE8ucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKSwgdGhpcwoJCQkJfQoJCQl9LCBPLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZSA9IE8ucHJvdG90eXBlLCBPLnByb3BIb29rcyA9IHsKCQkJCV9kZWZhdWx0OiB7CgkJCQkJZ2V0OiBmdW5jdGlvbihlKSB7CgkJCQkJCXZhciB0OwoJCQkJCQlyZXR1cm4gbnVsbCA9PSBlLmVsZW1bZS5wcm9wXSB8fCBlLmVsZW0uc3R5bGUgJiYgbnVsbCAhPSBlLmVsZW0uc3R5bGVbZS5wcm9wXSA/ICh0ID0gbGUuY3NzKGUuZWxlbSwgZS5wcm9wLCAiIiksIHQgJiYgImF1dG8iICE9PSB0ID8gdCA6IDApIDogZS5lbGVtW2UucHJvcF0KCQkJCQl9LAoJCQkJCXNldDogZnVuY3Rpb24oZSkgewoJCQkJCQlsZS5meC5zdGVwW2UucHJvcF0gPyBsZS5meC5zdGVwW2UucHJvcF0oZSkgOiBlLmVsZW0uc3R5bGUgJiYgKG51bGwgIT0gZS5lbGVtLnN0eWxlW2xlLmNzc1Byb3BzW2UucHJvcF1dIHx8IGxlLmNzc0hvb2tzW2UucHJvcF0pID8gbGUuc3R5bGUoZS5lbGVtLCBlLnByb3AsIGUubm93ICsgZS51bml0KSA6IGUuZWxlbVtlLnByb3BdID0gZS5ub3cKCQkJCQl9CgkJCQl9CgkJCX0sIE8ucHJvcEhvb2tzLnNjcm9sbFRvcCA9IE8ucHJvcEhvb2tzLnNjcm9sbExlZnQgPSB7CgkJCQlzZXQ6IGZ1bmN0aW9uKGUpIHsKCQkJCQllLmVsZW0ubm9kZVR5cGUgJiYgZS5lbGVtLnBhcmVudE5vZGUgJiYgKGUuZWxlbVtlLnByb3BdID0gZS5ub3cpCgkJCQl9CgkJCX0sIGxlLmVhc2luZyA9IHsKCQkJCWxpbmVhcjogZnVuY3Rpb24oZSkgewoJCQkJCXJldHVybiBlCgkJCQl9LAoJCQkJc3dpbmc6IGZ1bmN0aW9uKGUpIHsKCQkJCQlyZXR1cm4gLjUgLSBNYXRoLmNvcyhlICogTWF0aC5QSSkgLyAyCgkJCQl9CgkJCX0sIGxlLmZ4ID0gTy5wcm90b3R5cGUuaW5pdCwgbGUuZnguc3RlcCA9IHt9OwoJCQl2YXIgX3QsIHh0LCB3dCA9IC9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLywKCQkJCXZ0ID0gbmV3IFJlZ0V4cCgiXig/OihbKy1dKT18KSgiICsgVGUgKyAiKShbYS16JV0qKSQiLCAiaSIpLAoJCQkJYnQgPSAvcXVldWVIb29rcyQvLAoJCQkJeXQgPSBbUl0sCgkJCQlrdCA9IHsKCQkJCQkiKiI6IFsKCQkJCQkJZnVuY3Rpb24oZSwgdCkgewoJCQkJCQkJdmFyIG4gPSB0aGlzLmNyZWF0ZVR3ZWVuKGUsIHQpLAoJCQkJCQkJCWkgPSBuLmN1cigpLAoJCQkJCQkJCWEgPSB2dC5leGVjKHQpLAoJCQkJCQkJCW8gPSBhICYmIGFbM10gfHwgKGxlLmNzc051bWJlcltlXSA/ICIiIDogInB4IiksCgkJCQkJCQkJciA9IChsZS5jc3NOdW1iZXJbZV0gfHwgInB4IiAhPT0gbyAmJiAraSkgJiYgdnQuZXhlYyhsZS5jc3Mobi5lbGVtLCBlKSksCgkJCQkJCQkJcyA9IDEsCgkJCQkJCQkJbCA9IDIwOwoJCQkJCQkJaWYgKHIgJiYgclszXSAhPT0gbykgewoJCQkJCQkJCW8gPSBvIHx8IHJbM10sIGEgPSBhIHx8IFtdLCByID0gK2kgfHwgMTsKCQkJCQkJCQlkbyBzID0gcyB8fCAiLjUiLCByIC89IHMsIGxlLnN0eWxlKG4uZWxlbSwgZSwgciArIG8pOyB3aGlsZSAocyAhPT0gKHMgPSBuLmN1cigpIC8gaSkgJiYgMSAhPT0gcyAmJiAtLWwpCgkJCQkJCQl9CgkJCQkJCQlyZXR1cm4gYSAmJiAociA9IG4uc3RhcnQgPSArciB8fCAraSB8fCAwLCBuLnVuaXQgPSBvLCBuLmVuZCA9IGFbMV0gPyByICsgKGFbMV0gKyAxKSAqIGFbMl0gOiArYVsyXSksIG4KCQkJCQkJfQoJCQkJCV0KCQkJCX07CgkJCWxlLkFuaW1hdGlvbiA9IGxlLmV4dGVuZCgkLCB7CgkJCQkJdHdlZW5lcjogZnVuY3Rpb24oZSwgdCkgewoJCQkJCQlsZS5pc0Z1bmN0aW9uKGUpID8gKHQgPSBlLCBlID0gWyIqIl0pIDogZSA9IGUuc3BsaXQoIiAiKTsKCQkJCQkJZm9yICh2YXIgbiwgaSA9IDAsIGEgPSBlLmxlbmd0aDsgYSA+IGk7IGkrKykgbiA9IGVbaV0sIGt0W25dID0ga3Rbbl0gfHwgW10sIGt0W25dLnVuc2hpZnQodCkKCQkJCQl9LAoJCQkJCXByZWZpbHRlcjogZnVuY3Rpb24oZSwgdCkgewoJCQkJCQl0ID8geXQudW5zaGlmdChlKSA6IHl0LnB1c2goZSkKCQkJCQl9CgkJCQl9KSwgbGUuc3BlZWQgPSBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJdmFyIGkgPSBlICYmICJvYmplY3QiID09IHR5cGVvZiBlID8gbGUuZXh0ZW5kKHt9LCBlKSA6IHsKCQkJCQkJY29tcGxldGU6IG4gfHwgIW4gJiYgdCB8fCBsZS5pc0Z1bmN0aW9uKGUpICYmIGUsCgkJCQkJCWR1cmF0aW9uOiBlLAoJCQkJCQllYXNpbmc6IG4gJiYgdCB8fCB0ICYmICFsZS5pc0Z1bmN0aW9uKHQpICYmIHQKCQkJCQl9OwoJCQkJCXJldHVybiBpLmR1cmF0aW9uID0gbGUuZngub2ZmID8gMCA6ICJudW1iZXIiID09IHR5cGVvZiBpLmR1cmF0aW9uID8gaS5kdXJhdGlvbiA6IGkuZHVyYXRpb24gaW4gbGUuZnguc3BlZWRzID8gbGUuZnguc3BlZWRzW2kuZHVyYXRpb25dIDogbGUuZnguc3BlZWRzLl9kZWZhdWx0LCAobnVsbCA9PSBpLnF1ZXVlIHx8IGkucXVldWUgPT09ICEwKSAmJiAoaS5xdWV1ZSA9ICJmeCIpLCBpLm9sZCA9IGkuY29tcGxldGUsIGkuY29tcGxldGUgPSBmdW5jdGlvbigpIHsKCQkJCQkJbGUuaXNGdW5jdGlvbihpLm9sZCkgJiYgaS5vbGQuY2FsbCh0aGlzKSwgaS5xdWV1ZSAmJiBsZS5kZXF1ZXVlKHRoaXMsIGkucXVldWUpCgkJCQkJfSwgaQoJCQkJfSwgbGUuZm4uZXh0ZW5kKHsKCQkJCQlmYWRlVG86IGZ1bmN0aW9uKGUsIHQsIG4sIGkpIHsKCQkJCQkJcmV0dXJuIHRoaXMuZmlsdGVyKEllKS5jc3MoIm9wYWNpdHkiLCAwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7CgkJCQkJCQlvcGFjaXR5OiB0CgkJCQkJCX0sIGUsIG4sIGkpCgkJCQkJfSwKCQkJCQlhbmltYXRlOiBmdW5jdGlvbihlLCB0LCBuLCBpKSB7CgkJCQkJCXZhciBhID0gbGUuaXNFbXB0eU9iamVjdChlKSwKCQkJCQkJCW8gPSBsZS5zcGVlZCh0LCBuLCBpKSwKCQkJCQkJCXIgPSBmdW5jdGlvbigpIHsKCQkJCQkJCQl2YXIgdCA9ICQodGhpcywgbGUuZXh0ZW5kKHt9LCBlKSwgbyk7CgkJCQkJCQkJKGEgfHwgbGUuX2RhdGEodGhpcywgImZpbmlzaCIpKSAmJiB0LnN0b3AoITApCgkJCQkJCQl9OwoJCQkJCQlyZXR1cm4gci5maW5pc2ggPSByLCBhIHx8IG8ucXVldWUgPT09ICExID8gdGhpcy5lYWNoKHIpIDogdGhpcy5xdWV1ZShvLnF1ZXVlLCByKQoJCQkJCX0sCgkJCQkJc3RvcDogZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCQl2YXIgaSA9IGZ1bmN0aW9uKGUpIHsKCQkJCQkJCXZhciB0ID0gZS5zdG9wOwoJCQkJCQkJZGVsZXRlIGUuc3RvcCwgdChuKQoJCQkJCQl9OwoJCQkJCQlyZXR1cm4gInN0cmluZyIgIT0gdHlwZW9mIGUgJiYgKG4gPSB0LCB0ID0gZSwgZSA9IHZvaWQgMCksIHQgJiYgZSAhPT0gITEgJiYgdGhpcy5xdWV1ZShlIHx8ICJmeCIsIFtdKSwgdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJCQkJdmFyIHQgPSAhMCwKCQkJCQkJCQlhID0gbnVsbCAhPSBlICYmIGUgKyAicXVldWVIb29rcyIsCgkJCQkJCQkJbyA9IGxlLnRpbWVycywKCQkJCQkJCQlyID0gbGUuX2RhdGEodGhpcyk7CgkJCQkJCQlpZiAoYSkgclthXSAmJiByW2FdLnN0b3AgJiYgaShyW2FdKTsKCQkJCQkJCWVsc2UKCQkJCQkJCQlmb3IgKGEgaW4gcikgclthXSAmJiByW2FdLnN0b3AgJiYgYnQudGVzdChhKSAmJiBpKHJbYV0pOwoJCQkJCQkJZm9yIChhID0gby5sZW5ndGg7IGEtLTspIG9bYV0uZWxlbSAhPT0gdGhpcyB8fCBudWxsICE9IGUgJiYgb1thXS5xdWV1ZSAhPT0gZSB8fCAob1thXS5hbmltLnN0b3AobiksIHQgPSAhMSwgby5zcGxpY2UoYSwgMSkpOwoJCQkJCQkJKHQgfHwgIW4pICYmIGxlLmRlcXVldWUodGhpcywgZSkKCQkJCQkJfSkKCQkJCQl9LAoJCQkJCWZpbmlzaDogZnVuY3Rpb24oZSkgewoJCQkJCQlyZXR1cm4gZSAhPT0gITEgJiYgKGUgPSBlIHx8ICJmeCIpLCB0aGlzLmVhY2goZnVuY3Rpb24oKSB7CgkJCQkJCQl2YXIgdCwgbiA9IGxlLl9kYXRhKHRoaXMpLAoJCQkJCQkJCWkgPSBuW2UgKyAicXVldWUiXSwKCQkJCQkJCQlhID0gbltlICsgInF1ZXVlSG9va3MiXSwKCQkJCQkJCQlvID0gbGUudGltZXJzLAoJCQkJCQkJCXIgPSBpID8gaS5sZW5ndGggOiAwOwoJCQkJCQkJZm9yIChuLmZpbmlzaCA9ICEwLCBsZS5xdWV1ZSh0aGlzLCBlLCBbXSksIGEgJiYgYS5zdG9wICYmIGEuc3RvcC5jYWxsKHRoaXMsICEwKSwgdCA9IG8ubGVuZ3RoOyB0LS07KSBvW3RdLmVsZW0gPT09IHRoaXMgJiYgb1t0XS5xdWV1ZSA9PT0gZSAmJiAob1t0XS5hbmltLnN0b3AoITApLCBvLnNwbGljZSh0LCAxKSk7CgkJCQkJCQlmb3IgKHQgPSAwOyByID4gdDsgdCsrKSBpW3RdICYmIGlbdF0uZmluaXNoICYmIGlbdF0uZmluaXNoLmNhbGwodGhpcyk7CgkJCQkJCQlkZWxldGUgbi5maW5pc2gKCQkJCQkJfSkKCQkJCQl9CgkJCQl9KSwgbGUuZWFjaChbInRvZ2dsZSIsICJzaG93IiwgImhpZGUiXSwgZnVuY3Rpb24oZSwgdCkgewoJCQkJCXZhciBuID0gbGUuZm5bdF07CgkJCQkJbGUuZm5bdF0gPSBmdW5jdGlvbihlLCBpLCBhKSB7CgkJCQkJCXJldHVybiBudWxsID09IGUgfHwgImJvb2xlYW4iID09IHR5cGVvZiBlID8gbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDogdGhpcy5hbmltYXRlKEQodCwgITApLCBlLCBpLCBhKQoJCQkJCX0KCQkJCX0pLCBsZS5lYWNoKHsKCQkJCQlzbGlkZURvd246IEQoInNob3ciKSwKCQkJCQlzbGlkZVVwOiBEKCJoaWRlIiksCgkJCQkJc2xpZGVUb2dnbGU6IEQoInRvZ2dsZSIpLAoJCQkJCWZhZGVJbjogewoJCQkJCQlvcGFjaXR5OiAic2hvdyIKCQkJCQl9LAoJCQkJCWZhZGVPdXQ6IHsKCQkJCQkJb3BhY2l0eTogImhpZGUiCgkJCQkJfSwKCQkJCQlmYWRlVG9nZ2xlOiB7CgkJCQkJCW9wYWNpdHk6ICJ0b2dnbGUiCgkJCQkJfQoJCQkJfSwgZnVuY3Rpb24oZSwgdCkgewoJCQkJCWxlLmZuW2VdID0gZnVuY3Rpb24oZSwgbiwgaSkgewoJCQkJCQlyZXR1cm4gdGhpcy5hbmltYXRlKHQsIGUsIG4sIGkpCgkJCQkJfQoJCQkJfSksIGxlLnRpbWVycyA9IFtdLCBsZS5meC50aWNrID0gZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUsIHQgPSBsZS50aW1lcnMsCgkJCQkJCW4gPSAwOwoJCQkJCWZvciAoX3QgPSBsZS5ub3coKTsgbiA8IHQubGVuZ3RoOyBuKyspIGUgPSB0W25dLCBlKCkgfHwgdFtuXSAhPT0gZSB8fCB0LnNwbGljZShuLS0sIDEpOwoJCQkJCXQubGVuZ3RoIHx8IGxlLmZ4LnN0b3AoKSwgX3QgPSB2b2lkIDAKCQkJCX0sIGxlLmZ4LnRpbWVyID0gZnVuY3Rpb24oZSkgewoJCQkJCWxlLnRpbWVycy5wdXNoKGUpLCBlKCkgPyBsZS5meC5zdGFydCgpIDogbGUudGltZXJzLnBvcCgpCgkJCQl9LCBsZS5meC5pbnRlcnZhbCA9IDEzLCBsZS5meC5zdGFydCA9IGZ1bmN0aW9uKCkgewoJCQkJCXh0IHx8ICh4dCA9IHNldEludGVydmFsKGxlLmZ4LnRpY2ssIGxlLmZ4LmludGVydmFsKSkKCQkJCX0sIGxlLmZ4LnN0b3AgPSBmdW5jdGlvbigpIHsKCQkJCQljbGVhckludGVydmFsKHh0KSwgeHQgPSBudWxsCgkJCQl9LCBsZS5meC5zcGVlZHMgPSB7CgkJCQkJc2xvdzogNjAwLAoJCQkJCWZhc3Q6IDIwMCwKCQkJCQlfZGVmYXVsdDogNDAwCgkJCQl9LCBsZS5mbi5kZWxheSA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQlyZXR1cm4gZSA9IGxlLmZ4ID8gbGUuZnguc3BlZWRzW2VdIHx8IGUgOiBlLCB0ID0gdCB8fCAiZngiLCB0aGlzLnF1ZXVlKHQsIGZ1bmN0aW9uKHQsIG4pIHsKCQkJCQkJdmFyIGkgPSBzZXRUaW1lb3V0KHQsIGUpOwoJCQkJCQluLnN0b3AgPSBmdW5jdGlvbigpIHsKCQkJCQkJCWNsZWFyVGltZW91dChpKQoJCQkJCQl9CgkJCQkJfSkKCQkJCX0sCgkJCQlmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSwgdCwgbiwgaSwgYTsKCQkJCQl0ID0geGUuY3JlYXRlRWxlbWVudCgiZGl2IiksIHQuc2V0QXR0cmlidXRlKCJjbGFzc05hbWUiLCAidCIpLCB0LmlubmVySFRNTCA9ICIgIDxsaW5rLz48dGFibGU+PC90YWJsZT48YSBocmVmPScvYSc+YTwvYT48aW5wdXQgdHlwZT0nY2hlY2tib3gnLz4iLCBpID0gdC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYSIpWzBdLCBuID0geGUuY3JlYXRlRWxlbWVudCgic2VsZWN0IiksIGEgPSBuLmFwcGVuZENoaWxkKHhlLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKSwgZSA9IHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0IilbMF0sIGkuc3R5bGUuY3NzVGV4dCA9ICJ0b3A6MXB4IiwgcmUuZ2V0U2V0QXR0cmlidXRlID0gInQiICE9PSB0LmNsYXNzTmFtZSwgcmUuc3R5bGUgPSAvdG9wLy50ZXN0KGkuZ2V0QXR0cmlidXRlKCJzdHlsZSIpKSwgcmUuaHJlZk5vcm1hbGl6ZWQgPSAiL2EiID09PSBpLmdldEF0dHJpYnV0ZSgiaHJlZiIpLCByZS5jaGVja09uID0gISFlLnZhbHVlLCByZS5vcHRTZWxlY3RlZCA9IGEuc2VsZWN0ZWQsIHJlLmVuY3R5cGUgPSAhIXhlLmNyZWF0ZUVsZW1lbnQoImZvcm0iKS5lbmN0eXBlLCBuLmRpc2FibGVkID0gITAsIHJlLm9wdERpc2FibGVkID0gIWEuZGlzYWJsZWQsIGUgPSB4ZS5jcmVhdGVFbGVtZW50KCJpbnB1dCIpLCBlLnNldEF0dHJpYnV0ZSgidmFsdWUiLCAiIiksIHJlLmlucHV0ID0gIiIgPT09IGUuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpLCBlLnZhbHVlID0gInQiLCBlLnNldEF0dHJpYnV0ZSgidHlwZSIsICJyYWRpbyIpLCByZS5yYWRpb1ZhbHVlID0gInQiID09PSBlLnZhbHVlCgkJCQl9KCk7CgkJCXZhciB6dCA9IC9cci9nOwoJCQlsZS5mbi5leHRlbmQoewoJCQkJdmFsOiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQsIG4sIGksIGEgPSB0aGlzWzBdOyB7CgkJCQkJCWlmIChhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gaSA9IGxlLmlzRnVuY3Rpb24oZSksIHRoaXMuZWFjaChmdW5jdGlvbihuKSB7CgkJCQkJCQl2YXIgYTsKCQkJCQkJCTEgPT09IHRoaXMubm9kZVR5cGUgJiYgKGEgPSBpID8gZS5jYWxsKHRoaXMsIG4sIGxlKHRoaXMpLnZhbCgpKSA6IGUsIG51bGwgPT0gYSA/IGEgPSAiIiA6ICJudW1iZXIiID09IHR5cGVvZiBhID8gYSArPSAiIiA6IGxlLmlzQXJyYXkoYSkgJiYgKGEgPSBsZS5tYXAoYSwgZnVuY3Rpb24oZSkgewoJCQkJCQkJCXJldHVybiBudWxsID09IGUgPyAiIiA6IGUgKyAiIgoJCQkJCQkJfSkpLCB0ID0gbGUudmFsSG9va3NbdGhpcy50eXBlXSB8fCBsZS52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLCB0ICYmICJzZXQiIGluIHQgJiYgdm9pZCAwICE9PSB0LnNldCh0aGlzLCBhLCAidmFsdWUiKSB8fCAodGhpcy52YWx1ZSA9IGEpKQoJCQkJCQl9KTsKCQkJCQkJaWYgKGEpIHJldHVybiB0ID0gbGUudmFsSG9va3NbYS50eXBlXSB8fCBsZS52YWxIb29rc1thLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLCB0ICYmICJnZXQiIGluIHQgJiYgdm9pZCAwICE9PSAobiA9IHQuZ2V0KGEsICJ2YWx1ZSIpKSA/IG4gOiAobiA9IGEudmFsdWUsICJzdHJpbmciID09IHR5cGVvZiBuID8gbi5yZXBsYWNlKHp0LCAiIikgOiBudWxsID09IG4gPyAiIiA6IG4pCgkJCQkJfQoJCQkJfQoJCQl9KSwgbGUuZXh0ZW5kKHsKCQkJCXZhbEhvb2tzOiB7CgkJCQkJb3B0aW9uOiB7CgkJCQkJCWdldDogZnVuY3Rpb24oZSkgewoJCQkJCQkJdmFyIHQgPSBsZS5maW5kLmF0dHIoZSwgInZhbHVlIik7CgkJCQkJCQlyZXR1cm4gbnVsbCAhPSB0ID8gdCA6IGxlLnRyaW0obGUudGV4dChlKSkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJc2VsZWN0OiB7CgkJCQkJCWdldDogZnVuY3Rpb24oZSkgewoJCQkJCQkJZm9yICh2YXIgdCwgbiwgaSA9IGUub3B0aW9ucywgYSA9IGUuc2VsZWN0ZWRJbmRleCwgbyA9ICJzZWxlY3Qtb25lIiA9PT0gZS50eXBlIHx8IDAgPiBhLCByID0gbyA/IG51bGwgOiBbXSwgcyA9IG8gPyBhICsgMSA6IGkubGVuZ3RoLCBsID0gMCA+IGEgPyBzIDogbyA/IGEgOiAwOyBzID4gbDsgbCsrKQoJCQkJCQkJCWlmIChuID0gaVtsXSwgKG4uc2VsZWN0ZWQgfHwgbCA9PT0gYSkgJiYgKHJlLm9wdERpc2FibGVkID8gIW4uZGlzYWJsZWQgOiBudWxsID09PSBuLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKSkgJiYgKCFuLnBhcmVudE5vZGUuZGlzYWJsZWQgfHwgIWxlLm5vZGVOYW1lKG4ucGFyZW50Tm9kZSwgIm9wdGdyb3VwIikpKSB7CgkJCQkJCQkJCWlmICh0ID0gbGUobikudmFsKCksIG8pIHJldHVybiB0OwoJCQkJCQkJCQlyLnB1c2godCkKCQkJCQkJCQl9CgkJCQkJCQlyZXR1cm4gcgoJCQkJCQl9LAoJCQkJCQlzZXQ6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQkJCWZvciAodmFyIG4sIGksIGEgPSBlLm9wdGlvbnMsIG8gPSBsZS5tYWtlQXJyYXkodCksIHIgPSBhLmxlbmd0aDsgci0tOykKCQkJCQkJCQlpZiAoaSA9IGFbcl0sIGxlLmluQXJyYXkobGUudmFsSG9va3Mub3B0aW9uLmdldChpKSwgbykgPj0gMCkgdHJ5IHsKCQkJCQkJCQkJaS5zZWxlY3RlZCA9IG4gPSAhMAoJCQkJCQkJCX0gY2F0Y2ggKHMpIHsKCQkJCQkJCQkJaS5zY3JvbGxIZWlnaHQKCQkJCQkJCQl9IGVsc2UgaS5zZWxlY3RlZCA9ICExOwoJCQkJCQkJcmV0dXJuIG4gfHwgKGUuc2VsZWN0ZWRJbmRleCA9IC0xKSwgYQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9KSwgbGUuZWFjaChbInJhZGlvIiwgImNoZWNrYm94Il0sIGZ1bmN0aW9uKCkgewoJCQkJbGUudmFsSG9va3NbdGhpc10gPSB7CgkJCQkJc2V0OiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCXJldHVybiBsZS5pc0FycmF5KHQpID8gZS5jaGVja2VkID0gbGUuaW5BcnJheShsZShlKS52YWwoKSwgdCkgPj0gMCA6IHZvaWQgMAoJCQkJCX0KCQkJCX0sIHJlLmNoZWNrT24gfHwgKGxlLnZhbEhvb2tzW3RoaXNdLmdldCA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlyZXR1cm4gbnVsbCA9PT0gZS5nZXRBdHRyaWJ1dGUoInZhbHVlIikgPyAib24iIDogZS52YWx1ZQoJCQkJfSkKCQkJfSk7CgkJCXZhciBCdCwganQsIEN0ID0gbGUuZXhwci5hdHRySGFuZGxlLAoJCQkJU3QgPSAvXig/OmNoZWNrZWR8c2VsZWN0ZWQpJC9pLAoJCQkJTnQgPSByZS5nZXRTZXRBdHRyaWJ1dGUsCgkJCQlUdCA9IHJlLmlucHV0OwoJCQlsZS5mbi5leHRlbmQoewoJCQkJYXR0cjogZnVuY3Rpb24oZSwgdCkgewoJCQkJCXJldHVybiBBZSh0aGlzLCBsZS5hdHRyLCBlLCB0LCBhcmd1bWVudHMubGVuZ3RoID4gMSkKCQkJCX0sCgkJCQlyZW1vdmVBdHRyOiBmdW5jdGlvbihlKSB7CgkJCQkJcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHsKCQkJCQkJbGUucmVtb3ZlQXR0cih0aGlzLCBlKQoJCQkJCX0pCgkJCQl9CgkJCX0pLCBsZS5leHRlbmQoewoJCQkJYXR0cjogZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCXZhciBpLCBhLCBvID0gZS5ub2RlVHlwZTsKCQkJCQlpZiAoZSAmJiAzICE9PSBvICYmIDggIT09IG8gJiYgMiAhPT0gbykgcmV0dXJuIHR5cGVvZiBlLmdldEF0dHJpYnV0ZSA9PT0gQ2UgPyBsZS5wcm9wKGUsIHQsIG4pIDogKDEgPT09IG8gJiYgbGUuaXNYTUxEb2MoZSkgfHwgKHQgPSB0LnRvTG93ZXJDYXNlKCksIGkgPSBsZS5hdHRySG9va3NbdF0gfHwgKGxlLmV4cHIubWF0Y2guYm9vbC50ZXN0KHQpID8ganQgOiBCdCkpLCB2b2lkIDAgPT09IG4gPyBpICYmICJnZXQiIGluIGkgJiYgbnVsbCAhPT0gKGEgPSBpLmdldChlLCB0KSkgPyBhIDogKGEgPSBsZS5maW5kLmF0dHIoZSwgdCksIG51bGwgPT0gYSA/IHZvaWQgMCA6IGEpIDogbnVsbCAhPT0gbiA/IGkgJiYgInNldCIgaW4gaSAmJiB2b2lkIDAgIT09IChhID0gaS5zZXQoZSwgbiwgdCkpID8gYSA6IChlLnNldEF0dHJpYnV0ZSh0LCBuICsgIiIpLCBuKSA6IHZvaWQgbGUucmVtb3ZlQXR0cihlLCB0KSkKCQkJCX0sCgkJCQlyZW1vdmVBdHRyOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJdmFyIG4sIGksIGEgPSAwLAoJCQkJCQlvID0gdCAmJiB0Lm1hdGNoKGtlKTsKCQkJCQlpZiAobyAmJiAxID09PSBlLm5vZGVUeXBlKQoJCQkJCQlmb3IgKDsgbiA9IG9bYSsrXTspIGkgPSBsZS5wcm9wRml4W25dIHx8IG4sIGxlLmV4cHIubWF0Y2guYm9vbC50ZXN0KG4pID8gVHQgJiYgTnQgfHwgIVN0LnRlc3QobikgPyBlW2ldID0gITEgOiBlW2xlLmNhbWVsQ2FzZSgiZGVmYXVsdC0iICsgbildID0gZVtpXSA9ICExIDogbGUuYXR0cihlLCBuLCAiIiksIGUucmVtb3ZlQXR0cmlidXRlKE50ID8gbiA6IGkpCgkJCQl9LAoJCQkJYXR0ckhvb2tzOiB7CgkJCQkJdHlwZTogewoJCQkJCQlzZXQ6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQkJCWlmICghcmUucmFkaW9WYWx1ZSAmJiAicmFkaW8iID09PSB0ICYmIGxlLm5vZGVOYW1lKGUsICJpbnB1dCIpKSB7CgkJCQkJCQkJdmFyIG4gPSBlLnZhbHVlOwoJCQkJCQkJCXJldHVybiBlLnNldEF0dHJpYnV0ZSgidHlwZSIsIHQpLCBuICYmIChlLnZhbHVlID0gbiksIHQKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfSksIGp0ID0gewoJCQkJc2V0OiBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJcmV0dXJuIHQgPT09ICExID8gbGUucmVtb3ZlQXR0cihlLCBuKSA6IFR0ICYmIE50IHx8ICFTdC50ZXN0KG4pID8gZS5zZXRBdHRyaWJ1dGUoIU50ICYmIGxlLnByb3BGaXhbbl0gfHwgbiwgbikgOiBlW2xlLmNhbWVsQ2FzZSgiZGVmYXVsdC0iICsgbildID0gZVtuXSA9ICEwLCBuCgkJCQl9CgkJCX0sIGxlLmVhY2gobGUuZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCgvXHcrL2cpLCBmdW5jdGlvbihlLCB0KSB7CgkJCQl2YXIgbiA9IEN0W3RdIHx8IGxlLmZpbmQuYXR0cjsKCQkJCUN0W3RdID0gVHQgJiYgTnQgfHwgIVN0LnRlc3QodCkgPyBmdW5jdGlvbihlLCB0LCBpKSB7CgkJCQkJdmFyIGEsIG87CgkJCQkJcmV0dXJuIGkgfHwgKG8gPSBDdFt0XSwgQ3RbdF0gPSBhLCBhID0gbnVsbCAhPSBuKGUsIHQsIGkpID8gdC50b0xvd2VyQ2FzZSgpIDogbnVsbCwgQ3RbdF0gPSBvKSwgYQoJCQkJfSA6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQlyZXR1cm4gbiA/IHZvaWQgMCA6IGVbbGUuY2FtZWxDYXNlKCJkZWZhdWx0LSIgKyB0KV0gPyB0LnRvTG93ZXJDYXNlKCkgOiBudWxsCgkJCQl9CgkJCX0pLCBUdCAmJiBOdCB8fCAobGUuYXR0ckhvb2tzLnZhbHVlID0gewoJCQkJc2V0OiBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJcmV0dXJuIGxlLm5vZGVOYW1lKGUsICJpbnB1dCIpID8gdm9pZChlLmRlZmF1bHRWYWx1ZSA9IHQpIDogQnQgJiYgQnQuc2V0KGUsIHQsIG4pCgkJCQl9CgkJCX0pLCBOdCB8fCAoQnQgPSB7CgkJCQlzZXQ6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQl2YXIgaSA9IGUuZ2V0QXR0cmlidXRlTm9kZShuKTsKCQkJCQlyZXR1cm4gaSB8fCBlLnNldEF0dHJpYnV0ZU5vZGUoaSA9IGUub3duZXJEb2N1bWVudC5jcmVhdGVBdHRyaWJ1dGUobikpLCBpLnZhbHVlID0gdCArPSAiIiwgInZhbHVlIiA9PT0gbiB8fCB0ID09PSBlLmdldEF0dHJpYnV0ZShuKSA/IHQgOiB2b2lkIDAKCQkJCX0KCQkJfSwgQ3QuaWQgPSBDdC5uYW1lID0gQ3QuY29vcmRzID0gZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJdmFyIGk7CgkJCQlyZXR1cm4gbiA/IHZvaWQgMCA6IChpID0gZS5nZXRBdHRyaWJ1dGVOb2RlKHQpKSAmJiAiIiAhPT0gaS52YWx1ZSA/IGkudmFsdWUgOiBudWxsCgkJCX0sIGxlLnZhbEhvb2tzLmJ1dHRvbiA9IHsKCQkJCWdldDogZnVuY3Rpb24oZSwgdCkgewoJCQkJCXZhciBuID0gZS5nZXRBdHRyaWJ1dGVOb2RlKHQpOwoJCQkJCXJldHVybiBuICYmIG4uc3BlY2lmaWVkID8gbi52YWx1ZSA6IHZvaWQgMAoJCQkJfSwKCQkJCXNldDogQnQuc2V0CgkJCX0sIGxlLmF0dHJIb29rcy5jb250ZW50ZWRpdGFibGUgPSB7CgkJCQlzZXQ6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQlCdC5zZXQoZSwgIiIgPT09IHQgPyAhMSA6IHQsIG4pCgkJCQl9CgkJCX0sIGxlLmVhY2goWyJ3aWR0aCIsICJoZWlnaHQiXSwgZnVuY3Rpb24oZSwgdCkgewoJCQkJbGUuYXR0ckhvb2tzW3RdID0gewoJCQkJCXNldDogZnVuY3Rpb24oZSwgbikgewoJCQkJCQlyZXR1cm4gIiIgPT09IG4gPyAoZS5zZXRBdHRyaWJ1dGUodCwgImF1dG8iKSwgbikgOiB2b2lkIDAKCQkJCQl9CgkJCQl9CgkJCX0pKSwgcmUuc3R5bGUgfHwgKGxlLmF0dHJIb29rcy5zdHlsZSA9IHsKCQkJCWdldDogZnVuY3Rpb24oZSkgewoJCQkJCXJldHVybiBlLnN0eWxlLmNzc1RleHQgfHwgdm9pZCAwCgkJCQl9LAoJCQkJc2V0OiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJcmV0dXJuIGUuc3R5bGUuY3NzVGV4dCA9IHQgKyAiIgoJCQkJfQoJCQl9KTsKCQkJdmFyIFB0ID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdCkkL2ksCgkJCQlJdCA9IC9eKD86YXxhcmVhKSQvaTsKCQkJbGUuZm4uZXh0ZW5kKHsKCQkJCXByb3A6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQlyZXR1cm4gQWUodGhpcywgbGUucHJvcCwgZSwgdCwgYXJndW1lbnRzLmxlbmd0aCA+IDEpCgkJCQl9LAoJCQkJcmVtb3ZlUHJvcDogZnVuY3Rpb24oZSkgewoJCQkJCXJldHVybiBlID0gbGUucHJvcEZpeFtlXSB8fCBlLCB0aGlzLmVhY2goZnVuY3Rpb24oKSB7CgkJCQkJCXRyeSB7CgkJCQkJCQl0aGlzW2VdID0gdm9pZCAwLCBkZWxldGUgdGhpc1tlXQoJCQkJCQl9IGNhdGNoICh0KSB7fQoJCQkJCX0pCgkJCQl9CgkJCX0pLCBsZS5leHRlbmQoewoJCQkJcHJvcEZpeDogewoJCQkJCSJmb3IiOiAiaHRtbEZvciIsCgkJCQkJImNsYXNzIjogImNsYXNzTmFtZSIKCQkJCX0sCgkJCQlwcm9wOiBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJdmFyIGksIGEsIG8sIHIgPSBlLm5vZGVUeXBlOwoJCQkJCWlmIChlICYmIDMgIT09IHIgJiYgOCAhPT0gciAmJiAyICE9PSByKSByZXR1cm4gbyA9IDEgIT09IHIgfHwgIWxlLmlzWE1MRG9jKGUpLCBvICYmICh0ID0gbGUucHJvcEZpeFt0XSB8fCB0LCBhID0gbGUucHJvcEhvb2tzW3RdKSwgdm9pZCAwICE9PSBuID8gYSAmJiAic2V0IiBpbiBhICYmIHZvaWQgMCAhPT0gKGkgPSBhLnNldChlLCBuLCB0KSkgPyBpIDogZVt0XSA9IG4gOiBhICYmICJnZXQiIGluIGEgJiYgbnVsbCAhPT0gKGkgPSBhLmdldChlLCB0KSkgPyBpIDogZVt0XQoJCQkJfSwKCQkJCXByb3BIb29rczogewoJCQkJCXRhYkluZGV4OiB7CgkJCQkJCWdldDogZnVuY3Rpb24oZSkgewoJCQkJCQkJdmFyIHQgPSBsZS5maW5kLmF0dHIoZSwgInRhYmluZGV4Iik7CgkJCQkJCQlyZXR1cm4gdCA/IHBhcnNlSW50KHQsIDEwKSA6IFB0LnRlc3QoZS5ub2RlTmFtZSkgfHwgSXQudGVzdChlLm5vZGVOYW1lKSAmJiBlLmhyZWYgPyAwIDogLTEKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfSksIHJlLmhyZWZOb3JtYWxpemVkIHx8IGxlLmVhY2goWyJocmVmIiwgInNyYyJdLCBmdW5jdGlvbihlLCB0KSB7CgkJCQlsZS5wcm9wSG9va3NbdF0gPSB7CgkJCQkJZ2V0OiBmdW5jdGlvbihlKSB7CgkJCQkJCXJldHVybiBlLmdldEF0dHJpYnV0ZSh0LCA0KQoJCQkJCX0KCQkJCX0KCQkJfSksIHJlLm9wdFNlbGVjdGVkIHx8IChsZS5wcm9wSG9va3Muc2VsZWN0ZWQgPSB7CgkJCQlnZXQ6IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCA9IGUucGFyZW50Tm9kZTsKCQkJCQlyZXR1cm4gdCAmJiAodC5zZWxlY3RlZEluZGV4LCB0LnBhcmVudE5vZGUgJiYgdC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgpLCBudWxsCgkJCQl9CgkJCX0pLCBsZS5lYWNoKFsidGFiSW5kZXgiLCAicmVhZE9ubHkiLCAibWF4TGVuZ3RoIiwgImNlbGxTcGFjaW5nIiwgImNlbGxQYWRkaW5nIiwgInJvd1NwYW4iLCAiY29sU3BhbiIsICJ1c2VNYXAiLCAiZnJhbWVCb3JkZXIiLCAiY29udGVudEVkaXRhYmxlIl0sIGZ1bmN0aW9uKCkgewoJCQkJbGUucHJvcEZpeFt0aGlzLnRvTG93ZXJDYXNlKCldID0gdGhpcwoJCQl9KSwgcmUuZW5jdHlwZSB8fCAobGUucHJvcEZpeC5lbmN0eXBlID0gImVuY29kaW5nIik7CgkJCXZhciBBdCA9IC9bXHRcclxuXGZdL2c7CgkJCWxlLmZuLmV4dGVuZCh7CgkJCQlhZGRDbGFzczogZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0LCBuLCBpLCBhLCBvLCByLCBzID0gMCwKCQkJCQkJbCA9IHRoaXMubGVuZ3RoLAoJCQkJCQljID0gInN0cmluZyIgPT0gdHlwZW9mIGUgJiYgZTsKCQkJCQlpZiAobGUuaXNGdW5jdGlvbihlKSkgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbih0KSB7CgkJCQkJCWxlKHRoaXMpLmFkZENsYXNzKGUuY2FsbCh0aGlzLCB0LCB0aGlzLmNsYXNzTmFtZSkpCgkJCQkJfSk7CgkJCQkJaWYgKGMpCgkJCQkJCWZvciAodCA9IChlIHx8ICIiKS5tYXRjaChrZSkgfHwgW107IGwgPiBzOyBzKyspCgkJCQkJCQlpZiAobiA9IHRoaXNbc10sIGkgPSAxID09PSBuLm5vZGVUeXBlICYmIChuLmNsYXNzTmFtZSA/ICgiICIgKyBuLmNsYXNzTmFtZSArICIgIikucmVwbGFjZShBdCwgIiAiKSA6ICIgIikpIHsKCQkJCQkJCQlmb3IgKG8gPSAwOyBhID0gdFtvKytdOykgaS5pbmRleE9mKCIgIiArIGEgKyAiICIpIDwgMCAmJiAoaSArPSBhICsgIiAiKTsKCQkJCQkJCQlyID0gbGUudHJpbShpKSwgbi5jbGFzc05hbWUgIT09IHIgJiYgKG4uY2xhc3NOYW1lID0gcikKCQkJCQkJCX0KCQkJCQlyZXR1cm4gdGhpcwoJCQkJfSwKCQkJCXJlbW92ZUNsYXNzOiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQsIG4sIGksIGEsIG8sIHIsIHMgPSAwLAoJCQkJCQlsID0gdGhpcy5sZW5ndGgsCgkJCQkJCWMgPSAwID09PSBhcmd1bWVudHMubGVuZ3RoIHx8ICJzdHJpbmciID09IHR5cGVvZiBlICYmIGU7CgkJCQkJaWYgKGxlLmlzRnVuY3Rpb24oZSkpIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24odCkgewoJCQkJCQlsZSh0aGlzKS5yZW1vdmVDbGFzcyhlLmNhbGwodGhpcywgdCwgdGhpcy5jbGFzc05hbWUpKQoJCQkJCX0pOwoJCQkJCWlmIChjKQoJCQkJCQlmb3IgKHQgPSAoZSB8fCAiIikubWF0Y2goa2UpIHx8IFtdOyBsID4gczsgcysrKQoJCQkJCQkJaWYgKG4gPSB0aGlzW3NdLCBpID0gMSA9PT0gbi5ub2RlVHlwZSAmJiAobi5jbGFzc05hbWUgPyAoIiAiICsgbi5jbGFzc05hbWUgKyAiICIpLnJlcGxhY2UoQXQsICIgIikgOiAiIikpIHsKCQkJCQkJCQlmb3IgKG8gPSAwOyBhID0gdFtvKytdOykKCQkJCQkJCQkJZm9yICg7IGkuaW5kZXhPZigiICIgKyBhICsgIiAiKSA+PSAwOykgaSA9IGkucmVwbGFjZSgiICIgKyBhICsgIiAiLCAiICIpOwoJCQkJCQkJCXIgPSBlID8gbGUudHJpbShpKSA6ICIiLCBuLmNsYXNzTmFtZSAhPT0gciAmJiAobi5jbGFzc05hbWUgPSByKQoJCQkJCQkJfQoJCQkJCXJldHVybiB0aGlzCgkJCQl9LAoJCQkJdG9nZ2xlQ2xhc3M6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQl2YXIgbiA9IHR5cGVvZiBlOwoJCQkJCXJldHVybiAiYm9vbGVhbiIgPT0gdHlwZW9mIHQgJiYgInN0cmluZyIgPT09IG4gPyB0ID8gdGhpcy5hZGRDbGFzcyhlKSA6IHRoaXMucmVtb3ZlQ2xhc3MoZSkgOiBsZS5pc0Z1bmN0aW9uKGUpID8gdGhpcy5lYWNoKGZ1bmN0aW9uKG4pIHsKCQkJCQkJbGUodGhpcykudG9nZ2xlQ2xhc3MoZS5jYWxsKHRoaXMsIG4sIHRoaXMuY2xhc3NOYW1lLCB0KSwgdCkKCQkJCQl9KSA6IHRoaXMuZWFjaChmdW5jdGlvbigpIHsKCQkJCQkJaWYgKCJzdHJpbmciID09PSBuKQoJCQkJCQkJZm9yICh2YXIgdCwgaSA9IDAsIGEgPSBsZSh0aGlzKSwgbyA9IGUubWF0Y2goa2UpIHx8IFtdOyB0ID0gb1tpKytdOykgYS5oYXNDbGFzcyh0KSA/IGEucmVtb3ZlQ2xhc3ModCkgOiBhLmFkZENsYXNzKHQpOwoJCQkJCQllbHNlKG4gPT09IENlIHx8ICJib29sZWFuIiA9PT0gbikgJiYgKHRoaXMuY2xhc3NOYW1lICYmIGxlLl9kYXRhKHRoaXMsICJfX2NsYXNzTmFtZV9fIiwgdGhpcy5jbGFzc05hbWUpLCB0aGlzLmNsYXNzTmFtZSA9IHRoaXMuY2xhc3NOYW1lIHx8IGUgPT09ICExID8gIiIgOiBsZS5fZGF0YSh0aGlzLCAiX19jbGFzc05hbWVfXyIpIHx8ICIiKQoJCQkJCX0pCgkJCQl9LAoJCQkJaGFzQ2xhc3M6IGZ1bmN0aW9uKGUpIHsKCQkJCQlmb3IgKHZhciB0ID0gIiAiICsgZSArICIgIiwgbiA9IDAsIGkgPSB0aGlzLmxlbmd0aDsgaSA+IG47IG4rKykKCQkJCQkJaWYgKDEgPT09IHRoaXNbbl0ubm9kZVR5cGUgJiYgKCIgIiArIHRoaXNbbl0uY2xhc3NOYW1lICsgIiAiKS5yZXBsYWNlKEF0LCAiICIpLmluZGV4T2YodCkgPj0gMCkgcmV0dXJuICEwOwoJCQkJCXJldHVybiAhMQoJCQkJfQoJCQl9KSwgbGUuZWFjaCgiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IGxvYWQgcmVzaXplIHNjcm9sbCB1bmxvYWQgY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBlcnJvciBjb250ZXh0bWVudSIuc3BsaXQoIiAiKSwgZnVuY3Rpb24oZSwgdCkgewoJCQkJbGUuZm5bdF0gPSBmdW5jdGlvbihlLCBuKSB7CgkJCQkJcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPiAwID8gdGhpcy5vbih0LCBudWxsLCBlLCBuKSA6IHRoaXMudHJpZ2dlcih0KQoJCQkJfQoJCQl9KSwgbGUuZm4uZXh0ZW5kKHsKCQkJCWhvdmVyOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJcmV0dXJuIHRoaXMubW91c2VlbnRlcihlKS5tb3VzZWxlYXZlKHQgfHwgZSkKCQkJCX0sCgkJCQliaW5kOiBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJcmV0dXJuIHRoaXMub24oZSwgbnVsbCwgdCwgbikKCQkJCX0sCgkJCQl1bmJpbmQ6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQlyZXR1cm4gdGhpcy5vZmYoZSwgbnVsbCwgdCkKCQkJCX0sCgkJCQlkZWxlZ2F0ZTogZnVuY3Rpb24oZSwgdCwgbiwgaSkgewoJCQkJCXJldHVybiB0aGlzLm9uKHQsIGUsIG4sIGkpCgkJCQl9LAoJCQkJdW5kZWxlZ2F0ZTogZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCXJldHVybiAxID09PSBhcmd1bWVudHMubGVuZ3RoID8gdGhpcy5vZmYoZSwgIioqIikgOiB0aGlzLm9mZih0LCBlIHx8ICIqKiIsIG4pCgkJCQl9CgkJCX0pOwoJCQl2YXIgcXQgPSBsZS5ub3coKSwKCQkJCUV0ID0gL1w/LywKCQkJCU90ID0gLygsKXwoXFt8eyl8KH18XSl8Iig/OlteIlxcXHJcbl18XFxbIlxcXC9iZm5ydF18XFx1W1xkYS1mQS1GXXs0fSkqIlxzKjo/fHRydWV8ZmFsc2V8bnVsbHwtPyg/ITBcZClcZCsoPzpcLlxkK3wpKD86W2VFXVsrLV0/XGQrfCkvZzsKCQkJbGUucGFyc2VKU09OID0gZnVuY3Rpb24oZSkgewoJCQkJaWYgKGEuSlNPTiAmJiBhLkpTT04ucGFyc2UpIHJldHVybiBhLkpTT04ucGFyc2UoZSArICIiKTsKCQkJCXZhciB0LCBuID0gbnVsbCwKCQkJCQlpID0gbGUudHJpbShlICsgIiIpOwoJCQkJcmV0dXJuIGkgJiYgIWxlLnRyaW0oaS5yZXBsYWNlKE90LCBmdW5jdGlvbihlLCBpLCBhLCBvKSB7CgkJCQkJcmV0dXJuIHQgJiYgaSAmJiAobiA9IDApLCAwID09PSBuID8gZSA6ICh0ID0gYSB8fCBpLCBuICs9ICFvIC0gIWEsICIiKQoJCQkJfSkpID8gRnVuY3Rpb24oInJldHVybiAiICsgaSkoKSA6IGxlLmVycm9yKCJJbnZhbGlkIEpTT046ICIgKyBlKQoJCQl9LCBsZS5wYXJzZVhNTCA9IGZ1bmN0aW9uKGUpIHsKCQkJCXZhciB0LCBuOwoJCQkJaWYgKCFlIHx8ICJzdHJpbmciICE9IHR5cGVvZiBlKSByZXR1cm4gbnVsbDsKCQkJCXRyeSB7CgkJCQkJYS5ET01QYXJzZXIgPyAobiA9IG5ldyBET01QYXJzZXIsIHQgPSBuLnBhcnNlRnJvbVN0cmluZyhlLCAidGV4dC94bWwiKSkgOiAodCA9IG5ldyBBY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MRE9NIiksIHQuYXN5bmMgPSAiZmFsc2UiLCB0LmxvYWRYTUwoZSkpCgkJCQl9IGNhdGNoIChpKSB7CgkJCQkJdCA9IHZvaWQgMAoJCQkJfQoJCQkJcmV0dXJuIHQgJiYgdC5kb2N1bWVudEVsZW1lbnQgJiYgIXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RoIHx8IGxlLmVycm9yKCJJbnZhbGlkIFhNTDogIiArIGUpLCB0CgkJCX07CgkJCXZhciBMdCwgRHQsIE10ID0gLyMuKiQvLAoJCQkJUnQgPSAvKFs/Jl0pXz1bXiZdKi8sCgkJCQlGdCA9IC9eKC4qPyk6WyBcdF0qKFteXHJcbl0qKVxyPyQvZ20sCgkJCQkkdCA9IC9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLAoJCQkJV3QgPSAvXig/OkdFVHxIRUFEKSQvLAoJCQkJSHQgPSAvXlwvXC8vLAoJCQkJVXQgPSAvXihbXHcuKy1dKzopKD86XC9cLyg/OlteXC8/I10qQHwpKFteXC8/IzpdKikoPzo6KFxkKyl8KXwpLywKCQkJCVl0ID0ge30sCgkJCQlHdCA9IHt9LAoJCQkJWHQgPSAiKi8iLmNvbmNhdCgiKiIpOwoJCQl0cnkgewoJCQkJRHQgPSBsb2NhdGlvbi5ocmVmCgkJCX0gY2F0Y2ggKEp0KSB7CgkJCQlEdCA9IHhlLmNyZWF0ZUVsZW1lbnQoImEiKSwgRHQuaHJlZiA9ICIiLCBEdCA9IER0LmhyZWYKCQkJfQoJCQlMdCA9IFV0LmV4ZWMoRHQudG9Mb3dlckNhc2UoKSkgfHwgW10sIGxlLmV4dGVuZCh7CgkJCQlhY3RpdmU6IDAsCgkJCQlsYXN0TW9kaWZpZWQ6IHt9LAoJCQkJZXRhZzoge30sCgkJCQlhamF4U2V0dGluZ3M6IHsKCQkJCQl1cmw6IER0LAoJCQkJCXR5cGU6ICJHRVQiLAoJCQkJCWlzTG9jYWw6ICR0LnRlc3QoTHRbMV0pLAoJCQkJCWdsb2JhbDogITAsCgkJCQkJcHJvY2Vzc0RhdGE6ICEwLAoJCQkJCWFzeW5jOiAhMCwKCQkJCQljb250ZW50VHlwZTogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCIsCgkJCQkJYWNjZXB0czogewoJCQkJCQkiKiI6IFh0LAoJCQkJCQl0ZXh0OiAidGV4dC9wbGFpbiIsCgkJCQkJCWh0bWw6ICJ0ZXh0L2h0bWwiLAoJCQkJCQl4bWw6ICJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sIiwKCQkJCQkJanNvbjogImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCIKCQkJCQl9LAoJCQkJCWNvbnRlbnRzOiB7CgkJCQkJCXhtbDogL3htbC8sCgkJCQkJCWh0bWw6IC9odG1sLywKCQkJCQkJanNvbjogL2pzb24vCgkJCQkJfSwKCQkJCQlyZXNwb25zZUZpZWxkczogewoJCQkJCQl4bWw6ICJyZXNwb25zZVhNTCIsCgkJCQkJCXRleHQ6ICJyZXNwb25zZVRleHQiLAoJCQkJCQlqc29uOiAicmVzcG9uc2VKU09OIgoJCQkJCX0sCgkJCQkJY29udmVydGVyczogewoJCQkJCQkiKiB0ZXh0IjogU3RyaW5nLAoJCQkJCQkidGV4dCBodG1sIjogITAsCgkJCQkJCSJ0ZXh0IGpzb24iOiBsZS5wYXJzZUpTT04sCgkJCQkJCSJ0ZXh0IHhtbCI6IGxlLnBhcnNlWE1MCgkJCQkJfSwKCQkJCQlmbGF0T3B0aW9uczogewoJCQkJCQl1cmw6ICEwLAoJCQkJCQljb250ZXh0OiAhMAoJCQkJCX0KCQkJCX0sCgkJCQlhamF4U2V0dXA6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQlyZXR1cm4gdCA/IFUoVShlLCBsZS5hamF4U2V0dGluZ3MpLCB0KSA6IFUobGUuYWpheFNldHRpbmdzLCBlKQoJCQkJfSwKCQkJCWFqYXhQcmVmaWx0ZXI6IFcoWXQpLAoJCQkJYWpheFRyYW5zcG9ydDogVyhHdCksCgkJCQlhamF4OiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJZnVuY3Rpb24gbihlLCB0LCBuLCBpKSB7CgkJCQkJCXZhciBhLCBkLCBfLCB4LCB2LCB5ID0gdDsKCQkJCQkJMiAhPT0gdyAmJiAodyA9IDIsIHMgJiYgY2xlYXJUaW1lb3V0KHMpLCBjID0gdm9pZCAwLCByID0gaSB8fCAiIiwgYi5yZWFkeVN0YXRlID0gZSA+IDAgPyA0IDogMCwgYSA9IGUgPj0gMjAwICYmIDMwMCA+IGUgfHwgMzA0ID09PSBlLCBuICYmICh4ID0gWShwLCBiLCBuKSksIHggPSBHKHAsIHgsIGIsIGEpLCBhID8gKHAuaWZNb2RpZmllZCAmJiAodiA9IGIuZ2V0UmVzcG9uc2VIZWFkZXIoIkxhc3QtTW9kaWZpZWQiKSwgdiAmJiAobGUubGFzdE1vZGlmaWVkW29dID0gdiksIHYgPSBiLmdldFJlc3BvbnNlSGVhZGVyKCJldGFnIiksIHYgJiYgKGxlLmV0YWdbb10gPSB2KSksIDIwNCA9PT0gZSB8fCAiSEVBRCIgPT09IHAudHlwZSA/IHkgPSAibm9jb250ZW50IiA6IDMwNCA9PT0gZSA/IHkgPSAibm90bW9kaWZpZWQiIDogKHkgPSB4LnN0YXRlLCBkID0geC5kYXRhLCBfID0geC5lcnJvciwgYSA9ICFfKSkgOiAoXyA9IHksIChlIHx8ICF5KSAmJiAoeSA9ICJlcnJvciIsIDAgPiBlICYmIChlID0gMCkpKSwgYi5zdGF0dXMgPSBlLCBiLnN0YXR1c1RleHQgPSAodCB8fCB5KSArICIiLCBhID8gbS5yZXNvbHZlV2l0aChoLCBbZCwgeSwgYl0pIDogbS5yZWplY3RXaXRoKGgsIFtiLCB5LCBfXSksIGIuc3RhdHVzQ29kZShnKSwgZyA9IHZvaWQgMCwgbCAmJiB1LnRyaWdnZXIoYSA/ICJhamF4U3VjY2VzcyIgOiAiYWpheEVycm9yIiwgW2IsIHAsIGEgPyBkIDogX10pLCBmLmZpcmVXaXRoKGgsIFtiLCB5XSksIGwgJiYgKHUudHJpZ2dlcigiYWpheENvbXBsZXRlIiwgW2IsIHBdKSwgLS1sZS5hY3RpdmUgfHwgbGUuZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSkpCgkJCQkJfQoJCQkJCSJvYmplY3QiID09IHR5cGVvZiBlICYmICh0ID0gZSwgZSA9IHZvaWQgMCksIHQgPSB0IHx8IHt9OwoJCQkJCXZhciBpLCBhLCBvLCByLCBzLCBsLCBjLCBkLCBwID0gbGUuYWpheFNldHVwKHt9LCB0KSwKCQkJCQkJaCA9IHAuY29udGV4dCB8fCBwLAoJCQkJCQl1ID0gcC5jb250ZXh0ICYmIChoLm5vZGVUeXBlIHx8IGguanF1ZXJ5KSA/IGxlKGgpIDogbGUuZXZlbnQsCgkJCQkJCW0gPSBsZS5EZWZlcnJlZCgpLAoJCQkJCQlmID0gbGUuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLAoJCQkJCQlnID0gcC5zdGF0dXNDb2RlIHx8IHt9LAoJCQkJCQlfID0ge30sCgkJCQkJCXggPSB7fSwKCQkJCQkJdyA9IDAsCgkJCQkJCXYgPSAiY2FuY2VsZWQiLAoJCQkJCQliID0gewoJCQkJCQkJcmVhZHlTdGF0ZTogMCwKCQkJCQkJCWdldFJlc3BvbnNlSGVhZGVyOiBmdW5jdGlvbihlKSB7CgkJCQkJCQkJdmFyIHQ7CgkJCQkJCQkJaWYgKDIgPT09IHcpIHsKCQkJCQkJCQkJaWYgKCFkKQoJCQkJCQkJCQkJZm9yIChkID0ge307IHQgPSBGdC5leGVjKHIpOykgZFt0WzFdLnRvTG93ZXJDYXNlKCldID0gdFsyXTsKCQkJCQkJCQkJdCA9IGRbZS50b0xvd2VyQ2FzZSgpXQoJCQkJCQkJCX0KCQkJCQkJCQlyZXR1cm4gbnVsbCA9PSB0ID8gbnVsbCA6IHQKCQkJCQkJCX0sCgkJCQkJCQlnZXRBbGxSZXNwb25zZUhlYWRlcnM6IGZ1bmN0aW9uKCkgewoJCQkJCQkJCXJldHVybiAyID09PSB3ID8gciA6IG51bGwKCQkJCQkJCX0sCgkJCQkJCQlzZXRSZXF1ZXN0SGVhZGVyOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCQkJdmFyIG4gPSBlLnRvTG93ZXJDYXNlKCk7CgkJCQkJCQkJcmV0dXJuIHcgfHwgKGUgPSB4W25dID0geFtuXSB8fCBlLCBfW2VdID0gdCksIHRoaXMKCQkJCQkJCX0sCgkJCQkJCQlvdmVycmlkZU1pbWVUeXBlOiBmdW5jdGlvbihlKSB7CgkJCQkJCQkJcmV0dXJuIHcgfHwgKHAubWltZVR5cGUgPSBlKSwgdGhpcwoJCQkJCQkJfSwKCQkJCQkJCXN0YXR1c0NvZGU6IGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQl2YXIgdDsKCQkJCQkJCQlpZiAoZSkKCQkJCQkJCQkJaWYgKDIgPiB3KQoJCQkJCQkJCQkJZm9yICh0IGluIGUpIGdbdF0gPSBbZ1t0XSwgZVt0XV07CgkJCQkJCQkJCWVsc2UgYi5hbHdheXMoZVtiLnN0YXR1c10pOwoJCQkJCQkJCXJldHVybiB0aGlzCgkJCQkJCQl9LAoJCQkJCQkJYWJvcnQ6IGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQl2YXIgdCA9IGUgfHwgdjsKCQkJCQkJCQlyZXR1cm4gYyAmJiBjLmFib3J0KHQpLCBuKDAsIHQpLCB0aGlzCgkJCQkJCQl9CgkJCQkJCX07CgkJCQkJaWYgKG0ucHJvbWlzZShiKS5jb21wbGV0ZSA9IGYuYWRkLCBiLnN1Y2Nlc3MgPSBiLmRvbmUsIGIuZXJyb3IgPSBiLmZhaWwsIHAudXJsID0gKChlIHx8IHAudXJsIHx8IER0KSArICIiKS5yZXBsYWNlKE10LCAiIikucmVwbGFjZShIdCwgTHRbMV0gKyAiLy8iKSwgcC50eXBlID0gdC5tZXRob2QgfHwgdC50eXBlIHx8IHAubWV0aG9kIHx8IHAudHlwZSwgcC5kYXRhVHlwZXMgPSBsZS50cmltKHAuZGF0YVR5cGUgfHwgIioiKS50b0xvd2VyQ2FzZSgpLm1hdGNoKGtlKSB8fCBbIiJdLCBudWxsID09IHAuY3Jvc3NEb21haW4gJiYgKGkgPSBVdC5leGVjKHAudXJsLnRvTG93ZXJDYXNlKCkpLCBwLmNyb3NzRG9tYWluID0gISghaSB8fCBpWzFdID09PSBMdFsxXSAmJiBpWzJdID09PSBMdFsyXSAmJiAoaVszXSB8fCAoImh0dHA6IiA9PT0gaVsxXSA/ICI4MCIgOiAiNDQzIikpID09PSAoTHRbM10gfHwgKCJodHRwOiIgPT09IEx0WzFdID8gIjgwIiA6ICI0NDMiKSkpKSwgcC5kYXRhICYmIHAucHJvY2Vzc0RhdGEgJiYgInN0cmluZyIgIT0gdHlwZW9mIHAuZGF0YSAmJiAocC5kYXRhID0gbGUucGFyYW0ocC5kYXRhLCBwLnRyYWRpdGlvbmFsKSksIEgoWXQsIHAsIHQsIGIpLCAyID09PSB3KSByZXR1cm4gYjsKCQkJCQlsID0gbGUuZXZlbnQgJiYgcC5nbG9iYWwsIGwgJiYgMCA9PT0gbGUuYWN0aXZlKysgJiYgbGUuZXZlbnQudHJpZ2dlcigiYWpheFN0YXJ0IiksIHAudHlwZSA9IHAudHlwZS50b1VwcGVyQ2FzZSgpLCBwLmhhc0NvbnRlbnQgPSAhV3QudGVzdChwLnR5cGUpLCBvID0gcC51cmwsIHAuaGFzQ29udGVudCB8fCAocC5kYXRhICYmIChvID0gcC51cmwgKz0gKEV0LnRlc3QobykgPyAiJiIgOiAiPyIpICsgcC5kYXRhLCBkZWxldGUgcC5kYXRhKSwgcC5jYWNoZSA9PT0gITEgJiYgKHAudXJsID0gUnQudGVzdChvKSA/IG8ucmVwbGFjZShSdCwgIiQxXz0iICsgcXQrKykgOiBvICsgKEV0LnRlc3QobykgPyAiJiIgOiAiPyIpICsgIl89IiArIHF0KyspKSwgcC5pZk1vZGlmaWVkICYmIChsZS5sYXN0TW9kaWZpZWRbb10gJiYgYi5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Nb2RpZmllZC1TaW5jZSIsIGxlLmxhc3RNb2RpZmllZFtvXSksIGxlLmV0YWdbb10gJiYgYi5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Ob25lLU1hdGNoIiwgbGUuZXRhZ1tvXSkpLCAocC5kYXRhICYmIHAuaGFzQ29udGVudCAmJiBwLmNvbnRlbnRUeXBlICE9PSAhMSB8fCB0LmNvbnRlbnRUeXBlKSAmJiBiLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsIHAuY29udGVudFR5cGUpLCBiLnNldFJlcXVlc3RIZWFkZXIoIkFjY2VwdCIsIHAuZGF0YVR5cGVzWzBdICYmIHAuYWNjZXB0c1twLmRhdGFUeXBlc1swXV0gPyBwLmFjY2VwdHNbcC5kYXRhVHlwZXNbMF1dICsgKCIqIiAhPT0gcC5kYXRhVHlwZXNbMF0gPyAiLCAiICsgWHQgKyAiOyBxPTAuMDEiIDogIiIpIDogcC5hY2NlcHRzWyIqIl0pOwoJCQkJCWZvciAoYSBpbiBwLmhlYWRlcnMpIGIuc2V0UmVxdWVzdEhlYWRlcihhLCBwLmhlYWRlcnNbYV0pOwoJCQkJCWlmIChwLmJlZm9yZVNlbmQgJiYgKHAuYmVmb3JlU2VuZC5jYWxsKGgsIGIsIHApID09PSAhMSB8fCAyID09PSB3KSkgcmV0dXJuIGIuYWJvcnQoKTsKCQkJCQl2ID0gImFib3J0IjsKCQkJCQlmb3IgKGEgaW4gewoJCQkJCQlzdWNjZXNzOiAxLAoJCQkJCQllcnJvcjogMSwKCQkJCQkJY29tcGxldGU6IDEKCQkJCQl9KSBiW2FdKHBbYV0pOwoJCQkJCWlmIChjID0gSChHdCwgcCwgdCwgYikpIHsKCQkJCQkJYi5yZWFkeVN0YXRlID0gMSwgbCAmJiB1LnRyaWdnZXIoImFqYXhTZW5kIiwgW2IsIHBdKSwgcC5hc3luYyAmJiBwLnRpbWVvdXQgPiAwICYmIChzID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJCWIuYWJvcnQoInRpbWVvdXQiKQoJCQkJCQl9LCBwLnRpbWVvdXQpKTsKCQkJCQkJdHJ5IHsKCQkJCQkJCXcgPSAxLCBjLnNlbmQoXywgbikKCQkJCQkJfSBjYXRjaCAoeSkgewoJCQkJCQkJaWYgKCEoMiA+IHcpKSB0aHJvdyB5OwoJCQkJCQkJbigtMSwgeSkKCQkJCQkJfQoJCQkJCX0gZWxzZSBuKC0xLCAiTm8gVHJhbnNwb3J0Iik7CgkJCQkJcmV0dXJuIGIKCQkJCX0sCgkJCQlnZXRKU09OOiBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJcmV0dXJuIGxlLmdldChlLCB0LCBuLCAianNvbiIpCgkJCQl9LAoJCQkJZ2V0U2NyaXB0OiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJcmV0dXJuIGxlLmdldChlLCB2b2lkIDAsIHQsICJzY3JpcHQiKQoJCQkJfQoJCQl9KSwgbGUuZWFjaChbImdldCIsICJwb3N0Il0sIGZ1bmN0aW9uKGUsIHQpIHsKCQkJCWxlW3RdID0gZnVuY3Rpb24oZSwgbiwgaSwgYSkgewoJCQkJCXJldHVybiBsZS5pc0Z1bmN0aW9uKG4pICYmIChhID0gYSB8fCBpLCBpID0gbiwgbiA9IHZvaWQgMCksIGxlLmFqYXgoewoJCQkJCQl1cmw6IGUsCgkJCQkJCXR5cGU6IHQsCgkJCQkJCWRhdGFUeXBlOiBhLAoJCQkJCQlkYXRhOiBuLAoJCQkJCQlzdWNjZXNzOiBpCgkJCQkJfSkKCQkJCX0KCQkJfSksIGxlLl9ldmFsVXJsID0gZnVuY3Rpb24oZSkgewoJCQkJcmV0dXJuIGxlLmFqYXgoewoJCQkJCXVybDogZSwKCQkJCQl0eXBlOiAiR0VUIiwKCQkJCQlkYXRhVHlwZTogInNjcmlwdCIsCgkJCQkJYXN5bmM6ICExLAoJCQkJCWdsb2JhbDogITEsCgkJCQkJInRocm93cyI6ICEwCgkJCQl9KQoJCQl9LCBsZS5mbi5leHRlbmQoewoJCQkJd3JhcEFsbDogZnVuY3Rpb24oZSkgewoJCQkJCWlmIChsZS5pc0Z1bmN0aW9uKGUpKSByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpIHsKCQkJCQkJbGUodGhpcykud3JhcEFsbChlLmNhbGwodGhpcywgdCkpCgkJCQkJfSk7CgkJCQkJaWYgKHRoaXNbMF0pIHsKCQkJCQkJdmFyIHQgPSBsZShlLCB0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKCEwKTsKCQkJCQkJdGhpc1swXS5wYXJlbnROb2RlICYmIHQuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pLCB0Lm1hcChmdW5jdGlvbigpIHsKCQkJCQkJCWZvciAodmFyIGUgPSB0aGlzOyBlLmZpcnN0Q2hpbGQgJiYgMSA9PT0gZS5maXJzdENoaWxkLm5vZGVUeXBlOykgZSA9IGUuZmlyc3RDaGlsZDsKCQkJCQkJCXJldHVybiBlCgkJCQkJCX0pLmFwcGVuZCh0aGlzKQoJCQkJCX0KCQkJCQlyZXR1cm4gdGhpcwoJCQkJfSwKCQkJCXdyYXBJbm5lcjogZnVuY3Rpb24oZSkgewoJCQkJCXJldHVybiBsZS5pc0Z1bmN0aW9uKGUpID8gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpIHsKCQkJCQkJbGUodGhpcykud3JhcElubmVyKGUuY2FsbCh0aGlzLCB0KSkKCQkJCQl9KSA6IHRoaXMuZWFjaChmdW5jdGlvbigpIHsKCQkJCQkJdmFyIHQgPSBsZSh0aGlzKSwKCQkJCQkJCW4gPSB0LmNvbnRlbnRzKCk7CgkJCQkJCW4ubGVuZ3RoID8gbi53cmFwQWxsKGUpIDogdC5hcHBlbmQoZSkKCQkJCQl9KQoJCQkJfSwKCQkJCXdyYXA6IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCA9IGxlLmlzRnVuY3Rpb24oZSk7CgkJCQkJcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihuKSB7CgkJCQkJCWxlKHRoaXMpLndyYXBBbGwodCA/IGUuY2FsbCh0aGlzLCBuKSA6IGUpCgkJCQkJfSkKCQkJCX0sCgkJCQl1bndyYXA6IGZ1bmN0aW9uKCkgewoJCQkJCXJldHVybiB0aGlzLnBhcmVudCgpLmVhY2goZnVuY3Rpb24oKSB7CgkJCQkJCWxlLm5vZGVOYW1lKHRoaXMsICJib2R5IikgfHwgbGUodGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKQoJCQkJCX0pLmVuZCgpCgkJCQl9CgkJCX0pLCBsZS5leHByLmZpbHRlcnMuaGlkZGVuID0gZnVuY3Rpb24oZSkgewoJCQkJcmV0dXJuIGUub2Zmc2V0V2lkdGggPD0gMCAmJiBlLm9mZnNldEhlaWdodCA8PSAwIHx8ICFyZS5yZWxpYWJsZUhpZGRlbk9mZnNldHMoKSAmJiAibm9uZSIgPT09IChlLnN0eWxlICYmIGUuc3R5bGUuZGlzcGxheSB8fCBsZS5jc3MoZSwgImRpc3BsYXkiKSkKCQkJfSwgbGUuZXhwci5maWx0ZXJzLnZpc2libGUgPSBmdW5jdGlvbihlKSB7CgkJCQlyZXR1cm4gIWxlLmV4cHIuZmlsdGVycy5oaWRkZW4oZSkKCQkJfTsKCQkJdmFyIFp0ID0gLyUyMC9nLAoJCQkJVnQgPSAvXFtcXSQvLAoJCQkJS3QgPSAvXHI/XG4vZywKCQkJCVF0ID0gL14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLAoJCQkJZW4gPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7CgkJCWxlLnBhcmFtID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJdmFyIG4sIGkgPSBbXSwKCQkJCQlhID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJCQl0ID0gbGUuaXNGdW5jdGlvbih0KSA/IHQoKSA6IG51bGwgPT0gdCA/ICIiIDogdCwgaVtpLmxlbmd0aF0gPSBlbmNvZGVVUklDb21wb25lbnQoZSkgKyAiPSIgKyBlbmNvZGVVUklDb21wb25lbnQodCkKCQkJCQl9OwoJCQkJaWYgKHZvaWQgMCA9PT0gdCAmJiAodCA9IGxlLmFqYXhTZXR0aW5ncyAmJiBsZS5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpLCBsZS5pc0FycmF5KGUpIHx8IGUuanF1ZXJ5ICYmICFsZS5pc1BsYWluT2JqZWN0KGUpKSBsZS5lYWNoKGUsIGZ1bmN0aW9uKCkgewoJCQkJCWEodGhpcy5uYW1lLCB0aGlzLnZhbHVlKQoJCQkJfSk7CgkJCQllbHNlCgkJCQkJZm9yIChuIGluIGUpIFgobiwgZVtuXSwgdCwgYSk7CgkJCQlyZXR1cm4gaS5qb2luKCImIikucmVwbGFjZShadCwgIisiKQoJCQl9LCBsZS5mbi5leHRlbmQoewoJCQkJc2VyaWFsaXplOiBmdW5jdGlvbigpIHsKCQkJCQlyZXR1cm4gbGUucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKQoJCQkJfSwKCQkJCXNlcmlhbGl6ZUFycmF5OiBmdW5jdGlvbigpIHsKCQkJCQlyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gbGUucHJvcCh0aGlzLCAiZWxlbWVudHMiKTsKCQkJCQkJcmV0dXJuIGUgPyBsZS5tYWtlQXJyYXkoZSkgOiB0aGlzCgkJCQkJfSkuZmlsdGVyKGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IHRoaXMudHlwZTsKCQkJCQkJcmV0dXJuIHRoaXMubmFtZSAmJiAhbGUodGhpcykuaXMoIjpkaXNhYmxlZCIpICYmIGVuLnRlc3QodGhpcy5ub2RlTmFtZSkgJiYgIVF0LnRlc3QoZSkgJiYgKHRoaXMuY2hlY2tlZCB8fCAhcWUudGVzdChlKSkKCQkJCQl9KS5tYXAoZnVuY3Rpb24oZSwgdCkgewoJCQkJCQl2YXIgbiA9IGxlKHRoaXMpLnZhbCgpOwoJCQkJCQlyZXR1cm4gbnVsbCA9PSBuID8gbnVsbCA6IGxlLmlzQXJyYXkobikgPyBsZS5tYXAobiwgZnVuY3Rpb24oZSkgewoJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQluYW1lOiB0Lm5hbWUsCgkJCQkJCQkJdmFsdWU6IGUucmVwbGFjZShLdCwgIlxyXG4iKQoJCQkJCQkJfQoJCQkJCQl9KSA6IHsKCQkJCQkJCW5hbWU6IHQubmFtZSwKCQkJCQkJCXZhbHVlOiBuLnJlcGxhY2UoS3QsICJcclxuIikKCQkJCQkJfQoJCQkJCX0pLmdldCgpCgkJCQl9CgkJCX0pLCBsZS5hamF4U2V0dGluZ3MueGhyID0gdm9pZCAwICE9PSBhLkFjdGl2ZVhPYmplY3QgPyBmdW5jdGlvbigpIHsKCQkJCXJldHVybiAhdGhpcy5pc0xvY2FsICYmIC9eKGdldHxwb3N0fGhlYWR8cHV0fGRlbGV0ZXxvcHRpb25zKSQvaS50ZXN0KHRoaXMudHlwZSkgJiYgSigpIHx8IFooKQoJCQl9IDogSjsKCQkJdmFyIHRuID0gMCwKCQkJCW5uID0ge30sCgkJCQlhbiA9IGxlLmFqYXhTZXR0aW5ncy54aHIoKTsKCQkJYS5hdHRhY2hFdmVudCAmJiBhLmF0dGFjaEV2ZW50KCJvbnVubG9hZCIsIGZ1bmN0aW9uKCkgewoJCQkJZm9yICh2YXIgZSBpbiBubikgbm5bZV0odm9pZCAwLCAhMCkKCQkJfSksIHJlLmNvcnMgPSAhIWFuICYmICJ3aXRoQ3JlZGVudGlhbHMiIGluIGFuLCBhbiA9IHJlLmFqYXggPSAhIWFuLCBhbiAmJiBsZS5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGUpIHsKCQkJCWlmICghZS5jcm9zc0RvbWFpbiB8fCByZS5jb3JzKSB7CgkJCQkJdmFyIHQ7CgkJCQkJcmV0dXJuIHsKCQkJCQkJc2VuZDogZnVuY3Rpb24obiwgaSkgewoJCQkJCQkJdmFyIGEsIG8gPSBlLnhocigpLAoJCQkJCQkJCXIgPSArK3RuOwoJCQkJCQkJaWYgKG8ub3BlbihlLnR5cGUsIGUudXJsLCBlLmFzeW5jLCBlLnVzZXJuYW1lLCBlLnBhc3N3b3JkKSwgZS54aHJGaWVsZHMpCgkJCQkJCQkJZm9yIChhIGluIGUueGhyRmllbGRzKSBvW2FdID0gZS54aHJGaWVsZHNbYV07CgkJCQkJCQllLm1pbWVUeXBlICYmIG8ub3ZlcnJpZGVNaW1lVHlwZSAmJiBvLm92ZXJyaWRlTWltZVR5cGUoZS5taW1lVHlwZSksIGUuY3Jvc3NEb21haW4gfHwgblsiWC1SZXF1ZXN0ZWQtV2l0aCJdIHx8IChuWyJYLVJlcXVlc3RlZC1XaXRoIl0gPSAiWE1MSHR0cFJlcXVlc3QiKTsKCQkJCQkJCWZvciAoYSBpbiBuKSB2b2lkIDAgIT09IG5bYV0gJiYgby5zZXRSZXF1ZXN0SGVhZGVyKGEsIG5bYV0gKyAiIik7CgkJCQkJCQlvLnNlbmQoZS5oYXNDb250ZW50ICYmIGUuZGF0YSB8fCBudWxsKSwgdCA9IGZ1bmN0aW9uKG4sIGEpIHsKCQkJCQkJCQl2YXIgcywgbCwgYzsKCQkJCQkJCQlpZiAodCAmJiAoYSB8fCA0ID09PSBvLnJlYWR5U3RhdGUpKQoJCQkJCQkJCQlpZiAoZGVsZXRlIG5uW3JdLCB0ID0gdm9pZCAwLCBvLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGxlLm5vb3AsIGEpIDQgIT09IG8ucmVhZHlTdGF0ZSAmJiBvLmFib3J0KCk7CgkJCQkJCQkJCWVsc2UgewoJCQkJCQkJCQkJYyA9IHt9LCBzID0gby5zdGF0dXMsICJzdHJpbmciID09IHR5cGVvZiBvLnJlc3BvbnNlVGV4dCAmJiAoYy50ZXh0ID0gby5yZXNwb25zZVRleHQpOwoJCQkJCQkJCQkJdHJ5IHsKCQkJCQkJCQkJCQlsID0gby5zdGF0dXNUZXh0CgkJCQkJCQkJCQl9IGNhdGNoIChkKSB7CgkJCQkJCQkJCQkJbCA9ICIiCgkJCQkJCQkJCQl9CgkJCQkJCQkJCQlzIHx8ICFlLmlzTG9jYWwgfHwgZS5jcm9zc0RvbWFpbiA/IDEyMjMgPT09IHMgJiYgKHMgPSAyMDQpIDogcyA9IGMudGV4dCA/IDIwMCA6IDQwNAoJCQkJCQkJCQl9CgkJCQkJCQkJYyAmJiBpKHMsIGwsIGMsIG8uZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpCgkJCQkJCQl9LCBlLmFzeW5jID8gNCA9PT0gby5yZWFkeVN0YXRlID8gc2V0VGltZW91dCh0KSA6IG8ub25yZWFkeXN0YXRlY2hhbmdlID0gbm5bcl0gPSB0IDogdCgpCgkJCQkJCX0sCgkJCQkJCWFib3J0OiBmdW5jdGlvbigpIHsKCQkJCQkJCXQgJiYgdCh2b2lkIDAsICEwKQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9KSwgbGUuYWpheFNldHVwKHsKCQkJCWFjY2VwdHM6IHsKCQkJCQlzY3JpcHQ6ICJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdCIKCQkJCX0sCgkJCQljb250ZW50czogewoJCQkJCXNjcmlwdDogLyg/OmphdmF8ZWNtYSlzY3JpcHQvCgkJCQl9LAoJCQkJY29udmVydGVyczogewoJCQkJCSJ0ZXh0IHNjcmlwdCI6IGZ1bmN0aW9uKGUpIHsKCQkJCQkJcmV0dXJuIGxlLmdsb2JhbEV2YWwoZSksIGUKCQkJCQl9CgkJCQl9CgkJCX0pLCBsZS5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLCBmdW5jdGlvbihlKSB7CgkJCQl2b2lkIDAgPT09IGUuY2FjaGUgJiYgKGUuY2FjaGUgPSAhMSksIGUuY3Jvc3NEb21haW4gJiYgKGUudHlwZSA9ICJHRVQiLCBlLmdsb2JhbCA9ICExKQoJCQl9KSwgbGUuYWpheFRyYW5zcG9ydCgic2NyaXB0IiwgZnVuY3Rpb24oZSkgewoJCQkJaWYgKGUuY3Jvc3NEb21haW4pIHsKCQkJCQl2YXIgdCwgbiA9IHhlLmhlYWQgfHwgbGUoImhlYWQiKVswXSB8fCB4ZS5kb2N1bWVudEVsZW1lbnQ7CgkJCQkJcmV0dXJuIHsKCQkJCQkJc2VuZDogZnVuY3Rpb24oaSwgYSkgewoJCQkJCQkJdCA9IHhlLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpLCB0LmFzeW5jID0gITAsIGUuc2NyaXB0Q2hhcnNldCAmJiAodC5jaGFyc2V0ID0gZS5zY3JpcHRDaGFyc2V0KSwgdC5zcmMgPSBlLnVybCwgdC5vbmxvYWQgPSB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKGUsIG4pIHsKCQkJCQkJCQkobiB8fCAhdC5yZWFkeVN0YXRlIHx8IC9sb2FkZWR8Y29tcGxldGUvLnRlc3QodC5yZWFkeVN0YXRlKSkgJiYgKHQub25sb2FkID0gdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsLCB0LnBhcmVudE5vZGUgJiYgdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpLCB0ID0gbnVsbCwgbiB8fCBhKDIwMCwgInN1Y2Nlc3MiKSkKCQkJCQkJCX0sIG4uaW5zZXJ0QmVmb3JlKHQsIG4uZmlyc3RDaGlsZCkKCQkJCQkJfSwKCQkJCQkJYWJvcnQ6IGZ1bmN0aW9uKCkgewoJCQkJCQkJdCAmJiB0Lm9ubG9hZCh2b2lkIDAsICEwKQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9KTsKCQkJdmFyIG9uID0gW10sCgkJCQlybiA9IC8oPSlcPyg/PSZ8JCl8XD9cPy87CgkJCWxlLmFqYXhTZXR1cCh7CgkJCQlqc29ucDogImNhbGxiYWNrIiwKCQkJCWpzb25wQ2FsbGJhY2s6IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gb24ucG9wKCkgfHwgbGUuZXhwYW5kbyArICJfIiArIHF0Kys7CgkJCQkJcmV0dXJuIHRoaXNbZV0gPSAhMCwgZQoJCQkJfQoJCQl9KSwgbGUuYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsIGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCXZhciBpLCBvLCByLCBzID0gZS5qc29ucCAhPT0gITEgJiYgKHJuLnRlc3QoZS51cmwpID8gInVybCIgOiAic3RyaW5nIiA9PSB0eXBlb2YgZS5kYXRhICYmICEoZS5jb250ZW50VHlwZSB8fCAiIikuaW5kZXhPZigiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikgJiYgcm4udGVzdChlLmRhdGEpICYmICJkYXRhIik7CgkJCQlyZXR1cm4gcyB8fCAianNvbnAiID09PSBlLmRhdGFUeXBlc1swXSA/IChpID0gZS5qc29ucENhbGxiYWNrID0gbGUuaXNGdW5jdGlvbihlLmpzb25wQ2FsbGJhY2spID8gZS5qc29ucENhbGxiYWNrKCkgOiBlLmpzb25wQ2FsbGJhY2ssIHMgPyBlW3NdID0gZVtzXS5yZXBsYWNlKHJuLCAiJDEiICsgaSkgOiBlLmpzb25wICE9PSAhMSAmJiAoZS51cmwgKz0gKEV0LnRlc3QoZS51cmwpID8gIiYiIDogIj8iKSArIGUuanNvbnAgKyAiPSIgKyBpKSwgZS5jb252ZXJ0ZXJzWyJzY3JpcHQganNvbiJdID0gZnVuY3Rpb24oKSB7CgkJCQkJcmV0dXJuIHIgfHwgbGUuZXJyb3IoaSArICIgd2FzIG5vdCBjYWxsZWQiKSwgclswXQoJCQkJfSwgZS5kYXRhVHlwZXNbMF0gPSAianNvbiIsIG8gPSBhW2ldLCBhW2ldID0gZnVuY3Rpb24oKSB7CgkJCQkJciA9IGFyZ3VtZW50cwoJCQkJfSwgbi5hbHdheXMoZnVuY3Rpb24oKSB7CgkJCQkJYVtpXSA9IG8sIGVbaV0gJiYgKGUuanNvbnBDYWxsYmFjayA9IHQuanNvbnBDYWxsYmFjaywgb24ucHVzaChpKSksIHIgJiYgbGUuaXNGdW5jdGlvbihvKSAmJiBvKHJbMF0pLCByID0gbyA9IHZvaWQgMAoJCQkJfSksICJzY3JpcHQiKSA6IHZvaWQgMAoJCQl9KSwgbGUucGFyc2VIVE1MID0gZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJaWYgKCFlIHx8ICJzdHJpbmciICE9IHR5cGVvZiBlKSByZXR1cm4gbnVsbDsKCQkJCSJib29sZWFuIiA9PSB0eXBlb2YgdCAmJiAobiA9IHQsIHQgPSAhMSksIHQgPSB0IHx8IHhlOwoJCQkJdmFyIGkgPSBmZS5leGVjKGUpLAoJCQkJCWEgPSAhbiAmJiBbXTsKCQkJCXJldHVybiBpID8gW3QuY3JlYXRlRWxlbWVudChpWzFdKV0gOiAoaSA9IGxlLmJ1aWxkRnJhZ21lbnQoW2VdLCB0LCBhKSwgYSAmJiBhLmxlbmd0aCAmJiBsZShhKS5yZW1vdmUoKSwgbGUubWVyZ2UoW10sIGkuY2hpbGROb2RlcykpCgkJCX07CgkJCXZhciBzbiA9IGxlLmZuLmxvYWQ7CgkJCWxlLmZuLmxvYWQgPSBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQlpZiAoInN0cmluZyIgIT0gdHlwZW9mIGUgJiYgc24pIHJldHVybiBzbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwoJCQkJdmFyIGksIGEsIG8sIHIgPSB0aGlzLAoJCQkJCXMgPSBlLmluZGV4T2YoIiAiKTsKCQkJCXJldHVybiBzID49IDAgJiYgKGkgPSBsZS50cmltKGUuc2xpY2UocywgZS5sZW5ndGgpKSwgZSA9IGUuc2xpY2UoMCwgcykpLCBsZS5pc0Z1bmN0aW9uKHQpID8gKG4gPSB0LCB0ID0gdm9pZCAwKSA6IHQgJiYgIm9iamVjdCIgPT0gdHlwZW9mIHQgJiYgKG8gPSAiUE9TVCIpLCByLmxlbmd0aCA+IDAgJiYgbGUuYWpheCh7CgkJCQkJdXJsOiBlLAoJCQkJCXR5cGU6IG8sCgkJCQkJZGF0YVR5cGU6ICJodG1sIiwKCQkJCQlkYXRhOiB0CgkJCQl9KS5kb25lKGZ1bmN0aW9uKGUpIHsKCQkJCQlhID0gYXJndW1lbnRzLCByLmh0bWwoaSA/IGxlKCI8ZGl2PiIpLmFwcGVuZChsZS5wYXJzZUhUTUwoZSkpLmZpbmQoaSkgOiBlKQoJCQkJfSkuY29tcGxldGUobiAmJiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJci5lYWNoKG4sIGEgfHwgW2UucmVzcG9uc2VUZXh0LCB0LCBlXSkKCQkJCX0pLCB0aGlzCgkJCX0sIGxlLmVhY2goWyJhamF4U3RhcnQiLCAiYWpheFN0b3AiLCAiYWpheENvbXBsZXRlIiwgImFqYXhFcnJvciIsICJhamF4U3VjY2VzcyIsICJhamF4U2VuZCJdLCBmdW5jdGlvbihlLCB0KSB7CgkJCQlsZS5mblt0XSA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlyZXR1cm4gdGhpcy5vbih0LCBlKQoJCQkJfQoJCQl9KSwgbGUuZXhwci5maWx0ZXJzLmFuaW1hdGVkID0gZnVuY3Rpb24oZSkgewoJCQkJcmV0dXJuIGxlLmdyZXAobGUudGltZXJzLCBmdW5jdGlvbih0KSB7CgkJCQkJcmV0dXJuIGUgPT09IHQuZWxlbQoJCQkJfSkubGVuZ3RoCgkJCX07CgkJCXZhciBsbiA9IGEuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwoJCQlyZXR1cm4gbGUub2Zmc2V0ID0gewoJCQkJc2V0T2Zmc2V0OiBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJdmFyIGksIGEsIG8sIHIsIHMsIGwsIGMsIGQgPSBsZS5jc3MoZSwgInBvc2l0aW9uIiksCgkJCQkJCXAgPSBsZShlKSwKCQkJCQkJaCA9IHt9OwoJCQkJCSJzdGF0aWMiID09PSBkICYmIChlLnN0eWxlLnBvc2l0aW9uID0gInJlbGF0aXZlIiksIHMgPSBwLm9mZnNldCgpLCBvID0gbGUuY3NzKGUsICJ0b3AiKSwgbCA9IGxlLmNzcyhlLCAibGVmdCIpLCBjID0gKCJhYnNvbHV0ZSIgPT09IGQgfHwgImZpeGVkIiA9PT0gZCkgJiYgbGUuaW5BcnJheSgiYXV0byIsIFtvLCBsXSkgPiAtMSwgYyA/IChpID0gcC5wb3NpdGlvbigpLCByID0gaS50b3AsIGEgPSBpLmxlZnQpIDogKHIgPSBwYXJzZUZsb2F0KG8pIHx8IDAsIGEgPSBwYXJzZUZsb2F0KGwpIHx8IDApLCBsZS5pc0Z1bmN0aW9uKHQpICYmICh0ID0gdC5jYWxsKGUsIG4sIHMpKSwgbnVsbCAhPSB0LnRvcCAmJiAoaC50b3AgPSB0LnRvcCAtIHMudG9wICsgciksIG51bGwgIT0gdC5sZWZ0ICYmIChoLmxlZnQgPSB0LmxlZnQgLSBzLmxlZnQgKyBhKSwgInVzaW5nIiBpbiB0ID8gdC51c2luZy5jYWxsKGUsIGgpIDogcC5jc3MoaCkKCQkJCX0KCQkJfSwgbGUuZm4uZXh0ZW5kKHsKCQkJCW9mZnNldDogZnVuY3Rpb24oZSkgewoJCQkJCWlmIChhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gdm9pZCAwID09PSBlID8gdGhpcyA6IHRoaXMuZWFjaChmdW5jdGlvbih0KSB7CgkJCQkJCWxlLm9mZnNldC5zZXRPZmZzZXQodGhpcywgZSwgdCkKCQkJCQl9KTsKCQkJCQl2YXIgdCwgbiwgaSA9IHsKCQkJCQkJCXRvcDogMCwKCQkJCQkJCWxlZnQ6IDAKCQkJCQkJfSwKCQkJCQkJYSA9IHRoaXNbMF0sCgkJCQkJCW8gPSBhICYmIGEub3duZXJEb2N1bWVudDsKCQkJCQlpZiAobykgcmV0dXJuIHQgPSBvLmRvY3VtZW50RWxlbWVudCwgbGUuY29udGFpbnModCwgYSkgPyAodHlwZW9mIGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0ICE9PSBDZSAmJiAoaSA9IGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLCBuID0gVihvKSwgewoJCQkJCQl0b3A6IGkudG9wICsgKG4ucGFnZVlPZmZzZXQgfHwgdC5zY3JvbGxUb3ApIC0gKHQuY2xpZW50VG9wIHx8IDApLAoJCQkJCQlsZWZ0OiBpLmxlZnQgKyAobi5wYWdlWE9mZnNldCB8fCB0LnNjcm9sbExlZnQpIC0gKHQuY2xpZW50TGVmdCB8fCAwKQoJCQkJCX0pIDogaQoJCQkJfSwKCQkJCXBvc2l0aW9uOiBmdW5jdGlvbigpIHsKCQkJCQlpZiAodGhpc1swXSkgewoJCQkJCQl2YXIgZSwgdCwgbiA9IHsKCQkJCQkJCQl0b3A6IDAsCgkJCQkJCQkJbGVmdDogMAoJCQkJCQkJfSwKCQkJCQkJCWkgPSB0aGlzWzBdOwoJCQkJCQlyZXR1cm4gImZpeGVkIiA9PT0gbGUuY3NzKGksICJwb3NpdGlvbiIpID8gdCA9IGkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgOiAoZSA9IHRoaXMub2Zmc2V0UGFyZW50KCksIHQgPSB0aGlzLm9mZnNldCgpLCBsZS5ub2RlTmFtZShlWzBdLCAiaHRtbCIpIHx8IChuID0gZS5vZmZzZXQoKSksIG4udG9wICs9IGxlLmNzcyhlWzBdLCAiYm9yZGVyVG9wV2lkdGgiLCAhMCksIG4ubGVmdCArPSBsZS5jc3MoZVswXSwgImJvcmRlckxlZnRXaWR0aCIsICEwKSksIHsKCQkJCQkJCXRvcDogdC50b3AgLSBuLnRvcCAtIGxlLmNzcyhpLCAibWFyZ2luVG9wIiwgITApLAoJCQkJCQkJbGVmdDogdC5sZWZ0IC0gbi5sZWZ0IC0gbGUuY3NzKGksICJtYXJnaW5MZWZ0IiwgITApCgkJCQkJCX0KCQkJCQl9CgkJCQl9LAoJCQkJb2Zmc2V0UGFyZW50OiBmdW5jdGlvbigpIHsKCQkJCQlyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKSB7CgkJCQkJCWZvciAodmFyIGUgPSB0aGlzLm9mZnNldFBhcmVudCB8fCBsbjsgZSAmJiAhbGUubm9kZU5hbWUoZSwgImh0bWwiKSAmJiAic3RhdGljIiA9PT0gbGUuY3NzKGUsICJwb3NpdGlvbiIpOykgZSA9IGUub2Zmc2V0UGFyZW50OwoJCQkJCQlyZXR1cm4gZSB8fCBsbgoJCQkJCX0pCgkJCQl9CgkJCX0pLCBsZS5lYWNoKHsKCQkJCXNjcm9sbExlZnQ6ICJwYWdlWE9mZnNldCIsCgkJCQlzY3JvbGxUb3A6ICJwYWdlWU9mZnNldCIKCQkJfSwgZnVuY3Rpb24oZSwgdCkgewoJCQkJdmFyIG4gPSAvWS8udGVzdCh0KTsKCQkJCWxlLmZuW2VdID0gZnVuY3Rpb24oaSkgewoJCQkJCXJldHVybiBBZSh0aGlzLCBmdW5jdGlvbihlLCBpLCBhKSB7CgkJCQkJCXZhciBvID0gVihlKTsKCQkJCQkJcmV0dXJuIHZvaWQgMCA9PT0gYSA/IG8gPyB0IGluIG8gPyBvW3RdIDogby5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbaV0gOiBlW2ldIDogdm9pZChvID8gby5zY3JvbGxUbyhuID8gbGUobykuc2Nyb2xsTGVmdCgpIDogYSwgbiA/IGEgOiBsZShvKS5zY3JvbGxUb3AoKSkgOiBlW2ldID0gYSkKCQkJCQl9LCBlLCBpLCBhcmd1bWVudHMubGVuZ3RoLCBudWxsKQoJCQkJfQoJCQl9KSwgbGUuZWFjaChbInRvcCIsICJsZWZ0Il0sIGZ1bmN0aW9uKGUsIHQpIHsKCQkJCWxlLmNzc0hvb2tzW3RdID0gVChyZS5waXhlbFBvc2l0aW9uLCBmdW5jdGlvbihlLCBuKSB7CgkJCQkJcmV0dXJuIG4gPyAobiA9IG90KGUsIHQpLCBzdC50ZXN0KG4pID8gbGUoZSkucG9zaXRpb24oKVt0XSArICJweCIgOiBuKSA6IHZvaWQgMAoJCQkJfSkKCQkJfSksIGxlLmVhY2goewoJCQkJSGVpZ2h0OiAiaGVpZ2h0IiwKCQkJCVdpZHRoOiAid2lkdGgiCgkJCX0sIGZ1bmN0aW9uKGUsIHQpIHsKCQkJCWxlLmVhY2goewoJCQkJCXBhZGRpbmc6ICJpbm5lciIgKyBlLAoJCQkJCWNvbnRlbnQ6IHQsCgkJCQkJIiI6ICJvdXRlciIgKyBlCgkJCQl9LCBmdW5jdGlvbihuLCBpKSB7CgkJCQkJbGUuZm5baV0gPSBmdW5jdGlvbihpLCBhKSB7CgkJCQkJCXZhciBvID0gYXJndW1lbnRzLmxlbmd0aCAmJiAobiB8fCAiYm9vbGVhbiIgIT0gdHlwZW9mIGkpLAoJCQkJCQkJciA9IG4gfHwgKGkgPT09ICEwIHx8IGEgPT09ICEwID8gIm1hcmdpbiIgOiAiYm9yZGVyIik7CgkJCQkJCXJldHVybiBBZSh0aGlzLCBmdW5jdGlvbih0LCBuLCBpKSB7CgkJCQkJCQl2YXIgYTsKCQkJCQkJCXJldHVybiBsZS5pc1dpbmRvdyh0KSA/IHQuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyJjbGllbnQiICsgZV0gOiA5ID09PSB0Lm5vZGVUeXBlID8gKGEgPSB0LmRvY3VtZW50RWxlbWVudCwgTWF0aC5tYXgodC5ib2R5WyJzY3JvbGwiICsgZV0sIGFbInNjcm9sbCIgKyBlXSwgdC5ib2R5WyJvZmZzZXQiICsgZV0sIGFbIm9mZnNldCIgKyBlXSwgYVsiY2xpZW50IiArIGVdKSkgOiB2b2lkIDAgPT09IGkgPyBsZS5jc3ModCwgbiwgcikgOiBsZS5zdHlsZSh0LCBuLCBpLCByKQoJCQkJCQl9LCB0LCBvID8gaSA6IHZvaWQgMCwgbywgbnVsbCkKCQkJCQl9CgkJCQl9KQoJCQl9KSwgbGUuZm4uc2l6ZSA9IGZ1bmN0aW9uKCkgewoJCQkJcmV0dXJuIHRoaXMubGVuZ3RoCgkJCX0sIGxlLmZuLmFuZFNlbGYgPSBsZS5mbi5hZGRCYWNrLCBpID0gZnVuY3Rpb24oKSB7CgkJCQlyZXR1cm4gbGUKCQkJfS5jYWxsKHQsIG4sIHQsIGUpLCAhKHZvaWQgMCAhPT0gaSAmJiAoZS5leHBvcnRzID0gaSkpLCBsZQoJCX0pCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCShmdW5jdGlvbih0LCBpKSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJdmFyIGEgPSBuKDgpLAoJCQkJbyA9IG4oOSksCgkJCQlyID0gbigxMyksCgkJCQlzID0gbigxNCksCgkJCQlsID0gbigxNiksCgkJCQljID0ge30sCgkJCQlkID0gbigxNyksCgkJCQlwID0gewoJCQkJCSIzNjBidXkiOiB7CgkJCQkJCSIjSl9zZWFyY2hXcmFwIjogWyIjSl9zZWFyY2hXcmFwIiwgImFmdGVyIl0sCgkJCQkJCSIjSl9nb29kc19iZXN0IjogWyIjSl9nb29kc19iZXN0IiwgImJlZm9yZSJdCgkJCQkJfSwKCQkJCQlhbWF6b246IHsKCQkJCQkJIiNjZW50ZXJCZWxvd01pbnVzIjogWyIjY2VudGVyQmVsb3dNaW51cyIsICJhZnRlciJdCgkJCQkJfSwKCQkJCQkiNTFidXkiOiB7CgkJCQkJCSIjcGFnZUJhckJvdHRvbSI6IFsiI3BhZ2VCYXJCb3R0b20iLCAiYWZ0ZXIiXQoJCQkJCX0sCgkJCQkJc3VuaW5nOiB7CgkJCQkJCSIjc2VsbGVyU2VsZWN0IjogWyIjc2VsbGVyU2VsZWN0IiwgImJlZm9yZSJdLAoJCQkJCQkiLnByb2luZm8tY29udGFpbmVyIjogWyIucHJvaW5mby1jb250YWluZXIiLCAiYWZ0ZXIiXQoJCQkJCX0sCgkJCQkJZGFuZ2Rhbmc6IHsKCQkJCQkJIi5zZWFyY2hfc2VhcmNoX2JveF93cmFwIjogWyIuc2VhcmNoX3NlYXJjaF9ib3hfd3JhcCIsICJhZnRlciJdCgkJCQkJfSwKCQkJCQlnb21lOiB7CgkJCQkJCSIjblNlYXJjaC1xdWVzc1lvdUxpa2UiOiBbIiNuU2VhcmNoLXF1ZXNzWW91TGlrZSIsICJiZWZvcmUiXQoJCQkJCX0sCgkJCQkJeWloYW9kaWFuOiB7CgkJCQkJCSIjaG90UHJvZHVjdHNXcmFwIjogWyIjaG90UHJvZHVjdHNXcmFwIiwgImJlZm9yZSJdCgkJCQkJfSwKCQkJCQlqdW1laTogewoJCQkJCQkiI3NlYXJjaF9saXN0X3dyYXAiOiBbIiNzZWFyY2hfbGlzdF93cmFwIiwgImFmdGVyIl0KCQkJCQl9LAoJCQkJCXZtYWxsOiB7CgkJCQkJCSIuY2hhbm5lbC1saXN0IjogWyIuY2hhbm5lbC1saXN0IiwgImFmdGVyIl0KCQkJCQl9LAoJCQkJCWZlaW5pdTogewoJCQkJCQkiI3dhcnBwZXIiOiBbIiN3YXJwcGVyIiwgImFwcGVuZCJdCgkJCQkJfSwKCQkJCQl5b3Vnb3U6IHsKCQkJCQkJIi5uZXdQYWdlIjogWyIubmV3UGFnZSIsICJhZnRlciJdCgkJCQkJfSwKCQkJCQlrYW9sYTogewoJCQkJCQkiI2d1ZXNzIjogWyIjZ3Vlc3MiLCAiYWZ0ZXIiXQoJCQkJCX0sCgkJCQkJem9sOiB7CgkJCQkJCSIucGFnZS1ib3giOiBbIi5wYWdlLWJveCIsICJhZnRlciJdCgkJCQkJfQoJCQkJfSwKCQkJCWggPSBmdW5jdGlvbigpIHsKCQkJCQlpZiAocFt0LnNpdGVdKSB7CgkJCQkJCXZhciBlID0gcFt0LnNpdGVdOwoJCQkJCQlmb3IgKHZhciBuIGluIGUpCgkJCQkJCQlpZiAoaShlW25dKS5sZW5ndGggPiAwKSByZXR1cm4gZVtuXQoJCQkJCX0KCQkJCQlyZXR1cm4gITEKCQkJCX0sCgkJCQl1ID0gZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCXN3aXRjaCAobikgewoJCQkJCQljYXNlICJiZWZvcmUiOgoJCQkJCQkJaSh0KS5iZWZvcmUoZSk7CgkJCQkJCQlicmVhazsKCQkJCQkJY2FzZSAiYXBwZW5kIjoKCQkJCQkJCWkodCkuYXBwZW5kKGUpOwoJCQkJCQkJYnJlYWs7CgkJCQkJCWNhc2UgImFmdGVyIjoKCQkJCQkJCWkodCkuYWZ0ZXIoZSkKCQkJCQl9CgkJCQl9LAoJCQkJbSA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlmb3IgKHZhciB0ID0gZS5sZW5ndGggfHwgMCwgbiA9IDA7IHQgPiBuOyBuKyspIHsKCQkJCQkJdmFyIGkgPSAoTnVtYmVyKGVbbl0ucHJpY2UpIC8gMTAwKS50b1N0cmluZygpOyAtIDEgPT0gaS5pbmRleE9mKCIuIikgPyBlW25dLnByaWNlID0gaSArICIuMDAiIDogaS5tYXRjaCgvXC5bMC05XXsyfS8pID8gZVtuXS5wcmljZSA9IGkgOiBlW25dLnByaWNlID0gaSArICIwIgoJCQkJCX0KCQkJCQlyZXR1cm4gZQoJCQkJfSwKCQkJCWYgPSBmdW5jdGlvbihlKSB7CgkJCQkJaWYgKDAgPT0gZS5sZW5ndGgpIHJldHVybiBlOwoJCQkJCWZvciAodmFyIGkgPSBuKDE4KSwgYSA9IDA7IGEgPCBlLmxlbmd0aDsgYSsrKSB7CgkJCQkJCXZhciBvID0gewoJCQkJCQkJc2l0ZV9pZDogZVthXS5zaXRlX2lkLAoJCQkJCQkJdXJsOiBlW2FdLnVybCwKCQkJCQkJCW1vZDogInNlYXJjaF96dWlkaWppYSIsCgkJCQkJCQl1bmlvbjogdC51bmlvbi5zcGxpdCgiXyIpWzFdLAoJCQkJCQkJZHBfaWQ6IGVbYV0udXJsX2NyYyArICItIiArIGVbYV0uc2l0ZV9pZAoJCQkJCQl9OwoJCQkJCQllW2FdLnVybCA9IGkuaW5pdChvKQoJCQkJCX0KCQkJCQlyZXR1cm4gZQoJCQkJfSwKCQkJCWcgPSBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IGkoIiMiICsgdC5leHRCcmFuZCArICJfaW5uZXJfbG93IC4iICsgdC5leHRCcmFuZCArICJfaW5uZXJfY29udGVudCIpLndpZHRoKCksCgkJCQkJCW4gPSBlIC0gMTI0IC0gNDsKCQkJCQlpKCIuaW5uZXJfcHJvX2xpc3QiKS53aWR0aChuKSwgXyhuKQoJCQkJfSwKCQkJCV8gPSBmdW5jdGlvbihlKSB7CgkJCQkJZSA9IGUgfHwgMDsKCQkJCQl2YXIgbiA9IGMuZGF0YS5sZW5ndGggfHwgMCwKCQkJCQkJYSA9IHBhcnNlSW50KGUgLyAxOTIpLAoJCQkJCQlvID0gbiAlIGEgPT0gMCA/IG4gLyBhIDogcGFyc2VJbnQobiAvIGEpICsgMTsKCQkJCQljLnRvdGFsID0gbywgYy5wZXIgPSBhLCBjLmNvbncgPSBlLCBpKCIudG90YWxfcGFnZSIpLnRleHQobyksIDEgPT0gbyAmJiBpKCIuIiArIHQuZXh0QnJhbmQgKyAiX2lubmVyX2NvbnRlbnQgLnR1cm5wYWdlIikuY3NzKCJ2aXNpYmlsaXR5IiwgImhpZGRlbiIpCgkJCQl9LAoJCQkJeCA9IGZ1bmN0aW9uKGUsIG4pIHsKCQkJCQlpZiAoZSA9IGUuc2xpY2UoMCwgNSksIGUgJiYgMCAhPSBlLmxlbmd0aCkgewoJCQkJCQl2YXIgaSA9IGVbMF0ubWF0Y2goL1swLTldKy0oWzAtOV0rKS8pOwoJCQkJCQlpICYmIChpID0gaVsxXSksIGUgPSBlLmpvaW4oIiwiKTsKCQkJCQkJdmFyIGEgPSB0LnNlcnZlciArICIvYnJ3ZXh0L2d1ZXNzX2Zhdm9yP2RwX2lkPSZkcF9pZHM9IiArIGUgKyAiJnNpdGVfaWQ9IiArIGkgKyAiJmNvbHVtbj1hbHNvdmlldyI7CgkJCQkJCW8uZ2V0KGEpLmRvbmUoZnVuY3Rpb24oZSkgewoJCQkJCQkJbigiZmF2b3IiLCBtKGUpKQoJCQkJCQl9KQoJCQkJCX0KCQkJCX0sCgkJCQl3ID0gZnVuY3Rpb24oKSB7CgkJCQkJaWYgKGMucGVyICYmIDAgIT0gYy5wZXIpIHsKCQkJCQkJdmFyIGUgPSBjLmNvbncgLSAxOTIgKiBjLnBlciwKCQkJCQkJCXQgPSBwYXJzZUludChlIC8gNCk7CgkJCQkJCWkoJy5pbm5lcl9wcm9fbGlzdCBsaTpub3QoIi5saV9maXJzdCIpJykuY3NzKCJtYXJnaW4tbGVmdCIsIHQgKyAxMiArICJweCIpCgkJCQkJfQoJCQkJfSwKCQkJCXYgPSBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQgPSBjLmRhdGEuc2xpY2UoKGUgLSAxKSAqIGMucGVyLCBlICogYy5wZXIpOwoJCQkJCWIodCkKCQkJCX0sCgkJCQliID0gZnVuY3Rpb24oZSkgewoJCQkJCXZhciBhID0gbigxOSksCgkJCQkJCW8gPSBsLmNvbXBpbGUoYSkoewoJCQkJCQkJZGF0YTogZQoJCQkJCQl9KTsKCQkJCQlpKCIjIiArIHQuZXh0QnJhbmQgKyAiX2lubmVyX2xvdyAuaW5uZXJfcHJvX2xpc3QgdWwiKS5lbXB0eSgpLmFwcGVuZChvKSwgdygpCgkJCQl9LAoJCQkJeSA9IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgbiA9IE51bWJlcihpKCIuIiArIHQuZXh0QnJhbmQgKyAiX2lubmVyX3BhZ2UgLmN1cl9wYWdlIikudGV4dCgpKTsKCQkJCQkxID09PSBlID8gKG4gPT0gYy50b3RhbCAmJiAobiA9IDApLCBpKCIuIiArIHQuZXh0QnJhbmQgKyAiX2lubmVyX3BhZ2UgLmN1cl9wYWdlIikudGV4dCgrK24pLCB2KG4pKSA6ICgxID09IG4gJiYgKG4gPSBjLnRvdGFsICsgMSksIGkoIi4iICsgdC5leHRCcmFuZCArICJfaW5uZXJfcGFnZSAuY3VyX3BhZ2UiKS50ZXh0KC0tbiksIHYobikpCgkJCQl9LAoJCQkJayA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlmb3IgKHZhciB0ID0gMDsgdCA8IGUubGVuZ3RoOyB0KyspCgkJCQkJCWlmICgiMCIgPT0gZVt0XS5kaXNjb3VudC50b1N0cmluZygpLnNsaWNlKDAsIDEpKSB7CgkJCQkJCQl2YXIgbiA9IE1hdGgucm91bmQoMTAwICogZVt0XS5kaXNjb3VudCkgLyAxMDsgLSAxID09IG4udG9TdHJpbmcoKS5pbmRleE9mKCIuIikgJiYgKG4gKz0gIi4wIiksIGVbdF0ubmV3ZGlzY291bnQgPSBuCgkJCQkJCX0gZWxzZSBlW3RdLm5ld2Rpc2NvdW50ID0gZVt0XS5kaXNjb3VudDsKCQkJCQlyZXR1cm4gZS5zb3J0KGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQkJcmV0dXJuIE51bWJlcihlLmRpc2NvdW50KSA+IHQuZGlzY291bnQgPyAxIDogZS5kaXNjb3VudCA9PSB0LmRpc2NvdW50ID8gMCA6IC0xCgkJCQkJfSksIGUKCQkJCX0sCgkJCQl6ID0gZnVuY3Rpb24oKSB7CgkJCQkJaSgiLmlubmVyX3BhZ2VfbGVmdCIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQl5KC0xKQoJCQkJCX0pLCBpKCIuaW5uZXJfcGFnZV9yaWdodCIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQl5KDEpCgkJCQkJfSkKCQkJCX0sCgkJCQlCID0gZnVuY3Rpb24oZSwgaSkgewoJCQkJCXZhciBhID0gaCgpOwoJCQkJCWlmIChhICE9PSAhMSAmJiAwICE9IGkubGVuZ3RoKSB7CgkJCQkJCXZhciBvID0gbigyMCk7CgkJCQkJCWMuZGF0YSA9IGk7CgkJCQkJCXZhciBzID0gbC5jb21waWxlKG8pKHsKCQkJCQkJCWRhdGE6IGksCgkJCQkJCQl0eXBlOiBlLAoJCQkJCQkJc19zZXJ2ZXI6IHQuc2VydmVyLAoJCQkJCQkJbmV3X2V4dGVuc2lvbjogdC5uZXdfZXh0ZW5zaW9uLAoJCQkJCQkJbnVtOiBpLmxlbmd0aCwKCQkJCQkJCWV4dE5hbWU6IHQuZXh0TmFtZSwKCQkJCQkJCWV4dEJyYW5kOiB0LmV4dEJyYW5kCgkJCQkJCX0pOwoJCQkJCQl1KHMsIGFbMF0sIGFbMV0pLCByLmxvZyhlICsgIuWIl+ihqOmhteW1jOWFpeWxleekuiIpLCBDKCksIGcoKSwgdigxKSwgeigpCgkJCQkJfQoJCQkJfSwKCQkJCWogPSBmdW5jdGlvbihlLCB0KSB7CgkJCQkJMCAhPSB0ID8gcy5nZXRsTG93ZXN0KGZ1bmN0aW9uKHQpIHsKCQkJCQkJMCA9PSB0Lmxlbmd0aCAmJiAwICE9IGUgPyBhLmdldChmdW5jdGlvbihlKSB7CgkJCQkJCQllID0gZihlKSwgZSAmJiAwICE9IGUubGVuZ3RoICYmIEIoImxvdyIsIGsoZSkpCgkJCQkJCX0pIDogMCAhPSB0Lmxlbmd0aCA/IEIoImZhdm9yIiwgdCkgOiB4KGEuZ2V0RHBJZHMoKSwgQikKCQkJCQl9KSA6IDAgIT0gZSAmJiBhLmdldChmdW5jdGlvbihlKSB7CgkJCQkJCWUgPSBmKGUpLCBlICYmIDAgIT0gZS5sZW5ndGggJiYgeChhLmdldERwSWRzKCksIEIpCgkJCQkJfSkKCQkJCX0sCgkJCQlDID0gZnVuY3Rpb24oKSB7CgkJCQkJaWYgKCJkYW5nZGFuZyIgPT0gdC5zaXRlKSB7CgkJCQkJCXZhciBlID0gaSgiIzEyODA4LmNsb3RoX2dvb2Rfc29ydCIpLm91dGVyV2lkdGgoKTsKCQkJCQkJZSA+IDAgJiYgaSgiIyIgKyB0LmV4dEJyYW5kICsgIl9pbm5lcl9sb3ciKS53aWR0aChlKQoJCQkJCX0KCQkJCQlpZiAoIjM2MGJ1eSIgPT0gdC5zaXRlKSB7CgkJCQkJCXZhciBlID0gaSgiI0pfc2VhcmNoV3JhcCIpLm91dGVyV2lkdGgoKTsKCQkJCQkJaSgiIyIgKyB0LmV4dEJyYW5kICsgIl9pbm5lcl9sb3ciKS53aWR0aChlKS5jc3MoIm1hcmdpbiIsICIxMHB4IGF1dG8iKQoJCQkJCX0KCQkJCX0sCgkJCQlTID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJCWlmICgwICE9IHQubGVuZ3RoKSB7CgkJCQkJCXZhciBpID0gdm9pZCAwOwoJCQkJCQlpID0gbigibG93IiA9PSBlID8gMjEgOiAyMik7CgkJCQkJCXZhciBhID0gbigyMyksCgkJCQkJCQlvID0gewoJCQkJCQkJCWl0ZW1oOiAibG93IiA9PSBlID8gMTU0IDogMTQwLAoJCQkJCQkJCXR5cGU6IGUsCgkJCQkJCQkJb3RoZXJoOiAibG93IiA9PSBlID8gMzMwIDogMzAwLAoJCQkJCQkJCXNvcnRGb3JiaXQ6ICEwLAoJCQkJCQkJCWxlbjogdC5sZW5ndGgsCgkJCQkJCQkJZm9sZEZvcmJpdDogITAKCQkJCQkJCX07CgkJCQkJCWEuaW5pdCh0LCBpLCBvKQoJCQkJCX0KCQkJCX0sCgkJCQlOID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJCTAgIT0gdCA/IHMuZ2V0bExvd2VzdChmdW5jdGlvbih0KSB7CgkJCQkJCTAgPT0gdC5sZW5ndGggJiYgMCAhPSBlID8gYS5nZXQoZnVuY3Rpb24oZSkgewoJCQkJCQkJZSA9IGYoZSksIGUgJiYgMCAhPSBlLmxlbmd0aCAmJiBTKCJsb3ciLCBrKGUpKQoJCQkJCQl9KSA6IDAgIT0gdC5sZW5ndGggPyBTKCJmYXZvciIsIHQpIDogeChhLmdldERwSWRzKCksIFMpCgkJCQkJfSkgOiAwICE9IGUgJiYgYS5nZXQoZnVuY3Rpb24oZSkgewoJCQkJCQllID0gZihlKSwgZSAmJiAwICE9IGUubGVuZ3RoICYmIFMoImxvdyIsIGsoZSkpCgkJCQkJfSkKCQkJCX0sCgkJCQlUID0gZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSBkLmdldCgic2hvd19sb3dwcmlfcmlnaHQiKSwKCQkJCQkJdCA9IGQuZ2V0KCJzaG93X2d1ZXNzZmF2b3JfcmlnaHQiKTsKCQkJCQlpKHdpbmRvdykud2lkdGgoKSA8IDFlMyA/IGooZSwgdCkgOiBOKGUsIHQpCgkJCQl9LAoJCQkJUCA9IGZ1bmN0aW9uKCkgewoJCQkJCVQoKQoJCQkJfTsKCQkJZS5leHBvcnRzLl9pbml0ID0gZnVuY3Rpb24oKSB7CgkJCQl0Lm9uKCJwZXJtYW5lbnRfaWQiLCBmdW5jdGlvbigpIHsKCQkJCQkoIm1pX25ldyIgIT0gdC5mcm9tX2RldmljZSB8fCAyICE9IHQucGFnZUluZm8udHlwZSkgJiYgImVmb3RpbGUiICE9IHQuc2l0ZSAmJiBQKCkKCQkJCX0pCgkJCX0sIGUuZXhwb3J0cy5nZXRQdXJlTWVkaWF2ID0gZnVuY3Rpb24oKSB7CgkJCQkidGx4cyIgIT09IHQuZnJvbV9kZXZpY2UgJiYgcy5nZXRsTG93ZXN0KGZ1bmN0aW9uKGUpIHsKCQkJCQllICYmIDAgIT0gZS5sZW5ndGggJiYgUygiZmF2b3IiLCBlKQoJCQkJfSkKCQkJfQoJCX0pLmNhbGwodCwgbigxKSwgbig2KSkKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJKGZ1bmN0aW9uKHQpIHsKCQkJInVzZSBzdHJpY3QiOwoJCQl2YXIgaSA9IG4oOSksCgkJCQlhID0gbigxMCksCgkJCQlvID0gbigxMiksCgkJCQlyID0gdm9pZCAwLAoJCQkJcyA9IFtdLAoJCQkJbCA9IHZvaWQgMCwKCQkJCWMgPSB2b2lkIDAsCgkJCQlkID0gZnVuY3Rpb24oZSkgewoJCQkJCWlmICghZS5sZW5ndGgpIHJldHVybiBlOwoJCQkJCWZvciAodmFyIHQgPSB7CgkJCQkJCWluZGV4OiAwLAoJCQkJCQlkaXNjb3VudDogMTAKCQkJCQl9LCBuID0gMDsgbiA8IGUubGVuZ3RoOyBuKyspIE51bWJlcihlW25dLmRpc2NvdW50KSA8IHQuZGlzY291bnQgJiYgKHQuZGlzY291bnQgPSBOdW1iZXIoZVtuXS5kaXNjb3VudCksIHQuaW5kZXggPSBuKTsKCQkJCQlyZXR1cm4gZVt0LmluZGV4XS5oaWdoZXN0X2Rpc2NvdW50ID0gITAsIGUKCQkJCX0sCgkJCQlwID0gZnVuY3Rpb24oZSkgewoJCQkJCWlmIChzLmxlbmd0aCA+IDApCgkJCQkJCWZvciAodmFyIHQgPSAwOyB0IDwgcy5sZW5ndGg7IHQrKykgc1t0XShlKQoJCQkJfSwKCQkJCWggPSBmdW5jdGlvbihlKSB7CgkJCQkJZm9yICh2YXIgdCA9ICEwOyB0OykgewoJCQkJCQl2YXIgbiA9IGU7CgkJCQkJCXQgPSAhMTsKCQkJCQkJdmFyIGkgPSBuLmxlbmd0aCwKCQkJCQkJCWEgPSBKU09OLnN0cmluZ2lmeShuKTsKCQkJCQkJaWYgKCEoYS5sZW5ndGggPiA1ZTMpKSByZXR1cm4gYTsKCQkJCQkJZSA9IG4uc2xpY2UoMCwgaSAtIDEwKSwgdCA9ICEwLCBpID0gYSA9IHZvaWQgMAoJCQkJCX0KCQkJCX0sCgkJCQl1ID0gZnVuY3Rpb24oZSwgbikgewoJCQkJCXZhciBhID0gaChlKTsKCQkJCQlpLmdldCh0LnNlcnZlciArICIvYnJ3ZXh0L2xvd2VzdD9vcD1nZXQmdXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQobG9jYXRpb24uaHJlZikgKyAiJnVybHM9IiArIGVuY29kZVVSSUNvbXBvbmVudChhKSkuZG9uZShmdW5jdGlvbihlKSB7CgkJCQkJCWlmIChjID0gZS5hbGxfZHBfaWRzLCAhZS5yZXN1bHQgfHwgMCA9PT0gZS5yZXN1bHQubGVuZ3RoKSByZXR1cm4gbihbXSksIHZvaWQgcChbXSk7CgkJCQkJCXZhciB0ID0gW107CgkJCQkJCWZvciAodmFyIGkgaW4gZS5yZXN1bHQpIHQucHVzaChlLnJlc3VsdFtpXSk7CgkJCQkJCXQgPSBvKHQpLCByID0gdCwgbih0KSwgcCh0KQoJCQkJCX0pLmZhaWwoZnVuY3Rpb24oZSkgewoJCQkJCQluKFtdKSwgcChbXSkKCQkJCQl9KQoJCQkJfTsKCQkJZS5leHBvcnRzLmdldERwSWRzID0gZnVuY3Rpb24oKSB7CgkJCQlyZXR1cm4gYwoJCQl9LCBlLmV4cG9ydHMuZ2V0ID0gZnVuY3Rpb24oZSkgewoJCQkJaWYgKGwpIHJldHVybiB2b2lkKHIgPyBlKHIpIDogcy5wdXNoKGUpKTsKCQkJCWwgPSAhMDsKCQkJCXZhciB0ID0gYS5pbml0KDUwKTsKCQkJCXQgJiYgMCAhPSB0Lmxlbmd0aCAmJiB1KHQsIGZ1bmN0aW9uKHQpIHsKCQkJCQl0ID0gZCh0KSwgZSh0KQoJCQkJfSkKCQkJfQoJCX0pLmNhbGwodCwgbigxKSkKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJKGZ1bmN0aW9uKHQpIHsKCQkJInVzZSBzdHJpY3QiOwoJCQl2YXIgaSA9IG4oNiksCgkJCQlhID0gZnVuY3Rpb24oZSkgewoJCQkJCWlmICghZSkgdGhyb3cgbmV3IEVycm9yKCJ1cmwg5LiN6IO95Li656m6Iik7CgkJCQkJdmFyIG4gPSAiPyIsCgkJCQkJCWkgPSAiY2FsbGJhY2s9PyYiOwoJCQkJCWUuaW5kZXhPZigiPyIpID4gLTEgJiYgKG4gPSAiJiIpOwoJCQkJCXZhciBhLCBvID0gImZvcm1hdD1qc29ucCYiOwoJCQkJCXJldHVybiAodC5jaHJvbWVfZXh0ZW5zaW9uIHx8ICJtYXh0aG9uIiA9PT0gdC5mcm9tX2RldmljZSkgJiYgKGEgPSAhMCksIGEgJiYgKGkgPSAiIiwgbyA9ICJmb3JtYXQ9anNvbiYiKSwgIiIgKyBlICsgbiArIGkgKyBvCgkJCQl9OwoJCQllLmV4cG9ydHMucmF3ID0gZnVuY3Rpb24oZSkgewoJCQkJdmFyIHQsIG4gPSB7CgkJCQkJCWRvbmU6IGZ1bmN0aW9uKGUpIHsKCQkJCQkJCXQgPSBlCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWkgPSBuZXcgWE1MSHR0cFJlcXVlc3Q7CgkJCQlyZXR1cm4gaS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIiwgZnVuY3Rpb24oKSB7CgkJCQkJdCAmJiB0KGkucmVzcG9uc2VUZXh0KQoJCQkJfSksIGkub3BlbigiR0VUIiwgZSwgITApLCBpLnNlbmQoKSwgbgoJCQl9LCBlLmV4cG9ydHMuZ2V0ID0gZnVuY3Rpb24oZSkgewoJCQkJcmV0dXJuIGUgPSBhKGUpICsgInVuaW9uPSIgKyB0LnVuaW9uICsgIiZ2ZXJzaW9uPSIgKyB0LnZlcnNpb24gKyAiJmZyb21fZGV2aWNlPSIgKyB0LmZyb21fZGV2aWNlLCB0LmNyYzY0ICYmIChlICs9ICImY3JjNjQ9MSIpLCBpLmdldEpTT04oZSkKCQkJfSwgZS5leHBvcnRzLmdldFB1cmUgPSBmdW5jdGlvbihlKSB7CgkJCQlyZXR1cm4gZSA9IGEoZSksIGkuZ2V0SlNPTihlKQoJCQl9CgkJfSkuY2FsbCh0LCBuKDEpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCkgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBpID0gbigxMSksCgkJCQlhID0gbig1KSwKCQkJCW8gPSB2b2lkIDAsCgkJCQlyID0gZnVuY3Rpb24oZSkgewoJCQkJCWZvciAodmFyIHQgPSB7CgkJCQkJCWRhdGE6IFtdLAoJCQkJCQl1bmlxdWU6IHt9CgkJCQkJfSwgbiA9IGZ1bmN0aW9uKGUpIHsKCQkJCQkJaWYgKGUpIHsKCQkJCQkJCXZhciB0ID0gZS5pbmRleE9mKCIjIikgPiAtMTsKCQkJCQkJCXJldHVybiB0ICYmIChlID0gZS5zbGljZSgwLCB0KSksIDAgPT09IGUuaW5kZXhPZigiLy8iKSA/ICJodHRwOiIgKyBlIDogMCA9PT0gZS5pbmRleE9mKCIvIikgPyAiIiArIGxvY2F0aW9uLmhvc3QgKyBlIDogZQoJCQkJCQl9CgkJCQkJfSwgaSA9IDA7IGkgPCBlLmxlbmd0aDsgaSsrKQoJCQkJCQlpZiAoZVtpXSkgewoJCQkJCQkJdmFyIG8gPSBuKGVbaV0pOwoJCQkJCQkJbyAmJiBhLmlzUHJvZHVjdFBhZ2UobykgJiYgIXQudW5pcXVlW29dICYmICh0LnVuaXF1ZVtvXSA9ICEwLCB0LmRhdGEucHVzaChvKSkKCQkJCQkJfQoJCQkJCXJldHVybiB0LmRhdGEKCQkJCX0sCgkJCQlzID0gZnVuY3Rpb24oZSwgbikgewoJCQkJCWZvciAodmFyIGkgPSB2b2lkIDAsIGEgPSBlLmxlbmd0aCwgbyA9IDA7IGEgPiBvOyBvKyspIHsKCQkJCQkJdmFyIHIgPSBlW29dOwoJCQkJCQlpZiAoaSA9IHQociArICIgYSIpLCBpLmxlbmd0aCkgYnJlYWsKCQkJCQl9CgkJCQkJcmV0dXJuIG4oaSkKCQkJCX07CgkJCWUuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oZSkgewoJCQkJaWYgKG8pIHJldHVybiBlID8gby5zbGljZSgwLCBlKSA6IG87CgkJCQl2YXIgdCA9IGkuY2hlY2soKTsKCQkJCWlmICh0ICYmICghdCB8fCB0Lmxlbmd0aCkpIHsKCQkJCQl2YXIgbiA9IFtdOwoJCQkJCXJldHVybiBzKHQsIGZ1bmN0aW9uKHQpIHsKCQkJCQkJdC5lYWNoKGZ1bmN0aW9uKGUsIHQsIGkpIHsKCQkJCQkJCXZhciBhID0gdC5nZXRBdHRyaWJ1dGUoImhyZWYiKTsKCQkJCQkJCWEgJiYgbi5wdXNoKGEpCgkJCQkJCX0pLCBuID0gcihuKSwgbyA9IG4sIG4gPSBuLnNsaWNlKDAsIGUpCgkJCQkJfSksIG4KCQkJCX0KCQkJfQoJCX0pLmNhbGwodCwgbig2KSkKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJKGZ1bmN0aW9uKHQpIHsKCQkJInVzZSBzdHJpY3QiOwoJCQl2YXIgbiA9IHsKCQkJCQkiMzYwYnV5IjogWwoJCQkJCQlbL14oPzpodHRwfGh0dHBzKTpcL1wvd3d3XC5qZFwuY29tXC9waW5wYWlcLy4qXC5odG1sLywgIiNKX2dvb2RzTGlzdCIsICIjcGxpc3QgLmxpc3QtaCJdLAoJCQkJCQlbL14oPzpodHRwfGh0dHBzKTpcL1wvc2VhcmNoXC5qZFwuY29tXC9TZWFyY2hcP2tleXdvcmQvaSwgIiNKX2dvb2RzTGlzdCBsaSIsICIjcGxpc3QgLmxpc3QtaCJdLAoJCQkJCQlbL14oPzpodHRwfGh0dHBzKTpcL1wvbGlzdFwuamRcLmNvbS8sICIjSl9tYWluIGxpIl0sCgkJCQkJCVsvXig/Omh0dHB8aHR0cHMpOlwvXC9zYWxlXC5qZFwuY29tLywgImRpdi5sYXlvdXRjb250YWluZXIgLmxheW91dGFyZWEgLmxheW91dCAubGF5b3V0X29uZSJdCgkJCQkJXSwKCQkJCQkiNTFidXkiOiBbCgkJCQkJCVsvaHR0cDpcL1wvc2VhcmNoZXhcLnlpeHVuXC5jb20vLCAiI2NvbnRhaW5lciAuZ29vZHMiXSwKCQkJCQkJWy9odHRwOlwvXC9ldmVudFwueWl4dW5cLmNvbS8sICJ1bC5pdGVtX2xpc3RfMyIsICJkaXYuYmQiXSwKCQkJCQkJWy9odHRwOlwvXC9zYWxlXC55aXh1blwuY29tLywgIiNKX2Zsb29ySG9saWRheSAuYmQiXSwKCQkJCQkJWy9odHRwOlwvXC9ldmVudFwueWl4dW5cLmNvbVwvZXZlbnRcLy4qXC5odG1sLywgIi5wYWdlX2V2ZW50Il0KCQkJCQldLAoJCQkJCWFtYXpvbjogWwoJCQkJCQlbL2h0dHA6XC9cL3d3d1wuYW1hem9uXC5jblwvW2Etel1cLy8sICJib2R5Il0KCQkJCQldLAoJCQkJCXN1bmluZzogWwoJCQkJCQlbL2h0dHA6XC9cL2N1eGlhb1wuc3VuaW5nXC5jb20vLCAiLmhlYWQtaW1nLXdyYXBwZXIiLCAiLmZsb29yIl0sCgkJCQkJCVsvaHR0cDpcL1wvbGlzdFwuc3VuaW5nXC5jb20vLCAiLmdyaWQiLCAiI2ZpbHRlci1yZXN1bHRzIGxpIl0sCgkJCQkJCVsvaHR0cDpcL1wvc2VhcmNoXC5zdW5pbmdcLmNvbS8sICIjZmlsdGVyLXJlc3VsdHMgbGkiXQoJCQkJCV0sCgkJCQkJZGFuZ2Rhbmc6IFsKCQkJCQkJWy9odHRwOlwvXC93d3dcLmRhbmdkYW5nXC5jb21cL2JyYW5kc1wvLywgIi5zZWFyY2hfbGlzdCJdLAoJCQkJCQlbL2h0dHA6XC9cL3NlYXJjaFwuZGFuZ2RhbmdcLmNvbS8sICIuYmlnaW1nIiwgIi5jbG90aF9nb29kX3NvcnQiXSwKCQkJCQkJWy9odHRwOlwvXC9ib29rXC5kYW5nZGFuZ1wuY29tLywgIiNiZF9hdXRvIHVsIl0sCgkJCQkJCVsvaHR0cDpcL1wvbGlzdFwuZGFuZ2RhbmdcLmNvbS8sICIjYmQgLnJlc3VsdGxpc3QiXSwKCQkJCQkJWy9odHRwOlwvXC9wcm9tb1wuZGFuZ2RhbmdcLmNvbS8sICIucHJvbW90aW9uc2xpc3Rfd3JhcHBlciAucHJvX2xpc3QiLCAiLnByb21vX2FjdGl2aXR5X3dyYXAiXSwKCQkJCQkJWy9odHRwOlwvXC92XC5kYW5nZGFuZ1wuY29tLywgIiNiZCAudl9zaG9wX2JveCJdLAoJCQkJCQlbL2h0dHA6XC9cL3RcLmRhbmdkYW5nXC5jb20vLCAiI2JkIHVsIl0KCQkJCQldLAoJCQkJCWdvbWU6IFsKCQkJCQkJWy9odHRwOlwvXC9icmFuZFwuZ29tZVwuY29tXC5jbi8sICIucmVzdWx0LXdyYXAiXSwKCQkJCQkJWy9odHRwOlwvXC9saXN0XC5nb21lXC5jb21cLmNuLywgIi5uU2VhcmNoV2FycC1tYWluIl0sCgkJCQkJCVsvaHR0cDpcL1wvcHJvbVwuZ29tZVwuY29tXC5jbi8sICIudHBhZ2UgLnBhZ2V0IiwgIi5zaGFuZ3Bpbl9meCJdLAoJCQkJCQlbL2h0dHA6XC9cL3NlYXJjaFwuZ29tZVwuY29tXC5jbi8sICIucmVzdWx0LXdyYXAiLCAibGkucHJvZHVjdC1pdGVtIl0KCQkJCQldLAoJCQkJCXlpaGFvZGlhbjogWwoJCQkJCQlbL2h0dHA6XC9cL2xpc3RcLnloZFwuY29tLywgIi5tb2RfcHJvZHVjdF9saXN0IC5tb2Rfc2VhcmNoX3BybyJdLAoJCQkJCQlbL2h0dHA6XC9cL2Ntc1wueWhkXC5jb20vLCAiI2Ntc0JnUGF0aCAiXSwKCQkJCQkJWy9odHRwOlwvXC9zZWFyY2hcLnloZFwuY29tLywgIi5tb2RfcHJvZHVjdF9saXN0IC5tb2Rfc2VhcmNoX3BybyJdCgkJCQkJXSwKCQkJCQlqdW1laTogWwoJCQkJCQlbL14oPzpodHRwfGh0dHBzKTpcL1wvc2VhcmNoXC5qdW1laVwuY29tLywgIi5wcm9kdWN0c193cmFwIl0sCgkJCQkJCVsvXig/Omh0dHB8aHR0cHMpOlwvXC9oZFwuanVtZWlcLmNvbS8sICIuYWN0X3Byb2R1Y3RfbGlzdCJdCgkJCQkJXSwKCQkJCQlqdW1laWdsb2JhbDogWwoJCQkJCQlbL14oPzpodHRwfGh0dHBzKTpcL1wvaGRcLmp1bWVpZ2xvYmFsXC5jb20vLCAiLmFjdF9wcm9kdWN0X2xpc3QiLCAiLm1vZGVsX3BhcmVudCB1bCJdCgkJCQkJXSwKCQkJCQl2bWFsbDogWwoJCQkJCQlbL14oPzpodHRwfGh0dHBzKTpcL1wvd3d3XC52bWFsbFwuY29tXC8uKy8sICIubGF5b3V0Il0sCgkJCQkJCVsvXig/Omh0dHB8aHR0cHMpOlwvXC9zYWxlXC52bWFsbFwuY29tLywgIi5ndWlkZS1iZCIsICIjYWN0aXZpdHlfbWFpbiJdLAoJCQkJCQlbL14oPzpodHRwfGh0dHBzKTpcL1wvbW1cLnZtYWxsXC5jb20vLCAiLm5ldy1yZXNlcnZlLXRvcC13cnAiXQoJCQkJCV0sCgkJCQkJZmVpbml1OiBbCgkJCQkJCVsvXig/Omh0dHB8aHR0cHMpOlwvXC93d3dcLmZlaW5pdVwuY29tXC8uKy8sICIuZWRpdERvbWFpbiIsICIucHJvZHVjdHNob3ciLCAiLmV4aGliaXRpb24iLCAiI3RyYWNrZXJfY2F0ZWdvcnkiXSwKCQkJCQkJWy9eKD86aHR0cHxodHRwcyk6XC9cL3NhbGVcLmZlaW5pdVwuY29tLywgIi50aXRsZV9iZy5jbXNfcG9vbCB1bCJdLAoJCQkJCQlbL14oPzpodHRwfGh0dHBzKTpcL1wvc2VhcmNoXC5mZWluaXVcLmNvbS8sICIjY2F0YV9jaG9vc2VfcHJvZHVjdCJdCgkJCQkJXSwKCQkJCQl5b3Vnb3U6IFsKCQkJCQkJWy9eKD86aHR0cHxodHRwcyk6XC9cL3d3d1wueW91Z291XC5jb21cLy4rLywgIi55dWkzLWciXSwKCQkJCQkJWy9eKD86aHR0cHxodHRwcyk6XC9cL3Nlb3VsXC55b3Vnb3VcLmNvbS8sICJkaXYubWFpbl9nb29kcyIsICIueXVpMy1nIl0KCQkJCQldLAoJCQkJCWthb2xhOiBbCgkJCQkJCVsvXig/Omh0dHB8aHR0cHMpOlwvXC93d3dcLmthb2xhXC5jb21cLy4rLywgImxpLmdvb2RzIiwgIi53cmFwIHVsIl0KCQkJCQldLAoJCQkJCWppdXhpYW46IFsKCQkJCQkJWy9eKD86aHR0cHxodHRwcyk6XC9cL3d3d1wuaml1eGlhblwuY29tXC8uKy8sICIubWFpbkJveCIsICIuc2VxdWVuY2VfbGlzdCJdLAoJCQkJCQlbL14oPzpodHRwfGh0dHBzKTpcL1wvc3BlY2lhbFwuaml1eGlhblwuY29tLywgIi5mb3VyYm94Il0KCQkJCQldLAoJCQkJCXNmYmVzdDogWwoJCQkJCQlbL14oPzpodHRwfGh0dHBzKTpcL1wvd3d3XC5zZmJlc3RcLmNvbVwvLisvLCAiLnNmUmlnaHQiLCAiLnAtbGlzdCJdCgkJCQkJXSwKCQkJCQl2YW5jbDogWwoJCQkJCQlbL14oPzpodHRwfGh0dHBzKTpcL1wvc1wudmFuY2xcLmNvbS8sICJsaS5wcm9kdWN0d3JhcHBlciJdCgkJCQkJXSwKCQkJCQlmZW5ncXU6IFsKCQkJCQkJWy9eKD86aHR0cHxodHRwcyk6XC9cL3d3d1wuZmVuZ3F1XC5jb21cLy4rLywgIi5tb2R1bGUiXQoJCQkJCV0sCgkJCQkJbGVmZW5nOiBbCgkJCQkJCVsvXig/Omh0dHB8aHR0cHMpOlwvXC9zZWFyY2hcLmxlZmVuZ1wuY29tLywgIiNwcm9kdWN0RGl2R3JvdXAiXSwKCQkJCQkJWy9eKD86aHR0cHxodHRwcyk6XC9cL2JyYW5kXC5sZWZlbmdcLmNvbS8sICIubWFrZXVwIl0KCQkJCQldLAoJCQkJCWVoYWllcjogWwoJCQkJCQlbL14oPzpodHRwfGh0dHBzKTpcL1wvc2VhcmNoXC5laGFpZXJcLmNvbS8sICJ1bC51bC1wcm9saXN0Il0sCgkJCQkJCVsvXig/Omh0dHB8aHR0cHMpOlwvXC93d3dcLmVoYWllclwuY29tXC8uKy8sICJ1bC51bC1leGNlbCIsICIudGFiLWNvbnQiLCAiLmtpbmRzLW1haW4iXQoJCQkJCV0sCgkJCQkJeXVuaG91OiBbCgkJCQkJCVsvXig/Omh0dHB8aHR0cHMpOlwvXC9zZWFyY2hcLnl1bmhvdVwuY29tLywgIiNqR29vZHNDbnQgLmdvb2RzLWxpc3RzIGRpdi5jb2xzIl0sCgkJCQkJCVsvXig/Omh0dHB8aHR0cHMpOlwvXC9saXN0XC55dW5ob3VcLmNvbVwvLisvLCAiI2pHb29kc0NudCAuZ29vZHMtbGlzdHMgZGl2LmNvbHMiXQoJCQkJCV0sCgkJCQkJdWxlOiBbCgkJCQkJCVsvXig/Omh0dHB8aHR0cHMpOlwvXC8oPyFpdGVtfHd3dykuK1wudWxlXC5jb21cLy4rLywgIi5nb29kc0xpc3QgLmdvb2RzTGlzdEJsb2NrIGxpLm5vUHJlIl0KCQkJCQldLAoJCQkJCWJhbmdnbzogWwoJCQkJCQlbL14oPzpodHRwfGh0dHBzKTpcL1wvc2VhcmNoXC5iYW5nZ29cLmNvbS8sICIubWJzaG9wX3BkTGlzdCBsaS5tYnNob3BfbGlzdFBkQ29uIl0KCQkJCQldLAoJCQkJCWJhb2JlaWdlemk6IFsKCQkJCQkJWy9eKD86aHR0cHxodHRwcyk6XC9cL3NlYXJjaFwuYmFvYmVpZ2V6aVwuY29tLywgIiNtYWluX2xpc3QgLnByb19pdGVtIl0sCgkJCQkJCVsvXig/Omh0dHB8aHR0cHMpOlwvXC9saXN0XC5iYW9iZWlnZXppXC5jb20vLCAiI21haW5fbGlzdCAucHJvX2l0ZW0iXSwKCQkJCQkJWy9eKD86aHR0cHxodHRwcyk6XC9cL2l0ZW1cLmJhb2JlaWdlemlcLmNvbVwvW2Etel0rX1swLTldK1wvLywgIiNtYWluX2xpc3QgLnByb19pdGVtIl0KCQkJCQldLAoJCQkJCXpob25naml1OiBbCgkJCQkJCVsvXig/Omh0dHB8aHR0cHMpOlwvXC93d3dcLnpob25naml1XC5jblwvbGlzdFwvLywgIiNwbGlzdCBsaS5jbGVhcmZpeCJdLAoJCQkJCQlbL14oPzpodHRwfGh0dHBzKTpcL1wvd3d3XC56aG9uZ2ppdVwuY25cL3NlYXJjaFwuLywgIiNwbGlzdCBsaS5jbGVhcmZpeCJdLAoJCQkJCQlbL14oPzpodHRwfGh0dHBzKTpcL1wvc1wuemhvbmdqaXVcLmNuXC9zZWFyY2hcL2luZGV4LywgIi5yZ19zbF9saXN0IHVsIGxpIl0KCQkJCQldCgkJCQl9LAoJCQkJaSA9IHZvaWQgMDsKCQkJZS5leHBvcnRzLmNoZWNrID0gZnVuY3Rpb24oZSkgewoJCQkJaWYgKGkpIHJldHVybiBpOwoJCQkJaWYgKGUgPSB0LnNpdGUgfHwgZSwgIW5bZV0pIHJldHVybiAhMTsKCQkJCWZvciAodmFyIGEgPSBuW2VdLmxlbmd0aCAtIDE7IGEgPj0gMDsgYS0tKSB7CgkJCQkJdmFyIG8gPSBuW2VdW2FdOwoJCQkJCWlmIChvWzBdLnRlc3QobG9jYXRpb24uaHJlZikpIHJldHVybiBpID0gby5zbGljZSgxKQoJCQkJfQoJCQl9CgkJfSkuY2FsbCh0LCBuKDEpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCkgewoJCQkidXNlIHN0cmljdCI7CgkJCWUuZXhwb3J0cyA9IGZ1bmN0aW9uKGUpIHsKCQkJCXZhciBuID0gWyIxNSIsICI5NCIsICIxMDgiLCAiMTk2IiwgIjMyIiwgIjIzNCIsICIyNzMiLCAiMjkwIiwgIjI5MiIsICIzNjciLCAiMzczIiwgIjM3NyJdLAoJCQkJCWkgPSB0LmNyYzY0ID8gdC5pbWc2NF9zZXJ2ZXIgOiB0LmltZ19zZXJ2ZXI7CgkJCQlpZiAoIWUubGVuZ3RoKSByZXR1cm4gW107CgkJCQlmb3IgKHZhciBhID0gMDsgYSA8IGUubGVuZ3RoOyBhKyspIHsKCQkJCQl2YXIgbyA9IGVbYV0sCgkJCQkJCXIgPSBvLmRwX2lkOwoJCQkJCWlmIChyKQoJCQkJCQlmb3IgKHZhciBzID0gci5tYXRjaCgvXGQrLShcZCspLylbMV0sIGwgPSAwOyBsIDwgbi5sZW5ndGg7IGwrKykgcyA9PT0gbltsXSAmJiAoZVthXS5waWNfdXJsID8gZVthXS5waWNfdXJsID0gaSArICIvY196b29tLGhfOTAvZHAiICsgby5kcF9pZCA6IGVbYV0uaW1nX3VybCA9IGkgKyAiL2Nfem9vbSxoXzkwL2RwIiArIG8uZHBfaWQpCgkJCQl9CgkJCQlyZXR1cm4gZQoJCQl9CgkJfSkuY2FsbCh0LCBuKDEpKQoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQkidXNlIHN0cmljdCI7CgoJCWZ1bmN0aW9uIG4oZSkgewoJCQl2YXIgdCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIik7CgkJCXQgJiYgdFswXSAmJiAodCA9IHRbMF0pOwoJCQl2YXIgbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpOwoJCQluLnNyYyA9IGUsIG4uYXN5bmMgPSAhMCwgbi5kZWZlciA9ICEwLCBuLmxhbmd1YWdlID0gIkphdmFTY3JpcHQiLCB0LmFwcGVuZENoaWxkKG4pLCBhID0gITAKCQl9CgkJdmFyIGkgPSB2b2lkIDAsCgkJCWEgPSB2b2lkIDAsCgkJCW8gPSB2b2lkIDA7CgkJZS5leHBvcnRzLmluaXQgPSBmdW5jdGlvbihlKSB7CgkJCWUgJiYgbihlKQoJCX0sIGUuZXhwb3J0cy5sb2cgPSBmdW5jdGlvbihlLCB0LCBuLCByLCBzKSB7CgkJCWEgJiYgKG8gPT09IGUgPyAoY2xlYXJUaW1lb3V0KGkpLCBpID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCXdpbmRvdy5fY3pjICYmIHdpbmRvdy5fY3pjLnB1c2ggJiYgKHQgPSB0IHx8ICIuIiwgbiA9IG4gfHwgIiIsIHdpbmRvdy5fY3pjLnB1c2goWyJfdHJhY2tFdmVudCIsIGUsIHQsIG4sIHIsIHNdKSwgbyA9IGUpCgkJCX0sIDMwMCkpIDogd2luZG93Ll9jemMgJiYgd2luZG93Ll9jemMucHVzaCAmJiAodCA9IHQgfHwgIi4iLCBuID0gbiB8fCAiIiwgd2luZG93Ll9jemMucHVzaChbIl90cmFja0V2ZW50IiwgZSwgdCwgbiwgciwgc10pLCBvID0gZSkpCgkJfQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCwgaSkgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBhID0gdm9pZCAwLAoJCQkJbyA9IFsianNkeCIsICJjaHV5dW4iLCAidGx4cyIsICJqc3h5IiwgInpqZHgiLCAieGluZ3l1ZSIsICJzaGNrIiwgIm1pX25ldyIsICJnZGptIiwgImhudHQiLCAieGRqZiIsICJoYWd3IiwgIjkyMzI1MyIsICIxMDk4MTY0IiwgIjc2NDA1MCIsICI1Mzg2MjUiLCAiMTMyOTE4NSIsICI5Mjk3MzMiXSwKCQkJCXIgPSB7CgkJCQkJbmpjazogWyJ1RnM3SU4iLCAiTGgyWDJBIl0sCgkJCQkJZ2RqbTogWyJ1RnM3SU4iLCAiTGgyWDJBIl0sCgkJCQkJanhkeDogWyJEU3pFRmEiLCAidFc2bnRRIl0sCgkJCQkJbWlfbmV3OiBbIkdQVmo2MCIsICJPc21KS2IiXSwKCQkJCQlqc2R4OiBbIjZWSk1vTSIsICJuNndHekEiXSwKCQkJCQlqc3h5OiBbIjZWSk1vTSIsICJuNndHekEiXSwKCQkJCQljaHV5dW46IFsiOWtrektQIiwgIlF5MUdBMSJdLAoJCQkJCWJqbHQ6IFsiOWtrektQIiwgIlF5MUdBMSJdLAoJCQkJCXpqZHg6IFsiVTJ4OFd0IiwgIjdsNVkxVyJdLAoJCQkJCXhpbmd5dWU6IFsiQ0g3ZmlyIiwgImhYYVZTbSJdLAoJCQkJCWhudHQ6IFsiQ0g3ZmlyIiwgImhYYVZTbSJdLAoJCQkJCXNoY2s6IFsiOW94REE2IiwgImZwV0FHdSJdLAoJCQkJCXRseHM6IFsiZk95Q0xiIiwgInBiTHFtQyJdLAoJCQkJCXhkamY6IFsiUG1hOHJIIiwgImQzQXAzMiJdLAoJCQkJCXNobHQ6IFsiSlZQQ0VvIiwgIlVqWjdDTiJdLAoJCQkJCWhhZ3c6IFsiODZlUE92IiwgIjVvNEtVbSJdLAoJCQkJCTEwOTgxNjQ6IFsiQ0g3ZmlyIiwgIkNIN2ZpciJdLAoJCQkJCTc2NDA1MDogWyJDSDdmaXIiLCAiQ0g3ZmlyIl0sCgkJCQkJNTM4NjI1OiBbIlVqWjdDTiIsICJValo3Q04iXSwKCQkJCQk5MjMyNTM6IFsiZDNBcDMyIiwgImQzQXAzMiJdLAoJCQkJCTEzMjkxODU6IFsiVWpaN0NOIiwgIlVqWjdDTiJdLAoJCQkJCTkyOTczMzogWyJEU3pFRmEiLCAiRFN6RUZhIl0KCQkJCX0sCgkJCQlzID0gWyJlZm90aWxlIl0sCgkJCQlsID0gZnVuY3Rpb24oKSB7CgkJCQkJZnVuY3Rpb24gZShlKSB7CgkJCQkJCXZhciB0LCBuID0gMSwKCQkJCQkJCWkgPSAwOwoJCQkJCQlpZiAoZSkKCQkJCQkJCWZvciAobiA9IDAsIHQgPSBlLmxlbmd0aCAtIDE7IHQgPj0gMDsgdC0tKSBpID0gZS5jaGFyQ29kZUF0KHQpLCBuID0gKG4gPDwgNiAmIDI2ODQzNTQ1NSkgKyBpICsgKGkgPDwgMTQpLCBpID0gMjY2MzM4MzA0ICYgbiwgbiA9IDAgIT0gaSA/IG4gXiBpID4+IDIxIDogbjsKCQkJCQkJcmV0dXJuIG4KCQkJCQl9CgkJCQkJcmV0dXJuICgiIiArIGUod2luZG93LmxvY2F0aW9uLmhyZWYpICsgZShkb2N1bWVudC5kb21haW4pICsgKG5ldyBEYXRlIC0gMCkgKyBNYXRoLmZsb29yKDFlMyAqIE1hdGgucmFuZG9tKCkpKS5zdWJzdHIoMCwgMzIpCgkJCQl9KCksCgkJCQljID0gZnVuY3Rpb24oZSkgewoJCQkJCWZvciAodmFyIG4gPSBbXSwgaSA9IDE7IGkgPCBlLmxlbmd0aDsgaSsrKSB7CgkJCQkJCXZhciBhID0ge30sCgkJCQkJCQlvID0gZVtpXS5jdXJsMS5tYXRjaCgvJnVybD0oW14mXSspJi8pICYmIGVbaV0uY3VybDEubWF0Y2goLyZ1cmw9KFteJl0rKSYvKVsxXTsKCQkJCQkJIm1pX25ldyIgPT09IHQuZnJvbV9kZXZpY2UgJiYgbyAmJiBvLm1hdGNoKC8oPzpsZW1hbGx8dm1hbGwpLykgfHwgKGEudXJsID0gZVtpXS5jdXJsMSwgYS5pbWdfdXJsID0gZVtpXS50aW1nLCBhLnRpdGxlID0gZVtpXS5wbiwgYS5wcmljZSA9IGVbaV0ucHJpY2UsIGEudHlwZXMgPSAiZmFzaGlvbiIsIG4ucHVzaChhKSkKCQkJCQl9CgkJCQkJcmV0dXJuIG4KCQkJCX0sCgkJCQlkID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJCWkuYWpheCh7CgkJCQkJCXVybDogZSwKCQkJCQkJc2NyaXB0Q2hhcnNldDogIlVURi04IiwKCQkJCQkJZGF0YVR5cGU6ICJqc29ucCIsCgkJCQkJCWpzb25wOiAianNvbnEiLAoJCQkJCQlzdWNjZXNzOiBmdW5jdGlvbihlKSB7CgkJCQkJCQlhIHx8ICh0KGUgJiYgZS5sZW5ndGggPiAxID8gYyhlKSA6IFtdKSwgYSA9ICEwKQoJCQkJCQl9LAoJCQkJCQllcnJvcjogZnVuY3Rpb24oKSB7CgkJCQkJCQlhIHx8ICh0KFtdKSwgYSA9ICEwKQoJCQkJCQl9CgkJCQkJfSksIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJCWEgfHwgKHQoW10pLCBhID0gITApCgkJCQkJfSwgNTUwMCkKCQkJCX0sCgkJCQlwID0gZnVuY3Rpb24oKSB7CgkJCQkJZm9yICh2YXIgZSA9IDA7IGUgPCBzLmxlbmd0aDsgZSsrKQoJCQkJCQlpZiAodC5zaXRlID09PSBzW2VdKSByZXR1cm4gITA7CgkJCQkJcmV0dXJuIG4oMTUpLmluaXQoKSA/ICEwIDogITEKCQkJCX07CgkJCWUuZXhwb3J0cy5nZXRsTG93ZXN0ID0gZnVuY3Rpb24oZSkgewoJCQkJaWYgKHAoKSkgcmV0dXJuIHZvaWQgZShbXSk7CgkJCQl2YXIgbiA9IHQuZnJvbV9kZXZpY2VfdCB8fCB0LmZyb21fZGV2aWNlOwoJCQkJaWYgKCJ0bHhzIiA9PSBuKSByZXR1cm4gdm9pZCBlKFtdKTsKCQkJCWlmICgtMSA9PSBvLmluZGV4T2YobikpIHJldHVybiB2b2lkIGUoW10pOwoJCQkJdmFyIGkgPSAiaHR0cHM6Ly9zaG93LTMubWVkaWF2LmNvbS9zP3R5cGU9MSZzaG93aWQ9IiArIHJbbl1bMF0gKyAiJm9mPTQmdWlkPSIgKyBsICsgIn0mcWhwaWQ9JmltcGN0PTIwIjsKCQkJCWQoaSwgZSkKCQkJfSwgZS5leHBvcnRzLmdldERwTG93ZXN0ID0gZnVuY3Rpb24oZSkgewoJCQkJaWYgKHAoKSkgcmV0dXJuIHZvaWQgZShbXSk7CgkJCQlpZiAoLTEgPT0gby5pbmRleE9mKHQuZnJvbV9kZXZpY2UpKSByZXR1cm4gdm9pZCBlKFtdKTsKCQkJCXZhciBuID0gImh0dHBzOi8vc2hvdy0zLm1lZGlhdi5jb20vcz90eXBlPTEmc2hvd2lkPSIgKyByW3QuZnJvbV9kZXZpY2VdWzFdICsgIiZvZj00JnVpZD0iICsgbCArICJ9JnFocGlkPSZpbXBjdD0yMCI7CgkJCQlkKG4sIGUpCgkJCX0KCQl9KS5jYWxsKHQsIG4oMSksIG4oNikpCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCShmdW5jdGlvbih0KSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJdmFyIG4gPSBbImpkLmNvbSIsICJ0YW9iYW8uY29tIiwgInN1bmluZy5jb20iLCAidG1hbGwuY29tIiwgIndlc3QuY24iLCAiY2h1YW5nY2QuY24iLCAiZWRpYW56dS5jb20iLCAiYmFvc2h1aWd1b2ppLmNvbSIsICJtdm1hbGwuY24iLCAiZ2FwLmNuIiwgImpzc3dvcmRzaG9wLmNvbSIsICJid3NrdS5jb20iLCAiZ3guY24iLCAic3R3ZmRlLmNvbSIsICJxdXdhaWZ1LmNvbSIsICJhb2xhaWdvLmNvbSIsICJkYW9nb3VtYW8uY24iLCAiMTY4OC5jb20iLCAiZ2hzLm5ldCIsICJzaGlqaWVndWFuLmNuIiwgImdkbGl3YW44ODguY29tIiwgIml6dWppZS5jb20iLCAieXhscC1iai5jb20iLCAiNjc4cHcuY24iLCAiaWxhaHVpLmNvbSIsICJnb3V3dWJhbmcuY29tIiwgImN0dHl3LmNvbSIsICJhb2ppZXNpLmNuIiwgInhpYW5nc2hlbmdoYW5nLmNvbSIsICJuYnpkcHQuY24iLCAiMzYwLmNuIiwgInpqY3JlYXRlLmNvbSIsICJkbHlpanUuY29tLmNuIiwgImh1YW11MDEwMS5jb20iLCAiZnVzaGlodWEuY24iLCAid2p5aC5jb20iLCAiZnNhb3RpbmcuY24iLCAibWl5aW5zdW8uY29tIiwgImttMTgxOC5jb20iLCAic2h1aHVhdHkuY29tIiwgInNnZHotcG93ZXIuY29tIiwgInB1cmNvdHRvbi5jb20iLCAieW1pLmNuIiwgInhqdC5jYyIsICJsZW5jb2xvLmNvbSIsICJ5aXd1Z291LmNvbSIsICIzNjFmZW5xaWdvLmNvbSIsICJiZW5naG9tZS5jb20iLCAiZWxlaXRleC5jb20iLCAiamluZ3podW9oYW5nLmNvbSIsICJ6aGFvamlhZmFuZy5jb20iLCAibm55aHdqLmNvbSIsICJkdW9kdW8xMjMuY29tIiwgImtzLWxvbmcuY29tIiwgIjIxa2suY24iLCAic3RhcGxlcy5jbiIsICJseWxqdy5jb20iLCAiaG9tZWRvLmNvbSIsICI1OTF5aHcuY29tIiwgInFpYW5zaGkzNjAuY29tIiwgIjM2NTM1MC5jb20iLCAiYWZqeTk4OC5jb20iLCAiaGNidXkuY29tIiwgImJqZnRzdC5jb20iLCAibGFib3JsZXNzLXRmdC5jb20iLCAibWFpZ2FuZ2xlLmNvbSIsICJqaXU5MXlpLmNvbSIsICJlbHN0ZWVsLmNvbS5jbiIsICJqbjM2MHNvLmNuIiwgImJkZmRqLmNvbSIsICJuYW5nd2ouY29tIiwgInpoZTkwMC5jb20iLCAicWVnb28uY24iLCAiZmVpc3UuY29tIiwgImhkeWRvb3IuY29tIiwgImNubWVpamluLmNuIiwgImp5MDI3LmNvbSIsICJjbmJ1eWVycy5jbiIsICJxcTUwMS5jb20iLCAiYmFvdXBpbi5jb20iLCAiam8zNjUuY24iLCAidGFvZGlhbmppYS5jb20iLCAiNTExYm94LmNvbSIsICJ2aGFsbC5jb20iLCAid2luZTkuY29tIiwgInNhZmUtYmVzdC5jb20iLCAianVkYXpoZS5jb20iLCAiaG9uZ2xpbmdqaW4uY24iLCAiZGFuZ2RhbmcuY29tIiwgInluZzk2MC5jb20iLCAiMzYwc2FmZS5jb20iLCAiMTBmdXIuY29tIiwgInRlYW9rLmNvbSIsICI1MXloby5jb20iLCAic2hsZWl5aS5jb20iLCAibG9va2ZhbnRhc3RpYy5jb20iLCAid2luZGVsbi5kZSIsICJ3aW5kZWxuLmNvbS5jbiIsICJ0cmlwaWRpLmNvbSIsICJteXByb3RlaW4uY24iLCAibW91c2VyLmNuIiwgIm1pb3NraW5jYXJlLmNvbSIsICJsb29rZmFudGFzdGljLmNuIiwgImloZXJiLmNuIiwgImdyb3dnb3JnZW91cy5jb20iLCAiZ2xvYmFsYmx1ZS5jbiIsICJnY21hc2lhLmNvbSIsICJlc3ByaXQuY24iLCAiYmEuZGUiLCAiNzlnb2xkLmNvbSIsICJzYXNhLmNvbSIsICJqb2lud2V3b3JrLmNuIiwgInJha3V0ZW4uY29tIiwgInRha2V5YS5jby5qcCIsICJzdHJhd2JlcnJ5bmV0LmNvbSIsICJyb3l5b3VuZ2NoZW1pc3QuY29tLmF1IiwgInBoYXJtYWN5b25saW5lLmNvbS5hdSIsICJwaGFybWFjeTRsZXNzLmNvbS5hdSIsICJwLWJhbmRhaS5hc2lhIiwgImdldHRoZWxhYmVsLmNvbSIsICJmZWVsdW5pcXVlLmNvbSIsICJiYWJ5aGF2ZW4uY29tIiwgImhrdGRjLmNvbSJdOwoJCQllLmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkgewoJCQkJaWYgKCF0Lm5ld19leHRlbnNpb24pIHJldHVybiAhMTsKCQkJCWZvciAodmFyIGUgPSBkb2N1bWVudC5kb21haW4sIGkgPSAwOyBpIDwgbi5sZW5ndGg7IGkrKykKCQkJCQlpZiAoZSA9PT0gbltpXSkgcmV0dXJuICEwOwoJCQkJcmV0dXJuICExCgkJCX0KCQl9KS5jYWxsKHQsIG4oMSkpCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCXZhciBpOwoJCSEgZnVuY3Rpb24oKSB7CgkJCWZ1bmN0aW9uIGEoZSkgewoJCQkJcmV0dXJuIGUucmVwbGFjZShrLCAiIikucmVwbGFjZSh6LCAiLCIpLnJlcGxhY2UoQiwgIiIpLnJlcGxhY2UoaiwgIiIpLnJlcGxhY2UoQywgIiIpLnNwbGl0KFMpCgkJCX0KCgkJCWZ1bmN0aW9uIG8oZSkgewoJCQkJcmV0dXJuICInIiArIGUucmVwbGFjZSgvKCd8XFwpL2csICJcXCQxIikucmVwbGFjZSgvXHIvZywgIlxcciIpLnJlcGxhY2UoL1xuL2csICJcXG4iKSArICInIgoJCQl9CgoJCQlmdW5jdGlvbiByKGUsIHQpIHsKCQkJCWZ1bmN0aW9uIG4oZSkgewoJCQkJCXJldHVybiBoICs9IGUuc3BsaXQoL1xuLykubGVuZ3RoIC0gMSwgZCAmJiAoZSA9IGUucmVwbGFjZSgvXHMrL2csICIgIikucmVwbGFjZSgvPCEtLVtcd1xXXSo/LS0+L2csICIiKSksIGUgJiYgKGUgPSBmWzFdICsgbyhlKSArIGZbMl0gKyAiXG4iKSwgZQoJCQkJfQoKCQkJCWZ1bmN0aW9uIGkoZSkgewoJCQkJCXZhciBuID0gaDsKCQkJCQlpZiAoYyA/IGUgPSBjKGUsIHQpIDogciAmJiAoZSA9IGUucmVwbGFjZSgvXG4vZywgZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiBoKyssICIkbGluZT0iICsgaCArICI7IgoJCQkJCX0pKSwgMCA9PT0gZS5pbmRleE9mKCI9IikpIHsKCQkJCQkJdmFyIGkgPSBwICYmICEvXj1bPSNdLy50ZXN0KGUpOwoJCQkJCQlpZiAoZSA9IGUucmVwbGFjZSgvXj1bPSNdP3xbXHM7XSokL2csICIiKSwgaSkgewoJCQkJCQkJdmFyIG8gPSBlLnJlcGxhY2UoL1xzKlwoW15cKV0rXCkvLCAiIik7CgkJCQkJCQlfW29dIHx8IC9eKGluY2x1ZGV8cHJpbnQpJC8udGVzdChvKSB8fCAoZSA9ICIkZXNjYXBlKCIgKyBlICsgIikiKQoJCQkJCQl9IGVsc2UgZSA9ICIkc3RyaW5nKCIgKyBlICsgIikiOwoJCQkJCQllID0gZlsxXSArIGUgKyBmWzJdCgkJCQkJfQoJCQkJCXJldHVybiByICYmIChlID0gIiRsaW5lPSIgKyBuICsgIjsiICsgZSksIGIoYShlKSwgZnVuY3Rpb24oZSkgewoJCQkJCQlpZiAoZSAmJiAhdVtlXSkgewoJCQkJCQkJdmFyIHQ7CgkJCQkJCQl0ID0gInByaW50IiA9PT0gZSA/IHcgOiAiaW5jbHVkZSIgPT09IGUgPyB2IDogX1tlXSA/ICIkdXRpbHMuIiArIGUgOiB4W2VdID8gIiRoZWxwZXJzLiIgKyBlIDogIiRkYXRhLiIgKyBlLCB5ICs9IGUgKyAiPSIgKyB0ICsgIiwiLCB1W2VdID0gITAKCQkJCQkJfQoJCQkJCX0pLCBlICsgIlxuIgoJCQkJfQoJCQkJdmFyIHIgPSB0LmRlYnVnLAoJCQkJCXMgPSB0Lm9wZW5UYWcsCgkJCQkJbCA9IHQuY2xvc2VUYWcsCgkJCQkJYyA9IHQucGFyc2VyLAoJCQkJCWQgPSB0LmNvbXByZXNzLAoJCQkJCXAgPSB0LmVzY2FwZSwKCQkJCQloID0gMSwKCQkJCQl1ID0gewoJCQkJCQkkZGF0YTogMSwKCQkJCQkJJGZpbGVuYW1lOiAxLAoJCQkJCQkkdXRpbHM6IDEsCgkJCQkJCSRoZWxwZXJzOiAxLAoJCQkJCQkkb3V0OiAxLAoJCQkJCQkkbGluZTogMQoJCQkJCX0sCgkJCQkJbSA9ICIiLnRyaW0sCgkJCQkJZiA9IG0gPyBbIiRvdXQ9Jyc7IiwgIiRvdXQrPSIsICI7IiwgIiRvdXQiXSA6IFsiJG91dD1bXTsiLCAiJG91dC5wdXNoKCIsICIpOyIsICIkb3V0LmpvaW4oJycpIl0sCgkJCQkJZyA9IG0gPyAiJG91dCs9dGV4dDtyZXR1cm4gJG91dDsiIDogIiRvdXQucHVzaCh0ZXh0KTsiLAoJCQkJCXcgPSAiZnVuY3Rpb24oKXt2YXIgdGV4dD0nJy5jb25jYXQuYXBwbHkoJycsYXJndW1lbnRzKTsiICsgZyArICJ9IiwKCQkJCQl2ID0gImZ1bmN0aW9uKGZpbGVuYW1lLGRhdGEpe2RhdGE9ZGF0YXx8JGRhdGE7dmFyIHRleHQ9JHV0aWxzLiRpbmNsdWRlKGZpbGVuYW1lLGRhdGEsJGZpbGVuYW1lKTsiICsgZyArICJ9IiwKCQkJCQl5ID0gIid1c2Ugc3RyaWN0Jzt2YXIgJHV0aWxzPXRoaXMsJGhlbHBlcnM9JHV0aWxzLiRoZWxwZXJzLCIgKyAociA/ICIkbGluZT0wLCIgOiAiIiksCgkJCQkJayA9IGZbMF0sCgkJCQkJeiA9ICJyZXR1cm4gbmV3IFN0cmluZygiICsgZlszXSArICIpOyI7CgkJCQliKGUuc3BsaXQocyksIGZ1bmN0aW9uKGUpIHsKCQkJCQllID0gZS5zcGxpdChsKTsKCQkJCQl2YXIgdCA9IGVbMF0sCgkJCQkJCWEgPSBlWzFdOwoJCQkJCTEgPT09IGUubGVuZ3RoID8gayArPSBuKHQpIDogKGsgKz0gaSh0KSwgYSAmJiAoayArPSBuKGEpKSkKCQkJCX0pOwoJCQkJdmFyIEIgPSB5ICsgayArIHo7CgkJCQlyICYmIChCID0gInRyeXsiICsgQiArICJ9Y2F0Y2goZSl7dGhyb3cge2ZpbGVuYW1lOiRmaWxlbmFtZSxuYW1lOidSZW5kZXIgRXJyb3InLG1lc3NhZ2U6ZS5tZXNzYWdlLGxpbmU6JGxpbmUsc291cmNlOiIgKyBvKGUpICsgIi5zcGxpdCgvXFxuLylbJGxpbmUtMV0ucmVwbGFjZSgvXlxccysvLCcnKX07fSIpOwoJCQkJdHJ5IHsKCQkJCQl2YXIgaiA9IG5ldyBGdW5jdGlvbigiJGRhdGEiLCAiJGZpbGVuYW1lIiwgQik7CgkJCQkJcmV0dXJuIGoucHJvdG90eXBlID0gXywgagoJCQkJfSBjYXRjaCAoQykgewoJCQkJCXRocm93IEMudGVtcCA9ICJmdW5jdGlvbiBhbm9ueW1vdXMoJGRhdGEsJGZpbGVuYW1lKSB7IiArIEIgKyAifSIsIEMKCQkJCX0KCQkJfQoJCQl2YXIgcyA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCXJldHVybiAic3RyaW5nIiA9PSB0eXBlb2YgdCA/IHYodCwgewoJCQkJCWZpbGVuYW1lOiBlCgkJCQl9KSA6IGQoZSwgdCkKCQkJfTsKCQkJcy52ZXJzaW9uID0gIjMuMC4wIiwgcy5jb25maWcgPSBmdW5jdGlvbihlLCB0KSB7CgkJCQlsW2VdID0gdAoJCQl9OwoJCQl2YXIgbCA9IHMuZGVmYXVsdHMgPSB7CgkJCQkJb3BlblRhZzogIjwlIiwKCQkJCQljbG9zZVRhZzogIiU+IiwKCQkJCQllc2NhcGU6ICEwLAoJCQkJCWNhY2hlOiAhMCwKCQkJCQljb21wcmVzczogITEsCgkJCQkJcGFyc2VyOiBudWxsCgkJCQl9LAoJCQkJYyA9IHMuY2FjaGUgPSB7fTsKCQkJcy5yZW5kZXIgPSBmdW5jdGlvbihlLCB0KSB7CgkJCQlyZXR1cm4gdihlLCB0KQoJCQl9OwoJCQl2YXIgZCA9IHMucmVuZGVyRmlsZSA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCXZhciBuID0gcy5nZXQoZSkgfHwgdyh7CgkJCQkJZmlsZW5hbWU6IGUsCgkJCQkJbmFtZTogIlJlbmRlciBFcnJvciIsCgkJCQkJbWVzc2FnZTogIlRlbXBsYXRlIG5vdCBmb3VuZCIKCQkJCX0pOwoJCQkJcmV0dXJuIHQgPyBuKHQpIDogbgoJCQl9OwoJCQlzLmdldCA9IGZ1bmN0aW9uKGUpIHsKCQkJCXZhciB0OwoJCQkJaWYgKGNbZV0pIHQgPSBjW2VdOwoJCQkJZWxzZSBpZiAoIm9iamVjdCIgPT0gdHlwZW9mIGRvY3VtZW50KSB7CgkJCQkJdmFyIG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlKTsKCQkJCQlpZiAobikgewoJCQkJCQl2YXIgaSA9IChuLnZhbHVlIHx8IG4uaW5uZXJIVE1MKS5yZXBsYWNlKC9eXHMqfFxzKiQvZywgIiIpOwoJCQkJCQl0ID0gdihpLCB7CgkJCQkJCQlmaWxlbmFtZTogZQoJCQkJCQl9KQoJCQkJCX0KCQkJCX0KCQkJCXJldHVybiB0CgkJCX07CgkJCXZhciBwID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJCXJldHVybiAic3RyaW5nIiAhPSB0eXBlb2YgZSAmJiAodCA9IHR5cGVvZiBlLCAibnVtYmVyIiA9PT0gdCA/IGUgKz0gIiIgOiBlID0gImZ1bmN0aW9uIiA9PT0gdCA/IHAoZS5jYWxsKGUpKSA6ICIiKSwgZQoJCQkJfSwKCQkJCWggPSB7CgkJCQkJIjwiOiAiJiM2MDsiLAoJCQkJCSI+IjogIiYjNjI7IiwKCQkJCQknIic6ICImIzM0OyIsCgkJCQkJIiciOiAiJiMzOTsiLAoJCQkJCSImIjogIiYjMzg7IgoJCQkJfSwKCQkJCXUgPSBmdW5jdGlvbihlKSB7CgkJCQkJcmV0dXJuIGhbZV0KCQkJCX0sCgkJCQltID0gZnVuY3Rpb24oZSkgewoJCQkJCXJldHVybiBwKGUpLnJlcGxhY2UoLyYoPyFbXHcjXSs7KXxbPD4iJ10vZywgdSkKCQkJCX0sCgkJCQlmID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbihlKSB7CgkJCQkJcmV0dXJuICJbb2JqZWN0IEFycmF5XSIgPT09IHt9LnRvU3RyaW5nLmNhbGwoZSkKCQkJCX0sCgkJCQlnID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJCXZhciBuLCBpOwoJCQkJCWlmIChmKGUpKQoJCQkJCQlmb3IgKG4gPSAwLCBpID0gZS5sZW5ndGg7IGkgPiBuOyBuKyspIHQuY2FsbChlLCBlW25dLCBuLCBlKTsKCQkJCQllbHNlCgkJCQkJCWZvciAobiBpbiBlKSB0LmNhbGwoZSwgZVtuXSwgbikKCQkJCX0sCgkJCQlfID0gcy51dGlscyA9IHsKCQkJCQkkaGVscGVyczoge30sCgkJCQkJJGluY2x1ZGU6IGQsCgkJCQkJJHN0cmluZzogcCwKCQkJCQkkZXNjYXBlOiBtLAoJCQkJCSRlYWNoOiBnCgkJCQl9OwoJCQlzLmhlbHBlciA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCXhbZV0gPSB0CgkJCX07CgkJCXZhciB4ID0gcy5oZWxwZXJzID0gXy4kaGVscGVyczsKCQkJcy5vbmVycm9yID0gZnVuY3Rpb24oZSkgewoJCQkJdmFyIHQgPSAiVGVtcGxhdGUgRXJyb3JcblxuIjsKCQkJCWZvciAodmFyIG4gaW4gZSkgdCArPSAiPCIgKyBuICsgIj5cbiIgKyBlW25dICsgIlxuXG4iOwoJCQkJIm9iamVjdCIgPT0gdHlwZW9mIGNvbnNvbGUgJiYgY29uc29sZS5lcnJvcih0KQoJCQl9OwoJCQl2YXIgdyA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlyZXR1cm4gcy5vbmVycm9yKGUpLAoJCQkJCQlmdW5jdGlvbigpIHsKCQkJCQkJCXJldHVybiAie1RlbXBsYXRlIEVycm9yfSIKCQkJCQkJfQoJCQkJfSwKCQkJCXYgPSBzLmNvbXBpbGUgPSBmdW5jdGlvbihlLCB0KSB7CgkJCQkJZnVuY3Rpb24gbihuKSB7CgkJCQkJCXRyeSB7CgkJCQkJCQlyZXR1cm4gbmV3IG8obiwgYSkgKyAiIgoJCQkJCQl9IGNhdGNoIChpKSB7CgkJCQkJCQlyZXR1cm4gdC5kZWJ1ZyA/IHcoaSkoKSA6ICh0LmRlYnVnID0gITAsIHYoZSwgdCkobikpCgkJCQkJCX0KCQkJCQl9CgkJCQkJdCA9IHQgfHwge307CgkJCQkJZm9yICh2YXIgaSBpbiBsKSB2b2lkIDAgPT09IHRbaV0gJiYgKHRbaV0gPSBsW2ldKTsKCQkJCQl2YXIgYSA9IHQuZmlsZW5hbWU7CgkJCQkJdHJ5IHsKCQkJCQkJdmFyIG8gPSByKGUsIHQpCgkJCQkJfSBjYXRjaCAocykgewoJCQkJCQlyZXR1cm4gcy5maWxlbmFtZSA9IGEgfHwgImFub255bW91cyIsIHMubmFtZSA9ICJTeW50YXggRXJyb3IiLCB3KHMpCgkJCQkJfQoJCQkJCXJldHVybiBuLnByb3RvdHlwZSA9IG8ucHJvdG90eXBlLCBuLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiBvLnRvU3RyaW5nKCkKCQkJCQl9LCBhICYmIHQuY2FjaGUgJiYgKGNbYV0gPSBuKSwgbgoJCQkJfSwKCQkJCWIgPSBfLiRlYWNoLAoJCQkJeSA9ICJicmVhayxjYXNlLGNhdGNoLGNvbnRpbnVlLGRlYnVnZ2VyLGRlZmF1bHQsZGVsZXRlLGRvLGVsc2UsZmFsc2UsZmluYWxseSxmb3IsZnVuY3Rpb24saWYsaW4saW5zdGFuY2VvZixuZXcsbnVsbCxyZXR1cm4sc3dpdGNoLHRoaXMsdGhyb3csdHJ1ZSx0cnksdHlwZW9mLHZhcix2b2lkLHdoaWxlLHdpdGgsYWJzdHJhY3QsYm9vbGVhbixieXRlLGNoYXIsY2xhc3MsY29uc3QsZG91YmxlLGVudW0sZXhwb3J0LGV4dGVuZHMsZmluYWwsZmxvYXQsZ290byxpbXBsZW1lbnRzLGltcG9ydCxpbnQsaW50ZXJmYWNlLGxvbmcsbmF0aXZlLHBhY2thZ2UscHJpdmF0ZSxwcm90ZWN0ZWQscHVibGljLHNob3J0LHN0YXRpYyxzdXBlcixzeW5jaHJvbml6ZWQsdGhyb3dzLHRyYW5zaWVudCx2b2xhdGlsZSxhcmd1bWVudHMsbGV0LHlpZWxkLHVuZGVmaW5lZCIsCgkJCQlrID0gL1wvXCpbXHdcV10qP1wqXC98XC9cL1teXG5dKlxufFwvXC9bXlxuXSokfCIoPzpbXiJcXF18XFxbXHdcV10pKiJ8Jyg/OlteJ1xcXXxcXFtcd1xXXSkqJ3xccypcLlxzKlskXHdcLl0rL2csCgkJCQl6ID0gL1teXHckXSsvZywKCQkJCUIgPSBuZXcgUmVnRXhwKFsiXFxiIiArIHkucmVwbGFjZSgvLC9nLCAiXFxifFxcYiIpICsgIlxcYiJdLmpvaW4oInwiKSwgImciKSwKCQkJCWogPSAvXlxkW14sXSp8LFxkW14sXSovZywKCQkJCUMgPSAvXiwrfCwrJC9nLAoJCQkJUyA9IC9eJHwsKy87CgkJCWwub3BlblRhZyA9ICJ7eyIsIGwuY2xvc2VUYWcgPSAifX0iOwoJCQl2YXIgTiA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCXZhciBuID0gdC5zcGxpdCgiOiIpLAoJCQkJCWkgPSBuLnNoaWZ0KCksCgkJCQkJYSA9IG4uam9pbigiOiIpIHx8ICIiOwoJCQkJcmV0dXJuIGEgJiYgKGEgPSAiLCAiICsgYSksICIkaGVscGVycy4iICsgaSArICIoIiArIGUgKyBhICsgIikiCgkJCX07CgkJCWwucGFyc2VyID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJZSA9IGUucmVwbGFjZSgvXlxzLywgIiIpOwoJCQkJdmFyIG4gPSBlLnNwbGl0KCIgIiksCgkJCQkJaSA9IG4uc2hpZnQoKSwKCQkJCQlhID0gbi5qb2luKCIgIik7CgkJCQlzd2l0Y2ggKGkpIHsKCQkJCQljYXNlICJpZiI6CgkJCQkJCWUgPSAiaWYoIiArIGEgKyAiKXsiOwoJCQkJCQlicmVhazsKCQkJCQljYXNlICJlbHNlIjoKCQkJCQkJbiA9ICJpZiIgPT09IG4uc2hpZnQoKSA/ICIgaWYoIiArIG4uam9pbigiICIpICsgIikiIDogIiIsIGUgPSAifWVsc2UiICsgbiArICJ7IjsKCQkJCQkJYnJlYWs7CgkJCQkJY2FzZSAiL2lmIjoKCQkJCQkJZSA9ICJ9IjsKCQkJCQkJYnJlYWs7CgkJCQkJY2FzZSAiZWFjaCI6CgkJCQkJCXZhciBvID0gblswXSB8fCAiJGRhdGEiLAoJCQkJCQkJciA9IG5bMV0gfHwgImFzIiwKCQkJCQkJCWwgPSBuWzJdIHx8ICIkdmFsdWUiLAoJCQkJCQkJYyA9IG5bM10gfHwgIiRpbmRleCIsCgkJCQkJCQlkID0gbCArICIsIiArIGM7CgkJCQkJCSJhcyIgIT09IHIgJiYgKG8gPSAiW10iKSwgZSA9ICIkZWFjaCgiICsgbyArICIsZnVuY3Rpb24oIiArIGQgKyAiKXsiOwoJCQkJCQlicmVhazsKCQkJCQljYXNlICIvZWFjaCI6CgkJCQkJCWUgPSAifSk7IjsKCQkJCQkJYnJlYWs7CgkJCQkJY2FzZSAiZWNobyI6CgkJCQkJCWUgPSAicHJpbnQoIiArIGEgKyAiKTsiOwoJCQkJCQlicmVhazsKCQkJCQljYXNlICJwcmludCI6CgkJCQkJY2FzZSAiaW5jbHVkZSI6CgkJCQkJCWUgPSBpICsgIigiICsgbi5qb2luKCIsIikgKyAiKTsiOwoJCQkJCQlicmVhazsKCQkJCQlkZWZhdWx0OgoJCQkJCQlpZiAoL15ccypcfFxzKltcd1wkXS8udGVzdChhKSkgewoJCQkJCQkJdmFyIHAgPSAhMDsKCQkJCQkJCTAgPT09IGUuaW5kZXhPZigiIyIpICYmIChlID0gZS5zdWJzdHIoMSksIHAgPSAhMSk7CgkJCQkJCQlmb3IgKHZhciBoID0gMCwgdSA9IGUuc3BsaXQoInwiKSwgbSA9IHUubGVuZ3RoLCBmID0gdVtoKytdOyBtID4gaDsgaCsrKSBmID0gTihmLCB1W2hdKTsKCQkJCQkJCWUgPSAocCA/ICI9IiA6ICI9IyIpICsgZgoJCQkJCQl9IGVsc2UgZSA9IHMuaGVscGVyc1tpXSA/ICI9IyIgKyBpICsgIigiICsgbi5qb2luKCIsIikgKyAiKTsiIDogIj0iICsgZQoJCQkJfQoJCQkJcmV0dXJuIGUKCQkJfSwgaSA9IGZ1bmN0aW9uKCkgewoJCQkJcmV0dXJuIHMKCQkJfS5jYWxsKHQsIG4sIHQsIGUpLCAhKHZvaWQgMCAhPT0gaSAmJiAoZS5leHBvcnRzID0gaSkpCgkJfSgpCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCXZhciBpOwoJCWkgPSBmdW5jdGlvbigpIHsKCQkJdmFyIGUgPSB7fSwKCQkJCXQgPSB7fTsKCQkJcmV0dXJuIGUuZ2V0ID0gZnVuY3Rpb24oZSkgewoJCQkJcmV0dXJuIHRbZV0KCQkJfSwgZS5zZXQgPSBmdW5jdGlvbihlLCBuKSB7CgkJCQl2b2lkIDAgPT09IG4gJiYgZSA/IHQgPSBlIDogdFtlXSA9IG4KCQkJfSwgZQoJCX0uY2FsbCh0LCBuLCB0LCBlKSwgISh2b2lkIDAgIT09IGkgJiYgKGUuZXhwb3J0cyA9IGkpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCkgewoJCQkidXNlIHN0cmljdCI7CgkJCWUuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oZSkgewoJCQkJdmFyIG4gPSB0LnVfc2VydmVyLAoJCQkJCWkgPSAidS4iICsgdC51X2tleSArICIuY29tIjsKCQkJCWlmICgib2JqZWN0IiA9PSB0eXBlb2YgZSkgewoJCQkJCWlmIChlLnVybC5pbmRleE9mKGkpID4gLTEpIHJldHVybiBlLnVybDsKCQkJCQl2YXIgYSA9ICIiOwoJCQkJCXJldHVybiBlLmV4dCAmJiAoYSA9ICItIiArIGUuZXh0KSwgZS5pc19tb2JpbGUgJiYgZS5pc2Jyb3dzZXIgPyBlLnVybCA6IG4gKyAiL3VuaW9uL2dvLz9zaXRlX2lkPSIgKyBlLnNpdGVfaWQgKyAiJnRhcmdldF91cmw9IiArIGVuY29kZVVSSUNvbXBvbmVudChlLnVybCkgKyAiJnVuaW9uPSIgKyBlLnVuaW9uICsgIiZjb2x1bW49IiArIGUubW9kICsgIi0iICsgZS5kcF9pZCArIGEKCQkJCX0KCQkJfQoJCX0pLmNhbGwodCwgbigxKSkKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJZS5leHBvcnRzID0gJ3t7ZWFjaCBkYXRhfX1cbiAgPGxpIGNsYXNzPSJ7eyRpbmRleD09MD9cJ2xpX2ZpcnN0XCc6XCdcJ319Ij5cbiAgICA8YSBjbGFzcz0iaXRlbV9pbWciIGhyZWY9Int7JHZhbHVlLnVybH19IiB0aXRsZT0ie3skdmFsdWUudGl0bGV9fSIgdGFyZ2V0PSJfYmxhbmsiPlxuICAgICAgPGltZyBzcmM9Int7JHZhbHVlLmltZ191cmx9fSI+XG4gICAgICB7e2lmICR2YWx1ZS5uZXdkaXNjb3VudH19XG4gICAgICAgIDxlbT57eyR2YWx1ZS5uZXdkaXNjb3VudH195oqYPC9lbT5cbiAgICAgIHt7L2lmfX1cbiAgICA8L2E+XG4gICAgPGRpdiBjbGFzcz0iaW5uZXJfZHBfZGVzYyI+XG4gICAgICA8YSBjbGFzcz0iZHBfdGl0bGUiIGhyZWY9Int7JHZhbHVlLnVybH19IiB0aXRsZT0ie3skdmFsdWUudGl0bGV9fSIgdGFyZ2V0PSJfYmxhbmsiPlxuICAgICAgICB7eyR2YWx1ZS50aXRsZX19XG4gICAgICA8L2E+XG4gICAgICA8YSBjbGFzcz0ic21hbGxfZGVzYyI+XG4gICAgICAgIHt7aWYgJHZhbHVlLnNpdGVfbmFtZX19XG4gICAgICAgICAgPHNwYW4gY2xhc3M9InNpdGVfaWNvbiIgdGl0bGU9Int7JHZhbHVlLnNpdGVfbmFtZX19Ij48aW1nIHNyYz0ie3tzX3NlcnZlcn19L2ltYWdlcy9mYXZpY29uL3t7JHZhbHVlLnNpdGVfaWR9fS5pY28iPjwvc3Bhbj5cbiAgICAgICAge3svaWZ9fVxuICAgICAgICA8c3BhbiBjbGFzcz0ibmV3X3ByaWNlIj5cbiAgICAgICAgICB7e2lmICR2YWx1ZS50eXBlcyA9PSBcJ2Zhc2hpb25cJ319XG4gICAgICAgICAgICDCpVxuICAgICAgICAgIHt7L2lmfX1cbiAgICAgICAgICB7eyR2YWx1ZS5wcmljZX19XG5cbiAgICAgICAgPC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz0ib2xkX3ByaWNlIiBzdHlsZT0iZGlzcGxheToge3soJHZhbHVlLmhpZ2hlc3QpP1wnaW5saW5lLWJsb2NrXCc6XCdub25lXCd9fSI+e3skdmFsdWUuaGlnaGVzdH19PC9zcGFuPlxuICAgICAgPC9hPlxuICAgIDwvZGl2PlxuICA8L2xpPlxue3svZWFjaH19JzsKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJZS5leHBvcnRzID0gJzxkaXYgaWQ9Int7ZXh0QnJhbmR9fV9pbm5lcl9sb3ciIGNsYXNzPSJ7e2V4dEJyYW5kfX1faW5uZXJfbG93cHJpY2UiPlxuICA8ZGl2IGNsYXNzPSJ7e2V4dEJyYW5kfX1faW5uZXJfaGVhZCI+XG4gICAgPGEgY2xhc3M9InNpdGVfaWNvbiIge3tpZiBuZXdfZXh0ZW5zaW9ufX0gaHJlZj0iaHR0cDovL3d3dy57e2V4dE5hbWV9fS5jb20iIHRhcmdldD0iX2JsYW5rIiB0aXRsZT0i6LSt54mp5YWaIiB7ey9pZn19PjwvYT5cbiAgICA8cD5cbiAgICAgIHt7aWYgdHlwZSA9PSBcJ2xvd1wnfX1cbiAgICAgICAg5b2T5YmN6aG1e3tudW19feasvuWVhuWTgeWkhOS6juWOhuWPsuacgOS9juS7t1xuICAgICAge3tlbHNlfX1cbiAgICAgICAg54yc5L2g5Zac5qyiXG4gICAgICB7ey9pZn19XG4gICAgPC9wPlxuICAgIDxhIGNsYXNzPSJ7e2V4dEJyYW5kfX1faW5uZXJfcGFnZSI+XG4gICAgICA8c3BhbiBjbGFzcz0iY3VyX3BhZ2UiPjE8L3NwYW4+XG4gICAgICA8c3Bhbj4vPC9zcGFuPlxuICAgICAgPHNwYW4gY2xhc3M9InRvdGFsX3BhZ2UiPjE8L3NwYW4+XG4gICAgPC9hPlxuICA8L2Rpdj5cbiAgPGRpdiBjbGFzcz0ie3tleHRCcmFuZH19X2lubmVyX2NvbnRlbnQiPlxuICAgIDxhIGNsYXNzPSJpbm5lcl9wYWdlX2xlZnQgdHVybnBhZ2UiPjxlbT48L2VtPjwvYT5cbiAgICA8ZGl2IGNsYXNzPSJpbm5lcl9wcm9fbGlzdCIgPlxuICAgICAgPHVsPlxuICAgICAgPC91bD5cbiAgICA8L2Rpdj5cbiAgICA8YSBjbGFzcz0iaW5uZXJfcGFnZV9yaWdodCB0dXJucGFnZSI+PGVtPjwvZW0+PC9hPlxuICA8L2Rpdj5cbiAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj5cbiAgICAue3tleHRCcmFuZH19X2lubmVyX2xvd3ByaWNlIHtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgaGVpZ2h0OiAzMThweDtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7XG4gICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgIH1cbiAgICAue3tleHRCcmFuZH19XzUxYnV5IC57e2V4dEJyYW5kfX1faW5uZXJfbG93cHJpY2V7XG4gICAgICB3aWR0aDogOTklO1xuICAgICAgbWFyZ2luOiAwIGF1dG87XG4gICAgfVxuICAgIC57e2V4dEJyYW5kfX1fZGFuZ2RhbmcgLnt7ZXh0QnJhbmR9fV9pbm5lcl9sb3dwcmljZSB7XG4gICAgICBtYXJnaW46IDAgYXV0bztcbiAgICB9XG4gICAgLnt7ZXh0QnJhbmR9fV9mZWluaXUgLnt7ZXh0QnJhbmR9fV9pbm5lcl9sb3dwcmljZSB7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgfVxuICAgIC57e2V4dEJyYW5kfX1faW5uZXJfY29udGVudCB7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICB9XG4gICAgLnt7ZXh0QnJhbmR9fV9pbm5lcl9oZWFkIHtcbiAgICAgIGhlaWdodDogNTJweDtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB9XG4gICAgLnt7ZXh0QnJhbmR9fV9pbm5lcl9oZWFkIHAge1xuICAgICAgbGluZS1oZWlnaHQ6IDUycHg7XG4gICAgICBoZWlnaHQ6IDUycHg7XG4gICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICBjb2xvcjogIzU5NTc1NztcbiAgICAgIG1hcmdpbi1sZWZ0OiA1OXB4O1xuICAgIH1cbiAgICBhLnt7ZXh0QnJhbmR9fV9pbm5lcl9wYWdlIHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHJpZ2h0OiAyMHB4O1xuICAgICAgdG9wOiAyMHB4O1xuICAgIH1cbiAgICAue3tleHRCcmFuZH19X2lubmVyX2hlYWQgLnNpdGVfaWNvbiB7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICBoZWlnaHQ6IDIwcHg7XG4gICAgICB3aWR0aDogMjBweDtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHRvcDogMThweDtcbiAgICAgIGxlZnQ6IDE4cHg7XG4gICAgICBoZWlnaHQ6IDIxcHg7XG4gICAgICB3aWR0aDogMjRweDtcbiAgICAgIHt7aWYgbmV3X2V4dGVuc2lvbn19XG4gICAgICAgIGJhY2tncm91bmQ6IHVybChcJ3t7c19zZXJ2ZXJ9fS9pbWFnZXMvZXh0ZW5zaW9ucy9qZ3dzX3NpdGVfaWNvbjJfMS5wbmdcJykgbm8tcmVwZWF0O1xuICAgICAge3tlbHNlfX1cbiAgICAgICAgYmFja2dyb3VuZDogdXJsKFwne3tzX3NlcnZlcn19L2ltYWdlcy9leHRlbnNpb25zLzEyMTFsb2dvLnBuZ1wnKSBuby1yZXBlYXQ7XG4gICAgICB7ey9pZn19XG4gICAgfVxuICAgIC57e2V4dEJyYW5kfX1faW5uZXJfbG93cHJpY2UgKntcbiAgICAgIGZvbnQtZmFtaWx5OiBcJ01pY3Jvc29mdCBZYWhlaVwnO1xuICAgIH1cbiAgICBhLmlubmVyX3BhZ2VfbGVmdCwuaW5uZXJfcGFnZV9yaWdodCB7XG4gICAgICB3aWR0aDogNjJweDtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIGhlaWdodDogMTcwcHg7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgfVxuICAgIGEuaW5uZXJfcGFnZV9sZWZ0IGVtIHtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIGhlaWdodDogMjBweDtcbiAgICAgIHdpZHRoOiAyMHB4O1xuICAgICAgbWFyZ2luLXRvcDogODBweDtcbiAgICAgIG1hcmdpbi1sZWZ0OiAyOHB4O1xuICAgICAgYmFja2dyb3VuZDogdXJsKFwne3tzX3NlcnZlcn19L2ltYWdlcy9leHRlbnNpb25zLzEyMTViYWNrX25vcm1hbC5qcGdcJykgbm8tcmVwZWF0O1xuICAgIH1cbiAgICBhLmlubmVyX3BhZ2VfbGVmdCBlbTpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kOiB1cmwoXCd7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvMTIxNWJhY2tfaG92ZXIuanBnXCcpIG5vLXJlcGVhdDtcbiAgICB9XG4gICAgLmlubmVyX3BhZ2VfcmlnaHQgZW0ge1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgaGVpZ2h0OiAyMHB4O1xuICAgICAgd2lkdGg6IDIwcHg7XG4gICAgICBtYXJnaW4tdG9wOiA4MHB4O1xuICAgICAgbWFyZ2luLWxlZnQ6IDIwcHg7XG4gICAgICBiYWNrZ3JvdW5kOiB1cmwoXCd7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvMTIxNWZvcndhcmRfbm9ybWFsLmpwZ1wnKSBuby1yZXBlYXQ7XG4gICAgfVxuICAgIC5pbm5lcl9wYWdlX3JpZ2h0IGVtOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQ6IHVybChcJ3t7c19zZXJ2ZXJ9fS9pbWFnZXMvZXh0ZW5zaW9ucy8xMjE1Zm9yd2FyZF9ob3Zlci5qcGdcJykgbm8tcmVwZWF0O1xuICAgIH1cbiAgICAuaW5uZXJfcHJvX2xpc3Qge1xuICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgIGhlaWdodDogMjY0cHg7XG4gICAgICB3aWR0aDogMTAwMHB4O1xuICAgIH1cbiAgICAuaW5uZXJfcGFnZV9sZWZ0LCAuaW5uZXJfcHJvX2xpc3Qge1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgfVxuICAgIC57e2V4dEJyYW5kfX1faW5uZXJfbG93cHJpY2UgdWwgbGkge1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICBtYXJnaW4tbGVmdDogMjBweDtcbiAgICAgIGhlaWdodDogMjY0cHg7XG4gICAgICBsaXN0LXN0eWxlOiBub25lO1xuICAgIH1cbiAgICAue3tleHRCcmFuZH19X2lubmVyX2xvd3ByaWNlIHVsIGxpLmxpX2ZpcnN0IHtcbiAgICAgIG1hcmdpbi1sZWZ0OiAwcHg7XG4gICAgfVxuICAgIC57e2V4dEJyYW5kfX1faW5uZXJfbG93cHJpY2UgdWwgbGkgLml0ZW1faW1nIHtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIGhlaWdodDogMTcwcHg7XG4gICAgICB3aWR0aDogMTcwcHg7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCAjZjFmMWYxO1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIH1cbiAgICAue3tleHRCcmFuZH19X2lubmVyX2xvd3ByaWNlIGxpIGltZyB7XG4gICAgICBoZWlnaHQ6IDE3MHB4O1xuICAgICAgd2lkdGg6IDE3MHB4O1xuICAgIH1cbiAgICAue3tleHRCcmFuZH19X2lubmVyX2xvd3ByaWNlIGxpIC5zaXRlX2ljb24gaW1ne1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG4gICAgLnt7ZXh0QnJhbmR9fV9pbm5lcl9sb3dwcmljZSBsaSBhIGVte1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgYm90dG9tOiAwcHg7XG4gICAgICBsZWZ0OiAwcHg7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWE1NDEyO1xuICAgICAgY29sb3I6ICNmZmY7XG4gICAgICB3aWR0aDogNDJweDtcbiAgICAgIGhlaWdodDogMTVweDtcbiAgICAgIGxpbmUtaGVpZ2h0OiAxNXB4O1xuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgZm9udC1zdHlsZTogbm9ybWFsO1xuICAgIH1cbiAgICAuaW5uZXJfZHBfZGVzYyB7XG4gICAgICB3aWR0aDogMTcwcHg7XG4gICAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICAgIH1cbiAgICAuaW5uZXJfZHBfZGVzYyAuZHBfdGl0bGV7XG4gICAgICBjb2xvcjogIzU5NTc1NztcbiAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIHdpZHRoOiAxNzBweDtcbiAgICAgIGhlaWdodDogMzZweDtcbiAgICAgIGxpbmUtaGVpZ2h0OiAxOHB4O1xuICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICB9XG4gICAgLnNtYWxsX2Rlc2Mge1xuICAgICAgbWFyZ2luLXRvcDogNnB4O1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgaGVpZ2h0OiAzNnB4O1xuICAgICAgd2lkdGg6IDE3MHB4O1xuICAgIH1cbiAgICAuc21hbGxfZGVzYyAubmV3X3ByaWNlIHtcbiAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgIGNvbG9yOiAjZDgwMDAwO1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgfVxuICAgIC5zbWFsbF9kZXNjIC5vbGRfcHJpY2Uge1xuICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgY29sb3I6ICM5RkEwQTA7XG4gICAgICBmbG9hdDogcmlnaHQ7XG4gICAgICB0ZXh0LWRlY29yYXRpb246IGxpbmUtdGhyb3VnaDtcbiAgICB9XG4gIDwvc3R5bGU+XG48L2Rpdj4nCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICc8ZGl2IGlkPSJ7e2V4dEJyYW5kfX1fbG93cHJpX21pbiIgY2xhc3M9Imxvd3BfYmdcbiAge3tpZiB0eXBlID09IFwnbG93XCd9fVxuICAgIGJnX2xvd1xuICB7e2Vsc2V9fVxuICAgIGJnX2d1ZXNzXG4gIHt7L2lmfX1cbiI+PC9kaXY+XG48ZGl2IGlkPSJ7e2V4dEJyYW5kfX1fbG93cHJpIiBjbGFzcz0ie3tleHRCcmFuZH19X2xvd3ByaV9yaWdodCI+XG4gIDxkaXYgY2xhc3M9Int7ZXh0QnJhbmR9fV9sb3dwcmlfaGVhZCI+XG4gICAgPHNwYW4gY2xhc3M9ImNsb3NlX2J0biIgdGl0bGU9IuWFs+mXrSI+PC9zcGFuPlxuICA8L2Rpdj5cbiAgPGRpdiBjbGFzcz0ibWFyZ2luVCI+PC9kaXY+XG4gIDxkaXYgY2xhc3M9Int7ZXh0QnJhbmR9fV9sb3dwcmlfY29udGVudCI+XG4gICAgPHVsIGNsYXNzPSJ7e2V4dEJyYW5kfX1fbG93cHJpX2xpc3QiPlxuICAgICAge3tlYWNoIGRhdGF9fVxuICAgICAgICA8bGkgY2xhc3M9Int7ZXh0QnJhbmR9fV9sb3dwcmlfaXRlbSB7e2V4dEJyYW5kfX1faW5kZXh7eygkaW5kZXg9PWRhdGEubGVuZ3RoLTEpPyRpbmRleDowfX0iPlxuICAgICAgICAgIDxhIGNsYXNzPSJ7e2V4dEJyYW5kfX1fZHBfaW1nIHt7ZXh0TmFtZX19X2xpbmsiIGhyZWY9Int7JHZhbHVlLnVybH19IiBkYXRhLXRpcD0idGlwX2xpbmsiIHRhcmdldD0iX2JsYW5rIiB0aXRsZT0ie3skdmFsdWUudGl0bGV9fSI+XG4gICAgICAgICAgICA8aW1nIHNyYz0ie3skdmFsdWUuaW1nX3VybH19IiBkYXRhLW9yaWdpbmFsPSJ7eyR2YWx1ZS5pbWdfdXJsfX0iPlxuICAgICAgICAgICAge3tpZiAkdmFsdWUubmV3ZGlzY291bnR9fVxuICAgICAgICAgICAgICA8ZW0+e3skdmFsdWUubmV3ZGlzY291bnR9feaKmDwvZW0+XG4gICAgICAgICAgICB7ey9pZn19XG4gICAgICAgICAgPC9hPlxuICAgICAgICAgIDxkaXYgY2xhc3M9Int7ZXh0QnJhbmR9fV9kcF9kZXMiPlxuICAgICAgICAgICAgPGEgY2xhc3M9Int7ZXh0QnJhbmR9fV9wcmljZSIgPsKle3skdmFsdWUucHJpY2V9fTwvYT5cbiAgICAgICAgICAgIHt7aWYgJHZhbHVlLmhpZ2hlc3R9fVxuICAgICAgICAgICAgICA8YSBjbGFzcz0ie3tleHRCcmFuZH19X2xhc3RfcHJpY2UiPsKle3skdmFsdWUuaGlnaGVzdH19PC9hPlxuICAgICAgICAgICAge3svaWZ9fVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2xpPlxuICAgICAge3svZWFjaH19XG4gICAgPC91bD5cbiAgPC9kaXY+XG4gIDxkaXYgY2xhc3M9InBhZ2VzIj5cbiAgICA8c3BhbiBjbGFzcz0icGFnZV9sZWZ0IGxvd3BfYmcgb25lX3BhZ2UiPjwvc3Bhbj5cbiAgICA8c3BhbiBjbGFzcz0icGVycGFnZSI+MTwvc3Bhbj5cbiAgICA8c3Bhbj4vPC9zcGFuPlxuICAgIDxzcGFuIGNsYXNzPSJ0b3RhbHBhZ2UiPnt7cGFnZW51bX19PC9zcGFuPlxuICAgIDxzcGFuIGNsYXNzPSJwYWdlX3JpZ2h0IGxvd3BfYmcgb25lX3BhZ2UiPjwvc3Bhbj5cbiAgPC9kaXY+XG4gIDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+XG4gIC8q54yc5L2g5Zac5qyi5qih5Z2XKi9cbiAgI3t7ZXh0QnJhbmR9fV9sb3dwcmlfbWlue1xuICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICByaWdodDogMHB4O1xuICAgIGhlaWdodDogMTI1cHg7XG4gICAgdG9wOiAxNzZweDtcbiAgICB3aWR0aDogMzRweDtcbiAgICB6LWluZGV4OiAyMTQ3NDgzNjQwO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtM3B4IC0ycHg7XG4gIH1cbiAgI3t7ZXh0QnJhbmR9fV9sb3dwcmlfbWluLl9tb3ZlUmlnaHQsICN7e2V4dEJyYW5kfX1fbG93cHJpLnt7ZXh0QnJhbmR9fV9sb3dwcmlfcmlnaHQuX21vdmVSaWdodHtcbiAgICByaWdodDogMzhweDtcbiAgfVxuICAje3tleHRCcmFuZH19X2xvd3ByaV9taW46aG92ZXJ7XG4gICAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE0M3B4IC0ycHg7XG4gIH1cbiAgLm1hcmdpblQge1xuICAgIGhlaWdodDogMTJweDtcbiAgfVxuICAje3tleHRCcmFuZH19X2xvd3ByaS57e2V4dEJyYW5kfX1fbG93cHJpX3JpZ2h0e1xuICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICByaWdodDogMHB4O1xuICAgIHRvcDogMTc2cHg7XG4gICAgd2lkdGg6MTM0cHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgI2RiZGJkYjtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgIHotaW5kZXg6IDIxNDc0ODM2NDA7XG4gIH1cbiAgI3t7ZXh0QnJhbmR9fV9sb3dwcmkue3tleHRCcmFuZH19X2xvd3ByaV9yaWdodCAuY2xvc2VfYnRue1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgcmlnaHQ6IDBweDtcbiAgICB0b3A6IDBweDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgaGVpZ2h0OiAyMHB4O1xuICAgIHdpZHRoOiAyMHB4O1xuICAgIGJhY2tncm91bmQ6IHVybChcJ3t7c19zZXJ2ZXJ9fS9pbWFnZXMvZXh0ZW5zaW9ucy9zZWFyY2hQcmlSaWdodExvd19jbG9zZS5wbmdcJykgOHB4IDNweCBuby1yZXBlYXQ7XG4gIH1cbiAgLmxwX2Rlc2MxIHtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGxlZnQ6IDM5cHg7XG4gICAgdG9wOiAxNHB4O1xuICAgIGxpbmUtaGVpZ2h0OiAxMnB4O1xuICB9XG4gIC5scF9kZXNjMiB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMjlweDtcbiAgICBsZWZ0OiA0MHB4O1xuICAgIGxpbmUtaGVpZ2h0OiAxMnB4O1xuICB9XG4gICN7e2V4dEJyYW5kfX1fbG93cHJpLnt7ZXh0QnJhbmR9fV9sb3dwcmlfcmlnaHQgLnt7ZXh0QnJhbmR9fV9zaXRlX2ljb24ge1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICBoZWlnaHQ6IDI1cHg7XG4gICAgd2lkdGg6IDI2cHg7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGxlZnQ6IDhweDtcbiAgICB0b3A6IDE0cHg7XG4gICAge3tpZiBuZXdfZXh0ZW5zaW9ufX1cbiAgICAgIGJhY2tncm91bmQ6IHVybChcJ3t7c19zZXJ2ZXJ9fS9pbWFnZXMvZXh0ZW5zaW9ucy9zZWFyY2hQcmlSaWdodExvd19qZ3dzbG9nby5wbmdcJykgbm8tcmVwZWF0O1xuICAgIHt7ZWxzZX19XG4gICAgICBiYWNrZ3JvdW5kOiB1cmwoXCd7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvc2VhcmNoUHJpUmlnaHRMb3dfbG9nby5wbmdcJykgbm8tcmVwZWF0O1xuICAgIHt7L2lmfX1cbiAgfVxuICAje3tleHRCcmFuZH19X2xvd3ByaS57e2V4dEJyYW5kfX1fbG93cHJpX3JpZ2h0IC57e2V4dEJyYW5kfX1fbG93cHJpX2NvbnRlbnR7XG4gICAgaGVpZ2h0OiAzNTVweDtcbiAgICB3aWR0aDogMTM0cHg7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIH1cbiAgI3t7ZXh0QnJhbmR9fV9sb3dwcmkue3tleHRCcmFuZH19X2xvd3ByaV9yaWdodCAue3tleHRCcmFuZH19X2xvd3ByaV9saXN0IHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwcHg7XG4gICAgbWFyZ2luOiAwcHg7XG4gIH1cbiAgI3t7ZXh0QnJhbmR9fV9sb3dwcmkue3tleHRCcmFuZH19X2xvd3ByaV9yaWdodCAue3tleHRCcmFuZH19X2xvd3ByaV9oZWFke1xuICAgIGhlaWdodDogMjVweDtcbiAgICBsaW5lLWhlaWdodDogMjVweDtcbiAgICBjb2xvcjojMjg4N2M5O1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICB3aWR0aDogMTM0cHg7XG4gIH1cbiAgI3t7ZXh0QnJhbmR9fV9sb3dwcmkue3tleHRCcmFuZH19X2xvd3ByaV9yaWdodCB1bCBsaXtcbiAgICBoZWlnaHQ6IDE1NHB4O1xuICAgIHdpZHRoOiAxMzRweDtcbiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICAgIGxpc3Qtc3R5bGU6IG5vbmU7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB9XG4gIGEue3tleHRCcmFuZH19X2RwX2ltZyB7XG4gICAgICBoZWlnaHQ6IDExMHB4O1xuICAgICAgd2lkdGg6IDExMHB4O1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgbWFyZ2luLWxlZnQ6IDEycHg7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIH1cbiAgLnt7ZXh0QnJhbmR9fV9kcF9pbWcgaW1nIHtcbiAgICBoZWlnaHQ6IDExMHB4O1xuICAgIHdpZHRoOiAxMTBweDtcbiAgfVxuICAue3tleHRCcmFuZH19X2RwX2ltZyBlbSB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGxlZnQ6IDBweDtcbiAgICBib3R0b206IDBweDtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmNWUwMDtcbiAgICBjb2xvcjogI2ZmZjtcbiAgICB3aWR0aDogNDJweDtcbiAgICBoZWlnaHQ6IDE1cHg7XG4gICAgbGluZS1oZWlnaHQ6IDE1cHg7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICBmb250LXN0eWxlOiBub3JtYWw7XG4gIH1cblxuICAje3tleHRCcmFuZH19X2xvd3ByaS57e2V4dEJyYW5kfX1fbG93cHJpX3JpZ2h0IC57e2V4dEJyYW5kfX1fcHJpY2V7XG4gICBmb250LXNpemU6IDE0cHg7XG4gICAgY29sb3I6ICNkODAwMDA7XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICB9XG4gIC5wYWdlcyB7XG4gICAgaGVpZ2h0OiAzOHB4O1xuICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZTFlMWUxO1xuICB9XG4gIC5wYWdlcyBzcGFuIHtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB3aWR0aDogMTJweDtcbiAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICB9XG4gIC57e2V4dEJyYW5kfX1fbG93cHJpX3JpZ2h0IC5wYWdlcyBzcGFuIHtcbiAgICBmbG9hdDogbGVmdDtcbiAgfVxuICAucGFnZXMgLnBhZ2VfbGVmdCB7XG4gICAgbWFyZ2luLWxlZnQ6IDEwcHg7XG4gICAgbWFyZ2luLXJpZ2h0OiAxOHB4O1xuICAgIHdpZHRoOiAyMHB4O1xuICAgIGZsb2F0OiBsZWZ0O1xuICAgIGhlaWdodDogMjBweDtcbiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtODVweCAtNjFweDtcbiAgfVxuICAucGFnZXMgLnBhZ2VfcmlnaHQge1xuICAgIG1hcmdpbi1sZWZ0OiAyMnB4O1xuICAgIHdpZHRoOiAyMHB4O1xuICAgIGZsb2F0OiBsZWZ0O1xuICAgIGhlaWdodDogMjBweDtcbiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTA4cHggLTYxcHg7XG4gIH1cbiAgLnBhZ2VzIC5vbmVfcGFnZSB7XG4gICAge3tpZiBwYWdlbnVtID09IDF9fVxuICAgIHZpc2liaWxpdHk6IGhpZGRlbjtcbiAgICB7ey9pZn19XG4gIH1cbiAgLmxvd3BfYmcge1xuICAgIHt7aWYgbmV3X2V4dGVuc2lvbn19XG4gICAgICBiYWNrZ3JvdW5kOiB1cmwoXCd7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvcmlnaHRfbG93X25ldzIucG5nXCcpO1xuICAgIHt7ZWxzZX19XG4gICAgICBiYWNrZ3JvdW5kOiB1cmwoXCd7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvcmlnaHRfbG93X25ldzEucG5nXCcpO1xuICAgIHt7L2lmfX1cbiAgfVxuICAubG93cF9iZy5iZ19ndWVzcyB7XG4gICAge3tpZiBuZXdfZXh0ZW5zaW9ufX1cbiAgICAgIGJhY2tncm91bmQ6IHVybChcJ3t7c19zZXJ2ZXJ9fS9pbWFnZXMvZXh0ZW5zaW9ucy9yaWdodF9ndWVzc19uZXcyLnBuZ1wnKTtcbiAgICB7e2Vsc2V9fVxuICAgICAgYmFja2dyb3VuZDogdXJsKFwne3tzX3NlcnZlcn19L2ltYWdlcy9leHRlbnNpb25zL3JpZ2h0X2d1ZXNzX25ldzEucG5nXCcpO1xuICAgIHt7L2lmfX1cbiAgICBcbiAgfVxuICAje3tleHRCcmFuZH19X2xvd3ByaS57e2V4dEJyYW5kfX1fbG93cHJpX3JpZ2h0IC57e2V4dEJyYW5kfX1fZHBfZGVzIHtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgd2lkdGg6IDE1MHB4XG4gIH1cbiAgI3t7ZXh0QnJhbmR9fV9sb3dwcmkue3tleHRCcmFuZH19X2xvd3ByaV9yaWdodCAue3tleHRCcmFuZH19X2RwX2Rlcz4gYXtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgd2lkdGg6IDExMHB4O1xuICAgIG1hcmdpbi1sZWZ0OiAxMnB4O1xuICAgIGhlaWdodDogMjBweDtcbiAgICBsaW5lLWhlaWdodDogMjBweDtcbiAgfVxuXG4gICN7e2V4dEJyYW5kfX1fbG93cHJpLnt7ZXh0QnJhbmR9fV9sb3dwcmlfcmlnaHQgLnt7ZXh0QnJhbmR9fV9kcF9kZXMgLnt7ZXh0QnJhbmR9fV9sYXN0X3ByaWNlIHtcbiAgICBmb250LXNpemU6IDEycHg7XG4gICAgY29sb3I6ICM5RkEwQTA7XG4gICAgdGV4dC1kZWNvcmF0aW9uOiBsaW5lLXRocm91Z2g7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIHRvcDogLTVweDtcbiAgfVxuICAje3tleHRCcmFuZH19X2xvd3ByaS57e2V4dEJyYW5kfX1fbG93cHJpX3JpZ2h0ICp7XG4gICAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIH1cbiAgICBcbiAgPC9zdHlsZT5cbjwvZGl2PicKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJZS5leHBvcnRzID0gJzxkaXYgaWQ9Int7ZXh0QnJhbmR9fV9sb3dwcmlfbWluIiBjbGFzcz0ibG93cF9iZ1xuICB7e2lmIHR5cGUgPT0gXCdsb3dcJ319XG4gICAgYmdfbG93XG4gIHt7ZWxzZX19XG4gICAgYmdfZ3Vlc3NcbiAge3svaWZ9fVxuIj48L2Rpdj5cbjxkaXYgaWQ9Int7ZXh0QnJhbmR9fV9sb3dwcmkiIGNsYXNzPSJ7e2V4dEJyYW5kfX1fbG93cHJpX3JpZ2h0Ij5cbiAgPGRpdiBjbGFzcz0ie3tleHRCcmFuZH19X2xvd3ByaV9oZWFkIj5cbiAgICA8c3BhbiBjbGFzcz0iY2xvc2VfYnRuIiB0aXRsZT0i5YWz6ZetIj48L3NwYW4+XG4gIDwvZGl2PlxuICA8ZGl2IGNsYXNzPSJtYXJnaW5UIj48L2Rpdj5cbiAgPGRpdiBjbGFzcz0ie3tleHRCcmFuZH19X2xvd3ByaV9jb250ZW50Ij5cbiAgICA8dWwgY2xhc3M9Int7ZXh0QnJhbmR9fV9sb3dwcmlfbGlzdCI+XG4gICAgICB7e2VhY2ggZGF0YX19XG4gICAgICAgIDxsaSBjbGFzcz0ie3tleHRCcmFuZH19X2xvd3ByaV9pdGVtIHt7ZXh0QnJhbmR9fV9pbmRleHt7KCRpbmRleD09ZGF0YS5sZW5ndGgtMSk/JGluZGV4OjB9fSI+XG4gICAgICAgICAgPGEgY2xhc3M9Int7ZXh0QnJhbmR9fV9kcF9pbWcge3tleHROYW1lfX1fbGluayIgaHJlZj0ie3skdmFsdWUudXJsfX0iIGRhdGEtdGlwPSJ0aXBfbGluayIgdGFyZ2V0PSJfYmxhbmsiIHRpdGxlPSJ7eyR2YWx1ZS50aXRsZX19Ij5cbiAgICAgICAgICAgIDxpbWcgc3JjPSJ7eyR2YWx1ZS5pbWdfdXJsfX0iIGRhdGEtb3JpZ2luYWw9Int7JHZhbHVlLmltZ191cmx9fSI+XG4gICAgICAgICAgICB7e2lmICR2YWx1ZS5uZXdkaXNjb3VudH19XG4gICAgICAgICAgICAgIDxlbT57eyR2YWx1ZS5uZXdkaXNjb3VudH195oqYPC9lbT5cbiAgICAgICAgICAgIHt7L2lmfX1cbiAgICAgICAgICA8L2E+XG4gICAgICAgICAgPGRpdiBjbGFzcz0ie3tleHRCcmFuZH19X2RwX2RlcyI+XG4gICAgICAgICAgICA8YSBjbGFzcz0ie3tleHRCcmFuZH19X3ByaWNlIiA+wqV7eyR2YWx1ZS5wcmljZX19PC9hPlxuICAgICAgICAgICAge3tpZiAkdmFsdWUuaGlnaGVzdH19XG4gICAgICAgICAgICAgIDxhIGNsYXNzPSJ7e2V4dEJyYW5kfX1fbGFzdF9wcmljZSI+wqV7eyR2YWx1ZS5oaWdoZXN0fX08L2E+XG4gICAgICAgICAgICB7ey9pZn19XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvbGk+XG4gICAgICB7ey9lYWNofX1cbiAgICA8L3VsPlxuICA8L2Rpdj5cbiAgPGRpdiBjbGFzcz0icGFnZXMiPlxuICAgIDxzcGFuIGNsYXNzPSJwYWdlX2xlZnQgbG93cF9iZyBvbmVfcGFnZSI+PC9zcGFuPlxuICAgIDxzcGFuIGNsYXNzPSJwZXJwYWdlIj4xPC9zcGFuPlxuICAgIDxzcGFuPi88L3NwYW4+XG4gICAgPHNwYW4gY2xhc3M9InRvdGFscGFnZSI+e3twYWdlbnVtfX08L3NwYW4+XG4gICAgPHNwYW4gY2xhc3M9InBhZ2VfcmlnaHQgbG93cF9iZyBvbmVfcGFnZSI+PC9zcGFuPlxuICA8L2Rpdj5cbiAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj5cbiAgLyrnjJzkvaDllpzmrKLmqKHlnZcqL1xuICAje3tleHRCcmFuZH19X2xvd3ByaV9taW57XG4gICAgcG9zaXRpb246IGZpeGVkO1xuICAgIHJpZ2h0OiAwcHg7XG4gICAgaGVpZ2h0OiAxMjVweDtcbiAgICB0b3A6IDE3NnB4O1xuICAgIHdpZHRoOiAzNHB4O1xuICAgIHotaW5kZXg6IDIxNDc0ODM2NDA7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIGJhY2tncm91bmQtcG9zaXRpb246IC0zcHggLTJweDtcbiAgfVxuICAje3tleHRCcmFuZH19X2xvd3ByaV9taW4uX21vdmVSaWdodCwgI3t7ZXh0QnJhbmR9fV9sb3dwcmkue3tleHRCcmFuZH19X2xvd3ByaV9yaWdodC5fbW92ZVJpZ2h0e1xuICAgIHJpZ2h0OiAzOHB4O1xuICB9XG4gICN7e2V4dEJyYW5kfX1fbG93cHJpX21pbjpob3ZlcntcbiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTQzcHggLTJweDtcbiAgfVxuICAubWFyZ2luVCB7XG4gICAgaGVpZ2h0OiAxMnB4O1xuICB9XG4gICN7e2V4dEJyYW5kfX1fbG93cHJpLnt7ZXh0QnJhbmR9fV9sb3dwcmlfcmlnaHR7XG4gICAgcG9zaXRpb246IGZpeGVkO1xuICAgIHJpZ2h0OiAwcHg7XG4gICAgdG9wOiAxNzZweDtcbiAgICB3aWR0aDoxMzRweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjZGJkYmRiO1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gICAgei1pbmRleDogMjE0NzQ4MzY0MDtcbiAgfVxuICAje3tleHRCcmFuZH19X2xvd3ByaS57e2V4dEJyYW5kfX1fbG93cHJpX3JpZ2h0IC5jbG9zZV9idG57XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICByaWdodDogM3B4O1xuICAgIHRvcDogN3B4O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBoZWlnaHQ6IDIwcHg7XG4gICAgd2lkdGg6IDIwcHg7XG4gICAgYmFja2dyb3VuZDogdXJsKFwne3tzX3NlcnZlcn19L2ltYWdlcy9leHRlbnNpb25zL3t7ZXh0QnJhbmR9fV9jbG9zZV9pY29uMi5wbmdcJykgM3B4IDRweCBuby1yZXBlYXQ7XG4gIH1cbiAgI3t7ZXh0QnJhbmR9fV9sb3dwcmkue3tleHRCcmFuZH19X2xvd3ByaV9yaWdodCAue3tleHRCcmFuZH19X3NpdGVfaWNvbiB7XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgIGhlaWdodDogMjVweDtcbiAgICB3aWR0aDogMjZweDtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgbGVmdDogNXB4O1xuICAgIHRvcDogNHB4O1xuICAgIHt7aWYgbmV3X2V4dGVuc2lvbn19XG4gICAgICBiYWNrZ3JvdW5kOiB1cmwoXCd7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMve3tleHRCcmFuZH19X3NpdGVfaWNvbjJfMS5wbmdcJykgbm8tcmVwZWF0O1xuICAgIHt7ZWxzZX19XG4gICAgICBiYWNrZ3JvdW5kOiB1cmwoXCd7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvZ3dkX3NpdGVfaWNvbjIucG5nXCcpIG5vLXJlcGVhdDtcbiAgICB7ey9pZn19XG4gIH1cbiAgI3t7ZXh0QnJhbmR9fV9sb3dwcmkue3tleHRCcmFuZH19X2xvd3ByaV9yaWdodCAue3tleHRCcmFuZH19X2xvd3ByaV9jb250ZW50e1xuICAgIGhlaWdodDogMzU1cHg7XG4gICAgd2lkdGg6IDEzNHB4O1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB9XG4gICN7e2V4dEJyYW5kfX1fbG93cHJpLnt7ZXh0QnJhbmR9fV9sb3dwcmlfcmlnaHQgLnt7ZXh0QnJhbmR9fV9sb3dwcmlfbGlzdCB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMHB4O1xuICAgIG1hcmdpbjogMHB4O1xuICB9XG4gICN7e2V4dEJyYW5kfX1fbG93cHJpLnt7ZXh0QnJhbmR9fV9sb3dwcmlfcmlnaHQgLnt7ZXh0QnJhbmR9fV9sb3dwcmlfaGVhZHtcbiAgICBoZWlnaHQ6IDI1cHg7XG4gICAgbGluZS1oZWlnaHQ6IDI1cHg7XG4gICAgd2lkdGg6IDEzNHB4O1xuICAgIGNvbG9yOiMyODg3Yzk7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgZm9udC1zaXplOiAxMnB4O1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICB9XG4gICN7e2V4dEJyYW5kfX1fbG93cHJpLnt7ZXh0QnJhbmR9fV9sb3dwcmlfcmlnaHQgdWwgbGl7XG4gICAge3tpZiB0eXBlPT0gXCdsb3dcJ319XG4gICAgICBoZWlnaHQ6IDE1NHB4O1xuICAgIHt7ZWxzZX19XG4gICAgICBoZWlnaHQ6IDE0MHB4O1xuICAgIHt7L2lmfX1cbiAgICB3aWR0aDogMTM0cHg7XG4gICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbiAgICBsaXN0LXN0eWxlOiBub25lO1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgfVxuICBhLnt7ZXh0QnJhbmR9fV9kcF9pbWcge1xuICAgICAgaGVpZ2h0OiAxMTBweDtcbiAgICAgIHdpZHRoOiAxMTBweDtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIG1hcmdpbi1sZWZ0OiAxMnB4O1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB9XG4gIC57e2V4dEJyYW5kfX1fZHBfaW1nIGltZyB7XG4gICAgaGVpZ2h0OiAxMTBweDtcbiAgICB3aWR0aDogMTEwcHg7XG4gIH1cbiAgLnt7ZXh0QnJhbmR9fV9kcF9pbWcgZW0ge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBsZWZ0OiAwcHg7XG4gICAgYm90dG9tOiAwcHg7XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNmZjVlMDA7XG4gICAgY29sb3I6ICNmZmY7XG4gICAgd2lkdGg6IDQycHg7XG4gICAgaGVpZ2h0OiAxNXB4O1xuICAgIGxpbmUtaGVpZ2h0OiAxNXB4O1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBmb250LXNpemU6IDEycHg7XG4gICAgZm9udC1zdHlsZTogbm9ybWFsO1xuICB9XG5cbiAgI3t7ZXh0QnJhbmR9fV9sb3dwcmkue3tleHRCcmFuZH19X2xvd3ByaV9yaWdodCAue3tleHRCcmFuZH19X3ByaWNle1xuICAgZm9udC1zaXplOiAxNHB4O1xuICAgIGNvbG9yOiAjZDgwMDAwO1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgfVxuICAucGFnZXMge1xuICAgIGhlaWdodDogMzhweDtcbiAgICBib3JkZXItdG9wOiAxcHggc29saWQgI2UxZTFlMTtcbiAgfVxuICAucGFnZXMgc3BhbiB7XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgd2lkdGg6IDEycHg7XG4gICAgbWFyZ2luLXRvcDogMTBweDtcbiAgfVxuICAue3tleHRCcmFuZH19X2xvd3ByaV9yaWdodCAucGFnZXMgc3BhbiB7XG4gICAgZmxvYXQ6IGxlZnQ7XG4gIH1cbiAgLnBhZ2VzIC5wYWdlX2xlZnQge1xuICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xuICAgIG1hcmdpbi1yaWdodDogMThweDtcbiAgICB3aWR0aDogMjBweDtcbiAgICBmbG9hdDogbGVmdDtcbiAgICBoZWlnaHQ6IDIwcHg7XG4gICAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTg1cHggLTYxcHg7XG4gIH1cbiAgLnBhZ2VzIC5wYWdlX3JpZ2h0IHtcbiAgICBtYXJnaW4tbGVmdDogMjJweDtcbiAgICB3aWR0aDogMjBweDtcbiAgICBmbG9hdDogbGVmdDtcbiAgICBoZWlnaHQ6IDIwcHg7XG4gICAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTEwOHB4IC02MXB4O1xuICB9XG4gIC5wYWdlcyAub25lX3BhZ2Uge1xuICAgIHt7aWYgcGFnZW51bSA9PSAxfX1cbiAgICB2aXNpYmlsaXR5OiBoaWRkZW47XG4gICAge3svaWZ9fVxuICB9XG4gIC5sb3dwX2JnIHtcbiAgICB7e2lmIG5ld19leHRlbnNpb259fVxuICAgICAgYmFja2dyb3VuZDogdXJsKFwne3tzX3NlcnZlcn19L2ltYWdlcy9leHRlbnNpb25zL3JpZ2h0X2xvd19uZXcyLnBuZ1wnKTtcbiAgICB7e2Vsc2V9fVxuICAgICAgYmFja2dyb3VuZDogdXJsKFwne3tzX3NlcnZlcn19L2ltYWdlcy9leHRlbnNpb25zL3JpZ2h0X2xvd19uZXcxLnBuZ1wnKTtcbiAgICB7ey9pZn19XG4gIH1cbiAgLmxvd3BfYmcuYmdfZ3Vlc3Mge1xuICAgIHt7aWYgbmV3X2V4dGVuc2lvbn19XG4gICAgICBiYWNrZ3JvdW5kOiB1cmwoXCd7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvcmlnaHRfZ3Vlc3NfbmV3Mi5wbmdcJyk7XG4gICAge3tlbHNlfX1cbiAgICAgIGJhY2tncm91bmQ6IHVybChcJ3t7c19zZXJ2ZXJ9fS9pbWFnZXMvZXh0ZW5zaW9ucy9yaWdodF9ndWVzc19uZXcxLnBuZ1wnKTtcbiAgICB7ey9pZn19XG4gICAgXG4gIH1cbiAgI3t7ZXh0QnJhbmR9fV9sb3dwcmkue3tleHRCcmFuZH19X2xvd3ByaV9yaWdodCAue3tleHRCcmFuZH19X2RwX2RlcyB7XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgIHdpZHRoOiAxNTBweFxuICB9XG4gICN7e2V4dEJyYW5kfX1fbG93cHJpLnt7ZXh0QnJhbmR9fV9sb3dwcmlfcmlnaHQgLnt7ZXh0QnJhbmR9fV9kcF9kZXM+IGF7XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgIHdpZHRoOiAxMTBweDtcbiAgICBtYXJnaW4tbGVmdDogMTJweDtcbiAgICBoZWlnaHQ6IDIwcHg7XG4gICAgbGluZS1oZWlnaHQ6IDIwcHg7XG4gIH1cblxuICAje3tleHRCcmFuZH19X2xvd3ByaS57e2V4dEJyYW5kfX1fbG93cHJpX3JpZ2h0IC57e2V4dEJyYW5kfX1fZHBfZGVzIC57e2V4dEJyYW5kfX1fbGFzdF9wcmljZSB7XG4gICAgZm9udC1zaXplOiAxMnB4O1xuICAgIGNvbG9yOiAjOUZBMEEwO1xuICAgIHRleHQtZGVjb3JhdGlvbjogbGluZS10aHJvdWdoO1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB0b3A6IC01cHg7XG4gIH1cbiAgI3t7ZXh0QnJhbmR9fV9sb3dwcmkue3tleHRCcmFuZH19X2xvd3ByaV9yaWdodCAqe1xuICAgIC13ZWJraXQtYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICB9XG4gICAgXG4gIDwvc3R5bGU+XG48L2Rpdj4nCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCShmdW5jdGlvbih0LCBpKSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCgkJCWZ1bmN0aW9uIGEoZSkgewoJCQkJZSA9IGsoZSk7CgkJCQl2YXIgbiA9IHUoKTsKCQkJCWlmICgwICE9PSBuKSB7CgkJCQkJZyA9IGUubGVuZ3RoICUgbiA9PSAwID8gZS5sZW5ndGggLyBuIDogcGFyc2VJbnQoZS5sZW5ndGggLyBuKSArIDEsIHQoImJvZHkiKS5hcHBlbmQoXy5jb21waWxlKGYpKHsKCQkJCQkJZGF0YTogZSwKCQkJCQkJdHlwZTogYi50eXBlLAoJCQkJCQlkYXRhU2l6ZTogZS5sZW5ndGgsCgkJCQkJCXBhZ2VudW06IGcsCgkJCQkJCXNfc2VydmVyOiBpLnNfc2VydmVyLAoJCQkJCQluZXdfZXh0ZW5zaW9uOiBpLm5ld19leHRlbnNpb24sCgkJCQkJCWV4dE5hbWU6IGkuZXh0TmFtZSwKCQkJCQkJZXh0QnJhbmQ6IGkuZXh0QnJhbmQKCQkJCQl9KSk7CgkJCQkJdmFyIGEgPSAi5ZCM57G75Y6G5Y+y5pyA5L2O6IqC5Lu3IjsKCQkJCQkiZmF2b3IiID09IGIudHlwZSAmJiAoYSA9ICLnjJzkvaDllpzmrKIiKSwgdi5sb2coYSArICLlj7Pkvqfmgqzmta7lsZXnpLoiKSwgcygpLCBsKCksIG8oMCwgbiksIHIoKSwgYyhhKSwgaS5JRTcgJiYgdCgiIyIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmkuIiArIGkuZXh0QnJhbmQgKyAiX2xvd3ByaV9yaWdodCB1bCBsaSIpLmNzcygicGFkZGluZy10b3AiLCAiMHB4IikKCQkJCX0KCQkJfQoKCQkJZnVuY3Rpb24gbyhlLCBuKSB7CgkJCQl2YXIgYSA9IHQoIi4iICsgaS5leHRCcmFuZCArICJfbG93cHJpX3JpZ2h0IGxpIik7CgkJCQl3LmluaXQoYSwgZSwgbiwgNzApCgkJCX0KCgkJCWZ1bmN0aW9uIHIoKSB7CgkJCQl0KHdpbmRvdykud2lkdGgoKSA8PSAxMjgwICYmICh5ID0gITEsIHQoIiMiICsgaS5leHRCcmFuZCArICJfbG93cHJpIikuaGlkZSgpKQoJCQl9CgoJCQlmdW5jdGlvbiBzKCkgewoJCQkJdmFyIGUgPSB7CgkJCQkJCWZhdm9yOiAxNDAsCgkJCQkJCWxvdzogMTU0CgkJCQkJfSwKCQkJCQluID0gdSgpLAoJCQkJCWEgPSBlW2IudHlwZV0sCgkJCQkJbyA9IGEgKiBuOwoJCQkJaS5JRTcgJiYgKG8gKz0gbiksIHQoIiMiICsgaS5leHRCcmFuZCArICJfbG93cHJpLiIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmlfcmlnaHQgLiIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmlfY29udGVudCIpLmNzcygiaGVpZ2h0IiwgbyArICJweCIpCgkJCX0KCgkJCWZ1bmN0aW9uIGwoKSB7CgkJCQl2YXIgZSA9IHQoIiMiICsgaS5leHRCcmFuZCArICJfZ3Vlc3NfZmF2b3IiKTsKCQkJCWlmICh0KGUpLmlzKCI6dmlzaWJsZSIpKSB7CgkJCQkJdmFyIG4gPSB0KGUpLm9mZnNldCgpLAoJCQkJCQlhID0gdCgiLiIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmlfcmlnaHQiKS5vZmZzZXQoKSwKCQkJCQkJbyA9IHQod2luZG93KS53aWR0aCgpIC0gMjAyLAoJCQkJCQlyID0gdCgiIyIgKyBpLmV4dEJyYW5kICsgIl9ndWVzc19mYXZvciIpLm91dGVyV2lkdGgoKSwKCQkJCQkJcyA9IHQoIiMiICsgaS5leHRCcmFuZCArICJfZ3Vlc3NfZmF2b3IiKS5vdXRlckhlaWdodCgpOwoJCQkJCW4ubGVmdCArIHIgPj0gbyAmJiBhLnRvcCA8PSBuLnRvcCArIHMgPyB0KCIuIiArIGkuZXh0QnJhbmQgKyAiX2xvd3ByaV9yaWdodCIpLmhpZGUoKSA6IHQoIi4iICsgaS5leHRCcmFuZCArICJfbG93cHJpX3JpZ2h0Iikuc2hvdygpCgkJCQl9CgkJCX0KCgkJCWZ1bmN0aW9uIGMoZSkgewoJCQkJdCgiLnBhZ2VfcmlnaHQiKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQloKCksIGQoMSkKCQkJCX0pLCB0KCIucGFnZV9sZWZ0Iikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJcCgpLCBkKC0xKQoJCQkJfSksIHQoIi5jbG9zZV9idG4iKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQl5ID0gITEsIHQoIiMiICsgaS5leHRCcmFuZCArICJfbG93cHJpLiIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmlfcmlnaHQiKS5oaWRlKCkKCQkJCX0pLCB0KCIjIiArIGkuZXh0QnJhbmQgKyAiX2xvd3ByaV9taW4iKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQl5ID0gITEsIHQoIiMiICsgaS5leHRCcmFuZCArICJfbG93cHJpLiIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmlfcmlnaHQiKS5zaG93KCkKCQkJCX0pLCB0KCIjIiArIGkuZXh0QnJhbmQgKyAiX2xvd3ByaSBsaSIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCXYubG9nKGUgKyAi5Y+z5L6n5oKs5rWu54K55Ye7IikKCQkJCX0pLCB0KHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCkgewoJCQkJCXkgJiYgKHQod2luZG93KS5zY3JvbGxUb3AoKSA+IDFlMyAmJiB0KCIjIiArIGkuZXh0QnJhbmQgKyAiX2xvd3ByaS4iICsgaS5leHRCcmFuZCArICJfbG93cHJpX3JpZ2h0IikuaGlkZSgpLCB0KHdpbmRvdykuc2Nyb2xsVG9wKCkgPCAxZTMgJiYgdCgiIyIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmkuIiArIGkuZXh0QnJhbmQgKyAiX2xvd3ByaV9yaWdodCIpLnNob3coKSwgbCgpKQoJCQkJfSksIHQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7CgkJCQkJeSAmJiBsKCkKCQkJCX0pCgkJCX0KCgkJCWZ1bmN0aW9uIGQoZSkgewoJCQkJdmFyIG4gPSBwYXJzZUludCh0KCIucGVycGFnZSIpLnRleHQoKSk7CgkJCQkxID09IGUgJiYgKG4gPT0gZyA/IG4gPSAxIDogKG8obiAqIHUoKSwgKG4gKyAxKSAqIHUoKSksIG4gKz0gMSkpLCAtMSA9PSBlICYmICgxID09IG4gPyBuID0gZyA6IChuIC09IDEsIG8obiAqIHUoKSwgKG4gKyAxKSAqIHUoKSkpKSwgdCgiLnBlcnBhZ2UiKS50ZXh0KG4pCgkJCX0KCgkJCWZ1bmN0aW9uIHAoKSB7CgkJCQl2YXIgZSA9IHQoIiMiICsgaS5leHRCcmFuZCArICJfbG93cHJpLiIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmlfcmlnaHQgLiIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmlfY29udGVudCIpLmhlaWdodCgpLAoJCQkJCW4gPSBwYXJzZUludCh0KCIjIiArIGkuZXh0QnJhbmQgKyAiX2xvd3ByaS4iICsgaS5leHRCcmFuZCArICJfbG93cHJpX3JpZ2h0IC4iICsgaS5leHRCcmFuZCArICJfbG93cHJpX2xpc3QiKS5jc3MoInRvcCIpLnJlcGxhY2UoInB4IiwgIiIpKSwKCQkJCQlhID0gcGFyc2VJbnQodCgiLnBlcnBhZ2UiKS50ZXh0KCkpOwoJCQkJaS5JRTcgPyAoMSA9PSBhICYmIChuID0gLWUgKiBnKSwgdCgiIyIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmkuIiArIGkuZXh0QnJhbmQgKyAiX2xvd3ByaV9yaWdodCAuIiArIGkuZXh0QnJhbmQgKyAiX2xvd3ByaV9saXN0IikuY3NzKCJ0b3AiLCBuICsgZSArICJweCIpKSA6ICgxID09IGEgJiYgKG4gPSAtZSAqIGcsIHQoIiMiICsgaS5leHRCcmFuZCArICJfbG93cHJpLiIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmlfcmlnaHQgLiIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmlfbGlzdCIpLmNzcygidG9wIiwgbiArICJweCIpKSwgdCgiIyIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmkuIiArIGkuZXh0QnJhbmQgKyAiX2xvd3ByaV9yaWdodCAuIiArIGkuZXh0QnJhbmQgKyAiX2xvd3ByaV9saXN0IikuY3NzKCJ0b3AiLCBuICsgZSArICJweCIpKQoJCQl9CgoJCQlmdW5jdGlvbiBoKCkgewoJCQkJdmFyIGUgPSB0KCIjIiArIGkuZXh0QnJhbmQgKyAiX2xvd3ByaS4iICsgaS5leHRCcmFuZCArICJfbG93cHJpX3JpZ2h0IC4iICsgaS5leHRCcmFuZCArICJfbG93cHJpX2NvbnRlbnQiKS5oZWlnaHQoKSwKCQkJCQluID0gcGFyc2VJbnQodCgiIyIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmkuIiArIGkuZXh0QnJhbmQgKyAiX2xvd3ByaV9yaWdodCAuIiArIGkuZXh0QnJhbmQgKyAiX2xvd3ByaV9saXN0IikuY3NzKCJ0b3AiKS5yZXBsYWNlKCJweCIsICIiKSksCgkJCQkJYSA9IHBhcnNlSW50KHQoIi5wZXJwYWdlIikudGV4dCgpKTsKCQkJCWkuSUU3ID8gKGEgPT0gZyAmJiAobiA9IGUpLCB0KCIjIiArIGkuZXh0QnJhbmQgKyAiX2xvd3ByaS4iICsgaS5leHRCcmFuZCArICJfbG93cHJpX3JpZ2h0IC4iICsgaS5leHRCcmFuZCArICJfbG93cHJpX2xpc3QiKS5jc3MoInRvcCIsIG4gLSBlICsgInB4IikpIDogKGEgPT0gZyAmJiAobiA9IGUsIHQoIiMiICsgaS5leHRCcmFuZCArICJfbG93cHJpLiIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmlfcmlnaHQgLiIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmlfbGlzdCIpLmNzcygidG9wIiwgbiArICJweCIpKSwgdCgiIyIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmkuIiArIGkuZXh0QnJhbmQgKyAiX2xvd3ByaV9yaWdodCAuIiArIGkuZXh0QnJhbmQgKyAiX2xvd3ByaV9saXN0IikuY3NzKCJ0b3AiLCBuIC0gZSArICJweCIpKQoJCQl9CgoJCQlmdW5jdGlvbiB1KCkgewoJCQkJdmFyIGUgPSAwLAoJCQkJCW4gPSA4OSwKCQkJCQlpID0gNDAwOwoJCQkJYiAmJiBiLm90aGVyaCAmJiAoaSA9IGIub3RoZXJoKSwgYiAmJiBiLml0ZW1oICYmIChuID0gYi5pdGVtaCk7CgkJCQl2YXIgYSA9IHQod2luZG93KS5oZWlnaHQoKTsKCQkJCXJldHVybiBhID4gc2NyZWVuLmhlaWdodCAmJiAoYSA9IHNjcmVlbi5oZWlnaHQgLSAyMDApLCBlID0gcGFyc2VJbnQoKGEgLSBpKSAvIG4pLCBlID4gNiAmJiAoZSA9IDYpLCBiICYmIGIubGVuICYmIGIubGVuIDwgZSAmJiAoZSA9IGIubGVuKSwgZQoJCQl9CgoJCQlmdW5jdGlvbiBtKGUpIHsKCQkJCWZvciAodmFyIHQgPSBbXSwgbiA9IDA7IG4gPCBlLmxlbmd0aDsgbisrKSB0LnB1c2goZVtuXSk7CgkJCQlyZXR1cm4gdC5zb3J0KGZ1bmN0aW9uKCkgewoJCQkJCXJldHVybiBNYXRoLnJhbmRvbSgpIC0gTWF0aC5yYW5kb20oKQoJCQkJfSkKCQkJfQoJCQl2YXIgZiwgZywgXyA9IG4oMTYpLAoJCQkJeCA9IG4oMTcpLAoJCQkJdyA9IG4oMjQpLAoJCQkJdiA9IG4oMTMpLAoJCQkJYiA9IHt9LAoJCQkJeSA9ICEwLAoJCQkJayA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlyZXR1cm4gYi5mb2xkRm9yYml0ID09PSAhMCAmJiAoeSA9ICExKSwgYi5zb3J0Rm9yYml0ICE9PSAhMCAmJiAoZSA9IG0oZSkpLCBlCgkJCQl9OwoJCQllLmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKGUsIG4sIG8pIHsKCQkJCTAgIT0geC5nZXQoInNob3dfbG93cHJpIikgJiYgImx1eW91IiA9PSBpLmJ0eXBlICYmIChmID0gbiwgbyAmJiAoYiA9IG8pLCBhKGUpLCAic2FsZS5qZC5jb20iID09IGxvY2F0aW9uLmhvc3QgJiYgKHQoIiMiICsgaS5leHRCcmFuZCArICJfbG93cHJpX21pbiIpLmFkZENsYXNzKCJfbW92ZVJpZ2h0IiksIHQoIiMiICsgaS5leHRCcmFuZCArICJfbG93cHJpIikuYWRkQ2xhc3MoIl9tb3ZlUmlnaHQiKSkpCgkJCX0KCQl9KS5jYWxsKHQsIG4oNiksIG4oMSkpCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCShmdW5jdGlvbih0KSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCgkJCWZ1bmN0aW9uIG4oZSwgbiwgaSwgYSkgewoJCQkJdmFyIG8gPSB0Lm5ld19leHRlbnNpb24gPyAiZHBfZGVmYXVsdDIiIDogImRwX2RlZmF1bHQiLAoJCQkJCXIgPSAidW5kZWZpbmVkIiA9PSB0eXBlb2YgaSB8fCAiIiA9PSBpIHx8IG51bGwgPT0gaSA/IDkwIDogaSwKCQkJCQlzID0gZSwKCQkJCQlsID0gbmV3IEltYWdlOwoJCQkJIm1zaWUiID09IHQuYnJvd3Nlci5hZ2VudCAmJiB0LmJyb3dzZXIudmVyIDwgMTEgPyBsLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkgewoJCQkJCWlmICgiY29tcGxldGUiID09IGwucmVhZHlTdGF0ZSB8fCAibG9hZGVkIiA9PSBsLnJlYWR5U3RhdGUpIHsKCQkJCQkJaWYgKGwud2lkdGggPiAwICYmIGwuaGVpZ2h0ID4gMCkgewoJCQkJCQkJdmFyIHQgPSByIC8gbC53aWR0aCA8IHIgLyBsLmhlaWdodCA/IHIgLyBsLndpZHRoIDogciAvIGwuaGVpZ2h0OwoJCQkJCQkJMSA+PSB0ID8gKG4uY3NzKCJ3aWR0aCIsIGwud2lkdGggKiB0KSwgbi5jc3MoImhlaWdodCIsIGwuaGVpZ2h0ICogdCkpIDogKG4uY3NzKCJ3aWR0aCIsIGwud2lkdGgpLCBuLmNzcygiaGVpZ2h0IiwgbC5oZWlnaHQpKQoJCQkJCQl9CgkJCQkJCW4uYXR0cigic3JjIiwgZSkKCQkJCQl9CgkJCQl9IDogbC5vbmxvYWQgPSBmdW5jdGlvbigpIHsKCQkJCQlpZiAoMSA9PSBsLmNvbXBsZXRlKSB7CgkJCQkJCWlmIChsLndpZHRoID4gMCAmJiBsLmhlaWdodCA+IDApIHsKCQkJCQkJCXZhciB0ID0gciAvIGwud2lkdGggPCByIC8gbC5oZWlnaHQgPyByIC8gbC53aWR0aCA6IHIgLyBsLmhlaWdodDsKCQkJCQkJCTEgPj0gdCA/IChuLmNzcygid2lkdGgiLCBsLndpZHRoICogdCksIG4uY3NzKCJoZWlnaHQiLCBsLmhlaWdodCAqIHQpKSA6IChuLmNzcygid2lkdGgiLCBsLndpZHRoKSwgbi5jc3MoImhlaWdodCIsIGwuaGVpZ2h0KSkKCQkJCQkJfQoJCQkJCQluLmF0dHIoInNyYyIsIGUpLCBhICYmIGEoKQoJCQkJCX0KCQkJCX0sIGwub25lcnJvciA9IGZ1bmN0aW9uKCkgewoJCQkJCW4uYXR0cigic3JjIiwgdC5zX3NlcnZlciArICgiL2ltYWdlcy9leHRlbnNpb25zLyIgKyBvICsgIi5qcGciKSksIG4uYXR0cigiZGF0YS1vcmlnaW5hbCIsIHQuc19zZXJ2ZXIgKyAoIi9pbWFnZXMvZXh0ZW5zaW9ucy8iICsgbyArICIuanBnIikpCgkJCQl9LCBsLnNyYyA9IHMKCQkJfQoJCQllLmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKGUsIHQsIGksIGEpIHsKCQkJCXZhciBvID0gOTA7CgkJCQlhICYmIChvID0gYSk7CgkJCQlmb3IgKHZhciByID0gdDsgaSA+IHI7IHIrKykgewoJCQkJCXZhciBzID0gZS5lcShyKS5maW5kKCJpbWciKS5lcSgwKTsKCQkJCQlzLmF0dHIoImRhdGEtb3JpZ2luYWwiKSAhPSBzLmF0dHIoInNyYyIpICYmIG4ocy5hdHRyKCJkYXRhLW9yaWdpbmFsIiksIHMsIG8pCgkJCQl9CgkJCX0KCQl9KS5jYWxsKHQsIG4oMSkpCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCShmdW5jdGlvbih0LCBpKSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJdmFyIGEgPSBuKDkpLAoJCQkJbyA9IG4oMTMpLAoJCQkJciA9IG4oMTYpLAoJCQkJcyA9IG4oMjYpLAoJCQkJbCA9IHZvaWQgMCwKCQkJCWMgPSB2b2lkIDAsCgkJCQlkID0gW3sKCQkJCQl1cmw6ICJodHRwOi8vd3d3LnlvdXNoaWppZS5jb20vemh1YW50aS8yMDE2L3NxZGMvc3FkYy5odG1sP3NyYz1saXVsaWFuZyIsCgkJCQkJaW1nX3VybDogImh0dHA6Ly9yZWFkaW5kZXguYmpjbmMuc2NzLnNvaHVjcy5jb20vYmFubmVyLzIwMTYwNjE4L3lvdXNoaWppZV8yNTB4MjUwLmpwZyIsCgkJCQkJd2VpZ2h0OiAiMS0zMCIKCQkJCX1dLAoJCQkJcCA9IGZ1bmN0aW9uKCkgewoJCQkJCXQoZG9jdW1lbnQpLm9uKCJtb3VzZXdoZWVsIiwgZnVuY3Rpb24oZSkgewoJCQkJCQllLm9yaWdpbmFsRXZlbnQgJiYgZS5vcmlnaW5hbEV2ZW50LmRlbHRhWSA8IDAgPyAodCgiI3BvcHVwX2J0biIpLmhpZGUoKSwgYyA9ICEwKSA6IGMgPSAhMQoJCQkJCX0pLCB0KHdpbmRvdykub24oInNjcm9sbCIsIGZ1bmN0aW9uKCkgewoJCQkJCQl0KCJib2R5Iikuc2Nyb2xsVG9wKCkgPj0gdCh3aW5kb3cpLmhlaWdodCgpICYmICFjICYmICh0KCIjcG9wdXBfYnRuIikuY3NzKCJkaXNwbGF5IiwgImlubGluZS1ibG9jayIpLCBoKCkpCgkJCQkJfSksIHQoIiNwb3B1cF9idG4iKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQkJby5sb2coIuW8ueeql+a0u+WKqOeCueWHuyIpLCBzKCJjbGljazpwb3B1cCIpCgkJCQkJfSksIHQoIiNwb3B1cF9idG4gLmNsb3NlX2J0biIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gby5sb2coIuW8ueeql+a0u+WKqOWFs+mXrSIpLCBzKCJjbGljazpwb3B1cDpjbG9zZSIpLCB0KCIjcG9wdXBfYnRuIikucmVtb3ZlKCksIGEuZ2V0KGkuc2VydmVyICsgIi9icndleHQvcGVybWFuZW50X2lkP3ZlcnNpb249MiZvcD1zZXRfc2hvd19wb3B1cCZzaG93X3BvcHVwPTAmdW5pb249IiArIGkudW5pb24pLCAhMQoJCQkJCX0pCgkJCQl9LAoJCQkJaCA9IGZ1bmN0aW9uKCkgewoJCQkJCWwgfHwgKGwgPSAhMCwgby5sb2coIuW8ueeql+a0u+WKqOWxleeOsCIpLCBzKCJ0cmFjazpwb3B1cCIpKQoJCQkJfSwKCQkJCXUgPSBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IGRbMF0sCgkJCQkJCWEgPSBuKDMwKTsKCQkJCQlhID0gci5jb21waWxlKGEpKHsKCQkJCQkJdXJsOiBlLnVybCwKCQkJCQkJaW1nX3VybDogZS5pbWdfdXJsLAoJCQkJCQlzX3NlcnZlcjogaS5zX3NlcnZlcgoJCQkJCX0pLCB0KCJib2R5IikuYXBwZW5kKGEpLCBwKCkKCQkJCX07CgkJCWUuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oZSkgewoJCQkJKCJ4aW5neXVlIiA9PT0gaS5mcm9tX2RldmljZSB8fCBlKSAmJiBhLmdldChpLnNlcnZlciArICIvYnJ3ZXh0L3Blcm1hbmVudF9pZCIpLmRvbmUoZnVuY3Rpb24oZSkgewoJCQkJCWUgJiYgMCAhPT0gZS5zaG93X3BvcHVwICYmIHUoKQoJCQkJfSkKCQkJfQoJCX0pLmNhbGwodCwgbig2KSwgbigxKSkKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJdmFyIGk7CgkJKGZ1bmN0aW9uKGEpIHsKCQkJInVzZSBzdHJpY3QiOwoJCQlpID0gZnVuY3Rpb24oKSB7CgkJCQlmdW5jdGlvbiBlKGUpIHsKCQkJCQl2YXIgdCA9IG4oMjcpLmdldEluZm8oInVzZXJfZXh0ZW5zaW9uX2lkIikgfHwgIiIsCgkJCQkJCWkgPSBhLnRqX3NlcnZlcjsKCQkJCQlhLm5ld19leHRlbnNpb24gJiYgIWEuZmRzTW9kICYmIChpID0gYS5zZXJ2ZXIpLCBlIHx8IChlID0gIiIpOwoJCQkJCXZhciByID0gImltZ19yYW5kb20iICsgTWF0aC5yYW5kb20oKSwKCQkJCQkJcyA9IHdpbmRvd1tyXSA9IG5ldyBJbWFnZTsKCQkJCQlzLm9ubG9hZCA9IHMub25lcnJvciA9IGZ1bmN0aW9uKCkgewoJCQkJCQl3aW5kb3dbcl0gPSBudWxsCgkJCQkJfSwgcy5zcmMgPSBpICsgIi92aXNpdC8/dmVyc2lvbj0iICsgYS52ZXJzaW9uICsgIiZ1c2VyaWQ9IiArIHQgKyAiJmFiPSIgKyBvLmdldCgiYWIiKSArICImdXVpZD0iICsgby5nZXQoInV1aWQiKSArICImZnJvbV9kZXZpY2U9IiArIGEuZnJvbV9kZXZpY2UgKyAiJnBlcm1hbmVudF9pZD0iICsgby5nZXQoInBfaWQiKSArICImcmFuZG9tPSIgKyBNYXRoLnJhbmRvbSgpICsgIiZhY3Rpb249IiArIGUgKyAiJnJlZmVyPSIgKyBlbmNvZGVVUklDb21wb25lbnQoZG9jdW1lbnQucmVmZXJyZXIpICsgIiZ1cmw9IiArIGVuY29kZVVSSUNvbXBvbmVudChsb2NhdGlvbi5ocmVmKQoJCQkJfQoJCQkJdmFyIHQgPSB2b2lkIDAsCgkJCQkJaSA9IHZvaWQgMCwKCQkJCQlvID0gbigxNyk7CgkJCQlyZXR1cm4gZnVuY3Rpb24obikgewoJCQkJCWkgPT09IG4gPyAoaSA9IG4sIGNsZWFyVGltZW91dCh0KSwgdCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJCWUobikKCQkJCQl9LCA1MDApKSA6IChpID0gbiwgZShuKSkKCQkJCX0KCQkJfS5jYWxsKHQsIG4sIHQsIGUpLCAhKHZvaWQgMCAhPT0gaSAmJiAoZS5leHBvcnRzID0gaSkpCgkJfSkuY2FsbCh0LCBuKDEpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCkgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBpID0gbigyOCksCgkJCQlhID0gbigyOSksCgkJCQlvID0gYS5nZXRCcm93c2VyKCksCgkJCQlyID0ge30sCgkJCQlzID0gZnVuY3Rpb24oZSkgewoJCQkJCWUgJiYgdC5zaXRlICYmICJ1c2VyX2V4dGVuc2lvbl9pZCIgPT09IGUudHlwZSAmJiBuKDI2KSgiYnJvd3Nlcl91c2VyOiIgKyB0LnNpdGUgKyAiOmV4dFR5cGU6IiArIGwoKSkKCQkJCX0sCgkJCQlsID0gZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSAiIjsKCQkJCQlyZXR1cm4gZSA9ICJkZWZhdWx0IiA9PT0gdC5mcm9tX2RldmljZSA/IG8udXR5cGUgOiB0LmZyb21fZGV2aWNlCgkJCQl9OwoJCQllLmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkgewoJCQkJaS50cmlnZ2VyKHsKCQkJCQl0eXBlOiAidXNlcl9leHRlbnNpb25faWQiCgkJCQl9KSwgaS50cmlnZ2VyKHsKCQkJCQl0eXBlOiAiYnJvd3Nlcl9zZXRpbmZvIgoJCQkJfSksIGkub24oZnVuY3Rpb24oZSkgewoJCQkJCXRyeSB7CgkJCQkJCWlmIChlICYmICJicm93c2VyX3NldGluZm8iID09PSBlLnR5cGUpIHsKCQkJCQkJCWlmIChlLnZhbHVlICYmIGUudmFsdWUgaW5zdGFuY2VvZiBPYmplY3QpCgkJCQkJCQkJZm9yICh2YXIgdCBpbiBlLnZhbHVlKSByW3RdID0gZS52YWx1ZVt0XQoJCQkJCQl9IGVsc2UgZS50eXBlICYmIChyW2UudHlwZV0gPSBlLnZhbHVlLCBzKGUpKQoJCQkJCX0gY2F0Y2ggKG4pIHt9CgkJCQl9KQoJCQl9LCBlLmV4cG9ydHMuZ2V0SW5mbyA9IGZ1bmN0aW9uKGUpIHsKCQkJCXJldHVybiByW2VdCgkJCX0KCQl9KS5jYWxsKHQsIG4oMSkpCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCSJ1c2Ugc3RyaWN0IjsKCQllLmV4cG9ydHMudHJpZ2dlciA9IGZ1bmN0aW9uKGUpIHsKCQkJaWYgKGRvY3VtZW50LmNyZWF0ZUV2ZW50KSB7CgkJCQl2YXIgdCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCJDdXN0b21FdmVudCIpOwoJCQkJdC5pbml0Q3VzdG9tRXZlbnQoImd3ZF9leHRlbnNpb24iLCAhMCwgITAsIGUpLCBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KHQpCgkJCX0KCQl9LCBlLmV4cG9ydHMub24gPSBmdW5jdGlvbihlKSB7CgkJCWRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgPyBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJnd2RfY29udGVudCIsIGZ1bmN0aW9uKHQpIHsKCQkJCWUodC5kZXRhaWwpCgkJCX0pIDogZG9jdW1lbnQuYXR0YWNoRXZlbnQoImd3ZF9jb250ZW50IiwgZnVuY3Rpb24odCkgewoJCQkJZSh0LmRldGFpbCkKCQkJfSkKCQl9Cgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCShmdW5jdGlvbih0KSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJdmFyIG4gPSB7CgkJCQkJdXJsOiAiIiwKCQkJCQl1dHlwZTogIiIKCQkJCX0sCgkJCQlpID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpOwoJCQllLmV4cG9ydHMuZ2V0QnJvd3NlciA9IGZ1bmN0aW9uKCkgewoJCQkJaWYgKCJBY3RpdmVYT2JqZWN0IiBpbiB3aW5kb3cpIG4udXJsID0gdC5jX3NlcnZlciArICgiL2ZpbGVzL2V4dC8iICsgdC5leHROYW1lICsgIl9pbnN0YWxsX0lFLmV4ZSIpLCBuLnV0eXBlID0gImllIiwgbi51dGl0bGUgPSAiSUUiLCBuLmJhY2tncm91bmQgPSAiLTQwMXB4IC04MXB4IjsKCQkJCWVsc2UgaWYgKGkuaW5kZXhPZigiZmlyZWZveCIpID4gLTEpIG4udXJsID0gImh0dHBzOi8vYWRkb25zLm1vemlsbGEub3JnL2ZpcmVmb3gvZG93bmxvYWRzL2xhdGVzdC80MDU5NDAvYWRkb24tNDA1OTQwLWxhdGVzdC54cGk/c3JjPWRwLWJ0bi1wcmltYXJ5Iiwgbi51dHlwZSA9ICJmaXJlZm94Iiwgbi51dGl0bGUgPSAi54Gr54uQIiwgbi5iYWNrZ3JvdW5kID0gIi00MDFweCAtNDRweCI7CgkJCQllbHNlIGlmIChpLmluZGV4T2YoIm9wZXJhIikgPiAtMSB8fCBpLmluZGV4T2YoIm9wciIpID4gLTEpIG4udXJsID0gdC5jX3NlcnZlciArICIvZmlsZXMvZXh0L29wZXJhLmNyeCIsIG4udXR5cGUgPSAib3BlcmEiLCBuLnV0aXRsZSA9ICJPcGVyYSIsIG4uYmFja2dyb3VuZCA9ICItMnB4IC0xMjBweCI7CgkJCQllbHNlIGlmIChpLmluZGV4T2YoInNhZmFyaSIpID4gLTEgJiYgLTEgPT0gaS5pbmRleE9mKCJjaHJvbWUiKSkgbi51cmwgPSB0LmNfc2VydmVyICsgKCIvZmlsZXMvZXh0LyIgKyB0LmV4dE5hbWUgKyAiLnNhZmFyaWV4dHoiKSwgbi51dHlwZSA9ICJzYWZhcmkiLCBuLnV0aXRsZSA9ICJTYWZhcmkiLCBuLmJhY2tncm91bmQgPSAiLTMwMXB4IC00NHB4IjsKCQkJCWVsc2UgaWYgKGkuaW5kZXhPZigiY2hyb21lIikgPiAtMSkgewoJCQkJCXZhciBlID0gbygpOwoJCQkJCWkuaW5kZXhPZigicXFicm93c2VyIikgPiAtMSA/IChuLnVybCA9ICJodHRwczovL3BjYnJvd3Nlci5kZC5xcS5jb20vcGNicm93c2VyYmlnL3FiZXh0ZW5zaW9uL3VwZGF0ZS8yMDE2MDEyMi9qZ3Bobmpva2poamxjbm5ham1mamxhY2puamtobGVhaC5jcngiLCBuLnV0eXBlID0gInFxIiwgbi51dGl0bGUgPSAiUVEiLCBuLmJhY2tncm91bmQgPSAiLTEwNHB4IC04MXB4IikgOiBpLmluZGV4T2YoIm1heHRob24iKSA+IC0xID8gKG4udXJsID0gImh0dHA6Ly9leHRlbnNpb24ubWF4dGhvbi5jbi9kZXRhaWwvaW5kZXgucGhwP3ZpZXdfaWQ9MzU4Iiwgbi51dHlwZSA9ICJtYXh0aG9uIiwgbi51dGl0bGUgPSAi5YKy5ri4Iiwgbi5iYWNrZ3JvdW5kID0gIi00MDFweCAtNHB4IikgOiBpLmluZGV4T2YoImJpZHVicm93c2VyIikgPiAtMSA/IChuLnVybCA9ICJodHRwOi8vY2hhamlhbi5iYWlkdS5jb20vMjAxNS8jYWxsLzM5L21jZ29pYmhoaWhwb2xhaWlvZ2dham9pcGllZWZnbW9hIiwgbi51dHlwZSA9ICJiYWlkdSIsIG4udXRpdGxlID0gIueZvuW6piIsIG4uYmFja2dyb3VuZCA9ICItMTA0cHggLTEyMHB4IikgOiBpLmluZGV4T2YoInVicm93c2VyIikgPiAtMSA/IChuLnVybCA9ICJodHRwOi8vZXh0ZW5zaW9ucy51Yy5jbi9uZXdpbmRleC5odG0jIWRldGFpbC9icGRsaHBqa2piZGlmbG5hbmtwb2hwZmVwZWNkamdhZyIsIG4udXR5cGUgPSAidWMiLCBuLnV0aXRsZSA9ICJVQyIsIG4uYmFja2dyb3VuZCA9ICItMnB4IC00NHB4IikgOiBpLmluZGV4T2YoImxiYnJvd3NlciIpID4gLTEgPyAobi51cmwgPSAiaHR0cDovL3N0b3JlLmxpZWJhby5jbi9hZG1pbi9leHRlbnNpb25zLzIwMTUxMS9lYTg3OGQ1YTRkMmEwMDhhZDc4OTc4YTk0ZWVhNjJhMS5jcngiLCBuLnV0eXBlID0gImxpZWJhbyIsIG4udXRpdGxlID0gIueMjuixueWuieWFqCIsIG4uYmFja2dyb3VuZCA9ICItMzAxcHggLTRweCIpIDogaS5pbmRleE9mKCJ0YW9icm93c2VyIikgPiAtMSA/IChuLnVybCA9IHQuY19zZXJ2ZXIgKyAiL2ZpbGVzL2V4dC9jaHJvbWUuY3J4Iiwgbi51dHlwZSA9ICJ0YW9iYW8iLCBuLnV0aXRsZSA9ICLmt5jlrp0iLCBuLmJhY2tncm91bmQgPSAiLTEwNHB4IC00NHB4IikgOiBpLmluZGV4T2YoIjIzNDVleHBsb3JlciIpID4gLTEgPyAobi51cmwgPSAiaHR0cDovL2V4dGVuc2lvbi5pZS4yMzQ1LmNvbS8jbmZiaWtka2pmamNlamRkYmRjcGJhZm5jbGtmZGhpamQiLCBuLnV0eXBlID0gIjIzNDUiLCBuLnV0aXRsZSA9ICIyMzQ1546L54mMIiwgbi5iYWNrZ3JvdW5kID0gIi0zMDFweCAtODFweCIpIDogaS5pbmRleE9mKCIyMzQ1Y2hyb21lIikgPiAtMSA/IChuLnVybCA9ICJodHRwOi8vZXh0ZW5zaW9uLmNocm9tZS4yMzQ1LmNvbS8jbmZiaWtka2pmamNlamRkYmRjcGJhZm5jbGtmZGhpamQiLCBuLnV0eXBlID0gIjIzNDVqaWFzdSIsIG4udXRpdGxlID0gIjIzNDXliqDpgJ8iKSA6IGkuaW5kZXhPZigiY29vbG5vdm8iKSA+IC0xID8gKG4udXJsID0gdC5jX3NlcnZlciArICIvZmlsZXMvZXh0L2Nocm9tZS5jcngiLCBuLnV0eXBlID0gImZlbmdzaHUiLCBuLnV0aXRsZSA9ICLmnqvmoJEiLCBuLmJhY2tncm91bmQgPSAiLTJweCAtODFweCIpIDogaS5pbmRleE9mKCJncmVlbmJyb3dzZXIiKSA+IC0xID8gKG4udXJsID0gdC5jX3NlcnZlciArICgiL2ZpbGVzL2V4dC8iICsgdC5leHROYW1lICsgIl9mb3JfZ3JlZW5icm93c2VyLnppcCIpLCBuLnV0eXBlID0gImdiIiwgbi51dGl0bGUgPSAiR0IiLCBuLmJhY2tncm91bmQgPSAiLTIwM3B4IC04MXB4IikgOiAiQ2hyb21lIiA9PT0gZSA/IChuLnVybCA9IHQuY19zZXJ2ZXIgKyAiL2FwcC9leHRlbnNpb24/ZnJvbV9kZXZpY2U9IiArIHQuZnJvbV9kZXZpY2VfbnVtLCBuLnV0eXBlID0gImNocm9tZSIsIG4udXRpdGxlID0gIkNocm9tZSIsIG4uYmFja2dyb3VuZCA9ICItMnB4IC00cHgiKSA6ICIzNjBTRSIgPT09IGUgPyAobi51cmwgPSAiaHR0cHM6Ly9leHQuc2UuMzYwLmNuL3dlYnN0b3JlL2RldGFpbC9uZmJpa2RramZqY2VqZGRiZGNwYmFmbmNsa2ZkaGlqZCIsIG4udXR5cGUgPSAiMzYwc2UiLCBuLnV0aXRsZSA9ICIzNjDlronlhagiLCBuLmJhY2tncm91bmQgPSAiLTIwM3B4IC00cHgiKSA6ICIzNjBFRSIgPT09IGUgPyAobi51cmwgPSAiaHR0cHM6Ly9leHQuY2hyb21lLjM2MC5jbi93ZWJzdG9yZS9kZXRhaWwvbmZiaWtka2pmamNlamRkYmRjcGJhZm5jbGtmZGhpamQiLCBuLnV0eXBlID0gIjM2MHNlIiwgbi51dGl0bGUgPSAiMzYw5p6B6YCfICIsIG4uYmFja2dyb3VuZCA9ICItMTA0cHggLTRweCIpIDogaS5pbmRleE9mKCJzZSIpID4gLTEgPyAobi51cmwgPSAiaHR0cDovL2llLnNvZ291LmNvbS90b29scy90b29sXzMzNy5odG1sIiwgbi51dHlwZSA9ICJzb2dvdSIsIG4udXRpdGxlID0gIuaQnOeLlyIsIG4uYmFja2dyb3VuZCA9ICItNDAxcHggLTEyMHB4IikgOiAobi51cmwgPSB0LmNfc2VydmVyICsgIi9hcHAvZXh0ZW5zaW9uIiwgbi51dHlwZSA9ICJjaHJvbWUiLCBuLnV0aXRsZSA9ICJDaHJvbWl1beWGheaguCIpCgkJCQl9IGVsc2Ugbi51cmwgPSB0LmNfc2VydmVyICsgIi9hcHAvZXh0ZW5zaW9uIiwgbi51dHlwZSA9ICJjaHJvbWUiLCBuLnV0aXRsZSA9ICLmnKrnn6XmtY/op4jlmagiOwoJCQkJcmV0dXJuIG4KCQkJfTsKCQkJdmFyIGEgPSB7CgkJCQkJcmVzdWx0OiAiQ2hyb21lIiwKCQkJCQlkZXRhaWxzOiB7CgkJCQkJCUNocm9tZTogNSwKCQkJCQkJQ2hyb21pdW06IDAsCgkJCQkJCV8zNjBTRTogMCwKCQkJCQkJXzM2MEVFOiAwCgkJCQkJfSwKCQkJCQlzb3J0ZWQ6IFsiQ2hyb21lIiwgIjM2MFNFIiwgIjM2MEVFIiwgIkNocm9taXVtIl0sCgkJCQkJZXhlYzogZnVuY3Rpb24oZSkgewoJCQkJCQl2YXIgdCA9IHsKCQkJCQkJCQlDaHJvbWU6IDUsCgkJCQkJCQkJQ2hyb21pdW06IDAsCgkJCQkJCQkJXzM2MFNFOiAwLAoJCQkJCQkJCV8zNjBFRTogMAoJCQkJCQkJfSwKCQkJCQkJCW4gPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDsKCQkJCQkJaWYgKC9DaHJvbWVcLyhbXGQuXSkrXHNTYWZhcmlcLyhbXGQuXSkrJC8udGVzdChuKSkgewoJCQkJCQkJaWYgKCJXaW4zMiIgPT0gd2luZG93Lm5hdmlnYXRvci5wbGF0Zm9ybSkgewoJCQkJCQkJCWlmICh3aW5kb3cuY2xpZW50SW5mb3JtYXRpb24ubGFuZ3VhZ2VzIHx8ICh0Ll8zNjBTRSArPSA4KSwgL3poL2kudGVzdChuYXZpZ2F0b3IubGFuZ3VhZ2UpICYmICh0Ll8zNjBTRSArPSAzLCB0Ll8zNjBFRSArPSAzKSwgd2luZG93LmNsaWVudEluZm9ybWF0aW9uLmxhbmd1YWdlcykgewoJCQkJCQkJCQl2YXIgaSA9IHdpbmRvdy5jbGllbnRJbmZvcm1hdGlvbi5sYW5ndWFnZXMubGVuZ3RoOwoJCQkJCQkJCQlpID49IDMgPyAodC5DaHJvbWUgKz0gMTAsIHQuQ2hyb21pdW0gKz0gNikgOiAyID09IGkgPyAodC5DaHJvbWUgKz0gMywgdC5DaHJvbWl1bSArPSA2LCB0Ll8zNjBFRSArPSA2KSA6IDEgPT0gaSAmJiAodC5DaHJvbWUgKz0gNCwgdC5DaHJvbWl1bSArPSA0KQoJCQkJCQkJCX0KCQkJCQkJCQlmb3IgKHZhciBhIGluIHdpbmRvdy5uYXZpZ2F0b3IucGx1Z2lucykgIm5wLW1zd21wLmRsbCIgPT0gd2luZG93Lm5hdmlnYXRvci5wbHVnaW5zW2FdLmZpbGVuYW1lICYmICh0Ll8zNjBTRSArPSAyMCwgdC5fMzYwRUUgKz0gMjApOwoJCQkJCQkJCU9iamVjdC5rZXlzKHdpbmRvdy5jaHJvbWUud2Vic3RvcmUpLmxlbmd0aCA8PSAxID8gdC5fMzYwU0UgKz0gNyA6IDIgPT0gT2JqZWN0LmtleXMod2luZG93LmNocm9tZS53ZWJzdG9yZSkubGVuZ3RoICYmICh0Ll8zNjBTRSArPSA0LCB0LkNocm9taXVtICs9IDMpLCB3aW5kb3cubmF2aWdhdG9yLnBsdWdpbnMubGVuZ3RoID49IDMwID8gKHQuXzM2MEVFICs9IDcsIHQuXzM2MFNFICs9IDcsIHQuQ2hyb21lICs9IDcpIDogd2luZG93Lm5hdmlnYXRvci5wbHVnaW5zLmxlbmd0aCA8IDMwICYmIHdpbmRvdy5uYXZpZ2F0b3IucGx1Z2lucy5sZW5ndGggPiAxMCA/ICh0Ll8zNjBFRSArPSAzLCB0Ll8zNjBTRSArPSAzLCB0LkNocm9tZSArPSAzKSA6IHdpbmRvdy5uYXZpZ2F0b3IucGx1Z2lucy5sZW5ndGggPD0gMTAgJiYgKHQuQ2hyb21pdW0gKz0gNikKCQkJCQkJCX0gZWxzZSB0Ll8zNjBTRSAtPSA1MCwgdC5fMzYwRUUgLT0gNTAsIC9MaW51eC9pLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpICYmICh0LkNocm9taXVtICs9IDUpOwoJCQkJCQkJdmFyIG8gPSAwLAoJCQkJCQkJCXIgPSB2b2lkIDA7CgkJCQkJCQlmb3IgKHZhciBhIGluIHdpbmRvdy5uYXZpZ2F0b3IucGx1Z2lucykKCQkJCQkJCQlpZiAociA9IC9eKC4rKSBQREYgVmlld2VyJC8uZXhlYyh3aW5kb3cubmF2aWdhdG9yLnBsdWdpbnNbYV0ubmFtZSkpIHsKCQkJCQkJCQkJaWYgKCJDaHJvbWUiID09IHJbMV0pIHsKCQkJCQkJCQkJCXQuQ2hyb21lICs9IDYsIHQuXzM2MFNFICs9IDYsIG8gPSAxOwoJCQkJCQkJCQkJYnJlYWsKCQkJCQkJCQkJfQoJCQkJCQkJCQlpZiAoIkNocm9taXVtIiA9PSByWzFdKSB7CgkJCQkJCQkJCQl0LkNocm9taXVtICs9IDEwLCB0Ll8zNjBFRSArPSA2LCBvID0gMTsKCQkJCQkJCQkJCWJyZWFrCgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQlvIHx8ICh0LkNocm9taXVtICs9IDkpCgkJCQkJCX0KCQkJCQkJdmFyIHMgPSBuZXcgT2JqZWN0OwoJCQkJCQlzLkNocm9tZSA9IHQuQ2hyb21lLCBzLkNocm9taXVtID0gdC5DaHJvbWl1bSwgc1siMzYwU0UiXSA9IHQuXzM2MFNFLCBzWyIzNjBFRSJdID0gdC5fMzYwRUU7CgkJCQkJCXZhciBsID0gW107CgkJCQkJCWZvciAodmFyIGMgaW4gcykgbC5wdXNoKFtjLCBzW2NdXSk7CgkJCQkJCXJldHVybiBsLnNvcnQoZnVuY3Rpb24oZSwgdCkgewoJCQkJCQkJcmV0dXJuIHRbMV0gLSBlWzFdCgkJCQkJCX0pLCB0aGlzLnNvcnRlZCA9IGwsIHRoaXMuZGV0YWlscyA9IHQsIHRoaXMucmVzdWx0ID0gbFswXVswXSwgInJlc3VsdCIgPT0gZSA/IGxbMF1bMF0gOiAiZGV0YWlscyIgPT0gZSA/IHMgOiAic29ydGVkIiA9PSBlID8gbCA6IHZvaWQgMAoJCQkJCX0KCQkJCX0sCgkJCQlvID0gZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDsKCQkJCQl0cnkgewoJCQkJCQlpZiAoYS5leGVjKCksIC9DaHJvbWVcLyhbXGQuXSkrXHNTYWZhcmlcLyhbXGQuXSkrJC8udGVzdChlKSkgcmV0dXJuIGEucmVzdWx0CgkJCQkJfSBjYXRjaCAodCkgewoJCQkJCQlyZXR1cm4KCQkJCQl9CgkJCQl9OwoJCQllLmV4cG9ydHMuZ2V0Q2hyb21lVmVyc2lvbiA9IGZ1bmN0aW9uKCkgewoJCQkJdmFyIGUgPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9DaHJvbShlfGl1bSlcLyhbMC05XSspXC4vKTsKCQkJCXJldHVybiBlID8gcGFyc2VJbnQoZVsyXSwgMTApIDogITEKCQkJfQoJCX0pLmNhbGwodCwgbigxKSkKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJZS5leHBvcnRzID0gJzxhIGhyZWY9Int7dXJsfX0iIHRhcmdldD0iX2JsYW5rIiBpZD0icG9wdXBfYnRuIj5cbiAgPGltZyBzcmM9Int7aW1nX3VybH19Ij5cbiAgPHNwYW4gY2xhc3M9ImNsb3NlX2J0biI+PC9zcGFuPlxuICA8c3R5bGUgdHlwZT0idGV4dC9jc3MiPlxuICAgICNwb3B1cF9idG4ge1xuICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgaGVpZ2h0OiAyNTBweDtcbiAgICAgIHdpZHRoOiAyNTBweDtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICBib3R0b206IDBweDtcbiAgICAgIHJpZ2h0OiAwcHg7XG4gICAgICB6LWluZGV4OiA5OTk5OTk5OTk5OTtcbiAgICB9XG4gICAgI3BvcHVwX2J0biBpbWcge1xuICAgICAgd2lkdGg6IDI1MHB4O1xuICAgICAgaGVpZ2h0OiAyNTBweDtcbiAgICB9XG4gICAgLmNsb3NlX2J0biB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBiYWNrZ3JvdW5kOiAjZmZmIHVybChcJ3t7c19zZXJ2ZXJ9fS9pbWFnZXMvZXh0ZW5zaW9ucy9jbG9zZWJhcl9iZzEucG5nXCcpIDRweCA0cHggbm8tcmVwZWF0O1xuICAgICAgdG9wOiAwcHg7XG4gICAgICByaWdodDogMHB4O1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgaGVpZ2h0OiAyMHB4O1xuICAgICAgd2lkdGg6IDIwcHg7XG4gICAgfVxuICA8L3N0eWxlPlxuPC9hPlxuJwoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCkgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBpID0gbigxMyksCgkJCQlhID0gbigyNik7CgkJCWUuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7CgkJCQl0KCIjb3ZlcnZpZXcgLm92LWFjdCIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgbiA9IHQoZS50YXJnZXQpLnRleHQoKSwKCQkJCQkJbyA9IGxvY2F0aW9uLmhyZWY7CgkJCQkJbi5pbmRleE9mKCLnq4vljbPotK3kubAiKSA+IC0xICYmIG8uaW5kZXhPZigiZ291d3VkYW5nIikgPiAtMSAmJiAoaS5sb2coImZpbmUzcTpjbGljayIpLCBhKCJmaW5lM3E6Y2xpY2siKSkKCQkJCX0pCgkJCX0KCQl9KS5jYWxsKHQsIG4oNikpCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCShmdW5jdGlvbih0KSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJdmFyIGkgPSBuKDI2KSwKCQkJCWEgPSB7CgkJCQkJImNhcnRcXC5qZFxcLmNvbS9hZGRUb0NhcnRcXC5odG1sIjogImFkZGNhcnRfc3VjY2Vzc19wYWdlOjM2MGJ1eSIsCgkJCQkJImNhcnRcXC5nb21lXFwuY29tXFwuY24vYWRkc3VjY2VzcyI6ICJhZGRjYXJ0X3N1Y2Nlc3NfcGFnZTpnb21lIiwKCQkJCQkic2hvcHBpbmdcXC5zdW5pbmdcXC5jb20vYWRkVG9DYXJ0XFwuZG8iOiAiYWRkY2FydF9zdWNjZXNzX3BhZ2U6c3VuaW5nIiwKCQkJCQkiY2FydFxcLmpkXFwuY29tL2NhcnRcXC5hY3Rpb24iOiAiY2FydF9wYWdlX3Zpc2l0OjM2MGJ1eSIsCgkJCQkJInNob3BwaW5nXFwuc3VuaW5nXFwuY29tL2NhcnRcXC5kbyI6ICJjYXJ0X3BhZ2VfdmlzaXQ6c3VuaW5nIiwKCQkJCQkiY2FydFxcLmdvbWVcXC5jb21cXC5jbi9zaG9wcGluZyI6ICJvcmRlcndyaXRlX3BhZ2VfdmlzaXQ6Z29tZSIsCgkJCQkJImNhcnRcXC5nb21lXFwuY29tXFwuY24iOiAiY2FydF9wYWdlX3Zpc2l0OmdvbWUiLAoJCQkJCSJjYXJ0XFwudGFvYmFvXFwuY29tL2NhcnRcXC5odG0iOiAiY2FydF9wYWdlX3Zpc2l0OnRtYWxsIiwKCQkJCQkiY2FydFxcLnRtYWxsXFwuY29tIjogImNhcnRfcGFnZV92aXNpdDp0bWFsbCIsCgkJCQkJInRyYWRlXFwuamRcXC5jb20vc2hvcHBpbmcvb3JkZXIvZ2V0T3JkZXJJbmZvXFwuYWN0aW9uIjogIm9yZGVyd3JpdGVfcGFnZV92aXNpdDozNjBidXkiLAoJCQkJCSJzaG9wcGluZ1xcLnN1bmluZ1xcLmNvbS9vcmRlclxcLmRvIjogIm9yZGVyd3JpdGVfcGFnZV92aXNpdDpzdW5pbmciLAoJCQkJCSJidXlcXC50bWFsbFxcLmNvbS9vcmRlci9jb25maXJtX29yZGVyXFwuaHRtIjogIm9yZGVyd3JpdGVfcGFnZV92aXNpdDp0bWFsbCIsCgkJCQkJImJ1eVxcLnRtYWxsXFwuY29tL29yZGVyL2NvbmZpcm1PcmRlclxcLmh0bSI6ICJvcmRlcndyaXRlX3BhZ2VfdmlzaXQ6dG1hbGwiLAoJCQkJCSJjYXNoaWVyXFwuamRcXC5jb20iOiAib3JkZXJzdWNjZXNzX3BhZ2VfdmlzaXQ6MzYwYnV5IiwKCQkJCQkicGF5bWVudFxcLnN1bmluZ1xcLmNvbSI6ICJvcmRlcnN1Y2Nlc3NfcGFnZV92aXNpdDpzdW5pbmciLAoJCQkJCSJncGF5XFwuZ29tZVxcLmNvbVxcLmNuL2Nhc2hpZXIvZGVmYXVsdFxcLmRodG1sIjogIm9yZGVyc3VjY2Vzc19wYWdlX3Zpc2l0OmdvbWUiLAoJCQkJCSJjYXNoaWVyenRoXFwuYWxpcGF5XFwuY29tIjogIm9yZGVyc3VjY2Vzc19wYWdlX3Zpc2l0OnRtYWxsIiwKCQkJCQkiY2FzaGllcnp1aVxcLmFsaXBheVxcLmNvbSI6ICJvcmRlcnN1Y2Nlc3NfcGFnZV92aXNpdDp0bWFsbCIsCgkJCQkJInZpcFxcLmpkXFwuY29tIjogInZpcF9wYWdlX3Zpc2l0OjM2MGJ1eSIsCgkJCQkJInZpcFxcLnN1bmluZ1xcLmNvbSI6ICJ2aXBfcGFnZV92aXNpdDpzdW5pbmciLAoJCQkJCSJ2XFwuZ29tZVxcLmNvbVxcLmNuIjogInZpcF9wYWdlX3Zpc2l0OmdvbWUiLAoJCQkJCSJ2aXBcXC50bWFsbFxcLmNvbSI6ICJ2aXBfcGFnZV92aXNpdDp0bWFsbCIKCQkJCX0sCgkJCQlvID0gWyJqZCIsICJzdW5pbmciLCAidGFvYmFvIiwgInRtYWxsIiwgImdvbWUiXSwKCQkJCXIgPSB7CgkJCQkJIjM2MGJ1eSI6ICIjY2hvb3NlLWJ0bi1jb2xsIiwKCQkJCQlnb21lOiAiI2NvbGxlY3QiLAoJCQkJCXN1bmluZzogIiNpbmVyZXN0Qm94IiwKCQkJCQl0bWFsbDogIiNKX0FkZEZhdm9yaXRlIgoJCQkJfSwKCQkJCXMgPSBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQgPSBuKDUpLmlzUHJvZHVjdFBhZ2UoZG9jdW1lbnQucmVmZXJyZXIpOwoJCQkJCXQgPSB0ID8gInByb2R1Y3QiIDogIm90aGVyIjsKCQkJCQl2YXIgbyA9IGxvY2F0aW9uLmhyZWY7CgkJCQkJZm9yICh2YXIgciBpbiBhKQoJCQkJCQlpZiAoby5tYXRjaChuZXcgUmVnRXhwKHIpKSkgcmV0dXJuIHZvaWQgaSh0ICsgYVtyXSkKCQkJCX0sCgkJCQlsID0gZnVuY3Rpb24oZSkgewoJCQkJCXJbZV0gJiYgdChyW2VdKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQkJaSgiY2xpY2s6Y29sbGVjdGlvbl9jbGljazoiICsgZSkKCQkJCQl9KQoJCQkJfTsKCQkJZS5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHsKCQkJCXMoKTsKCQkJCWZvciAodmFyIGUgPSAwOyBlIDwgby5sZW5ndGg7IGUrKykKCQkJCQlpZiAobG9jYXRpb24uaG9zdC5pbmRleE9mKG9bZV0pID4gLTEpIHsKCQkJCQkJdmFyIHQgPSBvW2VdOwoJCQkJCQlyZXR1cm4gImpkIiA9PT0gdCAmJiAodCA9ICIzNjBidXkiKSwgdm9pZCBsKHQpCgkJCQkJfQoJCQl9CgkJfSkuY2FsbCh0LCBuKDYpKQoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQkidXNlIHN0cmljdCI7CgkJZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7CgkJCXZhciBlID0gZG9jdW1lbnQubG9jYXRpb24uaG9zdDsKCQkJcmV0dXJuIGUuaW5kZXhPZigiaGFvMTIzIikgPiAtMSB8fCBlLmluZGV4T2YoImJhaWR1IikgPiAtMSA/ICEwIDogITEKCQl9Cgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCShmdW5jdGlvbih0KSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJdmFyIGkgPSBuKDM1KSwKCQkJCWEgPSBuKDYpOwoJCQlpZiAoaSAmJiBpLnBhcmVudE5vZGUgJiYgaS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkICYmIGkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpKSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIkJJSklBX0hBU19CVUlMVCIpKSBhKCIjQklKSUFfSEFTX0JVSUxUIikuYWRkQ2xhc3ModC5mcm9tX2RldmljZSksIGUuZXhwb3J0cyA9ICEwOwoJCQllbHNlIHsKCQkJCXZhciBvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQlvLmlkID0gIkJJSklBX0hBU19CVUlMVCI7CgkJCQl2YXIgciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIik7CgkJCQlyICYmIHJbMF0gJiYgKHIgPSByWzBdKSwgci5hcHBlbmRDaGlsZChvKSwgYSgiI0JJSklBX0hBU19CVUlMVCIpLmFkZENsYXNzKHQuZnJvbV9kZXZpY2UpLCBlLmV4cG9ydHMgPSAhMQoJCQl9CgkJfSkuY2FsbCh0LCBuKDEpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCkgewoJCQkidXNlIHN0cmljdCI7CgoJCQlmdW5jdGlvbiBuKCkgewoJCQkJaWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQpIHJldHVybiBkb2N1bWVudC5jdXJyZW50U2NyaXB0OwoJCQkJZm9yICh2YXIgZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzY3JpcHQiKSwgbiA9IDA7IG4gPCBlLmxlbmd0aDsgbisrKQoJCQkJCWlmIChuZXcgUmVnRXhwKHQuZXh0TmFtZSArICItbm90aWZpZXIiLCAiaSIpLnRlc3QoZVtuXS5zcmMpKSByZXR1cm4gZVtuXQoJCQl9CgkJCWUuZXhwb3J0cyA9IG4oKQoJCX0pLmNhbGwodCwgbigxKSkKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJInVzZSBzdHJpY3QiOwoJCUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kIHx8IChGdW5jdGlvbi5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uKGUpIHsKCQkJaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIHRoaXMpIHRocm93IG5ldyBUeXBlRXJyb3IoIkZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kIC0gd2hhdCBpcyB0cnlpbmcgdG8gYmUgYm91bmQgaXMgbm90IGNhbGxhYmxlIik7CgkJCXZhciB0ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSwKCQkJCW4gPSB0aGlzLAoJCQkJaSA9IGZ1bmN0aW9uKCkge30sCgkJCQlhID0gZnVuY3Rpb24oKSB7CgkJCQkJcmV0dXJuIG4uYXBwbHkodGhpcyBpbnN0YW5jZW9mIGkgPyB0aGlzIDogZSwgdC5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSkpCgkJCQl9OwoJCQlyZXR1cm4gaS5wcm90b3R5cGUgPSB0aGlzLnByb3RvdHlwZSwgYS5wcm90b3R5cGUgPSBuZXcgaSwgYQoJCX0pLCBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiB8fCAoQXJyYXkucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbihlLCB0KSB7CgkJCXZhciBuOwoJCQlpZiAobnVsbCA9PSB0aGlzKSB0aHJvdyBuZXcgVHlwZUVycm9yKCcidGhpcyIgaXMgbnVsbCBvciBub3QgZGVmaW5lZCcpOwoJCQl2YXIgaSA9IE9iamVjdCh0aGlzKSwKCQkJCWEgPSBpLmxlbmd0aCA+Pj4gMDsKCQkJaWYgKDAgPT09IGEpIHJldHVybiAtMTsKCQkJdmFyIG8gPSArdCB8fCAwOwoJCQlpZiAoTWF0aC5hYnMobykgPT09IDEgLyAwICYmIChvID0gMCksIG8gPj0gYSkgcmV0dXJuIC0xOwoJCQlmb3IgKG4gPSBNYXRoLm1heChvID49IDAgPyBvIDogYSAtIE1hdGguYWJzKG8pLCAwKTsgYSA+IG47KSB7CgkJCQlpZiAobiBpbiBpICYmIGlbbl0gPT09IGUpIHJldHVybiBuOwoJCQkJbisrCgkJCX0KCQkJcmV0dXJuIC0xCgkJfSksICghQXJyYXkucHJvdG90eXBlLmZpbHRlciB8fCBsb2NhdGlvbi5ob3N0LmluZGV4T2YoInVsZS5jb20iKSA+IC0xKSAmJiAoQXJyYXkucHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uKGUpIHsKCQkJaWYgKHZvaWQgMCA9PT0gdGhpcyB8fCBudWxsID09PSB0aGlzKSB0aHJvdyBuZXcgVHlwZUVycm9yOwoJCQl2YXIgdCA9IE9iamVjdCh0aGlzKSwKCQkJCW4gPSB0Lmxlbmd0aCA+Pj4gMDsKCQkJaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIGUpIHRocm93IG5ldyBUeXBlRXJyb3I7CgkJCWZvciAodmFyIGkgPSBbXSwgYSA9IGFyZ3VtZW50cy5sZW5ndGggPj0gMiA/IGFyZ3VtZW50c1sxXSA6IHZvaWQgMCwgbyA9IDA7IG4gPiBvOyBvKyspCgkJCQlpZiAobyBpbiB0KSB7CgkJCQkJdmFyIHIgPSB0W29dOwoJCQkJCWUuY2FsbChhLCByLCBvLCB0KSAmJiBpLnB1c2gocikKCQkJCX0KCQkJcmV0dXJuIGkKCQl9KSwgbG9jYXRpb24uaG9zdC5pbmRleE9mKCJsaWFuamlhLmNvbSIpID4gLTEgJiYgKE51bWJlci5wcm90b3R5cGUudG9GaXhlZCA9IGZ1bmN0aW9uKGUpIHsKCQkJdmFyIHQgPSAocGFyc2VJbnQodGhpcyAqIE1hdGgucG93KDEwLCBlKSArIC41KSAvIE1hdGgucG93KDEwLCBlKSkudG9TdHJpbmcoKSwKCQkJCW4gPSB0LmluZGV4T2YoIi4iKTsKCQkJaWYgKDAgPiBuICYmIGUgPiAwKSB7CgkJCQl0ICs9ICIuIjsKCQkJCWZvciAodmFyIGkgPSAwOyBlID4gaTsgaSsrKSB0ICs9ICIwIgoJCQl9IGVsc2UgewoJCQkJbiA9IHQubGVuZ3RoIC0gbjsKCQkJCWZvciAodmFyIGkgPSAwOyBlIC0gbiArIDEgPiBpOyBpKyspIHQgKz0gIjAiCgkJCX0KCQkJcmV0dXJuIHQKCQl9KSwgKCJpdGVtLmpkLmNvbSIgPT09IGxvY2F0aW9uLmhvc3QgfHwgInJlLmpkLmNvbSIgPT09IGxvY2F0aW9uLmhvc3QgfHwgIml0ZW0ueWhkLmNvbSIgPT09IGxvY2F0aW9uLmhvc3QpICYmIChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uKGUpIHsKCQkJdmFyIHQsIG47CgkJCWlmIChudWxsID09IHRoaXMpIHRocm93IG5ldyBUeXBlRXJyb3IoInRoaXMgaXMgbnVsbCBvciBub3QgZGVmaW5lZCIpOwoJCQl2YXIgaSA9IE9iamVjdCh0aGlzKSwKCQkJCWEgPSBpLmxlbmd0aCA+Pj4gMDsKCQkJaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIGUpIHRocm93IG5ldyBUeXBlRXJyb3IoZSArICIgaXMgbm90IGEgZnVuY3Rpb24iKTsKCQkJZm9yIChhcmd1bWVudHMubGVuZ3RoID4gMSAmJiAodCA9IGFyZ3VtZW50c1sxXSksIG4gPSAwOyBhID4gbjspIHsKCQkJCXZhciBvOwoJCQkJbiBpbiBpICYmIChvID0gaVtuXSwgZS5jYWxsKHQsIG8sIG4sIGkpKSwgbisrCgkJCX0KCQl9KQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24oZSkgewoJCQkidXNlIHN0cmljdCI7CgkJCSJBY3RpdmVYT2JqZWN0IiBpbiB3aW5kb3cgJiYgKGUuYnJvd3NlciA9IHsKCQkJCWVuZ2luZTogInRyaWRlbnQiLAoJCQkJYWdlbnQ6ICJtc2llIiwKCQkJCXZlcjogd2luZG93LlhNTEh0dHBSZXF1ZXN0ID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvciA/IGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgPyB3aW5kb3cuYXRvYiA/IHdpbmRvdy5leGVjU2NyaXB0ID8gMTAgOiAxMSA6IDkgOiA4IDogNyA6IDYKCQkJfSksIGUuYnJvd3Nlci52ZXJzaW9uID0gZS5icm93c2VyLnZlciwgIm1zaWUiID09PSBlLmJyb3dzZXIuYWdlbnQgJiYgKGUuYnJvd3Nlci5tc2llID0gITApLCBlLklFNiA9ICJtc2llIiA9PSBlLmJyb3dzZXIuYWdlbnQgJiYgNiA9PT0gZS5icm93c2VyLnZlciwgZS5JRTcgPSAibXNpZSIgPT0gZS5icm93c2VyLmFnZW50ICYmIDcgPT09IGUuYnJvd3Nlci52ZXIsIGUuSUU4ID0gIm1zaWUiID09IGUuYnJvd3Nlci5hZ2VudCAmJiA4ID09PSBlLmJyb3dzZXIudmVyLCBlLklFOSA9ICJtc2llIiA9PSBlLmJyb3dzZXIuYWdlbnQgJiYgOSA9PT0gZS5icm93c2VyLnZlciwgZS5JRTEwID0gIm1zaWUiID09IGUuYnJvd3Nlci5hZ2VudCAmJiAxMCA9PT0gZS5icm93c2VyLnZlciwgZS5JRTExID0gIm1zaWUiID09IGUuYnJvd3Nlci5hZ2VudCAmJiAxMSA9PT0gZS5icm93c2VyLnZlcgoJCX0pLmNhbGwodCwgbigxKSkKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJInVzZSBzdHJpY3QiOwoJCWUuZXhwb3J0cyA9IGZ1bmN0aW9uKGUpIHsKCQkJZm9yICh2YXIgdCA9ICIwMTIzNDU2Nzg5cXdlcnR5dWlvcGxramhnZmRzYXp4Y3Zibm0iLCBuID0gIiIsIGkgPSAwOyBlID4gaTsgaSsrKSBuICs9IHQuY2hhckF0KE1hdGguY2VpbCgxZTggKiBNYXRoLnJhbmRvbSgpKSAlIHQubGVuZ3RoKTsKCQkJcmV0dXJuIG4KCQl9Cgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCShmdW5jdGlvbih0LCBpKSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCgkJCWZ1bmN0aW9uIGEoKSB7CgkJCQl0LklFNiB8fCB0LklFNyB8fCB0LklFOCB8fCB0LklFOSB8fCBzKCkgJiYgKHgoKSwgcihmdW5jdGlvbigpIHsKCQkJCQlnKCksIDAgIT0gaSgiI2d3ZF9odF9tYWluIikubGVuZ3RoICYmIChOKCksIFQoKSwgRCgpLCBQKGtlLnNoYW5neWlbdmVdLm1hblswXSwga2Uuc2hhbmd5aVt2ZV0ubWFuWzFdKSwgVSgpLCAkKCksIHUoKSwgbmUoKSwgaCgpLCB5KCksIEMoKSwgaigpKQoJCQkJfSkpCgkJCX0KCgkJCWZ1bmN0aW9uIG8oZSkgewoJCQkJaWYgKCFlKSByZXR1cm4gW107CgkJCQlmb3IgKHZhciB0ID0gW10sIG4gPSBbXSwgaSA9IDA7IGkgPCBlLmxlbmd0aDsgaSsrKSBlW2ldLmN1cnJlbnQgJiYgIWVbaV0uYXNjZSAmJiAoZVtpXS50eXBlID8gKGVbaV0uZmlyc3RXWzFdID0gbWUoZVtpXS5maXJzdFdbMV0sIGVbaV0udHlwZSksIGVbaV0ubmV4dFdbMV0gPSBtZShlW2ldLm5leHRXWzFdLCBlW2ldLnR5cGUpKSA6IChlW2ldLmZpcnN0V1sxXSA9IG1lKGVbaV0uZmlyc3RXWzFdKSwgZVtpXS5uZXh0V1sxXSA9IG1lKGVbaV0ubmV4dFdbMV0pKSksIGVbaV0uc2FsZV90bGUgJiYgKHNlID0gITApLCBlW2ldLmNvb3BlciA/IHQucHVzaChlW2ldKSA6IG4ucHVzaChlW2ldKTsKCQkJCXJldHVybiBlID0gdC5zb3J0KGZ1bmN0aW9uKCkgewoJCQkJCXJldHVybiBNYXRoLnJhbmRvbSgpIC0gLjUKCQkJCX0pLmNvbmNhdChuKQoJCQl9CgoJCQlmdW5jdGlvbiByKGUpIHsKCQkJCXZhciBuID0geGUgKyAiLy9icm93c2VyLiIgKyB0LmV4dE5hbWUgKyAiLmNvbS9leHRlbnNpb24/YWM9aGFpdGFvSW5mbyI7CgkJCQlmZS5nZXQobikuZG9uZShmdW5jdGlvbih0KSB7CgkJCQkJdCAmJiB0LmNhdGUgJiYgdC50cmFucyAmJiAocGUgPSB0LmNhdGUsIGhlID0gdC50cmFucywgaGVbdmVdID0gbyhoZVt2ZV0pLCBlKCkpCgkJCQl9KQoJCQl9CgoJCQlmdW5jdGlvbiBzKCkgewoJCQkJdmFyIGUgPSBsb2NhdGlvbi5ob3N0OwoJCQkJZm9yICh2YXIgdCBpbiB6ZSkKCQkJCQlpZiAoZSA9PSB0KSByZXR1cm4gITA7CgkJCQlyZXR1cm4gITEKCQkJfQoKCQkJZnVuY3Rpb24gbChlKSB7CgkJCQlpKCIuaHRfdGFyaWZmX2J0biBzcGFuIikudGV4dChlLnNsaWNlKDAsIDUpKSwgaSgiLmh0X3RhcmlmZl9idG4gc3BhbiIpLmF0dHIoInRpdGxlIiwgZSksIGkoIiNjYXRlX3NtYWxsIikudmFsKGUpLCBpKCIuaHRfdGFyaWZmX2NhdGUiKS50ZXh0KGUpLCBYKCIjY2F0ZV9zbWFsbCIpLCBYKCIuaHRfdGFyaWZmX2NhdGUiLCAidGV4dCIsIDQpOwoJCQkJZm9yICh2YXIgdCBpbiBwZSkKCQkJCQlmb3IgKHZhciBuID0gcGVbdF0ubGVuZ3RoLCBhID0gMDsgbiA+IGE7IGErKykKCQkJCQkJaWYgKHBlW3RdW2FdWzFdID09IGUpIHsKCQkJCQkJCXZhciBvID0gaSgnI2JpZ194aWFsYSBhW2NhdGU9IicgKyB0ICsgJyJdJykudGV4dCgpOwoJCQkJCQkJaSgiI2NhdGVfYmlnIikudmFsKG8pLCBYKCIjY2F0ZV9iaWciKSwgWShwZVt0XSksIGkoIi5odF90YXJpZmYgLmh0X3RhcmlmZl9udW0gZW0iKS50ZXh0KHBlW3RdW2FdWzBdKQoJCQkJCQl9CgkJCX0KCgkJCWZ1bmN0aW9uIGMoZSkgewoJCQkJdmFyIHQgPSBqZVtlXS50bGUsCgkJCQkJbiA9IGplW2VdLmNhdGU7CgkJCQlpKCIuaHRfdGFyaWZmX2J0biBzcGFuIikudGV4dCh0LnNsaWNlKDAsIDUpKSwgaSgiLmh0X3RhcmlmZl9idG4gc3BhbiIpLmF0dHIoInRpdGxlIiwgdCksIGkoIiNjYXRlX2JpZyIpLnZhbCh0KSwgWCgiI2NhdGVfYmlnIiksIGkoIiNjYXRlX3NtYWxsIikudmFsKHBlW25dW3BlW25dLmxlbmd0aCAtIDFdWzFdKSwgaSgiLmh0X3RhcmlmZl9jYXRlIikudGV4dChwZVtuXVtwZVtuXS5sZW5ndGggLSAxXVsxXSksIFgoIiNjYXRlX3NtYWxsIiksIFgoIi5odF90YXJpZmZfY2F0ZSIsICJ0ZXh0IiwgNCksIFkocGVbbl0pLCBpKCIuaHRfdGFyaWZmIC5odF90YXJpZmZfbnVtIGVtIikudGV4dChwZVtuXVtwZVtuXS5sZW5ndGggLSAxXVswXSkKCQkJfQoKCQkJZnVuY3Rpb24gZChlKSB7CgkJCQlmb3IgKHZhciB0IGluIEJlKQoJCQkJCWlmIChlLmluZGV4T2YodCkgPiAtMSkgcmV0dXJuIEJlW3RdOwoJCQkJZm9yICh2YXIgdCBpbiBqZSkKCQkJCQlpZiAoZS5pbmRleE9mKHQpID4gLTEpIHJldHVybiB2b2lkIGModCk7CgkJCQlyZXR1cm4gITEKCQkJfQoKCQkJZnVuY3Rpb24gcChlLCB0KSB7CgkJCQlzd2l0Y2ggKGUpIHsKCQkJCQljYXNlICLnlLfoo4UiOgoJCQkJCQlyZXR1cm4ga2Uuc2hhbmd5aVt0XS5tYW47CgkJCQkJY2FzZSAi5aWz6KOFIjoKCQkJCQkJcmV0dXJuIGtlLnNoYW5neWlbdF0ud29tYW47CgkJCQkJY2FzZSAi56ul6KOFIjoKCQkJCQkJcmV0dXJuIGtlLmtpZHNjbG90aFt0XTsKCQkJCQljYXNlICLnlLfpnosiOgoJCQkJCQlyZXR1cm4ga2Uuc2hvZXMubWFuOwoJCQkJCWNhc2UgIuWls+meiyI6CgkJCQkJCXJldHVybiBrZS5zaG9lcy53b21hbjsKCQkJCQljYXNlICLnq6XpnosiOgoJCQkJCQlyZXR1cm4ga2Uuc2hvZXMua2lkcwoJCQkJfQoJCQl9CgoJCQlmdW5jdGlvbiBoKCkgewoJCQkJZm9yICh2YXIgZSA9IDA7IGUgPCBDZS5sZW5ndGg7IGUrKykKCQkJCQlmb3IgKHZhciB0ID0gQ2VbZV0sIG4gPSBpKHQpLmxlbmd0aCwgYSA9IG4gLSAxOyBhID49IDA7IGEtLSkgewoJCQkJCQl2YXIgbyA9IGkodCkuZXEoYSkudGV4dCgpLnRvTG93ZXJDYXNlKCksCgkJCQkJCQlyID0gZChvKTsKCQkJCQkJaWYgKHIpIHJldHVybiB2b2lkIGwocikKCQkJCQl9CgkJCX0KCgkJCWZ1bmN0aW9uIHUoKSB7CgkJCQlpZiAoLTEgPT0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoImNocm9tZSIpICYmIChpKCIjZ3dkX2h0X21haW4iKS5hZGRDbGFzcygiaWVfaGFjayIpLCBpKCIjdHJhbnNwb3J0X2RldGFpbCIpLmFkZENsYXNzKCJpZV9oYWNrIiksIGkoIiNzaXplX2RldGFpbCIpLmFkZENsYXNzKCJpZV9oYWNrIikpLCAid3d3LjZwbS5jb20iID09IHJlKSB7CgkJCQkJdmFyIGUgPSBpKCIjZ3dkX2h0X21haW4iKS5wYXJlbnQoKS5vdXRlcldpZHRoKCksCgkJCQkJCXQgPSBlIC0gMzU1OwoJCQkJCWkoIiNnd2RfaHRfbWFpbiIpLmNzcygibWFyZ2luLWxlZnQiLCB0IC8gMiArICJweCIpCgkJCQl9CgkJCX0KCgkJCWZ1bmN0aW9uIG0oKSB7CgkJCQlyZXR1cm4gInd3dy42cG0uY29tIiA9PSByZSA/ICJ6aXlpbmciIDogaSgiI21lcmNoYW50LWluZm8iKS5sZW5ndGggPiAwID8gInd3dy5hbWF6b24uY29tIiA9PSByZSA/IGkoIiNtZXJjaGFudC1pbmZvIikudGV4dCgpLmluZGV4T2YoInNvbGQgYnkgQW1hem9uIikgPiAtMSA/ICJ6aXlpbmciIDogInNhbmZhbmciIDogInd3dy5hbWF6b24uY28uanAiID09IHJlID8gaSgiI21lcmNoYW50LWluZm8iKS50ZXh0KCkuaW5kZXhPZigianAg44GM6LKp5aOyIikgPiAtMSA/ICJ6aXlpbmciIDogInNhbmZhbmciIDogInd3dy5hbWF6b24uZGUiID09IHJlID8gaSgiI21lcmNoYW50LWluZm8iKS50ZXh0KCkuaW5kZXhPZigiVmVya2F1ZiB1bmQgVmVyc2FuZCBkdXJjaCBBbWF6b24iKSA+IC0xID8gInppeWluZyIgOiBpKCIjbWVyY2hhbnQtaW5mbyIpLnRleHQoKS5pbmRleE9mKCJEaXNwYXRjaGVkIGZyb20gYW5kIHNvbGQgYnkgQW1hem9uIikgPiAtMSA/ICJ6aXlpbmciIDogInNhbmZhbmciIDogdm9pZCAwIDogInNhbmZhbmciCgkJCX0KCgkJCWZ1bmN0aW9uIGYoKSB7CgkJCQlyZXR1cm4gInd3dy5hbWF6b24uZGUiID09IHJlID8gaSgiI2RkbVNoaXBwaW5nTWVzc2FnZSIpLnRleHQoKS5pbmRleE9mKCJEaWVzZXIgQXJ0aWtlbCBrYW5uIG5hY2giKSA+IC0xICYmIGkoIiNkZG1JbmxpbmVBZGRyZXNzSW5mbyIpLnRleHQoKS5pbmRleE9mKCJDaGluYSIpID4gLTEgPyAiemhpeW91IiA6ICJmZWl6aGl5b3UiIDogaSgnI2RldGFpbC1idWxsZXRzIC5jb250ZW50IHVsIGxpOmNvbnRhaW5zKCJJbnRlcm5hdGlvbmFsIFNoaXBwaW5nIiknKS5sZW5ndGggPiAwID8gInpoaXlvdSIgOiBpKCcuc2hpcHBpbmctcmVzdHJpY3Rpb25zIC5sYWJlbDpjb250YWlucygiSW50ZXJuYXRpb25hbCIpJykubGVuZ3RoID4gMCA/ICJ6aGl5b3UiIDogImZlaXpoaXlvdSIKCQkJfQoKCQkJZnVuY3Rpb24gZygpIHsKCQkJCW4oNDEpOwoJCQkJdmFyIGUsIGEsIG8gPSBuKDQ1KSwKCQkJCQlyID0gdWUuY29tcGlsZShvKSh7CgkJCQkJCWRhdGE6IHsKCQkJCQkJCXBhZ2VjbGFzczogXygpLAoJCQkJCQkJZ2V0cHJpY2U6IHooKSwKCQkJCQkJCXVuaXRfcHJpY2U6IGsoKSwKCQkJCQkJCXByb3R5cGU6IG0oKSwKCQkJCQkJCW1haWx0eXBlOiBmKCksCgkJCQkJCQloZV93ZWlnaHQ6IGIoKSwKCQkJCQkJCWhvc3RzOiByZSwKCQkJCQkJCXNpdGU6ICI2cG0iID09IHQuc2l0ZSA/ICI2UE0iIDogIuS6mumprOmAiiIsCgkJCQkJCQljX3NlcnZlcjogdC5jX3NlcnZlcgoJCQkJCQl9CgkJCQkJfSk7CgkJCQlhID0gemVbcmVdLmRvbTsKCQkJCWZvciAodmFyIHMgPSAwOyBzIDwgYS5sZW5ndGg7IHMrKykgaShhW3NdKS5sZW5ndGggPiAwICYmIChlID0gYVtzXSk7CgkJCQlpZiAoZSkgewoJCQkJCXN3aXRjaCAoemVbcmVdLnBvc2l0aW9uKSB7CgkJCQkJCWNhc2UgImJlZm9yZSI6CgkJCQkJCQlpKGUpLmJlZm9yZShyKTsKCQkJCQkJCWJyZWFrOwoJCQkJCQljYXNlICJhZnRlciI6CgkJCQkJCQlpKGUpLmFmdGVyKHIpCgkJCQkJfQoJCQkJCWdlKCJ0cmFjazpoYWl0YW86bWFpbiIpLCBfZS5sb2coIuaYvuekuua1t+a3mOS4u+eVjOmdoiIpCgkJCQl9CgkJCX0KCgkJCWZ1bmN0aW9uIF8oKSB7CgkJCQl2YXIgZSA9ICJodF8iICsgcmUuc3BsaXQoIi4iKVsxXTsKCQkJCXJldHVybiBlCgkJCX0KCgkJCWZ1bmN0aW9uIHgoKSB7CgkJCQl2YXIgZSA9IGxvY2F0aW9uLmhvc3Q7CgkJCQlmb3IgKHZhciB0IGluIHplKSB0ID09IGUgJiYgKHZlID0gemVbdF0uY291biwgcmUgPSB0KQoJCQl9CgoJCQlmdW5jdGlvbiB3KGUpIHsKCQkJCXZhciB0ID0gZS5tYXRjaCgvWzAtOV0rKD86XC58XCx8KSg/OlswLTldK3wpLyk7CgkJCQlyZXR1cm4gdCAmJiAodCA9IHRbMF0pLCAid3d3LmFtYXpvbi5kZSIgPT0gcmUgJiYgKHQgPSB0LnRvU3RyaW5nKCkucmVwbGFjZSgiLCIsICIuIikpLCB0CgkJCX0KCgkJCWZ1bmN0aW9uIHYoZSkgewoJCQkJc3dpdGNoIChyZSkgewoJCQkJCWNhc2UgInd3dy5hbWF6b24uY29tIjoKCQkJCQkJaWYgKGUuaW5kZXhPZigicG91bmRzIikgPiAtMSkgcmV0dXJuICJwb3VuZHMiOwoJCQkJCQlpZiAoZS5pbmRleE9mKCJvdW5jZXMiKSA+IC0xKSByZXR1cm4gIm91bmNlcyI7CgkJCQkJCWJyZWFrOwoJCQkJCWNhc2UgInd3dy5hbWF6b24uZGUiOgoJCQkJCQlpZiAoZS5pbmRleE9mKCJLZyIpID4gLTEpIHJldHVybiAia2ciOwoJCQkJCQlpZiAoZS5pbmRleE9mKCJnIikgPiAtMSkgcmV0dXJuICJnIjsKCQkJCQkJYnJlYWs7CgkJCQkJY2FzZSAid3d3LmFtYXpvbi5jby5qcCI6CgkJCQkJCWlmIChlLmluZGV4T2YoIktnIikgPiAtMSkgcmV0dXJuICJrZyI7CgkJCQkJCWlmIChlLmluZGV4T2YoImciKSA+IC0xKSByZXR1cm4gImciOwoJCQkJCQlicmVhazsKCQkJCQljYXNlICJ3d3cuNnBtLmNvbSI6CgkJCQkJCWlmIChlLmluZGV4T2YoImxiIikgPiAtMSAmJiBlLmluZGV4T2YoIm96IikgPiAtMSkgcmV0dXJuICJsYl9veiI7CgkJCQkJCWlmIChlLmluZGV4T2YoImxiIikgPiAtMSkgcmV0dXJuICJwb3VuZHMiOwoJCQkJCQlpZiAoZS5pbmRleE9mKCJveiIpID4gLTEpIHJldHVybiAib3VuY2VzIgoJCQkJfQoJCQl9CgoJCQlmdW5jdGlvbiBiKGUpIHsKCQkJCWlmICh3ZS53ZWlnaHQgJiYgIWUpIHJldHVybiB3ZS53ZWlnaHQ7CgkJCQlmb3IgKHZhciB0ID0gMCwgbiA9IFNlW3JlXSwgYSA9IG4ubGVuZ3RoLCBvID0gMDsgYSA+IG87IG8rKykgewoJCQkJCXZhciByID0gaShuW29dKS50ZXh0KCk7CgkJCQkJaWYgKCIiICE9IHIpIHsKCQkJCQkJdmFyIHMgPSB2KHIpOwoJCQkJCQlpZiAoImxiX296IiA9PSBzKSB7CgkJCQkJCQl2YXIgbCA9IHIubWF0Y2goL1swLTldKy9nKTsKCQkJCQkJCXJldHVybiB0ID0gTWF0aC5yb3VuZCgxMDAgKiAoeWUucG91bmRzIC8gMWUzICogcGFyc2VJbnQobFswXSkgKyB5ZS5vdW5jZXMgLyAxZTMgKiBwYXJzZUludChsWzFdKSkpIC8gMTAwLCB3ZS53ZWlnaHQgPSB0LCB0CgkJCQkJCX0KCQkJCQkJaWYgKCIiICE9IHMpIHJldHVybiB0ID0gTWF0aC5yb3VuZCh5ZVtzXSAvIDFlMyAqIHcocikgKiAxMDApIC8gMTAwLCAwID09PSB0IHx8IHQgfHwgKHQgPSAwKSwgd2Uud2VpZ2h0ID0gdCwgdAoJCQkJCX0KCQkJCX0KCQkJfQoKCQkJZnVuY3Rpb24geShlKSB7CgkJCQl2YXIgdCA9IGIoZSk7CgkJCQlpZiAodCAmJiAwICE9IHQpIHsKCQkJCQllICYmIGkoIi5odF93ZWlnaHRfbnVtIikudmFsKHQpOwoJCQkJCXZhciBuID0gQSh0KSwKCQkJCQkJYSA9IGkoIiN0cmFuc19saXN0IGxpIC50cmFuc19jb20iKS5lcShuLm1pbmluZGV4KS50ZXh0KCk7CgkJCQkJIiIgIT0gYSAmJiA5OTk5OTk5OSAhPSBuLm1pbnByaWNlICYmIChpKCIuaHRfZnJlaWdodF9udW0iKS50ZXh0KCLCpSIgKyBuLm1pbnByaWNlKSwgaSgiLmh0X3RyYW5zcG9ydF9idG4gc3BhbiIpLnRleHQoYSkpCgkJCQl9CgkJCX0KCgkJCWZ1bmN0aW9uIGsoKSB7CgkJCQlyZXR1cm4gdC5kcC5wcmljZSB8fCAiMCIKCQkJfQoKCQkJZnVuY3Rpb24geihlKSB7CgkJCQl2YXIgdCA9IDA7CgkJCQl0ID0gZSA/IGUgOiBrKCk7CgkJCQl2YXIgbiA9IGkoIi5odF9mcmVpZ2h0X251bSIpLnRleHQoKS5tYXRjaCgvWzAtOS5dKy8pOwoJCQkJbiAmJiAobiA9IG5bMF0pOwoJCQkJdmFyIGEgPSBpKCIuaHRfdGFyaWZmIC5odF90YXJpZmZfbnVtIGVtIikudGV4dCgpLm1hdGNoKC9bMC05Ll0rLyk7CgkJCQlyZXR1cm4gYSAmJiAoYSA9IGFbMF0pLCBpKCIuaHRfdGFyaWZmIC5odF90YXJpZmZfbnVtIikgJiYgIjAiID09IGkoIi5odF90YXJpZmYgLmh0X3RhcmlmZl9udW0iKS5hdHRyKCJkYXRhLXByaWNlIikgJiYgKGEgPSAwKSwgYSB8fCAoYSA9IDApLCBuIHx8IChuID0gMCksIHQgPSBOdW1iZXIoKE51bWJlcih0KSArIE51bWJlcihuKSArIE51bWJlcihhKSkudG9Mb2NhbGVTdHJpbmcoKS5yZXBsYWNlKC8sL2csICIiKSksIHQudG9TdHJpbmcoKS5tYXRjaCgvXC5cZHszfS8pICYmICh0ID0gdC50b1N0cmluZygpLnJlcGxhY2UoLyhcLlxkezJ9KVxkKy8sICIkMSIpKSwgdAoJCQl9CgoJCQlmdW5jdGlvbiBCKCkgewoJCQkJc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IG0oKTsKCQkJCQlpKCIucHJvX3R5cGUgZW0iKS5hdHRyKCJjbGFzcyIsIGUpLCAieml5aW5nIiA9PSBlID8gKGkoIi5wcm9fdHlwZSAucHJvX3RfdGxlIikudGV4dCgi6Ieq6JClIiksIGkoIi5wcm9fdHlwZV9kZXRhaWwiKS50ZXh0KCgiNnBtIiA9PSB0LnNpdGUgPyAiNlBNIiA6ICLkuprpqazpgIoiKSArICLnm7TmjqXplIDllK7jgIIiKSkgOiAoaSgiLnByb190eXBlIC5wcm9fdF90bGUiKS50ZXh0KCLnrKzkuInmlrkiKSwgaSgiLnByb190eXBlX2RldGFpbCIpLnRleHQoKCI2cG0iID09IHQuc2l0ZSA/ICI2UE0iIDogIuS6mumprOmAiiIpICsgIuesrOS4ieaWueWVhuWutumUgOWUruOAgiIpKQoJCQkJfSwgMWUzKQoJCQl9CgoJCQlmdW5jdGlvbiBqKCkgewoJCQkJdmFyIGUgPSAiI3ByaWNlYmxvY2tfb3VycHJpY2UiLAoJCQkJCW4gPSAicHJpY2VfZmVhdHVyZV9kaXYiOwoJCQkJIjZwbSIgPT0gdC5zaXRlICYmIChlID0gIiNwcmljZVNsb3QgLnByaWNlIiwgbiA9ICJwcm9kdWN0Rm9ybSIpOwoJCQkJdmFyIGEgPSBpKGUpLnRleHQoKSwKCQkJCQlvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobik7CgkJCQlvICYmIG8uYWRkRXZlbnRMaXN0ZW5lciAmJiBvLmFkZEV2ZW50TGlzdGVuZXIoIkRPTVN1YnRyZWVNb2RpZmllZCIsIGZ1bmN0aW9uKCkgewoJCQkJCXZhciB0ID0gaShlKS50ZXh0KCk7CgkJCQkJdCAhPSBhICYmIHQgJiYgKGEgPSB0LCB0ID0gbWUodCksIGkoIi5odF9jb250ZW50IC5wcmljZV9udW0iKS50ZXh0KCLCpSIgKyB0KSwgQyh0KSwgQigpLCBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCQl5KCEwKQoJCQkJCX0sIDgwMCkpCgkJCQl9LCAhMSkKCQkJfQoKCQkJZnVuY3Rpb24gQyhlKSB7CgkJCQl2YXIgdCA9ICLCpSIgKyB6KGUpOwoJCQkJaSgiLmh0X2dldHByaWNlX251bSIpLnRleHQodCkKCQkJfQoKCQkJZnVuY3Rpb24gUygpIHsKCQkJCXZhciBlID0gKGkod2luZG93KS53aWR0aCgpIC0gNTk1KSAvIDIsCgkJCQkJdCA9IChpKHdpbmRvdykuaGVpZ2h0KCkgLSA0MjApIC8gMjsKCQkJCXJldHVybiB7CgkJCQkJcG9zeDogZSwKCQkJCQlwb3N5OiB0CgkJCQl9CgkJCX0KCgkJCWZ1bmN0aW9uIE4oKSB7CgkJCQl2YXIgZSA9IG4oNDYpOwoJCQkJaSgiYm9keSIpLmFwcGVuZCh1ZS5jb21waWxlKGUpKHsKCQkJCQlwb3M6IFMoKQoJCQkJfSkpCgkJCX0KCgkJCWZ1bmN0aW9uIFQoKSB7CgkJCQl2YXIgZSA9IG4oNDcpOwoJCQkJaSgiYm9keSIpLmFwcGVuZCh1ZS5jb21waWxlKGUpKHsKCQkJCQlwb3M6IFMoKSwKCQkJCQlodF93ZWlnaHQ6IGIoKSwKCQkJCQljX3NlcnZlcjogdC5jX3NlcnZlcgoJCQkJfSkpCgkJCX0KCgkJCWZ1bmN0aW9uIFAoZSwgbikgewoJCQkJdmFyIGEgPSAnPGltZyBzcmM9Imh0dHA6Ly9zMS4nICsgdC5leHROYW1lICsgJy5jb20vaW1hZ2VzL2V4dGVuc2lvbnMve3tpbWd1cmx9fSI+JzsKCQkJCWkoIi5zaXplX3MiKS5lbXB0eSgpLmFwcGVuZCh1ZS5jb21waWxlKGEpKHsKCQkJCQlpbWd1cmw6IGUKCQkJCX0pKSwgaSgiLnNpemVfaXRlbV9pbWciKS5lbXB0eSgpLmFwcGVuZCh1ZS5jb21waWxlKGEpKHsKCQkJCQlpbWd1cmw6IG4KCQkJCX0pKQoJCQl9CgoJCQlmdW5jdGlvbiBJKGUpIHsKCQkJCWlmICghaGUpIHJldHVybiBudWxsOwoJCQkJZm9yICh2YXIgdCA9IGhlW3ZlXSwgbiA9IDA7IG4gPCB0Lmxlbmd0aDsgbisrKQoJCQkJCWlmIChlID09PSB0W25dLnNob3BJZCAmJiB0W25dLmFzY2UpIHsKCQkJCQkJdmFyIGkgPSB0W25dLmFzY2VhcnIsCgkJCQkJCQlhID0gdFtuXS5jdXJyZW50OwoJCQkJCQlyZXR1cm4gewoJCQkJCQkJYXNjZWFycjogaSwKCQkJCQkJCWN1cnJlbnQ6IGEKCQkJCQkJfQoJCQkJCX0KCQkJfQoKCQkJZnVuY3Rpb24gQShlKSB7CgkJCQlmb3IgKHZhciB0ID0gOTk5OTk5OTksIG4gPSAwLCBhID0gaSgiI3RyYW5zX2xpc3QgbGkgLnRyYW5zX3ByIiksIG8gPSBpKGEpLmxlbmd0aCwgciA9IDA7IG8gPiByOyByKyspIHsKCQkJCQl2YXIgcyA9IE51bWJlcihpKGEpLmVxKHIpLmF0dHIoImRhdGEtZnAiKSksCgkJCQkJCWwgPSBOdW1iZXIoaShhKS5lcShyKS5hdHRyKCJkYXRhLWZ3IikpLAoJCQkJCQljID0gTnVtYmVyKGkoYSkuZXEocikuYXR0cigiZGF0YS1zdyIpKSwKCQkJCQkJZCA9IE51bWJlcihpKGEpLmVxKHIpLmF0dHIoImRhdGEtc3AiKSksCgkJCQkJCXAgPSBpKGEpLmVxKHIpLmF0dHIoImRhdGEtc2hvcG5hbWUiKTsKCQkJCQlpZiAocCkgewoJCQkJCQl2YXIgaCA9IEkocCk7CgkJCQkJCWlmICghaCkgcmV0dXJuOwoJCQkJCQl2YXIgdSA9IE8oZSwgaC5hc2NlYXJyLCBoLmN1cnJlbnQpCgkJCQkJfSBlbHNlIHZhciB1ID0gRShlLCBbcywgbCwgZCwgY10pOwoJCQkJCTAgPT0gciAmJiAodCA9IHUpLCBpKGEpLmVxKHIpLnRleHQoIu+/pSIgKyB1KQoJCQkJfQoJCQkJcmV0dXJuIHsKCQkJCQltaW5pbmRleDogbiwKCQkJCQltaW5wcmljZTogdAoJCQkJfQoJCQl9CgoJCQlmdW5jdGlvbiBxKCkgewoJCQkJdmFyIGUgPSBpKCIuZmlyc3RfeGlhbGEiKS52YWwoKSwKCQkJCQl0ID0gaSgiLnNlY29uZF94aWFsYSIpLnZhbCgpLAoJCQkJCW4gPSBpKCIjZmlyc3Rfc2l6ZSIpLnZhbCgpOwoJCQkJbiAmJiAobiA9IE51bWJlcihuKSk7CgkJCQl2YXIgYSA9IGJlW2VdLAoJCQkJCW8gPSBiZVt0XSwKCQkJCQlyID0gbiAqIGEgLyBvOwoJCQkJci50b1N0cmluZygpLmluZGV4T2YoIi4iKSA+IC0xICYmIChyID0gci50b0ZpeGVkKDIpKSwgaSgiI3NlY29uZF9zaXplIikudmFsKHIpCgkJCX0KCgkJCWZ1bmN0aW9uIEUoZSwgdCkgewoJCQkJdmFyIG4sIGkgPSB0WzBdLAoJCQkJCWEgPSB0WzFdLAoJCQkJCW8gPSB0WzJdLAoJCQkJCXIgPSB0WzNdLAoJCQkJCXMgPSAxOwoJCQkJaWYgKHIudG9TdHJpbmcoKS5pbmRleE9mKCIuIikgPiAtMSAmJiAocyA9IHIudG9TdHJpbmcoKS5tYXRjaCgvXC4oXGQrKS8pWzFdLmxlbmd0aCksICIwIiA9PSBpKSBuID0gZSAvIHIgKiBvOwoJCQkJZWxzZSBpZiAoYSA+PSBlKSBuID0gaTsKCQkJCWVsc2UgewoJCQkJCXZhciBsID0gZSAtIGEsCgkJCQkJCWMgPSAwOwoJCQkJCWMgPSBsICogTWF0aC5wb3coMTAsIHMpICUgKHIgKiBNYXRoLnBvdygxMCwgcykpID09IDAgPyBsIC8gciA6IHBhcnNlSW50KGwgLyByKSArIDE7CgkJCQkJdmFyIG4gPSBpICsgYyAqIG8KCQkJCX0KCQkJCXJldHVybiBOdW1iZXIobikudG9GaXhlZCgyKQoJCQl9CgoJCQlmdW5jdGlvbiBPKGUsIHQsIG4pIHsKCQkJCWUgPSBOdW1iZXIoZSk7CgkJCQlmb3IgKHZhciBpID0gMDsgaSA8IHQubGVuZ3RoOyBpKyspCgkJCQkJaWYgKHRbaV1bMF0gPiBlKSByZXR1cm4gMCA9PSBpID8gaSA9IDEgOiB0W2kgLSAxXVswXSA8IGUgJiYgKGkgKz0gMSksIG4gPyBtZSh0W2kgLSAxXVsxXSkudG9GaXhlZCgyKSA6IE51bWJlcih0W2kgLSAxXVsxXSkudG9GaXhlZCgyKTsKCQkJCXJldHVybiBlID4gdFt0Lmxlbmd0aCAtIDFdWzBdID8gbiA/IG1lKHRbdC5sZW5ndGggLSAxXVsxXSkudG9GaXhlZCgyKSA6IE51bWJlcih0W3QubGVuZ3RoIC0gMV1bMV0pLnRvRml4ZWQoMikgOiB2b2lkIDAKCQkJfQoKCQkJZnVuY3Rpb24gTCgpIHsKCQkJCWZvciAodmFyIGUsIHQsIG4sIGEsIG8sIHIgPSBOdW1iZXIoaSgiLmh0X3dlaWdodCAuaHRfd2VpZ2h0X251bSIpLnZhbCgpKSB8fCAwLCBzID0gaSgiLmh0X3RyYW5zcG9ydF9idG4gc3BhbiIpLmF0dHIoImRhdGEtdGl0bGUiKSwgbCA9IGhlW3ZlXSwgYyA9IDA7IGMgPCBsLmxlbmd0aDsgYysrKSBsW2NdLnNob3BuYW1lID09IHMgJiYgKGUgPSBsW2NdLmZpcnN0VywgdCA9IGxbY10ubmV4dFcsIG4gPSBsW2NdLmFzY2UsIGEgPSBsW2NdLmFzY2VhcnIsIG8gPSBsW2NdLmN1cnJlbnQpOwoJCQkJaWYgKG4pIHZhciBkID0gIsKlIiArIE8ociwgYSwgbyk7CgkJCQllbHNlIHZhciBkID0gIsKlIiArIEUociwgW2VbMV0sIGVbMF0sIHRbMV0sIHRbMF1dKTsKCQkJCWkoIi5odF9mcmVpZ2h0X251bSIpLnRleHQoZCkKCQkJfQoKCQkJZnVuY3Rpb24gRCgpIHsKCQkJCXZhciBlID0gaGVbdmVdLAoJCQkJCXQgPSAne3tlYWNoIGRhdGF9fVxuICAgICAgICAgICAgICA8bGkgY2xhc3M9Int7aWYgJGluZGV4JTI9PTF9fWxfb2Rke3svaWZ9fSI+XG4gICAgICAgICAgICAgICAgPGEgY2xhc3M9InRyYW5zX2NvbSIgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9Int7JHZhbHVlLnNob3BfdXJsfX0iID57eyR2YWx1ZS5zaG9wbmFtZX19PC9hPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJsb19jZW50ZXIiPnt7JHZhbHVlLndhcmVob3VzZX19PC9zcGFuPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0cmFuc19wciIge3tpZiAkdmFsdWUuYXNjZX19ZGF0YS1zaG9wbmFtZT0ie3skdmFsdWUuc2hvcElkfX0iIHt7L2lmfX0gZGF0YS1mdz0ie3skdmFsdWUuZmlyc3RXWzBdfX0iIGRhdGEtc3c9Int7JHZhbHVlLm5leHRXWzBdfX0iIGRhdGEtc3A9Int7JHZhbHVlLm5leHRXWzFdfX0iIGRhdGEtZnA9Int7JHZhbHVlLmZpcnN0V1sxXX19Ij57eyR2YWx1ZS5maXJzdFdbMV09PTA/IuaXoOmmlumHjSI6KCLvv6UiKyR2YWx1ZS5maXJzdFdbMV0pfX08L3NwYW4+XG4gICAgICAgICAgICAgICAge3tpZiAkdmFsdWUuY29vcGVyfX08c3BhbiBjbGFzcz0ic2FsZV90bGUiPjxhICBocmVmPSJ7eyR2YWx1ZS51cmx9fSIgdGFyZ2V0PSJfYmxhbmsiPnt7JHZhbHVlLnNhbGVfdGxlfX08L2E+PC9zcGFuPnt7L2lmfX1cbiAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgIHt7L2VhY2h9fSc7CgkJCQlpKCIjdHJhbnNfbGlzdCIpLmFwcGVuZCh1ZS5jb21waWxlKHQpKHsKCQkJCQlkYXRhOiBlCgkJCQl9KSksIE0oKSwgc2UgfHwgaSgiI3RyYW5zcG9ydF9kZXRhaWwiKS5hZGRDbGFzcygibm9fc2FsZSIpCgkJCX0KCgkJCWZ1bmN0aW9uIE0oKSB7CgkJCQl2YXIgZSA9IGhlW3ZlXTsKCQkJCWkoIiN0cmFuc19saXN0IGxpIC50cmFuc19wciIpLmVhY2goZnVuY3Rpb24odCwgbikgewoJCQkJCWlmICgi5peg6aaW6YeNIiA9PSBpKG4pLnRleHQoKSkKCQkJCQkJZm9yICh2YXIgYSA9IDA7IGEgPCBlLmxlbmd0aDsgYSsrKSBlW2FdLnNob3BJZCA9PT0gaShuKS5hdHRyKCJkYXRhLXNob3BuYW1lIikgJiYgKGVbYV0uY3VycmVudCA/IGkobikudGV4dCgi77+lIiArIE51bWJlcihtZShlW2FdLmFzY2VhcnJbMF1bMV0pKS50b0ZpeGVkKDIpKSA6IGkobikudGV4dCgi77+lIiArIE51bWJlcihlW2FdLmFzY2VhcnJbMF1bMV0pLnRvRml4ZWQoMikpKTsKCQkJCQllbHNlIHsKCQkJCQkJdmFyIG8gPSBpKG4pLnRleHQoKS5yZXBsYWNlKCLvv6UiLCAiIik7CgkJCQkJCW8gPSAi77+lIiArIE51bWJlcihvKS50b0ZpeGVkKDIpLCBpKG4pLnRleHQobykKCQkJCQl9CgkJCQl9KQoJCQl9CgoJCQlmdW5jdGlvbiBSKGUsIHQpIHsKCQkJCXJldHVybiAiTEIiID09IGUgJiYgKHQgPSAuNDUzNiAqIE51bWJlcih0KSksIHQKCQkJfQoKCQkJZnVuY3Rpb24gRigpIHsKCQkJCWkoIi50cmFuc193IGlucHV0Iikub24oImtleXVwIiwgZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSBOdW1iZXIoaSh0aGlzKS52YWwoKSksCgkJCQkJCXQgPSBpKCIudHJhbnNfdyBpbnB1dCsud2VpZ2h0X3R5cGUiKS50ZXh0KCksCgkJCQkJCW4gPSBSKHQsIGUpOwoJCQkJCTAgIT09IGUgJiYgKGUgPyBBKG4pIDogYWxlcnQoIuivt+i+k+WFpeaVsOWtl++8gSIpKQoJCQkJfSksIGkoIiN0cmFuc19saXN0IGxpIC5zYWxlX3RsZSBhIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJZ2UoImNsaWNrOmhhaXRhbzpzYWxlX3RsZSIpLCBfZS5sb2coIua1t+a3mOi9rOi/kOWVhuWutuS8mOaDoOaUv+etlueCueWHu+aDheWGtSIpCgkJCQl9KSwgaSgiI3RyYW5zX2xpc3QgbGkgLnRyYW5zX2NvbSIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCWdlKCJjbGljazpoYWl0YW86dHJhbnNfY29tIiksIF9lLmxvZygi5rW35reY6L2s6L+Q5ZWG5a62572R56uZ54K55Ye75oOF5Ya1IikKCQkJCX0pLCBpKCIjdHJhbnNfbGlzdCBsaSAubG9fY2VudGVyLCAjdHJhbnNfbGlzdCBsaSAudHJhbnNfcHIiKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IGkodGhpcykucGFyZW50KCkuZmluZCgiLnRyYW5zX2NvbSIpLnRleHQoKTsKCQkJCQlpKCIuaHRfdHJhbnNwb3J0X2J0biBzcGFuIikudGV4dChlLnNsaWNlKDAsIDUpKSwgaSgiLmh0X3RyYW5zcG9ydF9idG4gc3BhbiIpLmF0dHIoImRhdGEtdGl0bGUiLCBlKSwgTCgpLCBDKCksIGkoIiN0cmFuc3BvcnRfZGV0YWlsIikuaGlkZSgpCgkJCQl9KQoJCQl9CgoJCQlmdW5jdGlvbiAkKCkgewoJCQkJaSgiLmNsb3RoZXNfbmF2IGxpIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJaSgiLmNsb3RoZXNfbmF2IGxpIikucmVtb3ZlQ2xhc3MoInNlbGVjdCIpLCBpKHRoaXMpLmFkZENsYXNzKCJzZWxlY3QiKTsKCQkJCQl2YXIgZSA9IGkodGhpcykudGV4dCgpLAoJCQkJCQl0ID0gcChlLCB2ZSk7CgkJCQkJZS5pbmRleE9mKCLpnosiKSA+IC0xID8gKGkoIi51bml0X2NtIikuY3NzKCJkaXNwbGF5IiwgIm5vbmUiKSwgaSgiLnVuaXRfbW0iKS5jc3MoImRpc3BsYXkiLCAiaW5saW5lLWJsb2NrIiksIGkoIiNzaXplX2RldGFpbCAuZGV0YWlsX2xlZnQgc3BhbiIpLmhpZGUoKSwgaSgiLmNsb3RoX2ljb24iKS5jc3MoImRpc3BsYXkiLCAiaW5saW5lLWJsb2NrIiksIGkoIiNzaXplX2RldGFpbCAuc2hvZXMiKS5jc3MoImRpc3BsYXkiLCAiaW5saW5lLWJsb2NrIiksIGUuaW5kZXhPZigi55S36Z6LIikgPiAtMSA/IChpKCIuY2xvdGhfaWNvbiIpLmF0dHIoImNsYXNzIiwgIiIpLmFkZENsYXNzKCJjbG90aF9pY29uIGh0X3Nob2VzIG1hbl9mb290IiksIGkoIi5kZXRhaWxfbGVmdCAuc2hvZXMiKS50ZXh0KGUpKSA6IGUuaW5kZXhPZigi5aWz6Z6LIikgPiAtMSA/IChpKCIuY2xvdGhfaWNvbiIpLmF0dHIoImNsYXNzIiwgIiIpLmFkZENsYXNzKCJjbG90aF9pY29uIGh0X3Nob2VzIHdvbWFuX2Zvb3QiKSwgaSgiLmRldGFpbF9sZWZ0IC5zaG9lcyIpLnRleHQoZSkpIDogKGkoIiNzaXplX2RldGFpbCAuc2hvZXMiKS5oaWRlKCksIGkoIi5jbG90aF9pY29uIikuY3NzKCJkaXNwbGF5IiwgImlubGluZS1ibG9jayIpLCBpKCIudG9uZ3hpZSIpLmNzcygiZGlzcGxheSIsICJpbmxpbmUtYmxvY2siKSwgaSgiLnRvbmd4aWUwIikuYWRkQ2xhc3MoInNpemVfaG92ZXIiKSwgaSgiLnRvbmd4aWU0IikucmVtb3ZlQ2xhc3MoInNpemVfaG92ZXIiKSwgaSgiLmNsb3RoX2ljb24iKS5hdHRyKCJjbGFzcyIsICIiKS5hZGRDbGFzcygiY2xvdGhfaWNvbiBodF9zaG9lcyBraWRzX2Zvb3QiKSkpIDogZS5pbmRleE9mKCLnq6Xoo4UiKSA+IC0xID8gKGkoIi51bml0X21tIikuY3NzKCJkaXNwbGF5IiwgIm5vbmUiKSwgaSgiLnVuaXRfY20iKS5jc3MoImRpc3BsYXkiLCAiaW5saW5lLWJsb2NrIiksIGkoIiNzaXplX2RldGFpbCAuZGV0YWlsX2xlZnQgc3BhbiIpLmhpZGUoKSwgaSgiI3NpemVfZGV0YWlsIC50b25nemh1YW5nIikuY3NzKCJkaXNwbGF5IiwgImlubGluZS1ibG9jayIpLCBpKCIuY2xvdGhfaWNvbiIpLmNzcygiZGlzcGxheSIsICJpbmxpbmUtYmxvY2siKSwgaSgiLmNsb3RoX2ljb24iKS5hdHRyKCJjbGFzcyIsICIiKS5hZGRDbGFzcygiY2xvdGhfaWNvbiBraWQwIiksIGkoIi50b25nemh1YW5nMCIpLmFkZENsYXNzKCJzaXplX2hvdmVyIiksIGkoIi50b25nemh1YW5nNCIpLnJlbW92ZUNsYXNzKCJzaXplX2hvdmVyIikpIDogZS5pbmRleE9mKCLnlLfoo4UiKSA+IC0xID8gKGkoIi51bml0X21tIikuY3NzKCJkaXNwbGF5IiwgIm5vbmUiKSwgaSgiLnVuaXRfY20iKS5jc3MoImRpc3BsYXkiLCAiaW5saW5lLWJsb2NrIiksIGkoIiNzaXplX2RldGFpbCAuZGV0YWlsX2xlZnQgc3BhbiIpLmhpZGUoKSwgaSgiLmNsb3RoX2ljb24iKS5jc3MoImRpc3BsYXkiLCAiaW5saW5lLWJsb2NrIiksIGkoIiNzaXplX2RldGFpbCAuc2hhbmd5aSIpLnNob3coKSwgaSgiI3NpemVfZGV0YWlsIC54aWF6aHVhbmciKS5zaG93KCksIGkoIi54aWF6aHVhbmciKS5yZW1vdmVDbGFzcygic2l6ZV9ob3ZlciIpLCBpKCIuc2hhbmd5aSIpLmFkZENsYXNzKCJzaXplX2hvdmVyIiksIGkoIi5jbG90aF9pY29uIikuYXR0cigiY2xhc3MiLCAiIikuYWRkQ2xhc3MoImNsb3RoX2ljb24gbWFuc2hhbmd6aHVhbmciKSkgOiAoaSgiLnVuaXRfbW0iKS5jc3MoImRpc3BsYXkiLCAibm9uZSIpLCBpKCIudW5pdF9jbSIpLmNzcygiZGlzcGxheSIsICJpbmxpbmUtYmxvY2siKSwgaSgiI3NpemVfZGV0YWlsIC5kZXRhaWxfbGVmdCBzcGFuIikuaGlkZSgpLCBpKCIuY2xvdGhfaWNvbiIpLmNzcygiZGlzcGxheSIsICJpbmxpbmUtYmxvY2siKSwgaSgiI3NpemVfZGV0YWlsIC5zaGFuZ3lpIikuc2hvdygpLCBpKCIjc2l6ZV9kZXRhaWwgLnhpYXpodWFuZyIpLnNob3coKSwgaSgiLnhpYXpodWFuZyIpLnJlbW92ZUNsYXNzKCJzaXplX2hvdmVyIiksIGkoIi5zaGFuZ3lpIikuYWRkQ2xhc3MoInNpemVfaG92ZXIiKSwgZS5pbmRleE9mKCLnlLfoo4UiKSA+IC0xID8gaSgiLmNsb3RoX2ljb24iKS5hdHRyKCJjbGFzcyIsICIiKS5hZGRDbGFzcygiY2xvdGhfaWNvbiBtYW5zaGFuZ3podWFuZyIpIDogaSgiLmNsb3RoX2ljb24iKS5hdHRyKCJjbGFzcyIsICIiKS5hZGRDbGFzcygiY2xvdGhfaWNvbiB3b21hbnNoYW5nemh1YW5nIikpLCBQKHRbMF0sIHRbMV0pCgkJCQl9KSwgaSgiLnNoYW5neWkiKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQlpZiAoIShpKHRoaXMpLmF0dHIoImNsYXNzIikuaW5kZXhPZigic2l6ZV9ob3ZlciIpID4gLTEpKSB7CgkJCQkJCXZhciBlID0gaSgnLmNsb3RoZXNfbmF2IGxpW2NsYXNzPSJzZWxlY3QiXScpLnRleHQoKTsKCQkJCQkJaWYgKCLnq6Xoo4UiICE9IGUpIHsKCQkJCQkJCSLnlLfoo4UiID09IGUgJiYgaSgiLmNsb3RoX2ljb24iKS5hdHRyKCJjbGFzcyIsICIiKS5hZGRDbGFzcygiY2xvdGhfaWNvbiBtYW5zaGFuZ3podWFuZyIpLCAi5aWz6KOFIiA9PSBlICYmIGkoIi5jbG90aF9pY29uIikuYXR0cigiY2xhc3MiLCAiIikuYWRkQ2xhc3MoImNsb3RoX2ljb24gd29tYW5zaGFuZ3podWFuZyIpOwoJCQkJCQkJdmFyIHQgPSBwKGUsIHZlKTsKCQkJCQkJCVAodFswXSwgdFsxXSksIGkodGhpcykuYWRkQ2xhc3MoInNpemVfaG92ZXIiKSwgaSgiLnhpYXpodWFuZyIpLnJlbW92ZUNsYXNzKCJzaXplX2hvdmVyIikKCQkJCQkJfQoJCQkJCX0KCQkJCX0pLCBpKCIueGlhemh1YW5nIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJaWYgKCEoaSh0aGlzKS5hdHRyKCJjbGFzcyIpLmluZGV4T2YoInNpemVfaG92ZXIiKSA+IC0xKSkgewoJCQkJCQl2YXIgZSA9IGkoJy5jbG90aGVzX25hdiBsaVtjbGFzcz0ic2VsZWN0Il0nKS50ZXh0KCk7CgkJCQkJCWlmICgi56ul6KOFIiAhPSBlKSB7CgkJCQkJCQlpZiAoIueUt+ijhSIgPT0gZSkgewoJCQkJCQkJCXZhciB0ID0ga2UueGlhemh1YW5nW3ZlXS5tYW47CgkJCQkJCQkJUCh0WzBdLCB0WzFdKSwgaSgiLmNsb3RoX2ljb24iKS5hdHRyKCJjbGFzcyIsICIiKS5hZGRDbGFzcygiY2xvdGhfaWNvbiBtYW54aWF6aHVhbmciKQoJCQkJCQkJfQoJCQkJCQkJaWYgKCLlpbPoo4UiID09IGUpIHsKCQkJCQkJCQl2YXIgdCA9IGtlLnhpYXpodWFuZ1t2ZV0ud29tYW47CgkJCQkJCQkJUCh0WzBdLCB0WzFdKSwgaSgiLmNsb3RoX2ljb24iKS5hdHRyKCJjbGFzcyIsICIiKS5hZGRDbGFzcygiY2xvdGhfaWNvbiB3b21hbnhpYXpodWFuZyIpCgkJCQkJCQl9CgkJCQkJCQlpKHRoaXMpLmFkZENsYXNzKCJzaXplX2hvdmVyIiksIGkoIi5zaGFuZ3lpIikucmVtb3ZlQ2xhc3MoInNpemVfaG92ZXIiKQoJCQkJCQl9CgkJCQkJfQoJCQkJfSksIGkoIi50b25nemh1YW5nMCIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gcCgi56ul6KOFIiwgdmUpOwoJCQkJCVAoZVswXSwgZVsxXSksIGkodGhpcykuYWRkQ2xhc3MoInNpemVfaG92ZXIiKSwgaSgiLnRvbmd6aHVhbmc0IikucmVtb3ZlQ2xhc3MoInNpemVfaG92ZXIiKSwgaSgiLmNsb3RoX2ljb24iKS5hdHRyKCJjbGFzcyIsICIiKS5hZGRDbGFzcygiY2xvdGhfaWNvbiBraWQwIikKCQkJCX0pLCBpKCIudG9uZ3podWFuZzQiKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IHAoIuerpeijhSIsIHZlKTsKCQkJCQlQKGVbMF0sIGVbMl0pLCBpKHRoaXMpLmFkZENsYXNzKCJzaXplX2hvdmVyIiksIGkoIi50b25nemh1YW5nMCIpLnJlbW92ZUNsYXNzKCJzaXplX2hvdmVyIiksIGkoIi5jbG90aF9pY29uIikuYXR0cigiY2xhc3MiLCAiIikuYWRkQ2xhc3MoImNsb3RoX2ljb24ga2lkNCIpCgkJCQl9KSwgaSgiLnRvbmd4aWUwIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSBwKCLnq6XpnosiLCB2ZSk7CgkJCQkJUChlWzBdLCBlWzFdKSwgaSh0aGlzKS5hZGRDbGFzcygic2l6ZV9ob3ZlciIpLCBpKCIudG9uZ3hpZTQiKS5yZW1vdmVDbGFzcygic2l6ZV9ob3ZlciIpCgkJCQl9KSwgaSgiLnRvbmd4aWU0Iikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSBwKCLnq6XpnosiLCB2ZSk7CgkJCQkJUChlWzBdLCBlWzJdKSwgaSh0aGlzKS5hZGRDbGFzcygic2l6ZV9ob3ZlciIpLCBpKCIudG9uZ3hpZTAiKS5yZW1vdmVDbGFzcygic2l6ZV9ob3ZlciIpCgkJCQl9KQoJCQl9CgoJCQlmdW5jdGlvbiBXKCkgewoJCQkJdmFyIGUgPSB0LmNvbGxlY3RJbmZvOwoJCQkJaWYgKCIiID09IGUuZHBfaWQpIHJldHVybiBpKCIjaHRfYWRkY29sbGVjdCIpLnRleHQoIuaaguS4jeaUr+aMgSIpLCB2b2lkIGkoIiNodF9hZGRjb2xsZWN0IikudW5iaW5kKCJjbGljayIpOwoJCQkJaSgiI2h0X2FkZGNvbGxlY3QiKS50ZXh0KCLmraPlnKjmt7vliqAiKSwgaSgiI2h0X2FkZGNvbGxlY3QiKS5hZGRDbGFzcygiY19hZGRpbmciKSwgIiIgIT0gZS50aXRsZSAmJiBlLnRpdGxlIHx8IChlLnRpdGxlID0gdC5kcC5uYW1lIHx8IGkoInRpdGxlIikudGV4dCgpKSwgIiIgIT0gZS5wcmljZSAmJiBlLnByaWNlIHx8IChlLnByaWNlID0gdC5kcC5wcmljZSk7CgkJCQl2YXIgbiA9IHQuY19zZXJ2ZXIgKyAiL2NvbGxlY3QvYWpfYWRkP2RwX2lkPSAiICsgZS5kcF9pZCArICImdXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQoZS51cmwgfHwgdC5kcC51cmwpICsgIiZpbWc9IiArIGVuY29kZVVSSUNvbXBvbmVudChlLmltZyB8fCB0LmRwLmltZykgKyAiJnRpdGxlPSIgKyBlbmNvZGVVUklDb21wb25lbnQoZS50aXRsZSkgKyAiJnByaWNlPSIgKyBlLnByaWNlICsgIiZzaXRlX2lkPSIgKyBlLnNpdGVfaWQgKyAiJmNhdF9pZD0iICsgdC5kcC5jYXRfaWQ7CgkJCQlOZShuLCBmdW5jdGlvbihlKSB7CgkJCQkJaWYgKDEwMCA9PSBlLmNvZGUgfHwgZS5jb2RlIDw9IDApIHsKCQkJCQkJdmFyIG4gPSB3aW5kb3cubG9jYXRpb24uaHJlZi50b1N0cmluZygpOwoJCQkJCQluICs9IG4uaW5kZXhPZigiPyIpID4gLTEgPyAiJmd3ZF9hZGRfZmF2b3JfdW5pcXVlPXRydWUiIDogIj9nd2RfYWRkX2Zhdm9yX3VuaXF1ZT10cnVlIiwgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB0LmNfc2VydmVyICsgIi91c2VyL2xvZ2luP2Zyb21fdXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQobikKCQkJCQl9IGVsc2UgMSA9PSBlLmNvZGUgPyAoaSgiI2h0X2FkZGNvbGxlY3QiKS50ZXh0KCLlt7Lmt7vliqAiKSwgaSgiI2h0X2FkZGNvbGxlY3QiKS5yZW1vdmVDbGFzcygiY19hZGRpbmciKSwgaSgiI2h0X2FkZGNvbGxlY3QiKS5hZGRDbGFzcygiY19hZGRlZCIpLCBpKCIjaHRfYWRkY29sbGVjdCIpLnVuYmluZCgiY2xpY2siKSkgOiAyID09IGUuY29kZSAmJiAoaSgiI2h0X2FkZGNvbGxlY3QiKS50ZXh0KCLmt7vliqDov4fkuoYiKSwgaSgiI2h0X2FkZGNvbGxlY3QiKS5yZW1vdmVDbGFzcygiY19hZGRpbmciKSwgaSgiI2h0X2FkZGNvbGxlY3QiKS5hZGRDbGFzcygiY19hZGRlZCIpLCBpKCIjaHRfYWRkY29sbGVjdCIpLnVuYmluZCgiY2xpY2siKSkKCQkJCX0pCgkJCX0KCgkJCWZ1bmN0aW9uIEgoKSB7CgkJCQlpKCIuaHRfaGVhZCAuaHRfZ2V0cHJpY2UiKS5vbigibW91c2VlbnRlciIsIGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gaSgiI2h0X2NvbnRlbnRfaW5mbyIpOwoJCQkJCWUuaXMoIjp2aXNpYmxlIikgfHwgKGkoIi5jb250ZW50X2RlZmF1bHQiKS5oaWRlKCksIGUuc2hvdygpKQoJCQkJfSksIGkoIi5jbG9zZWJhciIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCWkodGhpcykucGFyZW50KCkuaGlkZSgpCgkJCQl9KSwgaSgiLmNvbnRlbnRfZGVmYXVsdF9sZWZ0IC5odF90YXJpZmYgLmRlbF9saW5lIikub24oIm1vdXNlZW50ZXIiLCBmdW5jdGlvbigpIHsKCQkJCQlpKCIudGFyaWZmX3JlbWluZF9kZXRhaWwiKS5zaG93KCkKCQkJCX0pLCBpKCIuY29udGVudF9kZWZhdWx0X2xlZnQgLmh0X3RhcmlmZiAuZGVsX2xpbmUiKS5vbigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uKCkgewoJCQkJCWkoIi50YXJpZmZfcmVtaW5kX2RldGFpbCIpLmhpZGUoKQoJCQkJfSksIGkoIi5odF90cmFuc2xhdGUiKS5vbigibW91c2VlbnRlciIsIGZ1bmN0aW9uKCkgewoJCQkJCWkoIi50cmFuc2xhdGVfZGV0YWlsIikuc2hvdygpCgkJCQl9KSwgaSgiLmh0X3RyYW5zbGF0ZSIpLm9uKCJtb3VzZWxlYXZlIiwgZnVuY3Rpb24oKSB7CgkJCQkJaSgiLnRyYW5zbGF0ZV9kZXRhaWwiKS5oaWRlKCkKCQkJCX0pLCBpKCIucHJvX3R5cGUiKS5vbigibW91c2VlbnRlciIsIGZ1bmN0aW9uKCkgewoJCQkJCWkoIi5wcm9fdHlwZV9kZXRhaWwiKS5zaG93KCkKCQkJCX0pLm9uKCJtb3VzZWxlYXZlIiwgZnVuY3Rpb24oKSB7CgkJCQkJaSgiLnByb190eXBlX2RldGFpbCIpLmhpZGUoKQoJCQkJfSksIGkoIi5tYWlsX3R5cGUiKS5vbigibW91c2VlbnRlciIsIGZ1bmN0aW9uKCkgewoJCQkJCWkoIi5tYWlsX3R5cGVfZGV0YWlsIikuc2hvdygpCgkJCQl9KS5vbigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uKCkgewoJCQkJCWkoIi5tYWlsX3R5cGVfZGV0YWlsIikuaGlkZSgpCgkJCQl9KSwgaSgiLmh0X3RyYW5zcG9ydF9idG4sIC5zaXplX2hlbHAsIC5odF90YXJpZmZfYnRuLCAjaHRfYWRkY29sbGVjdCIpLm9uKCJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7CgkJCQkJaSh0aGlzKS5maW5kKCIuZGl2X2RldGFpbCIpLnNob3coKQoJCQkJfSkub24oIm1vdXNlbGVhdmUiLCBmdW5jdGlvbigpIHsKCQkJCQlpKHRoaXMpLmZpbmQoIi5kaXZfZGV0YWlsIikuaGlkZSgpCgkJCQl9KSwgaSgiLndlaWdodF90eXBlIikub24oIm1vdXNlZW50ZXIiLCBmdW5jdGlvbigpIHsKCQkJCQlpKCIud2VpZ2h0X3R5cGVfZGV0YWlsIikuc2hvdygpCgkJCQl9KS5vbigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uKCkgewoJCQkJCWkoIi53ZWlnaHRfdHlwZV9kZXRhaWwiKS5oaWRlKCkKCQkJCX0pLCBpKCIjaHRfYWRkY29sbGVjdCIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgbiA9IGkoIiNhbHRJbWFnZXMgbGkgaW1nIikuZXEoMCk7CgkJCQkJbiAmJiAodC5jb2xsZWN0SW5mby5pbWcgPSBuLmF0dHIoInNyYyIpKSwgZS5wcmV2ZW50RGVmYXVsdCgpLCBXKCkKCQkJCX0pLCBpKCIuaHRfd2VpZ2h0IC53ZWlnaHRfdHlwZSIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gaSh0aGlzKS50ZXh0KCk7CgkJCQkJIkxCIiA9PT0gZSA/IChvZSA9IGkoIi5odF93ZWlnaHRfbnVtIikudmFsKCksIGkodGhpcykudGV4dCgiS0ciKSwgaSgiLmh0X3dlaWdodF9udW0iKS52YWwoTWF0aC5yb3VuZCguNDUzNTkyNCAqIE51bWJlcihvZSkgKiAxMDApIC8gMTAwKSkgOiAoaSh0aGlzKS50ZXh0KCJMQiIpLCBvZSAmJiBpKCIuaHRfd2VpZ2h0X251bSIpLnZhbChvZSkpCgkJCQl9KSwgaSgiLmRlbF9saW5lIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJIjEiID09PSBpKHRoaXMpLmF0dHIoImRhdGEtZGVsIikgPyAoaSh0aGlzKS5maW5kKCIuaHRfdGFyaWZmX251bSIpLmNzcygidGV4dC1kZWNvcmF0aW9uIiwgIm5vbmUiKSwgaSh0aGlzKS5hdHRyKCJkYXRhLWRlbCIsICIwIiksIGkodGhpcykuZmluZCgic3BhbiIpLmF0dHIoImRhdGEtcHJpY2UiLCBpKHRoaXMpLmZpbmQoInNwYW4iKS50ZXh0KCkpLCBDKCkpIDogKGkodGhpcykuZmluZCgiLmh0X3RhcmlmZl9udW0iKS5jc3MoInRleHQtZGVjb3JhdGlvbiIsICJsaW5lLXRocm91Z2giKSwgaSh0aGlzKS5hdHRyKCJkYXRhLWRlbCIsICIxIiksIGkodGhpcykuZmluZCgic3BhbiIpLmF0dHIoImRhdGEtcHJpY2UiLCAwKSwgQygpKQoJCQkJfSksIGkoIi5odF90cmFuc3BvcnRfYnRuIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJaSgiI3RyYW5zcG9ydF9kZXRhaWwiKS5zaG93KCksIGdlKCJjbGljazpoYWl0YW86dHJhbnNwb3J0IiksIF9lLmxvZygi5rW35reY6L2s6L+Q5ZWG5a6254K55Ye75oOF5Ya1IikKCQkJCX0pLCBpKCIuc2l6ZV9oZWxwIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJaSgiI3NpemVfZGV0YWlsIikuc2hvdygpLCBnZSgiY2xpY2s6aGFpdGFvOnNpemVfaGVscCIpLCBfZS5sb2coIueCueWHu+WwuueggeW4ruWKqSIpCgkJCQl9KSwgaSgiLnNpemVfeGlhbGEiKS5vbigibW91c2VlbnRlciIsIGZ1bmN0aW9uKCkgewoJCQkJCWkodGhpcykubmV4dCgiLnNpemVfeGlhbGFib3giKS5zaG93KCksIGkodGhpcykuYWRkQ2xhc3MoIm1zSG92ZXIiKQoJCQkJfSksIGkoIi5zaXplX3hpYWxhIikub24oIm1vdXNlbGVhdmUiLCBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IHRoaXM7CgkJCQkJaWUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCQlpKGUpLm5leHQoIi5zaXplX3hpYWxhYm94IikuaGlkZSgpLCBpKGUpLnJlbW92ZUNsYXNzKCJtc0hvdmVyIikKCQkJCQl9LCAxMDApCgkJCQl9KSwgaSgiLnNpemVfeGlhbGFib3giKS5vbigibW91c2VlbnRlciIsIGZ1bmN0aW9uKCkgewoJCQkJCWNsZWFyVGltZW91dChpZSkKCQkJCX0pLCBpKCIuc2l6ZV94aWFsYWJveCIpLm9uKCJtb3VzZWxlYXZlIiwgZnVuY3Rpb24oKSB7CgkJCQkJaSh0aGlzKS5oaWRlKCkKCQkJCX0pLCBpKCIuc2l6ZV94aWFsYWJveCBhIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSBpKHRoaXMpLnRleHQoKSwKCQkJCQkJdCA9IGkodGhpcykucGFyZW50KCkuYXR0cigiZGF0YS1zaXplIik7CgkJCQkJaSgiLiIgKyB0KS52YWwoZSksIGkodGhpcykucGFyZW50KCkuaGlkZSgpLCBxKCkKCQkJCX0pLCBpKCIjZmlyc3Rfc2l6ZSIpLm9uKCJrZXl1cCIsIGZ1bmN0aW9uKCkgewoJCQkJCXEoKQoJCQkJfSkKCQkJfQoKCQkJZnVuY3Rpb24gVSgpIHsKCQkJCUgoKSwgSigpLCBGKCkKCQkJfQoKCQkJZnVuY3Rpb24gWShlKSB7CgkJCQl2YXIgdCA9ICd7e2VhY2ggZGF0YX19PGEgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyIgdGl0bGU9Int7JHZhbHVlWzFdfX0iIHRhcmlmZj0ie3skdmFsdWVbMF19fSI+e3skdmFsdWVbMV19fTwvYT57ey9lYWNofX0nOwoJCQkJaSgiI2NhdGVfc21hbGwiKS5uZXh0KCIueGlhbGFib3giKS5lbXB0eSgpLmFwcGVuZCh1ZS5jb21waWxlKHQpKHsKCQkJCQlkYXRhOiBlCgkJCQl9KSksIGkoIiNjYXRlX3NtYWxsIikucmVtb3ZlQ2xhc3MoInNlbF9pbmZvIiksIEcoKQoJCQl9CgoJCQlmdW5jdGlvbiBHKCkgewoJCQkJaSgiI3NtYWxsX3hpYWxhIGEiKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IGkodGhpcykudGV4dCgpOwoJCQkJCWkoIiNjYXRlX3NtYWxsIikudmFsKGUpLCBpKCIuaHRfdGFyaWZmX2NhdGUiKS50ZXh0KGUpLCBpKCIuaHRfdGFyaWZmIC5odF90YXJpZmZfbnVtIGVtIikudGV4dChpKHRoaXMpLmF0dHIoInRhcmlmZiIpKSwgaSgiI3RhcmlmZl9kZXRhaWwgLmh0X3RhcmlmZl9udW0iKS50ZXh0KGkodGhpcykuYXR0cigidGFyaWZmIikpLCBpKCIuaHRfdGFyaWZmX2J0biBzcGFuIikudGV4dChpKHRoaXMpLnRleHQoKS5zbGljZSgwLCA1KSksIGkoIi5odF90YXJpZmZfYnRuIHNwYW4iKS5hdHRyKCJ0aXRsZSIsIGkodGhpcykudGV4dCgpKSwgaSgiI3NtYWxsX3hpYWxhIikuaGlkZSgpLCBYKCIjY2F0ZV9zbWFsbCIpLCBYKCIuaHRfdGFyaWZmX2NhdGUiLCAidGV4dCIsIDQpCgkJCQl9KSwgaSgiI3NlbGVjdF9idG4iKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQlDKCksIGkoIiN0YXJpZmZfZGV0YWlsIikuaGlkZSgpCgkJCQl9KQoJCQl9CgoJCQlmdW5jdGlvbiBYKGUsIHQsIG4pIHsKCQkJCW4gPSBuIHx8IDY7CgkJCQl2YXIgYSwgbyA9IDA7CgkJCQlhID0gInRleHQiID09IHQgPyBpKGUpLnRleHQoKSA6IGkoZSkudmFsKCk7CgkJCQlmb3IgKHZhciByID0gMDsgciA8IGEubGVuZ3RoOyByKyspIHsKCQkJCQl2YXIgcyA9IG5ldyBSZWdFeHAoIlthLXowLTkvXSIpLnRlc3QoYVtyXSk7CgkJCQkJaWYgKG8gKz0gcyA/IC41IDogMSwgbyA+IG4pIHJldHVybiBhID0gYS5zbGljZSgwLCByKSArICIuLi4iLCB2b2lkKCJ0ZXh0IiA9PSB0ID8gaShlKS50ZXh0KGEpIDogaShlKS52YWwoYSkpCgkJCQl9CgkJCX0KCgkJCWZ1bmN0aW9uIEooKSB7CgkJCQlpKCIuaHRfdGFyaWZmX2J0biIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCWkoIiN0YXJpZmZfZGV0YWlsIikuc2hvdygpLCBnZSgiY2xpY2s6aGFpdGFvOnRhcmlmZiIpLCBfZS5sb2coIua1t+a3mOWFs+eojueCueWHuyIpCgkJCQl9KSwgaSgiI2NhdGVfc2VsZWN0X2JveCBpbnB1dCIpLm9uKCJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7CgkJCQkJaSh0aGlzKS5uZXh0KCIueGlhbGFib3giKS5maW5kKCJhIikubGVuZ3RoID4gMCAmJiAoaSh0aGlzKS5uZXh0KCIueGlhbGFib3giKS5zaG93KCksIGkodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoInNlbGVjdF9ob3ZlciIpLCBpKHRoaXMpLmFkZENsYXNzKCJpbnB1dF9ob3ZlciIpKQoJCQkJfSksIGkoIiNjYXRlX3NlbGVjdF9ib3ggaW5wdXQiKS5vbigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gdGhpczsKCQkJCQlpZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJCWkoZSkubmV4dCgiLnhpYWxhYm94IikuaGlkZSgpLCBpKGUpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCJzZWxlY3RfaG92ZXIiKSwgaShlKS5yZW1vdmVDbGFzcygiaW5wdXRfaG92ZXIiKQoJCQkJCX0sIDEwMCkKCQkJCX0pLCBpKCIueGlhbGFib3giKS5vbigibW91c2VlbnRlciIsIGZ1bmN0aW9uKCkgewoJCQkJCWNsZWFyVGltZW91dChpZSkKCQkJCX0pLm9uKCJtb3VzZWxlYXZlIiwgZnVuY3Rpb24oKSB7CgkJCQkJaSh0aGlzKS5oaWRlKCksIGkodGhpcykucGFyZW50KCkucmVtb3ZlQ2xhc3MoInNlbGVjdF9ob3ZlciIpLCBpKHRoaXMpLnBhcmVudCgpLmZpbmQoImlucHV0IikucmVtb3ZlQ2xhc3MoImlucHV0X2hvdmVyIikKCQkJCX0pLCBHKCksIGkoIiNiaWdfeGlhbGEgYSIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gaSh0aGlzKS50ZXh0KCk7CgkJCQkJaSgiI2NhdGVfYmlnIikudmFsKGUpLCBpKCIuaHRfdGFyaWZmX2NhdGUiKS50ZXh0KGUpOwoJCQkJCXZhciB0ID0gaSh0aGlzKS5hdHRyKCJjYXRlIik7CgkJCQkJWShwZVt0XSksIGkoIiNiaWdfeGlhbGEiKS5oaWRlKCksIFgoIiNjYXRlX2JpZyIpLCBYKCIuaHRfdGFyaWZmX2NhdGUiLCAidGV4dCIsIDQpCgkJCQl9KQoJCQl9CgoJCQlmdW5jdGlvbiBaKGUsIG4pIHsKCQkJCXZhciBpID0gbG9jYXRpb24ucHJvdG9jb2wgKyAoIi8vYnJvd3Nlci4iICsgdC5leHROYW1lICsgIi5jb20vZXh0ZW5zaW9uP2FjPWZhbnlpJnN0cmluZz0iKSArIGU7CgkJCQlmZS5nZXQoaSkuZG9uZShmdW5jdGlvbih0KSB7CgkJCQkJaWYgKHQudHJhbnNfcmVzdWx0ICYmICF0LmVycm9yX2NvZGUpIHsKCQkJCQkJZm9yICh2YXIgaSA9IFtdLCBhID0gMDsgYSA8IHQudHJhbnNfcmVzdWx0Lmxlbmd0aDsgYSsrKSBpLnB1c2godC50cmFuc19yZXN1bHRbYV0uZHN0KTsKCQkJCQkJbihpKQoJCQkJCX0gZWxzZSBuKFtlXSkKCQkJCX0pCgkJCX0KCgkJCWZ1bmN0aW9uIFYoZSwgdCkgewoJCQkJWihlLCB0KSwgZ2UoInJlcXVlc3Q6aGFpdGFvOmZhbnlpIiksIF9lLmxvZygi6K+35rGC5YiS6K+N57+76K+RIikKCQkJfQoKCQkJZnVuY3Rpb24gSyhlKSB7CgkJCQllID0gZS5qb2luKCIiKSwgaSgiLmh0X2ZhbnlpIikucmVtb3ZlKCk7CgkJCQl2YXIgdCA9ICc8ZGl2IGNsYXNzPSJodF9mYW55aSIgc3R5bGU9InRvcDp7e2h0eX19O2xlZnQ6e3todHh9fSI+PHNwYW4gaWQ9Imh0X3RvcCI+PC9zcGFuPnt7ZGF0YX19PC9kaXY+JywKCQkJCQluID0gdWUuY29tcGlsZSh0KSh7CgkJCQkJCWRhdGE6IGUsCgkJCQkJCWh0eDogUSgpICsgInB4IiwKCQkJCQkJaHR5OiBjZSArICJweCIKCQkJCQl9KTsKCQkJCWkoImJvZHkiKS5hcHBlbmQobiksIHRlKCkKCQkJfQoKCQkJZnVuY3Rpb24gUSgpIHsKCQkJCXZhciBlID0gMDsKCQkJCXJldHVybiBlID0gbGUgPiBkZSA/IGxlIC0gKGxlIC0gZGUpIC8gMiAtIDY1IDogbGUgKyAoZGUgLSBsZSkgLyAyIC0gNjUKCQkJfQoKCQkJZnVuY3Rpb24gZWUoZSkgewoJCQkJVihlLCBLKQoJCQl9CgoJCQlmdW5jdGlvbiB0ZSgpIHsKCQkJCWkoIi5odF9mYW55aSIpLnNpYmxpbmdzKCkub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJaSgiLmh0X2ZhbnlpIikucmVtb3ZlKCkKCQkJCX0pCgkJCX0KCgkJCWZ1bmN0aW9uIG5lKCkgewoJCQkJaSgiYm9keSIpLm9uKCJtb3VzZWRvd24iLCBmdW5jdGlvbihlKSB7CgkJCQkJY2xlYXJUaW1lb3V0KGFlKSwgZGUgPSBlLnBhZ2VYCgkJCQl9KSwgaSgiYm9keSIpLm9uKCJtb3VzZXVwIiwgZnVuY3Rpb24oZSkgewoJCQkJCWFlID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJdmFyIHQgPSAiIjsKCQkJCQkJbGUgPSBlLnBhZ2VYLCBjZSA9IGUucGFnZVkgKyAyMCwgd2luZG93LmdldFNlbGVjdGlvbiA/IHQgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkudG9TdHJpbmcoKSA6IGRvY3VtZW50LnNlbGVjdGlvbiAmJiAodCA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpLnRleHQpLCAiIiAhPSB0ICYmIGVlKHQpCgkJCQkJfSwgMTAwKQoJCQkJfSkKCQkJfQoJCQl2YXIgaWUsIGFlLCBvZSwgcmUsIHNlLCBsZSwgY2UsIGRlLCBwZSwgaGUsIHVlID0gbigxNiksCgkJCQltZSA9IG4oNDApLAoJCQkJZmUgPSBuKDkpLAoJCQkJZ2UgPSBuKDI2KSwKCQkJCV9lID0gbigxMyksCgkJCQl4ZSA9ICJodHRwczoiLAoJCQkJd2UgPSB7fSwKCQkJCXZlID0gInVzIiwKCQkJCWJlID0gewoJCQkJCSLnsbMiOiAzZTMsCgkJCQkJIuWOmOexsyI6IDMwLAoJCQkJCSLmr6vnsbMiOiAzLAoJCQkJCSLoi7HlsLoiOiA5MTQuNCwKCQkJCQki6Iux5a+4IjogNzYuMiwKCQkJCQki56CBIjogMjc0My4yLAoJCQkJCSLlsLoiOiAxZTMsCgkJCQkJIuWvuCI6IDEwMCwKCQkJCQki5YiGIjogMTAsCgkJCQkJIuWOmCI6IDEKCQkJCX0sCgkJCQl5ZSA9IHsKCQkJCQlnOiAxLAoJCQkJCWtnOiAxZTMsCgkJCQkJb3VuY2VzOiAyOC4zNSwKCQkJCQlwb3VuZHM6IDQ1My42CgkJCQl9LAoJCQkJa2UgPSB7CgkJCQkJc2hhbmd5aTogewoJCQkJCQl1czogewoJCQkJCQkJbWFuOiBbInVzX21hbl9zei5qcGciLCAidXNfbWFuX3N6Mi5qcGciXSwKCQkJCQkJCXdvbWFuOiBbInVzX3dvbWFuX3N6LmpwZyIsICJ1c193b21hbl9zejIuanBnIl0KCQkJCQkJfSwKCQkJCQkJdWs6IHsKCQkJCQkJCW1hbjogWyJ1a19tYW5fc3ouanBnIiwgInVrX21hbl9zejIuanBnIl0sCgkJCQkJCQl3b21hbjogWyJ1a193b21hbl9zei5qcGciLCAidWtfd29tYW5fc3oyLmpwZyJdCgkJCQkJCX0sCgkJCQkJCWpwOiB7CgkJCQkJCQltYW46IFsianBfbWFuX3N6LmpwZyIsICJqcF9tYW5fc3oyLmpwZyJdLAoJCQkJCQkJd29tYW46IFsianBfd29tYW5fc3ouanBnIiwgImpwX3dvbWFuX3N6Mi5qcGciXQoJCQkJCQl9CgkJCQkJfSwKCQkJCQl4aWF6aHVhbmc6IHsKCQkJCQkJdXM6IHsKCQkJCQkJCW1hbjogWyJ1c19tYW5feHouanBnIiwgInVzX21hbl94ejIuanBnIl0sCgkJCQkJCQl3b21hbjogWyJ1c193b21hbl94ei5qcGciLCAidXNfd29tYW5feHoyLmpwZyJdCgkJCQkJCX0sCgkJCQkJCXVrOiB7CgkJCQkJCQltYW46IFsidWtfbWFuX3h6LmpwZyIsICJ1a19tYW5feHoyLmpwZyJdLAoJCQkJCQkJd29tYW46IFsidWtfd29tYW5feHouanBnIiwgInVrX3dvbWFuX3h6Mi5qcGciXQoJCQkJCQl9LAoJCQkJCQlqcDogewoJCQkJCQkJbWFuOiBbImpwX21hbl94ei5qcGciLCAianBfbWFuX3h6Mi5qcGciXSwKCQkJCQkJCXdvbWFuOiBbImpwX3dvbWFuX3h6LmpwZyIsICJqcF93b21hbl94ejIucG5nIl0KCQkJCQkJfQoJCQkJCX0sCgkJCQkJa2lkc2Nsb3RoOiB7CgkJCQkJCXVzOiBbInVzX2tpZHMuanBnIiwgInVzX2tpZHMyXzAuanBnIiwgInVzX2tpZHMyXzQuanBnIl0sCgkJCQkJCXVrOiBbInVrX2tpZHMuanBnIiwgInVrX2tpZHMyXzAuanBnIiwgInVrX2tpZHMyXzQuanBnIl0sCgkJCQkJCWpwOiBbImpwX2tpZHMuanBnIiwgImpwX2tpZHMyXzQuanBnIiwgImpwX2tpZHMyXzQuanBnIl0KCQkJCQl9LAoJCQkJCXNob2VzOiB7CgkJCQkJCW1hbjogWyJ3b21hbl9zaG9lc18xLmpwZyIsICJtYW5fc2hvZXMyLmpwZyJdLAoJCQkJCQl3b21hbjogWyJ3b21hbl9zaG9lc18xLmpwZyIsICJ3b21hbl9zaG9lczIuanBnIl0sCgkJCQkJCWtpZHM6IFsia2lkc19zaG9lcy5qcGciLCAia2lkc19zaG9lczJfMC5qcGciLCAia2lkc19zaG9lczJfNC5qcGciXQoJCQkJCX0KCQkJCX0sCgkJCQl6ZSA9IHsKCQkJCQkid3d3LmFtYXpvbi5jb20iOiB7CgkJCQkJCWNvdW46ICJ1cyIsCgkJCQkJCWRvbTogWyIjcHJpY2VfZmVhdHVyZV9kaXYiLCAiI3VuaWZpZWRQcmljZV9mZWF0dXJlX2RpdiJdLAoJCQkJCQlwb3NpdGlvbjogImFmdGVyIgoJCQkJCX0sCgkJCQkJInd3dy5hbWF6b24uY28uanAiOiB7CgkJCQkJCWNvdW46ICJqcCIsCgkJCQkJCWRvbTogWyIjcHJpY2VfZmVhdHVyZV9kaXYiLCAiI3VuaWZpZWRQcmljZV9mZWF0dXJlX2RpdiJdLAoJCQkJCQlwb3NpdGlvbjogImFmdGVyIgoJCQkJCX0sCgkJCQkJInd3dy5hbWF6b24uZGUiOiB7CgkJCQkJCWNvdW46ICJ1ayIsCgkJCQkJCWRvbTogWyIjcHJpY2VfZmVhdHVyZV9kaXYiLCAiI3VuaWZpZWRQcmljZV9mZWF0dXJlX2RpdiJdLAoJCQkJCQlwb3NpdGlvbjogImFmdGVyIgoJCQkJCX0sCgkJCQkJInd3dy42cG0uY29tIjogewoJCQkJCQljb3VuOiAidXMiLAoJCQkJCQlkb206IFsiLm1HSVF6Il0sCgkJCQkJCXBvc2l0aW9uOiAiYmVmb3JlIgoJCQkJCX0KCQkJCX0sCgkJCQlCZSA9IHsKCQkJCQljb2ZmZWU6ICLlkpbllaEiLAoJCQkJCXNuYWNrOiAi6aWu5paZL+S/neWBpeWTgS/lhbbku5bpo5/lk4EiLAoJCQkJCW51dDogIumlruaWmS/kv53lgaXlk4Ev5YW25LuW6aOf5ZOBIiwKCQkJCQlwaXN0YWNoaW86ICLppa7mlpkv5L+d5YGl5ZOBL+WFtuS7lumjn+WTgSIsCgkJCQkJYWxtb25kOiAi6aWu5paZL+S/neWBpeWTgS/lhbbku5bpo5/lk4EiLAoJCQkJCWNoZXN0bnV0czogIumlruaWmS/kv53lgaXlk4Ev5YW25LuW6aOf5ZOBIiwKCQkJCQl3YWxudXQ6ICLppa7mlpkv5L+d5YGl5ZOBL+WFtuS7lumjn+WTgSIsCgkJCQkJaGF6ZWxudXQ6ICLppa7mlpkv5L+d5YGl5ZOBL+WFtuS7lumjn+WTgSIsCgkJCQkJcGVjYW46ICLppa7mlpkv5L+d5YGl5ZOBL+WFtuS7lumjn+WTgSIsCgkJCQkJY2FzaGV3OiAi6aWu5paZL+S/neWBpeWTgS/lhbbku5bpo5/lk4EiLAoJCQkJCXBlYW51dDogIumlruaWmS/kv53lgaXlk4Ev5YW25LuW6aOf5ZOBIiwKCQkJCQljaG9jb2xhdGVzOiAi6aWu5paZL+S/neWBpeWTgS/lhbbku5bpo5/lk4EiLAoJCQkJCXBhc3RyeTogIumlruaWmS/kv53lgaXlk4Ev5YW25LuW6aOf5ZOBIiwKCQkJCQljYW5keTogIumlruaWmS/kv53lgaXlk4Ev5YW25LuW6aOf5ZOBIiwKCQkJCQljb25kaW1lbnQ6ICLppa7mlpkv5L+d5YGl5ZOBL+WFtuS7lumjn+WTgSIsCgkJCQkJa2V0Y2h1cDogIumlruaWmS/kv53lgaXlk4Ev5YW25LuW6aOf5ZOBIiwKCQkJCQliZXZlcmFnZTogIumlruaWmS/kv53lgaXlk4Ev5YW25LuW6aOf5ZOBIiwKCQkJCQl0ZWE6ICLojLblj7YiLAoJCQkJCWNvYXRzOiAi5aSW6KGjL+iho+acjS/lhrLplIvooaMiLAoJCQkJCWNsb3RoZXM6ICLlpJbooaMv6KGj5pyNL+WGsumUi+ihoyIsCgkJCQkJc2hpcnQ6ICLlpJboo6Qv6KOk5a2QL+ihrOihqy/ooazooaMvVOaBpCIsCgkJCQkJc3dlYXRlcnM6ICLlpJboo6Qv6KOk5a2QL+ihrOihqy/ooazooaMvVOaBpCIsCgkJCQkJbGluZ2VyaWU6ICLlhoXooaMv5YaF6KOkIiwKCQkJCQl0YW5raW5pczogIuWGheihoy/lhoXoo6QiLAoJCQkJCWJpa2luaXM6ICLlhoXooaMv5YaF6KOkIiwKCQkJCQlsb3VuZ2V3ZWFyOiAi5YaF6KGjL+WGheijpCIsCgkJCQkJdW5kZXJ3ZWFyOiAi5YaF6KGjL+WGheijpCIsCgkJCQkJYnJpZWZzOiAi5YaF6KGjL+WGheijpCIsCgkJCQkJc3dpbXN1aXQ6ICLlhoXooaMv5YaF6KOkIiwKCQkJCQlzY2FydmVzOiAi6YWN6aWw77yI5bi95a2QL+WbtOW3vi/lpLTlt74v5Lid5be+L+mihuW4pi/ohbDluKYv5omL5aWX77yJIiwKCQkJCQloYXRzOiAi6YWN6aWw77yI5bi95a2QL+WbtOW3vi/lpLTlt74v5Lid5be+L+mihuW4pi/ohbDluKYv5omL5aWX77yJIiwKCQkJCQlzY2FyZjogIumFjemlsO+8iOW4veWtkC/lm7Tlt74v5aS05be+L+S4neW3vi/poobluKYv6IWw5bimL+aJi+Wll++8iSIsCgkJCQkJdGllOiAi6YWN6aWw77yI5bi95a2QL+WbtOW3vi/lpLTlt74v5Lid5be+L+mihuW4pi/ohbDluKYv5omL5aWX77yJIiwKCQkJCQliZWx0OiAi6YWN6aWw77yI5bi95a2QL+WbtOW3vi/lpLTlt74v5Lid5be+L+mihuW4pi/ohbDluKYv5omL5aWX77yJIiwKCQkJCQlnbG92ZXM6ICLphY3ppbDvvIjluL3lrZAv5Zu05be+L+WktOW3vi/kuJ3lt74v6aKG5bimL+iFsOW4pi/miYvlpZfvvIkiLAoJCQkJCWJlZGRpbmc6ICLmr5vmr68v6KKr5a2QL+W6iue9qS/nnaHooosiLAoJCQkJCXF1aWx0OiAi5q+b5q+vL+iiq+WtkC/luornvakv552h6KKLIiwKCQkJCQkiYmVkc3ByZWFkICI6ICLmr5vmr68v6KKr5a2QL+W6iue9qS/nnaHooosiLAoJCQkJCWxlYXRoZXI6ICLnmq7pnosiLAoJCQkJCWJvb3RzOiAi55qu6Z20L+mdtOWtkCIsCgkJCQkJb3V0ZG9vcjogIui/kOWKqOmeiy/lvpLmraXpnosv5raJ5rC06Z6LL+eZu+Wxsemeiy/ov5zotrPpnosiLAoJCQkJCWF0aGxldGljOiAi6L+Q5Yqo6Z6LL+W+kuatpemeiy/mtonmsLTpnosv55m75bGx6Z6LL+i/nOi2s+meiyIsCgkJCQkJc3BvcnRzOiAi6L+Q5Yqo6Z6LL+W+kuatpemeiy/mtonmsLTpnosv55m75bGx6Z6LL+i/nOi2s+meiyIsCgkJCQkJd2FkaW5nOiAi6L+Q5Yqo6Z6LL+W+kuatpemeiy/mtonmsLTpnosv55m75bGx6Z6LL+i/nOi2s+meiyIsCgkJCQkJY2xpbWJpbmc6ICLov5Dliqjpnosv5b6S5q2l6Z6LL+a2ieawtOmeiy/nmbvlsbHpnosv6L+c6Laz6Z6LIiwKCQkJCQlydW5uaW5nOiAi6L+Q5Yqo6Z6LL+W+kuatpemeiy/mtonmsLTpnosv55m75bGx6Z6LL+i/nOi2s+meiyIsCgkJCQkJc2FuZGFsczogIui/kOWKqOmeiy/lvpLmraXpnosv5raJ5rC06Z6LL+eZu+Wxsemeiy/ov5zotrPpnosiLAoJCQkJCXNsaXBwZXJzOiAi6L+Q5Yqo6Z6LL+W+kuatpemeiy/mtonmsLTpnosv55m75bGx6Z6LL+i/nOi2s+meiyIsCgkJCQkJaW5zb2xlczogIui/kOWKqOmeiy/lvpLmraXpnosv5raJ5rC06Z6LL+eZu+Wxsemeiy/ov5zotrPpnosiLAoJCQkJCXNob2VsYWNlczogIui/kOWKqOmeiy/lvpLmraXpnosv5raJ5rC06Z6LL+eZu+Wxsemeiy/ov5zotrPpnosiLAoJCQkJCXN1aXRjYXNlczogIueusS/ooYzmnY7nrrEv5peF6KGM566xL+aJi+aPkOeusSIsCgkJCQkJbHVnZ2FnZTogIueusS/ooYzmnY7nrrEv5peF6KGM566xL+aJi+aPkOeusSIsCgkJCQkJYnJpZWZjYXNlczogIueusS/ooYzmnY7nrrEv5peF6KGM566xL+aJi+aPkOeusSIsCgkJCQkJdHJhdmVsOiAi566xL+ihjOadjueusS/ml4XooYznrrEv5omL5o+Q566xIiwKCQkJCQliYWNrcGFja3M6ICLmjI7ljIUv6IOM5YyFL+mCruW3ruWMhS/og4zljIUv5Y2V6IKp5YyFL+WPjOiCqeWMhSIsCgkJCQkJc2F0Y2hlbDogIuaMjuWMhS/og4zljIUv6YKu5beu5YyFL+iDjOWMhS/ljZXogqnljIUv5Y+M6IKp5YyFIiwKCQkJCQliYWdzOiAi5oyO5YyFL+iDjOWMhS/pgq7lt67ljIUv6IOM5YyFL+WNleiCqeWMhS/lj4zogqnljIUiLAoJCQkJCWNhc2VzOiAi5oyO5YyFL+iDjOWMhS/pgq7lt67ljIUv6IOM5YyFL+WNleiCqeWMhS/lj4zogqnljIUiLAoJCQkJCWhhbmRiYWdzOiAi5oyO5YyFL+iDjOWMhS/pgq7lt67ljIUv6IOM5YyFL+WNleiCqeWMhS/lj4zogqnljIUiLAoJCQkJCWNsdXRjaGVzOiAi5oyO5YyFL+iDjOWMhS/pgq7lt67ljIUv6IOM5YyFL+WNleiCqeWMhS/lj4zogqnljIUiLAoJCQkJCXdhbGxldDogIumSseWMhS/pkqXljJnljIUiLAoJCQkJCW1vbmV5OiAi6ZKx5YyFL+mSpeWMmeWMhSIsCgkJCQkJa2V5OiAi6ZKx5YyFL+mSpeWMmeWMhSIsCgkJCQkJd2F0Y2hlczogIuacuuaisOihqCIsCgkJCQkJd3Jpc3Q6ICLmnLrmorDooagiLAoJCQkJCWRpc2h3YXNoZXJzOiAi6aSQ5YW3L+WIgOWFtyIsCgkJCQkJaG9vZHM6ICLppJDlhbcv5YiA5YW3IiwKCQkJCQlkcmF3ZXJzOiAi6aSQ5YW3L+WIgOWFtyIsCgkJCQkJZGF0aDogIumkkOWFty/liIDlhbciLAoJCQkJCWN1dGxlcnk6ICLppJDlhbcv5YiA5YW3IiwKCQkJCQlmbGF0d2FyZTogIumkkOWFty/liIDlhbciLAoJCQkJCSJraXRjaGVuICYgZGluaW5nIjogIumkkOWFty/liIDlhbciLAoJCQkJCWRpbmluZzogIumkkOWFty/liIDlhbciLAoJCQkJCWtuaWZlOiAi6aSQ5YW3L+WIgOWFtyIsCgkJCQkJcG90OiAi54KK5YW3L+mUhSIsCgkJCQkJY29va3dhcmU6ICLngorlhbcv6ZSFIiwKCQkJCQlraXRjaGVud2FyZTogIueCiuWFty/plIUiLAoJCQkJCWNvb2t0b3BzOiAi54KK5YW3L+mUhSIsCgkJCQkJcHVyaWZpZXI6ICLlh4DmsLTlmajvvIjlkKvmu6Toiq/vvIkiLAoJCQkJCXN0ZWFtZXJzOiAi55S16aWt54WyIiwKCQkJCQlvdmVuczogIuW+ruazoueCiSIsCgkJCQkJanVpY2VyOiAi55S15Yqo5qao5rGB5py6IiwKCQkJCQljb2ZmZWVtYWNoaW5lOiAi5ZKW5ZWh5py6IiwKCQkJCQl2YWN1dW1zOiAi5ZC45bCY5ZmoIiwKCQkJCQkiY2VpbGluZyAiOiAi55S16aOO5omHIiwKCQkJCQlpcm9uczogIueUteeGqOaWlyIsCgkJCQkJaHVtaWRpZmllcnM6ICLlop4v6Zmk5rm/5py6L+Wil+mZpOa5v+S4gOS9k+acuiIsCgkJCQkJc2V3aW5nOiAi55S15Yqo57yd57qr5py6IiwKCQkJCQlyZWZyaWdlcmF0b3JzOiAi5a6255S1IiwKCQkJCQlmcmVlemVyczogIuWutueUtSIsCgkJCQkJY29tcGFjdG9yczogIuWutueUtSIsCgkJCQkJd2FzaGVyczogIuWutueUtSIsCgkJCQkJYnVsYnM6ICLlrrbnlLUiLAoJCQkJCXNoYXZlcjogIueUteWKqOWJg+mhu+WIgCIsCgkJCQkJYmxvb2Q6ICLooYDljovorqEv6KGA57OW6K6hIiwKCQkJCQlnbHVjb3NlOiAi6KGA5Y6L6K6hL+ihgOezluiuoSIsCgkJCQkJZHJ5ZXI6ICLnlLXlkLnpo47mnLoiLAoJCQkJCXRvb3RoYnJ1c2g6ICLnlLXliqjniZnliLciLAoJCQkJCXN1bnNjcmVlbjogIumYsuaZkumcsi/pmLLmmZLpnJwv6Ziy5Zeu5Lmz5rayIiwKCQkJCQlsb3Rpb25zOiAi6Ziy5pmS6ZyyL+mYsuaZkumcnC/pmLLll67kubPmtrIiLAoJCQkJCXNjcmVhbTogIuaKpOaJi+mcnCIsCgkJCQkJbGlwc3RpY2s6ICLllIfoho8iLAoJCQkJCXBlcmZ1bWU6ICLpppnmsLQiLAoJCQkJCW1hc2tzOiAi6Z2i6IacIiwKCQkJCQl0b25lcjogIueIveiCpOawtCIsCgkJCQkJcGhvbmVzOiAi6Kem5bGP5byP5omL5py6IiwKCQkJCQljYW1lcmFzOiAi5pWw56CB55u45py6L+WNoeeJh+acui9EQyIsCgkJCQkJY2Fub246ICLmlbDnoIHnm7jmnLov5Y2h54mH5py6L0RDIiwKCQkJCQlqb3lzdGljazogIua4uOaIj+acuumBpeaOp+WZqC/mjqfliLblmagv5omL5p+EL+aRh+adhi/mlrnlkJHnm5giLAoJCQkJCWNvbnRyb2xsZXI6ICLmuLjmiI/mnLrpgaXmjqflmagv5o6n5Yi25ZmoL+aJi+afhC/mkYfmnYYv5pa55ZCR55uYIiwKCQkJCQlyZWNvcmRlcjogIuW9lemfs+eslC/lvZXpn7PmnLov5pS26Z+z5py6IiwKCQkJCQlyYWRpb3M6ICLlvZXpn7PnrJQv5b2V6Z+z5py6L+aUtumfs+acuiIsCgkJCQkJZWNobzogIumfs+euse+8iOmfs+WTjeiuvuWkh++8iSIsCgkJCQkJc3RlcmVvczogIumfs+euse+8iOmfs+WTjeiuvuWkh++8iSIsCgkJCQkJbGFwdG9wOiAi56yU6K6w5pys55S16ISRL+WQq+W5s+adv+eUteiEkSIsCgkJCQkJbWVtb3J5OiAi5YaF5a2Y5p2hNEfku6XkuIoiLAoJCQkJCWNhcmRzOiAi5Yqf6IO95Y2hL+aYvuWNoS/lo7DljaHnrYkiLAoJCQkJCWNhcmQ6ICLlip/og73ljaEv5pi+5Y2hL+WjsOWNoeetiSIsCgkJCQkJbWljZTogIum8oOaghyIsCgkJCQkJa2V5Ym9hcmRzOiAi6ZSu55uYIiwKCQkJCQlpbnB1dDogIumUruebmCIsCgkJCQkJc2Nhbm5lcjogIuaKleW9seS7qiIsCgkJCQkJc2NyZWVuczogIuaKleW9seS7qiIsCgkJCQkJZGlzazogIuenu+WKqOehrOebmDFUQi0yVEIo5ZCrMlRCKSIsCgkJCQkJdG95czogIueOqeWFtyIsCgkJCQkJIm1wMyBwbGF5ZXJzIjogIk1QM+aSreaUvuWZqCIsCgkJCQkJZGlhcGVyaW5nOiAi5am05YS/55So5ZOBIgoJCQkJfSwKCQkJCWplID0gewoJCQkJCWZvb2Q6IHsKCQkJCQkJdGxlOiAi6aOf5ZOBIiwKCQkJCQkJY2F0ZTogImNhdGUxIgoJCQkJCX0sCgkJCQkJY2xvdGhpbmc6IHsKCQkJCQkJdGxlOiAi5pyN6aWwIiwKCQkJCQkJY2F0ZTogImNhdGUyIgoJCQkJCX0sCgkJCQkJcGFja3M6IHsKCQkJCQkJdGxlOiAi6Z6L44CB566x5YyFIiwKCQkJCQkJY2F0ZTogImNhdGUzIgoJCQkJCX0sCgkJCQkJc2hvZXM6IHsKCQkJCQkJdGxlOiAi6Z6L44CB566x5YyFIiwKCQkJCQkJY2F0ZTogImNhdGUzIgoJCQkJCX0sCgkJCQkJYmFnczogewoJCQkJCQl0bGU6ICLpnovjgIHnrrHljIUiLAoJCQkJCQljYXRlOiAiY2F0ZTMiCgkJCQkJfSwKCQkJCQkia2l0Y2hlbiAmIGRpbmluZyI6IHsKCQkJCQkJdGxlOiAi5Y6o5oi/44CB6aSQ5Y6FIiwKCQkJCQkJY2F0ZTogImNhdGU0IgoJCQkJCX0sCgkJCQkJImhvbWUgJiBraXRjaGVuIjogewoJCQkJCQl0bGU6ICLlrrbnlLUiLAoJCQkJCQljYXRlOiAiY2F0ZTYiCgkJCQkJfSwKCQkJCQkiaGVhbHRoICYgcGVyc29uYWwiOiB7CgkJCQkJCXRsZTogIuS4quS6uuaKpOeQhiIsCgkJCQkJCWNhdGU6ICJjYXRlNyIKCQkJCQl9LAoJCQkJCSJiZWF1dHkgIjogewoJCQkJCQl0bGU6ICLnvo7lrrkiLAoJCQkJCQljYXRlOiAiY2F0ZTgiCgkJCQkJfSwKCQkJCQkiY2FtZXJhICYgcGhvdG8gIjogewoJCQkJCQl0bGU6ICLnhafnm7jmnLrjgIHmkYTlg4/mnLoiLAoJCQkJCQljYXRlOiAiY2F0ZTExIgoJCQkJCX0sCgkJCQkJZWxlY3Ryb25pY3M6IHsKCQkJCQkJdGxlOiAi55S15a2Q5pWw56CBIiwKCQkJCQkJY2F0ZTogImNhdGUxMiIKCQkJCQl9LAoJCQkJCWN1bXB1dGVyczogewoJCQkJCQl0bGU6ICLkuKrkurrnlLXohJEiLAoJCQkJCQljYXRlOiAiY2F0ZTE1IgoJCQkJCX0sCgkJCQkJZGlhcGVyaW5nOiB7CgkJCQkJCXRsZTogIuWptOWEv+eUqOWTgSIsCgkJCQkJCWNhdGU6ICJjYXRlMTgiCgkJCQkJfQoJCQkJfSwKCQkJCUNlID0gWyIjd2F5ZmluZGluZy1icmVhZGNydW1ic19mZWF0dXJlX2RpdiAuYS1saXN0LWl0ZW0gLmEtbGluay1ub3JtYWwiLCAiI1NhbGVzUmFuayAuemdfaHJzcl9sYWRkZXIgYSJdLAoJCQkJU2UgPSB7CgkJCQkJInd3dy5hbWF6b24uY29tIjogWyIjZGV0YWlsQnVsbGV0c19mZWF0dXJlX2RpdiAuYS1saXN0LWl0ZW0gLmEtdGV4dC1ib2xkOmNvbnRhaW5zKFdlaWdodCkgKyBzcGFuIiwgIiN0ZWNobmljYWwtZGV0YWlscy10YWJsZSB0ZDpjb250YWlucyhXZWlnaHQpK3RkIiwgIiNkZXRhaWwtYnVsbGV0cyB1bCBsaTpjb250YWlucyhXZWlnaHQpIiwgJyN0ZWNobmljYWwtZGV0YWlsc19mZWF0dXJlX2RpdiB0YWJsZS5hLWtleXZhbHVlIHRoLmEtbm93cmFwOmNvbnRhaW5zKCJTaGlwcGluZyBXZWlnaHQiKSt0ZCddLAoJCQkJCSJ3d3cuYW1hem9uLmRlIjogWyIjZGV0YWlsX2J1bGxldHNfaWQgdWwgbGk6Y29udGFpbnMoUHJvZHVrdGdld2ljaHQpIiwgIiNwcm9kRGV0YWlscyAuc2hpcHBpbmctd2VpZ2h0IC52YWx1ZSJdLAoJCQkJCSJ3d3cuYW1hem9uLmNvLmpwIjogWyIjZGV0YWlsX2J1bGxldHNfaWQgdWwgbGk6Y29udGFpbnMo55m66YCB6YeN6YePKSIsICIuc2hpcHBpbmctd2VpZ2h0IC52YWx1ZSJdLAoJCQkJCSJ3d3cuNnBtLmNvbSI6IFsiI3ByZEluZm9UZXh0IC5tZWFzdXJlbWVudHMgbGk6Y29udGFpbnMoV2VpZ2h0KSJdCgkJCQl9LAoJCQkJTmUgPSBmdW5jdGlvbihlLCB0KSB7CgkJCQkJZmUuZ2V0KGUpLmRvbmUoZnVuY3Rpb24oZSkgewoJCQkJCQl0KGUpCgkJCQkJfSkuZmFpbChmdW5jdGlvbigpIHsKCQkJCQkJaSgiI2h0X2FkZGNvbGxlY3QiKS50ZXh0KCLmt7vliqDlpLHotKUiKSwgaSgiI2h0X2FkZGNvbGxlY3QiKS5yZW1vdmVDbGFzcygiY19hZGRpbmciKSwgaSgiI2h0X2FkZGNvbGxlY3QiKS5hZGRDbGFzcygiY19hZGRlZCIpCgkJCQkJfSkKCQkJCX07CgkJCWUuZXhwb3J0cy5faW5pdCA9IGZ1bmN0aW9uKCkgewoJCQkJdC5vbigiZHBwYWdlX3Blcm1hbmVudCIsIGZ1bmN0aW9uKCkgewoJCQkJCSIwIiAhPT0gdC5zaG93X2hhaXRhbyAmJiBzZXRUaW1lb3V0KGEsIDUwMCkKCQkJCX0pCgkJCX0KCQl9KS5jYWxsKHQsIG4oMSksIG4oNikpCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCShmdW5jdGlvbih0LCBpKSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJdmFyIGEgPSBuKDE3KSwKCQkJCW8gPSBuKDkpLAoJCQkJciA9IG4oMjgpLAoJCQkJcyA9IHt9LAoJCQkJbCA9IFt7CgkJCQkJdW5pdE5hbWU6ICLljYMiLAoJCQkJCXRpbWVzOiAxZTMKCQkJCX0sIHsKCQkJCQl1bml0TmFtZTogIuS4hyIsCgkJCQkJdGltZXM6IDFlNAoJCQkJfV0sCgkJCQljID0gMSwKCQkJCWQgPSBmdW5jdGlvbihlLCBuKSB7CgkJCQkJaWYgKGUpIHsKCQkJCQkJaWYgKGUgPSBlLnRvU3RyaW5nKCksIGMgPSAxLCBBcnJheS5wcm90b3R5cGUuZm9yRWFjaCAmJiBsLmZvckVhY2goZnVuY3Rpb24odCkgewoJCQkJCQkJZS5pbmRleE9mKHQudW5pdE5hbWUpID4gLTEgJiYgKGMgPSB0LnRpbWVzKQoJCQkJCQl9KSwgZSA9IGUucmVwbGFjZSgvXlteXGRdKy9naSwgIiIpLCBlID0gZS5yZXBsYWNlKC9b77+lXCRdL2dpLCAiIiksIGUgPSBlLm1hdGNoKC9bMC05LixdKy8pICYmIGUubWF0Y2goL1swLTkuLF0rLylbMF0sICFlKSByZXR1cm4gZTsKCQkJCQkJZSA9IGgoZSwgbiksIGUgPSBlLnJlcGxhY2UoLywvZ2ksICIiKSwgZSA9IHQudHJpbShlKTsKCQkJCQkJdmFyIGkgPSBlLmluZGV4T2YoIi0iKTsKCQkJCQkJcmV0dXJuIGkgPiAwICYmIChlID0gZS5zdWJzdHIoMCwgaSkpLCBlID0gZS5yZXBsYWNlKC9eKFxkK1wuKVw8LitcPihcZHswLDJ9KVw8XC8uK1w+L2dpLCAiJDEkMiIpCgkJCQkJfQoJCQkJfTsKCQkJZS5leHBvcnRzID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJcmV0dXJuIGUgPSBkKGUsIHQpLCBlID0gcChlLCB0KSwgcGFyc2VGbG9hdChlKSA+IDAgPyAoZSA9IHBhcnNlRmxvYXQoZSksIGMgJiYgKGUgKj0gYyksIGUpIDogMAoJCQl9LCBlLmV4cG9ydHMuZ2V0UHJpY2VCZWZvcmVFeGNoYW5nZVJhdGUgPSBkOwoJCQl2YXIgcCA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQl2YXIgbiA9IHZvaWQgMDsKCQkJCQlyZXR1cm4gbiA9IHQgPyBzW3RdIHx8IDEgOiBhLmdldCgiY3VycmVuY3kiKSB8fCBpLmN1cnJlbmN5IHx8IDEsIHBhcnNlRmxvYXQoKE51bWJlcihlKSAqIG4pLnRvRml4ZWQoMikpCgkJCQl9LAoJCQkJaCA9IGZ1bmN0aW9uKGUsIG4pIHsKCQkJCQlpZiAobikgcmV0dXJuIGU7CgkJCQkJaWYgKDEgPT0gaS5wYWdlSW5mby50eXBlKSByZXR1cm4gZTsKCQkJCQl2YXIgYSA9IGxvY2F0aW9uLmhvc3QsCgkJCQkJCW8gPSB7CgkJCQkJCQkid3d3LmFtYXpvbi5kZSI6ICJwcmltZXRlc3RlbiIsCgkJCQkJCQkid3d3LmFtYXpvbi5mciI6ICJwcmVtaXVtIgoJCQkJCQl9OwoJCQkJCXJldHVybiBvW2FdICYmIHQoIiNuYXYtbG9nbyAubmF2LWxvZ28tdGFnbGluZSIpLnRleHQoKS5yZXBsYWNlKC9ccy9nLCAiIikudHJpbSgpLnRvTG93ZXJDYXNlKCkgPT09IG9bYV0gJiYgKGUgPSBlLnJlcGxhY2UoIi4iLCAiIikucmVwbGFjZSgiLCIsICIuIikpLCBlCgkJCQl9LAoJCQkJdSA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlyLnRyaWdnZXIoewoJCQkJCQl0eXBlOiAic2V0U3RvcmVSYXRlIiwKCQkJCQkJaW5mbzogSlNPTi5zdHJpbmdpZnkoZSkKCQkJCQl9KQoJCQkJfSwKCQkJCW0gPSBmdW5jdGlvbigpIHsKCQkJCQlyLm9uKGZ1bmN0aW9uKGUpIHsKCQkJCQkJaWYgKGUgJiYgImdldFN0b3JlUmF0ZSIgPT0gZS50eXBlKSB0cnkgewoJCQkJCQkJdmFyIHQgPSBlLnZhbHVlLmN1cnJlbmN5LAoJCQkJCQkJCW4gPSBKU09OLnBhcnNlKHQpOwoJCQkJCQkJcyA9IG4uZWxzZWN1cnIsIGkuY3VycmVuY3kgPSBuLmN1cnJlbmN5CgkJCQkJCX0gY2F0Y2ggKGEpIHt9CgkJCQkJfSksIHIudHJpZ2dlcih7CgkJCQkJCXR5cGU6ICJnZXRTdG9yZVJhdGUiCgkJCQkJfSkKCQkJCX0sCgkJCQlmID0gZnVuY3Rpb24oKSB7CgkJCQkJInd3dy5hbWF6b24uY24iICE9PSBsb2NhdGlvbi5ob3N0ICYmIChsb2NhdGlvbi5ob3N0LmluZGV4T2YoImFtYXpvbiIpID4gLTEgfHwgbG9jYXRpb24uaG9zdC5pbmRleE9mKCI2cG0iKSA+IC0xKSAmJiBtKCkKCQkJCX07CgkJCWYoKSwgZS5leHBvcnRzLmdldEV4UmF0ZSA9IGZ1bmN0aW9uKGUpIHsKCQkJCXJldHVybiBwYXJzZUZsb2F0KDEgfCBzW2VdKQoJCQl9LCBlLmV4cG9ydHMuZ2V0UmF0ZSA9IGZ1bmN0aW9uKGUpIHsKCQkJCWlmIChsb2NhdGlvbi5ob3N0LmluZGV4T2YoImFtYXpvbiIpID4gMCAmJiAtMSA9PSBsb2NhdGlvbi5ob3N0LmluZGV4T2YoImFtYXpvbi5jbiIpIHx8IGxvY2F0aW9uLmhvc3QuaW5kZXhPZigiNnBtIikgPiAtMSB8fCBsb2NhdGlvbi5ob3N0LmluZGV4T2YoImFsaWV4cHJlc3MiKSA+IC0xKSB7CgkJCQkJdmFyIHQgPSBpLnNlcnZlciArICIvZXh0ZW5zaW9uP2FjPWN1cnJlbmN5JnVybD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGxvY2F0aW9uLmhyZWYpOwoJCQkJCW8uZ2V0KHQpLmRvbmUoZnVuY3Rpb24odCkgewoJCQkJCQl0ICYmIHQuY3VycmVuY3kgJiYgKGEuc2V0KHQpLCBzID0gdC5lbHNlY3VyciwgaS5jdXJyZW5jeSA9IHQuY3VycmVuY3ksIHUodCkpLCBlKCkKCQkJCQl9KS5mYWlsKGZ1bmN0aW9uKCkgewoJCQkJCQllKCkKCQkJCQl9KQoJCQkJfSBlbHNlIGUoKQoJCQl9CgkJfSkuY2FsbCh0LCBuKDYpLCBuKDEpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQl2YXIgaSA9IG4oNDIpOwoJCSJzdHJpbmciID09IHR5cGVvZiBpICYmIChpID0gWwoJCQlbZS5pZCwgaSwgIiJdCgkJXSk7CgkJbig0NCkoaSwge30pOwoJCWkubG9jYWxzICYmIChlLmV4cG9ydHMgPSBpLmxvY2FscykKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJdCA9IGUuZXhwb3J0cyA9IG4oNDMpKCksIHQucHVzaChbZS5pZCwgIiAjZ3dkX2h0X21haW4gYXtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICB9XG4gICAgLmd3ZF9oYWl0YW8ge1xuICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgZm9udC1mYW1pbHk6ICdNaWNyb3NvZnQgWWFoZWknXG4gICAgfVxuICAgICNnd2RfaHRfbWFpbntcbiAgICAgIHdpZHRoOiAzNzZweDtcbiAgICAgIGhlaWdodDogMTk4cHg7XG4gICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCAjZTZlOWViO1xuICAgICAgYm9yZGVyLXJhZGl1czogMThweDtcbiAgICAgIGJveC1zaGFkb3c6IDBweCA1cHggMTlweCAwcHggI2Q3ZDhkOTtcbiAgICB9XG4gICAgI2d3ZF9odF9sb2FkIGltZyB7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICB0b3A6IDkxcHg7XG4gICAgICBsZWZ0OiA3NHB4O1xuICAgIH1cbiAgICAuaHRfNnBte1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgbWFyZ2luOiAwIGF1dG87XG4gICAgfVxuICAgICNnd2RfaHRfbWFpbiAuaHRfaGVhZHtcbiAgICAgIGhlaWdodDogMzZweDtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB9XG4gICAgI2d3ZF9odF9tYWluIC5nd2Rfc2l0ZV9pY29ue1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgYmFja2dyb3VuZDogdXJsKCdodHRwOi8vczEuZ3dkYW5nLmNvbS9pbWFnZXMvZXh0ZW5zaW9ucy9oYWl0YW9fc2l0ZWljb24ucG5nJykgMTNweCA3cHggbm8tcmVwZWF0O1xuICAgICAgYmFja2dyb3VuZC1zaXplOiAyNHB4IDIycHg7XG4gICAgICBoZWlnaHQ6IDM2cHg7XG4gICAgICB3aWR0aDogNTJweDtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIH1cbiAgICAjZ3dkX2h0X21haW4gLnVuaXRfcHJpY2UgI2h0X2FkZGNvbGxlY3R7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCAjZjA3ODYwO1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgaGVpZ2h0OiAyNHB4O1xuICAgICAgbGluZS1oZWlnaHQ6IDI0cHg7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICB3aWR0aDogNzdweDtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgICAgbWFyZ2luLWJvdHRvbTogNnB4O1xuICAgICAgbWFyZ2luLXRvcDogNHB4O1xuICAgICAgY29sb3I6ICNmMDc4NjA7XG4gICAgfVxuICAgICNnd2RfaHRfbWFpbiAudW5pdF9wcmljZSAjaHRfYWRkY29sbGVjdC50cmVuZF93YWl0LmNfYWRkaW5ne1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YwNzg2MDtcbiAgICAgIGNvbG9yOiAjZmZmO1xuICAgIH1cbiAgICAjZ3dkX2h0X21haW4gLnVuaXRfcHJpY2UgI2h0X2FkZGNvbGxlY3QudHJlbmRfd2FpdC5jX2FkZGVke1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YwNzg2MDtcbiAgICAgIGNvbG9yOiAjZmZmO1xuICAgIH1cbiAgICAudW5pdF9wcmljZSA+IHNwYW4ge1xuICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgIH1cbiAgICAucHJpY2VfdGxlIHtcbiAgICAgIG1hcmdpbi1sZWZ0OiAxMnB4O1xuICAgIH1cbiAgICAjZ3dkX2h0X21haW4gLnVuaXRfcHJpY2UgI2h0X2FkZGNvbGxlY3Q6aG92ZXIge1xuICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgIH1cbiAgICAjZ3dkX2h0X21haW4gLnVuaXRfcHJpY2UgI2h0X2FkZGNvbGxlY3Q6aG92ZXIgc3BhbiB7XG4gICAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcbiAgICB9XG4gICAgLmd3ZF9oYWl0YW8gLnByaWNlX251bXtcbiAgICAgIGNvbG9yOiAjNzc4ZTk5O1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgd2lkdGg6IDg5cHg7XG4gICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xuICAgIH1cbiAgICAuZ3dkX2hhaXRhbyAuaHRfZ2V0cHJpY2V7XG4gICAgICB3aWR0aDogMzIycHg7XG4gICAgICBoZWlnaHQ6IDM1cHg7XG4gICAgICBsaW5lLWhlaWdodDogMzVweDtcbiAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgY29sb3I6ICM0NTRBNEQ7XG4gICAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkICNlNmU5ZWI7XG4gICAgfVxuICAgIC5mb250Zl9BcmlhbCB7XG4gICAgICBmb250LWZhbWlseTogXCJBcmlhbFwiO1xuICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgfVxuICAgIC5odF9nZXRwcmljZV9udW0ge1xuICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICBjb2xvcjogI0VCMkYyRjtcbiAgICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICB9XG4gICAgLnVuaXRfcHJpY2V7XG4gICAgICB0ZXh0LWFsaWduOiBsZWZ0O1xuICAgIH1cbiAgICAub25fT3JfT2ZmIHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHRvcDogNTJweDtcbiAgICAgIHJpZ2h0OiAwcHg7XG4gICAgICBoZWlnaHQ6IDIwcHg7XG4gICAgICBsaW5lLWhlaWdodDogMjBweDtcbiAgICAgIHdpZHRoOiAyMHB4O1xuICAgICAgY29sb3I6IHJlZDtcbiAgICB9XG4gICAgLnRyYW5zbGF0ZV9kZXRhaWwge1xuICAgICAgdG9wOiA2NHB4O1xuICAgICAgbGVmdDogMzUwcHg7XG4gICAgfVxuICAgIGEudHJhbnNfaGVscCB7XG4gICAgICBjb2xvcjogIzQwYWNlNjtcbiAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgIG1hcmdpbi1sZWZ0OiA0MHB4O1xuICAgICAgbWFyZ2luLXJpZ2h0OiAzMzBweDtcbiAgICB9XG4gICAgLnRyYW5zX2hlbHA6aG92ZXIge1xuICAgICAgY29sb3I6ICMyYjcyOTk7XG4gICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgfVxuICAgIC5nd2RfaGFpdGFvIC5jb250ZW50X2RlZmF1bHRfbGVmdCAudGFyaWZmX3JlbWluZF9kZXRhaWwge1xuICAgICAgcmlnaHQ6IDI0N3B4O1xuICAgICAgaGVpZ2h0OiA5MHB4O1xuICAgICAgdG9wOiAtMjdweDtcbiAgICB9XG4gICAgLmd3ZF9oYWl0YW8gLmRpdl9kZXRhaWwge1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHdpZHRoOiAxNDZweDtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlNmU5ZWI7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgICAgei1pbmRleDogOTk7XG4gICAgICBsaW5lLWhlaWdodDogMTlweDtcbiAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgIGNvbG9yOiAjODg4O1xuICAgICAgcGFkZGluZzogNnB4IDZweCA5cHggNnB4O1xuICAgICAgYm94LXNoYWRvdzogMnB4IDJweCAxMnB4IDJweCAjZTZlOWViO1xuICAgICAgaGVpZ2h0OiBhdXRvO1xuICAgIH1cbiAgICAuZ3dkX2hhaXRhbyAuY29udGVudF9kZWZhdWx0X2xlZnQgLndlaWdodF90eXBlX2RldGFpbCAge1xuICAgICAgdG9wOiA3cHg7XG4gICAgICBsZWZ0OiAxNTZweDtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHdpZHRoOiAxMTNweDtcbiAgICAgIGhlaWdodDogMjRweDtcbiAgICAgIGxpbmUtaGVpZ2h0OiAyMnB4O1xuICAgICAgcGFkZGluZzogMHB4IDZweDtcbiAgICB9XG4gICAgLmNvbGxlY3RfZGV0YWlsICB7XG4gICAgICB0b3A6IC03cHg7XG4gICAgICBsZWZ0OiAyNDRweDtcbiAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgfVxuICAgIC5nd2RfaGFpdGFvIC50cmFuc3BvcnRfcmVtaW5kX2RldGFpbCB7XG4gICAgICBwYWRkaW5nOiAwcHggNnB4O1xuICAgICAgdG9wOiA5cHg7XG4gICAgICBsZWZ0OiAyNDFweDtcbiAgICAgIHdpZHRoOiAxMTJweDtcbiAgICB9XG4gICAgLmd3ZF9oYWl0YW8gLnRhcmlmZl9pbmZvX2RldGFpbCB7XG4gICAgICBwYWRkaW5nOiAwIDZweDtcbiAgICAgIHdpZHRoOiAxMTBweDtcbiAgICAgIHRvcDogOXB4O1xuICAgICAgbGVmdDogMjQxcHg7XG4gICAgfVxuICAgIC5wcm9fdHlwZV9kZXRhaWwge1xuICAgICAgdG9wOiA5cHg7XG4gICAgICBsZWZ0OiAzNTBweDtcbiAgICB9XG4gICAgLmd3ZF9oYWl0YW8gLnByb190eXBlX2RldGFpbC5kaXZfZGV0YWlsIHtcbiAgICAgIHBhZGRpbmc6IDAgNnB4O1xuICAgICAgd2lkdGg6IDEzNHB4O1xuICAgIH1cbiAgICAubWFpbF90eXBlX2RldGFpbCB7XG4gICAgICB0b3A6IDMzcHg7XG4gICAgICBsZWZ0OiAzNTBweDtcbiAgICB9XG4gICAgI2h0X3RyYW5zX2lucHV0e1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgdG9wOiA4cHg7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgfVxuICAgIC5zaXplX2RldGFpbCB7XG4gICAgICB0b3A6IDEzMHB4O1xuICAgICAgbGVmdDogMzUwcHg7XG4gICAgfVxuICAgIC5nd2RfaGFpdGFvIC5zaXplX2RldGFpbC5kaXZfZGV0YWlsIHtcbiAgICAgIHBhZGRpbmc6IDBweCA2cHg7XG4gICAgICB3aWR0aDogMTEwcHg7XG4gICAgfVxuICAgIC50cmFuc19sYWJlbHtcbiAgICAgIGhlaWdodDogMzBweDtcbiAgICAgIGxpbmUtaGVpZ2h0OiAzMHB4O1xuICAgICAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcbiAgICB9XG4gICAgLmh0X3RyYW5zbGF0ZTpob3ZlciB7XG4gICAgICBjdXJzb3I6IHRleHQ7XG4gICAgfVxuICAgIC5odF90cmFuc2xhdGUsLnByb190eXBlLC5tYWlsX3R5cGV7XG4gICAgICB0ZXh0LWFsaWduOiBsZWZ0O1xuICAgIH1cbiAgICAucHJvX3R5cGU6aG92ZXIsLm1haWxfdHlwZTpob3ZlciB7XG4gICAgICBjdXJzb3I6IHRleHQ7XG4gICAgfVxuICAgIC5nd2RfaGFpdGFvIC5odF9nZXRwcmljZTpob3ZlcntcbiAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICAgIGNvbG9yOiAjNDU0QTREO1xuICAgIH1cbiAgICAuZ3dkX2hhaXRhbyAuaHRfd2VpZ2h0X251bXtcbiAgICAgIGhlaWdodDogMjBweDtcbiAgICAgIHdpZHRoOiA1NHB4O1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICBib3JkZXItcmFkaXVzOiBpbmhlcml0O1xuICAgICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogNHB4O1xuICAgICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogNHB4O1xuICAgICAgYm9yZGVyLXJpZ2h0OiBub25lO1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgbWFyZ2luLXRvcDogOXB4O1xuICAgICAgbWFyZ2luLWxlZnQ6IDE1cHg7XG4gICAgICBwYWRkaW5nOiAwIDNweDtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM0N2JlZmU7XG4gICAgICBib3gtc2l6aW5nOiBpbml0aWFsO1xuICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgIH1cbiAgICAuZ3dkX2hhaXRhbyAud2VpZ2h0X3R5cGV7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICBoZWlnaHQ6IDIycHg7XG4gICAgICB3aWR0aDogMjRweDtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICM0N2JlZmU7XG4gICAgICBjb2xvcjogI2ZmZjtcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIGxpbmUtaGVpZ2h0OiAyMnB4O1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgbWFyZ2luLXRvcDogOXB4O1xuICAgICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDRweDtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiA0cHg7XG4gICAgfVxuICAgIC5nd2RfaGFpdGFvIC5jb250ZW50X2RlZmF1bHRfbGVmdHtcbiAgICAgIGhlaWdodDogMTYwcHg7XG4gICAgICB3aWR0aDogMjU0cHg7XG4gICAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjZTZlOWViO1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgfVxuICAgIC5nd2RfaGFpdGFvIC5odF93ZWlnaHQgc3BhbiB7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICB9XG4gICAgLmh0X3dlaWdodCAud2VpZ2h0X3RsZSB7XG4gICAgICBtYXJnaW4tbGVmdDogMTJweDtcbiAgICB9IFxuICAgIC5jb250ZW50X2RlZmF1bHRfbGVmdCBkaXZ7XG4gICAgICBoZWlnaHQ6IDQwcHg7XG4gICAgICBsaW5lLWhlaWdodDogNDBweDtcbiAgICAgIGNvbG9yOiAjMzczNzM3O1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlNmU5ZWJcbiAgICB9XG4gICAgLmd3ZF9oYWl0YW8gLmNvbnRlbnRfZGVmYXVsdF9sZWZ0IGRpdi5odF90YXJpZmYge1xuICAgICAgYm9yZGVyLWJvdHRvbTogbm9uZTtcbiAgICB9XG4gICAgLmd3ZF9oYWl0YW8gLmh0X3RyYW5zcG9ydF9idG4sLmd3ZF9oYWl0YW8gLmh0X3RhcmlmZl9idG57XG4gICAgICBmbG9hdDogcmlnaHQ7XG4gICAgICBtYXJnaW4tcmlnaHQ6IDE1cHg7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICBjb2xvcjogIzQwYWNlNjtcbiAgICB9XG4gICAgLmd3ZF9oYWl0YW8gLmh0X3RyYW5zcG9ydF9idG46aG92ZXIsLmh0X3RhcmlmZl9idG46aG92ZXJ7XG4gICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgICBjb2xvcjogIzQwYWNlNjtcbiAgICB9XG4gICAgLmd3ZF9oYWl0YW8gLmh0X2ZyZWlnaHRfbnVte1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgd2lkdGg6IDQycHg7XG4gICAgICBjb2xvcjogIzc3OGU5OTtcbiAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICB9XG4gICAgLmd3ZF9oYWl0YW8gLmh0X2ZyZWlnaHQsLmd3ZF9oYWl0YW8gLmRlbF9saW5le1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgIG1hcmdpbi1sZWZ0OiAxMnB4O1xuICAgIH1cbiAgICBhLmh0X3RyYW5zcG9ydF9idG4gc3BhbiwgLmh0X3RhcmlmZl9idG4gc3BhbiB7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICB3aWR0aDogNjBweDtcbiAgICAgIGhlaWdodDogNDBweDtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgIG1hcmdpbi1yaWdodDogNXB4O1xuICAgIH1cbiAgICBhLmh0X3RyYW5zcG9ydF9idG4gc3Bhbjpob3ZlciwgLmh0X3RhcmlmZl9idG4gc3Bhbjpob3ZlciB7XG4gICAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcbiAgICB9XG4gICAgLmd3ZF9oYWl0YW8gLnBvaW50X2ljb257XG4gICAgICBiYWNrZ3JvdW5kOiB1cmwoJ2h0dHA6Ly9zMS5nd2RhbmcuY29tL2ltYWdlcy9leHRlbnNpb25zL2hhaXRhb19kb3duYmx1ZWljb24ucG5nJykgMHB4IDBweCBuby1yZXBlYXQ7XG4gICAgICBiYWNrZ3JvdW5kLXNpemU6IDlweCA2cHg7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICBoZWlnaHQ6IDlweDtcbiAgICAgIHdpZHRoOiAxMHB4O1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgdG9wOiAxcHg7XG4gICAgfVxuICAgIC5nd2RfaGFpdGFvIC5kZWxfbGluZXtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIHdpZHRoOiA5OHB4O1xuICAgIH1cbiAgICAuZ3dkX2hhaXRhbyAuZGVsX2xpbmUgLmh0X3RhcmlmZl9udW0ge1xuICAgICAgdGV4dC1kZWNvcmF0aW9uOiBsaW5lLXRocm91Z2g7XG4gICAgICBjb2xvcjogIzc3OGU5OTtcbiAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICB9XG4gICAgLmd3ZF9oYWl0YW8gLmRlbF9saW5lIC5odF90YXJpZmZfbnVtIGVtIHtcbiAgICAgIGZvbnQtc3R5bGU6IG5vcm1hbDtcbiAgICB9XG4gICAgLmd3ZF9oYWl0YW8gLmNvbnRlbnRfZGVmYXVsdF9yaWdodHtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIGhlaWdodDogMTYwcHg7XG4gICAgICB3aWR0aDogMTE5cHg7XG4gICAgfVxuICAgIC5nd2RfaGFpdGFvIC5jb250ZW50X2RlZmF1bHRfcmlnaHQgYXtcbiAgICAgIHdpZHRoOiAxMjBweDtcbiAgICAgIGhlaWdodDogNDBweDtcbiAgICAgIGxpbmUtaGVpZ2h0OiA0MHB4O1xuICAgICAgY29sb3I6ICMzODM4MzU7XG4gICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2U2ZTllYjtcbiAgICAgIHBhZGRpbmc6IDAgMCAwIDE0cHg7XG4gICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgfVxuICAgIC5nd2RfaGFpdGFvIC5jb250ZW50X2RlZmF1bHRfcmlnaHQgYSBzcGFuIHtcbiAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgIG1hcmdpbi1sZWZ0OiA3cHg7XG4gICAgfVxuICAgIC5nd2RfaGFpdGFvIC5jb250ZW50X2RlZmF1bHRfcmlnaHQgYTpob3ZlcntcbiAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICAgIGNvbG9yOiAjMzgzODM1O1xuICAgIH1cbiAgICAjZ3dkX2h0X21haW4gLnNpemVfaGVscHtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIGJvcmRlci1ib3R0b206IG5vbmU7XG4gICAgfVxuICAgICNnd2RfaHRfbWFpbiAuc2l6ZV9oZWxwIHNwYW4ge1xuICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgICAgY29sb3I6ICM1YWE0Y2M7XG4gICAgfVxuICAgICNnd2RfaHRfbWFpbiAuc2l6ZV9oZWxwIHNwYW46aG92ZXIge1xuICAgICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XG4gICAgfVxuICAgIC5nd2RfaGFpdGFvIC5jb250ZW50X2RlZmF1bHRfcmlnaHQgZW17XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICB3aWR0aDogMjBweDtcbiAgICAgIGhlaWdodDogMjBweDtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIHRvcDogNXB4O1xuICAgIH1cbiAgICAuZ3dkX2hhaXRhbyAuc2l6ZV9oZWxwIGVte1xuICAgICAgYmFja2dyb3VuZDogdXJsKCdodHRwOi8vczEuZ3dkYW5nLmNvbS9pbWFnZXMvZXh0ZW5zaW9ucy9oYWl0YW9fc2l6ZWljb24ucG5nJykgMHB4IDBweCBuby1yZXBlYXQ7XG4gICAgICBiYWNrZ3JvdW5kLXNpemU6IDIwcHggMjBweDtcbiAgICB9XG4gICAgLmd3ZF9oYWl0YW8gLmh0X3RyYW5zbGF0ZSBlbXtcbiAgICAgIGJhY2tncm91bmQ6IHVybCgnaHR0cDovL3MxLmd3ZGFuZy5jb20vaW1hZ2VzL2V4dGVuc2lvbnMvaGFpdGFvX3RyYW5zaWNvbi5wbmcnKSAwcHggMHB4IG5vLXJlcGVhdDtcbiAgICAgIGJhY2tncm91bmQtc2l6ZTogMjBweCAyMHB4O1xuICAgIH1cbiAgICAuZ3dkX2hhaXRhbyAucHJvX3R5cGUgLnppeWluZ3tcbiAgICAgIGJhY2tncm91bmQ6IHVybCgnaHR0cDovL3MxLmd3ZGFuZy5jb20vaW1hZ2VzL2V4dGVuc2lvbnMvaGFpdGFvX3ppeWluZ2ljb24ucG5nJykgMHB4IDBweCBuby1yZXBlYXQ7XG4gICAgfVxuICAgIC5nd2RfaGFpdGFvIC5wcm9fdHlwZSAuc2FuZmFuZ3tcbiAgICAgIGJhY2tncm91bmQ6IHVybCgnaHR0cDovL3MxLmd3ZGFuZy5jb20vaW1hZ2VzL2V4dGVuc2lvbnMvaGFpdGFvX3Nhbmljb24ucG5nJykgMHB4IDBweCBuby1yZXBlYXQ7XG4gICAgICBiYWNrZ3JvdW5kLXNpemU6IDIwcHggMjBweDtcbiAgICB9XG4gICAgLmd3ZF9oYWl0YW8gLm1haWxfdHlwZSAuemhpeW91e1xuICAgICAgYmFja2dyb3VuZDogdXJsKCdodHRwOi8vczEuZ3dkYW5nLmNvbS9pbWFnZXMvZXh0ZW5zaW9ucy9oYWl0YW9femhpaWNvbi5wbmcnKSAwcHggMHB4IG5vLXJlcGVhdDtcbiAgICB9XG4gICAgLmd3ZF9oYWl0YW8gLm1haWxfdHlwZSAuZmVpemhpeW91e1xuICAgICAgYmFja2dyb3VuZDogdXJsKCdodHRwOi8vczEuZ3dkYW5nLmNvbS9pbWFnZXMvZXh0ZW5zaW9ucy9oYWl0YW9femh1YW5pY29uLnBuZycpIDBweCAwcHggbm8tcmVwZWF0O1xuICAgICAgYmFja2dyb3VuZC1zaXplOiAyMHB4IDIwcHg7XG4gICAgfVxuICAgIC5nd2RfaGFpdGFvIC5zYW1lLXN0eWxlIGVtIHtcbiAgICAgIGJhY2tncm91bmQ6IHVybCgnaHR0cDovL3MxLmd3ZGFuZy5jb20vaW1hZ2VzL2V4dGVuc2lvbnMvaGFpdGFvX3NhbWVzdHlsZS5wbmcnKSAwcHggMHB4IG5vLXJlcGVhdDtcbiAgICB9XG4gICAgLmd3ZF9oYWl0YW8gLnZpcF90bGUgZW0ge1xuICAgICAgYmFja2dyb3VuZDogdXJsKCdodHRwOi8vczEuZ3dkYW5nLmNvbS9pbWFnZXMvZXh0ZW5zaW9ucy9oYWl0YW9fdmlwaWNvbi5wbmcnKSAwcHggMHB4IG5vLXJlcGVhdDtcbiAgICB9XG4gICAgLmd3ZF9oYWl0YW8gLmd3ZF93aXNobGlzdF90cmVuZF9kZXRhaWxfd3JhcHBlcntcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgIH1cbiAgICAuZ3dkX2hhaXRhbyAuaHRfY29udGVudHtcbiAgICAgIGhlaWdodDogMTYycHg7XG4gICAgICBib3JkZXItdG9wOiAxcHggc29saWQgI2U2ZTllYjtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB9XG4gICAgLmNvbnRlbnRfZGVmYXVsdCB7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICB9XG4gICAgLmNvbnRlbnRfZGVmYXVsdDphZnRlciwgLmd3ZF9oYWl0YW8gLmNvbnRlbnRfZGVmYXVsdF9yaWdodDphZnRlciB7XG4gICAgICBjb250ZW50OiBcIlwiO1xuICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICBjbGVhcjogYm90aDtcbiAgICB9XG4gICAgLyog5YWz56iO5YiG57G76YCJ5oupICovXG4gICAgI3RhcmlmZl9kZXRhaWx7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBkaXNwbGF5Om5vbmU7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgICAgei1pbmRleDogOTk5OTk5OTk7XG4gICAgICB0b3A6IDBweDtcbiAgICAgIGxlZnQ6IDBweDtcbiAgICAgIHdpZHRoOiAyOTBweDtcbiAgICAgIGhlaWdodDogMTgwcHg7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCAjZTZlOWViO1xuICAgICAgYm94LXNoYWRvdzogMHB4IDVweCAxOXB4IDBweCAjZDdkOGQ5O1xuICAgIH1cbiAgICAjdGFyaWZmX2RldGFpbCAueGlhbGFib3ggYXtcbiAgICAgIGRpc3BsYXk6YmxvY2s7XG4gICAgICBjb2xvcjogIzVjNjI2NjtcbiAgICAgIG1hcmdpbi1sZWZ0OiA3cHg7XG4gICAgICB3aWR0aDogOThweDtcbiAgICAgIGhlaWdodDogMjVweDtcbiAgICAgIGxpbmUtaGVpZ2h0OiAyNXB4O1xuICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICB9XG4gICAgI3RhcmlmZl9kZXRhaWwgLnhpYWxhYm94IGE6aG92ZXJ7XG4gICAgICBjb2xvcjogIzQ3YmVmZTtcbiAgICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xuICAgIH1cbiAgICAjdGFyaWZmX2RldGFpbCAudGFyX2hlYWR7XG4gICAgICBoZWlnaHQ6IDQwcHg7XG4gICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2U2ZTllYjtcbiAgICB9XG4gICAgI3RhcmlmZl9kZXRhaWwgLnRhcl9kZXNjICwgI3RhcmlmZl9kZXRhaWwgLnRhcl9oZWFkIHtcbiAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICB9XG4gICAgI3RhcmlmZl9kZXRhaWwgLnRhcl9oZWFkIHNwYW57XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICBoZWlnaHQ6IDM0cHg7XG4gICAgICBsaW5lLWhlaWdodDogMzVweDtcbiAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIHdpZHRoOiAyNzFweDtcbiAgICB9XG4gICAgI3RhcmlmZl9kZXRhaWwgLmh0X3RhcmlmZl9udW0sIC5odF90YXJpZmZfY2F0ZSB7XG4gICAgICBjb2xvcjogIzQwYWNlNjtcbiAgICB9XG4gICAgLmh0X3RhcmlmZl9jYXRlIHtcbiAgICAgIHdpZHRoOiA3MHB4O1xuICAgICAgaGVpZ2h0OiAyMHB4O1xuICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIGxpbmUtaGVpZ2h0OiAyMHB4O1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgdG9wOiA1cHg7XG4gICAgfVxuICAgICN0YXJpZmZfZGV0YWlsIC5kZWxfbGluZSB7XG4gICAgICB3aWR0aDogMTE4cHg7XG4gICAgfVxuICAgIC5nd2RfaGFpdGFvIC50YXJfZGVzY3tcbiAgICAgIGxpbmUtaGVpZ2h0OiAzNXB4O1xuICAgIH1cbiAgICAuZ3dkX2hhaXRhbyAudGFyX2Rlc2MgLmRlbF9saW5le1xuICAgICAgbWFyZ2luOiAwIDAgMCAyMHB4O1xuICAgIH1cbiAgICAuZ3dkX2hhaXRhbyAudGFyX2Rlc2MgLmRlc2NfdHtcbiAgICAgIG1hcmdpbi1sZWZ0OiA5cHg7XG4gICAgfVxuICAgICNjYXRlX3NlbGVjdF9ib3h7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICBtYXJnaW4tdG9wOiA0cHg7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgfVxuICAgIC5nd2RfaGFpdGFvICNjYXRlX3NlbGVjdF9ib3ggaW5wdXR7XG4gICAgICBoZWlnaHQ6IDMwcHg7XG4gICAgICB3aWR0aDogMTA5cHg7XG4gICAgICBiYWNrZ3JvdW5kOiB1cmwoJ2h0dHA6Ly9zMS5nd2RhbmcuY29tL2ltYWdlcy9leHRlbnNpb25zL2hhaXRhb19kb3duZ3JheWljb24ucG5nJykgbm8tcmVwZWF0IDg5cHggMTFweDtcbiAgICAgIGJhY2tncm91bmQtc2l6ZTogMTJweCA3cHg7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCAjZmZmO1xuICAgICAgYm94LXNoYWRvdzogbm9uZTtcbiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICBwYWRkaW5nOiAzcHggN3B4O1xuICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgY29sb3I6ICM5Y2E3YWQ7XG4gICAgICBmb250LXNpemU6IDEycHg7XG4gICAgfVxuICAgIC5nd2RfaGFpdGFvICNjYXRlX3NlbGVjdF9ib3ggaW5wdXQuc2VsX2luZm97XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTFlMWUxO1xuICAgIH1cbiAgICAuZ3dkX2hhaXRhbyAjY2F0ZV9zZWxlY3RfYm94IGlucHV0LmlucHV0X2hvdmVye1xuICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNmZmY7XG4gICAgICBjb2xvcjogIzljYTdhZDtcbiAgICB9XG4gICAgLmd3ZF9oYWl0YW8gLmNhdGVfc2VsZWN0XzF7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIG1hcmdpbi1sZWZ0OiAyMnB4O1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgIzk2OTg5OTtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB9XG4gICAgLmd3ZF9oYWl0YW8gLmNhdGVfc2VsZWN0XzEuc2VsZWN0X2hvdmVyICwgLmd3ZF9oYWl0YW8gLmNhdGVfc2VsZWN0XzIuc2VsZWN0X2hvdmVye1xuICAgICAgaGVpZ2h0OiAyMThweDtcbiAgICAgIHotaW5kZXg6IDk5OTk7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuXG4gICAgfVxuICAgIC5nd2RfaGFpdGFvIC5jYXRlX3NlbGVjdF8ye1xuICAgICAgbWFyZ2luLWxlZnQ6IDE2cHg7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCAjOTY5ODk5O1xuICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgfVxuICAgIC5nd2RfaGFpdGFvIC54aWFsYWJveHtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgICAgb3ZlcmZsb3cteTogc2Nyb2xsO1xuICAgICAgb3ZlcmZsb3cteDogaGlkZGVuO1xuICAgICAgaGVpZ2h0OiAxODVweDtcbiAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgICBib3JkZXItdG9wOiBub25lO1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgd2lkdGg6IDEwOXB4O1xuICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgIH1cbiAgICAuaWVfaGFjay5nd2RfaGFpdGFvIC54aWFsYWJveCB7XG4gICAgICB3aWR0aDogMTExcHg7XG4gICAgfVxuICAgIC5nd2RfaGFpdGFvICNzZWxlY3RfYnRue1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgd2lkdGg6IDYwcHg7XG4gICAgICBoZWlnaHQ6IDI0cHg7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDdiZWZlO1xuICAgICAgYm9yZGVyLXJhZGl1czogMTJweDtcbiAgICAgIG1hcmdpbjogMCBhdXRvO1xuICAgICAgY29sb3I6ICNmZmY7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICBsaW5lLWhlaWdodDogMjNweDtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHRvcDogNTRweDtcbiAgICAgIGxlZnQ6IDExNnB4O1xuICAgIH1cbiAgICAjdHJhbnNwb3J0X2RldGFpbHtcbiAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgIHdpZHRoOiA3NTVweDtcbiAgICAgIGhlaWdodDogMzE0cHg7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCAjZTZlOWViO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICAgIHRvcDogNDAwcHg7XG4gICAgICBsZWZ0OiA0MDBweDtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICB6LWluZGV4OiA5OTk5OTtcbiAgICAgIGJveC1zaGFkb3c6IDBweCA1cHggMTlweCAwcHggI2Q3ZDhkOTtcbiAgICB9XG4gICAgI3RyYW5zcG9ydF9kZXRhaWwgKntcbiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgfVxuICAgICN0cmFuc3BvcnRfZGV0YWlsIC50cmFuc19uYXYgLnNwYW5fMCB7XG4gICAgICBtYXJnaW4tbGVmdDogMTBweDtcbiAgICB9XG4gICAgI3RyYW5zcG9ydF9kZXRhaWwgLnRyYW5zX25hdiAuc3Bhbl8xe1xuICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICAgIHdpZHRoOiAxNDZweDtcbiAgICAgIG1hcmdpbi1sZWZ0OiAxN3B4O1xuICAgIH1cbiAgICAjdHJhbnNwb3J0X2RldGFpbCAudHJhbnNfbmF2IC5zcGFuXzJ7XG4gICAgICB0ZXh0LWFsaWduOiBsZWZ0O1xuICAgICAgd2lkdGg6IDE0N3B4O1xuICAgICAgbWFyZ2luLWxlZnQ6IDRweDtcbiAgICB9XG4gICAgLmh0X3RyYW5zX2RldGFpbCAudHJhbnNfaGVhZHtcbiAgICAgIGhlaWdodDogNTFweDtcbiAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZTZlOWViO1xuICAgIH1cbiAgICAuZ3dkX2hhaXRhbyAuY2xvc2ViYXJ7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICBmb250LXNpemU6IDMwcHg7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICB0b3A6IDRweDtcbiAgICAgIHJpZ2h0OiA3cHg7XG4gICAgICBjb2xvcjogIzY2NjtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB9XG4gICAgLmd3ZF9oYWl0YW8gLmNsb3NlYmFyLmNsb3NlYmcge1xuICAgICAgYmFja2dyb3VuZDogdXJsKFwiaHR0cDovL3MxLmd3ZGFuZy5jb20vaW1hZ2VzL2V4dGVuc2lvbnMvaGFpdGFvX2Nsb3NlaWNvbi5wbmdcIikgNnB4IDZweCBuby1yZXBlYXQ7XG4gICAgICBiYWNrZ3JvdW5kLXNpemU6IDlweCA5cHg7XG4gICAgICBoZWlnaHQ6IDIycHg7XG4gICAgICB3aWR0aDogMjJweDtcbiAgICAgIHRvcDogMXB4O1xuICAgICAgcmlnaHQ6IDFweDtcbiAgICB9XG4gICAgLmd3ZF9oYWl0YW8gLmNsb3NlYmFyLmNsb3NlYmc6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZDogdXJsKFwiaHR0cDovL3MxLmd3ZGFuZy5jb20vaW1hZ2VzL2V4dGVuc2lvbnMvaGFpdGFvX2Nsb3NlaG92ZXJpY29uLnBuZ1wiKSAzcHggM3B4IG5vLXJlcGVhdDtcbiAgICAgIGJhY2tncm91bmQtc2l6ZTogMTVweCAxNXB4O1xuICAgIH1cbiAgICAuaHRfdHJhbnNfZGV0YWlsIC50cmFuc19uYXZ7XG4gICAgICBkaXNwbGF5OmlubGluZS1ibG9jaztcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgd2lkdGg6IDc1M3B4O1xuICAgIH1cbiAgICAuaHRfdHJhbnNfZGV0YWlsIC50cmFuc19uYXY+c3BhbntcbiAgICAgIHdpZHRoOiAxMjBweDtcbiAgICAgIGNvbG9yOiAjNWM2MjY2O1xuICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgaGVpZ2h0OiA0OHB4O1xuICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIGxpbmUtaGVpZ2h0OiA0OHB4O1xuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIH1cbiAgICAuaHRfdHJhbnNfZGV0YWlsIC50cmFuc19uYXYgLnNwYW5fMyB7XG4gICAgICB3aWR0aDogMTk2cHg7XG4gICAgICB0ZXh0LWFsaWduOiBsZWZ0O1xuICAgICAgY29sb3I6ICM0MDY5ODA7XG4gICAgICBtYXJnaW4tbGVmdDogMzVweDtcbiAgICB9XG4gICAgLmh0X3RyYW5zX2RldGFpbCAudHJhbnNfbmF2IC50cmFuc193e1xuICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHRvcDogMTRweDtcbiAgICAgIGxlZnQ6IDM1MnB4O1xuICAgICAgaGVpZ2h0OiAyMHB4O1xuICAgIH1cbiAgICAuaHRfdHJhbnNfZGV0YWlsIC50cmFuc193IC53ZWlnaHRfdHlwZXtcbiAgICAgIGhlaWdodDogMjBweDtcbiAgICAgIHdpZHRoOiAyNnB4O1xuICAgICAgbWFyZ2luLXRvcDogMHB4O1xuICAgICAgbGluZS1oZWlnaHQ6IDIwcHg7XG4gICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG4gICAgfVxuICAgIC5odF90cmFuc19kZXRhaWwgLnRyYW5zX3cgLmh0X3dlaWdodF9udW17XG4gICAgICBoZWlnaHQ6IDIwcHg7XG4gICAgICBwb3NpdGlvbjogc3RhdGljO1xuICAgICAgd2lkdGg6IDQ5cHg7XG4gICAgICBtYXJnaW4tdG9wOiAwcHg7XG4gICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICBib3JkZXItY29sb3I6ICM4ZGMyZTU7XG4gICAgfVxuICAgIC5nd2RfaGFpdGFvIC50cmFuc19jb250ZW50IHtcbiAgICAgIGhlaWdodDogMjEwcHg7XG4gICAgICB3aWR0aDogNzUxcHg7XG4gICAgICBvdmVyZmxvdy15OiBzY3JvbGw7XG4gICAgfVxuICAgIC5odF90cmFuc19kZXRhaWwgLnRyYW5zX2Zvb3QsLnNpemVfZGVzYyB7XG4gICAgICBjb2xvcjogIzlmOWY5ZjtcbiAgICAgIGxpbmUtaGVpZ2h0OiAzNXB4O1xuICAgIH1cbiAgICAuaHRfdHJhbnNfZGV0YWlsIC50cmFuc19mb290IHtcbiAgICAgIGhlaWdodDogNTBweDtcbiAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZTZlOWViO1xuICAgICAgbGluZS1oZWlnaHQ6IDUwcHg7XG4gICAgfVxuICAgIC5nd2RfaGFpdGFvIC5yZWR7XG4gICAgICBjb2xvcjogI2U3MjAzMDtcbiAgICB9XG4gICAgLmd3ZF9oYWl0YW8gc3Bhbi5yZWQge1xuICAgICAgYmFja2dyb3VuZDogdXJsKCdodHRwOi8vczEuZ3dkYW5nLmNvbS9pbWFnZXMvZXh0ZW5zaW9ucy9oYWl0YW9fc3Rhcmljb24ucG5nJykgMHB4IDFweCBuby1yZXBlYXQ7XG4gICAgICBiYWNrZ3JvdW5kLXNpemU6IDhweCA5cHg7XG4gICAgICBoZWlnaHQ6IDEwcHg7XG4gICAgICB3aWR0aDogMTBweDtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICB9XG4gICAgLmh0X3RyYW5zX2RldGFpbCAudHJhbnNfZm9vdCAucmVkK3NwYW57XG4gICAgICBjb2xvcjogIzkxOTY5OTtcbiAgICB9XG4gICAgLmh0X3RyYW5zX2RldGFpbCAjdHJhbnNfbGlzdHtcbiAgICAgIG1hcmdpbjogMHB4O1xuICAgICAgcGFkZGluZzogMHB4O1xuICAgIH1cbiAgICAuaHRfdHJhbnNfZGV0YWlsICN0cmFuc19saXN0IGxpe1xuICAgICAgbGlzdC1zdHlsZTogbm9uZTtcbiAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgY29sb3I6ICMzMzM7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB0ZXh0LWFsaWduOiBsZWZ0O1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICB9XG4gICAgLmh0X3RyYW5zX2RldGFpbCAjdHJhbnNfbGlzdCBsaTphZnRlcntcbiAgICAgIGRpc3BsYXk6YmxvY2s7XG4gICAgICBjbGVhcjpib3RoO1xuICAgICAgY29udGVudDpcIlwiO1xuICAgICAgdmlzaWJpbGl0eTpoaWRkZW47XG4gICAgICBoZWlnaHQ6MDtcbiAgICB9XG4gICAgLmd3ZF9oYWl0YW8gI3RyYW5zX2xpc3QgbGk6aG92ZXJ7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRTFFMUU2O1xuICAgIH1cbiAgICAuaHRfdHJhbnNfZGV0YWlsICN0cmFuc19saXN0IGxpPnNwYW4sIC5odF90cmFuc19kZXRhaWwgI3RyYW5zX2xpc3QgbGk+YXtcbiAgICAgIGRpc3BsYXk6aW5saW5lLWJsb2NrO1xuICAgICAgbWFyZ2luLXRvcDogOHB4O1xuICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICB0ZXh0LWFsaWduOiBsZWZ0O1xuICAgICAgd2hpdGUtc3BhY2U6IHByZS13cmFwO1xuICAgICAgY29sb3I6ICM1YzYyNjY7XG4gICAgfVxuICAgIC5odF90cmFuc19kZXRhaWwgI3RyYW5zX2xpc3QgbGkgYTpob3ZlciB7XG4gICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgfVxuICAgIHNwYW4uc2FsZV90bGUge1xuICAgICAgd2lkdGg6IDIyNXB4O1xuICAgICAgbWFyZ2luLWxlZnQ6IDM2cHg7XG4gICAgICBsaW5lLWhlaWdodDogMTZweDtcbiAgICB9XG4gICAgc3Bhbi5zYWxlX3RsZSBhe1xuICAgICAgY29sb3I6ICM0MGFjZTY7XG4gICAgfVxuICAgIHNwYW4uc2FsZV90bGUgYTpob3ZlciB7XG4gICAgICBjb2xvcjogIzJiNzI5OTtcbiAgICB9XG4gICAgLmh0X3RyYW5zX2RldGFpbCAubG9fY2VudGVye1xuICAgICAgbWFyZ2luLWxlZnQ6IDI0cHg7XG4gICAgICB3aWR0aDogMTIwcHg7XG4gICAgICBsaW5lLWhlaWdodDogMTZweDtcbiAgICB9XG4gICAgLmh0X3RyYW5zX2RldGFpbCBzcGFuLnRyYW5zX2NhdGUge1xuICAgICAgd2lkdGg6IDEzMHB4O1xuICAgICAgbWFyZ2luLWxlZnQ6IDE2cHg7XG4gICAgfVxuICAgIC5odF90cmFuc19kZXRhaWwgc3Bhbi50cmFuc19wciB7XG4gICAgICB3aWR0aDogMTQ2cHg7XG4gICAgICBtYXJnaW4tbGVmdDogMzBweDtcbiAgICAgIGxpbmUtaGVpZ2h0OiAxNnB4O1xuICAgIH1cbiAgICAuaHRfdHJhbnNfZGV0YWlsIGEudHJhbnNfY29tIHtcbiAgICAgIHdpZHRoOiA4NXB4O1xuICAgICAgbWFyZ2luLWxlZnQ6IDM5cHg7XG4gICAgICBsaW5lLWhlaWdodDogMTZweDtcbiAgICAgIGNvbG9yOiAjMzMzO1xuICAgIH1cbiAgICAuaHRfdHJhbnNfZGV0YWlsIGEudHJhbnNfY29tOmhvdmVyIHtcbiAgICAgIGNvbG9yOiAjMDA2NmMwO1xuICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgIH1cbiAgICAvKiDmsqHmnInkvJjmg6DmlL/nrZbnmoTmg4XlhrUgKi9cbiAgICAjdHJhbnNwb3J0X2RldGFpbC5ub19zYWxlIHtcbiAgICAgIHdpZHRoOiA0OTBweDtcbiAgICB9XG4gICAgLm5vX3NhbGUuaHRfdHJhbnNfZGV0YWlsIC50cmFuc19uYXYge1xuICAgICAgd2lkdGg6IDQzNnB4O1xuICAgIH1cbiAgICAubm9fc2FsZS5nd2RfaGFpdGFvIC50cmFuc19jb250ZW50IHtcbiAgICAgIHdpZHRoOiA0NDRweDtcbiAgICB9XG4gICAgLm5vX3NhbGUuaHRfdHJhbnNfZGV0YWlsIC50cmFuc19uYXYgLnNwYW5fMyB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgICAjdHJhbnNwb3J0X2RldGFpbC5ub19zYWxlIHNwYW4uc2FsZV90bGUge1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG4gICAgLyog5bC656CB5biu5YqpICovXG4gICAgI3NpemVfZGV0YWlse1xuICAgICAgd2lkdGg6IDYxOHB4O1xuICAgICAgaGVpZ2h0OiA0NDBweDtcbiAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgIHRvcDogNDAwcHg7XG4gICAgICBsZWZ0OiA0MDBweDtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICB0ZXh0LWFsaWduOiBsZWZ0O1xuICAgICAgei1pbmRleDogOTk5OTk5OTtcbiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgI2U2ZTllYjsgXG4gICAgICBib3gtc2hhZG93OiAwcHggNXB4IDE5cHggMHB4ICNkN2Q4ZDk7ICAgICAgIFxuICAgIH1cbiAgICAuaHRfc2l6ZV9kZXRhaWwgLnNoYW5neWksIC50b25nemh1YW5nMCwgLnRvbmd4aWUwe1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgbGVmdDogMzhweDtcbiAgICB9XG4gICAgLmh0X3NpemVfZGV0YWlsIC54aWF6aHVhbmcsIC50b25nemh1YW5nNCwgLnRvbmd4aWU0e1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgdG9wOiA1MHB4O1xuICAgICAgbGVmdDogMzhweDtcbiAgICB9XG4gICAgLmh0X3NpemVfZGV0YWlsIC5zaG9lcywuaHRfc2l6ZV9kZXRhaWwgLnRvbmd6aHVhbmcsIC5odF9zaXplX2RldGFpbCAudG9uZ3hpZXtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgfVxuICAgIC5odF9zaXplX2RldGFpbCBzcGFuLnNob2VzIHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHRvcDogMzlweDtcbiAgICAgIGxlZnQ6IDM4cHg7XG4gICAgICBjb2xvcjogI2ZmZjtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICM0N2JlZmU7XG4gICAgICBib3JkZXI6ICAxcHggc29saWQgIzQ3YmVmZTtcbiAgICB9XG4gICAgLmh0X3NpemVfZGV0YWlsIC5zaGFuZ3lpLnNpemVfaG92ZXIsLmh0X3NpemVfZGV0YWlsIC54aWF6aHVhbmcuc2l6ZV9ob3ZlciwgLmh0X3NpemVfZGV0YWlsIC54aWF6aHVhbmcuc2l6ZV9ob3ZlciwgLmh0X3NpemVfZGV0YWlsIC50b25nemh1YW5nLnNpemVfaG92ZXIsIC5odF9zaXplX2RldGFpbCAudG9uZ3hpZS5zaXplX2hvdmVye1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzQ3YmVmZTtcbiAgICAgIGJvcmRlcjogIDFweCBzb2xpZCAjNDdiZWZlO1xuICAgICAgY29sb3I6ICNmZmY7XG4gICAgfVxuICAgIC5odF9zaXplX2RldGFpbCAuc2hhbmd5aSwuaHRfc2l6ZV9kZXRhaWwgLnhpYXpodWFuZywuaHRfc2l6ZV9kZXRhaWwgLnNob2VzLC5odF9zaXplX2RldGFpbCAudG9uZ3podWFuZywgLmh0X3NpemVfZGV0YWlsIC50b25neGlle1xuICAgICAgaGVpZ2h0OiAzMHB4O1xuICAgICAgd2lkdGg6IDYwcHg7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICBsaW5lLWhlaWdodDogMzBweDtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDE1cHg7XG4gICAgICBib3JkZXI6ICAxcHggc29saWQgIzk2OTg5OTtcbiAgICAgIGNvbG9yOiAjOEE5NDk5O1xuICAgIH1cbiAgICAuaHRfc2l6ZV9kZXRhaWwgLmNsb3RoX2ljb257XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICB0b3A6IDEwMHB4O1xuICAgICAgbGVmdDogMjJweDtcbiAgICB9XG4gICAgXG4gICAgLmh0X3NpemVfZGV0YWlsIC5tYW5zaGFuZ3podWFuZyB7XG4gICAgICBiYWNrZ3JvdW5kOiB1cmwoJ2h0dHA6Ly9zMS5nd2RhbmcuY29tL2ltYWdlcy9leHRlbnNpb25zL21hbl9zaGFuZ3podWFuZy5wbmcnKSAtNHB4IDBweCBuby1yZXBlYXQ7XG4gICAgICBoZWlnaHQ6IDE5MXB4O1xuICAgICAgd2lkdGg6IDkzcHg7XG4gICAgfVxuICAgIC5odF9zaXplX2RldGFpbCAud29tYW5zaGFuZ3podWFuZyB7XG4gICAgICBiYWNrZ3JvdW5kOiB1cmwoJ2h0dHA6Ly9zMS5nd2RhbmcuY29tL2ltYWdlcy9leHRlbnNpb25zL3dvbWFuX3NoYW5nemh1YW5nLnBuZycpIDBweCAwcHggbm8tcmVwZWF0O1xuICAgICAgaGVpZ2h0OiAxODdweDtcbiAgICAgIHdpZHRoOiA4N3B4O1xuICAgIH1cbiAgICAuaHRfc2l6ZV9kZXRhaWwgLmtpZDAge1xuICAgICAgYmFja2dyb3VuZDogdXJsKCdodHRwOi8vczEuZ3dkYW5nLmNvbS9pbWFnZXMvZXh0ZW5zaW9ucy9raWRzMF80LnBuZycpIDBweCAwcHggbm8tcmVwZWF0O1xuICAgICAgaGVpZ2h0OiAxODdweDtcbiAgICAgIHdpZHRoOiA4N3B4O1xuICAgICAgbWFyZ2luLWxlZnQ6IDhweDtcbiAgICB9XG4gICAgLmh0X3NpemVfZGV0YWlsIC5raWQ0IHtcbiAgICAgIGJhY2tncm91bmQ6IHVybCgnaHR0cDovL3MxLmd3ZGFuZy5jb20vaW1hZ2VzL2V4dGVuc2lvbnMva2lkczRfMTIucG5nJykgLTJweCAwcHggbm8tcmVwZWF0O1xuICAgICAgaGVpZ2h0OiAxODdweDtcbiAgICAgIHdpZHRoOiA4N3B4O1xuICAgICAgbWFyZ2luLWxlZnQ6IDBweDtcbiAgICB9XG4gICAgLmh0X3NpemVfZGV0YWlsIC5tYW54aWF6aHVhbmcge1xuICAgICAgYmFja2dyb3VuZDogdXJsKCdodHRwOi8vczEuZ3dkYW5nLmNvbS9pbWFnZXMvZXh0ZW5zaW9ucy9tYW5feGlhemh1YW5nLnBuZycpIC0xN3B4IDBweCBuby1yZXBlYXQ7XG4gICAgICBoZWlnaHQ6IDIxNnB4O1xuICAgICAgd2lkdGg6IDYzcHg7XG4gICAgICBtYXJnaW4tbGVmdDogMTNweDtcbiAgICB9XG4gICAgLmh0X3NpemVfZGV0YWlsIC53b21hbnhpYXpodWFuZyB7XG4gICAgICBiYWNrZ3JvdW5kOiB1cmwoJ2h0dHA6Ly9zMS5nd2RhbmcuY29tL2ltYWdlcy9leHRlbnNpb25zL3dvbWFuX3hpYXpodWFuZy5wbmcnKSAwcHggMHB4IG5vLXJlcGVhdDtcbiAgICAgIGhlaWdodDogMjIwcHg7XG4gICAgICB3aWR0aDogNjZweDtcbiAgICAgIG1hcmdpbi1sZWZ0OiAxMXB4O1xuICAgIH1cbiAgICBcbiAgICAuaHRfc2l6ZV9kZXRhaWwgLmh0X3Nob2VzLm1hbl9mb290IHtcbiAgICAgIGJhY2tncm91bmQ6IHVybCgnaHR0cDovL3MxLmd3ZGFuZy5jb20vaW1hZ2VzL2V4dGVuc2lvbnMvbWFuX2Zvb3QucG5nJykgNHB4IDBweCBuby1yZXBlYXQ7XG4gICAgICBoZWlnaHQ6IDE3MHB4O1xuICAgICAgd2lkdGg6IDExMXB4O1xuICAgIH1cbiAgICAuaHRfc2l6ZV9kZXRhaWwgLmh0X3Nob2VzLndvbWFuX2Zvb3Qge1xuICAgICAgYmFja2dyb3VuZDogdXJsKCdodHRwOi8vczEuZ3dkYW5nLmNvbS9pbWFnZXMvZXh0ZW5zaW9ucy93b21hbl9mb290LnBuZycpIDRweCAwcHggbm8tcmVwZWF0O1xuICAgICAgaGVpZ2h0OiAxNzBweDtcbiAgICAgIHdpZHRoOiAxMTFweDtcbiAgICB9XG4gICAgLmh0X3NpemVfZGV0YWlsIC5odF9zaG9lcy5raWRzX2Zvb3Qge1xuICAgICAgYmFja2dyb3VuZDogdXJsKCdodHRwOi8vczEuZ3dkYW5nLmNvbS9pbWFnZXMvZXh0ZW5zaW9ucy9raWRfc2hvZXMucG5nJykgMHB4IDBweCBuby1yZXBlYXQ7XG4gICAgICBoZWlnaHQ6IDE3MXB4O1xuICAgICAgd2lkdGg6IDEzMXB4O1xuICAgICAgbGVmdDogNHB4O1xuICAgIH1cbiAgICAuaHRfc2l6ZV9kZXRhaWwgLmNsb3RoZXNfbmF2e1xuICAgICAgbWFyZ2luLXRvcDogMTNweDtcbiAgICAgIGxpbmUtaGVpZ2h0OiAzMHB4O1xuICAgICAgaGVpZ2h0OiAzMHB4O1xuICAgICAgd2lkdGg6IDU2N3B4O1xuICAgICAgbWFyZ2luLWxlZnQ6IDU1cHg7XG4gICAgfVxuICAgIC5odF9zaXplX2RldGFpbCAuY2xvdGhlc19uYXYgdWx7XG4gICAgICBwYWRkaW5nOiAwO1xuICAgICAgbWFyZ2luOiAwcHg7XG4gICAgfVxuICAgIC5odF9zaXplX2RldGFpbCAuc2l6ZV9ze1xuICAgICAgaGVpZ2h0OiA0MHB4O1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgYm9yZGVyLXJpZ2h0OiAycHggc29saWQgI2U2ZTllYjtcbiAgICB9XG4gICAgLmRldGFpbF9sZWZ0IHtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgd2lkdGg6IDEzNnB4O1xuICAgICAgaGVpZ2h0OiAzNjdweDtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB9XG4gICAgLmRldGFpbF9sZWZ0IHNwYW4ge1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgIH1cbiAgICAuaHRfc2l6ZV9kZXRhaWwgI3NpemVfaXRlbXtcbiAgICAgIGhlaWdodDogMTgwcHg7XG4gICAgICB3aWR0aDogNDUycHg7XG4gICAgICBvdmVyZmxvdy15OiBzY3JvbGw7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCAjZTZlOWViO1xuICAgIH1cbiAgICAuaHRfc2l6ZV9kZXRhaWwgLmNsb3RoZXNfbmF2IHVsIGxpe1xuICAgICAgbGlzdC1zdHlsZTogbm9uZTtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgd2lkdGg6IDMycHg7XG4gICAgICBtYXJnaW4tcmlnaHQ6IDU3cHg7XG4gICAgICBjb2xvcjogIzAwMDtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCAjZmZmO1xuICAgIH1cbiAgICAuaHRfc2l6ZV9kZXRhaWwgLmNsb3RoZXNfbmF2IHVsIGxpOmhvdmVyIHtcbiAgICAgIGNvbG9yOiAjNDdiZWZlO1xuICAgIH1cbiAgICAuaHRfc2l6ZV9kZXRhaWwgLmNsb3RoZXNfbmF2IHVsIGxpLnNlbGVjdHtcbiAgICAgIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCAjNDdiZWZlO1xuICAgICAgY29sb3I6ICM0N2JlZmU7XG4gICAgfVxuICAgIC5odF9zaXplX2RldGFpbCAuc2l6ZV9oZWFke1xuICAgICAgaGVpZ2h0OiA2MHB4O1xuICAgIH1cbiAgICAuaHRfc2l6ZV9kZXRhaWwgLnVuaXRfZGVzY3tcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIGZsb2F0OiByaWdodDtcbiAgICAgIG1hcmdpbi1yaWdodDogMjdweDtcbiAgICAgIG1hcmdpbi10b3A6IDhweDtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB9XG4gICAgLmh0X3NpemVfZGV0YWlsIC5zaXplX2NvbntcbiAgICAgIHRleHQtYWxpZ246IHJpZ2h0O1xuICAgICAgbWFyZ2luLXRvcDogMTZweDtcbiAgICAgIG1hcmdpbi1ib3R0b206IDExcHg7XG4gICAgICBtYXJnaW4tcmlnaHQ6IDI2cHg7XG4gICAgICBjb2xvcjogIzU3NWU2MTtcbiAgICB9XG4gICAgLmh0X3NpemVfZGV0YWlsIC5zaXplX29we1xuICAgICAgd2lkdGg6IDQ0MHB4O1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIH1cblxuICAgIC5odF9zaXplX2RldGFpbCAuc2l6ZV9vcCBpbnB1dCtpbnB1dCB7XG4gICAgIG1hcmdpbi1sZWZ0OiAwcHg7IFxuICAgIH1cbiAgICAjZmlyc3Rfc2l6ZSsuZmlyc3RfeGlhbGEge1xuICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgIHJpZ2h0OiAyNjdweDtcbiAgICB9XG4gICAgLmh0X3NpemVfZGV0YWlsIC5zaXplX29wIGlucHV0e1xuICAgICAgd2lkdGg6IDEwMHB4O1xuICAgICAgaGVpZ2h0OiAzMXB4O1xuICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICB9XG4gICAgI2ZpcnN0X3NpemUsICNzZWNvbmRfc2l6ZSB7XG4gICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgcGFkZGluZzogMCA3cHg7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCAjOTY5ODk5O1xuICAgICAgYm94LXNoYWRvdzogbm9uZTtcbiAgICB9XG4gICAgI2ZpcnN0X3NpemU6Zm9jdXMsICNzZWNvbmRfc2l6ZTpmb2N1cyB7XG4gICAgICBib3JkZXItY29sb3I6ICM0N2JlZmU7XG4gICAgfVxuICAgIC5odF9zaXplX2RldGFpbCAuc2l6ZV94aWFsYWJveCB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgd2lkdGg6IDYwcHg7XG4gICAgICBoZWlnaHQ6IDE5MHB4O1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgIzk5OTtcbiAgICAgIGJvcmRlci1ib3R0b206IG5vbmU7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICB0ZXh0LWFsaWduOiBsZWZ0O1xuICAgICAgbGluZS1oZWlnaHQ6IDE5cHg7XG4gICAgICB0b3A6IC0xODlweDtcbiAgICAgIHJpZ2h0OiAyNjdweDtcbiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogNHB4O1xuICAgICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDRweDtcbiAgICB9XG4gICAgI3NlY29uZF9zaXplKy5zZWNvbmRfeGlhbGF7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICByaWdodDogLTE0cHg7XG4gICAgfVxuICAgIC5odF9zaXplX2RldGFpbCAjc2Vjb25kX3NpemUraW5wdXQrLnNpemVfeGlhbGFib3h7XG4gICAgICByaWdodDogLTE0cHg7XG4gICAgfVxuICAgIC5odF9zaXplX2RldGFpbCAuc2l6ZV94aWFsYWJveCBhe1xuICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICBwYWRkaW5nLWxlZnQ6IDdweDtcbiAgICAgIGNvbG9yOiAjNWM2MjY2O1xuICAgIH1cbiAgICAuaHRfc2l6ZV9kZXRhaWwgLnNpemVfeGlhbGFib3ggYTpob3ZlcntcbiAgICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xuICAgICAgY29sb3I6ICM0N2JlZmU7XG4gICAgfVxuICAgIC5odF9zaXplX2RldGFpbCAuc2l6ZV9vcCAuc2l6ZV94aWFsYXtcbiAgICAgIHdpZHRoOiA2MHB4O1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgIzk5OTtcbiAgICAgIHBhZGRpbmctbGVmdDogN3B4O1xuICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgY29sb3I6ICM4YTk0OTk7XG4gICAgfVxuICAgIC5odF9zaXplX2RldGFpbCAuc2l6ZV9vcCAuc2l6ZV94aWFsYS5tc0hvdmVyIHtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDBweDtcbiAgICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDRweDtcbiAgICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiA0cHg7XG4gICAgICBiYWNrZ3JvdW5kOiB1cmwoJ2h0dHA6Ly9zMS5nd2RhbmcuY29tL2ltYWdlcy9leHRlbnNpb25zL2hhaXRhb191cGdyYXlpY29uLnBuZycpIG5vLXJlcGVhdCA0MnB4IDEycHg7XG4gICAgICBiYWNrZ3JvdW5kLXNpemU6IDEycHggN3B4O1xuICAgIH1cbiAgICAuaHRfc2l6ZV9kZXRhaWwgLnNpemVfeGlhbGF7XG4gICAgICBiYWNrZ3JvdW5kOiB1cmwoJ2h0dHA6Ly9zMS5nd2RhbmcuY29tL2ltYWdlcy9leHRlbnNpb25zL2hhaXRhb19kb3duZ3JheWljb24ucG5nJykgbm8tcmVwZWF0IDQycHggMTJweDtcbiAgICAgIGJhY2tncm91bmQtc2l6ZTogMTJweCA3cHg7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgfVxuICAgIC5odF9zaXplX2RldGFpbCAuY29udmVyc2lvbntcbiAgICAgIG1hcmdpbjogMCAzMHB4IDAgMTA1cHg7XG4gICAgfVxuICAgIC8qIGZhbnlpICovXG4gICAgLmh0X2Zhbnlpe1xuICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICB3aWR0aDogMjAwcHg7XG4gICAgICB6LWluZGV4OiA5OTtcbiAgICAgIGJhY2tncm91bmQ6ICNmZmYgdXJsKCdodHRwOi8vczEuZ3dkYW5nLmNvbS9pbWFnZXMvZXh0ZW5zaW9ucy9oYWl0YW9fZmFueWlfaWNvbi5wbmcnKSAwcHggMHB4IG5vLXJlcGVhdDtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM0N2JlZmU7XG4gICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICBtaW4taGVpZ2h0OiAyNXB4O1xuICAgICAgY29sb3I6ICM0OTRiNGQ7XG4gICAgICB0ZXh0LWluZGVudDogMzJweDtcbiAgICAgIHBhZGRpbmc6IDJweCAxMnB4O1xuICAgICAgbGluZS1oZWlnaHQ6IDE5cHg7XG4gICAgfVxuICAgIC5odF9mYW55aSBhe1xuICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICB3aWR0aDogMTMwcHg7XG4gICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgICBjb2xvcjogIzQ5NGI0ZDtcbiAgICB9XG4gICAgLmh0X2ZhbnlpIGE6aG92ZXJ7XG4gICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgICBjb2xvcjogIzQ5NGI0ZDtcbiAgICB9XG4gICAgI2h0X3RvcHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHdpZHRoOiAwcHg7XG4gICAgICBoZWlnaHQ6IDBweDtcbiAgICAgIGxpbmUtaGVpZ2h0OiAwcHg7XG4gICAgICBib3JkZXItYm90dG9tOiA4cHggc29saWQgIzI3OGFjOTtcbiAgICAgIGJvcmRlci1sZWZ0OiA5cHggc29saWQgdHJhbnNwYXJlbnQ7XG4gICAgICBib3JkZXItcmlnaHQ6IDlweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgICAgIGxlZnQ6IDU4cHg7XG4gICAgICB0b3A6IC04cHg7XG4gICAgfVxuICAgICNodF90b3A6YWZ0ZXIge1xuICAgICAgY29udGVudDogXCJcIjtcbiAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgd2lkdGg6IDBweDtcbiAgICAgIGhlaWdodDogMHB4O1xuICAgICAgbGluZS1oZWlnaHQ6IDBweDtcbiAgICAgIGJvcmRlci1ib3R0b206IDdweCBzb2xpZCAjZmZmO1xuICAgICAgYm9yZGVyLWxlZnQ6IDhweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgICAgIGJvcmRlci1yaWdodDogOHB4IHNvbGlkIHRyYW5zcGFyZW50O1xuICAgICAgbGVmdDogLThweDtcbiAgICAgIHRvcDogMXB4O1xuICAgIH1cbiAgICAvKiDmu5rliqjmnaHmoLflvI8gKi9cbiAgICAuZ3dkX2hhaXRhbyA6Oi13ZWJraXQtc2Nyb2xsYmFyIHt3aWR0aDo2cHg7aGVpZ2h0OiA2cHg7fVxuICAgIC5nd2RfaGFpdGFvIDo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2sge2JhY2tncm91bmQ6I2YwZjBmMDt9XG4gICAgLmd3ZF9oYWl0YW8gOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7XG4gICAgICBiYWNrZ3JvdW5kOiAjY2RjZGNkO1xuICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIH1cbiAgICAjc2l6ZV9kZXRhaWwgOjotd2Via2l0LXNjcm9sbGJhciB7d2lkdGg6MnB4O2hlaWdodDogNnB4O31cbiAgICAvKiDkuprpqazpgIrpga7mjKEgKi9cbiAgICBkaXYjYWN0aW9uUGFuZWxXcmFwcGVyLmJ1cmoge1xuICAgICAgb3ZlcmZsb3c6IHZpc2libGUhaW1wb3J0YW50O1xuICAgIH1cblxuICAgIC8qIGFtYXpvbkdsb2JhbCAqL1xuICAgICNnbG9iYWxJbm5lckRldGFpbCB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgICAjZ2xvYmFsSW5uZXJEZXRhaWwgLmNvbnRlbnRfZGVmYXVsdF9sZWZ0IHtcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICB9XG4gICAgI2dsb2JhbElubmVyRGV0YWlsIC5pbm5lci10bGUgIHtcbiAgICAgIGNvbG9yOiAjNjY2O1xuICAgIH1cbiAgICAjZ2xvYmFsSW5uZXJEZXRhaWwgLmlubmVyLWltZyBpbWcge1xuICAgICAgbWF4LWhlaWdodDogMTAwcHg7XG4gICAgICBtYXgtd2lkdGg6IDE1MHB4O1xuICAgIH1cbiAgICAjZ2xvYmFsSW5uZXJEZXRhaWwgLmlubmVyLXRsZSB7XG4gICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICBsaW5lLWhlaWdodDogMTRweDtcbiAgICAgIHdpZHRoOiAyMzBweDtcbiAgICAgIGhlaWdodDogMjhweDtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgfVxuICAgICNnbG9iYWxJbm5lckRldGFpbCAuaW5uZXItYnRuIHtcbiAgICAgIGNvbG9yOiAjZmZmO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzQ2YzBmZTtcbiAgICAgIGhlaWdodDogMjJweDtcbiAgICAgIGxpbmUtaGVpZ2h0OiAyMnB4O1xuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgd2lkdGg6IDc4cHg7XG4gICAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgICBtYXJnaW4tdG9wOiAycHg7XG4gICAgfVxuICAgICNnbG9iYWxJbm5lckRldGFpbCAucHJvX3R5cGU6aG92ZXIgLnByb190eXBlX2RldGFpbCB7XG4gICAgICBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50O1xuICAgIH1cbiAgICAjZ2xvYmFsSW5uZXJEZXRhaWwgLm1haWxfdHlwZTpob3ZlciAubWFpbF90eXBlX2RldGFpbCB7XG4gICAgICBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50O1xuICAgIH1cbiAgICAjZ2xvYmFsSW5uZXJEZXRhaWwgLnZpcF90bGU6aG92ZXIgLnZpcF90bGVfZGV0YWlsIHtcbiAgICAgIGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7XG4gICAgfVxuICAgICNnbG9iYWxJbm5lckRldGFpbCAuc2FtZS1zdHlsZTpob3ZlciAuc2FtZS1zdHlsZV9kZXRhaWwge1xuICAgICAgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDtcbiAgICB9XG4gICAgI2dsb2JhbElubmVyRGV0YWlsIC5zYW1lLXN0eWxlX2RldGFpbCB7XG4gICAgICBsZWZ0OiAzNTBweDtcbiAgICAgIHRvcDogODFweDtcbiAgICB9IiwgIiJdKQoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQllLmV4cG9ydHMgPSBmdW5jdGlvbigpIHsKCQkJdmFyIGUgPSBbXTsKCQkJcmV0dXJuIGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHsKCQkJCWZvciAodmFyIGUgPSBbXSwgdCA9IDA7IHQgPCB0aGlzLmxlbmd0aDsgdCsrKSB7CgkJCQkJdmFyIG4gPSB0aGlzW3RdOwoJCQkJCW5bMl0gPyBlLnB1c2goIkBtZWRpYSAiICsgblsyXSArICJ7IiArIG5bMV0gKyAifSIpIDogZS5wdXNoKG5bMV0pCgkJCQl9CgkJCQlyZXR1cm4gZS5qb2luKCIiKQoJCQl9LCBlLmkgPSBmdW5jdGlvbih0LCBuKSB7CgkJCQkic3RyaW5nIiA9PSB0eXBlb2YgdCAmJiAodCA9IFsKCQkJCQlbbnVsbCwgdCwgIiJdCgkJCQldKTsKCQkJCWZvciAodmFyIGkgPSB7fSwgYSA9IDA7IGEgPCB0aGlzLmxlbmd0aDsgYSsrKSB7CgkJCQkJdmFyIG8gPSB0aGlzW2FdWzBdOwoJCQkJCSJudW1iZXIiID09IHR5cGVvZiBvICYmIChpW29dID0gITApCgkJCQl9CgkJCQlmb3IgKGEgPSAwOyBhIDwgdC5sZW5ndGg7IGErKykgewoJCQkJCXZhciByID0gdFthXTsKCQkJCQkibnVtYmVyIiA9PSB0eXBlb2YgclswXSAmJiBpW3JbMF1dIHx8IChuICYmICFyWzJdID8gclsyXSA9IG4gOiBuICYmIChyWzJdID0gIigiICsgclsyXSArICIpIGFuZCAoIiArIG4gKyAiKSIpLAoJCQkJCQllLnB1c2gocikpCgkJCQl9CgkJCX0sIGUKCQl9Cgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCWZ1bmN0aW9uIGkoZSwgdCkgewoJCQlmb3IgKHZhciBuID0gMDsgbiA8IGUubGVuZ3RoOyBuKyspIHsKCQkJCXZhciBpID0gZVtuXSwKCQkJCQlhID0gcFtpLmlkXTsKCQkJCWlmIChhKSB7CgkJCQkJYS5yZWZzKys7CgkJCQkJZm9yICh2YXIgbyA9IDA7IG8gPCBhLnBhcnRzLmxlbmd0aDsgbysrKSBhLnBhcnRzW29dKGkucGFydHNbb10pOwoJCQkJCWZvciAoOyBvIDwgaS5wYXJ0cy5sZW5ndGg7IG8rKykgYS5wYXJ0cy5wdXNoKHMoaS5wYXJ0c1tvXSwgdCkpCgkJCQl9IGVsc2UgewoJCQkJCWZvciAodmFyIHIgPSBbXSwgbyA9IDA7IG8gPCBpLnBhcnRzLmxlbmd0aDsgbysrKSByLnB1c2gocyhpLnBhcnRzW29dLCB0KSk7CgkJCQkJcFtpLmlkXSA9IHsKCQkJCQkJaWQ6IGkuaWQsCgkJCQkJCXJlZnM6IDEsCgkJCQkJCXBhcnRzOiByCgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoKCQlmdW5jdGlvbiBhKGUpIHsKCQkJZm9yICh2YXIgdCA9IFtdLCBuID0ge30sIGkgPSAwOyBpIDwgZS5sZW5ndGg7IGkrKykgewoJCQkJdmFyIGEgPSBlW2ldLAoJCQkJCW8gPSBhWzBdLAoJCQkJCXIgPSBhWzFdLAoJCQkJCXMgPSBhWzJdLAoJCQkJCWwgPSBhWzNdLAoJCQkJCWMgPSB7CgkJCQkJCWNzczogciwKCQkJCQkJbWVkaWE6IHMsCgkJCQkJCXNvdXJjZU1hcDogbAoJCQkJCX07CgkJCQluW29dID8gbltvXS5wYXJ0cy5wdXNoKGMpIDogdC5wdXNoKG5bb10gPSB7CgkJCQkJaWQ6IG8sCgkJCQkJcGFydHM6IFtjXQoJCQkJfSkKCQkJfQoJCQlyZXR1cm4gdAoJCX0KCgkJZnVuY3Rpb24gbygpIHsKCQkJdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpLAoJCQkJdCA9IG0oKTsKCQkJcmV0dXJuIGUudHlwZSA9ICJ0ZXh0L2NzcyIsIHQuYXBwZW5kQ2hpbGQoZSksIGUKCQl9CgoJCWZ1bmN0aW9uIHIoKSB7CgkJCXZhciBlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGluayIpLAoJCQkJdCA9IG0oKTsKCQkJcmV0dXJuIGUucmVsID0gInN0eWxlc2hlZXQiLCB0LmFwcGVuZENoaWxkKGUpLCBlCgkJfQoKCQlmdW5jdGlvbiBzKGUsIHQpIHsKCQkJdmFyIG4sIGksIGE7CgkJCWlmICh0LnNpbmdsZXRvbikgewoJCQkJdmFyIHMgPSBnKys7CgkJCQluID0gZiB8fCAoZiA9IG8oKSksIGkgPSBsLmJpbmQobnVsbCwgbiwgcywgITEpLCBhID0gbC5iaW5kKG51bGwsIG4sIHMsICEwKQoJCQl9IGVsc2UgZS5zb3VyY2VNYXAgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgVVJMICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIFVSTC5jcmVhdGVPYmplY3RVUkwgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgVVJMLnJldm9rZU9iamVjdFVSTCAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBCbG9iICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIGJ0b2EgPyAobiA9IHIoKSwgaSA9IGQuYmluZChudWxsLCBuKSwgYSA9IGZ1bmN0aW9uKCkgewoJCQkJbi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG4pLCBuLmhyZWYgJiYgVVJMLnJldm9rZU9iamVjdFVSTChuLmhyZWYpCgkJCX0pIDogKG4gPSBvKCksIGkgPSBjLmJpbmQobnVsbCwgbiksIGEgPSBmdW5jdGlvbigpIHsKCQkJCW4ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChuKQoJCQl9KTsKCQkJcmV0dXJuIGkoZSksCgkJCQlmdW5jdGlvbih0KSB7CgkJCQkJaWYgKHQpIHsKCQkJCQkJaWYgKHQuY3NzID09PSBlLmNzcyAmJiB0Lm1lZGlhID09PSBlLm1lZGlhICYmIHQuc291cmNlTWFwID09PSBlLnNvdXJjZU1hcCkgcmV0dXJuOwoJCQkJCQlpKGUgPSB0KQoJCQkJCX0gZWxzZSBhKCkKCQkJCX0KCQl9CgoJCWZ1bmN0aW9uIGwoZSwgdCwgbiwgaSkgewoJCQl2YXIgYSA9IG4gPyAiIiA6IGkuY3NzOwoJCQlpZiAoZS5zdHlsZVNoZWV0KSBlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IF8odCwgYSk7CgkJCWVsc2UgewoJCQkJdmFyIG8gPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhKSwKCQkJCQlyID0gZS5jaGlsZE5vZGVzOwoJCQkJclt0XSAmJiBlLnJlbW92ZUNoaWxkKHJbdF0pLCByLmxlbmd0aCA/IGUuaW5zZXJ0QmVmb3JlKG8sIHJbdF0pIDogZS5hcHBlbmRDaGlsZChvKQoJCQl9CgkJfQoKCQlmdW5jdGlvbiBjKGUsIHQpIHsKCQkJdmFyIG4gPSB0LmNzcywKCQkJCWkgPSB0Lm1lZGlhOwoJCQl0LnNvdXJjZU1hcDsKCQkJaWYgKGkgJiYgZS5zZXRBdHRyaWJ1dGUoIm1lZGlhIiwgaSksIGUuc3R5bGVTaGVldCkgZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBuOwoJCQllbHNlIHsKCQkJCWZvciAoOyBlLmZpcnN0Q2hpbGQ7KSBlLnJlbW92ZUNoaWxkKGUuZmlyc3RDaGlsZCk7CgkJCQllLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG4pKQoJCQl9CgkJfQoKCQlmdW5jdGlvbiBkKGUsIHQpIHsKCQkJdmFyIG4gPSB0LmNzcywKCQkJCWkgPSAodC5tZWRpYSwgdC5zb3VyY2VNYXApOwoJCQlpICYmIChuICs9ICJcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsIiArIGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KGkpKSkpICsgIiAqLyIpOwoJCQl2YXIgYSA9IG5ldyBCbG9iKFtuXSwgewoJCQkJCXR5cGU6ICJ0ZXh0L2NzcyIKCQkJCX0pLAoJCQkJbyA9IGUuaHJlZjsKCQkJZS5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChhKSwgbyAmJiBVUkwucmV2b2tlT2JqZWN0VVJMKG8pCgkJfQoJCXZhciBwID0ge30sCgkJCWggPSBmdW5jdGlvbihlKSB7CgkJCQl2YXIgdDsKCQkJCXJldHVybiBmdW5jdGlvbigpIHsKCQkJCQlyZXR1cm4gInVuZGVmaW5lZCIgPT0gdHlwZW9mIHQgJiYgKHQgPSBlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpLCB0CgkJCQl9CgkJCX0sCgkJCXUgPSBoKGZ1bmN0aW9uKCkgewoJCQkJcmV0dXJuIC9tc2llIFs2LTldXGIvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSkKCQkJfSksCgkJCW0gPSBoKGZ1bmN0aW9uKCkgewoJCQkJcmV0dXJuIGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXQoJCQl9KSwKCQkJZiA9IG51bGwsCgkJCWcgPSAwOwoJCWUuZXhwb3J0cyA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJdCA9IHQgfHwge30sICJ1bmRlZmluZWQiID09IHR5cGVvZiB0LnNpbmdsZXRvbiAmJiAodC5zaW5nbGV0b24gPSB1KCkpOwoJCQl2YXIgbiA9IGEoZSk7CgkJCXJldHVybiBpKG4sIHQpLAoJCQkJZnVuY3Rpb24oZSkgewoJCQkJCWZvciAodmFyIG8gPSBbXSwgciA9IDA7IHIgPCBuLmxlbmd0aDsgcisrKSB7CgkJCQkJCXZhciBzID0gbltyXSwKCQkJCQkJCWwgPSBwW3MuaWRdOwoJCQkJCQlsLnJlZnMtLSwgby5wdXNoKGwpCgkJCQkJfQoJCQkJCWlmIChlKSB7CgkJCQkJCXZhciBjID0gYShlKTsKCQkJCQkJaShjLCB0KQoJCQkJCX0KCQkJCQlmb3IgKHZhciByID0gMDsgciA8IG8ubGVuZ3RoOyByKyspIHsKCQkJCQkJdmFyIGwgPSBvW3JdOwoJCQkJCQlpZiAoMCA9PT0gbC5yZWZzKSB7CgkJCQkJCQlmb3IgKHZhciBkID0gMDsgZCA8IGwucGFydHMubGVuZ3RoOyBkKyspIGwucGFydHNbZF0oKTsKCQkJCQkJCWRlbGV0ZSBwW2wuaWRdCgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJfTsKCQl2YXIgXyA9IGZ1bmN0aW9uKCkgewoJCQl2YXIgZSA9IFtdOwoJCQlyZXR1cm4gZnVuY3Rpb24odCwgbikgewoJCQkJcmV0dXJuIGVbdF0gPSBuLCBlLmZpbHRlcihCb29sZWFuKS5qb2luKCJcbiIpCgkJCX0KCQl9KCkKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJZS5leHBvcnRzID0gJzxkaXYgaWQ9Imd3ZF9odF9tYWluIiBjbGFzcz0iZ3dkX2hhaXRhbyB7e2RhdGEucGFnZWNsYXNzfX0iID5cbiAgICA8ZGl2ICBjbGFzcz0iaHRfaGVhZCI+XG4gICAgICA8YSBocmVmPSJ7e2Nfc2VydmVyfX0iIGNsYXNzPSJnd2Rfc2l0ZV9pY29uIiB0YXJnZXQ9Il9ibGFuayIgdGl0bGU9Iui0reeJqeWFmiI+PC9hPlxuICAgICAgPGEgY2xhc3M9Imh0X2dldHByaWNlIGl0ZW1faG92ZXIiPuWIsOaJi+S7t++8mjxzcGFuIGNsYXNzPSJodF9nZXRwcmljZV9udW0gZm9udGZfQXJpYWwiPsKle3tkYXRhLmdldHByaWNlfX08L3NwYW4+PC9hPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9Imh0X2NvbnRlbnQiPlxuICAgICAgPGRpdiBjbGFzcz0iY29udGVudF9kZWZhdWx0IiBpZD0iaHRfY29udGVudF9pbmZvIj5cbiAgICAgICAgPGRpdiBjbGFzcz0iY29udGVudF9kZWZhdWx0X2xlZnQiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9InVuaXRfcHJpY2UiPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9InByaWNlX3RsZSI+5Y2V5Lu377yaPC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9InByaWNlX251bSBmb250Zl9BcmlhbCI+wqV7e2RhdGEudW5pdF9wcmljZX19PC9zcGFuPlxuICAgICAgICAgICAgPGEgaWQ9Imh0X2FkZGNvbGxlY3QiIGNsYXNzPSJ0cmVuZF93YWl0IiA+PHNwYW4+6ZmN5Lu35o+Q6YaSPC9zcGFuPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xsZWN0X2RldGFpbCBkaXZfZGV0YWlsIj5cbiAgICAgICAgICAgICAgICDngrnlh7vliqDlhaXmlLbol4/lpLnvvIzllYblk4HpmY3ku7fmnInmj5DphpJcbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2E+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz0iaHRfd2VpZ2h0Ij5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ3ZWlnaHRfdGxlIj7ph43ph4/vvJo8L3NwYW4+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9Int7ZGF0YS5oZV93ZWlnaHR9fSIgY2xhc3M9Imh0X3dlaWdodF9udW0iPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9IndlaWdodF90eXBlIj5LRzwvc3Bhbj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9IndlaWdodF90eXBlX2RldGFpbCBkaXZfZGV0YWlsIj5cbiAgICAgICAgICAgICAgICDngrnlh7vovazmjaLph43ph4/ljZXkvY1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9Imh0X3RyYW5zcG9ydCI+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz0iaHRfZnJlaWdodCI+6L2s6L+Q6LS577yaPHNwYW4gY2xhc3M9Imh0X2ZyZWlnaHRfbnVtIGZvbnRmX0FyaWFsIj7CpTA8L3NwYW4+PC9zcGFuPlxuICAgICAgICAgICAgPGEgY2xhc3M9Imh0X3RyYW5zcG9ydF9idG4iPlxuICAgICAgICAgICAgICA8c3BhbiA+6L2s6L+Q5ZWG5a62PC9zcGFuPlxuICAgICAgICAgICAgICA8ZW0gY2xhc3M9InBvaW50X2ljb24iPjwvZW0+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRyYW5zcG9ydF9yZW1pbmRfZGV0YWlsIGRpdl9kZXRhaWwiPlxuICAgICAgICAgICAgICAgIOeCueWHu+mAieaLqei9rOi/kOWFrOWPuFxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPSJodF90YXJpZmYiPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImRlbF9saW5lIiBkYXRhLWRlbD0iMSI+6KGM6YKu56iO77yaPHNwYW4gY2xhc3M9Imh0X3RhcmlmZl9udW0gZm9udGZfQXJpYWwiIGRhdGEtcHJpY2U9IjAiPiZuYnNwOzxlbT7mnKrnn6U8L2VtPiZuYnNwOzwvc3Bhbj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGFyaWZmX3JlbWluZF9kZXRhaWwgZGl2X2RldGFpbCI+XG4gICAgICAgICAgICAgICAg5Liq5Lq66KGM5p2O5ZKM6YKu6YCS54mp5ZOB6L+b5Y+j56iO77yI5YWz56iO44CB6L+b5Y+j546v6IqC5aKe5YC856iO5Y+K5raI6LS556iO5LiJ6ICF5ZCI5LiA56iO56eN77yJXG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPGEgY2xhc3M9Imh0X3RhcmlmZl9idG4iPlxuICAgICAgICAgICAgICA8c3Bhbj7pgInmi6nliIbnsbs8L3NwYW4+XG4gICAgICAgICAgICAgIDxlbSBjbGFzcz0icG9pbnRfaWNvbiI+PC9lbT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGFyaWZmX2luZm9fZGV0YWlsIGRpdl9kZXRhaWwiPlxuICAgICAgICAgICAgICAgIOeCueWHu+mAieaLqeWVhuWTgeexu+WIq1xuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9ImNvbnRlbnRfZGVmYXVsdF9yaWdodCI+XG4gICAgICAgICAgPGEgY2xhc3M9InByb190eXBlIj5cbiAgICAgICAgICAgIDxlbSBjbGFzcz0ie3tkYXRhLnByb3R5cGV9fSI+PC9lbT5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJwcm9fdF90bGUiID57e2RhdGEucHJvdHlwZT09InppeWluZyI/IuiHquiQpSI6IuesrOS4ieaWuSJ9fTwvc3Bhbj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9InByb190eXBlX2RldGFpbCBkaXZfZGV0YWlsIj5cbiAgICAgICAgICAgICAge3tkYXRhLnByb3R5cGU9PVwneml5aW5nXCc/KGRhdGEuc2l0ZSArIFwn55u05o6l6ZSA5ZSuXCcpOihkYXRhLnNpdGUgKyBcJ+esrOS4ieaWueWVhuWutumUgOWUrlwnKX19XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2E+XG4gICAgICAgICAgPGEgY2xhc3M9Im1haWxfdHlwZSIgPlxuICAgICAgICAgICAgPGVtIGNsYXNzPSJ7e2RhdGEubWFpbHR5cGV9fSI+PC9lbT5cbiAgICAgICAgICAgIDxzcGFuID57e2RhdGEubWFpbHR5cGU9PSJ6aGl5b3UiPyLlj6/nm7Tpgq4iOiLpnIDovazov5AifX08L3NwYW4+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPSJtYWlsX3R5cGVfZGV0YWlsIGRpdl9kZXRhaWwiPlxuICAgICAgICAgICAgICB7e2lmIGRhdGEubWFpbHR5cGU9PVwnemhpeW91XCd9fVxuICAgICAgICAgICAgICAgIOivpeWVhuWTgeebtOmCruaUr+aMgeebtOmCruS4reWbve+8jOWIsOaJi+aXtumXtOe6pjh+MTblpKlcbiAgICAgICAgICAgICAge3tlbHNlIGlmIGRhdGEuaG9zdHMgPT0gXCd3d3cuYW1hem9uLmNvbVwnfX1cbiAgICAgICAgICAgICAgICDor6XllYblk4HkuI3mlK/mjIHnm7Tpgq7kuK3lm73vvIzpnIDovazov5Dlhazlj7jovazov5DvvIzliLDmiYvml7bpl7TlpKfnuqYyMH4zNeWkqVxuICAgICAgICAgICAgICB7e2Vsc2UgaWYgZGF0YS5ob3N0cyA9PSBcJ3d3dy5hbWF6b24uY28uanBcJ319XG4gICAgICAgICAgICAgICAg6K+l5ZWG5ZOB5LiN5pSv5oyB55u06YKu5Lit5Zu977yM6ZyA6L2s6L+Q5YWs5Y+46L2s6L+Q77yM5Yiw5omL5pe26Ze05aSn57qmN34zMOWkqVxuICAgICAgICAgICAgICB7e2Vsc2UgaWYgZGF0YS5ob3N0cyA9PSBcJ3d3dy5hbWF6b24uZGVcJ319XG4gICAgICAgICAgICAgICAg6K+l5ZWG5ZOB5LiN5pSv5oyB55u06YKu5Lit5Zu977yM6ZyA6L2s6L+Q5YWs5Y+46L2s6L+Q77yM5Yiw5omL5pe26Ze05aSn57qmMjV+NDDlpKlcbiAgICAgICAgICAgICAge3tlbHNlfX1cbiAgICAgICAgICAgICAgICDor6XllYblk4HkuI3mlK/mjIHnm7Tpgq7kuK3lm73vvIzpnIDovazov5Dlhazlj7jovazov5DvvIzliLDmiYvml7bpl7TlpKfnuqYyMH4zNeWkqVxuICAgICAgICAgICAgICB7ey9pZn19XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2E+XG4gICAgICAgICAgPGEgY2xhc3M9Imh0X3RyYW5zbGF0ZSI+XG4gICAgICAgICAgICA8ZW0+PC9lbT5cbiAgICAgICAgICAgIDxzcGFuPue/u+ivkeW4ruWKqTwvc3Bhbj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9InRyYW5zbGF0ZV9kZXRhaWwgZGl2X2RldGFpbCI+XG4gICAgICAgICAgICAgIOW3suS4uuaCqOW8gOWQr+WIkuivjee/u+ivke+8jOm8oOagh+mAieS4reebuOWFs+aWh+Wtl++8jOWNs+WPr+e/u+ivkVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9hPlxuICAgICAgICAgIDxhIGNsYXNzPSJzaXplX2hlbHAiPlxuICAgICAgICAgICAgPGVtPjwvZW0+XG4gICAgICAgICAgICA8c3Bhbj7lsLrnoIHluK7liqk8L3NwYW4+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPSJzaXplX2RldGFpbCBkaXZfZGV0YWlsIj5cbiAgICAgICAgICAgICAg54K55Ye75p+l55yL5bC656CB5biu5YqpXG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2E+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IHN0eWxlPSJjbGVhcjpib3RoIj48L2Rpdj5cbiAgICAgIDxkaXYgaWQ9InRhcmlmZl9kZXRhaWwiPlxuICAgICAgICA8c3BhbiBjbGFzcz0iY2xvc2ViYXIgY2xvc2ViZyIgdGl0bGU9IuWFs+mXrSI+PC9zcGFuPlxuICAgICAgICA8ZGl2IGNsYXNzPSJ0YXJfaGVhZCI+XG4gICAgICAgICAgPHNwYW4+6YCJ5oup5ZWG5ZOB5YiG57G7PC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz0idGFyX2Rlc2MiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPSJkZWxfbGluZSI+5ZWG5ZOB77yaPHNwYW4gY2xhc3M9Imh0X3RhcmlmZl9jYXRlIj7or7fpgInmi6nliIbnsbs8L3NwYW4+PC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPSJkZXNjX3QiPuWNleS7tuihjOmCrueoju+8mjxzcGFuIGNsYXNzPSJodF90YXJpZmZfbnVtIj7mnKrnn6U8L3NwYW4+IDwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgaWQ9ImNhdGVfc2VsZWN0X2JveCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz0iY2F0ZV9zZWxlY3RfMSI+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9Iuivt+mAieaLqeWIhuexuyIgaWQ9ImNhdGVfYmlnIiBjbGFzcz0iaWNvbl9kb3duIiByZWFkb25seT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9InhpYWxhYm94IiBpZD0iYmlnX3hpYWxhIj5cbiAgICAgICAgICAgICAgPGEgY2F0ZT0iY2F0ZTEiICBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7Ij7po5/lk4E8L2E+XG4gICAgICAgICAgICAgIDxhIGNhdGU9ImNhdGUyIiAgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyI+5pyN6aWwPC9hPlxuICAgICAgICAgICAgICA8YSBjYXRlPSJjYXRlMyIgIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPumei+OAgeeuseWMhTwvYT5cbiAgICAgICAgICAgICAgPGEgY2F0ZT0iY2F0ZTQiICBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7Ij7miYvooag8L2E+XG4gICAgICAgICAgICAgIDxhIGNhdGU9ImNhdGU1IiAgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyI+5Y6o5oi/44CB6aSQ5Y6FPC9hPlxuICAgICAgICAgICAgICA8YSBjYXRlPSJjYXRlNiIgIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuWutueUtTwvYT5cbiAgICAgICAgICAgICAgPGEgY2F0ZT0iY2F0ZTciICBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7Ij7kuKrkurrmiqTnkIY8L2E+XG4gICAgICAgICAgICAgIDxhIGNhdGU9ImNhdGU4IiAgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyI+576O5a65PC9hPlxuICAgICAgICAgICAgICA8YSBjYXRlPSJjYXRlOSIgIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuaJi+acuuWPiumFjeS7tjwvYT5cbiAgICAgICAgICAgICAgPGEgY2F0ZT0iY2F0ZTEwIiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7Ij7lip7lhaznlKjlk4E8L2E+XG4gICAgICAgICAgICAgIDxhIGNhdGU9ImNhdGUxMSIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyI+54Wn55u45py644CB5pGE5YOP5py6PC9hPlxuICAgICAgICAgICAgICA8YSBjYXRlPSJjYXRlMTIiIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPueUteWtkOaVsOeggTwvYT5cbiAgICAgICAgICAgICAgPGEgY2F0ZT0iY2F0ZTEzIiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7Ij7muLjmiI/mnLov5ri45oiP56KfPC9hPlxuICAgICAgICAgICAgICA8YSBjYXRlPSJjYXRlMTQiIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPumfs+eusTwvYT5cbiAgICAgICAgICAgICAgPGEgY2F0ZT0iY2F0ZTE1IiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7Ij7kuKrkurrnlLXohJE8L2E+XG4gICAgICAgICAgICAgIDxhIGNhdGU9ImNhdGUxNiIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyI+55S15a2Q5Lmm6K6+5aSHPC9hPlxuICAgICAgICAgICAgICA8YSBjYXRlPSJjYXRlMTciIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPueOqeWFtzwvYT5cbiAgICAgICAgICAgICAgPGEgY2F0ZT0iY2F0ZTE4IiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7Ij7lqbTlhL/nlKjlk4E8L2E+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXRlX3NlbGVjdF8yIj5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiB2YWx1ZT0i6K+36YCJ5oup5YiG57G7IiBpZD0iY2F0ZV9zbWFsbCIgbWF4bGVuZ3RoPSI1IiBjbGFzcz0iaWNvbl9kb3duIHNlbF9pbmZvIiByZWFkb25seT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9InhpYWxhYm94IiBpZD0ic21hbGxfeGlhbGEiPjwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgaWQ9InNlbGVjdF9idG4iIGRhdGEtdGFyaWZmPSItMSI+56Gu6K6kPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICBcbiAgICA8L2Rpdj5cbjwvZGl2PlxuJwoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQllLmV4cG9ydHMgPSAnPGRpdiBpZD0ic2l6ZV9kZXRhaWwiIGNsYXNzPSJodF9zaXplX2RldGFpbCBnd2RfaGFpdGFvIiBzdHlsZT0idG9wOiB7e3Bvcy5wb3N5fX1weDtsZWZ0OiB7e3Bvcy5wb3N4fX1weDsiPlxuICAgIDxzcGFuIGNsYXNzPSJjbG9zZWJhciBjbG9zZWJnIiB0aXRsZT0i5YWz6ZetIj48L3NwYW4+XG4gICAgXG4gICAgPGRpdiBjbGFzcz0ic2l6ZV9oZWFkIj5cbiAgICAgICAgPGRpdiBjbGFzcz0iY2xvdGhlc19uYXYiPlxuICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgIDxsaSBjbGFzcz0ic2VsZWN0Ij7nlLfoo4U8L2xpPlxuICAgICAgICAgICAgPGxpPuWls+ijhTwvbGk+XG4gICAgICAgICAgICA8bGk+56ul6KOFPC9saT5cbiAgICAgICAgICAgIDxsaT7nlLfpnos8L2xpPlxuICAgICAgICAgICAgPGxpPuWls+meizwvbGk+XG4gICAgICAgICAgICA8bGk+56ul6Z6LPC9saT5cbiAgICAgICAgICA8L3VsPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz0idW5pdF9kZXNjIHVuaXRfY20iPuWNleS9je+8muWOmOexsyhDTSk8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz0idW5pdF9kZXNjIHVuaXRfbW0iPuWNleS9je+8muavq+exsyhNTSk8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPSJzaXplX2NvbnRlbnQiPlxuICAgICAgPGRpdiBjbGFzcz0iZGV0YWlsX2xlZnQiPlxuICAgICAgICA8c3BhbiBjbGFzcz0ic2hhbmd5aSBzaXplX2hvdmVyIj7kuIroo4U8L3NwYW4+XG4gICAgICAgIDxzcGFuIGNsYXNzPSJ4aWF6aHVhbmciPuS4i+ijhTwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9InRvbmd6aHVhbmcgdG9uZ3podWFuZzAiPjAgfiA05bKBPC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz0idG9uZ3podWFuZyB0b25nemh1YW5nNCI+NCB+IDEy5bKBPC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz0ic2hvZXMiPumei+WtkDwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9InRvbmd4aWUgdG9uZ3hpZTAiPjAgfiA05bKBPC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz0idG9uZ3hpZSB0b25neGllNCI+NCB+IDEy5bKBPC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz0iY2xvdGhfaWNvbiBodF9zaGFuZ3lpIG1hbnNoYW5nemh1YW5nIj48L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9ImRldGFpbF9yaWdodCI+XG4gICAgICAgIDxkaXYgY2xhc3M9ImNvbnRlbnRfY2VudGVyIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPSJzaXplX3MiPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgaWQ9InNpemVfaXRlbSI+XG4gICAgICAgICAgICA8YSBjbGFzcz0ic2l6ZV9pdGVtX2ltZyI+PC9hPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz0ic2l6ZV9kZXNjIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz0icmVkIj48L3NwYW4+XG4gICAgICAgICAgPHNwYW4gPuatpOWwuueggeS4uuS4gOiIrOWwuuegge+8jOS4jeWQjOWTgeeJjOWPr+iDveS8muWtmOWcqOebuOW6lOS4jeWQjDwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPSJzaXplX2Zvb3QiPlxuICAgICAgICA8ZGl2IGNsYXNzPSJzaXplX2NvbiI+5Zyo57q/5bC65a+46L2s5o2i5bel5YW3PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9InNpemVfb3AiPlxuICAgICAgICAgIDxpbnB1dCBpZD0iZmlyc3Rfc2l6ZSIgdHlwZT0idGV4dCI+XG4gICAgICAgICAgPGlucHV0IGNsYXNzPSJzaXplX3hpYWxhIGZpcnN0X3hpYWxhIiB2YWx1ZT0i5Y6Y57GzIiByZWFkb25seT5cbiAgICAgICAgICA8ZGl2IGNsYXNzPSJzaXplX3hpYWxhYm94IiBkYXRhLXNpemU9ImZpcnN0X3hpYWxhIj5cbiAgICAgICAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPjwvYT5cbiAgICAgICAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuexszwvYT5cbiAgICAgICAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuWOmOexszwvYT5cbiAgICAgICAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuavq+exszwvYT5cbiAgICAgICAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuiLseWwujwvYT5cbiAgICAgICAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuiLseWvuDwvYT5cbiAgICAgICAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPueggTwvYT5cbiAgICAgICAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuWwujwvYT5cbiAgICAgICAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuWvuDwvYT5cbiAgICAgICAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuWIhjwvYT5cbiAgICAgICAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuWOmDwvYT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz0iY29udmVyc2lvbiI+6L2s5o2i5Li6PC9zcGFuPlxuICAgICAgICAgIDxpbnB1dCBpZD0ic2Vjb25kX3NpemUiPlxuICAgICAgICAgIDxpbnB1dCBjbGFzcz0ic2l6ZV94aWFsYSBzZWNvbmRfeGlhbGEiIHZhbHVlPSLoi7Hlr7giIHJlYWRvbmx5PlxuICAgICAgICAgIDxkaXYgY2xhc3M9InNpemVfeGlhbGFib3giIGRhdGEtc2l6ZT0ic2Vjb25kX3hpYWxhIj5cbiAgICAgICAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPjwvYT5cbiAgICAgICAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuexszwvYT5cbiAgICAgICAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuWOmOexszwvYT5cbiAgICAgICAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuavq+exszwvYT5cbiAgICAgICAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuiLseWwujwvYT5cbiAgICAgICAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuiLseWvuDwvYT5cbiAgICAgICAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPueggTwvYT5cbiAgICAgICAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuWwujwvYT5cbiAgICAgICAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuWvuDwvYT5cbiAgICAgICAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuWIhjwvYT5cbiAgICAgICAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuWOmDwvYT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgICA8L2Rpdj4nCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICc8ZGl2IGlkPSJ0cmFuc3BvcnRfZGV0YWlsIiBjbGFzcz0iaHRfdHJhbnNfZGV0YWlsIGd3ZF9oYWl0YW8iIHN0eWxlPSJ0b3A6IHt7cG9zLnBvc3l9fXB4O2xlZnQ6IHt7cG9zLnBvc3h9fXB4OyI+XG4gICAgICAgIDxkaXYgY2xhc3M9InRyYW5zX2hlYWQiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9InRyYW5zX25hdiI+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3Bhbl8wIj7ovazov5DllYblrrY8L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3Bhbl8xIj7llYblrrbku5PlupM8L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3Bhbl8yIj7ovazov5DotLk8L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3Bhbl8zIj7otK3nianlhZrni6zlrrbkvJjmg6A8L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz0idHJhbnNfdyI+XG4gICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiB2YWx1ZT0ie3todF93ZWlnaHR9fSIgY2xhc3M9Imh0X3dlaWdodF9udW0iPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0id2VpZ2h0X3R5cGUiPktHPC9zcGFuPlxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz0idHJhbnNfY29udGVudCI+XG4gICAgICAgICAgPHVsIGlkPSJ0cmFuc19saXN0Ij5cbiAgICAgICAgICA8L3VsPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz0idHJhbnNfZm9vdCI+XG4gICAgICAgICAgPGEgaHJlZj0ie3tjX3NlcnZlcn19L2FwcC9oYWl0YW9faW50ciIgY2xhc3M9InRyYW5zX2hlbHAiIHRpdGxlPSLmtbfmt5jovazov5DmlLvnlaUiIHRhcmdldD0iX2JsYW5rIj7mtbfmt5jovazov5DmlLvnlaU8L2E+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9InJlZCI+PC9zcGFuPlxuICAgICAgICAgIDxzcGFuID7lhbfkvZPovazov5DkvJjmg6DmlL/nrZblkozotLnnlKjku6XmgqjpgInmi6nnmoTovazov5Dlhazlj7jkuLrlh4Y8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8c3BhbiBjbGFzcz0iY2xvc2ViYXIgY2xvc2ViZyIgdGl0bGU9IuWFs+mXrSI+PC9zcGFuPlxuICAgICAgICBcbjwvZGl2PicKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJKGZ1bmN0aW9uKHQpIHsKCQkJInVzZSBzdHJpY3QiOwoJCQl2YXIgaSA9IG4oMjgpLAoJCQkJYSA9IHZvaWQgMCwKCQkJCW8gPSBbXSwKCQkJCXIgPSB2b2lkIDAsCgkJCQlzID0gZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSBsb2NhdGlvbi5ocmVmLAoJCQkJCQlzID0gZS5tYXRjaCgvWz8mXWlkPShbMC05XSspLykgJiYgZS5tYXRjaCgvWz8mXWlkPShbMC05XSspLylbMV07CgkJCQkJaWYgKHMpIHsKCQkJCQkJdmFyIGwgPSB0LmRwICYmIHQuZHAuc2l0ZSB8fCB0LnNpdGU7CgkJCQkJCWlmIChsLmluZGV4T2YoIjk1MDk1IikgPiAtMSkgcmV0dXJuIHZvaWQoYSA9IHsKCQkJCQkJCW5vZGF0YTogITAKCQkJCQkJfSk7CgkJCQkJCSJhaS10YW9iYW8iID09IGwgJiYgKGwgPSAidGFvYmFvIik7CgkJCQkJCXZhciBjID0gbig0OSkuaW5pdCgpOwoJCQkJCQlpLnRyaWdnZXIoewoJCQkJCQkJdHlwZTogImdldFRhb2Jhb1RyZW5kIiwKCQkJCQkJCWluZm86IGMKCQkJCQkJfSksIGkub24oZnVuY3Rpb24oZSkgewoJCQkJCQkJaWYgKCJnZXRUYW9iYW9UcmVuZCIgPT0gZS50eXBlICYmIGUudmFsdWUpIHRyeSB7CgkJCQkJCQkJaWYgKGEgPSBKU09OLnBhcnNlKGUudmFsdWUpLnByaWNlSGlzdG9yeURhdGEsIGEgfHwgKGEgPSB7CgkJCQkJCQkJCW5vZGF0YTogITAKCQkJCQkJCQl9KSwgby5sZW5ndGggPiAwKSB7CgkJCQkJCQkJCWZvciAodmFyIHQgPSAwOyB0IDwgby5sZW5ndGg7IHQrKykgb1t0XShhKTsKCQkJCQkJCQkJciA9ICEwCgkJCQkJCQkJfQoJCQkJCQkJfSBjYXRjaCAobikge30KCQkJCQkJfSkKCQkJCQl9CgkJCQl9OwoJCQllLmV4cG9ydHMuX2luaXQgPSBmdW5jdGlvbigpIHsKCQkJCXQub24oInBhZ2VUeXBlPTIiLCBmdW5jdGlvbigpIHsKCQkJCQlzKCkKCQkJCX0pCgkJCX0sIGUuZXhwb3J0cy5pbml0MiA9IGZ1bmN0aW9uKCkgewoJCQkJcygpCgkJCX0sIGUuZXhwb3J0cy5nZXRUcmVuZCA9IGZ1bmN0aW9uKGUpIHsKCQkJCXJldHVybiBhID8gKGEubm9kYXRhICYmIChhID0gbnVsbCksIHZvaWQgZShhKSkgOiAoby5wdXNoKGUpLCB2b2lkIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJciB8fCBlKG51bGwpCgkJCQl9LCAzZTMpKQoJCQl9CgkJfSkuY2FsbCh0LCBuKDEpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCkgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBuID0gODgsCgkJCQlpID0gWyJ0PSIgKyB0KCJ0aXRsZSIpLmh0bWwoKS5zdWJzdHIoMCwgMjUwKSwgIms9bHhzeCIsICJkPWxzIl0sCgkJCQlhID0gZW5jb2RlVVJJQ29tcG9uZW50KGxvY2F0aW9uLmhyZWYpLAoJCQkJbyA9IHsKCQkJCQl6ZXJvOiBbIjAiLCAiMDAiLCAiMDAwIiwgIjAwMDAiLCAiMDAwMDAiLCAiMDAwMDAwIiwgIjAwMDAwMDAiLCAiMDAwMDAwMDAiXSwKCQkJCQlzdHJSZXZlcnNlOiBmdW5jdGlvbihlKSB7CgkJCQkJCXZhciB0LCBuLCBpID0gW107CgkJCQkJCWZvciAodCA9IDAsIG4gPSBlLmxlbmd0aDsgbiA+IHQ7IHQrKykgaVtpLmxlbmd0aF0gPSBlLmNoYXJBdCh0KTsKCQkJCQkJcmV0dXJuIGkucmV2ZXJzZSgpLmpvaW4oIiIpCgkJCQkJfSwKCQkJCQlpc1N0cmluZzogZnVuY3Rpb24oZSkgewoJCQkJCQlyZXR1cm4gIltvYmplY3QgU3RyaW5nXSIgPT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKQoJCQkJCX0sCgkJCQkJZW5jcnlwdDogZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCQl2YXIgaSwgYSwgciA9IFtdOwoJCQkJCQlpZiAoIW8uaXNTdHJpbmcoZSkpIHJldHVybiAiIjsKCQkJCQkJZm9yIChpID0gMCwgYSA9IGUubGVuZ3RoOyBhID4gaTsgaSsrKSByW3IubGVuZ3RoXSA9IG8udG8oZS5jaGFyQ29kZUF0KGkpLCB0KTsKCQkJCQkJcmV0dXJuIG4gPyBvLnN0clJldmVyc2Uoci5qb2luKCIiKSkgOiByLmpvaW4oIiIpCgkJCQkJfSwKCQkJCQl0bzogZnVuY3Rpb24oZSwgdCkgewoJCQkJCQl2YXIgaSA9ICIiICsgKGUgKyBuKS50b1N0cmluZygxNiksCgkJCQkJCQlhID0gdCAtIGkubGVuZ3RoOwoJCQkJCQlyZXR1cm4gYSA+IDAgPyBvLnplcm9bYSAtIDFdICsgaSA6IGkKCQkJCQl9LAoJCQkJCWRlY3J5cHQ6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQkJaWYgKCFvLmlzU3RyaW5nKGUpKSByZXR1cm4gIiI7CgkJCQkJCXZhciBpID0gW107CgkJCQkJCW4gJiYgKGUgPSBvLnN0clJldmVyc2UoZSkpOwoJCQkJCQlmb3IgKHZhciBhID0gMCwgciA9IDA7IGEgPCBlLmxlbmd0aDsgYSArPSB0LCByKyspIHsKCQkJCQkJCXZhciBzID0gZS5zdWJzdHJpbmcoYSwgYSArIHQpOwoJCQkJCQkJaVtyXSA9IG8udHJhbkZvcm1hdChzLCB0KQoJCQkJCQl9CgkJCQkJCXJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgaSkKCQkJCQl9LAoJCQkJCXRyYW5Gb3JtYXQ6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQkJcmV0dXJuIGUubGVuZ3RoICE9PSB0ID8gMCA6IHBhcnNlSW50KGUucmVwbGFjZSgvXjArL2csICIiKSwgMTYpIC0gbgoJCQkJCX0sCgkJCQkJZ2VuRXh0ZW5zaW9uSWQ6IGZ1bmN0aW9uKCkgewoJCQkJCQlpZiAod2luZG93LmxvY2FsU3RvcmFnZS5leHRlbnNpb25pZCkgcmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZXh0ZW5zaW9uaWQ7CgkJCQkJCWZvciAodmFyIGUgPSAiIiwgdCA9IDE7IDMyID49IHQ7ICsrdCkgZSArPSBNYXRoLmZsb29yKDE2ICogTWF0aC5yYW5kb20oKSkudG9TdHJpbmcoMTYpLCAoOCA9PSB0IHx8IDEyID09IHQgfHwgMTYgPT0gdCB8fCAyMCA9PSB0KSAmJiAoZSArPSAiLSIpOwoJCQkJCQlyZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZS5leHRlbnNpb25pZCA9IGUsIGUKCQkJCQl9CgkJCQl9OwoJCQllLmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkgewoJCQkJdmFyIGUgPSAiIiwKCQkJCQl0ID0gIi8vemh1IiwKCQkJCQluID0gInNob3UuaHVpaCIsCgkJCQkJciA9ICJ1aS5jbi9wcm9kdWN0IiwKCQkJCQlzID0gIlNlbnNlP2JyIiwKCQkJCQlsID0gIm93c2VyPWNocm9tZSZ2ZXIiLAoJCQkJCWMgPSAic2lvbj00LjIuOS42JnZlbmRvcj1jaHJvbSI7CgkJCQllID0gdCArIG4gKyByICsgcyArIGwgKyBjOwoJCQkJdmFyIGQgPSBvLmdlbkV4dGVuc2lvbklkKCksCgkJCQkJcCA9IG8uZW5jcnlwdChpLmpvaW4oIl4mIiksIDQsICExKSwKCQkJCQloID0gby5lbmNyeXB0KGEsIDIsICEwKSwKCQkJCQl1ID0gMTkwMCAtIGgubGVuZ3RoOwoJCQkJcCA9IHAubGVuZ3RoID4gdSA/IHAuc3Vic3RyKDAsIHUpIDogcDsKCQkJCXZhciBtID0gbG9jYXRpb24ucHJvdG9jb2wgKyBlICsgImVuZXcmYXY9My4wJmV4dGVuc2lvbmlkPSIgKyBkICsgIiZlbWFpbD0mcG9wPSZrPSIgKyBwICsgIiZubD10cnVlJm09IiArIGg7CgkJCQlyZXR1cm4gbQoJCQl9CgkJfSkuY2FsbCh0LCBuKDYpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24oZSkgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciB0ID0gW107CgkJCWUucGx1Z2lucyB8fCAoZS5wbHVnaW5zID0gW10pLCBlLnBsdWdpbnMgPSBlLnBsdWdpbnMuY29uY2F0KHQpCgkJfSkuY2FsbCh0LCBuKDEpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCkgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBpID0gbig1Mik7CgkJCWkodCksIGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkgewoJCQkJdmFyIGUgPSBbXTsKCQkJCXQucGx1Z2lucyAmJiAoZSA9IGUuY29uY2F0KHQucGx1Z2lucykpOwoJCQkJZm9yICh2YXIgbiA9IGUubGVuZ3RoIC0gMTsgbiA+PSAwOyBuLS0pIHsKCQkJCQl2YXIgaSA9IGVbbl07CgkJCQkJaWYgKGkgJiYgaS5faW5pdCkgdHJ5IHsKCQkJCQkJaS5faW5pdCgpCgkJCQkJfSBjYXRjaCAoYSkge30KCQkJCX0KCQkJfQoJCX0pLmNhbGwodCwgbigxKSkKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJInVzZSBzdHJpY3QiOwoJCWUuZXhwb3J0cyA9IGZ1bmN0aW9uKGUpIHsKCQkJZS5fX2V2ZW50cyA9IHt9LCBlLm9uID0gZnVuY3Rpb24odCwgbikgewoJCQkJZS5fX2V2ZW50c1t0XSA9IGUuX19ldmVudHNbdF0gfHwgW10sIGUuX19ldmVudHNbdF0ucHVzaChuKQoJCQl9LCBlLm9mZiA9IGZ1bmN0aW9uKHQsIG4pIHsKCQkJCXZhciBpID0gZS5fX2V2ZW50c1t0XTsKCQkJCWlmIChpICYmIGkubGVuZ3RoKQoJCQkJCWZvciAodmFyIGEgPSAwOyBhIDwgaS5sZW5ndGg7IGErKykKCQkJCQkJaWYgKGlbYV0gPT09IG4pIHsKCQkJCQkJCWkuc3BsaWNlKGEsIDEpOwoJCQkJCQkJYnJlYWsKCQkJCQkJfQoJCQl9LCBlLnRyaWdnZXIgPSBmdW5jdGlvbih0KSB7CgkJCQl2YXIgbiA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7CgkJCQluLnNoaWZ0KCk7CgkJCQl2YXIgaSA9IGUuX19ldmVudHNbdF07CgkJCQlpZiAoaSAmJiBpLmxlbmd0aCkKCQkJCQlmb3IgKHZhciBhID0gMDsgYSA8IGkubGVuZ3RoOyBhKyspIGlbYV0uYXBwbHkodGhpcywgbikKCQkJfQoJCX0KCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJKGZ1bmN0aW9uKHQsIG4pIHsKCQkJInVzZSBzdHJpY3QiOwoJCQllLmV4cG9ydHMgPSBmdW5jdGlvbihlKSB7CgkJCQl2YXIgaSA9ICI/Y2FsbGJhY2s9PyI7CgkJCQkoInNvZ291IiA9PT0gdC5mcm9tX2RldmljZSB8fCAiY2hyb21lIiA9PT0gdC5mcm9tX2RldmljZSkgJiYgKGkgPSAiIiksIG4uZ2V0SlNPTih0LnNlcnZlciArICIvaXAucGhwIiArIGkpLmRvbmUoZnVuY3Rpb24obikgewoJCQkJCW4gJiYgbi5yZXN1bHQgaW5zdGFuY2VvZiBBcnJheSAmJiAodC5mb3JiaWRXaXNobGl0ID0gITAsIHQuZm9yYmlkWUZRID0gITApLCBuICYmIG4ucmVzdWx0ICYmIG4ucmVzdWx0LmFkZHJlc3MgJiYgbi5yZXN1bHQuYWRkcmVzcy5pbmRleE9mKCLljJfkuqwiKSA+IC0xICYmICh0LmZvcmJpZFdpc2hsaXQgPSAhMCwgdC5mb3JiaWRZRlEgPSAhMCksIGUoKQoJCQkJfSkuZmFpbChmdW5jdGlvbigpIHsKCQkJCQllKCkKCQkJCX0pCgkJCX0sIGUuZXhwb3J0cy5jb21tb24gPSBmdW5jdGlvbihlKSB7CgkJCQl2YXIgaSA9ICI/Y2FsbGJhY2s9PyI7CgkJCQkoInNvZ291IiA9PT0gdC5mcm9tX2RldmljZSB8fCAiY2hyb21lIiA9PT0gdC5mcm9tX2RldmljZSkgJiYgKGkgPSAiIiksICJ4ZGpmIiA9PT0gdC5mcm9tX2RldmljZSAmJiAoaSA9ICI/Y2FsbGJhY2s9PyZkaXN0cmljdD0xIiksIG4uZ2V0SlNPTih0LnNlcnZlciArICIvaXAucGhwIiArIGkpLmRvbmUoZnVuY3Rpb24odCkgewoJCQkJCWUodCAmJiB0LnJlc3VsdCAmJiB0LnJlc3VsdC5hZGRyZXNzID8gdCA6IG51bGwpCgkJCQl9KS5mYWlsKGZ1bmN0aW9uKCkgewoJCQkJCWUobnVsbCkKCQkJCX0pCgkJCX0KCQl9KS5jYWxsKHQsIG4oMSksIG4oNikpCgl9LAoJZnVuY3Rpb24odCwgbiwgaSkgewoJCShmdW5jdGlvbihuKSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJdmFyIGEgPSBpKDUpLAoJCQkJbyA9IG4ucGFnZUluZm8uc2l0ZU5hbWUsCgkJCQlyID0gaSg2KSwKCQkJCXMgPSBpKDU1KSwKCQkJCWwgPSAwLAoJCQkJYyA9IGkoNDApLAoJCQkJZCA9IGZ1bmN0aW9uKCkgewoJCQkJCXJldHVybiB7CgkJCQkJCW5hbWU6IHIoInRpdGxlIikuaHRtbCgpLAoJCQkJCQlwcmljZTogMCwKCQkJCQkJaXNibjogIiIsCgkJCQkJCXVybDogd2luZG93LmxvY2F0aW9uLmhyZWYKCQkJCQl9CgkJCQl9LAoJCQkJcCA9IGZ1bmN0aW9uKGUsIHQsIGkpIHsKCQkJCQl2YXIgbyA9IGQoKTsKCQkJCQluLnNpdGUgPSBpOwoJCQkJCXRyeSB7CgkJCQkJCXZhciBzID0gcihlKS5lcSh0KTsKCQkJCQkJaWYgKG8ubmFtZSA9IHMudGV4dCgpLCBuLmhyZWYgPSBuLm1ha2VVcmwobi5ocmVmLCBzLmF0dHIoImhyZWYiKSksIG8udXJsID0gbi5ocmVmLCAidW5kZWZpbmVkIiA9PSB0eXBlb2Ygbi5ocmVmIHx8ICIiID09IG4uaHJlZikgby51c2VsZXNzID0gITA7CgkJCQkJCWVsc2UgewoJCQkJCQkJdmFyIGwgPSBhLmlzUHJvZHVjdFBhZ2UoKTsKCQkJCQkJCWwgfHwgKG8udXNlbGVzcyA9ICEwKQoJCQkJCQl9CgkJCQkJfSBjYXRjaCAoYykgewoJCQkJCQluLmRlYnVnICYmIGNvbnNvbGUubG9nKGMpLCBvLnVzZWxlc3MgPSAhMAoJCQkJCX0KCQkJCQlyZXR1cm4gbwoJCQkJfSwKCQkJCWggPSBmdW5jdGlvbihlLCB0LCBpLCBhKSB7CgkJCQkJdmFyIG8gPSBkKCk7CgkJCQkJaWYgKG4uc2l0ZSA9IGEsIG4uY3JjNjQpIHJldHVybiBvOwoJCQkJCXRyeSB7CgkJCQkJCXZhciBzID0gcihlKS5lcSh0KTsKCQkJCQkJbi5ocmVmID0gcy5hdHRyKGkpLCBvLnVybCA9IHMuYXR0cihpKSwgcy5hdHRyKGkpICYmIChvLnVybCA9IHMuYXR0cihpKSksICgidW5kZWZpbmVkIiA9PSB0eXBlb2Ygbi5ocmVmIHx8ICIiID09IG4uaHJlZikgJiYgKG4uaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmKQoJCQkJCX0gY2F0Y2ggKGwpIHsKCQkJCQkJbi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyhsKQoJCQkJCX0KCQkJCQlyZXR1cm4gbwoJCQkJfSwKCQkJCXUgPSB7CgkJCQkJeW9veDogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIjeW9veCIpLnRleHQoKSwKCQkJCQkJCXByaWNlOiByKCIjaXRlbS1wcmljZSAuZm9udC1ib2xkIikudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWZlaW5pdTogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIjbWFpbl9pbmZvX2d1aWRhbmNlX3RpdGxlIikudGV4dCgpLAoJCQkJCQkJcHJpY2U6IHIoIi5pbmZvLXByaWNlPi5KUy1jb250cm9sLXByaWNlIikudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCXN1YW5qdXppOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5wcm9kdWN0LXRpdGxlcyBoMiIpLnRleHQoKSwKCQkJCQkJCXByaWNlOiByKCIuYWN0aW9uLXByb19wcmljZSIpLnRleHQoKQoJCQkJCQl9CgkJCQkJfSwKCQkJCQlpa2p0YW86IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiI3NpZGViYXIgLnRpdGxlIikudGV4dCgpLAoJCQkJCQkJcHJpY2U6IHIoIiNnb29kc1ByaWNlIikudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCW1laXp1OiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIiNwcm9wZXJ0eSAucHJvcGVydHktaGQgaDEiKS50ZXh0KCksCgkJCQkJCQlwcmljZTogcigiI0pfcHJpY2UiKS50ZXh0KCkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJa2FsdWxpOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5wcm8tZGV0YWlsID4gaDEiKS50ZXh0KCksCgkJCQkJCQlwcmljZTogcigiI2thbHVsaVByaWNlIikudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCW9wcG9zaG9wOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6ICJvcHBvICAgIiArIHIoIi5wcm9kdWN0LXRpdGxlIikudGV4dCgpLAoJCQkJCQkJcHJpY2U6IHIoIi5idXlpbmctcHJpY2UgLnByaWNlIikudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCXlhbzEyMzogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIuaW5uZXI+aDEiKS50ZXh0KCksCgkJCQkJCQlwcmljZTogcigiI29wciIpLnRleHQoKQoJCQkJCQl9CgkJCQkJfSwKCQkJCQliYW9iZWlnZXppOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIiNpdGVtSW5mbz4ubmFtZT5oMSIpLnRleHQoKSwKCQkJCQkJCXByaWNlOiByKCIjYmJfcHJpY2UiKS50ZXh0KCkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJdG84dG86IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiI3BfbmFtZSIpLnRleHQoKSwKCQkJCQkJCXByaWNlOiByKCJzcGFuW25hbWU9Z29vZHNfcmVhbF9wcmljZV0iKS5lcSgwKS50ZXh0KCkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJc2hhbmdwaW46IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IHIoIi5zcERldGFpbF9wcmljZV9ib3ggPiBoMiA+IGEiKS50ZXh0KCk7CgkJCQkJCWUgfHwgKGUgPSByKCIuc3BEZXRhaWxfcHJpY2VfYm94ID4gaDMgPiBhIikudGV4dCgpKTsKCQkJCQkJdmFyIHQgPSB7CgkJCQkJCQluYW1lOiBlICsgIiAiICsgcigiLmNvbW1vZGl0eV90aXRsZSIpLnRleHQoKSwKCQkJCQkJCXByaWNlOiByKCIuc3BEZXRhaWxfc3BQcmljZUJpZ1JlZCA+IGkiKS50ZXh0KCksCgkJCQkJCQlpbWc6IHIoIiNzcERldGFpbF9iaWdJbWcgPiBpbWciKS5hdHRyKCJzcmMiKQoJCQkJCQl9OwoJCQkJCQlyZXR1cm4gdC5wcmljZSB8fCAodC5wcmljZSA9IHIoIi5zcERldGFpbF9zcFByaWNlQmlnID4gaSIpLnRleHQoKSksIHQucHJpY2UgfHwgKHQucHJpY2UgPSByKCJlbS5mb250XzE4IikudGV4dCgpKSwgdAoJCQkJCX0sCgkJCQkJemhvbmdqaXU6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IHIoIi5pbmZvID4gaDEiKS50ZXh0KCksCgkJCQkJCQl0ID0gcigiLnByaSA+IGIiKS50ZXh0KCk7CgkJCQkJCWUgfHwgKGUgPSByKCIuY190X2xpc3QgPiBsaSA+IHNwYW4iKS50ZXh0KCksIHQgPSByKCIuYnV5X3ByaSIpLnRleHQoKSk7CgkJCQkJCXZhciBuID0gewoJCQkJCQkJbmFtZTogZSwKCQkJCQkJCXByaWNlOiB0CgkJCQkJCX07CgkJCQkJCXJldHVybiBuCgkJCQkJfSwKCQkJCQlsZW1hbGw6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IHIoIi5wcm9fbmFtZSIpLmVxKDApLnRleHQoKSwKCQkJCQkJCXQgPSByKCIjYWxsX3ByaWNlIikudGV4dCgpOwoJCQkJCQlyZXR1cm4gIiIgPT0gdCAmJiAodCA9IHIoIi5zZWN0aW9uX3RleHQgLnJlZCAuZm9udDQ4IikuZXEoMCkudGV4dCgpKSwgIiIgPT0gZSAmJiAoZSA9IHIoIi5wcm9kdWN0X2luZm9fYXR0cmlidXRlIC50aXRsZSIpLnRleHQoKSksIHsKCQkJCQkJCW5hbWU6ICLkuZDop4YiICsgZSwKCQkJCQkJCXByaWNlOiB0CgkJCQkJCX0KCQkJCQl9LAoJCQkJCWp1YW5waTogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIuZGVhbC13cmFwIGgxIikudGV4dCgpLAoJCQkJCQkJcHJpY2U6IHIoIi5wcmljZSAuY3VycmVudCIpLnRleHQoKQoJCQkJCQl9CgkJCQkJfSwKCQkJCQloaXNlbnNlOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5kZXRhaWxfaW5mbyBoMyIpLnRleHQoKSwKCQkJCQkJCXByaWNlOiByKCIjc2FsZVByaWNlSWQiKS50ZXh0KCkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJcHVyY290dG9uOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5nb29kcy10aXRlIGg1IikuZXEoMCkudGV4dCgpLAoJCQkJCQkJcHJpY2U6IHIoIi5wcmljZSIpLmVxKDApLnRleHQoKQoJCQkJCQl9CgkJCQkJfSwKCQkJCQl3c3R4OiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5pdGVtSW5mbyAudGl0bGUiKS50ZXh0KCksCgkJCQkJCQlwcmljZTogcigiLml0ZW1JbmZvIC5wcmljZSBiIikudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCXJveXlvdW5nY2hlbWlzdDogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIucHJvZHVjdC1uYW1lIikuZXEoMCkudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCW1lZGloZWFsc2hvcDogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIucHJvZHVjdC1uYW1lIikuZXEoMCkudGV4dCgpLAoJCQkJCQkJcHJpY2U6IHIoIi5ybWItcHJpY2UiKS5lcSgwKS50ZXh0KCkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJIjEtMTYzIjogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIubS1kZXRhaWwtbWFpbi10aXRsZSBoMSIpLnRleHQoKQoJCQkJCQl9CgkJCQkJfSwKCQkJCQkiMTAwMXBoYXJtYWNpZXMiOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5wcm9kdWN0LW5hbWUgaDEiKS5lcSgwKS50ZXh0KCksCgkJCQkJCQlwcmljZTogcigiLnJtYi1wcmljZSIpLmVxKDApLnRleHQoKQoJCQkJCQl9CgkJCQkJfSwKCQkJCQkibG9va2ZhbnRhc3RpYy1jbiI6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiLnByb2R1Y3QtdGl0bGUiKS5lcSgwKS50ZXh0KCksCgkJCQkJCQlwcmljZTogcigiLnByb2R1Y3QtcHJpY2UgLnByaWNlIikuZXEoMCkudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWd1b2ppbWFtaTogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIjRUNTX0ZPUk1CVVkgLm5hbWUiKS50ZXh0KCksCgkJCQkJCQlwcmljZTogcigiI0VDU19TSE9QUFJJQ0UiKS50ZXh0KCksCgkJCQkJCQlpbWc6IHIoIiNkZW1vIGxpIGltZyIpLmVxKDApLmF0dHIoInNyYyIpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWppbnhpYW5nOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5uYW1lIikuZXEoMCkudGV4dCgpLAoJCQkJCQkJcHJpY2U6IHIoIi5qeFByaWNlIikuZXEoMCkudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCXlvdTE2MzogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIuaW5mbyAubmFtZSIpLmVxKDApLnRleHQoKSwKCQkJCQkJCXByaWNlOiByKCIuai1yZXRhaWwtcHJpY2UiKS5lcSgwKS50ZXh0KCkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJYmw6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiLmdvb2RzLW5hbWUiKS5lcSgwKS50ZXh0KCksCgkJCQkJCQlwcmljZTogcigiI0ZsYXNoUHJpY2UiKS50ZXh0KCkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJYmVzdGluZm9vZHM6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiLmdvb2RzbmFtZSIpLmVxKDApLnRleHQoKSwKCQkJCQkJCXByaWNlOiByKCIucHJpY2UxIikuZXEoMCkudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWF4bWFsbDogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIuZ29vZHMtaW50cm8gLm5hbWUiKS50ZXh0KCksCgkJCQkJCQlwcmljZTogcigiI3NrdV92aXBfcHJpY2UiKS50ZXh0KCkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJYmZ0djogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIudGl0bGUgaDIiKS50ZXh0KCksCgkJCQkJCQlwcmljZTogcigiLnByaWNlIikudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCXdhbmdqaXU6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiLnBhcnRfbGluZTAxIikudGV4dCgpLAoJCQkJCQkJcHJpY2U6IHIoIi5wYXJ0X2xpbmUwNCAuc3BhcmUwMiBzcGFuIikudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCTE4OTogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gcigiI2FydGljbGVzaG9ydHRpdGxlIikudGV4dCgpLAoJCQkJCQkJdCA9IHIoIiNtYWxsX3ByaWNlIikudGV4dCgpLAoJCQkJCQkJbiA9ICIiOwoJCQkJCQlyZXR1cm4gIiIgPT0gZSAmJiAoZSA9IHIoIi5waC10aXRsZSBoMSIpLmVxKDApLnRleHQoKS5yZXBsYWNlKCLku4XpmZDmsZ/opb/nnIHnlKjmiLciLCAiIikpLCBlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigiaXBob25lIikgPiAtMSAmJiAobiA9ICLoi7nmnpwiKSwgIiIgPT0gdCAmJiAodCA9IHIoIiNhc3NwcmljZSIpLnRleHQoKSksIHsKCQkJCQkJCW5hbWU6IG4gKyBlLAoJCQkJCQkJcHJpY2U6IHQsCgkJCQkJCQlicmFuZF9zdHJpbmc6IG4KCQkJCQkJfQoJCQkJCX0sCgkJCQkJdGFxdTogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIuZGV0YWlscy1uYW1lIikuZXEoMCkudGV4dCgpLAoJCQkJCQkJcHJpY2U6IHIoIiNkZXRhaWxzLXByaWNlIikudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWJlc3RjYWtlOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5pbmZvLXJpZ2h0LWxpIHAiKS5lcSgwKS50ZXh0KCksCgkJCQkJCQlwcmljZTogcigiLmluZm8tcmlnaHQtbGkgLnM0IikuZXEoMCkudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWdvbWVoaWdvOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIiNnbS1wcmQtbWFpbiBsaS5wcmR0aXQiKS50ZXh0KCksCgkJCQkJCQlwcmljZTogcigiI3ByZFByaWNlIikudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWxvdm86IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiI2dvb2RzTmFtZVN0cm9uZyIpLnRleHQoKSwKCQkJCQkJCXByaWNlOiByKCIjYWN0TXNnUyBiaWciKS50ZXh0KCkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJemhlODAwOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIiNkZXRhaWwgLmRldGFpbG1ldGEgLmNsZWFyIGgxIikudGV4dCgpLAoJCQkJCQkJcHJpY2U6IHIoIi5wcmljZSAuanNfcHJpY2Vfc3QiKS50ZXh0KCkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJaHVhOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5wcm9kdWN0LXIgLnRpdGxlIGgzLnByb2R1Y3QtdGl0bGUiKS50ZXh0KCksCgkJCQkJCQlwcmljZTogcigiI2ZqciAucHJpY2Utc2VsbCAucHJpY2UtbnVtIikudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCW1laTogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIuUHJvZHVjdF90aXRsZSIpLnRleHQoKSArICIgIiArIHIoIi5wcm9kdWN0X25hbWUgaDEiKS50ZXh0KCksCgkJCQkJCQlwcmljZTogcigiI3Byb2R1Y3RSTUIiKS50ZXh0KCkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJYmVubGFpOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSByKCIjaW50cm9fcHJpY2UgLnByaWNlIilbMF0uZmlyc3RDaGlsZC5ub2RlVmFsdWU7CgkJCQkJCXJldHVybiAiIiAhPSBlICYmIGUgfHwgKGUgPSByKCIjaW50cm9fcHJpY2UgLnByaWNlIikudGV4dCgpKSwgewoJCQkJCQkJcHJpY2U6IGUsCgkJCQkJCQluYW1lOiByKCIjUHJvZHVjdF9Qcm9kdWN0RGV0YWlsc05hbWUiKS50ZXh0KCkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJdnNpZ286IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiaDEiKS50ZXh0KCksCgkJCQkJCQlwcmljZTogcigiLmRldGFpbC1wcmljZSIpLnRleHQoKQoJCQkJCQl9CgkJCQkJfSwKCQkJCQlmZW5ncXU6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiaDEiKS50ZXh0KCksCgkJCQkJCQlwcmljZTogcigiLmdvb2RzLXByaWNlIC5nb29kcy1wcmljZS1yMSBzdHJvbmciKS50ZXh0KCkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJdm1laTogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gcigiI2N1cnJQcmljZSIpLnRleHQoKTsKCQkJCQkJcmV0dXJuIGUuaW5kZXhPZigiLSIpID4gLTEgJiYgKGUgPSBlLnNwbGl0KCItIilbMF0pLCB7CgkJCQkJCQluYW1lOiByKCIucHJvZHVjdF9kZXRhaWxfdGl0bGUgaDEiKS50ZXh0KCksCgkJCQkJCQlwcmljZTogZQoJCQkJCQl9CgkJCQkJfSwKCQkJCQllYXNlZXllczogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIubWFpbiBkaXYuZ29vZHNfbmFtZV90ciBzcGFuIikudGV4dCgpLAoJCQkJCQkJcHJpY2U6IHIoIi5tYWluIHAuY29sb3I5IHNwYW4uZnMyMC5mb250QXJpYWwiKS50ZXh0KCkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJc3RhcGxlczogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIucHJvZHVjdEluZm8gaDMgc3BhbiIpLnRleHQoKSwKCQkJCQkJCXByaWNlOiByKCIubm93UHJpY2UiKS50ZXh0KCkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJZWZvdGlsZTogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIuaXRlbS10aXRsZSIpLnRleHQoKSwKCQkJCQkJCXByaWNlOiByKCIuaXRlbS1hY3RQcmljZSBiIikudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWpnYjogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIuaF9kZXNfdGl0bGUiKS50ZXh0KCksCgkJCQkJCQlwcmljZTogcigiLmhfZGVzX3ByaWNlIC5KX3JtYl9wcmljZSIpLnRleHQoKQoJCQkJCQl9CgkJCQkJfSwKCQkJCQkiNTFkaW4iOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5wcm9kdWN0X3RpdGxlID4gZGl2IikuZXEoMCkudGV4dCgpLAoJCQkJCQkJcHJpY2U6IHIoIi5wcmljZV9ybWIiKS50ZXh0KCkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJYWlkYWk6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiLnByby1kZXQgaDMiKS50ZXh0KCksCgkJCQkJCQlwcmljZTogcigiI190aGlzZnAiKS50ZXh0KCkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJYm9xaWk6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiLnNob3BfbmFtZSIpLnRleHQoKSwKCQkJCQkJCXByaWNlOiByKCIjYnFQcmljZSIpLnRleHQoKQoJCQkJCQl9CgkJCQkJfSwKCQkJCQlzcGlkZXI6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiLmdkTmFtZSBoMSIpLnRleHQoKSwKCQkJCQkJCXByaWNlOiByKCIjbTEycHJpY2VTcGFuIikudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCSJ0YW9iYW8teGlhbnl1IjogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCJoMS50aXRsZSIpLnRleHQoKSwKCQkJCQkJCXByaWNlOiByKCIucHJpY2UtYmxvY2sgLnByaWNlIGVtIikudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCSJhaS10YW9iYW8iOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSB2b2lkIDA7CgkJCQkJCWlmICghbi5jaHJvbWVfZXh0ZW5zaW9uKSByZXR1cm4gZSA9IHdpbmRvdy5wYWdlY29uZmlnLnByb21vUHJpY2UsIGUgfHwgKGUgPSB3aW5kb3cuRU5WX0RBVEEgJiYgd2luZG93LkVOVl9EQVRBLmNvbXBMaXN0ICYmIHdpbmRvdy5FTlZfREFUQS5jb21wTGlzdC5pdGVtX2RldGFpbCAmJiB3aW5kb3cuRU5WX0RBVEEuY29tcExpc3QuaXRlbV9kZXRhaWwuZGF0YSAmJiB3aW5kb3cuRU5WX0RBVEEuY29tcExpc3QuaXRlbV9kZXRhaWwuZGF0YS5kYXRhMVswXS5wcmljZSksIHsKCQkJCQkJCW5hbWU6IHIoImgzLml0ZW0tdGl0bGUgYSIpLnRleHQoKSwKCQkJCQkJCXByaWNlOiBlLAoJCQkJCQkJdXJsOiB3aW5kb3cucGFnZWNvbmZpZy5pdGVtSWQgPyAiaHR0cDovL2l0ZW0udGFvYmFvLmNvbS9pdGVtLmh0bT9pZD0iICsgd2luZG93LnBhZ2Vjb25maWcuaXRlbUlkIDogbnVsbAoJCQkJCQl9OwoJCQkJCQl2YXIgdCA9IHIoIi5haXRhb2Jhby1lZGV0YWlsLWhlYWRlciBzY3JpcHQiKS50ZXh0KCksCgkJCQkJCQlpID0gL2l0ZW1JZCI6IihcZCspIi8uZXhlYyh0KTsKCQkJCQkJcmV0dXJuIGkgJiYgKGkgPSBpWzFdKSwgZSA9IC9wcm9tb1ByaWNlIjoiKFtcZFwuXSspIi8uZXhlYyh0KSwgZSAmJiAoZSA9IGVbMV0pLCB7CgkJCQkJCQluYW1lOiByKCJoMy5pdGVtLXRpdGxlIGEiKS50ZXh0KCksCgkJCQkJCQlwcmljZTogZSwKCQkJCQkJCXVybDogaSA/ICJodHRwOi8vaXRlbS50YW9iYW8uY29tL2l0ZW0uaHRtP2lkPSIgKyBpIDogbnVsbAoJCQkJCQl9CgkJCQkJfSwKCQkJCQltNmdvOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5nb29kc05hbWUgaDEiKS50ZXh0KCksCgkJCQkJCQlwcmljZTogcigiI1NHb29kc1ByaWNlIikudGV4dCgpLnJlcGxhY2UoL1tcc10rL2csICIiKQoJCQkJCQl9CgkJCQkJfSwKCQkJCQlsb2dpdGVjaDogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCJoMS5wcm9kdWN0LXRpdGxlIikudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWtqdDogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIucHJvZGV0YWlsdGl0bGUgaDEiKS50ZXh0KCksCgkJCQkJCQlwcmljZTogcigibGkucHJpY2VpbmZvcCBzcGFuOmZpcnN0IikudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCXRlc3Q6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJdXJsOiByKCIjdXJsIikudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCXBoaWxpcHM6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiaDEuc2t1LW5hbWUiKS50ZXh0KCkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJdGNsOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5wX25hbWUiKS50ZXh0KCkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJY2hhbmdob25nOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5wY19uYW1lIikudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWtvbmthOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5nX3RpdGxlIGgxIikudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWluZWlnbzogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCJoNS5Qcm9OYW1lIikudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCXNrZzogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIucHJvZHVjdC10aXRsZXMiKS50ZXh0KCkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJImstdG91Y2giOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5wcm9fdGl0bGUiKS50ZXh0KCkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJZ2lvbmVlOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIiNnb29kTmFtZSIpLnRleHQoKQoJCQkJCQl9CgkJCQkJfSwKCQkJCQkiNTFidXkiOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCk7CgkJCQkJCXJldHVybiBlLnByaWNlID0gcignLm1vZF9wcmljZVtpdGVtcHJvcD0ibG93UHJpY2UiXScpLnRleHQoKS5yZXBsYWNlKC9b77+lwqVcc10rL2csICIiKSwgIiIgPT0gZS5wcmljZSAmJiAoZS5wcmljZSA9IHdpbmRvdy5pdGVtSW5mbyAmJiB3aW5kb3cuaXRlbUluZm8ucHJpY2UgLyAxMDApLCAiIiA9PSBlLnByaWNlICYmIChlLnByaWNlID0gcigiLnhiYXNlX2l0ZW0gIC5tb2RfcHJpY2UgIikudGV4dCgpKSwgZS5uYW1lID0gd2luZG93Lml0ZW1JbmZvICYmIHdpbmRvdy5pdGVtSW5mby5uYW1lLCBlLmJyYW5kX3N0cmluZyA9IHdpbmRvdy5pdGVtSW5mbyAmJiB3aW5kb3cuaXRlbUluZm8uYnJhbmRfbmFtZSwgZQoJCQkJCX0sCgkJCQkJdml2bzogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIucHJvZHVjdC10aXRsZXMgaDMiKS50ZXh0KCksCgkJCQkJCQlwcmljZTogcigiLm5vdy1wcmljZSIpLnRleHQoKQoJCQkJCQl9CgkJCQkJfSwKCQkJCQkidGFvYmFvLTk1MDk1IjogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQlyZXR1cm4gZS5wcmljZSA9IHIoIiNKX1Byb21vUHJpY2UgLnRtLXByaWNlIikudGV4dCgpLCBlLm5hbWUgPSByKCIjSl9EZXRhaWxNZXRhIC50Yi1kZXRhaWwtaGQgaDEiKS50ZXh0KCksIGUucHJpY2UgfHwgKGUucHJpY2UgPSByKCIjSl9TdHJQcmljZU1vZEJveCAudG0tcHJpY2UiKS50ZXh0KCkpLCBlCgkJCQkJfSwKCQkJCQl3YWxtYXJ0OiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCk7CgkJCQkJCXJldHVybiBlLm5hbWUgPSByKCIuanMtcHJvZHVjdC1oZWFkaW5nIHNwYW4iKS50ZXh0KCksIGUucHJpY2UgPSByKCIuanMtcHJpY2UtZGlzcGxheSIpLnRleHQoKSwgZS5pbWcgPSByKCIuanMtcHJvZHVjdC1tZWRpYSAuc2xpY2stdHJhY2sgbGkgYSBpbWciKS5lcSgwKSAmJiByKCIuanMtcHJvZHVjdC1tZWRpYSAuc2xpY2stdHJhY2sgbGkgYSBpbWciKS5lcSgwKS5hdHRyKCJzcmMiKSwgZQoJCQkJCX0sCgkJCQkJaGFpdHVuY3VuOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCk7CgkJCQkJCXJldHVybiBlLm5hbWUgPSByKCIucHJvZHVjdC1uYW1lIGgxIikudGV4dCgpLCBlLnByaWNlID0gcigiLnJtYi1wcmljZSIpLnRleHQoKSwgZS5pbWcgPSByKCIucHJvZHVjdC1pbWctYm94IGxpIGltZyIpLmVxKDApICYmIHIoIi5wcm9kdWN0LWltZy1ib3ggbGkgaW1nIikuZXEoMCkuYXR0cigic3JjIiksIGUKCQkJCQl9LAoJCQkJCWViYXk6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiI2l0ZW1UaXRsZSIpLnRleHQoKS5yZXBsYWNlKC9eRGV0YWlscyBhYm91dC9naSwgIiIpLAoJCQkJCQkJcHJpY2U6IHIoIiNwcmNJc3VtIikuYXR0cigiY29udGVudCIpLAoJCQkJCQkJaW1nOiByKCIjdmlfbWFpbl9pbWdfZnMgdWwgbGkgaW1nIikuZXEoMCkuYXR0cigic3JjIikKCQkJCQkJfQoJCQkJCX0sCgkJCQkJd3kxNjM6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiLlBJbmZvIGR0IikuZXEoMCkudGV4dCgpIHx8IHIoIi5tdl9uYW1lIikudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWRpYW5waW5nOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5kZWFsLXRpdGxlIGgxLGgxLnRpdGxlIikudGV4dCgpLnJlcGxhY2UoL1xbLipcXS9naSwgIiIpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCW51b21pOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSByKCIuZGV0YWlscyBwLmRwIikgJiYgcigiLmRldGFpbHMgcC5kcCIpLnRleHQoKSB8fCAiIiwKCQkJCQkJCXQgPSAiIjsKCQkJCQkJdHJ5IHsKCQkJCQkJCXQgPSByKCIuZGV0YWlscyBoMSIpLnRleHQoKS5yZXBsYWNlKC9eXHUzMDEwLitcdTMwMTEvaSwgIiIpCgkJCQkJCX0gY2F0Y2ggKGkpIHsKCQkJCQkJCW4uZGVidWcgJiYgY29uc29sZS5sb2coaSksIHQgPSAiIgoJCQkJCQl9CgkJCQkJCXJldHVybiB0ICs9IGUsIHsKCQkJCQkJCW5hbWU6IHQKCQkJCQkJfQoJCQkJCX0sCgkJCQkJbWVpdHVhbjogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIuZGVhbC1jb21wb25lbnQtdGl0bGUiKS50ZXh0KCksCgkJCQkJCQlpc2JuOiAiIgoJCQkJCQl9CgkJCQkJfSwKCQkJCQltZWlsaXNodW86IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IHIoIi5nb29kcy10aXRsZSIpLmVxKDApLnRleHQoKSwKCQkJCQkJCXQgPSByKCIjSl9Ob3dQcmljZSIpLnRleHQoKTsKCQkJCQkJcmV0dXJuICIiID09IGUgJiYgKGUgPSByKCJoMy5zX3RsZSIpLnRleHQoKSksIHsKCQkJCQkJCW5hbWU6IGUsCgkJCQkJCQlwcmljZTogdAoJCQkJCQl9CgkJCQkJfSwKCQkJCQlzZmh0OiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCk7CgkJCQkJCXJldHVybiBlLm5hbWUgPSByKCIjdGl0bGVJbmZvIGgxIikudGV4dCgpLCBlLnByaWNlID0gcigiI2l0ZW1QcmljZSAuZ29vZHMtcHJpY2UtcjEgc3Ryb25nIikudGV4dCgpLCBlCgkJCQkJfSwKCQkJCQltZWljaTogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQllLm5hbWUgPSByKCIjc3VicHJvIC5yZWxhdGl2ZSBzcGFuIikudGV4dCgpOwoJCQkJCQl2YXIgdCA9IHIoIi5wcm9fcHJpY2UgLnByaWNlIikudGV4dCgpLm1hdGNoKC9bMC05Ll0rLyk7CgkJCQkJCXJldHVybiB0ICYmIChlLnByaWNlID0gdFswXSksIGUKCQkJCQl9LAoJCQkJCWppYW5rZTogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQllLm5hbWUgPSByKCIuZGV0X3RpdGxlIGgxIikudGV4dCgpOwoJCQkJCQl2YXIgdCA9IHIoIi5QcmljZV9pbmZvIC5iaWdQcmljZSBkZCBlbSIpLnRleHQoKS5tYXRjaCgvWzAtOS5dKy8pOwoJCQkJCQlyZXR1cm4gdCAmJiAoZS5wcmljZSA9IHRbMF0pLCBlCgkJCQkJfSwKCQkJCQkiZ29tZS1ob21lIjogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQllLm5hbWUgPSByKCIucHJkbWFpbiAucHJkdGl0IikudGV4dCgpOwoJCQkJCQl2YXIgdCA9IHIoIiNwcmRQcmljZSIpLnRleHQoKS5yZXBsYWNlKC9ccy9nLCAiIikubWF0Y2goL1swLTkuXSsvKTsKCQkJCQkJcmV0dXJuIHQgJiYgKGUucHJpY2UgPSB0WzBdKSwgZQoJCQkJCX0sCgkJCQkJbmlrZTogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQlyZXR1cm4gZS5uYW1lID0gcigiLnByb2R1Y3QtdGl0bGUtdGV4dCIpLnRleHQoKSwgZS5wcmljZSA9IHIoIi5wcm9kdWN0LXByaWNlIikudGV4dCgpLCBlCgkJCQkJfSwKCQkJCQkiMzYwa2FkIjogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQllLm5hbWUgPSByKCIuWUlyZF9sIGxpIikuZXEoMCkudGV4dCgpLnJlcGxhY2UoIuWVhuWTgeWQjeensO+8miIsICIiKSwgZS5wcmljZSA9IHIoIiNwcmljZW51bWJlciIpLnRleHQoKTsKCQkJCQkJZm9yICh2YXIgdCA9IGUudXJsLnNwbGl0KCIvIiksIG4gPSB0WzBdICsgIi8vIiwgaSA9IHRbdC5sZW5ndGggLSAxXS5zcGxpdCgiLiIpLCBhID0gMjsgYSA8IHQubGVuZ3RoIC0gMTsgYSsrKSBuID0gbiArIHRbYV0gKyAiLyI7CgkJCQkJCXZhciBvID0gcigiZGl2LllkcnVnX2luZm8gZGw6Zmlyc3QgZGQiKS50ZXh0KCk7CgkJCQkJCXJldHVybiBvID8gZS51cmwgPSBuICsgcigiZGl2LllkcnVnX2luZm8gZGw6Zmlyc3QgZGQiKS50ZXh0KCkgKyAiLiIgKyBpWzFdIDogZS51cmwgPSBsb2NhdGlvbi5ocmVmLCBlCgkJCQkJfSwKCQkJCQlsYnhjbjogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQlyZXR1cm4gZS5uYW1lID0gcigiLmRldGFpbFBhcyIpLnRleHQoKS5yZXBsYWNlKC9ccy9nLCAiIiksIGUucHJpY2UgPSByKCIjbGJsUHJpY2UiKS50ZXh0KCksIGUKCQkJCQl9LAoJCQkJCW1vZ3VqaWU6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IGQoKTsKCQkJCQkJcmV0dXJuIGUubmFtZSA9ICIiLCBlLm5hbWUgPSByKCIuZ29vZHMtdGl0bGUiKS50ZXh0KCksICIiID09IGUubmFtZSAmJiAoZS5uYW1lID0gcigiZGl2LnNob3B0aXRsZSIpLnRleHQoKSksICIiID09IGUubmFtZSAmJiAoZS5uYW1lID0gcigiLmdvb2RzdGl0bGUiKS50ZXh0KCkpLCBlCgkJCQkJfSwKCQkJCQljb29scGFkOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5nb29kX25hbWUgaDEiKS50ZXh0KCkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJenRlZGV2aWNlOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi56bnByb2R1Y3RzIGgzIikudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWxlbm92bzogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQlyZXR1cm4gZS5wcmljZSA9IHIoIiNncHJpY2UiKS50ZXh0KCksICIiID09IGUucHJpY2UgJiYgKGUucHJpY2UgPSB3aW5kb3cucHJpY2UpLCBlLm5hbWUgPSByKCIuZ29vZHNuYW1lIikudGV4dCgpLCAiIiA9PSBlLm5hbWUgJiYgKGUubmFtZSA9IHIoIi5kZV9wcm9uYW1lIikudGV4dCgpKSwgZQoJCQkJCX0sCgkJCQkJc2hvd2pveTogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQlyZXR1cm4gZS5uYW1lID0gcigiLmNob29zZS1oZCIpLnRleHQoKS5yZXBsYWNlKC9ccy9nLCAiIiksIGUucHJpY2UgPSByKCIjSl9NYWluUHJpY2UgLnNqLXByaWNlLXRleHQiKS50ZXh0KCksIGUKCQkJCQl9LAoJCQkJCW9jajogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQlyZXR1cm4gZS5uYW1lID0gcigiLnB2X3Nob3BfZGV0YWlsX3RpdGxlIGgxIikudGV4dCgpLCBlLnByaWNlID0gcigiLmluZm9fYm94IC52YWwgLnByaWNlIikudGV4dCgpLCBlCgkJCQkJfSwKCQkJCQkib2NqLXR1YW4iOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCk7CgkJCQkJCWUubmFtZSA9IHIoIi5wcm9kdWN0LWluZm8gPiBoMSIpLnRleHQoKS5yZXBsYWNlKC9ccy9nLCAiIik7CgkJCQkJCXZhciB0ID0gcigiLnByb2R1Y3RfcHJpY2VfY29udCAucDEiKS5odG1sKCkubWF0Y2goL1wvc3Bhblw+KFswLTkuXSspXDwvKTsKCQkJCQkJcmV0dXJuIHQgJiYgKGUucHJpY2UgPSB0WzFdKSwgIiIgPT0gZS5wcmljZSAmJiAoZS5wcmljZSA9IHIoIi5wcm9kdWN0X3ByaWNlX2NvbnQgLnAxIikudGV4dCgpKSwgIiIgPT0gZS5uYW1lICYmIChlLm5hbWUgPSByKCIucHJvZHVjdC1pbmZvICBoMSAudGl0bGUiKS50ZXh0KCkpLCBlCgkJCQkJfSwKCQkJCQkib2NqLWtyIjogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQlyZXR1cm4gZS5uYW1lID0gcignLnB2MV9saV90YWJsZV93cmFwIHRoOmNvbnRhaW5zKCLlk4HlkI0iKSt0ZCcpLnRleHQoKSwgZS5wcmljZSA9IHIoIi5wcmljZWtvcmVhIikudGV4dCgpLCBlCgkJCQkJfSwKCQkJCQlnanc6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiLnNpbGRlcl9jb2x1bW5fbmFtZSBzcGFuIikudGV4dCgpLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJYXBwbGU6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IGQoKTsKCQkJCQkJdHJ5IHsKCQkJCQkJCXZhciB0ID0gd2luZG93LnByb2R1Y3RTZWxlY3Rpb25Db250cm9sbGVyLmRhdGEucHJvZHVjdHNbMF0ucGFydE51bWJlcjsKCQkJCQkJCWUudXJsID0gImh0dHA6Ly9zdG9yZS5hcHBsZS5jb20vY24vcHJvZHVjdC8iICsgdAoJCQkJCQl9IGNhdGNoIChpKSB7CgkJCQkJCQluLmRlYnVnICYmIGNvbnNvbGUubG9nKGkpCgkJCQkJCX0KCQkJCQkJdmFyIGEgPSByKCIjcHJpbWFyeSAuYXMtcHJpY2UtY3VycmVudHByaWNlIikudGV4dCgpLm1hdGNoKC9bMC05LF0rLyk7CgkJCQkJCXJldHVybiBhICYmIChlLnByaWNlID0gYVswXSksIGUKCQkJCQl9LAoJCQkJCWp1bWVpOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIHQgPSBkKCk7CgkJCQkJCWlmICh0Lm5hbWUgPSByKCJoMS5wb3BfZGV0YWlsX3RpdCIpLnRleHQoKSwgIiIgPT0gdC5uYW1lKSB7CgkJCQkJCQl0Lm5hbWUgPSByKCJ0aXRsZSIpLmh0bWwoKTsKCQkJCQkJCXZhciBpID0gcigidGl0bGUiKS5odG1sKCkuc3BsaXQoIi0iKTsKCQkJCQkJCWkucG9wKCksIGkucG9wKCk7CgkJCQkJCQl0cnkgewoJCQkJCQkJCXQubmFtZSA9IGkuam9pbigiLSIpCgkJCQkJCQl9IGNhdGNoIChhKSB7CgkJCQkJCQkJbi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyhlKQoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCXJldHVybiB0LnByaWNlID0gcigiI21hbGxfcHJpY2VfZGV0YWlsIC5wcmljZV9udW0iKS50ZXh0KCksICIiID09IHQucHJpY2UgJiYgKHQucHJpY2UgPSByKCIjc3RyZWFtX2lkIikuYXR0cigicHJpY2UiKSksIHQKCQkJCQl9LAoJCQkJCWp1bWVpZ2xvYmFsOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCk7CgkJCQkJCXRyeSB7CgkJCQkJCQllLnByaWNlID0gcigiLmp1bWVpX3ByaWNlIikudGV4dCgpLm1hdGNoKC9bMC05Ll0rLylbMF0sIGUubmFtZSA9IHIoJy5kZWFsX2Nvbl9jb250ZW50IHRkOmNvbnRhaW5zKCLllYblk4HlkI3np7AiKScpLnBhcmVudCgpLmZpbmQoInRkIikuZXEoMSkudGV4dCgpCgkJCQkJCX0gY2F0Y2ggKHQpIHsKCQkJCQkJCW4uZGVidWcgJiYgY29uc29sZS5sb2codCkKCQkJCQkJfQoJCQkJCQlyZXR1cm4gIiIgPT0gZS5wcmljZSAmJiAoZS5wcmljZSA9IHIoIiNzdHJlYW1faWQiKS5hdHRyKCJwcmljZSIpKSwgZQoJCQkJCX0sCgkJCQkJeXVuaG91OiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCk7CgkJCQkJCXJldHVybiBlLm5hbWUgPSByKCIuZ29vZHMtbmFtZSBoMSIpLnRleHQoKSwgZS5wcmljZSA9IHIoIiNqUHJpY2VOb3JtYWwiKS50ZXh0KCksIGUuaW1nID0gcigiLnBpYy1wYWdlciAucGljLWxpc3QgYSBpbWciKS5lcSgwKSAmJiByKCIucGljLXBhZ2VyIC5waWMtbGlzdCBhIGltZyIpLmVxKDApLmF0dHIoInNyYyIpLCAiIiA9PSBlLnByaWNlICYmIChlLnByaWNlID0gcigiLmpGaXJzdFByaWNlIikudGV4dCgpKSwgZQoJCQkJCX0sCgkJCQkJYm9vaGVlOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCk7CgkJCQkJCXJldHVybiBlLm5hbWUgPSByKCIud2lkZ2V0LWdvb2RzLXByaW1hcnkgLnJvdy1kZXMgaDEiKS50ZXh0KCksIGUucHJpY2UgPSByKCIuY29sLXByaWNlIGIiKS50ZXh0KCkubWF0Y2goL1swLTkuXSsvKVswXSwgZQoJCQkJCX0sCgkJCQkJbW9vbmJhc2E6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9ICIiOwoJCQkJCQl0cnkgewoJCQkJCQkJZSA9IHIoIi5wX2luZm8gaDIiKS5odG1sKCkucmVwbGFjZSgvPFtePl0qW1xzXFNdKltePF0qPi9naSwgIiIpLCBlID0gci50cmltKGUpCgkJCQkJCX0gY2F0Y2ggKHQpIHsKCQkJCQkJCW4uZGVidWcgJiYgY29uc29sZS5sb2codCkKCQkJCQkJfQoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogZQoJCQkJCQl9CgkJCQkJfSwKCQkJCQlob21ldnY6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IGQoKTsKCQkJCQkJdHJ5IHsKCQkJCQkJCWUubmFtZSA9IHIoJy5zaG9wX25hbWUgcFtjbGFzcz0iaGRyXzEiXScpLnRleHQoKSwgZS5uYW1lID0gZS5uYW1lLnJlcGxhY2UoLzxkaXZbXj5dKltcc1xTXSpbXjxdKlwvZGl2Pi9naSwgIiIpLCBlLm5hbWUgPSBlLm5hbWUucmVwbGFjZSgvPHNwYW5bXj5dKltcc1xTXSpbXjxdKlwvc3Bhbj4vZ2ksICIiKSwgZS5uYW1lID0gZS5uYW1lLnJlcGxhY2UoLyZuYnNwOy9naSwgIiIpLCBlLm5hbWUgPSByLnRyaW0oZS5uYW1lKQoJCQkJCQl9IGNhdGNoICh0KSB7CgkJCQkJCQluLmRlYnVnICYmIGNvbnNvbGUubG9nKHQpCgkJCQkJCX0KCQkJCQkJcmV0dXJuIGUKCQkJCQl9LAoJCQkJCSJwYWl4aWUtZmF4aWFuIjogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQl0cnkgewoJCQkJCQkJZS5uYW1lID0gcigiLmZpbmQtaW5mby1wcm9kdWN0IGEgcCIpLmVxKDApLnRleHQoKSwgZS5wcmljZSA9IHIoIi5maW5kLWluZm8tcHJvZHVjdCBhIHNwYW4iKS5lcSgwKS50ZXh0KCkubWF0Y2goL1swLTkuXSsvKVswXQoJCQkJCQl9IGNhdGNoICh0KSB7CgkJCQkJCQluLmRlYnVnICYmIGNvbnNvbGUubG9nKHQpCgkJCQkJCX0KCQkJCQkJcmV0dXJuIGUKCQkJCQl9LAoJCQkJCXhpYW9taTogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQlpZiAoZS5wcmljZSA9IHIoIiNKX2dvb2RzSW5mb0Jsb2NrIC5KX21pX2dvb2RzUHJpY2UiKS50ZXh0KCksICIiID09IGUucHJpY2UpIHsKCQkJCQkJCXZhciB0ID0gcigiLkpfcHJvUHJpY2UiKS50ZXh0KCkubWF0Y2goL1swLTkuXSsvKTsKCQkJCQkJCXQgJiYgKGUucHJpY2UgPSB0WzBdKQoJCQkJCQl9CgkJCQkJCXJldHVybiBlCgkJCQkJfSwKCQkJCQlpaHVzaDogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCJoMS50aXRsZSIpLnRleHQoKQoJCQkJCQl9CgkJCQkJfSwKCQkJCQkxNjg4OiBmdW5jdGlvbigpIHsKCQkJCQkJbi5zaXRlID0gInRhb2JhbyI7CgkJCQkJCXZhciBlID0gbmV3IEFycmF5OwoJCQkJCQl0cnkgewoJCQkJCQkJdmFyIHQgPSByKCcuZGUtZmVhdHVyZTpjb250YWlucygi5ZOB54mMIiknKS50ZXh0KCk7CgkJCQkJCQl0ICYmIGUucHVzaCh0KQoJCQkJCQl9IGNhdGNoIChpKSB7CgkJCQkJCQluLmRlYnVnICYmIGNvbnNvbGUubG9nKGkpCgkJCQkJCX0KCQkJCQkJdHJ5IHsKCQkJCQkJCXZhciBhID0gcignLmRlLWZlYXR1cmU6Y29udGFpbnMoIuezu+WIlyIpJykubGVuZ3RoID4gMCA/IHIoJy5kZS1mZWF0dXJlOmNvbnRhaW5zKCLns7vliJciKScpLnRleHQoKSA6IG51bGw7CgkJCQkJCQlhID0gYSA/IGEgOiByKCcuZGUtZmVhdHVyZTpjb250YWlucygi6LSn5Y+3IiknKS5sZW5ndGggPiAwID8gcignLmRlLWZlYXR1cmU6Y29udGFpbnMoIui0p+WPtyIpJykudGV4dCgpIDogbnVsbCwgYSA9IGEgPyBhIDogcignLmRlLWZlYXR1cmU6Y29udGFpbnMoIuWei+WPtyIpJykubGVuZ3RoID4gMCA/IHIoJy5kZS1mZWF0dXJlOmNvbnRhaW5zKCLlnovlj7ciKScpLnRleHQoKSA6IG51bGwsIGEgJiYgZS5wdXNoKGEpCgkJCQkJCX0gY2F0Y2ggKGkpIHsKCQkJCQkJCW4uZGVidWcgJiYgY29uc29sZS5sb2coaSkKCQkJCQkJfQoJCQkJCQl0cnkgewoJCQkJCQkJdmFyIG8gPSByKCcuZGUtZmVhdHVyZTpjb250YWlucygi5Lmm5Y+3IiknKS5sZW5ndGggPiAwID8gcignLmRlLWZlYXR1cmU6Y29udGFpbnMoIuS5puWPtyIpJykudGV4dCgpIDogbnVsbDsKCQkJCQkJCW8gPSBvID8gby5zdWJzdHIoby5pbmRleE9mKCLvvJoiKSArIDEpIDogbnVsbCwgbyAmJiBlLnB1c2goIklTQk7vvJoiICsgbykKCQkJCQkJfSBjYXRjaCAoaSkgewoJCQkJCQkJbi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyhpKQoJCQkJCQl9CgkJCQkJCXJldHVybiBlID0gZS5qb2luKCJ8IiksIHsKCQkJCQkJCW5hbWU6IHIoIiNtb2QtZGV0YWlsLWhkIGgxIikudGV4dCgpLAoJCQkJCQkJaXNibjogIiIsCgkJCQkJCQlza2V5d29yZDogZQoJCQkJCQl9CgkJCQkJfSwKCQkJCQkid29tYWktcmVsYXRlZCI6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiLnByb190aXRfdG9wX2ZvcmNvbWJpIikudGV4dCgpLAoJCQkJCQkJcHJpY2U6IHIoIiNjb21iaVByb2R1Y3RNYXJrZXRQcmljZSIpLnRleHQoKQoJCQkJCQl9CgkJCQkJfSwKCQkJCQkiMTM5c2hvcC1hcnRpY2xlIjogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiBwKCIucmdpbmZvIGR0IGEiLCAwLCAiMTM5c2hvcCIpCgkJCQkJfSwKCQkJCQkiem9sLWFydGljbGUiOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHAoIi5uYXYtaGVhZGVyPmEgIiwgMSwgInpvbCIpCgkJCQkJfSwKCQkJCQkicGNvbmxpbmUtYXJ0aWNsZSI6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gcCgiLm5hdlByb1dyYXAgaDMgYSIsIDAsICJwY29ubGluZSIpCgkJCQkJfSwKCQkJCQkieWVza3ktYXJ0aWNsZSI6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gcCgiLmFydGl0bGUgaDMgYSIsIDAsICJ5ZXNreSIpCgkJCQkJfSwKCQkJCQkiaXQxNjgtYXJ0aWNsZSI6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gcCgiLmJqOTgwIC5iajEgZGl2PmEiLCAwLCAiaXQxNjgiKQoJCQkJCX0sCgkJCQkJInBjcG9wLWFydGljbGUiOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHAoIi5iajk4MCAuYmoxIGEiLCAwLCAicGNwb3AiKQoJCQkJCX0sCgkJCQkJInBjaG9tZS1hcnRpY2xlIjogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiBwKCIubmF2UHJvV3JhcCBoMyBhIiwgMCwgInBjaG9tZSIpCgkJCQkJfSwKCQkJCQluZXdlZ2c6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IGQoKTsKCQkJCQkJcmV0dXJuIGUubmFtZSA9IHIoIiNwcm9DdG5lciAucHJvSGVhZGVyIGgxIikudGV4dCgpLCBlLnByaWNlID0gcigiI29tSGlkZGVuUHJpY2UiKS52YWwoKSwgZS51cmwgPSByKCIucHJvSGVhZGVyIGgxIGEiKS5hdHRyKCJocmVmIiksIGUuYnJhbmRfc3RyaW5nID0gcignLmdvb2RzX2luZm8gLmdvb2RzX2luZm9fbmFtZTpjb250YWlucygi54mMIikrLmdvZGRzX2luZm9fZGF0YScpLnRleHQoKS5yZXBsYWNlKC9ccy9nLCAiIiksIGUKCQkJCQl9LAoJCQkJCSJuZXdlZ2ctemhhZGFuIjogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQlyZXR1cm4gZS5uYW1lID0gcigiLnByb0hlYWRlciBoMSBhIikudGV4dCgpLCBlLnVybCA9IHIoIi5wcm9IZWFkZXIgaDEgYSIpLmF0dHIoImhyZWYiKSwgZQoJCQkJCX0sCgkJCQkJeWl3dWdvdTogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQlyZXR1cm4gZS5uYW1lID0gcigibGkuZm9udGJvbGQudGl0IikudGV4dCgpLCBlLnByaWNlID0gcGFyc2VGbG9hdChyKCIjcHVuaXRwcmljZSIpLnRleHQoKS5yZXBsYWNlKC9ccy9nLCAiIikpLCBlCgkJCQkJfSwKCQkJCQl6aGl3bzogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQlyZXR1cm4gZS5uYW1lID0gcigiLm1hbGxfZGV0YWlsX3ByZF9pbmZvIC50aXRsZSIpLnRleHQoKSwgZQoJCQkJCX0sCgkJCQkJInpoaXdvLXR1YW4iOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCk7CgkJCQkJCXJldHVybiBlLm5hbWUgPSByKCIuY2Fyb3VzZWwgbGkgcCIpLmVxKDApLnRleHQoKSwgZQoJCQkJCX0sCgkJCQkJem9sOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCksCgkJCQkJCQl0ID0gW10sCgkJCQkJCQluID0gcigiLnByb2R1Y3QtbWVyY2hhbnQtcHJpY2UgZW0iKS50ZXh0KCk7CgkJCQkJCWlmICgiIiAhPSBuICYmIG4ubWF0Y2goL1swLTldKy8pICYmIG4uaW5kZXhPZigi6IezIikgPiAtMSAmJiAodCA9IG4ucmVwbGFjZSgvWyBdL2csICIiKS5zcGxpdCgi6IezIikpLCBlLm5hbWUgPSByKCIucHJvZHVjdC1uYW1lIGgzIikudGV4dCgpLCAiIiA9PSBlLm5hbWUgJiYgKGUubmFtZSA9IHIoIi5wdGl0bGUiKS50ZXh0KCkpLCAiIiA9PSBlLm5hbWUgJiYgKGUubmFtZSA9IHIoIi5wYWdlLXRpdGxlLmNsZWFyZml4IGgxIikudGV4dCgpKSwgdC5sZW5ndGggPiAwICYmIChlLm1pbl9wcmljZSA9IHRbMF0uc3Vic3RyKDEpLCBlLm1heF9wcmljZSA9IHRbMV0uc3Vic3RyKDEpKSwgZS5wcmljZSA9IHIoIi5wcmljZS10eXBlIikudGV4dCgpLCBlLnByaWNlLmluZGV4T2YoIuS4hyIpID4gLTEpIHsKCQkJCQkJCXZhciBpID0gZS5wcmljZS5tYXRjaCgvWzAtOS5dKy8pOwoJCQkJCQkJaSAmJiAoZS5wcmljZSA9IDFlNCAqIGlbMF0pCgkJCQkJCX0KCQkJCQkJcmV0dXJuIGUuY2F0X25hbWUgPSByKCIuYnJlYWRjcnVtYiBhIikuZXEoMSkudGV4dCgpLCBlLmJyYW5kX3N0cmluZyA9IHIoIi5icmVhZGNydW1iIGEiKS5lcSgyKS50ZXh0KCksIGUKCQkJCQl9LAoJCQkJCXZtYWxsOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCk7CgkJCQkJCXJldHVybiBlLm5hbWUgPSByKCIjcHJvLW5hbWUiKS50ZXh0KCksIGUKCQkJCQl9LAoJCQkJCWRhbGluZzogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQlyZXR1cm4gZS5uYW1lID0gcigiLmdvb2RzLWRhdGEgaDEuY2xlYXJmaXgiKS50ZXh0KCkucmVwbGFjZSgvXHMvZywgIiIpLCBlLnByaWNlID0gcigiLmdvb2RzLXByaWNlIC5jbGVhcmZpeCAuZmwgLmJvbGQiKS50ZXh0KCksIGUKCQkJCQl9LAoJCQkJCWZjbHViOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCk7CgkJCQkJCXRyeSB7CgkJCQkJCQllLm5hbWUgPSByKCIuZ29vZHNfaW50cm9kdWNlIikudGV4dCgpLCBlLm5hbWUgPSBlLm5hbWUucmVwbGFjZSgvKD86XHR8XG4pL2dpLCAiIiksIGUubmFtZSA9IGUubmFtZS5yZXBsYWNlKC8oPzpcIFwgfCZuYnNwOykvZ2ksICIgIikKCQkJCQkJfSBjYXRjaCAodCkgewoJCQkJCQkJbi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyh0KQoJCQkJCQl9CgkJCQkJCWlmICgiIiA9PSBlLm5hbWUpIHRyeSB7CgkJCQkJCQllLm5hbWUgPSByKCcudGRsZWZ0OmNvbnRhaW5zKCLllYblk4HlkI3np7AiKSsudGRyaWdodCcpLnRleHQoKS5yZXBsYWNlKC8oXHMpL2csICIiKSwgZS5wcmljZSA9IHIoIiNwcmljZUZvbnQiKS50ZXh0KCkKCQkJCQkJfSBjYXRjaCAodCkgewoJCQkJCQkJbi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyh0KQoJCQkJCQl9CgkJCQkJCXJldHVybiBlCgkJCQkJfSwKCQkJCQl0YW9zaHU6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IGQoKTsKCQkJCQkJdHJ5IHsKCQkJCQkJCWUuaXNibiA9IHIoJy5ib29rX2RldGFpbGVkIHNwYW46Y29udGFpbnMoIklTQk4iKScpLmxlbmd0aCA+IDAgPyByKCcuYm9va19kZXRhaWxlZCBzcGFuOmNvbnRhaW5zKCJJU0JOIiknKS50ZXh0KCkuc3Vic3RyKDUpIDogIiIKCQkJCQkJfSBjYXRjaCAodCkgewoJCQkJCQkJbi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyh0KSwgZS5pc2JuID0gIiIKCQkJCQkJfQoJCQkJCQlyZXR1cm4gZQoJCQkJCX0sCgkJCQkJYW1hem9uOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCksCgkJCQkJCQl0ID0gIiIsCgkJCQkJCQluID0gcignbGk6Y29udGFpbnMoIklTQk4iKScpLnRleHQoKSwKCQkJCQkJCWkgPSByKCdsaTpjb250YWlucygi5p2h5b2i56CBIiknKS50ZXh0KCksCgkJCQkJCQlhID0gcignbGkgYjpjb250YWlucygiQVNJTiIpJykucGFyZW50KCJsaSIpLnRleHQoKTsKCQkJCQkJbiA9IG4gPyBuLnN1YnN0cig1KSA6ICIiLCBpID0gaSA/IGkuc3Vic3RyKDQpIDogIiIsIGEgPSBhID8gYS5zdWJzdHIoNSkgOiAiIiwgdCA9ICIiID09IG4gPyBpIDogIiIgPT0gaSA/IG4gOiBuLmxlbmd0aCA+IGkubGVuZ3RoID8gaSA6IG4sIHQgPSB0IHx8IGEsIHQgPSB0LnJlcGxhY2UoLyhccykvZywgIiIpLCBlLm5hbWUgPSByKCIjYnRBc2luVGl0bGUgc3BhbiIpLmVxKDApLnRleHQoKS5yZXBsYWNlKC8oLiopPHNwYW4uKi9pLCAiJDEiKSwgZS5uYW1lID0gcigiI3Byb2R1Y3RUaXRsZSIpLnRleHQoKS50cmltKCksIGUuaXNibiA9IHQsIGUuYnJhbmRfc3RyaW5nID0gcigiI2JyYW5kIikudGV4dCgpLnRyaW0oKSwgZS5wcmljZSA9IHIoIiNwcmljZWJsb2NrX2RlYWxwcmljZSIpLnRleHQoKS5yZXBsYWNlKC9b77+lwqVdKy8sICIiKSwgIiIgPT0gZS5wcmljZSAmJiAoZS5wcmljZSA9IHIoInNwYW4uYS1zaXplLWxhcmdlLmEtY29sb3ItcHJpY2UiKS5pcygiOnZpc2libGUiKSAmJiByKCJzcGFuLmEtc2l6ZS1sYXJnZS5hLWNvbG9yLXByaWNlIikudGV4dCgpKSwgIiIgPT0gZS5wcmljZSAmJiAoZS5wcmljZSA9IHIoIiNwcmljZWJsb2NrX291cnByaWNlIikudGV4dCgpKSwgIiIgPT0gZS5wcmljZSAmJiAoZS5wcmljZSA9IHIoIiNwcmljZWJsb2NrX3NhbGVwcmljZSIpLnRleHQoKSksICIiID09IGUucHJpY2UgJiYgKGUucHJpY2UgPSByKCIub2ZmZXItcHJpY2U6ZXEoMCkiKS50ZXh0KCkpLCAiIiA9PSBlLnByaWNlICYmIChlLnByaWNlID0gcigiI29scF9mZWF0dXJlX2RpdiAuYS1jb2xvci1wcmljZSIpLnRleHQoKSksICIiID09IGUucHJpY2UgJiYgKGUucHJpY2UgPSByKCIuYS1jb2xvci1wcmljZTplcSgwKSIpLnRleHQoKSksICIiID09IGUucHJpY2UgJiYgKGUucHJpY2UgPSByKCIjcHJpY2VibG9ja19zYWxlcHJpY2UiKS50ZXh0KCkpLCAiIiA9PSBlLnByaWNlICYmIChlLnByaWNlID0gcigiI3ByaWNlX2ZlYXR1cmVfZGl2IC5hLWNvbG9yLXByaWNlIikudGV4dCgpKTsKCQkJCQkJdmFyIG8gPSBsb2NhdGlvbi5ocmVmLAoJCQkJCQkJcyA9IGxvY2F0aW9uLmhvc3Q7CgkJCQkJCWUuaXRlbUlkID0gZnVuY3Rpb24oKSB7CgkJCQkJCQl2YXIgZSA9IGxvY2F0aW9uLmhyZWYubWF0Y2goL1wvZHBcLyhbMC05QS1aYS16XSspLyk7CgkJCQkJCQlyZXR1cm4gZSA/IGVbMV0gOiAoZSA9IGxvY2F0aW9uLmhyZWYubWF0Y2goL1wvZ3BcLyhbMC05QS1aYS16XSspLyksIGUgPyBlWzFdIDogIiIpCgkJCQkJCX0oKTsKCQkJCQkJdHJ5IHsKCQkJCQkJCWUuY2F0X2lkID0gZnVuY3Rpb24oKSB7CgkJCQkJCQkJdmFyIGUsIHQsIG4gPSAiIjsKCQkJCQkJCQlyZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmEtYnJlYWRjcnVtYiBsaTpudGgtY2hpbGQoNykgYSIpID8gdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5hLWJyZWFkY3J1bWIgbGk6bnRoLWNoaWxkKDcpIGEiKS5nZXRBdHRyaWJ1dGUoImhyZWYiKSA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5hLWJyZWFkY3J1bWIgbGk6bnRoLWNoaWxkKDUpIGEiKSA/IHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuYS1icmVhZGNydW1iIGxpOm50aC1jaGlsZCg1KSBhIikuZ2V0QXR0cmlidXRlKCJocmVmIikgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuYS1icmVhZGNydW1iIGxpOm50aC1jaGlsZCgzKSBhIikgJiYgKHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuYS1icmVhZGNydW1iIGxpOm50aC1jaGlsZCgzKSBhIikuZ2V0QXR0cmlidXRlKCJocmVmIikpLCBlID0gdC5zcGxpdCgiPyIpWzFdLCBlICYmIGUuc3BsaXQoIiYiKS5mb3JFYWNoKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQkJZS5tYXRjaCgvbm9kZT0uKi8pICYmIChuID0gZS5tYXRjaCgvbm9kZT0oLiopLylbMV0pCgkJCQkJCQkJfSksIG4KCQkJCQkJCX0oKQoJCQkJCQl9IGNhdGNoIChsKSB7CgkJCQkJCQllLmNhdF9pZCA9ICIiCgkJCQkJCX0KCQkJCQkJZS51cmwyID0gby5yZXBsYWNlKHMsICJ3d3cuYW1hem9uLmNuIik7CgkJCQkJCWZvciAodmFyIGMgPSByKCIjd2F5ZmluZGluZy1icmVhZGNydW1ic19mZWF0dXJlX2RpdiAuYS11bm9yZGVyZWQtbGlzdCBsaSBhIiksIHAgPSBjLmxlbmd0aCwgaCA9IFtdLCB1ID0gMDsgcCA+IHU7IHUrKykgaC5wdXNoKGMuZXEodSkudGV4dCgpLnRyaW0oKSk7CgkJCQkJCWUuY2F0X25hbWUgPSBoLmpvaW4oIiMiKSwgZS53ZWJzaXRlID0gImFtYXpvbiIsIGUucGljID0gcigiI2FsdEltYWdlcyB1bCBsaSBpbWciKS5lcSgwKS5hdHRyKCJzcmMiKSwgZS5za3UgPSByKCIjYWRkVG9DYXJ0ICNBU0lOIikudmFsKCksIGUuY2F0ZWdvcnkgPSByKCIjd2F5ZmluZGluZy1icmVhZGNydW1ic19mZWF0dXJlX2RpdiBhIikudGV4dCgpOwoJCQkJCQl2YXIgbSA9IHIoIiNicmFuZCIpLmF0dHIoImhyZWYiKSwKCQkJCQkJCWYgPSBtICYmIG0ubWF0Y2goL2ZpZWxkLWxicl9icmFuZHNfYnJvd3NlLWJpbj0oLiopJC8pICYmIG0ubWF0Y2goL2ZpZWxkLWxicl9icmFuZHNfYnJvd3NlLWJpbj0oLiopJC8pWzFdOwoJCQkJCQlyZXR1cm4gZS5icmFuZCA9IGUuYnJhbmRfc3RyaW5nID8gZS5icmFuZF9zdHJpbmcgOiBmLCBlCgkJCQkJfSwKCQkJCQltdXlpbmd6aGlqaWE6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IGQoKTsKCQkJCQkJdHJ5IHsKCQkJCQkJCWUubmFtZSA9IHIoIiNuYW1lIGgxIikudGV4dCgpCgkJCQkJCX0gY2F0Y2ggKHQpIHsKCQkJCQkJCW4uZGVidWcgJiYgY29uc29sZS5sb2codCkKCQkJCQkJfQoJCQkJCQl0cnkgewoJCQkJCQkJZS5wcmljZSA9IHIoIiNzdW1tYXJ5LXByaWNlIC5wLXByaWNlIikudGV4dCgpLm1hdGNoKC9bMC05Ll0rLylbMF0KCQkJCQkJfSBjYXRjaCAodCkgewoJCQkJCQkJbi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyh0KQoJCQkJCQl9CgkJCQkJCXJldHVybiBlCgkJCQkJfSwKCQkJCQlkYW5nZGFuZzogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gd2luZG93LnByb2RTcHVJbmZvLAoJCQkJCQkJdCA9IGQoKSwKCQkJCQkJCW4gPSByKCcuYm9va19kZXRhaWxlZCBzcGFuOmNvbnRhaW5zKCJJIFMgQiBOIiknKS50ZXh0KCkuc3Vic3RyKDgpOwoJCQkJCQlpZiAoIiIgPT0gbiAmJiAobiA9IHIoJy5pbnRybyBzcGFuOmNvbnRhaW5zKCJJIFMgQiBOIiknKS50ZXh0KCkuc3Vic3RyKDgpKSwgIiIgPT0gbiAmJiAobiA9IHIoJy5ib29rX21lc3Nib3ggLnNob3dfaW5mb19sZWZ0OmNvbnRhaW5zKCLvvKnvvLPvvKLvvK4iKScpLm5leHQoIi5zaG93X2luZm9fcmlnaHQiKS50ZXh0KCkpLCAiIiA9PSBuICYmIChuID0gcignLmJvb2tfbWVzc2JveCAuc2hvd19pbmZvX2xlZnQ6Y29udGFpbnMoIkkgUyBSIEMiKScpLm5leHQoIi5zaG93X2luZm9fcmlnaHQiKS50ZXh0KCkpLCAiIiA9PSBuKSB7CgkJCQkJCQl2YXIgaSA9IHIoJy5ib29rX21lc3Nib3ggc3Bhbjpjb250YWlucygiSSBTIFIgQyIpJyk7CgkJCQkJCQluID0gaSAmJiBpLnBhcmVudCgpLnRleHQoKS5zdWJzdHIoNykKCQkJCQkJfQoJCQkJCQlpZiAoIiIgPT0gbikgewoJCQkJCQkJdmFyIG4gPSByKCcjZGV0YWlsX2Rlc2NyaWJlIGxpOmNvbnRhaW5zKCJJU0JOIiknKS50ZXh0KCkubWF0Y2goL1swLTldKy8pOwoJCQkJCQkJbiAmJiAobiA9IG5bMF0pCgkJCQkJCX0KCQkJCQkJcmV0dXJuIHQucHJpY2UgPSByKCIjZGQtcHJpY2UiKS50ZXh0KCksIHQuaXNibiA9IG4sIHQucGljID0gcigiI21haW4taW1nLXNsaWRlciBsaSBpbWciKS5lcSgwKS5hdHRyKCJzcmMiKSwgdC53ZWJzaXRlID0gImRhbmdkYW5nIiwgdC5pdGVtSWQgPSBsb2NhdGlvbi5ocmVmLm1hdGNoKC9kYW5nZGFuZ1wuY29tXC8oXGQrKS8pWzFdLCB0LmJyYW5kX3N0cmluZyA9IHIoJy5tYWxsX2dvb2RzX2ZvdXJzb3J0X3N0eWxlX2ZyYW1lOmNvbnRhaW5zKCLlk4HniYwiKScpLnRleHQoKS5yZXBsYWNlKCLlk4HniYzvvJoiLCAiIiksICIiID09IHQuYnJhbmRfc3RyaW5nICYmICh0LmJyYW5kX3N0cmluZyA9IHdpbmRvdy5nb29nbGVfdGFnX3BhcmFtcyAmJiB3aW5kb3cuZ29vZ2xlX3RhZ19wYXJhbXMuZWNvbW1fcGJyYW5kKSwgdC5wcmljZSB8fCAodC5wcmljZSA9IHIoIiNzYWxlUHJpY2VUYWciKS50ZXh0KCkpLCB0Lm5hbWUgPSByKCIubmFtZV9pbmZvIGgxIikudGV4dCgpLnRyaW0oKSwgdC5jYXRfaWQgPSBlICYmIGUuY2F0ZWdvcnlJZCwgdAoJCQkJCX0sCgkJCQkJIjM2MGJ1eS1wYWltYWkiOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCk7CgkJCQkJCXJldHVybiBlLnByaWNlID0gcigiI3ByaWNlRGl2IikudGV4dCgpLm1hdGNoKC9bMC05Ll0rLylbMF0sIGUubmFtZSA9IHIoIi5pbnRyb19kZXRhaWwgLm5hbWUiKS5hdHRyKCJ0aXRsZSIpLCBlCgkJCQkJfSwKCQkJCQkiMzYwYnV5LWJvb2siOiBmdW5jdGlvbigpIHsKCQkJCQkJdHJ5IHsKCQkJCQkJCXZhciBlID0gcigidGl0bGUiKS50ZXh0KCksCgkJCQkJCQkJdCA9ICIiOwoJCQkJCQkJdCA9IHIoIiNzdW1tYXJ5LWlzYm4gLmRkIikudGV4dCgpLCBlID0gcigiI25hbWUgaDEiKS5odG1sKCksIGUuaW5kZXhPZigiPCIpID4gMCAmJiAoZSA9IGUuc3Vic3RyKDAsIGUuaW5kZXhPZigiPCIpKSkKCQkJCQkJfSBjYXRjaCAoaSkgewoJCQkJCQkJbi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyhpKQoJCQkJCQl9CgkJCQkJCXRyeSB7CgkJCQkJCQl0ID0gdCB8fCByKCdsaSBkaXY6Y29udGFpbnMoIu+8qe+8s++8ou+8riIpJykudGV4dCgpLnN1YnN0cig1KSwgZSA9IGUgfHwgcigiI25hbWUgaDIiKS5odG1sKCkucmVwbGFjZSgvKC4qKTxmb250LiovaSwgIiQxIikKCQkJCQkJfSBjYXRjaCAoaSkgewoJCQkJCQkJbi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyhpKQoJCQkJCQl9CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiBlLAoJCQkJCQkJaXNibjogdAoJCQkJCQl9CgkJCQkJfSwKCQkJCQkiMzYwYnV5LXR1YW4iOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCk7CgkJCQkJCWUubmFtZSA9IGUubmFtZS5yZXBsYWNlKCIgLSDkuqzlk4Hmg6Dlm6LotK0iLCAiIiksIG4uc2l0ZSA9ICIzNjBidXkiOwoJCQkJCQl0cnkgewoJCQkJCQkJZS5pZCA9IHIoIiNQc2hvd1NrdWlkIikudmFsKCkKCQkJCQkJfSBjYXRjaCAodCkgewoJCQkJCQkJbi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyh0KQoJCQkJCQl9CgkJCQkJCXZhciBpID0gcigiLmUtY29udGVudCBoMiIpLnRleHQoKTsKCQkJCQkJaS5sZW5ndGggPiBlLm5hbWUubGVuZ3RoICYmIChlLm5hbWUgPSBpKTsKCQkJCQkJdHJ5IHsKCQkJCQkJCXZhciBhID0gcigiLmUtZXh0cmEgLnAtaW1nIGEiKTsKCQkJCQkJCWEubGVuZ3RoID4gMCAmJiAhL15qYXZhc2NyaXB0Oi8udGVzdChhLmF0dHIoImhyZWYiKSkgPyBlLmhyZWYgPSBhLmF0dHIoImhyZWYiKSA6ICJ1bmRlZmluZWQiICE9IHR5cGVvZiByKCIjUHNob3dTa3VpZCIpLnZhbCgpICYmIChlLmhyZWYgPSAiaHR0cDovL2l0ZW0uamQuY29tLyIgKyByKCIjUHNob3dTa3VpZCIpLnZhbCgpICsgIi5odG1sIikKCQkJCQkJfSBjYXRjaCAodCkgewoJCQkJCQkJbi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyh0KQoJCQkJCQl9CgkJCQkJCXRyeSB7CgkJCQkJCQllLnVybCA9IHIoIi5lLWV4dHJhIGEiKS5lcSgwKS5hdHRyKCJocmVmIiksIGUudXJsLmluZGV4T2YoImphdmFzY3JpcHQiKSA+IC0xICYmIChlLnVybCA9IHIoIi5pbWctaW5mbyBhIikuZXEoMCkuYXR0cigiaHJlZiIpKQoJCQkJCQl9IGNhdGNoICh0KSB7CgkJCQkJCQluLmRlYnVnICYmIGNvbnNvbGUubG9nKHQpCgkJCQkJCX0KCQkJCQkJcmV0dXJuIGUKCQkJCQl9LAoJCQkJCSIzNjBidXktYmlnaW1hZ2UiOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSAiIjsKCQkJCQkJaWYgKCIiID09IGUpIHRyeSB7CgkJCQkJCQllID0gcigiLm8tbS0xIGgxIGEiKS5hdHRyKCJocmVmIikKCQkJCQkJfSBjYXRjaCAodCkgewoJCQkJCQkJbi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyh0KQoJCQkJCQl9CgkJCQkJCXZhciBpID0gcigiLm8tbS0xIGgxIGEiKS5lcSgwKS50ZXh0KCk7CgkJCQkJCXJldHVybiB7CgkJCQkJCQl1cmw6IGUsCgkJCQkJCQluYW1lOiBpLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJIjM2MGJ1eS1jbHViIjogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gIiI7CgkJCQkJCWlmICgiIiA9PSBlKSB0cnkgewoJCQkJCQkJZSA9IHIoIi5wLW5hbWUgYSIpLmF0dHIoImhyZWYiKQoJCQkJCQl9IGNhdGNoICh0KSB7CgkJCQkJCQluLmRlYnVnICYmIGNvbnNvbGUubG9nKHQpCgkJCQkJCX0KCQkJCQkJdmFyIGkgPSByKCIucC1uYW1lIGEiKS5lcSgwKS50ZXh0KCk7CgkJCQkJCXJldHVybiB7CgkJCQkJCQl1cmw6IGUsCgkJCQkJCQluYW1lOiBpLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJIjM2MGJ1eSI6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IGQoKSwKCQkJCQkJCXQgPSByKCIjbmFtZSBoMSIpLmh0bWwoKSwKCQkJCQkJCW4gPSAiIjsKCQkJCQkJdCB8fCAodCA9IHIoIi5pdGVtSW5mby13cmFwIC5za3UtbmFtZSIpLmVxKDApLnRleHQoKSksIHQuaW5kZXhPZigiPCIpID4gMCAmJiAodCA9IHQuc3Vic3RyKDAsIHQuaW5kZXhPZigiPCIpKSksIG4gPSByKCIjc3VtbWFyeS1pc2JuIC5kZCIpLnRleHQoKSwgbiB8fCAobiA9IHIoInRkOmNvbnRhaW5zKCdJU0JO5Y+377yaJykiKS50ZXh0KCkubWF0Y2goL1xkKy8pLCBuICYmIChuID0gblswXSkpLCBuIHx8IChuID0gcigiI3Byb2R1Y3QtZGV0YWlsIGxpOmNvbnRhaW5zKCdJU0JO77yaJykiKS50ZXh0KCkubWF0Y2goL1xkKy8pLCBuICYmIChuID0gblswXSkpLCBuIHx8IChuID0gcigidGQ6Y29udGFpbnMoJ0lTQk7lj7fvvJonKSIpLnRleHQoKS5zdWJzdHIoNykpLCBlLm5hbWUgPSB0LCBlLmlzYm4gPSBuOwoJCQkJCQl2YXIgaSA9IHdpbmRvdy5wYWdlQ29uZmlnICYmIHdpbmRvdy5wYWdlQ29uZmlnLnByb2R1Y3QgJiYgd2luZG93LnBhZ2VDb25maWcucHJvZHVjdC5icmFuZDsKCQkJCQkJMCAhPSBpICYmIChlLmJyYW5kX3N0cmluZyA9IHIoJyNyb290LW5hdiBhW2hyZWYqPSInICsgaSArICciXScpLnRleHQoKSksIGUucHJpY2UgPSByKCIjamQtcHJpY2UiKS50ZXh0KCkucmVwbGFjZSgvW++/pcKlXSsvLCAiIik7CgkJCQkJCWZvciAodmFyIGEgPSBbXSwgbyA9IHIoImJvZHkiKS5hdHRyKCJjbGFzcyIpLm1hdGNoKC9jYXRcLVxkXC0oWzAtOV0rKS9nKSwgcyA9IDA7IHMgPCBvLmxlbmd0aDsgcysrKSBhLnB1c2gob1tzXS5tYXRjaCgvXGRcLShbMC05XSspLylbMV0pOwoJCQkJCQlyZXR1cm4gZS5jYXRfaWQgPSBhLmpvaW4oIi0iKSwgZS5wcmljZSB8fCAoZS5wcmljZSA9IHIoIi5wLXByaWNlOmVxKDApIikudGV4dCgpKSwgZS5wcmljZSB8fCAoZS5wcmljZSA9IHIoIi5zdW1tYXJ5LXByaWNlIC5wLXByaWNlIC5wcmljZSIpLmVxKDApLnRleHQoKSksIGUucGljID0gcigiLnNwZWMtaXRlbXMgdWwgbGkgaW1nIikuZXEoMCkuYXR0cigic3JjIiksIC0xID09PSBlLnBpYy5pbmRleE9mKCJodHRwIikgJiYgKGUucGljID0gImh0dHA6IiArIGUucGljLnJlcGxhY2UoL1xkK3hcZCsvLCAiMTYweDE2MCIpKSwgZS5pdGVtSWQgPSBsb2NhdGlvbi5ocmVmLm1hdGNoKC8oXGQrKVwuaHRtbC8pWzFdLCBlLm5hbWUgPSBlLm5hbWUgJiYgZS5uYW1lLnJlcGxhY2UoIuOAkOS6rOS4nOi2heW4guOAkSIsICIiKSwgZS53ZWJzaXRlID0gImpkLmNvbSIsIGUuY2F0X25hbWUgPSBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiI2NydW1iLXdyYXAgLmNydW1iIGEiKSwgZnVuY3Rpb24oZSkgewoJCQkJCQkJcmV0dXJuIGUudGV4dENvbnRlbnQKCQkJCQkJfSkuc2xpY2UoMCwgMykuam9pbigiIyIpLCBlCgkJCQkJfSwKCQkJCQkiMzYwYnV5LXJlIjogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQlyZXR1cm4gZS5uYW1lID0gcigiLnNob3BfaW50cm8+aDI+YSIpLnRleHQoKSwgZS5wcmljZSA9IHIoIi5zaG9wX2ludHJvIC5wcmljZSIpLnRleHQoKSwgZQoJCQkJCX0sCgkJCQkJIjM2MGJ1eS1hdWN0aW9uIjogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQlyZXR1cm4gZS5uYW1lID0gcigiI3Byb2R1Y3QtaW50cm8gLnAtaW5mbyBoMSIpLnRleHQoKSwgZS5wcmljZSA9IHIoIiNjdXJfcHJpY2UiKS50ZXh0KCkubWF0Y2goL1swLTkuXSsvKVswXSwgZQoJCQkJCX0sCgkJCQkJZmdsYWR5OiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5wZC1jb250ZW50LWxlZnQgdGFibGUgdGJvZHkiKS5jaGlsZHJlbigidHIiKS5lcSgxKS5jaGlsZHJlbigidGQiKS5lcSgwKS5jaGlsZHJlbigiZGl2IikuZXEoMCkudGV4dCgpLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJb3VrdTogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQlyZXR1cm4gZS5uYW1lID0gcigiLnByb2QtaW5mby10aXRsZSBoMSIpLnRleHQoKSwgZS5icmFuZF9zdHJpbmcgPSByKCcuc3BlY1RpdGxlIC5zdHJvbmctdGl0bGU6Y29udGFpbnMoIuWTgeeJjCIpKy5pbmxpbmUgc3BhbicpLnRleHQoKSwgZS5wcmljZSA9IHIoIi5zYWxlLXByaWNlIikudGV4dCgpLnJlcGxhY2UoL1vvv6XCpVxzXSsvZywgIiIpLCBlCgkJCQkJfSwKCQkJCQkiNnBtIjogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQlyZXR1cm4gZS5uYW1lID0gcigiI3Byb2R1Y3RTdGFnZSAudGl0bGUiKS50ZXh0KCksIGUuYnJhbmRfc3RyaW5nID0gcigiI3Byb2R1Y3RTdGFnZSAudGl0bGUgLmJyYW5kIikudGV4dCgpLCBlLnByaWNlID0gcigiI3ByaWNlU2xvdCAucHJpY2UiKS50ZXh0KCkucmVwbGFjZSgiJCIsICIiKSwgZS5pbWcgPSByKCIjcHJvZHVjdEltYWdlcyB1bCBsaSBpbWciKS5lcSgwKS5hdHRyKCJzcmMiKSwgZS5za3UgPSByKCdpbnB1dFtuYW1lPSJwcm9kdWN0SWQiXScpLnZhbCgpLCBlLmNhdGVnb3J5ID0gcigiI2JyZWFkY3J1bWJzIGEiKS50ZXh0KCksIGUuc291cmNlID0gcigiI3RodW1ibmFpbEltYWdlcyIpLm5leHQoKS5uZXh0KCkubmV4dCgpLnRleHQoKSwgZS5icmFuZCA9IHIoJ2FbaXRlbXByb3A9ImJyYW5kIl0nKS50ZXh0KCksIGUucHJpY2UgfHwgKGUucHJpY2UgPSByKCIuXzNyX091IikuZXEoMCkudGV4dCgpLnJlcGxhY2UoIiQiLCAiIikpLCBlCgkJCQkJfSwKCQkJCQlraW1pc3M6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9ICIiOwoJCQkJCQl0cnkgewoJCQkJCQkJZSA9IHIoIi5wcmV2aWV3X3RpdGxlIGgxIGEiKS50ZXh0KCkKCQkJCQkJfSBjYXRjaCAodCkgewoJCQkJCQkJbi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyh0KQoJCQkJCQl9CgkJCQkJCXZhciBpID0gcigiLnByZXZpZXdfYnJpZWYgZW0iKS50ZXh0KCk7CgkJCQkJCWkuaW5kZXhPZigiLSIpID4gLTEgJiYgKGkgPSBpLnNwbGl0KCItIilbMF0pOwoJCQkJCQl2YXIgYSA9IHIoIi5wcmV2aWV3X2JyaWVmIikudGV4dCgpLm1hdGNoKC/kuqflk4Hop4TmoLzvvJooLiopLyk7CgkJCQkJCXJldHVybiBhICYmIChhID0gYVsxXSksIGEuaW5kZXhPZigiLSIpID4gLTEgJiYgKGEgPSBhLnNwbGl0KCItIilbMF0pLCBlICs9IGEsICIiID09IGUgJiYgKGUgPSByKCIudGl0bGUgaDEiKS50ZXh0KCkpLCB7CgkJCQkJCQluYW1lOiBlLAoJCQkJCQkJcHJpY2U6IGksCgkJCQkJCQlpc2JuOiAiIgoJCQkJCQl9CgkJCQkJfSwKCQkJCQlyZWRiYWJ5OiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIiNwTmFtZSIpLnRleHQoKSwKCQkJCQkJCWlzYm46ICIiCgkJCQkJCX0KCQkJCQl9LAoJCQkJCW0xODogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIuZ29vZHNfZGV0YWlsIC5uYW1lIikudGV4dCgpLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJdzE6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiLnRpdGxlIGgxIikudGV4dCgpLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJc2VwaG9yYWNwczogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gcigiLnByb1ByaWNlPnNwYW46ZXEoMSkiKS50ZXh0KCk7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIuc2RUaXRsZUwgaDEiKS50ZXh0KCksCgkJCQkJCQlpc2JuOiAiIiwKCQkJCQkJCXByaWNlOiBlCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWJvb2t1dTogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQl0cnkgewoJCQkJCQkJZS5uYW1lID0gcigiLnNob3AtdGV4dC1pbmZvIGgyIikudGV4dCgpLCBlLnByaWNlID0gcignLndqLW1ldGEgc3Bhbjpjb250YWlucygi5Y2a5bqT5Lu3Iil+c3Ryb25nJykudGV4dCgpOwoJCQkJCQkJdmFyIHQgPSByKCJtZXRhW25hbWU9a2V5d29yZHNdIilbMF0uZ2V0QXR0cmlidXRlKCJjb250ZW50Iik7CgkJCQkJCQllLmlzYm4gPSAvSVNCTu+8mihcZCspLy5leGVjKHQpWzFdCgkJCQkJCX0gY2F0Y2ggKGkpIHsKCQkJCQkJCW4uZGVidWcgJiYgY29uc29sZS5sb2coaSkKCQkJCQkJfQoJCQkJCQlyZXR1cm4gZQoJCQkJCX0sCgkJCQkJc2Vjb286IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IGQoKTsKCQkJCQkJdHJ5IHsKCQkJCQkJCWUucHJpY2UgPSByKCIuRHByaWNlIikudGV4dCgpLnJlcGxhY2UoLyjCpXwsKS9nLCAiIiksIGUubmFtZSA9IHIoIi5wcm9OYW1lIGgyIikudGV4dCgpCgkJCQkJCX0gY2F0Y2ggKHQpIHsKCQkJCQkJCW4uZGVidWcgJiYgY29uc29sZS5sb2codCkKCQkJCQkJfQoJCQkJCQlyZXR1cm4gZQoJCQkJCX0sCgkJCQkJbGFmYXNvOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSByKCIjcG5hbWUiKS50ZXh0KCk7CgkJCQkJCXJldHVybiAoInVuZGVmaW5lZCIgPT0gdHlwZW9mIGUgfHwgIiIgPT0gZSkgJiYgKGUgPSByKCJ0aXRsZSIpLmh0bWwoKSksIHsKCQkJCQkJCW5hbWU6IGUsCgkJCQkJCQlpc2JuOiAiIgoJCQkJCQl9CgkJCQkJfSwKCQkJCQlzOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5nb29kc25hbWUiKS50ZXh0KCksCgkJCQkJCQlpc2JuOiAiIgoJCQkJCQl9CgkJCQkJfSwKCQkJCQlsZXRhbzogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIjYnV5aW5mbyBoMSIpLnRleHQoKSwKCQkJCQkJCWlzYm46ICIiCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWJ1eTAwNzogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIjaW5mb19yaWdodCB0YWJsZSB0Ym9keSIpLmNoaWxkcmVuKCJ0ciIpLmVxKDApLmNoaWxkcmVuKCJ0ZCIpLmVxKDApLmNoaWxkcmVuKCJoMSIpLmVxKDApLnRleHQoKSwKCQkJCQkJCWlzYm46ICIiCgkJCQkJCX0KCQkJCQl9LAoJCQkJCXRhb3hpZTogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIuZGV0YWlsIikuY2hpbGRyZW4oImRpdiIpLmVxKDApLmNoaWxkcmVuKCJoMiIpLmVxKDApLnRleHQoKSwKCQkJCQkJCWlzYm46ICIiCgkJCQkJCX0KCQkJCQl9LAoJCQkJCXN1bmluZzogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlLCB0ID0gaCgiaW5wdXRbbmFtZT1yZXR1cm5VUkxdIiwgMCwgInZhbHVlIiwgInN1bmluZyIpLAoJCQkJCQkJaSA9IHIoIiNpdGVtRGlzcGxheU5hbWUiKS50ZXh0KCkudHJpbSgpOwoJCQkJCQlpZiAoZSB8fCAoZSA9IHIoJyN0b3RhbCBkdDpjb250YWlucygiSSIpJykubmV4dCgpLmVxKDApLnRleHQoKSwgZSA9IGUubWF0Y2goLyg/OlxkezEzfXxcZHsxMH18XGR7OH0pL2dpKSwgZSAmJiAoZSA9IGVbMF0pKSwgZSB8fCAoZSA9IHIoJy5ib29rLWluZm8gc3Bhbjpjb250YWlucygiSSIpJykubmV4dCgpLmVxKDApLnRleHQoKSwgZSA9IGUubWF0Y2goLyg/OlxkezEzfXxcZHsxMH18XGR7OH0pL2dpKSwgZSAmJiAoZSA9IGVbMF0pKSwgZSB8fCAoZSA9IHIoJyNib29rUGFyYW1ldGVyRmllbGQgZGw6Y29udGFpbnMoIklTQk4iKScpLnRleHQoKS5tYXRjaCgvWzAtOV0rLyksIGUgJiYgKGUgPSBlWzBdKSksICFuLmNyYzY0ICYmICF0LnVybCkgewoJCQkJCQkJdmFyIGEgPSB3aW5kb3cuc24ucHJvZHVjdElkOwoJCQkJCQkJdC51cmwgPSAiaHR0cDovL3d3dy5zdW5pbmcuY29tL2VtYWxsL3ByZF8xMDA1Ml8xMDA1MV8tN18iICsgYSArICJfLmh0bWwiCgkJCQkJCX0KCQkJCQkJdmFyIG8gPSByKCIudzMiKS50b0FycmF5KCk7CgkJCQkJCW8gPSBvLm1hcChmdW5jdGlvbihlKSB7CgkJCQkJCQlyZXR1cm4gZS5pbm5lckhUTUwKCQkJCQkJfSk7CgkJCQkJCXZhciBzID0gdm9pZCAwOwoJCQkJCQlvLmluZGV4T2YoIuWboui0reS7tyIpID4gLTEgJiYgKHMgPSByKCJzcGFuLnNtYWxsLXByaWNlIikudGV4dCgpKTsKCQkJCQkJdmFyIGwgPSByKCIjcHJvbW90aW9uUHJpY2UubWFpbnByaWNlIikudGV4dCgpLAoJCQkJCQkJYyA9IHIoIi5tYWlucHJpY2UiKS50ZXh0KCk7CgkJCQkJCXQubmFtZSA9IGksIHQuaXNibiA9IGUsIHQuYnJhbmRfc3RyaW5nID0gd2luZG93LnNuICYmIHdpbmRvdy5zbi5icmFuZE5hbWUgfHwgIiIsIHQucHJpY2UgPSB3aW5kb3cuc24gJiYgd2luZG93LnNuLnByb21vdGlvblByaWNlIHx8IDAsIGMgJiYgKHQucHJpY2UgPSBjKSwgbCAmJiAodC5wcmljZSA9IGwpLCBzICYmICh0LnByaWNlID0gcyksIHQuaXRlbUlkID0gbG9jYXRpb24uaHJlZi5tYXRjaCgvKFxkK1wvXGQrKVwuaHRtbC8pWzFdOwoJCQkJCQl2YXIgZCA9IHIoIi5icmVhZGNydW1iIC5kcm9wZG93bjpudGgtbGFzdC1vZi10eXBlKDMpIGEiKSwKCQkJCQkJCXAgPSBkICYmIGQuYXR0cigiaHJlZiIpOwoJCQkJCQlyZXR1cm4gdC5jYXRfaWQgPSBwLm1hdGNoKC8oXGQtXGR7MCx9LVxkKVwuaHRtbC8pID8gcC5tYXRjaCgvKFxkLVxkezAsfS1cZClcLmh0bWwvKVsxXSA6ICIiLCB0LndlYnNpdGUgPSAic3VuaW5nIiwgdC5waWMgPSByKCIjYmlnSW1hZ2UgaW1nIikuYXR0cigic3JjIiksIHQucGljICYmICh0LnBpYyA9IHIoIiNiaWdJbWcgaW1nIikuYXR0cigic3JjIikpLCB0Lm5hbWUgfHwgKHQubmFtZSA9IHdpbmRvdy5zbiAmJiB3aW5kb3cuc24uaXRlbURpc3BsYXlOYW1lKSwgdC5uYW1lID0gdC5uYW1lICYmIHQubmFtZS5yZXBsYWNlKCLjgJDoi4/lroHmmJPotK3otoXluILjgJEiLCAiIiksIHIoIiNtYWluUHJpY2UiKS50ZXh0KCkuaW5kZXhPZigi5a6a6YeRIikgPiAtMSAmJiAobi5ub1JlYWxQcmljZSA9ICEwKSwgdAoJCQkJCX0sCgkJCQkJInN1bmluZy1qdSI6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IHt9OwoJCQkJCQlyZXR1cm4gZS51cmwgPSAiaHR0cDovL3d3dy5zdW5pbmcuY29tL2VtYWxsL3ByZF8xMDA1Ml8xMDA1MV8tN18iICsgcigiI2l0ZW1JZCIpLmF0dHIoInZhbHVlIikgKyAiXy5odG1sIiwgbi5jcmM2NCAmJiAoZS51cmwgPSB2b2lkIDApLCBlLm5hbWUgPSByKCJoMSBhIikudGV4dCgpLCBlCgkJCQkJfSwKCQkJCQkic3VuaW5nLWJvb2stbmV3IjogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gaCgiaW5wdXRbbmFtZT1yZXR1cm5VUkxdIiwgMCwgInZhbHVlIiwgInN1bmluZyIpLAoJCQkJCQkJdCA9IHIoInRpdGxlIikuaHRtbCgpLAoJCQkJCQkJaSA9ICIiOwoJCQkJCQl0cnkgewoJCQkJCQkJaSA9IHIoJyN0b3RhbCBkdDpjb250YWlucygiSSIpJykubmV4dCgpLmVxKDApLnRleHQoKTsKCQkJCQkJCXZhciBhID0gaS5tYXRjaCgvKD86XGR7MTN9fFxkezEwfXxcZHs4fSkvZ2kpOwoJCQkJCQkJaSA9IG51bGwgIT0gYSA/IGFbMF0gOiAiIgoJCQkJCQl9IGNhdGNoIChvKSB7CgkJCQkJCQluLmRlYnVnICYmIGNvbnNvbGUubG9nKG8pLCBpID0gIiIKCQkJCQkJfQoJCQkJCQlpZiAoIiIgPT0gaSkgdHJ5IHsKCQkJCQkJCWkgPSByKCcuYm9vay1pbmZvIHNwYW46Y29udGFpbnMoIkkiKScpLm5leHQoKS5lcSgwKS50ZXh0KCk7CgkJCQkJCQl2YXIgYSA9IGkubWF0Y2goLyg/OlxkezEzfXxcZHsxMH18XGR7OH0pL2dpKTsKCQkJCQkJCWkgPSBudWxsICE9IGEgPyBhWzBdIDogIiIKCQkJCQkJfSBjYXRjaCAobykgewoJCQkJCQkJbi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyhvKSwgaSA9ICIiCgkJCQkJCX0KCQkJCQkJcmV0dXJuIGUubmFtZSA9IHQsIGUuaXNibiA9IGksIGUKCQkJCQl9LAoJCQkJCSJzdW5pbmctc25ib29rIjogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gaCgiaW5wdXRbbmFtZT1yZXR1cm5VUkxdIiwgMCwgInZhbHVlIiwgInN1bmluZyIpOwoJCQkJCQlyZXR1cm4gZS5uYW1lID0gcigiLmJyaWVmLWluZm8gaDEgc3Ryb25nIikudGV4dCgpLCBlLmlzYm4gPSByKCIucGFybS1pc2JuIHNwYW4uYXR0ci12IikudGV4dCgpLCBlCgkJCQkJfSwKCQkJCQkic3VuaW5nLWRnZiI6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IHRoaXMsCgkJCQkJCQl0ID0gZS5nZXRQcm9kdWN0SW5mbygpOwoJCQkJCQl0cnkgewoJCQkJCQkJdmFyIGkgPSByKCIuZGV0YWlsLWZpcnN0IGgxLnRpdGxlIGEiKS5lcSgwKTsKCQkJCQkJCWlmICh0Lm5hbWUgPSByKCIuZGV0YWlsLWZpcnN0IGgxLnRpdGxlIGEgc3BhbiBzdHJvbmciKS50ZXh0KCksIG4uaHJlZiA9IGkuYXR0cigiaHJlZiIpLCBuLnNpdGUgPSAic3VuaW5nIiwgInVuZGVmaW5lZCIgPT0gdHlwZW9mIG4uaHJlZiB8fCAiIiA9PSBuLmhyZWYpIHQudXNlbGVzcyA9ICEwOwoJCQkJCQkJZWxzZSB7CgkJCQkJCQkJdmFyIG8gPSBhLmlzUHJvZHVjdFBhZ2UoKTsKCQkJCQkJCQlvIHx8ICh0LnVzZWxlc3MgPSAhMCkKCQkJCQkJCX0KCQkJCQkJfSBjYXRjaCAocykgewoJCQkJCQkJbi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyhzKSwgdC51c2VsZXNzID0gITAKCQkJCQkJfQoJCQkJCQlyZXR1cm4gdAoJCQkJCX0sCgkJCQkJInN1bmluZy1xaWFuZyI6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IHAoIi5wcm9kdWN0LW1haW4tdGl0bGUgaDEgYSIsIDAsICJzdW5pbmciKTsKCQkJCQkJdHJ5IHsKCQkJCQkJCXZhciB0ID0gcigiI2NhdGVudHJ5IikudmFsKCk7CgkJCQkJCQl0ICYmIChuLmhyZWYgPSAiaHR0cDovL3d3dy5zdW5pbmcuY29tL2VtYWxsL3ByZF8xMDA1Ml8xMDA1MV8tN18iICsgdCArICJfLmh0bWwiKQoJCQkJCQl9IGNhdGNoIChpKSB7CgkJCQkJCQluLmRlYnVnICYmIGNvbnNvbGUubG9nKGkpCgkJCQkJCX0KCQkJCQkJcmV0dXJuIGUKCQkJCQl9LAoJCQkJCSJzdW5pbmctcGFpIjogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gaCgiaW5wdXRbbmFtZT1yZXR1cm5VUkxdIiwgMCwgInZhbHVlIiwgInN1bmluZyIpLAoJCQkJCQkJdCA9IHIoIi5mYi1tYWluLXRpdGxlIGEiKS50ZXh0KCksCgkJCQkJCQlpID0gIiIsCgkJCQkJCQlhID0gIiI7CgkJCQkJCWEgPSByKCIuZmItbWFpbi10aXRsZSBhIikuYXR0cigiaHJlZiIpOwoJCQkJCQl0cnkgewoJCQkJCQkJaSA9IHIoJyN0b3RhbCBkdDpjb250YWlucygiSSIpJykubmV4dCgpLmVxKDApLnRleHQoKTsKCQkJCQkJCXZhciBvID0gaS5tYXRjaCgvKD86XGR7MTN9fFxkezEwfXxcZHs4fSkvZ2kpOwoJCQkJCQkJaSA9IG51bGwgIT0gbyA/IG9bMF0gOiAiIgoJCQkJCQl9IGNhdGNoIChzKSB7CgkJCQkJCQluLmRlYnVnICYmIGNvbnNvbGUubG9nKHMpCgkJCQkJCX0KCQkJCQkJcmV0dXJuIGUubmFtZSA9IHQsIGUuaXNibiA9IGksIGUudXJsID0gYSwgZQoJCQkJCX0sCgkJCQkJY29vODogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIjcHJvZHVjdG5hbWUgaDEiKS5jaGlsZHJlbigic3Ryb25nIikuZXEoMCkudGV4dCgpLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJbHVzZW46IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJdXJsOiAiaHR0cDovL3d3dy5sdXNlbi5jb20vUHJvZHVjdC9Qcm9kdWN0SW5mby5hc3B4P2lkPSIgKyByKCIjUHJvZHVjdElkIikudmFsKCksCgkJCQkJCQluYW1lOiByKCJoMS5nb29kc25hbWUiKS50ZXh0KCksCgkJCQkJCQlpc2JuOiAiIgoJCQkJCQl9CgkJCQkJfSwKCQkJCQkiZ29tZS1ydXNoYnV5IjogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gIiI7CgkJCQkJCXJldHVybiBlID0gcigiLnBpYyBhIikuZXEoMCkuYXR0cigiaHJlZiIpLCB7CgkJCQkJCQluYW1lOiByKCIucHJvZHVjdC1pbmZvIC5uYW1lIikudGV4dCgpLAoJCQkJCQkJaXNibjogIiIsCgkJCQkJCQl1cmw6IGUKCQkJCQkJfQoJCQkJCX0sCgkJCQkJZ29tZWhvbmU6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IGQoKTsKCQkJCQkJcmV0dXJuIGUucHJpY2UgPSByKCIjcHJkUHJpY2UiKS50ZXh0KCkubWF0Y2goL1swLTkuXSsvKVswXSwgZS5uYW1lID0gcigiLnByZG1haW4gLnByZHRpdCIpLnRleHQoKSwgZQoJCQkJCX0sCgkJCQkJZ29tZTogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gd2luZG93LnByZEluZm8sCgkJCQkJCQl0ID0gZCgpLAoJCQkJCQkJbiA9ICIiLAoJCQkJCQkJaSA9IHIoInRpdGxlIikuaHRtbCgpOwoJCQkJCQlpZiAoaSA9IHIoIi5wcmR0aXQgaDEiKS50ZXh0KCksIHQubmFtZSA9IGksIHQuaXNibiA9IG4sIHQucHJpY2UgPSByKCIjcHJkUHJpY2UiKS50ZXh0KCksICIiID09IGkgJiYgKHQubmFtZSA9IGUgJiYgZS5wcmROYW1lKSwgIiIgPT0gdC5wcmljZSAmJiAodC5wcmljZSA9IGUgJiYgZS5wcmljZSksIHQuYnJhbmRfc3RyaW5nID0gZSAmJiBlLmJyZWFkTmFtZSwgdC5pdGVtSWQgPSBsb2NhdGlvbi5ocmVmLm1hdGNoKC9nb21lXC5jb21cLmNuXC8oW0EtWjAtOV0rKS0vKVsxXSwgdC5jYXRfaWQgPSBlICYmIGUuY2F0SWQsIHQud2Vic2l0ZSA9ICJnb21lIiwgdC5waWMgPSByKCIucGljLXNtYWxsIHVsIGxpIGltZyIpLmVxKDApLmF0dHIoInNyYyIpLCAhdC5jYXRfaWQpIHsKCQkJCQkJCXZhciBhID0gcigiLmxvY2FsIGEiKS5lcSgzKS5hdHRyKCJocmVmIik7CgkJCQkJCQl0LmNhdF9pZCA9IGEubWF0Y2goL2NhdFxkKy8pICYmIGEubWF0Y2goL2NhdFxkKy8pWzBdCgkJCQkJCX0KCQkJCQkJcmV0dXJuIHQKCQkJCQl9LAoJCQkJCSJnb21lLXEiOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCk7CgkJCQkJCXJldHVybiBlLm5hbWUgPSByKCJoMS50aXRsZSIpLnRleHQoKSwgZS51cmwgPSByKCIucHJvX2xpbmsiKVswXS5ocmVmLCBlCgkJCQkJfSwKCQkJCQkiZ29tZS10YW8iOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCk7CgkJCQkJCXJldHVybiBlLm5hbWUgPSByKCIucHJkdGl0IikudGV4dCgpLCBlLnByaWNlID0gcGFyc2VJbnQocigiI3ByZFByaWNlIikudGV4dCgpLm1hdGNoKC9bMC05XSsvKVswXSksIGUKCQkJCQl9LAoJCQkJCSJnb21lLXR1YW4iOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCk7CgkJCQkJCXJldHVybiBlLnVybCA9IHIoIi5jb21wYXJlLWxpbmsiKS5hdHRyKCJocmVmIiksIGUubmFtZSA9IHIoInRpdGxlIikuaHRtbCgpLCBlLnByaWNlID0gcigiI3NhbGVQcmljZSIpLnRleHQoKSwgZQoJCQkJCX0sCgkJCQkJeWloYW9kaWFuOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCksCgkJCQkJCQl0ID0gIiI7CgkJCQkJCXRyeSB7CgkJCQkJCQlyKCIjcHJvZHVjdElkIikubGVuZ3RoID8gdCA9IHIoIiNwcm9kdWN0SWQiKS52YWwoKSA6IHIoIiNwcm9kdWN0Q29kZSIpLmxlbmd0aCA/IHQgPSBwYXJzZUludChyKCIjcHJvZHVjdENvZGUiKS50ZXh0KCkuc2xpY2UoMCwgLTEpKSA6IHIoIiNtYWluUHJvZHVjdElkIikubGVuZ3RoID8gdCA9IHIoIiNtYWluUHJvZHVjdElkIikudmFsKCkgOiByKCIuc3BlY2lmaWNfZGV0YWlsIHAgc3BhbiIpLmxlbmd0aCAmJiAodCA9IHBhcnNlSW50KHIoIi5zcGVjaWZpY19kZXRhaWwgcCBzcGFuIikudGV4dCgpLm1hdGNoKC9cZCskLylbMF0uc2xpY2UoMCwgLTEpKSkKCQkJCQkJfSBjYXRjaCAoaSkgewoJCQkJCQkJbi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyhpKQoJCQkJCQl9CgkJCQkJCXZhciBhID0gcigiI3Byb2R1Y3RNYWluTmFtZSIpLnRleHQoKSwKCQkJCQkJCW8gPSBhLmluZGV4T2YoIjwiKTsKCQkJCQkJbyA+IDAgJiYgKGEgPSBhLnN1YnN0cigwLCBvKSksICIiID09IGEgJiYgKGEgPSByKCIubWFpbl9pbmZvX2NvbiBwLnByaWNlIikucHJldigpLmVxKDApLnRleHQoKSksICIiID09IGEgJiYgKGEgPSByKCIucHJvX3RpdCIpLnRleHQoKSk7CgkJCQkJCXZhciBzID0gcignI3Byb2REZXRhaWxDb3RlbnREaXYgZGQ6Y29udGFpbnMoIklTQk4iKScpLnRleHQoKS5zdWJzdHIoNSk7CgkJCQkJCXMgPSByLnRyaW0ocyk7CgkJCQkJCXZhciBsID0gbG9jYXRpb24uaHJlZi5tYXRjaCgvaXRlbVwvKFswLTldezUsOX0pLyk7CgkJCQkJCXJldHVybiBlLml0ZW1JZCA9IGwgJiYgbFsxXSwgZS5pbWcgPSByKCIjanNwcm9DcnVtYiAubUJveCBiIGltZyIpLmVxKDApLmF0dHIoInNyYyIpLCBlLmJyYW5kX3N0cmluZyA9IHIoIiNicmFuZE5hbWUiKS52YWwoKSwgZS5wcmljZSA9IHIoIiNjdXJyZW50X3ByaWNlIikudGV4dCgpLnJlcGxhY2UoL1vvv6XCpV0rLywgIiIpLCBlLmNhdF9pZCA9IHIoIiNjYXRlZ29yeUlkIikudmFsKCksIGUuaXNibiA9IHMsIGUubmFtZSA9IGEsIGUuaWQgPSB0LCBlLnBpYyA9IGUuaW1nLCBlLndlYnNpdGUgPSAieWhkIiwgZQoJCQkJCX0sCgkJCQkJInlpaGFvZGlhbi10dWFuIjogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gIiIsCgkJCQkJCQl0ID0gIiIsCgkJCQkJCQlpID0gIiI7CgkJCQkJCXRyeSB7CgkJCQkJCQllID0gcigiI2RldGFpbERpdiBoMiIpLmVxKDApLnRleHQoKSwgdCA9IHIoIiNwcm9kdWN0SWQiKS52YWwoKSwgIiIgPT0gdCAmJiAodCA9IHIoIiNtYWluUHJvZHVjdElkIikudmFsKCkpCgkJCQkJCX0gY2F0Y2ggKGEpIHsKCQkJCQkJCW4uZGVidWcgJiYgY29uc29sZS5sb2coYSkKCQkJCQkJfQoJCQkJCQkiIiA9PSBlICYmIChlID0gcigidGl0bGUiKS50ZXh0KCkucmVwbGFjZSgvLnsyfeWboui0rV8x5Y+35ZuiXzHlj7flupflrpjnvZEvLCAiIikpOwoJCQkJCQl2YXIgbyA9IHIoIiNwcmljZW5vdyIpLnRleHQoKTsKCQkJCQkJcmV0dXJuIGkgPSAiaHR0cDovL2l0ZW0ueWhkLmNvbS9pdGVtLyIgKyByKCIjcHJvZHVjdE1lcmNhbnRJZCIpLnZhbCgpLCB7CgkJCQkJCQluYW1lOiBlLAoJCQkJCQkJaXNibjogIiIsCgkJCQkJCQlpZDogdCwKCQkJCQkJCXVybDogaSwKCQkJCQkJCXByaWNlOiBvCgkJCQkJCX0KCQkJCQl9LAoJCQkJCXdvbWFpOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCk7CgkJCQkJCWUubmFtZSA9ICIiOwoJCQkJCQl0cnkgewoJCQkJCQkJdmFyIHQgPSByKCIubWFpbl9kZXRhaWwiKS5lcSgwKS5odG1sKCkubWF0Y2goL3ZhciBfdGl0bGUgPSAiKFteIl0rKSIvKTsKCQkJCQkJCWUubmFtZSA9IHRbMV0KCQkJCQkJfSBjYXRjaCAoaSkgewoJCQkJCQkJbi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyhpKSwgZS5uYW1lID0gIiIKCQkJCQkJfQoJCQkJCQlpZiAoZS5wcmljZSA9IHIoIi5idXlQcmljZSIpLnRleHQoKSwgIiIgPT0gZS5uYW1lKSB0cnkgewoJCQkJCQkJZS5uYW1lID0gcigiLldyYXBUaXQiKS50ZXh0KCkKCQkJCQkJfSBjYXRjaCAoaSkgewoJCQkJCQkJbi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyhpKQoJCQkJCQl9CgkJCQkJCXRyeSB7CgkJCQkJCQllLm5hbWUgPSB3aW5kb3cucnRUYWcuZGF0YS5lY29tX3ZpZXcucHJvZFswXS5wX25hbWUsIGUucHJpY2UgPSB3aW5kb3cucnRUYWcuZGF0YS5lY29tX3ZpZXcucHJvZFswXS5wX3ByaWNlLCBlLmJyYW5kX3N0cmluZyA9IHdpbmRvdy5ydFRhZy5kYXRhLmVjb21fdmlldy5wcm9kWzBdLnBfYnJhbmQKCQkJCQkJfSBjYXRjaCAoaSkgewoJCQkJCQkJbi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyhpKQoJCQkJCQl9CgkJCQkJCXJldHVybiBlCgkJCQkJfSwKCQkJCQljb29jYWE6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogIumFt+W8gCAiICsgcigiLnByb0hlYWRlciBoMSIpLnRleHQoKQoJCQkJCQl9CgkJCQkJfSwKCQkJCQlsZXlvdTogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQlyZXR1cm4gZS5uYW1lID0gcigiI2Jhc2VJbmZvRGl2IGgzIikudGV4dCgpLCBlLnByaWNlID0gcigiLml0ZW1fcm1iIC5mb250X251bSIpLnRleHQoKSwgZQoJCQkJCX0sCgkJCQkJc2hvcGluOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSByLnRyaW0ocigiLmNydW1icyIpLnRleHQoKSksCgkJCQkJCQl0ID0gci50cmltKHIoIi5wcm9kdWN0LWxpc3QgaDIiKS50ZXh0KCkpOwoJCQkJCQlyZXR1cm4gZSA9IGUucmVwbGFjZSgvKD86XHU1ZjUzXHU1MjRkXHU0ZjRkXHU3ZjZlfFx1OTk5Nlx1OTg3NXwtKS8sICIiLCBlKSwgewoJCQkJCQkJbmFtZTogZSArICIgIiArIHQsCgkJCQkJCQlpc2JuOiAiIgoJCQkJCQl9CgkJCQkJfSwKCQkJCQl4aXU6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9ICIiOwoJCQkJCQl0cnkgewoJCQkJCQkJZSA9IHIoIi5wX3RpdGxlIHNwYW4gaDEiKS50ZXh0KCkKCQkJCQkJfSBjYXRjaCAodCkgewoJCQkJCQkJbi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyh0KQoJCQkJCQl9CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiBlLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJInhpdS10dWFuIjogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIueGl0X3hxemdvbmcgaDIiKS50ZXh0KCksCgkJCQkJCQlpc2JuOiAiIgoJCQkJCQl9CgkJCQkJfSwKCQkJCQl2amlhOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5zcC1zaW5nbGVOYW1lIC50aXRsZSIpLnRleHQoKSwKCQkJCQkJCWlzYm46ICIiCgkJCQkJCX0KCQkJCQl9LAoJCQkJCSI3Y3YiOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5tYWluX3JpZ2h0X3RvcCIpLnRleHQoKSwKCQkJCQkJCWlzYm46ICIiCgkJCQkJCX0KCQkJCQl9LAoJCQkJCXg6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigicC50b3BfbmFtZSIpLnRleHQoKSwKCQkJCQkJCWlzYm46ICIiCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWd1b3BpOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIiNwX25hbWUiKS50ZXh0KCksCgkJCQkJCQlpc2JuOiAiIgoJCQkJCQl9CgkJCQkJfSwKCQkJCQlubzU6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IHIoIi5wYXJ0MDEgLnAwMV9yIGgyIikuaHRtbCgpOwoJCQkJCQlyZXR1cm4gZS5pbmRleE9mKCI8IikgPiAwICYmIChlID0gZS5zdWJzdHIoMCwgZS5pbmRleE9mKCI8IikpKSwgewoJCQkJCQkJbmFtZTogZSwKCQkJCQkJCWlzYm46ICIiCgkJCQkJCX0KCQkJCQl9LAoJCQkJCXNhc2E6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IHIoIi5wcm9kdWN0LXRpdGxlcyIpLnRleHQoKSwKCQkJCQkJCXQgPSByKCIjcHJvZHVjdF9pbmZvcm1hdGlvbiAuYWN0aW9uLXByaWMiKS50ZXh0KCk7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiBlLAoJCQkJCQkJcHJpY2U6IHQsCgkJCQkJCQlpc2JuOiAiIgoJCQkJCQl9CgkJCQkJfSwKCQkJCQlkaGM6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiaGVhZCB0aXRsZSIpLnRleHQoKSwKCQkJCQkJCWlzYm46ICIiCgkJCQkJCX0KCQkJCQl9LAoJCQkJCSI5ZGFkYW8iOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5wcmEgaDIiKS50ZXh0KCksCgkJCQkJCQlpc2JuOiAiIgoJCQkJCQl9CgkJCQkJfSwKCQkJCQltZXRhbzogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIucGliX3RpdGxlX2RldGFpbCIpLnRleHQoKQoJCQkJCQl9CgkJCQkJfSwKCQkJCQlremozNjU6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IHIoInRpdGxlIikudGV4dCgpLAoJCQkJCQkJdCA9IGUuaW5kZXhPZigiXyIpOwoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogZS5zbGljZSgwLCB0KQoJCQkJCQl9CgkJCQkJfSwKCQkJCQludWJpYTogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gIiI7CgkJCQkJCSIiID09IGUgJiYgKGUgPSByKCIjc3ViTmF2IC5zdWItbG9nbyIpLmVxKDApLnRleHQoKSk7CgkJCQkJCXZhciB0ID0gcigiLnByaWNlIikudGV4dCgpOwoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogZSwKCQkJCQkJCXByaWNlOiB0CgkJCQkJCX0KCQkJCQl9LAoJCQkJCWduYzogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIjcHJvZHVjdC10aXRsZSIpLnRleHQoKSwKCQkJCQkJCXByaWNlOiByKCIucHJpY2UtcmVndWxhciIpLnRleHQoKS5tYXRjaCgvWzAtOS5dKy8pICYmIHIoIi5wcmljZS1yZWd1bGFyIikudGV4dCgpLm1hdGNoKC9bMC05Ll0rLylbMF0KCQkJCQkJfQoJCQkJCX0sCgkJCQkJeW1hdG91OiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSByKCJtZXRhW25hbWU9ZGVzY3JpcHRpb25dIikuYXR0cigiY29udGVudCIpLAoJCQkJCQkJdCA9IGUuaW5kZXhPZigi4oCdIik7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiBlLnNsaWNlKDEsIHQpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWthb2xhOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5wcm9kdWN0LXRpdGxlIikudGV4dCgpLAoJCQkJCQkJcHJpY2U6IHIoIi5jdXJyZW50UHJpY2UiKS50ZXh0KCkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJIjM2MGt4ciI6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IHIoIi5yaWdodC1pbnRybyBoMiIpLmh0bWwoKTsKCQkJCQkJcmV0dXJuIGUgPSBlLmluZGV4T2YoIjwiKSA+IDAgPyBlLnN1YnN0cigwLCBlLmluZGV4T2YoIjwiKSkgOiBlLCB7CgkJCQkJCQluYW1lOiBlLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJbGlrZWZhY2U6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiLnRDdG4gaDEiKS50ZXh0KCksCgkJCQkJCQlpc2JuOiAiIgoJCQkJCQl9CgkJCQkJfSwKCQkJCQlxeGlhbjogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIucHJvZHVjdF9ib2R5MV9yaWdodF90aXRsZSBoMSIpLnRleHQoKSwKCQkJCQkJCWlzYm46ICIiCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWRpZGFtYWxsOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5wcm9kdWN0LW5hbWUiKS50ZXh0KCksCgkJCQkJCQlpc2JuOiAiIgoJCQkJCQl9CgkJCQkJfSwKCQkJCQl5YW9kaWFuMTAwOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5pbmZvYm94aGVhZGVyIGgxIikudGV4dCgpLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJbGlqaWFiYWJ5OiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSByKCIjdHh0cHJvbmFtZSIpLnRleHQoKTsKCQkJCQkJcmV0dXJuICgidW5kZWZpbmVkIiA9PSB0eXBlb2YgZSB8fCAiIiA9PSBlKSAmJiAoZSA9IHIoIiNsYmxfcHJvbmFtZSIpLnRleHQoKSksIHsKCQkJCQkJCW5hbWU6IGUsCgkJCQkJCQlpc2JuOiAiIgoJCQkJCQl9CgkJCQkJfSwKCQkJCQkiOTlyZWFkIjogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQlyZXR1cm4gZS5pc2JuID0gcignbGk6Y29udGFpbnMoIuS6p+WTgeadoeeggSIpJykuaHRtbCgpLCBudWxsID09IGUuaXNibiB8fCAidW5kZWZpbmVkIiA9PSB0eXBlb2YgZS5pc2JuIHx8ICIiID09IGUuaXNibiA/IGUuaXNibiA9ICIiIDogZS5pc2JuID0gZS5pc2JuLnN1YnN0cig3KSwgZQoJCQkJCX0sCgkJCQkJImNoaW5hLXB1YiI6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiaDEuYmxhY2sxNWMiKS50ZXh0KCksCgkJCQkJCQlpc2JuOiByKCdsaTpjb250YWlucygiSVNCTiIpJykuY2hpbGRyZW4oInN0cm9uZyIpLmVxKDApLmh0bWwoKQoJCQkJCQl9CgkJCQkJfSwKCQkJCQlib29rc2NoaW5hOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCk7CgkJCQkJCXRyeSB7CgkJCQkJCQllLm5hbWUgPSByKCIudGhpcy1waWMiKS5wcmV2KCkudGV4dCgpLCBlLm5hbWUgPSByLnRyaW0oZS5uYW1lKQoJCQkJCQl9IGNhdGNoICh0KSB7CgkJCQkJCQluLmRlYnVnICYmIGNvbnNvbGUubG9nKHQpLCBlLm5hbWUgPSAiIgoJCQkJCQl9CgkJCQkJCXRyeSB7CgkJCQkJCQllLmlzYm4gPSByKCd0cjpjb250YWlucygi5Ye654mI5pe26Ze077yaIiknKS5jaGlsZHJlbigpLmVxKDEpLnRleHQoKSwgZS5pc2JuID0gci50cmltKGUuaXNibikKCQkJCQkJfSBjYXRjaCAodCkgewoJCQkJCQkJbi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyh0KSwgZS5pc2JuID0gIiIKCQkJCQkJfQoJCQkJCQlyZXR1cm4gZQoJCQkJCX0sCgkJCQkJImJvb2tzY2hpbmEtdHVhbiI6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IGQoKTsKCQkJCQkJdHJ5IHsKCQkJCQkJCWUubmFtZSA9IHIoIi50aXR3b3JkIikudGV4dCgpLm1hdGNoKC/jgIooW17jgItdKykvKVsxXSwgZS5wcmljZSA9IHIoIi5wcmljZXRpbWUgLnByaWdodCAuTWJpZyIpLnRleHQoKQoJCQkJCQl9IGNhdGNoICh0KSB7CgkJCQkJCQluLmRlYnVnICYmIGNvbnNvbGUubG9nKHQpCgkJCQkJCX0KCQkJCQkJdHJ5IHsKCQkJCQkJCWUuaXNibiA9IHIoJy5jb21tZW50czpjb250YWlucygiSVNCTiIpJykudGV4dCgpLm1hdGNoKC9JU0JO77yaKFswLTldKykvKVsxXQoJCQkJCQl9IGNhdGNoICh0KSB7CgkJCQkJCQluLmRlYnVnICYmIGNvbnNvbGUubG9nKHQpLCBlLmlzYm4gPSAiIgoJCQkJCQl9CgkJCQkJCWlmICgiIiA9PSBlLmlzYm4pIHRyeSB7CgkJCQkJCQllLmlzYm4gPSByKCIuY29tbWVudHMiKS50ZXh0KCkubWF0Y2goL1swLTldezEzfS8pWzBdCgkJCQkJCX0gY2F0Y2ggKHQpIHsKCQkJCQkJCW4uZGVidWcgJiYgY29uc29sZS5sb2codCkKCQkJCQkJfQoJCQkJCQlyZXR1cm4gZQoJCQkJCX0sCgkJCQkJZWZlaWh1OiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCk7CgkJCQkJCWUubmFtZSA9IHIoIi5zaGFyZV90aXRsZSBlbSIpLnRleHQoKTsKCQkJCQkJdmFyIHQgPSByKCIuYm94X3dyYXAgLnByaWNlIC5hIHAiKS50ZXh0KCkubWF0Y2goL1swLTldKy8pOwoJCQkJCQlyZXR1cm4gdCAmJiAoZS5wcmljZSA9IHRbMF0pLCBlCgkJCQkJfSwKCQkJCQl5aW50YWk6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiLnAtdGl0IikudGV4dCgpLAoJCQkJCQkJaXNibjogIiIsCgkJCQkJCQlwcmljZTogcigiLnFkLW51bSIpLnRleHQoKQoJCQkJCQl9CgkJCQkJfSwKCQkJCQl1cmNvc21lOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5wcm9kdWN0SW5mb3JtYXRpb25UZXh0IGgxIikudGV4dCgpLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJc3RyYXdiZXJyeW5ldDogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIucHJvZHVjdC1mcmFtZSBoMSIpLnRleHQoKSArIHIoIi5wcm9kdWN0LWZyYW1lIGgyIikudGV4dCgpLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJbHVjZTogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIuUHJvZHVjdF9EZXRhaWwgdWwiKS5jaGlsZHJlbigibGkiKS5lcSgwKS5jaGlsZHJlbigicCIpLmVxKDApLnRleHQoKSwKCQkJCQkJCWlzYm46ICIiCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWsxMjE6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiLm5ld3Byb2R1Y3RuYW1lMCIpLnRleHQoKSwKCQkJCQkJCWlzYm46ICIiCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWhhcHBpZ286IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiLmRldGFpbF90b3AgLmRldGFpbF90aXQgIikudGV4dCgpLAoJCQkJCQkJcHJpY2U6IHIoIi5wcmljZV9ub3ciKS50ZXh0KCkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJZ2FwOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5wcm9kdWN0LW5hbWUgaDEiKS50ZXh0KCksCgkJCQkJCQlpc2JuOiAiIgoJCQkJCQl9CgkJCQkJfSwKCQkJCQltaXNzbGVsZTogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIjZ29vZHNfbmFtZSIpLnRleHQoKSwKCQkJCQkJCWlzYm46ICIiCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWFsbDNjOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5idXlpbmZvIGgxIikudGV4dCgpLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJaWRhcGhuZTogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIudGl0bGUiKS50ZXh0KCksCgkJCQkJCQlpc2JuOiAiIgoJCQkJCQl9CgkJCQkJfSwKCQkJCQliaW5nZ286IGZ1bmN0aW9uKCkgewoJCQkJCQlmb3IgKHZhciBlID0gcigiI3BOYW1lIGgxIikuaHRtbCgpLCB0ID0gZS5sZW5ndGgsIG4gPSAwOyB0ID4gbiAmJiAiPCIgIT0gZVtuXTsgbisrKTsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IGUuc3Vic3RyKDAsIG4pLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJInRhb2Jhby1qdSI6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IGQoKSwKCQkJCQkJCXQgPSAvaXRlbV9pZD0oXGQrKS9naS5leGVjKGxvY2F0aW9uLmhyZWYpOwoJCQkJCQlyZXR1cm4gZS5pZCA9IHQgJiYgMiA9PSB0Lmxlbmd0aCAmJiB0WzFdLCBlLm5hbWUgPSByLnRyaW0ocigiLm1haW4tYm94IGgyIikudGV4dCgpKSwgZQoJCQkJCX0sCgkJCQkJdG1hbGw6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IGQoKSwKCQkJCQkJCXQgPSByKCIuYXR0cmlidXRlcy1saXN0IHVsIikuaHRtbCgpLAoJCQkJCQkJbiA9ICIiLAoJCQkJCQkJaSA9ICIiOwoJCQkJCQludWxsID09IHQgJiYgKHQgPSByKCIuYXR0cmlidXRlcy1saXN0IikuaHRtbCgpKSwgdCA9IHQucmVwbGFjZSgvKD86PFwhXC1cLVteXC1dKlwtXC0+fDxsaVtePl0qPnxcIFwgKS9naSwgIiIpLCB0ID0gdC5yZXBsYWNlKC8mbmJzcDsvZ2ksICIgIiksIHQgPSB0LnJlcGxhY2UoLzxcL2xpW14+XSo+L2dpLCAifCIpLCB0ID0gdC5yZXBsYWNlKC9cbi9naSwgIiIpOwoJCQkJCQl2YXIgYSA9IHQubWF0Y2gobmV3IFJlZ0V4cCgvXHwoXHU1NGMxXHU3MjRjKD86XDp8XHVmZjFhKVteXHxdKykvZ2kpKTsKCQkJCQkJaWYgKGEpCgkJCQkJCQlmb3IgKHZhciBvID0gMDsgbyA8IGEubGVuZ3RoOyBvKyspIG4gKz0gYVtvXSArICJ8IjsKCQkJCQkJdmFyIHMgPSB0Lm1hdGNoKG5ldyBSZWdFeHAoLygoPzpcdTdjZmJcdTUyMTd8XHU4ZDI3XHU1M2Y3fFx1NTc4Ylx1NTNmN3xcdTZiM2VcdTUzZjcpKD86XDp8XHVmZjFhKVteXHxdKykvZ2kpKTsKCQkJCQkJaWYgKHMpCgkJCQkJCQlmb3IgKHZhciBvID0gMDsgbyA8IHMubGVuZ3RoOyBvKyspIG4gKz0gc1tvXSArICJ8IjsKCQkJCQkJdmFyIGwgPSB0Lm1hdGNoKG5ldyBSZWdFeHAoLyhJU0JOW15cOlx1ZmYxYV0qKD86XDp8XHVmZjFhKVteXHxdKykvZ2kpKTsKCQkJCQkJaWYgKGwpCgkJCQkJCQlmb3IgKHZhciBvID0gMDsgbyA8IGwubGVuZ3RoOyBvKyspIG4gKz0gbFtvXSArICJ8IjsKCQkJCQkJZS5za2V5d29yZCA9IG4sIGUuY2F0X2lkID0gIiI7CgkJCQkJCXZhciBjID0gcigiI3RiLWJlYWNvbi1hcGx1cyIpLmF0dHIoImV4cGFyYW1zIik7CgkJCQkJCWlmIChjID0gYyAmJiBjLm1hdGNoKC9jYXRlZ29yeT1pdGVtJTVmKFxkKykmLyksIGMgPSBjICYmIGNbMV0sIGUuY2F0X2lkID0gYywgIiIgPT0gZS5jYXRfaWQpIHsKCQkJCQkJCXZhciBjID0gcigiI2RldGFpbC1yZWNvbW1lbmQtdmlld2VkIikuYXR0cigiZGF0YS1jYXRpZCIpOwoJCQkJCQkJZS5jYXRfaWQgPSBjCgkJCQkJCX0KCQkJCQkJZS5yb290X2lkID0gcignI0pfRnJtQmlkIGlucHV0W25hbWU9InJvb3RDYXRJZCJdJykudmFsKCksIGUucGljID0gcigiI0pfSW1nQm9vdGgiKS5hdHRyKCJzcmMiKSwgLTEgPT09IGUucGljLmluZGV4T2YoImh0dHBzOiIpICYmIChlLnBpYyA9ICJodHRwOiIgKyBlLnBpYyk7CgkJCQkJCXZhciBwID0gbG9jYXRpb24uaHJlZi5tYXRjaCgvWz8mXWlkPShcZCspLyk7CgkJCQkJCXAgPSBwICYmIHBbMV07CgkJCQkJCXZhciBoID0gcigibWV0YVtuYW1lPSdtaWNyb3Njb3BlLWRhdGEnXSIpLmF0dHIoImNvbnRlbnQiKSwKCQkJCQkJCXUgPSBoICYmIGgubWF0Y2goL3VzZXJpZD0oXGQrKS8pOwoJCQkJCQlpID0gdVsxXTsKCQkJCQkJdmFyIG0gPSByKCIjSl9QcmljZSIpLnRleHQoKTsKCQkJCQkJcmV0dXJuIG0gfHwgKG0gPSByKCIjSl9TdHJQcmljZSIpLnRleHQoKSksIG0gfHwgKG0gPSByKCIudG0tcHJvbW8tcHJpY2UgLnRtLXByaWNlIikudGV4dCgpKSwgbSB8fCAobSA9IHIoIiNKX1N0clByaWNlTW9kQm94IC50bS1wcmljZSIpLnRleHQoKSksIG0gfHwgKG0gPSByKCIudG0tcHJpY2UiKS50ZXh0KCkpLCBlLnNob3BfbmFtZSA9IHIoIi5zaG9wa2VlcGVyIC5yaWdodCBhIikudGV4dCgpLCBlLnNob3BfYWRkcmVzID0gcigiLmxvY3VzIC5yaWdodCIpLnRleHQoKS5yZXBsYWNlKC8oPzpcdHxcbnxccykvZ2ksICIiKSwgZS5wcmljZSA9IG0sIGUudXNlcmlkID0gaSwgZS5uYW1lID0gcigiI0pfRGV0YWlsTWV0YSAudGItZGV0YWlsLWhkIGgxIikudGV4dCgpLnJlcGxhY2UoL1xuL2csICIiKS50cmltKCksIGUuaXRlbUlkID0gcCwgZQoJCQkJCX0sCgkJCQkJdGFvYmFvOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCksCgkJCQkJCQl0ID0gcigiLmF0dHJpYnV0ZXMtbGlzdCB1bCIpLmh0bWwoKSwKCQkJCQkJCW4gPSAiIiwKCQkJCQkJCWkgPSAiIjsKCQkJCQkJbnVsbCA9PSB0ICYmICh0ID0gcigiLmF0dHJpYnV0ZXMtbGlzdCIpLmh0bWwoKSksIHQgPSB0LnJlcGxhY2UoLyg/OjxcIVwtXC1bXlwtXSpcLVwtPnw8bGlbXj5dKj58XCBcICkvZ2ksICIiKSwgdCA9IHQucmVwbGFjZSgvJm5ic3A7L2dpLCAiICIpLCB0ID0gdC5yZXBsYWNlKC88XC9saVtePl0qPi9naSwgInwiKSwgdCA9IHQucmVwbGFjZSgvXG4vZ2ksICIiKTsKCQkJCQkJdmFyIGEgPSB0Lm1hdGNoKG5ldyBSZWdFeHAoL1x8KFx1NTRjMVx1NzI0Yyg/Olw6fFx1ZmYxYSlbXlx8XSspL2dpKSk7CgkJCQkJCWlmIChhKQoJCQkJCQkJZm9yICh2YXIgbyA9IDA7IG8gPCBhLmxlbmd0aDsgbysrKSBuICs9IGFbb10gKyAifCI7CgkJCQkJCXZhciBzID0gdC5tYXRjaChuZXcgUmVnRXhwKC8oKD86XHU3Y2ZiXHU1MjE3fFx1OGQyN1x1NTNmN3xcdTU3OGJcdTUzZjd8XHU2YjNlXHU1M2Y3KSg/Olw6fFx1ZmYxYSlbXlx8XSspL2dpKSk7CgkJCQkJCWlmIChzKQoJCQkJCQkJZm9yICh2YXIgbyA9IDA7IG8gPCBzLmxlbmd0aDsgbysrKSBuICs9IHNbb10gKyAifCI7CgkJCQkJCXZhciBsID0gdC5tYXRjaChuZXcgUmVnRXhwKC8oSVNCTlteXDpcdWZmMWFdKig/Olw6fFx1ZmYxYSlbXlx8XSspL2dpKSk7CgkJCQkJCWlmIChsKQoJCQkJCQkJZm9yICh2YXIgbyA9IDA7IG8gPCBsLmxlbmd0aDsgbysrKSBuICs9IGxbb10gKyAifCI7CgkJCQkJCWUuc2tleXdvcmQgPSBuLCBlLmNhdF9pZCA9IHIoIiNKX1BpbmUiKS5hdHRyKCJkYXRhLWNhdGlkIiksIGUucm9vdF9pZCA9IHIoIiNKX1BpbmUiKS5hdHRyKCJkYXRhLXJvb3RpZCIpLCBlLnBpYyA9IHIoIiNKX0ltZ0Jvb3RoIikuYXR0cigic3JjIik7CgkJCQkJCXZhciBjID0gcigibWV0YVtuYW1lPSdtaWNyb3Njb3BlLWRhdGEnXSIpLmF0dHIoImNvbnRlbnQiKSwKCQkJCQkJCXAgPSBjICYmIGMubWF0Y2goL3VzZXJpZD0oXGQrKS8pOwoJCQkJCQlpID0gcCAmJiBwWzFdOwoJCQkJCQl2YXIgaCA9IHIoIiNKX1ByaWNlIikudGV4dCgpOwoJCQkJCQlyZXR1cm4gZS5zaG9wX25hbWUgPSByKCIuc2hvcGtlZXBlciAucmlnaHQgYSIpLnRleHQoKSwgZS5zaG9wX2FkZHJlcyA9IHIoIi5sb2N1cyAucmlnaHQiKS50ZXh0KCkucmVwbGFjZSgvKD86XHR8XG58XHMpL2dpLCAiIiksIGUubm5pZCA9IGxvY2F0aW9uLmhyZWYubWF0Y2goL1s/Jl1pZD0oWzAtOV0rKS8pICYmIGxvY2F0aW9uLmhyZWYubWF0Y2goL1s/Jl1pZD0oWzAtOV0rKS8pWzFdLCBlLnByaWNlID0gaCwgZS5uZXd0aXRsZSA9IHIoIiNKX1RpdGxlIC50Yi1tYWluLXRpdGxlIikudGV4dCgpLnRyaW0oKSwgZS5pdGVtSWQgPSBlLm5uaWQsIGUudXNlcmlkID0gaSwgZQoJCQkJCX0sCgkJCQkJInRhb2Jhby1zcHUiOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIiNkZXRhaWwgLmRldGFpbC1oZCBoMyIpLnRleHQoKSwKCQkJCQkJCWlzYm46ICIiCgkJCQkJCX0KCQkJCQl9LAoJCQkJCXhpamllOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5kZXRhaWxfc2hfcmlnaHQgaDEiKS50ZXh0KCksCgkJCQkJCQlpc2JuOiAiIgoJCQkJCQl9CgkJCQkJfSwKCQkJCQljYW9tZWlwYWk6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiI3Byb19uYW1lIGgyIikudGV4dCgpLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJZGFodW96aGFuOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5wcm9wZXJ0eSBoMiIpLnRleHQoKSwKCQkJCQkJCWlzYm46ICIiCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWh1b2xpZGE6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiLmgxX3RpdGxlIGgxIikudGV4dCgpLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJIjEyZGlhbiI6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiLmdvb2RzdGl0bGUiKS50ZXh0KCksCgkJCQkJCQlpc2JuOiAiIgoJCQkJCQl9CgkJCQkJfSwKCQkJCQkxMTE6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IGQoKTsKCQkJCQkJcmV0dXJuIGUubmFtZSA9IHIoIi5kZXRhaWxuYXYgc3BhbiIpLmxhc3QoKS50ZXh0KCksIGUucHJpY2UgPSB3aW5kb3cuX0JGRC5CRkRfSU5GTy5wcmljZSwgZQoJCQkJCX0sCgkJCQkJZGFveWFvOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5wcm9kdWN0XzFfNCAuZF90YWJsZV8zIC5mb250XzAxIikudGV4dCgpLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJZG91YmFuOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIHQgPSByKCIjaW5mbyIpLmh0bWwoKSwKCQkJCQkJCWkgPSAiIjsKCQkJCQkJdHJ5IHsKCQkJCQkJCXZhciBhID0gdC5pbmRleE9mKCJJU0JOOiIpLAoJCQkJCQkJCW8gPSB0Lmxlbmd0aDsKCQkJCQkJCWZvciAoYSArPSAxMjsgbyA+IGE7IGErKykgdFthXSA+PSAiMCIgJiYgdFthXSA8PSAiOSIgJiYgKGkgKz0gdFthXSkKCQkJCQkJfSBjYXRjaCAobCkgewoJCQkJCQkJbi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyhlKQoJCQkJCQl9CgkJCQkJCWlmICgiIiA9PT0gaSkgewoJCQkJCQkJdmFyIGMgPSByKCIjY29udGVudCAuaW5kZW50IikuZXEoMSkudGV4dCgpLm1hdGNoKC9pc2JuOiAoXGQrKS8pOwoJCQkJCQkJYyAmJiAoaSA9IGNbMV0sIGkgPSBzKGkpKQoJCQkJCQl9CgkJCQkJCXZhciBwID0gd2luZG93LmxvY2F0aW9uLmhyZWYudG9TdHJpbmcoKSwKCQkJCQkJCWggPSBwLm1hdGNoKC9nd2RfaXNibj0oXGQrKS8pOwoJCQkJCQlpZiAoIiIgPT0gaSkgdHJ5IHsKCQkJCQkJCWkgPSBoWzFdCgkJCQkJCX0gY2F0Y2ggKGwpIHsKCQkJCQkJCW4uZGVidWcgJiYgY29uc29sZS5sb2coZSksIGkgPSAiIgoJCQkJCQl9CgkJCQkJCXZhciB1ID0gZCgpOwoJCQkJCQlyZXR1cm4gdS5pc2JuID0gaSwgdQoJCQkJCX0sCgkJCQkJImRvdWJhbi1kb25neGkiOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCk7CgkJCQkJCXJldHVybiBlLnRpdGxlID0gcigiLmNvbW1vZGl0eS1uYW1lIGEiKS50ZXh0KCksIGUKCQkJCQl9LAoJCQkJCWl0MTY4OiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi50aXRsZTEwMCBoMSIpLnRleHQoKSwKCQkJCQkJCWlzYm46ICIiCgkJCQkJCX0KCQkJCQl9LAoJCQkJCXBjb25saW5lOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5wcm8tdGl0IC5uYW1lIikudGV4dCgpLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJcGNwb3A6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiLnRpdDEgaDEiKS50ZXh0KCksCgkJCQkJCQlpc2JuOiAiIgoJCQkJCQl9CgkJCQkJfSwKCQkJCQl5b2thOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5wSW5mb19jMl9sdSBoMiIpLnRleHQoKSwKCQkJCQkJCWlzYm46ICIiCgkJCQkJCX0KCQkJCQl9LAoJCQkJCSI1NWJicyI6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiLmNwanNyaWdodF9uYW1lIGgxIikudGV4dCgpLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJb25seWxhZHk6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiLmJubmFlcl90ZXh0IikudGV4dCgpLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJIjI0ZHEiOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5nb29kc25hbWUiKS50ZXh0KCksCgkJCQkJCQlpc2JuOiAiIgoJCQkJCQl9CgkJCQkJfSwKCQkJCQlsaW5nc2hpOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIiNkZXRhaWxfYmIgaDMiKS50ZXh0KCksCgkJCQkJCQlpc2JuOiAiIgoJCQkJCQl9CgkJCQkJfSwKCQkJCQlvbmx5dHM6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiI2JyZWFkIC5sYXN0IikuZXEoMSkudGV4dCgpLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJd2lueHVhbjogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gIiI7CgkJCQkJCXRyeSB7CgkJCQkJCQllID0gcignbGk6Y29udGFpbnMoIkkgUyBCIE7vvJoiKScpLnRleHQoKS5zdWJzdHIoOCkKCQkJCQkJfSBjYXRjaCAodCkgewoJCQkJCQkJbi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyh0KSwgZSA9ICIiCgkJCQkJCX0KCQkJCQkJdmFyIGkgPSAiIjsKCQkJCQkJdHJ5IHsKCQkJCQkJCWkgPSByKCJtZXRhW25hbWU9J2tleXdvcmRzJ10iKS5hdHRyKCJjb250ZW50IikKCQkJCQkJfSBjYXRjaCAodCkgewoJCQkJCQkJbi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyh0KQoJCQkJCQl9CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiBpLAoJCQkJCQkJaXNibjogZQoJCQkJCQl9CgkJCQkJfSwKCQkJCQliZWlmYWJvb2s6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IHIoIiNMYWJlbElTQk4iKS50ZXh0KCk7CgkJCQkJCXJldHVybiBlID0gZS5yZXBsYWNlKC8tL2csICIiKSwgewoJCQkJCQkJbmFtZTogcigiI0xhYmVsVGl0bGUiKS50ZXh0KCksCgkJCQkJCQlpc2JuOiBlCgkJCQkJCX0KCQkJCQl9LAoJCQkJCSJzaW5hLXRlY2giOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSByKCIuemNibGswMiBoMiIpLmh0bWwoKTsKCQkJCQkJcmV0dXJuICgidW5kZWZpbmVkIiA9PSB0eXBlb2YgZSB8fCAiIiA9PSBlIHx8IG51bGwgPT0gZSkgJiYgKGUgPSByKCIuUGFydEFUaXRsZSBoMiIpLmh0bWwoKSwgKCJ1bmRlZmluZWQiID09IHR5cGVvZiBlIHx8ICIiID09IGUgfHwgbnVsbCA9PSBlKSAmJiAoZSA9IHIoIi5JbmZvIGgyIikuaHRtbCgpLCAoInVuZGVmaW5lZCIgPT0gdHlwZW9mIGUgfHwgIiIgPT0gZSB8fCBudWxsID09IGUpICYmIChlID0gcigiLnByb2R1Y3QtbmFtZSBoMSIpLmh0bWwoKSwgKCJ1bmRlZmluZWQiID09IHR5cGVvZiBlIHx8ICIiID09IGUgfHwgbnVsbCA9PSBlKSAmJiAoZSA9IHIoInRpdGxlIikuaHRtbCgpLnN1YnN0cigwLCByKCJ0aXRsZSIpLmh0bWwoKS5pbmRleE9mKCJfIikpKSkpKSwgZS5pbmRleE9mKCI8IikgPiAwICYmIChlID0gZS5zdWJzdHIoMCwgZS5pbmRleE9mKCI8IikpKSwgZSA9IGUucmVwbGFjZSgiJm5ic3A7IiwgIiIpLCB7CgkJCQkJCQluYW1lOiBlLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJInNpbmEtYmFieSI6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiLmRwX2luZm9fdGl0bGUiKS50ZXh0KCksCgkJCQkJCQlpc2JuOiAiIgoJCQkJCQl9CgkJCQkJfSwKCQkJCQkic2luYS1lbGFkaWVzIjogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIuYmxrMDEgaDEiKS50ZXh0KCksCgkJCQkJCQlpc2JuOiAiIgoJCQkJCQl9CgkJCQkJfSwKCQkJCQkic29odS1pdCI6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiLnRpbCBoMiIpLnRleHQoKSwKCQkJCQkJCWlzYm46ICIiCgkJCQkJCX0KCQkJCQl9LAoJCQkJCSJzb2h1LXdvbWVuIjogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIuciBoMiBzcGFuIikudGV4dCgpLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJIjE2My1kaWdpIjogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gcigiLmNvbEEgaDMiKS50ZXh0KCk7CgkJCQkJCXJldHVybiAoInVuZGVmaW5lZCIgPT0gdHlwZW9mIGUgfHwgbnVsbCA9PSBlIHx8ICIiID09IGUpICYmIChlID0gcigiLmNvbEEgaDEiKS50ZXh0KCkpLCB7CgkJCQkJCQluYW1lOiBlLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJIjE2My1sYWR5IjogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIuZGV0YWlsYm94LW1haW4gaDEiKS50ZXh0KCksCgkJCQkJCQlpc2JuOiAiIgoJCQkJCQl9CgkJCQkJfSwKCQkJCQkicXEtZGlnaSI6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IHIoIi50b3BfaGQgaDIiKS50ZXh0KCk7CgkJCQkJCXJldHVybiAoInVuZGVmaW5lZCIgPT0gdHlwZW9mIGUgfHwgIiIgPT0gZSB8fCBudWxsID09IGUpICYmIChlID0gcigiLmZvbnQwNzUxIHNwYW4iKS50ZXh0KCkpLCB7CgkJCQkJCQluYW1lOiBlLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJInFxLWhlYSI6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IHIoIiNwZFNob3cgaDEiKS50ZXh0KCk7CgkJCQkJCXJldHVybiAoInVuZGVmaW5lZCIgPT0gdHlwZW9mIGUgfHwgIiIgPT0gZSB8fCBudWxsID09IGUpICYmIChlID0gcigiI3BkU2hvdyAubG9uZ05hbWUiKS50ZXh0KCkpLCB7CgkJCQkJCQluYW1lOiBlLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJInFxLWxhZHkiOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSByKCIucHJvX2luZm8gLnRpdGxlIikudGV4dCgpOwoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogZSwKCQkJCQkJCWlzYm46ICIiCgkJCQkJCX0KCQkJCQl9LAoJCQkJCXZpcHNob3A6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IGZ1bmN0aW9uKCkgewoJCQkJCQkJCXZhciBlOwoJCQkJCQkJCWlmICh3aW5kb3cuT192aWV3ZWQpIGUgPSB7CgkJCQkJCQkJCWNhdF9pZDogd2luZG93Lk9fdmlld2VkLmNhdGVnb3J5X2lkLAoJCQkJCQkJCQljYXRfbmFtZTogd2luZG93Lk9fdmlld2VkLmNhdGVnb3J5X25hbWUKCQkJCQkJCQl9OwoJCQkJCQkJCWVsc2UgewoJCQkJCQkJCQl2YXIgdCA9IHIoIiNKLWJvdHRvbS1hZENvZGUiKS5uZXh0KCkudGV4dCgpOwoJCQkJCQkJCQl0IHx8ICh0ID0gcigiI0pfdG9wYmFyX3BvcF90ZW1wbGF0ZSIpLm5leHQoKS50ZXh0KCkpLCB0ID0gL3ZhciBPX3ZpZXdlZCA9IHsoW1xzXFNdKj8pfS8uZXhlYyh0KSwgdCAmJiAodCA9IHRbMV0pOwoJCQkJCQkJCQl2YXIgbiA9IC8nY2F0ZWdvcnlfaWQnIDogJyhcZCspJy8uZXhlYyh0KTsKCQkJCQkJCQkJbiAmJiAobiA9IG5bMV0pOwoJCQkJCQkJCQl2YXIgaSA9IC8nY2F0ZWdvcnlfbmFtZScgOiAnKC4qPyknLy5leGVjKHQpOwoJCQkJCQkJCQlpICYmIChpID0gaVsxXSksIGUgPSB7CgkJCQkJCQkJCQljYXRfbmFtZTogaSwKCQkJCQkJCQkJCWNhdF9pZDogbgoJCQkJCQkJCQl9CgkJCQkJCQkJfQoJCQkJCQkJCXJldHVybiBlCgkJCQkJCQl9LAoJCQkJCQkJdCA9IGUoKSwKCQkJCQkJCWkgPSAiIjsKCQkJCQkJdHJ5IHsKCQkJCQkJCWkgPSByKCIuYnRfbGF5b3V0IGxpOmNvbnRhaW5zKCfllYblk4HlkI3np7AnKSAuYnRfbHRfcGFyX3AiKS50ZXh0KCkKCQkJCQkJfSBjYXRjaCAoYSkgewoJCQkJCQkJbi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyhhKQoJCQkJCQl9CgkJCQkJCWlmICgiIiA9PSBpKSB0cnkgewoJCQkJCQkJaSA9IHIudHJpbShyKCIucHJvX2luZm8gLmdvb2RzX3Byb3RpdCIpLnRleHQoKSkKCQkJCQkJfSBjYXRjaCAoYSkgewoJCQkJCQkJbi5kZWJ1ZyAmJiBjb25zb2xlLmxvZyhhKQoJCQkJCQl9CgkJCQkJCWlmICgiIiA9PSBpKSB0cnkgewoJCQkJCQkJaSA9IHIoIi5idF90aXRsZSIpLnRleHQoKS5yZXBsYWNlKC8oPzpcbnxcdHxccykvZ2ksICIiKQoJCQkJCQl9IGNhdGNoIChhKSB7CgkJCQkJCQluLmRlYnVnICYmIGNvbnNvbGUubG9nKGEpCgkJCQkJCX0KCQkJCQkJcmV0dXJuIHsKCQkJCQkJCXByaWNlOiByKCIucGJveC1wcmljZSBlbSIpLnRleHQoKSwKCQkJCQkJCW5hbWU6IGksCgkJCQkJCQlpc2JuOiAiIiwKCQkJCQkJCWNhdF9pZDogdC5jYXRfaWQsCgkJCQkJCQljYXRfbmFtZTogdC5jYXRfbmFtZSwKCQkJCQkJCWJyYW5kX3N0cmluZzogcigiLnBpYi10aXRsZS1jbGFzcyBhIikudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWoxOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5wcm9kdWN0YXJlYS1yaWdodC0xIEgxIikudGV4dCgpLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJeW91Z291OiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCk7CgkJCQkJCXJldHVybiBlLm5hbWUgPSByKCIuZ29vZHNDb24gIC5mMTYiKS50ZXh0KCksICIiID09IGUubmFtZSAmJiAoZS5uYW1lID0gcigiLmdvb2RzQ29uIGgxIikudGV4dCgpLnJlcGxhY2UoL1xzL2csICIiKSksIHIoIiN5aXRpYW5QcmljZSIpICYmIChlLnByaWNlID0gcigiI3lpdGlhblByaWNlIikudGV4dCgpKSwgZQoJCQkJCX0sCgkJCQkJanhkeWY6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiLnByb2R1Y3QgLnByb19uYW1lIikudGV4dCgpLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJeWFvZmFuZzogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gcigiLnByb190aXRsZSIpLmh0bWwoKTsKCQkJCQkJcmV0dXJuIGUuaW5kZXhPZigiPCIpID4gMCAmJiAoZSA9IGUuc3Vic3RyKDAsIGUuaW5kZXhPZigiPCIpKSksIHsKCQkJCQkJCW5hbWU6IGUsCgkJCQkJCQlpc2JuOiAiIgoJCQkJCQl9CgkJCQkJfSwKCQkJCQl0aWFudGlhbjogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIuZGV0YWlsX21ieCAuY19lZCIpLnRleHQoKSwKCQkJCQkJCWlzYm46ICIiCgkJCQkJCX0KCQkJCQl9LAoJCQkJCSJ0aWFudGlhbi10dWFuIjogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQl0cnkgewoJCQkJCQkJZS5uYW1lID0gcigndGQ6Y29udGFpbnMoIuWVhuWTgeWQjeensCIpK3RkIHNwYW4nKS50ZXh0KCksIGUucHJpY2UgPSByKCIuYnV5X3ByaSIpLnRleHQoKS5tYXRjaCgvWzAtOS5dKy8pWzBdCgkJCQkJCX0gY2F0Y2ggKHQpIHsKCQkJCQkJCW4uZGVidWcgJiYgY29uc29sZS5sb2codCkKCQkJCQkJfQoJCQkJCQlyZXR1cm4gZQoJCQkJCX0sCgkJCQkJeWlndW86IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogci50cmltKHIoIi5tYWluIC5jcG5hbWUgaDEiKS50ZXh0KCkpLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJaml1eGlhbjogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQlyZXR1cm4gZS5uYW1lID0gcigiLmRtYWluQm94IC5kZXRhaWwtZGVwaWN0IC5kZXBpY3QtbmFtZSBoMSIpLnRleHQoKSwgIiIgPT0gZS5uYW1lICYmIChlLm5hbWUgPSByKCIuZGV0YWlsTmFtZSBoMiIpLnRleHQoKS5yZXBsYWNlKCIo56eB5Lq65a6a5Yi2KSIsICIiKSksIGUucHJpY2UgPSByKCIjX25vd1ByaWNlU3RyIikudGV4dCgpLCBlCgkJCQkJfSwKCQkJCQkibWVpbGVsZS10dWFuIjogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQllLm5hbWUgPSByKCIjSlNfdGdfZ29vZHNfbmFtZSIpLnRleHQoKTsKCQkJCQkJdmFyIHQgPSByKCIjSlNfYm5yX3N0YXRlIikudGV4dCgpLm1hdGNoKC9bMC05XSsvKTsKCQkJCQkJcmV0dXJuIHQgJiYgKGUucHJpY2UgPSB0WzBdKSwgZQoJCQkJCX0sCgkJCQkJZWhhaWVyOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCk7CgkJCQkJCXJldHVybiBlLm5hbWUgPSByKCIuYS1wcm9kdWN0LXRpdGxlIikudGV4dCgpLCBlLnByaWNlID0gcigiLnByaWNldGFnIC5jdXItcHJpY2UiKS50ZXh0KCkubWF0Y2goL1swLTldKy8pWzBdLCBlCgkJCQkJfSwKCQkJCQl1bGU6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IGQoKTsKCQkJCQkJcmV0dXJuIGUubmFtZSA9IHIoIi5wcm9kdWN0SW5mbyBoMSIpLnRleHQoKSwgZS5wcmljZSA9IHIoIi5wcm9kdWN0UHJpY2UgLnByaWNlIHN0cm9uZyIpLnRleHQoKSwgZQoJCQkJCX0sCgkJCQkJZXNwcml0OiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCk7CgkJCQkJCXJldHVybiBlLm5hbWUgPSByKCIjaXRlbU5hbWUiKS50ZXh0KCkucmVwbGFjZSgvXHMvZywgIiIpLCBlLnByaWNlID0gcigiI3BkcFByaWNlIikudGV4dCgpLnJlcGxhY2UoL1vvv6XCpV0rLywgIiIpLCBlCgkJCQkJfSwKCQkJCQlsaW5pbmc6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IGQoKTsKCQkJCQkJcmV0dXJuIGUubmFtZSA9IHIoIiNwcm9kdWN0X25hbWUiKS50ZXh0KCkucmVwbGFjZSgvXHMvZywgIiIpLCBlLnByaWNlID0gcigiI29mZmVyUHJpY2UgLnYiKS50ZXh0KCkucmVwbGFjZSgvW1xz77+lwqVdL2csICIiKSwgZQoJCQkJCX0sCgkJCQkJb3llYWg6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9ICIiOwoJCQkJCQl0cnkgewoJCQkJCQkJZSA9IHIoIm1ldGFbbmFtZT0nS2V5d29yZHMnXSIpLmF0dHIoImNvbnRlbnQiKQoJCQkJCQl9IGNhdGNoICh0KSB7CgkJCQkJCQluLmRlYnVnICYmIGNvbnNvbGUubG9nKHQpCgkJCQkJCX0KCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IGUsCgkJCQkJCQlpc2JuOiAiIgoJCQkJCQl9CgkJCQkJfSwKCQkJCQlsdnlvdW1hbGw6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigibWV0YVtuYW1lPSdrZXl3b3JkcyddIikuYXR0cigiY29udGVudCIpLAoJCQkJCQkJaXNibjogIiIKCQkJCQkJfQoJCQkJCX0sCgkJCQkJbGVmZW5nOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSAiIiwKCQkJCQkJCXQgPSAiIjsKCQkJCQkJdHJ5IHsKCQkJCQkJCWUgPSByLnRyaW0ocigiLnBhdGgiKS50ZXh0KCkuc3BsaXQoIi8iKS5wb3AoKSksIHQgPSAiaHR0cDovL3Byb2R1Y3QubGVmZW5nLmNvbS9wcm9kdWN0LyIgKyByKCIjcHJvZHVjdElkIikudmFsKCkgKyAiLmh0bWwiCgkJCQkJCX0gY2F0Y2ggKGkpIHsKCQkJCQkJCW4uZGVidWcgJiYgY29uc29sZS5sb2coaSkKCQkJCQkJfQoJCQkJCQl2YXIgYSA9IHsKCQkJCQkJCXVybDogdCwKCQkJCQkJCW5hbWU6IGUsCgkJCQkJCQlpc2JuOiAiIgoJCQkJCQl9OwoJCQkJCQlyZXR1cm4gbi5kcC5wcmljZSB8fCAoYS5wcmljZSA9IHIoIi5kaXR5LXByaWNlLWMiKS50ZXh0KCkpLCBhCgkJCQkJfSwKCQkJCQl3YmlhbzogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gZCgpOwoJCQkJCQl0cnkgewoJCQkJCQkJZS5uYW1lID0gcigiI2luZm9fb25fc2FsZSBoMSIpLnRleHQoKSwgZS5wcmljZSA9IHIoIiNwcmljZSIpLnRleHQoKS5tYXRjaCgvWzAtOS5dKy8pWzBdCgkJCQkJCX0gY2F0Y2ggKHQpIHsKCQkJCQkJCW4uZGVidWcgJiYgY29uc29sZS5sb2codCkKCQkJCQkJfQoJCQkJCQlyZXR1cm4gZQoJCQkJCX0sCgkJCQkJYmFuZ2dvOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBkKCk7CgkJCQkJCXRyeSB7CgkJCQkJCQllLm5hbWUgPSByKCIubWJzaG9wX2RldGFpbF9wZGJyYW5kIGEiKS50ZXh0KCkgKyByKCIubWJzaG9wX2RldGFpbF9wZG5hbWUiKS50ZXh0KCkucmVwbGFjZSgvXHMvZywgIiIpLCBlLnByaWNlID0gcigiI3NhbGVQcmljZVRleHQiKS50ZXh0KCkubWF0Y2goL1swLTkuXSsvKVswXQoJCQkJCQl9IGNhdGNoICh0KSB7CgkJCQkJCQluLmRlYnVnICYmIGNvbnNvbGUubG9nKHQpCgkJCQkJCX0KCQkJCQkJcmV0dXJuIGUKCQkJCQl9LAoJCQkJCXlvaG9idXk6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IGQoKTsKCQkJCQkJdHJ5IHsKCQkJCQkJCWUucHJpY2UgPSByKCIucHJpY2Utc2FsZSIpLnRleHQoKS5tYXRjaCgvWzAtOS4sXSsvKVswXQoJCQkJCQl9IGNhdGNoICh0KSB7CgkJCQkJCQluLmRlYnVnICYmIGNvbnNvbGUubG9nKHQpCgkJCQkJCX0KCQkJCQkJcmV0dXJuIGUKCQkJCQl9LAoJCQkJCXN1bmRhbjogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIjYnV5X2Zvcm0gZGl2LmJveD5kaXYubmctaW5mbz5oMiIpLnRleHQoKSwKCQkJCQkJCXByaWNlOiByKCIjYnV5X2Zvcm0gZGl2LmJveD5kaXYubmctc2l6ZSBzcGFuLnByaWNlIikudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWppYWU6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiI2NvbnRlbnQgZGl2Lml0ZW0taW50cm8+ZGl2LnByb3BlcnR5PmgxIikudGV4dCgpLAoJCQkJCQkJcHJpY2U6IHIoIiNjb250ZW50IGRpdi5pdGVtLWludHJvPmRpdi5wcm9wZXJ0eSAuaXRlbURldGFpbC1pdGVtUHJpY2Ugc3Bhbi5qLWl0ZW0tbm93LXByaWNlIikudGV4dCgpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCXphemhpcHU6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJbmFtZTogcigiLmljX2NvbnRlbnQgZGl2LmdyaWRfbSBkaXYueGJhc2Vfcm93MT5oMSIpLnRleHQoKSwKCQkJCQkJCXByaWNlOiByKCIuaWNfY29udGVudCBkaXYuZ3JpZF9tIGRpdi54YmFzZV9yb3cyIHNwYW4ubW9kX3ByaWNlIikudGV4dCgpLnNwbGl0KCLvv6UiKVsyXS5zcGxpdCgiLiIpWzBdCgkJCQkJCX0KCQkJCQl9LAoJCQkJCW1pY3Jvc29mdHN0b3JlOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSByKCIjaW5uZXIgZGl2LnBkcENvbnRlbnQ+ZGl2LnBkcEluZm8+LnBkcF9tb2R1bGVfaW5mbz5kaXYudGl0bGU+aDEiKS50ZXh0KCkgfHwgcigiI2lubmVyIGRpdi5jb250ZW50LWJsb2NrIC5yaWdodCBoMi50aXRsZSIpLnRleHQoKSwKCQkJCQkJCXQgPSByKCIjaW5uZXIgZGl2LnBkcENvbnRlbnQ+ZGl2LnBkcEluZm8+LnBkcF9tb2R1bGVfaW5mbz4ucHJpY2VBbmRSYW5rPmRpdi5wcmljZT5zcGFuLmN1cnJlbnQiKS50ZXh0KCkgfHwgcigiI3NlbGVjdFZhcmlhbnRQcm9kdWN0IHNwYW4ucHJpY2UiKS50ZXh0KCk7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiBlLAoJCQkJCQkJcHJpY2U6IHQKCQkJCQkJfQoJCQkJCX0sCgkJCQkJeGdkcTogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiB7CgkJCQkJCQluYW1lOiByKCIucHJvZHVjdC1tYWluIC5wcm9kdWN0LXRpdGxlcz5oMiIpLnRleHQoKSwKCQkJCQkJCXByaWNlOiByKCIucHJvZHVjdC1tYWluIC5wcm9kdWN0LWNvbmNlcm5zIGxpOmZpcnN0IC5hY3Rpb24tcHJpY2UiKS50ZXh0KCkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJeHRlcDogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gcigiLmdvb2RzRGV0YWlsc0JveCAuZ29vZHNQcmljZT5kdCIpLnRleHQoKSwKCQkJCQkJCXQgPSByKCIuZ29vZHNEZXRhaWxzQm94IC5nb29kc1ByaWNlIGRkPnVsPmxpPmRpdjpmaXJzdD5zcGFuIikudGV4dCgpOwoJCQkJCQlyZXR1cm4gZSAmJiB0IHx8IChlID0gcigiLndyYXBwZXIgLmdyb3VwVGl0dGxlIikudGV4dCgpLCB0ID0gcigiLndyYXBwZXIgLmdyb3VwUHJpY2VCb3g+YT5zcGFuIikudGV4dCgpKSwgewoJCQkJCQkJbmFtZTogZSwKCQkJCQkJCXByaWNlOiB0CgkJCQkJCX0KCQkJCQl9LAoJCQkJCW1pZGVhOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW5hbWU6IHIoIi5wcm9kdWN0X3dyYXA+LnByb2R1Y3RfcmlnaHQ+aDEiKS50ZXh0KCksCgkJCQkJCQlwcmljZTogcigiLnByb2R1Y3Rfd3JhcD4ucHJvZHVjdF9yaWdodCAucHJpY2UiKS50ZXh0KCkKCQkJCQkJfQoJCQkJCX0KCQkJCX07CgkJCXQuZXhwb3J0cy5nZXQgPSBmdW5jdGlvbihlKSB7CgkJCQl2YXIgaSA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmOwoJCQkJdHJ5IHsKCQkJCQl2YXIgYSA9IHVbb10oKTsKCQkJCQlhLm9sZFByaWNlID0gYS5wcmljZSwgYS5wcmljZS5tYXRjaCgvKD86XD98XO+8nykvKSAmJiAoYS5hY3RpdmVQcmljZSA9ICEwKSwgYS5wcmljZSA9IGMoYS5wcmljZSksIGEub2xkUHJpY2UgPSBjLmdldFByaWNlQmVmb3JlRXhjaGFuZ2VSYXRlKGEub2xkUHJpY2UpLCBhLnNpdGUgPSBvLCBudWxsID09IGEudXJsICYmIChudWxsICE9IGEuaHJlZiA/IGEudXJsID0gYS5ocmVmIDogYS51cmwgPSBpKQoJCQkJfSBjYXRjaCAocykgewoJCQkJCW4uZGVidWcgJiYgY29uc29sZS5sb2cocyk7CgkJCQkJdmFyIGEgPSBkKCk7CgkJCQkJYS5zaXRlID0gbywgYS51cmwgPSBpCgkJCQl9CgkJCQlyZXR1cm4gInVuZGVmaW5lZCIgIT0gdHlwZW9mIGEudXNlbGVzcyAmJiBhLnVzZWxlc3MgPyBudWxsIDogKGEuaWNvbiA9IGEudXJsLnJlcGxhY2UoL15odHRwW3NdP1w6XC9cLy9nLCAiIiksIGEuaWNvbiA9IGEuaWNvbi5yZXBsYWNlKC9cLy4qPyQvZywgIiIpLCBhLmljb24gKz0gIi9mYXZpY29uLmljbyIsICgidW5kZWZpbmVkIiA9PSB0eXBlb2YgYS5pZCB8fCBudWxsID09IGEuaWQpICYmIChhLmlkID0gIiIpLCAoInVuZGVmaW5lZCIgPT0gdHlwZW9mIGEua2V5d29yZCB8fCBudWxsID09IGEua2V5d29yZCkgJiYgKGEua2V5d29yZCA9ICIiKSwgKCJ1bmRlZmluZWQiID09IHR5cGVvZiBhLnNrZXl3b3JkIHx8IG51bGwgPT0gYS5za2V5d29yZCkgJiYgKGEuc2tleXdvcmQgPSAiIiksICgidW5kZWZpbmVkIiA9PSB0eXBlb2YgYS5pc2JuIHx8IG51bGwgPT0gYS5pc2JuKSAmJiAoYS5pc2JuID0gIiIpLCAoInVuZGVmaW5lZCIgPT0gdHlwZW9mIGEubmFtZSB8fCAiIiA9PSBhLm5hbWUpICYmIChhLm5hbWUgPSByKCJ0aXRsZSIpLmh0bWwoKSksIG4uZHAgPSBhLCAhYS5wcmljZSAmJiAyID4gbCA/IChsKyssIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJdC5leHBvcnRzLmdldChlKQoJCQkJfSwgNTAwKSkgOiBlICYmIGUoKSwgYSkKCQkJfQoJCX0pLmNhbGwobiwgaSgxKSkKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJInVzZSBzdHJpY3QiOwoJCWUuZXhwb3J0cyA9IGZ1bmN0aW9uKGUpIHsKCQkJdmFyIHQsIG4gPSAwLAoJCQkJaSA9IDA7CgkJCWlmIChlID0gZS50b1N0cmluZygpLCBlLmxlbmd0aCA+IDEwKSByZXR1cm4gZTsKCQkJdmFyIGEgPSBlLnNsaWNlKDAsIDkpOwoJCQlhID0gIjk3OCIgKyBhOwoJCQlmb3IgKHZhciBvID0gMDsgbyA8IGEubGVuZ3RoOyBvKyspIG8gJSAyID09PSAwID8gbiArPSBOdW1iZXIoYVtvXSkgOiBpICs9IE51bWJlcihhW29dKSwgdCA9IDEwIC0gKG4gKyAzICogaSkgJSAxMDsKCQkJcmV0dXJuIGEgKz0gdC50b1N0cmluZygpCgkJfQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQl2YXIgaTsKCQkoZnVuY3Rpb24oYSwgbykgewoJCQkidXNlIHN0cmljdCI7CgkJCWkgPSBmdW5jdGlvbigpIHsKCQkJCXZhciBlID0gbig1NyksCgkJCQkJdCA9IG4oNTgpLAoJCQkJCWkgPSBuKDU5KSwKCQkJCQlyID0gbigxNyksCgkJCQkJcyA9IG4oNjgpLAoJCQkJCWwgPSAobigyOCksIG4oOSkpLAoJCQkJCWMgPSBuKDI2KSwKCQkJCQlkID0gbig3MCksCgkJCQkJcCA9IG4oNzEpLAoJCQkJCWggPSBuKDcyKSwKCQkJCQl1ID0gbigyNyk7CgkJCQlyZXR1cm4gbig3MyksIHsKCQkJCQlpbml0OiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSB0aGlzOwoJCQkJCQkiZWFzZWV5ZXMiID09IGEuc2l0ZSAmJiBkZWxldGUgT2JqZWN0LnByb3RvdHlwZS50b0pTT05TdHJpbmcsIG8oImh0bWwiKS5hZGRDbGFzcyhhLmV4dEJyYW5kICsgIl8iICsgYS5zaXRlKSwgbygiaHRtbCIpLmFkZENsYXNzKGEuZXh0QnJhbmQgKyAiX3ZlcnNpb25fIiArIGEuZnJvbV9kZXZpY2UpLCBhLnRyaWdnZXIoInZpc2l0UGFnZSIpLCBjKCJ2aXNpdCIpLCBuKDkwKSgpLCBjKCJwYWdlX3ZpZXc6IiArIGEuc2l0ZSksIDEgPT0gYS5wYWdlSW5mby50eXBlID8gKHRoaXMuc2l0ZV9zZWFyY2goKSwgYS50cmlnZ2VyKCJwYWdlVHlwZT0xIiksIG4oOTEpLmluaXQoKSkgOiAyID09IGEucGFnZUluZm8udHlwZSAmJiAoIjM2MGJ1eSIgPT0gYS5zaXRlICYmICJsdXlvdSIgIT09IGEuYnR5cGUgPyAhIGZ1bmN0aW9uKCkgewoJCQkJCQkJdmFyIHQgPSBlOwoJCQkJCQkJbig1MykoZnVuY3Rpb24oKSB7CgkJCQkJCQkJdC5zaXRlX2RwKCkKCQkJCQkJCX0pCgkJCQkJCX0oKSA6IHRoaXMuc2l0ZV9kcCgpLCBhLnRyaWdnZXIoInBhZ2VUeXBlPTIiKSkKCQkJCQl9LAoJCQkJCWlzX3Rhb2JhbzogZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiAidGFvYmFvIiA9PSBhLnNpdGUgfHwgInRtYWxsIiA9PSBhLnNpdGUKCQkJCQl9LAoJCQkJCWdldF9icm93c2VyX2luZm86IGZ1bmN0aW9uKCkgewoJCQkJCQlhLndpZHRoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoID4gMCA/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCA6IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGgsIGEuaGVpZ2h0ID0gInVuZGVmaW5lZCIgIT0gdHlwZW9mIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCA+IDAgPyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IDogZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQsICJhbWF6b24iID09IGEuc2l0ZSAmJiAoYS5oZWlnaHQgPSBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KQoJCQkJCX0sCgkJCQkJZ2V0VGFvYmFvSWRJbmZvOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSAiIiwKCQkJCQkJCXQgPSBbXTsKCQkJCQkJaWYgKCJ0YW9iYW8iID09IGEuc2l0ZSAmJiBvKCIuSl9QaWNCb3ggLnNpbWlsYXJzIGEiKSkgewoJCQkJCQkJZm9yICh2YXIgbiA9IG8oIi5KX1BpY0JveCAuc2ltaWxhcnMgYVtocmVmXTpjb250YWlucyjlkIzmrL4pIiksIGkgPSBuLmxlbmd0aCwgciA9IC91bmlxcGlkPShbXiZdKykmPy9pLCBzID0gLyZuaWQ9KFteJl0rKSY/L2ksIGwgPSAwOyBpID4gbDsgbCsrKSB7CgkJCQkJCQkJdmFyIGMgPSB7fSwKCQkJCQkJCQkJZCA9IG5bbF0uaHJlZjsKCQkJCQkJCQlpZiAoIWQpIHJldHVybjsKCQkJCQkJCQl2YXIgcCA9IGQubWF0Y2gociksCgkJCQkJCQkJCWggPSBkLm1hdGNoKHMpOwoJCQkJCQkJCXAgJiYgcC5sZW5ndGggJiYgKGMudW5pcSA9IHBbMV0pLCBoICYmIGgubGVuZ3RoICYmIChjLmlkID0gaFsxXSksIHQucHVzaChjKQoJCQkJCQkJfQoJCQkJCQkJZSA9ICImdW5pcXBpZD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHQpKQoJCQkJCQl9CgkJCQkJCWlmICgicy50YW9iYW8uY29tIiA9PSBsb2NhdGlvbi5ob3N0ICYmIGxvY2F0aW9uLmhyZWYuaW5kZXhPZigic2FtZXN0eWxlIikgPiAtMSAmJiBsb2NhdGlvbi5ocmVmLmluZGV4T2YoInVuaXFwaWQiKSA+IC0xKSB7CgkJCQkJCQl2YXIgdSA9IGxvY2F0aW9uLmhyZWYubWF0Y2goL3VuaXFwaWQ9KFteJl0rKSY/L2kpLAoJCQkJCQkJCW0gPSBvKCIjaTJpLXJlY2l0ZW0gLnJlY2l0ZW0gLmluZm9fX2l0ZW1hbmNob3IiKSwKCQkJCQkJCQlpID0gbS5sZW5ndGgsCgkJCQkJCQkJZiA9IC9bPyZdaWQ9KFswLTldKykvOwoJCQkJCQkJdSAmJiB1Lmxlbmd0aCAmJiAodSA9IHVbMV0pOwoJCQkJCQkJZm9yICh2YXIgbCA9IDA7IGkgPiBsOyBsKyspIHsKCQkJCQkJCQl2YXIgZCA9IG1bbF0uaHJlZjsKCQkJCQkJCQlpZiAoIWQpIHJldHVybjsKCQkJCQkJCQl2YXIgZyA9IGQubWF0Y2goZik7CgkJCQkJCQkJZyAmJiBnLmxlbmd0aCAmJiB0LnB1c2goZ1sxXSkKCQkJCQkJCX0KCQkJCQkJCXZhciBfID0gewoJCQkJCQkJCXVuaXE6IHUsCgkJCQkJCQkJaWQ6IHQKCQkJCQkJCX07CgkJCQkJCQllID0gIiZzYW1lc3R5bGVJZD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KF8pKQoJCQkJCQl9CgkJCQkJCXJldHVybiBlCgkJCQkJfSwKCQkJCQlzaXRlX3NlYXJjaDogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gdGhpcywKCQkJCQkJCXQgPSBhLmR2YWw7CgkJCQkJCW8odCkubGVuZ3RoID4gMCB8fCAoL3NlYXJjaFwuamRcLmNvbS8udGVzdChsb2NhdGlvbi5ocmVmKSAmJiBvKCIubnMtY29udGVudCIpLmxlbmd0aCAmJiBjKCJ0cmFjazpqZC1zZWFyY2g6bm8tcmVzdWx0IiksIHRoaXMuZ2V0X2Jyb3dzZXJfaW5mbygpLCBsLmdldChhLnNlcnZlciArICIvYnJ3ZXh0L3Blcm1hbmVudF9pZD92ZXJzaW9uPTImZGVmYXVsdF9zdHlsZT0iICsgYS5kZWZhdWx0X3N0eWxlICsgIiZyZWZlcnJlcj0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGRvY3VtZW50LnJlZmVycmVyKSkuZG9uZShmdW5jdGlvbihpKSB7CgkJCQkJCQlyLnNldChpKSwgYS5wX2lkID0gaS5wX2lkLCBhLmlzX29wZW4gPSBpLmlzX29wZW4sIGEucG9zaXRpb24gPSBpLnBvc2l0aW9uLCBhLnN0eWxlID0gaS5zdHlsZSAmJiBvLmluQXJyYXkoaS5zdHlsZSwgWyJ0b3AiLCAiYm90dG9tIl0pID49IDAgPyBpLnN0eWxlIDogYS5kZWZhdWx0X3N0eWxlLCBhLmZvbGQgPSBpLmZvbGQsIGEuZmlyc3QgPSBpLmZpcnN0LCBhLnNob3dfbWFpbmJhciA9IGkuc2hvd19tYWluYmFyLCBhLmVtYWlsID0gaS5lbWFpbCwgYS5zaG93X3RpcCA9IGkuc2hvd190aXAsIGEuc2hvd193aXNobGlzdCA9IGkuc2hvd193aXNobGlzdCwgYS5zaG93X3Byb21vID0gaS5zaG93X3Byb21vLCBhLnNob3dfZ3Vlc3MgPSBpLnNob3dfZ3Vlc3MsIGEuc3Vic2l0ZV9pZCA9IGkuc3Vic2l0ZV9pZCwgYS5mb3JjZSA9IGkuZm9yY2UsIGEuaW1hZ2VBZCA9IGkuaW1hZ2VBZCwgYS5hYiA9IGkuYWIsIGEuYnR5cGUgfHwgKGEuc3R5bGUgPSB1LmdldEluZm8oInNldFN0eWxlIikgfHwgYS5zdHlsZSwgYS5zaG93X3RpcCA9IHUuZ2V0SW5mbygic2V0VGlwIikgfHwgYS5zaG93X3RpcCksIDEgIT0gaS5oaWRlX3Nob3B0aXAgJiYgbig5OCkuaW5pdCgpLCBuKDExMCkoKSwgaC5pbml0KCkgfHwgKG4oMTExKS5pbml0KCksIG4oMTEzKS5pbml0KCksIGEudHJpZ2dlcigicGVybWFuZW50X2lkIiksIDAgIT09IHBhcnNlSW50KGEuc2hvd19tYWluYmFyKSAmJiAwICE9PSBwYXJzZUludChhLnNob3dfdGlwKSAmJiAoKGEuaGFvMTIzIHx8ICJtYXh0aG9uIiA9PT0gYS5mcm9tX2RldmljZSkgJiYgKGEuc3R5bGUgPSAiYm90dG9tIiksIG8oImJvZHkiKS5hcHBlbmQoJzxkaXYgaWQ9IicgKyB0LnJlcGxhY2UoIiMiLCAiIikgKyAnIj48L2Rpdj4nKSwgbyh0KS5zaG93KCkuY3NzKHsKCQkJCQkJCQltYXJnaW46IDAsCgkJCQkJCQkJcGFkZGluZzogMCwKCQkJCQkJCQlib3JkZXI6IDAsCgkJCQkJCQkJZm9udDogIjE0cHgvMS42ICdNaWNyb3NvZnQgWWFIZWknLCB0YWhvbWEsIGFyaWFsLCAnU2ltU3VuJyIsCgkJCQkJCQkJY29sb3I6ICIjMDAwIiwKCQkJCQkJCQlvdmVyZmxvdzogInZpc2libGUgIWltcG9ydGFudCIKCQkJCQkJCX0pLCBkKCksIGwuZ2V0KGEuc2VydmVyICsgIi9icndleHQvc2l0ZV9zZWFyY2g/cGVybWFuZW50X2lkPSIgKyBhLnBfaWQgKyAiJnNpdGU9IiArIGEuc2l0ZSArIGUuZ2V0VGFvYmFvSWRJbmZvKCkpLmRvbmUoZnVuY3Rpb24odCkgewoJCQkJCQkJCWUuc2hvd19zZWFyY2hfYmFyKHQsIGEuc3R5bGUpCgkJCQkJCQl9KSkpCgkJCQkJCX0pKQoJCQkJCX0sCgkJCQkJc2l0ZV9kcDogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBzID0gdGhpczsKCQkJCQkJYS5kcCAmJiAoImRhbmdkYW5nIiA9PSBhLnNpdGUgJiYgbygiaGVhZCIpLmFwcGVuZCgiPG1ldGEgaHR0cC1lcXVpdj0nWC1VQS1Db21wYXRpYmxlJyBjb250ZW50PSdJRT1lZGdlJyAvPiIpLCBhLmRwLnByaWNlIHx8IChhLmRwLnByaWNlID0gZS5nZXRPbmxpbmVQcmljZShhLnNpdGUpKSwgYS5kcC5pbnZlbnRvcnkgPSB0LmluaXQoYS5zaXRlKSwgImx1eW91IiAhPSBhLmJ0eXBlICYmIG4oMTE1KS5yZWFkeSgpLCBuKDgzKS5pbml0KCksICJhbGlleHByZXNzIiA9PT0gYS5zaXRlICYmIG4oMTE2KS5pbml0KCksICgiYW1hem9uIiA9PT0gYS5zaXRlICYmICgid3d3LmFtYXpvbi5jb20iID09PSBsb2NhdGlvbi5ob3N0IHx8ICJ3d3cuYW1hem9uLmNvLmpwIiA9PT0gbG9jYXRpb24uaG9zdCkgfHwgIjZwbSIgPT09IGEuc2l0ZSkgJiYgbigxNTIpLmluaXQoKSwgdGhpcy5nZXRfYnJvd3Nlcl9pbmZvKCksIGwuZ2V0KGEuc2VydmVyICsgIi9icndleHQvcGVybWFuZW50X2lkP3ZlcnNpb249MiZzaG93X3NoYXJlPTEmcF9mb2xkPTAmZGVmYXVsdF9zdHlsZT0iICsgYS5kZWZhdWx0X3N0eWxlICsgIiZyZWZlcnJlcj0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGRvY3VtZW50LnJlZmVycmVyKSkuZG9uZShmdW5jdGlvbih0KSB7CgkJCQkJCQlpZiAoci5zZXQodCksIGEucF9pZCA9IHQucF9pZCwgYS5pc19vcGVuID0gdC5pc19vcGVuLCBhLnBvc2l0aW9uID0gdC5wb3NpdGlvbiwgYS5zdHlsZSA9IHQuc3R5bGUgJiYgby5pbkFycmF5KHQuc3R5bGUsIFsidG9wIiwgImJvdHRvbSJdKSA+PSAwID8gdC5zdHlsZSA6IGEuZGVmYXVsdF9zdHlsZSwgYS5ub3RpY2UgPSB0Lm5vdGljZSwgYS5maXJzdCA9IHQuZmlyc3QsICIiICE9PSB0LnBfZm9sZCAmJiAoYS5wX2ZvbGQgPSB0LnBfZm9sZCksIGEuZW1haWwgPSB0LmVtYWlsLCBhLnNob3dfdGlwID0gdC5zaG93X3RpcCwgYS5zaG93X3dpc2hsaXN0ID0gdC5zaG93X3dpc2hsaXN0LCBhLnNob3dfcHJvbW8gPSB0LnNob3dfcHJvbW8sIGEuc2hvd19tYWluYmFyID0gdC5zaG93X21haW5iYXIsIGEuc2hvd19ndWVzcyA9IHQuc2hvd19ndWVzcywgYS5zdWJzaXRlX2lkID0gdC5zdWJzaXRlX2lkLCBhLmZvcmNlID0gdC5mb3JjZSwgYS5pbWFnZUFkID0gdC5pbWFnZUFkLCBhLnNob3dfaGFpdGFvID0gdC5zaG93X2hhaXRhbywgYS5wb3Bfc2hhcmUgPSB0LnNoYXJlLCBhLnNlYXJjaF93YXkgPSB0LnNlYXJjaF93YXksIGEuYnR5cGUgfHwgKGEuc3R5bGUgPSB1LmdldEluZm8oInNldFN0eWxlIikgfHwgYS5zdHlsZSwgYS5zaG93X2hhaXRhbyA9IHUuZ2V0SW5mbygic2V0aGFpdGFvIikgfHwgYS5zaG93X2hhaXRhbywgYS5zaG93X3dpc2hsaXN0ID0gdS5nZXRJbmZvKCJzZXRXaXNobGlzdCIpIHx8IGEuc2hvd193aXNobGlzdCwgYS5zaG93X3Byb21vID0gdS5nZXRJbmZvKCJzZXRTaG93UHJvbW8iKSB8fCBhLnNob3dfcHJvbW8pLCBhLnRyaWdnZXIoImRwcGFnZV9wZXJtYW5lbnQiKSwgbigxMTApKCksICFoLmluaXQoKSAmJiAobigxMTEpLmluaXQoKSwgMSAhPSB0LmhpZGVfc2hvcHRpcCAmJiBuKDk4KS5pbml0KCksIGEucHJvdmluY2VfaWQgPSBlLmdldFN1YlN0YXRpb25JZChhLmRwLnNpdGUpLCAwICE9PSBhLnNob3dfbWFpbmJhciAmJiAiMCIgIT09IGEuc2hvd19tYWluYmFyKSkgewoJCQkJCQkJCXZhciBtID0gImJvZHkiOwoJCQkJCQkJCWEubWF4dGhvbl90bWFsbCAmJiAobSA9ICJodG1sIik7CgkJCQkJCQkJdmFyIGYgPSBhLmR2YWw7CgkJCQkJCQkJbyhtKS5hcHBlbmQoJzxkaXYgaWQ9IicgKyBmLnJlcGxhY2UoIiMiLCAiIikgKyAnIiA+PC9kaXY+JyksIG8oZikuc2hvdygpLCBkKCk7CgkJCQkJCQkJdmFyIGcgPSAiZHBfcXVlcnkiOwoJCQkJCQkJCSJib3R0b20iID09IGEuc3R5bGUgJiYgKGcgPSAicHJvZHVjdCIpOwoJCQkJCQkJCXZhciBfID0gYS5kZWJ1ZyA/ICImZGVidWc9MSIgOiAiIjsKCQkJCQkJCQlhLm5vUmVhbFByaWNlICYmIChhLmRwLnByaWNlID0gMCk7CgkJCQkJCQkJdmFyIHggPSBhLnNlcnZlciArICIvYnJ3ZXh0LyIgKyBnICsgIj9wZXJtYW5lbnRfaWQ9IiArIGEucF9pZCArICImdW5pb249IiArIGVuY29kZVVSSUNvbXBvbmVudChhLnVuaW9uKSArICImdXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQoYS5kcC51cmwpICsgIiZzaXRlPSIgKyBhLmRwLnNpdGUgKyAiJmlzYm49IiArIGEuZHAuaXNibiArICImbmFtZT0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGEuZHAubmFtZSkgKyAiJmtleXdvcmQ9IiArIGVuY29kZVVSSUNvbXBvbmVudChhLmRwLmtleXdvcmQpICsgIiZza2V5d29yZD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGEuZHAuc2tleXdvcmQpICsgIiZpZD0iICsgYS5kcC5pZCArICImcHJpY2U9IiArIGEuZHAucHJpY2UgKyAiJnN0b2NrPSIgKyBhLmRwLmludmVudG9yeSArICImcHJvdmluY2VfaWQ9IiArIGEucHJvdmluY2VfaWQgKyAiJnN1YnNpdGVfaWQ9IiArIGEuc3Vic2l0ZV9pZCArICImY2F0X2lkPSIgKyAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIGEuZHAuY2F0X2lkID8gYS5kcC5jYXRfaWQgOiAiIikgKyAiJnBpYz0iICsgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiBhLmRwLnBpYyA/IGVuY29kZVVSSUNvbXBvbmVudChhLmRwLnBpYykgOiAiIikgKyAiJnVzZXJpZD0iICsgYS5kcC51c2VyaWQgKyAiJnNob3BfbmFtZT0iICsgYS5kcC5zaG9wX25hbWUgKyAiJnNob3BfYWRkcmVzPSIgKyBhLmRwLnNob3BfYWRkcmVzICsgIiZjYXRfbmFtZT0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGEuZHAuY2F0X25hbWUpICsgIiZicmFuZF9zdHJpbmc9IiArIGVuY29kZVVSSUNvbXBvbmVudChhLmRwLmJyYW5kX3N0cmluZykgKyBfOwoJCQkJCQkJCWwuZ2V0KHgpLmRvbmUoZnVuY3Rpb24oZSkgewoJCQkJCQkJCQlpZiAoYS50cmlnZ2VyKCJtYWluOmdldF9kcF9kYXRhIiwgZSksIHAuc2V0KCJkcF9kYXRhIiwgZSksIGEuZGVidWcgJiYgd2luZG93LmNvbnNvbGUgJiYgY29uc29sZS5sb2coZSksIGEuc2F2ZV9kcF9xdWVyeSA9IGUsIGkuaW5pdCgpLCBhLmRwSXNCb29rID0gZSAmJiBlLmV4YWN0X2FyciAmJiBlLmV4YWN0X2Fyci5pc2JuLCBuKDgyKS5yZWFkeSgpLCBuKDE1NCkubG9nRHBJbmZvKHsKCQkJCQkJCQkJCXBpZDogYS5wX2lkLAoJCQkJCQkJCQkJcmVmZXJVcmw6IGRvY3VtZW50LnJlZmVycmVyLAoJCQkJCQkJCQkJcHJpY2U6IGUubm93LnByaWNlIHx8IGEuZHAucHJpY2UsCgkJCQkJCQkJCQljbGFzc19pZDogZS5ub3cuY2xhc3NfaWQsCgkJCQkJCQkJCQlicmFuZF9pZDogZS5leGFjdF9hcnIuYnJhbmRfaWQKCQkJCQkJCQkJfSksIGMoImNhdGVnb3J5OiIgKyBhLnNpdGUgKyAiOiIgKyBlLm5vdy5ub3dfZHBfaWQgKyAiLyIgKyBlLm5vdy5jbGFzc19pZCArICIvIiksIGEud2hlcmVfYnV5X2RwcyA9IGUgJiYgZS5iMmMgJiYgZS5iMmMuYWxsX2RwX2lkcyB8fCAiIiwgYS53aGVyZV9idXlfZHBzKSB7CgkJCQkJCQkJCQlmb3IgKHZhciB0ID0gYS53aGVyZV9idXlfZHBzLnNwbGl0KCJ8IiksIG8gPSAiMC0wIiwgciA9IDA7IHIgPCB0Lmxlbmd0aCAmJiAhKHIgPiA2KTsgcisrKSBvICs9ICIsIiwgbyArPSB0W3JdOwoJCQkJCQkJCQkJYS53aGVyZV9idXlfZHBzID0gbwoJCQkJCQkJCQl9CgkJCQkJCQkJCWEuY29sbGVjdEluZm8gPSBlLmNvbGxlY3RJbmZvLCBhLm5vd19kcF9pZCA9IHMuaXNfdGFvYmFvKCkgPyBlICYmIGUuZXhhY3RfYXJyICYmIGUuZXhhY3RfYXJyLnRhb2Jhb19zYW1lX2lkIDogZSAmJiBlLm5vdyAmJiBlLm5vdy5ub3dfZHBfaWQsIGEuc2l0ZV9pZCA9IGUubm93LnNpdGVfaWQsIHMuc2hvd19kcF9iYXIoZSwgYS5zdHlsZSkKCQkJCQkJCQl9KQoJCQkJCQkJfQoJCQkJCQl9KSkKCQkJCQl9LAoJCQkJCXNob3dfc2VhcmNoX2JhcjogZnVuY3Rpb24oZSwgdCkgewoJCQkJCQl2YXIgaSA9IG4oMTEpOwoJCQkJCQlpZiAobig2MSkuaW5pdCgpLCBpLmNoZWNrKCkgJiYgImx1eW91IiA9PSBhLmJ0eXBlKSB7CgkJCQkJCQluKDE1NSkuaW5pdChlKTsKCQkJCQkJCXRyeSB7CgkJCQkJCQkJbigyMDIpLmluaXQoKQoJCQkJCQkJfSBjYXRjaCAobykge30KCQkJCQkJfSBlbHNlICJib3R0b20iID09IHQgPyBuKDIwNSkucmVuZGVyU2VhcmNoKCkgOiAoInVuZGVmaW5lZCIgPT0gdHlwZW9mIHQgfHwgInRvcCIgPT0gdCkgJiYgbigxNTYpLmRpc3BsYXlfc2VhcmNoX2Jhcl90b3AoZSkKCQkJCQl9LAoJCQkJCXNob3dfZHBfYmFyOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCWMoInByb2R1Y3RfcGFnZV92aXNpdDoiICsgYS5zaXRlKSwgImNocm9tZSIgPT0gYS5mcm9tX2RldmljZSAmJiBzLmluaXQoKSwgInRvcCIgPT0gdCA/IG4oMTU2KS5pbml0KGUpIDogImJvdHRvbSIgPT0gdCAmJiBuKDIwNSkuaW5pdDIoZSksIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJCQluKDIxMykuaW5pdCgpCgkJCQkJCX0sIDUwMCk7CgkJCQkJCXRyeSB7CgkJCQkJCQluKDIwMikuaW5pdCgpCgkJCQkJCX0gY2F0Y2ggKGkpIHt9CgkJCQkJCXNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJCQluKDY3KS5pbml0KCkKCQkJCQkJfSwgMmUzKQoJCQkJCX0KCQkJCX0KCQkJfS5jYWxsKHQsIG4sIHQsIGUpLCAhKHZvaWQgMCAhPT0gaSAmJiAoZS5leHBvcnRzID0gaSkpCgkJfSkuY2FsbCh0LCBuKDEpLCBuKDYpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQl2YXIgaTsKCQkoZnVuY3Rpb24oYSkgewoJCQkidXNlIHN0cmljdCI7CgkJCWkgPSBmdW5jdGlvbigpIHsKCQkJCWZ1bmN0aW9uIGUoKSB7CgkJCQkJdmFyIGUgPSBhLmRwLnByaWNlOwoJCQkJCXJldHVybiBlICYmIChlID0gTnVtYmVyKGUpKSwgZQoJCQkJfQoJCQkJdmFyIHQsIGkgPSBuKDYpLAoJCQkJCW8gPSBuKDQwKTsKCQkJCXJldHVybiB7CgkJCQkJZ2V0T25saW5lUHJpY2U6IGZ1bmN0aW9uKHQpIHsKCQkJCQkJdCA9IHQgfHwgYS5wYWdlSW5mby5zaXRlTmFtZTsKCQkJCQkJdmFyIG4gPSAwOwoJCQkJCQl0cnkgewoJCQkJCQkJaWYgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiB0aGlzLnByaWNlUGF0dGVyblt0XSkKCQkJCQkJCQlmb3IgKHZhciByID0gdGhpcy5wcmljZVBhdHRlcm5bdF0ubGVuZ3RoLCBzID0gdGhpcy5wcmljZVBhdHRlcm5bdF0sIGwgPSAwOyByID4gbDsgbCsrKSB0cnkgewoJCQkJCQkJCQl2YXIgYyA9IHNbbF07CgkJCQkJCQkJCWlmIChuID0gaShjICsgIjp2aXNpYmxlIikubGVuZ3RoICYmIGkoYykuZXEoMCkudGV4dCgpLCAhbikgY29udGludWU7CgkJCQkJCQkJCWlmIChuID0gbyhuKSkgYnJlYWsKCQkJCQkJCQl9IGNhdGNoIChkKSB7CgkJCQkJCQkJCWEuZGVidWcgJiYgY29uc29sZS5sb2coZCkKCQkJCQkJCQl9CgkJCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQkJCWEuZGVidWcgJiYgY29uc29sZS5sb2coZCkKCQkJCQkJfQoJCQkJCQlyZXR1cm4gKDAgPT0gbiB8fCAiIiA9PSBuKSAmJiAobiA9IGUoKSksIG4KCQkJCQl9LAoJCQkJCXByaWNlUGF0dGVybjogewoJCQkJCQljb29jYWE6IFsiI0VDU19TSE9QUFJJQ0Ugc3BhbjplcSgxKSIsICIjRUNTX1NIT1BQUklDRSJdLAoJCQkJCQludWJpYTogWyIucGR0YnktcHJpY2UiXSwKCQkJCQkJY29vbHBhZDogWyIucHJvZHVjZV9zY2FsbF9yaWdodF90ZXh0YiB1bCBsaSBzcGFuLnByb2R1Y2Vfc2NhbGxfcmlnaHRfdGV4dHgiXSwKCQkJCQkJbGVub3ZvOiBbIi5sZW5vdm8tbWVtYmVyLXByaWNlIGZvbnQiLCAiI2dwcmljZSJdLAoJCQkJCQlnanc6IFsiI3NwUHJpY2UiLCAiLmdvdWppdV9wcmljZSJdLAoJCQkJCQlob21ldnY6IFsiLmh0X21vbmV5Il0sCgkJCQkJCXhpYW9taTogWyIuZ29vZHMtaW5mby1oZWFkIC5KX21pX2dvb2RzUHJpY2UiLCAiLkpfbWlfZ29vZHNQcmljZSIsICIucHJpY2UgLm51bSJdLAoJCQkJCQl4aXU6IFsiI3ByZF9wcmljZV9kaXYgLnN0eWxlMyJdLAoJCQkJCQltb29uYmFzYTogWyIjcF9zYWxlcHJpY2UiLCAiLmRldGFpbHByaWNlIiwgIi5sZWZ0UHJpY2UgYiJdLAoJCQkJCQlqMTogWyIjamlhbnlpUHJpY2UiXSwKCQkJCQkJczogWyIuc2FsZVByaWNlX2JpZyJdLAoJCQkJCQlsZXRhbzogWyIjc3BlY2lhbCsubHRwcmljZSIsICIubHRwcmljZSJdLAoJCQkJCQltdXlpbmd6aGlqaWE6IFsiLnAtcHJpY2UiXSwKCQkJCQkJcGFpeGllOiBbIiNqc19jdXJyZW50X3ByaWNlIl0sCgkJCQkJCXpoaXdvOiBbIi5tdW1lciIsICIuZHNpbmdsZV9ub3dwcmljZSJdLAoJCQkJCQlib29rc2NoaW5hOiBbInNwYW4udGhpc3ByaWNlIiwgIi50aGlzcHJpY2UiXSwKCQkJCQkJbGV5b3U6IFsiI2xleW91amlhIl0sCgkJCQkJCXRhb2JhbzogWyIudG0tcHJvbW8tcHJpY2UgLnRtLXByaWNlIiwgIi50Yi13clR1YW4tbnVtIiwgIiNKX1N0clByaWNlTW9kQm94IC50bS1wcmljZSIsICIjSl9Qcm9tb1ByaWNlIC50Yi1ybWItbnVtIiwgIiNKX1Byb21vQm94IC5KX0N1clByaWNlIiwgIiNKX1N0clByaWNlIiwgIi50YmlkLWRldGFpbC1wcmljZSJdLAoJCQkJCQkidGFvYmFvLWp1IjogWyIuY3VycmVudFByaWNlIl0sCgkJCQkJCXRtYWxsOiBbIiNKX1ByaWNlIiwgIiNKX1N0clByaWNlIiwgIi50bS1wcm9tby1wcmljZSAudG0tcHJpY2UiLCAiI0pfU3RyUHJpY2VNb2RCb3ggLnRtLXByaWNlIiwgIi50bS1wcmljZSJdLAoJCQkJCQlhbWF6b246IFsiI3ByaWNlYmxvY2tfb3VycHJpY2UiLCAiLnByaWNlTGFyZ2UiXSwKCQkJCQkJImdvbWUtcSI6IFsiLnByaWNlIl0sCgkJCQkJCWRhbmdkYW5nOiBbIiNwcm9tb19wcmljZSIsICIucHJpY2VMYXJnZSIsICIjc2FsZVByaWNlVGFnIiwgIiNkX3ByaWNlIl0sCgkJCQkJCW0xODogWyIuZGV0YWlsc0FyZWEgc3Ryb25nW2RhdGEtcHJpY2VdIl0sCgkJCQkJCXNlcGhvcmE6IFsiLnByb0RldEluZm8gLnByb1ByaWNlIHNwYW4iXSwKCQkJCQkJdGFveGllOiBbIiNkaXZ0eHByaWNlIC5kLXJlYWwtcHJpY2UiXSwKCQkJCQkJbHVzZW46IFsiI1Byb2R1Y3RQcmljZSJdLAoJCQkJCQltYmFvYmFvOiBbIi5wcmljZS1udW0iXSwKCQkJCQkJY2h1bnNodWl0YW5nOiBbIi50dWFuLWJ1eS10ZXh0IiwgIi5HZF9zaG9wX1ByaWNlIGR0Il0sCgkJCQkJCW95ZWFoOiBbIi5wcmljZXN0eSJdLAoJCQkJCQl4OiBbIi5wcm9fYmlnX3JpZ2h0IC5saXN0IC5qc2pbc3R5bGVePXRleHRdIiwgIi5qc2ogYiJdLAoJCQkJCQlubzU6IFsiLnByb2RSZWRUeHQucHJpY2UiXSwKCQkJCQkJIjM2MGt4ciI6IFsiI3Byb19tYWxsX3ByaWNlIl0sCgkJCQkJCW02Z286IFsiI1NHb29kc1ByaWNlIl0sCgkJCQkJCWxpa2VmYWNlOiBbIi50UHJjMS50UHJjT24+ZGl2PmIiLCAiI2pydGoiXSwKCQkJCQkJbW9yZWZvb2Q6IFsiLnByby1pbmZvIC50ZXh0MiJdLAoJCQkJCQl5YW9mYW5nOiBbIi5zX3hpYW5qaWFfMTQwNTE5Il0sCgkJCQkJCSI5OXJlYWQiOiBbIiNwYW5lbC1yaWdodCAucHJvLUluZm9MaXN0IGxpIHNwYW4uZi1QcmljZSJdLAoJCQkJCQkiY2hpbmEtcHViIjogWyIjeHhqZyAucHJvX2J1eV9zZW4iLCAiLnByb19idXlfc2VuIl0sCgkJCQkJCXdpbnh1YW46IFsiLnByaWNlLW4gZGQgYiJdLAoJCQkJCQllZmVpaHU6IFsiLnVpX3ByaWNlIHN0cm9uZyBlbSJdLAoJCQkJCQloYXBwaWdvOiBbIiNyZWFsX3ByaWNlIl0sCgkJCQkJCWdhcDogWyIjcHJvZHVjdFNob3dQcmljZSJdLAoJCQkJCQl0aWFudGlhbjogWyIueHhfcHJpY2UiXSwKCQkJCQkJeGlqaWU6IFsiLmRldGFpbF9wcm9fZF8xIl0sCgkJCQkJCWxpbmdzaGk6IFsiI3Nob3BwcmljZSJdLAoJCQkJCQliYW5nZ286IFsiI3NhbGVQcmljZVRleHQiXSwKCQkJCQkJeWVzbXl3aW5lOiBbIi5leHBsYWluIC5teVByaWNlIl0sCgkJCQkJCWp4ZHlmOiBbIiN6Y19qaWFnZSAuanhQcmljZSJdLAoJCQkJCQl0b290b286IFsiI3ByaWNlIl0sCgkJCQkJCXptNzogWyIjRUNTX1NIT1BQUklDRSJdLAoJCQkJCQltaXFpOiBbIi5sZWZ0X3RvcFRhYmxlX2J0biJdLAoJCQkJCQlqaXVtZWk6IFsiI2ppYWdlIC5jdXhpYW8gLm51bWIgc3Ryb25nIl0sCgkJCQkJCW9raHFiOiBbIi5jei1udW0iXSwKCQkJCQkJYm9va3V1OiBbIiNiay1kLXByaWNlIl0sCgkJCQkJCXRhbzNjOiBbIi5kZXRhaWxfaW5mb19ybTEgY2l0ZSJdLAoJCQkJCQlkMTogWyIucF9tcCJdLAoJCQkJCQlydWl5aTogWyIuZ29vZHMtcHJpY2UgLnByaWNlMSJdLAoJCQkJCQlsYW1pdTogWyIuYWN0aW9uLXByaWNlIl0sCgkJCQkJCXdiaWFvOiBbIiNnNV9wcmljZSJdLAoJCQkJCQllaGFpZXI6IFsiLmN1ci1wcmljZSJdLAoJCQkJCQlzZWNvbzogWyIjc2Vjb29QcmljZUpzIl0sCgkJCQkJCXhpZnVxdWFuOiBbIi5qZ19jdWhvbmciXSwKCQkJCQkJeWlndW86IFsiLnByby1wcmljZT5kaXYgc3Ryb25nIl0sCgkJCQkJCXl1bW15Nzc6IFsiLmNwcmljZSAucHJpY2UiXSwKCQkJCQkJZnJ1aXRkYXk6IFsiLnByb2RfcHJpY2UiLCAiI2pxLXByaWNlIl0sCgkJCQkJCXp1aXBpbjogWyIuZGV0YWlsX3ByaWNlIl0sCgkJCQkJCXlvaG9idXk6IFsiLnByaWNlLXNhbGUiXSwKCQkJCQkJaWtqdGFvOiBbIiNFQ1NfR09PRFNfQU1PVU5UIl0sCgkJCQkJCW1peWFiYW9iZWk6IFsiI2l0ZW1fcHJpY2UiXSwKCQkJCQkJdWxlOiBbIi5wcm9kdWN0UHJpY2UgLnByaWNlIHN0cm9uZyJdLAoJCQkJCQltaW5zaGVuZ2VjOiBbIi5tc19wcmljZSAuZGQgc3Ryb25nIl0sCgkJCQkJCXdhbmdmdWppbmc6IFsiI3Byby1wcmljZSAuY29zdCJdLAoJCQkJCQltZWlsZWxlOiBbIiNKU19lZmZlY3RfcHJpY2UiXSwKCQkJCQkJc3VwdXk6IFsiI1Nob3dQcmljZSIsICIuZ29vZF9kX3ByaWNlbmV3IiwgIiNnX3ByaWNlIl0sCgkJCQkJCWxpbmluZzogWyIjb2ZmZXJQcmljZSAudiJdLAoJCQkJCQlycnM6IFsiLmN1ci1wcmljZSJdLAoJCQkJCQlsaWZldmM6IFsiI3Nob3BwaW5nUGFuZWxVcHBlciAuc2hvcHBpbmdJbmZvIC5zYWxlUHJpY2UiXSwKCQkJCQkJeW1hdG91OiBbIiNwcm9EZXRhaWwgLnByb21vdGlvbiAuY291bnQiXSwKCQkJCQkJa2p0OiBbIi5tYWluUHJpY2UiXSwKCQkJCQkJbG9naXRlY2g6IFsiLnNhbGUtcHJpY2UiXSwKCQkJCQkJeGlqaTogWyIuYWN0aW9uLXByaWNlIl0sCgkJCQkJCW5pa2U6IFsiLmV4cC1wZHAtcHJvZHVjdC1wcmljZS1jb250YWluZXIgLmV4cC1wZHAtbG9jYWwtcHJpY2UiXSwKCQkJCQkJIjM2MGthZCI6IFsiI3ByaWNlbnVtYmVyIl0sCgkJCQkJCW1laWNpOiBbIi5wcmljZSIsICIucHJvX3ByaWNlIC5jX3B1cnBsZSJdLAoJCQkJCQliZWliZWk6IFsiI2RldGFpbC1tZXRhIC5wcmljZS1pbmZvIC5wcmljZSJdLAoJCQkJCQkiMTAweXVlIjogWyIuYWN0aW9uLXByaWNlIiwgIiNwcmljZSJdLAoJCQkJCQlkYWxpbmc6IFsiLmdvb2RzLXByaWNlIC5ib2xkIl0sCgkJCQkJCXNmaHQ6IFsiLmdvb2RzLXByaWNlLXIxIHN0cm9uZyJdLAoJCQkJCQkiMzYwYnV5IjogWyIjamQtcHJpY2UiLCAiI3ByaWNlaW5mbyIsICIjdGVhbVN0YXR1cyAucC1wcmljZSIsICIjc3VtbWFyeS1wcmljZSIsICIuc3VtbWFyeS1wcmljZSAucC1wcmljZSAucHJpY2UiXSwKCQkJCQkJIjUxYnV5IjogWyIueHByaWNlX3ZhbFtpdGVtcHJvcD0nbG93UHJpY2UnXSIsICIueHByaWNlX3ZhbFtpdGVtcHJvcD0ncHJpY2UnXSIsICIucHJpY2VfZm9udCJdLAoJCQkJCQlzdW5pbmc6IFsiI3Byb21vdGlvblByaWNlIiwgIiNwcm9tb3Rpb25QcmljZSBlbSIsICIjaXNxdWlja0J1eUJveFByaWNlIGVtIiwgIiNib29rcHJkcHJpY2UiLCAiI25ldFByaWNlIGVtIiwgIiNtYWluUHJpY2UgZW0iLCAiI3JwUHJpY2UiLCAiI3Byb21vUHJpY2UiLCAiI2VQcmljZSBlbSJdLAoJCQkJCQl5aWhhb2RpYW46IFsiI2RldGFpbF9wcm9tX3ByaWNlIiwgIiNjdXJyZW50X3ByaWNlIiwgIiNwcm9kdWN0RmFjYWRlUHJpY2UiLCAiI25vbk1lbWJlclByaWNlIHN0cm9uZyIsICIucHJpY2Vib3giXSwKCQkJCQkJdmFuY2w6IFsiLmN1eGlhb1ByaWNlIHN0cm9uZyJdLAoJCQkJCQlnb21lOiBbIiNwcmRQcmljZSIsICIuZGV0YWlsIC5wcmljZSJdLAoJCQkJCQlva2J1eTogWyIjcHJvZFByaWNlQWoiXSwKCQkJCQkJdmppYTogWyIjU3BlY2lhbFByaWNlIl0sCgkJCQkJCWp1bWVpOiBbIi5uZXdkZWFsX2RlYWxfcHJpY2UiLCAiLnByaWNlX25vdyIsICIjbWFsbF9wcmljZSIsICIuZGVhbF9vcmlfcHJpY2UgLmRlYWxfYWNjb3V0X3R3byJdLAoJCQkJCQlqdW1laWdsb2JhbDogWyIuanVtZWlfcHJpY2UiXSwKCQkJCQkJeW91Z291OiBbIi54c2J1eV9pdG0gc3Ryb25nLnByaWNlIiwgIiN5aXRpYW5QcmljZSBpIiwgIiN5aXRpYW5QcmljZSJdLAoJCQkJCQlzaG9waW46IFsiLnNlbFByaWNlIHNwYW46ZXEoMSkiLCAiLnNob3BpbmpnMSJdLAoJCQkJCQl2bWFsbDogWyIjcHJvLXByaWNlIl0sCgkJCQkJCXNmYmVzdDogWyIucHJpY2VCb3ggLnByaWNlIiwgIi5wcmljZSIsICIjcHJpY2UgZm9udCJdLAoJCQkJCQlvdWt1OiBbIiNwZEFsbFByaWNlIC5wcmMiLCAiLnNhbGUtcHJpY2UiXSwKCQkJCQkJd29tYWk6IFsiI2J1eVByaWNlIl0sCgkJCQkJCSJiYWlkdS13ZWlnb3UiOiBbIiNuZXctcHJpY2UiLCAiLm9sZC1wcmljZSJdLAoJCQkJCQl5aW50YWk6IFsic3Bhbi55dC1udW0iLCAiLnl0LW51bSJdLAoJCQkJCQlmZWluaXU6IFsiI3ByaWNlRm4iLCAiI0pfcHJvZHVjdF92YWx1ZSAuZm4tcm1iLW51bSJdLAoJCQkJCQlqaXV4aWFuOiBbIiNhY3RQcmljZVByaWNlIiwgIiNfbm93UHJpY2VTdHIiXSwKCQkJCQkJem9sOiBbIi5wcmljZS10eXBlIl0sCgkJCQkJCWZlaWZlaTogWyIucHJpY2UtYm94IC5wcmljZS1kZXRhaWwiLCAiLnByaWNlLWluZm8tdmFsdWUiLCAiLnByaWNlLWJveCJdLAoJCQkJCQlremozNjU6IFsiI3JwcmljZSJdLAoJCQkJCQlrYW9sYTogWyIjanNfY3VycmVudFByaWNlIl0sCgkJCQkJCW1ldGFvOiBbIi5waV9wcmljZV9ib3hfcm93IC5wYm94X3ByaWNlIiwgIi5wcmljZV9zZW5kcGxhY2UgLnByaWNlIl0sCgkJCQkJCXBoaWxpcHM6IFsiLnBkYy1ibHVlLWMgc3BhbiJdLAoJCQkJCQl0Y2w6IFsiI3ByaWNlQnV5Il0sCgkJCQkJCWNoYW5naG9uZzogWyIudGlfc2NjIHN0cm9uZyJdLAoJCQkJCQlrb25rYTogWyIuYWN0aW9uLXByaWNlIl0sCgkJCQkJCWhpc2Vuc2U6IFsiLmlubGlzdCAuZmx2YSJdLAoJCQkJCQlpbmVpZ286IFsiI1VMUHJpY2UgZm9udCJdLAoJCQkJCQlza2c6IFsiLnByb2R1Y3RTYWxlIC5zYWxlUHJpY2UiXSwKCQkJCQkJImstdG91Y2giOiBbIi5wcm9jaWUiXSwKCQkJCQkJZ2lvbmVlOiBbIiNKZ29vZHNQcmljZSJdLAoJCQkJCQlvcHBvOiBbIi5idXlpbmctcHJpY2UgLnByaWNlIl0sCgkJCQkJCXZpdm86IFsiLmFjdGlvbi1wcmljZSJdLAoJCQkJCQlncmFpbmdlcjogWyIjc3VtbWFyeS1wcmljZSAucC1wcmljZSJdLAoJCQkJCQllYmF5OiBbIiNwcmNJc3VtIl0sCgkJCQkJCSJ0YW9iYW8tOTUwOTUiOiBbIiNKX1Byb21vUHJpY2UgLnRtLXByaWNlIl0sCgkJCQkJCW1laWxpc2h1bzogWyIjcHJpY2Utbm93Il0sCgkJCQkJCW1vZ3VqaWU6IFsiI0pfTm93UHJpY2UiXSwKCQkJCQkJc2VwaG9yYWNwczogWyIucHJvRGV0SW5mbyAucHJvUHJpY2Ugc3BhbiJdLAoJCQkJCQlzdHJhd2JlcnJ5bmV0OiBbIiNkaXZTaG9wUHJpY2UgLm10LTEwIl0sCgkJCQkJCWppYTogWyIuc2FsZS1wcmljZSBzcGFuIl0sCgkJCQkJCWxlbWFsbDogWyIjYWRkYml0cyJdLAoJCQkJCQloYW5kdTogWyIucHJvbW90ZV9wcmljZSJdLAoJCQkJCQl0YW9zaHU6IFsiI3ByaWNlLXR4dCJdLAoJCQkJCQljYW1lbDogWyIjcHJvZF9wcmljZSJdLAoJCQkJCQlxdXdhbjogWyIjcHJpY2VfZ29vZHNfZGl2IHN0cm9uZyJdLAoJCQkJCQlsZWZlbmc6IFsiLmRpdHktcHJpY2UtYyBzcGFuIl0sCgkJCQkJCSIxMzlzaG9wIjogWyIjYmRqIl0sCgkJCQkJCXdhbmdqaXU6IFsiI2ZpbmFsUHJpY2VWYWx1ZSJdLAoJCQkJCQlsaWVibzogWyIjOF9DdXJQcmljZSJdLAoJCQkJCQlhaW1lcjogWyIjcG9zdFByaWNlIGVtIl0sCgkJCQkJCWthZGFuZzogWyIjSl9QcmljZSJdLAoJCQkJCQlsaXppOiBbIiNzX3ByaWNlIl0sCgkJCQkJCW1ldHJvbWFsbDogWyIucHJvRHByaWNlIl0sCgkJCQkJCXBiYTogWyIucHJpY2UiXSwKCQkJCQkJc2hhbmdwaW46IFsiLnNwRGV0YWlsX3NwUHJpY2VCaWdSZWQgaSJdLAoJCQkJCQltYXNhbWFzbzogWyIucHJpY2UyNCJdLAoJCQkJCQl6aGVuOiBbIiNzYWxlLXByaWNlIl0sCgkJCQkJCXpoZW5waW46IFsiI3NhbGUtcHJpY2UiXSwKCQkJCQkJc3BvcnRpY2E6IFsiLnNwZWNpYWwtcHJpY2UtdGl0dGxlKy5wcmljZSJdLAoJCQkJCQltaWxpZXI6IFsiLmJpZ19wcmljZSJdLAoJCQkJCQlub3A6IFsiLmFjdGlvbi1wcmljZSJdLAoJCQkJCQliYnJlYWR5OiBbIi5hY3Rpb24tZmxhc2hidXlfcHJpY2UiXSwKCQkJCQkJcWlucWluYmFieTogWyIuY29udGVudC1tYWluLXprLTEiXSwKCQkJCQkJc2FzYTogWyIucHJpY2UgLmFjdGlvbi1wcmljZSJdLAoJCQkJCQkiNWx1eCI6IFsiLmZza19nb29kc19wcmljZSJdLAoJCQkJCQlhbGlleHByZXNzOiBbIiNza3UtZGlzY291bnQtcHJpY2UiXSwKCQkJCQkJc2hvcGJvcDogWyIucHJpY2VCbG9jayJdLAoJCQkJCQlmZW5ncXU6IFsiLmdvb2RzLXByaWNlLXIxIHN0cm9uZyJdLAoJCQkJCQlrZWVkZTogWyIubWVzc2FnZV9wcmljZSJdLAoJCQkJCQlzaG93am95OiBbIi5qX1ByaWNlTnVtIl0sCgkJCQkJCWVhc2VleWVzOiBbIi5mb250QXJpYWwiXSwKCQkJCQkJeXVuaG91OiBbIi5qRmlyc3RQcmljZSJdLAoJCQkJCQkiNTFkaW4iOiBbIi5wcm9kdWN0X3ByaWNlIGIiXSwKCQkJCQkJYWlkYWk6IFsiI190aGlzZnAiXSwKCQkJCQkJc3BpZGVyOiBbIi5obWNwdHdvX3NqamciXSwKCQkJCQkJenpsMzY1OiBbIi5nb29kcy1wcmljZSAucHJpY2UxIl0KCQkJCQl9LAoJCQkJCXN1YlN0YXRpb25QYXR0ZXJuOiB7CgkJCQkJCSI1MWJ1eSI6ICJwcmlkIiwKCQkJCQkJeWloYW9kaWFuOiAicHJvdmluY2VJZCIsCgkJCQkJCXdvbWFpOiAic2l0ZWluZm90ZW1wIiwKCQkJCQkJc3VuaW5nOiAiY2l0eUlkIgoJCQkJCX0sCgkJCQkJZ2V0U3ViU3RhdGlvbklkOiBmdW5jdGlvbihlKSB7CgkJCQkJCWlmICh0KSByZXR1cm4gdDsKCQkJCQkJaWYgKGUgPSBlIHx8IGEucGFnZUluZm8uc2l0ZU5hbWUsICJ1bmRlZmluZWQiICE9IHR5cGVvZiB0aGlzLnN1YlN0YXRpb25QYXR0ZXJuW2VdKQoJCQkJCQkJZm9yICh2YXIgbiA9IHRoaXMuc3ViU3RhdGlvblBhdHRlcm5bZV0gKyAiPSIsIG8gPSBkb2N1bWVudC5jb29raWUuc3BsaXQoIjsiKSwgciA9IDA7IHIgPCBvLmxlbmd0aDsgcisrKSB7CgkJCQkJCQkJdmFyIHMgPSBvW3JdOwoJCQkJCQkJCWlmIChzID0gaS50cmltKHMpLCAwID09IHMuaW5kZXhPZihuKSkgewoJCQkJCQkJCQl2YXIgbCA9IHMuc3Vic3RyaW5nKG4ubGVuZ3RoLCBzLmxlbmd0aCk7CgkJCQkJCQkJCWlmICgiNTFidXkiID09IGUpIHRyeSB7CgkJCQkJCQkJCQl2YXIgYyA9IGwuaW5kZXhPZigiXyIpOwoJCQkJCQkJCQkJYyA+PSAwICYmIChsID0gbC5zdWJzdHIoYyArIDEpKQoJCQkJCQkJCQl9IGNhdGNoIChkKSB7CgkJCQkJCQkJCQlhLmRlYnVnICYmIGNvbnNvbGUubG9nKGQpCgkJCQkJCQkJCX0KCQkJCQkJCQkJcmV0dXJuIHQgPSBsLCBsCgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQlyZXR1cm4gIiIKCQkJCQl9LAoJCQkJCXRyeUdldExhenlMb2FkUHJpY2U6IGZ1bmN0aW9uKGUsIHQsIG4sIG8sIHIpIHsKCQkJCQkJdmFyIHMgPSAiIiwKCQkJCQkJCWwgPSAwLAoJCQkJCQkJYyA9IHsKCQkJCQkJCQkidG1hbGwuY29tIjogIi50bS1wcmljZSwudGItd3JUdWFuLW51bSIsCgkJCQkJCQkJInRhb2Jhby5jb20iOiAiLnRiLWRldGFpbC1wcmljZSBzdHJvbmc6bm90KC5kZWwpIgoJCQkJCQkJfTsKCQkJCQkJdHJ5IHsKCQkJCQkJCXMgPSBjW2VdCgkJCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQkJCWEuZGVidWcgJiYgY29uc29sZS5sb2coZCksIHMgPSAiIgoJCQkJCQl9CgkJCQkJCXZhciBwID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7CgkJCQkJCQlpZiAoKytsLCBpKHMpLmxlbmd0aCB8fCBsID4gNSkgewoJCQkJCQkJCXZhciBhID0gIiI7CgkJCQkJCQkJaShzKS5sZW5ndGggJiYgKGEgPSBpKHMpLnRleHQoKS5zcGxpdCgiLSIpWzBdLCBhID0gcGFyc2VGbG9hdChhLnJlcGxhY2UoL1teMC05Ll0vZywgIiIpKSwgYSA9IHBhcnNlSW50KDEwMCAqIGEpIC8gMTAwLCBhID0gYS50b0ZpeGVkKDIpKSwgbiArPSAiJnByaWNlPSIgKyBhICsgIiZzaXRlPSIgKyBlLnNwbGl0KCIuIilbMF0sIGNsZWFySW50ZXJ2YWwocCksIHQobiwgbywgcikKCQkJCQkJCX0KCQkJCQkJfSwgMWUzKQoJCQkJCX0KCQkJCX0KCQkJfS5jYWxsKHQsIG4sIHQsIGUpLCAhKHZvaWQgMCAhPT0gaSAmJiAoZS5leHBvcnRzID0gaSkpCgkJfSkuY2FsbCh0LCBuKDEpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQl2YXIgaTsKCQkoZnVuY3Rpb24oYSkgewoJCQkidXNlIHN0cmljdCI7CgkJCWkgPSBmdW5jdGlvbigpIHsKCQkJCXZhciBlID0gbig2KTsKCQkJCXJldHVybiB7CgkJCQkJaW52ZW50b3J5UGF0dGVybnM6IHsKCQkJCQkJIjM2MGJ1eSI6IHsKCQkJCQkJCSIjc3RvY2t0ZXh0IHN0cm9uZyI6ICLml6DotKciLAoJCQkJCQkJIiNzdG9yZS1wcm9tcHQgc3Ryb25nIjogIuaXoOi0pyIsCgkJCQkJCQkiI3N0b2NrLXN0YXRlIjogIuaXoOi0pyIsCgkJCQkJCQkiI3Byb2R1Y3QtaW50cm8gLml0ZW1vdmVyLXRpdGxlIGgzIHN0cm9uZyI6ICLllYblk4Hlt7LkuIvmn5wiCgkJCQkJCX0sCgkJCQkJCSI1MWJ1eSI6IHsKCQkJCQkJCSIjc2VhX2J1eV93cmFwIjogIuWIsOi0p+mAmuefpSIsCgkJCQkJCQkiI2J1eVF0eSAuZ29kZHNfaW5mb19kYXRhIHNwYW5bc3R5bGVdIjogIuaXoOi0pyIKCQkJCQkJfSwKCQkJCQkJYW1hem9uOiB7CgkJCQkJCQkiLmEtY29sb3ItcHJpY2UiOiAi57y66LSn55m76K6wIiwKCQkJCQkJCSIuZGRtLXNici1hdmFpbC10aXRsZSI6ICLnvLrotKfnmbvorrAiLAoJCQkJCQkJIiNkeW5hbWljRGVsaXZlcnlNZXNzYWdlLCNkZG1BdmFpbGFiaWxpdHlNZXNzYWdlIjogIuebruWJjeaXoOi0pyIsCgkJCQkJCQkiI2R5bmFtaWNEZWxpdmVyeU1lc3NhZ2Ugc3BhbiI6ICLnvLrotKfnmbvorrAiCgkJCQkJCX0sCgkJCQkJCXlpaGFvZGlhbjogewoJCQkJCQkJIiNhcnJpdmFsTm90aWNlIHNwYW4iOiAi5Yiw6LSn6YCa55+lIiwKCQkJCQkJCSIjbm90U2FsZUJ0biAuY2FydGJveCBhIHNwYW4iOiAi5bey5ZSu5a6MIiwKCQkJCQkJCSIjZGV0YWlsX2FkZFRvQ2FydCBzcGFuLnN0ZWFsX2J0biI6ICLmiqLlhYnkuoYiLAoJCQkJCQkJIi5idXlfYnRuMzp2aXNpYmxlIjogIuW3suWUruWujCIsCgkJCQkJCQkiI2RldGFpbFN0b2NrSW5mbyI6ICLml6DotKciLAoJCQkJCQkJIiNhZGRDYXJ0IjogIuW3suWUruWujCIKCQkJCQkJfSwKCQkJCQkJc3VuaW5nOiB7CgkJCQkJCQkiI2Nfa3VjdW4gc3BhbiI6ICLml6DotKciLAoJCQkJCQkJIiNyZWNvbVRpdGxlIjogIuWVhuWTgeW3suS4i+aetiIsCgkJCQkJCQkiI2Nfa3VjdW4iOiAi5peg6LSnIgoJCQkJCQl9LAoJCQkJCQlkYW5nZGFuZzogewoJCQkJCQkJIiNzdG9ja193cml0aW5nX3N0YXR1cyI6ICLnvLrotKciLAoJCQkJCQkJIi5zaG93X2luZm9fcmlnaHQgc3Ryb25nLnFoIjogIuaaguaXtue8uui0p3znvYQiLAoJCQkJCQkJIiNnZW8taW5mbyI6ICLml6DotKciCgkJCQkJCX0sCgkJCQkJCWdvbWU6IHsKCQkJCQkJCSIjc3RvY2tUeHQiOiAi5peg6LSnfOS4i+aetnzml6DotKd85pqC5LiN5Y+v6YCBIgoJCQkJCQl9LAoJCQkJCQl5b3Vnb3U6IHsKCQkJCQkJCSIuYnV5IjogIuW3suWUrue9hCIsCgkJCQkJCQkiLnNvbGRvdXRzdHkgLmZiIjogIuatpOminOiJsuWVhuWTgeW3suWUrue9hCIKCQkJCQkJfSwKCQkJCQkJdm1hbGw6IHsKCQkJCQkJCSIuYnV0dG9uLW5vdGljZS1hcnJpdmFsIHNwYW4iOiAi5Yiw6LSn6YCa55+lIgoJCQkJCQl9LAoJCQkJCQl2YW5jbDogewoJCQkJCQkJIi5kYW5waW5fU291cWluZ1RpdGxlIGgzIjogIuivpeWVhuWTgeaaguS4jeiDvei0reS5sCIsCgkJCQkJCQkiLk5vd0hhc0dvb2RzIjogIuaXoOi0pyIKCQkJCQkJfSwKCQkJCQkJanVtZWk6IHsKCQkJCQkJCSIuc29sZG91dF90ZXh0IjogIuW3suaKouWFiSIsCgkJCQkJCQkiLmFkZF9jYXJ0IGEuc3Vic2NyaWJlIjogIuiuoumYheWIsOi0p+mAmuefpSIKCQkJCQkJfSwKCQkJCQkJbmV3ZWdnOiB7CgkJCQkJCQkiI2ludmVudG9yeSAuaW52ZW50b3J5VGV4dCI6ICLmmoLml6B85o6l5Y+X6aKE5a6aIiwKCQkJCQkJCSIjZ2V0UXVldWVOdW1iZXIiOiAi56uL5Y2z6aKE6K6iIiwKCQkJCQkJCScuZ29kZHNfaW5mb19kYXRhIHNwYW46Y29udGFpbnMoIuW6k+WtmCIpJzogIuaOpeWPl+mihOWumiIKCQkJCQkJfSwKCQkJCQkJbW9vbmJhc2E6IHsKCQkJCQkJCSIjc3BhbkNvdW50ayI6ICLml6DotKciCgkJCQkJCX0sCgkJCQkJCXdpbnh1YW46IHsKCQkJCQkJCSIuc3RhdHVzIjogIuaXoOi0pyIKCQkJCQkJfSwKCQkJCQkJaGFwcGlnbzogewoJCQkJCQkJIiNnb29kc2t1Y3VuIC5mX3JlZCI6ICLml6DotKciCgkJCQkJCX0sCgkJCQkJCXhpamllOiB7CgkJCQkJCQkiLmRldGFpbF9wcm9fY19jb24iOiAi5b6I5oqx5q2J77yM6K+l5ZWG5ZOB5bey5ZSu56m6IgoJCQkJCQl9LAoJCQkJCQlsaW5nc2hpOiB7CgkJCQkJCQkiI2N1cnJlbnRMb2NhdGlvbiI6ICLml6DotKciCgkJCQkJCX0sCgkJCQkJCXllc215d2luZTogewoJCQkJCQkJIiNkZWxpdmVyeS10aXAiOiAi5peg6LSnIgoJCQkJCQl9LAoJCQkJCQlib29rdXU6IHsKCQkJCQkJCSIuc3RvY2sgc3BhbiI6ICLml6DotKciCgkJCQkJCX0sCgkJCQkJCWhvbWV2djogewoJCQkJCQkJIiNzdG9jaysuaG9tIjogIue8uui0pyIKCQkJCQkJfSwKCQkJCQkJbGVub3ZvOiB7CgkJCQkJCQkiI2lkc3RvY2tzdGF0dXMiOiAi5pqC5peg5bqT5a2YIgoJCQkJCQl9LAoJCQkJCQlzZWNvbzogewoJCQkJCQkJIiNsb2NhdGlvbi10K2kiOiAi5peg6LSnIgoJCQkJCQl9LAoJCQkJCQl5dW1teTc3OiB7CgkJCQkJCQkiI3N0b2NrZGVzYyI6ICLml6DotKciCgkJCQkJCX0sCgkJCQkJCWZydWl0ZGF5OiB7CgkJCQkJCQkiLmhhdmUiOiAi5peg6LSnIgoJCQkJCQl9LAoJCQkJCQlrYW9sYTogewoJCQkJCQkJIiNqc19kb21ldHh0IjogIuaXoOi0pyIKCQkJCQkJfSwKCQkJCQkJa2p0OiB7CgkJCQkJCQkiLmJsYWNrIjogIuaXoOi0pyIKCQkJCQkJfSwKCQkJCQkJaml1bWVpOiB7CgkJCQkJCQkiI2t1Y3VuaW5mbyAuZm9udDE0IjogIuaXoOi0pyIKCQkJCQkJfSwKCQkJCQkJd29tYWk6IHsKCQkJCQkJCSIubm9idXlfdG9wX3RpdCI6ICLllYblk4Hlt7LllK7lrozvvIzmmoLml7bml6DotKciLAoJCQkJCQkJIi51bnNlbGxhYmxlX3JlY29tbWVuZF9kZXNjcmlwdGlvbiI6ICLllYblk4Hlt7LllK7lrowiCgkJCQkJCX0sCgkJCQkJCXNmYmVzdDogewoJCQkJCQkJIiNhcnJpdmFsX25vdGljZSI6ICLliLDotKfpgJrnn6UiLAoJCQkJCQkJIiNzdG9jayBmb250IjogIue8uui0pyIsCgkJCQkJCQkiI2NhcnQtYWRkLWJ0bi1zZiI6ICLliLDotKd857y66LSnIgoJCQkJCQl9LAoJCQkJCQlsZWZlbmc6IHsKCQkJCQkJCSIuZGlzZXhwIHNwYW4uc3RpbWUiOiAi5peg6LSnIgoJCQkJCQl9LAoJCQkJCQlsZXlvdTogewoJCQkJCQkJIiNzdG9ja1N0YXR1cyI6ICLml6DotKciCgkJCQkJCX0sCgkJCQkJCWppdXhpYW46IHsKCQkJCQkJCSIjcmVzcE51YnMiOiAi5peg6LSnIgoJCQkJCQl9CgkJCQkJfSwKCQkJCQlpbml0OiBmdW5jdGlvbihlKSB7CgkJCQkJCXJldHVybiBlID0gZSB8fCBhLnBhZ2VJbmZvLnNpdGVOYW1lLCB0aGlzLmdldENoZWNrSW52ZW50b3J5KGUpCgkJCQkJfSwKCQkJCQlnZXRPbmxpbmVJbnZlbnRvcnk6IGZ1bmN0aW9uKHQpIHsKCQkJCQkJdmFyIG4gPSB7CgkJCQkJCQkJb25saW5lOiBudWxsLAoJCQkJCQkJCXBhdHRlcm46IG51bGwKCQkJCQkJCX0sCgkJCQkJCQlpID0gZnVuY3Rpb24oZSkgewoJCQkJCQkJCXJldHVybiBlLnJlcGxhY2UoL1teXHUwMDAwLVx1MDBGRl0vZywgZnVuY3Rpb24oZSkgewoJCQkJCQkJCQlyZXR1cm4gZXNjYXBlKGUpLnJlcGxhY2UoLygldSkoXHd7NH0pL2dpLCAiXFx1JDIiKQoJCQkJCQkJCX0pCgkJCQkJCQl9OwoJCQkJCQl0cnkgewoJCQkJCQkJaWYgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiB0aGlzLmludmVudG9yeVBhdHRlcm5zW3RdKSB7CgkJCQkJCQkJdmFyIG8gPSB0aGlzLmludmVudG9yeVBhdHRlcm5zW3RdOwoJCQkJCQkJCWZvciAodmFyIHIgaW4gbykgdHJ5IHsKCQkJCQkJCQkJaWYgKGUocikuaXMoIjp2aXNpYmxlIikgJiYgKG4ub25saW5lID0gZShyKS5odG1sKCksIG51bGwgIT09IG4ub25saW5lKSkgcmV0dXJuIG4ub25saW5lID0gaShuLm9ubGluZSksIG4ucGF0dGVybiA9IGkob1tyXSksIG4KCQkJCQkJCQl9IGNhdGNoIChzKSB7CgkJCQkJCQkJCWEuZGVidWcgJiYgY29uc29sZS5sb2cocykKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0gY2F0Y2ggKHMpIHsKCQkJCQkJCWEuZGVidWcgJiYgY29uc29sZS5sb2cocykKCQkJCQkJfQoJCQkJCQlyZXR1cm4gbgoJCQkJCX0sCgkJCQkJZ2V0Q2hlY2tJbnZlbnRvcnk6IGZ1bmN0aW9uKGUpIHsKCQkJCQkJdmFyIHQgPSAxLAoJCQkJCQkJbiA9IHRoaXMuZ2V0T25saW5lSW52ZW50b3J5KGUpLAoJCQkJCQkJaSA9IG4ub25saW5lLAoJCQkJCQkJbyA9IG4ucGF0dGVybjsKCQkJCQkJdHJ5IHsKCQkJCQkJCWlmIChudWxsICE9PSBpICYmICIiICE9IGkgJiYgbnVsbCAhPT0gbykKCQkJCQkJCQlpZiAoby5pbmRleE9mKCJ8IikgPj0gMCkgewoJCQkJCQkJCQl2YXIgciA9IG8uc3BsaXQoInwiKTsKCQkJCQkJCQkJZm9yICh2YXIgcyBpbiByKSBpLmluZGV4T2YocltzXSkgPj0gMCAmJiAodCA9IDApCgkJCQkJCQkJfSBlbHNlIGkuaW5kZXhPZihvKSA+PSAwICYmICh0ID0gMCk7CgkJCQkJCQllbHNlIHQgPSAtMgoJCQkJCQl9IGNhdGNoIChsKSB7CgkJCQkJCQlhLmRlYnVnICYmIGNvbnNvbGUubG9nKGwpCgkJCQkJCX0KCQkJCQkJcmV0dXJuIHQKCQkJCQl9CgkJCQl9CgkJCX0uY2FsbCh0LCBuLCB0LCBlKSwgISh2b2lkIDAgIT09IGkgJiYgKGUuZXhwb3J0cyA9IGkpKQoJCX0pLmNhbGwodCwgbigxKSkKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJdmFyIGk7CgkJKGZ1bmN0aW9uKGEpIHsKCQkJInVzZSBzdHJpY3QiOwoJCQlpID0gZnVuY3Rpb24oKSB7CgkJCQl2YXIgZSA9IG4oOSksCgkJCQkJdCA9IG4oNjApLAoJCQkJCWkgPSBuKDY1KSwKCQkJCQlvID0gbig1NyksCgkJCQkJciA9IG4oNTgpOwoJCQkJcmV0dXJuIHsKCQkJCQl0aW1lT3V0OiA1LAoJCQkJCXRpbWVyOiBudWxsLAoJCQkJCXNlbmRUaW1lcjogbnVsbCwKCQkJCQlpbnZlbnRvcnk6IG51bGwsCgkJCQkJcHJpY2U6IG51bGwsCgkJCQkJc3BlY2lhbFNlbmRGbGFnOiAhMSwKCQkJCQloYXNSdW46ICExLAoJCQkJCWluaXQ6IGZ1bmN0aW9uKCkgewoJCQkJCQlpZiAoIXRoaXMuaGFzUnVuKSB7CgkJCQkJCQl0aGlzLmhhc1J1biA9ICEwOwoJCQkJCQkJdmFyIGUgPSB0aGlzLAoJCQkJCQkJCXQgPSAwOwoJCQkJCQkJZS50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkgewoJCQkJCQkJCWUuX3NldFByaWNlKCksIGUuX3NldEludmVudG9yeSgpLCArK3QsIChlLnNwZWNpYWxTZW5kRmxhZyB8fCB0ID4gZS50aW1lT3V0IHx8ICItMiIgIT0gZS5pbnZlbnRvcnkgJiYgIjAiICE9IGUucHJpY2UpICYmIChlLl90cnlTZW5kTW9uaXRvckRhdGEoKSwgY2xlYXJJbnRlcnZhbChlLnRpbWVyKSkKCQkJCQkJCX0sIDFlMykKCQkJCQkJfQoJCQkJCX0sCgkJCQkJX3RyeVNlbmRNb25pdG9yRGF0YTogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gdGhpcywKCQkJCQkJCXQgPSAwOwoJCQkJCQllLnNlbmRUaW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkgewoJCQkJCQkJaWYgKCsrdCwgdCA+IGUudGltZU91dCB8fCBudWxsICE9IGEuc2F2ZV9kcF9xdWVyeSkgewoJCQkJCQkJCXZhciBuID0gIiI7CgkJCQkJCQkJdHJ5IHsKCQkJCQkJCQkJbiA9ICJ0YW9iYW8iID09IGEuc2l0ZSA/IGEuc2F2ZV9kcF9xdWVyeS5leGFjdF9hcnIudGFvYmFvX3NhbWVfaWQgOiBhLnNhdmVfZHBfcXVlcnkubm93Lm5vd19kcF9pZAoJCQkJCQkJCX0gY2F0Y2ggKGkpIHsKCQkJCQkJCQkJaWYgKGEuZGVidWcpIHRocm93IGkKCQkJCQkJCQl9CgkJCQkJCQkJZS5fc2VuZE1vbml0b3JEYXRhKG4pLCBjbGVhckludGVydmFsKGUuc2VuZFRpbWVyKQoJCQkJCQkJfQoJCQkJCQl9LCAxZTMpCgkJCQkJfSwKCQkJCQlfc2VuZE1vbml0b3JEYXRhOiBmdW5jdGlvbih0KSB7CgkJCQkJCXZhciBpID0gdGhpcywKCQkJCQkJCW8gPSBuKDY3KS5zcGVjaWFsRmlsdGVyKCk7CgkJCQkJCW8gfHwgKG51bGwgPT0gaS5pbnZlbnRvcnkgJiYgKGkuaW52ZW50b3J5ID0gIi0yIiksIG51bGwgPT0gaS5wcmljZSAmJiAoaS5wcmljZSA9ICIwIiksIGUuZ2V0KGEuc2VydmVyICsgIi9icndleHQvbW9uaXRvcj9zaXRlPSIgKyBhLnNpdGUgKyAiJnN1YnNpdGVfaWQ9IiArIGEuc3Vic2l0ZV9pZCArICImZHBfaWQ9IiArIHQgKyAiJnByb3ZpbmNlX2lkPSIgKyBhLnByb3ZpbmNlX2lkICsgIiZ1cmw9IiArIGVuY29kZVVSSUNvbXBvbmVudChhLmRwLnVybCkgKyAiJnByaWNlPSIgKyBpLnByaWNlICsgIiZzdG9jaz0iICsgaS5pbnZlbnRvcnkgKyAiJnJhd3VybD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5sb2NhdGlvbi5ocmVmKSkpCgkJCQkJfSwKCQkJCQlfc2V0UHJpY2U6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IHRoaXMsCgkJCQkJCQluID0gYS5zaXRlLAoJCQkJCQkJciA9IGkuZ2V0U2l0ZUlkKG4pOwoJCQkJCQlyIHx8IChyID0gOTk5OSksIHRbcl0oZnVuY3Rpb24odCkgewoJCQkJCQkJdCAmJiB0ID4gMCA/IChlLnByaWNlID0gdCwgYS5kcC5vbGRQcmljZSA9IHQpIDogZS5wcmljZSA9IGEuZHAucHJpY2UsIGUucHJpY2UgfHwgKGUucHJpY2UgPSBvLmdldE9ubGluZVByaWNlKG4pKSwgInRhb2JhbyIgPT0gbiAmJiAiMCIgIT0gZS5wcmljZSAmJiAoZS5zcGVjaWFsU2VuZEZsYWcgPSAhMCkKCQkJCQkJfSkKCQkJCQl9LAoJCQkJCV9zZXRJbnZlbnRvcnk6IGZ1bmN0aW9uKCkgewoJCQkJCQl0aGlzLmludmVudG9yeSA9IHIuaW5pdChhLnNpdGUpCgkJCQkJfQoJCQkJfQoJCQl9LmNhbGwodCwgbiwgdCwgZSksICEodm9pZCAwICE9PSBpICYmIChlLmV4cG9ydHMgPSBpKSkKCQl9KS5jYWxsKHQsIG4oMSkpCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCSJ1c2Ugc3RyaWN0IjsKCgkJZnVuY3Rpb24gaShlLCB0LCBuKSB7CgkJCWZ1bmN0aW9uIGkoKSB7CgkJCQlmb3IgKHZhciBpID0gMDsgaSA8IGUubGVuZ3RoOyBpKyspIHsKCQkJCQl2YXIgbyA9IGVbaV0sCgkJCQkJCXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG8pOwoJCQkJCWlmIChyKSByZXR1cm4gYShyLnRleHRDb250ZW50LCB0LCBuKQoJCQkJfQoJCQkJcmV0dXJuIC0xCgkJCX0KCQkJcmV0dXJuIHQgPSB0IHx8ICIuIiwgbiA9IG4gfHwgIiwiLCBpCgkJfQoKCQlmdW5jdGlvbiBhKGUsIHQsIG4pIHsKCQkJaWYgKHQgPSB0IHx8ICIuIiwgbiA9IG4gfHwgIiwiLCAtMSA9PT0gZSkgcmV0dXJuIC0xOwoJCQlpZiAoZSAmJiAoZSA9IGUudG9TdHJpbmcoKS5yZXBsYWNlKG4sICIiKSwgdCAmJiAiLiIgIT09IHQgJiYgKGUgPSBlLnJlcGxhY2UodCwgIi4iKSksIGUgPSBlLm1hdGNoKC9bMC05Ll0rLykpKSB0cnkgewoJCQkJcmV0dXJuIHBhcnNlRmxvYXQoZVswXSkKCQkJfSBjYXRjaCAoaSkgewoJCQkJcmV0dXJuIC0xCgkJCX0KCQkJcmV0dXJuIC0xCgkJfQoKCQlmdW5jdGlvbiBvKGUpIHsKCQkJZnVuY3Rpb24gdCh0KSB7CgkJCQlmdW5jdGlvbiBpKGUpIHsKCQkJCQluKDYxKS5zZW5kUHJpQ2hlY2soW3sKCQkJCQkJdXJsOiBkb2N1bWVudC5sb2NhdGlvbi5ocmVmLAoJCQkJCQlwcmljZTogZSwKCQkJCQkJY3JjMzI6ICIiCgkJCQkJfV0pLCB0KGUpCgkJCQl9CgkJCQl2YXIgYSA9IGUoKTsgLSAxID09PSBhID8gc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQlpKGUoKSkKCQkJCX0sIDNlMykgOiBpKGEpCgkJCX0KCQkJcmV0dXJuIHQKCQl9CgoJCWZ1bmN0aW9uIHIoZSkgewoJCQlyZXR1cm4gbyhpKGUpKQoJCX0KCQl2YXIgcyA9IHt9OwoJCXNbMV0gPSByKFsiI3ByaWNlYmxvY2tfZGVhbHByaWNlIiwgIiNwcmljZWJsb2NrX3NhbGVwcmljZSIsICIjcHJpY2VibG9ja19vdXJwcmljZSIsICIjdG1tU3dhdGNoZXMgLmEtYnV0dG9uLWlubmVyICAuYS1jb2xvci1zZWNvbmRhcnkgc3BhbiIsICIjc29sZEJ5VGhpcmRQYXJ0eSAub2ZmZXItcHJpY2UiLCAiI29scF9mZWF0dXJlX2RpdiAuYS1jb2xvci1wcmljZSIsICIuYS1jb2xvci1wcmljZSJdKSwgc1syXSA9IHIoWyIjZGQtcHJpY2UiLCAiI2RfcHJpY2UiXSksIHNbM10gPSByKFsiI2pkLXByaWNlIiwgIi5wLXByaWNlIC5wcmljZSIsICIjcHJpY2UiLCAiLnByaWNlIl0pLCBzWzRdID0gbyhmdW5jdGlvbihlKSB7CgkJCXZhciB0ID0gZS5xdWVyeVNlbGVjdG9yKCIjb21IaWRkZW5QcmljZSIpLnZhbHVlOwoJCQlyZXR1cm4gYSh0KQoJCX0pLCBzWzEwXSA9IHIoWyIjZGxfc2VsbF9wcmljZSJdKSwgc1sxMl0gPSByKFsiZGl2LnByb21vdGlvbi1jb250YWluZXIgPiBwOm50aC1jaGlsZCgyKSJdKSwgc1sxM10gPSByKFsiLmRpdHktcHJpY2UtYyJdKSwgc1sxNF0gPSByKFsiLnByaWNlMS5zYWxlUHJpY2VfYmlnIl0pLCBzWzE3XSA9IHIoWyIubGVmdFByaWNlIl0pLCBzWzE4XSA9IHIoWyIubWVzc2FnZV9wcmljZSIsICIubWVzc2FnZV90aXRsZV9uYW1lX2IiXSksIHNbMTldID0gcihbIi50ZWh1aU1vbmV5Il0pLCBzWzIxXSA9IHIoWyIjcHJvZFByaWNlQWoiXSksIHNbMjJdID0gcihbIiNwcm9kdWN0X3ByaWNlIl0pLCBzWzI0XSA9IHIoWyIuZC1yZWFsLXByaWNlIl0pLCBzWzI1XSA9IHIoWyIubWFpbnByaWNlIl0pLCBzWzI4XSA9IHIoWyIjcHJkUHJpY2UiLCAiI3NhbGVQcmljZSJdKSwgc1szMV0gPSByKFsiI3ByaWNlbm93IiwgIiNjdXJyZW50X3ByaWNlIiwgIiNkZXRhaWxfcHJvbV9wcmljZSIsICIiXSksIHNbMzJdID0gcihbIiNidXlQcmljZSJdKSwgc1szM10gPSByKFsiI2xleW91amlhIiwgIi5pdGVtX2wgLmZvbnRfbnVtIl0pLCBzWzM0XSA9IHIoWyIuc2VsUHJpY2UiXSksIHNbMzVdID0gcihbIiNwcmRfcHJpY2VfZGl2Il0pLCBzWzQwXSA9IHIoWyIuR2Rfc2hvcF9QcmljZSBiIl0pLCBzWzQxXSA9IHIoWyIuanMuanNqIGIiXSksIHNbNDNdID0gcihbIi5wcmljZSJdKSwgc1s0NV0gPSByKFsiLnByaWNlIC5hY3Rpb24tcHJpY2UiXSksIHNbNTBdID0gcihbInByb19wcm9tb3Rpb25fcHJpY2UiLCAiI3Byb19tYWxsX3ByaWNlIl0pLCBzWzUxXSA9IHIoWyIjU0dvb2RzUHJpY2UiXSksIHNbNTRdID0gcihbIiNtcHJpY2UiXSksIHNbNjBdID0gcihbIiN4eGpnIC5wcm9fYnV5X3NlbiIsICIjeHhqZyAucHJvX2J1eV9kaXMgb3B0aW9uOmxhc3QtY2hpbGQiXSksIHNbNjFdID0gcihbIi50ZWh1aWppYSBpOmxhc3QtY2hpbGQgLnRoaXNwcmljZSIsICIucHJpY2VMaXN0Omxhc3QtY2hpbGQgc3BhbiJdKSwgc1s2Ml0gPSByKFsiLmluZm8tbWFpbiAucHJpY2UtbiBiIl0pLCBzWzY2XSA9IHIoWyIuWVRQcmljZSJdKSwgc1s3Ml0gPSByKFsiLnByaWNlX25vdyIsICIiXSksIHNbNzNdID0gcihbIiNwcm9kdWN0U2hvd1ByaWNlIl0pLCBzWzc1XSA9IHIoWyIuZnNrX2dvb2RzX3ByaWNlIiwgIi5nZF9wcmljZSJdKSwgc1s4M10gPSByKFsiLnRtLXByb21vLXByaWNlIC50bS1wcmljZSIsICIudG0tcHJpY2UiXSksIHNbODRdID0gcihbIi5idXlfcHJpIiwgIi5keW5hbWljLXByaWNlIl0pLCBzWzg2XSA9IHIoWyIucHJpY2VfbnVtIiwgIi5kZWFsX2FjY291dF90d28iLCAiLmp1bWVpX3ByaWNlIiwgIi5wcmljZV9ub3ciXSksIHNbOTNdID0gcihbIiN5aXRpYW5QcmljZSJdKSwgc1s5NF0gPSByKFsiLmdvb2RfcHJpY2UiXSksIHNbOTddID0gcihbIiNwcmljZV9iaWcgZW0iLCAiLkZGQSBlbSJdKSwgc1s5OF0gPSByKFsiLnAtcHJpY2UiXSksIHNbOTldID0gcihbIiNzaG9wcHJpY2UiXSksIHNbMTAwXSA9IHIoWyIjc2FsZVByaWNlVGV4dCJdKSwgc1sxMDFdID0gcihbIi5teVByaWNlIGVtIl0pLCBzWzEwMl0gPSByKFsiI2ppYWdlIC5udW1iIl0pLCBzWzEwM10gPSByKFsiI25vd1ByaWNlIHN0cm9uZyJdKSwgc1sxMDhdID0gcihbIiNzcFByaWNlIl0pLCBzWzEwOV0gPSByKFsiLnNrdS1wcmljZSJdKSwgc1sxMTBdID0gcihbIiNiay1kLXByaWNlIl0pLCBzWzExNV0gPSByKFsiLm1wcmljZSIsICIucF9tcCJdKSwgc1sxMjNdID0gcihbIiNKX1Byb21vUHJpY2VOdW0iLCAiI0pfU3RyUHJpY2UiXSksIHNbMTI1XSA9IHIoWyIuZFByaWNlIl0pLCBzWzEyNl0gPSByKFsiI3ByaWNlLXNmIC5wcmljZSJdKSwgc1sxMjddID0gcihbIiNpbnRyb19wcmljZSAucHJpY2UiXSksIHNbMTI4XSA9IHIoWyIjcHJpY2UiXSksIHNbMTI5XSA9IHIoWyIjSi1zYWxlLXByaWNlIiwgIi5KLXByaWNlIl0pLCBzWzEzNF0gPSByKFsiI3Byby1wcmljZSJdKSwgc1sxMzVdID0gcihbIi5kZV9pbmZvX3ByaWNlIl0pLCBzWzEzOF0gPSByKFsiI0VDU19TSE9QUFJJQ0UiXSksIHNbMTQwXSA9IHIoWyIuZ3JvdXBkZXRhaWxfbm93cHJpY2UiLCAiLmRzaW5nbGVfbm93cHJpY2UiXSksIHNbMTQxXSA9IHIoWyIjamlhbnlpUHJpY2UiXSksIHNbMTQyXSA9IHIoWyIuc3BhcmUwMiJdKSwgc1sxNDVdID0gcihbIiNwZHBQcmljZSAuZGlzY291bnQiLCAiI3BkcFByaWNlIiwgIi5kaXNjb3UiXSksIHNbMTQ2XSA9IHIoWyIuYWN0aW9uLXByaWNlIl0pLCBzWzE0N10gPSByKFsiI3Bvc3RQcmljZSJdKSwgc1sxNTJdID0gcihbIi5kZXRhaWwtaXRlbS1nb2xkIl0pLCBzWzE1M10gPSByKFsiI2c1X3ByaWNlIl0pLCBzWzE1NF0gPSByKFsiLnByb21vdGVfcHJpY2UiXSksIHNbMTU1XSA9IHIoWyIuY3VyLXByaWNlIl0pLCBzWzE1Nl0gPSByKFsiI3NlY29vUHJpY2VKcyJdKSwgc1sxNTddID0gcihbIiNwcm9kX3ByaWNlIl0pLCBzWzE1OF0gPSByKFsiLnByaWNlMjQiXSksIHNbMTY0XSA9IHIoWyIuamdfY3Vob25nIiwgIiNteWpnY3Vob25nIl0pLCBzWzE2N10gPSByKFsiLkpfbWlfZ29vZHNQcmljZSIsICIubW9uZXkiLCAiLkpfY3VycmVudFByaWNlIiwgIkpfcHJvUHJpY2UiLCAiLnByaWNlIl0pLCBzWzE2OF0gPSByKFsiLmxldHZfcHJpY2UiLCAiI2pzX3ByaWNlIl0pLCBzWzE3NF0gPSByKFsiLnByby1wcmljZSJdKSwgc1sxODBdID0gcihbIiNKX3Byb2R1Y3RfdmFsdWUiLCAiLmluZm8tcHJpY2UiXSksIHNbMTgyXSA9IHIoWyIuZGV0YWlsX3ByaWNlIiwgIi5jb3Vwb25fcHJpY2UiXSksIHNbMTg0XSA9IHIoWyIucHJvbW90aW9uLXByaWNlIC5wcmljZSIsICIucHJpY2UiXSksIHNbMTg4XSA9IHIoWyIjZ29vZHNQcmljZSJdKSwgc1sxOTRdID0gcihbIi5hY3Rpb24tcHJpY2UiXSksIHNbMTk1XSA9IHIoWyIjaXRlbV9wcmljZSJdKSwgc1sxOTZdID0gcihbIi5wcmljZSBzdHJvbmciXSksIHNbMTk3XSA9IHIoWyIubXNfcHJpY2Ugc3Ryb25nIl0pLCBzWzIwMl0gPSByKFsiI0pfTm93UHJpY2UiXSksIHNbMjAzXSA9IHIoWyIjSl9Ob3dQcmljZSJdKSwgc1syMTBdID0gcihbIiNnX3ByaWNlIl0pLCBzWzIxM10gPSByKFsiI29mZmVyUHJpY2UiXSksIHNbMjIxXSA9IHIoWyIucHJpY2UiXSksIHNbMjIyXSA9IHIoWyIjcnByaWNlIl0pLCBzWzIyM10gPSByKFsiLmN1cnJlbnRQcmljZSJdKSwgc1syMjZdID0gcihbIi5tYWluUHJpY2UiXSksIHNbMjI3XSA9IHIoWyIuc2FsZS1wcmljZSJdKSwgc1syMjhdID0gc1sxXSwgc1syMjldID0gc1sxXSwgc1syMzBdID0gcihbIiNwcmNJc3VtIl0pLCBzWzIzMV0gPSByKFsiLnAtY3VycmVudC1wcmljZSAucC1wcmljZSJdKSwgc1syMzJdID0gcihbIi5hY3Rpb24tcHJpY2UiXSksIHNbMjMzXSA9IHIoWyIuanMtcGRwTG9jYWxQcmljZSJdKSwgc1syMzRdID0gcihbIiNzYWxlcHJpY2VfdmFsdWUiXSksIHNbMjM1XSA9IHIoWyIuZGV0YWlsX3R6aCBzcGFuIl0pLCBzWzIzNl0gPSByKFsiLnByb19wcmljZSBzcGFuIl0pLCBzWzIzN10gPSByKFsiLnZpZXctU2t1UHJpY2VJbmZvIC5wcmljZSIsICIudmlldy1Ta3VQcmljZUluZm8gaSJdKSwgc1syMzhdID0gcihbIiNwcmljZVNsb3QgLnByaWNlIl0pLCBzWzIzOV0gPSByKFsiLnByb2R1Y3QtcHJpY2UiXSksIHNbMjQxXSA9IHIoWyIucHJpY2VCbG9jayAuc2FsZVByaWNlIiwgIi5wcmljZUJsb2NrIl0pLCBzWzI0Ml0gPSByKFsiLm5nLWJpbmRpbmcud2FnLWJvbGQiXSksIHNbMjQzXSA9IHIoWyIjZGlzcGxheVByaWNlIl0pLCBzWzI0NF0gPSByKFsiLnByaWNlLW1haW4tcHJvZHVjdCAucHJpY2UtY3VycmVudCIsICIucHJpY2UtY3VycmVudCJdKSwgc1syNDVdID0gcihbIiNmaW5hbC1wcmljZSJdKSwgc1syNDZdID0gbyhpKFsiI3ByaWNlYmxvY2tfZGVhbHByaWNlIiwgIiNwcmljZWJsb2NrX291cnByaWNlIiwgIiN0bW1Td2F0Y2hlcyAuYS1idXR0b24taW5uZXIgIC5hLWNvbG9yLXNlY29uZGFyeSBzcGFuIiwgIiNzb2xkQnlUaGlyZFBhcnR5IC5vZmZlci1wcmljZSIsICIjb2xwX2ZlYXR1cmVfZGl2IC5hLWNvbG9yLXByaWNlIl0sICIsIiwgIi4iKSksIHNbMjQ3XSA9IHIoWyIjcHJpY2luZyB0ZC5oaWdobGlnaHQiXSksIHNbMjQ4XSA9IHIoWyIucHJvZHVjdC1wcmljZSAucHJpY2UiXSksIHNbMjQ5XSA9IHIoWyIjanMtcHJvZHVjdC1pbmZvcm1hdGlvbi1wcmljZSAucHJvZHVjdC1jdXJyZW50LXByaWNlIiwgIi5tYWluLXByb2R1Y3QtZGV0YWlscyAuY29tcGFyZS1wcmljZV9fZGlzcGxheSJdKSwgc1syNTFdID0gcihbIi5wcm9kdWN0LXByaWNlLWNvbnRhaW5lciAucHJpY2Utc2FsZXMgIl0pLCBzWzI1Ml0gPSByKFsiLmRldGFpbC1wcmljZSIsICJzX2Rpc2NvdW50cHJpY2VuZXciLCAiLmN1dHByaWNlcG9zaXRpb24iXSksIHNbMjU2XSA9IHIoWyIjcHJpY2UiXSksIHNbMjU5XSA9IHIoWyIjUHJpY2UgLnByb2R1Y3RQcmljZSJdKSwgc1syNjBdID0gcihbIiNwcm9kdWN0UHJpY2UgLm5vd1ByaWNlIiwgIiNwcm9kdWN0UHJpY2UiXSksIHNbMjYxXSA9IHIoWyIjcGRwTWFpblByaWNlIC5wT3VyUHJpY2VNIiwgIiNwZHBTdWJQcmljZSAucFJldGFpbFByaWNlOm50aC1jaGlsZCgyKSIsICIucFJldGFpbFByaWNlIiwgIiNwZHBNYWluUHJpY2UiXSksIHNbMjYzXSA9IHIoWyIucHJpY2VTYWxlIl0pLCBzWzI2NF0gPSByKFsiLnByaWNlLXNldCJdKSwgc1syNjZdID0gc1sxXSwgc1syNjddID0gcihbIi5nb29kcy1kYXRhIC5nb29kcy1wcmljZSBzcGFuIl0pLCBzWzI2OF0gPSByKFsiLmdvb2RzLXByaWNlLXIxIHN0cm9uZyJdKSwgc1syNjldID0gcihbIiNwcm9kdWN0Uk1CIl0pLCBzWzI3MF0gPSByKFsiLmpfUHJpY2VOdW0iLCAiLnByaWNlIl0pLCBzWzI3MV0gPSByKFsiLnByaWNlIiwgIi5wcm9kdWN0X3ByaWNlX2NvbnQiXSksIHNbMjcyXSA9IHIoWyIuYWN0aW9uLXByaWNlIl0pLCBzWzI3M10gPSByKFsiLnByb2R1Y3RfdG9wX3Igc3Bhbi5mczIwIl0pLCBzWzI3NF0gPSByKFsiI2pTY2FyZVByaWNlIiwgIi5qRmlyc3RQcmljZSJdKSwgc1syNzVdID0gcihbIi5ybWItcHJpY2UiXSksIHNbMjc2XSA9IHIoWyIuUHJpY2UiXSksIHNbMjc3XSA9IHIoWyIjY3VyclByaWNlIl0pLCBzWzI3OV0gPSByKFsiLnByb2R1Y3RfcHJpY2UiLCAicHJpY2Vfcm1iIl0pLCBzWzI4MF0gPSByKFsiI2dvb2RzQ3VycmVudFByaWNlIiwgIi5wcmRzYWxlIHN0cm9uZyJdKSwgc1syODFdID0gcihbIiNicVByaWNlIiwgIi5wcmljZSBzcGFuIl0pLCBzWzI4NV0gPSByKFsiLnByaWNlIC5jdXJyZW50Il0pLCBzWzI4Nl0gPSByKFsiLmotaXRlbS1ub3ctcHJpY2UiXSksIHNbMjg3XSA9IHIoWycueHByaWNlX3ZhbFtpdGVtcHJvcD0ibG93UHJpY2UiXSddKSwgc1syODhdID0gcihbIi5hY3Rpb24tcHJpY2UiXSksIHNbMjg5XSA9IHIoWyIuY3VycmVudF9wcmljZSJdKSwgc1syOTBdID0gcihbIi5wcmljZSJdKSwgc1syOTFdID0gcihbIiNwcmljZURpdiAubm93UHJpY2UiXSksIHNbMjkyXSA9IHIoWyIuaXRlbS1hY3RQcmljZSJdKSwgc1syOTRdID0gcihbIiNzYWxlUHJpY2VTcGFuIl0pLCBzWzI5NV0gPSByKFsiLnByaWNlLXNlbGwgLnByaWNlLW51bSJdKSwgc1syOTldID0gcihbIi5wcm9fcHJpY2UgLnByaWNlIl0pLCBzWzMwMF0gPSByKFsiI3ByaWNlRG9tSWQiXSksIHNbMzA1XSA9IHIoWyIuYXV0b1NoaXBQcmljZSIsICIuc2luZ2xlUHJpY2UiXSksIHNbMzA2XSA9IHIoWyIucHJvZHVjdC1wcmljZSBkaXYiXSksIHNbMzExXSA9IHIoWyIucHJvZHVjdC1mdWxsX19wcmljZSIsICIuc3BwLXByb2R1Y3RfX21pbmktYmFnLXByaWNlLXNpemUiXSksIHNbMzEzXSA9IHIoWyIjZGV0YWlscy1wcmljZSJdKSwgc1szMjhdID0gcihbIi5nb29kc3ByaWNlIl0pLCBzWzMzMF0gPSByKFsiI3lvdV9wYXkucHJpY2UiLCAiLnByaWNlIl0pLCBzWzMzN10gPSByKFsiLnByaWNlIl0pLCBzWzMzOF0gPSByKFsiLmpzLXByaWNlIl0pLCBzWzM0MF0gPSByKFsiLnNpbmdsZVByaWNlIl0pLCBzWzM0MV0gPSByKFsiLnByb2R1Y3QtcHJpY2UgLnByaWNlIl0pLCBzWzM0M10gPSByKFsiLmJvc2UtcHJpY2VfX3ByaWNlIl0pLCBzWzM0NF0gPSByKFsiLml0ZW0tcHJpY2UiXSksIHNbMzQ1XSA9IHIoWyIueXBZb3VQYXkiXSksIHNbMzQ3XSA9IHIoWyIjRmxhc2hQcmljZSJdKSwgc1szNDhdID0gcihbIi5nb29kcy1wcmljZSAucHJpY2UxIl0pLCBzWzM0OV0gPSByKFsiLmotcmV0YWlsLXByaWNlIl0pLCBzWzM1MV0gPSByKFsiLnRtX2pnICNFQ1NfU0hPUFBSSUNFIiwgIiNFQ1NfU0hPUFBSSUNFIl0pLCBzWzM1Ml0gPSByKFsiLnByaWNlLWIgLm5ldyJdKSwgc1szNTRdID0gcihbIi5kZXRhaWwtbGFzdC1wcmljZSJdKSwgc1szNTVdID0gcihbIi5wcmljZS1pdGVtLmN1cnJlbnQgLnZhbHVlIl0pLCBzWzM1Nl0gPSByKFsiLm0tcHJpY2UiXSksIHNbMzU3XSA9IHIoWyIucHJvZHVjdC1wcmljZSAucHJpY2UiXSksIHNbMzYyXSA9IHIoWyIuRGV0YWlsUHJpY2VDb250YWluIC5QcmljZU5vdyJdKSwgc1szNjNdID0gcihbIi5jdXJyZW50LXByaWNlIl0pLCBzWzM2NF0gPSByKFsiLnByaWNlIl0pLCBzWzM2NV0gPSBzWzI0Nl0sIHNbMzY2XSA9IHNbMV0sIHNbMzY3XSA9IHIoWyIuaXRlbUluZm8gLnByaWNlIl0pLCBzWzM2OF0gPSByKFsiI3NhbGVQcmljZUlkIl0pLCBzWzM2OV0gPSByKFsiI2pkLXByaWNlIl0pLCBzWzM3MF0gPSByKFsiI3NhbGVwcmljZSIsICIja2FsdWxpUHJpY2UiXSksIHNbMzcxXSA9IHIoWycjc2hvd19nb29kc19wcmljZSBbbmFtZT0iZ29vZHNfcmVhbF9wcmljZSJdJ10pLCBzWzM3Ml0gPSByKFsiLnByaWNlIl0pLCBzWzM3M10gPSByKFsiI2JiX3ByaWNlIl0pLCBzWzM3NF0gPSByKFsiI29wciJdKSwgc1szNzZdID0gcihbIiNKZ29vZHNQcmljZSJdKSwgc1szNzddID0gcihbIi5hY3Rpb24tcHJvX3ByaWNlIiwgImFjdGlvbi1wcmljZSIsICIucHJpY2UiXSksIHNbMzc4XSA9IHIoWyIuakZpcnN0UHJpY2UiXSksIHNbMzc5XSA9IHIoWyIuYWN0aW9uLXByaWNlIl0pLCBzWzM4MF0gPSByKFsiLm5vdy1wcmljZSJdKSwgc1szODFdID0gcihbIi5wcmljZUFuZFNlcnZpY2UgLnByaWNlIl0pLCBzWzM4Ml0gPSByKFsiLnNhbGUtcHJpY2UiXSksIHNbMzg1XSA9IHIoWyIjc2FsZVByaWNlIl0pLCBzWzM4Nl0gPSByKFsiLnByaWNlLWJveCAucHJpY2UtcHJvZHVjdCJdKSwgc1szODddID0gcihbIi5zcGFyZTAyX3ByaWNlIl0pLCBzWzM4OF0gPSByKFsiLmN1cnJlbnQtcHJpY2UiXSksIHNbMzg5XSA9IHIoWyIucHJpY2UtaW5mbyAuY3VycmVudC1wcmljZSJdKSwgc1szOTBdID0gcihbIi5zaG9wLW5hdHVyZTEgW3ByaWNlXSJdKSwgc1szOTFdID0gcihbIi5tLXByaWNlIl0pLCBzWzM5Ml0gPSByKFsiLm5vdy1wcmljZSJdKSwgc1szOTNdID0gcihbIi5jdXJyZW50LXByaWNlIl0pLCBzWzM5NF0gPSByKFsiLmN1cnJlbnQtcHJpY2UgLnByaWNlLW51bWJlciJdKSwgc1szOTVdID0gcihbIi5ybWItcHJpY2UiXSksIHNbMzk2XSA9IHIoWyIubm93IC5wcmljZSJdKSwgc1szOTddID0gcihbIi5EZXRhaWxQcmljZSAuUHJpY2VOb3ciXSksIHNbMzk4XSA9IHIoWyIubGFzdF9wcmljZXMgLnByaWNlIl0pLCBzWzM5OV0gPSByKFsiLnByaWNlLW51bWJlciJdKSwgc1s0MDBdID0gcihbIi5wcm9kdWN0LXByb3BlcnR5IC5jdXJyZW50LXByaWNlIl0pLCBzWzQwMV0gPSByKFsiLnByb2R1Y3Qtc2hvcCAuUHJpY2VOb3ciXSksIHNbNDAyXSA9IHIoWyIucHJpY2UtbnVtYmVyIl0pLCBzWzQwM10gPSBvKGkoWyIucHJpY2UtcHJvZHVjdGRlc2MiXSwgIiwiLCAiLiIpKSwgc1s0MDRdID0gcihbIi5wcmljZS1jdXJyZW50Il0pLCBzWzQwNV0gPSByKFsiLnByaWNlLWluZm8gLnByaWNlIl0pLCBzWzQwNl0gPSByKFsiLmQtcHJpY2UiXSksIHNbNDA3XSA9IHIoWyIuZ29vZHMtcHJpY2UiXSksIHNbNDA4XSA9IHIoWyIjcHJvZHVjdC1zdW1tYXJ5IC5wcmljZSJdKSwgc1s0MDldID0gcihbIi5wcmljZV9zYWxlIl0pLCBzWzQxMF0gPSByKFsiLnNhbGVQcmljZSIsICIubm93UHJpY2UiXSksIHNbNDExXSA9IHIoWyIjc2t1UHJpY2UiXSksIHNbNDEyXSA9IHIoWyIjaXRlbS1wcmljZSAuZm9udC1ib2xkIiwgIiNpdGVtLXByaWNlIl0pLCBzWzQxM10gPSByKFsiI3Byb2R1Y3RQcmljZUluZm8gLm1fcHJpY2UiXSksIHNbNDE0XSA9IHIoWyIud2ItcHJpY2Ugc3BhbiJdKSwgc1s0MTVdID0gcihbIi5wcm9kdWN0LXByaWNlIC5wcmljZSJdKSwgc1s0MTZdID0gcihbIiNwcmljZSJdKSwgc1s0MTddID0gcihbIi5zcGVjaWFsLXByaWNlIC5wcmljZSIsICIucHJpY2UiXSksIHNbNDE4XSA9IHIoWyIuZmluYWwiLCAiLmhlcmVfcHJpY2Ugc3Ryb25nIl0pLCBzWzQxOV0gPSByKFsiLm1hcmtldC1wcmljZSJdKSwgc1s0MjBdID0gcihbIiNzYWxlUHJpY2UiXSksIHNbNDIzXSA9IHIoWyIucHJpY2UiXSksIHNbNDI0XSA9IHIoWyIucHJpY2UtY3VycmVudCIsICIucmVndWxhci1wcmljZSJdKSwgc1s0MjddID0gcihbIi5yZWRTYWxlUHJpY2UiLCAiLnByb2R1Y3QtcHJpY2UtYmlnIC5wcmljZS13cmFwcGVyIl0pLCBzWzQyOF0gPSByKFsiLm1vbmV0YXJ5LXByaWNlLXZhbHVlIl0pLCBzWzQyOV0gPSBzWzQyN10sIHNbNDMwXSA9IHIoWyIubnVtX3NwYW4iXSksIHNbNDMxXSA9IHIoWyIjbWFsbF9wcmljZSJdKSwgc1s0MzJdID0gcihbIiNwcmljZV9jdXJyZW50Il0pLCBzWzQzM10gPSByKFsiLmFjdGlvbi1wcmljZSJdKSwgc1s0MzRdID0gcihbIi5wcmljZSJdKSwgc1s0MzVdID0gcihbIi5nb29kc3ByaWNlIl0pLCBzWzk5OTldID0gZnVuY3Rpb24oZSkgewoJCQllKCkKCQl9LCBlLmV4cG9ydHMgPSBzCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCShmdW5jdGlvbih0LCBpLCBhKSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJdmFyIG8sIHIsIHMgPSBuKDExKSwKCQkJCWwgPSBuKDU3KSwKCQkJCWMgPSBuKDEzKSwKCQkJCWQgPSBuKDI2KSwKCQkJCXAgPSB7CgkJCQkJY3JjYXJyOiBbXQoJCQkJfSwKCQkJCWggPSB7CgkJCQkJeWloYW9kaWFuOiBbCgkJCQkJCVsiLnByb0ltZyBhLmltZyIsICIucHJvUHJpY2U+ZW0ubnVtIl0KCQkJCQldLAoJCQkJCXN1bmluZzogWwoJCQkJCQlbIi5pbWctYmxvY2sgYS5zZWxsUG9pbnQiLCAiLnJlcy1pbmZvIC5wcmljZSJdCgkJCQkJXQoJCQkJfSwKCQkJCXUgPSB7CgkJCQkJeWloYW9kaWFuOiAzMSwKCQkJCQlzdW5pbmc6IDI1CgkJCQl9LAoJCQkJbSA9IHsKCQkJCQl5aWhhb2RpYW46ICIuY2xlYXJmaXg+I3BsaXN0IiwKCQkJCQlzdW5pbmc6ICIuc2VhcmNoLW1haW4iCgkJCQl9LAoJCQkJZiA9IGZ1bmN0aW9uKGUsIG4sIGEpIHsKCQkJCQlmb3IgKHZhciBvID0gW10sIHIgPSB0KGUpLmxlbmd0aCwgcyA9IDA7IHIgPiBzOyBzKyspIHsKCQkJCQkJdmFyIGwgPSB0KGUpLmVxKHMpLmZpbmQobikuZXEoMCksCgkJCQkJCQljID0gdChlKS5lcShzKS5maW5kKGEpLmVxKDApOwoJCQkJCQlpZiAobCAmJiBjKSB7CgkJCQkJCQl2YXIgZCA9IGwuYXR0cigiaHJlZiIpIHx8ICIiLAoJCQkJCQkJCWggPSBjLnRleHQoKSwKCQkJCQkJCQl1ID0gXyhsKTsKCQkJCQkJCWlmIChnKGQpKSBjb250aW51ZTsKCQkJCQkJCWlmIChkID0gaShkKSwgZCAmJiBoICYmIHUpIHsKCQkJCQkJCQlpZiAocC5jcmNhcnIuaW5kZXhPZiAmJiAtMSA9PT0gcC5jcmNhcnIuaW5kZXhPZih1KSAmJiAieCIgIT09IHUpIHAuY3JjYXJyLnB1c2godSk7CgkJCQkJCQkJZWxzZSB7CgkJCQkJCQkJCWlmICgieCIgIT09IHUpIGNvbnRpbnVlOwoJCQkJCQkJCQl1ID0gIiIKCQkJCQkJCQl9CgkJCQkJCQkJby5wdXNoKHsKCQkJCQkJCQkJdXJsOiBkLAoJCQkJCQkJCQlwcmljZTogaCwKCQkJCQkJCQkJY3JjMzI6IHUKCQkJCQkJCQl9KQoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJCXJldHVybiBvCgkJCQl9LAoJCQkJZyA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlyZXR1cm4gZS5pbmRleE9mKCIiICsgYS5leHROYW1lKSA+IC0xID8gITAgOiAieWloYW9kaWFuIiA9PSBhLnNpdGUgJiYgKGUuaW5kZXhPZigidHJhY2tlci55aGQuY29tIikgPiAtMSB8fCAtMSA9PSBlLmluZGV4T2YoIml0ZW0ueWhkLmNvbSIpKSA/ICEwIDogIjM2MGJ1eSIgPT0gYS5zaXRlICYmIC0xID09IGUuaW5kZXhPZigiaXRlbS5qZC5jb20iKSA/ICEwIDogITEKCQkJCX0sCgkJCQlpID0gZnVuY3Rpb24oZSkgewoJCQkJCWlmIChlKSB7CgkJCQkJCXZhciB0ID0gZS5pbmRleE9mKCIjIikgPiAtMTsKCQkJCQkJcmV0dXJuIHQgJiYgKGUgPSBlLnNsaWNlKDAsIHQpKSwgMCA9PT0gZS5pbmRleE9mKCIvLyIpID8gImh0dHA6IiArIGUgOiAwID09PSBlLmluZGV4T2YoIi8iKSA/ICIiICsgbG9jYXRpb24uaG9zdCArIGUgOiBlCgkJCQkJfQoJCQkJfSwKCQkJCV8gPSBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIG4gPSAiIjsKCQkJCQlzd2l0Y2ggKGEuc2l0ZSkgewoJCQkJCQljYXNlICJ5aWhhb2RpYW4iOgoJCQkJCQkJdmFyIGkgPSB0KGUpLmF0dHIoImlkIikubWF0Y2goL3BkbGluazFfKFxkKykvKTsKCQkJCQkJCWkgJiYgKG4gPSBpWzFdKTsKCQkJCQkJCWJyZWFrOwoJCQkJCQljYXNlICJzdW5pbmciOgoJCQkJCQkJbiA9IHQoZSkucGFyZW50cygiLndyYXAiKS5maW5kKCJpbnB1dC5oaWRlbkluZm8iKS5hdHRyKCJkYXRhcHJvIikuc3BsaXQoInx8IilbMF07CgkJCQkJCQlicmVhazsKCQkJCQkJZGVmYXVsdDoKCQkJCQkJCW4gPSAieCIKCQkJCQl9CgkJCQkJcmV0dXJuIG4KCQkJCX0sCgkJCQl4ID0gZnVuY3Rpb24oZSkgewoJCQkJCWZvciAodmFyIG4gPSBoW2Euc2l0ZV0sIGkgPSBlLmxlbmd0aCwgbyA9IDA7IGkgPiBvOyBvKyspCgkJCQkJCWZvciAodmFyIHIgPSBlW29dLCBzID0gMDsgcyA8IG4ubGVuZ3RoOyBzKyspIHsKCQkJCQkJCXZhciBsID0gbltzXSwKCQkJCQkJCQljID0gdChyICsgIiAiICsgbFswXSksCgkJCQkJCQkJZCA9IHQociArICIgIiArIGxbMV0pOwoJCQkJCQkJaWYgKGMubGVuZ3RoICYmIGQubGVuZ3RoKSByZXR1cm4gZihyLCBsWzBdLCBsWzFdKQoJCQkJCQl9CgkJCQl9LAoJCQkJdyA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlpZiAoMCAhPT0gZS5sZW5ndGgpIHsKCQkJCQkJdmFyIHQgPSBsLmdldFN1YlN0YXRpb25JZChhLmRwLnNpdGUpLAoJCQkJCQkJaSA9IHsKCQkJCQkJCQlwcm92aW5jZV9pZDogdCwKCQkJCQkJCQlpbmZvOiBlCgkJCQkJCQl9OwoJCQkJCQlkKCJnZXRMaXN0SW5mb19pc19zZW5kIiArIGEudW5pb24gKyAiX3NpdGUiICsgYS5zaXRlKSwgYy5sb2coImdldExpc3RJbmZvX2lzX2ludG8iKSwgaSA9IG4oNjMpLmdaaXAoaSk7CgkJCQkJCXZhciBvID0gdVthLnNpdGVdIHx8IHUubm93U2l0ZSB8fCByOwoJCQkJCQlpZiAod2luZG93LlhNTEh0dHBSZXF1ZXN0KSB0cnkgewoJCQkJCQkJdmFyIHMgPSBuZXcgWE1MSHR0cFJlcXVlc3Q7CgkJCQkJCQlzLm9wZW4oIlBPU1QiLCBhLnNlcnZlciArICIvZXh0ZW5zaW9uP2FjPXNlbmRMaXN0SW5mbyZzaXRlX2lkPSIgKyBvICsgIiZ1PSIgKyBhLnVuaW9uKSwgcy5zZW5kKGkpLCBjLmxvZygi5a6e5pe25oqT5Y+W5Y+R6YCB6K+35rGCIikKCQkJCQkJfSBjYXRjaCAocCkge30KCQkJCQl9CgkJCQl9LAoJCQkJdiA9IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gdCgiIiArIG1bYS5zaXRlXSlbMF07CgkJCQkJZSAmJiBlLmFkZEV2ZW50TGlzdGVuZXIgJiYgZS5hZGRFdmVudExpc3RlbmVyKCJET01TdWJ0cmVlTW9kaWZpZWQiLCBmdW5jdGlvbigpIHsKCQkJCQkJY2xlYXJUaW1lb3V0KG8pLCBvID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJCXZhciBlID0geChwLnNlbGVjdG9ycyk7CgkJCQkJCQkwICE9PSBlLmxlbmd0aCAmJiB3KGUpCgkJCQkJCX0sIDFlMykKCQkJCQl9LCAhMSkKCQkJCX0sCgkJCQliID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJCXUubm93U2l0ZSA9IGUsIHcodCkKCQkJCX07CgkJCWUuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7CgkJCQlpZiAoIWxvY2F0aW9uLmhvc3QubWF0Y2goL15tXC4vKSkKCQkJCQlpZiAoaFthLnNpdGVdKSB7CgkJCQkJCXZhciBlID0gZnVuY3Rpb24oKSB7CgkJCQkJCQl2YXIgZSA9IHMuY2hlY2soKTsKCQkJCQkJCXJldHVybiBwLnNlbGVjdG9ycyA9IGUsICFlIHx8IGUgJiYgIWUubGVuZ3RoID8gewoJCQkJCQkJCXY6IHZvaWQgMAoJCQkJCQkJfSA6IHZvaWQgc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJCQl2YXIgdCA9IHgoZSk7CgkJCQkJCQkJMCAhPT0gdC5sZW5ndGggJiYgKHcodCksIHYoKSkKCQkJCQkJCX0sIDFlMykKCQkJCQkJfSgpOwoJCQkJCQlpZiAoIm9iamVjdCIgPT0gdHlwZW9mIGUpIHJldHVybiBlLnYKCQkJCQl9IGVsc2UgdHJ5IHsKCQkJCQkJbig2NSkuaW5pdChiKQoJCQkJCX0gY2F0Y2ggKHQpIHsKCQkJCQkJZCgibGlzdEluZm9FcnJvcjoiICsgSlNPTi5zdHJpbmdpZnkodCkpCgkJCQkJfQoJCQl9LCBlLmV4cG9ydHMuc2VuZFByaUNoZWNrID0gZnVuY3Rpb24oZSkgewoJCQkJciA9IG4oNjUpLmdldFNpdGVJZChhLnNpdGUpLCB3KGUpCgkJCX0KCQl9KS5jYWxsKHQsIG4oNiksIG4oNjIpLCBuKDEpKQoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQlmdW5jdGlvbiBuKCkgewoJCQljID0gITEsIHIubGVuZ3RoID8gbCA9IHIuY29uY2F0KGwpIDogZCA9IC0xLCBsLmxlbmd0aCAmJiBpKCkKCQl9CgoJCWZ1bmN0aW9uIGkoKSB7CgkJCWlmICghYykgewoJCQkJdmFyIGUgPSBzZXRUaW1lb3V0KG4pOwoJCQkJYyA9ICEwOwoJCQkJZm9yICh2YXIgdCA9IGwubGVuZ3RoOyB0OykgewoJCQkJCWZvciAociA9IGwsIGwgPSBbXTsgKytkIDwgdDspIHIgJiYgcltkXS5ydW4oKTsKCQkJCQlkID0gLTEsIHQgPSBsLmxlbmd0aAoJCQkJfQoJCQkJciA9IG51bGwsIGMgPSAhMSwgY2xlYXJUaW1lb3V0KGUpCgkJCX0KCQl9CgoJCWZ1bmN0aW9uIGEoZSwgdCkgewoJCQl0aGlzLmZ1biA9IGUsIHRoaXMuYXJyYXkgPSB0CgkJfQoKCQlmdW5jdGlvbiBvKCkge30KCQl2YXIgciwgcyA9IGUuZXhwb3J0cyA9IHt9LAoJCQlsID0gW10sCgkJCWMgPSAhMSwKCQkJZCA9IC0xOwoJCXMubmV4dFRpY2sgPSBmdW5jdGlvbihlKSB7CgkJCXZhciB0ID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTsKCQkJaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKQoJCQkJZm9yICh2YXIgbiA9IDE7IG4gPCBhcmd1bWVudHMubGVuZ3RoOyBuKyspIHRbbiAtIDFdID0gYXJndW1lbnRzW25dOwoJCQlsLnB1c2gobmV3IGEoZSwgdCkpLCAxICE9PSBsLmxlbmd0aCB8fCBjIHx8IHNldFRpbWVvdXQoaSwgMCkKCQl9LCBhLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbigpIHsKCQkJdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSkKCQl9LCBzLnRpdGxlID0gImJyb3dzZXIiLCBzLmJyb3dzZXIgPSAhMCwgcy5lbnYgPSB7fSwgcy5hcmd2ID0gW10sIHMudmVyc2lvbiA9ICIiLCBzLnZlcnNpb25zID0ge30sIHMub24gPSBvLCBzLmFkZExpc3RlbmVyID0gbywgcy5vbmNlID0gbywgcy5vZmYgPSBvLCBzLnJlbW92ZUxpc3RlbmVyID0gbywgcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBvLCBzLmVtaXQgPSBvLCBzLmJpbmRpbmcgPSBmdW5jdGlvbihlKSB7CgkJCXRocm93IG5ldyBFcnJvcigicHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQiKQoJCX0sIHMuY3dkID0gZnVuY3Rpb24oKSB7CgkJCXJldHVybiAiLyIKCQl9LCBzLmNoZGlyID0gZnVuY3Rpb24oZSkgewoJCQl0aHJvdyBuZXcgRXJyb3IoInByb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCIpCgkJfSwgcy51bWFzayA9IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gMAoJCX0KCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJInVzZSBzdHJpY3QiOwoJCXZhciBpID0gbig2NCk7CgkJZS5leHBvcnRzLmdaaXAgPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBpLmd6aXAoSlNPTi5zdHJpbmdpZnkoZSkpCgkJfSwgZS5leHBvcnRzLnVuR3ppcCA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIEpTT04ucGFyc2UoaS51bmd6aXAoZSkpCgkJfQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQl2YXIgaSwgaTsKCQkhIGZ1bmN0aW9uKHQpIHsKCQkJZS5leHBvcnRzID0gdCgpCgkJfShmdW5jdGlvbigpIHsKCQkJcmV0dXJuIGZ1bmN0aW9uIGUodCwgbiwgYSkgewoJCQkJZnVuY3Rpb24gbyhzLCBsKSB7CgkJCQkJaWYgKCFuW3NdKSB7CgkJCQkJCWlmICghdFtzXSkgewoJCQkJCQkJdmFyIGMgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBpICYmIGk7CgkJCQkJCQlpZiAoIWwgJiYgYykgcmV0dXJuIGkocywgITApOwoJCQkJCQkJaWYgKHIpIHJldHVybiByKHMsICEwKTsKCQkJCQkJCXZhciBkID0gbmV3IEVycm9yKCJDYW5ub3QgZmluZCBtb2R1bGUgJyIgKyBzICsgIiciKTsKCQkJCQkJCXRocm93IGQuY29kZSA9ICJNT0RVTEVfTk9UX0ZPVU5EIiwgZAoJCQkJCQl9CgkJCQkJCXZhciBwID0gbltzXSA9IHsKCQkJCQkJCWV4cG9ydHM6IHt9CgkJCQkJCX07CgkJCQkJCXRbc11bMF0uY2FsbChwLmV4cG9ydHMsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJCXZhciBuID0gdFtzXVsxXVtlXTsKCQkJCQkJCXJldHVybiBvKG4gPyBuIDogZSkKCQkJCQkJfSwgcCwgcC5leHBvcnRzLCBlLCB0LCBuLCBhKQoJCQkJCX0KCQkJCQlyZXR1cm4gbltzXS5leHBvcnRzCgkJCQl9CgkJCQlmb3IgKHZhciByID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgaSAmJiBpLCBzID0gMDsgcyA8IGEubGVuZ3RoOyBzKyspIG8oYVtzXSk7CgkJCQlyZXR1cm4gbwoJCQl9KHsKCQkJCTE6IFsKCQkJCQlmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJCSJ1c2Ugc3RyaWN0IjsKCgkJCQkJCWZ1bmN0aW9uIGkoZSkgewoJCQkJCQkJaWYgKCEodGhpcyBpbnN0YW5jZW9mIGkpKSByZXR1cm4gbmV3IGkoZSk7CgkJCQkJCQl0aGlzLm9wdGlvbnMgPSBsLmFzc2lnbih7CgkJCQkJCQkJbGV2ZWw6IHgsCgkJCQkJCQkJbWV0aG9kOiB2LAoJCQkJCQkJCWNodW5rU2l6ZTogMTYzODQsCgkJCQkJCQkJd2luZG93Qml0czogMTUsCgkJCQkJCQkJbWVtTGV2ZWw6IDgsCgkJCQkJCQkJc3RyYXRlZ3k6IHcsCgkJCQkJCQkJdG86ICIiCgkJCQkJCQl9LCBlIHx8IHt9KTsKCQkJCQkJCXZhciB0ID0gdGhpcy5vcHRpb25zOwoJCQkJCQkJdC5yYXcgJiYgdC53aW5kb3dCaXRzID4gMCA/IHQud2luZG93Qml0cyA9IC10LndpbmRvd0JpdHMgOiB0Lmd6aXAgJiYgdC53aW5kb3dCaXRzID4gMCAmJiB0LndpbmRvd0JpdHMgPCAxNiAmJiAodC53aW5kb3dCaXRzICs9IDE2KSwgdGhpcy5lcnIgPSAwLCB0aGlzLm1zZyA9ICIiLCB0aGlzLmVuZGVkID0gITEsIHRoaXMuY2h1bmtzID0gW10sIHRoaXMuc3RybSA9IG5ldyBwLCB0aGlzLnN0cm0uYXZhaWxfb3V0ID0gMDsKCQkJCQkJCXZhciBuID0gcy5kZWZsYXRlSW5pdDIodGhpcy5zdHJtLCB0LmxldmVsLCB0Lm1ldGhvZCwgdC53aW5kb3dCaXRzLCB0Lm1lbUxldmVsLCB0LnN0cmF0ZWd5KTsKCQkJCQkJCWlmIChuICE9PSBmKSB0aHJvdyBuZXcgRXJyb3IoZFtuXSk7CgkJCQkJCQlpZiAodC5oZWFkZXIgJiYgcy5kZWZsYXRlU2V0SGVhZGVyKHRoaXMuc3RybSwgdC5oZWFkZXIpLCB0LmRpY3Rpb25hcnkpIHsKCQkJCQkJCQl2YXIgYTsKCQkJCQkJCQlpZiAoYSA9ICJzdHJpbmciID09IHR5cGVvZiB0LmRpY3Rpb25hcnkgPyBjLnN0cmluZzJidWYodC5kaWN0aW9uYXJ5KSA6ICJbb2JqZWN0IEFycmF5QnVmZmVyXSIgPT09IGguY2FsbCh0LmRpY3Rpb25hcnkpID8gbmV3IFVpbnQ4QXJyYXkodC5kaWN0aW9uYXJ5KSA6IHQuZGljdGlvbmFyeSwgbiA9IHMuZGVmbGF0ZVNldERpY3Rpb25hcnkodGhpcy5zdHJtLCBhKSwgbiAhPT0gZikgdGhyb3cgbmV3IEVycm9yKGRbbl0pOwoJCQkJCQkJCXRoaXMuX2RpY3Rfc2V0ID0gITAKCQkJCQkJCX0KCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gYShlLCB0KSB7CgkJCQkJCQl2YXIgbiA9IG5ldyBpKHQpOwoJCQkJCQkJaWYgKG4ucHVzaChlLCAhMCksIG4uZXJyKSB0aHJvdyBuLm1zZzsKCQkJCQkJCXJldHVybiBuLnJlc3VsdAoJCQkJCQl9CgoJCQkJCQlmdW5jdGlvbiBvKGUsIHQpIHsKCQkJCQkJCXJldHVybiB0ID0gdCB8fCB7fSwgdC5yYXcgPSAhMCwgYShlLCB0KQoJCQkJCQl9CgoJCQkJCQlmdW5jdGlvbiByKGUsIHQpIHsKCQkJCQkJCXJldHVybiB0ID0gdCB8fCB7fSwgdC5nemlwID0gITAsIGEoZSwgdCkKCQkJCQkJfQoJCQkJCQl2YXIgcyA9IGUoIi4vemxpYi9kZWZsYXRlIiksCgkJCQkJCQlsID0gZSgiLi91dGlscy9jb21tb24iKSwKCQkJCQkJCWMgPSBlKCIuL3V0aWxzL3N0cmluZ3MiKSwKCQkJCQkJCWQgPSBlKCIuL3psaWIvbWVzc2FnZXMiKSwKCQkJCQkJCXAgPSBlKCIuL3psaWIvenN0cmVhbSIpLAoJCQkJCQkJaCA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsCgkJCQkJCQl1ID0gMCwKCQkJCQkJCW0gPSA0LAoJCQkJCQkJZiA9IDAsCgkJCQkJCQlnID0gMSwKCQkJCQkJCV8gPSAyLAoJCQkJCQkJeCA9IC0xLAoJCQkJCQkJdyA9IDAsCgkJCQkJCQl2ID0gODsKCQkJCQkJaS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQkJCXZhciBuLCBpLCBhID0gdGhpcy5zdHJtLAoJCQkJCQkJCW8gPSB0aGlzLm9wdGlvbnMuY2h1bmtTaXplOwoJCQkJCQkJaWYgKHRoaXMuZW5kZWQpIHJldHVybiAhMTsKCQkJCQkJCWkgPSB0ID09PSB+fnQgPyB0IDogdCA9PT0gITAgPyBtIDogdSwgInN0cmluZyIgPT0gdHlwZW9mIGUgPyBhLmlucHV0ID0gYy5zdHJpbmcyYnVmKGUpIDogIltvYmplY3QgQXJyYXlCdWZmZXJdIiA9PT0gaC5jYWxsKGUpID8gYS5pbnB1dCA9IG5ldyBVaW50OEFycmF5KGUpIDogYS5pbnB1dCA9IGUsIGEubmV4dF9pbiA9IDAsIGEuYXZhaWxfaW4gPSBhLmlucHV0Lmxlbmd0aDsKCQkJCQkJCWRvIHsKCQkJCQkJCQlpZiAoMCA9PT0gYS5hdmFpbF9vdXQgJiYgKGEub3V0cHV0ID0gbmV3IGwuQnVmOChvKSwgYS5uZXh0X291dCA9IDAsIGEuYXZhaWxfb3V0ID0gbyksIG4gPSBzLmRlZmxhdGUoYSwgaSksIG4gIT09IGcgJiYgbiAhPT0gZikgcmV0dXJuIHRoaXMub25FbmQobiksIHRoaXMuZW5kZWQgPSAhMCwgITE7CgkJCQkJCQkJKDAgPT09IGEuYXZhaWxfb3V0IHx8IDAgPT09IGEuYXZhaWxfaW4gJiYgKGkgPT09IG0gfHwgaSA9PT0gXykpICYmICgic3RyaW5nIiA9PT0gdGhpcy5vcHRpb25zLnRvID8gdGhpcy5vbkRhdGEoYy5idWYyYmluc3RyaW5nKGwuc2hyaW5rQnVmKGEub3V0cHV0LCBhLm5leHRfb3V0KSkpIDogdGhpcy5vbkRhdGEobC5zaHJpbmtCdWYoYS5vdXRwdXQsIGEubmV4dF9vdXQpKSkKCQkJCQkJCX0gd2hpbGUgKChhLmF2YWlsX2luID4gMCB8fCAwID09PSBhLmF2YWlsX291dCkgJiYgbiAhPT0gZyk7CgkJCQkJCQlyZXR1cm4gaSA9PT0gbSA/IChuID0gcy5kZWZsYXRlRW5kKHRoaXMuc3RybSksIHRoaXMub25FbmQobiksIHRoaXMuZW5kZWQgPSAhMCwgbiA9PT0gZikgOiBpID09PSBfID8gKHRoaXMub25FbmQoZiksIGEuYXZhaWxfb3V0ID0gMCwgITApIDogITAKCQkJCQkJfSwgaS5wcm90b3R5cGUub25EYXRhID0gZnVuY3Rpb24oZSkgewoJCQkJCQkJdGhpcy5jaHVua3MucHVzaChlKQoJCQkJCQl9LCBpLnByb3RvdHlwZS5vbkVuZCA9IGZ1bmN0aW9uKGUpIHsKCQkJCQkJCWUgPT09IGYgJiYgKCJzdHJpbmciID09PSB0aGlzLm9wdGlvbnMudG8gPyB0aGlzLnJlc3VsdCA9IHRoaXMuY2h1bmtzLmpvaW4oIiIpIDogdGhpcy5yZXN1bHQgPSBsLmZsYXR0ZW5DaHVua3ModGhpcy5jaHVua3MpKSwgdGhpcy5jaHVua3MgPSBbXSwgdGhpcy5lcnIgPSBlLCB0aGlzLm1zZyA9IHRoaXMuc3RybS5tc2cKCQkJCQkJfSwgbi5EZWZsYXRlID0gaSwgbi5kZWZsYXRlID0gYSwgbi5kZWZsYXRlUmF3ID0gbywgbi5nemlwID0gcgoJCQkJCX0sIHsKCQkJCQkJIi4vdXRpbHMvY29tbW9uIjogMywKCQkJCQkJIi4vdXRpbHMvc3RyaW5ncyI6IDQsCgkJCQkJCSIuL3psaWIvZGVmbGF0ZSI6IDgsCgkJCQkJCSIuL3psaWIvbWVzc2FnZXMiOiAxMywKCQkJCQkJIi4vemxpYi96c3RyZWFtIjogMTUKCQkJCQl9CgkJCQldLAoJCQkJMjogWwoJCQkJCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQkJInVzZSBzdHJpY3QiOwoKCQkJCQkJZnVuY3Rpb24gaShlKSB7CgkJCQkJCQlpZiAoISh0aGlzIGluc3RhbmNlb2YgaSkpIHJldHVybiBuZXcgaShlKTsKCQkJCQkJCXRoaXMub3B0aW9ucyA9IHMuYXNzaWduKHsKCQkJCQkJCQljaHVua1NpemU6IDE2Mzg0LAoJCQkJCQkJCXdpbmRvd0JpdHM6IDAsCgkJCQkJCQkJdG86ICIiCgkJCQkJCQl9LCBlIHx8IHt9KTsKCQkJCQkJCXZhciB0ID0gdGhpcy5vcHRpb25zOwoJCQkJCQkJdC5yYXcgJiYgdC53aW5kb3dCaXRzID49IDAgJiYgdC53aW5kb3dCaXRzIDwgMTYgJiYgKHQud2luZG93Qml0cyA9IC10LndpbmRvd0JpdHMsIDAgPT09IHQud2luZG93Qml0cyAmJiAodC53aW5kb3dCaXRzID0gLTE1KSksICEodC53aW5kb3dCaXRzID49IDAgJiYgdC53aW5kb3dCaXRzIDwgMTYpIHx8IGUgJiYgZS53aW5kb3dCaXRzIHx8ICh0LndpbmRvd0JpdHMgKz0gMzIpLCB0LndpbmRvd0JpdHMgPiAxNSAmJiB0LndpbmRvd0JpdHMgPCA0OCAmJiAwID09PSAoMTUgJiB0LndpbmRvd0JpdHMpICYmICh0LndpbmRvd0JpdHMgfD0gMTUpLCB0aGlzLmVyciA9IDAsIHRoaXMubXNnID0gIiIsIHRoaXMuZW5kZWQgPSAhMSwgdGhpcy5jaHVua3MgPSBbXSwgdGhpcy5zdHJtID0gbmV3IHAsIHRoaXMuc3RybS5hdmFpbF9vdXQgPSAwOwoJCQkJCQkJdmFyIG4gPSByLmluZmxhdGVJbml0Mih0aGlzLnN0cm0sIHQud2luZG93Qml0cyk7CgkJCQkJCQlpZiAobiAhPT0gYy5aX09LKSB0aHJvdyBuZXcgRXJyb3IoZFtuXSk7CgkJCQkJCQl0aGlzLmhlYWRlciA9IG5ldyBoLCByLmluZmxhdGVHZXRIZWFkZXIodGhpcy5zdHJtLCB0aGlzLmhlYWRlcikKCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gYShlLCB0KSB7CgkJCQkJCQl2YXIgbiA9IG5ldyBpKHQpOwoJCQkJCQkJaWYgKG4ucHVzaChlLCAhMCksIG4uZXJyKSB0aHJvdyBuLm1zZzsKCQkJCQkJCXJldHVybiBuLnJlc3VsdAoJCQkJCQl9CgoJCQkJCQlmdW5jdGlvbiBvKGUsIHQpIHsKCQkJCQkJCXJldHVybiB0ID0gdCB8fCB7fSwgdC5yYXcgPSAhMCwgYShlLCB0KQoJCQkJCQl9CgkJCQkJCXZhciByID0gZSgiLi96bGliL2luZmxhdGUiKSwKCQkJCQkJCXMgPSBlKCIuL3V0aWxzL2NvbW1vbiIpLAoJCQkJCQkJbCA9IGUoIi4vdXRpbHMvc3RyaW5ncyIpLAoJCQkJCQkJYyA9IGUoIi4vemxpYi9jb25zdGFudHMiKSwKCQkJCQkJCWQgPSBlKCIuL3psaWIvbWVzc2FnZXMiKSwKCQkJCQkJCXAgPSBlKCIuL3psaWIvenN0cmVhbSIpLAoJCQkJCQkJaCA9IGUoIi4vemxpYi9nemhlYWRlciIpLAoJCQkJCQkJdSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7CgkJCQkJCWkucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCQl2YXIgbiwgaSwgYSwgbywgZCwgcCwgaCA9IHRoaXMuc3RybSwKCQkJCQkJCQltID0gdGhpcy5vcHRpb25zLmNodW5rU2l6ZSwKCQkJCQkJCQlmID0gdGhpcy5vcHRpb25zLmRpY3Rpb25hcnksCgkJCQkJCQkJZyA9ICExOwoJCQkJCQkJaWYgKHRoaXMuZW5kZWQpIHJldHVybiAhMTsKCQkJCQkJCWkgPSB0ID09PSB+fnQgPyB0IDogdCA9PT0gITAgPyBjLlpfRklOSVNIIDogYy5aX05PX0ZMVVNILCAic3RyaW5nIiA9PSB0eXBlb2YgZSA/IGguaW5wdXQgPSBsLmJpbnN0cmluZzJidWYoZSkgOiAiW29iamVjdCBBcnJheUJ1ZmZlcl0iID09PSB1LmNhbGwoZSkgPyBoLmlucHV0ID0gbmV3IFVpbnQ4QXJyYXkoZSkgOiBoLmlucHV0ID0gZSwgaC5uZXh0X2luID0gMCwgaC5hdmFpbF9pbiA9IGguaW5wdXQubGVuZ3RoOwoJCQkJCQkJZG8gewoJCQkJCQkJCWlmICgwID09PSBoLmF2YWlsX291dCAmJiAoaC5vdXRwdXQgPSBuZXcgcy5CdWY4KG0pLCBoLm5leHRfb3V0ID0gMCwgaC5hdmFpbF9vdXQgPSBtKSwgbiA9IHIuaW5mbGF0ZShoLCBjLlpfTk9fRkxVU0gpLCBuID09PSBjLlpfTkVFRF9ESUNUICYmIGYgJiYgKHAgPSAic3RyaW5nIiA9PSB0eXBlb2YgZiA/IGwuc3RyaW5nMmJ1ZihmKSA6ICJbb2JqZWN0IEFycmF5QnVmZmVyXSIgPT09IHUuY2FsbChmKSA/IG5ldyBVaW50OEFycmF5KGYpIDogZiwgbiA9IHIuaW5mbGF0ZVNldERpY3Rpb25hcnkodGhpcy5zdHJtLCBwKSksIG4gPT09IGMuWl9CVUZfRVJST1IgJiYgZyA9PT0gITAgJiYgKG4gPSBjLlpfT0ssIGcgPSAhMSksIG4gIT09IGMuWl9TVFJFQU1fRU5EICYmIG4gIT09IGMuWl9PSykgcmV0dXJuIHRoaXMub25FbmQobiksIHRoaXMuZW5kZWQgPSAhMCwgITE7CgkJCQkJCQkJaC5uZXh0X291dCAmJiAoMCA9PT0gaC5hdmFpbF9vdXQgfHwgbiA9PT0gYy5aX1NUUkVBTV9FTkQgfHwgMCA9PT0gaC5hdmFpbF9pbiAmJiAoaSA9PT0gYy5aX0ZJTklTSCB8fCBpID09PSBjLlpfU1lOQ19GTFVTSCkpICYmICgic3RyaW5nIiA9PT0gdGhpcy5vcHRpb25zLnRvID8gKGEgPSBsLnV0Zjhib3JkZXIoaC5vdXRwdXQsIGgubmV4dF9vdXQpLCBvID0gaC5uZXh0X291dCAtIGEsIGQgPSBsLmJ1ZjJzdHJpbmcoaC5vdXRwdXQsIGEpLCBoLm5leHRfb3V0ID0gbywgaC5hdmFpbF9vdXQgPSBtIC0gbywgbyAmJiBzLmFycmF5U2V0KGgub3V0cHV0LCBoLm91dHB1dCwgYSwgbywgMCksIHRoaXMub25EYXRhKGQpKSA6IHRoaXMub25EYXRhKHMuc2hyaW5rQnVmKGgub3V0cHV0LCBoLm5leHRfb3V0KSkpLCAwID09PSBoLmF2YWlsX2luICYmIDAgPT09IGguYXZhaWxfb3V0ICYmIChnID0gITApCgkJCQkJCQl9IHdoaWxlICgoaC5hdmFpbF9pbiA+IDAgfHwgMCA9PT0gaC5hdmFpbF9vdXQpICYmIG4gIT09IGMuWl9TVFJFQU1fRU5EKTsKCQkJCQkJCXJldHVybiBuID09PSBjLlpfU1RSRUFNX0VORCAmJiAoaSA9IGMuWl9GSU5JU0gpLCBpID09PSBjLlpfRklOSVNIID8gKG4gPSByLmluZmxhdGVFbmQodGhpcy5zdHJtKSwgdGhpcy5vbkVuZChuKSwgdGhpcy5lbmRlZCA9ICEwLCBuID09PSBjLlpfT0spIDogaSA9PT0gYy5aX1NZTkNfRkxVU0ggPyAodGhpcy5vbkVuZChjLlpfT0spLCBoLmF2YWlsX291dCA9IDAsICEwKSA6ICEwCgkJCQkJCX0sIGkucHJvdG90eXBlLm9uRGF0YSA9IGZ1bmN0aW9uKGUpIHsKCQkJCQkJCXRoaXMuY2h1bmtzLnB1c2goZSkKCQkJCQkJfSwgaS5wcm90b3R5cGUub25FbmQgPSBmdW5jdGlvbihlKSB7CgkJCQkJCQllID09PSBjLlpfT0sgJiYgKCJzdHJpbmciID09PSB0aGlzLm9wdGlvbnMudG8gPyB0aGlzLnJlc3VsdCA9IHRoaXMuY2h1bmtzLmpvaW4oIiIpIDogdGhpcy5yZXN1bHQgPSBzLmZsYXR0ZW5DaHVua3ModGhpcy5jaHVua3MpKSwgdGhpcy5jaHVua3MgPSBbXSwgdGhpcy5lcnIgPSBlLCB0aGlzLm1zZyA9IHRoaXMuc3RybS5tc2cKCQkJCQkJfSwgbi5JbmZsYXRlID0gaSwgbi5pbmZsYXRlID0gYSwgbi5pbmZsYXRlUmF3ID0gbywgbi51bmd6aXAgPSBhCgkJCQkJfSwgewoJCQkJCQkiLi91dGlscy9jb21tb24iOiAzLAoJCQkJCQkiLi91dGlscy9zdHJpbmdzIjogNCwKCQkJCQkJIi4vemxpYi9jb25zdGFudHMiOiA2LAoJCQkJCQkiLi96bGliL2d6aGVhZGVyIjogOSwKCQkJCQkJIi4vemxpYi9pbmZsYXRlIjogMTEsCgkJCQkJCSIuL3psaWIvbWVzc2FnZXMiOiAxMywKCQkJCQkJIi4vemxpYi96c3RyZWFtIjogMTUKCQkJCQl9CgkJCQldLAoJCQkJMzogWwoJCQkJCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQkJInVzZSBzdHJpY3QiOwoJCQkJCQl2YXIgaSA9ICJ1bmRlZmluZWQiICE9IHR5cGVvZiBVaW50OEFycmF5ICYmICJ1bmRlZmluZWQiICE9IHR5cGVvZiBVaW50MTZBcnJheSAmJiAidW5kZWZpbmVkIiAhPSB0eXBlb2YgSW50MzJBcnJheTsKCQkJCQkJbi5hc3NpZ24gPSBmdW5jdGlvbihlKSB7CgkJCQkJCQlmb3IgKHZhciB0ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsgdC5sZW5ndGg7KSB7CgkJCQkJCQkJdmFyIG4gPSB0LnNoaWZ0KCk7CgkJCQkJCQkJaWYgKG4pIHsKCQkJCQkJCQkJaWYgKCJvYmplY3QiICE9IHR5cGVvZiBuKSB0aHJvdyBuZXcgVHlwZUVycm9yKG4gKyAibXVzdCBiZSBub24tb2JqZWN0Iik7CgkJCQkJCQkJCWZvciAodmFyIGkgaW4gbikgbi5oYXNPd25Qcm9wZXJ0eShpKSAmJiAoZVtpXSA9IG5baV0pCgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQkJcmV0dXJuIGUKCQkJCQkJfSwgbi5zaHJpbmtCdWYgPSBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCQlyZXR1cm4gZS5sZW5ndGggPT09IHQgPyBlIDogZS5zdWJhcnJheSA/IGUuc3ViYXJyYXkoMCwgdCkgOiAoZS5sZW5ndGggPSB0LCBlKQoJCQkJCQl9OwoJCQkJCQl2YXIgYSA9IHsKCQkJCQkJCQlhcnJheVNldDogZnVuY3Rpb24oZSwgdCwgbiwgaSwgYSkgewoJCQkJCQkJCQlpZiAodC5zdWJhcnJheSAmJiBlLnN1YmFycmF5KSByZXR1cm4gdm9pZCBlLnNldCh0LnN1YmFycmF5KG4sIG4gKyBpKSwgYSk7CgkJCQkJCQkJCWZvciAodmFyIG8gPSAwOyBpID4gbzsgbysrKSBlW2EgKyBvXSA9IHRbbiArIG9dCgkJCQkJCQkJfSwKCQkJCQkJCQlmbGF0dGVuQ2h1bmtzOiBmdW5jdGlvbihlKSB7CgkJCQkJCQkJCXZhciB0LCBuLCBpLCBhLCBvLCByOwoJCQkJCQkJCQlmb3IgKGkgPSAwLCB0ID0gMCwgbiA9IGUubGVuZ3RoOyBuID4gdDsgdCsrKSBpICs9IGVbdF0ubGVuZ3RoOwoJCQkJCQkJCQlmb3IgKHIgPSBuZXcgVWludDhBcnJheShpKSwgYSA9IDAsIHQgPSAwLCBuID0gZS5sZW5ndGg7IG4gPiB0OyB0KyspIG8gPSBlW3RdLCByLnNldChvLCBhKSwgYSArPSBvLmxlbmd0aDsKCQkJCQkJCQkJcmV0dXJuIHIKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJbyA9IHsKCQkJCQkJCQlhcnJheVNldDogZnVuY3Rpb24oZSwgdCwgbiwgaSwgYSkgewoJCQkJCQkJCQlmb3IgKHZhciBvID0gMDsgaSA+IG87IG8rKykgZVthICsgb10gPSB0W24gKyBvXQoJCQkJCQkJCX0sCgkJCQkJCQkJZmxhdHRlbkNodW5rczogZnVuY3Rpb24oZSkgewoJCQkJCQkJCQlyZXR1cm4gW10uY29uY2F0LmFwcGx5KFtdLCBlKQoJCQkJCQkJCX0KCQkJCQkJCX07CgkJCQkJCW4uc2V0VHlwZWQgPSBmdW5jdGlvbihlKSB7CgkJCQkJCQllID8gKG4uQnVmOCA9IFVpbnQ4QXJyYXksIG4uQnVmMTYgPSBVaW50MTZBcnJheSwgbi5CdWYzMiA9IEludDMyQXJyYXksIG4uYXNzaWduKG4sIGEpKSA6IChuLkJ1ZjggPSBBcnJheSwgbi5CdWYxNiA9IEFycmF5LCBuLkJ1ZjMyID0gQXJyYXksIG4uYXNzaWduKG4sIG8pKQoJCQkJCQl9LCBuLnNldFR5cGVkKGkpCgkJCQkJfSwge30KCQkJCV0sCgkJCQk0OiBbCgkJCQkJZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCQkidXNlIHN0cmljdCI7CgoJCQkJCQlmdW5jdGlvbiBpKGUsIHQpIHsKCQkJCQkJCWlmICg2NTUzNyA+IHQgJiYgKGUuc3ViYXJyYXkgJiYgciB8fCAhZS5zdWJhcnJheSAmJiBvKSkgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgYS5zaHJpbmtCdWYoZSwgdCkpOwoJCQkJCQkJZm9yICh2YXIgbiA9ICIiLCBpID0gMDsgdCA+IGk7IGkrKykgbiArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGVbaV0pOwoJCQkJCQkJcmV0dXJuIG4KCQkJCQkJfQoJCQkJCQl2YXIgYSA9IGUoIi4vY29tbW9uIiksCgkJCQkJCQlvID0gITAsCgkJCQkJCQlyID0gITA7CgkJCQkJCXRyeSB7CgkJCQkJCQlTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIFswXSkKCQkJCQkJfSBjYXRjaCAocykgewoJCQkJCQkJbyA9ICExCgkJCQkJCX0KCQkJCQkJdHJ5IHsKCQkJCQkJCVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQ4QXJyYXkoMSkpCgkJCQkJCX0gY2F0Y2ggKHMpIHsKCQkJCQkJCXIgPSAhMQoJCQkJCQl9CgkJCQkJCWZvciAodmFyIGwgPSBuZXcgYS5CdWY4KDI1NiksIGMgPSAwOyAyNTYgPiBjOyBjKyspIGxbY10gPSBjID49IDI1MiA/IDYgOiBjID49IDI0OCA/IDUgOiBjID49IDI0MCA/IDQgOiBjID49IDIyNCA/IDMgOiBjID49IDE5MiA/IDIgOiAxOwoJCQkJCQlsWzI1NF0gPSBsWzI1NF0gPSAxLCBuLnN0cmluZzJidWYgPSBmdW5jdGlvbihlKSB7CgkJCQkJCQl2YXIgdCwgbiwgaSwgbywgciwgcyA9IGUubGVuZ3RoLAoJCQkJCQkJCWwgPSAwOwoJCQkJCQkJZm9yIChvID0gMDsgcyA+IG87IG8rKykgbiA9IGUuY2hhckNvZGVBdChvKSwgNTUyOTYgPT09ICg2NDUxMiAmIG4pICYmIHMgPiBvICsgMSAmJiAoaSA9IGUuY2hhckNvZGVBdChvICsgMSksIDU2MzIwID09PSAoNjQ1MTIgJiBpKSAmJiAobiA9IDY1NTM2ICsgKG4gLSA1NTI5NiA8PCAxMCkgKyAoaSAtIDU2MzIwKSwgbysrKSksIGwgKz0gMTI4ID4gbiA/IDEgOiAyMDQ4ID4gbiA/IDIgOiA2NTUzNiA+IG4gPyAzIDogNDsKCQkJCQkJCWZvciAodCA9IG5ldyBhLkJ1ZjgobCksIHIgPSAwLCBvID0gMDsgbCA+IHI7IG8rKykgbiA9IGUuY2hhckNvZGVBdChvKSwgNTUyOTYgPT09ICg2NDUxMiAmIG4pICYmIHMgPiBvICsgMSAmJiAoaSA9IGUuY2hhckNvZGVBdChvICsgMSksIDU2MzIwID09PSAoNjQ1MTIgJiBpKSAmJiAobiA9IDY1NTM2ICsgKG4gLSA1NTI5NiA8PCAxMCkgKyAoaSAtIDU2MzIwKSwgbysrKSksIDEyOCA+IG4gPyB0W3IrK10gPSBuIDogMjA0OCA+IG4gPyAodFtyKytdID0gMTkyIHwgbiA+Pj4gNiwgdFtyKytdID0gMTI4IHwgNjMgJiBuKSA6IDY1NTM2ID4gbiA/ICh0W3IrK10gPSAyMjQgfCBuID4+PiAxMiwgdFtyKytdID0gMTI4IHwgbiA+Pj4gNiAmIDYzLCB0W3IrK10gPSAxMjggfCA2MyAmIG4pIDogKHRbcisrXSA9IDI0MCB8IG4gPj4+IDE4LCB0W3IrK10gPSAxMjggfCBuID4+PiAxMiAmIDYzLCB0W3IrK10gPSAxMjggfCBuID4+PiA2ICYgNjMsIHRbcisrXSA9IDEyOCB8IDYzICYgbik7CgkJCQkJCQlyZXR1cm4gdAoJCQkJCQl9LCBuLmJ1ZjJiaW5zdHJpbmcgPSBmdW5jdGlvbihlKSB7CgkJCQkJCQlyZXR1cm4gaShlLCBlLmxlbmd0aCkKCQkJCQkJfSwgbi5iaW5zdHJpbmcyYnVmID0gZnVuY3Rpb24oZSkgewoJCQkJCQkJZm9yICh2YXIgdCA9IG5ldyBhLkJ1ZjgoZS5sZW5ndGgpLCBuID0gMCwgaSA9IHQubGVuZ3RoOyBpID4gbjsgbisrKSB0W25dID0gZS5jaGFyQ29kZUF0KG4pOwoJCQkJCQkJcmV0dXJuIHQKCQkJCQkJfSwgbi5idWYyc3RyaW5nID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJCQkJdmFyIG4sIGEsIG8sIHIsIHMgPSB0IHx8IGUubGVuZ3RoLAoJCQkJCQkJCWMgPSBuZXcgQXJyYXkoMiAqIHMpOwoJCQkJCQkJZm9yIChhID0gMCwgbiA9IDA7IHMgPiBuOykKCQkJCQkJCQlpZiAobyA9IGVbbisrXSwgMTI4ID4gbykgY1thKytdID0gbzsKCQkJCQkJCQllbHNlIGlmIChyID0gbFtvXSwgciA+IDQpIGNbYSsrXSA9IDY1NTMzLCBuICs9IHIgLSAxOwoJCQkJCQkJZWxzZSB7CgkJCQkJCQkJZm9yIChvICY9IDIgPT09IHIgPyAzMSA6IDMgPT09IHIgPyAxNSA6IDc7IHIgPiAxICYmIHMgPiBuOykgbyA9IG8gPDwgNiB8IDYzICYgZVtuKytdLCByLS07CgkJCQkJCQkJciA+IDEgPyBjW2ErK10gPSA2NTUzMyA6IDY1NTM2ID4gbyA/IGNbYSsrXSA9IG8gOiAobyAtPSA2NTUzNiwgY1thKytdID0gNTUyOTYgfCBvID4+IDEwICYgMTAyMywgY1thKytdID0gNTYzMjAgfCAxMDIzICYgbykKCQkJCQkJCX0KCQkJCQkJCXJldHVybiBpKGMsIGEpCgkJCQkJCX0sIG4udXRmOGJvcmRlciA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQkJCXZhciBuOwoJCQkJCQkJZm9yICh0ID0gdCB8fCBlLmxlbmd0aCwgdCA+IGUubGVuZ3RoICYmICh0ID0gZS5sZW5ndGgpLCBuID0gdCAtIDE7IG4gPj0gMCAmJiAxMjggPT09ICgxOTIgJiBlW25dKTspIG4tLTsKCQkJCQkJCXJldHVybiAwID4gbiA/IHQgOiAwID09PSBuID8gdCA6IG4gKyBsW2Vbbl1dID4gdCA/IG4gOiB0CgkJCQkJCX0KCQkJCQl9LCB7CgkJCQkJCSIuL2NvbW1vbiI6IDMKCQkJCQl9CgkJCQldLAoJCQkJNTogWwoJCQkJCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQkJInVzZSBzdHJpY3QiOwoKCQkJCQkJZnVuY3Rpb24gaShlLCB0LCBuLCBpKSB7CgkJCQkJCQlmb3IgKHZhciBhID0gNjU1MzUgJiBlIHwgMCwgbyA9IGUgPj4+IDE2ICYgNjU1MzUgfCAwLCByID0gMDsgMCAhPT0gbjspIHsKCQkJCQkJCQlyID0gbiA+IDJlMyA/IDJlMyA6IG4sIG4gLT0gcjsKCQkJCQkJCQlkbyBhID0gYSArIHRbaSsrXSB8IDAsIG8gPSBvICsgYSB8IDA7IHdoaWxlICgtLXIpOwoJCQkJCQkJCWEgJT0gNjU1MjEsIG8gJT0gNjU1MjEKCQkJCQkJCX0KCQkJCQkJCXJldHVybiBhIHwgbyA8PCAxNiB8IDAKCQkJCQkJfQoJCQkJCQl0LmV4cG9ydHMgPSBpCgkJCQkJfSwge30KCQkJCV0sCgkJCQk2OiBbCgkJCQkJZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCQkidXNlIHN0cmljdCI7CgkJCQkJCXQuZXhwb3J0cyA9IHsKCQkJCQkJCVpfTk9fRkxVU0g6IDAsCgkJCQkJCQlaX1BBUlRJQUxfRkxVU0g6IDEsCgkJCQkJCQlaX1NZTkNfRkxVU0g6IDIsCgkJCQkJCQlaX0ZVTExfRkxVU0g6IDMsCgkJCQkJCQlaX0ZJTklTSDogNCwKCQkJCQkJCVpfQkxPQ0s6IDUsCgkJCQkJCQlaX1RSRUVTOiA2LAoJCQkJCQkJWl9PSzogMCwKCQkJCQkJCVpfU1RSRUFNX0VORDogMSwKCQkJCQkJCVpfTkVFRF9ESUNUOiAyLAoJCQkJCQkJWl9FUlJOTzogLTEsCgkJCQkJCQlaX1NUUkVBTV9FUlJPUjogLTIsCgkJCQkJCQlaX0RBVEFfRVJST1I6IC0zLAoJCQkJCQkJWl9CVUZfRVJST1I6IC01LAoJCQkJCQkJWl9OT19DT01QUkVTU0lPTjogMCwKCQkJCQkJCVpfQkVTVF9TUEVFRDogMSwKCQkJCQkJCVpfQkVTVF9DT01QUkVTU0lPTjogOSwKCQkJCQkJCVpfREVGQVVMVF9DT01QUkVTU0lPTjogLTEsCgkJCQkJCQlaX0ZJTFRFUkVEOiAxLAoJCQkJCQkJWl9IVUZGTUFOX09OTFk6IDIsCgkJCQkJCQlaX1JMRTogMywKCQkJCQkJCVpfRklYRUQ6IDQsCgkJCQkJCQlaX0RFRkFVTFRfU1RSQVRFR1k6IDAsCgkJCQkJCQlaX0JJTkFSWTogMCwKCQkJCQkJCVpfVEVYVDogMSwKCQkJCQkJCVpfVU5LTk9XTjogMiwKCQkJCQkJCVpfREVGTEFURUQ6IDgKCQkJCQkJfQoJCQkJCX0sIHt9CgkJCQldLAoJCQkJNzogWwoJCQkJCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQkJInVzZSBzdHJpY3QiOwoKCQkJCQkJZnVuY3Rpb24gaSgpIHsKCQkJCQkJCWZvciAodmFyIGUsIHQgPSBbXSwgbiA9IDA7IDI1NiA+IG47IG4rKykgewoJCQkJCQkJCWUgPSBuOwoJCQkJCQkJCWZvciAodmFyIGkgPSAwOyA4ID4gaTsgaSsrKSBlID0gMSAmIGUgPyAzOTg4MjkyMzg0IF4gZSA+Pj4gMSA6IGUgPj4+IDE7CgkJCQkJCQkJdFtuXSA9IGUKCQkJCQkJCX0KCQkJCQkJCXJldHVybiB0CgkJCQkJCX0KCgkJCQkJCWZ1bmN0aW9uIGEoZSwgdCwgbiwgaSkgewoJCQkJCQkJdmFyIGEgPSBvLAoJCQkJCQkJCXIgPSBpICsgbjsKCQkJCQkJCWUgXj0gLTE7CgkJCQkJCQlmb3IgKHZhciBzID0gaTsgciA+IHM7IHMrKykgZSA9IGUgPj4+IDggXiBhWzI1NSAmIChlIF4gdFtzXSldOwoJCQkJCQkJcmV0dXJuIC0xIF4gZQoJCQkJCQl9CgkJCQkJCXZhciBvID0gaSgpOwoJCQkJCQl0LmV4cG9ydHMgPSBhCgkJCQkJfSwge30KCQkJCV0sCgkJCQk4OiBbCgkJCQkJZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCQkidXNlIHN0cmljdCI7CgoJCQkJCQlmdW5jdGlvbiBpKGUsIHQpIHsKCQkJCQkJCXJldHVybiBlLm1zZyA9IHFbdF0sIHQKCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gYShlKSB7CgkJCQkJCQlyZXR1cm4gKGUgPDwgMSkgLSAoZSA+IDQgPyA5IDogMCkKCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gbyhlKSB7CgkJCQkJCQlmb3IgKHZhciB0ID0gZS5sZW5ndGg7IC0tdCA+PSAwOykgZVt0XSA9IDAKCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gcihlKSB7CgkJCQkJCQl2YXIgdCA9IGUuc3RhdGUsCgkJCQkJCQkJbiA9IHQucGVuZGluZzsKCQkJCQkJCW4gPiBlLmF2YWlsX291dCAmJiAobiA9IGUuYXZhaWxfb3V0KSwgMCAhPT0gbiAmJiAoVC5hcnJheVNldChlLm91dHB1dCwgdC5wZW5kaW5nX2J1ZiwgdC5wZW5kaW5nX291dCwgbiwgZS5uZXh0X291dCksIGUubmV4dF9vdXQgKz0gbiwgdC5wZW5kaW5nX291dCArPSBuLCBlLnRvdGFsX291dCArPSBuLCBlLmF2YWlsX291dCAtPSBuLCB0LnBlbmRpbmcgLT0gbiwgMCA9PT0gdC5wZW5kaW5nICYmICh0LnBlbmRpbmdfb3V0ID0gMCkpCgkJCQkJCX0KCgkJCQkJCWZ1bmN0aW9uIHMoZSwgdCkgewoJCQkJCQkJUC5fdHJfZmx1c2hfYmxvY2soZSwgZS5ibG9ja19zdGFydCA+PSAwID8gZS5ibG9ja19zdGFydCA6IC0xLCBlLnN0cnN0YXJ0IC0gZS5ibG9ja19zdGFydCwgdCksIGUuYmxvY2tfc3RhcnQgPSBlLnN0cnN0YXJ0LCByKGUuc3RybSkKCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gbChlLCB0KSB7CgkJCQkJCQllLnBlbmRpbmdfYnVmW2UucGVuZGluZysrXSA9IHQKCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gYyhlLCB0KSB7CgkJCQkJCQllLnBlbmRpbmdfYnVmW2UucGVuZGluZysrXSA9IHQgPj4+IDggJiAyNTUsIGUucGVuZGluZ19idWZbZS5wZW5kaW5nKytdID0gMjU1ICYgdAoJCQkJCQl9CgoJCQkJCQlmdW5jdGlvbiBkKGUsIHQsIG4sIGkpIHsKCQkJCQkJCXZhciBhID0gZS5hdmFpbF9pbjsKCQkJCQkJCXJldHVybiBhID4gaSAmJiAoYSA9IGkpLCAwID09PSBhID8gMCA6IChlLmF2YWlsX2luIC09IGEsIFQuYXJyYXlTZXQodCwgZS5pbnB1dCwgZS5uZXh0X2luLCBhLCBuKSwgMSA9PT0gZS5zdGF0ZS53cmFwID8gZS5hZGxlciA9IEkoZS5hZGxlciwgdCwgYSwgbikgOiAyID09PSBlLnN0YXRlLndyYXAgJiYgKGUuYWRsZXIgPSBBKGUuYWRsZXIsIHQsIGEsIG4pKSwgZS5uZXh0X2luICs9IGEsIGUudG90YWxfaW4gKz0gYSwgYSkKCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gcChlLCB0KSB7CgkJCQkJCQl2YXIgbiwgaSwgYSA9IGUubWF4X2NoYWluX2xlbmd0aCwKCQkJCQkJCQlvID0gZS5zdHJzdGFydCwKCQkJCQkJCQlyID0gZS5wcmV2X2xlbmd0aCwKCQkJCQkJCQlzID0gZS5uaWNlX21hdGNoLAoJCQkJCQkJCWwgPSBlLnN0cnN0YXJ0ID4gZS53X3NpemUgLSBwZSA/IGUuc3Ryc3RhcnQgLSAoZS53X3NpemUgLSBwZSkgOiAwLAoJCQkJCQkJCWMgPSBlLndpbmRvdywKCQkJCQkJCQlkID0gZS53X21hc2ssCgkJCQkJCQkJcCA9IGUucHJldiwKCQkJCQkJCQloID0gZS5zdHJzdGFydCArIGRlLAoJCQkJCQkJCXUgPSBjW28gKyByIC0gMV0sCgkJCQkJCQkJbSA9IGNbbyArIHJdOwoJCQkJCQkJZS5wcmV2X2xlbmd0aCA+PSBlLmdvb2RfbWF0Y2ggJiYgKGEgPj49IDIpLCBzID4gZS5sb29rYWhlYWQgJiYgKHMgPSBlLmxvb2thaGVhZCk7CgkJCQkJCQlkbwoJCQkJCQkJCWlmIChuID0gdCwgY1tuICsgcl0gPT09IG0gJiYgY1tuICsgciAtIDFdID09PSB1ICYmIGNbbl0gPT09IGNbb10gJiYgY1srK25dID09PSBjW28gKyAxXSkgewoJCQkJCQkJCQlvICs9IDIsIG4rKzsKCQkJCQkJCQkJZG87IHdoaWxlIChjWysrb10gPT09IGNbKytuXSAmJiBjWysrb10gPT09IGNbKytuXSAmJiBjWysrb10gPT09IGNbKytuXSAmJiBjWysrb10gPT09IGNbKytuXSAmJiBjWysrb10gPT09IGNbKytuXSAmJiBjWysrb10gPT09IGNbKytuXSAmJiBjWysrb10gPT09IGNbKytuXSAmJiBjWysrb10gPT09IGNbKytuXSAmJiBoID4gbyk7CgkJCQkJCQkJCWlmIChpID0gZGUgLSAoaCAtIG8pLCBvID0gaCAtIGRlLCBpID4gcikgewoJCQkJCQkJCQkJaWYgKGUubWF0Y2hfc3RhcnQgPSB0LCByID0gaSwgaSA+PSBzKSBicmVhazsKCQkJCQkJCQkJCXUgPSBjW28gKyByIC0gMV0sIG0gPSBjW28gKyByXQoJCQkJCQkJCQl9CgkJCQkJCQkJfQoJCQkJCQkJd2hpbGUgKCh0ID0gcFt0ICYgZF0pID4gbCAmJiAwICE9PSAtLWEpOwoJCQkJCQkJcmV0dXJuIHIgPD0gZS5sb29rYWhlYWQgPyByIDogZS5sb29rYWhlYWQKCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gaChlKSB7CgkJCQkJCQl2YXIgdCwgbiwgaSwgYSwgbywgciA9IGUud19zaXplOwoJCQkJCQkJZG8gewoJCQkJCQkJCWlmIChhID0gZS53aW5kb3dfc2l6ZSAtIGUubG9va2FoZWFkIC0gZS5zdHJzdGFydCwgZS5zdHJzdGFydCA+PSByICsgKHIgLSBwZSkpIHsKCQkJCQkJCQkJVC5hcnJheVNldChlLndpbmRvdywgZS53aW5kb3csIHIsIHIsIDApLCBlLm1hdGNoX3N0YXJ0IC09IHIsIGUuc3Ryc3RhcnQgLT0gciwgZS5ibG9ja19zdGFydCAtPSByLCBuID0gZS5oYXNoX3NpemUsIHQgPSBuOwoJCQkJCQkJCQlkbyBpID0gZS5oZWFkWy0tdF0sIGUuaGVhZFt0XSA9IGkgPj0gciA/IGkgLSByIDogMDsgd2hpbGUgKC0tbik7CgkJCQkJCQkJCW4gPSByLCB0ID0gbjsKCQkJCQkJCQkJZG8gaSA9IGUucHJldlstLXRdLCBlLnByZXZbdF0gPSBpID49IHIgPyBpIC0gciA6IDA7IHdoaWxlICgtLW4pOwoJCQkJCQkJCQlhICs9IHIKCQkJCQkJCQl9CgkJCQkJCQkJaWYgKDAgPT09IGUuc3RybS5hdmFpbF9pbikgYnJlYWs7CgkJCQkJCQkJaWYgKG4gPSBkKGUuc3RybSwgZS53aW5kb3csIGUuc3Ryc3RhcnQgKyBlLmxvb2thaGVhZCwgYSksIGUubG9va2FoZWFkICs9IG4sIGUubG9va2FoZWFkICsgZS5pbnNlcnQgPj0gY2UpCgkJCQkJCQkJCWZvciAobyA9IGUuc3Ryc3RhcnQgLSBlLmluc2VydCwgZS5pbnNfaCA9IGUud2luZG93W29dLCBlLmluc19oID0gKGUuaW5zX2ggPDwgZS5oYXNoX3NoaWZ0IF4gZS53aW5kb3dbbyArIDFdKSAmIGUuaGFzaF9tYXNrOyBlLmluc2VydCAmJiAoZS5pbnNfaCA9IChlLmluc19oIDw8IGUuaGFzaF9zaGlmdCBeIGUud2luZG93W28gKyBjZSAtIDFdKSAmIGUuaGFzaF9tYXNrLCBlLnByZXZbbyAmIGUud19tYXNrXSA9IGUuaGVhZFtlLmluc19oXSwgZS5oZWFkW2UuaW5zX2hdID0gbywgbysrLCBlLmluc2VydC0tLCAhKGUubG9va2FoZWFkICsgZS5pbnNlcnQgPCBjZSkpOyk7CgkJCQkJCQl9IHdoaWxlIChlLmxvb2thaGVhZCA8IHBlICYmIDAgIT09IGUuc3RybS5hdmFpbF9pbikKCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gdShlLCB0KSB7CgkJCQkJCQl2YXIgbiA9IDY1NTM1OwoJCQkJCQkJZm9yIChuID4gZS5wZW5kaW5nX2J1Zl9zaXplIC0gNSAmJiAobiA9IGUucGVuZGluZ19idWZfc2l6ZSAtIDUpOzspIHsKCQkJCQkJCQlpZiAoZS5sb29rYWhlYWQgPD0gMSkgewoJCQkJCQkJCQlpZiAoaChlKSwgMCA9PT0gZS5sb29rYWhlYWQgJiYgdCA9PT0gRSkgcmV0dXJuIHZlOwoJCQkJCQkJCQlpZiAoMCA9PT0gZS5sb29rYWhlYWQpIGJyZWFrCgkJCQkJCQkJfQoJCQkJCQkJCWUuc3Ryc3RhcnQgKz0gZS5sb29rYWhlYWQsIGUubG9va2FoZWFkID0gMDsKCQkJCQkJCQl2YXIgaSA9IGUuYmxvY2tfc3RhcnQgKyBuOwoJCQkJCQkJCWlmICgoMCA9PT0gZS5zdHJzdGFydCB8fCBlLnN0cnN0YXJ0ID49IGkpICYmIChlLmxvb2thaGVhZCA9IGUuc3Ryc3RhcnQgLSBpLCBlLnN0cnN0YXJ0ID0gaSwgcyhlLCAhMSksIDAgPT09IGUuc3RybS5hdmFpbF9vdXQpKSByZXR1cm4gdmU7CgkJCQkJCQkJaWYgKGUuc3Ryc3RhcnQgLSBlLmJsb2NrX3N0YXJ0ID49IGUud19zaXplIC0gcGUgJiYgKHMoZSwgITEpLCAwID09PSBlLnN0cm0uYXZhaWxfb3V0KSkgcmV0dXJuIHZlCgkJCQkJCQl9CgkJCQkJCQlyZXR1cm4gZS5pbnNlcnQgPSAwLCB0ID09PSBEID8gKHMoZSwgITApLCAwID09PSBlLnN0cm0uYXZhaWxfb3V0ID8geWUgOiBrZSkgOiBlLnN0cnN0YXJ0ID4gZS5ibG9ja19zdGFydCAmJiAocyhlLCAhMSksIDAgPT09IGUuc3RybS5hdmFpbF9vdXQpID8gdmUgOiB2ZQoJCQkJCQl9CgoJCQkJCQlmdW5jdGlvbiBtKGUsIHQpIHsKCQkJCQkJCWZvciAodmFyIG4sIGk7OykgewoJCQkJCQkJCWlmIChlLmxvb2thaGVhZCA8IHBlKSB7CgkJCQkJCQkJCWlmIChoKGUpLCBlLmxvb2thaGVhZCA8IHBlICYmIHQgPT09IEUpIHJldHVybiB2ZTsKCQkJCQkJCQkJaWYgKDAgPT09IGUubG9va2FoZWFkKSBicmVhawoJCQkJCQkJCX0KCQkJCQkJCQlpZiAobiA9IDAsIGUubG9va2FoZWFkID49IGNlICYmIChlLmluc19oID0gKGUuaW5zX2ggPDwgZS5oYXNoX3NoaWZ0IF4gZS53aW5kb3dbZS5zdHJzdGFydCArIGNlIC0gMV0pICYgZS5oYXNoX21hc2ssIG4gPSBlLnByZXZbZS5zdHJzdGFydCAmIGUud19tYXNrXSA9IGUuaGVhZFtlLmluc19oXSwgZS5oZWFkW2UuaW5zX2hdID0gZS5zdHJzdGFydCksIDAgIT09IG4gJiYgZS5zdHJzdGFydCAtIG4gPD0gZS53X3NpemUgLSBwZSAmJiAoZS5tYXRjaF9sZW5ndGggPSBwKGUsIG4pKSwgZS5tYXRjaF9sZW5ndGggPj0gY2UpCgkJCQkJCQkJCWlmIChpID0gUC5fdHJfdGFsbHkoZSwgZS5zdHJzdGFydCAtIGUubWF0Y2hfc3RhcnQsIGUubWF0Y2hfbGVuZ3RoIC0gY2UpLCBlLmxvb2thaGVhZCAtPSBlLm1hdGNoX2xlbmd0aCwgZS5tYXRjaF9sZW5ndGggPD0gZS5tYXhfbGF6eV9tYXRjaCAmJiBlLmxvb2thaGVhZCA+PSBjZSkgewoJCQkJCQkJCQkJZS5tYXRjaF9sZW5ndGgtLTsKCQkJCQkJCQkJCWRvIGUuc3Ryc3RhcnQrKywgZS5pbnNfaCA9IChlLmluc19oIDw8IGUuaGFzaF9zaGlmdCBeIGUud2luZG93W2Uuc3Ryc3RhcnQgKyBjZSAtIDFdKSAmIGUuaGFzaF9tYXNrLCBuID0gZS5wcmV2W2Uuc3Ryc3RhcnQgJiBlLndfbWFza10gPSBlLmhlYWRbZS5pbnNfaF0sIGUuaGVhZFtlLmluc19oXSA9IGUuc3Ryc3RhcnQ7IHdoaWxlICgwICE9PSAtLWUubWF0Y2hfbGVuZ3RoKTsKCQkJCQkJCQkJCWUuc3Ryc3RhcnQrKwoJCQkJCQkJCQl9IGVsc2UgZS5zdHJzdGFydCArPSBlLm1hdGNoX2xlbmd0aCwgZS5tYXRjaF9sZW5ndGggPSAwLCBlLmluc19oID0gZS53aW5kb3dbZS5zdHJzdGFydF0sIGUuaW5zX2ggPSAoZS5pbnNfaCA8PCBlLmhhc2hfc2hpZnQgXiBlLndpbmRvd1tlLnN0cnN0YXJ0ICsgMV0pICYgZS5oYXNoX21hc2s7CgkJCQkJCQkJZWxzZSBpID0gUC5fdHJfdGFsbHkoZSwgMCwgZS53aW5kb3dbZS5zdHJzdGFydF0pLCBlLmxvb2thaGVhZC0tLCBlLnN0cnN0YXJ0Kys7IGlmIChpICYmIChzKGUsICExKSwgMCA9PT0gZS5zdHJtLmF2YWlsX291dCkpIHJldHVybiB2ZQoJCQkJCQkJfQoJCQkJCQkJcmV0dXJuIGUuaW5zZXJ0ID0gZS5zdHJzdGFydCA8IGNlIC0gMSA/IGUuc3Ryc3RhcnQgOiBjZSAtIDEsIHQgPT09IEQgPyAocyhlLCAhMCksIDAgPT09IGUuc3RybS5hdmFpbF9vdXQgPyB5ZSA6IGtlKSA6IGUubGFzdF9saXQgJiYgKHMoZSwgITEpLCAwID09PSBlLnN0cm0uYXZhaWxfb3V0KSA/IHZlIDogYmUKCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gZihlLCB0KSB7CgkJCQkJCQlmb3IgKHZhciBuLCBpLCBhOzspIHsKCQkJCQkJCQlpZiAoZS5sb29rYWhlYWQgPCBwZSkgewoJCQkJCQkJCQlpZiAoaChlKSwgZS5sb29rYWhlYWQgPCBwZSAmJiB0ID09PSBFKSByZXR1cm4gdmU7CgkJCQkJCQkJCWlmICgwID09PSBlLmxvb2thaGVhZCkgYnJlYWsKCQkJCQkJCQl9CgkJCQkJCQkJaWYgKG4gPSAwLCBlLmxvb2thaGVhZCA+PSBjZSAmJiAoZS5pbnNfaCA9IChlLmluc19oIDw8IGUuaGFzaF9zaGlmdCBeIGUud2luZG93W2Uuc3Ryc3RhcnQgKyBjZSAtIDFdKSAmIGUuaGFzaF9tYXNrLCBuID0gZS5wcmV2W2Uuc3Ryc3RhcnQgJiBlLndfbWFza10gPSBlLmhlYWRbZS5pbnNfaF0sIGUuaGVhZFtlLmluc19oXSA9IGUuc3Ryc3RhcnQpLCBlLnByZXZfbGVuZ3RoID0gZS5tYXRjaF9sZW5ndGgsIGUucHJldl9tYXRjaCA9IGUubWF0Y2hfc3RhcnQsIGUubWF0Y2hfbGVuZ3RoID0gY2UgLSAxLCAwICE9PSBuICYmIGUucHJldl9sZW5ndGggPCBlLm1heF9sYXp5X21hdGNoICYmIGUuc3Ryc3RhcnQgLSBuIDw9IGUud19zaXplIC0gcGUgJiYgKGUubWF0Y2hfbGVuZ3RoID0gcChlLCBuKSwgZS5tYXRjaF9sZW5ndGggPD0gNSAmJiAoZS5zdHJhdGVneSA9PT0gWSB8fCBlLm1hdGNoX2xlbmd0aCA9PT0gY2UgJiYgZS5zdHJzdGFydCAtIGUubWF0Y2hfc3RhcnQgPiA0MDk2KSAmJiAoZS5tYXRjaF9sZW5ndGggPSBjZSAtIDEpKSwgZS5wcmV2X2xlbmd0aCA+PSBjZSAmJiBlLm1hdGNoX2xlbmd0aCA8PSBlLnByZXZfbGVuZ3RoKSB7CgkJCQkJCQkJCWEgPSBlLnN0cnN0YXJ0ICsgZS5sb29rYWhlYWQgLSBjZSwgaSA9IFAuX3RyX3RhbGx5KGUsIGUuc3Ryc3RhcnQgLSAxIC0gZS5wcmV2X21hdGNoLCBlLnByZXZfbGVuZ3RoIC0gY2UpLCBlLmxvb2thaGVhZCAtPSBlLnByZXZfbGVuZ3RoIC0gMSwgZS5wcmV2X2xlbmd0aCAtPSAyOwoJCQkJCQkJCQlkbyArK2Uuc3Ryc3RhcnQgPD0gYSAmJiAoZS5pbnNfaCA9IChlLmluc19oIDw8IGUuaGFzaF9zaGlmdCBeIGUud2luZG93W2Uuc3Ryc3RhcnQgKyBjZSAtIDFdKSAmIGUuaGFzaF9tYXNrLCBuID0gZS5wcmV2W2Uuc3Ryc3RhcnQgJiBlLndfbWFza10gPSBlLmhlYWRbZS5pbnNfaF0sIGUuaGVhZFtlLmluc19oXSA9IGUuc3Ryc3RhcnQpOyB3aGlsZSAoMCAhPT0gLS1lLnByZXZfbGVuZ3RoKTsKCQkJCQkJCQkJaWYgKGUubWF0Y2hfYXZhaWxhYmxlID0gMCwgZS5tYXRjaF9sZW5ndGggPSBjZSAtIDEsIGUuc3Ryc3RhcnQrKywgaSAmJiAocyhlLCAhMSksIDAgPT09IGUuc3RybS5hdmFpbF9vdXQpKSByZXR1cm4gdmUKCQkJCQkJCQl9IGVsc2UgaWYgKGUubWF0Y2hfYXZhaWxhYmxlKSB7CgkJCQkJCQkJCWlmIChpID0gUC5fdHJfdGFsbHkoZSwgMCwgZS53aW5kb3dbZS5zdHJzdGFydCAtIDFdKSwgaSAmJiBzKGUsICExKSwgZS5zdHJzdGFydCsrLCBlLmxvb2thaGVhZC0tLCAwID09PSBlLnN0cm0uYXZhaWxfb3V0KSByZXR1cm4gdmUKCQkJCQkJCQl9IGVsc2UgZS5tYXRjaF9hdmFpbGFibGUgPSAxLCBlLnN0cnN0YXJ0KyssIGUubG9va2FoZWFkLS0KCQkJCQkJCX0KCQkJCQkJCXJldHVybiBlLm1hdGNoX2F2YWlsYWJsZSAmJiAoaSA9IFAuX3RyX3RhbGx5KGUsIDAsIGUud2luZG93W2Uuc3Ryc3RhcnQgLSAxXSksIGUubWF0Y2hfYXZhaWxhYmxlID0gMCksIGUuaW5zZXJ0ID0gZS5zdHJzdGFydCA8IGNlIC0gMSA/IGUuc3Ryc3RhcnQgOiBjZSAtIDEsIHQgPT09IEQgPyAocyhlLCAhMCksIDAgPT09IGUuc3RybS5hdmFpbF9vdXQgPyB5ZSA6IGtlKSA6IGUubGFzdF9saXQgJiYgKHMoZSwgITEpLCAwID09PSBlLnN0cm0uYXZhaWxfb3V0KSA/IHZlIDogYmUKCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gZyhlLCB0KSB7CgkJCQkJCQlmb3IgKHZhciBuLCBpLCBhLCBvLCByID0gZS53aW5kb3c7OykgewoJCQkJCQkJCWlmIChlLmxvb2thaGVhZCA8PSBkZSkgewoJCQkJCQkJCQlpZiAoaChlKSwgZS5sb29rYWhlYWQgPD0gZGUgJiYgdCA9PT0gRSkgcmV0dXJuIHZlOwoJCQkJCQkJCQlpZiAoMCA9PT0gZS5sb29rYWhlYWQpIGJyZWFrCgkJCQkJCQkJfQoJCQkJCQkJCWlmIChlLm1hdGNoX2xlbmd0aCA9IDAsIGUubG9va2FoZWFkID49IGNlICYmIGUuc3Ryc3RhcnQgPiAwICYmIChhID0gZS5zdHJzdGFydCAtIDEsIGkgPSByW2FdLCBpID09PSByWysrYV0gJiYgaSA9PT0gclsrK2FdICYmIGkgPT09IHJbKythXSkpIHsKCQkJCQkJCQkJbyA9IGUuc3Ryc3RhcnQgKyBkZTsKCQkJCQkJCQkJZG87IHdoaWxlIChpID09PSByWysrYV0gJiYgaSA9PT0gclsrK2FdICYmIGkgPT09IHJbKythXSAmJiBpID09PSByWysrYV0gJiYgaSA9PT0gclsrK2FdICYmIGkgPT09IHJbKythXSAmJiBpID09PSByWysrYV0gJiYgaSA9PT0gclsrK2FdICYmIG8gPiBhKTsKCQkJCQkJCQkJZS5tYXRjaF9sZW5ndGggPSBkZSAtIChvIC0gYSksIGUubWF0Y2hfbGVuZ3RoID4gZS5sb29rYWhlYWQgJiYgKGUubWF0Y2hfbGVuZ3RoID0gZS5sb29rYWhlYWQpCgkJCQkJCQkJfQoJCQkJCQkJCWlmIChlLm1hdGNoX2xlbmd0aCA+PSBjZSA/IChuID0gUC5fdHJfdGFsbHkoZSwgMSwgZS5tYXRjaF9sZW5ndGggLSBjZSksIGUubG9va2FoZWFkIC09IGUubWF0Y2hfbGVuZ3RoLCBlLnN0cnN0YXJ0ICs9IGUubWF0Y2hfbGVuZ3RoLCBlLm1hdGNoX2xlbmd0aCA9IDApIDogKG4gPSBQLl90cl90YWxseShlLCAwLCBlLndpbmRvd1tlLnN0cnN0YXJ0XSksIGUubG9va2FoZWFkLS0sIGUuc3Ryc3RhcnQrKyksIG4gJiYgKHMoZSwgITEpLCAwID09PSBlLnN0cm0uYXZhaWxfb3V0KSkgcmV0dXJuIHZlCgkJCQkJCQl9CgkJCQkJCQlyZXR1cm4gZS5pbnNlcnQgPSAwLCB0ID09PSBEID8gKHMoZSwgITApLCAwID09PSBlLnN0cm0uYXZhaWxfb3V0ID8geWUgOiBrZSkgOiBlLmxhc3RfbGl0ICYmIChzKGUsICExKSwgMCA9PT0gZS5zdHJtLmF2YWlsX291dCkgPyB2ZSA6IGJlCgkJCQkJCX0KCgkJCQkJCWZ1bmN0aW9uIF8oZSwgdCkgewoJCQkJCQkJZm9yICh2YXIgbjs7KSB7CgkJCQkJCQkJaWYgKDAgPT09IGUubG9va2FoZWFkICYmIChoKGUpLCAwID09PSBlLmxvb2thaGVhZCkpIHsKCQkJCQkJCQkJaWYgKHQgPT09IEUpIHJldHVybiB2ZTsKCQkJCQkJCQkJYnJlYWsKCQkJCQkJCQl9CgkJCQkJCQkJaWYgKGUubWF0Y2hfbGVuZ3RoID0gMCwgbiA9IFAuX3RyX3RhbGx5KGUsIDAsIGUud2luZG93W2Uuc3Ryc3RhcnRdKSwgZS5sb29rYWhlYWQtLSwgZS5zdHJzdGFydCsrLCBuICYmIChzKGUsICExKSwgMCA9PT0gZS5zdHJtLmF2YWlsX291dCkpIHJldHVybiB2ZQoJCQkJCQkJfQoJCQkJCQkJcmV0dXJuIGUuaW5zZXJ0ID0gMCwgdCA9PT0gRCA/IChzKGUsICEwKSwgMCA9PT0gZS5zdHJtLmF2YWlsX291dCA/IHllIDoga2UpIDogZS5sYXN0X2xpdCAmJiAocyhlLCAhMSksIDAgPT09IGUuc3RybS5hdmFpbF9vdXQpID8gdmUgOiBiZQoJCQkJCQl9CgoJCQkJCQlmdW5jdGlvbiB4KGUsIHQsIG4sIGksIGEpIHsKCQkJCQkJCXRoaXMuZ29vZF9sZW5ndGggPSBlLCB0aGlzLm1heF9sYXp5ID0gdCwgdGhpcy5uaWNlX2xlbmd0aCA9IG4sIHRoaXMubWF4X2NoYWluID0gaSwgdGhpcy5mdW5jID0gYQoJCQkJCQl9CgoJCQkJCQlmdW5jdGlvbiB3KGUpIHsKCQkJCQkJCWUud2luZG93X3NpemUgPSAyICogZS53X3NpemUsIG8oZS5oZWFkKSwgZS5tYXhfbGF6eV9tYXRjaCA9IE5bZS5sZXZlbF0ubWF4X2xhenksIGUuZ29vZF9tYXRjaCA9IE5bZS5sZXZlbF0uZ29vZF9sZW5ndGgsIGUubmljZV9tYXRjaCA9IE5bZS5sZXZlbF0ubmljZV9sZW5ndGgsIGUubWF4X2NoYWluX2xlbmd0aCA9IE5bZS5sZXZlbF0ubWF4X2NoYWluLCBlLnN0cnN0YXJ0ID0gMCwgZS5ibG9ja19zdGFydCA9IDAsIGUubG9va2FoZWFkID0gMCwgZS5pbnNlcnQgPSAwLCBlLm1hdGNoX2xlbmd0aCA9IGUucHJldl9sZW5ndGggPSBjZSAtIDEsIGUubWF0Y2hfYXZhaWxhYmxlID0gMCwgZS5pbnNfaCA9IDAKCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gdigpIHsKCQkJCQkJCXRoaXMuc3RybSA9IG51bGwsIHRoaXMuc3RhdHVzID0gMCwgdGhpcy5wZW5kaW5nX2J1ZiA9IG51bGwsIHRoaXMucGVuZGluZ19idWZfc2l6ZSA9IDAsIHRoaXMucGVuZGluZ19vdXQgPSAwLCB0aGlzLnBlbmRpbmcgPSAwLCB0aGlzLndyYXAgPSAwLCB0aGlzLmd6aGVhZCA9IG51bGwsIHRoaXMuZ3ppbmRleCA9IDAsIHRoaXMubWV0aG9kID0gSywgdGhpcy5sYXN0X2ZsdXNoID0gLTEsIHRoaXMud19zaXplID0gMCwgdGhpcy53X2JpdHMgPSAwLCB0aGlzLndfbWFzayA9IDAsIHRoaXMud2luZG93ID0gbnVsbCwgdGhpcy53aW5kb3dfc2l6ZSA9IDAsIHRoaXMucHJldiA9IG51bGwsIHRoaXMuaGVhZCA9IG51bGwsIHRoaXMuaW5zX2ggPSAwLCB0aGlzLmhhc2hfc2l6ZSA9IDAsIHRoaXMuaGFzaF9iaXRzID0gMCwgdGhpcy5oYXNoX21hc2sgPSAwLCB0aGlzLmhhc2hfc2hpZnQgPSAwLCB0aGlzLmJsb2NrX3N0YXJ0ID0gMCwgdGhpcy5tYXRjaF9sZW5ndGggPSAwLCB0aGlzLnByZXZfbWF0Y2ggPSAwLCB0aGlzLm1hdGNoX2F2YWlsYWJsZSA9IDAsIHRoaXMuc3Ryc3RhcnQgPSAwLCB0aGlzLm1hdGNoX3N0YXJ0ID0gMCwgdGhpcy5sb29rYWhlYWQgPSAwLCB0aGlzLnByZXZfbGVuZ3RoID0gMCwgdGhpcy5tYXhfY2hhaW5fbGVuZ3RoID0gMCwgdGhpcy5tYXhfbGF6eV9tYXRjaCA9IDAsIHRoaXMubGV2ZWwgPSAwLCB0aGlzLnN0cmF0ZWd5ID0gMCwgdGhpcy5nb29kX21hdGNoID0gMCwgdGhpcy5uaWNlX21hdGNoID0gMCwgdGhpcy5keW5fbHRyZWUgPSBuZXcgVC5CdWYxNigyICogc2UpLCB0aGlzLmR5bl9kdHJlZSA9IG5ldyBULkJ1ZjE2KDIgKiAoMiAqIG9lICsgMSkpLCB0aGlzLmJsX3RyZWUgPSBuZXcgVC5CdWYxNigyICogKDIgKiByZSArIDEpKSwgbyh0aGlzLmR5bl9sdHJlZSksIG8odGhpcy5keW5fZHRyZWUpLCBvKHRoaXMuYmxfdHJlZSksIHRoaXMubF9kZXNjID0gbnVsbCwgdGhpcy5kX2Rlc2MgPSBudWxsLCB0aGlzLmJsX2Rlc2MgPSBudWxsLCB0aGlzLmJsX2NvdW50ID0gbmV3IFQuQnVmMTYobGUgKyAxKSwgdGhpcy5oZWFwID0gbmV3IFQuQnVmMTYoMiAqIGFlICsgMSksIG8odGhpcy5oZWFwKSwgdGhpcy5oZWFwX2xlbiA9IDAsIHRoaXMuaGVhcF9tYXggPSAwLCB0aGlzLmRlcHRoID0gbmV3IFQuQnVmMTYoMiAqIGFlICsgMSksIG8odGhpcy5kZXB0aCksIHRoaXMubF9idWYgPSAwLCB0aGlzLmxpdF9idWZzaXplID0gMCwgdGhpcy5sYXN0X2xpdCA9IDAsIHRoaXMuZF9idWYgPSAwLCB0aGlzLm9wdF9sZW4gPSAwLCB0aGlzLnN0YXRpY19sZW4gPSAwLCB0aGlzLm1hdGNoZXMgPSAwLCB0aGlzLmluc2VydCA9IDAsIHRoaXMuYmlfYnVmID0gMCwgdGhpcy5iaV92YWxpZCA9IDAKCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gYihlKSB7CgkJCQkJCQl2YXIgdDsKCQkJCQkJCXJldHVybiBlICYmIGUuc3RhdGUgPyAoZS50b3RhbF9pbiA9IGUudG90YWxfb3V0ID0gMCwgZS5kYXRhX3R5cGUgPSBWLCB0ID0gZS5zdGF0ZSwgdC5wZW5kaW5nID0gMCwgdC5wZW5kaW5nX291dCA9IDAsIHQud3JhcCA8IDAgJiYgKHQud3JhcCA9IC10LndyYXApLCB0LnN0YXR1cyA9IHQud3JhcCA/IHVlIDogeGUsIGUuYWRsZXIgPSAyID09PSB0LndyYXAgPyAwIDogMSwgdC5sYXN0X2ZsdXNoID0gRSwgUC5fdHJfaW5pdCh0KSwgUikgOiBpKGUsICQpCgkJCQkJCX0KCgkJCQkJCWZ1bmN0aW9uIHkoZSkgewoJCQkJCQkJdmFyIHQgPSBiKGUpOwoJCQkJCQkJcmV0dXJuIHQgPT09IFIgJiYgdyhlLnN0YXRlKSwgdAoJCQkJCQl9CgoJCQkJCQlmdW5jdGlvbiBrKGUsIHQpIHsKCQkJCQkJCXJldHVybiBlICYmIGUuc3RhdGUgPyAyICE9PSBlLnN0YXRlLndyYXAgPyAkIDogKGUuc3RhdGUuZ3poZWFkID0gdCwgUikgOiAkCgkJCQkJCX0KCgkJCQkJCWZ1bmN0aW9uIHooZSwgdCwgbiwgYSwgbywgcikgewoJCQkJCQkJaWYgKCFlKSByZXR1cm4gJDsKCQkJCQkJCXZhciBzID0gMTsKCQkJCQkJCWlmICh0ID09PSBVICYmICh0ID0gNiksIDAgPiBhID8gKHMgPSAwLCBhID0gLWEpIDogYSA+IDE1ICYmIChzID0gMiwgYSAtPSAxNiksIDEgPiBvIHx8IG8gPiBRIHx8IG4gIT09IEsgfHwgOCA+IGEgfHwgYSA+IDE1IHx8IDAgPiB0IHx8IHQgPiA5IHx8IDAgPiByIHx8IHIgPiBKKSByZXR1cm4gaShlLCAkKTsKCQkJCQkJCTggPT09IGEgJiYgKGEgPSA5KTsKCQkJCQkJCXZhciBsID0gbmV3IHY7CgkJCQkJCQlyZXR1cm4gZS5zdGF0ZSA9IGwsIGwuc3RybSA9IGUsIGwud3JhcCA9IHMsIGwuZ3poZWFkID0gbnVsbCwgbC53X2JpdHMgPSBhLCBsLndfc2l6ZSA9IDEgPDwgbC53X2JpdHMsIGwud19tYXNrID0gbC53X3NpemUgLSAxLCBsLmhhc2hfYml0cyA9IG8gKyA3LCBsLmhhc2hfc2l6ZSA9IDEgPDwgbC5oYXNoX2JpdHMsIGwuaGFzaF9tYXNrID0gbC5oYXNoX3NpemUgLSAxLCBsLmhhc2hfc2hpZnQgPSB+figobC5oYXNoX2JpdHMgKyBjZSAtIDEpIC8gY2UpLCBsLndpbmRvdyA9IG5ldyBULkJ1ZjgoMiAqIGwud19zaXplKSwgbC5oZWFkID0gbmV3IFQuQnVmMTYobC5oYXNoX3NpemUpLCBsLnByZXYgPSBuZXcgVC5CdWYxNihsLndfc2l6ZSksIGwubGl0X2J1ZnNpemUgPSAxIDw8IG8gKyA2LCBsLnBlbmRpbmdfYnVmX3NpemUgPSA0ICogbC5saXRfYnVmc2l6ZSwgbC5wZW5kaW5nX2J1ZiA9IG5ldyBULkJ1ZjgobC5wZW5kaW5nX2J1Zl9zaXplKSwgbC5kX2J1ZiA9IGwubGl0X2J1ZnNpemUgPj4gMSwgbC5sX2J1ZiA9IDMgKiBsLmxpdF9idWZzaXplLCBsLmxldmVsID0gdCwgbC5zdHJhdGVneSA9IHIsIGwubWV0aG9kID0gbiwgeShlKQoJCQkJCQl9CgoJCQkJCQlmdW5jdGlvbiBCKGUsIHQpIHsKCQkJCQkJCXJldHVybiB6KGUsIHQsIEssIGVlLCB0ZSwgWikKCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gaihlLCB0KSB7CgkJCQkJCQl2YXIgbiwgcywgZCwgcDsKCQkJCQkJCWlmICghZSB8fCAhZS5zdGF0ZSB8fCB0ID4gTSB8fCAwID4gdCkgcmV0dXJuIGUgPyBpKGUsICQpIDogJDsKCQkJCQkJCWlmIChzID0gZS5zdGF0ZSwgIWUub3V0cHV0IHx8ICFlLmlucHV0ICYmIDAgIT09IGUuYXZhaWxfaW4gfHwgcy5zdGF0dXMgPT09IHdlICYmIHQgIT09IEQpIHJldHVybiBpKGUsIDAgPT09IGUuYXZhaWxfb3V0ID8gSCA6ICQpOwoJCQkJCQkJaWYgKHMuc3RybSA9IGUsIG4gPSBzLmxhc3RfZmx1c2gsIHMubGFzdF9mbHVzaCA9IHQsIHMuc3RhdHVzID09PSB1ZSkKCQkJCQkJCQlpZiAoMiA9PT0gcy53cmFwKSBlLmFkbGVyID0gMCwgbChzLCAzMSksIGwocywgMTM5KSwgbChzLCA4KSwgcy5nemhlYWQgPyAobChzLCAocy5nemhlYWQudGV4dCA/IDEgOiAwKSArIChzLmd6aGVhZC5oY3JjID8gMiA6IDApICsgKHMuZ3poZWFkLmV4dHJhID8gNCA6IDApICsgKHMuZ3poZWFkLm5hbWUgPyA4IDogMCkgKyAocy5nemhlYWQuY29tbWVudCA/IDE2IDogMCkpLCBsKHMsIDI1NSAmIHMuZ3poZWFkLnRpbWUpLCBsKHMsIHMuZ3poZWFkLnRpbWUgPj4gOCAmIDI1NSksIGwocywgcy5nemhlYWQudGltZSA+PiAxNiAmIDI1NSksIGwocywgcy5nemhlYWQudGltZSA+PiAyNCAmIDI1NSksIGwocywgOSA9PT0gcy5sZXZlbCA/IDIgOiBzLnN0cmF0ZWd5ID49IEcgfHwgcy5sZXZlbCA8IDIgPyA0IDogMCksIGwocywgMjU1ICYgcy5nemhlYWQub3MpLCBzLmd6aGVhZC5leHRyYSAmJiBzLmd6aGVhZC5leHRyYS5sZW5ndGggJiYgKGwocywgMjU1ICYgcy5nemhlYWQuZXh0cmEubGVuZ3RoKSwgbChzLCBzLmd6aGVhZC5leHRyYS5sZW5ndGggPj4gOCAmIDI1NSkpLCBzLmd6aGVhZC5oY3JjICYmIChlLmFkbGVyID0gQShlLmFkbGVyLCBzLnBlbmRpbmdfYnVmLCBzLnBlbmRpbmcsIDApKSwgcy5nemluZGV4ID0gMCwgcy5zdGF0dXMgPSBtZSkgOiAobChzLCAwKSwgbChzLCAwKSwgbChzLCAwKSwgbChzLCAwKSwgbChzLCAwKSwgbChzLCA5ID09PSBzLmxldmVsID8gMiA6IHMuc3RyYXRlZ3kgPj0gRyB8fCBzLmxldmVsIDwgMiA/IDQgOiAwKSwgbChzLCB6ZSksIHMuc3RhdHVzID0geGUpOwoJCQkJCQkJCWVsc2UgewoJCQkJCQkJCQl2YXIgaCA9IEsgKyAocy53X2JpdHMgLSA4IDw8IDQpIDw8IDgsCgkJCQkJCQkJCQl1ID0gLTE7CgkJCQkJCQkJCXUgPSBzLnN0cmF0ZWd5ID49IEcgfHwgcy5sZXZlbCA8IDIgPyAwIDogcy5sZXZlbCA8IDYgPyAxIDogNiA9PT0gcy5sZXZlbCA/IDIgOiAzLCBoIHw9IHUgPDwgNiwgMCAhPT0gcy5zdHJzdGFydCAmJiAoaCB8PSBoZSksIGggKz0gMzEgLSBoICUgMzEsIHMuc3RhdHVzID0geGUsIGMocywgaCksIDAgIT09IHMuc3Ryc3RhcnQgJiYgKGMocywgZS5hZGxlciA+Pj4gMTYpLCBjKHMsIDY1NTM1ICYgZS5hZGxlcikpLCBlLmFkbGVyID0gMQoJCQkJCQkJCX0KCQkJCQkJCWlmIChzLnN0YXR1cyA9PT0gbWUpCgkJCQkJCQkJaWYgKHMuZ3poZWFkLmV4dHJhKSB7CgkJCQkJCQkJCWZvciAoZCA9IHMucGVuZGluZzsgcy5nemluZGV4IDwgKDY1NTM1ICYgcy5nemhlYWQuZXh0cmEubGVuZ3RoKSAmJiAocy5wZW5kaW5nICE9PSBzLnBlbmRpbmdfYnVmX3NpemUgfHwgKHMuZ3poZWFkLmhjcmMgJiYgcy5wZW5kaW5nID4gZCAmJiAoZS5hZGxlciA9IEEoZS5hZGxlciwgcy5wZW5kaW5nX2J1Ziwgcy5wZW5kaW5nIC0gZCwgZCkpLCByKGUpLCBkID0gcy5wZW5kaW5nLCBzLnBlbmRpbmcgIT09IHMucGVuZGluZ19idWZfc2l6ZSkpOykgbChzLCAyNTUgJiBzLmd6aGVhZC5leHRyYVtzLmd6aW5kZXhdKSwgcy5nemluZGV4Kys7CgkJCQkJCQkJCXMuZ3poZWFkLmhjcmMgJiYgcy5wZW5kaW5nID4gZCAmJiAoZS5hZGxlciA9IEEoZS5hZGxlciwgcy5wZW5kaW5nX2J1Ziwgcy5wZW5kaW5nIC0gZCwgZCkpLCBzLmd6aW5kZXggPT09IHMuZ3poZWFkLmV4dHJhLmxlbmd0aCAmJiAocy5nemluZGV4ID0gMCwgcy5zdGF0dXMgPSBmZSkKCQkJCQkJCQl9IGVsc2Ugcy5zdGF0dXMgPSBmZTsKCQkJCQkJCWlmIChzLnN0YXR1cyA9PT0gZmUpCgkJCQkJCQkJaWYgKHMuZ3poZWFkLm5hbWUpIHsKCQkJCQkJCQkJZCA9IHMucGVuZGluZzsKCQkJCQkJCQkJZG8gewoJCQkJCQkJCQkJaWYgKHMucGVuZGluZyA9PT0gcy5wZW5kaW5nX2J1Zl9zaXplICYmIChzLmd6aGVhZC5oY3JjICYmIHMucGVuZGluZyA+IGQgJiYgKGUuYWRsZXIgPSBBKGUuYWRsZXIsIHMucGVuZGluZ19idWYsIHMucGVuZGluZyAtIGQsIGQpKSwgcihlKSwgZCA9IHMucGVuZGluZywgcy5wZW5kaW5nID09PSBzLnBlbmRpbmdfYnVmX3NpemUpKSB7CgkJCQkJCQkJCQkJcCA9IDE7CgkJCQkJCQkJCQkJYnJlYWsKCQkJCQkJCQkJCX0KCQkJCQkJCQkJCXAgPSBzLmd6aW5kZXggPCBzLmd6aGVhZC5uYW1lLmxlbmd0aCA/IDI1NSAmIHMuZ3poZWFkLm5hbWUuY2hhckNvZGVBdChzLmd6aW5kZXgrKykgOiAwLCBsKHMsIHApCgkJCQkJCQkJCX0gd2hpbGUgKDAgIT09IHApOwoJCQkJCQkJCQlzLmd6aGVhZC5oY3JjICYmIHMucGVuZGluZyA+IGQgJiYgKGUuYWRsZXIgPSBBKGUuYWRsZXIsIHMucGVuZGluZ19idWYsIHMucGVuZGluZyAtIGQsIGQpKSwgMCA9PT0gcCAmJiAocy5nemluZGV4ID0gMCwgcy5zdGF0dXMgPSBnZSkKCQkJCQkJCQl9IGVsc2Ugcy5zdGF0dXMgPSBnZTsKCQkJCQkJCWlmIChzLnN0YXR1cyA9PT0gZ2UpCgkJCQkJCQkJaWYgKHMuZ3poZWFkLmNvbW1lbnQpIHsKCQkJCQkJCQkJZCA9IHMucGVuZGluZzsKCQkJCQkJCQkJZG8gewoJCQkJCQkJCQkJaWYgKHMucGVuZGluZyA9PT0gcy5wZW5kaW5nX2J1Zl9zaXplICYmIChzLmd6aGVhZC5oY3JjICYmIHMucGVuZGluZyA+IGQgJiYgKGUuYWRsZXIgPSBBKGUuYWRsZXIsIHMucGVuZGluZ19idWYsIHMucGVuZGluZyAtIGQsIGQpKSwgcihlKSwgZCA9IHMucGVuZGluZywgcy5wZW5kaW5nID09PSBzLnBlbmRpbmdfYnVmX3NpemUpKSB7CgkJCQkJCQkJCQkJcCA9IDE7CgkJCQkJCQkJCQkJYnJlYWsKCQkJCQkJCQkJCX0KCQkJCQkJCQkJCXAgPSBzLmd6aW5kZXggPCBzLmd6aGVhZC5jb21tZW50Lmxlbmd0aCA/IDI1NSAmIHMuZ3poZWFkLmNvbW1lbnQuY2hhckNvZGVBdChzLmd6aW5kZXgrKykgOiAwLCBsKHMsIHApCgkJCQkJCQkJCX0gd2hpbGUgKDAgIT09IHApOwoJCQkJCQkJCQlzLmd6aGVhZC5oY3JjICYmIHMucGVuZGluZyA+IGQgJiYgKGUuYWRsZXIgPSBBKGUuYWRsZXIsIHMucGVuZGluZ19idWYsIHMucGVuZGluZyAtIGQsIGQpKSwgMCA9PT0gcCAmJiAocy5zdGF0dXMgPSBfZSkKCQkJCQkJCQl9IGVsc2Ugcy5zdGF0dXMgPSBfZTsKCQkJCQkJCWlmIChzLnN0YXR1cyA9PT0gX2UgJiYgKHMuZ3poZWFkLmhjcmMgPyAocy5wZW5kaW5nICsgMiA+IHMucGVuZGluZ19idWZfc2l6ZSAmJiByKGUpLCBzLnBlbmRpbmcgKyAyIDw9IHMucGVuZGluZ19idWZfc2l6ZSAmJiAobChzLCAyNTUgJiBlLmFkbGVyKSwgbChzLCBlLmFkbGVyID4+IDggJiAyNTUpLCBlLmFkbGVyID0gMCwgcy5zdGF0dXMgPSB4ZSkpIDogcy5zdGF0dXMgPSB4ZSksIDAgIT09IHMucGVuZGluZykgewoJCQkJCQkJCWlmIChyKGUpLCAwID09PSBlLmF2YWlsX291dCkgcmV0dXJuIHMubGFzdF9mbHVzaCA9IC0xLCBSCgkJCQkJCQl9IGVsc2UgaWYgKDAgPT09IGUuYXZhaWxfaW4gJiYgYSh0KSA8PSBhKG4pICYmIHQgIT09IEQpIHJldHVybiBpKGUsIEgpOwoJCQkJCQkJaWYgKHMuc3RhdHVzID09PSB3ZSAmJiAwICE9PSBlLmF2YWlsX2luKSByZXR1cm4gaShlLCBIKTsKCQkJCQkJCWlmICgwICE9PSBlLmF2YWlsX2luIHx8IDAgIT09IHMubG9va2FoZWFkIHx8IHQgIT09IEUgJiYgcy5zdGF0dXMgIT09IHdlKSB7CgkJCQkJCQkJdmFyIG0gPSBzLnN0cmF0ZWd5ID09PSBHID8gXyhzLCB0KSA6IHMuc3RyYXRlZ3kgPT09IFggPyBnKHMsIHQpIDogTltzLmxldmVsXS5mdW5jKHMsIHQpOwoJCQkJCQkJCWlmICgobSA9PT0geWUgfHwgbSA9PT0ga2UpICYmIChzLnN0YXR1cyA9IHdlKSwgbSA9PT0gdmUgfHwgbSA9PT0geWUpIHJldHVybiAwID09PSBlLmF2YWlsX291dCAmJiAocy5sYXN0X2ZsdXNoID0gLTEpLCBSOwoJCQkJCQkJCWlmIChtID09PSBiZSAmJiAodCA9PT0gTyA/IFAuX3RyX2FsaWduKHMpIDogdCAhPT0gTSAmJiAoUC5fdHJfc3RvcmVkX2Jsb2NrKHMsIDAsIDAsICExKSwgdCA9PT0gTCAmJiAobyhzLmhlYWQpLCAwID09PSBzLmxvb2thaGVhZCAmJiAocy5zdHJzdGFydCA9IDAsIHMuYmxvY2tfc3RhcnQgPSAwLCBzLmluc2VydCA9IDApKSksIHIoZSksIDAgPT09IGUuYXZhaWxfb3V0KSkgcmV0dXJuIHMubGFzdF9mbHVzaCA9IC0xLCBSCgkJCQkJCQl9CgkJCQkJCQlyZXR1cm4gdCAhPT0gRCA/IFIgOiBzLndyYXAgPD0gMCA/IEYgOiAoMiA9PT0gcy53cmFwID8gKGwocywgMjU1ICYgZS5hZGxlciksIGwocywgZS5hZGxlciA+PiA4ICYgMjU1KSwgbChzLCBlLmFkbGVyID4+IDE2ICYgMjU1KSwgbChzLCBlLmFkbGVyID4+IDI0ICYgMjU1KSwgbChzLCAyNTUgJiBlLnRvdGFsX2luKSwgbChzLCBlLnRvdGFsX2luID4+IDggJiAyNTUpLCBsKHMsIGUudG90YWxfaW4gPj4gMTYgJiAyNTUpLCBsKHMsIGUudG90YWxfaW4gPj4gMjQgJiAyNTUpKSA6IChjKHMsIGUuYWRsZXIgPj4+IDE2KSwgYyhzLCA2NTUzNSAmIGUuYWRsZXIpKSwgcihlKSwgcy53cmFwID4gMCAmJiAocy53cmFwID0gLXMud3JhcCksIDAgIT09IHMucGVuZGluZyA/IFIgOiBGKQoJCQkJCQl9CgoJCQkJCQlmdW5jdGlvbiBDKGUpIHsKCQkJCQkJCXZhciB0OwoJCQkJCQkJcmV0dXJuIGUgJiYgZS5zdGF0ZSA/ICh0ID0gZS5zdGF0ZS5zdGF0dXMsIHQgIT09IHVlICYmIHQgIT09IG1lICYmIHQgIT09IGZlICYmIHQgIT09IGdlICYmIHQgIT09IF9lICYmIHQgIT09IHhlICYmIHQgIT09IHdlID8gaShlLCAkKSA6IChlLnN0YXRlID0gbnVsbCwgdCA9PT0geGUgPyBpKGUsIFcpIDogUikpIDogJAoJCQkJCQl9CgoJCQkJCQlmdW5jdGlvbiBTKGUsIHQpIHsKCQkJCQkJCXZhciBuLCBpLCBhLCByLCBzLCBsLCBjLCBkLCBwID0gdC5sZW5ndGg7CgkJCQkJCQlpZiAoIWUgfHwgIWUuc3RhdGUpIHJldHVybiAkOwoJCQkJCQkJaWYgKG4gPSBlLnN0YXRlLCByID0gbi53cmFwLCAyID09PSByIHx8IDEgPT09IHIgJiYgbi5zdGF0dXMgIT09IHVlIHx8IG4ubG9va2FoZWFkKSByZXR1cm4gJDsKCQkJCQkJCWZvciAoMSA9PT0gciAmJiAoZS5hZGxlciA9IEkoZS5hZGxlciwgdCwgcCwgMCkpLCBuLndyYXAgPSAwLCBwID49IG4ud19zaXplICYmICgwID09PSByICYmIChvKG4uaGVhZCksIG4uc3Ryc3RhcnQgPSAwLCBuLmJsb2NrX3N0YXJ0ID0gMCwgbi5pbnNlcnQgPSAwKSwgZCA9IG5ldyBULkJ1Zjgobi53X3NpemUpLCBULmFycmF5U2V0KGQsIHQsIHAgLSBuLndfc2l6ZSwgbi53X3NpemUsIDApLCB0ID0gZCwgcCA9IG4ud19zaXplKSwgcyA9IGUuYXZhaWxfaW4sIGwgPSBlLm5leHRfaW4sIGMgPSBlLmlucHV0LCBlLmF2YWlsX2luID0gcCwgZS5uZXh0X2luID0gMCwgZS5pbnB1dCA9IHQsIGgobik7IG4ubG9va2FoZWFkID49IGNlOykgewoJCQkJCQkJCWkgPSBuLnN0cnN0YXJ0LCBhID0gbi5sb29rYWhlYWQgLSAoY2UgLSAxKTsKCQkJCQkJCQlkbyBuLmluc19oID0gKG4uaW5zX2ggPDwgbi5oYXNoX3NoaWZ0IF4gbi53aW5kb3dbaSArIGNlIC0gMV0pICYgbi5oYXNoX21hc2ssIG4ucHJldltpICYgbi53X21hc2tdID0gbi5oZWFkW24uaW5zX2hdLCBuLmhlYWRbbi5pbnNfaF0gPSBpLCBpKys7IHdoaWxlICgtLWEpOwoJCQkJCQkJCW4uc3Ryc3RhcnQgPSBpLCBuLmxvb2thaGVhZCA9IGNlIC0gMSwgaChuKQoJCQkJCQkJfQoJCQkJCQkJcmV0dXJuIG4uc3Ryc3RhcnQgKz0gbi5sb29rYWhlYWQsIG4uYmxvY2tfc3RhcnQgPSBuLnN0cnN0YXJ0LCBuLmluc2VydCA9IG4ubG9va2FoZWFkLCBuLmxvb2thaGVhZCA9IDAsIG4ubWF0Y2hfbGVuZ3RoID0gbi5wcmV2X2xlbmd0aCA9IGNlIC0gMSwgbi5tYXRjaF9hdmFpbGFibGUgPSAwLCBlLm5leHRfaW4gPSBsLCBlLmlucHV0ID0gYywgZS5hdmFpbF9pbiA9IHMsIG4ud3JhcCA9IHIsIFIKCQkJCQkJfQoJCQkJCQl2YXIgTiwgVCA9IGUoIi4uL3V0aWxzL2NvbW1vbiIpLAoJCQkJCQkJUCA9IGUoIi4vdHJlZXMiKSwKCQkJCQkJCUkgPSBlKCIuL2FkbGVyMzIiKSwKCQkJCQkJCUEgPSBlKCIuL2NyYzMyIiksCgkJCQkJCQlxID0gZSgiLi9tZXNzYWdlcyIpLAoJCQkJCQkJRSA9IDAsCgkJCQkJCQlPID0gMSwKCQkJCQkJCUwgPSAzLAoJCQkJCQkJRCA9IDQsCgkJCQkJCQlNID0gNSwKCQkJCQkJCVIgPSAwLAoJCQkJCQkJRiA9IDEsCgkJCQkJCQkkID0gLTIsCgkJCQkJCQlXID0gLTMsCgkJCQkJCQlIID0gLTUsCgkJCQkJCQlVID0gLTEsCgkJCQkJCQlZID0gMSwKCQkJCQkJCUcgPSAyLAoJCQkJCQkJWCA9IDMsCgkJCQkJCQlKID0gNCwKCQkJCQkJCVogPSAwLAoJCQkJCQkJViA9IDIsCgkJCQkJCQlLID0gOCwKCQkJCQkJCVEgPSA5LAoJCQkJCQkJZWUgPSAxNSwKCQkJCQkJCXRlID0gOCwKCQkJCQkJCW5lID0gMjksCgkJCQkJCQlpZSA9IDI1NiwKCQkJCQkJCWFlID0gaWUgKyAxICsgbmUsCgkJCQkJCQlvZSA9IDMwLAoJCQkJCQkJcmUgPSAxOSwKCQkJCQkJCXNlID0gMiAqIGFlICsgMSwKCQkJCQkJCWxlID0gMTUsCgkJCQkJCQljZSA9IDMsCgkJCQkJCQlkZSA9IDI1OCwKCQkJCQkJCXBlID0gZGUgKyBjZSArIDEsCgkJCQkJCQloZSA9IDMyLAoJCQkJCQkJdWUgPSA0MiwKCQkJCQkJCW1lID0gNjksCgkJCQkJCQlmZSA9IDczLAoJCQkJCQkJZ2UgPSA5MSwKCQkJCQkJCV9lID0gMTAzLAoJCQkJCQkJeGUgPSAxMTMsCgkJCQkJCQl3ZSA9IDY2NiwKCQkJCQkJCXZlID0gMSwKCQkJCQkJCWJlID0gMiwKCQkJCQkJCXllID0gMywKCQkJCQkJCWtlID0gNCwKCQkJCQkJCXplID0gMzsKCQkJCQkJTiA9IFtuZXcgeCgwLCAwLCAwLCAwLCB1KSwgbmV3IHgoNCwgNCwgOCwgNCwgbSksIG5ldyB4KDQsIDUsIDE2LCA4LCBtKSwgbmV3IHgoNCwgNiwgMzIsIDMyLCBtKSwgbmV3IHgoNCwgNCwgMTYsIDE2LCBmKSwgbmV3IHgoOCwgMTYsIDMyLCAzMiwgZiksIG5ldyB4KDgsIDE2LCAxMjgsIDEyOCwgZiksIG5ldyB4KDgsIDMyLCAxMjgsIDI1NiwgZiksIG5ldyB4KDMyLCAxMjgsIDI1OCwgMTAyNCwgZiksIG5ldyB4KDMyLCAyNTgsIDI1OCwgNDA5NiwgZildLCBuLmRlZmxhdGVJbml0ID0gQiwgbi5kZWZsYXRlSW5pdDIgPSB6LCBuLmRlZmxhdGVSZXNldCA9IHksIG4uZGVmbGF0ZVJlc2V0S2VlcCA9IGIsIG4uZGVmbGF0ZVNldEhlYWRlciA9IGssIG4uZGVmbGF0ZSA9IGosIG4uZGVmbGF0ZUVuZCA9IEMsIG4uZGVmbGF0ZVNldERpY3Rpb25hcnkgPSBTLCBuLmRlZmxhdGVJbmZvID0gInBha28gZGVmbGF0ZSAoZnJvbSBOb2RlY2EgcHJvamVjdCkiCgkJCQkJfSwgewoJCQkJCQkiLi4vdXRpbHMvY29tbW9uIjogMywKCQkJCQkJIi4vYWRsZXIzMiI6IDUsCgkJCQkJCSIuL2NyYzMyIjogNywKCQkJCQkJIi4vbWVzc2FnZXMiOiAxMywKCQkJCQkJIi4vdHJlZXMiOiAxNAoJCQkJCX0KCQkJCV0sCgkJCQk5OiBbCgkJCQkJZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCQkidXNlIHN0cmljdCI7CgoJCQkJCQlmdW5jdGlvbiBpKCkgewoJCQkJCQkJdGhpcy50ZXh0ID0gMCwgdGhpcy50aW1lID0gMCwgdGhpcy54ZmxhZ3MgPSAwLCB0aGlzLm9zID0gMCwgdGhpcy5leHRyYSA9IG51bGwsIHRoaXMuZXh0cmFfbGVuID0gMCwgdGhpcy5uYW1lID0gIiIsIHRoaXMuY29tbWVudCA9ICIiLCB0aGlzLmhjcmMgPSAwLCB0aGlzLmRvbmUgPSAhMQoJCQkJCQl9CgkJCQkJCXQuZXhwb3J0cyA9IGkKCQkJCQl9LCB7fQoJCQkJXSwKCQkJCTEwOiBbCgkJCQkJZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCQkidXNlIHN0cmljdCI7CgkJCQkJCXZhciBpID0gMzAsCgkJCQkJCQlhID0gMTI7CgkJCQkJCXQuZXhwb3J0cyA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQkJCXZhciBuLCBvLCByLCBzLCBsLCBjLCBkLCBwLCBoLCB1LCBtLCBmLCBnLCBfLCB4LCB3LCB2LCBiLCB5LCBrLCB6LCBCLCBqLCBDLCBTOwoJCQkJCQkJbiA9IGUuc3RhdGUsIG8gPSBlLm5leHRfaW4sIEMgPSBlLmlucHV0LCByID0gbyArIChlLmF2YWlsX2luIC0gNSksIHMgPSBlLm5leHRfb3V0LCBTID0gZS5vdXRwdXQsIGwgPSBzIC0gKHQgLSBlLmF2YWlsX291dCksIGMgPSBzICsgKGUuYXZhaWxfb3V0IC0gMjU3KSwgZCA9IG4uZG1heCwgcCA9IG4ud3NpemUsIGggPSBuLndoYXZlLCB1ID0gbi53bmV4dCwgbSA9IG4ud2luZG93LCBmID0gbi5ob2xkLCBnID0gbi5iaXRzLCBfID0gbi5sZW5jb2RlLCB4ID0gbi5kaXN0Y29kZSwgdyA9ICgxIDw8IG4ubGVuYml0cykgLSAxLCB2ID0gKDEgPDwgbi5kaXN0Yml0cykgLSAxOwoJCQkJCQkJZTogZG8gewoJCQkJCQkJCTE1ID4gZyAmJiAoZiArPSBDW28rK10gPDwgZywgZyArPSA4LCBmICs9IENbbysrXSA8PCBnLCBnICs9IDgpLCBiID0gX1tmICYgd107CgkJCQkJCQkJdDogZm9yICg7OykgewoJCQkJCQkJCQlpZiAoeSA9IGIgPj4+IDI0LCBmID4+Pj0geSwgZyAtPSB5LCB5ID0gYiA+Pj4gMTYgJiAyNTUsIDAgPT09IHkpIFNbcysrXSA9IDY1NTM1ICYgYjsKCQkJCQkJCQkJZWxzZSB7CgkJCQkJCQkJCQlpZiAoISgxNiAmIHkpKSB7CgkJCQkJCQkJCQkJaWYgKDAgPT09ICg2NCAmIHkpKSB7CgkJCQkJCQkJCQkJCWIgPSBfWyg2NTUzNSAmIGIpICsgKGYgJiAoMSA8PCB5KSAtIDEpXTsKCQkJCQkJCQkJCQkJY29udGludWUgdAoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQlpZiAoMzIgJiB5KSB7CgkJCQkJCQkJCQkJCW4ubW9kZSA9IGE7CgkJCQkJCQkJCQkJCWJyZWFrIGUKCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJZS5tc2cgPSAiaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlIiwgbi5tb2RlID0gaTsKCQkJCQkJCQkJCQlicmVhayBlCgkJCQkJCQkJCQl9CgkJCQkJCQkJCQlrID0gNjU1MzUgJiBiLCB5ICY9IDE1LCB5ICYmICh5ID4gZyAmJiAoZiArPSBDW28rK10gPDwgZywgZyArPSA4KSwgayArPSBmICYgKDEgPDwgeSkgLSAxLCBmID4+Pj0geSwgZyAtPSB5KSwgMTUgPiBnICYmIChmICs9IENbbysrXSA8PCBnLCBnICs9IDgsIGYgKz0gQ1tvKytdIDw8IGcsIGcgKz0gOCksIGIgPSB4W2YgJiB2XTsKCQkJCQkJCQkJCW46IGZvciAoOzspIHsKCQkJCQkJCQkJCQlpZiAoeSA9IGIgPj4+IDI0LCBmID4+Pj0geSwgZyAtPSB5LCB5ID0gYiA+Pj4gMTYgJiAyNTUsICEoMTYgJiB5KSkgewoJCQkJCQkJCQkJCQlpZiAoMCA9PT0gKDY0ICYgeSkpIHsKCQkJCQkJCQkJCQkJCWIgPSB4Wyg2NTUzNSAmIGIpICsgKGYgJiAoMSA8PCB5KSAtIDEpXTsKCQkJCQkJCQkJCQkJCWNvbnRpbnVlIG4KCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQllLm1zZyA9ICJpbnZhbGlkIGRpc3RhbmNlIGNvZGUiLCBuLm1vZGUgPSBpOwoJCQkJCQkJCQkJCQlicmVhayBlCgkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCWlmICh6ID0gNjU1MzUgJiBiLCB5ICY9IDE1LCB5ID4gZyAmJiAoZiArPSBDW28rK10gPDwgZywgZyArPSA4LCB5ID4gZyAmJiAoZiArPSBDW28rK10gPDwgZywgZyArPSA4KSksIHogKz0gZiAmICgxIDw8IHkpIC0gMSwgeiA+IGQpIHsKCQkJCQkJCQkJCQkJZS5tc2cgPSAiaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2siLCBuLm1vZGUgPSBpOwoJCQkJCQkJCQkJCQlicmVhayBlCgkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCWlmIChmID4+Pj0geSwgZyAtPSB5LCB5ID0gcyAtIGwsIHogPiB5KSB7CgkJCQkJCQkJCQkJCWlmICh5ID0geiAtIHksIHkgPiBoICYmIG4uc2FuZSkgewoJCQkJCQkJCQkJCQkJZS5tc2cgPSAiaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2siLCBuLm1vZGUgPSBpOwoJCQkJCQkJCQkJCQkJYnJlYWsgZQoJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJCWlmIChCID0gMCwgaiA9IG0sIDAgPT09IHUpIHsKCQkJCQkJCQkJCQkJCWlmIChCICs9IHAgLSB5LCBrID4geSkgewoJCQkJCQkJCQkJCQkJCWsgLT0geTsKCQkJCQkJCQkJCQkJCQlkbyBTW3MrK10gPSBtW0IrK107IHdoaWxlICgtLXkpOwoJCQkJCQkJCQkJCQkJCUIgPSBzIC0geiwgaiA9IFMKCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJfSBlbHNlIGlmICh5ID4gdSkgewoJCQkJCQkJCQkJCQkJaWYgKEIgKz0gcCArIHUgLSB5LCB5IC09IHUsIGsgPiB5KSB7CgkJCQkJCQkJCQkJCQkJayAtPSB5OwoJCQkJCQkJCQkJCQkJCWRvIFNbcysrXSA9IG1bQisrXTsgd2hpbGUgKC0teSk7CgkJCQkJCQkJCQkJCQkJaWYgKEIgPSAwLCBrID4gdSkgewoJCQkJCQkJCQkJCQkJCQl5ID0gdSwgayAtPSB5OwoJCQkJCQkJCQkJCQkJCQlkbyBTW3MrK10gPSBtW0IrK107IHdoaWxlICgtLXkpOwoJCQkJCQkJCQkJCQkJCQlCID0gcyAtIHosIGogPSBTCgkJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQl9IGVsc2UgaWYgKEIgKz0gdSAtIHksIGsgPiB5KSB7CgkJCQkJCQkJCQkJCQlrIC09IHk7CgkJCQkJCQkJCQkJCQlkbyBTW3MrK10gPSBtW0IrK107IHdoaWxlICgtLXkpOwoJCQkJCQkJCQkJCQkJQiA9IHMgLSB6LCBqID0gUwoJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJCWZvciAoOyBrID4gMjspIFNbcysrXSA9IGpbQisrXSwgU1tzKytdID0galtCKytdLCBTW3MrK10gPSBqW0IrK10sIGsgLT0gMzsKCQkJCQkJCQkJCQkJayAmJiAoU1tzKytdID0galtCKytdLCBrID4gMSAmJiAoU1tzKytdID0galtCKytdKSkKCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQlCID0gcyAtIHo7CgkJCQkJCQkJCQkJCWRvIFNbcysrXSA9IFNbQisrXSwgU1tzKytdID0gU1tCKytdLCBTW3MrK10gPSBTW0IrK10sIGsgLT0gMzsgd2hpbGUgKGsgPiAyKTsKCQkJCQkJCQkJCQkJayAmJiAoU1tzKytdID0gU1tCKytdLCBrID4gMSAmJiAoU1tzKytdID0gU1tCKytdKSkKCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJYnJlYWsKCQkJCQkJCQkJCX0KCQkJCQkJCQkJfQoJCQkJCQkJCQlicmVhawoJCQkJCQkJCX0KCQkJCQkJCX0gd2hpbGUgKHIgPiBvICYmIGMgPiBzKTsKCQkJCQkJCWsgPSBnID4+IDMsIG8gLT0gaywgZyAtPSBrIDw8IDMsIGYgJj0gKDEgPDwgZykgLSAxLCBlLm5leHRfaW4gPSBvLCBlLm5leHRfb3V0ID0gcywgZS5hdmFpbF9pbiA9IHIgPiBvID8gNSArIChyIC0gbykgOiA1IC0gKG8gLSByKSwgZS5hdmFpbF9vdXQgPSBjID4gcyA/IDI1NyArIChjIC0gcykgOiAyNTcgLSAocyAtIGMpLCBuLmhvbGQgPSBmLCBuLmJpdHMgPSBnCgkJCQkJCX0KCQkJCQl9LCB7fQoJCQkJXSwKCQkJCTExOiBbCgkJCQkJZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCQkidXNlIHN0cmljdCI7CgoJCQkJCQlmdW5jdGlvbiBpKGUpIHsKCQkJCQkJCXJldHVybiAoZSA+Pj4gMjQgJiAyNTUpICsgKGUgPj4+IDggJiA2NTI4MCkgKyAoKDY1MjgwICYgZSkgPDwgOCkgKyAoKDI1NSAmIGUpIDw8IDI0KQoJCQkJCQl9CgoJCQkJCQlmdW5jdGlvbiBhKCkgewoJCQkJCQkJdGhpcy5tb2RlID0gMCwgdGhpcy5sYXN0ID0gITEsIHRoaXMud3JhcCA9IDAsIHRoaXMuaGF2ZWRpY3QgPSAhMSwgdGhpcy5mbGFncyA9IDAsIHRoaXMuZG1heCA9IDAsIHRoaXMuY2hlY2sgPSAwLCB0aGlzLnRvdGFsID0gMCwgdGhpcy5oZWFkID0gbnVsbCwgdGhpcy53Yml0cyA9IDAsIHRoaXMud3NpemUgPSAwLCB0aGlzLndoYXZlID0gMCwgdGhpcy53bmV4dCA9IDAsIHRoaXMud2luZG93ID0gbnVsbCwgdGhpcy5ob2xkID0gMCwgdGhpcy5iaXRzID0gMCwgdGhpcy5sZW5ndGggPSAwLCB0aGlzLm9mZnNldCA9IDAsIHRoaXMuZXh0cmEgPSAwLCB0aGlzLmxlbmNvZGUgPSBudWxsLCB0aGlzLmRpc3Rjb2RlID0gbnVsbCwgdGhpcy5sZW5iaXRzID0gMCwgdGhpcy5kaXN0Yml0cyA9IDAsIHRoaXMubmNvZGUgPSAwLCB0aGlzLm5sZW4gPSAwLCB0aGlzLm5kaXN0ID0gMCwgdGhpcy5oYXZlID0gMCwgdGhpcy5uZXh0ID0gbnVsbCwgdGhpcy5sZW5zID0gbmV3IHguQnVmMTYoMzIwKSwgdGhpcy53b3JrID0gbmV3IHguQnVmMTYoMjg4KSwgdGhpcy5sZW5keW4gPSBudWxsLCB0aGlzLmRpc3RkeW4gPSBudWxsLCB0aGlzLnNhbmUgPSAwLCB0aGlzLmJhY2sgPSAwLCB0aGlzLndhcyA9IDAKCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gbyhlKSB7CgkJCQkJCQl2YXIgdDsKCQkJCQkJCXJldHVybiBlICYmIGUuc3RhdGUgPyAodCA9IGUuc3RhdGUsIGUudG90YWxfaW4gPSBlLnRvdGFsX291dCA9IHQudG90YWwgPSAwLCBlLm1zZyA9ICIiLCB0LndyYXAgJiYgKGUuYWRsZXIgPSAxICYgdC53cmFwKSwgdC5tb2RlID0gTCwgdC5sYXN0ID0gMCwgdC5oYXZlZGljdCA9IDAsIHQuZG1heCA9IDMyNzY4LCB0LmhlYWQgPSBudWxsLCB0LmhvbGQgPSAwLCB0LmJpdHMgPSAwLCB0LmxlbmNvZGUgPSB0LmxlbmR5biA9IG5ldyB4LkJ1ZjMyKGZlKSwgdC5kaXN0Y29kZSA9IHQuZGlzdGR5biA9IG5ldyB4LkJ1ZjMyKGdlKSwgdC5zYW5lID0gMSwgdC5iYWNrID0gLTEsIE4pIDogSQoJCQkJCQl9CgoJCQkJCQlmdW5jdGlvbiByKGUpIHsKCQkJCQkJCXZhciB0OwoJCQkJCQkJcmV0dXJuIGUgJiYgZS5zdGF0ZSA/ICh0ID0gZS5zdGF0ZSwgdC53c2l6ZSA9IDAsIHQud2hhdmUgPSAwLCB0LnduZXh0ID0gMCwgbyhlKSkgOiBJCgkJCQkJCX0KCgkJCQkJCWZ1bmN0aW9uIHMoZSwgdCkgewoJCQkJCQkJdmFyIG4sIGk7CgkJCQkJCQlyZXR1cm4gZSAmJiBlLnN0YXRlID8gKGkgPSBlLnN0YXRlLCAwID4gdCA/IChuID0gMCwgdCA9IC10KSA6IChuID0gKHQgPj4gNCkgKyAxLCA0OCA+IHQgJiYgKHQgJj0gMTUpKSwgdCAmJiAoOCA+IHQgfHwgdCA+IDE1KSA/IEkgOiAobnVsbCAhPT0gaS53aW5kb3cgJiYgaS53Yml0cyAhPT0gdCAmJiAoaS53aW5kb3cgPSBudWxsKSwgaS53cmFwID0gbiwgaS53Yml0cyA9IHQsIHIoZSkpKSA6IEkKCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gbChlLCB0KSB7CgkJCQkJCQl2YXIgbiwgaTsKCQkJCQkJCXJldHVybiBlID8gKGkgPSBuZXcgYSwgZS5zdGF0ZSA9IGksIGkud2luZG93ID0gbnVsbCwgbiA9IHMoZSwgdCksIG4gIT09IE4gJiYgKGUuc3RhdGUgPSBudWxsKSwgbikgOiBJCgkJCQkJCX0KCgkJCQkJCWZ1bmN0aW9uIGMoZSkgewoJCQkJCQkJcmV0dXJuIGwoZSwgeGUpCgkJCQkJCX0KCgkJCQkJCWZ1bmN0aW9uIGQoZSkgewoJCQkJCQkJaWYgKHdlKSB7CgkJCQkJCQkJdmFyIHQ7CgkJCQkJCQkJZm9yIChnID0gbmV3IHguQnVmMzIoNTEyKSwgXyA9IG5ldyB4LkJ1ZjMyKDMyKSwgdCA9IDA7IDE0NCA+IHQ7KSBlLmxlbnNbdCsrXSA9IDg7CgkJCQkJCQkJZm9yICg7IDI1NiA+IHQ7KSBlLmxlbnNbdCsrXSA9IDk7CgkJCQkJCQkJZm9yICg7IDI4MCA+IHQ7KSBlLmxlbnNbdCsrXSA9IDc7CgkJCQkJCQkJZm9yICg7IDI4OCA+IHQ7KSBlLmxlbnNbdCsrXSA9IDg7CgkJCQkJCQkJZm9yICh5KHosIGUubGVucywgMCwgMjg4LCBnLCAwLCBlLndvcmssIHsKCQkJCQkJCQkJYml0czogOQoJCQkJCQkJCX0pLCB0ID0gMDsgMzIgPiB0OykgZS5sZW5zW3QrK10gPSA1OwoJCQkJCQkJCXkoQiwgZS5sZW5zLCAwLCAzMiwgXywgMCwgZS53b3JrLCB7CgkJCQkJCQkJCWJpdHM6IDUKCQkJCQkJCQl9KSwgd2UgPSAhMQoJCQkJCQkJfQoJCQkJCQkJZS5sZW5jb2RlID0gZywgZS5sZW5iaXRzID0gOSwgZS5kaXN0Y29kZSA9IF8sIGUuZGlzdGJpdHMgPSA1CgkJCQkJCX0KCgkJCQkJCWZ1bmN0aW9uIHAoZSwgdCwgbiwgaSkgewoJCQkJCQkJdmFyIGEsIG8gPSBlLnN0YXRlOwoJCQkJCQkJcmV0dXJuIG51bGwgPT09IG8ud2luZG93ICYmIChvLndzaXplID0gMSA8PCBvLndiaXRzLCBvLnduZXh0ID0gMCwgby53aGF2ZSA9IDAsIG8ud2luZG93ID0gbmV3IHguQnVmOChvLndzaXplKSksIGkgPj0gby53c2l6ZSA/ICh4LmFycmF5U2V0KG8ud2luZG93LCB0LCBuIC0gby53c2l6ZSwgby53c2l6ZSwgMCksIG8ud25leHQgPSAwLCBvLndoYXZlID0gby53c2l6ZSkgOiAoYSA9IG8ud3NpemUgLSBvLnduZXh0LCBhID4gaSAmJiAoYSA9IGkpLCB4LmFycmF5U2V0KG8ud2luZG93LCB0LCBuIC0gaSwgYSwgby53bmV4dCksIGkgLT0gYSwgaSA/ICh4LmFycmF5U2V0KG8ud2luZG93LCB0LCBuIC0gaSwgaSwgMCksIG8ud25leHQgPSBpLCBvLndoYXZlID0gby53c2l6ZSkgOiAoby53bmV4dCArPSBhLCBvLnduZXh0ID09PSBvLndzaXplICYmIChvLnduZXh0ID0gMCksIG8ud2hhdmUgPCBvLndzaXplICYmIChvLndoYXZlICs9IGEpKSksIDAKCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gaChlLCB0KSB7CgkJCQkJCQl2YXIgbiwgYSwgbywgciwgcywgbCwgYywgaCwgdSwgbSwgZiwgZywgXywgZmUsIGdlLCBfZSwgeGUsIHdlLCB2ZSwgYmUsIHllLCBrZSwgemUsIEJlLCBqZSA9IDAsCgkJCQkJCQkJQ2UgPSBuZXcgeC5CdWY4KDQpLAoJCQkJCQkJCVNlID0gWzE2LCAxNywgMTgsIDAsIDgsIDcsIDksIDYsIDEwLCA1LCAxMSwgNCwgMTIsIDMsIDEzLCAyLCAxNCwgMSwgMTVdOwoJCQkJCQkJaWYgKCFlIHx8ICFlLnN0YXRlIHx8ICFlLm91dHB1dCB8fCAhZS5pbnB1dCAmJiAwICE9PSBlLmF2YWlsX2luKSByZXR1cm4gSTsKCQkJCQkJCW4gPSBlLnN0YXRlLCBuLm1vZGUgPT09IFggJiYgKG4ubW9kZSA9IEopLCBzID0gZS5uZXh0X291dCwgbyA9IGUub3V0cHV0LCBjID0gZS5hdmFpbF9vdXQsIHIgPSBlLm5leHRfaW4sIGEgPSBlLmlucHV0LCBsID0gZS5hdmFpbF9pbiwgaCA9IG4uaG9sZCwgdSA9IG4uYml0cywgbSA9IGwsIGYgPSBjLCBrZSA9IE47CgkJCQkJCQllOiBmb3IgKDs7KSBzd2l0Y2ggKG4ubW9kZSkgewoJCQkJCQkJCWNhc2UgTDoKCQkJCQkJCQkJaWYgKDAgPT09IG4ud3JhcCkgewoJCQkJCQkJCQkJbi5tb2RlID0gSjsKCQkJCQkJCQkJCWJyZWFrCgkJCQkJCQkJCX0KCQkJCQkJCQkJZm9yICg7IDE2ID4gdTspIHsKCQkJCQkJCQkJCWlmICgwID09PSBsKSBicmVhayBlOwoJCQkJCQkJCQkJbC0tLCBoICs9IGFbcisrXSA8PCB1LCB1ICs9IDgKCQkJCQkJCQkJfQoJCQkJCQkJCQlpZiAoMiAmIG4ud3JhcCAmJiAzNTYxNSA9PT0gaCkgewoJCQkJCQkJCQkJbi5jaGVjayA9IDAsIENlWzBdID0gMjU1ICYgaCwgQ2VbMV0gPSBoID4+PiA4ICYgMjU1LCBuLmNoZWNrID0gdihuLmNoZWNrLCBDZSwgMiwgMCksIGggPSAwLCB1ID0gMCwgbi5tb2RlID0gRDsKCQkJCQkJCQkJCWJyZWFrCgkJCQkJCQkJCX0KCQkJCQkJCQkJaWYgKG4uZmxhZ3MgPSAwLCBuLmhlYWQgJiYgKG4uaGVhZC5kb25lID0gITEpLCAhKDEgJiBuLndyYXApIHx8ICgoKDI1NSAmIGgpIDw8IDgpICsgKGggPj4gOCkpICUgMzEpIHsKCQkJCQkJCQkJCWUubXNnID0gImluY29ycmVjdCBoZWFkZXIgY2hlY2siLCBuLm1vZGUgPSBoZTsKCQkJCQkJCQkJCWJyZWFrCgkJCQkJCQkJCX0KCQkJCQkJCQkJaWYgKCgxNSAmIGgpICE9PSBPKSB7CgkJCQkJCQkJCQllLm1zZyA9ICJ1bmtub3duIGNvbXByZXNzaW9uIG1ldGhvZCIsIG4ubW9kZSA9IGhlOwoJCQkJCQkJCQkJYnJlYWsKCQkJCQkJCQkJfQoJCQkJCQkJCQlpZiAoaCA+Pj49IDQsIHUgLT0gNCwgeWUgPSAoMTUgJiBoKSArIDgsIDAgPT09IG4ud2JpdHMpIG4ud2JpdHMgPSB5ZTsKCQkJCQkJCQkJZWxzZSBpZiAoeWUgPiBuLndiaXRzKSB7CgkJCQkJCQkJCQllLm1zZyA9ICJpbnZhbGlkIHdpbmRvdyBzaXplIiwgbi5tb2RlID0gaGU7CgkJCQkJCQkJCQlicmVhawoJCQkJCQkJCQl9CgkJCQkJCQkJCW4uZG1heCA9IDEgPDwgeWUsIGUuYWRsZXIgPSBuLmNoZWNrID0gMSwgbi5tb2RlID0gNTEyICYgaCA/IFkgOiBYLCBoID0gMCwgdSA9IDA7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgRDoKCQkJCQkJCQkJZm9yICg7IDE2ID4gdTspIHsKCQkJCQkJCQkJCWlmICgwID09PSBsKSBicmVhayBlOwoJCQkJCQkJCQkJbC0tLCBoICs9IGFbcisrXSA8PCB1LCB1ICs9IDgKCQkJCQkJCQkJfQoJCQkJCQkJCQlpZiAobi5mbGFncyA9IGgsICgyNTUgJiBuLmZsYWdzKSAhPT0gTykgewoJCQkJCQkJCQkJZS5tc2cgPSAidW5rbm93biBjb21wcmVzc2lvbiBtZXRob2QiLCBuLm1vZGUgPSBoZTsKCQkJCQkJCQkJCWJyZWFrCgkJCQkJCQkJCX0KCQkJCQkJCQkJaWYgKDU3MzQ0ICYgbi5mbGFncykgewoJCQkJCQkJCQkJZS5tc2cgPSAidW5rbm93biBoZWFkZXIgZmxhZ3Mgc2V0Iiwgbi5tb2RlID0gaGU7CgkJCQkJCQkJCQlicmVhawoJCQkJCQkJCQl9CgkJCQkJCQkJCW4uaGVhZCAmJiAobi5oZWFkLnRleHQgPSBoID4+IDggJiAxKSwgNTEyICYgbi5mbGFncyAmJiAoQ2VbMF0gPSAyNTUgJiBoLCBDZVsxXSA9IGggPj4+IDggJiAyNTUsIG4uY2hlY2sgPSB2KG4uY2hlY2ssIENlLCAyLCAwKSksIGggPSAwLCB1ID0gMCwgbi5tb2RlID0gTTsKCQkJCQkJCQljYXNlIE06CgkJCQkJCQkJCWZvciAoOyAzMiA+IHU7KSB7CgkJCQkJCQkJCQlpZiAoMCA9PT0gbCkgYnJlYWsgZTsKCQkJCQkJCQkJCWwtLSwgaCArPSBhW3IrK10gPDwgdSwgdSArPSA4CgkJCQkJCQkJCX0KCQkJCQkJCQkJbi5oZWFkICYmIChuLmhlYWQudGltZSA9IGgpLCA1MTIgJiBuLmZsYWdzICYmIChDZVswXSA9IDI1NSAmIGgsIENlWzFdID0gaCA+Pj4gOCAmIDI1NSwgQ2VbMl0gPSBoID4+PiAxNiAmIDI1NSwgQ2VbM10gPSBoID4+PiAyNCAmIDI1NSwgbi5jaGVjayA9IHYobi5jaGVjaywgQ2UsIDQsIDApKSwgaCA9IDAsIHUgPSAwLCBuLm1vZGUgPSBSOwoJCQkJCQkJCWNhc2UgUjoKCQkJCQkJCQkJZm9yICg7IDE2ID4gdTspIHsKCQkJCQkJCQkJCWlmICgwID09PSBsKSBicmVhayBlOwoJCQkJCQkJCQkJbC0tLCBoICs9IGFbcisrXSA8PCB1LCB1ICs9IDgKCQkJCQkJCQkJfQoJCQkJCQkJCQluLmhlYWQgJiYgKG4uaGVhZC54ZmxhZ3MgPSAyNTUgJiBoLCBuLmhlYWQub3MgPSBoID4+IDgpLCA1MTIgJiBuLmZsYWdzICYmIChDZVswXSA9IDI1NSAmIGgsIENlWzFdID0gaCA+Pj4gOCAmIDI1NSwgbi5jaGVjayA9IHYobi5jaGVjaywgQ2UsIDIsIDApKSwgaCA9IDAsIHUgPSAwLCBuLm1vZGUgPSBGOwoJCQkJCQkJCWNhc2UgRjoKCQkJCQkJCQkJaWYgKDEwMjQgJiBuLmZsYWdzKSB7CgkJCQkJCQkJCQlmb3IgKDsgMTYgPiB1OykgewoJCQkJCQkJCQkJCWlmICgwID09PSBsKSBicmVhayBlOwoJCQkJCQkJCQkJCWwtLSwgaCArPSBhW3IrK10gPDwgdSwgdSArPSA4CgkJCQkJCQkJCQl9CgkJCQkJCQkJCQluLmxlbmd0aCA9IGgsIG4uaGVhZCAmJiAobi5oZWFkLmV4dHJhX2xlbiA9IGgpLCA1MTIgJiBuLmZsYWdzICYmIChDZVswXSA9IDI1NSAmIGgsIENlWzFdID0gaCA+Pj4gOCAmIDI1NSwgbi5jaGVjayA9IHYobi5jaGVjaywgQ2UsIDIsIDApKSwgaCA9IDAsIHUgPSAwCgkJCQkJCQkJCX0gZWxzZSBuLmhlYWQgJiYgKG4uaGVhZC5leHRyYSA9IG51bGwpOwoJCQkJCQkJCQluLm1vZGUgPSAkOwoJCQkJCQkJCWNhc2UgJDoKCQkJCQkJCQkJaWYgKDEwMjQgJiBuLmZsYWdzICYmIChnID0gbi5sZW5ndGgsIGcgPiBsICYmIChnID0gbCksIGcgJiYgKG4uaGVhZCAmJiAoeWUgPSBuLmhlYWQuZXh0cmFfbGVuIC0gbi5sZW5ndGgsIG4uaGVhZC5leHRyYSB8fCAobi5oZWFkLmV4dHJhID0gbmV3IEFycmF5KG4uaGVhZC5leHRyYV9sZW4pKSwgeC5hcnJheVNldChuLmhlYWQuZXh0cmEsIGEsIHIsIGcsIHllKSksIDUxMiAmIG4uZmxhZ3MgJiYgKG4uY2hlY2sgPSB2KG4uY2hlY2ssIGEsIGcsIHIpKSwgbCAtPSBnLCByICs9IGcsIG4ubGVuZ3RoIC09IGcpLCBuLmxlbmd0aCkpIGJyZWFrIGU7CgkJCQkJCQkJCW4ubGVuZ3RoID0gMCwgbi5tb2RlID0gVzsKCQkJCQkJCQljYXNlIFc6CgkJCQkJCQkJCWlmICgyMDQ4ICYgbi5mbGFncykgewoJCQkJCQkJCQkJaWYgKDAgPT09IGwpIGJyZWFrIGU7CgkJCQkJCQkJCQlnID0gMDsKCQkJCQkJCQkJCWRvIHllID0gYVtyICsgZysrXSwgbi5oZWFkICYmIHllICYmIG4ubGVuZ3RoIDwgNjU1MzYgJiYgKG4uaGVhZC5uYW1lICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoeWUpKTsgd2hpbGUgKHllICYmIGwgPiBnKTsKCQkJCQkJCQkJCWlmICg1MTIgJiBuLmZsYWdzICYmIChuLmNoZWNrID0gdihuLmNoZWNrLCBhLCBnLCByKSksIGwgLT0gZywgciArPSBnLCB5ZSkgYnJlYWsgZQoJCQkJCQkJCQl9IGVsc2Ugbi5oZWFkICYmIChuLmhlYWQubmFtZSA9IG51bGwpOwoJCQkJCQkJCQluLmxlbmd0aCA9IDAsIG4ubW9kZSA9IEg7CgkJCQkJCQkJY2FzZSBIOgoJCQkJCQkJCQlpZiAoNDA5NiAmIG4uZmxhZ3MpIHsKCQkJCQkJCQkJCWlmICgwID09PSBsKSBicmVhayBlOwoJCQkJCQkJCQkJZyA9IDA7CgkJCQkJCQkJCQlkbyB5ZSA9IGFbciArIGcrK10sIG4uaGVhZCAmJiB5ZSAmJiBuLmxlbmd0aCA8IDY1NTM2ICYmIChuLmhlYWQuY29tbWVudCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHllKSk7IHdoaWxlICh5ZSAmJiBsID4gZyk7CgkJCQkJCQkJCQlpZiAoNTEyICYgbi5mbGFncyAmJiAobi5jaGVjayA9IHYobi5jaGVjaywgYSwgZywgcikpLCBsIC09IGcsIHIgKz0gZywgeWUpIGJyZWFrIGUKCQkJCQkJCQkJfSBlbHNlIG4uaGVhZCAmJiAobi5oZWFkLmNvbW1lbnQgPSBudWxsKTsKCQkJCQkJCQkJbi5tb2RlID0gVTsKCQkJCQkJCQljYXNlIFU6CgkJCQkJCQkJCWlmICg1MTIgJiBuLmZsYWdzKSB7CgkJCQkJCQkJCQlmb3IgKDsgMTYgPiB1OykgewoJCQkJCQkJCQkJCWlmICgwID09PSBsKSBicmVhayBlOwoJCQkJCQkJCQkJCWwtLSwgaCArPSBhW3IrK10gPDwgdSwgdSArPSA4CgkJCQkJCQkJCQl9CgkJCQkJCQkJCQlpZiAoaCAhPT0gKDY1NTM1ICYgbi5jaGVjaykpIHsKCQkJCQkJCQkJCQllLm1zZyA9ICJoZWFkZXIgY3JjIG1pc21hdGNoIiwgbi5tb2RlID0gaGU7CgkJCQkJCQkJCQkJYnJlYWsKCQkJCQkJCQkJCX0KCQkJCQkJCQkJCWggPSAwLCB1ID0gMAoJCQkJCQkJCQl9CgkJCQkJCQkJCW4uaGVhZCAmJiAobi5oZWFkLmhjcmMgPSBuLmZsYWdzID4+IDkgJiAxLCBuLmhlYWQuZG9uZSA9ICEwKSwgZS5hZGxlciA9IG4uY2hlY2sgPSAwLCBuLm1vZGUgPSBYOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlIFk6CgkJCQkJCQkJCWZvciAoOyAzMiA+IHU7KSB7CgkJCQkJCQkJCQlpZiAoMCA9PT0gbCkgYnJlYWsgZTsKCQkJCQkJCQkJCWwtLSwgaCArPSBhW3IrK10gPDwgdSwgdSArPSA4CgkJCQkJCQkJCX0KCQkJCQkJCQkJZS5hZGxlciA9IG4uY2hlY2sgPSBpKGgpLCBoID0gMCwgdSA9IDAsIG4ubW9kZSA9IEc7CgkJCQkJCQkJY2FzZSBHOgoJCQkJCQkJCQlpZiAoMCA9PT0gbi5oYXZlZGljdCkgcmV0dXJuIGUubmV4dF9vdXQgPSBzLCBlLmF2YWlsX291dCA9IGMsIGUubmV4dF9pbiA9IHIsIGUuYXZhaWxfaW4gPSBsLCBuLmhvbGQgPSBoLCBuLmJpdHMgPSB1LCBQOwoJCQkJCQkJCQllLmFkbGVyID0gbi5jaGVjayA9IDEsIG4ubW9kZSA9IFg7CgkJCQkJCQkJY2FzZSBYOgoJCQkJCQkJCQlpZiAodCA9PT0gQyB8fCB0ID09PSBTKSBicmVhayBlOwoJCQkJCQkJCWNhc2UgSjoKCQkJCQkJCQkJaWYgKG4ubGFzdCkgewoJCQkJCQkJCQkJaCA+Pj49IDcgJiB1LCB1IC09IDcgJiB1LCBuLm1vZGUgPSBjZTsKCQkJCQkJCQkJCWJyZWFrCgkJCQkJCQkJCX0KCQkJCQkJCQkJZm9yICg7IDMgPiB1OykgewoJCQkJCQkJCQkJaWYgKDAgPT09IGwpIGJyZWFrIGU7CgkJCQkJCQkJCQlsLS0sIGggKz0gYVtyKytdIDw8IHUsIHUgKz0gOAoJCQkJCQkJCQl9CgkJCQkJCQkJCXN3aXRjaCAobi5sYXN0ID0gMSAmIGgsIGggPj4+PSAxLCB1IC09IDEsIDMgJiBoKSB7CgkJCQkJCQkJCQljYXNlIDA6CgkJCQkJCQkJCQkJbi5tb2RlID0gWjsKCQkJCQkJCQkJCQlicmVhazsKCQkJCQkJCQkJCWNhc2UgMToKCQkJCQkJCQkJCQlpZiAoZChuKSwgbi5tb2RlID0gbmUsIHQgPT09IFMpIHsKCQkJCQkJCQkJCQkJaCA+Pj49IDIsIHUgLT0gMjsKCQkJCQkJCQkJCQkJYnJlYWsgZQoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQlicmVhazsKCQkJCQkJCQkJCWNhc2UgMjoKCQkJCQkJCQkJCQluLm1vZGUgPSBROwoJCQkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCQkJY2FzZSAzOgoJCQkJCQkJCQkJCWUubXNnID0gImludmFsaWQgYmxvY2sgdHlwZSIsIG4ubW9kZSA9IGhlCgkJCQkJCQkJCX0KCQkJCQkJCQkJaCA+Pj49IDIsIHUgLT0gMjsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJY2FzZSBaOgoJCQkJCQkJCQlmb3IgKGggPj4+PSA3ICYgdSwgdSAtPSA3ICYgdTsgMzIgPiB1OykgewoJCQkJCQkJCQkJaWYgKDAgPT09IGwpIGJyZWFrIGU7CgkJCQkJCQkJCQlsLS0sIGggKz0gYVtyKytdIDw8IHUsIHUgKz0gOAoJCQkJCQkJCQl9CgkJCQkJCQkJCWlmICgoNjU1MzUgJiBoKSAhPT0gKGggPj4+IDE2IF4gNjU1MzUpKSB7CgkJCQkJCQkJCQllLm1zZyA9ICJpbnZhbGlkIHN0b3JlZCBibG9jayBsZW5ndGhzIiwgbi5tb2RlID0gaGU7CgkJCQkJCQkJCQlicmVhawoJCQkJCQkJCQl9CgkJCQkJCQkJCWlmIChuLmxlbmd0aCA9IDY1NTM1ICYgaCwgaCA9IDAsIHUgPSAwLCBuLm1vZGUgPSBWLCB0ID09PSBTKSBicmVhayBlOwoJCQkJCQkJCWNhc2UgVjoKCQkJCQkJCQkJbi5tb2RlID0gSzsKCQkJCQkJCQljYXNlIEs6CgkJCQkJCQkJCWlmIChnID0gbi5sZW5ndGgpIHsKCQkJCQkJCQkJCWlmIChnID4gbCAmJiAoZyA9IGwpLCBnID4gYyAmJiAoZyA9IGMpLCAwID09PSBnKSBicmVhayBlOwoJCQkJCQkJCQkJeC5hcnJheVNldChvLCBhLCByLCBnLCBzKSwgbCAtPSBnLCByICs9IGcsIGMgLT0gZywgcyArPSBnLCBuLmxlbmd0aCAtPSBnOwoJCQkJCQkJCQkJYnJlYWsKCQkJCQkJCQkJfQoJCQkJCQkJCQluLm1vZGUgPSBYOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlIFE6CgkJCQkJCQkJCWZvciAoOyAxNCA+IHU7KSB7CgkJCQkJCQkJCQlpZiAoMCA9PT0gbCkgYnJlYWsgZTsKCQkJCQkJCQkJCWwtLSwgaCArPSBhW3IrK10gPDwgdSwgdSArPSA4CgkJCQkJCQkJCX0KCQkJCQkJCQkJaWYgKG4ubmxlbiA9ICgzMSAmIGgpICsgMjU3LCBoID4+Pj0gNSwgdSAtPSA1LCBuLm5kaXN0ID0gKDMxICYgaCkgKyAxLCBoID4+Pj0gNSwgdSAtPSA1LCBuLm5jb2RlID0gKDE1ICYgaCkgKyA0LCBoID4+Pj0gNCwgdSAtPSA0LCBuLm5sZW4gPiAyODYgfHwgbi5uZGlzdCA+IDMwKSB7CgkJCQkJCQkJCQllLm1zZyA9ICJ0b28gbWFueSBsZW5ndGggb3IgZGlzdGFuY2Ugc3ltYm9scyIsIG4ubW9kZSA9IGhlOwoJCQkJCQkJCQkJYnJlYWsKCQkJCQkJCQkJfQoJCQkJCQkJCQluLmhhdmUgPSAwLCBuLm1vZGUgPSBlZTsKCQkJCQkJCQljYXNlIGVlOgoJCQkJCQkJCQlmb3IgKDsgbi5oYXZlIDwgbi5uY29kZTspIHsKCQkJCQkJCQkJCWZvciAoOyAzID4gdTspIHsKCQkJCQkJCQkJCQlpZiAoMCA9PT0gbCkgYnJlYWsgZTsKCQkJCQkJCQkJCQlsLS0sIGggKz0gYVtyKytdIDw8IHUsIHUgKz0gOAoJCQkJCQkJCQkJfQoJCQkJCQkJCQkJbi5sZW5zW1NlW24uaGF2ZSsrXV0gPSA3ICYgaCwgaCA+Pj49IDMsIHUgLT0gMwoJCQkJCQkJCQl9CgkJCQkJCQkJCWZvciAoOyBuLmhhdmUgPCAxOTspIG4ubGVuc1tTZVtuLmhhdmUrK11dID0gMDsKCQkJCQkJCQkJaWYgKG4ubGVuY29kZSA9IG4ubGVuZHluLCBuLmxlbmJpdHMgPSA3LCB6ZSA9IHsKCQkJCQkJCQkJCWJpdHM6IG4ubGVuYml0cwoJCQkJCQkJCQl9LCBrZSA9IHkoaywgbi5sZW5zLCAwLCAxOSwgbi5sZW5jb2RlLCAwLCBuLndvcmssIHplKSwgbi5sZW5iaXRzID0gemUuYml0cywga2UpIHsKCQkJCQkJCQkJCWUubXNnID0gImludmFsaWQgY29kZSBsZW5ndGhzIHNldCIsIG4ubW9kZSA9IGhlOwoJCQkJCQkJCQkJYnJlYWsKCQkJCQkJCQkJfQoJCQkJCQkJCQluLmhhdmUgPSAwLCBuLm1vZGUgPSB0ZTsKCQkJCQkJCQljYXNlIHRlOgoJCQkJCQkJCQlmb3IgKDsgbi5oYXZlIDwgbi5ubGVuICsgbi5uZGlzdDspIHsKCQkJCQkJCQkJCWZvciAoOyBqZSA9IG4ubGVuY29kZVtoICYgKDEgPDwgbi5sZW5iaXRzKSAtIDFdLCBnZSA9IGplID4+PiAyNCwgX2UgPSBqZSA+Pj4gMTYgJiAyNTUsIHhlID0gNjU1MzUgJiBqZSwgISh1ID49IGdlKTspIHsKCQkJCQkJCQkJCQlpZiAoMCA9PT0gbCkgYnJlYWsgZTsKCQkJCQkJCQkJCQlsLS0sIGggKz0gYVtyKytdIDw8IHUsIHUgKz0gOAoJCQkJCQkJCQkJfQoJCQkJCQkJCQkJaWYgKDE2ID4geGUpIGggPj4+PSBnZSwgdSAtPSBnZSwgbi5sZW5zW24uaGF2ZSsrXSA9IHhlOwoJCQkJCQkJCQkJZWxzZSB7CgkJCQkJCQkJCQkJaWYgKDE2ID09PSB4ZSkgewoJCQkJCQkJCQkJCQlmb3IgKEJlID0gZ2UgKyAyOyBCZSA+IHU7KSB7CgkJCQkJCQkJCQkJCQlpZiAoMCA9PT0gbCkgYnJlYWsgZTsKCQkJCQkJCQkJCQkJCWwtLSwgaCArPSBhW3IrK10gPDwgdSwgdSArPSA4CgkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJaWYgKGggPj4+PSBnZSwgdSAtPSBnZSwgMCA9PT0gbi5oYXZlKSB7CgkJCQkJCQkJCQkJCQllLm1zZyA9ICJpbnZhbGlkIGJpdCBsZW5ndGggcmVwZWF0Iiwgbi5tb2RlID0gaGU7CgkJCQkJCQkJCQkJCQlicmVhawoJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJCXllID0gbi5sZW5zW24uaGF2ZSAtIDFdLCBnID0gMyArICgzICYgaCksIGggPj4+PSAyLCB1IC09IDIKCQkJCQkJCQkJCQl9IGVsc2UgaWYgKDE3ID09PSB4ZSkgewoJCQkJCQkJCQkJCQlmb3IgKEJlID0gZ2UgKyAzOyBCZSA+IHU7KSB7CgkJCQkJCQkJCQkJCQlpZiAoMCA9PT0gbCkgYnJlYWsgZTsKCQkJCQkJCQkJCQkJCWwtLSwgaCArPSBhW3IrK10gPDwgdSwgdSArPSA4CgkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJaCA+Pj49IGdlLCB1IC09IGdlLCB5ZSA9IDAsIGcgPSAzICsgKDcgJiBoKSwgaCA+Pj49IDMsIHUgLT0gMwoJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCWZvciAoQmUgPSBnZSArIDc7IEJlID4gdTspIHsKCQkJCQkJCQkJCQkJCWlmICgwID09PSBsKSBicmVhayBlOwoJCQkJCQkJCQkJCQkJbC0tLCBoICs9IGFbcisrXSA8PCB1LCB1ICs9IDgKCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQloID4+Pj0gZ2UsIHUgLT0gZ2UsIHllID0gMCwgZyA9IDExICsgKDEyNyAmIGgpLCBoID4+Pj0gNywgdSAtPSA3CgkJCQkJCQkJCQkJfSBpZiAobi5oYXZlICsgZyA+IG4ubmxlbiArIG4ubmRpc3QpIHsKCQkJCQkJCQkJCQkJZS5tc2cgPSAiaW52YWxpZCBiaXQgbGVuZ3RoIHJlcGVhdCIsIG4ubW9kZSA9IGhlOwoJCQkJCQkJCQkJCQlicmVhawoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQlmb3IgKDsgZy0tOykgbi5sZW5zW24uaGF2ZSsrXSA9IHllCgkJCQkJCQkJCQl9CgkJCQkJCQkJCX0KCQkJCQkJCQkJaWYgKG4ubW9kZSA9PT0gaGUpIGJyZWFrOwoJCQkJCQkJCQlpZiAoMCA9PT0gbi5sZW5zWzI1Nl0pIHsKCQkJCQkJCQkJCWUubXNnID0gImludmFsaWQgY29kZSAtLSBtaXNzaW5nIGVuZC1vZi1ibG9jayIsIG4ubW9kZSA9IGhlOwoJCQkJCQkJCQkJYnJlYWsKCQkJCQkJCQkJfQoJCQkJCQkJCQlpZiAobi5sZW5iaXRzID0gOSwgemUgPSB7CgkJCQkJCQkJCQliaXRzOiBuLmxlbmJpdHMKCQkJCQkJCQkJfSwga2UgPSB5KHosIG4ubGVucywgMCwgbi5ubGVuLCBuLmxlbmNvZGUsIDAsIG4ud29yaywgemUpLCBuLmxlbmJpdHMgPSB6ZS5iaXRzLCBrZSkgewoJCQkJCQkJCQkJZS5tc2cgPSAiaW52YWxpZCBsaXRlcmFsL2xlbmd0aHMgc2V0Iiwgbi5tb2RlID0gaGU7CgkJCQkJCQkJCQlicmVhawoJCQkJCQkJCQl9CgkJCQkJCQkJCWlmIChuLmRpc3RiaXRzID0gNiwgbi5kaXN0Y29kZSA9IG4uZGlzdGR5biwgemUgPSB7CgkJCQkJCQkJCQliaXRzOiBuLmRpc3RiaXRzCgkJCQkJCQkJCX0sIGtlID0geShCLCBuLmxlbnMsIG4ubmxlbiwgbi5uZGlzdCwgbi5kaXN0Y29kZSwgMCwgbi53b3JrLCB6ZSksIG4uZGlzdGJpdHMgPSB6ZS5iaXRzLCBrZSkgewoJCQkJCQkJCQkJZS5tc2cgPSAiaW52YWxpZCBkaXN0YW5jZXMgc2V0Iiwgbi5tb2RlID0gaGU7CgkJCQkJCQkJCQlicmVhawoJCQkJCQkJCQl9CgkJCQkJCQkJCWlmIChuLm1vZGUgPSBuZSwgdCA9PT0gUykgYnJlYWsgZTsKCQkJCQkJCQljYXNlIG5lOgoJCQkJCQkJCQluLm1vZGUgPSBpZTsKCQkJCQkJCQljYXNlIGllOgoJCQkJCQkJCQlpZiAobCA+PSA2ICYmIGMgPj0gMjU4KSB7CgkJCQkJCQkJCQllLm5leHRfb3V0ID0gcywgZS5hdmFpbF9vdXQgPSBjLCBlLm5leHRfaW4gPSByLCBlLmF2YWlsX2luID0gbCwgbi5ob2xkID0gaCwgbi5iaXRzID0gdSwgYihlLCBmKSwgcyA9IGUubmV4dF9vdXQsIG8gPSBlLm91dHB1dCwgYyA9IGUuYXZhaWxfb3V0LCByID0gZS5uZXh0X2luLCBhID0gZS5pbnB1dCwgbCA9IGUuYXZhaWxfaW4sIGggPSBuLmhvbGQsIHUgPSBuLmJpdHMsIG4ubW9kZSA9PT0gWCAmJiAobi5iYWNrID0gLTEpOwoJCQkJCQkJCQkJYnJlYWsKCQkJCQkJCQkJfQoJCQkJCQkJCQlmb3IgKG4uYmFjayA9IDA7IGplID0gbi5sZW5jb2RlW2ggJiAoMSA8PCBuLmxlbmJpdHMpIC0gMV0sIGdlID0gamUgPj4+IDI0LCBfZSA9IGplID4+PiAxNiAmIDI1NSwgeGUgPSA2NTUzNSAmIGplLCAhKHUgPj0gZ2UpOykgewoJCQkJCQkJCQkJaWYgKDAgPT09IGwpIGJyZWFrIGU7CgkJCQkJCQkJCQlsLS0sIGggKz0gYVtyKytdIDw8IHUsIHUgKz0gOAoJCQkJCQkJCQl9CgkJCQkJCQkJCWlmIChfZSAmJiAwID09PSAoMjQwICYgX2UpKSB7CgkJCQkJCQkJCQlmb3IgKHdlID0gZ2UsIHZlID0gX2UsIGJlID0geGU7IGplID0gbi5sZW5jb2RlW2JlICsgKChoICYgKDEgPDwgd2UgKyB2ZSkgLSAxKSA+PiB3ZSldLCBnZSA9IGplID4+PiAyNCwgX2UgPSBqZSA+Pj4gMTYgJiAyNTUsIHhlID0gNjU1MzUgJiBqZSwgISh1ID49IHdlICsgZ2UpOykgewoJCQkJCQkJCQkJCWlmICgwID09PSBsKSBicmVhayBlOwoJCQkJCQkJCQkJCWwtLSwgaCArPSBhW3IrK10gPDwgdSwgdSArPSA4CgkJCQkJCQkJCQl9CgkJCQkJCQkJCQloID4+Pj0gd2UsIHUgLT0gd2UsIG4uYmFjayArPSB3ZQoJCQkJCQkJCQl9CgkJCQkJCQkJCWlmIChoID4+Pj0gZ2UsIHUgLT0gZ2UsIG4uYmFjayArPSBnZSwgbi5sZW5ndGggPSB4ZSwgMCA9PT0gX2UpIHsKCQkJCQkJCQkJCW4ubW9kZSA9IGxlOwoJCQkJCQkJCQkJYnJlYWsKCQkJCQkJCQkJfQoJCQkJCQkJCQlpZiAoMzIgJiBfZSkgewoJCQkJCQkJCQkJbi5iYWNrID0gLTEsIG4ubW9kZSA9IFg7CgkJCQkJCQkJCQlicmVhawoJCQkJCQkJCQl9CgkJCQkJCQkJCWlmICg2NCAmIF9lKSB7CgkJCQkJCQkJCQllLm1zZyA9ICJpbnZhbGlkIGxpdGVyYWwvbGVuZ3RoIGNvZGUiLCBuLm1vZGUgPSBoZTsKCQkJCQkJCQkJCWJyZWFrCgkJCQkJCQkJCX0KCQkJCQkJCQkJbi5leHRyYSA9IDE1ICYgX2UsIG4ubW9kZSA9IGFlOwoJCQkJCQkJCWNhc2UgYWU6CgkJCQkJCQkJCWlmIChuLmV4dHJhKSB7CgkJCQkJCQkJCQlmb3IgKEJlID0gbi5leHRyYTsgQmUgPiB1OykgewoJCQkJCQkJCQkJCWlmICgwID09PSBsKSBicmVhayBlOwoJCQkJCQkJCQkJCWwtLSwgaCArPSBhW3IrK10gPDwgdSwgdSArPSA4CgkJCQkJCQkJCQl9CgkJCQkJCQkJCQluLmxlbmd0aCArPSBoICYgKDEgPDwgbi5leHRyYSkgLSAxLCBoID4+Pj0gbi5leHRyYSwgdSAtPSBuLmV4dHJhLCBuLmJhY2sgKz0gbi5leHRyYQoJCQkJCQkJCQl9CgkJCQkJCQkJCW4ud2FzID0gbi5sZW5ndGgsIG4ubW9kZSA9IG9lOwoJCQkJCQkJCWNhc2Ugb2U6CgkJCQkJCQkJCWZvciAoOyBqZSA9IG4uZGlzdGNvZGVbaCAmICgxIDw8IG4uZGlzdGJpdHMpIC0gMV0sIGdlID0gamUgPj4+IDI0LCBfZSA9IGplID4+PiAxNiAmIDI1NSwgeGUgPSA2NTUzNSAmIGplLCAhKHUgPj0gZ2UpOykgewoJCQkJCQkJCQkJaWYgKDAgPT09IGwpIGJyZWFrIGU7CgkJCQkJCQkJCQlsLS0sIGggKz0gYVtyKytdIDw8IHUsIHUgKz0gOAoJCQkJCQkJCQl9CgkJCQkJCQkJCWlmICgwID09PSAoMjQwICYgX2UpKSB7CgkJCQkJCQkJCQlmb3IgKHdlID0gZ2UsIHZlID0gX2UsIGJlID0geGU7IGplID0gbi5kaXN0Y29kZVtiZSArICgoaCAmICgxIDw8IHdlICsgdmUpIC0gMSkgPj4gd2UpXSwgZ2UgPSBqZSA+Pj4gMjQsIF9lID0gamUgPj4+IDE2ICYgMjU1LCB4ZSA9IDY1NTM1ICYgamUsICEodSA+PSB3ZSArIGdlKTspIHsKCQkJCQkJCQkJCQlpZiAoMCA9PT0gbCkgYnJlYWsgZTsKCQkJCQkJCQkJCQlsLS0sIGggKz0gYVtyKytdIDw8IHUsIHUgKz0gOAoJCQkJCQkJCQkJfQoJCQkJCQkJCQkJaCA+Pj49IHdlLCB1IC09IHdlLCBuLmJhY2sgKz0gd2UKCQkJCQkJCQkJfQoJCQkJCQkJCQlpZiAoaCA+Pj49IGdlLCB1IC09IGdlLCBuLmJhY2sgKz0gZ2UsIDY0ICYgX2UpIHsKCQkJCQkJCQkJCWUubXNnID0gImludmFsaWQgZGlzdGFuY2UgY29kZSIsIG4ubW9kZSA9IGhlOwoJCQkJCQkJCQkJYnJlYWsKCQkJCQkJCQkJfQoJCQkJCQkJCQluLm9mZnNldCA9IHhlLCBuLmV4dHJhID0gMTUgJiBfZSwgbi5tb2RlID0gcmU7CgkJCQkJCQkJY2FzZSByZToKCQkJCQkJCQkJaWYgKG4uZXh0cmEpIHsKCQkJCQkJCQkJCWZvciAoQmUgPSBuLmV4dHJhOyBCZSA+IHU7KSB7CgkJCQkJCQkJCQkJaWYgKDAgPT09IGwpIGJyZWFrIGU7CgkJCQkJCQkJCQkJbC0tLCBoICs9IGFbcisrXSA8PCB1LCB1ICs9IDgKCQkJCQkJCQkJCX0KCQkJCQkJCQkJCW4ub2Zmc2V0ICs9IGggJiAoMSA8PCBuLmV4dHJhKSAtIDEsIGggPj4+PSBuLmV4dHJhLCB1IC09IG4uZXh0cmEsIG4uYmFjayArPSBuLmV4dHJhCgkJCQkJCQkJCX0KCQkJCQkJCQkJaWYgKG4ub2Zmc2V0ID4gbi5kbWF4KSB7CgkJCQkJCQkJCQllLm1zZyA9ICJpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFjayIsIG4ubW9kZSA9IGhlOwoJCQkJCQkJCQkJYnJlYWsKCQkJCQkJCQkJfQoJCQkJCQkJCQluLm1vZGUgPSBzZTsKCQkJCQkJCQljYXNlIHNlOgoJCQkJCQkJCQlpZiAoMCA9PT0gYykgYnJlYWsgZTsKCQkJCQkJCQkJaWYgKGcgPSBmIC0gYywgbi5vZmZzZXQgPiBnKSB7CgkJCQkJCQkJCQlpZiAoZyA9IG4ub2Zmc2V0IC0gZywgZyA+IG4ud2hhdmUgJiYgbi5zYW5lKSB7CgkJCQkJCQkJCQkJZS5tc2cgPSAiaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2siLCBuLm1vZGUgPSBoZTsKCQkJCQkJCQkJCQlicmVhawoJCQkJCQkJCQkJfQoJCQkJCQkJCQkJZyA+IG4ud25leHQgPyAoZyAtPSBuLnduZXh0LCBfID0gbi53c2l6ZSAtIGcpIDogXyA9IG4ud25leHQgLSBnLCBnID4gbi5sZW5ndGggJiYgKGcgPSBuLmxlbmd0aCksIGZlID0gbi53aW5kb3cKCQkJCQkJCQkJfSBlbHNlIGZlID0gbywgXyA9IHMgLSBuLm9mZnNldCwgZyA9IG4ubGVuZ3RoOwoJCQkJCQkJCQlnID4gYyAmJiAoZyA9IGMpLCBjIC09IGcsIG4ubGVuZ3RoIC09IGc7CgkJCQkJCQkJCWRvIG9bcysrXSA9IGZlW18rK107IHdoaWxlICgtLWcpOwoJCQkJCQkJCQkwID09PSBuLmxlbmd0aCAmJiAobi5tb2RlID0gaWUpOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlIGxlOgoJCQkJCQkJCQlpZiAoMCA9PT0gYykgYnJlYWsgZTsKCQkJCQkJCQkJb1tzKytdID0gbi5sZW5ndGgsIGMtLSwgbi5tb2RlID0gaWU7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgY2U6CgkJCQkJCQkJCWlmIChuLndyYXApIHsKCQkJCQkJCQkJCWZvciAoOyAzMiA+IHU7KSB7CgkJCQkJCQkJCQkJaWYgKDAgPT09IGwpIGJyZWFrIGU7CgkJCQkJCQkJCQkJbC0tLCBoIHw9IGFbcisrXSA8PCB1LCB1ICs9IDgKCQkJCQkJCQkJCX0KCQkJCQkJCQkJCWlmIChmIC09IGMsIGUudG90YWxfb3V0ICs9IGYsIG4udG90YWwgKz0gZiwgZiAmJiAoZS5hZGxlciA9IG4uY2hlY2sgPSBuLmZsYWdzID8gdihuLmNoZWNrLCBvLCBmLCBzIC0gZikgOiB3KG4uY2hlY2ssIG8sIGYsIHMgLSBmKSksIGYgPSBjLCAobi5mbGFncyA/IGggOiBpKGgpKSAhPT0gbi5jaGVjaykgewoJCQkJCQkJCQkJCWUubXNnID0gImluY29ycmVjdCBkYXRhIGNoZWNrIiwgbi5tb2RlID0gaGU7CgkJCQkJCQkJCQkJYnJlYWsKCQkJCQkJCQkJCX0KCQkJCQkJCQkJCWggPSAwLCB1ID0gMAoJCQkJCQkJCQl9CgkJCQkJCQkJCW4ubW9kZSA9IGRlOwoJCQkJCQkJCWNhc2UgZGU6CgkJCQkJCQkJCWlmIChuLndyYXAgJiYgbi5mbGFncykgewoJCQkJCQkJCQkJZm9yICg7IDMyID4gdTspIHsKCQkJCQkJCQkJCQlpZiAoMCA9PT0gbCkgYnJlYWsgZTsKCQkJCQkJCQkJCQlsLS0sIGggKz0gYVtyKytdIDw8IHUsIHUgKz0gOAoJCQkJCQkJCQkJfQoJCQkJCQkJCQkJaWYgKGggIT09ICg0Mjk0OTY3Mjk1ICYgbi50b3RhbCkpIHsKCQkJCQkJCQkJCQllLm1zZyA9ICJpbmNvcnJlY3QgbGVuZ3RoIGNoZWNrIiwgbi5tb2RlID0gaGU7CgkJCQkJCQkJCQkJYnJlYWsKCQkJCQkJCQkJCX0KCQkJCQkJCQkJCWggPSAwLCB1ID0gMAoJCQkJCQkJCQl9CgkJCQkJCQkJCW4ubW9kZSA9IHBlOwoJCQkJCQkJCWNhc2UgcGU6CgkJCQkJCQkJCWtlID0gVDsKCQkJCQkJCQkJYnJlYWsgZTsKCQkJCQkJCQljYXNlIGhlOgoJCQkJCQkJCQlrZSA9IEE7CgkJCQkJCQkJCWJyZWFrIGU7CgkJCQkJCQkJY2FzZSB1ZToKCQkJCQkJCQkJcmV0dXJuIHE7CgkJCQkJCQkJY2FzZSBtZToKCQkJCQkJCQlkZWZhdWx0OgoJCQkJCQkJCQlyZXR1cm4gSQoJCQkJCQkJfQoJCQkJCQkJcmV0dXJuIGUubmV4dF9vdXQgPSBzLCBlLmF2YWlsX291dCA9IGMsIGUubmV4dF9pbiA9IHIsIGUuYXZhaWxfaW4gPSBsLCBuLmhvbGQgPSBoLCBuLmJpdHMgPSB1LCAobi53c2l6ZSB8fCBmICE9PSBlLmF2YWlsX291dCAmJiBuLm1vZGUgPCBoZSAmJiAobi5tb2RlIDwgY2UgfHwgdCAhPT0gaikpICYmIHAoZSwgZS5vdXRwdXQsIGUubmV4dF9vdXQsIGYgLSBlLmF2YWlsX291dCkgPyAobi5tb2RlID0gdWUsIHEpIDogKG0gLT0gZS5hdmFpbF9pbiwgZiAtPSBlLmF2YWlsX291dCwgZS50b3RhbF9pbiArPSBtLCBlLnRvdGFsX291dCArPSBmLCBuLnRvdGFsICs9IGYsIG4ud3JhcCAmJiBmICYmIChlLmFkbGVyID0gbi5jaGVjayA9IG4uZmxhZ3MgPyB2KG4uY2hlY2ssIG8sIGYsIGUubmV4dF9vdXQgLSBmKSA6IHcobi5jaGVjaywgbywgZiwgZS5uZXh0X291dCAtIGYpKSwgZS5kYXRhX3R5cGUgPSBuLmJpdHMgKyAobi5sYXN0ID8gNjQgOiAwKSArIChuLm1vZGUgPT09IFggPyAxMjggOiAwKSArIChuLm1vZGUgPT09IG5lIHx8IG4ubW9kZSA9PT0gViA/IDI1NiA6IDApLCAoMCA9PT0gbSAmJiAwID09PSBmIHx8IHQgPT09IGopICYmIGtlID09PSBOICYmIChrZSA9IEUpLCBrZSkKCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gdShlKSB7CgkJCQkJCQlpZiAoIWUgfHwgIWUuc3RhdGUpIHJldHVybiBJOwoJCQkJCQkJdmFyIHQgPSBlLnN0YXRlOwoJCQkJCQkJcmV0dXJuIHQud2luZG93ICYmICh0LndpbmRvdyA9IG51bGwpLCBlLnN0YXRlID0gbnVsbCwgTgoJCQkJCQl9CgoJCQkJCQlmdW5jdGlvbiBtKGUsIHQpIHsKCQkJCQkJCXZhciBuOwoJCQkJCQkJcmV0dXJuIGUgJiYgZS5zdGF0ZSA/IChuID0gZS5zdGF0ZSwgMCA9PT0gKDIgJiBuLndyYXApID8gSSA6IChuLmhlYWQgPSB0LCB0LmRvbmUgPSAhMSwgTikpIDogSQoJCQkJCQl9CgoJCQkJCQlmdW5jdGlvbiBmKGUsIHQpIHsKCQkJCQkJCXZhciBuLCBpLCBhLCBvID0gdC5sZW5ndGg7CgkJCQkJCQlyZXR1cm4gZSAmJiBlLnN0YXRlID8gKG4gPSBlLnN0YXRlLCAwICE9PSBuLndyYXAgJiYgbi5tb2RlICE9PSBHID8gSSA6IG4ubW9kZSA9PT0gRyAmJiAoaSA9IDEsIGkgPSB3KGksIHQsIG8sIDApLCBpICE9PSBuLmNoZWNrKSA/IEEgOiAoYSA9IHAoZSwgdCwgbywgbykpID8gKG4ubW9kZSA9IHVlLCBxKSA6IChuLmhhdmVkaWN0ID0gMSwgTikpIDogSQoJCQkJCQl9CgkJCQkJCXZhciBnLCBfLCB4ID0gZSgiLi4vdXRpbHMvY29tbW9uIiksCgkJCQkJCQl3ID0gZSgiLi9hZGxlcjMyIiksCgkJCQkJCQl2ID0gZSgiLi9jcmMzMiIpLAoJCQkJCQkJYiA9IGUoIi4vaW5mZmFzdCIpLAoJCQkJCQkJeSA9IGUoIi4vaW5mdHJlZXMiKSwKCQkJCQkJCWsgPSAwLAoJCQkJCQkJeiA9IDEsCgkJCQkJCQlCID0gMiwKCQkJCQkJCWogPSA0LAoJCQkJCQkJQyA9IDUsCgkJCQkJCQlTID0gNiwKCQkJCQkJCU4gPSAwLAoJCQkJCQkJVCA9IDEsCgkJCQkJCQlQID0gMiwKCQkJCQkJCUkgPSAtMiwKCQkJCQkJCUEgPSAtMywKCQkJCQkJCXEgPSAtNCwKCQkJCQkJCUUgPSAtNSwKCQkJCQkJCU8gPSA4LAoJCQkJCQkJTCA9IDEsCgkJCQkJCQlEID0gMiwKCQkJCQkJCU0gPSAzLAoJCQkJCQkJUiA9IDQsCgkJCQkJCQlGID0gNSwKCQkJCQkJCSQgPSA2LAoJCQkJCQkJVyA9IDcsCgkJCQkJCQlIID0gOCwKCQkJCQkJCVUgPSA5LAoJCQkJCQkJWSA9IDEwLAoJCQkJCQkJRyA9IDExLAoJCQkJCQkJWCA9IDEyLAoJCQkJCQkJSiA9IDEzLAoJCQkJCQkJWiA9IDE0LAoJCQkJCQkJViA9IDE1LAoJCQkJCQkJSyA9IDE2LAoJCQkJCQkJUSA9IDE3LAoJCQkJCQkJZWUgPSAxOCwKCQkJCQkJCXRlID0gMTksCgkJCQkJCQluZSA9IDIwLAoJCQkJCQkJaWUgPSAyMSwKCQkJCQkJCWFlID0gMjIsCgkJCQkJCQlvZSA9IDIzLAoJCQkJCQkJcmUgPSAyNCwKCQkJCQkJCXNlID0gMjUsCgkJCQkJCQlsZSA9IDI2LAoJCQkJCQkJY2UgPSAyNywKCQkJCQkJCWRlID0gMjgsCgkJCQkJCQlwZSA9IDI5LAoJCQkJCQkJaGUgPSAzMCwKCQkJCQkJCXVlID0gMzEsCgkJCQkJCQltZSA9IDMyLAoJCQkJCQkJZmUgPSA4NTIsCgkJCQkJCQlnZSA9IDU5MiwKCQkJCQkJCV9lID0gMTUsCgkJCQkJCQl4ZSA9IF9lLAoJCQkJCQkJd2UgPSAhMDsKCQkJCQkJbi5pbmZsYXRlUmVzZXQgPSByLCBuLmluZmxhdGVSZXNldDIgPSBzLCBuLmluZmxhdGVSZXNldEtlZXAgPSBvLCBuLmluZmxhdGVJbml0ID0gYywgbi5pbmZsYXRlSW5pdDIgPSBsLCBuLmluZmxhdGUgPSBoLCBuLmluZmxhdGVFbmQgPSB1LCBuLmluZmxhdGVHZXRIZWFkZXIgPSBtLCBuLmluZmxhdGVTZXREaWN0aW9uYXJ5ID0gZiwgbi5pbmZsYXRlSW5mbyA9ICJwYWtvIGluZmxhdGUgKGZyb20gTm9kZWNhIHByb2plY3QpIgoJCQkJCX0sIHsKCQkJCQkJIi4uL3V0aWxzL2NvbW1vbiI6IDMsCgkJCQkJCSIuL2FkbGVyMzIiOiA1LAoJCQkJCQkiLi9jcmMzMiI6IDcsCgkJCQkJCSIuL2luZmZhc3QiOiAxMCwKCQkJCQkJIi4vaW5mdHJlZXMiOiAxMgoJCQkJCX0KCQkJCV0sCgkJCQkxMjogWwoJCQkJCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQkJInVzZSBzdHJpY3QiOwoJCQkJCQl2YXIgaSA9IGUoIi4uL3V0aWxzL2NvbW1vbiIpLAoJCQkJCQkJYSA9IDE1LAoJCQkJCQkJbyA9IDg1MiwKCQkJCQkJCXIgPSA1OTIsCgkJCQkJCQlzID0gMCwKCQkJCQkJCWwgPSAxLAoJCQkJCQkJYyA9IDIsCgkJCQkJCQlkID0gWzMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMSwgMTMsIDE1LCAxNywgMTksIDIzLCAyNywgMzEsIDM1LCA0MywgNTEsIDU5LCA2NywgODMsIDk5LCAxMTUsIDEzMSwgMTYzLCAxOTUsIDIyNywgMjU4LCAwLCAwXSwKCQkJCQkJCXAgPSBbMTYsIDE2LCAxNiwgMTYsIDE2LCAxNiwgMTYsIDE2LCAxNywgMTcsIDE3LCAxNywgMTgsIDE4LCAxOCwgMTgsIDE5LCAxOSwgMTksIDE5LCAyMCwgMjAsIDIwLCAyMCwgMjEsIDIxLCAyMSwgMjEsIDE2LCA3MiwgNzhdLAoJCQkJCQkJaCA9IFsxLCAyLCAzLCA0LCA1LCA3LCA5LCAxMywgMTcsIDI1LCAzMywgNDksIDY1LCA5NywgMTI5LCAxOTMsIDI1NywgMzg1LCA1MTMsIDc2OSwgMTAyNSwgMTUzNywgMjA0OSwgMzA3MywgNDA5NywgNjE0NSwgODE5MywgMTIyODksIDE2Mzg1LCAyNDU3NywgMCwgMF0sCgkJCQkJCQl1ID0gWzE2LCAxNiwgMTYsIDE2LCAxNywgMTcsIDE4LCAxOCwgMTksIDE5LCAyMCwgMjAsIDIxLCAyMSwgMjIsIDIyLCAyMywgMjMsIDI0LCAyNCwgMjUsIDI1LCAyNiwgMjYsIDI3LCAyNywgMjgsIDI4LCAyOSwgMjksIDY0LCA2NF07CgkJCQkJCXQuZXhwb3J0cyA9IGZ1bmN0aW9uKGUsIHQsIG4sIG0sIGYsIGcsIF8sIHgpIHsKCQkJCQkJCXZhciB3LCB2LCBiLCB5LCBrLCB6LCBCLCBqLCBDLCBTID0geC5iaXRzLAoJCQkJCQkJCU4gPSAwLAoJCQkJCQkJCVQgPSAwLAoJCQkJCQkJCVAgPSAwLAoJCQkJCQkJCUkgPSAwLAoJCQkJCQkJCUEgPSAwLAoJCQkJCQkJCXEgPSAwLAoJCQkJCQkJCUUgPSAwLAoJCQkJCQkJCU8gPSAwLAoJCQkJCQkJCUwgPSAwLAoJCQkJCQkJCUQgPSAwLAoJCQkJCQkJCU0gPSBudWxsLAoJCQkJCQkJCVIgPSAwLAoJCQkJCQkJCUYgPSBuZXcgaS5CdWYxNihhICsgMSksCgkJCQkJCQkJJCA9IG5ldyBpLkJ1ZjE2KGEgKyAxKSwKCQkJCQkJCQlXID0gbnVsbCwKCQkJCQkJCQlIID0gMDsKCQkJCQkJCWZvciAoTiA9IDA7IGEgPj0gTjsgTisrKSBGW05dID0gMDsKCQkJCQkJCWZvciAoVCA9IDA7IG0gPiBUOyBUKyspIEZbdFtuICsgVF1dICsrOwoJCQkJCQkJZm9yIChBID0gUywgSSA9IGE7IEkgPj0gMSAmJiAwID09PSBGW0ldOyBJLS0pOwoJCQkJCQkJaWYgKEEgPiBJICYmIChBID0gSSksIDAgPT09IEkpIHJldHVybiBmW2crK10gPSAyMDk3MTUyMCwgZltnKytdID0gMjA5NzE1MjAsIHguYml0cyA9IDEsIDA7CgkJCQkJCQlmb3IgKFAgPSAxOyBJID4gUCAmJiAwID09PSBGW1BdOyBQKyspOwoJCQkJCQkJZm9yIChQID4gQSAmJiAoQSA9IFApLCBPID0gMSwgTiA9IDE7IGEgPj0gTjsgTisrKQoJCQkJCQkJCWlmIChPIDw8PSAxLCBPIC09IEZbTl0sIDAgPiBPKSByZXR1cm4gLTE7CgkJCQkJCQlpZiAoTyA+IDAgJiYgKGUgPT09IHMgfHwgMSAhPT0gSSkpIHJldHVybiAtMTsKCQkJCQkJCWZvciAoJFsxXSA9IDAsIE4gPSAxOyBhID4gTjsgTisrKSAkW04gKyAxXSA9ICRbTl0gKyBGW05dOwoJCQkJCQkJZm9yIChUID0gMDsgbSA+IFQ7IFQrKykgMCAhPT0gdFtuICsgVF0gJiYgKF9bJFt0W24gKyBUXV0gKytdID0gVCk7CgkJCQkJCQlpZiAoZSA9PT0gcyA/IChNID0gVyA9IF8sIHogPSAxOSkgOiBlID09PSBsID8gKE0gPSBkLCBSIC09IDI1NywgVyA9IHAsIEggLT0gMjU3LCB6ID0gMjU2KSA6IChNID0gaCwgVyA9IHUsIHogPSAtMSksIEQgPSAwLCBUID0gMCwgTiA9IFAsIGsgPSBnLCBxID0gQSwgRSA9IDAsIGIgPSAtMSwgTCA9IDEgPDwgQSwgeSA9IEwgLSAxLCBlID09PSBsICYmIEwgPiBvIHx8IGUgPT09IGMgJiYgTCA+IHIpIHJldHVybiAxOwoJCQkJCQkJZm9yICh2YXIgVSA9IDA7OykgewoJCQkJCQkJCVUrKywgQiA9IE4gLSBFLCBfW1RdIDwgeiA/IChqID0gMCwgQyA9IF9bVF0pIDogX1tUXSA+IHogPyAoaiA9IFdbSCArIF9bVF1dLCBDID0gTVtSICsgX1tUXV0pIDogKGogPSA5NiwgQyA9IDApLCB3ID0gMSA8PCBOIC0gRSwgdiA9IDEgPDwgcSwgUCA9IHY7CgkJCQkJCQkJZG8gdiAtPSB3LCBmW2sgKyAoRCA+PiBFKSArIHZdID0gQiA8PCAyNCB8IGogPDwgMTYgfCBDIHwgMDsgd2hpbGUgKDAgIT09IHYpOwoJCQkJCQkJCWZvciAodyA9IDEgPDwgTiAtIDE7IEQgJiB3OykgdyA+Pj0gMTsKCQkJCQkJCQlpZiAoMCAhPT0gdyA/IChEICY9IHcgLSAxLCBEICs9IHcpIDogRCA9IDAsIFQrKywgMCA9PT0gLS1GW05dKSB7CgkJCQkJCQkJCWlmIChOID09PSBJKSBicmVhazsKCQkJCQkJCQkJTiA9IHRbbiArIF9bVF1dCgkJCQkJCQkJfQoJCQkJCQkJCWlmIChOID4gQSAmJiAoRCAmIHkpICE9PSBiKSB7CgkJCQkJCQkJCWZvciAoMCA9PT0gRSAmJiAoRSA9IEEpLCBrICs9IFAsIHEgPSBOIC0gRSwgTyA9IDEgPDwgcTsgSSA+IHEgKyBFICYmIChPIC09IEZbcSArIEVdLCAhKDAgPj0gTykpOykgcSsrLCBPIDw8PSAxOwoJCQkJCQkJCQlpZiAoTCArPSAxIDw8IHEsIGUgPT09IGwgJiYgTCA+IG8gfHwgZSA9PT0gYyAmJiBMID4gcikgcmV0dXJuIDE7CgkJCQkJCQkJCWIgPSBEICYgeSwgZltiXSA9IEEgPDwgMjQgfCBxIDw8IDE2IHwgayAtIGcgfCAwCgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQkJcmV0dXJuIDAgIT09IEQgJiYgKGZbayArIERdID0gTiAtIEUgPDwgMjQgfCA2NCA8PCAxNiB8IDApLCB4LmJpdHMgPSBBLCAwCgkJCQkJCX0KCQkJCQl9LCB7CgkJCQkJCSIuLi91dGlscy9jb21tb24iOiAzCgkJCQkJfQoJCQkJXSwKCQkJCTEzOiBbCgkJCQkJZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCQkidXNlIHN0cmljdCI7CgkJCQkJCXQuZXhwb3J0cyA9IHsKCQkJCQkJCTI6ICJuZWVkIGRpY3Rpb25hcnkiLAoJCQkJCQkJMTogInN0cmVhbSBlbmQiLAoJCQkJCQkJMDogIiIsCgkJCQkJCQkiLTEiOiAiZmlsZSBlcnJvciIsCgkJCQkJCQkiLTIiOiAic3RyZWFtIGVycm9yIiwKCQkJCQkJCSItMyI6ICJkYXRhIGVycm9yIiwKCQkJCQkJCSItNCI6ICJpbnN1ZmZpY2llbnQgbWVtb3J5IiwKCQkJCQkJCSItNSI6ICJidWZmZXIgZXJyb3IiLAoJCQkJCQkJIi02IjogImluY29tcGF0aWJsZSB2ZXJzaW9uIgoJCQkJCQl9CgkJCQkJfSwge30KCQkJCV0sCgkJCQkxNDogWwoJCQkJCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQkJInVzZSBzdHJpY3QiOwoKCQkJCQkJZnVuY3Rpb24gaShlKSB7CgkJCQkJCQlmb3IgKHZhciB0ID0gZS5sZW5ndGg7IC0tdCA+PSAwOykgZVt0XSA9IDAKCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gYShlLCB0LCBuLCBpLCBhKSB7CgkJCQkJCQl0aGlzLnN0YXRpY190cmVlID0gZSwgdGhpcy5leHRyYV9iaXRzID0gdCwgdGhpcy5leHRyYV9iYXNlID0gbiwgdGhpcy5lbGVtcyA9IGksIHRoaXMubWF4X2xlbmd0aCA9IGEsIHRoaXMuaGFzX3N0cmVlID0gZSAmJiBlLmxlbmd0aAoJCQkJCQl9CgoJCQkJCQlmdW5jdGlvbiBvKGUsIHQpIHsKCQkJCQkJCXRoaXMuZHluX3RyZWUgPSBlLCB0aGlzLm1heF9jb2RlID0gMCwgdGhpcy5zdGF0X2Rlc2MgPSB0CgkJCQkJCX0KCgkJCQkJCWZ1bmN0aW9uIHIoZSkgewoJCQkJCQkJcmV0dXJuIDI1NiA+IGUgPyBsZVtlXSA6IGxlWzI1NiArIChlID4+PiA3KV0KCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gcyhlLCB0KSB7CgkJCQkJCQllLnBlbmRpbmdfYnVmW2UucGVuZGluZysrXSA9IDI1NSAmIHQsIGUucGVuZGluZ19idWZbZS5wZW5kaW5nKytdID0gdCA+Pj4gOCAmIDI1NQoJCQkJCQl9CgoJCQkJCQlmdW5jdGlvbiBsKGUsIHQsIG4pIHsKCQkJCQkJCWUuYmlfdmFsaWQgPiBKIC0gbiA/IChlLmJpX2J1ZiB8PSB0IDw8IGUuYmlfdmFsaWQgJiA2NTUzNSwgcyhlLCBlLmJpX2J1ZiksIGUuYmlfYnVmID0gdCA+PiBKIC0gZS5iaV92YWxpZCwgZS5iaV92YWxpZCArPSBuIC0gSikgOiAoZS5iaV9idWYgfD0gdCA8PCBlLmJpX3ZhbGlkICYgNjU1MzUsIGUuYmlfdmFsaWQgKz0gbikKCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gYyhlLCB0LCBuKSB7CgkJCQkJCQlsKGUsIG5bMiAqIHRdLCBuWzIgKiB0ICsgMV0pCgkJCQkJCX0KCgkJCQkJCWZ1bmN0aW9uIGQoZSwgdCkgewoJCQkJCQkJdmFyIG4gPSAwOwoJCQkJCQkJZG8gbiB8PSAxICYgZSwgZSA+Pj49IDEsIG4gPDw9IDE7IHdoaWxlICgtLXQgPiAwKTsKCQkJCQkJCXJldHVybiBuID4+PiAxCgkJCQkJCX0KCgkJCQkJCWZ1bmN0aW9uIHAoZSkgewoJCQkJCQkJMTYgPT09IGUuYmlfdmFsaWQgPyAocyhlLCBlLmJpX2J1ZiksIGUuYmlfYnVmID0gMCwgZS5iaV92YWxpZCA9IDApIDogZS5iaV92YWxpZCA+PSA4ICYmIChlLnBlbmRpbmdfYnVmW2UucGVuZGluZysrXSA9IDI1NSAmIGUuYmlfYnVmLCBlLmJpX2J1ZiA+Pj0gOCwgZS5iaV92YWxpZCAtPSA4KQoJCQkJCQl9CgoJCQkJCQlmdW5jdGlvbiBoKGUsIHQpIHsKCQkJCQkJCXZhciBuLCBpLCBhLCBvLCByLCBzLCBsID0gdC5keW5fdHJlZSwKCQkJCQkJCQljID0gdC5tYXhfY29kZSwKCQkJCQkJCQlkID0gdC5zdGF0X2Rlc2Muc3RhdGljX3RyZWUsCgkJCQkJCQkJcCA9IHQuc3RhdF9kZXNjLmhhc19zdHJlZSwKCQkJCQkJCQloID0gdC5zdGF0X2Rlc2MuZXh0cmFfYml0cywKCQkJCQkJCQl1ID0gdC5zdGF0X2Rlc2MuZXh0cmFfYmFzZSwKCQkJCQkJCQltID0gdC5zdGF0X2Rlc2MubWF4X2xlbmd0aCwKCQkJCQkJCQlmID0gMDsKCQkJCQkJCWZvciAobyA9IDA7IFggPj0gbzsgbysrKSBlLmJsX2NvdW50W29dID0gMDsKCQkJCQkJCWZvciAobFsyICogZS5oZWFwW2UuaGVhcF9tYXhdICsgMV0gPSAwLCBuID0gZS5oZWFwX21heCArIDE7IEcgPiBuOyBuKyspIGkgPSBlLmhlYXBbbl0sIG8gPSBsWzIgKiBsWzIgKiBpICsgMV0gKyAxXSArIDEsIG8gPiBtICYmIChvID0gbSwgZisrKSwgbFsyICogaSArIDFdID0gbywgaSA+IGMgfHwgKGUuYmxfY291bnRbb10gKyssIHIgPSAwLCBpID49IHUgJiYgKHIgPSBoW2kgLSB1XSksIHMgPSBsWzIgKiBpXSwgZS5vcHRfbGVuICs9IHMgKiAobyArIHIpLCBwICYmIChlLnN0YXRpY19sZW4gKz0gcyAqIChkWzIgKiBpICsgMV0gKyByKSkpOwoJCQkJCQkJaWYgKDAgIT09IGYpIHsKCQkJCQkJCQlkbyB7CgkJCQkJCQkJCWZvciAobyA9IG0gLSAxOyAwID09PSBlLmJsX2NvdW50W29dOykgby0tOwoJCQkJCQkJCQllLmJsX2NvdW50W29dIC0tLCBlLmJsX2NvdW50W28gKyAxXSArPSAyLCBlLmJsX2NvdW50W21dIC0tLCBmIC09IDIKCQkJCQkJCQl9IHdoaWxlIChmID4gMCk7CgkJCQkJCQkJZm9yIChvID0gbTsgMCAhPT0gbzsgby0tKQoJCQkJCQkJCQlmb3IgKGkgPSBlLmJsX2NvdW50W29dOyAwICE9PSBpOykgYSA9IGUuaGVhcFstLW5dLCBhID4gYyB8fCAobFsyICogYSArIDFdICE9PSBvICYmIChlLm9wdF9sZW4gKz0gKG8gLSBsWzIgKiBhICsgMV0pICogbFsyICogYV0sIGxbMiAqIGEgKyAxXSA9IG8pLCBpLS0pCgkJCQkJCQl9CgkJCQkJCX0KCgkJCQkJCWZ1bmN0aW9uIHUoZSwgdCwgbikgewoJCQkJCQkJdmFyIGksIGEsIG8gPSBuZXcgQXJyYXkoWCArIDEpLAoJCQkJCQkJCXIgPSAwOwoJCQkJCQkJZm9yIChpID0gMTsgWCA+PSBpOyBpKyspIG9baV0gPSByID0gciArIG5baSAtIDFdIDw8IDE7CgkJCQkJCQlmb3IgKGEgPSAwOyB0ID49IGE7IGErKykgewoJCQkJCQkJCXZhciBzID0gZVsyICogYSArIDFdOwoJCQkJCQkJCTAgIT09IHMgJiYgKGVbMiAqIGFdID0gZChvW3NdICsrLCBzKSkKCQkJCQkJCX0KCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gbSgpIHsKCQkJCQkJCXZhciBlLCB0LCBuLCBpLCBvLCByID0gbmV3IEFycmF5KFggKyAxKTsKCQkJCQkJCWZvciAobiA9IDAsIGkgPSAwOyAkIC0gMSA+IGk7IGkrKykKCQkJCQkJCQlmb3IgKGRlW2ldID0gbiwgZSA9IDA7IGUgPCAxIDw8IHRlW2ldOyBlKyspIGNlW24rK10gPSBpOwoJCQkJCQkJZm9yIChjZVtuIC0gMV0gPSBpLCBvID0gMCwgaSA9IDA7IDE2ID4gaTsgaSsrKQoJCQkJCQkJCWZvciAocGVbaV0gPSBvLCBlID0gMDsgZSA8IDEgPDwgbmVbaV07IGUrKykgbGVbbysrXSA9IGk7CgkJCQkJCQlmb3IgKG8gPj49IDc7IFUgPiBpOyBpKyspCgkJCQkJCQkJZm9yIChwZVtpXSA9IG8gPDwgNywgZSA9IDA7IGUgPCAxIDw8IG5lW2ldIC0gNzsgZSsrKSBsZVsyNTYgKyBvKytdID0gaTsKCQkJCQkJCWZvciAodCA9IDA7IFggPj0gdDsgdCsrKSByW3RdID0gMDsKCQkJCQkJCWZvciAoZSA9IDA7IDE0MyA+PSBlOykgcmVbMiAqIGUgKyAxXSA9IDgsIGUrKywgcls4XSArKzsKCQkJCQkJCWZvciAoOyAyNTUgPj0gZTspIHJlWzIgKiBlICsgMV0gPSA5LCBlKyssIHJbOV0gKys7CgkJCQkJCQlmb3IgKDsgMjc5ID49IGU7KSByZVsyICogZSArIDFdID0gNywgZSsrLCByWzddICsrOwoJCQkJCQkJZm9yICg7IDI4NyA+PSBlOykgcmVbMiAqIGUgKyAxXSA9IDgsIGUrKywgcls4XSArKzsKCQkJCQkJCWZvciAodShyZSwgSCArIDEsIHIpLCBlID0gMDsgVSA+IGU7IGUrKykgc2VbMiAqIGUgKyAxXSA9IDUsIHNlWzIgKiBlXSA9IGQoZSwgNSk7CgkJCQkJCQloZSA9IG5ldyBhKHJlLCB0ZSwgVyArIDEsIEgsIFgpLCB1ZSA9IG5ldyBhKHNlLCBuZSwgMCwgVSwgWCksIG1lID0gbmV3IGEobmV3IEFycmF5KDApLCBpZSwgMCwgWSwgWikKCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gZihlKSB7CgkJCQkJCQl2YXIgdDsKCQkJCQkJCWZvciAodCA9IDA7IEggPiB0OyB0KyspIGUuZHluX2x0cmVlWzIgKiB0XSA9IDA7CgkJCQkJCQlmb3IgKHQgPSAwOyBVID4gdDsgdCsrKSBlLmR5bl9kdHJlZVsyICogdF0gPSAwOwoJCQkJCQkJZm9yICh0ID0gMDsgWSA+IHQ7IHQrKykgZS5ibF90cmVlWzIgKiB0XSA9IDA7CgkJCQkJCQllLmR5bl9sdHJlZVsyICogVl0gPSAxLCBlLm9wdF9sZW4gPSBlLnN0YXRpY19sZW4gPSAwLCBlLmxhc3RfbGl0ID0gZS5tYXRjaGVzID0gMAoJCQkJCQl9CgoJCQkJCQlmdW5jdGlvbiBnKGUpIHsKCQkJCQkJCWUuYmlfdmFsaWQgPiA4ID8gcyhlLCBlLmJpX2J1ZikgOiBlLmJpX3ZhbGlkID4gMCAmJiAoZS5wZW5kaW5nX2J1ZltlLnBlbmRpbmcrK10gPSBlLmJpX2J1ZiksIGUuYmlfYnVmID0gMCwgZS5iaV92YWxpZCA9IDAKCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gXyhlLCB0LCBuLCBpKSB7CgkJCQkJCQlnKGUpLCBpICYmIChzKGUsIG4pLCBzKGUsIH5uKSksIEkuYXJyYXlTZXQoZS5wZW5kaW5nX2J1ZiwgZS53aW5kb3csIHQsIG4sIGUucGVuZGluZyksIGUucGVuZGluZyArPSBuCgkJCQkJCX0KCgkJCQkJCWZ1bmN0aW9uIHgoZSwgdCwgbiwgaSkgewoJCQkJCQkJdmFyIGEgPSAyICogdCwKCQkJCQkJCQlvID0gMiAqIG47CgkJCQkJCQlyZXR1cm4gZVthXSA8IGVbb10gfHwgZVthXSA9PT0gZVtvXSAmJiBpW3RdIDw9IGlbbl0KCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gdyhlLCB0LCBuKSB7CgkJCQkJCQlmb3IgKHZhciBpID0gZS5oZWFwW25dLCBhID0gbiA8PCAxOyBhIDw9IGUuaGVhcF9sZW4gJiYgKGEgPCBlLmhlYXBfbGVuICYmIHgodCwgZS5oZWFwW2EgKyAxXSwgZS5oZWFwW2FdLCBlLmRlcHRoKSAmJiBhKyssICF4KHQsIGksIGUuaGVhcFthXSwgZS5kZXB0aCkpOykgZS5oZWFwW25dID0gZS5oZWFwW2FdLCBuID0gYSwgYSA8PD0gMTsKCQkJCQkJCWUuaGVhcFtuXSA9IGkKCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gdihlLCB0LCBuKSB7CgkJCQkJCQl2YXIgaSwgYSwgbywgcywgZCA9IDA7CgkJCQkJCQlpZiAoMCAhPT0gZS5sYXN0X2xpdCkKCQkJCQkJCQlkbyBpID0gZS5wZW5kaW5nX2J1ZltlLmRfYnVmICsgMiAqIGRdIDw8IDggfCBlLnBlbmRpbmdfYnVmW2UuZF9idWYgKyAyICogZCArIDFdLCBhID0gZS5wZW5kaW5nX2J1ZltlLmxfYnVmICsgZF0sIGQrKywgMCA9PT0gaSA/IGMoZSwgYSwgdCkgOiAobyA9IGNlW2FdLCBjKGUsIG8gKyBXICsgMSwgdCksIHMgPSB0ZVtvXSwgMCAhPT0gcyAmJiAoYSAtPSBkZVtvXSwgbChlLCBhLCBzKSksIGktLSwgbyA9IHIoaSksIGMoZSwgbywgbiksIHMgPSBuZVtvXSwgMCAhPT0gcyAmJiAoaSAtPSBwZVtvXSwgbChlLCBpLCBzKSkpOyB3aGlsZSAoZCA8IGUubGFzdF9saXQpOwoJCQkJCQkJYyhlLCBWLCB0KQoJCQkJCQl9CgoJCQkJCQlmdW5jdGlvbiBiKGUsIHQpIHsKCQkJCQkJCXZhciBuLCBpLCBhLCBvID0gdC5keW5fdHJlZSwKCQkJCQkJCQlyID0gdC5zdGF0X2Rlc2Muc3RhdGljX3RyZWUsCgkJCQkJCQkJcyA9IHQuc3RhdF9kZXNjLmhhc19zdHJlZSwKCQkJCQkJCQlsID0gdC5zdGF0X2Rlc2MuZWxlbXMsCgkJCQkJCQkJYyA9IC0xOwoJCQkJCQkJZm9yIChlLmhlYXBfbGVuID0gMCwgZS5oZWFwX21heCA9IEcsIG4gPSAwOyBsID4gbjsgbisrKSAwICE9PSBvWzIgKiBuXSA/IChlLmhlYXBbKytlLmhlYXBfbGVuXSA9IGMgPSBuLCBlLmRlcHRoW25dID0gMCkgOiBvWzIgKiBuICsgMV0gPSAwOwoJCQkJCQkJZm9yICg7IGUuaGVhcF9sZW4gPCAyOykgYSA9IGUuaGVhcFsrK2UuaGVhcF9sZW5dID0gMiA+IGMgPyArK2MgOiAwLCBvWzIgKiBhXSA9IDEsIGUuZGVwdGhbYV0gPSAwLCBlLm9wdF9sZW4tLSwgcyAmJiAoZS5zdGF0aWNfbGVuIC09IHJbMiAqIGEgKyAxXSk7CgkJCQkJCQlmb3IgKHQubWF4X2NvZGUgPSBjLCBuID0gZS5oZWFwX2xlbiA+PiAxOyBuID49IDE7IG4tLSkgdyhlLCBvLCBuKTsKCQkJCQkJCWEgPSBsOwoJCQkJCQkJZG8gbiA9IGUuaGVhcFsxXSwgZS5oZWFwWzFdID0gZS5oZWFwW2UuaGVhcF9sZW4tLV0sIHcoZSwgbywgMSksIGkgPSBlLmhlYXBbMV0sIGUuaGVhcFstLWUuaGVhcF9tYXhdID0gbiwgZS5oZWFwWy0tZS5oZWFwX21heF0gPSBpLCBvWzIgKiBhXSA9IG9bMiAqIG5dICsgb1syICogaV0sIGUuZGVwdGhbYV0gPSAoZS5kZXB0aFtuXSA+PSBlLmRlcHRoW2ldID8gZS5kZXB0aFtuXSA6IGUuZGVwdGhbaV0pICsgMSwgb1syICogbiArIDFdID0gb1syICogaSArIDFdID0gYSwgZS5oZWFwWzFdID0gYSsrLCB3KGUsIG8sIDEpOyB3aGlsZSAoZS5oZWFwX2xlbiA+PSAyKTsKCQkJCQkJCWUuaGVhcFstLWUuaGVhcF9tYXhdID0gZS5oZWFwWzFdLCBoKGUsIHQpLCB1KG8sIGMsIGUuYmxfY291bnQpCgkJCQkJCX0KCgkJCQkJCWZ1bmN0aW9uIHkoZSwgdCwgbikgewoJCQkJCQkJdmFyIGksIGEsIG8gPSAtMSwKCQkJCQkJCQlyID0gdFsxXSwKCQkJCQkJCQlzID0gMCwKCQkJCQkJCQlsID0gNywKCQkJCQkJCQljID0gNDsKCQkJCQkJCWZvciAoMCA9PT0gciAmJiAobCA9IDEzOCwgYyA9IDMpLCB0WzIgKiAobiArIDEpICsgMV0gPSA2NTUzNSwgaSA9IDA7IG4gPj0gaTsgaSsrKSBhID0gciwgciA9IHRbMiAqIChpICsgMSkgKyAxXSwgKytzIDwgbCAmJiBhID09PSByIHx8IChjID4gcyA/IGUuYmxfdHJlZVsyICogYV0gKz0gcyA6IDAgIT09IGEgPyAoYSAhPT0gbyAmJiBlLmJsX3RyZWVbMiAqIGFdICsrLCBlLmJsX3RyZWVbMiAqIEtdICsrKSA6IDEwID49IHMgPyBlLmJsX3RyZWVbMiAqIFFdICsrIDogZS5ibF90cmVlWzIgKiBlZV0gKyssIHMgPSAwLCBvID0gYSwgMCA9PT0gciA/IChsID0gMTM4LCBjID0gMykgOiBhID09PSByID8gKGwgPSA2LCBjID0gMykgOiAobCA9IDcsIGMgPSA0KSkKCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gayhlLCB0LCBuKSB7CgkJCQkJCQl2YXIgaSwgYSwgbyA9IC0xLAoJCQkJCQkJCXIgPSB0WzFdLAoJCQkJCQkJCXMgPSAwLAoJCQkJCQkJCWQgPSA3LAoJCQkJCQkJCXAgPSA0OwoJCQkJCQkJZm9yICgwID09PSByICYmIChkID0gMTM4LCBwID0gMyksIGkgPSAwOyBuID49IGk7IGkrKykKCQkJCQkJCQlpZiAoYSA9IHIsIHIgPSB0WzIgKiAoaSArIDEpICsgMV0sICEoKytzIDwgZCAmJiBhID09PSByKSkgewoJCQkJCQkJCQlpZiAocCA+IHMpIHsKCQkJCQkJCQkJCWRvIGMoZSwgYSwgZS5ibF90cmVlKTsgd2hpbGUgKDAgIT09IC0tcykKCQkJCQkJCQkJfSBlbHNlIDAgIT09IGEgPyAoYSAhPT0gbyAmJiAoYyhlLCBhLCBlLmJsX3RyZWUpLCBzLS0pLCBjKGUsIEssIGUuYmxfdHJlZSksIGwoZSwgcyAtIDMsIDIpKSA6IDEwID49IHMgPyAoYyhlLCBRLCBlLmJsX3RyZWUpLCBsKGUsIHMgLSAzLCAzKSkgOiAoYyhlLCBlZSwgZS5ibF90cmVlKSwgbChlLCBzIC0gMTEsIDcpKTsKCQkJCQkJCQkJcyA9IDAsIG8gPSBhLCAwID09PSByID8gKGQgPSAxMzgsIHAgPSAzKSA6IGEgPT09IHIgPyAoZCA9IDYsIHAgPSAzKSA6IChkID0gNywgcCA9IDQpCgkJCQkJCQkJfQoJCQkJCQl9CgoJCQkJCQlmdW5jdGlvbiB6KGUpIHsKCQkJCQkJCXZhciB0OwoJCQkJCQkJZm9yICh5KGUsIGUuZHluX2x0cmVlLCBlLmxfZGVzYy5tYXhfY29kZSksIHkoZSwgZS5keW5fZHRyZWUsIGUuZF9kZXNjLm1heF9jb2RlKSwgYihlLCBlLmJsX2Rlc2MpLCB0ID0gWSAtIDE7IHQgPj0gMyAmJiAwID09PSBlLmJsX3RyZWVbMiAqIGFlW3RdICsgMV07IHQtLSk7CgkJCQkJCQlyZXR1cm4gZS5vcHRfbGVuICs9IDMgKiAodCArIDEpICsgNSArIDUgKyA0LCB0CgkJCQkJCX0KCgkJCQkJCWZ1bmN0aW9uIEIoZSwgdCwgbiwgaSkgewoJCQkJCQkJdmFyIGE7CgkJCQkJCQlmb3IgKGwoZSwgdCAtIDI1NywgNSksIGwoZSwgbiAtIDEsIDUpLCBsKGUsIGkgLSA0LCA0KSwgYSA9IDA7IGkgPiBhOyBhKyspIGwoZSwgZS5ibF90cmVlWzIgKiBhZVthXSArIDFdLCAzKTsKCQkJCQkJCWsoZSwgZS5keW5fbHRyZWUsIHQgLSAxKSwgayhlLCBlLmR5bl9kdHJlZSwgbiAtIDEpCgkJCQkJCX0KCgkJCQkJCWZ1bmN0aW9uIGooZSkgewoJCQkJCQkJdmFyIHQsIG4gPSA0MDkzNjI0NDQ3OwoJCQkJCQkJZm9yICh0ID0gMDsgMzEgPj0gdDsgdCsrLCBuID4+Pj0gMSkKCQkJCQkJCQlpZiAoMSAmIG4gJiYgMCAhPT0gZS5keW5fbHRyZWVbMiAqIHRdKSByZXR1cm4gcTsKCQkJCQkJCWlmICgwICE9PSBlLmR5bl9sdHJlZVsxOF0gfHwgMCAhPT0gZS5keW5fbHRyZWVbMjBdIHx8IDAgIT09IGUuZHluX2x0cmVlWzI2XSkgcmV0dXJuIEU7CgkJCQkJCQlmb3IgKHQgPSAzMjsgVyA+IHQ7IHQrKykKCQkJCQkJCQlpZiAoMCAhPT0gZS5keW5fbHRyZWVbMiAqIHRdKSByZXR1cm4gRTsKCQkJCQkJCXJldHVybiBxCgkJCQkJCX0KCgkJCQkJCWZ1bmN0aW9uIEMoZSkgewoJCQkJCQkJZmUgfHwgKG0oKSwgZmUgPSAhMCksIGUubF9kZXNjID0gbmV3IG8oZS5keW5fbHRyZWUsIGhlKSwgZS5kX2Rlc2MgPSBuZXcgbyhlLmR5bl9kdHJlZSwgdWUpLCBlLmJsX2Rlc2MgPSBuZXcgbyhlLmJsX3RyZWUsIG1lKSwgZS5iaV9idWYgPSAwLCBlLmJpX3ZhbGlkID0gMCwgZihlKQoJCQkJCQl9CgoJCQkJCQlmdW5jdGlvbiBTKGUsIHQsIG4sIGkpIHsKCQkJCQkJCWwoZSwgKEwgPDwgMSkgKyAoaSA/IDEgOiAwKSwgMyksIF8oZSwgdCwgbiwgITApCgkJCQkJCX0KCgkJCQkJCWZ1bmN0aW9uIE4oZSkgewoJCQkJCQkJbChlLCBEIDw8IDEsIDMpLCBjKGUsIFYsIHJlKSwgcChlKQoJCQkJCQl9CgoJCQkJCQlmdW5jdGlvbiBUKGUsIHQsIG4sIGkpIHsKCQkJCQkJCXZhciBhLCBvLCByID0gMDsKCQkJCQkJCWUubGV2ZWwgPiAwID8gKGUuc3RybS5kYXRhX3R5cGUgPT09IE8gJiYgKGUuc3RybS5kYXRhX3R5cGUgPSBqKGUpKSwgYihlLCBlLmxfZGVzYyksIGIoZSwgZS5kX2Rlc2MpLCByID0geihlKSwgYSA9IGUub3B0X2xlbiArIDMgKyA3ID4+PiAzLCBvID0gZS5zdGF0aWNfbGVuICsgMyArIDcgPj4+IDMsIGEgPj0gbyAmJiAoYSA9IG8pKSA6IGEgPSBvID0gbiArIDUsIGEgPj0gbiArIDQgJiYgLTEgIT09IHQgPyBTKGUsIHQsIG4sIGkpIDogZS5zdHJhdGVneSA9PT0gQSB8fCBvID09PSBhID8gKGwoZSwgKEQgPDwgMSkgKyAoaSA/IDEgOiAwKSwgMyksIHYoZSwgcmUsIHNlKSkgOiAobChlLCAoTSA8PCAxKSArIChpID8gMSA6IDApLCAzKSwgQihlLCBlLmxfZGVzYy5tYXhfY29kZSArIDEsIGUuZF9kZXNjLm1heF9jb2RlICsgMSwgciArIDEpLCB2KGUsIGUuZHluX2x0cmVlLCBlLmR5bl9kdHJlZSkpLCBmKGUpLCBpICYmIGcoZSkKCQkJCQkJfQoKCQkJCQkJZnVuY3Rpb24gUChlLCB0LCBuKSB7CgkJCQkJCQlyZXR1cm4gZS5wZW5kaW5nX2J1ZltlLmRfYnVmICsgMiAqIGUubGFzdF9saXRdID0gdCA+Pj4gOCAmIDI1NSwgZS5wZW5kaW5nX2J1ZltlLmRfYnVmICsgMiAqIGUubGFzdF9saXQgKyAxXSA9IDI1NSAmIHQsIGUucGVuZGluZ19idWZbZS5sX2J1ZiArIGUubGFzdF9saXRdID0gMjU1ICYgbiwgZS5sYXN0X2xpdCsrLCAwID09PSB0ID8gZS5keW5fbHRyZWVbMiAqIG5dICsrIDogKGUubWF0Y2hlcysrLCB0LS0sIGUuZHluX2x0cmVlWzIgKiAoY2Vbbl0gKyBXICsgMSldICsrLCBlLmR5bl9kdHJlZVsyICogcih0KV0gKyspLCBlLmxhc3RfbGl0ID09PSBlLmxpdF9idWZzaXplIC0gMQoJCQkJCQl9CgkJCQkJCXZhciBJID0gZSgiLi4vdXRpbHMvY29tbW9uIiksCgkJCQkJCQlBID0gNCwKCQkJCQkJCXEgPSAwLAoJCQkJCQkJRSA9IDEsCgkJCQkJCQlPID0gMiwKCQkJCQkJCUwgPSAwLAoJCQkJCQkJRCA9IDEsCgkJCQkJCQlNID0gMiwKCQkJCQkJCVIgPSAzLAoJCQkJCQkJRiA9IDI1OCwKCQkJCQkJCSQgPSAyOSwKCQkJCQkJCVcgPSAyNTYsCgkJCQkJCQlIID0gVyArIDEgKyAkLAoJCQkJCQkJVSA9IDMwLAoJCQkJCQkJWSA9IDE5LAoJCQkJCQkJRyA9IDIgKiBIICsgMSwKCQkJCQkJCVggPSAxNSwKCQkJCQkJCUogPSAxNiwKCQkJCQkJCVogPSA3LAoJCQkJCQkJViA9IDI1NiwKCQkJCQkJCUsgPSAxNiwKCQkJCQkJCVEgPSAxNywKCQkJCQkJCWVlID0gMTgsCgkJCQkJCQl0ZSA9IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAxLCAyLCAyLCAyLCAyLCAzLCAzLCAzLCAzLCA0LCA0LCA0LCA0LCA1LCA1LCA1LCA1LCAwXSwKCQkJCQkJCW5lID0gWzAsIDAsIDAsIDAsIDEsIDEsIDIsIDIsIDMsIDMsIDQsIDQsIDUsIDUsIDYsIDYsIDcsIDcsIDgsIDgsIDksIDksIDEwLCAxMCwgMTEsIDExLCAxMiwgMTIsIDEzLCAxM10sCgkJCQkJCQlpZSA9IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAyLCAzLCA3XSwKCQkJCQkJCWFlID0gWzE2LCAxNywgMTgsIDAsIDgsIDcsIDksIDYsIDEwLCA1LCAxMSwgNCwgMTIsIDMsIDEzLCAyLCAxNCwgMSwgMTVdLAoJCQkJCQkJb2UgPSA1MTIsCgkJCQkJCQlyZSA9IG5ldyBBcnJheSgyICogKEggKyAyKSk7CgkJCQkJCWkocmUpOwoJCQkJCQl2YXIgc2UgPSBuZXcgQXJyYXkoMiAqIFUpOwoJCQkJCQlpKHNlKTsKCQkJCQkJdmFyIGxlID0gbmV3IEFycmF5KG9lKTsKCQkJCQkJaShsZSk7CgkJCQkJCXZhciBjZSA9IG5ldyBBcnJheShGIC0gUiArIDEpOwoJCQkJCQlpKGNlKTsKCQkJCQkJdmFyIGRlID0gbmV3IEFycmF5KCQpOwoJCQkJCQlpKGRlKTsKCQkJCQkJdmFyIHBlID0gbmV3IEFycmF5KFUpOwoJCQkJCQlpKHBlKTsKCQkJCQkJdmFyIGhlLCB1ZSwgbWUsIGZlID0gITE7CgkJCQkJCW4uX3RyX2luaXQgPSBDLCBuLl90cl9zdG9yZWRfYmxvY2sgPSBTLCBuLl90cl9mbHVzaF9ibG9jayA9IFQsIG4uX3RyX3RhbGx5ID0gUCwgbi5fdHJfYWxpZ24gPSBOCgkJCQkJfSwgewoJCQkJCQkiLi4vdXRpbHMvY29tbW9uIjogMwoJCQkJCX0KCQkJCV0sCgkJCQkxNTogWwoJCQkJCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQkJInVzZSBzdHJpY3QiOwoKCQkJCQkJZnVuY3Rpb24gaSgpIHsKCQkJCQkJCXRoaXMuaW5wdXQgPSBudWxsLCB0aGlzLm5leHRfaW4gPSAwLCB0aGlzLmF2YWlsX2luID0gMCwgdGhpcy50b3RhbF9pbiA9IDAsIHRoaXMub3V0cHV0ID0gbnVsbCwgdGhpcy5uZXh0X291dCA9IDAsIHRoaXMuYXZhaWxfb3V0ID0gMCwgdGhpcy50b3RhbF9vdXQgPSAwLCB0aGlzLm1zZyA9ICIiLCB0aGlzLnN0YXRlID0gbnVsbCwgdGhpcy5kYXRhX3R5cGUgPSAyLCB0aGlzLmFkbGVyID0gMAoJCQkJCQl9CgkJCQkJCXQuZXhwb3J0cyA9IGkKCQkJCQl9LCB7fQoJCQkJXSwKCQkJCSIvIjogWwoJCQkJCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQkJInVzZSBzdHJpY3QiOwoJCQkJCQl2YXIgaSA9IGUoIi4vbGliL3V0aWxzL2NvbW1vbiIpLmFzc2lnbiwKCQkJCQkJCWEgPSBlKCIuL2xpYi9kZWZsYXRlIiksCgkJCQkJCQlvID0gZSgiLi9saWIvaW5mbGF0ZSIpLAoJCQkJCQkJciA9IGUoIi4vbGliL3psaWIvY29uc3RhbnRzIiksCgkJCQkJCQlzID0ge307CgkJCQkJCWkocywgYSwgbywgciksIHQuZXhwb3J0cyA9IHMKCQkJCQl9LCB7CgkJCQkJCSIuL2xpYi9kZWZsYXRlIjogMSwKCQkJCQkJIi4vbGliL2luZmxhdGUiOiAyLAoJCQkJCQkiLi9saWIvdXRpbHMvY29tbW9uIjogMywKCQkJCQkJIi4vbGliL3psaWIvY29uc3RhbnRzIjogNgoJCQkJCX0KCQkJCV0KCQkJfSwge30sIFtdKSgiLyIpCgkJfSkKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJInVzZSBzdHJpY3QiOwoJCXZhciBpID0gewoJCQkJIlxcLmpkXFwuY29tIjogIjM2MGJ1eSIsCgkJCQkiZGFuZ2RhbmdcXC5jb20iOiAiZGFuZ2RhbmciLAoJCQkJInZtZWlcXC5jb20iOiAidm1laSIsCgkJCQkidG9vdG9vXFwuY24iOiAidG9vdG9vIiwKCQkJCSJ3d3dcXC5zcGlkZXJcXC5jb21cXC5jbiI6ICJzcGlkZXIiLAoJCQkJIi4qP2JvcWlpXFwuY29tIjogImJvcWlpIiwKCQkJCSJ3d3dcXC41MWRpblxcLmNvbSI6ICI1MWRpbiIsCgkJCQkid3d3XFwuaGFpdHVuY3VuXFwuY29tIjogImhhaXR1bmN1biIsCgkJCQkieXVuaG91XFwuY29tIjogInl1bmhvdSIsCgkJCQkiLio/dmlwXFwuY29tIjogInZpcCIsCgkJCQkid3d3XFwubWFsbHZ2XFwuY29tIjogImhvbWV2diIsCgkJCQkicmF5aVxcLmNuIjogInJheWkiLAoJCQkJInd3d1xcLnlhb2ZhbmdcXC5jbiI6ICJ5YW9mYW5nIiwKCQkJCSJ3d3dcXC5saWtlZmFjZVxcLmNvbSI6ICJsaWtlZmFjZSIsCgkJCQkid3d3XFwuZ3VvcGlcXC5jb20iOiAiZ3VvcGkiLAoJCQkJInd3d1xcLm1lbmdsdVxcLmNvbSI6ICJtZW5nbHUiLAoJCQkJIiguKj8pXFwubTE4XFwuY29tIjogIm0xOCIsCgkJCQkiXFwuZWZlaWh1XFwuY29tIjogImVmZWlodSIsCgkJCQkiLy93d3dcXC5tZWlcXC5jb20vc2lsby8uKi1ldmVudC1ldmVudFxcLmh0bWwiOiAibWVpIiwKCQkJCSJiZW5sYWlcXC5jb20iOiAiYmVubGFpIiwKCQkJCSIvL3d3d1xcLmtqdFxcLmNvbSI6ICJranQiLAoJCQkJInd3d1xcLmtqdFxcLmNvbSI6ICJranQiLAoJCQkJImJlc3RpbmZvb2RzLmNvbSI6ICJiZXN0aW5mb29kcyIsCgkJCQkiXFwuajFcXC5jb20iOiAiajEiLAoJCQkJInl1bW15NzdcXC5jb20iOiAieXVtbXk3NyIsCgkJCQkiXFwuMzYwa3hyXFwuY29tIjogIjM2MGt4ciIsCgkJCQkiaXRlbVxcLmZlaW5pdVxcLmNvbSI6ICJmZWluaXUiLAoJCQkJInNob3BcXC5sZW5vdm9tb2JpbGVcXC5jb20iOiAibGVub3ZvIiwKCQkJCSJzdXB1eVxcLmNvbSI6ICJzdXB1eSIsCgkJCQkic3VwdW1hbGxcXC5jb20iOiAic3VwdW1hbGwiLAoJCQkJInlvaG9idXlcXC5jb20iOiAieW9ob2J1eSIsCgkJCQkibWY5MTBcXC5jb20iOiAibWY5MTAiLAoJCQkJInN1bmRhblxcLmNvbSI6ICJzdW5kYW4iLAoJCQkJIlxcLnRhbzNjXFwuY29tIjogInRhbzNjIiwKCQkJCSJhaWRhaVxcLmNvbSI6ICJhaWRhaSIsCgkJCQkieFxcLmNvbVxcLmNuIjogIngiLAoJCQkJImZlaWZlaVxcLig/OmNufGNvbSkiOiAiZmVpZmVpIiwKCQkJCSJsb3ZvXFwuY24iOiAibG92byIsCgkJCQkieWludGFpXFwuY29tIjogInlpbnRhaSIsCgkJCQkiYmFuZ2dvXFwuY29tIjogImJhbmdnbyIsCgkJCQkiNWx1eFxcLmNvbSI6ICI1bHV4IiwKCQkJCSJhbWF6b25cXC5kZSI6ICJhbWF6b25fZGUiLAoJCQkJIlxcLnBhaXhpZVxcLm5ldCI6ICJwYWl4aWUiLAoJCQkJIlxcLmhhbmR1XFwuY29tIjogImhhbmR1IiwKCQkJCSJcXC5nb3VcXC5jb20iOiAibTZnbyIsCgkJCQkibWluc2hlbmdlY1xcLmNvbSI6ICJtaW5zaGVuZ2VjIiwKCQkJCSJsZW1hbGxcXC5jb20iOiAibGVtYWxsIiwKCQkJCSJvY2pcXC5jb21cXC5jbiI6ICJvY2oiLAoJCQkJIm5pa2VcXC5jb20iOiAibmlrZSIsCgkJCQkic2ZiZXN0XFwuKD86aGt8Y29tKSI6ICJzZmJlc3QiLAoJCQkJIlxcLndpbnh1YW5cXC5jb20iOiAid2lueHVhbiIsCgkJCQkiXFwuc2hvcGluXFwubmV0IjogInNob3BpbiIsCgkJCQkiXFwubWJhb2Jhb1xcLmNvbSI6ICJtYmFvYmFvIiwKCQkJCSJ3d3dcXC55bWF0b3VcXC5jb20iOiAieW1hdG91IiwKCQkJCSJjb29jYWFcXC5jb20iOiAiY29vY2FhIiwKCQkJCSIxMTFcXC5jb21cXC5jbiI6ICIxMTEiLAoJCQkJInNob3BcXC5sZW5vdm9cXC5jb21cXC5jbiI6ICJsZW5vdm8iLAoJCQkJImZydWl0ZGF5XFwuY29tIjogImZydWl0ZGF5IiwKCQkJCSJhbWF6b25cXC5lcyI6ICJhbWF6b24iLAoJCQkJIm1laWNpXFwuY29tIjogIm1laWNpIiwKCQkJCSJiZWliZWlcXC5jb20iOiAiYmVpYmVpIiwKCQkJCSJrZWVkZVxcLmNvbSI6ICJrZWVkZSIsCgkJCQkia2VkZVxcLmNvbSI6ICJrZWVkZSIsCgkJCQkieGlqaWUuY29tIjogInhpamllIiwKCQkJCSJjYW1lbC5jb20uY24iOiAiY2FtZWwiLAoJCQkJIm1laXR1YW5cXC5jb20iOiAibWVpdHVhbiIsCgkJCQkiXFwuYW1hem9uXFwuY24iOiAiYW1hem9uIiwKCQkJCSJcXC5hbWF6b25cXC5jb20iOiAiYW1hem9uX3VzIiwKCQkJCSJsZW5vdm9cXC5jb20iOiAibGVub3ZvIiwKCQkJCSJlYXNlZXllc1xcLmNvbSI6ICJlYXNlZXllcyIsCgkJCQkiYWltZXJcXC5jb21cXC5jbiI6ICJhaW1lciIsCgkJCQkic2hvd2pveVxcLmNvbSI6ICJzaG93am95IiwKCQkJCSJ5ZXNteXdpbmVcXC5jb20iOiAieWVzbXl3aW5lIiwKCQkJCSJ0aWFudGlhblxcLmNvbSI6ICJ0aWFudGlhbiIsCgkJCQkiXFwuZ2FwXFwuY24iOiAiZ2FwIiwKCQkJCSJ3YW5nZnVqaW5nXFwuY29tIjogIndhbmdmdWppbmciLAoJCQkJIlxcLm1laVxcLmNvbSI6ICJtZWkiLAoJCQkJImFtYXpvblxcLmNhIjogImFtYXpvbl9jYSIsCgkJCQkic2Vjb29cXC5jb20iOiAic2Vjb28iLAoJCQkJInd3d1xcLm1ldGFvXFwuY29tIjogIm1ldGFvIiwKCQkJCSJtZXRhb1xcLmNvbSI6ICJtZXRhbyIsCgkJCQkiYW1hem9uXFwuY29tXFwuYnIiOiAiYW1hem9uIiwKCQkJCSJiYWl5YW5nd2FuZy5jb20iOiAiYmFpeWFuZ3dhbmciLAoJCQkJImJvb2t1dVxcLmNvbSI6ICJib29rdXUiLAoJCQkJIjEwMHl1ZVxcLmNvbSI6ICIxMDB5dWUiLAoJCQkJIm1laWxlbGVcXC5jb20iOiAibWVpbGVsZSIsCgkJCQkiZDFcXC5jb21cXC5jbiI6ICJkMSIsCgkJCQkibVxcLmQxXFwuY24iOiAiZDEiLAoJCQkJIi50YXF1LmNuIjogInRhcXUiLAoJCQkJImxldGFvXFwuY29tIjogImxldGFvIiwKCQkJCSJ3d3dcXC5rYW9sYVxcLmNvbSI6ICJrYW9sYSIsCgkJCQkibGFtaXVcXC5jb20iOiAibGFtaXUiLAoJCQkJIlxcLnZtYWxsXFwuY29tIjogInZtYWxsIiwKCQkJCSJtb3JlZm9vZFxcLmNvbSI6ICJtb3JlZm9vZCIsCgkJCQkiXFwueGlqaS5jb20iOiAieGlqaSIsCgkJCQkic2hvcFxcLmxldHZcXC5jb20iOiAibGVtYWxsIiwKCQkJCSJ2amlhXFwuY29tIjogInZqaWEiLAoJCQkJInN0YXBsZXNcXC5jbiI6ICJzdGFwbGVzIiwKCQkJCSJcXC56bTdcXC5jbiI6ICJ6bTciLAoJCQkJIlxcLig/Om1vb25iYXNhfGtvcmlybHxydXRpc2hlcnxzdW9yYW5nfGFsYXZlc3xpbmcyaW5nfDAtMTAwc3xxamhlcmJ8bW9udGVhbW9yKVxcLmNvbSI6ICJtb29uYmFzYSIsCgkJCQkiZmVuZ3F1XFwuY29tIjogImZlbmdxdSIsCgkJCQkiYmVzdGtlZXBcXC5jbiI6ICJiZXN0a2VlcCIsCgkJCQkib2NqXFwua3IiOiAib2NqIiwKCQkJCSJhbWF6b25cXC5jb1xcLmpwIjogImFtYXpvbl9qcCIsCgkJCQkiemhlblxcLmNvbSI6ICJ6aGVuIiwKCQkJCSJcXC54aXVcXC5jb20iOiAieGl1IiwKCQkJCSIoXFwuKT9ob21ldnZcXC5jb20iOiAiaG9tZXZ2IiwKCQkJCSJkYWxpbmcuY29tIjogImRhbGluZyIsCgkJCQkiYW1hem9uXFwuaW4iOiAiYW1hem9uIiwKCQkJCSJmZWluaXVcXC5jb20iOiAiZmVpbml1IiwKCQkJCSJqaXVtZWlcXC5jb20iOiAiaml1bWVpIiwKCQkJCSJ0YW94aWVcXC5jb20iOiAidGFveGllIiwKCQkJCSJhbWF6b25cXC5pdCI6ICJhbWF6b24iLAoJCQkJInphemhpcHVcXC5jb20iOiAiemF6aGlwdSIsCgkJCQkiXFwuYmxcXC5jb20iOiAiYmwiLAoJCQkJIi4qP2JsXFwuY29tIjogImJsIiwKCQkJCSJ5b3UuMTYzLmNvbSI6ICJ5b3UxNjMiLAoJCQkJImxpbmdzaGlcXC5jb20iOiAibGluZ3NoaSIsCgkJCQkiaHVhXFwuY29tIjogImh1YSIsCgkJCQkiXFwubTZnb1xcLmNvbSI6ICJtNmdvIiwKCQkJCSJsZWZlbmdcXC5jb20iOiAibGVmZW5nIiwKCQkJCSIzNjBrYWRcXC5jb20iOiAiMzYwa2FkIiwKCQkJCSJcXC45OXJlYWRcXC5jb20iOiAiOTlyZWFkIiwKCQkJCSJcXC5taXFpXFwuY24iOiAibWlxaSIsCgkJCQkicWlucWluYmFieVxcLmNvbSI6ICJxaW5xaW5iYWJ5IiwKCQkJCSJ2YW5jbFxcLmNvbSI6ICJ2YW5jbCIsCgkJCQkiXFwuaml1eGlhblxcLmNvbSI6ICJqaXV4aWFuIiwKCQkJCSJqaWFlXFwuY29tIjogImppYWUiLAoJCQkJIm1pZGVhXFwuY29tIjogIm1pZGVhIiwKCQkJCSJhbWF6b25cXC5jb21cXC5teCI6ICJhbWF6b24iLAoJCQkJInhpZnVxdWFuXFwuY29tIjogInhpZnVxdWFuIiwKCQkJCSJhbWF6b25cXC5jb20iOiAiYW1hem9uX3VzIiwKCQkJCSJ3YW5naml1XFwuY29tIjogIndhbmdqaXUiLAoJCQkJImFtYXpvblxcLm5sIjogImFtYXpvbiIsCgkJCQkiXFwub2tidXlcXC5jb20iOiAib2tidXkiLAoJCQkJImFtYXpvblxcLmNvbVxcLmF1IjogImFtYXpvbiIsCgkJCQkic2FzYVxcLmNvbSI6ICJzYXNhIiwKCQkJCSIoXFwuKT95aWd1b1xcLmNvbSI6ICJ5aWd1byIsCgkJCQkibXV5aW5nemhpamlhXFwuY29tIjogIm11eWluZ3poaWppYSIsCgkJCQkiLio/enVpcGluXFwuY24iOiAienVpcGluIiwKCQkJCSJcXC56aGl3b1xcLmNvbSI6ICJ6aGl3byIsCgkJCQkic3RvcmVcXC5sb2dpdGVjaFxcLmNvbVxcLmNuIjogImxvZ2l0ZWNoIiwKCQkJCSJcXC5uZXdlZ2coXFwuY29tKT9cXC5jbiI6ICJuZXdlZ2ciLAoJCQkJImVmb3RpbGVcXC5jb20iOiAiZWZvdGlsZSIsCgkJCQkiXFwub3VrdVxcLmNvbSI6ICJvdWt1IiwKCQkJCSJcXC5ubzVcXC5jb21cXC5jbiI6ICJubzUiLAoJCQkJImhhaWVyamluZ3NodWlcXC5jb20iOiAiaGFpZXJqaW5nc2h1aSIsCgkJCQkid3d3XFwua3pqMzY1XFwuY29tIjogImt6ajM2NSIsCgkJCQkid2JpYW9cXC5jbiI6ICJ3YmlhbyIsCgkJCQkiXFwubHVzZW5cXC5jb20iOiAibHVzZW4iLAoJCQkJImp1bWVpXFwuY29tIjogImp1bWVpIiwKCQkJCSJ4Z2RxXFwuY29tIjogInhnZHEiLAoJCQkJIm1pYVxcLmNvbSI6ICJtaXlhYmFvYmVpIiwKCQkJCSJtaXlhYmFvYmVpLmhrIjogIm1peWFiYW9iZWkiLAoJCQkJInVsZVxcLmNvbSI6ICJ1bGUiLAoJCQkJIlxcLm9raHFiXFwuY29tIjogIm9raHFiIiwKCQkJCSJqaWFua2VcXC5jb20iOiAiamlhbmtlIiwKCQkJCSJcXC5qeGR5ZlxcLmNvbSI6ICJqeGR5ZiIsCgkJCQkieHRlcFxcLmNvbVxcLmNuIjogInh0ZXAiLAoJCQkJImd1b2ppbWFtaS5jb20iOiAiZ3VvamltYW1pIiwKCQkJCSJlaGFpZXJcXC5jb20iOiAiZWhhaWVyIiwKCQkJCSJsYnhjblxcLmNvbSI6ICJsYnhjbiIsCgkJCQkiXFwuY2FtZWxcXC5jb21cXC5jbiI6ICJjYW1lbCIsCgkJCQkiKD86dml2aWFufGxpbmttYXNhfG1hc2FtYXNvKVxcLig/OmNvbXxjbikiOiAibWFzYW1hc28iLAoJCQkJImxpZmV2Yy5jb20iOiAibGlmZXZjIiwKCQkJCSJjaHVuc2h1aXRhbmdcXC5jb20iOiAiY2h1bnNodWl0YW5nIiwKCQkJCSJcXC5ib29rc2NoaW5hXFwuY29tIjogImJvb2tzY2hpbmEiLAoJCQkJImxleW91XFwuY29tXFwuY24iOiAibGV5b3UiLAoJCQkJIlxcLnlvdWdvdVxcLmNvbSI6ICJ5b3Vnb3UiLAoJCQkJImFtYXpvblxcLmNvXFwudWsiOiAiYW1hem9uX3VrIiwKCQkJCSJnandcXC5jb20iOiAiZ2p3IiwKCQkJCSJsaW5pbmdcXC5jb20iOiAibGluaW5nIiwKCQkJCSJcXC5zXFwuY24iOiAic2NuIiwKCQkJCSJoaXNlbnNlXFwuY29tIjogImhpc2Vuc2UiLAoJCQkJIlxcLmNoaW5hLXB1YlxcLmNvbSI6ICJjaGluYXB1YiIsCgkJCQkianVtZWlnbG9iYWxcXC5jb20iOiAianVtZWkiLAoJCQkJIlxcLih4aWFvKT9taVxcLmNvbSI6ICJtaSIsCgkJCQkiXFwuc2VwaG9yYVxcLmNuIjogInNlcGhvcmEiLAoJCQkJImppbnhpYW5nLmNvbSI6ICJqeGR5ZiIsCgkJCQkicHVyY290dG9uLmNvbSI6ICJwdXJjb3R0b24iLAoJCQkJIndzdHguY29tIjogIndzdHgiLAoJCQkJInpob25naml1LmNuIjogInpob25naml1IiwKCQkJCSJ3d3cua2FsdWxpLmNvbSI6ICJrYWx1bGkiLAoJCQkJIm1hbGwudG84dG8uY29tIjogInRvOHRvIiwKCQkJCSJ3d3cub3Bwb3Nob3AuY24iOiAib3Bwb3Nob3AiLAoJCQkJImJhb2JlaWdlemkuY29tIjogImJhb2JlaWdlemkiLAoJCQkJInd3dy5tYXJrbWFsbC5jb20iOiAibWFya21hbGwiLAoJCQkJImhhcHBpZ29cXC5jb20iOiAiaGFwcGlnbyIsCgkJCQkiYW9sYWlnb1xcLmNvbSI6ICJhb2xhaWdvIiwKCQkJCSJza2dcXC5jb20iOiAic2tnIiwKCQkJCSJjb29scGFkXFwuY29tIjogImNvb2xwYWQiLAoJCQkJImRpeGludG9uZ1xcLmNvbSI6ICJkaXhpbnRvbmciLAoJCQkJInZpdm9cXC5jb21cXC5jbiI6ICJ2aXZvIiwKCQkJCSJsdW9sYWlcXC5jbiI6ICJsdW9sYWkiLAoJCQkJImFvbXlnb2RcXC5jb20iOiAiYW9teWdvZCIsCgkJCQkic3Vhbmp1emlcXC5jb20iOiAic3Vhbmp1emkiLAoJCQkJImdpb25lZVxcLmNvbSI6ICJnaW9uZWUiLAoJCQkJInlhbzEyM1xcLmNvbSI6ICJ5YW8xMjMiLAoJCQkJInR1aHVcXC5jbiI6ICJ0dWh1IiwKCQkJCSJ3YWxtYXJ0XFwuY29tIjogIndhbG1hcnQiLAoJCQkJInZzaWdvXFwuY24iOiAidnNpZ28iLAoJCQkJImxvb2tmYW50YXN0aWNcXC5jb20iOiAibG9va2ZhbnRhc3RpYyIsCgkJCQkiYXNoZm9yZFxcLmNvbSI6ICJhc2hmb3JkIiwKCQkJCSJzaG9wYm9wXFwuY29tIjogInNob3Bib3AiLAoJCQkJIjZwbVxcLmNvbSI6ICI2cG0iLAoJCQkJImFtYXpvblxcLmZyIjogImFtYXpvbl9mciIsCgkJCQkic3VuaW5nXFwuY29tIjogInN1bmluZyIsCgkJCQkiZ29tZS5jb20uY24iOiAiZ29tZSIsCgkJCQkieWhkLmNvbSI6ICJ5aWhhb2RpYW4iCgkJCX0sCgkJCWEgPSB7CgkJCQlhbWF6b246IDEsCgkJCQlkYW5nZGFuZzogMiwKCQkJCSIzNjBidXkiOiAzLAoJCQkJem9sOiA0LAoJCQkJZmdsYWR5OiA1LAoJCQkJb3VrdTogNiwKCQkJCW5ld2VnZzogNywKCQkJCWtpbWlzczogOCwKCQkJCXJlZGJhYnk6IDksCgkJCQltMTg6IDEwLAoJCQkJc2VwaG9yYTogMTIsCgkJCQlsZWZlbmc6IDEzLAoJCQkJc2NuOiAxNCwKCQkJCSI1MWJ1eSI6IDE1LAoJCQkJbWVuZ2x1OiAxNiwKCQkJCW1vb25iYXNhOiAxNywKCQkJCWtlZWRlOiAxOCwKCQkJCXZhbmNsOiAxOSwKCQkJCW9rYnV5OiAyMSwKCQkJCWxldGFvOiAyMiwKCQkJCWJ1eTAwNzogMjMsCgkJCQl0YW94aWU6IDI0LAoJCQkJc3VuaW5nOiAyNSwKCQkJCWNvbzg6IDI2LAoJCQkJbHVzZW46IDI3LAoJCQkJZ29tZTogMjgsCgkJCQlkYXpob25nZGlhbnFpOiAyOSwKCQkJCXlpaGFvZGlhbjogMzEsCgkJCQl3b21haTogMzIsCgkJCQlsZXlvdTogMzMsCgkJCQlzaG9waW46IDM0LAoJCQkJeGl1OiAzNSwKCQkJCW1iYW9iYW86IDM2LAoJCQkJdmppYTogMzcsCgkJCQkiN2N2IjogMzgsCgkJCQlxaW5xaW5iYWJ5OiAzOSwKCQkJCWNodW5zaHVpdGFuZzogNDAsCgkJCQl4OiA0MSwKCQkJCWd1b3BpOiA0MiwKCQkJCW5vNTogNDMsCgkJCQlzYXNhOiA0NSwKCQkJCSIzNjBreHIiOiA1MCwKCQkJCW02Z286IDUxLAoJCQkJbGlrZWZhY2U6IDUyLAoJCQkJbW9yZWZvb2Q6IDU0LAoJCQkJeWFvZmFuZzogNTYsCgkJCQkiOTlyZWFkIjogNTksCgkJCQljaGluYXB1YjogNjAsCgkJCQlib29rc2NoaW5hOiA2MSwKCQkJCXdpbnh1YW46IDYyLAoJCQkJZWZlaWh1OiA2MywKCQkJCXlpbnRhaTogNjYsCgkJCQloYXBwaWdvOiA3MiwKCQkJCWdhcDogNzMsCgkJCQkiNWx1eCI6IDc1LAoJCQkJdG1hbGw6IDgzLAoJCQkJdGlhbnRpYW46IDg0LAoJCQkJeGlqaWU6IDg1LAoJCQkJanVtZWk6IDg2LAoJCQkJeW91Z291OiA5MywKCQkJCTExMTogOTQsCgkJCQlqaWFua2U6IDk3LAoJCQkJbXV5aW5nemhpamlhOiA5OCwKCQkJCWxpbmdzaGk6IDk5LAoJCQkJYmFuZ2dvOiAxMDAsCgkJCQl5ZXNteXdpbmU6IDEwMSwKCQkJCWppdW1laTogMTAyLAoJCQkJaml1eGlhbjogMTAzLAoJCQkJZ2p3OiAxMDgsCgkJCQlva2hxYjogMTA5LAoJCQkJYm9va3V1OiAxMTAsCgkJCQl0YW8zYzogMTExLAoJCQkJZDE6IDExNSwKCQkJCXJheWk6IDEyMCwKCQkJCXBhaXhpZTogMTIyLAoJCQkJdGFvYmFvOiAxMjMsCgkJCQlob21ldnY6IDEyNCwKCQkJCWp4ZHlmOiAxMjUsCgkJCQlzZmJlc3Q6IDEyNiwKCQkJCWJlbmxhaTogMTI3LAoJCQkJdG9vdG9vOiAxMjgsCgkJCQl0dW90dW86IDEyOCwKCQkJCXZpcDogMTI5LAoJCQkJdm1hbGw6IDEzNCwKCQkJCWxlbm92bzogMTM1LAoJCQkJYXBwbGU6IDEzNiwKCQkJCXptNzogMTM4LAoJCQkJbWlxaTogMTM5LAoJCQkJemhpd286IDE0MCwKCQkJCWoxOiAxNDEsCgkJCQl3YW5naml1OiAxNDIsCgkJCQlsYW1pdTogMTQ2LAoJCQkJYWltZXI6IDE0NywKCQkJCXdiaWFvOiAxNTMsCgkJCQloYW5kdTogMTU0LAoJCQkJZWhhaWVyOiAxNTUsCgkJCQlzZWNvbzogMTU2LAoJCQkJY2FtZWw6IDE1NywKCQkJCW1hc2FtYXNvOiAxNTgsCgkJCQl6aGVuOiAxNjIsCgkJCQl4aWZ1cXVhbjogMTY0LAoJCQkJbWk6IDE2NywKCQkJCWxlbWFsbDogMTY4LAoJCQkJbWVpdHVhbjogMTcyLAoJCQkJY3RyaXA6IDE3MywKCQkJCXlpZ3VvOiAxNzQsCgkJCQl5dW1teTc3OiAxNzUsCgkJCQlmcnVpdGRheTogMTc4LAoJCQkJZmVpbml1OiAxODAsCgkJCQlmZWlmZWk6IDE4MSwKCQkJCXp1aXBpbjogMTgyLAoJCQkJeW9ob2J1eTogMTg0LAoJCQkJbHZtYW1hOiAxODUsCgkJCQliZXN0a2VlcDogMTg4LAoJCQkJbWY5MTA6IDE5NCwKCQkJCW1hcmttYWxsOiAxOTQsCgkJCQltaXlhYmFvYmVpOiAxOTUsCgkJCQl1bGU6IDE5NiwKCQkJCW1pbnNoZW5nZWM6IDE5NywKCQkJCXdhbmdmdWppbmc6IDE5OCwKCQkJCW51b21pOiAxOTksCgkJCQltZWlsZWxlOiAyMDEsCgkJCQltb2d1amllOiAyMDMsCgkJCQllbG9uZzogMjA2LAoJCQkJc3VwdW1hbGw6IDIxMCwKCQkJCWx5OiAyMTEsCgkJCQlsaW5pbmc6IDIxMywKCQkJCXNwcmluZ3RvdXI6IDIxNSwKCQkJCWhhaWVyamluZ3NodWk6IDIxNywKCQkJCWNvb2NhYTogMjE4LAoJCQkJbGlmZXZjOiAyMjAsCgkJCQlremozNjU6IDIyMiwKCQkJCWthb2xhOiAyMjMsCgkJCQl5bWF0b3U6IDIyNCwKCQkJCW1ldGFvOiAyMjUsCgkJCQlranQ6IDIyNiwKCQkJCWxvZ2l0ZWNoOiAyMjcsCgkJCQlhbWF6b25fdXM6IDIyOCwKCQkJCWFtYXpvbl9qcDogMjI5LAoJCQkJeGlqaTogMjMyLAoJCQkJbmlrZTogMjMzLAoJCQkJIjM2MGthZCI6IDIzNCwKCQkJCWxieGNuOiAyMzUsCgkJCQltZWljaTogMjM2LAoJCQkJYmVpYmVpOiAyMzcsCgkJCQkiNnBtIjogMjM4LAoJCQkJc2hvcGJvcDogMjQxLAoJCQkJYW1hem9uX2RlOiAyNDYsCgkJCQlhc2hmb3JkOiAyNDcsCgkJCQlsb29rZmFudGFzdGljOiAyNDgsCgkJCQl2c2lnbzogMjUyLAoJCQkJIjEwMHl1ZSI6IDI1NiwKCQkJCWFtYXpvbl91azogMjY2LAoJCQkJZGFsaW5nOiAyNjcsCgkJCQlmZW5ncXU6IDI2OCwKCQkJCW1laTogMjY5LAoJCQkJc2hvd2pveTogMjcwLAoJCQkJb2NqOiAyNzEsCgkJCQlzdW5kYW46IDI3MiwKCQkJCWVhc2VleWVzOiAyNzMsCgkJCQl5dW5ob3U6IDI3NCwKCQkJCWhhaXR1bmN1bjogMjc1LAoJCQkJd2FsbWFydDogMjc2LAoJCQkJdm1laTogMjc3LAoJCQkJamdiOiAyNzgsCgkJCQkiNTFkaW4iOiAyNzksCgkJCQlhaWRhaTogMjgwLAoJCQkJYm9xaWk6IDI4MSwKCQkJCXRvdXJzZm9yZnVuOiAyODIsCgkJCQlsdWx1dHJpcDogMjgzLAoJCQkJc3BpZGVyOiAyODQsCgkJCQlqaWFlOiAyODYsCgkJCQl6YXpoaXB1OiAyODcsCgkJCQl4Z2RxOiAyODgsCgkJCQl4dGVwOiAyODksCgkJCQltaWRlYTogMjkwLAoJCQkJc3RhcGxlczogMjkxLAoJCQkJZWZvdGlsZTogMjkyLAoJCQkJbG92bzogMjk0LAoJCQkJaHVhOiAyOTUsCgkJCQl6aGU4MDA6IDI5NiwKCQkJCXR1aHU6IDI5OSwKCQkJCXRhcXU6IDMxMywKCQkJCWJsOiAzNDcsCgkJCQliZXN0aW5mb29kczogMzQ4LAoJCQkJeW91MTYzOiAzNDksCgkJCQlndW9qaW1hbWk6IDM1MSwKCQkJCWJhaXlhbmd3YW5nOiAzNTIsCgkJCQlqdWFucGk6IDM2MCwKCQkJCXB1cmNvdHRvbjogMzY0LAoJCQkJYW1hem9uX2ZyOiAzNjUsCgkJCQlhbWF6b25fY2E6IDM2NiwKCQkJCXdzdHg6IDM2NywKCQkJCWhpc2Vuc2U6IDM2OCwKCQkJCXpob25naml1OiAzNjksCgkJCQlrYWx1bGk6IDM3MCwKCQkJCXRvOHRvOiAzNzEsCgkJCQlvcHBvc2hvcDogMzcyLAoJCQkJYmFvYmVpZ2V6aTogMzczLAoJCQkJeWFvMTIzOiAzNzQsCgkJCQlnaW9uZWU6IDM3NiwKCQkJCXN1YW5qdXppOiAzNzcsCgkJCQlhb215Z29kOiAzNzgsCgkJCQlsdW9sYWk6IDM3OSwKCQkJCXZpdm86IDM4MCwKCQkJCWRpeGludG9uZzogMzgxLAoJCQkJY29vbHBhZDogMzgyLAoJCQkJc2tnOiAzODMsCgkJCQlhb2xhaWdvOiAzODUKCQkJfSwKCQkJbyA9IHsKCQkJCTA6ICLotK3nianlhZoiLAoJCQkJMTogIuS6mumprOmAiiIsCgkJCQkyOiAi5b2T5b2T572RIiwKCQkJCTM6ICLkuqzkuJzllYbln44iLAoJCQkJNDogIuS4reWFs+adkeWcqOe6vyIsCgkJCQk1OiAi6aOO5bCa5LyK5Lq6572RIiwKCQkJCTY6ICLmrKfphbfnvZEiLAoJCQkJNzogIuaWsOibi+S4reWbvSIsCgkJCQk4OiAi6Ze66Jyc572RIiwKCQkJCTk6ICLnuqLlranlrZAiLAoJCQkJMTA6ICLpuqbnvZEiLAoJCQkJMTE6ICLllK/kvIrllYbln44iLAoJCQkJMTI6ICLkuJ3oipnlhbAiLAoJCQkJMTM6ICLkuZDonILnvZEiLAoJCQkJMTQ6ICLlkI3pnovlupMiLAoJCQkJMTU6ICLmmJPov4XnvZEiLAoJCQkJMTY6ICLmoqbpnLLml7blsJrnvZEiLAoJCQkJMTc6ICLmoqboiq3ojo4iLAoJCQkJMTg6ICLlj6/lvpfnnLzplZznvZEiLAoJCQkJMTk6ICLlh6HlrqLor5rlk4EiLAoJCQkJMjA6ICLmt5jnp4At55m+5Li96Z6L5LiaIiwKCQkJCTIxOiAi5aW95LmQ5LmwIiwKCQkJCTIyOiAi5LmQ5reYIiwKCQkJCTIzOiAi5aWl6K6v6L+Q5Yqo5ZWG5Z+OIiwKCQkJCTI0OiAi5reY6Z6L572RIiwKCQkJCTI1OiAi6IuP5a6B5piT6LStIiwKCQkJCTI2OiAi5bqT5be0572RKOWbvee+jikiLAoJCQkJMjc6ICLnu7/mo67mlbDnoIEiLAoJCQkJMjg6ICLlm73nvo7lnKjnur8iLAoJCQkJMjk6ICLlpKfkuK3nlLXlmagiLAoJCQkJMzA6ICLlm73nvo7kvZPogrIiLAoJCQkJMzE6ICLkuIDlj7flupciLAoJCQkJMzI6ICLkuK3nsq7miJHkubDnvZEiLAoJCQkJMzM6ICLkuZDlj4vlrZXlqbTnq6UiLAoJCQkJMzQ6ICLkuIrlk4HmipjmiaMiLAoJCQkJMzU6ICLotbDnp4DnvZEiLAoJCQkJMzY6ICLpuqbljIXljIUiLAoJCQkJMzc6ICJWKyjlh6HlrqIpIiwKCQkJCTM4OiAi5LiD5b2p6LC3IiwKCQkJCTM5OiAi5Lqy5Lqy5a6d6LSd5ZWG5Z+OIiwKCQkJCTQwOiAi5pil5rC05aCCIiwKCQkJCTQxOiAi5qGU6Imy5oiQ5Lq6IiwKCQkJCTQyOiAi5p6c55qu572RIiwKCQkJCTQzOiAiTm815pe25bCa5bm/5Zy6IiwKCQkJCTQ0OiAiSURTSEUuQ09NIiwKCQkJCTQ1OiAi6aaZ5riv6I6O6I6OIiwKCQkJCTQ2OiAiREhD5Lit5Zu9IiwKCQkJCTQ3OiAi54On5YyF572RIiwKCQkJCTQ4OiAi5pel5YWo6aOfIiwKCQkJCTQ5OiAi56ys5Lmd5aSn6YGTIiwKCQkJCTUwOiAi5byA5b+D5Lq65aSn6I2v5oi/IiwKCQkJCTUxOiAi6bqm5LmQ6LStIiwKCQkJCTUyOiAi5oKm576O5Li9IiwKCQkJCTUzOiAi5oqi6bKc572RIiwKCQkJCTU0OiAi54yr6K+a6aOf5ZOBIiwKCQkJCTU1OiAi6ICA54K5MTAw55m+6LSn5ZWG5Z+OIiwKCQkJCTU2OiAi6I2v5oi/572RIiwKCQkJCTU3OiAi5Lit5YWz5p2R5Zyo57q/5ZWG5Z+OIiwKCQkJCTU4OiAi5Li95a625a6d6LSdIiwKCQkJCTU5OiAiOTnnvZHkuIrkuabln44iLAoJCQkJNjA6ICLkupLliqjlh7rniYjnvZEiLAoJCQkJNjE6ICLkuK3lm73lm77kuabnvZEiLAoJCQkJNjI6ICLmlofovannvZEiLAoJCQkJNjM6ICLpo57omY7kuZDotK0iLAoJCQkJNjU6ICLoh7Tnvo7nvZEoU2tpblN0b3JlIENoaW5hKSIsCgkJCQk2NjogIumTtuazsOeZvui0pyIsCgkJCQk2NzogIui2o+eOqSIsCgkJCQk2ODogIlVyQ29zbWUiLAoJCQkJNjk6ICLojYnojpPnvZEiLAoJCQkJNzA6ICLpnLLlgKnnvZEiLAoJCQkJNzE6ICLphbfov5DliqgiLAoJCQkJNzI6ICLlv6vkuZDotK0iLAoJCQkJNzM6ICJHQVDkuK3lm70iLAoJCQkJNzQ6ICLlppnkuZDkuZDmr43lqbTnlKjlk4HllYbln44iLAoJCQkJNzU6ICLnrKzkupTlpKfpgZPlpaLkvojlk4HnvZEiLAoJCQkJNzY6ICLlsI/kuLvkurrnvZEiLAoJCQkJNzc6ICLlrpzlrrblrrblsYXlrpjnvZEiLAoJCQkJNzg6ICLmlrDkuIPlpKnnlLXlmajnvZEiLAoJCQkJNzk6ICLovr7oipnlpq7lrpjnvZEiLAoJCQkJODA6ICLlpKrlubPmtIvkurLlrZDnvZEiLAoJCQkJODE6ICLlpKrlubPmtIvlrrblsYXnvZEiLAoJCQkJODI6ICLnvKTotK3nvZEo57qi5a2p5a2QKSIsCgkJCQk4MzogIuWkqeeMqyIsCgkJCQk4NDogIuWkqeWkqee9kSIsCgkJCQk4NTogIuilv+ihl+i/kOWKqOe9kSIsCgkJCQk4NjogIuiBmue+juS8mOWTgSIsCgkJCQk4NzogIuWwj+eGiuWcqOe6v+WVhuWfjiIsCgkJCQk4ODogIuiNieiOk+a0vuWMluWmhuWTgeWVhuWfjiIsCgkJCQk4OTogIuWkp+i0p+agiOe9keS4iui2heW4giIsCgkJCQk5MDogIuWQjeWTgeaJk+aKmCIsCgkJCQk5MTogIua0u+WKm+i+vuS/neWBpeWTgee9kSIsCgkJCQk5MjogIjEy54K56Zu26aOfIiwKCQkJCTkzOiAi5LyY6LSt572RIiwKCQkJCTk0OiAiMeiNr+e9kSIsCgkJCQk5NTogIuWvvOiNr+e9kSjkuIrmtbflpI3nvo7lpKfoja/miL8pIiwKCQkJCTk2OiAi54Of5oKm572RIiwKCQkJCTk3OiAi5YGl5a6i572RIiwKCQkJCTk4OiAi5q+N5am05LmL5a62IiwKCQkJCTk5OiAi5Lit5Zu96Zu26aOf572RIiwKCQkJCTEwMDogIumCpui0ree9kSIsCgkJCQkxMDE6ICLkuZ/kubDphZIiLAoJCQkJMTAyOiAi6YWS576O572RIiwKCQkJCTEwMzogIumFkuS7mee9kSIsCgkJCQkxMDQ6ICLmg6DlgaXlurfllYbln44iLAoJCQkJMTA1OiAi5bel6LS45a6255S1IiwKCQkJCTEwNjogIuWQjueOm+eJuee9keS4iui2heW4giIsCgkJCQkxMDc6ICLomY7miZHor4botKciLAoJCQkJMTA4OiAi6LSt6YWS572RIiwKCQkJCTEwOTogIuWNjuW8uuWMl+WVhuWfjiIsCgkJCQkxMTA6ICLljZrlupPkuabln44iLAoJCQkJMTExOiAi6auY6bi/5ZWG5Z+OIiwKCQkJCTExMjogIuilv+WNlWlnbzUiLAoJCQkJMTEzOiAi5paw5LiW55WM55m+6LSnIiwKCQkJCTExNDogIuaxieWFieeZvui0pyIsCgkJCQkxMTU6ICJEMeS8mOWwmiIsCgkJCQkxMTY6ICLmmJPmlq/mnaXnpo8iLAoJCQkJMTE3OiAi5LyY5oKm55Sf5rS7IiwKCQkJCTExODogIuaPkuW6p+e9kSIsCgkJCQkxMTk6ICJPUkJJU+S4reWbvSIsCgkJCQkxMjA6ICLplJDmhI/nvZEiLAoJCQkJMTIxOiAi5LyYMeWunei0nSIsCgkJCQkxMjI6ICLmi43pnovnvZEiLAoJCQkJMTIzOiAi5reY5a6d572RIiwKCQkJCTEyNDogIuS4uuS4uue9kSIsCgkJCQkxMjU6ICLph5HosaHnvZEiLAoJCQkJMTI2OiAi6aG65Liw5LyY6YCJIiwKCQkJCTEyNzogIuacrOadpeeUn+a0uyIsCgkJCQkxMjg6ICLmsrHmsrHlt6XnpL4iLAoJCQkJMTI5OiAi5ZSv5ZOB5LyaIiwKCQkJCTEzMDogIuiBmuWwmue9kSIsCgkJCQkxMzE6ICLkv4/nianmgoTor60iLAoJCQkJMTMyOiAi5aSp5ZOB572RIiwKCQkJCTEzNDogIuWNjuS4uuWVhuWfjiIsCgkJCQkxMzU6ICLogZTmg7PllYbln44iLAoJCQkJMTM2OiAi6Iu55p6c5a6Y572RIiwKCQkJCTEzODogIuWNk+e+jue9kSIsCgkJCQkxMzk6ICLnsbPlpYfnvZEiLAoJCQkJMTQwOiAi55+l5oiR6I2v5aaGIiwKCQkJCTE0MTogIuWBpeS4gOe9kSIsCgkJCQkxNDI6ICLnvZHphZLnvZEiLAoJCQkJMTQzOiAi5q+U5bqm5YWLIiwKCQkJCTE0NDogIuijguW4m+acjemlsCIsCgkJCQkxNDU6ICJFU1BSSVTkuK3mloflrpjnvZEiLAoJCQkJMTQ2OiAi5YWw57yq5YaF6KGjIiwKCQkJCTE0NzogIueIseaFleWumOe9kSIsCgkJCQkxNDg6ICLljaHlvZPnvZEiLAoJCQkJMTQ5OiAi5Li95a2Q576O5aaGIiwKCQkJCTE1MDogIum6puW+t+m+mSIsCgkJCQkxNTE6ICJQQkHnvo7lpoYiLAoJCQkJMTUyOiAi5bCa5ZOB572RIiwKCQkJCTE1MzogIuS4h+ihqOe9kSIsCgkJCQkxNTQ6ICLpn6npg73ooaPoiI0iLAoJCQkJMTU1OiAi5rW35bCU5ZWG5Z+OIiwKCQkJCTE1NjogIuWvuuW6k+e9kSIsCgkJCQkxNTc6ICLpqobpqbzlrpjmlrnllYbln44iLAoJCQkJMTU4OiAi546b6JCo546b57SiIiwKCQkJCTE1OTogIk5PUOeUt+ijhSIsCgkJCQkxNjA6ICLniZvlsJTlrpjnvZEiLAoJCQkJMTYxOiAi6auY6KGX572RIiwKCQkJCTE2MjogIuePjeWTgee9kSIsCgkJCQkxNjM6ICLmlq/ms6LluJ3ljaEiLAoJCQkJMTY0OiAi55qZ6IKk5rOJIiwKCQkJCTE2NTogIuexs+eykuWEvyIsCgkJCQkxNjc6ICLlsI/nsbPllYbln44iLAoJCQkJMTY4OiAi5LmQ6KeG5ZWG5Z+OIiwKCQkJCTE2OTogIuWkmueci+mYheivuyIsCgkJCQkxNzA6ICJRUee9kei0rSIsCgkJCQkxNzE6ICLlpKfkvJfngrnor4QiLAoJCQkJMTcyOiAi576O5ZuiIiwKCQkJCTE3MzogIuaQuueoi+e9kSIsCgkJCQkxNzQ6ICLmmJPmnpznvZEiLAoJCQkJMTc1OiAi576O5ZGz5LiD5LiDIiwKCQkJCTE3ODogIuWkqeWkqeaenOWbrSIsCgkJCQkxNzk6ICLogZrnvo7mtbflpJbotK0iLAoJCQkJMTgwOiAi6aOe54mb572RIiwKCQkJCTE4MTogIumjnumjnuWVhuWfjiIsCgkJCQkxODI6ICLphonlk4HllYbln44iLAoJCQkJMTgzOiAi6LSd5aSH572RIiwKCQkJCTE4NDogIuaciei0pyIsCgkJCQkxODU6ICLpqbTlpojlpojml4XmuLjnvZEiLAoJCQkJMTg2OiAi6Z2S6IqS5p6cIiwKCQkJCTE4NzogIuS8mOW9qee9kSIsCgkJCQkxODg6ICLot6jlooPmt5giLAoJCQkJMTg5OiAi5YyF5YyF5qCRIiwKCQkJCTE5MDogIua7oeW6p+e9kSIsCgkJCQkxOTE6ICLkuIDln47kuIDlk4EiLAoJCQkJMTkyOiAi5Lit5Zu96Laz5b2p572RIiwKCQkJCTE5MzogIuWPkeW9qee9kSIsCgkJCQkxOTQ6ICLpqazlhYvljY7oj7IiLAoJCQkJMTk1OiAi6Jyc6Iq9IiwKCQkJCTE5NjogIumCruS5kOe9kSIsCgkJCQkxOTc6ICLmsJHnlJ/llYbln44iLAoJCQkJMTk4OiAi546L5bqc5LqV572R5LiK5ZWG5Z+OIiwKCQkJCTE5OTogIueZvuW6puezr+exsyIsCgkJCQkyMDA6ICLljrvlk6rlhL/nvZEiLAoJCQkJMjAxOiAi576O5LmQ5LmQIiwKCQkJCTIwMjogIue+juS4veivtCIsCgkJCQkyMDM6ICLomJHoj4fooZciLAoJCQkJMjA0OiAi56qd56qd5ZuiIiwKCQkJCTIwNTogIumUpuaxn+S5i+aYnyIsCgkJCQkyMDY6ICLoibrpvpnml4XooYznvZEiLAoJCQkJMjA3OiAi5biD5LiB6YWS5bqXIiwKCQkJCTIwODogIuiKkuaenOe9kSIsCgkJCQkyMDk6ICI1MDDlvannpajnvZEiLAoJCQkJMjEwOiAi6YCf5pmu5ZWG5Z+OIiwKCQkJCTIxMTogIuWQjOeoi+e9kSIsCgkJCQkyMTM6ICLmnY7lroHlrpjmlrnllYbln44iLAoJCQkJMjE0OiAi5paw5Lic5pa55Zyo57q/IiwKCQkJCTIxNTogIuaYpeeni+aXhea4uCIsCgkJCQkyMTY6ICLmsLjkuZDnpajliqEiLAoJCQkJMjE3OiAi5rW35bCU5YeA5rC05ZWG5Z+OIiwKCQkJCTIxODogIumFt+W8gOWVhuWfjiIsCgkJCQkyMTk6ICLprYXml4/lnKjnur/llYblupciLAoJCQkJMjIwOiAiTGlmZVZDIiwKCQkJCTIyMTogIuWKquavlOS6muWumOe9kSIsCgkJCQkyMjI6ICLlurfkuYvlrrbnvZHkuIroja/lupciLAoJCQkJMjIzOiAi6ICD5ouJ5rW36LStIiwKCQkJCTIyNDogIua0i+eggeWktCIsCgkJCQkyMjU6ICLonJzmt5giLAoJCQkJMjI2OiAi6Leo5aKD6YCaIiwKCQkJCTIyNzogIue9l+aKgOWumOe9kSIsCgkJCQkyMjg6ICLkuprpqazpgIrnvo7lm70iLAoJCQkJMjI5OiAi5Lqa6ams6YCK5pel5pysIiwKCQkJCTIzMDogImVCYXkiLAoJCQkJMjMxOiAiQWxpRXhwcmVzcyIsCgkJCQkyMzI6ICLopb/pm4bnvZEiLAoJCQkJMjMzOiAiTmlrZSIsCgkJCQkyMzQ6ICLlurfniLHlpJrnvZHkuIroja/lupciLAoJCQkJMjM1OiAi6ICB55m+5aeT572R5LiK6I2v5bqXIiwKCQkJCTIzNjogIue+juilv+aXtuWwmiIsCgkJCQkyMzc6ICLotJ3otJ3nvZEiLAoJCQkJMjM4OiAiNlBNIiwKCQkJCTIzOTogIkdOQ+e+juWbveWumOe9kSIsCgkJCQkyNDA6ICJNWUhBQklUIiwKCQkJCTI0MTogIlNIT1BCT1AiLAoJCQkJMjQyOiAiV2FsZ3JlZW5zIiwKCQkJCTI0MzogIlNUUCIsCgkJCQkyNDQ6ICLnvo7lm73mlrDom4siLAoJCQkJMjQ1OiAiSm9tYXNob3AiLAoJCQkJMjQ2OiAi5Lqa6ams6YCK5b635Zu9IiwKCQkJCTI0NzogIkFzaGZvcmQiLAoJCQkJMjQ4OiAiTG9va0ZhbnRhc3RpYyIsCgkJCQkyNDk6ICJSRUkiLAoJCQkJMjUwOiAiaUhlcmIiLAoJCQkJMjUxOiAiQ2FydGVyJ3MiLAoJCQkJMjUyOiAi6KeG5a6i55y86ZWc572RIiwKCQkJCTI1MzogIkVORC4iLAoJCQkJMjU0OiAiQ2FtcFNhdmVyIiwKCQkJCTI1NTogIuS5kOWkqeWbvemZhSIsCgkJCQkyNTY6ICLnmb7mgqbnvZEiLAoJCQkJMjU3OiAiV29vdCIsCgkJCQkyNTg6ICLmtbfmt5jln44iLAoJCQkJMjU5OiAiSm9lJ3MgTkIgT3V0bGV0IiwKCQkJCTI2MDogIkZpbmlzaExpbmUiLAoJCQkJMjYxOiAiVml0YWNvc3QiLAoJCQkJMjYyOiAiR3JvdXBvbiIsCgkJCQkyNjM6ICJNYWN5J3MiLAoJCQkJMjY0OiAiTW9vc2VqYXciLAoJCQkJMjY1OiAiR0lMVCIsCgkJCQkyNjY6ICLkuprpqazpgIroi7Hlm70iLAoJCQkJMjY3OiAi6L6+5LukIiwKCQkJCTI2ODogIuS4sOi2o+a1t+a3mCIsCgkJCQkyNjk6ICLprYXlipvmg6AiLAoJCQkJMjcwOiAi5bCa5aaG572RIiwKCQkJCTI3MTogIuS4nOaWuUNKIiwKCQkJCTI3MjogIumhuueUtee9keS4iuWVhuWfjiIsCgkJCQkyNzM6ICLmmJPop4bnvZEiLAoJCQkJMjc0OiAi5LqR54y0572RIiwKCQkJCTI3NTogIua1t+ixmuadkSIsCgkJCQkyNzY6ICJXYWxtYXJ0IiwKCQkJCTI3NzogIuWUr+e+jue+juWmhiIsCgkJCQkyNzg6ICLph5Hnro3mo5LmtbflpJbotK0iLAoJCQkJMjc5OiAi5oiR6KaB6K6iIiwKCQkJCTI4MDogIueIseaItOe9kSIsCgkJCQkyODE6ICLms6LlpYflrqDnianllYbln44iLAoJCQkJMjgyOiAi6YCU6aOO572RIiwKCQkJCTI4MzogIui3r+i3r+ihjCIsCgkJCQkyODQ6ICLonJjom5vnvZEiLAoJCQkJMjg1OiAi5b6u6L2v5Lit5Zu9IiwKCQkJCTI4NjogIuWKoOaEj+aWsOWTgSIsCgkJCQkyODc6ICLmnYLlv5fpk7oiLAoJCQkJMjg4OiAi5bCP54uX55S15ZmoIiwKCQkJCTI4OTogIueJueatpeWumOaWueWVhuWfjiIsCgkJCQkyOTA6ICLnvo7nmoTllYbln44iLAoJCQkJMjkxOiAi5Y+y5rOw5Y2aIiwKCQkJCTI5MjogIuaWueWkquWVhuWfjiIsCgkJCQkyOTM6ICLotJ3mgJ3lrqIiLAoJCQkJMjk0OiAiTE9WT+Wutue6uiIsCgkJCQkyOTU6ICLkuK3lm73pspzoirHnpLzlk4HnvZEiLAoJCQkJMjk2OiAi5oqYODAwIiwKCQkJCTI5NzogIuaatOmjjlRWIiwKCQkJCTI5ODogIumAlOWutue9kSIsCgkJCQkyOTk6ICLpgJTomY7lhbvovabnvZEiLAoJCQkJMzAwOiAiSFRD5a6Y5pa55ZWG5Z+OIiwKCQkJCTMwMTogInJvc2Vvbmx55a6Y572RIiwKCQkJCTMwMjogIuiejTM2MCIsCgkJCQkzMDM6ICLkvaDmiJHotLciLAoJCQkJMzA0OiAiQ29zbWUgU2hvcHBpbmciLAoJCQkJMzA1OiAiRGlhcGVycyIsCgkJCQkzMDY6ICJXaW5kZWxuLmRlIiwKCQkJCTMwNzogIkJhYnluZW8uZGUiLAoJCQkJMzA4OiAiRXNjZW50dWFsIiwKCQkJCTMwOTogIlRoZVdhdGNoZXJ5IiwKCQkJCTMxMDogIlNha3MgRmlmdGggQXZlbnVlIiwKCQkJCTMxMTogIkVzdGVlIExhdWRlciIsCgkJCQkzMTI6ICJCaWMgQ2FtZXJhIiwKCQkJCTMxMzogIuS7lui2oyIsCgkJCQkzMTQ6ICLnqbfmuLjnvZEiLAoJCQkJMzE1OiAi5r6z5paw5LyY6YCJIiwKCQkJCTMxNjogIuaXoOWNsOiJr+WTgSIsCgkJCQkzMTc6ICJHbWFya2V0IiwKCQkJCTMxODogIjEx5Y+36KGXIiwKCQkJCTMxOTogIlNtYXJ0YmFyZ2FpbnMiLAoJCQkJMzIwOiAi6ZuF6JmO5pel5pys5ZWG5Z+OIiwKCQkJCTMyMTogIuW4g+mygeaYjuaItOWwlCIsCgkJCQkzMjI6ICJNaWtpaG91c2UiLAoJCQkJMzIzOiAiVG95c1JVc+aXpeacrOWumOe9kSIsCgkJCQkzMjQ6ICJDb21mb3J0Rmlyc3QiLAoJCQkJMzI1OiAi6YeR5a6d6LSdIiwKCQkJCTMyNjogIkFsYmVlIEJhYnkiLAoJCQkJMzI3OiAiQmFieW1hcmt0IiwKCQkJCTMyODogIlVHR+WumOe9kSIsCgkJCQkzMjk6ICJOZWltYW4gTWFyY3VzIiwKCQkJCTMzMDogIlNob2VidXkiLAoJCQkJMzMxOiAiU3p1bCIsCgkJCQkzMzI6ICJUaW1leCIsCgkJCQkzMzM6ICJLYXkgSmV3ZWxlcnMiLAoJCQkJMzM0OiAiZVdhdGNoZXMiLAoJCQkJMzM1OiAiU3dhcm92c2tp576O5Zu95a6Y572RIiwKCQkJCTMzNjogIldvcmxkIG9mIFdhdGNoZXMiLAoJCQkJMzM3OiAiRGFuaWVsIFdlbGxpbmd0b24iLAoJCQkJMzM4OiAiQmVhdXR5IEJheSIsCgkJCQkzMzk6ICJCZWF1dHkuY29tIiwKCQkJCTM0MDogIkJlYXV0eSBCYXIiLAoJCQkJMzQxOiAiU2tpblN0b3JlIiwKCQkJCTM0MjogIuWFsOiKnemfqeWbveWumOe9kSIsCgkJCQkzNDM6ICJCT1NF576O5Zu95a6Y572RIiwKCQkJCTM0NDogIkJlc3QgQnV5IiwKCQkJCTM0NTogIkImSCIsCgkJCQkzNDY6ICLntKLlsLzml6XmnKzlrpjnvZEiLAoJCQkJMzQ3OiAi55m+6IGUIiwKCQkJCTM0ODogIua6kOWTgeS8mOi0rSIsCgkJCQkzNDk6ICLnvZHmmJPkuKXpgIkiLAoJCQkJMzUwOiAi6ZSm5rGf5Zu96ZmFIiwKCQkJCTM1MTogIuWbvemZheWmiOWSqiIsCgkJCQkzNTI6ICLnmb7mtIvllYbln44iLAoJCQkJMzUzOiAi6YGo5ri4572RIiwKCQkJCTM1NDogIlJveSBZb3VuZ+S4reaWh+WumOe9kSIsCgkJCQkzNTU6ICJNZWRpaGVhbOS4reaWh+WumOe9kSIsCgkJCQkzNTY6ICIxMDAxIHBoYXJtYWNpZXPkuK3mloflrpjnvZEiLAoJCQkJMzU3OiAiTG9va2ZhbnRhc3RpY+S4reaWh+WumOe9kSIsCgkJCQkzNTk6ICLlvIDlv4Pkv53kv53pmannvZEiLAoJCQkJMzYwOiAi5Y2355qu572RIiwKCQkJCTM2MTogIkJvb2tpbmcuY29tIiwKCQkJCTM2MjogIua+s+a0slBP6I2v5oi/5Lit5paH5a6Y572RIiwKCQkJCTM2MzogIuW+t+WbvUJB5L+d6ZWW6I2v5oi/5Lit5paH572RIiwKCQkJCTM2NDogIuWFqOajieaXtuS7oyIsCgkJCQkzNjU6ICLkuprpqazpgIrms5Xlm70iLAoJCQkJMzY2OiAi5Lqa6ams6YCK5Yqg5ou/5aSnIiwKCQkJCTM2NzogIuWkluiuvuWkqeS4iyIsCgkJCQkzNjg6ICLmtbfkv6HllYbln44iLAoJCQkJMzY5OiAi5Lit6YWS572RIiwKCQkJCTM3MDogIuWNoei3r+mHjCIsCgkJCQkzNzE6ICLlnJ/lt7TlhZTlrrblsYXllYbln44iLAoJCQkJMzcyOiAiT1BQT+WcqOe6v+WVhuWfjiIsCgkJCQkzNzM6ICLlrp3otJ3moLzlrZAiLAoJCQkJMzc0OiAi5Zu96I2v572RIiwKCQkJCTM3NTogIueZvueoi+aXheihjOe9kSIsCgkJCQkzNzY6ICLph5Hnq4vmiYvmnLrlrpjnvZEiLAoJCQkJMzc3OiAi6YW45qmY5a2QIiwKCQkJCTM3ODogIuWlpeS5sOWutuWFqOeQg+i0rSIsCgkJCQkzNzk6ICLnvZfojrHlrpjmlrnllYbln44iLAoJCQkJMzgwOiAiVklWT+WumOaWueWVhuWfjiIsCgkJCQkzODE6ICLov6rkv6HpgJrlrpjmlrnllYbln44iLAoJCQkJMzgyOiAi6YW35rS+5ZWG5Z+OIiwKCQkJCTM4MzogIlNLR+WumOe9kSIsCgkJCQkzODQ6ICLniLHlpYfoiboiLAoJCQkJMzg1OiAi5aWl6I6x6LStIiwKCQkJCTM4NjogIuavj+aXpeS8mOmynCIsCgkJCQkzODc6ICLlnIPnpZ7ot6jlooMiLAoJCQkJMzg4OiAiRmVlbHVuaXF1ZeS4reaWh+e9kSIsCgkJCQkzODk6ICJDaGVtaXN0IERpcmVjdOS4reaWh+e9kSIsCgkJCQkzOTA6ICJOZXQgUGhhcm1hY3nkuK3mlofnvZEiLAoJCQkJMzkxOiAiUGhhcm1hY3kgNCBMZXNz5Lit5paH572RIiwKCQkJCTM5MjogIlBoYXJtYWN5IERpcmVjdOS4reaWh+e9kSIsCgkJCQkzOTM6ICJBbWNhbOS4reaWh+e9kSIsCgkJCQkzOTQ6ICJMYSBSZWRvdXRl5Lit5paH572RIiwKCQkJCTM5NTogIuW+t+WbvVVLQeS8mOWNoeacieacuuS4reaWh+e9kSIsCgkJCQkzOTY6ICJFcndpbiBNdWVsbGVy56mG5YuS5a625bGF5Lit5paH572RIiwKCQkJCTM5NzogIktpd2kgRGlzY292ZXJ55Lit5paH572RIiwKCQkJCTM5ODogIlNwcmluZ2xhbmXkuK3mlofnvZEiLAoJCQkJMzk5OiAi5b635Zu9SkFLTy1P5am056ul55So5ZOB5Lit5paH572RIiwKCQkJCTQwMDogIkVhc3lUb3lz5Lit5paH56uZIiwKCQkJCTQwMTogIuiLseWbvVRMQ+S4reaWh+e9kSIsCgkJCQk0MDI6ICLms5Xlm71CTeW9vOa0i+e+jumjnyIsCgkJCQk0MDM6ICJEZXdhcmVu5b635Zu954uu5a2Q5a625Lit5paH572RIiwKCQkJCTQwNDogIkRD5b635byP5bq357q/5LiK6I2v5oi/5Lit5paH5a6Y572RIiwKCQkJCTQwNTogIuiNt+WFsOS5i+WutuS4reaWh+ermSIsCgkJCQk0MDY6ICLpsb/psbznvZEiLAoJCQkJNDA3OiAiS2l3aVN0YXJjYXJl5a6Y572RIiwKCQkJCTQwODogIlpVS+iBlOaDs+aJi+acuuWVhuWfjiIsCgkJCQk0MDk6ICJLaWVobCdz576O5Zu95a6Y572RIiwKCQkJCTQxMDogIlphcHBvcyIsCgkJCQk0MTE6ICJDT0FDSOiUu+mpsOS4reWbveWumOe9kSIsCgkJCQk0MTI6ICJZT09Y5Lit5paH5a6Y572RIiwKCQkJCTQxMzogIumfqeWbvTEx6KGX5Lit5paH5a6Y572RIiwKCQkJCTQxNDogIuiLsei2hea1t+a3mCIsCgkJCQk0MTU6ICJIUWhhaXIuY29tIiwKCQkJCTQxNjogIkthdGUgU3BhZGUiLAoJCQkJNDE3OiAiVml0YWZ55Lit5paH5a6Y572RIiwKCQkJCTQxODogIuS5kOWkqee9kei0rSIsCgkJCQk0MTk6ICLlrrbkuZDnpo/nvZHkuIrllYbln44iLAoJCQkJNDIwOiAi6Iy25LiD572RIiwKCQkJCTQyMTogIuaZruazveWkp+iNr+aIvyIsCgkJCQk0MjI6ICJLb2hsJ3MiLAoJCQkJNDIzOiAiQm9keSBCdWlsZGluZyIsCgkJCQk0MjQ6ICJOb3Jkc3Ryb20iLAoJCQkJNDI1OiAiQ29zdGNvIiwKCQkJCTQyNjogIlRhcmdldCIsCgkJCQk0Mjc6ICJLbWFydCIsCgkJCQk0Mjg6ICJPdmVyc3RvY2siLAoJCQkJNDI5OiAiU2VhcnMiLAoJCQkJNDMwOiAi6ICB5p2/55S15Zmo5a6Y5pa55ZWG5Z+OIiwKCQkJCTQzMTogIueLl+awkee9keWVhuWfjiIsCgkJCQk0MzI6ICLpo57np5HllYbln44iLAoJCQkJNDMzOiAi5qyn5pmu54Wn5piOIiwKCQkJCTQzNDogIuS4lueVjOWptOerpee9kSIsCgkJCQk0MzU6ICLnm4rkuLDlpKfoja/miL8iLAoJCQkJNDM2OiAi5aW96K6i572RIiwKCQkJCTQzNzogIueIseWbnuaUtiIsCgkJCQk0Mzg6ICLph47lhb3mtL4iLAoJCQkJNDM5OiAi5Lmd54mn5Y2r5rW05a6Y5pa55ZWG5Z+OIiwKCQkJCTQ0MDogIuS4g+WMueeLvOWumOaWueWVhuWfjiIsCgkJCQk0NDE6ICLpk77lrrYiLAoJCQkJNDQyOiAi5oiR54ix5oiR5a62IiwKCQkJCTQ0MzogIuWFremXtOaIv+engOWcuiIsCgkJCQk0NDQ6ICLlhavnmb7mlrnnvZHkuIroja/lupciLAoJCQkJNDQ1OiAi5LyY6ZuG5ZOBIiwKCQkJCTQ0NjogIuS5sOWNluWunSIsCgkJCQk0NDc6ICLkvJjkvJfnvZEiLAoJCQkJNDQ4OiAi54ix5bq35Zu95a6+5YGl5bq35ZWG5Z+OIiwKCQkJCTQ0OTogIue7tOS5n+e6s+mFkuW6l+WumOe9kSIsCgkJCQk0NTA6ICJNJ0NBS0UiLAoJCQkJNDUxOiAi576O6Imy5ZWG5Z+OIiwKCQkJCTQ1MjogIuivuuW/g+ibi+ezleWumOe9kSIsCgkJCQk0NTM6ICLnroDljZXlrabkuaDnvZEiLAoJCQkJNDU0OiAi57K+5Y2O5Zyo57q/IiwKCQkJCTQ1NTogIuahg+iKseWdniIsCgkJCQk0NTY6ICLpkrvnn7PlsI/puJ/lrpjnvZEiLAoJCQkJNDU3OiAi5bq3576O5YGl5bq35ZWG5Z+OIiwKCQkJCTQ1ODogIuS9kOWNoeS8iuWumOe9kSIsCgkJCQk0NTk6ICLmt5jkuabnvZEiLAoJCQkJNDYwOiAi54ix5LmL6LC3IiwKCQkJCTQ2MTogIumTgeWPi+aXheihjOe9kSIsCgkJCQk0NjI6ICLojobnlLDnvZEiLAoJCQkJNDYzOiAi5ZGz5aSa576O5a6Y572RIiwKCQkJCTQ2NDogIuael+a4hei9qeWumOe9kSIsCgkJCQk0Njc6ICLnvo7lm73otK3niannvZEiLAoJCQkJNDY4OiAi5ZOB5bCa5rGHIiwKCQkJCTQ2OTogIuafkueJjOWumOaWueWVhuWfjiIsCgkJCQk0NzA6ICLmuLjlpJrlpJrlrqLmoIgiLAoJCQkJNDcxOiAiMTY4OOW5s+S7t+eyvumAiSIsCgkJCQk0NzI6ICLkvJjkuKrnvZEiLAoJCQkJNDczOiAi5aSn5py0572RIiwKCQkJCTQ3NDogIuiWh+ivuuWonOWumOe9kSIsCgkJCQk0NzU6ICLolJrok53lm77kuabnvZEiLAoJCQkJNDc2OiAi5bGx6ISJ5oi35aSWIiwKCQkJCTQ3NzogIuS9lemHkeaYjOWumOe9kSIsCgkJCQk0Nzg6ICLkubDojLbnvZEiLAoJCQkJNDc5OiAi5LyYZee9kSIsCgkJCQk0ODA6ICI1MVlPVeaXhea4uOe9kSIsCgkJCQk0ODE6ICLljJflj5Hlm77kuabnvZEiLAoJCQkJNDgyOiAi5pm25ZOB572RIiwKCQkJCTQ4MzogIuWNjuS9l+iNr+aIvyIsCgkJCQk0ODQ6ICLlqIHplIvllYbln44iLAoJCQkJNDg1OiAi6K+65LiA6Imv5ZOBIiwKCQkJCTQ4NjogIuWSjOiMtue9kSIsCgkJCQk0ODc6ICLlpKnml7bmsYflrpjnvZEiLAoJCQkJNDg4OiAi6Laj572R5ZWG5Z+OIiwKCQkJCTQ4OTogIuicnOafmuaXheihjCIsCgkJCQk0OTA6ICLlpb3oja/luIjnvZHkuIroja/lupciLAoJCQkJNDkxOiAiSURY54ix5a6a5a6iIiwKCQkJCTQ5MjogIuS8mOmbhTEwMCIsCgkJCQk0OTM6ICJTJlPlpbPoo4UiLAoJCQkJNDk0OiAi5YCp56Kn576O5Zu95a6Y572RIiwKCQkJCTQ5NTogIuWNjuWkj2XlvZMiLAoJCQkJNDk2OiAiQnJvb2tzIEJyb3RoZXJzIiwKCQkJCTQ5NzogIuasp+e+jua3mCIsCgkJCQk0OTg6ICLljbDpgJrlpKnkuIsiLAoJCQkJNDk5OiAi5ZOl5Lym5q+U5Lqa576O5Zu95a6Y572RIiwKCQkJCTUwMDogIkJFU1TlhajnkIPotK0iLAoJCQkJNTAxOiAiTmV3IEJhbGFuY2Xnvo7lm73lrpjnvZEiLAoJCQkJNTAyOiAi5LiH6ZuG5a6iIiwKCQkJCTUwMzogIkJhbGx56Iux5Zu95a6Y572RIiwKCQkJCTUwNDogIuS4gOWXqOenn+i9piIsCgkJCQk1MDU6ICLlmInliKnmiJAiLAoJCQkJNTA2OiAi5aSa5bqG5bGL5Lit5paH5a6Y572RIiwKCQkJCTUwNzogIkZvcmV2ZXIgMjEiLAoJCQkJNTA4OiAi5pGp55m75aSn6YGTIiwKCQkJCTUwOTogIuacqOm4n+efreennyIsCgkJCQk1MTA6ICLmnIDkvJrmuLgiLAoJCQkJNTExOiAi5Lit5Y6f5Zyw5LqnIiwKCQkJCTUxMjogIkJvYmJpIEJyb3du576O5Zu95a6Y572RIiwKCQkJCTUxMzogIlN1cGVyLWluIiwKCQkJCTUxNDogIuaxiei0ree9kSIsCgkJCQk1MTU6ICJMZXZpc+W+t+WbveWumOe9kSIsCgkJCQk1MTY6ICLmlpDkuZBGSUxB5a6Y5pa55ZWG5Z+OIiwKCQkJCTUxNzogIuWMoeWogeS4reWbveWumOaWueWVhuWfjiIsCgkJCQk1MTg6ICJOZXh0576O5Zu95a6Y572RIiwKCQkJCTUxOTogImlUcmlw54ix5Y675peF6KGM572RIiwKCQkJCTUyMDogIuaLieaJi+e9kSIsCgkJCQk1MjE6ICLlha3kuLDllYbln44iLAoJCQkJNTIyOiAi5ZCM5LuB5aCC5aSp54S25reYIiwKCQkJCTUyMzogIuaIkeiuouiKsSIsCgkJCQk1MjQ6ICJGb29kaSIsCgkJCQk1MjU6ICLkuK3lm73mo67mnpfpo5/lk4HnvZEiLAoJCQkJNTI2OiAi6aaZ5riv5Y2T5oKm5YyW5aaG5ZOBIiwKCQkJCTUyNzogIue7tOS7lui0rSIsCgkJCQk1Mjg6ICLph5HmtbfpqazllYbln44iLAoJCQkJNTI5OiAi5Lqu5YGl5aW96I2v5oi/IiwKCQkJCTUzMDogIuWUseWQp+ebtOaSremXtCIsCgkJCQk1MzE6ICJPYWtsZXnnvo7lm73lrpjnvZEiLAoJCQkJNTMyOiAi6YC46KGM572RIiwKCQkJCTUzMzogIkNsYXJrc+e+juWbveWumOe9kSIsCgkJCQk1MzQ6ICJTdGFyd29vZCBIb3RlbHMiLAoJCQkJNTM1OiAiTWFycmlvdHTkuIfosarnvo7lm73lrpjnvZEiLAoJCQkJNTM2OiAiWWVzIFN0eWxlIiwKCQkJCTUzNzogIkV2aXN15Lit5paH5a6Y572RIiwKCQkJCTUzODogIkxpZmUncyBFYXN5IiwKCQkJCTUzOTogIuWuoOWuoOeGiuWumOaWueWVhuWfjiIsCgkJCQk1NDA6ICIwMDYx5r6z5rSy5Yi26YCgIiwKCQkJCTU0MTogIktL6aaG5YWo55CD6LStIiwKCQkJCTU0MjogIlN0eWxlIE8nQ2xvY2siLAoJCQkJNTQzOiAi6YWN5aS45YWo55CD6LStIiwKCQkJCTU0NDogIkFpciBGcmFuY2UiLAoJCQkJNTQ1OiAiQWNjb3IgSG90ZWxz5Lit5paH5a6Y572RIiwKCQkJCTU0NjogIlNwYWNlLk5LIiwKCQkJCTU0NzogIuWXqOWOqOaIvyIsCgkJCQk1NDg6ICJXIENvbmNlcHQiLAoJCQkJNTQ5OiAiR0FOVOiLseWbveWumOe9kSIsCgkJCQk1NTA6ICJDQVQgRm9vdHdlYXLoi7Hlm73lrpjnvZEiLAoJCQkJNTUxOiAiU2F1Y29ueeiLseWbveWumOe9kSIsCgkJCQk1NTI6ICLpgKDkvZzlrrblsYUiLAoJCQkJNTUzOiAi5bCP5aSp6bmF5a6Y5pa55ZWG5Z+OIiwKCQkJCTU1NDogIkNBTueci+WwmuWVhuWfjiIsCgkJCQk1NTU6ICLml7blsJrml6XorrAiLAoJCQkJNTU2OiAiR3Vlc3PmvrPlpKfliKnkuprlrpjnvZEiLAoJCQkJNTU3OiAiRXRpaGFkIEFpcndheXMiLAoJCQkJNTU4OiAiRklJTOWVhuWfjiIsCgkJCQk1NTk6ICLlhY3nqI7mmJPotK0iLAoJCQkJNTYwOiAi54m56LSt56S+IiwKCQkJCTU2MTogIldpZ2dsZeS4reaWh+WumOe9kSIsCgkJCQk1NjI6ICJNZWxpc3Nh6aaZ5riv5a6Y572RIiwKCQkJCTU2MzogIuenkeayg+aWr+WumOaWueWVhuWfjiIsCgkJCQk1NjQ6ICJDYWx2aW4gS2xlaW4iLAoJCQkJNTY1OiAiTUVNRUJPWOe+jue+jueusSIsCgkJCQk1NjY6ICJIaWx0b27nvo7lm73lrpjnvZEiLAoJCQkJNTY3OiAiUmV2b2x2ZSBDbG90aGluZyIsCgkJCQk1Njg6ICLotYTnlJ/loILnvo7lm73lrpjnvZEiLAoJCQkJNTY5OiAi5aiH6Z+16K+X576O5Zu95a6Y572RIiwKCQkJCTU3MDogIlN0YXJidWNrc+e+juWbveWumOe9kSIsCgkJCQk1NzE6ICJSYXktQmFu576O5Zu95a6Y572RIiwKCQkJCTU3MjogIlB1bWHnvo7lm73lrpjnvZEiLAoJCQkJNTczOiAiTmF1dGljYee+juWbveWumOe9kSIsCgkJCQk1NzQ6ICJMYSBNZXLnvo7lm73lrpjnvZEiLAoJCQkJNTc1OiAiS2lwbGluZ+e+juWbveWumOe9kSIsCgkJCQk1NzY6ICJKdXJsaXF1Zee+juWbveWumOe9kSIsCgkJCQk1Nzc6ICJIdXNoIFB1cHBpZXMiLAoJCQkJNTc4OiAiT3JpZ2luc+e+juWbveWumOe9kSIsCgkJCQk1Nzk6ICJGb2xsaSBGb2xsaWXnvo7lm73lrpjnvZEiLAoJCQkJNTgwOiAiTCdPY2NpdGFuZee+juWbveWumOe9kSIsCgkJCQk1ODE6ICLpuqbnlLAiLAoJCQkJNTgyOiAi5oOg5pmu5a6Y5pa55ZWG5Z+OIiwKCQkJCTU4MzogIuWbveWkp+WcsOS6pyIsCgkJCQk1ODQ6ICLpppblrrbllYbln44iLAoJCQkJNTg1OiAi6Z2S5bKbUeaIv+e9kSIsCgkJCQk1ODY6ICLlub/lt57lrrblrrbpobrmiL/kuqfnvZEiLAoJCQkJNTg3OiAi5p2t5bee6LGq5LiW5Y2O6YKm5oi/5Lqn572RIiwKCQkJCTU4ODogIkhlYWx0aFBvc3QiLAoJCQkJNTg5OiAi5oi/5aSp5LiLIiwKCQkJCTU5MDogIuaipuaDs+S5puWfjiIsCgkJCQk1OTE6ICLmtbfkvJjkuJbnuqrppoYiLAoJCQkJNTkyOiAi5omr6LSn54m55Y2WIiwKCQkJCTU5MzogIueDreaLjee9kSIsCgkJCQk1OTQ6ICLomoLomoHnn63np58iLAoJCQkJNTk1OiAi6ZO256Wo572RIiwKCQkJCTU5NjogIueIseiZjuS/nSIsCgkJCQk1OTc6ICJJbmNha2XlrpjnvZEiLAoJCQkJNTk4OiAi6IGa5pif55u05pKtIiwKCQkJCTU5OTogIuiJuue9kSIsCgkJCQk2MDA6ICLlurfovonml4XooYznvZEiLAoJCQkJNjAxOiAi5a6J6YCC6LSt5rW35aSW5ZWG5Z+OIiwKCQkJCTYwMjogIumcuembs+eIuOeIuOa1t+a3mOW5s+WPsCIsCgkJCQk2MDM6ICLlsI/niZvlnKjnur8iLAoJCQkJNjA0OiAiQUhBVkEiLAoJCQkJNjA1OiAiRmlmdGgiLAoJCQkJNjA2OiAiVGhlIFdhdGNoIEh1dCIsCgkJCQk2MDc6ICJCYWJ5SGF2ZW7kuK3mlofnvZEiLAoJCQkJNjA4OiAi546r5Li9572RIiwKCQkJCTYwOTogIkdldCBUaGUgTGFiZWwg5Lit5paH572RIiwKCQkJCTYxMDogIuadvuWxi+eZvui0p+S4reaWh+e9kSIsCgkJCQk2MTE6ICJUaW1iZXJsYW5kIiwKCQkJCTYxMjogIlRvcG1hbiIsCgkJCQk2MTM6ICJIb21lQXdheSIsCgkJCQk2MTQ6ICJCZWF1dHkgRXhwZXJ0IiwKCQkJCTYxNTogIua1t+icnOS4pemAiSIsCgkJCQk2MTY6ICJNYW5raW5kIiwKCQkJCTYxNzogIlRoZSBIdXQiLAoJCQkJNjE4OiAiVG9wc2hvcCIsCgkJCQk2MTk6ICJNYW1hbGFkZW4iLAoJCQkJNjIwOiAiVHJhdmVsZXIgc3RvcmUiLAoJCQkJNjIxOiAiVHJhdmVsem9vIiwKCQkJCTYyMjogIlVNSSBDaGlsZHJlbidzIFNob2VzIiwKCQkJCTYyMzogIuaWsOengOS4vee+juWbveWumOe9kSIsCgkJCQk2MjQ6ICJGZXJyYXJpIFN0b3JlIiwKCQkJCTYyNTogIldpbGxlciBUcmF2ZWwiLAoJCQkJNjI2OiAiVW5pbmVlZCIsCgkJCQk2Mjc6ICJBY25lIFN0dWRpb3PkuK3mlofnvZEiLAoJCQkJNjI4OiAiQWVyb3Bvc3RhbGUiLAoJCQkJNjI5OiAiQWdvZGHkuK3mlofnq5kiLAoJCQkJNjMwOiAiQWxiYSBNb2RhIiwKCQkJCTYzMTogIkFsbGJlYXV0eSIsCgkJCQk2MzI6ICJBbGxTYWludHMiLAoJCQkJNjMzOiAiQWxsc29sZSIsCgkJCQk2MzQ6ICJVcmJhbiBPdXRmaXR0ZXJzIiwKCQkJCTYzNTogIlZpdGFiaW90aWNzIiwKCQkJCTYzNjogIkJlbGxlIE1haXNvbiIsCgkJCQk2Mzc6ICLotJ3njrLlpoPnvo7lm73lrpjnvZEiLAoJCQkJNjM4OiAiQkggQ29zbWV0aWNzIiwKCQkJCTYzOTogIue+juiOseaWsOmdkuW5tCIsCgkJCQk2NDA6ICJWaXRhbWluIEJheSIsCgkJCQk2NDE6ICJXYWl0cm9zZSIsCgkJCQk2NDI6ICJXb2xmb3JkIiwKCQkJCTY0MzogIkJvb2hvbyIsCgkJCQk2NDQ6ICJCb290cy5jb20iLAoJCQkJNjQ1OiAiQnJpdGlzaCBDb3JuZXIgU2hvcCIsCgkJCQk2NDY6ICLlrpzkurrotLciLAoJCQkJNjQ3OiAi6JCk55+z5ZWG5Z+OIiwKCQkJCTY0ODogIkNvZ2dsZXMuY29tIiwKCQkJCTY0OTogIkNvcnNldCBEZWFsIiwKCQkJCTY1MDogIkNPVFRPTiBPTiIsCgkJCQk2NTE6ICJDcm9jc+iLseWbveWumOe9kSIsCgkJCQk2NTI6ICJDUlVJU0UiLAoJCQkJNjUzOiAiRGVsbOe+juWbveWumOe9kSIsCgkJCQk2NTQ6ICJEZXJtc3RvcmUiLAoJCQkJNjU1OiAiRGlzbmV5IFN0b3JlIiwKCQkJCTY1NjogIkRvcm90aHkgUGVya2lucyIsCgkJCQk2NTc6ICLnl5jnl5jlurflrpjmlrnllYbln44iLAoJCQkJNjU4OiAi5bqm5YGH5a6iIiwKCQkJCTY1OTogIkR1bmUgTG9uZG9uIiwKCQkJCTY2MDogIkVhc3RiYXkiLAoJCQkJNjYxOiAiRWFzdCBEYW5l5Lit5paH572RIiwKCQkJCTY2MjogIlphZnVsIiwKCQkJCTY2MzogIlphdnZpIiwKCQkJCTY2NDogIkZlaW5rZWl0LmRlIiwKCQkJCTY2NTogImVpYm1hcmt0IiwKCQkJCTY2NjogIkJlbGx1bmHkuK3mlofnvZEiLAoJCQkJNjY3OiAiRW1pcmF0ZXPpmL/ogZTphYvoiKoiLAoJCQkJNjY4OiAiRWFzdGVybiBNb3VudGFpbiBTcG9ydHMiLAoJCQkJNjY5OiAiRVRFUk5BIiwKCQkJCTY3MDogIkV1cmFpbCIsCgkJCQk2NzE6ICJFeGFudGUgRGlldCIsCgkJCQk2NzI6ICJFeHBlZGlhIFVLIiwKCQkJCTY3MzogIkZBTEtFIiwKCQkJCTY3NDogIkZhbW91cyBGb290d2VhciIsCgkJCQk2NzU6ICJCb25wb250IiwKCQkJCTY3NjogIkZvcmVvIiwKCQkJCTY3NzogIue9keS/oSIsCgkJCQk2Nzg6ICJGb3JldmVyIFVuaXF1ZSIsCgkJCQk2Nzk6ICJGb3J6aWVyaSIsCgkJCQk2ODA6ICJGcmVlIENvdW50cnkiLAoJCQkJNjgxOiAiQ0VSUlVUSSAxODgxIiwKCQkJCTY4MjogIkZyZW5jaCBDb25uZWN0aW9uIiwKCQkJCTY4MzogIkdpZnQgbGFuZCIsCgkJCQk2ODQ6ICJDdWx0IEJlYXV0eSIsCgkJCQk2ODU6ICJGYW5jeSIsCgkJCQk2ODY6ICJLZW50JkN1cndlbiIsCgkJCQk2ODc6ICJHcm93IEdvcmdlb3Vz5Lit5paH572RIiwKCQkJCTY4ODogIktvcmVhbk1hbGzkuK3mlofnq5kiLAoJCQkJNjg5OiAiU1RZTEVCT1AuY29tIiwKCQkJCTY5MDogIkhPVEVMIElORk8iLAoJCQkJNjkxOiAiSG91c2Ugb2YgRnJhc2VyIiwKCQkJCTY5MjogIuaDoOenn+i9piIsCgkJCQk2OTM6ICJWaXRhbWluIFBsYW5ldCIsCgkJCQk2OTQ6ICJXb3cgTWFsbCIsCgkJCQk2OTU6ICJJV09PVCIsCgkJCQk2OTY6ICLorrLnqbbllYbln44iLAoJCQkJNjk3OiAiWUEtTUFOIiwKCQkJCTY5ODogIua1t+S/neS/nemZqSIsCgkJCQk2OTk6ICJKdWljeSBDb3V0dXJlIiwKCQkJCTcwMDogIktlbmtvIiwKCQkJCTcwMTogIlRoZSBqZXdlbCBodXQiLAoJCQkJNzAyOiAiS0lLT+e+juWbveWumOe9kSIsCgkJCQk3MDM6ICJMYW5jZXIgU2tpbmNhcmUiLAoJCQkJNzA0OiAiTEVHTyBzaG9wIiwKCQkJCTcwNTogIk1vc3MgQnJvcyIsCgkJCQk3MDY6ICJMb3JkICYgVGF5bG9yIiwKCQkJCTcwNzogIlN0eWxlbmFuZGHkuK3mlofnvZEiLAoJCQkJNzA4OiAi5Lq65Y2r5pm6572RIiwKCQkJCTcwOTogIuaciemBk+e/u+ivkSIsCgkJCQk3MTA6ICJGaWx0aHkgRnJhZ3JhbmNlIiwKCQkJCTcxMTogIum6puefpee9kSIsCgkJCQk3MTI6ICJNYXRjaGVzRmFzaGlvbiIsCgkJCQk3MTM6ICLmnb7mnKzmuIUiLAoJCQkJNzE0OiAi56e75Yqo5ZWG6KGXIiwKCQkJCTcxNTogIk1pY3Jvc29mdCBTdG9yZSIsCgkJCQk3MTY6ICJNaW8gU2tpbmNhcmXkuK3mlofnq5kiLAoJCQkJNzE3OiAiTWlzcyBTZWxmcmlkZ2UiLAoJCQkJNzE4OiAiTW91bnRhaW4gR2VhciIsCgkJCQk3MTk6ICIzNjDlpb3oja8iLAoJCQkJNzIwOiAiTXkgQmFnIiwKCQkJCTcyMTogIk15cHJvdGVpbiIsCgkJCQk3MjI6ICLnvo7pqpHmmJPotK3llYbln44iLAoJCQkJNzIzOiAiTXl2aXRhbWlucyIsCgkJCQk3MjQ6ICJORVQtQS1QT1JURVLkuK3mlofnvZEiLAoJCQkJNzI1OiAiTmV3IEJhbGFuY2Xoi7Hlm73lrpjnvZEiLAoJCQkJNzI2OiAi5Y+u5b2T5b+r6I2vIiwKCQkJCTcyNzogIk5ldyBMb29rIiwKCQkJCTcyODogIuS4reWNjuS8muiuoee9keagoSIsCgkJCQk3Mjk6ICLlv4Xov4jlrpjnvZEiLAoJCQkJNzMwOiAi6ICQ5YWL6aaZ5riv5a6Y572RIiwKCQkJCTczMTogIuiAkOWFi+W3tOilv+WumOe9kSIsCgkJCQk3MzI6ICLmmKDlrqLnm7Tmkq0iLAoJCQkJNzMzOiAiTmV3IFlvcmsgJiBDb21wYW55IiwKCQkJCTczNDogIk9hc2lz6Iux5Zu95a6Y572RIiwKCQkJCTczNTogIk9yYml0eiIsCgkJCQk3MzY6ICJPcmNoaXJhIiwKCQkJCTczNzogIk9yaWdpbnPoi7Hlm73lrpjnvZEiLAoJCQkJNzM4OiAiUGV0U21hcnQiLAoJCQkJNzM5OiAi5ZCb6J6N6LS3IiwKCQkJCTc0MDogIuWTquaLjee9kSIsCgkJCQk3NDE6ICLmoLzlipvlrpjmlrnllYbln44iLAoJCQkJNzQyOiAiUHJvQmlrZUtpdCIsCgkJCQk3NDM6ICJRYXRhciBBaXJ3YXlz5Y2h5aGU5bCU6Iiq56m6IiwKCQkJCTc0NDogIlJhZGxleeiLseWbveWumOe9kSIsCgkJCQk3NDU6ICLlronogZTkv53pmakiLAoJCQkJNzQ2OiAiUmFscGggTGF1cmVuIiwKCQkJCTc0NzogIlJlYmVjY2EgTWlua29mZiIsCgkJCQk3NDg6ICLkvJjnsbPnvZEiLAoJCQkJNzQ5OiAiMjFDYWtlIiwKCQkJCTc1MDogIlJlbnRhbGNhciIsCgkJCQk3NTE6ICJEci4gUGllcnJlIFJpY2F1ZCIsCgkJCQk3NTI6ICJSb2NrcG9ydCIsCgkJCQk3NTM6ICJSdWVsYWxhIiwKCQkJCTc1NDogIjU25Lq65peF5ri4572RIiwKCQkJCTc1NTogIlNha3MgRmlmdGggQXZlbnVlIE9GRiA1VEgiLAoJCQkJNzU2OiAi5a6J57qz5aGU5ouJIiwKCQkJCTc1NzogIlNDMjQuY29tIiwKCQkJCTc1ODogIui9pumAn+mAkuenn+i9piIsCgkJCQk3NTk6ICJTSE9FUy5DT00iLAoJCQkJNzYwOiAiU3ByaW5nIiwKCQkJCTc2MTogIlNpbXBseSBTdXBwbGVtZW50cyIsCgkJCQk3NjI6ICLlrpzlkozotK3niakiLAoJCQkJNzYzOiAiRmFyZmV0Y2jkuK3mlofnvZEiLAoJCQkJNzY0OiAiU3NlbnNlIiwKCQkJCTc2NTogIlN0ZXZlIE1hZGRlbiIsCgkJCQk3NjY6ICJGcmVlIFBlb3BsZeS4reaWh+e9kSIsCgkJCQk3Njc6ICLpq5jmkJzmmJMiLAoJCQkJNzY4OiAiaU1vbW9rb+S4reaWh+e9kSIsCgkJCQk3Njk6ICLmt5josYYiLAoJCQkJNzcwOiAiTWljaGFlbCBLb3Jz5Lit5paH572RIiwKCQkJCTc3MTogIuS4ieS9s+i0reeJqSIsCgkJCQk3NzI6ICLogZTph5HmiYAiLAoJCQkJNzczOiAi5a6F6LGG572RIiwKCQkJCTc3NDogIue9keaYk+S6kSIsCgkJCQk3NzU6ICLlvrflm73oja/miL9hcG8uY29t5Lit5paH572RIiwKCQkJCTc3NjogIuivu+enkiIsCgkJCQk3Nzc6ICLlpb3kuqvllYbln44iLAoJCQkJNzc4OiAi6KW/54uX5YWo55CD6LStIiwKCQkJCTc3OTogIueOqeWTque9kSIsCgkJCQk3ODA6ICLntKvpqazotKLooYwiLAoJCQkJNzgxOiAi6YeR54yr6ZO254yrIiwKCQkJCTc4MjogIui3qOWig+e9kSIsCgkJCQk3ODM6ICJNaWxsZW5uaXVtJkNvcHRob3JuZSBIb3RlbHPkuK3mlofnvZEiLAoJCQkJNzg0OiAiUmVlYm9ueiIsCgkJCQk3ODU6ICLolofnvo7pk7oiLAoJCQkJNzg2OiAi5LqU5rSy5Lya5rW36LStIiwKCQkJCTc4NzogIuaDoOWutuaciSIsCgkJCQk3ODg6ICJNZWxpIE1lbG/kuK3mlofnvZEiLAoJCQkJNzg5OiAi5bCP6LSi6L+3IiwKCQkJCTc5MDogIkFzaGZvcmTkuK3mlofnvZEiLAoJCQkJNzkxOiAi6Z+p5Zu9Q0pPTm1hcnTkuK3mlofnvZEiLAoJCQkJNzkyOiAi55uK6ZKx572RIiwKCQkJCTc5MzogIlRIRSBHUkFOROS4reaWh+WFjeeojuW6lyIsCgkJCQk3OTQ6ICLmrKfov6rlip7lhawiLAoJCQkJNzk1OiAi5aSp6Jm5572R5LiK5ZWG5Z+OIiwKCQkJCTc5NjogIuS7peWyreWBpeW6t+WfjiIsCgkJCQk3OTc6ICLlrqLot6/ml4XooYwiLAoJCQkJMTAwMTogIuS6mumprOmAiuesrOS4ieaWuSIsCgkJCQkxMDAzOiAi5Lqs5Lic5omL5py656uvIiwKCQkJCTEwMTU6ICLmmJPov4XljJfkuqwiLAoJCQkJMTAyNTogIuiLj+WugeWMl+S6rCIsCgkJCQkxMDMxOiAi5LiA5Y+35bqX5LiK5rW3IiwKCQkJCTEwMzI6ICLkuK3nsq7miJHkubDnvZHljY7kuJwiLAoJCQkJMTEyNDogIuS4uuS4uue9keWMl+S6rCIsCgkJCQkxMTI2OiAi6aG65Liw5LiK5rW3IiwKCQkJCTIwMDM6ICLkuqzkuJzlvq7kv6Hnq68iLAoJCQkJMjAxNTogIuaYk+i/heW5v+S4nCIsCgkJCQkyMDI1OiAi6IuP5a6B5bm/5beeIiwKCQkJCTIwMzE6ICLkuIDlj7flupflub/kuJwiLAoJCQkJMjAzMjogIuS4reeyruaIkeS5sOWNjuWNlyIsCgkJCQkyMTI2OiAi6aG65Liw5bm/5beeIiwKCQkJCTMwMTU6ICLmmJPov4XmuZbljJciLAoJCQkJMzAyNTogIuiLj+WugeaIkOmDvSIsCgkJCQkzMDMxOiAi5LiA5Y+35bqX5rmW5YyXIiwKCQkJCTQwMzE6ICLkuIDlj7flupflm5vlt50iCgkJCX07CgkJZS5leHBvcnRzLmdldFNpdGVJZCA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIGFbZV0KCQl9LCBlLmV4cG9ydHMuZ2V0U2l0ZU5hbWUgPSBmdW5jdGlvbihlLCB0KSB7CgkJCXJldHVybiB0IHx8ICh0ID0gYVtlXSksIG9bdF0KCQl9OwoJCXZhciByID0gZnVuY3Rpb24oZSwgdCkgewoJCQl2YXIgaSA9IG4oNjYpLAoJCQkJbyA9IC0xOwoJCQlpZiAoKG8gPSBhW2VdKSAmJiBpW29dKSB7CgkJCQl2YXIgciA9IGlbb10oZG9jdW1lbnQpOwoJCQkJciAmJiAoci53YWl0ID8gc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQlyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9jdW1lbnQuX2xpbmtzKSwgdChvLCByKQoJCQkJfSwgNTUwMCkgOiB0KG8sIHIpKQoJCQl9CgkJfTsKCQllLmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKGUpIHsKCQkJZm9yICh2YXIgdCBpbiBpKQoJCQkJaWYgKGRvY3VtZW50LmxvY2F0aW9uLmhvc3RuYW1lLm1hdGNoKHQpKSB7CgkJCQkJcihpW3RdLCBlKTsKCQkJCQlicmVhawoJCQkJfQoJCX0KCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJInVzZSBzdHJpY3QiOwoJCXZhciBuID0gewoJCQl0aW1lb3V0OiAxZTMsCgkJCXByaWNlRm9ybWF0dGVyOiBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQl0ID0gdCB8fCAiLiIsIG4gPSBuIHx8ICIsIiwgZSA9ICIiICsgZTsKCQkJCXZhciBpID0gZS5yZXBsYWNlKG4sICIiKS5yZXBsYWNlKHQsICIuIik7CgkJCQlpZiAoaSA9IGkubWF0Y2goL1swLTkuXSsvKSkgdHJ5IHsKCQkJCQlyZXR1cm4gcGFyc2VGbG9hdChpKQoJCQkJfSBjYXRjaCAoYSkgewoJCQkJCXJldHVybiAtMQoJCQkJfQoJCQl9LAoJCQl0ZW1wbGF0ZTogZnVuY3Rpb24oZSwgdCwgaSkgewoJCQkJZm9yICh2YXIgYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZSksIG8gPSBbXSwgciA9IDA7IHIgPCBhLmxlbmd0aDsgKytyKSB0cnkgewoJCQkJCXZhciBzID0gYVtyXS5xdWVyeVNlbGVjdG9yKHQpLmhyZWYsCgkJCQkJCWwgPSBhW3JdLnF1ZXJ5U2VsZWN0b3IoaSkudGV4dENvbnRlbnQudHJpbSgpOwoJCQkJCW8ucHVzaCh7CgkJCQkJCXVybDogcywKCQkJCQkJcHJpY2U6IG4ucHJpY2VGb3JtYXR0ZXIobCksCgkJCQkJCWNyYzMyOiAiIgoJCQkJCX0pCgkJCQl9IGNhdGNoIChjKSB7CgkJCQkJY29udGludWUKCQkJCX0KCQkJCXJldHVybiBvCgkJCX0KCQl9OwoJCW5bMV0gPSBmdW5jdGlvbihlKSB7CgkJCWZvciAodmFyIHQgPSBbXSwgaSA9IGUucXVlcnlTZWxlY3RvckFsbCgiLnMtcmVzdWx0LWl0ZW0iKSwgYSA9IDA7IGEgPCBpLmxlbmd0aDsgKythKSB0cnkgewoJCQkJZm9yICh2YXIgbyA9IGlbYV0ucXVlcnlTZWxlY3RvcigiLnMtYWNjZXNzLWltYWdlIik7ICFvLnBhcmVudE5vZGUuaHJlZiAmJiBvLnBhcmVudE5vZGUgIT0gZS5ib2R5OykgbyA9IG8ucGFyZW50Tm9kZTsKCQkJCWlmIChvLnBhcmVudE5vZGUgPT0gZS5ib2R5KSBjb250aW51ZTsKCQkJCXZhciByID0gby5wYXJlbnROb2RlLmhyZWYsCgkJCQkJcyA9IGlbYV0ucXVlcnlTZWxlY3RvcigiZGl2Pi5hLXNwYWNpbmctbWluaT4uYS1zcGFjaW5nLW5vbmU+YT5zcGFuIik7CgkJCQlzIHx8IChzID0gaVthXS5xdWVyeVNlbGVjdG9yKCJzcGFuLmEtY29sb3ItcHJpY2UiKSksIHQucHVzaCh7CgkJCQkJdXJsOiByLAoJCQkJCXByaWNlOiBuLnByaWNlRm9ybWF0dGVyKHMudGV4dENvbnRlbnQpLAoJCQkJCWNyYzMyOiAiIgoJCQkJfSkKCQkJfSBjYXRjaCAobCkgewoJCQkJY29udGludWUKCQkJfQoJCQlyZXR1cm4gdAoJCX0sIG5bMl0gPSBmdW5jdGlvbihlKSB7CgkJCXZhciB0ID0gZS5xdWVyeVNlbGVjdG9yQWxsKCIjc2VhcmNoX25hdHVyZV9yZyBsaSIpOwoJCQl0Lmxlbmd0aCB8fCAodCA9IGUucXVlcnlTZWxlY3RvckFsbCgiI2NvbnRlbnQgLnNob3BfYm94IikpLCB0Lmxlbmd0aCB8fCAodCA9IGUucXVlcnlTZWxlY3RvckFsbCgiLnNob3BsaXN0PnVsPmxpIikpOwoJCQlmb3IgKHZhciBpID0gW10sIGEgPSAwOyBhIDwgdC5sZW5ndGg7ICsrYSkgdHJ5IHsKCQkJCXZhciBvID0gdFthXS5xdWVyeVNlbGVjdG9yKCJhLnBpYyIpLmhyZWYsCgkJCQkJciA9IHRbYV0ucXVlcnlTZWxlY3RvcigiLnByaWNlPnNwYW4iKS5jaGlsZE5vZGVzWzBdLnRleHRDb250ZW50OwoJCQkJaS5wdXNoKHsKCQkJCQl1cmw6IG8sCgkJCQkJcHJpY2U6IG4ucHJpY2VGb3JtYXR0ZXIociksCgkJCQkJY3JjMzI6ICIiCgkJCQl9KQoJCQl9IGNhdGNoIChzKSB7CgkJCQljb250aW51ZQoJCQl9CgkJCXJldHVybiBpCgkJfSwgblszXSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5tLWxpc3QgLmdsLXdhcnA+bGkiLCAiLnAtaW1nPmEiLCAiLnAtcHJpY2UgZW0raSIpCgkJfSwgbls2XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5pdGVtLWJsb2NrIiwgImEuY3RyLXRyYWNrIiwgImEucHJpY2UiKQoJCX0sIG5bN10gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIubWFpbiAucHJvbGlzdD5saSIsICJhIiwgInNwYW4ucHJpY2UiKQoJCX0sIG5bMTBdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLml0ZW0iLCAiYS50aG1iIiwgIi5wcmM+c3Ryb25nIikKCQl9LCBuWzEyXSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIiNzZWFyY2hSZXN1bHRMaXN0RGl2IGxpIiwgIi5wcm9QaWM+YSIsICIucHJvUHJpY2UiKQoJCX0sIG5bMTNdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiI3Byb2R1Y3REaXZHcm91cD4ucHJ1d3JhcCIsICJhIiwgInNwYW4ucHJpY2UiKQoJCX0sIG5bMTRdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLnByb2R1Y3RfbGlzdD5kbCIsICJkdD5hIiwgImkucHJpY2UiKQoJCX0sIG5bMTZdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLnNtTGlzdD51bD5saSIsICIucHJvMTU1IGEiLCAic3Bhbi5vZmYiKQoJCX0sIG5bMTddID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLmNoYXBMaXN0IGRsIiwgImEiLCAic3Bhbj5mb250IikKCQl9LCBuWzE4XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIiNnb29kc1BhbmVsIGxpW2NsYXNzXSIsICJhIiwgIi5jbGFzc2lmeV9wcmljZT5zcGFuIikKCQl9LCBuWzE5XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIiN2YW5jbHByb2R1Y3RzPnVsPmxpIiwgIi5waWMgYSIsICIuU3ByaWNlIikKCQl9LCBuWzIxXSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5nbC1pdGVtIiwgIi5nbC1pbWc+YSIsICIub2twcmljZSIpCgkJfSwgblsyMl0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIucHJvX2xpc3QgdWwgbGkiLCAiLnByb19pbWc+YSIsICIucHJvX3ByaWNlIikKCQl9LCBuWzI0XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIiNsaXN0PnVsPmxpIiwgIi5waWM+YSIsICIucmVhbC1wcmljZT5lbSIpCgkJfSwgblsyNV0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCJsaS5wcm9kdWN0IiwgIi5yZXMtb3B0IGE6Zmlyc3QtY2hpbGQiLCAiLnByaWNlIikKCQl9LCBuWzI3XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5zaG93cyIsICJhIiwgIi5uZXciKQoJCX0sIG5bMjhdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiI3Byb2R1Y3QtYm94PmxpIiwgImEuaXRlbS1saW5rIiwgIi5wcmljZSIpCgkJfSwgblszMV0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIjaXRlbVNlYXJjaExpc3QgLm1vZF9zZWFyY2hfcHJvIiwgIi5wcm9JbWcgYSIsICIucHJvUHJpY2UgLm51bSIpCgkJfSwgblszM10gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIucHJvcGljTGlzdCAucHJvZHVjdHMiLCAiLnBpYz5hIiwgIi5kaXNQcmljZSIpCgkJfSwgblszNF0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIuY29udGVudCB1bCBsaSIsICJhIiwgInN0cm9uZy5wcmljZSIpCgkJfSwgblszNV0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIuaXRlbSIsICIucGljPmEiLCAic3Bhbi5zaG93cHJpY2UiKQoJCX0sIG5bMzZdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiI2pzLWdvb2RzLWxpc3Q+dWw+bGkiLCAiYSIsICJzdHJvbmcucmVkIikKCQl9LCBuWzM5XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIiNwcm9hY3RpdmU+bGkiLCAiLnByby1pbWcgYSIsICIucHJpY2UgYi5mb250WUhlaSIpCgkJfSwgbls0MF0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIuTF9ib3hsaXN0IiwgImR0PmEiLCAiLkxfcm1iX3h1aiIpCgkJfSwgbls0MV0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIuc19wcm9fbGlzdCBsaSIsICIucGljPmEiLCAiLnByaWNlIikKCQl9LCBuWzQyXSA9IGZ1bmN0aW9uKGUpIHsKCQkJZm9yICh2YXIgdCA9IGUucXVlcnlTZWxlY3RvckFsbCgiI21haW5fdGFibGU+dGJvZHk+dHIuaW1nLCNtYWluX3RhYmxlPnRib2R5PnRyLnByaWNlIiksIGkgPSBbXSwgYSA9IDA7IGEgPCB0Lmxlbmd0aDsgYSArPSAyKSB0cnkgewoJCQkJZm9yICh2YXIgbyA9IHRbYV0ucXVlcnlTZWxlY3RvckFsbCgidGQiKSwgciA9IHRbYSArIDFdLnF1ZXJ5U2VsZWN0b3JBbGwoInRkIiksIHMgPSAwOyBzIDwgby5sZW5ndGg7ICsrcykgewoJCQkJCXZhciBsID0gb1tzXS5xdWVyeVNlbGVjdG9yKCJhIikuaHJlZiwKCQkJCQkJYyA9IHJbc10ucXVlcnlTZWxlY3Rvcigic3Bhbi5wcmljZSIpLnRleHRDb250ZW50OwoJCQkJCWkucHVzaCh7CgkJCQkJCXVybDogbCwKCQkJCQkJcHJpY2U6IG4ucHJpY2VGb3JtYXR0ZXIoYyksCgkJCQkJCWNyYzMyOiAiIgoJCQkJCX0pCgkJCQl9CgkJCX0gY2F0Y2ggKGQpIHsKCQkJCWNvbnRpbnVlCgkJCX0KCQkJcmV0dXJuIGkKCQl9LCBuWzQzXSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5jcGxpc3Q+ZGwiLCAiZHQgYSIsICIucHJvLXByaWNlPnNwYW4+c3BhbiIpCgkJfSwgbls0NV0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIjZ2FsbGVyeV9zaG93PnVsPmxpIiwgIi5hcnJpdmFscy1waWMgYSIsICJzcGFuLnByaWNlIikKCQl9LCBuWzUxXSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5yZXN1bHQ+dWw+bGkiLCAiYS5waWNhIiwgIi5wcmljZS1pbmZvIHN0cm9uZyIpCgkJfSwgbls1Ml0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCJ1bC50THN0MiBsaSIsICJhLnRJbWciLCAic3Bhbi50UHJjIikKCQl9LCBuWzU0XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5nb29kc19saXN0IiwgIi5pbWc+YSIsICdzcGFuW2RhdGF0eXBlPSJwcmljZSJdJykKCQl9LCBuWzU5XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5saXN0X3JfbGlzdCIsICJoMSBhIiwgIi5mLVByaWNlOmxhc3QtY2hpbGQiKQoJCX0sIG5bNjBdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLnNlYXJjaF9yZXN1bHQgdGFibGUiLCAiLnJlc3VsdF9uYW1lIGEiLCAiLmJvb2tfZGlzIGIiKQoJCX0sIG5bNjFdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLmJvb2tDb250ZW50IiwgIi50aXRsZWluIiwgInNwYW4ucmVkMTIiKQoJCX0sIG5bNjJdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiI2xpc3Q+bGkiLCAiLmltZyBhIiwgIi5wcmljZS1uIikKCQl9LCBuWzYzXSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIiNKbGlzdD5saSIsICIudWlfcGltZz5hIiwgIi51aV9wcHJpY2VfZT5lbSIpCgkJfSwgbls2Nl0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIucC1saXN0SW5mbyIsICIucC1saXN0SW1nQmlnIGEiLCAiLnAtbGlzdFByaWNlIHN0cm9uZyIpCgkJfSwgbls3Ml0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIuc2xfbGlzdF91bD5saSIsICIuZ29vZHMtcGljPmEiLCAiLnNsX3ByaWNlMT5zcGFuIikKCQl9LCBuWzczXSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5jYXRlZ29yeVByb2R1Y3RJdGVtIiwgIi5wcm9kdWN0LWltYWdlPmEiLCAiLnNwZWNpYWwtcHJpY2UgLnByaWNlPi5wcmljZSIpCgkJfSwgbls3NV0gPSBmdW5jdGlvbihlKSB7CgkJCWZvciAodmFyIHQgPSBlLnF1ZXJ5U2VsZWN0b3JBbGwoIi5zdGJsb2NrX2JvZHk+ZGw+ZGQiKSwgaSA9IFtdLCBhID0gMDsgYSA8IHQubGVuZ3RoOyArK2EpIHRyeSB7CgkJCQl2YXIgbyA9IHRbYV0ucXVlcnlTZWxlY3RvcigiYSIpLmhyZWYsCgkJCQkJciA9IHRbYV0ucXVlcnlTZWxlY3RvcigiLmNvYzJhNjdkIikuY2hpbGROb2Rlc1swXS50ZXh0Q29udGVudDsKCQkJCWkucHVzaCh7CgkJCQkJdXJsOiBvLAoJCQkJCXByaWNlOiBuLnByaWNlRm9ybWF0dGVyKHIpLAoJCQkJCWNyYzMyOiAiIgoJCQkJfSkKCQkJfSBjYXRjaCAocykgewoJCQkJY29udGludWUKCQkJfQoJCQlyZXR1cm4gaQoJCX0sIG5bODRdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLnJnX3NsX2xpc3Q+dWw+bGkiLCAiLmxpc3QxIiwgIi5saXN0Mz5zcGFuIikKCQl9LCBuWzg1XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5nb29kc19vbmUiLCAiLmNvbV9saW5rIiwgIi54al9saXN0X3Byb190ZXh0Mj4ueGpfbGlzdF9wcm9fdGV4dDIiKQoJCX0sIG5bODZdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLnByb2R1Y3RzX3dyYXA+dWw+bGkiLCAiLnNfbF9waWM+YSIsICIuc2VhcmNoX2xpc3RfcHJpY2U+c3BhbiIpCgkJfSwgbls5M10gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIjcHJvTGlzdD5saSIsICJhIiwgIi5wcmljZV9zYz5lbT5pIikKCQl9LCBuWzk0XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQllLl9saW5rcyA9IG4udGVtcGxhdGUoIiNpdGVtU2VhcmNoTGlzdD5saSIsICI6bm90KC5ub25lKSBhIiwgIjpub3QoLm5vbmUpIC5wcmljZT5zcGFuOmZpcnN0LWNoaWxkIikKCQkJfSwgbi50aW1lb3V0KSwgewoJCQkJd2FpdDogITAKCQkJfQoJCX0sIG5bOTddID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLnByby1jb24+bGkiLCAiYS5wcm8tY2hlY2siLCAiLnByby1ib3R4dCBzcGFuIikKCQl9LCBuWzk4XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQllLl9saW5rcyA9IG4udGVtcGxhdGUoIi5nb29kc19saXN0PmxpIiwgImEiLCAnc3BhbltkYXRhLXR5cGU9InByaWNlIl0nKQoJCQl9LCBuLnRpbWVvdXQpLCB7CgkJCQl3YWl0OiAhMAoJCQl9CgkJfSwgbls5OV0gPSBmdW5jdGlvbihlKSB7CgkJCWZvciAodmFyIHQgPSBlLnF1ZXJ5U2VsZWN0b3JBbGwoIi5zbmFja193cmFwPnVsPmxpIiksIGkgPSBbXSwgYSA9IDA7IGEgPCB0Lmxlbmd0aDsgKythKSB0cnkgewoJCQkJdmFyIG8gPSB0W2FdLnF1ZXJ5U2VsZWN0b3IoImEiKS5ocmVmLAoJCQkJCXIgPSB0W2FdLnF1ZXJ5U2VsZWN0b3IoIi5wcmljZSIpLmNoaWxkTm9kZXNbMF0udGV4dENvbnRlbnQ7CgkJCQlpLnB1c2goewoJCQkJCXVybDogbywKCQkJCQlwcmljZTogbi5wcmljZUZvcm1hdHRlcihyKSwKCQkJCQljcmMzMjogIiIKCQkJCX0pCgkJCX0gY2F0Y2ggKHMpIHsKCQkJCWNvbnRpbnVlCgkJCX0KCQkJcmV0dXJuIGkKCQl9LCBuWzEwMF0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIubWJzaG9wX2xpc3RQZENvbiIsICJhIiwgIi5tYnNob3BfbGlzdFBkVGV4dD5iIikKCQl9LCBuWzEwMV0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIucGljbGlzdD5saSIsICJhIiwgIi5wcmljZSBzdHJvbmciKQoJCX0sIG5bMTAyXSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5nbl9tX2xpc3RfYSIsICJhIiwgIi5nbl9tX2xpc3RfcHJpY2UgLmI+c3BhbiIpCgkJfSwgblsxMDNdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLnByb0xpc3RTZWFyY2g+dWw+bGkiLCAiYSIsICIucHJpY2UiKQoJCX0sIG5bMTA4XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5tYWluX3dyYXA+Lm1pbl9pbiIsICIucHJvZHVjdEltZy13cmFwIGEiLCAiLnByb2R1Y3RQcmljZT5lbT5zdHJvbmciKQoJCX0sIG5bMTA5XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5yZXN1bHRfbGlzdF9jb250YWluZXI+dWw+bGkiLCAiLnRodW1iX3BpY3R1cmUgYSIsICIucHJpY2VfaT5lbSIpCgkJfSwgblsxMTBdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLmJvb2tzLWxpc3QiLCAiYSIsICIubGw+YiIpCgkJfSwgblsxMTVdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiI3JfbGlzdCAubGlib3giLCAiLmdfc2ltZz5hIiwgIi5nX21wcmljZSBmb250IikKCQl9LCBuWzEyMF0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIuR29vZHNTZWFyY2hXcmFwPnRhYmxlPnRib2R5PnRyPnRkIiwgIi5nb29kcGljPmEiLCAiLnByaWNlMSIpCgkJfSwgblsxMjJdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLnByb2xpc3Q+bGkiLCAiLnByb2JveD5hIiwgIi5pbmZvPmIiKQoJCX0sIG5bMTI0XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5saXN0X3BpYz4uaXRlbSIsICIuZ29vZHMtcGljIGEiLCAiLnNhbGUtcHJpY2UiKQoJCX0sIG5bMTI1XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIiNzZWFyY2hQTGlzdD51bD5saSIsICIucEltZyBhIiwgIi5wcmljZSIpCgkJfSwgblsxMjZdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLmxpc3QtYWxsPmxpIiwgIi5waWMgYSIsICIucHJpY2Ugc3Ryb25nIikKCQl9LCBuWzEyN10gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIjQ29udGVudD5kbCIsICIucGljIGEiLCAicC5wcmljZSIpCgkJfSwgblsxMjhdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiI2xpc3RfZ29vZHNsaXN0PmxpIiwgIi5wcm9faW1nPmEiLCAiLnByb19wcmljZT5iIikKCQl9LCBuWzEyOV0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIjSl9zZWFyY2hDYXRMaXN0Pi5nb29kcy1saXN0LWl0ZW0iLCAiLmdvb2RzLWltYWdlPmEiLCAiLnByaWNlIikKCQl9LCBuWzEzNF0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIucHJvLWxpc3Q+dWw+bGkiLCAiYSIsICIucC1wcmljZT5iIikKCQl9LCBuWzEzNV0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIjcHJvZHVjdExpc3Q+bGkiLCAiLnNlYXJjaF9wcm9faW1nIiwgIi5zZWFyY2hfcHJvX3ByaWNlIikKCQl9LCBuWzEzOF0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIuZ29vZHNfdGFibGVfbGlzdD51bD5saSIsICIuZ190X2xpc3RfbT5hIiwgIi5nb29kc190YWJsZV9saXN0IC5mbCIpCgkJfSwgblsxNDBdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiI2JmZF9zaG93X2Z1PmxpIiwgIi5nb29kc19pbWcgYSIsICIucHJpY2VfZGF5IikKCQl9LCBuWzE0MV0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIubGlzdHNlYXJjaC1vbmUiLCAiLmxpc3RzZWFyY2gtenRpbWcgYSIsICIubGlzdHNlYXJjaC1wcmljZT5zcGFuIikKCQl9LCBuWzE0Ml0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIuc2hvcF9saXN0X2l0ZW0+dWw+bGkiLCAiLnBfaSBhIiwgIi5wX20iKQoJCX0sIG5bMTQ2XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIiNnYWxsZXJ5X3Nob3cgdWw+bGkiLCAiLmdvb2RzLXBpYyBhIiwgImlucy5wcmljZSIpCgkJfSwgblsxNDddID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLmluZm9TaG9wPmxpIiwgImRpdj5hIiwgInNwYW4udHJhY2siKQoJCX0sIG5bMTUzXSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIiNzZWFyY2hfZ29vZHNfbGlzdD51bD5saSIsICJkZDpub3QoW2NsYXNzXSk+YSIsICJkdCAuc19wcmljZSIpCgkJfSwgblsxNTRdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiI3RpbGUgbGkiLCAiLmJveENvbnQ+YSIsICIucHJpY2UiKQoJCX0sIG5bMTU1XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5wcm9saXN0LWJveD51bD5saSIsICJhIiwgIi5zdHJvbmctcHJpY2UiKQoJCX0sIG5bMTU2XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5jb21tb2RpdHktbGlzdD5kbCIsICJhIiwgIi5kbF9wcmljZT5zcGFuIikKCQl9LCBuWzE1N10gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIucHJvX2xpc3RfdWw+bGkiLCAiYSIsICIuc2FsZVByaWNlIikKCQl9LCBuWzE1OF0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIuaW5fbWFzYTpub3QoW2lkXSkgdWw+bGkiLCAiLmluX21hc2FfdXAgYSIsICIuaW5fcHJpY2U+ZW0+c3BhbjpudGgtb2YtdHlwZSgyKSIpCgkJfSwgblsxNjRdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLnVsbGlzdGNvbnQ+bGkiLCAiYSIsICJzdHJvbmciKQoJCX0sIG5bMTY3XSA9IGZ1bmN0aW9uKGUpIHsKCQkJZm9yICh2YXIgdCA9IGUucXVlcnlTZWxlY3RvckFsbCgiLmdvb2RzLWxpc3Q+ZGl2IiksIGkgPSBbXSwgYSA9IDA7IGEgPCB0Lmxlbmd0aDsgKythKSB0cnkgewoJCQkJdmFyIG8gPSB0W2FdLnF1ZXJ5U2VsZWN0b3IoImEiKS5ocmVmLAoJCQkJCXIgPSB0W2FdLnF1ZXJ5U2VsZWN0b3IoIi5wcmljZSIpLmNoaWxkTm9kZXNbMF0udGV4dENvbnRlbnQ7CgkJCQlpLnB1c2goewoJCQkJCXVybDogbywKCQkJCQlwcmljZTogbi5wcmljZUZvcm1hdHRlcihyKSwKCQkJCQljcmMzMjogIiIKCQkJCX0pCgkJCX0gY2F0Y2ggKHMpIHsKCQkJCWNvbnRpbnVlCgkJCX0KCQkJcmV0dXJuIGkKCQl9LCBuWzE2OF0gPSBmdW5jdGlvbihlKSB7CgkJCWZvciAodmFyIHQgPSBlLnF1ZXJ5U2VsZWN0b3JBbGwoIi5yZXN1bHRfbGlzdD5saSIpLCBpID0gW10sIGEgPSAwOyBhIDwgdC5sZW5ndGg7ICsrYSkgdHJ5IHsKCQkJCXZhciBvID0gdFthXS5xdWVyeVNlbGVjdG9yKCIucHJvX2ltZyBhIikuZ2V0QXR0cmlidXRlKCJkYXRhLXVybCIpLAoJCQkJCXIgPSB0W2FdLnF1ZXJ5U2VsZWN0b3IoIi5wcm9fcHJpY2U+c3Bhbi5yZWQiKS50ZXh0Q29udGVudC50cmltKCk7CgkJCQlpLnB1c2goewoJCQkJCXVybDogbywKCQkJCQlwcmljZTogbi5wcmljZUZvcm1hdHRlcihyKSwKCQkJCQljcmMzMjogIiIKCQkJCX0pCgkJCX0gY2F0Y2ggKHMpIHsKCQkJCWNvbnRpbnVlCgkJCX0KCQl9LCBuWzE3NF0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJZS5fbGlua3MgPSBuLnRlbXBsYXRlKCIucHJvZHVjdF9pdGVtIiwgIi5wX2ltZyBhIiwgIi5wcmljZT5zdHJvbmciKQoJCQl9LCBuLnRpbWVvdXQpLCB7CgkJCQl3YWl0OiAhMAoJCQl9CgkJfSwgblsxNzhdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLmYtbGlzdCAubGVmdHBhcnQ+dWw+bGkiLCAiYSIsICIucy1pbmZvPi5zLXVuaXQiKQoJCX0sIG5bMTgwXSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi51LW0tZ29vZHM+dWw+bGkiLCAiLnAtaW1nLkpfcF9pbWcgYSIsICIuSl9ub3dfcHJpY2UiKQoJCX0sIG5bMTgyXSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi50ZWFfcHJvZHVjdHMgLnByb2R1Y3RzX2JveCIsICIucHJvX2ltZz5zcGFuPmEiLCAiLnpwX3ByaWNlPnNwYW4iKQoJCX0sIG5bMTg0XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5nb29kcy1jb250YWluZXI+ZGl2Lmdvb2QtaW5mbyIsICdhW2hyZWYqPSJpdGVtIl0nLCAiLnByaWNlPnNwYW46bGFzdC1jaGlsZCIpCgkJfSwgblsxODhdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLmxpc3RUYWJsZT5saSIsICJhIiwgIi5nb29kcy1wcmljZSIpCgkJfSwgblsxOTRdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiI0pfZ29vZHNMaXN0PnVsPmxpIiwgImEiLCAiLnAtcHJpY2U+c3Ryb25nPmkiKQoJCX0sIG5bMTk1XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5MY29uLmNvbnRlbnQ+ZGl2LmJsb2NrIiwgImEiLCAnc3BhbltpZF49InNhbGVfcHJpY2UiXScpCgkJfSwgblsxOTZdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCWUuX2xpbmtzID0gbi50ZW1wbGF0ZSgiLmdvb2RzTGlzdEJsb2NrPnVsPmxpIiwgIi5pbWc+YSIsICIudWxlUHJpY2U+c3Ryb25nIikKCQkJfSwgbi50aW1lb3V0KSwgewoJCQkJd2FpdDogITAKCQkJfQoJCX0sIG5bMTk3XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5pdGVtTGlzdD5kaXYucHJvZHVjdCIsICJhIiwgJ2VtW25hbWU9InByaWNlIl0nKQoJCX0sIG5bMjAxXSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5saXN0LWdvb2RzOmZpcnN0LWNoaWxkPmxpIiwgImEiLCAiLkpTX2FzeW5jX3ByaWNlIikKCQl9LCBuWzIxMF0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIjdWxfY29udGVudD5saSIsICIubGlzdF9nb29kX2ltZz5hIiwgIi5saXN0X2dvb2RfcHJpY2VfbmV3IikKCQl9LCBuWzIxM10gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIuY2F0ZV9zZWFyY2hfY29udGVudCAuc2VsSXRlbSIsICJhIiwgIi5ocHJpY2UucHJpY2UiKQoJCX0sIG5bMjE3XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5wcm9kdWN0X2xpc3Q+bGkiLCAiYSIsICJkaXY+YiIpCgkJfSwgblsyMThdID0gZnVuY3Rpb24oZSkgewoJCQlmb3IgKHZhciB0ID0gZS5xdWVyeVNlbGVjdG9yQWxsKCIjdHZfbGlzdD51bD5saSIpLCBpID0gW10sIGEgPSAwOyBhIDwgdC5sZW5ndGg7ICsrYSkgdHJ5IHsKCQkJCXZhciBvID0gdFthXS5xdWVyeVNlbGVjdG9yKCJhIikuaHJlZi5yZXBsYWNlKCJnZXQiLCAiZ29vZHNEZXRhaWxCdXkiKSwKCQkJCQlyID0gdFthXS5xdWVyeVNlbGVjdG9yKCIucHJvZHVjdF9zaG93X3JpZ2h0X3ByaWNlIikudGV4dENvbnRlbnQ7CgkJCQlpLnB1c2goewoJCQkJCXVybDogbywKCQkJCQlwcmljZTogbi5wcmljZUZvcm1hdHRlcihyKSwKCQkJCQljcmMzMjogIiIKCQkJCX0pCgkJCX0gY2F0Y2ggKHMpIHsKCQkJCWNvbnRpbnVlCgkJCX0KCQkJcmV0dXJuIGkKCQl9LCBuWzIyMF0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIucHJvZHVjdFBpYyIsICJhLnByb1BpYyIsICIucHJvZHVjdFByaWNlIikKCQl9LCBuWzIyMl0gPSBmdW5jdGlvbihlKSB7CgkJCWZvciAodmFyIHQgPSBlLnF1ZXJ5U2VsZWN0b3JBbGwoIi5nb29kc0l0ZW0+bGkiKSwgaSA9IFtdLCBhID0gMDsgYSA8IHQubGVuZ3RoOyArK2EpIHRyeSB7CgkJCQl2YXIgbyA9IHRbYV0ucXVlcnlTZWxlY3RvcigiYSIpLmhyZWYsCgkJCQkJciA9IHRbYV0ucXVlcnlTZWxlY3RvcigiLnByaWNlIikuY2hpbGROb2Rlc1swXS50ZXh0Q29udGVudDsKCQkJCWkucHVzaCh7CgkJCQkJdXJsOiBvLAoJCQkJCXByaWNlOiBuLnByaWNlRm9ybWF0dGVyKHIpLAoJCQkJCWNyYzMyOiAiIgoJCQkJfSkKCQkJfSBjYXRjaCAocykgewoJCQkJY29udGludWUKCQkJfQoJCQlyZXR1cm4gaQoJCX0sIG5bMjIzXSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIiNyZXN1bHQ+bGkiLCAiYSIsICIuY3VyIikKCQl9LCBuWzIyNF0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIjcHJvZHVjdC1saXN0ID5saSIsICJhLnByb2R1Y3QtaW1nIiwgIi5wcmljZSIpCgkJfSwgblsyMjVdID0gZnVuY3Rpb24oZSkgewoJCQlpZiAoZS5xdWVyeVNlbGVjdG9yQWxsKCIuc3BlY2lhbC11bCIpLmxlbmd0aCkgcmV0dXJuIG4udGVtcGxhdGUoIi5zcGVjaWFsLXVsPmxpIiwgImEiLCAiLnMtcHJvZHVjdC1zYWxlLXByaWNlIik7CgkJCWZvciAodmFyIHQgPSBlLnF1ZXJ5U2VsZWN0b3JBbGwoIi5wcm9kLWxpc3QucHJvZC1jb2xzMy1saXN0OmZpcnN0LWNoaWxkPmxpIiksIGkgPSBbXSwgYSA9IDA7IGEgPCB0Lmxlbmd0aDsgKythKSB0cnkgewoJCQkJdmFyIG8gPSB0W2FdLnF1ZXJ5U2VsZWN0b3IoImEiKS5ocmVmLAoJCQkJCXIgPSB0W2FdLnF1ZXJ5U2VsZWN0b3IoIi5wcmljZSIpLmNoaWxkTm9kZXNbMF0udGV4dENvbnRlbnQ7CgkJCQlpLnB1c2goewoJCQkJCXVybDogbywKCQkJCQlwcmljZTogbi5wcmljZUZvcm1hdHRlcihyKSwKCQkJCQljcmMzMjogIiIKCQkJCX0pCgkJCX0gY2F0Y2ggKHMpIHsKCQkJCWNvbnRpbnVlCgkJCX0KCQkJcmV0dXJuIGkKCQl9LCBuWzIyNl0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIucHJvbGlzdC5saXN0aG92ZXI+bGkiLCAiLmltZyBhIiwgIi5wcmljZS5wcmljZTE2IikKCQl9LCBuWzIyN10gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIucHJvZHVjdExpc3QtbGlzdC11bD5saSIsICIucC1pbWcgYSIsICIucHJpY2U+c3Ryb25nIikKCQl9LCBuWzIyOF0gPSBuWzFdLCBuWzIyOV0gPSBuWzFdLCBuWzIzMl0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIuZ2FsbGVyeS1ncmlkIHVsPmxpIiwgImEiLCAiLmdvb2RzLXByaWNlIGlucy5wcmljZSIpCgkJfSwgblsyMzNdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLmdyaWQtaXRlbSIsICIuZ3JpZC1pdGVtLWltYWdlIGEiLCAiLnByaWNlcz4ubG9jYWwiKQoJCX0sIG5bMjM0XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5Qcm9kdWN0bGlzdD5saSIsICIucGljPmEiLCAiLnByaSIpCgkJfSwgblsyMzVdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLnNlYXJjaF9jaG9saXN0PnVsPmxpIiwgIi51Y29sX3BfaW1nPmEiLCAiLnVjb2xfcF93b2Qgc3BhbjpudGgtY2hpbGQoMSkiKQoJCX0sIG5bMjM2XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIiNwcm9kdWN0LWxpc3Q+dWw+bGkiLCAiYSIsICIucHJvZHVjdF9wIC5jX3B1cnBsZSwgLnByb2R1Y3RfcCAucHJvZHVjdF9hY3RpdmUiKQoJCX0sIG5bMjM3XSA9IGZ1bmN0aW9uKGUpIHsKCQkJZm9yICh2YXIgdCA9IGUucXVlcnlTZWxlY3RvckFsbCgiLnZpZXctSXRlbUxpc3RJdGVtIiksIGkgPSBbXSwgYSA9IDA7IGEgPCB0Lmxlbmd0aDsgKythKSB0cnkgewoJCQkJdmFyIG8gPSB0W2FdLnF1ZXJ5U2VsZWN0b3IoImEiKS5ocmVmLAoJCQkJCXIgPSBbdFthXS5xdWVyeVNlbGVjdG9yKCIucHJpY2UtaW50IikudGV4dENvbnRlbnQudHJpbSgpLCB0W2FdLnF1ZXJ5U2VsZWN0b3IoIi5wcmljZS1kZWNpbWFsIikudGV4dENvbnRlbnQudHJpbSgpXS5qb2luKCIiKTsKCQkJCWkucHVzaCh7CgkJCQkJdXJsOiBvLAoJCQkJCXByaWNlOiBuLnByaWNlRm9ybWF0dGVyKHIpLAoJCQkJCWNyYzMyOiAiIgoJCQkJfSkKCQkJfSBjYXRjaCAocykgewoJCQkJY29udGludWUKCQkJfQoJCQlyZXR1cm4gaQoJCX0sIG5bMjM4XSA9IGZ1bmN0aW9uKGUpIHsKCQkJZm9yICh2YXIgdCA9IGUucXVlcnlTZWxlY3RvckFsbCgiI3NlYXJjaFJlc3VsdHM+YSIpLCBpID0gW10sIGEgPSAwOyBhIDwgdC5sZW5ndGg7ICsrYSkgdHJ5IHsKCQkJCXZhciBvID0gdFthXS5ocmVmLAoJCQkJCXIgPSB0W2FdLnF1ZXJ5U2VsZWN0b3IoIi5wcmljZS02cG0iKS50ZXh0Q29udGVudC50cmltKCk7CgkJCQlpLnB1c2goewoJCQkJCXVybDogbywKCQkJCQlwcmljZTogbi5wcmljZUZvcm1hdHRlcihyKSwKCQkJCQljcmMzMjogIiIKCQkJCX0pCgkJCX0gY2F0Y2ggKHMpIHsKCQkJCWNvbnRpbnVlCgkJCX0KCQkJcmV0dXJuIGkKCQl9LCBuWzI0MV0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIucHJvZHVjdC1saXN0PnVsPmxpIiwgImEucGhvdG8iLCAiLnJldGFpbC1wcmljZSIpCgkJfSwgblsyNDZdID0gZnVuY3Rpb24oZSkgewoJCQlmb3IgKHZhciB0ID0gW10sIGkgPSBlLnF1ZXJ5U2VsZWN0b3JBbGwoIi5zLXJlc3VsdC1pdGVtIiksIGEgPSAwOyBhIDwgaS5sZW5ndGg7ICsrYSkgdHJ5IHsKCQkJCWZvciAodmFyIG8gPSBpW2FdLnF1ZXJ5U2VsZWN0b3IoIi5zLWFjY2Vzcy1pbWFnZSIpOyAhby5wYXJlbnROb2RlLmhyZWYgJiYgby5wYXJlbnROb2RlICE9IGUuYm9keTspIG8gPSBvLnBhcmVudE5vZGU7CgkJCQlpZiAoby5wYXJlbnROb2RlID09IGUuYm9keSkgY29udGludWU7CgkJCQl2YXIgciA9IG8ucGFyZW50Tm9kZS5ocmVmLAoJCQkJCXMgPSBpW2FdLnF1ZXJ5U2VsZWN0b3IoImRpdj4uYS1zcGFjaW5nLW1pbmk+LmEtc3BhY2luZy1ub25lPmE+c3BhbiIpOwoJCQkJcyB8fCAocyA9IGlbYV0ucXVlcnlTZWxlY3Rvcigic3Bhbi5hLWNvbG9yLXByaWNlIikpLCB0LnB1c2goewoJCQkJCXVybDogciwKCQkJCQlwcmljZTogbi5wcmljZUZvcm1hdHRlcihzLnRleHRDb250ZW50LCAiLCIsICIuIiksCgkJCQkJY3JjMzI6ICIiCgkJCQl9KQoJCQl9IGNhdGNoIChsKSB7CgkJCQljb250aW51ZQoJCQl9CgkJCXJldHVybiB0CgkJfSwgblsyNDddID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLmF1dG9tYXRpY1Njcm9sbFByb2R1Y3RzTGlzdD5kaXYiLCAiYSIsICIucHJvZHVjdC1wcmljZSIpCgkJfSwgblsyNDhdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiI2RpdlNlYXJjaFJlc3VsdHM+ZGl2PmRpdiIsICIucHJvZHVjdC1pbWFnZT5hOmZpcnN0LWNoaWxkIiwgIi5pdGVtX3ByaWNlIikKCQl9LCBuWzI1Ml0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIuc2VhcmNoX2xzdD51bD5saSIsICIuTnByb19pbWc+YSIsICIuc2lnb3ByaWNlIikKCQl9LCBuWzI1Nl0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIuY29udC1nZD5saSIsICJhIiwgIi5uZXctcHJpY2U+c3BhbjpmaXJzdC1jaGlsZCIpCgkJfSwgblsyNjZdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiI3Jlc3VsdHNDb2wgdWwucy1yZXN1bHQtbGlzdD5saSIsICJhLmEtbGluay1ub3JtYWwiLCAiLmEtY29sb3ItcHJpY2UiKQoJCX0sIG5bMjY3XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5zZWFyY2hsaXN0PnVsPmxpIiwgImEiLCAiLm5vdy1wcmljZSIpCgkJfSwgblsyNjhdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLnByb2R1Y3QtMS1saXN0PmxpIiwgImEiLCAic3Ryb25nIikKCQl9LCBuWzI2OV0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIjY29udGVudERpdj5kaXYubGlzdHByb2R1Y3QiLCAiYSIsICJzcGFuLnJlZCIpCgkJfSwgblsyNzBdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLndpZGdldC1icmljay1pdGVtIiwgIi5icmljay1waWMiLCAiLnByaWNlIikKCQl9LCBuWzI3MV0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBlLnF1ZXJ5U2VsZWN0b3JBbGwoIi5wdl9zaG9wX2xpc3RfY29udGVudC5ub3JtYWxfbGlzdCIpLmxlbmd0aCA/IG4udGVtcGxhdGUoIi5wdl9zaG9wX2xpc3RfY29udGVudD5kaXYuaXRlbTEiLCAiYSIsICIucHJpY2U+ZW0iKSA6IG4udGVtcGxhdGUoIi5pdGVtMSIsICIuaW1hZ2UgYSIsICIucHJpY2U+ZW0iKQoJCX0sIG5bMjcyXSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIiNnYWxsZXJ5X3Nob3cgdWw+bGkiLCAiLmdvb2RzLXBpYz5hIiwgIi5wcmljZSIpCgkJfSwgblsyNzNdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLml0ZW1TZWFyY2hSZXN1bHQuYm94LWl0ZW1zLXJlc3VsdD51bD5saSIsICIuaW1hZ2VzIGEiLCAiLnByaWNlPnN0cm9uZyIpCgkJfSwgblsyNzRdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLmdvb2RzLWxpc3RzPmRpdiIsICJhLmdvb2RzLWltZyIsICIucC1ub3JtYWwiKQoJCX0sIG5bMjc1XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5wcm9kdWN0cy1ncmlkPmxpIiwgImEucHJvZHVjdC1pbWFnZSIsICIucmVndWxhci1wcmljZSIpCgkJfSwgblsyNzZdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiI3RpbGUtY29udGFpbmVyPmRpdiIsICIuanMtcHJvZHVjdC10aXRsZSIsICIucHJpY2UtZGlzcGxheSIpCgkJfSwgblsyNzddID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLnByb2R1Y3RfbGlzdC5wcm9kdWN0X2xpc3RfdjI+dWw+bGkiLCAiLnBpYyIsICIucHJpY2U+c3Ryb25nIikKCQl9LCBuWzI3OV0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIjcmVzdWx0PnVsIiwgImEuaW1nX2ZpZ3VyZSIsICIuYm91dGlxdWVfcHJpY2UiKQoJCX0sIG5bMjgwXSA9IGZ1bmN0aW9uKGUpIHsKCQkJZm9yICh2YXIgdCA9IGUucXVlcnlTZWxlY3RvckFsbCgiI3Byb051bT5saSIpLCBpID0gW10sIGEgPSAwOyBhIDwgdC5sZW5ndGg7ICsrYSkgdHJ5IHsKCQkJCXZhciBvID0gdFthXS5xdWVyeVNlbGVjdG9yKCdhW2hyZWZePSIvUHJvIl0nKS5ocmVmLAoJCQkJCXIgPSB0W2FdLnF1ZXJ5U2VsZWN0b3IoIi5wcm9wcmljZSIpOwoJCQkJciA9IHIuY2hpbGROb2Rlc1tyLmNoaWxkTm9kZXMubGVuZ3RoIC0gMV0udGV4dENvbnRlbnQsIGkucHVzaCh7CgkJCQkJdXJsOiBvLAoJCQkJCXByaWNlOiBuLnByaWNlRm9ybWF0dGVyKHIpLAoJCQkJCWNyYzMyOiAiIgoJCQkJfSkKCQkJfSBjYXRjaCAocykgewoJCQkJY29udGludWUKCQkJfQoJCQlyZXR1cm4gaQoJCX0sIG5bMjgxXSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5wcm9kdWN0X2xpc3Q+bGkiLCAiYSIsICdzdHJvbmdbaWRePSJwcmljZWF0Il0nKQoJCX0sIG5bMjg0XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIGUucXVlcnlTZWxlY3RvckFsbCgiLnJzbHRBbGwiKS5sZW5ndGggPyBuLnRlbXBsYXRlKCIucnNsdEFsbD51bD5saSIsICJhIiwgIi5yZWQyIikgOiBlLnF1ZXJ5U2VsZWN0b3JBbGwoIi5wcm9kdWNsYl9jcDEiKS5sZW5ndGggPyBuLnRlbXBsYXRlKCIucHJvZHVjbGJfY3A+LnByb2R1Y2xiX2NwMSIsICJhIiwgIi5mb250MTRfcmVkIikgOiBuLnRlbXBsYXRlKCIucHJzdGdkbGlzdD5saSIsICJhIiwgIi5mMTgiKQoJCX0sIG5bMjg2XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5qLWl0ZW0tbGlzdC1saSIsICIuYS1waWMiLCAiLml0ZW0tcHJpY2UiKQoJCX0sIG5bMjg3XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIiNpdGVtTGlzdD5saSIsICJhIiwgIi5tb2RfcHJpY2U6Zmlyc3QtY2hpbGQiKQoJCX0sIG5bMjg4XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIiNnYWxsZXJ5X3Nob3cgdWw+bGkiLCAiYSIsICIuZ29vZHMtcHJpY2UgaW5zIikKCQl9LCBuWzI4OV0gPSBmdW5jdGlvbihlKSB7CgkJCWZvciAodmFyIHQgPSBlLnF1ZXJ5U2VsZWN0b3IoImlmcmFtZSNtIikuY29udGVudFdpbmRvdy5kb2N1bWVudCwgaSA9IHQucXVlcnlTZWxlY3RvckFsbCgiLnByb19saXN0PmxpIiksIGEgPSBbXSwgbyA9IDA7IG8gPCBpLmxlbmd0aDsgKytvKSB0cnkgewoJCQkJdmFyIHIgPSBpW29dLnF1ZXJ5U2VsZWN0b3IoIi5wcm9faW1nIikuaHJlZiwKCQkJCQlzID0gaVtvXS5xdWVyeVNlbGVjdG9yKCIucHJvX3ByaWNlPnNwYW4+YiIpLnRleHRDb250ZW50LnRyaW0oKTsKCQkJCWEucHVzaCh7CgkJCQkJdXJsOiByLAoJCQkJCXByaWNlOiBuLnByaWNlRm9ybWF0dGVyKHMpLAoJCQkJCWNyYzMyOiAiIgoJCQkJfSkKCQkJfSBjYXRjaCAobCkgewoJCQkJY29udGludWUKCQkJfQoJCQlyZXR1cm4gYQoJCX0sIG5bMjkwXSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5ocHJvZHVjdCIsICJhIiwgIi5wcmljZT5lbSIpCgkJfSwgblsyOTFdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLmNnX21haW5Db250ZW50PmRpdi5jZ19wcm8iLCAiYSIsICIucHJvX3ByaWNlPnN0cm9uZyIpCgkJfSwgblsyOTJdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLnJlc3VsdD51bD5saSIsICJhIiwgIi5pdGVtLXByaWNlIikKCQl9LCBuWzI5NF0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIucHJvbGlzdGl0ZW1zIiwgIi5hZC1pbWFnZS13cmFwcGVyIGEiLCAiYmlnLmppYWN1IikKCQl9LCBuWzI5NV0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIuZ3JpZC1pdGVtIiwgIi5pbWctYm94IGEiLCAiLnByaWNlLW51bSIpCgkJfSwgblsyOTldID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLkxpc3QgdHIiLCAiYS5EaXNwbGF5TmFtZSIsICIucHJpY2U+c3Ryb25nIikKCQl9LCBuWzMxM10gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIucC1saXN0PmxpLnAtaXRlbSIsICIucC1waWMgYSIsICIucC1wcmljZS1jdXJyZW50IikKCQl9LCBuWzM0N10gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIucHJvLWNsYXNzPmxpIiwgIi5wcm8taW1nPmEiLCAiLm1vbmV5LWZsIikKCQl9LCBuWzM0OF0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIuaXRlbXMtZ2FsbGVyeSIsICJhIiwgIi5wcmljZTEiKQoJCX0sIG5bMzQ5XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIiNqLXNlYXJjaExpc3Q+bGkiLCAiLmhkPmEiLCAiLnByaWNlPnNwYW4iKQoJCX0sIG5bMzUxXSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5nbWciLCAiYSIsICIuc2hvcF9wcmljZXMiKQoJCX0sIG5bMzUyXSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5nLWQtdWw+bGkiLCAiLnBpYyIsICdzcGFuW2lkXj0iSmdvb2RzUHJpY2UiXScpCgkJfSwgblsxODFdID0gZnVuY3Rpb24oZSkgewoJCQlmb3IgKHZhciB0ID0gZS5xdWVyeVNlbGVjdG9yQWxsKCIuc2t1LXVsPmxpIiksIGkgPSBbXSwgYSA9IDA7IGEgPCB0Lmxlbmd0aDsgKythKSB0cnkgewoJCQkJdmFyIG8gPSB0W2FdLnF1ZXJ5U2VsZWN0b3IoImEiKS5ocmVmLAoJCQkJCXIgPSB0W2FdLnF1ZXJ5U2VsZWN0b3IoIi53c2wtcHJpY2Uuai13c2wtcHJpY2UiKS5jaGlsZE5vZGVzWzBdLnRleHRDb250ZW50OwoJCQkJaS5wdXNoKHsKCQkJCQl1cmw6IG8sCgkJCQkJcHJpY2U6IG4ucHJpY2VGb3JtYXR0ZXIociksCgkJCQkJY3JjMzI6ICIiCgkJCQl9KQoJCQl9IGNhdGNoIChzKSB7CgkJCQljb250aW51ZQoJCQl9CgkJCXJldHVybiBpCgkJfSwgblszNjRdID0gZnVuY3Rpb24oZSkgewoJCQlmb3IgKHZhciB0ID0gZS5xdWVyeVNlbGVjdG9yQWxsKCIjcHJvZHVjdFJlc3VsdExpc3Q+bGkiKSwgaSA9IFtdLCBhID0gImh0dHA6Ly93d3cucHVyY290dG9uLmNvbSIsIG8gPSAwOyBvIDwgdC5sZW5ndGg7ICsrbykgdHJ5IHsKCQkJCXZhciByID0gdFtvXS5xdWVyeVNlbGVjdG9yKCdhW29uY2xpY2tePSJ0b0RldGFpbCJdJyksCgkJCQkJcyA9IHIuZ2V0QXR0cmlidXRlKCJvbmNsaWNrIikubWF0Y2goL1tcZC1dKy8pWzBdLAoJCQkJCWwgPSBzLnN1YnN0cihzLmxlbmd0aCAtIDMpLAoJCQkJCWMgPSBhICsgIi9kZXRhaWwvIiArIGwgKyAiLyIgKyBzICsgIi5odG1sIiwKCQkJCQlkID0gdFtvXS5xdWVyeVNlbGVjdG9yKCIuYXByaWNlIikudGV4dENvbnRlbnQ7CgkJCQlpLnB1c2goewoJCQkJCXVybDogYywKCQkJCQlwcmljZTogbi5wcmljZUZvcm1hdHRlcihkKSwKCQkJCQljcmMzMjogIiIKCQkJCX0pCgkJCX0gY2F0Y2ggKHApIHsKCQkJCWNvbnRpbnVlCgkJCX0KCQkJcmV0dXJuIGkKCQl9LCBuWzM2NV0gPSBmdW5jdGlvbihlKSB7CgkJCWZvciAodmFyIHQgPSBlLnF1ZXJ5U2VsZWN0b3JBbGwoIiNzLXJlc3VsdHMtbGlzdC1hdGY+bGkiKSwgaSA9IFtdLCBhID0gMDsgYSA8IHQubGVuZ3RoOyArK2EpIHRyeSB7CgkJCQl2YXIgbyA9IHRbYV0ucXVlcnlTZWxlY3RvcigiLmEtbGluay1ub3JtYWwiKS5ocmVmLAoJCQkJCXIgPSB0W2FdLnF1ZXJ5U2VsZWN0b3IoIi5hLWNvbG9yLXByaWNlIikudGV4dENvbnRlbnQudHJpbSgpOwoJCQkJaS5wdXNoKHsKCQkJCQl1cmw6IG8sCgkJCQkJcHJpY2U6IG4ucHJpY2VGb3JtYXR0ZXIociwgIiwiLCAiLiIpLAoJCQkJCWNyYzMyOiAiIgoJCQkJfSkKCQkJfSBjYXRjaCAocykgewoJCQkJY29udGludWUKCQkJfQoJCQlyZXR1cm4gaQoJCX0sIG5bMzY2XSA9IG5bMV0sIG5bMzY3XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5nb29kcy1pdGVtIiwgIi5maWd1cmUtaW1nPmEiLCAiLnByaWNlPmIiKQoJCX0sIG5bMzY4XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5wcm9kdWN0LWxpc3Q+dWw+bGkiLCAiYSIsICIucHJpY2U+LnJlZCIpCgkJfSwgblszNjldID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLmxpc3QtaD5saSIsICIucC1pbWc+YSIsICIucC1wcmljZT5zdHJvbmciKQoJCX0sIG5bMzcwXSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5wLWwtZ3JpZD51bD5saSIsICJhIiwgIi5wcmljZSAucmVkIikKCQl9LCBuWzM3MV0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIjZ29vZHNMaXN0OmZpcnN0LWNoaWxkPmxpIiwgImEiLCAiLmN1cl9wcmljIC5wcmlfbXNnIC5mX2FyaWFsIikKCQl9LCBuWzM3Ml0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIuZ3JpZC1zcGVjaWFsPi5ib3giLCAiYSIsICIuYm94LXByaWNlIHN0cm9uZyIpCgkJfSwgblszNzNdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiI21haW5fbGlzdCA+IC5wcm9faXRlbSIsICIucHJvX2luZm9yX2ltZyIsICIucHJvX3ByaWNlIikKCQl9LCBuWzM3NF0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIucHJvZHVjdC1saXN0PnVsPmxpIiwgIi5pdGVtcz5hOm50aC1jaGlsZCgxKSIsICIub3ByIikKCQl9LCBuWzM3Nl0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCJ1bCNKbW9iaWxlTGlzdD5saSIsICJhLnVpX3BpbWciLCAiLnVpX3BwcmljZSIpCgkJfSwgblszNzddID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiI2dhbGxlcnlfc2hvdyB1bD5saSIsICIuZ29vZHMtcGljPmEiLCAiaW5zLnByaWNlIikKCQl9LCBuWzM3OF0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIuZ29vZHMtbGlzdHM+ZGl2IiwgImEuZ29vZHMtaW1nIiwgIi5nb29kcy1wcmljZT4ucC1ub3JtYWwiKQoJCX0sIG5bMzc5XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5nYWxsZXJ5LWdyaWQ+dWw+bGkiLCAiLmdvb2RzLXBpYz5hIiwgImlucy5wcmljZSIpCgkJfSwgblszODBdID0gZnVuY3Rpb24oZSkgewoJCQlyZXR1cm4gbi50ZW1wbGF0ZSgiLnByb2QtbGlzdD5saSIsICJhIiwgInAiKQoJCX0sIG5bMzgxXSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5Hb29kc0xpc3Q+bGkiLCAiYSIsICIuZ29vZHNwcmljZT5zcGFuIikKCQl9LCBuWzM4Ml0gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIuZ29vZHMtdWwtYm94IGxpIiwgImEiLCAiLnByaWNlIikKCQl9LCBuWzM4M10gPSBmdW5jdGlvbihlKSB7CgkJCXJldHVybiBuLnRlbXBsYXRlKCIuZ29vZHNfbGlzdC5jbGVhcmZpeD5saSIsICJhLmdpbWciLCAicC5ncHJpY2UiKQoJCX0sIG5bMzg1XSA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG4udGVtcGxhdGUoIi5wcm8+dWw+bGkiLCAiZGw+ZGQ6bnRoLWNoaWxkKDEpPmEiLCAiLnZhbGMtbj5zcGFuOm50aC1jaGlsZCgyKSIpCgkJfSwgZS5leHBvcnRzID0gbgoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCwgaSkgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBhID0gWyIzNjBidXkiLCAic3VuaW5nIiwgImdvbWUiLCAieWloYW9kaWFuIiwgImRhbmdkYW5nIiwgImthb2xhIl0sCgkJCQlvID0gbig1OCksCgkJCQlyID0gbigyNiksCgkJCQlzID0gewoJCQkJCSIzNjBidXkiOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSB0KCIuSi1tb3JlLXByb20taW5zIikudGV4dCgpLAoJCQkJCQkJbiA9IHQoIi5KLXByb20gZW0uaGxfcmVkX2JnIikudGV4dCgpLAoJCQkJCQkJaSA9IHQoIi5KLXN1bW1hcnktcHJpY2UgLnAtcHJpY2UiKS50ZXh0KCkucmVwbGFjZSgvW++/pcKlXHNdKy9nLCAiIiksCgkJCQkJCQlhID0gW107CgkJCQkJCXJldHVybiAoZS5pbmRleE9mKCLmu6Hlh48iKSA+IC0xIHx8IG4uaW5kZXhPZigi5ruh5YePIikgPiAtMSkgJiYgYS5wdXNoKCLmu6Hlh486IiArIHQoJy5KLXByb20gZW0uaGxfcmVkX2JnOmNvbnRhaW5zKCLmu6Hlh48iKSArIGVtLmhsX3JlZCcpLnRleHQoKSksIChlLmluZGV4T2YoIuWkmuS5sOS8mOaDoCIpID4gLTEgfHwgbi5pbmRleE9mKCLlpJrkubDkvJjmg6AiKSA+IC0xKSAmJiBhLnB1c2goIuWkmuS5sOS8mOaDoDoiICsgdCgnLkotcHJvbSBlbS5obF9yZWRfYmc6Y29udGFpbnMoIuWkmuS5sOS8mOaDoCIpICsgZW0uaGxfcmVkJykudGV4dCgpKSwgewoJCQkJCQkJcHJpY2U6IGksCgkJCQkJCQlwcm9tbzogYS5qb2luKCI7IikKCQkJCQkJfQoJCQkJCX0sCgkJCQkJc3VuaW5nOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSB0KCIjdm91Y2hlclRpdGxlIiksCgkJCQkJCQluID0gZS5maW5kKCJsYWJlbCIpLnRleHQoKS5yZXBsYWNlKC9ccy9nLCAiIiksCgkJCQkJCQlpID0gIiI7CgkJCQkJCWlmIChuLmluZGV4T2YoIua7oeWHjyIpID4gLTEgJiYgZS5pcygiOnZpc2libGUiKSkgewoJCQkJCQkJaSA9IHQoIiN2b3VjaGVyQm94IikudGV4dCgpOwoJCQkJCQkJdmFyIGEgPSB0KCIjdm91Y2hlckJveCBhIikudGV4dCgpOwoJCQkJCQkJaSA9ICLmu6Hlh486IiArIGkucmVwbGFjZShhLCAiIikKCQkJCQkJfQoJCQkJCQlyZXR1cm4gewoJCQkJCQkJcHJvbW86IGkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJZ29tZTogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gdCgiLnByZC1wcm9tb3Rpb25zLXJlZCIpLAoJCQkJCQkJbiA9IGUuZmluZCgibGFiZWwiKS50ZXh0KCksCgkJCQkJCQlpID0gW107CgkJCQkJCXJldHVybiBlLmlzKCI6dmlzaWJsZSIpICYmIG4uaW5kZXhPZigi5ruh5YePIikgPiAtMSAmJiBpLnB1c2goIua7oeWHjzoiICsgdCgnLnByZC1wcm9tb3Rpb25zLXJlZCBsYWJlbDpjb250YWlucygi5ruh5YePIikrc3BhbicpLnRleHQoKS5yZXBsYWNlKC9ccy9nLCAiIikpLCBlLmlzKCI6dmlzaWJsZSIpICYmIG4uaW5kZXhPZigi6aKG5Yq1IikgPiAtMSAmJiBpLnB1c2goIumihuWKtToiICsgdCgnLnByZC1wcm9tb3Rpb25zLXJlZCBsYWJlbDpjb250YWlucygi6aKG5Yq1IikrYicpLnRleHQoKS5yZXBsYWNlKC8oPzrlt6bovrl85Y+z6L65KS9nLCAiIikpLCB7CgkJCQkJCQlwcm9tbzogaS5qb2luKCI7IikKCQkJCQkJfQoJCQkJCX0sCgkJCQkJeWloYW9kaWFuOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSB0KCIjcHJvbW90aW9uX3RpdGxlIiksCgkJCQkJCQluID0gW10sCgkJCQkJCQlpID0gZS5maW5kKCIubGlzdCAuZmwgc3Bhbi5zdWIiKS50ZXh0KCk7CgkJCQkJCWlmIChpLmluZGV4T2YoIua7oeWHjyIpID4gLTEgJiYgZS5maW5kKCIubGlzdCAuZmwgc3Bhbi5zdWIiKS5pcygiOnZpc2libGUiKSkgewoJCQkJCQkJdmFyIGEgPSAi5ruh5YePIiArIHQoJyNwcm9tb3Rpb25fdGl0bGUgLmxpc3QgLmZsIHNwYW4uc3ViOmNvbnRhaW5zKCLmu6Hlh48iKSsgc3Bhbi50aXQnKS50ZXh0KCk7CgkJCQkJCQluLnB1c2goYSkKCQkJCQkJfQoJCQkJCQlpZiAoaS5pbmRleE9mKCLmipjmiaMiKSA+IC0xICYmIGUuZmluZCgiLmxpc3QgLmZsIHNwYW4uc3ViIikuaXMoIjp2aXNpYmxlIikpIHsKCQkJCQkJCXZhciBhID0gIuaKmOaJoyIgKyB0KCcjcHJvbW90aW9uX3RpdGxlIC5saXN0IC5mbCBzcGFuLnN1Yjpjb250YWlucygi5oqY5omjIikrIHNwYW4udGl0JykudGV4dCgpOwoJCQkJCQkJbi5wdXNoKGEpCgkJCQkJCX0KCQkJCQkJcmV0dXJuIHsKCQkJCQkJCXByb21vOiBuLmpvaW4oIjsiKQoJCQkJCQl9CgkJCQkJfSwKCQkJCQlkYW5nZGFuZzogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gdCgiI3Byb21vLWxpc3QiKSwKCQkJCQkJCW4gPSBbXTsKCQkJCQkJaWYgKGUuZmluZCgnZGl2LmNsZWFyZml4IGI6Y29udGFpbnMoIua7oemineWHjyIpJykuaXMoIjp2aXNpYmxlIikpIHsKCQkJCQkJCXZhciBpID0gIua7oemineWHjzoiICsgdCgnI3Byb21vLWxpc3QgZGl2LmNsZWFyZml4IGI6Y29udGFpbnMoIua7oemineWHjyIpK2Rpdi5ydWxlIHNwYW4nKS50ZXh0KCk7CgkJCQkJCQluLnB1c2goaSkKCQkJCQkJfQoJCQkJCQlpZiAoZS5maW5kKCdkaXYuY2xlYXJmaXggYjpjb250YWlucygi5bqX6ZO65L+D6ZSAIiknKS5pcygiOnZpc2libGUiKSkgewoJCQkJCQkJdmFyIGkgPSAi5bqX6ZO65L+D6ZSAOiIgKyB0KCcjcHJvbW8tbGlzdCBkaXYuY2xlYXJmaXggYjpjb250YWlucygi5bqX6ZO65L+D6ZSAIikrZGl2LnJ1bGUgc3BhbicpLnRleHQoKTsKCQkJCQkJCW4ucHVzaChpKQoJCQkJCQl9CgkJCQkJCXJldHVybiB7CgkJCQkJCQlwcm9tbzogbi5qb2luKCI7IikKCQkJCQkJfQoJCQkJCX0sCgkJCQkJa2FvbGE6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IFtdOwoJCQkJCQlpZiAodCgnLnByb21vdGlvbndyYXAgLm0temQtcHJ0IC5tLWRwLXBydC10aXRsZTpjb250YWlucygi5ruh6aKd5YePIiknKS5pcygiOnZpc2libGUiKSkgewoJCQkJCQkJdmFyIG4gPSAi5ruh6aKd5YePOiIgKyB0KCcucHJvbW90aW9ud3JhcCAubS16ZC1wcnQgLm0tZHAtcHJ0LXRpdGxlOmNvbnRhaW5zKCLmu6Hpop3lh48iKStzcGFuIGEnKS50ZXh0KCk7CgkJCQkJCQllLnB1c2gobikKCQkJCQkJfQoJCQkJCQlyZXR1cm4gewoJCQkJCQkJcHJvbW86IGUuam9pbigiOyIpCgkJCQkJCX0KCQkJCQl9CgkJCQl9LAoJCQkJbCA9IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gW10sCgkJCQkJCW4gPSB0KCIjcHJvbS1vbmUgLkotcHJvbSAucHJvbS1pdGVtIiksCgkJCQkJCWkgPSB0KCIjcHJvbS1xdWFuIC5KLXByb20tcXVhbiIpOwoJCQkJCWlmIChuLmxlbmd0aCA+IDApCgkJCQkJCWZvciAodmFyIGEgPSAwOyBhIDwgbi5sZW5ndGg7IGErKykKCQkJCQkJCWlmIChuLmVxKGEpLmZpbmQoImEiKS50ZXh0KCkuaW5kZXhPZigi6K+m5oOFIikgPiAtMSkgewoJCQkJCQkJCXZhciBvID0gbi5lcShhKS5maW5kKCIuaGxfcmVkIikudGV4dCgpLAoJCQkJCQkJCQlyID0gbi5lcShhKS5maW5kKCJhIikuYXR0cigiaHJlZiIpOwoJCQkJCQkJCWUucHVzaChlbmNvZGVVUklDb21wb25lbnQobykgKyAiLCIgKyBlbmNvZGVVUklDb21wb25lbnQocikpCgkJCQkJCQl9CgkJCQkJaWYgKGkubGVuZ3RoID4gMCkKCQkJCQkJZm9yICh2YXIgYSA9IDA7IGEgPCBpLmxlbmd0aDsgYSsrKQoJCQkJCQkJaWYgKGkuZXEoYSkuZmluZCgiYSIpLnRleHQoKS5pbmRleE9mKCLor6bmg4UiKSA+IC0xKSB7CgkJCQkJCQkJdmFyIG8gPSBpLmVxKGEpLmZpbmQoIi5obF9yZWQiKS50ZXh0KCksCgkJCQkJCQkJCXIgPSBpLmVxKGEpLmZpbmQoImEiKS5hdHRyKCJocmVmIik7CgkJCQkJCQkJZS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChvKSArICIsIiArIGVuY29kZVVSSUNvbXBvbmVudChyKSkKCQkJCQkJCX0KCQkJCQlyZXR1cm4gZS5qb2luKCI7IikKCQkJCX0sCgkJCQljID0gZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0ID0gaS5kcCwKCQkJCQkJbiA9IGkuc2F2ZV9kcF9xdWVyeS5ub3csCgkJCQkJCWEgPSBzW2kuc2l0ZV0oKSwKCQkJCQkJbyA9IG4ucHJpY2UgfHwgdC5wcmljZTsKCQkJCQlvIHx8IChvID0gYS5wcmljZSk7CgkJCQkJdmFyIHIgPSB7CgkJCQkJCWRwX2lkOiBuLm5vd19kcF9pZCwKCQkJCQkJbmFtZTogdC5uYW1lLAoJCQkJCQlwcmljZTogbywKCQkJCQkJcHJvbW86IGEucHJvbW8sCgkJCQkJCXN0b2NrOiBlCgkJCQkJfTsKCQkJCQlyZXR1cm4gcgoJCQkJfSwKCQkJCWQgPSBmdW5jdGlvbihlLCBuKSB7CgkJCQkJdmFyIGEgPSBpLmRwLAoJCQkJCQlvID0gaS5zYXZlX2RwX3F1ZXJ5Lm5vdywKCQkJCQkJciA9IG8ucHJpY2UgfHwgYS5wcmljZSwKCQkJCQkJYyA9IHNbaS5zaXRlXSgpOwoJCQkJCXIgfHwgKHIgPSB0KCIuSi1zdW1tYXJ5LXByaWNlIC5wLXByaWNlIikudGV4dCgpLnJlcGxhY2UoL1vvv6XCpVxzXSsvZywgIiIpKTsKCQkJCQl2YXIgZCA9IGwoKSwKCQkJCQkJcCA9IHsKCQkJCQkJCWRwX2lkOiBvLm5vd19kcF9pZCwKCQkJCQkJCW5hbWU6IGEubmFtZS50cmltKCksCgkJCQkJCQlwcmljZTogciwKCQkJCQkJCXByb21vOiBjLnByb21vLAoJCQkJCQkJcHJvbW9faW5mbzogZCwKCQkJCQkJCXN0b2NrOiBlCgkJCQkJCX07CgkJCQkJcCA9IEpTT04uc3RyaW5naWZ5KHApLCBuKHApCgkJCQl9LAoJCQkJcCA9IGZ1bmN0aW9uKCkgewoJCQkJCXJldHVybiAic3VuaW5nIiA9PT0gaS5zaXRlICYmIHQoIiN0aW1lUGFuZWwgc3BhbiIpLnRleHQoKS5pbmRleE9mKCLlrprph5Hlm6IiKSA+IC0xICYmIHQoIiNtYWluUHJpY2UgLnByaWNlLXByb21vIHNwYW4iKS50ZXh0KCkuaW5kZXhPZigi5a6a6YeRIikgPiAtMSA/ICEwIDogIjM2MGJ1eSIgPT09IGkuc2l0ZSAmJiB0KCIjcGluZ291IC5zdW1tYXJ5LXByaWNlIikudGV4dCgpLmluZGV4T2YoIuWumumHkSIpID4gLTEgPyAhMCA6ICExCgkJCQl9LAoJCQkJaCA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlpZiAod2luZG93LlhNTEh0dHBSZXF1ZXN0KSB0cnkgewoJCQkJCQl2YXIgdCA9IG5ldyBYTUxIdHRwUmVxdWVzdDsKCQkJCQkJdC5vcGVuKCJQT1NUIiwgaS5zZXJ2ZXIgKyAiL2V4dGVuc2lvbj9hYz1zZW5kUHJvbW9zJnNpdGVfaWQ9IiArIGkuc2l0ZV9pZCArICImamZyb209aW50IiksIHQuc2VuZChlKSwgcigic2VuZFByb21vX3N1Y2Nlc3MiKQoJCQkJCX0gY2F0Y2ggKG4pIHt9CgkJCQl9OwoJCQllLmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkgewoJCQkJaWYgKCFpLm5ld19leHRlbnNpb24gJiYgImx1eW91IiAhPSBpLmJ0eXBlICYmICFpLmRwLmFjdGl2ZVByaWNlICYmICFwKCkpIHsKCQkJCQl2YXIgZSA9IG8uaW5pdChpLnNpdGUpOwoJCQkJCWlmIChhLmluZGV4T2YoaS5zaXRlKSA+IC0xKQoJCQkJCQlpZiAoIjM2MGJ1eSIgPT0gaS5zaXRlKSBkKGUsIGgpOwoJCQkJCQllbHNlIHsKCQkJCQkJCXZhciB0ID0gYyhlKTsKCQkJCQkJCXQgPSBKU09OLnN0cmluZ2lmeSh0KSwgaCh0KQoJCQkJCQl9CgkJCQl9CgkJCX0sIGUuZXhwb3J0cy5zcGVjaWFsRmlsdGVyID0gcAoJCX0pLmNhbGwodCwgbig2KSwgbigxKSkKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJdmFyIGk7CgkJKGZ1bmN0aW9uKGEpIHsKCQkJInVzZSBzdHJpY3QiOwoJCQlpID0gZnVuY3Rpb24oKSB7CgkJCQlmdW5jdGlvbiBlKCkgewoJCQkJCXZhciBlID0gYS5zZXJ2ZXIgKyAiL2Jyd2V4dC92ZXJzaW9uX3JlbWluZD9uZXdfdj0xIjsKCQkJCQlsLmdldChlKS5kb25lKGZ1bmN0aW9uKGUpIHsKCQkJCQkJY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KCJnd2RfdmVyc2lvbiIsIGZ1bmN0aW9uKG4pIHsKCQkJCQkJCXZhciBpID0gbiAmJiBuLmd3ZF92ZXJzaW9uOwoJCQkJCQkJaSA+PSBlLnZlcnNpb24gfHwgMSA9PT0gZS5zaG93dmVyc2lvbiAmJiB0KGUpCgkJCQkJCX0pCgkJCQkJfSkKCQkJCX0KCgkJCQlmdW5jdGlvbiB0KGUpIHsKCQkJCQl2YXIgdCA9IG4oNjkpOwoJCQkJCWEuY2hyb21lX2V4dGVuc2lvbiAmJiAodCA9IHQucmVwbGFjZShuZXcgUmVnRXhwKCJodHRwOi8vczFcXC4iICsgYS5leHROYW1lICsgIlxcLmNvbS9pbWFnZXMiLCAiZyIpLCBjaHJvbWUuZXh0ZW5zaW9uLmdldFVSTCgiaW1hZ2VzIikpKSwgcygiYm9keSIpLmFwcGVuZChjLmNvbXBpbGUodCkoewoJCQkJCQl1cGRhdGU6IGUsCgkJCQkJCXNfc2VydmVyOiBhLnNfc2VydmVyCgkJCQkJfSkpLCBpKCksIG8oZS52ZXJzaW9uKQoJCQkJfQoKCQkJCWZ1bmN0aW9uIGkoKSB7CgkJCQkJInJpZ2h0IiA9PT0gYS5zdHlsZSAmJiBzKCIjZ3dkX3ZlcnNpb24iKS5oaWRlKCksICJib3R0b20iID09PSBhLnN0eWxlICYmIHMoIiNnd2RfdmVyc2lvbiIpLmNzcygiYm90dG9tIiwgIjYwcHgiKQoJCQkJfQoKCQkJCWZ1bmN0aW9uIG8oZSkgewoJCQkJCXMoIiNnd2RfdXBkYXRlX3RoZW4iKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQkJY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHsKCQkJCQkJCWd3ZF92ZXJzaW9uOiBlCgkJCQkJCX0pLCBzKCIjZ3dkX3ZlcnNpb24iKS5oaWRlKCkKCQkJCQl9KSwgcygiI2d3ZF91cGRhdGVfbm93Iikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCXMoIiNnd2RfdmVyc2lvbiIpLmhpZGUoKQoJCQkJCX0pLCBzKCIjbmV2ZXJfcmVtaW5kIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCWNocm9tZS5zdG9yYWdlLmxvY2FsLnNldCh7CgkJCQkJCQlnd2RfcmVtaW5kOiAibmV2ZXIiCgkJCQkJCX0pLCBzKCIjZ3dkX3ZlcnNpb24iKS5oaWRlKCkKCQkJCQl9KQoJCQkJfQoKCQkJCWZ1bmN0aW9uIHIoZSkgewoJCQkJCXZhciB0ID0gbigyOCk7CgkJCQkJdC5vbihmdW5jdGlvbih0KSB7CgkJCQkJCSJnZXRfYnR5cGUiID09PSB0LnR5cGUgJiYgZSh0LnZhbHVlKQoJCQkJCX0pLCB0LnRyaWdnZXIoewoJCQkJCQl0eXBlOiAiZ2V0X2J0eXBlIgoJCQkJCX0pCgkJCQl9CgkJCQl2YXIgcyA9IG4oNiksCgkJCQkJbCA9IG4oOSksCgkJCQkJYyA9IG4oMTYpLAoJCQkJCWQgPSB7fTsKCQkJCXJldHVybiBkLmluaXQgPSBmdW5jdGlvbigpIHsKCQkJCQlyKGZ1bmN0aW9uKHQpIHsKCQkJCQkJImNocm9tZSIgPT09IHQgJiYgY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KCJnd2RfcmVtaW5kIiwgZnVuY3Rpb24odCkgewoJCQkJCQkJdmFyIG4gPSB0ICYmIHQuZ3dkX3JlbWluZDsKCQkJCQkJCSJuZXZlciIgIT09IG4gJiYgZSgpCgkJCQkJCX0pCgkJCQkJfSkKCQkJCX0sIGQKCQkJfS5jYWxsKHQsIG4sIHQsIGUpLCAhKHZvaWQgMCAhPT0gaSAmJiAoZS5leHBvcnRzID0gaSkpCgkJfSkuY2FsbCh0LCBuKDEpKQoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQllLmV4cG9ydHMgPSAnPGRpdiBpZD0iZ3dkX3ZlcnNpb24iPlxuICA8cCBjbGFzcz0idmVyc2lvbl9oZWFkIj7otK3nianlhZrlj5HnjrDmlrDniYjmnKw8L3A+XG4gIDxkaXYgY2xhc3M9InZlcnNpb25fY29udGVudCI+XG4gICAgPHAgY2xhc3M9InZlcnNpb25fZGVzIj7or7TmmI7vvJp7e3VwZGF0ZS5kZXNjfX08L3A+XG4gICAgPGEgaWQ9Imd3ZF91cGRhdGVfbm93IiBocmVmPSJ7e3VwZGF0ZS51cmx9fSIgdGFyZ2V0PSJfYmxhbmsiPjwvYT5cbiAgICA8YSBpZD0iZ3dkX3VwZGF0ZV90aGVuIj48L2E+XG4gICAgPGEgaWQ9Im5ldmVyX3JlbWluZCIgdGl0bGU9IueCueWHu+WQjuWwhuS4jeWGjeaPkOekuui0reeJqeWFmuaPkuS7tuWNh+e6pyI+5LiN5YaN5o+Q56S6PC9hPlxuICA8L2Rpdj4gICAgIFxuICA8c3R5bGUgdHlwZT0idGV4dC9jc3MiPlxuICAgICNnd2RfdmVyc2lvbntcbiAgICAgIHdpZHRoOiAyOTJweDtcbiAgICAgIGhlaWdodDogMTY4cHg7XG4gICAgICBib3JkZXItcmFkaXVzOiAxMXB4O1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgI2JhYmFiYTtcbiAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgYm90dG9tOiAwcHg7XG4gICAgICByaWdodDogMnB4O1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICAgIHotaW5kZXg6IDk5OTk5OTk5OTk5OTk5OTtcbiAgICB9XG4gICAgLnZlcnNpb25faGVhZHtcbiAgICAgIGhlaWdodDogMzhweDtcbiAgICAgIGxpbmUtaGVpZ2h0OiAzOHB4O1xuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgZm9udC1zaXplOiAyMHB4O1xuICAgICAgY29sb3I6ICNmZmY7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNmZiNGYzO1xuICAgICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMTFweDtcbiAgICAgIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAxMXB4O1xuICAgIH1cbiAgICAudmVyc2lvbl9jb250ZW50IHB7XG4gICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICBjb2xvcjogI2FlYWVhZTtcbiAgICAgIG1hcmdpbi10b3A6IDE3cHg7XG4gICAgICBsaW5lLWhlaWdodDogMjBweDtcbiAgICAgIG1hcmdpbi1sZWZ0OiAxOXB4O1xuICAgIH1cbiAgICAudmVyc2lvbl9jb250ZW50IGF7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICBoZWlnaHQ6IDQwcHg7XG4gICAgICB3aWR0aDogMTA4cHg7XG4gICAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgfVxuICAgIGEjbmV2ZXJfcmVtaW5kIHtcbiAgICAgIGRpc3BsYXk6IGlubGluZTtcbiAgICAgIHdpZHRoOiAzNHB4O1xuICAgICAgbWFyZ2luLWxlZnQ6IDlweDtcbiAgICAgIGNvbG9yOiAjYWVhZWFlO1xuICAgICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XG4gICAgfVxuICAgIGEjbmV2ZXJfcmVtaW5kOmhvdmVyIHtcbiAgICAgIGNvbG9yOiAjMzMzO1xuICAgICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XG4gICAgfVxuICAgIC52ZXJzaW9uX251bXtcbiAgICAgIG1hcmdpbi10b3A6IDhweDtcbiAgICB9XG4gICAgI2d3ZF91cGRhdGVfbm93e1xuICAgICAgbWFyZ2luLWxlZnQ6IDE4cHg7XG4gICAgICBiYWNrZ3JvdW5kOiB1cmwoXCd7e3Nfc2VydmVyfX0vaW1hZ2VzL2d3ZF91cGRhdGVfbm93LnBuZ1wnKSBuby1yZXBlYXQ7XG4gICAgfVxuICAgICNnd2RfdXBkYXRlX25vdzpob3ZlcntcbiAgICAgIG1hcmdpbi1sZWZ0OiAxOHB4O1xuICAgICAgYmFja2dyb3VuZDogdXJsKFwne3tzX3NlcnZlcn19L2ltYWdlcy9nd2RfdXBkYXRlX25vd19ob3Zlci5wbmdcJykgbm8tcmVwZWF0O1xuICAgIH1cbiAgICAjZ3dkX3VwZGF0ZV90aGVue1xuICAgICAgYmFja2dyb3VuZDogdXJsKFwne3tzX3NlcnZlcn19L2ltYWdlcy9nd2RfdXBkYXRlX3RoZW4ucG5nXCcpIG5vLXJlcGVhdDtcbiAgICB9XG4gICAgI2d3ZF91cGRhdGVfdGhlbjpob3ZlcntcbiAgICAgIGJhY2tncm91bmQ6IHVybChcJ3t7c19zZXJ2ZXJ9fS9pbWFnZXMvZ3dkX3VwZGF0ZV90aGVuX2hvdmVyLnBuZ1wnKSBuby1yZXBlYXQ7XG4gICAgfVxuICA8L3N0eWxlPlxuPC9kaXY+JwoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCwgbikgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBpID0gewoJCQkJdG9wOiAiY3NzLyIgKyB0LmV4dE5hbWUgKyAiLW5vdGlmaWVyLW5ldzQuY3NzIiwKCQkJCWJvdHRvbTogImNzcy8iICsgdC5leHROYW1lICsgIi1ub3RpZmllci1ib3R0b20tbmV3NC5jc3MiCgkJCX07CgkJCWUuZXhwb3J0cyA9IGZ1bmN0aW9uKGUpIHsKCQkJCXZhciBlID0gZSB8fCAiIiwKCQkJCQlhID0gbG9jYXRpb24uaHJlZiwKCQkJCQlvID0gdC5zX3NlcnZlciArICIvY3NzL2Jyd2V4dC9pbWFnZXMuY3NzIiwKCQkJCQlyID0gISFhLm1hdGNoKC9eaHR0cCg/OnMpPzpcL1wvKFthLXpBLVowLTktX10rXC4pKih0bWFsbHx0YW9iYW8pXC4vKSAmJiAhIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIm1ldGFbaHR0cC1lcXVpdj1Db250ZW50LVNlY3VyaXR5LVBvbGljeV0iKSwKCQkJCQlzID0gISFhLm1hdGNoKC9eaHR0cCg/OnMpPzpcL1wvd3d3XC52aXBcLmNvbS8pOwoJCQkJdC5uZXdfZXh0ZW5zaW9uID8gKGUgPSB0LnNfc2VydmVyICsgIi9jc3MvYnJ3ZXh0LyIgKyB0LnVfa2V5ICsgIi5taW4uY3NzIiwgbyA9IHQuc19zZXJ2ZXIgKyAiL2Nzcy9icndleHQvaW1hZ2VzXyIgKyB0LmV4dEJyYW5kICsgIi5jc3MiKSA6ICJjaHJvbWUiID09IHQuZnJvbV9kZXZpY2UgPyAoZSA9IGNocm9tZS5leHRlbnNpb24uZ2V0VVJMKGlbdC5zdHlsZV0gfHwgaVt0LmRlZmF1bHRfc3R5bGVdKSwgbyA9IGNocm9tZS5leHRlbnNpb24uZ2V0VVJMKCJjc3MvaW1hZ2VzLmNzcyIpKSA6ICIyMzQ1IiA9PSB0LmZyb21fZGV2aWNlID8gciB8fCBzID8gKGUgPSBjaHJvbWUuZXh0ZW5zaW9uLmdldFVSTChpW3Quc3R5bGVdIHx8IGlbdC5kZWZhdWx0X3N0eWxlXSksIG8gPSBjaHJvbWUuZXh0ZW5zaW9uLmdldFVSTCgiY3NzL2ltYWdlcy5jc3MiKSkgOiAoaS50b3AgPSAiY3NzL2Jyd2V4dC8iICsgdC5leHROYW1lICsgIi1ub3RpZmllci1uZXc0LmNzcyIsIGkuYm90dG9tID0gImNzcy9icndleHQvIiArIHQuZXh0TmFtZSArICItbm90aWZpZXItYm90dG9tLW5ldzQuY3NzIiwgZSA9IHQuc19zZXJ2ZXIgKyAiLyIgKyBpW3Quc3R5bGVdICsgIj92PSIgKyB0LnZlcnNpb24pIDogImx1eW91IiA9PT0gdC5idHlwZSA/IChpLnRvcCA9ICJjc3MvYnJ3ZXh0LyIgKyB0LmV4dE5hbWUgKyAiLW5vdGlmaWVyLW5ldy5jc3MiLCBpLmJvdHRvbSA9ICJjc3MvYnJ3ZXh0LyIgKyB0LmV4dE5hbWUgKyAiLW5vdGlmaWVyLWJvdHRvbS1uZXcuY3NzIikgOiAoaS50b3AgPSAiY3NzL2Jyd2V4dC8iICsgdC5leHROYW1lICsgIi1ub3RpZmllci1uZXc0LmNzcyIsIGkuYm90dG9tID0gImNzcy9icndleHQvIiArIHQuZXh0TmFtZSArICItbm90aWZpZXItYm90dG9tLW5ldzQuY3NzIiksIHQubmV3X2V4dGVuc2lvbiA/IGUgPSBlICsgIj92PSIgKyB0LnZlcnNpb24gOiAiY2hyb21lIiAhPSB0LmZyb21fZGV2aWNlICYmICIyMzQ1IiAhPSB0LmZyb21fZGV2aWNlICYmIChlID0gdC5zX3NlcnZlciArICIvIiArIGlbdC5zdHlsZV0gKyAiP3Y9IiArIHQudmVyc2lvbiksIG4oImhlYWQiKS5hcHBlbmQoJzxsaW5rIHR5cGU9InRleHQvY3NzIiBocmVmPSInICsgZSArICciIHJlbD0ic3R5bGVzaGVldCIgLz4nKSwgbigiaGVhZCIpLmFwcGVuZCgnPGxpbmsgdHlwZT0idGV4dC9jc3MiIGhyZWY9IicgKyBvICsgIj92PSIgKyB0LnZlcnNpb24gKyAnIiByZWw9InN0eWxlc2hlZXQiIC8+JykKCQkJfQoJCX0pLmNhbGwodCwgbigxKSwgbig2KSkKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJInVzZSBzdHJpY3QiOwoJCXZhciBuID0ge307CgkJZS5leHBvcnRzLmdldCA9IGZ1bmN0aW9uKGUpIHsKCQkJcmV0dXJuIG5bZV0KCQl9LCBlLmV4cG9ydHMuc2V0ID0gZnVuY3Rpb24oZSwgdCkgewoJCQluW2VdID0gdAoJCX0KCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJKGZ1bmN0aW9uKHQpIHsKCQkJInVzZSBzdHJpY3QiOwoJCQl2YXIgbiA9IHsKCQkJCQlqc2R4OiBbImZlaW5pdSIsICJhcHBsZSJdLAoJCQkJCW5qY2s6IFsiZmVpbml1IiwgImFwcGxlIl0sCgkJCQkJdGx4czogWyJhcHBsZSJdLAoJCQkJCXhkamY6IFsiYXBwbGUiXSwKCQkJCQl6amR4OiBbImFwcGxlIl0sCgkJCQkJanhkeDogWyJhcHBsZSJdLAoJCQkJCXNoY2s6IFsiYXBwbGUiLCAidmlwc2hvcCIsICJ5aWhhb2RpYW4iLCAiZmVpbml1IiwgImtlZWRlIiwgImoxIiwgImxpZmV2YyIsICJvY2oiLCAidHVodSIsICJsb2dpdGVjaCIsICJzdGFwbGVzIiwgImJhbmdnbyIsICJsb3ZvIiwgImFpZGFpIiwgInRvOHRvIiwgImJsIiwgInlhbzEyMyIsICJsdW9sYWkiLCAic3Vhbmp1emkiLCAibHZtYW1hIiwgImVhc2VleWVzIiwgInlvb3giLCAicHV6ZXlmIiwgImFpaHVpc2hvdSIsICJ0aGViZWFzdHNob3AiLCAibWNha2UiLCAibGVjYWtlIl0sCgkJCQkJaGFndzogWyJhcHBsZSJdLAoJCQkJCXNobHQ6IFsiYXBwbGUiXSwKCQkJCQliamx0OiBbImFwcGxlIl0KCQkJCX0sCgkJCQlpID0gWyJsdm1hbWEiLCAiMzYwYnV5IiwgIjE2MyIsICJmZWVsdW5pcXVlIiwgInlvdTE2MyJdLAoJCQkJYSA9IFsiZWZvdGlsZSJdOwoJCQllLmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkgewoJCQkJaWYgKCJuamNrIiA9PT0gdC5mcm9tX2RldmljZSB8fCAiZ2RqbSIgPT09IHQuZnJvbV9kZXZpY2UpIHJldHVybiAhMDsKCQkJCWlmICh0Lm5ld19leHRlbnNpb24gJiYgaS5pbmRleE9mKHQuc2l0ZSkgPiAtMSkgcmV0dXJuICEwOwoJCQkJaWYgKGEuaW5kZXhPZih0LnNpdGUpID4gLTEpIHJldHVybiAhMDsKCQkJCXZhciBlID0gblt0LmZyb21fZGV2aWNlXTsKCQkJCWlmIChlKSB7CgkJCQkJZm9yICh2YXIgbyA9IDA7IG8gPCBlLmxlbmd0aDsgbysrKQoJCQkJCQlpZiAodC5zaXRlID09PSBlW29dKSByZXR1cm4gITA7CgkJCQkJcmV0dXJuICExCgkJCQl9CgkJCQlyZXR1cm4gITEKCQkJfQoJCX0pLmNhbGwodCwgbigxKSkKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJKGZ1bmN0aW9uKGUsIHQpIHsKCQkJInVzZSBzdHJpY3QiOwoJCQl2YXIgaSA9IG4oMjYpLAoJCQkJYSA9IG4oMTMpOwoJCQllLmV4dGVuZCh7CgkJCQl0YWJfb3V0OiBmdW5jdGlvbigpIHsKCQkJCQl0KCIjIiArIGUuZXh0TmFtZSArICItbWFpbiAuIiArIGUuZXh0TmFtZSArICItdGFiIikuY3NzKCJjb2xvciIsICIiKSwgdCgiIyIgKyBlLmV4dE5hbWUgKyAiLW1haW4gLiIgKyBlLmV4dE5hbWUgKyAiLXRhYiIpLmNzcygiaGVpZ2h0IiwgMzYpLCB0KCIjIiArIGUuZXh0TmFtZSArICItbWFpbiAuIiArIGUuZXh0TmFtZSArICItdGFiIikuY3NzKCJiYWNrZ3JvdW5kLWNvbG9yIiwgIiIpLCB0KCIjIiArIGUuZXh0TmFtZSArICItbWFpbiAuIiArIGUuZXh0TmFtZSArICItdGFiIikucmVtb3ZlQ2xhc3MoInRhYm1zX2hvdmVyIikKCQkJCX0sCgkJCQl0YWJfaW46IGZ1bmN0aW9uKHQpIHsKCQkJCQl0LmF0dHIoImNsYXNzIikgPT0gZS5leHROYW1lICsgIi10YWIiICYmICh0LmNzcygiY29sb3IiLCAiIzE3N0VFNSIpLCB0LmNzcygiaGVpZ2h0IiwgMzgpLCB0LmNzcygiYmFja2dyb3VuZC1jb2xvciIsICJ3aGl0ZSIpKQoJCQkJfSwKCQkJCWZpeFdpZHRoOiBmdW5jdGlvbigpIHsKCQkJCQl0KCIjIiArIGUuZXh0TmFtZSArICItYmFyLWNvbXBhcmUiKS53aWR0aCgiYXV0byIpOwoJCQkJCXZhciBuID0gcGFyc2VJbnQodCgiIyIgKyBlLmxvZ29OYW1lKS53aWR0aCgpKSwKCQkJCQkJaSA9IHBhcnNlSW50KHQoIiMiICsgZS5leHROYW1lICsgIi1iYXItY29tcGFyZSIpLndpZHRoKCkpOwoJCQkJCShlLklFNiB8fCAiYW1hem9uIiA9PSBlLnNpdGUpICYmIGkgPiA4MDAgJiYgKGkgPSA4MDApOwoJCQkJCXZhciBhID0gcGFyc2VJbnQodCgiIyIgKyBlLmV4dE5hbWUgKyAiLWJhci1pY29ucyIpLndpZHRoKCkpLAoJCQkJCQlvID0gcGFyc2VJbnQodCgiIyIgKyBlLmV4dE5hbWUgKyAiLWZlZWQtY2xvc2UiKS53aWR0aCgpKSArIDEwMCwKCQkJCQkJciA9IHBhcnNlSW50KHQoIiNzZWFyY2hfd2Vic2l0ZSIpLndpZHRoKCkpLAoJCQkJCQlzID0gcGFyc2VGbG9hdCh0KCIjcmlnaHRfaW5mbyIpLndpZHRoKCkpIHx8IDEsCgkJCQkJCWwgPSB0aGlzLndpZHRoIC0gbiAtIGkgLSBhIC0gbyAtIHMsCgkJCQkJCWMgPSBsOwoJCQkJCWwgLT0gNDAsIGwgPiAzMDAgPyBsID0gMzAwIDogMTAwID4gbCAmJiAobCA9IDEwMCksIHQoIiMiICsgZS5leHROYW1lICsgIi1zZWFyY2gtZm9ybSIpLmlzKCI6dmlzaWJsZSIpICYmIGMgLSB0KCIjIiArIGUuZXh0TmFtZSArICItc2VhcmNoLWZvcm0iKS5vdXRlcldpZHRoKCkgLSAxNjAgPiAwICYmIHQoIi5iMmMtaWNvbiwgLnRtYWxsLWljb24sIC50YW9iYW8taWNvbiwgIyIgKyBlLmV4dE5hbWUgKyAiLXRyZW5kIC5wcmljZS10cmVuZC1pY29uIikuc2hvdygpLCAxMDAgPj0gbCAmJiAodCgiLmIyYy1pY29uLCAudG1hbGwtaWNvbiwgLnRhb2Jhby1pY29uLCAjIiArIGUuZXh0TmFtZSArICItdHJlbmQgLnByaWNlLXRyZW5kLWljb24sIC5yZXZpZXctaWNvbiwgIyIgKyBlLmV4dE5hbWUgKyAiLXByb21vdGlvbi1kcCwgIyIgKyBlLmV4dE5hbWUgKyAiLWFsc29fYnV5IikuaGlkZSgpLCBpID0gcGFyc2VJbnQodCgiIyIgKyBlLmV4dE5hbWUgKyAiLWJhci1jb21wYXJlIikud2lkdGgoKSksIGwgPSB0aGlzLndpZHRoIC0gbiAtIGkgLSBhIC0gbyksIGwgLT0gNDAsIGMgPiA0MjEgJiYgIXQoIiNwcm9tb19xdWFuX2J0biIpLmlzKCI6dmlzaWJsZSIpICYmIHQoIiNwcm9tb19xdWFuX2J0biIpLmxlbmd0aCA+IDAgJiYgKHQoIiNwcm9tb19xdWFuX2J0biIpLnNob3coKSwgYyAtPSAxMjEpLCBjID4gNDAwICYmICF0KCIjIiArIGUuZXh0QnJhbmQgKyAiX2hpc3RvcnkiKS5pcygiOnZpc2libGUiKSAmJiB0KCIjIiArIGUuZXh0QnJhbmQgKyAiX2hpc3RvcnkiKS5sZW5ndGggPiAwICYmICh0KCIjIiArIGUuZXh0QnJhbmQgKyAiX2hpc3RvcnkiKS5zaG93KCksIGMgLT0gMTAwKSwgYyA+IDEzOSAmJiAhdCgiIyIgKyBlLmV4dEJyYW5kICsgIl96aGlkZW1haSIpLmlzKCI6dmlzaWJsZSIpICYmIHQoIiMiICsgZS5leHRCcmFuZCArICJfemhpZGVtYWkiKS5sZW5ndGggPiAwICYmICh0KCIjIiArIGUuZXh0QnJhbmQgKyAiX3poaWRlbWFpIikuc2hvdygpLCBjIC09IDEzOSksIGMgPiAxMTIgJiYgIXQoIiMiICsgZS5leHRCcmFuZCArICJfbG93cHJpIikuaXMoIjp2aXNpYmxlIikgJiYgdCgiIyIgKyBlLmV4dEJyYW5kICsgIl9sb3dwcmkiKS5sZW5ndGggPiAwICYmICh0KCIjIiArIGUuZXh0QnJhbmQgKyAiX2xvd3ByaSIpLnNob3coKSwgYyAtPSAxMTIpLCBjID4gMTgxICYmICF0KCIjemRtX2ltZyIpLmlzKCI6dmlzaWJsZSIpICYmIHQoIiN6ZG1faW1nIikubGVuZ3RoID4gMCAmJiAodCgiI3pkbV9pbWciKS5zaG93KCksIGMgLT0gMTgxKSwgMTAwID4gbCA/IChsID0gMTAwLCB0KCIjIiArIGUuZXh0TmFtZSArICItYmFyLWljb25zIikuaGlkZSgpLCB0KCIjIiArIGUuZXh0TmFtZSArICItYmFyLXNlYXJjaCIpLmhpZGUoKSwgdCgiI3ZpcHNlYXJjaF9yZW1pbmQiKS5oaWRlKCkpIDogKGwgPiAzMDAgJiYgKGwgPSAzMDApLCB0KCIjIiArIGUuZXh0TmFtZSArICItYmFyLXNlYXJjaCIpLmNzcygid2lkdGgiLCBsKS5zaG93KCksIHQoIiMiICsgZS5leHROYW1lICsgIi1iYXItaWNvbnMiKS5zaG93KCksIHQoIiN2aXBzZWFyY2hfcmVtaW5kIikuc2hvdygpKSwgMjYwID4gYyA/ICh0KCIjIiArIGUuZXh0TmFtZSArICItYmFyLXNlYXJjaCIpLmhpZGUoKSwgdCgiIyIgKyBlLmV4dE5hbWUgKyAiLWJhci1pY29ucyIpLmhpZGUoKSwgdCgiI3ZpcHNlYXJjaF9yZW1pbmQiKS5oaWRlKCkpIDogKHQoIiMiICsgZS5leHROYW1lICsgIi1iYXItc2VhcmNoIikuc2hvdygpLCB0KCIjIiArIGUuZXh0TmFtZSArICItYmFyLWljb25zIikuc2hvdygpLCB0KCIjdmlwc2VhcmNoX3JlbWluZCIpLnNob3coKSksIDAgPiBjICYmIHQoIiN6ZG1faW1nIikuaXMoIjp2aXNpYmxlIikgJiYgKHQoIiN6ZG1faW1nIikuaGlkZSgpLCBjICs9IHQoIiN6ZG1faW1nIikub3V0ZXJXaWR0aCgpKSwgMCA+IGMgJiYgdCgiIyIgKyBlLmV4dEJyYW5kICsgIl9sb3dwcmkiKS5pcygiOnZpc2libGUiKSAmJiAodCgiIyIgKyBlLmV4dEJyYW5kICsgIl9sb3dwcmkiKS5oaWRlKCksIGMgKz0gdCgiIyIgKyBlLmV4dEJyYW5kICsgIl9sb3dwcmkiKS5vdXRlcldpZHRoKCkpLCAwID4gYyAmJiB0KCIjIiArIGUuZXh0QnJhbmQgKyAiX3poaWRlbWFpIikuaXMoIjp2aXNpYmxlIikgJiYgKHQoIiMiICsgZS5leHRCcmFuZCArICJfemhpZGVtYWkiKS5oaWRlKCksIGMgKz0gdCgiIyIgKyBlLmV4dEJyYW5kICsgIl96aGlkZW1haSIpLm91dGVyV2lkdGgoKSksIDMwMCA+IGMgJiYgdCgiIyIgKyBlLmV4dEJyYW5kICsgIl9oaXN0b3J5IikuaXMoIjp2aXNpYmxlIikgJiYgKGMgKz0gMTAwLCB0KCIjIiArIGUuZXh0QnJhbmQgKyAiX2hpc3RvcnkiKS5oaWRlKCkpLCAzMDAgPiBjICYmIHQoIiNwcm9tb19xdWFuX2J0biIpLmlzKCI6dmlzaWJsZSIpICYmIChjICs9IDEyMSwgdCgiI3Byb21vX3F1YW5fYnRuIikuaGlkZSgpKSwgIm1zaWUiID09IGUuYnJvd3Nlci5hZ2VudCAmJiBlLmJyb3dzZXIudmVyIDw9IDggPyAoZS5JRTggJiYgKCJkYW5nZGFuZyIgPT0gZS5zaXRlID8gdCgiIyIgKyBlLmV4dE5hbWUgKyAiLXNlYXJjaC1wcm9kdWN0IikuY3NzKCJ3aWR0aCIsIGwgLSByIC0gOCkgOiB0KCIjIiArIGUuZXh0TmFtZSArICItc2VhcmNoLXByb2R1Y3QiKS5jc3MoIndpZHRoIiwgbCAtIHIgLSAxKSksIGUuSUU3ICYmIHQoIiMiICsgZS5leHROYW1lICsgIi1zZWFyY2gtcHJvZHVjdCIpLmNzcygid2lkdGgiLCBsIC0gciAtIDgpKSA6ICJkYW5nZGFuZyIgPT0gZS5zaXRlID8gdCgiIyIgKyBlLmV4dE5hbWUgKyAiLXNlYXJjaC1wcm9kdWN0IikuY3NzKCJ3aWR0aCIsIGwgLSByIC0gNikgOiB0KCIjIiArIGUuZXh0TmFtZSArICItc2VhcmNoLXByb2R1Y3QiKS5jc3MoIndpZHRoIiwgbCAtIHIgLSA2KSwgZS5JRTggJiYgInlvdWdvdSIgPT0gZS5zaXRlICYmIHQoIiMiICsgZS5leHROYW1lICsgIi1zZWFyY2gtcHJvZHVjdCIpLmNzcygid2lkdGgiLCBsIC0gciAtIDgpLCB0KHdpbmRvdykudHJpZ2dlcigicmVTaG93UHJpY2VUcmVuZCIpCgkJCQl9LAoJCQkJaW5pdF9pdGVtX2xpc3Q6IGZ1bmN0aW9uKG4pIHsKCQkJCQlpZiAobiA9ICJ1bmRlZmluZWQiID09IHR5cGVvZiBuID8gImFsbCIgOiBuLCAiYWxsIiAhPSBuKSB7CgkJCQkJCXZhciBpID0gdCgiIyIgKyBuICsgIi1pdGVtLWxpc3QiKS5jaGlsZHJlbigpOwoJCQkJCQllLnRvdGFsX251bVtuXSA9IGkubGVuZ3RoCgkJCQkJfSBlbHNlCgkJCQkJCWZvciAodmFyIGEgPSAwOyBhIDwgZS5tb2R1bGVfbmFtZS5sZW5ndGg7IGErKykgdGhpcy5pbml0X2l0ZW1fbGlzdChlLm1vZHVsZV9uYW1lW2FdKQoJCQkJfSwKCQkJCXNldF9wYWdlX2FyZ3M6IGZ1bmN0aW9uKG4pIHsKCQkJCQlpZiAobiA9ICJ1bmRlZmluZWQiID09IHR5cGVvZiBuID8gImFsbCIgOiBuLCAiYWxsIiAhPSBuKSB0KCIjIiArIG4gKyAiLWN1cnJlbnQtcGFnZSIpLmh0bWwoZS5wYWdlX25vd1tuXSksIHQoIiMiICsgbiArICItcGFnZS1udW0iKS5odG1sKGUucGFnZV90b3RhbFtuXSk7CgkJCQkJZWxzZQoJCQkJCQlmb3IgKHZhciBpID0gMDsgaSA8IGUubW9kdWxlX25hbWUubGVuZ3RoOyBpKyspIHRoaXMuc2V0X3BhZ2VfYXJncyhlLm1vZHVsZV9uYW1lW2ldKQoJCQkJfSwKCQkJCXNldF9pdGVtX2FyZ3M6IGZ1bmN0aW9uKHQpIHsKCQkJCQl2YXIgaSA9IG4oNzQpLmluaXQoKTsKCQkJCQl0ID0gInVuZGVmaW5lZCIgPT0gdHlwZW9mIHQgPyAiYWxsIiA6IHQ7CgkJCQkJdmFyIGEgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggPiAwID8gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIDogZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDsKCQkJCQlpZiAoYSA9IDgwMCA+IGEgPyA4MDAgOiBhLCBlLnBhZ2Vfc2l6ZSA9IHBhcnNlSW50KChhIC0gaS50dXJucFcpIC8gMjg2KSwgZS5wYWdlX3NpemVfbWluaSA9IHBhcnNlSW50KChhIC0gMzEwKSAvIDI4NiksICJhbGwiICE9IHQpICJhbHNvX2J1eSIgPT0gdCB8fCAiYjJjX2Z1enp5IiA9PSB0IHx8ICJ0YW9iYW8iID09IHQgfHwgInRtYWxsIiA9PSB0IHx8ICJsb3dwcmkiID09IHQgfHwgInpoaWRlbWFpIiA9PSB0IHx8ICJzZWFyY2hsb3dwcmkiID09IHQgPyAoZS5wYWdlX25vd1t0XSA9IDEsIGUucGFnZV90b3RhbFt0XSA9IGUudG90YWxfbnVtW3RdICUgZS5wYWdlX3NpemUgPT0gMCA/IHBhcnNlSW50KGUudG90YWxfbnVtW3RdIC8gZS5wYWdlX3NpemUpIDogcGFyc2VJbnQoZS50b3RhbF9udW1bdF0gLyBlLnBhZ2Vfc2l6ZSkgKyAxKSA6IChlLnBhZ2Vfbm93W3RdID0gMSwgZS5wYWdlX3RvdGFsW3RdID0gZS50b3RhbF9udW1bdF0gJSBlLnBhZ2Vfc2l6ZV9taW5pID09IDAgPyBwYXJzZUludChlLnRvdGFsX251bVt0XSAvIGUucGFnZV9zaXplX21pbmkpIDogcGFyc2VJbnQoZS50b3RhbF9udW1bdF0gLyBlLnBhZ2Vfc2l6ZV9taW5pKSArIDEpOwoJCQkJCWVsc2UKCQkJCQkJZm9yICh2YXIgbyA9IDA7IG8gPCBlLm1vZHVsZV9uYW1lLmxlbmd0aDsgbysrKSB0aGlzLnNldF9pdGVtX2FyZ3MoZS5tb2R1bGVfbmFtZVtvXSkKCQkJCX0sCgkJCQljaGFuZ2VfcGFnZTogZnVuY3Rpb24obiwgaSwgYSkgewoJCQkJCXZhciBvID0gZS5wYWdlX3NpemVfbWluaTsKCQkJCQkoImFsc29fYnV5IiA9PSBuIHx8ICJiMmNfZnV6enkiID09IG4gfHwgInRhb2JhbyIgPT0gbiB8fCAidG1hbGwiID09IG4gfHwgImxvd3ByaSIgPT0gbiB8fCAiemhpZGVtYWkiID09IG4gfHwgInNlYXJjaGxvd3ByaSIgPT0gbikgJiYgKG8gPSBlLnBhZ2Vfc2l6ZSksICJ1bmRlZmluZWQiICE9IHR5cGVvZiBhID8gZS5wYWdlX25vd1tuXSA9IGEgPj0gMSAmJiBhIDw9IGUucGFnZV90b3RhbFtuXSA/IGEgOiAxIDogLTEgPT0gaSA/IGUucGFnZV9ub3dbbl0gPSAxID09IGUucGFnZV9ub3dbbl0gPyBlLnBhZ2VfdG90YWxbbl0gOiAtLWUucGFnZV9ub3dbbl0gOiAxID09IGkgJiYgKGUucGFnZV9ub3dbbl0gPSBlLnBhZ2Vfbm93W25dID09IGUucGFnZV90b3RhbFtuXSA/IDEgOiArK2UucGFnZV9ub3dbbl0pLCB0KCIjIiArIG4gKyAiLWN1cnJlbnQtcGFnZSIpLmh0bWwoZS5wYWdlX25vd1tuXSk7CgkJCQkJdmFyIHIgPSAoZS5wYWdlX25vd1tuXSAtIDEpICogbywKCQkJCQkJcyA9IGUucGFnZV9ub3dbbl0gKiBvOwoJCQkJCXMgPSBzID4gZS50b3RhbF9udW1bbl0gPyBlLnRvdGFsX251bVtuXSA6IHMsIHRoaXMubG9hZF9pbWFnZShuLCByLCBzKQoJCQkJfSwKCQkJCWNoZWNrX2FuaW1hdGU6IGZ1bmN0aW9uKCkgewoJCQkJCXRyeSB7CgkJCQkJCWlmICgidW5kZWZpbmVkIiA9PSB0eXBlb2YgdCgiPGRpdj4iKS5hbmltYXRlKSByZXR1cm4gITEKCQkJCQl9IGNhdGNoIChlKSB7CgkJCQkJCXJldHVybiAhMQoJCQkJCX0KCQkJCQlyZXR1cm4gITAKCQkJCX0sCgkJCQljaGVja19pbWFnZTogZnVuY3Rpb24obiwgaSwgYSkgewoJCQkJCXZhciBvID0gInVuZGVmaW5lZCIgPT0gdHlwZW9mIGEgfHwgIiIgPT0gYSB8fCBudWxsID09IGEgPyAxMDAgOiBhLAoJCQkJCQlyID0gbiwKCQkJCQkJcyA9IG5ldyBJbWFnZSwKCQkJCQkJbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGkpOwoJCQkJCSJtc2llIiA9PSBlLmJyb3dzZXIuYWdlbnQgJiYgZS5icm93c2VyLnZlciA8IDExID8gcy5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsKCQkJCQkJaWYgKCJjb21wbGV0ZSIgPT0gcy5yZWFkeVN0YXRlIHx8ICJsb2FkZWQiID09IHMucmVhZHlTdGF0ZSkgewoJCQkJCQkJaWYgKHMud2lkdGggPiAwICYmIHMuaGVpZ2h0ID4gMCkgewoJCQkJCQkJCXZhciBlID0gbyAvIHMud2lkdGggPCBvIC8gcy5oZWlnaHQgPyBvIC8gcy53aWR0aCA6IG8gLyBzLmhlaWdodDsKCQkJCQkJCQkxID49IGUgPyAodCgiIyIgKyBpKS5jc3MoIndpZHRoIiwgcy53aWR0aCAqIGUpLCB0KCIjIiArIGkpLmNzcygiaGVpZ2h0Iiwgcy5oZWlnaHQgKiBlKSkgOiAodCgiIyIgKyBpKS5jc3MoIndpZHRoIiwgcy53aWR0aCksIHQoIiMiICsgaSkuY3NzKCJoZWlnaHQiLCBzLmhlaWdodCkpCgkJCQkJCQl9CgkJCQkJCQl0KCIjIiArIGkpLmF0dHIoInNyYyIsIG4pCgkJCQkJCX0KCQkJCQl9IDogcy5vbmxvYWQgPSBmdW5jdGlvbigpIHsKCQkJCQkJMSA9PSBzLmNvbXBsZXRlICYmIHQoIiMiICsgaSkuYXR0cigic3JjIiwgbikKCQkJCQl9LCBzLm9uZXJyb3IgPSBmdW5jdGlvbihuKSB7CgkJCQkJCWwuc3JjID0gZS5zX3NlcnZlciArICIvaW1hZ2VzL2V4dGVuc2lvbnMvZGVmYXVsdF9sb2FkX2ltYWdlLnBuZyIsIHQobCkud2lkdGgobC5nZXRBdHRyaWJ1dGUoImRfd2lkdGgiKSB8fCAiOTBweCIpLCB0KGwpLmhlaWdodChsLmdldEF0dHJpYnV0ZSgiZF93aWR0aCIpIHx8ICI5MHB4IiksIGwuc2V0QXR0cmlidXRlKCJkYXRhLW9yaWdpbmFsIiwgZS5zX3NlcnZlciArICIvaW1hZ2VzL2V4dGVuc2lvbnMvZGVmYXVsdF9sb2FkX2ltYWdlLnBuZyIpCgkJCQkJfSwgcy5zcmMgPSByCgkJCQl9LAoJCQkJZWRpdE9yaWdpbmFsOiBmdW5jdGlvbihuKSB7CgkJCQkJdChuKS5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgbiA9IHQodGhpcyksCgkJCQkJCQlpID0gdCh0aGlzKS5hdHRyKCJpZCIpOwoJCQkJCQluLmF0dHIoImRhdGEtb3JpZ2luYWwiKSAhPSBuLmF0dHIoInNyYyIpICYmIGUuY2hlY2tfaW1hZ2Uobi5hdHRyKCJkYXRhLW9yaWdpbmFsIiksIGkpCgkJCQkJfSkKCQkJCX0sCgkJCQlsb2FkX2ltYWdlOiBmdW5jdGlvbihuLCBpLCBhKSB7CgkJCQkJdmFyIG8gPSB0aGlzLAoJCQkJCQlyID0gbmV3IE9iamVjdDsKCQkJCQlpZiAoci51c2VyQWdlbnQgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLCByLmllID0gL21zaWUvLnRlc3Qoci51c2VyQWdlbnQpLCByLk1veiA9IC9nZWNrby8udGVzdChyLnVzZXJBZ2VudCksICJ1bmRlZmluZWQiID09IHR5cGVvZiBuKSByZXR1cm4gITE7CgkJCQkJdmFyIHMgPSB0KCIjIiArIG4gKyAiLWl0ZW0tbGlzdCBsaSIpLAoJCQkJCQlsID0gdCgiIyIgKyBuICsgIi1pdGVtLWxpc3QiKTsKCQkJCQlpZiAoci5pZSB8fCAhdGhpcy5jaGVja19hbmltYXRlKCkpIHsKCQkJCQkJdChzKS5jc3MoImRpc3BsYXkiLCAibm9uZSIpOwoJCQkJCQlmb3IgKHZhciBjID0gaTsgYSA+IGM7IGMrKykgdCgiIyIgKyBuICsgIi1wcm9kLWl0ZW0tIiArIGMpLmNzcygiZGlzcGxheSIsICJibG9jayIpOwoJCQkJCQlmb3IgKHZhciBjID0gaTsgYSA+IGM7IGMrKykgewoJCQkJCQkJdmFyIGQgPSAiIyIgKyBuICsgIi1wcm9kLWl0ZW0tIiArIGMgKyAoIiAuIiArIGUuZXh0TmFtZSArICItbGF6eSIpOwoJCQkJCQkJby5lZGl0T3JpZ2luYWwoZCkKCQkJCQkJfQoJCQkJCX0gZWxzZSBsLmFuaW1hdGUoewoJCQkJCQlvcGFjaXR5OiAiMCIKCQkJCQl9LCAxMDAsICJzd2luZyIsIGZ1bmN0aW9uKCkgewoJCQkJCQl0KHMpLmNzcygiZGlzcGxheSIsICJub25lIik7CgkJCQkJCWZvciAodmFyIHIgPSBpOyBhID4gcjsgcisrKSB0KCIjIiArIG4gKyAiLXByb2QtaXRlbS0iICsgcikuY3NzKCJkaXNwbGF5IiwgImJsb2NrIik7CgkJCQkJCWwuYW5pbWF0ZSh7CgkJCQkJCQlvcGFjaXR5OiAiMSIKCQkJCQkJfSwgMTAwLCAic3dpbmciLCBmdW5jdGlvbigpIHsKCQkJCQkJCWZvciAodmFyIHQgPSBpOyBhID4gdDsgdCsrKSB7CgkJCQkJCQkJdmFyIHIgPSAiIyIgKyBuICsgIi1wcm9kLWl0ZW0tIiArIHQgKyAoIiAuIiArIGUuZXh0TmFtZSArICItbGF6eSIpOwoJCQkJCQkJCW8uZWRpdE9yaWdpbmFsKHIpCgkJCQkJCQl9CgkJCQkJCX0pCgkJCQkJfSkKCQkJCX0sCgkJCQlzZXRQYWdlQXJnczogZnVuY3Rpb24obiwgaSkgewoJCQkJCXQoIiMiICsgbiArICI+bGkiKS5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgbiA9IHQodGhpcykuZmluZCgiLiIgKyBlLmV4dEJyYW5kICsgIi1saXN0LWl0ZW0iKSwKCQkJCQkJCWEgPSBuLmxlbmd0aCwKCQkJCQkJCW8gPSBhICUgaSA9PSAwID8gcGFyc2VJbnQoYSAvIGkpIDogcGFyc2VJbnQoYSAvIGkpICsgMSwKCQkJCQkJCXIgPSAwLAoJCQkJCQkJcyA9IHQodGhpcykuZmluZCgiZW1baWRePXBhZ2Utbm93XSIpOwoJCQkJCQllLmxvYWRJbWFnZShuLCAwLCBpKSwgdCh0aGlzKS5maW5kKCIuIiArIGUuZXh0QnJhbmQgKyAiLWxlZnQiKS5jbGljayhmdW5jdGlvbigpIHsKCQkJCQkJCWlmIChyID49IDApIHsKCQkJCQkJCQlyLS0sIDAgPiByICYmIChyID0gbyAtIDEpOwoJCQkJCQkJCWZvciAodmFyIHQgPSByICogaSwgbCA9IChyICsgMSkgKiBpLCBjID0gMDsgYSA+IGM7IGMrKykgYyA+PSB0ICYmIGwgPiBjID8gbi5lcShjKS5jc3MoImRpc3BsYXkiLCAiYmxvY2siKSA6IG4uZXEoYykuaGlkZSgpOwoJCQkJCQkJCWUubG9hZEltYWdlKG4sIHQsIGwpLCBzLnRleHQociArIDEpCgkJCQkJCQl9CgkJCQkJCX0pLCB0KHRoaXMpLmZpbmQoIi4iICsgZS5leHRCcmFuZCArICItcmlnaHQiKS5jbGljayhmdW5jdGlvbigpIHsKCQkJCQkJCWlmIChvIC0gMSA+PSByKSB7CgkJCQkJCQkJcisrLCByID09IG8gJiYgKHIgPSAwKTsKCQkJCQkJCQlmb3IgKHZhciB0ID0gMCwgbCA9IHIgKiBpLCBjID0gKHIgKyAxKSAqIGk7IGEgPiB0OyB0KyspIHQgPj0gbCAmJiBjID4gdCA/IG4uZXEodCkuY3NzKCJkaXNwbGF5IiwgImJsb2NrIikgOiBuLmVxKHQpLmhpZGUoKTsKCQkJCQkJCQllLmxvYWRJbWFnZShuLCBsLCBjKSwgcy50ZXh0KHIgKyAxKQoJCQkJCQkJfQoJCQkJCQl9KQoJCQkJCX0pCgkJCQl9LAoJCQkJbG9hZEltYWdlOiBmdW5jdGlvbih0LCBuLCBpLCBhKSB7CgkJCQkJdmFyIG8gPSA5MDsKCQkJCQlhICYmIChvID0gYSk7CgkJCQkJZm9yICh2YXIgciA9IG47IGkgPiByOyByKyspIHsKCQkJCQkJdmFyIHMgPSB0LmVxKHIpLmZpbmQoImltZyIpLmVxKDApOwoJCQkJCQlzLmF0dHIoImRhdGEtb3JpZ2luYWwiKSAhPSBzLmF0dHIoInNyYyIpICYmIGUuY2hlY2tJbWFnZShzLmF0dHIoImRhdGEtb3JpZ2luYWwiKSwgcywgbykKCQkJCQl9CgkJCQl9LAoJCQkJY2hlY2tJbWFnZTogZnVuY3Rpb24obiwgaSwgYSwgbykgewoJCQkJCXZhciByID0gInVuZGVmaW5lZCIgPT0gdHlwZW9mIGEgfHwgIiIgPT0gYSB8fCBudWxsID09IGEgPyA5MCA6IGEsCgkJCQkJCXMgPSBuLAoJCQkJCQlsID0gbmV3IEltYWdlOwoJCQkJCSJtc2llIiA9PSBlLmJyb3dzZXIuYWdlbnQgJiYgZS5icm93c2VyLnZlciA8IDExID8gbC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsKCQkJCQkJaWYgKCJjb21wbGV0ZSIgPT0gbC5yZWFkeVN0YXRlIHx8ICJsb2FkZWQiID09IGwucmVhZHlTdGF0ZSkgewoJCQkJCQkJaWYgKGwud2lkdGggPiAwICYmIGwuaGVpZ2h0ID4gMCkgewoJCQkJCQkJCXZhciBlID0gciAvIGwud2lkdGggPCByIC8gbC5oZWlnaHQgPyByIC8gbC53aWR0aCA6IHIgLyBsLmhlaWdodDsKCQkJCQkJCQkxID49IGUgPyAoaS5jc3MoIndpZHRoIiwgbC53aWR0aCAqIGUpLCBpLmNzcygiaGVpZ2h0IiwgbC5oZWlnaHQgKiBlKSkgOiAoaS5jc3MoIndpZHRoIiwgbC53aWR0aCksIGkuY3NzKCJoZWlnaHQiLCBsLmhlaWdodCkpCgkJCQkJCQl9CgkJCQkJCQlpLmF0dHIoInNyYyIsIG4pCgkJCQkJCX0KCQkJCQl9IDogbC5vbmxvYWQgPSBmdW5jdGlvbigpIHsKCQkJCQkJaWYgKDEgPT0gbC5jb21wbGV0ZSkgewoJCQkJCQkJaWYgKGwud2lkdGggPiAwICYmIGwuaGVpZ2h0ID4gMCkgewoJCQkJCQkJCXZhciBlID0gciAvIGwud2lkdGggPCByIC8gbC5oZWlnaHQgPyByIC8gbC53aWR0aCA6IHIgLyBsLmhlaWdodDsKCQkJCQkJCQkxID49IGUgPyAoaS5jc3MoIndpZHRoIiwgbC53aWR0aCAqIGUpLCBpLmNzcygiaGVpZ2h0IiwgbC5oZWlnaHQgKiBlKSkgOiAoaS5jc3MoIndpZHRoIiwgbC53aWR0aCksIGkuY3NzKCJoZWlnaHQiLCBsLmhlaWdodCkpCgkJCQkJCQl9CgkJCQkJCQlpLmF0dHIoInNyYyIsIG4pLCBvICYmIG8oKQoJCQkJCQl9CgkJCQkJfSwgbC5vbmVycm9yID0gZnVuY3Rpb24oKSB7CgkJCQkJCWkuYXR0cigic3JjIiwgZS5zX3NlcnZlciArICIvaW1hZ2VzL2V4dGVuc2lvbnMvZGVmYXVsdF9sb2FkX2ltYWdlLnBuZyIpLCBpLmF0dHIoImRhdGEtb3JpZ2luYWwiLCBlLnNfc2VydmVyICsgIi9pbWFnZXMvZXh0ZW5zaW9ucy9kZWZhdWx0X2xvYWRfaW1hZ2UucG5nIiksIHQoaSkud2lkdGgoaS5hdHRyKCJkX3dpZHRoIikgfHwgIjkwcHgiKSwgdChpKS5oZWlnaHQoaS5hdHRyKCJkX2hlaWdodCIpIHx8ICI5MHB4IikKCQkJCQl9LCBsLnNyYyA9IHMKCQkJCX0sCgkJCQlnZXRGaXhlZFNob3dQcm9kdWN0TnVtOiBmdW5jdGlvbigpIHsKCQkJCQlyZXR1cm4gcGFyc2VJbnQoKGUud2lkdGggLSA2NikgLyAyMDApCgkJCQl9LAoJCQkJc2V0TW91c2VPdmVySGFuZGxlcjogZnVuY3Rpb24oKSB7CgkJCQkJdmFyIG4gPSAibW91c2VlbnRlciIsCgkJCQkJCW8gPSAibW91c2VsZWF2ZSI7CgkJCQkJdCgiIiArIGUuZHZhbCkuZGVsZWdhdGUoInNwYW4uIiArIGUuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbSwgZGl2LiIgKyBlLmV4dEJyYW5kICsgIi1jb21wYXJlLWl0ZW0tZGV0YWlsIiwgbiwgZnVuY3Rpb24oKSB7CgkJCQkJCWNsZWFyVGltZW91dChlLnRpbWVyMik7CgkJCQkJCXZhciBuID0gdCh0aGlzKS5wYXJlbnRzKCkuZXEoMCk7CgkJCQkJCXQodGhpcylbMF0uY2xhc3NOYW1lID09PSBlLmV4dEJyYW5kICsgIi1jb21wYXJlLWl0ZW0iICYmIChpKCJob3ZlcjptYWluOmNvbXBhcmUiKSwgYS5sb2coIuS4u+W3peWFt+agj+avlOS7t+m8oOagh+aCrOa1riIpKSwgdCh0aGlzKVswXS5jbGFzc05hbWUuaW5kZXhPZihlLmV4dEJyYW5kICsgIi10cmVuZCIpID4gLTEgJiYgKGkoImhvdmVyOm1haW46cHJpY2V0cmVuZCIpLCBhLmxvZygi5Li75bel5YW35qCP5Lu35qC86LaL5Yq/6byg5qCH5oKs5rWuIikpLCB0KCJkaXYuIiArIGUuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbS1kZXRhaWwiKS5oaWRlKCksIHQoInNwYW4uIiArIGUuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbSIpLnJlbW92ZUNsYXNzKGUuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbS1ob3ZlciIpLCBuLmNoaWxkcmVuKCJzcGFuLiIgKyBlLmV4dEJyYW5kICsgIi1jb21wYXJlLWl0ZW0iKS5hZGRDbGFzcyhlLmV4dEJyYW5kICsgIi1jb21wYXJlLWl0ZW0taG92ZXIiKSwgbi5jaGlsZHJlbigiZGl2LiIgKyBlLmV4dEJyYW5kICsgIi1jb21wYXJlLWl0ZW0tZGV0YWlsIikuY3NzKCJkaXNwbGF5IiwgImJsb2NrIikKCQkJCQl9KSwgdCgiIiArIGUuZHZhbCkuZGVsZWdhdGUoInNwYW4uIiArIGUuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbSwgZGl2LiIgKyBlLmV4dEJyYW5kICsgIi1jb21wYXJlLWl0ZW0tZGV0YWlsIiwgbywgZnVuY3Rpb24oKSB7CgkJCQkJCWNsZWFyVGltZW91dChlLnRpbWVyMik7CgkJCQkJCXZhciBuID0gdCh0aGlzKS5wYXJlbnRzKCkuZXEoMCk7CgkJCQkJCWUudGltZXIyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJCW4uY2hpbGRyZW4oInNwYW4uIiArIGUuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbSIpLnJlbW92ZUNsYXNzKGUuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbS1ob3ZlciIpLCBuLmNoaWxkcmVuKCJkaXYuIiArIGUuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbS1kZXRhaWwiKS5oaWRlKCkKCQkJCQkJfSwgMjAwKQoJCQkJCX0pLCB0KCIiICsgZS5kdmFsKS5kZWxlZ2F0ZSgic3Bhbi4iICsgZS5leHRCcmFuZCArICItY29tcGFyZS1pdGVtIiwgImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCXQodGhpcykuYXR0cigiaHJlZiIpICYmIHdpbmRvdy5vcGVuKHQodGhpcykuYXR0cigiaHJlZiIpKQoJCQkJCX0pLCB0KCIiICsgZS5kdmFsKS5kZWxlZ2F0ZSgiIyIgKyBlLmV4dEJyYW5kICsgIl9mYXZvciwjIiArIGUuZXh0QnJhbmQgKyAiLWZhdm9yLWRldGFpbCIsIG4sIGZ1bmN0aW9uKCkgewoJCQkJCQl0KCJhLiIgKyBlLmV4dEJyYW5kICsgIi1jb21wYXJlLWl0ZW0iKS5yZW1vdmVDbGFzcyhlLmV4dEJyYW5kICsgIi1jb21wYXJlLWl0ZW0taG92ZXIiKSwgdCgiIyIgKyBlLmV4dEJyYW5kICsgIl9mYXZvciIpLmFkZENsYXNzKGUuZXh0QnJhbmQgKyAiX2Zhdm9yX2hvdmVyIiksIHQoImRpdi4iICsgZS5leHRCcmFuZCArICItY29tcGFyZS1pdGVtLWRldGFpbCIpLmhpZGUoKSwgdCgiIyIgKyBlLmV4dEJyYW5kICsgIi1mYXZvci1kZXRhaWwiKS5zaG93KCksIGkoImhvdmVyOm1haW46ZmF2b3IiKSwgYS5sb2coIuS4u+W3peWFt+agj+aUtuiXj+Wkuem8oOagh+aCrOa1riIpCgkJCQkJfSksIHQoIiIgKyBlLmR2YWwpLmRlbGVnYXRlKCIjIiArIGUuZXh0QnJhbmQgKyAiX2Zhdm9yLCMiICsgZS5leHRCcmFuZCArICItZmF2b3ItZGV0YWlsIiwgbywgZnVuY3Rpb24oKSB7CgkJCQkJCXQoIiMiICsgZS5leHRCcmFuZCArICJfZmF2b3IiKS5yZW1vdmVDbGFzcyhlLmV4dEJyYW5kICsgIl9mYXZvcl9ob3ZlciIpLCB0KCIjIiArIGUuZXh0QnJhbmQgKyAiLWZhdm9yLWRldGFpbCIpLmhpZGUoKQoJCQkJCX0pCgkJCQl9LAoJCQkJZ2V0Rml4ZWRDb21wYXJlTnVtOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgbiA9IDMyMDsKCQkJCQkiYmxvY2siID09IHQoIiMiICsgZS5leHRCcmFuZCArICItdHJlbmQiKS5jc3MoImRpc3BsYXkiKSAmJiAobiArPSAxMjApLCAiYmxvY2siID09IHQoIiMiICsgZS5leHRCcmFuZCArICJfaGlzdG9yeSIpLmNzcygiZGlzcGxheSIpICYmIChuICs9IDExMiksICJibG9jayIgPT0gdCgiIyIgKyBlLmV4dEJyYW5kICsgIi1zZWFyY2giKS5jc3MoImRpc3BsYXkiKSAmJiAobiArPSAyMjApLCAiYmxvY2siID09IHQoIiMiICsgZS5leHRCcmFuZCArICItY29tcGFyZS10bWFsbCIpLmNzcygiZGlzcGxheSIpICYmIChuICs9IHQoIiMiICsgZS5leHRCcmFuZCArICItY29tcGFyZS10bWFsbCBzcGFuIikuZXEoMCkub3V0ZXJXaWR0aCgpKSwgImJsb2NrIiA9PSB0KCIjIiArIGUuZXh0QnJhbmQgKyAiLWNvbXBhcmUtdGFvYmFvIikuY3NzKCJkaXNwbGF5IikgJiYgKG4gKz0gdCgiIyIgKyBlLmV4dEJyYW5kICsgIi1jb21wYXJlLXRhb2JhbyBzcGFuIikuZXEoMCkub3V0ZXJXaWR0aCgpKSwgImJsb2NrIiA9PSB0KCIjIiArIGUuZXh0QnJhbmQgKyAiLW1vcmUiKS5jc3MoImRpc3BsYXkiKSAmJiAobiArPSA2MCksICJibG9jayIgPT0gdCgiIyIgKyBlLmV4dEJyYW5kICsgIi1kb3ViYW4iKS5jc3MoImRpc3BsYXkiKSAmJiAobiArPSA4MCk7CgkJCQkJdmFyIGkgPSBlLndpZHRoIC0gbiwKCQkJCQkJYSA9IDA7CgkJCQkJcmV0dXJuIHQoIiMiICsgZS5leHRCcmFuZCArICItY29tcGFyZT5saSIpLmVhY2goZnVuY3Rpb24oKSB7CgkJCQkJCWUuSUU2IHx8IGUuSUU3IHx8IGUuSUU4IHx8IGUuSUU5IHx8IGUuSUUxMCB8fCBlLklFMTEgPyBpIC0gODAgPj0gdCh0aGlzKS5vdXRlcldpZHRoKCkgJiYgKGkgLT0gdCh0aGlzKS5vdXRlcldpZHRoKCksICsrYSkgOiBpID49IHQodGhpcykub3V0ZXJXaWR0aCgpICYmIChpIC09IHQodGhpcykub3V0ZXJXaWR0aCgpLCArK2EpCgkJCQkJfSksIGEKCQkJCX0sCgkJCQlhdXRvRml4V2lkdGg6IGZ1bmN0aW9uKGkpIHsKCQkJCQl2YXIgYSA9IG4oNzUpLAoJCQkJCQlvID0gbig4NyksCgkJCQkJCXIgPSB0KGUuZHZhbCksCgkJCQkJCXMgPSBpIHx8IHIuYXR0cigiYjJjIikgJiYgImZ1enp5IiA9PSByLmF0dHIoImIyYyIpOwoJCQkJCWlmIChzID0gITEsIDEgIT0gci5hdHRyKCJhdXRvIikpIHsKCQkJCQkJZS53aWR0aCA8IDFlMyA/IHQoIiMiICsgZS5leHRCcmFuZCArICItc2VhcmNoIikuY3NzKCJkaXNwbGF5IiwgIm5vbmUiKSA6ICh0KCIjIiArIGUuZXh0QnJhbmQgKyAiLXNlYXJjaCIpLmNzcygiZGlzcGxheSIsICJibG9jayIpLCAiYW1hem9uIiA9PSBlLnNpdGUgJiYgdCgiLiIgKyBlLmV4dEJyYW5kICsgIi1zZWFyY2gtaW5wdXQiKS5hZGRDbGFzcygiYW1hem9uX2hhbmsiKSk7CgkJCQkJCXZhciBsID0gdCgiIyIgKyBlLmV4dEJyYW5kICsgIi1jb21wYXJlPmxpIiksCgkJCQkJCQljID0gbC5sZW5ndGgsCgkJCQkJCQlkID0gZS5nZXRGaXhlZENvbXBhcmVOdW0oKTsKCQkJCQkJYyAtIGQgPj0gMiA/IHMgfHwgKHQoIiMiICsgZS5leHRCcmFuZCArICItc2VhcmNoIikuYXR0cigic2hvdyIsIDApLmhpZGUoKSwgZCA9IGUuZ2V0Rml4ZWRDb21wYXJlTnVtKCkpIDogZCAtIGMgPj0gMiAmJiAodCgiIyIgKyBlLmV4dEJyYW5kICsgIi1zZWFyY2giKS5hdHRyKCJzaG93IiwgMSkuc2hvdygpLCBkID0gZS5nZXRGaXhlZENvbXBhcmVOdW0oKSk7CgkJCQkJCWZvciAodmFyIHAgPSAwOyBjID4gcDsgcCsrKSBkID4gcCA/IGwuZXEocCkuc2hvdygpIDogbC5lcShwKS5oaWRlKCk7CgkJCQkJCWEuc2V0Qm90dG9tVmlld09mZnNldCgpLCBvLnNldEJvdHRvbVZpZXdPZmZzZXQoKQoJCQkJCX0KCQkJCX0sCgkJCQljaXJjbGVOb3RpY2U6IGZ1bmN0aW9uKG4sIGkpIHsKCQkJCQlpZiAobiB8fCBpKSB7CgkJCQkJCXZhciBhID0gIiI7CgkJCQkJCW4gJiYgKGEgKz0gIi4iICsgZS5leHRCcmFuZCArICItcXVhbiIsIGUuc2hvd19xdWFuID0gMSksIGkgJiYgKGEgKz0gIiIgPT09IGEgPyAiIiA6ICIsIiwgYSArPSAiLiIgKyBlLmV4dEJyYW5kICsgIi1jdSIsIGUuc2hvd19jdSA9IDEpLCAiIiAhPSBhICYmIHQoYSkuY3NzKCJwb3NpdGlvbiIsICJyZWxhdGl2ZSIpLmFwcGVuZCh0KCI8Yj4iLCB7CgkJCQkJCQkiY2xhc3MiOiBlLmV4dEJyYW5kICsgIi1iZyAiICsgZS5leHRCcmFuZCArICItY3UtY2lyY2xlIgoJCQkJCQl9KSkKCQkJCQl9CgkJCQl9CgkJCX0pCgkJfSkuY2FsbCh0LCBuKDEpLCBuKDYpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCwgbikgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBpID0gdm9pZCAwLAoJCQkJYSA9IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gdCh3aW5kb3cpLndpZHRoKCksCgkJCQkJCW4gPSAyNjgsCgkJCQkJCWkgPSAxMzAsCgkJCQkJCWEgPSAzMDIsCgkJCQkJCW8gPSBlIC0gMiAqIGkgLSBhLAoJCQkJCQlyID0gcGFyc2VJbnQobyAvIG4pOwoJCQkJCXJldHVybiBvIC0gciAqIG4gKyA4MCA+IDI2OCAmJiAocisrLCBpID0gcGFyc2VJbnQoKGUgLSByICogbiAtIGEpIC8gMiksIG8gPSBlIC0gMiAqIGkgLSBhKSwgewoJCQkJCQlwcm9kdWN0VzogbywKCQkJCQkJdHVybnBXOiBpLAoJCQkJCQlzaG93TGlzdE51bTogcgoJCQkJCX0KCQkJCX07CgkJCWUuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7CgkJCQlpZiAoaSkgcmV0dXJuIGk7CgkJCQl2YXIgZSA9IHQod2luZG93KS53aWR0aCgpLAoJCQkJCW8gPSAyNjgsCgkJCQkJciA9IDE0NywKCQkJCQlzID0gZSAtIDIgKiByLAoJCQkJCWwgPSBwYXJzZUludChzIC8gbyk7CgkJCQlzIC0gbCAqIG8gKyA5MiA+IDI2OCAmJiAobCsrLCByID0gcGFyc2VJbnQoKGUgLSBsICogbykgLyAyKSwgcyA9IGUgLSAyICogciksICJhbWF6b24iID09PSBuLnNpdGUgJiYgci0tOwoJCQkJdmFyIGMgPSBhKCk7CgkJCQlyZXR1cm4gaSA9IHsKCQkJCQlhbGxQcm9kdWN0VzogcywKCQkJCQl0dXJucFc6IHIsCgkJCQkJc2hvd0xpc3ROdW06IGwsCgkJCQkJYjJjUHJvZHVjdFc6IGMucHJvZHVjdFcsCgkJCQkJYjJjVHVybnBXOiBjLnR1cm5wVywKCQkJCQliMmNTaG93TGlzdE51bTogYy5zaG93TGlzdE51bQoJCQkJfQoJCQl9LCBlLmV4cG9ydHMuY2FsQm90dG9tQmFyID0gZnVuY3Rpb24oKSB7CgkJCQl2YXIgZSA9IHQoIiNiamRfbG9nbyIpLm91dGVyV2lkdGgoKSwKCQkJCQluID0gdCgiLmxlZnQtY29tcGFyZSIpLm91dGVyV2lkdGgoKSwKCQkJCQlpID0gdCgiLm5idC1hZGluZm8iKS5vdXRlcldpZHRoKCksCgkJCQkJYSA9IHQoIi5uYnQtY2xvc2UtYnRuIikub3V0ZXJXaWR0aCgpLAoJCQkJCW8gPSB0KCIucmlnaHQtaW5mbyIpLm91dGVyV2lkdGgoKSwKCQkJCQlyID0gdCh3aW5kb3cpLndpZHRoKCksCgkJCQkJcyA9IHIgLSAoZSArIG4gKyBpICsgYSArIG8gKyAxMTIgKyA5NCk7CgkJCQlyZXR1cm4gcwoJCQl9CgkJfSkuY2FsbCh0LCBuKDYpLCBuKDEpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQl2YXIgaTsKCQkoZnVuY3Rpb24oYSkgewoJCQkidXNlIHN0cmljdCI7CgkJCWkgPSBmdW5jdGlvbigpIHsKCQkJCXZhciBlID0gbig2KSwKCQkJCQl0ID0gbig5KSwKCQkJCQlpID0gbig3NiksCgkJCQkJbyA9IG4oNzcpOwoJCQkJcmV0dXJuIHsKCQkJCQlpbml0OiBmdW5jdGlvbihlLCBpKSB7CgkJCQkJCWlmIChudWxsICE9IGEuc2F2ZVRiUmVzRGF0YSkgcmV0dXJuIHZvaWQgdGhpcy5yZW5kZXJUYW9iYW9VSShhLnNhdmVUYlJlc0RhdGEpOwoJCQkJCQl2YXIgciA9IHRoaXMsCgkJCQkJCQlzID0gIjEiLAoJCQkJCQkJbCA9IGVbImNvZGUtc2VydmVyIl0sCgkJCQkJCQljID0gZS5leGFjdF9hcnIsCgkJCQkJCQlkID0gMTAwICogZS5ub3cucHJpY2U7CgkJCQkJCWQgfHwgKGQgPSAxMDAgKiBhLmRwLnByaWNlKSwgbCB8fCAobCA9IHt9LCBzID0gIjAiKTsKCQkJCQkJdmFyIHAgPSBbImFtYXpvbiIsICI2cG0iLCAiZWJheSJdOwoJCQkJCQlpZiAocC5pbmRleE9mKGEuc2l0ZSkgPiAtMSAmJiAoZCA9IDEwMCAqIGEuZHAucHJpY2UpLCAiYW1hem9uIiAhPSBhLnNpdGUgfHwgYy5icmFuZCB8fCAiMSIgPT09IGUubm93LnNpdGVfaWQpIHsKCQkJCQkJCXZhciBoID0gYS5zZXJ2ZXIgKyAiL2Jyd2V4dC90YnJlcz91bmlvbj0iICsgYS51bmlvbiArICImdXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQoYy51cmwpICsgIiZzaXRlPSIgKyBjLnNpdGUgKyAiJmlzYm49IiArIGMuaXNibiArICIma2V5d29yZHM9IiArIGVuY29kZVVSSUNvbXBvbmVudChjLmtleXdvcmRzKSArICImYnJhbmQ9IiArIGVuY29kZVVSSUNvbXBvbmVudChjLmJyYW5kKSArICImdHlwZT0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGMudHlwZSkgKyAiJnByaWNlPSIgKyBkICsgIiZjbGFzc19pZD0iICsgYy5jbGFzc19pZCArICImbmFtZT0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGEuZHAubmFtZSkgKyAiJmNvZGVfYnJhbmRfaWQ9IiArIGwuYnJhbmRfaWQgKyAiJmNvZGVfY2xlYW5fdGl0bGU9IiArIGVuY29kZVVSSUNvbXBvbmVudChsLmNsZWFuX3RpdGxlKSArICImY29kZV9jb2RlPSIgKyBsLmNvZGUgKyAiJmNvZGVfZGlzcGxheV9icmFuZD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGwuZGlzcGxheV9icmFuZCkgKyAiJmNvZGVfYnJhbmQ9IiArIGVuY29kZVVSSUNvbXBvbmVudChsLmJyYW5kKSArICImY29kZV9jbGFzc19pZD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGwuY2xhc3NfaWQpICsgIiZjb2RlX3ByaWNlPSIgKyBlbmNvZGVVUklDb21wb25lbnQobC5wcmljZSkgKyAiJmNvZGVfc3BlYz0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGwuc3BlYykgKyAiJmNvZGUtc2VydmVyPSIgKyBzOwoJCQkJCQkJdC5nZXQoaCkuZG9uZShmdW5jdGlvbihlKSB7CgkJCQkJCQkJInRhb2JhbyIgPT0gYS5zaXRlIHx8ICJ0bWFsbCIgPT0gYS5zaXRlID8gby5nZXRVbmlxUGlkKGUsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQkJYS5zYXZlVGJSZXNEYXRhID0gZSwgci5yZW5kZXJUYW9iYW9VSShlKSwgbig4NCkucmVuZGVyQnQoZSkKCQkJCQkJCQl9KSA6IG8uZ2V0SW1nU2VhcmNoKGUsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQkJYS5zYXZlVGJSZXNEYXRhID0gZSwgci5yZW5kZXJUYW9iYW9VSShlKSwgbig4NCkucmVuZGVyQnQoZSkKCQkJCQkJCQl9KQoJCQkJCQkJfSkKCQkJCQkJfQoJCQkJCX0sCgkJCQkJcmVuZGVyVGFvYmFvVUk6IGZ1bmN0aW9uKHQpIHsKCQkJCQkJdmFyIG4gPSB0aGlzLAoJCQkJCQkJaSA9IGEuZ2V0Rml4ZWRTaG93UHJvZHVjdE51bSgpOwoJCQkJCQluLnNob3dCb3R0b21WaWV3KCJ0bWFsbCIsIHQpLCBuLnNob3dCb3R0b21WaWV3KCJ0YW9iYW8iLCB0KSwgYS5zZXRQYWdlQXJncyhhLmV4dEJyYW5kICsgIi1jb21wYXJlLXRtYWxsIiwgaSksIGEuc2V0UGFnZUFyZ3MoYS5leHRCcmFuZCArICItY29tcGFyZS10YW9iYW8iLCBpKSwgbi5zZXRCb3R0b21WaWV3T2Zmc2V0KCksIGEuYXV0b0ZpeFdpZHRoKCksICIiID09IHQuc2VhcmNoLmtleXdvcmRzICYmICIiICE9IGEuZHAuaXNibiAmJiBlKCIuIiArIGEuZXh0QnJhbmQgKyAiLXNlYXJjaC1pbnB1dCIpLnZhbChhLmRwLmlzYm4pLCAiIiAhPSB0LnNlYXJjaC5rZXl3b3JkcyAmJiBlKCIuIiArIGEuZXh0QnJhbmQgKyAiLXNlYXJjaC1pbnB1dCIpLnZhbCh0LnNlYXJjaC5rZXl3b3JkcyksICJ2aXBzaG9wIiA9PT0gYS5zaXRlICYmIGUoIi4iICsgYS5leHRCcmFuZCArICItc2VhcmNoLWlucHV0IikudmFsKGEuZHAuY2F0X25hbWUpLCBlKHdpbmRvdykuYmluZCgicmVEcmF3VGFvYmFvQmFubmVyIiwgZnVuY3Rpb24oKSB7CgkJCQkJCQl2YXIgZSA9IGEuZ2V0Rml4ZWRTaG93UHJvZHVjdE51bSgpOwoJCQkJCQkJbi5zaG93Qm90dG9tVmlldygidG1hbGwiLCB0KSwgbi5zaG93Qm90dG9tVmlldygidGFvYmFvIiwgdCksIGEuc2V0UGFnZUFyZ3MoYS5leHRCcmFuZCArICItY29tcGFyZS10bWFsbCIsIGUpLCBhLnNldFBhZ2VBcmdzKGEuZXh0QnJhbmQgKyAiLWNvbXBhcmUtdGFvYmFvIiwgZSksIG4uc2V0Qm90dG9tVmlld09mZnNldCgpCgkJCQkJCX0pLCAxID09IGEucF9mb2xkICYmIGUoIi4iICsgYS5leHRCcmFuZCArICItY2xvc2UtbW9kdWxlIikuaGlkZSgpCgkJCQkJfSwKCQkJCQlzaG93Qm90dG9tVmlldzogZnVuY3Rpb24odCwgbikgewoJCQkJCQl2YXIgbyA9IGEuZ2V0Rml4ZWRTaG93UHJvZHVjdE51bSgpLAoJCQkJCQkJciA9ICIiOwoJCQkJCQlpZiAoInRtYWxsIiA9PSB0ID8gciA9ICLlpKnnjKvllYbln44iIDogInRhb2JhbyIgPT0gdCAmJiAociA9ICLmt5jlrp3nvZEiKSwgbi5zaXRlICYmIChyID0gIuWQjOexu+eDreWNliIpLCBuW3RdICYmIG5bdF0ubWluX3ByaWNlKSB7CgkJCQkJCQlpZiAoblt0XS5wcm9kdWN0Lmxlbmd0aCA+IDApIHsKCQkJCQkJCQl2YXIgcyA9IGkudGIoblt0XSk7CgkJCQkJCQkJaWYgKHMgaW5zdGFuY2VvZiBBcnJheSkgcmV0dXJuOwoJCQkJCQkJCWlmICgwID09PSBzLnByb2R1Y3QubGVuZ3RoKSByZXR1cm47CgkJCQkJCQkJdmFyIGwgPSBzLnByb2R1Y3RbMF0sCgkJCQkJCQkJCWMgPSBwYXJzZUludChzLnByb2R1Y3QubGVuZ3RoKSwKCQkJCQkJCQkJZCA9IGMgJSBvID09IDAgPyBwYXJzZUludChjIC8gbykgOiBwYXJzZUludChjIC8gbykgKyAxLAoJCQkJCQkJCQlwID0gZSgiPGxpPiIpOwoJCQkJCQkJCXAuYXBwZW5kKGUoIjxzcGFuPiIsIHsKCQkJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItY29tcGFyZS1pdGVtIiwKCQkJCQkJCQkJaHJlZjogbC51cmwsCgkJCQkJCQkJCXRhcmdldDogIl9ibGFuayIKCQkJCQkJCQl9KS5hcHBlbmQoZSgiPHA+IiwgewoJCQkJCQkJCQlzdHlsZTogImhlaWdodDoxMHB4O2Rpc3BsYXk6bm9uZTsiLAoJCQkJCQkJCQkiY2xhc3MiOiBhLmV4dEJyYW5kICsgIi1pc3p3ZiIKCQkJCQkJCQl9KS5odG1sKCImbmJzcCIpKS5hcHBlbmQoZSgiPHA+IiwgewoJCQkJCQkJCQkiY2xhc3MiOiBhLmV4dEJyYW5kICsgIi1wcmljZSIKCQkJCQkJCQl9KS5odG1sKCImeWVuOyIgKyBzLm1pbl9wcmljZSArIChzLm1heF9wcmljZSAhPSBzLm1pbl9wcmljZSA/ICJ+IiArIHMubWF4X3ByaWNlIDogIiIpKSkuYXBwZW5kKGUoIjxwPiIsIHsKCQkJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItc3RvcmUiCgkJCQkJCQkJfSkudGV4dChyKSkuYXBwZW5kKGUoIjxwPiIsIHsKCQkJCQkJCQkJc3R5bGU6ICJoZWlnaHQ6MTBweDtkaXNwbGF5Om5vbmU7IiwKCQkJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItaXN6d2YiCgkJCQkJCQkJfSkuaHRtbCgiJm5ic3AiKSkpOwoJCQkJCQkJCXZhciBoID0gZSgiPGRpdj4iLCB7CgkJCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbS1kZXRhaWwgcmUtIiArIGEuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbS1kZXRhaWwgIiArIGEuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbS1kZXRhaWwtZml4ZWQiLAoJCQkJCQkJCQlzdHlsZTogImRpc3BsYXk6bm9uZTsiCgkJCQkJCQkJfSk7CgkJCQkJCQkJaC5hcHBlbmQoZSgiPHA+IiwgewoJCQkJCQkJCQkiY2xhc3MiOiBhLmV4dEJyYW5kICsgIi1jb21wYXJlLWl0ZW0tZGV0YWlsLXRpdGxlICIgKyBhLmV4dEJyYW5kICsgIi1oZWlnaHQtYXV0byAiICsgYS5leHRCcmFuZCArICItY29tcGFyZS1pdGVtLWRldGFpbC10aXRsZS1maXhlZCIKCQkJCQkJCQl9KS5hcHBlbmQoZSgiPHNwYW4+IiwgewoJCQkJCQkJCQkiY2xhc3MiOiBhLmV4dEJyYW5kICsgIi1jb21wYXJlLWl0ZW0tZGV0YWlsLXRpdGxlLWRlc2MiCgkJCQkJCQkJfSkudGV4dChyICsgIu+8muS4jeWQjOWNluWutui/kOi0ueS4jeWQjCIpKSk7CgkJCQkJCQkJZm9yICh2YXIgdSA9IGUoIjx1bD4iLCB7CgkJCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLWl0ZW0tbGlzdCIKCQkJCQkJCQl9KSwgbSA9IDA7IGMgPiBtOyBtKyspIHsKCQkJCQkJCQkJdmFyIGYgPSBzLnByb2R1Y3RbbV07CgkJCQkJCQkJCXUuYXBwZW5kKGUoIjxsaT4iLCB7CgkJCQkJCQkJCQkiY2xhc3MiOiBhLmV4dEJyYW5kICsgIi1saXN0LWl0ZW0gIiArIChtICUgbyA9PSBvIC0gMSB8fCBtID09IGMgLSAxID8gYS5leHRCcmFuZCArICItbGFzdCIgOiAiIiksCgkJCQkJCQkJCQlzdHlsZTogImRpc3BsYXk6ICIgKyAobSA+PSBvID8gIm5vbmUiIDogImJsb2NrIikKCQkJCQkJCQkJfSkuYXBwZW5kKGUoIjxhPiIsIHsKCQkJCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLXBpYyIsCgkJCQkJCQkJCQlocmVmOiBmLnVybCwKCQkJCQkJCQkJCXRhcmdldDogIl9ibGFuayIKCQkJCQkJCQkJfSkuYXBwZW5kKGUoIjxpbWc+IiwgewoJCQkJCQkJCQkJc3JjOiBhLnNfc2VydmVyICsgIi9pbWFnZXMvZHBfZGVmYXVsdC5qcGciLAoJCQkJCQkJCQkJImRhdGEtb3JpZ2luYWwiOiBmLnBpY191cmwsCgkJCQkJCQkJCQl0aXRsZTogZi50aXRsZQoJCQkJCQkJCQl9KSkpLmFwcGVuZChlKCI8YT4iLCB7CgkJCQkJCQkJCQkiY2xhc3MiOiBhLmV4dEJyYW5kICsgIi1wcm9kdWN0LXRpdGxlIiwKCQkJCQkJCQkJCWhyZWY6IGYudXJsLAoJCQkJCQkJCQkJdGFyZ2V0OiAiX2JsYW5rIiwKCQkJCQkJCQkJCXRpdGxlOiBmLnRpdGxlCgkJCQkJCQkJCX0pLnRleHQoZi50aXRsZSkpLmFwcGVuZChlKCI8YT4iLCB7CgkJCQkJCQkJCQkiY2xhc3MiOiBhLmV4dEJyYW5kICsgIi1wcmljZSIsCgkJCQkJCQkJCQlocmVmOiBmLnVybCwKCQkJCQkJCQkJCXRhcmdldDogIl9ibGFuayIKCQkJCQkJCQkJfSkuaHRtbCgiJnllbjsiICsgZi5wcmljZSkpKQoJCQkJCQkJCX0KCQkJCQkJCQl2YXIgZyA9IGUoIjxkaXY+IiwgewoJCQkJCQkJCQkiY2xhc3MiOiBhLmV4dEJyYW5kICsgIi10Yi10bS1QYWdlVmlldyAiICsgYS5leHRCcmFuZCArICItYjJjLVBhZ2VWaWV3LWZpeGVkIgoJCQkJCQkJCX0pOwoJCQkJCQkJCWlmIChnLmFwcGVuZChlKCI8cD4iLCB7CgkJCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbS1kZXRhaWwtdGl0bGUiLAoJCQkJCQkJCQlzdHlsZTogImhlaWdodDphdXRvOyIKCQkJCQkJCQl9KS5hcHBlbmQoZSgiPHNwYW4+IiwgewoJCQkJCQkJCQlzdHlsZTogImZsb2F0Om5vbmU7cGFkZGluZy1sZWZ0OjEwcHg7IiwKCQkJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItY29tcGFyZS1pdGVtLWRldGFpbC1wYWdlcyIKCQkJCQkJCQl9KS5hcHBlbmQoZSgiPGVtPiIsIHsKCQkJCQkJCQkJaWQ6ICJwYWdlLW5vdy0iICsgdCwKCQkJCQkJCQkJImNsYXNzIjogInBhZ2Utbm93IgoJCQkJCQkJCX0pLnRleHQoIjEiKSkuYXBwZW5kKCIvIikuYXBwZW5kKGUoIjxlbT4iLCB7CgkJCQkJCQkJCWlkOiAicGFnZS10b3RhbC0iICsgdCwKCQkJCQkJCQkJImNsYXNzIjogInBhZ2UtdG90YWwiCgkJCQkJCQkJfSkudGV4dCgiMSIpKSkpLCBoLmFwcGVuZChlKCI8ZGl2PiIsIHsKCQkJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItY29tcGFyZS1wcmV2LXBhZ2UgIiArIGEuZXh0QnJhbmQgKyAiLWxlZnQiCgkJCQkJCQkJfSkuYXBwZW5kKGUoIjxkaXY+IiwgewoJCQkJCQkJCQkiY2xhc3MiOiBhLmV4dEJyYW5kICsgIi1iZyBwYWdlLWFycm93IgoJCQkJCQkJCX0pKSkuYXBwZW5kKHUpLmFwcGVuZChlKCI8ZGl2PiIsIHsKCQkJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItY29tcGFyZS1uZXh0LXBhZ2UgIiArIGEuZXh0QnJhbmQgKyAiLXJpZ2h0IgoJCQkJCQkJCX0pLmFwcGVuZChlKCI8ZGl2PiIsIHsKCQkJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItYmcgcGFnZS1hcnJvdyIKCQkJCQkJCQl9KSkpLmFwcGVuZChnKSwgcC5hcHBlbmQoaCksIGUoIiMiICsgYS5leHRCcmFuZCArICItY29tcGFyZS0iICsgdCkuaHRtbCgiIikuYXBwZW5kKHApLCAxID09IGQpIHsKCQkJCQkJCQkJcC5maW5kKCIuIiArIGEuZXh0QnJhbmQgKyAiLWNvbXBhcmUtcHJldi1wYWdlIikuaGlkZSgpLCBwLmZpbmQoIi4iICsgYS5leHRCcmFuZCArICItY29tcGFyZS1uZXh0LXBhZ2UiKS5oaWRlKCksIHAuZmluZCgiLiIgKyBhLmV4dEJyYW5kICsgIi1iMmMtUGFnZVZpZXctZml4ZWQiKS5oaWRlKCksIHAuYXR0cigicGFnZXMiLCAxKSwgcC5hdHRyKCJsZW4iLCBjKTsKCQkJCQkJCQkJdmFyIF8gPSAyMDAgKiBjOwoJCQkJCQkJCQlwLmNoaWxkcmVuKCJkaXYuIiArIGEuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbS1kZXRhaWwtZml4ZWQiKS5jc3MoIndpZHRoIiwgXyArIDIpCgkJCQkJCQkJfSBlbHNlIHAuY2hpbGRyZW4oImRpdi4iICsgYS5leHRCcmFuZCArICItY29tcGFyZS1pdGVtLWRldGFpbC1maXhlZCIpLmNzcygid2lkdGgiLCBhLndpZHRoIC0gMik7CgkJCQkJCQkJZSgiI3BhZ2UtdG90YWwtIiArIHQpLnRleHQoZCkKCQkJCQkJCX0KCQkJCQkJCWUoIiMiICsgYS5leHRCcmFuZCArICItY29tcGFyZS0iICsgdCkuY3NzKCJkaXNwbGF5IiwgImJsb2NrIikKCQkJCQkJfQoJCQkJCQllKCIjIiArIGEuZXh0QnJhbmQgKyAiLWNvbXBhcmUtdG1hbGwsIyIgKyBhLmV4dEJyYW5kICsgIi1jb21wYXJlLXRhb2JhbyIpLmVhY2goZnVuY3Rpb24oKSB7CgkJCQkJCQllKHRoaXMpLmZpbmQoImEuIiArIGEuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbSxhLiIgKyBhLmV4dEJyYW5kICsgIi1waWMsYS4iICsgYS5leHRCcmFuZCArICItcHJvZHVjdC10aXRsZSxhLiIgKyBhLmV4dEJyYW5kICsgIi1wcmljZSIpLmVhY2goZnVuY3Rpb24oKSB7CgkJCQkJCQkJZSh0aGlzKS5hdHRyKCJyZWwiLCAibm9yZWZlcnJlciIpLmF0dHIoImhyZWYiLCBlKHRoaXMpLmF0dHIoImhyZWYiKSArIGEudXQpCgkJCQkJCQl9KQoJCQkJCQl9KQoJCQkJCX0sCgkJCQkJc2V0Qm90dG9tVmlld09mZnNldDogZnVuY3Rpb24oKSB7CgkJCQkJCWUoIiMiICsgYS5leHRCcmFuZCArICItY29tcGFyZS10bWFsbCBsaSwjIiArIGEuZXh0QnJhbmQgKyAiLWNvbXBhcmUtdGFvYmFvIGxpIikuZWFjaChmdW5jdGlvbigpIHsKCQkJCQkJCXZhciB0ID0gZSh0aGlzKTsKCQkJCQkJCWlmICgiMSIgPT0gdC5hdHRyKCJwYWdlcyIpKSB7CgkJCQkJCQkJdmFyIG4gPSB0Lm9mZnNldCgpLmxlZnQsCgkJCQkJCQkJCWkgPSB0LndpZHRoKCksCgkJCQkJCQkJCW8gPSAyMDAgKiBwYXJzZUludCh0LmF0dHIoImxlbiIpKSwKCQkJCQkJCQkJciA9IG4gLSAobyAvIDIgLSBpIC8gMik7CgkJCQkJCQkJMCA+IHIgJiYgKHIgPSAwKTsKCQkJCQkJCQl2YXIgcyA9IGEud2lkdGggLSByOwoJCQkJCQkJCWEuSUU2ID8gKHIgPSBpIC8gMiAtIG8gLyAyLCAwID4gciArIG4gJiYgKHIgPSAtbiksIHQuY2hpbGRyZW4oImRpdi4iICsgYS5leHRCcmFuZCArICItY29tcGFyZS1pdGVtLWRldGFpbC1maXhlZCIpLmNzcygicG9zaXRpb24iLCAiYWJzb2x1dGUiKS5jc3MoImxlZnQiLCByKSwgdC5maW5kKCIuIiArIGEuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbS1kZXRhaWwtdGl0bGUtZml4ZWQiKS5jc3MoImxlZnQiLCAwKSkgOiBzID4gbyA/ICh0LmNoaWxkcmVuKCJkaXYuIiArIGEuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbS1kZXRhaWwtZml4ZWQiKS5jc3MoImxlZnQiLCByKSwgdC5maW5kKCIuIiArIGEuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbS1kZXRhaWwtdGl0bGUtZml4ZWQiKS5jc3MoImxlZnQiLCByKSkgOiAodC5jaGlsZHJlbigiZGl2LiIgKyBhLmV4dEJyYW5kICsgIi1jb21wYXJlLWl0ZW0tZGV0YWlsLWZpeGVkIikuY3NzKCJsZWZ0IiwgYS53aWR0aCAtIG8pLCB0LmZpbmQoIi4iICsgYS5leHRCcmFuZCArICItY29tcGFyZS1pdGVtLWRldGFpbC10aXRsZS1maXhlZCIpLmNzcygibGVmdCIsIGEud2lkdGggLSBvKSkKCQkJCQkJCX0gZWxzZSBpZiAoYS5JRTYpIHsKCQkJCQkJCQl2YXIgbiA9IHQub2Zmc2V0KCkubGVmdCwKCQkJCQkJCQkJciA9IDAgLSBuOwoJCQkJCQkJCXQuY2hpbGRyZW4oImRpdi4iICsgYS5leHRCcmFuZCArICItY29tcGFyZS1pdGVtLWRldGFpbC1maXhlZCIpLmNzcygicG9zaXRpb24iLCAiYWJzb2x1dGUiKS5jc3MoImxlZnQiLCByKSwgdC5maW5kKCIuIiArIGEuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbS1kZXRhaWwtdGl0bGUtZml4ZWQiKS5jc3MoImxlZnQiLCAwKQoJCQkJCQkJfQoJCQkJCQl9KQoJCQkJCX0KCQkJCX0KCQkJfS5jYWxsKHQsIG4sIHQsIGUpLCAhKHZvaWQgMCAhPT0gaSAmJiAoZS5leHBvcnRzID0gaSkpCgkJfSkuY2FsbCh0LCBuKDEpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCkgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBpID0gbig0MCk7CgkJCWUuZXhwb3J0cyA9IGZ1bmN0aW9uKGUpIHsKCQkJCXZhciBuID0gW10sCgkJCQkJYSA9IHQuZHAucHJpY2UgfHwgMDsKCQkJCWlmICgiMTg5IiA9PT0gdC5zaXRlKSB7CgkJCQkJZm9yICh2YXIgbyA9IDA7IG8gPCBlLmxlbmd0aDsgbysrKSBpKGVbb10ucHJpY2UpID49IGEgJiYgbi5wdXNoKGVbb10pOwoJCQkJCXJldHVybiBuCgkJCQl9CgkJCQlyZXR1cm4gZQoJCQl9LCBlLmV4cG9ydHMudGIgPSBmdW5jdGlvbihlKSB7CgkJCQlpZiAoZSBpbnN0YW5jZW9mIEFycmF5KSByZXR1cm4gZTsKCQkJCWZvciAodmFyIG4gPSBbXSwgYSA9IGUucHJvZHVjdCwgbyA9IHQuZHAucHJpY2UgfHwgMCwgciA9IDA7IHIgPCBhLmxlbmd0aDsgcisrKSBhW3JdLmltZ191cmwgJiYgIWFbcl0uaW1nX3VybC5tYXRjaCgvX1xkK3hcZCsvKSAmJiAoYVtyXS5pbWdfdXJsID0gYVtyXS5pbWdfdXJsICsgIl8xMDB4MTAwIiksIGFbcl0ucGljX3VybCAmJiAhYVtyXS5waWNfdXJsLm1hdGNoKC9fXGQreFxkKy8pICYmIChhW3JdLnBpY191cmwgPSBhW3JdLnBpY191cmwgKyAiXzEwMHgxMDAiKTsKCQkJCWlmICgiMTg5IiA9PT0gdC5zaXRlKSB7CgkJCQkJZm9yICh2YXIgciA9IDA7IHIgPCBhLmxlbmd0aDsgcisrKSBpKGFbcl0ucHJpY2UpID49IG8gJiYgbi5wdXNoKGFbcl0pOwoJCQkJCWUubWluX3ByaWNlID0gblswXSAmJiBuWzBdLnByaWNlLCBlLnByb2R1Y3QgPSBuCgkJCQl9CgkJCQlyZXR1cm4gZQoJCQl9CgkJfSkuY2FsbCh0LCBuKDEpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCwgaSkgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBhID0gbig5KSwKCQkJCW8gPSBuKDE2KSwKCQkJCXIgPSBuKDc2KSwKCQkJCXMgPSBuKDc0KSwKCQkJCWwgPSBuKDc4KTsKCQkJZS5leHBvcnRzLmluaXQgPSBmdW5jdGlvbihlKSB7CgkJCQlpZiAobnVsbCAhPSB0LnNhdmVfdGJyZXNfZGF0YSkgcmV0dXJuIHZvaWQgdGhpcy5yZW5kZXJUYnJlcyh0LnNhdmVfdGJyZXNfZGF0YSk7CgkJCQl2YXIgbiA9IHRoaXMsCgkJCQkJbyA9ICIxIiwKCQkJCQlyID0gZS5leGFjdF9hcnIsCgkJCQkJcyA9IGVbImNvZGUtc2VydmVyIl0sCgkJCQkJbCA9IDEwMCAqIGUubm93LnByaWNlOwoJCQkJbCB8fCAobCA9IDEwMCAqIHQuZHAucHJpY2UpLCBzIHx8IChzID0ge30sIG8gPSAiMCIpOwoJCQkJdmFyIGMgPSBbImFtYXpvbiIsICI2cG0iLCAiZWJheSJdOwoJCQkJaWYgKGMuaW5kZXhPZih0LnNpdGUpID4gLTEgJiYgKGwgPSAxMDAgKiB0LmRwLnByaWNlKSwgImFtYXpvbiIgIT0gdC5zaXRlIHx8IHIuYnJhbmQgfHwgIjEiID09PSBlLm5vdy5zaXRlX2lkKSB7CgkJCQkJdC5kcC5taW5fcHJpY2UgPSBwYXJzZUludCgxMDAgKiB0LmRwLm1pbl9wcmljZSksIHQuZHAubWF4X3ByaWNlID0gcGFyc2VJbnQoMTAwICogdC5kcC5tYXhfcHJpY2UpOwoJCQkJCXZhciBkID0gdC5zZXJ2ZXIgKyAiL2Jyd2V4dC90YnJlcz91bmlvbj0iICsgdC51bmlvbiArICImdXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQoci51cmwpICsgIiZzaXRlPSIgKyByLnNpdGUgKyAiJmlzYm49IiArIHIuaXNibiArICIma2V5d29yZHM9IiArIGVuY29kZVVSSUNvbXBvbmVudChyLmtleXdvcmRzKSArICImYnJhbmQ9IiArIGVuY29kZVVSSUNvbXBvbmVudChyLmJyYW5kKSArICImdHlwZT0iICsgZW5jb2RlVVJJQ29tcG9uZW50KHIudHlwZSkgKyAiJnByaWNlPSIgKyBsICsgIiZjbGFzc19pZD0iICsgci5jbGFzc19pZCArICImbmFtZT0iICsgZW5jb2RlVVJJQ29tcG9uZW50KHQuZHAubmFtZSkgKyAiJmNvZGVfYnJhbmRfaWQ9IiArIHMuYnJhbmRfaWQgKyAiJmNvZGVfY2xlYW5fdGl0bGU9IiArIGVuY29kZVVSSUNvbXBvbmVudChzLmNsZWFuX3RpdGxlKSArICImY29kZV9jb2RlPSIgKyBzLmNvZGUgKyAiJmNvZGVfZGlzcGxheV9icmFuZD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KHMuZGlzcGxheV9icmFuZCkgKyAiJmNvZGVfYnJhbmQ9IiArIGVuY29kZVVSSUNvbXBvbmVudChzLmJyYW5kKSArICImY29kZV9jbGFzc19pZD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KHMuY2xhc3NfaWQpICsgIiZjb2RlX3ByaWNlPSIgKyBlbmNvZGVVUklDb21wb25lbnQocy5wcmljZSkgKyAiJmNvZGVfc3BlYz0iICsgZW5jb2RlVVJJQ29tcG9uZW50KHMuc3BlYykgKyAiJmNvZGUtc2VydmVyPSIgKyBvOwoJCQkJCWEuZ2V0KGQpLmRvbmUoZnVuY3Rpb24oZSkgewoJCQkJCQkidGFvYmFvIiA9PSB0LnNpdGUgfHwgInRtYWxsIiA9PSB0LnNpdGUgfHwgImFpLXRhb2JhbyIgPT0gdC5zaXRlID8gbi5nZXRVbmlxUGlkKGUsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJCXQuc2F2ZV90YnJlc19kYXRhID0gZSwgbi5yZW5kZXJUYnJlcyhlKQoJCQkJCQl9KSA6IG4uZ2V0SW1nU2VhcmNoKGUsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJCXQuc2F2ZV90YnJlc19kYXRhID0gZSwgbi5yZW5kZXJUYnJlcyhlKQoJCQkJCQl9KQoJCQkJCX0pLmZhaWwoZnVuY3Rpb24oKSB7CgkJCQkJCSJyaWdodCIgPT0gdC5zdHlsZSAmJiAoaSgiI3BsdC10bWFsbC1ibG9jayIpLmhpZGUoKSwgaSgiI3BsdC10YW9iYW8tYmxvY2siKS5oaWRlKCkpCgkJCQkJfSkKCQkJCX0KCQkJfSwgZS5leHBvcnRzLnJlbmRlclRicmVzID0gZnVuY3Rpb24oZSkgewoJCQkJZS50bWFsbCA9IHIudGIoZS50bWFsbCksIGUudGFvYmFvID0gci50YihlLnRhb2JhbyksICJ0b3AiID09IHQuc3R5bGUgJiYgKHRoaXMuc2hvd190YW9iYW9fcHJvZHVjdHNfdG9wKGUpLCB0LmZpeFdpZHRoKCkpCgkJCX0sIGUuZXhwb3J0cy5zaG93X3Rhb2Jhb19wcm9kdWN0c190b3AgPSBmdW5jdGlvbihlKSB7CgkJCQl2YXIgYSA9IHMuaW5pdCgpLAoJCQkJCXIgPSAi5pyA6L+R6ZSA6YePIjsKCQkJCWUuZnJvbV9zZWxmID09PSAhMCAmJiAociA9ICLmgLvplIDph48iKTsKCQkJCXZhciBjID0gbig3OSk7CgkJCQlpZiAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIGUudG1hbGwubWluX3ByaWNlICYmIG51bGwgIT09IGUudG1hbGwubWluX3ByaWNlKSB7CgkJCQkJaWYgKDAgPT0gZS5zZWFyY2guaXNfZXhhY3QgJiYgdC5zaXRlLmluZGV4T2YoInRhb2JhbyIpID49IDApIHsKCQkJCQkJdmFyIGQgPSBpKCIjIiArIHQuZXh0TmFtZSArICItdG1hbGwtZHAiKS5odG1sKCk7CgkJCQkJCWQgPSBkLnJlcGxhY2UoL1x1NTkyOVx1NzMyYi9naSwgIuWkqeeMq+ebuOS8vOasviIpLCBpKCIjIiArIHQuZXh0TmFtZSArICItdG1hbGwtZHAiKS5odG1sKGQpCgkJCQkJfQoJCQkJCWwuaW5pdCgidG1hbGwiLCBlLnRtYWxsLnByb2R1Y3QsICImY29sdW1uPWIyYyIpLCBpKCIjIiArIHQuZXh0TmFtZSArICItdG1hbGwtZHAgLmd3ZC1wcmljZSIpLmh0bWwoIiZ5ZW47IiArIGUudG1hbGwubWluX3ByaWNlKSwgaSgiIyIgKyB0LmV4dE5hbWUgKyAiLXRtYWxsLWRwIikuc2hvdygpLCBpKCIjIiArIHQuZXh0TmFtZSArICItdG1hbGwtZHAtZGV0YWlsIikuYXBwZW5kKG8uY29tcGlsZShjKSh7CgkJCQkJCWRhdGE6IGUudG1hbGwucHJvZHVjdCwKCQkJCQkJc19zZXJ2ZXI6IHQuc19zZXJ2ZXIsCgkJCQkJCXdpZHRoOiBhLnR1cm5wVywKCQkJCQkJbGluazogZS50bWFsbC5tb3JlX2xpbmssCgkJCQkJCXNhbGVfdGxlOiByLAoJCQkJCQlhbGxQcm9kdWN0VzogYS5hbGxQcm9kdWN0VwoJCQkJCX0pKSwgaSgiI3RtYWxsLXByZXYtcGFnZSIpLmNsaWNrKGZ1bmN0aW9uKCkgewoJCQkJCQl0LmNoYW5nZV9wYWdlKCJ0bWFsbCIsIC0xKQoJCQkJCX0pLCBpKCIjdG1hbGwtbmV4dC1wYWdlIikuY2xpY2soZnVuY3Rpb24oKSB7CgkJCQkJCXQuY2hhbmdlX3BhZ2UoInRtYWxsIiwgMSkKCQkJCQl9KQoJCQkJfQoJCQkJaWYgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiBlLnRhb2Jhby5taW5fcHJpY2UgJiYgbnVsbCAhPT0gZS50YW9iYW8ubWluX3ByaWNlKSB7CgkJCQkJaWYgKDAgPT0gZS5zZWFyY2guaXNfZXhhY3QgJiYgdC5zaXRlLmluZGV4T2YoInRhb2JhbyIpID49IDApIHsKCQkJCQkJdmFyIGQgPSBpKCIjIiArIHQuZXh0TmFtZSArICItdGFvYmFvLWRwIikuaHRtbCgpOwoJCQkJCQlkID0gZC5yZXBsYWNlKC9cdTZkZDhcdTViOWQvZ2ksICLmt5jlrp3nm7jkvLzmrL4iKSwgaSgiIyIgKyB0LmV4dE5hbWUgKyAiLXRhb2Jhby1kcCIpLmh0bWwoZCkKCQkJCQl9CgkJCQkJdmFyIHAgPSBuKDgwKTsKCQkJCQlsLmluaXQoInRhb2JhbyIsIGUudGFvYmFvLnByb2R1Y3QsICImY29sdW1uPWIyYyIpLCBpKCIjIiArIHQuZXh0TmFtZSArICItdGFvYmFvLWRwIC5nd2QtcHJpY2UiKS5odG1sKCImeWVuOyIgKyBlLnRhb2Jhby5taW5fcHJpY2UpLCBpKCIjIiArIHQuZXh0TmFtZSArICItdGFvYmFvLWRwIikuc2hvdygpLCBpKCIjIiArIHQuZXh0TmFtZSArICItdGFvYmFvLWRwLWRldGFpbCIpLmFwcGVuZChvLmNvbXBpbGUocCkoewoJCQkJCQlkYXRhOiBlLnRhb2Jhby5wcm9kdWN0LAoJCQkJCQlzX3NlcnZlcjogdC5zX3NlcnZlciwKCQkJCQkJd2lkdGg6IGEudHVybnBXLAoJCQkJCQlsaW5rOiBlLnRhb2Jhby5tb3JlX2xpbmssCgkJCQkJCWFsbFByb2R1Y3RXOiBhLmFsbFByb2R1Y3RXCgkJCQkJfSkpLCBpKCIjdGFvYmFvLXByZXYtcGFnZSIpLmNsaWNrKGZ1bmN0aW9uKCkgewoJCQkJCQl0LmNoYW5nZV9wYWdlKCJ0YW9iYW8iLCAtMSkKCQkJCQl9KSwgaSgiI3Rhb2Jhby1uZXh0LXBhZ2UiKS5jbGljayhmdW5jdGlvbigpIHsKCQkJCQkJdC5jaGFuZ2VfcGFnZSgidGFvYmFvIiwgMSkKCQkJCQl9KQoJCQkJfQoJCQkJInZpcHNob3AiID09PSB0LnNpdGUgPyBpKCIjIiArIHQuZXh0TmFtZSArICItc2VhcmNoLXByb2R1Y3QiKS52YWwodC5kcC5jYXRfbmFtZSB8fCB0LnNhdmVfZHBfcXVlcnkubm93LmNvcmV3b3JkKSA6ICgiIiA9PSBlLnNlYXJjaC5rZXl3b3JkcyAmJiAiIiAhPSB0LmRwLmlzYm4gJiYgaSgiIyIgKyB0LmV4dE5hbWUgKyAiLXNlYXJjaC1wcm9kdWN0IikudmFsKHQuZHAuaXNibiksICIiICE9IGUuc2VhcmNoLmtleXdvcmRzICYmIGkoIiMiICsgdC5leHROYW1lICsgIi1zZWFyY2gtcHJvZHVjdCIpLnZhbChlLnNlYXJjaC5rZXl3b3JkcykpLCB0LmluaXRfaXRlbV9saXN0KCJ0bWFsbCIpLCB0LnNldF9pdGVtX2FyZ3MoInRtYWxsIiksIHQuc2V0X3BhZ2VfYXJncygidG1hbGwiKSwgdC5sb2FkX2ltYWdlKCJ0bWFsbCIsIDAsIHQucGFnZV9zaXplKSwgdC5pbml0X2l0ZW1fbGlzdCgidGFvYmFvIiksIHQuc2V0X2l0ZW1fYXJncygidGFvYmFvIiksIHQuc2V0X3BhZ2VfYXJncygidGFvYmFvIiksIHQubG9hZF9pbWFnZSgidGFvYmFvIiwgMCwgdC5wYWdlX3NpemUpCgkJCX0sIGUuZXhwb3J0cy5nZXRJbWdTZWFyY2ggPSBmdW5jdGlvbihlLCBpKSB7CgkJCQl2YXIgYSA9IG4oODEpOwoJCQkJaWYgKGUgPSBhLmJ1aWxkQ29tbW9uKGUpLCAibHV5b3UiID09IHQuYnR5cGUpIHJldHVybiB2b2lkIGkoZSk7CgkJCQl2YXIgbyA9IG4oNzEpLAoJCQkJCXIgPSBvLmdldCgiZHBfZGF0YSIpICYmIG8uZ2V0KCJkcF9kYXRhIikuZXhhY3RfYXJyLmJyYW5kX2lkOwoJCQkJcmV0dXJuICIzNjBidXkiICE9IHQuc2l0ZSB8fCAhciB8fCBlLnRhb2Jhby5zb3J0ICYmIGUudG1hbGwuc29ydCA/IHZvaWQgbig4MikuaW5pdChmdW5jdGlvbih0KSB7CgkJCQkJdCA/IChlLnRtYWxsLnNvcnQgJiYgKGUudG1hbGwgPSB7fSksIHQudG1hbGwubGVuZ3RoID4gMCAmJiAoZS50bWFsbC5taW5fcHJpY2UgPSB0LnRtYWxsWzBdLnByaWNlLCBlLnRtYWxsLm1heF9wcmljZSA9IHQudG1hbGxbdC50bWFsbC5sZW5ndGggLSAxXS5wcmljZSwgZS50bWFsbC5zdG9yZSA9IHQudG1hbGwsIGUudG1hbGwucHJvZHVjdCA9IHQudG1hbGwpLCB0LnRhb2Jhby5sZW5ndGggPiAwICYmIChlLnRhb2Jhby5wcm9kdWN0ID0gdC50YW9iYW8sIGUudGFvYmFvLnN0b3JlID0gdC50YW9iYW8sIGUudGFvYmFvLm1pbl9wcmljZSA9IHQudGFvYmFvWzBdLnByaWNlLCBlLnRhb2Jhby5tYXhfcHJpY2UgPSB0LnRhb2Jhb1t0LnRhb2Jhby5sZW5ndGggLSAxXS5wcmljZSksIGUudG1hbGwubW9yZV9saW5rIHx8IChlLnRtYWxsLm1vcmVfbGluayA9ICJodHRwczovL3MudGFvYmFvLmNvbS9zZWFyY2g/cT0iICsgZS5zZWFyY2gua2V5d29yZHMgKyAiJnBpZD0iICsgZS5zZWFyY2gudW5pb24pLCBlLnRhb2Jhby5tb3JlX2xpbmsgfHwgKGUudGFvYmFvLm1vcmVfbGluayA9ICJodHRwczovL3MudGFvYmFvLmNvbS9zZWFyY2g/cT0iICsgZS5zZWFyY2gua2V5d29yZHMgKyAiJnBpZD0iICsgZS5zZWFyY2gudW5pb24pLCBpKGUpKSA6IGkoZSkKCQkJCX0pIDogdm9pZCBpKGUpCgkJCX0sIGUuZXhwb3J0cy5nZXRVbmlxUGlkID0gZnVuY3Rpb24oZSwgaSkgewoJCQkJdmFyIGEgPSBuKDgxKTsKCQkJCXJldHVybiBlID0gYS5idWlsZENvbW1vbihlKSwgImx1eW91IiA9PSB0LmJ0eXBlID8gdm9pZCBpKGUpIDogdm9pZCBuKDgzKS5nZXRUYW9iYW91bmlxRGF0YShmdW5jdGlvbih0KSB7CgkJCQkJdCA/IChlLnRtYWxsLnNvcnQgJiYgKGUudG1hbGwgPSB7fSksIHQudG1hbGwubGVuZ3RoID4gMCAmJiAoZS50bWFsbC5taW5fcHJpY2UgPSB0LnRtYWxsWzBdLnByaWNlLCBlLnRtYWxsLm1heF9wcmljZSA9IHQudG1hbGxbdC50bWFsbC5sZW5ndGggLSAxXS5wcmljZSwgZS50bWFsbC5zdG9yZSA9IHQudG1hbGwsIGUudG1hbGwucHJvZHVjdCA9IHQudG1hbGwpLCB0LnRhb2Jhby5sZW5ndGggPiAwICYmIChlLnRhb2Jhby5wcm9kdWN0ID0gdC50YW9iYW8sIGUudGFvYmFvLnN0b3JlID0gdC50YW9iYW8sIGUudGFvYmFvLm1pbl9wcmljZSA9IHQudGFvYmFvWzBdLnByaWNlLCBlLnRhb2Jhby5tYXhfcHJpY2UgPSB0LnRhb2Jhb1t0LnRhb2Jhby5sZW5ndGggLSAxXS5wcmljZSksIGUudG1hbGwubW9yZV9saW5rIHx8IChlLnRtYWxsLm1vcmVfbGluayA9ICJodHRwczovL3MudGFvYmFvLmNvbS9zZWFyY2g/cT0iICsgZS5zZWFyY2gua2V5d29yZHMgKyAiJnBpZD0iICsgZS5zZWFyY2gudW5pb24pLCBlLnRhb2Jhby5tb3JlX2xpbmsgfHwgKGUudGFvYmFvLm1vcmVfbGluayA9ICJodHRwczovL3MudGFvYmFvLmNvbS9zZWFyY2g/cT0iICsgZS5zZWFyY2gua2V5d29yZHMgKyAiJnBpZD0iICsgZS5zZWFyY2gudW5pb24pLCBpKGUpKSA6IGkoZSkKCQkJCX0pCgkJCX0KCQl9KS5jYWxsKHQsIG4oMSksIG4oNikpCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCShmdW5jdGlvbih0KSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJdmFyIG4gPSBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQlmb3IgKHZhciBpID0gMDsgaSA8IHQubGVuZ3RoOyBpKyspCgkJCQkJaWYgKHRbaV0ubnVtX2lpZCkgewoJCQkJCQl0W2ldLm9sZFVybCA9IHRbaV0udXJsOwoJCQkJCQl2YXIgYSA9IHRbaV0udHlwZSA/ICImdHlwZT0iICsgdFtpXS50eXBlIDogIiI7CgkJCQkJCXRbaV0udXJsID0gImh0dHBzOi8vYnJvd3Nlci5nd2RhbmcuY29tL2NvdXBvbl9yZWRpcmVjdD9pZD0iICsgdFtpXS5udW1faWlkICsgbiArIGEKCQkJCQl9CgkJCX07CgkJCWUuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oZSwgaSwgYSkgewoJCQkJaSAmJiBpIGluc3RhbmNlb2YgQXJyYXkgJiYgIXQuYWxpU2l0ZSAmJiAoYSA9IGEgfHwgIiIsIG4oZSwgaSwgYSkpCgkJCX0KCQl9KS5jYWxsKHQsIG4oMSkpCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICc8ZGl2IGNsYXNzPSJwYW5lbC13cmFwIj5cbiAgICA8ZGl2IGNsYXNzPSJwYWdlcyI+XG4gICAgICDnrKwgXG4gICAgICA8c3BhbiBjbGFzcz0iY3VycmVudC1wYWdlIiBpZD0idG1hbGwtY3VycmVudC1wYWdlIj48L3NwYW4+XG4gICAgICAg6aG177yM5YWxIFxuICAgICAgIDxzcGFuIGNsYXNzPSJwYWdlLW51bSIgaWQ9InRtYWxsLXBhZ2UtbnVtIj48L3NwYW4+XG4gICAgICAgIOmhtVxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9ImxlZnQtcGFnZSB0dXJuLXBhZ2UiIHN0eWxlPSJsZWZ0OjEwcHg7Ij5cbiAgICAgIDxhIGlkPSJ0bWFsbC1wcmV2LXBhZ2UiIHRhcmdldD0iX3NlbGYiIHRpdGxlPSLkuIrkuIDpobUiIGNsYXNzPSJuZXdiLWJnIiBocmVmPSJqYXZhc2NyaXB0OiI+PC9hPlxuICAgIDwvZGl2PlxuICAgIDxhIGhyZWY9Int7bGlua319IiB0YXJnZXQ9Il9ibGFuayIgY2xhc3M9InRiLW1vcmVsaW5rIj7ngrnmraTmn6XnnIvlhajpg6jnu5Pmnpw+PjwvYT5cbiAgICA8ZGl2IGNsYXNzPSJhbGwtcHJvZHVjdHMiIHN0eWxlPSJ3aWR0aDp7e2FsbFByb2R1Y3RXfX1weCI+XG4gICAgICA8dWwgaWQ9InRtYWxsLWl0ZW0tbGlzdCI+XG4gICAgICAgIHt7ZWFjaCBkYXRhfX1cbiAgICAgICAgICA8bGkgaWQ9InRtYWxsLXByb2QtaXRlbS17eyRpbmRleH19IiA+XG4gICAgICAgICAgICA8YSBpZD0iaW1nLXRtYWxsLXt7JHZhbHVlLm51bV9paWR9fSIgdGl0bGU9Int7JHZhbHVlLnRpdGxlfX0iIHRhcmdldD0iX2JsYW5rIiBjbGFzcz0ic21hbGwtaW1nIiBocmVmPSJ7eyR2YWx1ZS51cmx9fSI+XG4gICAgICAgICAgICAgIDxpbWcgc3JjPSJ7e3Nfc2VydmVyfX0vdGVtcGxhdGUvYXVnL2ltYWdlcy9uZXcvMTIwLmdpZiIgZGF0YS1vcmlnaW5hbD0ie3skdmFsdWUucGljX3VybH19IiBpZD0idG1hbGwtaW1hZ2Utc21hbGwte3skdmFsdWUubnVtX2lpZH19IiBjbGFzcz0iZ3dkYW5nLWxhenkiPlxuICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9Imd3ZC1wcmljZSI+XG4gICAgICAgICAgICAgIDxhIHRhcmdldD0iX2JsYW5rIiBjbGFzcz0iYjJjLXByaWNlLWEiICBocmVmPSJ7eyR2YWx1ZS51cmx9fSI+wqV7eyR2YWx1ZS5wcmljZX19PC9hPlxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICA8YSB0YXJnZXQ9Il9ibGFuayIgdGl0bGU9Int7JHZhbHVlLnRpdGxlfX0iIGhyZWY9Int7JHZhbHVlLnVybH19IiBjbGFzcz0ic3RvcmUtYSI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InN0b3JlIj57eyR2YWx1ZS5uaWNrfX08L3NwYW4+XG4gICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgPGEgdGFyZ2V0PSJfYmxhbmsiIHRpdGxlPSJ7eyR2YWx1ZS50aXRsZX19IiBocmVmPSJ7eyR2YWx1ZS51cmx9fSIgIGNsYXNzPSJmZWVzLWEiPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJmZWVzIj57e3NhbGVfdGxlfX17eyR2YWx1ZS52b2x1bWV9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICA8YSB0YXJnZXQ9Il9ibGFuayIgdGl0bGU9Int7JHZhbHVlLnRpdGxlfX0iIGhyZWY9Int7JHZhbHVlLnVybH19IiBjbGFzcz0idGl0bGUtYSI+XG4gICAgICAgICAgICAgICAgPHNwYW4+e3skdmFsdWUudGl0bGV9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgIHt7L2VhY2h9fVxuICAgICAgPC91bD5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPSJyaWdodC1wYWdlIHR1cm4tcGFnZSI+XG4gICAgICA8YSBocmVmPSJqYXZhc2NyaXB0OiIgaWQ9InRtYWxsLW5leHQtcGFnZSIgY2xhc3M9Im5ld2ItYmciIHRpdGxlPSLkuIvkuIDpobUiPjwvYT5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4gIDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+XG4gICAgI2d3ZGFuZy10bWFsbC1kcC1kZXRhaWwge1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG4gIC50YW9iYW8tY29tcGFyZSAudHVybi1wYWdlIHtcbiAgICB3aWR0aDoge3t3aWR0aH19cHg7XG4gIH1cbiAgPC9zdHlsZT4nCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICc8ZGl2IGNsYXNzPSJwYW5lbC13cmFwIj5cbiAgICA8ZGl2IGNsYXNzPSJwYWdlcyI+XG4gICAgICDnrKwgXG4gICAgICA8c3BhbiBjbGFzcz0iY3VycmVudC1wYWdlIiBpZD0idGFvYmFvLWN1cnJlbnQtcGFnZSI+PC9zcGFuPlxuICAgICAgIOmhte+8jOWFsSBcbiAgICAgICA8c3BhbiBjbGFzcz0icGFnZS1udW0iIGlkPSJ0YW9iYW8tcGFnZS1udW0iPjwvc3Bhbj5cbiAgICAgICAg6aG1XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz0ibGVmdC1wYWdlIHR1cm4tcGFnZSIgc3R5bGU9ImxlZnQ6MTBweDsiPlxuICAgICAgPGEgaWQ9InRhb2Jhby1wcmV2LXBhZ2UiIHRhcmdldD0iX3NlbGYiIHRpdGxlPSLkuIrkuIDpobUiIGNsYXNzPSJuZXdiLWJnIiBocmVmPSJqYXZhc2NyaXB0OiI+PC9hPlxuICAgIDwvZGl2PlxuICAgIDxhIGhyZWY9Int7bGlua319IiB0YXJnZXQ9Il9ibGFuayIgY2xhc3M9InRiLW1vcmVsaW5rIj7ngrnmraTmn6XnnIvlhajpg6jnu5Pmnpw+PjwvYT5cbiAgICA8ZGl2IGNsYXNzPSJhbGwtcHJvZHVjdHMiIHN0eWxlPSJ3aWR0aDp7e2FsbFByb2R1Y3RXfX1weCI+XG4gICAgICA8dWwgaWQ9InRhb2Jhby1pdGVtLWxpc3QiPlxuICAgICAgICB7e2VhY2ggZGF0YX19XG4gICAgICAgICAgPGxpIGlkPSJ0YW9iYW8tcHJvZC1pdGVtLXt7JGluZGV4fX0iID5cbiAgICAgICAgICAgIDxhIGlkPSJpbWctdGFvYmFvLXt7JHZhbHVlLm51bV9paWR9fSIgdGl0bGU9Int7JHZhbHVlLnRpdGxlfX0iIHRhcmdldD0iX2JsYW5rIiBjbGFzcz0ic21hbGwtaW1nIiBocmVmPSJ7eyR2YWx1ZS51cmx9fSI+XG4gICAgICAgICAgICAgIDxpbWcgc3JjPSJ7e3Nfc2VydmVyfX0vdGVtcGxhdGUvYXVnL2ltYWdlcy9uZXcvMTIwLmdpZiIgZGF0YS1vcmlnaW5hbD0ie3skdmFsdWUucGljX3VybH19IiBpZD0idGFvYmFvLWltYWdlLXNtYWxsLXt7JHZhbHVlLm51bV9paWR9fSIgY2xhc3M9Imd3ZGFuZy1sYXp5Ij5cbiAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJnd2QtcHJpY2UiPlxuICAgICAgICAgICAgICA8YSB0YXJnZXQ9Il9ibGFuayIgY2xhc3M9ImIyYy1wcmljZS1hIiAgaHJlZj0ie3skdmFsdWUudXJsfX0iPsKle3skdmFsdWUucHJpY2V9fTwvYT5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgPGEgdGFyZ2V0PSJfYmxhbmsiIHRpdGxlPSJ7eyR2YWx1ZS50aXRsZX19IiBocmVmPSJ7eyR2YWx1ZS51cmx9fSIgY2xhc3M9InN0b3JlLWEiPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzdG9yZSI+e3skdmFsdWUuaXRlbV9sb2NhdGlvbn19PC9zcGFuPlxuICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgIDxhIHRhcmdldD0iX2JsYW5rIiB0aXRsZT0ie3skdmFsdWUudGl0bGV9fSIgaHJlZj0ie3skdmFsdWUudXJsfX0iICBjbGFzcz0iZmVlcy1hIj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iZmVlcyI+5pyA6L+R6ZSA6YePe3skdmFsdWUudm9sdW1lfX3ku7Y8L3NwYW4+XG4gICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgPGEgdGFyZ2V0PSJfYmxhbmsiIHRpdGxlPSJ7eyR2YWx1ZS50aXRsZX19IiBocmVmPSJ7eyR2YWx1ZS51cmx9fSIgY2xhc3M9InRpdGxlLWEiPlxuICAgICAgICAgICAgICAgIDxzcGFuPnt7JHZhbHVlLnRpdGxlfX08L3NwYW4+XG4gICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICA8L2xpPlxuICAgICAgICB7ey9lYWNofX1cbiAgICAgIDwvdWw+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz0icmlnaHQtcGFnZSB0dXJuLXBhZ2UiPlxuICAgICAgPGEgaHJlZj0iamF2YXNjcmlwdDoiIGlkPSJ0YW9iYW8tbmV4dC1wYWdlIiBjbGFzcz0ibmV3Yi1iZyIgdGl0bGU9IuS4i+S4gOmhtSI+PC9hPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbiAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj5cbiAgICAjZ3dkYW5nLXRhb2Jhby1kcC1kZXRhaWwge1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG4gIC50YW9iYW8tY29tcGFyZSAudHVybi1wYWdlIHtcbiAgICB3aWR0aDoge3t3aWR0aH19cHg7XG4gIH1cbiAgPC9zdHlsZT4nCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCShmdW5jdGlvbih0KSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJZS5leHBvcnRzID0gZnVuY3Rpb24oZSkgewoJCQkJdmFyIG4gPSAiYjJjIiwKCQkJCQlpID0gdC5zYXZlX2RwX3F1ZXJ5ICYmIHQuc2F2ZV9kcF9xdWVyeS5ub3cgJiYgdC5zYXZlX2RwX3F1ZXJ5Lm5vdy5jb3Jld29yZDsKCQkJCXJldHVybiB0LnNpdGUuaW5kZXhPZigidGFvYmFvIikgPiAtMSB8fCB0LnNpdGUuaW5kZXhPZigidG1hbGwiKSA+IC0xID8gZS5wdXJlVXJsIHx8IGUudXJsIDogdC5uZXdfZXh0ZW5zaW9uID8gZS5wdXJlVXJsIHx8IGUudXJsIDogImh0dHA6Ly8iICsgbiArICIuIiArIHQuZXh0TmFtZSArICIuY29tL3Byb21vdGlvbi9taWRkbGVwYWdlP3NvdXJjZT0iICsgZS5zb3VyY2UgKyAiJmltZ191cmw9IiArIGVuY29kZVVSSUNvbXBvbmVudChlLmltZ191cmwpICsgIiZ0aXRsZT0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGUudGl0bGUpICsgIiZwcmljZT0iICsgZS5wcmljZSArICImc2hvcF9uYW1lPSIgKyBlbmNvZGVVUklDb21wb25lbnQoZS5zaG9wX25hbWUpICsgIiZzYWxlcz0iICsgZS5zYWxlcyArICImaWQ9IiArIGUuaWQgKyAiJnVybD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGUudXJsKSArICImZGlzY3Vzcz0iICsgZS5kaXNjdXNzICsgIiZpc3Rhb2Jhbz0iICsgZS5pc3Rhb2JhbyArICImZHBfaWQ9IiArIGUuZHBfaWQgKyAiJnNpdGVfaWQ9IiArIGUuc2l0ZV9pZCArICIma2V5d29yZD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGkpCgkJCX0sIGUuZXhwb3J0cy5idWlsZENvbW1vbiA9IGZ1bmN0aW9uKG4pIHsKCQkJCWlmICghKG4udG1hbGwgaW5zdGFuY2VvZiBBcnJheSkpCgkJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBuLnRtYWxsLnByb2R1Y3QubGVuZ3RoOyBpKyspIHsKCQkJCQkJdmFyIGEgPSBuLnRtYWxsLnByb2R1Y3RbaV0sCgkJCQkJCQlvID0gewoJCQkJCQkJCXNvdXJjZTogImNvbW1vbiIsCgkJCQkJCQkJaW1nX3VybDogYS5waWNfdXJsLAoJCQkJCQkJCXRpdGxlOiBhLnRpdGxlLAoJCQkJCQkJCXByaWNlOiBhLnByaWNlLAoJCQkJCQkJCXNob3BfbmFtZTogYS5uaWNrLAoJCQkJCQkJCXNhbGVzOiBhLnZvbHVtZSB8fCAiMCIsCgkJCQkJCQkJaWQ6IGEubnVtX2lpZCwKCQkJCQkJCQl1cmw6IGEudXJsLAoJCQkJCQkJCWRpc2N1c3M6IGEuY29tbWVudF9jb3VudCB8fCAiMCIsCgkJCQkJCQkJaXN0YW9iYW86ICIwIiwKCQkJCQkJCQlwdXJlVXJsOiAiaHR0cHM6Ly9kZXRhaWwudG1hbGwuY29tL2l0ZW0uaHRtP2lkPSIgKyBhLm51bV9paWQsCgkJCQkJCQkJZHBfaWQ6IHQubm93X2RwX2lkLAoJCQkJCQkJCXNpdGVfaWQ6IHQuc2l0ZV9pZAoJCQkJCQkJfTsKCQkJCQkJdC5zaXRlLmluZGV4T2YoInRhb2JhbyIpID4gLTEgfHwgdC5zaXRlLmluZGV4T2YoInRtYWxsIikgPiAtMSA/IGEudXJsID0gby5wdXJlVXJsIDogYS51cmwgPSBlLmV4cG9ydHMobykKCQkJCQl9CgkJCQlpZiAoIShuLnRhb2JhbyBpbnN0YW5jZW9mIEFycmF5KSkKCQkJCQlmb3IgKHZhciBpID0gMDsgaSA8IG4udGFvYmFvLnByb2R1Y3QubGVuZ3RoOyBpKyspIHsKCQkJCQkJdmFyIGEgPSBuLnRhb2Jhby5wcm9kdWN0W2ldLAoJCQkJCQkJbyA9IHsKCQkJCQkJCQlzb3VyY2U6ICJjb21tb24iLAoJCQkJCQkJCWltZ191cmw6IGEucGljX3VybCwKCQkJCQkJCQl0aXRsZTogYS50aXRsZSwKCQkJCQkJCQlwcmljZTogYS5wcmljZSwKCQkJCQkJCQlzaG9wX25hbWU6ICIiLAoJCQkJCQkJCXNhbGVzOiBhLnZvbHVtZSB8fCAiMCIsCgkJCQkJCQkJaWQ6IGEubnVtX2lpZCwKCQkJCQkJCQl1cmw6IGEudXJsLAoJCQkJCQkJCWRpc2N1c3M6IGEuY29tbWVudF9jb3VudCB8fCAiMCIsCgkJCQkJCQkJaXN0YW9iYW86ICIxIiwKCQkJCQkJCQlwdXJlVXJsOiAiaHR0cHM6Ly9pdGVtLnRhb2Jhby5jb20vaXRlbS5odG0/aWQ9IiArIGEubnVtX2lpZCwKCQkJCQkJCQlkcF9pZDogdC5ub3dfZHBfaWQsCgkJCQkJCQkJc2l0ZV9pZDogdC5zaXRlX2lkCgkJCQkJCQl9OwoJCQkJCQl0LnNpdGUuaW5kZXhPZigidGFvYmFvIikgPiAtMSB8fCB0LnNpdGUuaW5kZXhPZigidG1hbGwiKSA+IC0xID8gYS51cmwgPSBvLnB1cmVVcmwgOiBhLnVybCA9IGUuZXhwb3J0cyhvKQoJCQkJCX0KCQkJCXJldHVybiBuCgkJCX0KCQl9KS5jYWxsKHQsIG4oMSkpCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCShmdW5jdGlvbih0LCBpKSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJdmFyIGEgPSBuKDI4KSwKCQkJCW8gPSBuKDgxKSwKCQkJCXIgPSBuKDcxKSwKCQkJCXMgPSB2b2lkIDAsCgkJCQlsID0gdm9pZCAwLAoJCQkJYyA9ICExLAoJCQkJZCA9IDRlMywKCQkJCXAgPSAhMSwKCQkJCWggPSBbInZpcHNob3AiLCAibW9ndWppZSIsICJtZWlsaXNodW8iLCAiYW1hem9uIiwgInlvdWdvdSIsICJ5b2hvYnV5IiwgIjZwbSIsICJ5aW50YWkiLCAiYmFuZ2dvIiwgInhpdSIsICJ2YW5jbCIsICJzaG9wYm9wIiwgInNob3BpbiIsICJzIiwgIm1hc2FtYXNvIiwgInNlY29vIiwgIm1laSIsICJnYXAiLCAicGFpeGllIiwgIm1vb25iYXNhIiwgIm1laWNpIiwgIm1hY3lzIiwgIm15aGFiaXQiLCAiemhlbiIsICJnaWx0IiwgIm1iYW9iYW8iLCAid2FuZ2Z1amluZyIsICJsZXRhbyIsICJjYW1lbCIsICJoYW5kdSIsICJtZjkxMCIsICI1bHV4IiwgImQxIiwgInRhb3hpZSIsICJtMTgiLCAidGhld2F0Y2hlcnkiLCAiZXNjZW50dWFsIiwgImJpY2NhbWVyYSIsICJ6aGU4MDAiXTsKCQkJbG9jYXRpb24uaG9zdC5pbmRleE9mKCJhbWF6b24iKSA+IC0xICYmIC0xID09IGxvY2F0aW9uLmhvc3QuaW5kZXhPZigiY24iKSAmJiAoZCA9IDFlNCk7CgkJCXZhciB1ID0gZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0ID0gW10sCgkJCQkJCW4gPSBbXSwKCQkJCQkJaSA9IFtdOwoJCQkJCXRyeSB7CgkJCQkJCXZhciBhID0gSlNPTi5wYXJzZShlKSwKCQkJCQkJCXIgPSBhLm1vZHMuaXRlbWxpc3QuZGF0YS5jb2xsZWN0aW9uczsKCQkJCQkJaWYgKDAgPT0gci5sZW5ndGgpIHJldHVybjsKCQkJCQkJaWYgKDIgPT0gci5sZW5ndGggJiYgIuWkluinguebuOS8vOWunei0nSIgPT0gclswXS50aXRsZSkKCQkJCQkJCWZvciAodmFyIGQgPSByWzBdLmF1Y3Rpb25zLCBwID0gZC5sZW5ndGggPiAyMCA/IDIwIDogZC5sZW5ndGgsIGggPSAwOyBwID4gaDsgaCsrKSB7CgkJCQkJCQkJdmFyIHUgPSB7fSwKCQkJCQkJCQkJZiA9ICIwLjAwIiA9PSBkW2hdLnZpZXdfZmVlID8gIuWMhemCriIgOiAiIjsKCQkJCQkJCQl1Lm5pY2sgPSBkW2hdLm5pY2ssIHUubnVtX2lpZCA9IGRbaF0ubmlkLCB1LnRpdGxlID0gZFtoXS50aXRsZSwgdS5wcmljZSA9IGRbaF0udmlld19wcmljZSwgdS5pdGVtX2xvY2F0aW9uID0gZFtoXS5pdGVtX2xvYywgdS5zdG9yZV9uYW1lID0gZFtoXS5uaWNrICsgZiwgdS5waWNfdXJsID0gImh0dHA6IiArIGRbaF0ucGljX3VybCwgdS52b2x1bWUgPSBkW2hdLnZpZXdfc2FsZXMucmVwbGFjZSgi5Lq65LuY5qy+IiwgIiIpLCB1LnR5cGUgPSAiaW1nX3NlYXJjaCIsIHUucGljX3VybC5tYXRjaCgvanBnX1swLTldK3hbMC05XS8pIHx8ICh1LnBpY191cmwgPSB1LnBpY191cmwucmVwbGFjZSgvKFwucG5nfFwuanBnKS8sICIkMV8xMDB4MTAwLmpwZyIpKTsKCQkJCQkJCQl2YXIgZyA9IHsKCQkJCQkJCQkJc291cmNlOiAiaW1nX3NlYXJjaCIsCgkJCQkJCQkJCWltZ191cmw6ICJodHRwOiIgKyBkW2hdLnBpY191cmwsCgkJCQkJCQkJCXRpdGxlOiBkW2hdLnRpdGxlLAoJCQkJCQkJCQlwcmljZTogZFtoXS52aWV3X3ByaWNlLAoJCQkJCQkJCQlzaG9wX25hbWU6IGRbaF0ubmljayArIGYsCgkJCQkJCQkJCXNhbGVzOiBkW2hdLnZpZXdfc2FsZXMucmVwbGFjZSgi5Lq65LuY5qy+IiwgIiIpLAoJCQkJCQkJCQlpZDogZFtoXS5uaWQsCgkJCQkJCQkJCXVybDogImh0dHBzOiIgKyBkW2hdLmRldGFpbF91cmwsCgkJCQkJCQkJCWRpc2N1c3M6IGRbaF0uY29tbWVudF9jb3VudCwKCQkJCQkJCQkJaXN0YW9iYW86IGRbaF0uZGV0YWlsX3VybC5pbmRleE9mKCJkZXRhaWwudG1hbGwuY29tIikgPiAtMSA/ICIwIiA6ICIxIiwKCQkJCQkJCQkJZHBfaWQ6IGRbaF0ubmlkICsgIi0iICsgKGRbaF0uZGV0YWlsX3VybC5pbmRleE9mKCJkZXRhaWwudG1hbGwuY29tIikgPiAtMSkgPyAiODMiIDogIjEyMyIsCgkJCQkJCQkJCXNpdGVfaWQ6IGRbaF0uZGV0YWlsX3VybC5pbmRleE9mKCJkZXRhaWwudG1hbGwuY29tIikgPiAtMSA/ICI4MyIgOiAiMTIzIgoJCQkJCQkJCX07CgkJCQkJCQkJdS51cmwgPSBvKGcpLCBkW2hdLmRldGFpbF91cmwuaW5kZXhPZigiZGV0YWlsLnRtYWxsLmNvbSIpID4gLTEgPyBuLnB1c2godSkgOiB0LnB1c2godSkKCQkJCQkJCX0gZWxzZSBpZiAoMSA9PSByLmxlbmd0aCAmJiAi5oKo5Y+v6IO95Lya5Zac5qyiIiA9PSByWzBdLnRpdGxlIHx8IDIgPT0gci5sZW5ndGggJiYgIuaCqOWPr+iDveS8muWWnOasoiIgPT0gclsxXS50aXRsZSkKCQkJCQkJCQlmb3IgKHZhciBfID0gcltyLmxlbmd0aCAtIDFdLmF1Y3Rpb25zLCBoID0gMDsgaCA8IF8ubGVuZ3RoOyBoKyspIHsKCQkJCQkJCQkJdmFyIHUgPSB7fTsKCQkJCQkJCQkJdS51cmwgPSAiaHR0cHM6IiArIF9baF0uZGV0YWlsX3VybCwgdS5waWNfdXJsID0gX1toXS5waWNfdXJsLCB1LnRpdGxlID0gX1toXS50aXRsZSwgdS5udW1faWlkID0gX1toXS5uaWQsIHUucHJpY2UgPSBfW2hdLnZpZXdfcHJpY2UsIHUudm9sdW1lID0gX1toXS52aWV3X3NhbGVzLCB1Lm5pY2sgPSBfW2hdLm5pY2ssIGkucHVzaCh1KQoJCQkJCQkJCX0KCQkJCQkJCXQgPSBtKHQpLCBuID0gbShuKSwgcyA9IHsKCQkJCQkJCXRhb2JhbzogdCwKCQkJCQkJCXRtYWxsOiBuLAoJCQkJCQkJZ3Vlc3NmYXZvcjogaQoJCQkJCQl9LCBsICYmICFjICYmIChsKHMpLCBjID0gITApCgkJCQkJfSBjYXRjaCAoeCkge30KCQkJCX0sCgkJCQltID0gZnVuY3Rpb24oZSkgewoJCQkJCXJldHVybiBlLnNvcnQgPyBlID0gZS5zb3J0KGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQkJcmV0dXJuIE51bWJlcihlLnByaWNlKSA+IE51bWJlcih0LnByaWNlKSA/IDEgOiBOdW1iZXIoZS5wcmljZSkgPT0gTnVtYmVyKHQucHJpY2UpID8gMCA6IC0xCgkJCQkJfSkgOiB2b2lkIDAKCQkJCX0sCgkJCQlmID0gZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSB7CgkJCQkJCSIzNjBidXkiOiAiI3ByZXZpZXcgLmpxem9vbSBpbWciLAoJCQkJCQlnb21lOiAiLmpxem9vbSBpbWciLAoJCQkJCQlzdW5pbmc6ICIjaW1nWm9vbSAjYmlnSW1hZ2UiLAoJCQkJCQl5aWhhb2RpYW46ICIjSl9wcm9kSW1nIiwKCQkJCQkJdmFuY2w6ICIjbWlkaW1nIiwKCQkJCQkJc2hvcGluOiAiI3pvb20xIGltZyIsCgkJCQkJCXNlY29vOiAiLmpxem9vbSIsCgkJCQkJCW1laTogIiNiaWdpbWciLAoJCQkJCQltZWljaTogIi56b29tUGFkIGltZyIsCgkJCQkJCW1hY3lzOiAiI21haW5WaWV3XzEiLAoJCQkJCQl0YW94aWU6ICIjdF9QcmV2aWV3SW1hZ2UgaW1nIiwKCQkJCQkJZDE6ICIuZ3NfcmlnaHRfc3BpbWcgaW1nIiwKCQkJCQkJIjVsdXgiOiAiLmNsb3Vkem9vbSIsCgkJCQkJCW1mOTEwOiAiI29wX3Byb2R1Y3Rfem9vbSBpbWciLAoJCQkJCQloYW5kdTogIiNtYXN0ZXJJbWFnZSIsCgkJCQkJCWNhbWVsOiAiI2ltZ19qcXpvb20iLAoJCQkJCQlsZXRhbzogIiNzaW1nb3V0ZXIgaW1nIiwKCQkJCQkJd2FuZ2Z1amluZzogIi56b29tUGFkIC5sYXp5LXBpYyIsCgkJCQkJCXpoZW46ICIjem9vbTEgLmFfbWF4X3BpYyIsCgkJCQkJCXNob3Bib3A6ICIjcHJvZHVjdEltYWdlIiwKCQkJCQkJeW9ob2J1eTogIiNpbWctc2hvdyIsCgkJCQkJCXRhb2JhbzogIiNKX0ltZ0Jvb3RoIiwKCQkJCQkJdGhld2F0Y2hlcnk6ICIjZGV0YWlsaW1hZ2UiLAoJCQkJCQlhbWF6b246ICIjYWx0SW1hZ2VzIHVsIGxpIGltZyIsCgkJCQkJCW1vZ3VqaWU6ICIjSl9CaWdJbWciLAoJCQkJCQllc2NlbnR1YWw6ICIjem9vbTEgaW1nIiwKCQkJCQkJYmljY2FtZXJhOiAiI1BST0QtQ1VSUkVOVC1JTUciLAoJCQkJCQl6aGU4MDA6ICIjZGV0YWlsIC5kZXRlaWxwaWMgdWwgbGkgaW1nIiwKCQkJCQkJdmlwc2hvcDogIiNKLW1lci1JbWdSZXZpZXcgLnpvb21QYWQ+aW1nIiwKCQkJCQkJdG1hbGw6ICIjSl9JbWdCb290aCIKCQkJCQl9OwoJCQkJCWlmIChlW3Quc2l0ZV0pIHsKCQkJCQkJdmFyIG4gPSBpKGVbdC5zaXRlXSkuZXEoMCkuYXR0cigic3JjIik7CgkJCQkJCWlmICgid3d3LmFtYXpvbi5jby5qcCIgPT0gbG9jYXRpb24uaG9zdCAmJiBuICYmIG4ubWF0Y2goL1NSWzAtOV0rLFswLTldKy8pKSBuID0gbi5yZXBsYWNlKC9TUihbMC05XSspXCwoWzAtOV0rKS8sICJTUiQxMCwkMjAiKTsKCQkJCQkJZWxzZSBpZiAobG9jYXRpb24uaG9zdC5pbmRleE9mKCJhbWF6b24iKSA+IC0xKSByZXR1cm4gITE7CgkJCQkJCXJldHVybiBuICYmICFuLm1hdGNoKC8oPzpodHRwOnxodHRwczopLykgJiYgbi5pbmRleE9mKCIvLyIpID4gLTEgJiYgKG4gPSAiaHR0cDoiICsgbiksICJ6aGU4MDAiID09PSB0LnNpdGUgJiYgKG4gPSBuLnJlcGxhY2UoIjU4eDU4LmpwZyIsICIyMjB4MjIwLmpwZyIpKSwgbgoJCQkJCX0KCQkJCQlyZXR1cm4gITEKCQkJCX0sCgkJCQlnID0gZnVuY3Rpb24oZSkgewoJCQkJCXZhciBuID0gZigpOwoJCQkJCShoLmluZGV4T2YodC5zaXRlKSA+IC0xICYmICJ3d3cuYW1hem9uLmNuIiAhPSBsb2NhdGlvbi5ob3N0IHx8IGxvY2F0aW9uLmhvc3QuaW5kZXhPZigiMTY4OCIpID4gLTEgfHwgZSkgJiYgKGUgPSAhMCwgYS50cmlnZ2VyKHsKCQkJCQkJdHlwZTogImdldFRhb2Jhb0ltZ0luZm8iLAoJCQkJCQlzcmM6IG4KCQkJCQl9KSwgYS5vbihmdW5jdGlvbihlKSB7CgkJCQkJCWlmICgiZ2V0VGFvYmFvSW1nSW5mbyIgPT0gZS50eXBlKSB7CgkJCQkJCQl2YXIgdCA9IGkoIiNnd2RfaW1nX2luZm8iKS50ZXh0KCk7CgkJCQkJCQkiIiAhPSB0ICYmIHUodCkKCQkJCQkJfQoJCQkJCX0pKQoJCQkJfTsKCQkJZS5leHBvcnRzLnJlYWR5ID0gZnVuY3Rpb24oKSB7CgkJCQlpZiAoISgidGFvYmFvIiA9PSB0LnNpdGUgfHwgInRtYWxsIiA9PSB0LnNpdGUgfHwgdC5zaXRlLmluZGV4T2YoInRhb2JhbyIpID4gLTEpKSB7CgkJCQkJdmFyIGUgPSByLmdldCgiZHBfZGF0YSIpLAoJCQkJCQluID0gZSAmJiBlLm5vdy5jbGFzc19pZCwKCQkJCQkJaSA9IGUgJiYgZVsiY29kZS1zZXJ2ZXIiXS5jb2RlOwoJCQkJCSJhbWF6b24iID09PSB0LnNpdGUgJiYgaSB8fCAobiAmJiAobiA9IG4uc2xpY2UoMCwgMikpLCAoIjEzIiA9PSBuIHx8ICIyNCIgPT0gbiB8fCAiMUEiID09IG4gfHwgIjIxIiA9PSBuKSAmJiAocCA9ICEwKSwgZyhwKSkKCQkJCX0KCQkJfSwgZS5leHBvcnRzLnVuaXFQaWRHZXRJbWcgPSBmdW5jdGlvbihlKSB7CgkJCQlnKCEwKSwgbCA9IGUKCQkJfSwgZS5leHBvcnRzLmluaXQgPSBmdW5jdGlvbihlKSB7CgkJCQlyZXR1cm4gcCB8fCAtMSAhPSBoLmluZGV4T2YodC5zaXRlKSA/IChzID8gKGUocyksIGMgPSAhMCkgOiBsID0gZSwgdm9pZCBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCWwgJiYgYyA9PT0gITEgJiYgKGwobnVsbCksIGMgPSAhMCkKCQkJCX0sIGQpKSA6IHZvaWQgZShudWxsKQoJCQl9CgkJfSkuY2FsbCh0LCBuKDEpLCBuKDYpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCwgaSkgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBhID0gbig5KSwKCQkJCW8gPSBuKDI4KSwKCQkJCXIgPSBuKDgxKSwKCQkJCXMgPSB2b2lkIDAsCgkJCQlsID0gdm9pZCAwLAoJCQkJYyA9ICExLAoJCQkJZCA9IDI1MDAsCgkJCQlwID0gZnVuY3Rpb24oZSkgewoJCQkJCWlmICgiIiAhPSBlKSB7CgkJCQkJCXZhciBuID0gdC5zZXJ2ZXIgKyAiL2V4dGVuc2lvbj9hYz1nZXR1bmlxcGlkJm5pZD0iICsgZTsKCQkJCQkJYS5nZXQobikuZG9uZShmdW5jdGlvbih0KSB7CgkJCQkJCQl0ICYmIHQudW5pcWlkID8gaChlLCB0LnVuaXFpZCkgOiBmKCkKCQkJCQkJfSkKCQkJCQl9CgkJCQl9LAoJCQkJaCA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQl2YXIgbiA9IHsKCQkJCQkJbmlkOiBlLAoJCQkJCQl1bmlxaWQ6IHQKCQkJCQl9OwoJCQkJCW8udHJpZ2dlcih7CgkJCQkJCXR5cGU6ICJnZXRUYW9iYW91bmlxIiwKCQkJCQkJaW5mbzogSlNPTi5zdHJpbmdpZnkobikKCQkJCQl9KSwgby5vbihmdW5jdGlvbihlKSB7CgkJCQkJCWlmICgiZ2V0VGFvYmFvdW5pcSIgPT0gZS50eXBlKSB7CgkJCQkJCQl2YXIgdCA9IGkoIiNnd2RfdW5pcV9pbmZvIikudGV4dCgpOwoJCQkJCQkJIiIgIT0gdCAmJiBtKHQpCgkJCQkJCX0KCQkJCQl9KQoJCQkJfSwKCQkJCXUgPSBmdW5jdGlvbihlKSB7CgkJCQkJcmV0dXJuIGUuc29ydCA/IGUgPSBlLnNvcnQoZnVuY3Rpb24oZSwgdCkgewoJCQkJCQlyZXR1cm4gTnVtYmVyKGUucHJpY2UpID4gTnVtYmVyKHQucHJpY2UpID8gMSA6IE51bWJlcihlLnByaWNlKSA9PSBOdW1iZXIodC5wcmljZSkgPyAwIDogLTEKCQkJCQl9KSA6IHZvaWQgMAoJCQkJfSwKCQkJCW0gPSBmdW5jdGlvbihlKSB7CgkJCQkJdHJ5IHsKCQkJCQkJdmFyIHQgPSBKU09OLnBhcnNlKGUpOwoJCQkJCQl0ID0gdC5tb2RzLnJlY2l0ZW0uZGF0YS5pdGVtczsKCQkJCQkJdmFyIG4gPSBbXSwKCQkJCQkJCWkgPSBbXTsKCQkJCQkJaWYgKCF0KSByZXR1cm47CgkJCQkJCWZvciAodmFyIGEgPSAwLCBvID0gdC5sZW5ndGg7IG8gPiBhOyBhKyspIHsKCQkJCQkJCXZhciBkID0ge30sCgkJCQkJCQkJcCA9ICIwLjAwIiA9PSB0W2FdLnZpZXdfZmVlID8gIuWMhemCriIgOiAiIjsKCQkJCQkJCWQubmljayA9IHRbYV0ubmljaywgZC5udW1faWlkID0gdFthXS5uaWQsIGQudGl0bGUgPSB0W2FdLnRpdGxlLCBkLnByaWNlID0gdFthXS52aWV3X3ByaWNlLCBkLml0ZW1fbG9jYXRpb24gPSB0W2FdLml0ZW1fbG9jLCBkLnN0b3JlX25hbWUgPSB0W2FdLm5pY2sgKyBwLCBkLnBpY191cmwgPSAiaHR0cDoiICsgdFthXS5waWNfdXJsLCBkLnZvbHVtZSA9IHRbYV0udmlld19zYWxlcy5yZXBsYWNlKCLkurrku5jmrL4iLCAiIik7CgkJCQkJCQl2YXIgaCA9IHsKCQkJCQkJCQlzb3VyY2U6ICJzYW1lX3N0eWxlIiwKCQkJCQkJCQlpbWdfdXJsOiAiaHR0cDoiICsgdFthXS5waWNfdXJsLAoJCQkJCQkJCXRpdGxlOiB0W2FdLnRpdGxlLAoJCQkJCQkJCXByaWNlOiB0W2FdLnZpZXdfcHJpY2UsCgkJCQkJCQkJc2hvcF9uYW1lOiB0W2FdLm5pY2sgKyBwLAoJCQkJCQkJCXNhbGVzOiB0W2FdLnZpZXdfc2FsZXMucmVwbGFjZSgi5Lq65LuY5qy+IiwgIiIpLAoJCQkJCQkJCWlkOiB0W2FdLm5pZCwKCQkJCQkJCQl1cmw6ICJodHRwczoiICsgdFthXS5kZXRhaWxfdXJsLAoJCQkJCQkJCWRpc2N1c3M6IHRbYV0uY29tbWVudF9jb3VudCwKCQkJCQkJCQlpc3Rhb2JhbzogdFthXS5kZXRhaWxfdXJsLmluZGV4T2YoImRldGFpbC50bWFsbC5jb20iKSA+IC0xID8gIjAiIDogIjEiLAoJCQkJCQkJCWRwX2lkOiB0W2FdLm5pZCArICItIiArICh0W2FdLmRldGFpbF91cmwuaW5kZXhPZigiZGV0YWlsLnRtYWxsLmNvbSIpID4gLTEgPyAiODMiIDogIjEyMyIpLAoJCQkJCQkJCXNpdGVfaWQ6IHRbYV0uZGV0YWlsX3VybC5pbmRleE9mKCJkZXRhaWwudG1hbGwuY29tIikgPiAtMSA/ICI4MyIgOiAiMTIzIgoJCQkJCQkJfTsKCQkJCQkJCWQudXJsID0gcihoKSwgdFthXS5kZXRhaWxfdXJsLmluZGV4T2YoImRldGFpbC50bWFsbC5jb20iKSA+IC0xID8gaS5wdXNoKGQpIDogbi5wdXNoKGQpCgkJCQkJCX0KCQkJCQkJbiA9IHUobiksIGkgPSB1KGkpLCBzID0gewoJCQkJCQkJdGFvYmFvOiBuLAoJCQkJCQkJdG1hbGw6IGkKCQkJCQkJfSwgbCAmJiAhYyAmJiAobChzKSwgYyA9ICEwKQoJCQkJCX0gY2F0Y2ggKG0pIHt9CgkJCQl9LAoJCQkJZiA9IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gWyI1MDUxMDAwMiIsICI1MDAxMjAyOSIsICI1MDAxMzg2NCIsICI1MDAxMTM5NyIsICI1MDAxMDQwNCIsICIxNjI1IiwgIjUwMDA2ODQyIiwgIjUwMDA2ODQzIiwgIjE2IiwgIjUwMDExNzQwIiwgIjUwMDExNjk5IiwgIjUwMDA4MTY1IiwgIjUwMDA4MTYzIiwgIjMwIiwgIjUwMDIwODU3IiwgIjUwMDIwODA4IiwgIjUwMDEzODg2Il0sCgkJCQkJCWkgPSB0LmRwLnJvb3RfaWQ7CgkJCQkJaSAmJiBlLmluZGV4T2YoaSkgPiAtMSA/IChuKDgyKS51bmlxUGlkR2V0SW1nKGZ1bmN0aW9uKGUpIHsKCQkJCQkJbCA/IChsKGUpLCBjID0gITApIDogcyA9IGUKCQkJCQl9KSwgZCA9IDZlMykgOiBkID0gMQoJCQkJfSwKCQkJCWcgPSBmdW5jdGlvbigpIHsKCQkJCQlpZiAobG9jYXRpb24uaG9zdC5pbmRleE9mKCJ0YW9iYW8iKSA+IC0xIHx8IGxvY2F0aW9uLmhvc3QuaW5kZXhPZigidG1hbGwiKSA+IC0xKSB7CgkJCQkJCXZhciBlID0gbG9jYXRpb24uaHJlZi5tYXRjaCgvWz8mXWlkPShbMC05XSspLyk7CgkJCQkJCWUgJiYgZS5sZW5ndGggJiYgKGUgPSBlWzFdLCBwKGUpKQoJCQkJCX0KCQkJCX07CgkJCWUuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7CgkJCQkodC5zaXRlLmluZGV4T2YoInRhb2JhbyIpID4gLTEgfHwgdC5zaXRlLmluZGV4T2YoInRtYWxsIikgPiAtMSkgJiYgby50cmlnZ2VyKHsKCQkJCQl0eXBlOiAiZ2V0X2V0YW9faW5mbyIKCQkJCX0pLCAoInRhb2JhbyIgPT0gdC5zaXRlIHx8ICJ0bWFsbCIgPT0gdC5zaXRlKSAmJiBnKCkKCQkJfSwgZS5leHBvcnRzLmdldFRhb2Jhb3VuaXFEYXRhID0gZnVuY3Rpb24oZSkgewoJCQkJcyA/IChlKHMpLCBjID0gITApIDogbCA9IGUsIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJbCAmJiBjID09PSAhMSAmJiAobChudWxsKSwgYyA9ICEwKQoJCQkJfSwgZCkKCQkJfQoJCX0pLmNhbGwodCwgbigxKSwgbig2KSkKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJKGZ1bmN0aW9uKHQsIGkpIHsKCQkJInVzZSBzdHJpY3QiOwoJCQl2YXIgYSA9IG4oMTYpLAoJCQkJbyA9IG4oNzQpLAoJCQkJciA9IG4oNzgpLAoJCQkJcyA9IHt9LAoJCQkJbCA9IHt9LAoJCQkJYyA9IHZvaWQgMCwKCQkJCWQgPSBmdW5jdGlvbigpIHsKCQkJCQl0KCIuY29tcGFyZS1saXN0Iikub2ZmKCksIHQoIi5tYWluLWNvbXBhcmUgLnRyaWdodCwgLm1haW4tY29tcGFyZSAudGxlZnQiKS5vZmYoKSwgdCgiLmNvbXBhcmUtYm94Iikub2ZmKCksIHQoIi5tYWluLWNvbXBhcmUgLnRyaWdodCIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQlpZiAocy5ub3dwYWdlICsgMSAhPT0gcy5wYWdlcykgewoJCQkJCQkJcy5ub3dwYWdlKyssIHQoIi5jb21wYXJlLWxpc3Q+bGkiKS5oaWRlKCk7CgkJCQkJCQlmb3IgKHZhciBlID0gcy5wYWdlTnVtICogcy5ub3dwYWdlOyBlIDwgcy5wYWdlTnVtICogKHMubm93cGFnZSArIDEpOyBlKyspIHQoIi5jb21wYXJlLWxpc3Q+bGkiKS5lcShlKS5zaG93KCk7CgkJCQkJCQkxID09PSBzLm5vd3BhZ2UgJiYgdCgiLm1haW4tY29tcGFyZSAudGxlZnQiKS5zaG93KCksIHMubm93cGFnZSArIDEgPT09IHMucGFnZXMgJiYgdCgiLm1haW4tY29tcGFyZSAudHJpZ2h0IikuYWRkQ2xhc3MoImJqZC1ncmF5IikKCQkJCQkJfQoJCQkJCX0pLCB0KCIubWFpbi1jb21wYXJlIC50bGVmdCIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQlzLm5vd3BhZ2UtLSwgdCgiLmNvbXBhcmUtbGlzdD5saSIpLmhpZGUoKTsKCQkJCQkJZm9yICh2YXIgZSA9IHMucGFnZU51bSAqIHMubm93cGFnZTsgZSA8IHMucGFnZU51bSAqIChzLm5vd3BhZ2UgKyAxKTsgZSsrKSB0KCIuY29tcGFyZS1saXN0PmxpIikuZXEoZSkuc2hvdygpOwoJCQkJCQlzLm5vd3BhZ2UgKyAxIDwgcy5wYWdlcyAmJiB0KCIubWFpbi1jb21wYXJlIC50cmlnaHQiKS5yZW1vdmVDbGFzcygiYmpkLWdyYXkiKSwgMCA9PT0gcy5ub3dwYWdlICYmIHQoIi5tYWluLWNvbXBhcmUgLnRsZWZ0IikuaGlkZSgpCgkJCQkJfSksIHQoIi5jb21wYXJlLWxpc3QiKS5vbigibW91c2VlbnRlciIsICJsaSIsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJdCgiLmNvbXBhcmUtbGlzdD5saSIpLnJlbW92ZUNsYXNzKCJiYXItaXRlbS1ob3ZlciIpOwoJCQkJCQl2YXIgbiA9IHQodGhpcykuYXR0cigiZGF0YS1pZCIpOwoJCQkJCQl0KHRoaXMpLmZpbmQoIi5idGNvbS1kZXRhaWwiKS5sZW5ndGggPiAwID8gdCh0aGlzKS5maW5kKCIuYnRjb20tZGV0YWlsIikuc2hvdygpIDogbiAmJiBtKG4sIHQodGhpcykpLCB0KHRoaXMpLmFkZENsYXNzKCJiYXItaXRlbS1ob3ZlciIpCgkJCQkJfSksIHQoIi5jb21wYXJlLWxpc3QiKS5vbigibW91c2VsZWF2ZSIsICJsaSIsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJdmFyIG4gPSB0aGlzOwoJCQkJCQl0KG4pLnJlbW92ZUNsYXNzKCJiYXItaXRlbS1ob3ZlciIpLCB0KG4pLmZpbmQoIi5idGNvbS1kZXRhaWwiKS5oaWRlKCkKCQkJCQl9KSwgdCgiLmNvbXBhcmUtYm94Iikub24oImNsaWNrIiwgZnVuY3Rpb24oZSkgewoJCQkJCQl0KGUudGFyZ2V0KS5oYXNDbGFzcygidHVybmxlZnQiKSA/IHAodChlLnRhcmdldCksIC0xKSA6IHQoZS50YXJnZXQpLmhhc0NsYXNzKCJ0dXJucmlnaHQiKSAmJiBwKHQoZS50YXJnZXQpLCAxKQoJCQkJCX0pCgkJCQl9LAoJCQkJcCA9IGZ1bmN0aW9uKGUsIG4pIHsKCQkJCQl2YXIgaSA9IHQoZSkucGFyZW50KCkucGFyZW50KCksCgkJCQkJCWEgPSBpLmZpbmQoIi5hbGwtcHJvZHVjdHMgLmJ0Y29tLWxpc3QgbGkiKSwKCQkJCQkJbyA9IGEubGVuZ3RoLAoJCQkJCQlyID0gTnVtYmVyKGkuZmluZCgiLmJqZC1wYWdlcyAuY3VycmVudC1wYWdlIikudGV4dCgpKSwKCQkJCQkJcyA9IE51bWJlcihpLmZpbmQoIi5iamQtcGFnZXMgLnBhZ2UtbnVtIikudGV4dCgpKTsKCQkJCQlpLmZpbmQoIi5hbGwtcHJvZHVjdHMgLmJ0Y29tLWxpc3QgbGkiKS5oaWRlKCksIDEgPT09IG4gPyByKysgOiAtMSA9PT0gbiAmJiByLS0sIDAgPT09IHIgJiYgKHIgPSBzKSwgciA9PT0gcyArIDEgJiYgKHIgPSAxKTsKCQkJCQlmb3IgKHZhciBsID0gciAqIGMuc2hvd0xpc3ROdW0gPiBvID8gbyA6IHIgKiBjLnNob3dMaXN0TnVtLCBkID0gKHIgLSAxKSAqIGMuc2hvd0xpc3ROdW07IGwgPiBkOyBkKyspIHsKCQkJCQkJYS5lcShkKS5zaG93KCk7CgkJCQkJCXZhciBwID0gYS5lcShkKS5maW5kKCIuY29tLWl0ZW0taW1nIGltZyIpOwoJCQkJCQloKHApCgkJCQkJfQoJCQkJCWkuZmluZCgiLmJqZC1wYWdlcyAuY3VycmVudC1wYWdlIikudGV4dChyKQoJCQkJfSwKCQkJCWggPSBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIG4gPSBlLmF0dHIoImRhdGEtc3JjIik7CgkJCQkJaWYgKG4pIHsKCQkJCQkJdmFyIGEgPSBuZXcgSW1hZ2U7CgkJCQkJCWEub25sb2FkID0gZnVuY3Rpb24oKSB7CgkJCQkJCQkxID09IGEuY29tcGxldGUgJiYgdChlKS5hdHRyKCJzcmMiLCBuKS5hdHRyKCJkYXRhLXNyYyIsIG51bGwpCgkJCQkJCX0sIGEub25lcnJvciA9IGZ1bmN0aW9uKG4pIHsKCQkJCQkJCXZhciBhID0gdChlKVswXTsKCQkJCQkJCXQoZSlbMF0gJiYgKGEuc3JjID0gaS5zX3NlcnZlciArICIvaW1hZ2VzL2V4dGVuc2lvbnMvbmV3YmFyL25vX2ltZy5wbmciLCBhLnNldEF0dHJpYnV0ZSgiZGF0YS1zcmMiLCBpLnNfc2VydmVyICsgIi9pbWFnZXMvZXh0ZW5zaW9ucy9uZXdiYXIvbm9faW1nLnBuZyIpKQoJCQkJCQl9LCBhLnNyYyA9IG4KCQkJCQl9CgkJCQl9LAoJCQkJdSA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQlmb3IgKHZhciBuID0gMDsgbiA8IGUubGVuZ3RoOyBuKyspCgkJCQkJCWlmIChlW25dLnByaWNlID0gTnVtYmVyKGVbbl0ucHJpY2UucmVwbGFjZSgiLCIsICIiKSkudG9GaXhlZCgyKSwgZVtuXS5pbWdfdXJsIHx8IChlW25dLmltZ191cmwgPSBlW25dLnBpY191cmwpLCBlW25dLnNpdGVfbmFtZSB8fCAoZVtuXS5zaXRlX25hbWUgPSBlW25dLm5pY2spLCB0ICYmIGVbbl0uaW1nX3VybC5tYXRjaCgvX1xkK3hcZCsvKSkgewoJCQkJCQkJdmFyIGkgPSBlW25dLmltZ191cmwubWF0Y2goL18oXGQrKXhcZCsvKTsKCQkJCQkJCWkgJiYgKGkgPSBOdW1iZXIoaVsxXSksIGkgPiAyMDAgJiYgKGVbbl0uaW1nX3VybCA9IGVbbl0uaW1nX3VybCArICJfMTAweDEwMCIpKQoJCQkJCQl9IGVsc2UgdCAmJiAoZVtuXS5pbWdfdXJsID0gZVtuXS5pbWdfdXJsICsgIl8xMDB4MTAwIik7CgkJCQkJcmV0dXJuIGUKCQkJCX0sCgkJCQltID0gZnVuY3Rpb24oZSwgaSkgewoJCQkJCXZhciBvID0gbFtlXS5sZW5ndGgsCgkJCQkJCXIgPSB2b2lkIDA7CgkJCQkJbyA+IGMuc2hvd0xpc3ROdW0gJiYgKHIgPSAhMCk7CgkJCQkJdmFyIHMgPSBNYXRoLmNlaWwobyAvIGMuc2hvd0xpc3ROdW0pLAoJCQkJCQlkID0gbig4NSksCgkJCQkJCXAgPSBhLmNvbXBpbGUoZCkoewoJCQkJCQkJZGF0YTogbFtlXSwKCQkJCQkJCXNob3dwYWdlczogciwKCQkJCQkJCXByb3dpZHRoOiBjLmFsbFByb2R1Y3RXLAoJCQkJCQkJdHVybnBXOiBjLnR1cm5wVywKCQkJCQkJCXBhZ2VzOiBzCgkJCQkJCX0pOwoJCQkJCXQoaSkuYXBwZW5kKHApOwoJCQkJCWZvciAodmFyIHUgPSAwOyB1IDwgTWF0aC5taW4oYy5zaG93TGlzdE51bSwgbyk7IHUrKykgewoJCQkJCQl2YXIgbSA9IHQoaSkuZmluZCgiLmJ0Y29tLWRldGFpbCBsaSAuY29tLWl0ZW0taW1nIGltZyIpLmVxKHUpOwoJCQkJCQloKG0pCgkJCQkJfQoJCQkJCXIgfHwgZyhvLCBpKQoJCQkJfSwKCQkJCWYgPSBmdW5jdGlvbihlKSB7CgkJCQkJaWYgKCEoaS5zaXRlLmluZGV4T2YoInRhb2JhbyIpID4gLTEgfHwgaS5zaXRlLmluZGV4T2YoInRtYWxsIikgPiAtMSkpIHsKCQkJCQkJdmFyIHIgPSA3MjgsCgkJCQkJCQljID0gOTgsCgkJCQkJCQlwID0gW10sCgkJCQkJCQloID0gZS5zdG9yZS5sZW5ndGgsCgkJCQkJCQltID0gby5jYWxCb3R0b21CYXIoKTsKCQkJCQkJbSA+PSByICsgYyA/IChzLnBhZ2VOdW0gPSA3LCBzLm1iYXJJdGVtU2hvd051bSA9IGggPiA3ID8gNyA6IGgpIDogKHMucGFnZU51bSA9IHBhcnNlSW50KChtIC0gYykgLyAxMDQpLCBzLm1iYXJJdGVtU2hvd051bSA9IGggPiBzLnBhZ2VOdW0gPyBzLnBhZ2VOdW0gOiBoKTsKCQkJCQkJZm9yICh2YXIgZiA9IDA7IGYgPCBlLnN0b3JlLmxlbmd0aDsgZisrKSBwLnB1c2goZS5zdG9yZVtmXS5wcm9kdWN0WzBdKSwgbFtlLnN0b3JlW2ZdLnByb2R1Y3RbMF0uZHBfaWRdID0gdShlLnN0b3JlW2ZdLnByb2R1Y3QpOwoJCQkJCQlzLnBhZ2VzID0gTWF0aC5jZWlsKGggLyBzLnBhZ2VOdW0pOwoJCQkJCQl2YXIgZyA9IG4oODYpOwoJCQkJCQl0KCIuY29tcGFyZS1saXN0IikuYXBwZW5kKGEuY29tcGlsZShnKSh7CgkJCQkJCQlkYXRhOiBwLAoJCQkJCQkJcGFnZU51bTogcy5wYWdlTnVtCgkJCQkJCX0pKSwgcy5ub3dwYWdlID0gMCwgcy50b3RhbFNpemUgPSBoLCB0KCIuY29tcGFyZS1ib3giKS5jc3MoIndpZHRoIiwgMTA0ICogcy5tYmFySXRlbVNob3dOdW0gKyAicHgiKSwgMSA9PT0gcy5wYWdlcyAmJiB0KCIubWJhci10dXJucGFnZSIpLmhpZGUoKSwgZCgpCgkJCQkJfQoJCQkJfSwKCQkJCWcgPSBmdW5jdGlvbihlLCBuKSB7CgkJCQkJdmFyIGkgPSB0KHdpbmRvdykud2lkdGgoKSwKCQkJCQkJYSA9IG4ub2Zmc2V0KCkubGVmdCwKCQkJCQkJbyA9IG4ub3V0ZXJXaWR0aCgpLAoJCQkJCQlyID0gbi5maW5kKCIuYnRjb20tZGV0YWlsIiksCgkJCQkJCXMgPSAyNjggKiBlICsgMiwKCQkJCQkJbCA9IGEgKyBvIC8gMiAtIHMgLyAyOwoJCQkJCTAgPiBsICYmIChsID0gMCksIGwgKyBzID4gaSAmJiAobCA9IGkgLSBzIC0gMiksIHIuY3NzKCJsZWZ0IiwgbCArICJweCIpCgkJCQl9LAoJCQkJXyA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlpZiAoIWUucHJvZHVjdCB8fCBlLnByb2R1Y3QgJiYgMCA9PT0gZS5wcm9kdWN0Lmxlbmd0aCkgcmV0dXJuIGU7CgkJCQkJZm9yICh2YXIgdCA9IFtdLCBuID0ge30sIGkgPSAwOyBpIDwgZS5wcm9kdWN0Lmxlbmd0aDsgaSsrKSBuW2UucHJvZHVjdFtpXS5zaXRlX25hbWVdID8gbltlLnByb2R1Y3RbaV0uc2l0ZV9uYW1lXS5wcm9kdWN0LnB1c2goZS5wcm9kdWN0W2ldKSA6IG5bZS5wcm9kdWN0W2ldLnNpdGVfbmFtZV0gPSB7CgkJCQkJCXByb2R1Y3Q6IFtlLnByb2R1Y3RbaV1dCgkJCQkJfTsKCQkJCQlmb3IgKHZhciBhIGluIG4pIGEgJiYgdC5wdXNoKG5bYV0pOwoJCQkJCXJldHVybiB7CgkJCQkJCXN0b3JlOiB0CgkJCQkJfQoJCQkJfSwKCQkJCXggPSBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIGkgPSBuKDg2KSwKCQkJCQkJbyA9IDA7CgkJCQkJaWYgKGUudG1hbGwgJiYgZS50bWFsbC5wcm9kdWN0KSB7CgkJCQkJCXZhciBjID0gewoJCQkJCQkJZHBfaWQ6ICJ0bWNvbXBhcmUiLAoJCQkJCQkJc2l0ZV9uYW1lOiAi5aSp54yr5ZWG5Z+OIiwKCQkJCQkJCXByaWNlOiBlLnRtYWxsLm1pbl9wcmljZQoJCQkJCQl9OwoJCQkJCQlyLmluaXQoInRtYWxsIiwgZS50bWFsbC5wcm9kdWN0LCAiJmNvbHVtbj1iMmMiKSwgbC50bWNvbXBhcmUgPSB1KGUudG1hbGwucHJvZHVjdCwgITApOwoJCQkJCQl2YXIgcCA9IHQoIi5jb21wYXJlLWxpc3Q+bGkiKS5lcSg1KTsKCQkJCQkJMCA9PT0gcC5sZW5ndGggJiYgKHAgPSB0KCIuY29tcGFyZS1saXN0PmxpOmxhc3QtY2hpbGQiKSksIDAgPT09IHAubGVuZ3RoID8gdCgiLmNvbXBhcmUtbGlzdCIpLmFwcGVuZChhLmNvbXBpbGUoaSkoewoJCQkJCQkJZGF0YTogW2NdCgkJCQkJCX0pKSA6IHAuYWZ0ZXIoYS5jb21waWxlKGkpKHsKCQkJCQkJCWRhdGE6IFtjXQoJCQkJCQl9KSksIG8rKwoJCQkJCX0KCQkJCQlpZiAoZS50YW9iYW8gJiYgZS50YW9iYW8ucHJvZHVjdCkgewoJCQkJCQl2YXIgYyA9IHsKCQkJCQkJCWRwX2lkOiAidGJjb21wYXJlIiwKCQkJCQkJCXNpdGVfbmFtZTogIua3mOWunSIsCgkJCQkJCQlwcmljZTogZS50YW9iYW8ubWluX3ByaWNlCgkJCQkJCX07CgkJCQkJCXIuaW5pdCgidGFvYmFvIiwgZS50YW9iYW8ucHJvZHVjdCwgIiZjb2x1bW49YjJjIiksIGwudGJjb21wYXJlID0gdShlLnRhb2Jhby5wcm9kdWN0LCAhMCksIHQoIi5jb21wYXJlLWxpc3QiKS5hcHBlbmQoYS5jb21waWxlKGkpKHsKCQkJCQkJCWRhdGE6IFtjXQoJCQkJCQl9KSksIG8rKwoJCQkJCX0KCQkJCQlzLnRvdGFsU2l6ZSA9IHMudG90YWxTaXplICsgbzsKCQkJCQl2YXIgaCA9IE1hdGguY2VpbChzLnRvdGFsU2l6ZSAvIHMucGFnZU51bSk7CgkJCQkJMSAhPT0gcy5wYWdlcyAmJiBzLnBhZ2VzID8gcy5wYWdlcyA9IGggOiAoaCA+IDEgJiYgKHQoIi5tYmFyLXR1cm5wYWdlLnRyaWdodCIpLnNob3coKSwgcy5wYWdlcyA9IGgpLCBzLm1iYXJJdGVtU2hvd051bSA9IHMudG90YWxTaXplID4gcy5wYWdlTnVtID8gcy5wYWdlTnVtIDogcy50b3RhbFNpemUsIHQoIi5jb21wYXJlLWJveCIpLmNzcygid2lkdGgiLCAxMDQgKiBzLm1iYXJJdGVtU2hvd051bSArICJweCIpLCB0KCIubWJhci10dXJucGFnZSIpLmhpZGUoKSksIGQoKQoJCQkJfTsKCQkJZS5leHBvcnRzLnJlbmRlckJ0ID0gZnVuY3Rpb24oZSkgewoJCQkJeChlKQoJCQl9LCBlLmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKGUpIHsKCQkJCWUuYjJjICYmIGUuYjJjLm1pbl9wcmljZSA/IGYoZS5iMmMpIDogZS5iMmNfZnV6enkgJiYgKGUuYjJjMiA9IF8oZS5iMmNfZnV6enkpLCBmKGUuYjJjMikpLCBjID0gby5pbml0KCkKCQkJfQoJCX0pLmNhbGwodCwgbig2KSwgbigxKSkKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJZS5leHBvcnRzID0gJzxkaXYgY2xhc3M9ImJ0Y29tLWRldGFpbCIgc3R5bGU9Int7aWYgc2hvd3BhZ2VzfX1sZWZ0OjBweDt3aWR0aDoxMDAlO3t7L2lmfX0iPlxuICB7e2lmIHNob3dwYWdlc319XG4gIDxkaXYgY2xhc3M9InR1cm5wYWdlLWRpdiB0dXJucGFnZS1sZWZ0IiBzdHlsZT0id2lkdGg6e3t0dXJucFd9fXB4O2hlaWdodDogMTAwJTsiPlxuICAgIDxzcGFuIGNsYXNzPSJuYnQtYmcgdHVybmxlZnQiPjwvc3Bhbj5cbiAgPC9kaXY+XG4gIHt7L2lmfX1cbiAgPGRpdiBjbGFzcz0iYWxsLXByb2R1Y3RzIiBzdHlsZT0ie3tpZiBzaG93cGFnZXN9fSB3aWR0aDp7e3Byb3dpZHRofX1weDsge3svaWZ9fSI+XG4gICAgPHVsIGNsYXNzPSJidGNvbS1saXN0Ij5cbiAgICAgIHt7ZWFjaCBkYXRhfX1cbiAgICAgICAgPGxpIGNsYXNzPSJkcC1pbmRleC17eyRpbmRleH19Ij5cbiAgICAgICAgICA8YSBocmVmPSJ7eyR2YWx1ZS51cmx9fSIgdGFyZ2V0PSJfYmxhbmsiIGNsYXNzPSJjb20taXRlbS1pbWciPlxuICAgICAgICAgICAgPGltZyBzcmM9Imh0dHA6Ly9zMS5nd2RhbmcuY29tL2ltYWdlcy9leHRlbnNpb25zL25ld2Jhci8xMjAuZ2lmIiBkYXRhLXNyYz0ie3skdmFsdWUuaW1nX3VybH19Ij5cbiAgICAgICAgICA8L2E+XG4gICAgICAgICAgPGEgaHJlZj0ie3skdmFsdWUudXJsfX0iIHRhcmdldD0iX2JsYW5rIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJjb20tcHJpY2UiPu+/pXt7JHZhbHVlLnByaWNlfX08L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz0iY29tLXN0b3JlIj57eyR2YWx1ZS5zaXRlX25hbWV9fTwvc3Bhbj5cbiAgICAgICAgICAgIDxwIGNsYXNzPSJjb20tdGxlIiB0aXRsZT0ie3skdmFsdWUudGl0bGV9fSI+XG4gICAgICAgICAgICAgIHt7JHZhbHVlLnRpdGxlfX1cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8L2E+XG4gICAgICAgIDwvbGk+XG4gICAgICB7ey9lYWNofX1cbiAgICA8L3VsPlxuICA8L2Rpdj5cbiAge3tpZiBzaG93cGFnZXN9fVxuICA8ZGl2IGNsYXNzPSJ0dXJucGFnZS1kaXYgdHVybnBhZ2UtcmlnaHQiIHN0eWxlPSJ3aWR0aDp7e3R1cm5wV319cHg7aGVpZ2h0OiAxMDAlOyI+XG4gICAgPHNwYW4gY2xhc3M9Im5idC1iZyB0dXJucmlnaHQiPjwvc3Bhbj5cbiAgPC9kaXY+XG4gIDxkaXYgY2xhc3M9ImJqZC1wYWdlcyI+XG4gICAgICDnrKwmbmJzcDtcbiAgICAgIDxzcGFuIGNsYXNzPSJjdXJyZW50LXBhZ2UiPjE8L3NwYW4+XG4gICAgICAmbmJzcDvpobXvvIzlhbFcbiAgICAgIDxzcGFuIGNsYXNzPSJwYWdlLW51bSI+e3twYWdlc319PC9zcGFuPlxuICAgICAgJm5ic3A76aG1XG4gIDwvZGl2PlxuICB7ey9pZn19XG48L2Rpdj4nCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICd7e2VhY2ggZGF0YX19XG4gIDxsaSBjbGFzcz0iaW5kZXhfe3skaW5kZXh9fSIgZGF0YS1pZD0ie3skdmFsdWUuZHBfaWR9fSI+XG4gICAgPGRpdiBjbGFzcz0iaXRlbS1ib3gtZGV2Ij5cbiAgICAgIDxzcGFuIGNsYXNzPSJjb20taXRlbS1wcmkiPu+/pXt7JHZhbHVlLnByaWNlfX08L3NwYW4+XG4gICAgICA8c3BhbiBjbGFzcz0iY29tLWl0ZW0tc3RvcmUiPnt7JHZhbHVlLnNpdGVfbmFtZX19PC9zcGFuPlxuICAgIDwvZGl2PlxuICA8L2xpPlxue3svZWFjaH19JwoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQl2YXIgaTsKCQkoZnVuY3Rpb24oYSkgewoJCQkidXNlIHN0cmljdCI7CgkJCWkgPSBmdW5jdGlvbigpIHsKCQkJCWZ1bmN0aW9uIGUoZSkgewoJCQkJCWZ1bmN0aW9uIHQoKSB7CgkJCQkJCWZvciAodmFyIHQgPSBlLmIyYy5zdG9yZS5sZW5ndGgsIG4gPSAwOyBuIDwgZS5iMmMuc3RvcmUubGVuZ3RoOyBuKyspIGUuYjJjLnN0b3JlW25dLnByaWNlID0gZS5iMmMuc3RvcmVbbl0ucHJpY2UucmVwbGFjZSgiLCIsICIiKSwgZS5iMmMuc3RvcmVbbl0ucHJvbW8ubGVuZ3RoID4gMyAmJiAoZS5iMmMuc3RvcmVbbl0ucHJvbW8yID0gZS5iMmMuc3RvcmVbbl0ucHJvbW8uc2xpY2UoMCwgMykpOwoJCQkJCQlyZXR1cm4gZS5iMmMuc3RvcmUyID0gZS5iMmMuc3RvcmUuc2xpY2UoMCwgNiksIHQKCQkJCQl9CgkJCQkJdmFyIG4gPSBoLmluaXQoKTsKCQkJCQlpZiAoZS5iMmMucHJvZHVjdCA9IHAoZS5iMmMucHJvZHVjdCksIDAgIT09IGUuYjJjLnByb2R1Y3QubGVuZ3RoKSB7CgkJCQkJCWUuYjJjLnByb2R1Y3RbMF0gPSBnKGUuYjJjLnByb2R1Y3RbMF0pLCBlLmIyYy5taW5fcHJpY2UgPSBlLmIyYy5wcm9kdWN0WzBdLnByaWNlLnJlcGxhY2UoIiwiLCAiIik7CgkJCQkJCXZhciBpID0gJzxhIGhyZWY9ImphdmFzY3JpcHQ6IiBpZD0iJyArIGEuZXh0TmFtZSArICctYjJjLWRwIiBjbGFzcz0iJyArIGEuZXh0TmFtZSArICctdGFiIiA+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYjJjLWljb24iPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJiMmMtc3RvcmUtbiI+5ZWG5Z+OPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9Imxvd2VzdCAnICsgYS5leHRCcmFuZCArICctcHJpY2UiPiZ5ZW47JyArIGUuYjJjLm1pbl9wcmljZSArICI8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9hPiI7CgkJCQkJCXMoIiMiICsgYS5leHROYW1lICsgIi1tYWluLWNvbnRlbnRzIikuYXBwZW5kKGkpOwoJCQkJCQlmb3IgKHZhciByID0gMDsgciA8IGUuYjJjLnByb2R1Y3QubGVuZ3RoOyByKyspIHsKCQkJCQkJCXZhciBsID0gZS5iMmMucHJvZHVjdFtyXTsKCQkJCQkJCWlmIChsID0gZyhsKSwgbC5wcm9tbyA9IG8obC5wcm9tbyksIGwucHJvbW8gJiYgbC5wcm9tby5sZW5ndGggPiAwKSB7CgkJCQkJCQkJbC5wcm9tb2RvbSA9ICIiOwoJCQkJCQkJCWZvciAodmFyIHUgPSAwLCBtID0gbC5wcm9tby5sZW5ndGg7IDMgPiB1ICYmIG0gPiB1OyB1KyspIHsKCQkJCQkJCQkJdmFyIGYgPSBsLnByb21vW3VdOwoJCQkJCQkJCQlmLmhhc1NhbWUgfHwgKGwucHJvbW9kb20gKz0gJzxzcGFuICB0aXRsZT0iJyArIChmLmhhc1NhbWVUaXRsZSA/IGYuaGFzU2FtZVRpdGxlIDogZi5kZXNjKSArICciIGNsYXNzPSJwcm9tb19pY29uIHByb21vX2ljb25fJyArIGYudHlwZSArICciPjwvc3Bhbj4nKQoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQl2YXIgXyA9IHQoKTsKCQkJCQkJcygiIyIgKyBhLmV4dE5hbWUgKyAiLW1haW4iKS5hcHBlbmQoYy5jb21waWxlKGQpKHsKCQkJCQkJCWRhdGE6IGUsCgkJCQkJCQlsZW46IF8sCgkJCQkJCQlleHROYW1lOiBhLmV4dE5hbWUsCgkJCQkJCQl3aWR0aDogbi5iMmNUdXJucFcsCgkJCQkJCQlwcm9kdWN0Vzogbi5iMmNQcm9kdWN0VwoJCQkJCQl9KSksIHMoIiMiICsgYS5leHROYW1lICsgIi1iMmMtZHAtZGV0YWlsIGxpIGltZy5zdG9yZSIpLm9uKCJlcnJvciIsIGZ1bmN0aW9uKCkgewoJCQkJCQkJYS5uZXdfZXh0ZW5zaW9uIHx8IHModGhpcykuYXR0cigic3JjIiwgYS5jX3NlcnZlciArICIvZmF2aWNvbi5pY28iKQoJCQkJCQl9KSwgcygiI2IyYy1wcmV2LXBhZ2UiKS5jbGljayhmdW5jdGlvbigpIHsKCQkJCQkJCWEuY2hhbmdlX3BhZ2UoImIyYyIsIC0xKQoJCQkJCQl9KSwgcygiI2IyYy1uZXh0LXBhZ2UiKS5jbGljayhmdW5jdGlvbigpIHsKCQkJCQkJCWEuY2hhbmdlX3BhZ2UoImIyYyIsIDEpCgkJCQkJCX0pCgkJCQkJfQoJCQkJfQoKCQkJCWZ1bmN0aW9uIHQoZSkgewoJCQkJCXZhciB0ID0gaC5pbml0KCk7CgkJCQkJaWYgKGUuYjJjX2Z1enp5LnByb2R1Y3QgPSBwKGUuYjJjX2Z1enp5LnByb2R1Y3QpLCAwICE9PSBlLmIyY19mdXp6eS5wcm9kdWN0Lmxlbmd0aCkgewoJCQkJCQllLmIyY19mdXp6eS5wcm9kdWN0WzBdID0gZyhlLmIyY19mdXp6eS5wcm9kdWN0WzBdKSwgZS5iMmNfZnV6enkubWluX3ByaWNlID0gZS5iMmNfZnV6enkucHJvZHVjdFswXS5wcmljZTsKCQkJCQkJdmFyIGkgPSAnPGEgaHJlZj0iamF2YXNjcmlwdDoiIGlkPSInICsgYS5leHROYW1lICsgJy1iMmNfZnV6enktZHAiIGNsYXNzPSInICsgYS5leHROYW1lICsgJy10YWIiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYjJjLWljb24gZ3dkX2JnIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJiMmMtc3RvcmUtbiI+5ZWG5Z+O55u45Ly85qy+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ibG93ZXN0ICcgKyBhLmV4dEJyYW5kICsgJy1wcmljZSI+JnllbjsnICsgZS5iMmNfZnV6enkubWluX3ByaWNlICsgIjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDwvYT4iOwoJCQkJCQlzKCIjIiArIGEuZXh0TmFtZSArICItbWFpbi1jb250ZW50cyIpLmFwcGVuZChjLmNvbXBpbGUoaSkoKSk7CgkJCQkJCWZvciAodmFyIHIgPSAwOyByIDwgZS5iMmNfZnV6enkucHJvZHVjdC5sZW5ndGg7IHIrKykgewoJCQkJCQkJdmFyIGwgPSBlLmIyY19mdXp6eS5wcm9kdWN0W3JdOwoJCQkJCQkJaWYgKGwgPSBnKGwpLCBsLnByb21vID0gbyhsLnByb21vKSwgbC5wcm9tbyAmJiBsLnByb21vLmxlbmd0aCA+IDApIHsKCQkJCQkJCQlsLnByb21vZG9tID0gIiI7CgkJCQkJCQkJZm9yICh2YXIgZCA9IDAsIHUgPSBsLnByb21vLmxlbmd0aDsgMyA+IGQgJiYgdSA+IGQ7IGQrKykgewoJCQkJCQkJCQl2YXIgbSA9IGwucHJvbW9bZF07CgkJCQkJCQkJCW0uaGFzU2FtZSB8fCAobC5wcm9tb2RvbSArPSAnPHNwYW4gdGl0bGU9IicgKyAobS5oYXNTYW1lVGl0bGUgPyBtLmhhc1NhbWVUaXRsZSA6IG0uZGVzYykgKyAnIiBjbGFzcz0icHJvbW9faWNvbiBwcm9tb19pY29uXycgKyBtLnR5cGUgKyAnIj48L3NwYW4+JykKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQkJdmFyIGYgPSBuKDg5KTsKCQkJCQkJcygiIyIgKyBhLmV4dE5hbWUgKyAiLW1haW4iKS5hcHBlbmQoYy5jb21waWxlKGYpKHsKCQkJCQkJCWRhdGE6IGUuYjJjX2Z1enp5LnByb2R1Y3QsCgkJCQkJCQlzX3NlcnZlcjogYS5zX3NlcnZlciwKCQkJCQkJCXdpZHRoOiB0LnR1cm5wVywKCQkJCQkJCXByb2R1Y3RXOiB0LmFsbFByb2R1Y3RXCgkJCQkJCX0pKSwgcygiI2IyY19mdXp6eS1wcmV2LXBhZ2UiKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQkJCWEuY2hhbmdlX3BhZ2UoImIyY19mdXp6eSIsIC0xKQoJCQkJCQl9KSwgcygiI2IyY19mdXp6eS1uZXh0LXBhZ2UiKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQkJCWEuY2hhbmdlX3BhZ2UoImIyY19mdXp6eSIsIDEpCgkJCQkJCX0pLCBzKCIjIiArIGEuZXh0TmFtZSArICItYjJjX2Z1enp5LWRwLWRldGFpbCIpLmFwcGVuZCgnPGRpdiBjbGFzcz0icGFuZWwtc2hhZG93Ij48L2Rpdj4nKQoJCQkJCX0KCQkJCX0KCgkJCQlmdW5jdGlvbiBpKGUpIHsKCQkJCQl2YXIgdCA9IGUuYjJjOwoJCQkJCWUuYjJjMiAmJiAodCA9IGUuYjJjMik7CgkJCQkJdmFyIG4gPSBhLmdldEZpeGVkU2hvd1Byb2R1Y3ROdW0oKTsKCQkJCQlpZiAodC5zdG9yZS5sZW5ndGggPiAwKSB7CgkJCQkJCXMoIiMiICsgYS5leHRCcmFuZCArICItY29tcGFyZSIpLmh0bWwoIiIpOwoJCQkJCQl0cnkgewoJCQkJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCB0LnN0b3JlLmxlbmd0aDsgaSsrKSB7CgkJCQkJCQkJdmFyIHIgPSB0LnN0b3JlW2ldLAoJCQkJCQkJCQlsID0gci5wcm9kdWN0WzBdOwoJCQkJCQkJCWwgPSBnKGwpOwoJCQkJCQkJCXZhciBjID0gcGFyc2VJbnQoci5wcm9kdWN0Lmxlbmd0aCksCgkJCQkJCQkJCWQgPSBjICUgbiA9PSAwID8gcGFyc2VJbnQoYyAvIG4pIDogcGFyc2VJbnQoYyAvIG4pICsgMSwKCQkJCQkJCQkJcCA9IHMoIjxsaT4iKTsKCQkJCQkJCQlwLmFwcGVuZChzKCI8c3Bhbj4iLCB7CgkJCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbSIsCgkJCQkJCQkJCWhyZWY6IGwudXJsLAoJCQkJCQkJCQl0YXJnZXQ6ICJfYmxhbmsiCgkJCQkJCQkJfSkuYXBwZW5kKHMoIjxwPiIsIHsKCQkJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItcHJpY2UiCgkJCQkJCQkJfSkuaHRtbCgiJnllbjsiICsgbC5wcmljZSkpLmFwcGVuZChzKCI8cD4iLCB7CgkJCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLXN0b3JlIgoJCQkJCQkJCX0pLnRleHQobC5zaXRlX25hbWUpKSk7CgkJCQkJCQkJdmFyIGggPSBzKCI8ZGl2PiIsIHsKCQkJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItY29tcGFyZS1pdGVtLWRldGFpbCByZS0iICsgYS5leHRCcmFuZCArICItY29tcGFyZS1pdGVtLWRldGFpbCAiICsgYS5leHRCcmFuZCArICItY29tcGFyZS1pdGVtLWRldGFpbC1maXhlZCIsCgkJCQkJCQkJCXN0eWxlOiAiZGlzcGxheTpub25lOyIKCQkJCQkJCQl9KTsKCQkJCQkJCQloLmFwcGVuZChzKCI8cD4iLCB7CgkJCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbS1kZXRhaWwtdGl0bGUgIiArIGEuZXh0QnJhbmQgKyAiLWhlaWdodC1hdXRvICIgKyBhLmV4dEJyYW5kICsgIi1jb21wYXJlLWl0ZW0tZGV0YWlsLXRpdGxlLWZpeGVkIgoJCQkJCQkJCX0pLmFwcGVuZChzKCI8c3Bhbj4iLCB7CgkJCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbS1kZXRhaWwtdGl0bGUtZGVzYyIKCQkJCQkJCQl9KS50ZXh0KGwuc2l0ZV9uYW1lICsgIu+8miIgKyByLmZlZSkpKTsKCQkJCQkJCQlmb3IgKHZhciB1ID0gcygiPHVsPiIsIHsKCQkJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItaXRlbS1saXN0IgoJCQkJCQkJCX0pLCBtID0gMDsgYyA+IG07IG0rKykgewoJCQkJCQkJCQl2YXIgZiA9IHIucHJvZHVjdFttXTsKCQkJCQkJCQkJZiA9IGcoZiksIChmLnNpdGVfbmFtZS5pbmRleE9mKCLlvq7kv6Hnq68iKSA+IC0xIHx8IGYuc2l0ZV9uYW1lLmluZGV4T2YoIuenu+WKqOerryIpID4gLTEpICYmIChmLmlzT3RoZXJDbGllbnQgPSAhMCk7CgkJCQkJCQkJCXZhciBfID0gZi5yZXZfY250ID8gZi5yZXZfY250IDogMCwKCQkJCQkJCQkJCXggPSAiIjsKCQkJCQkJCQkJaWYgKGYucHJvbW8gPSBvKGYucHJvbW8pLCBmLnByb21vICYmIGYucHJvbW8ubGVuZ3RoID4gMCkKCQkJCQkJCQkJCWZvciAodmFyIHcgPSAwLCB2ID0gZi5wcm9tby5sZW5ndGg7IG4gPiB3ICYmIHYgPiB3OyB3KyspCgkJCQkJCQkJCQkJaWYgKCFmLnByb21vW3ddLmhhc1NhbWUpIHsKCQkJCQkJCQkJCQkJdmFyIGIgPSBmLnByb21vW3ddLmhhc1NhbWVUaXRsZSA/IGYucHJvbW9bd10uaGFzU2FtZVRpdGxlIDogZi5wcm9tb1t3XS5kZXNjOwoJCQkJCQkJCQkJCQl4ICs9ICc8c3BhbiBjbGFzcz0iJyArIGEuZXh0QnJhbmQgKyAiLWJnIHByb21vX2ljb24gcHJvbW9faWNvbl8iICsgZi5wcm9tb1t3XS50eXBlICsgJyIgdGl0bGU9IicgKyBiICsgJyI+Jm5ic3A8L3NwYW4+JwoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJdS5hcHBlbmQocygiPGxpPiIsIHsKCQkJCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLWxpc3QtaXRlbSAiICsgKG0gJSBuID09IG4gLSAxIHx8IG0gPT0gYyAtIDEgPyBhLmV4dEJyYW5kICsgIi1sYXN0IiA6ICIiKSwKCQkJCQkJCQkJCXN0eWxlOiAiZGlzcGxheTogIiArIChtID49IG4gPyAibm9uZSIgOiAiYmxvY2siKQoJCQkJCQkJCQl9KS5hcHBlbmQocygiPGE+IiwgewoJCQkJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItcGljIiwKCQkJCQkJCQkJCWhyZWY6IGYudXJsLAoJCQkJCQkJCQkJdGFyZ2V0OiAiX2JsYW5rIgoJCQkJCQkJCQl9KS5hcHBlbmQocygiPGltZz4iLCB7CgkJCQkJCQkJCQlzcmM6IGEuc19zZXJ2ZXIgKyAiL2ltYWdlcy9kcF9kZWZhdWx0LmpwZyIsCgkJCQkJCQkJCQkiZGF0YS1vcmlnaW5hbCI6IGYuaW1nX3VybCwKCQkJCQkJCQkJCXRpdGxlOiBmLnRpdGxlCgkJCQkJCQkJCX0pKSkuYXBwZW5kKHMoIjxhPiIsIHsKCQkJCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLXByb2R1Y3QtdGl0bGUiLAoJCQkJCQkJCQkJaHJlZjogZi51cmwsCgkJCQkJCQkJCQl0YXJnZXQ6ICJfYmxhbmsiLAoJCQkJCQkJCQkJdGl0bGU6IGYudGl0bGUKCQkJCQkJCQkJfSkuYXBwZW5kKHMoIjxkaXY+IikudGV4dChmLnRpdGxlKSkpLmFwcGVuZChzKCI8ZGl2PiIpLmFwcGVuZChzKCI8YT4iLCB7CgkJCQkJCQkJCQkiY2xhc3MiOiBhLmV4dEJyYW5kICsgIi1wcmljZSIsCgkJCQkJCQkJCQlocmVmOiBmLnVybCwKCQkJCQkJCQkJCXRhcmdldDogIl9ibGFuayIKCQkJCQkJCQkJfSkuaHRtbCgiJnllbjsiICsgKGYucHJpY2Vfcm1iID8gZi5wcmljZV9ybWIgOiBmLnByaWNlKSkuYXBwZW5kKHgpKSkuYXBwZW5kKHMoIjxkaXY+IiwgewoJCQkJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICJfcmV2X2NudCIKCQkJCQkJCQkJfSkuYXBwZW5kKHMoIjxhPiIsIHsKCQkJCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiX3Byb2R1Y3RfY29tbWVudF9hbW91bnQiLAoJCQkJCQkJCQkJaHJlZjogZi51cmwsCgkJCQkJCQkJCQl0YXJnZXQ6ICJfYmxhbmsiLAoJCQkJCQkJCQkJdGl0bGU6IGYuaXNPdGhlckNsaWVudCA/IGYuc2l0ZV9uYW1lIDogIuWVhuWTgeivhOiuuuaVsCIKCQkJCQkJCQkJfSkuYXBwZW5kKHMoIjxzcGFuPiIpLnRleHQoZi5pc090aGVyQ2xpZW50ID8gZi5zaXRlX25hbWUgOiAwICE9IF8gPyAi6K+E6K665pWwOiIgKyBmLnJldl9jbnQgOiAiIikpKSkpCgkJCQkJCQkJfQoJCQkJCQkJCXZhciB5ID0gcygiPGRpdj4iLCB7CgkJCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLWIyYy1QYWdlVmlldyAiICsgYS5leHRCcmFuZCArICItYjJjLVBhZ2VWaWV3LWZpeGVkIgoJCQkJCQkJCX0pOwoJCQkJCQkJCWlmICh5LmFwcGVuZChzKCI8cD4iLCB7CgkJCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbS1kZXRhaWwtdGl0bGUiLAoJCQkJCQkJCQlzdHlsZTogImhlaWdodDphdXRvOyIKCQkJCQkJCQl9KS5hcHBlbmQocygiPHNwYW4+IiwgewoJCQkJCQkJCQlzdHlsZTogImZsb2F0Om5vbmU7cGFkZGluZy1sZWZ0OjEwcHg7IiwKCQkJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItY29tcGFyZS1pdGVtLWRldGFpbC1wYWdlcyIKCQkJCQkJCQl9KS5hcHBlbmQocygiPGVtPiIsIHsKCQkJCQkJCQkJaWQ6ICJwYWdlLW5vdy0iICsgaSwKCQkJCQkJCQkJImNsYXNzIjogInBhZ2Utbm93IgoJCQkJCQkJCX0pLnRleHQoIjEiKSkuYXBwZW5kKCIvIikuYXBwZW5kKHMoIjxlbT4iLCB7CgkJCQkJCQkJCWlkOiAicGFnZS10b3RhbC0iICsgaSwKCQkJCQkJCQkJImNsYXNzIjogInBhZ2UtdG90YWwiCgkJCQkJCQkJfSkudGV4dCgiMSIpKSkpLCBoLmFwcGVuZChzKCI8ZGl2PiIsIHsKCQkJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItY29tcGFyZS1wcmV2LXBhZ2UgIiArIGEuZXh0QnJhbmQgKyAiLWxlZnQiCgkJCQkJCQkJfSkuYXBwZW5kKHMoIjxkaXY+IiwgewoJCQkJCQkJCQkiY2xhc3MiOiBhLmV4dEJyYW5kICsgIi1iZyBwYWdlLWFycm93IgoJCQkJCQkJCX0pKSkuYXBwZW5kKHUpLmFwcGVuZChzKCI8ZGl2PiIsIHsKCQkJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItY29tcGFyZS1uZXh0LXBhZ2UgIiArIGEuZXh0QnJhbmQgKyAiLXJpZ2h0IgoJCQkJCQkJCX0pLmFwcGVuZChzKCI8ZGl2PiIsIHsKCQkJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItYmcgcGFnZS1hcnJvdyIKCQkJCQkJCQl9KSkpLmFwcGVuZCh5KSwgcC5hcHBlbmQoaCksIDEgPT0gZCkgewoJCQkJCQkJCQlwLmZpbmQoIi4iICsgYS5leHRCcmFuZCArICItY29tcGFyZS1wcmV2LXBhZ2UiKS5oaWRlKCksIHAuZmluZCgiLiIgKyBhLmV4dEJyYW5kICsgIi1jb21wYXJlLW5leHQtcGFnZSIpLmhpZGUoKSwgcC5maW5kKCIuIiArIGEuZXh0QnJhbmQgKyAiLWIyYy1QYWdlVmlldy1maXhlZCIpLmhpZGUoKSwgcC5hdHRyKCJwYWdlcyIsIDEpLCBwLmF0dHIoImxlbiIsIGMpOwoJCQkJCQkJCQl2YXIgayA9IDIwMCAqIGM7CgkJCQkJCQkJCXAuY2hpbGRyZW4oImRpdi4iICsgYS5leHRCcmFuZCArICItY29tcGFyZS1pdGVtLWRldGFpbC1maXhlZCIpLmNzcygid2lkdGgiLCBrICsgMikKCQkJCQkJCQl9IGVsc2UgcC5jaGlsZHJlbigiZGl2LiIgKyBhLmV4dEJyYW5kICsgIi1jb21wYXJlLWl0ZW0tZGV0YWlsLWZpeGVkIikuY3NzKCJ3aWR0aCIsIGEud2lkdGggLSAyKTsKCQkJCQkJCQlzKCIjIiArIGEuZXh0QnJhbmQgKyAiLWNvbXBhcmUiKS5hcHBlbmQocCksIHMoIiNwYWdlLXRvdGFsLSIgKyBpKS50ZXh0KGQpCgkJCQkJCQl9CgkJCQkJCX0gY2F0Y2ggKHopIHsKCQkJCQkJCWlmIChhLmRlYnVnKSB0aHJvdyB6CgkJCQkJCX0KCQkJCQl9CgkJCQkJcygiIyIgKyBhLmV4dEJyYW5kICsgIi1jb21wYXJlIikuc2hvdygpCgkJCQl9CgoJCQkJZnVuY3Rpb24gbyhlKSB7CgkJCQkJaWYgKCFlIHx8IGUgJiYgIWUubGVuZ3RoKSByZXR1cm4gZTsKCQkJCQlmb3IgKHZhciB0ID0gMCwgbiA9IGUubGVuZ3RoOyBuID4gdDsgdCsrKQoJCQkJCQlpZiAoZVt0XSkKCQkJCQkJCWZvciAodmFyIGkgPSAxOyBuID4gaTsgaSsrKQoJCQkJCQkJCWlmIChlW3QgKyBpXSAmJiBlW3RdLnR5cGUgPT0gZVt0ICsgaV0udHlwZSkgewoJCQkJCQkJCQlpZiAoZVt0XS5oYXNTYW1lKSBjb250aW51ZTsKCQkJCQkJCQkJZVt0XS5oYXNTYW1lVGl0bGUgPSAoZVt0XS5oYXNTYW1lVGl0bGUgPyBlW3RdLmhhc1NhbWVUaXRsZSA6IGVbdF0uZGVzYykgKyAiICIgKyBlW3QgKyBpXS5kZXNjLCBlW3QgKyBpXS5oYXNTYW1lID0gITAKCQkJCQkJCQl9CgkJCQkJcmV0dXJuIGUKCQkJCX0KCgkJCQlmdW5jdGlvbiByKGUpIHsKCQkJCQl2YXIgdCA9IHt9LAoJCQkJCQluID0gZS5wcm9kdWN0OwoJCQkJCW4gPSBwKG4pOwoJCQkJCWZvciAodmFyIGkgaW4gbikKCQkJCQkJaWYgKCIxIiA9PSBuW2ldLm1vcmUpIHsKCQkJCQkJCXZhciBhID0gbltpXS5hbGw7CgkJCQkJCQlmb3IgKHZhciBvIGluIGEpIHsKCQkJCQkJCQl2YXIgciA9IGFbb10uc2l0ZV9uYW1lOwoJCQkJCQkJCW51bGwgPT0gdFtyXSAmJiAodFtyXSA9IFtdKSwgdFtyXS5wdXNoKGFbb10pCgkJCQkJCQl9CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl2YXIgciA9IG5baV0uc2l0ZV9uYW1lOwoJCQkJCQkJbnVsbCA9PSB0W3JdICYmICh0W3JdID0gW10pLCB0W3JdLnB1c2gobltpXSkKCQkJCQkJfQoJCQkJCXZhciBzID0gewoJCQkJCQlzdG9yZTogW10KCQkJCQl9OwoJCQkJCWZvciAodmFyIGwgaW4gdCkKCQkJCQkJaWYgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiB0W2xdWzBdLmZlZSkgewoJCQkJCQkJdmFyIGMgPSB7CgkJCQkJCQkJcHJvZHVjdDogdFtsXSwKCQkJCQkJCQlmZWU6IHRbbF1bMF0uZmVlCgkJCQkJCQl9OwoJCQkJCQkJcy5zdG9yZS5wdXNoKGMpCgkJCQkJCX0KCQkJCQlyZXR1cm4gcwoJCQkJfQoJCQkJdmFyIHMgPSBuKDYpLAoJCQkJCWwgPSB7fSwKCQkJCQljID0gbigxNiksCgkJCQkJZCA9IG4oODgpLAoJCQkJCXAgPSBuKDc2KSwKCQkJCQloID0gbig3NCksCgkJCQkJdSA9IHsKCQkJCQkJMjI4OiAiVVNEIiwKCQkJCQkJMjI5OiAiSlBZIiwKCQkJCQkJMjM4OiAiVVNEIiwKCQkJCQkJMjQ2OiAiRVVSIgoJCQkJCX0sCgkJCQkJbSA9IHsKCQkJCQkJMjI4OiAiJCIsCgkJCQkJCTIzODogIiQiLAoJCQkJCQkyMjk6ICLml6XlhYMiLAoJCQkJCQkyNDY6ICJFVVIiCgkJCQkJfSwKCQkJCQlmID0gZnVuY3Rpb24oZSkgewoJCQkJCQlpZiAoIWUpIHJldHVybiBlOwoJCQkJCQl0cnkgewoJCQkJCQkJdmFyIHQgPSBlLnNwbGl0KCIuIik7CgkJCQkJCQllID0gdFswXS5yZXBsYWNlKCIsIiwgIiIpLCBlID0gTnVtYmVyKGUpID4gOTk5OTkgPyB0WzBdIDogdFswXSArICIuIiArIHRbMV0KCQkJCQkJfSBjYXRjaCAoaSkgewoJCQkJCQkJcmV0dXJuIG4oMjYpKCJiMmNDb21wYXJlOmZpeGVkUHJpY2U6ZXJyb3IiKSwgZQoJCQkJCQl9CgkJCQkJCXJldHVybiBlCgkJCQkJfSwKCQkJCQlnID0gZnVuY3Rpb24oZSkgewoJCQkJCQlpZiAoZS5wcmljZV9ybWIpIHJldHVybiBlOwoJCQkJCQl2YXIgdCA9IG4oNDApOwoJCQkJCQlpZiAoIWUuZHBfaWQpIHJldHVybiBlOwoJCQkJCQl2YXIgaSA9IGUuZHBfaWQuc3BsaXQoIi0iKVsxXSwKCQkJCQkJCWEgPSBpICYmIHVbaV07CgkJCQkJCWlmICghYSkgcmV0dXJuIGU7CgkJCQkJCXZhciBvID0gdChlLnByaWNlLCBhKSwKCQkJCQkJCXIgPSBmKGUucHJpY2UpOwoJCQkJCQlyZXR1cm4gIjIyOSIgPT0gaSA/IGUucHJpY2Vfcm1iID0gbyArICgiKCIgKyByICsgbVtpXSArICIpIikgOiBlLnByaWNlX3JtYiA9IG8gKyAoIigiICsgbVtpXSArIHIgKyAiKSIpLCBlLnByaWNlID0gbywgZQoJCQkJCX07CgkJCQlyZXR1cm4gbC5pbml0ID0gZnVuY3Rpb24obiwgbykgewoJCQkJCWlmICghKGEuc2l0ZS5pbmRleE9mKCJ0YW9iYW8iKSA+IC0xIHx8IGEuc2l0ZS5pbmRleE9mKCJ0bWFsbCIpID4gLTEpKQoJCQkJCQlpZiAoImJvdHRvbSIgPT0gbykgewoJCQkJCQkJaWYgKG4uYjJjICYmIG4uYjJjLm1pbl9wcmljZSkgaShuKSwgYS5zZXRQYWdlQXJncyhhLmV4dEJyYW5kICsgIi1jb21wYXJlIiwgYS5nZXRGaXhlZFNob3dQcm9kdWN0TnVtKCkpLCB0aGlzLnNldEJvdHRvbVZpZXdPZmZzZXQoKTsKCQkJCQkJCWVsc2UgaWYgKG4uYjJjX2Z1enp5KSB7CgkJCQkJCQkJdmFyIGwgPSB7fTsKCQkJCQkJCQlsLmIyYzIgPSByKG4uYjJjX2Z1enp5KSwgaShsKSwgYS5zZXRQYWdlQXJncyhhLmV4dEJyYW5kICsgIi1jb21wYXJlIiwgYS5nZXRGaXhlZFNob3dQcm9kdWN0TnVtKCkpLCB0aGlzLnNldEJvdHRvbVZpZXdPZmZzZXQoKSwgcygiLiIgKyBhLmV4dEJyYW5kICsgIi1iaSIpLmFkZENsYXNzKGEuZXh0QnJhbmQgKyAiLWJpLWJnIikKCQkJCQkJCX0KCQkJCQkJCWEuY2lyY2xlTm90aWNlKG4ucXVhbiwgbi5wcm9tb3Rpb24pCgkJCQkJCX0gZWxzZSBuLmIyYyAmJiBuLmIyYy5taW5fcHJpY2UgPyBlKG4pIDogbi5iMmNfZnV6enkgJiYgdChuKQoJCQkJfSwgbC5zZXRCb3R0b21WaWV3T2Zmc2V0ID0gZnVuY3Rpb24oKSB7CgkJCQkJcygidWwuIiArIGEuZXh0QnJhbmQgKyAiLWl0ZW0tbGlzdCIpLmVhY2goZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gcyh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5lcSgwKTsKCQkJCQkJaWYgKCIxIiA9PSBlLmF0dHIoInBhZ2VzIikpIHsKCQkJCQkJCXZhciB0ID0gZS5vZmZzZXQoKS5sZWZ0LAoJCQkJCQkJCW4gPSBlLndpZHRoKCksCgkJCQkJCQkJaSA9IDIwMCAqIHBhcnNlSW50KGUuYXR0cigibGVuIikpLAoJCQkJCQkJCW8gPSB0IC0gKGkgLyAyIC0gbiAvIDIpOwoJCQkJCQkJMCA+IG8gJiYgKG8gPSAwKTsKCQkJCQkJCXZhciByID0gYS53aWR0aCAtIG87CgkJCQkJCQlhLklFNiA/IChvID0gbiAvIDIgLSBpIC8gMiwgMCA+IG8gKyB0ICYmIChvID0gLXQpLCBlLmNoaWxkcmVuKCJkaXYuIiArIGEuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbS1kZXRhaWwtZml4ZWQiKS5jc3MoInBvc2l0aW9uIiwgImFic29sdXRlIikuY3NzKCJsZWZ0IiwgbyksIGUuZmluZCgiLiIgKyBhLmV4dEJyYW5kICsgIi1jb21wYXJlLWl0ZW0tZGV0YWlsLXRpdGxlLWZpeGVkIikuY3NzKCJsZWZ0IiwgMCkpIDogciA+IGkgPyAoZS5jaGlsZHJlbigiZGl2LiIgKyBhLmV4dEJyYW5kICsgIi1jb21wYXJlLWl0ZW0tZGV0YWlsLWZpeGVkIikuY3NzKCJsZWZ0IiwgbyksIGUuZmluZCgiLiIgKyBhLmV4dEJyYW5kICsgIi1jb21wYXJlLWl0ZW0tZGV0YWlsLXRpdGxlLWZpeGVkIikuY3NzKCJsZWZ0IiwgbykpIDogKGUuY2hpbGRyZW4oImRpdi4iICsgYS5leHRCcmFuZCArICItY29tcGFyZS1pdGVtLWRldGFpbC1maXhlZCIpLmNzcygibGVmdCIsIGEud2lkdGggLSBpKSwgZS5maW5kKCIuIiArIGEuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbS1kZXRhaWwtdGl0bGUtZml4ZWQiKS5jc3MoImxlZnQiLCBhLndpZHRoIC0gaSkpCgkJCQkJCX0gZWxzZSBpZiAoYS5JRTYpIHsKCQkJCQkJCXZhciB0ID0gZS5vZmZzZXQoKS5sZWZ0LAoJCQkJCQkJCW8gPSAwIC0gdDsKCQkJCQkJCWUuY2hpbGRyZW4oImRpdi4iICsgYS5leHRCcmFuZCArICItY29tcGFyZS1pdGVtLWRldGFpbC1maXhlZCIpLmNzcygicG9zaXRpb24iLCAiYWJzb2x1dGUiKS5jc3MoImxlZnQiLCBvKSwgZS5maW5kKCIuIiArIGEuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbS1kZXRhaWwtdGl0bGUtZml4ZWQiKS5jc3MoImxlZnQiLCAwKQoJCQkJCQl9CgkJCQkJfSkKCQkJCX0sIGwKCQkJfS5jYWxsKHQsIG4sIHQsIGUpLCAhKHZvaWQgMCAhPT0gaSAmJiAoZS5leHBvcnRzID0gaSkpCgkJfSkuY2FsbCh0LCBuKDEpKQoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQllLmV4cG9ydHMgPSAnPGRpdiBpZD0ie3tleHROYW1lfX0tYjJjLWRwLWRldGFpbCIgY2xhc3M9InBhbmVsIGd3ZF9jb21wYXJlIj5cbiAgPGRpdiBjbGFzcz0icGFuZWwtd3JhcCI+XG4gICAgPGRpdiBjbGFzcz0icGFnZXMiPlxuICAgICAg56ysJm5ic3A7XG4gICAgICA8c3BhbiBjbGFzcz0iY3VycmVudC1wYWdlIiBpZD0iYjJjLWN1cnJlbnQtcGFnZSI+MTwvc3Bhbj5cbiAgICAgICZuYnNwO+mhte+8jOWFsVxuICAgICAgPHNwYW4gY2xhc3M9InBhZ2UtbnVtIiBpZD0iYjJjLXBhZ2UtbnVtIj40PC9zcGFuPlxuICAgICAgJm5ic3A76aG1XG4gICAgPC9kaXY+XG4gICAgPHVsIGNsYXNzPSJidXktbGlzdCI+XG4gICAgICA8bGk+PGI+5q2j5ZOB5ZWG5Z+O5Zyo5Y2W77yaPC9iPjwvbGk+XG4gICAgICB7e2VhY2ggZGF0YS5iMmMuc3RvcmUyfX1cbiAgICAgIDxsaT5cbiAgICAgICAgPGltZyBjbGFzcz0ic3RvcmUiIHNyYz0ie3skdmFsdWUuaWNvbl91cmx9fSI+XG4gICAgICAgIDxhIGhyZWY9Imh0dHA6Ly93d3cue3tleHROYW1lfX0uY29tL2Rwe3skdmFsdWUuZHBfaWR9fS93aGVyZV9idXkvP2Zyb209YnJvd3NlciN0YWJzIiB0YXJnZXQ9Il9ibGFuayI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9Imd3ZF90aXRsZSI+e3skdmFsdWUuc2l0ZV9uYW1lfX08L3NwYW4+XG4gICAgICAgIDwvYT5cbiAgICAgICAge3tpZiAkdmFsdWUubW9yZT4xfX1cbiAgICAgICAgPGEgaHJlZj0iaHR0cDovL3d3dy57e2V4dE5hbWV9fS5jb20vZHB7eyR2YWx1ZS5kcF9pZH19L3doZXJlX2J1eS8/ZnJvbT1icm93c2VyI3RhYnMiIHRhcmdldD0iX2JsYW5rIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz0ibW9yZSI+KHt7JHZhbHVlLm1vcmV9fSnmrL48L3NwYW4+XG4gICAgICAgIDwvYT5cbiAgICAgICAge3svaWZ9fVxuICAgICAgICB7e2lmICR2YWx1ZS5wcm9tbzJ9fVxuICAgICAgICAgIHt7ZWFjaCAkdmFsdWUucHJvbW8yIGFzIGl0ZW19fVxuICAgICAgICAgICAgPGEgY2xhc3M9InByb21vX2ljb24gcHJvbW9faWNvbl97e2l0ZW0udHlwZX19IiB0aXRsZT0ie3tpdGVtLmRlc2N9fSIgdXJsPSJodHRwOi8vd3d3Lnt7ZXh0TmFtZX19LmNvbS9kcHt7JHZhbHVlLmRwX2lkfX0vd2hlcmVfYnV5Lz9mcm9tPWJyb3dzZXIjdGFicyI+PC9hPlxuICAgICAgICAgIHt7L2VhY2h9fVxuICAgICAgICB7ey9pZn19XG4gICAgICAgIDxhIGhyZWY9Imh0dHA6Ly93d3cue3tleHROYW1lfX0uY29tL2Rwe3skdmFsdWUuZHBfaWR9fS93aGVyZV9idXkvP2Zyb209YnJvd3NlciN0YWJzIiB0YXJnZXQ9Il9ibGFuayI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9InByaWNlIj4meWVuOyB7eyR2YWx1ZS5wcmljZX19PC9zcGFuPlxuICAgICAgICA8L2E+XG4gICAgICA8L2xpPlxuICAgICAge3svZWFjaH19XG4gICAgICA8bGkgY2xhc3M9InNlZS1hbGwtbGlzdCI+XG4gICAgICAgIDxhIGhyZWY9Imh0dHA6Ly93d3cue3tleHROYW1lfX0uY29tL2Rwe3tkYXRhLm5vdy5kcF9pZH19L3doZXJlX2J1eS8/ZnJvbT1icm93c2VyJmNyYzY0PTEmbT1iMmMjdGFicyJ0YXJnZXQ9Il9ibGFuayI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9InNob3ctYWxsIj7mn6XnnIvlhajpg6jllYblrrYoe3tsZW59fSk8L3NwYW4+XG4gICAgICAgIDwvYT5cbiAgICAgIDwvbGk+XG4gICAgPC91bD5cbiAgICA8ZGl2IGNsYXNzPSJsZWZ0LXBhZ2UgdHVybi1wYWdlIj5cbiAgICAgIDxhIGlkPSJiMmMtcHJldi1wYWdlIiB0YXJnZXQ9Il9zZWxmIiB0aXRsZT0i5LiK5LiA6aG1IiBocmVmPSJqYXZhc2NyaXB0OiIgY2xhc3M9Im5ld2ItYmciPjwvYT5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPSJhbGwtcHJvZHVjdHMiIHN0eWxlPSJ3aWR0aDp7e3Byb2R1Y3RXfX1weCI+XG4gICAgICA8dWwgaWQ9ImIyYy1pdGVtLWxpc3QiPlxuICAgICAgICB7e2VhY2ggZGF0YS5iMmMucHJvZHVjdH19XG4gICAgICAgICAgPGxpIGlkPSJiMmMtcHJvZC1pdGVtLXt7JGluZGV4fX0iID5cbiAgICAgICAgICAgIDxhIGlkPSJpbWcte3skdmFsdWUuZHBfaWR9fSIgdGl0bGU9Int7JHZhbHVlLnRpdGxlfX0iIHRhcmdldD0iX2JsYW5rIiBjbGFzcz0ic21hbGwtaW1nIiBocmVmPSJ7eyR2YWx1ZS51cmx9fSI+XG4gICAgICAgICAgICAgIDxpbWcgc3JjPSJ7e3Nfc2VydmVyfX0vdGVtcGxhdGUvYXVnL2ltYWdlcy9uZXcvMTIwLmdpZiIgZGF0YS1vcmlnaW5hbD0ie3skdmFsdWUuaW1nX3VybH19IiBpZD0iZHAtaW1hZ2Utc21hbGwte3skdmFsdWUuZHBfaWR9fSIgY2xhc3M9Imd3ZGFuZy1sYXp5Ij5cbiAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJnd2QtcHJpY2UiPlxuICAgICAgICAgICAgICA8YSB0YXJnZXQ9Il9ibGFuayIgY2xhc3M9ImIyYy1wcmljZS1hIiAgaHJlZj0ie3skdmFsdWUudXJsfX0iPsKle3skdmFsdWUucHJpY2Vfcm1iID8gJHZhbHVlLnByaWNlX3JtYiA6ICR2YWx1ZS5wcmljZX19PC9hPlxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICA8YSB0YXJnZXQ9Il9ibGFuayIgdGl0bGU9Int7JHZhbHVlLnRpdGxlfX0iIGhyZWY9Int7JHZhbHVlLnVybH19IiBjbGFzcz0ic3RvcmUtYSI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InN0b3JlIj57eyR2YWx1ZS5zaXRlX25hbWV9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8c3BhbiBpZD0ie3skdmFsdWUuZHBfaWR9fV9wcm9tb3Rpb24iPnt7IyR2YWx1ZS5wcm9tb2RvbX19PC9zcGFuPlxuICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgIDxhIHRhcmdldD0iX2JsYW5rIiB0aXRsZT0ie3skdmFsdWUudGl0bGV9fSIgaHJlZj0ie3skdmFsdWUudXJsfX0iICBjbGFzcz0iZmVlcy1hIj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iZmVlcyI+e3skdmFsdWUucmV2X2NudCA/ICgi6K+E6K665pWwOiIgKyB2YWx1ZS5yZXZfY250KSA6ICR2YWx1ZS5mZWUgfX08L3NwYW4+XG4gICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgPGEgdGFyZ2V0PSJfYmxhbmsiIHRpdGxlPSJ7eyR2YWx1ZS50aXRsZX19IiBocmVmPSJ7eyR2YWx1ZS51cmx9fSIgY2xhc3M9InRpdGxlLWEiPlxuICAgICAgICAgICAgICAgIDxzcGFuPnt7JHZhbHVlLnRpdGxlfX08L3NwYW4+XG4gICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICA8L2xpPlxuICAgICAgICB7ey9lYWNofX1cbiAgICAgIDwvdWw+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz0icmlnaHQtcGFnZSB0dXJuLXBhZ2UiPlxuICAgICAgPGEgaWQ9ImIyYy1uZXh0LXBhZ2UiIHRpdGxlPSLkuIvkuIDpobUiIHRhcmdldD0iX3NlbGYiIGhyZWY9ImphdmFzY3JpcHQ6IiBjbGFzcz0ibmV3Yi1iZyI+PC9hPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbiAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj5cbiAgICAuZ3dkX2NvbXBhcmUgLnR1cm4tcGFnZSB7XG4gICAgICB3aWR0aDoge3t3aWR0aH19cHg7XG4gICAgfVxuICA8L3N0eWxlPlxuPC9kaXY+JwoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQllLmV4cG9ydHMgPSAnPGRpdiBpZD0iZ3dkYW5nLWIyY19mdXp6eS1kcC1kZXRhaWwiIGNsYXNzPSJwYW5lbCBiMmNfZnV6enkiPlxuICA8ZGl2IGNsYXNzPSJwYW5lbC13cmFwIj5cbiAgICA8ZGl2IGNsYXNzPSJwYWdlcyI+XG4gICAgICDnrKwgXG4gICAgICA8c3BhbiBjbGFzcz0iY3VycmVudC1wYWdlIiBpZD0iYjJjX2Z1enp5LWN1cnJlbnQtcGFnZSI+PC9zcGFuPlxuICAgICAgIOmhte+8jOWFsSBcbiAgICAgICA8c3BhbiBjbGFzcz0icGFnZS1udW0iIGlkPSJiMmNfZnV6enktcGFnZS1udW0iPjwvc3Bhbj5cbiAgICAgICAg6aG1XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz0ibGVmdC1wYWdlIHR1cm4tcGFnZSIgc3R5bGU9ImxlZnQ6MTBweDsiPlxuICAgICAgPGEgaWQ9ImIyY19mdXp6eS1wcmV2LXBhZ2UiIHRhcmdldD0iX3NlbGYiIHRpdGxlPSLkuIrkuIDpobUiIGNsYXNzPSJuZXdiLWJnIiBocmVmPSJqYXZhc2NyaXB0OiI+PC9hPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9ImFsbC1wcm9kdWN0cyIgc3R5bGU9IndpZHRoOnt7cHJvZHVjdFd9fXB4Ij5cbiAgICAgIDx1bCBpZD0iYjJjX2Z1enp5LWl0ZW0tbGlzdCI+XG4gICAgICAgIHt7ZWFjaCBkYXRhfX1cbiAgICAgICAgICA8bGkgaWQ9ImIyY19mdXp6eS1wcm9kLWl0ZW0te3skaW5kZXh9fSIgPlxuICAgICAgICAgICAgPGEgaWQ9ImltZy17eyR2YWx1ZS5kcF9pZH19IiB0aXRsZT0ie3skdmFsdWUudGl0bGV9fSIgdGFyZ2V0PSJfYmxhbmsiIGNsYXNzPSJzbWFsbC1pbWciIGhyZWY9Int7JHZhbHVlLnVybH19Ij5cbiAgICAgICAgICAgICAgPGltZyBzcmM9Int7c19zZXJ2ZXJ9fS90ZW1wbGF0ZS9hdWcvaW1hZ2VzL25ldy8xMjAuZ2lmIiBkYXRhLW9yaWdpbmFsPSJ7eyR2YWx1ZS5pbWdfdXJsfX0iIGlkPSJmdXp6eS1pbWFnZS1zbWFsbC17eyR2YWx1ZS5kcF9pZH19IiBjbGFzcz0iZ3dkYW5nLWxhenkiPlxuICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9Imd3ZC1wcmljZSI+XG4gICAgICAgICAgICAgIDxhIHRhcmdldD0iX2JsYW5rIiBjbGFzcz0iYjJjLXByaWNlLWEiICBocmVmPSJ7eyR2YWx1ZS51cmx9fSI+wqV7eyR2YWx1ZS5wcmljZV9ybWIgPyAkdmFsdWUucHJpY2Vfcm1iIDogJHZhbHVlLnByaWNlfX08L2E+XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIDxhIHRhcmdldD0iX2JsYW5rIiB0aXRsZT0ie3skdmFsdWUudGl0bGV9fSIgaHJlZj0ie3skdmFsdWUudXJsfX0iIGNsYXNzPSJzdG9yZS1hIj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3RvcmUiPnt7JHZhbHVlLnNpdGVfbmFtZX19PC9zcGFuPlxuICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJ7eyR2YWx1ZS5kcF9pZH19X3Byb21vdGlvbiI+e3sjJHZhbHVlLnByb21vZG9tfX08L3NwYW4+XG4gICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgPGEgdGFyZ2V0PSJfYmxhbmsiIHRpdGxlPSJ7eyR2YWx1ZS50aXRsZX19IiBocmVmPSJ7eyR2YWx1ZS51cmx9fSIgIGNsYXNzPSJmZWVzLWEiPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJmZWVzIj57eyR2YWx1ZS5yZXZfY250ID8gKCLor4TorrrmlbA6IiArIHZhbHVlLnJldl9jbnQpIDogJHZhbHVlLmZlZSB9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICA8YSB0YXJnZXQ9Il9ibGFuayIgdGl0bGU9Int7JHZhbHVlLnRpdGxlfX0iIGhyZWY9Int7JHZhbHVlLnVybH19IiBjbGFzcz0idGl0bGUtYSI+XG4gICAgICAgICAgICAgICAgPHNwYW4+e3skdmFsdWUudGl0bGV9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgIHt7L2VhY2h9fVxuICAgICAgPC91bD5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPSJyaWdodC1wYWdlIHR1cm4tcGFnZSI+XG4gICAgICA8YSBocmVmPSJqYXZhc2NyaXB0OiIgaWQ9ImIyY19mdXp6eS1uZXh0LXBhZ2UiIGNsYXNzPSJuZXdiLWJnIiB0aXRsZT0i5LiL5LiA6aG1Ij48L2E+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuICA8c3R5bGUgdHlwZT0idGV4dC9jc3MiPlxuICAgICNnd2RhbmctYjJjX2Z1enp5LWRwLWRldGFpbCB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgLmIyY19mdXp6eSAudHVybi1wYWdlIHtcbiAgICB3aWR0aDoge3t3aWR0aH19cHg7XG4gIH1cbiAgPC9zdHlsZT5cbjwvZGl2PicKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJKGZ1bmN0aW9uKHQpIHsKCQkJInVzZSBzdHJpY3QiOwoJCQllLmV4cG9ydHMgPSBmdW5jdGlvbigpIHsKCQkJCXZhciBlID0gbmV3IEltYWdlOwoJCQkJZS5zcmMgPSB0LnNlcnZlciArICIvdmlzaXQvP3ZlcnNpb249IiArIHQudmVyc2lvbiArICImZnJvbV9kZXZpY2U9IiArIHQuZnJvbV9kZXZpY2UgKyAiJmFjdGlvbj10ZXN0X3RvbmdqaSZyZWZlcj0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGRvY3VtZW50LnJlZmVycmVyKSArICImdXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQobG9jYXRpb24uaHJlZikKCQkJfQoJCX0pLmNhbGwodCwgbigxKSkKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJKGZ1bmN0aW9uKHQsIGkpIHsKCQkJInVzZSBzdHJpY3QiOwoJCQl2YXIgYSA9IG4oOSksCgkJCQlvID0gbigxNiksCgkJCQlyID0gbig5MiksCgkJCQlzID0gbigxNyksCgkJCQlsID0gdm9pZCAwLAoJCQkJYyA9IHZvaWQgMCwKCQkJCWQgPSB7fSwKCQkJCXAgPSAhMCwKCQkJCWggPSB7CgkJCQkJbGlhbmppYTogewoJCQkJCQlsaXN0OiAiLnNlbGxMaXN0Q29udGVudCBsaS5jbGVhciIsCgkJCQkJCWhyZWZpdGVtOiAiLmluZm8gLnRpdGxlIGEiLAoJCQkJCQlpbnNlcnRkb206ICIuc2VsbExpc3RDb250ZW50IGxpLmNsZWFyIgoJCQkJCX0sCgkJCQkJbGlhbmppYTI6IHsKCQkJCQkJbGlzdDogIiNqcy1lcnNob3VmYW5nTGlzdCAubS1saXN0PnVsPmxpIiwKCQkJCQkJaHJlZml0ZW06ICIucHJvcC10aXRsZSBhIiwKCQkJCQkJaW5zZXJ0ZG9tOiAiI2pzLWVyc2hvdWZhbmdMaXN0IC5tLWxpc3Q+dWw+bGkiCgkJCQkJfSwKCQkJCQkiNWk1aiI6IHsKCQkJCQkJbGlzdDogIiNleGNoYW5nZUxpc3QgLmxpc3QtYm9keT5saSIsCgkJCQkJCWhyZWZpdGVtOiAiYSIsCgkJCQkJCWluc2VydGRvbTogIiNleGNoYW5nZUxpc3QgLmxpc3QtYm9keT5saSIKCQkJCQl9LAoJCQkJCWNlbnRhbmV0OiB7CgkJCQkJCWxpc3Q6ICIuc2VjdGlvbi1ob3VzZWxpc3RzIC5ob3VzZS1pdGVtIiwKCQkJCQkJaHJlZml0ZW06ICIuaG91c2UtdGl0bGUgYSIsCgkJCQkJCWluc2VydGRvbTogIi5zZWN0aW9uLWhvdXNlbGlzdHMgLmhvdXNlLWl0ZW0iCgkJCQkJfSwKCQkJCQljZW50YW5ldDI6IHsKCQkJCQkJbGlzdDogIi5yZXN1bHQtbGlzdHMgLmhvdXNlLW1haW4gLmhvdXNlLWl0ZW0iLAoJCQkJCQlocmVmaXRlbTogIi5ob3VzZS10aXRsZSBhIiwKCQkJCQkJaW5zZXJ0ZG9tOiAiLnJlc3VsdC1saXN0cyAuaG91c2UtbWFpbiAuaG91c2UtaXRlbSIKCQkJCQl9CgkJCQl9LAoJCQkJdSA9IHsKCQkJCQlsaWFuamlhOiBbIi5jb250ZW50Pi5wcmljZSJdLAoJCQkJCWxpYW5qaWEyOiBbIi5ob3VzZUluZm8iLCAiLm1haW5pbmZvLXByaWNlIl0sCgkJCQkJIjVpNWoiOiBbIi5ob3VzZS1pbmZvPmxpOmZpcnN0LWNoaWxkIl0sCgkJCQkJY2VudGFuZXQ6IFsiI3NpZGVmaXhlZGJveCAuaW5mb3RvcCJdLAoJCQkJCWNlbnRhbmV0MjogWyIucm9vbWJhc2UtaW5mb3IgLnJvb21iYXNlLXByaWNlIl0KCQkJCX0sCgkJCQltID0gewoJCQkJCWxpYW5qaWE6IDQ0MSwKCQkJCQkiNWk1aiI6IDQ0MiwKCQkJCQljZW50YW5ldDogNTExCgkJCQl9LAoJCQkJZiA9IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gQigpLAoJCQkJCQluID0gdm9pZCAwOwoJCQkJCWlmICgyID09IGUpIHsKCQkJCQkJdmFyIGkgPSBsb2NhdGlvbi5ocmVmOwoJCQkJCQlzd2l0Y2ggKHQuc2l0ZSkgewoJCQkJCQkJY2FzZSAibGlhbmppYSI6CgkJCQkJCQkJbiA9IGkubWF0Y2goL1wvKFthLXowLTlBLVpdKylcLmh0bWwvKVsxXTsKCQkJCQkJCQlicmVhazsKCQkJCQkJCWNhc2UgIjVpNWoiOgoJCQkJCQkJCW4gPSBpLm1hdGNoKC9cLyhbYS16MC05XSspKD86JHxcPykvKVsxXTsKCQkJCQkJCQlicmVhazsKCQkJCQkJCWNhc2UgImNlbnRhbmV0IjoKCQkJCQkJCQluID0gaS5tYXRjaCgvXC8oW2EtejAtOV0rKVwuaHRtbC8pWzFdCgkJCQkJCX0KCQkJCQl9IGVsc2UgewoJCQkJCQl2YXIgYSA9IGM7CgkJCQkJCXN3aXRjaCAodC5zaXRlKSB7CgkJCQkJCQljYXNlICJsaWFuamlhIjoKCQkJCQkJCQluID0gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKGEsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQkJcmV0dXJuIGUubWF0Y2goL1wvKFthLXowLTlBLVpdKylcLmh0bWwvKVsxXQoJCQkJCQkJCX0pLmpvaW4oIiwiKTsKCQkJCQkJCQlicmVhazsKCQkJCQkJCWNhc2UgIjVpNWoiOgoJCQkJCQkJCW4gPSBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoYSwgZnVuY3Rpb24oZSkgewoJCQkJCQkJCQlyZXR1cm4gZS5tYXRjaCgvXC8oW2EtejAtOV0rKSg/OiR8XD8pLylbMV0KCQkJCQkJCQl9KS5qb2luKCIsIik7CgkJCQkJCQkJYnJlYWs7CgkJCQkJCQljYXNlICJjZW50YW5ldCI6CgkJCQkJCQkJbiA9IEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChhLCBmdW5jdGlvbihlKSB7CgkJCQkJCQkJCXJldHVybiBlLm1hdGNoKC9cLyhbYS16MC05XSspXC5odG1sLylbMV0KCQkJCQkJCQl9KS5qb2luKCIsIikKCQkJCQkJfQoJCQkJCX0KCQkJCQlyZXR1cm4gbgoJCQkJfSwKCQkJCWcgPSBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IG1bdC5zaXRlXTsKCQkJCQlpZiAoZSkgewoJCQkJCQl2YXIgbiA9IGYoKSwKCQkJCQkJCW8gPSB0LnVfaG91c2UgKyAiL2FwaS9ob3VzZV9jb2xsZWN0aW9uP2FjPWV4aXN0JnNpdGVfaWQ9IiArIGUgKyAiJmhvdXNlX2NvZGU9IiArIG47CgkJCQkJCWEuZ2V0KG8pLmRvbmUoZnVuY3Rpb24oZSkgewoJCQkJCQkJaWYgKGUgJiYgZS5leGlzdCkKCQkJCQkJCQlmb3IgKHZhciB0ID0gaSgiLmh0LXByaWNlLXJlbWluZCIpLCBuID0gMDsgbiA8IHQubGVuZ3RoOyBuKyspIHsKCQkJCQkJCQkJdmFyIGEgPSB0LmVxKG4pLmF0dHIoImRhdGEtaWQiKTsKCQkJCQkJCQkJZS5leGlzdFthXSAmJiAodC5lcShuKS5hZGRDbGFzcygiaGFzcmVtaW5kIiksIHQuZXEobikuZmluZCgic3BhbiIpLnRleHQoIuW3sua3u+WKoOaPkOmGkiIpLCB0LmVxKG4pLmF0dHIoImRhdGEtY29saWQiLCBlLmV4aXN0W2FdKSkKCQkJCQkJCQl9CgkJCQkJCX0pCgkJCQkJfQoJCQkJfSwKCQkJCV8gPSBmdW5jdGlvbihlLCBuKSB7CgkJCQkJaWYgKCEoZFtlXSA+PSA0KSkgewoJCQkJCQlkW2VdIHx8IChkW2VdID0gMSksIGRbZV0gKys7CgkJCQkJCXZhciBpID0gbVt0LnNpdGVdLAoJCQkJCQkJbyA9IHQudV9ob3VzZSArICIvYXBpL2hvdXNlX2NvbGxlY3Rpb24/YWM9YWRkJnNpdGVfaWQ9IiArIGkgKyAiJmhvdXNlX2NvZGU9IiArIGUgKyAiJmZyb21fdXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQobG9jYXRpb24uaHJlZik7CgkJCQkJCWEuZ2V0KG8pLmRvbmUoZnVuY3Rpb24oZSkgewoJCQkJCQkJZSAmJiAi5pS26JeP5oiQ5YqfIiA9PT0gZS5tc2cgPyBuKGUpIDogIuivt+WFiOeZu+W9lSIgPT09IGUubXNnICYmIChsb2NhdGlvbi5ocmVmID0gZS5sb2dpblVybCkKCQkJCQkJfSkKCQkJCQl9CgkJCQl9LAoJCQkJeCA9IGZ1bmN0aW9uKGUsIG4pIHsKCQkJCQl2YXIgaSA9IHQudV9ob3VzZSArICIvYXBpL2hvdXNlX2NvbGxlY3Rpb24/YWM9ZGVsJmNvbGxlY3Rpb25faWQ9IiArIGU7CgkJCQkJYS5nZXQoaSkuZG9uZShmdW5jdGlvbihlKSB7CgkJCQkJCWUgJiYgIuWIoOmZpOaIkOWKnyIgPT09IGUubXNnICYmIG4oKQoJCQkJCX0pCgkJCQl9LAoJCQkJdyA9IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gdm9pZCAwLAoJCQkJCQl0ID0gdm9pZCAwOwoJCQkJCWkoIi5odC10cmVuZC1kZXNjLCAjYmRleHRfbWluaWJhciAuYmRleHQtdG9wdGFicyIpLm9uKCJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gaSh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5oYXNDbGFzcygidHJlbmQtYm94LTEiKTsKCQkJCQkJaWYgKCFlKSB7CgkJCQkJCQl2YXIgdCA9IGkodGhpcykucGFyZW50KCkubmV4dCgpLmZpbmQoIi5ob3VzZS10cmVuZC1pbWcgaW1nIikuYXR0cigic3JjIik7CgkJCQkJCQlpZiAoIXQpIHsKCQkJCQkJCQl2YXIgbiA9IGkodGhpcykucGFyZW50KCkubmV4dCgpLmZpbmQoIi5ob3VzZS10cmVuZC1pbWcgaW1nIikuYXR0cigiZGF0YS1zcmMiKTsKCQkJCQkJCQlpKHRoaXMpLnBhcmVudCgpLm5leHQoKS5maW5kKCIuaG91c2UtdHJlbmQtaW1nIGltZyIpLmF0dHIoInNyYyIsIG4pCgkJCQkJCQl9CgkJCQkJCQlpKHRoaXMpLmFkZENsYXNzKCJtc2hvdmVyIiksIGkodGhpcykucGFyZW50KCkubmV4dCgpLnNob3coKQoJCQkJCQl9CgkJCQkJfSksIGkoIi5odC10cmVuZC1kZXNjLCAjYmRleHRfbWluaWJhciAuYmRleHQtdG9wdGFicyIpLm9uKCJtb3VzZWxlYXZlIiwgZnVuY3Rpb24oKSB7CgkJCQkJCXZhciB0ID0gdGhpczsKCQkJCQkJZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJCQlpKHQpLnBhcmVudCgpLm5leHQoKS5oaWRlKCksIGkodCkucmVtb3ZlQ2xhc3MoIm1zaG92ZXIiKQoJCQkJCQl9LCAzMDApCgkJCQkJfSksIGkoIi5ob3VzZXQtZGV0YWlsIikub24oIm1vdXNlZW50ZXIiLCBmdW5jdGlvbigpIHsKCQkJCQkJY2xlYXJUaW1lb3V0KGUpCgkJCQkJfSksIGkoIi5ob3VzZXQtZGV0YWlsIikub24oIm1vdXNlbGVhdmUiLCBmdW5jdGlvbigpIHsKCQkJCQkJaSh0aGlzKS5oaWRlKCksIGkoIi5odC10cmVuZC1kZXNjLCAjYmRleHRfbWluaWJhciIpLnJlbW92ZUNsYXNzKCJtc2hvdmVyIikKCQkJCQl9KSwgaSgiLmh0LXByaWNlLXJlbWluZCIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IHRoaXMsCgkJCQkJCQl0ID0gaSh0aGlzKS5maW5kKCJzcGFuIikudGV4dCgpLAoJCQkJCQkJbiA9IGkodGhpcykuYXR0cigiZGF0YS1pZCIpOwoJCQkJCQlpZiAoIumZjeS7t+aPkOmGkiIgPT09IHQpIF8obiwgZnVuY3Rpb24odCkgewoJCQkJCQkJaShlKS5hZGRDbGFzcygiaGFzcmVtaW5kIiksIGkoZSkuZmluZCgic3BhbiIpLnRleHQoIuW3sua3u+WKoOaPkOmGkiIpLCBpKGUpLmF0dHIoImRhdGEtY29saWQiLCB0LmNvbGxlY3RfaWQpCgkJCQkJCX0pOwoJCQkJCQllbHNlIHsKCQkJCQkJCXZhciBhID0gaSh0aGlzKS5hdHRyKCJkYXRhLWNvbGlkIik7CgkJCQkJCQl4KGEsIGZ1bmN0aW9uKCkgewoJCQkJCQkJCWkoZSkuYXR0cigiZGF0YS1jb2xpZCIsIG51bGwpLCBpKGUpLnJlbW92ZUNsYXNzKCJoYXNyZW1pbmQiKSwgaShlKS5maW5kKCJzcGFuIikudGV4dCgi6ZmN5Lu35o+Q6YaSIikKCQkJCQkJCX0pCgkJCQkJCX0KCQkJCQl9KSwgaSgiLmh0LXByaWNlLXJlbWluZCIpLm9uKCJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7CgkJCQkJCTAgIT0gcy5nZXQoInNob3dfbGpmcXJjb2RlIikgJiYgcCAmJiBpKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoIi5odC13eHFyY29kZSIpLnNob3coKQoJCQkJCX0pLCBpKCIuaHQtcHJpY2UtcmVtaW5kIikub24oIm1vdXNlbGVhdmUiLCBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSB0aGlzOwoJCQkJCQl0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJCWkoZSkucGFyZW50KCkucGFyZW50KCkuZmluZCgiLmh0LXd4cXJjb2RlIikuaGlkZSgpCgkJCQkJCX0sIDE1MCkKCQkJCQl9KSwgaSgiLmh0LXd4cXJjb2RlIikub24oIm1vdXNlZW50ZXIiLCBmdW5jdGlvbigpIHsKCQkJCQkJY2xlYXJUaW1lb3V0KHQpCgkJCQkJfSksIGkoIi5odC13eHFyY29kZSIpLm9uKCJtb3VzZWxlYXZlIiwgZnVuY3Rpb24oKSB7CgkJCQkJCWkoIi5odC13eHFyY29kZSIpLmhpZGUoKQoJCQkJCX0pLCBpKCIuaHQtd3hxcmNvZGUgLmh0LXd4LXNwMyIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQlpKCIuaHQtd3hxcmNvZGUiKS5oaWRlKCksIHAgPSAhMSwgci5zZXR0aW5ncygic2V0X3Nob3dfbGpmcXJjb2RlIiwgInNob3dfbGpmcXJjb2RlIiwgIjAiKQoJCQkJCX0pLCBpKCJib2R5Iikub24oImNsaWNrIiwgZnVuY3Rpb24oZSkgewoJCQkJCQl2YXIgdCA9IGkoZS50YXJnZXQpLAoJCQkJCQkJbiA9IHQucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkuZmluZCgiLmNvbW11bml0eS1wcmljZSIpOwoJCQkJCQl0Lmhhc0NsYXNzKCJob3VzZS10cmVuZC1iIikgPyAobi5oaWRlKCksIHQucGFyZW50KCkuZmluZCgic3BhbiIpLnJlbW92ZUNsYXNzKCJ0cmVuZC1jaG9vc2UiKSwgdC5hZGRDbGFzcygidHJlbmQtY2hvb3NlIikpIDogdC5oYXNDbGFzcygiY29tbXVuaXR5LXRyZW5kLWIiKSAmJiAoMCA9PT0gbi5jaGlsZHJlbigpLmxlbmd0aCA/IHYobiwgZnVuY3Rpb24oKSB7CgkJCQkJCQl0LnBhcmVudCgpLmZpbmQoInNwYW4iKS5yZW1vdmVDbGFzcygidHJlbmQtY2hvb3NlIiksIHQuYWRkQ2xhc3MoInRyZW5kLWNob29zZSIpLCBuLnNob3coKQoJCQkJCQl9KSA6ICh0LnBhcmVudCgpLmZpbmQoInNwYW4iKS5yZW1vdmVDbGFzcygidHJlbmQtY2hvb3NlIiksIHQuYWRkQ2xhc3MoInRyZW5kLWNob29zZSIpLCBuLnNob3coKSkpCgkJCQkJfSkKCQkJCX0sCgkJCQl2ID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJCXZhciBpID0gZS5hdHRyKCJkYXRhLXUiKSwKCQkJCQkJYSA9IGUuYXR0cigiaWQiKTsKCQkJCQl6KGksIGZ1bmN0aW9uKGUpIHsKCQkJCQkJbig5MykoewoJCQkJCQkJZWw6IGEsCgkJCQkJCQltc2c6IGUKCQkJCQkJfSksIHQgJiYgZS5jb21tdW5pdHkgJiYgdCgpCgkJCQkJfSkKCQkJCX0sCgkJCQliID0gZnVuY3Rpb24oZSkgewoJCQkJCXZhciBhID0gbig5NSk7CgkJCQkJImJhaWR1IiA9PT0gdC5mcm9tX2RldmljZSAmJiAoYSA9IG4oOTYpKTsKCQkJCQlmb3IgKHZhciByID0gaFtsXSwgcyA9IGkoci5saXN0KSwgYyA9IDA7IGMgPCBzLmxlbmd0aDsgYysrKSB7CgkJCQkJCXZhciBkID0gcy5lcShjKS5maW5kKHIuaHJlZml0ZW0pLAoJCQkJCQkJcCA9IGQuYXR0cigiaHJlZiIpOyAtIDEgPT09IHAuaW5kZXhPZigiaHR0cCIpICYmIChwID0gbG9jYXRpb24ucHJvdG9jb2wgKyAiLy8iICsgbG9jYXRpb24uaG9zdCArIHApOwoJCQkJCQl2YXIgdSA9IHZvaWQgMDsKCQkJCQkJc3dpdGNoICh0LnNpdGUpIHsKCQkJCQkJCWNhc2UgImxpYW5qaWEiOgoJCQkJCQkJCXUgPSBwLm1hdGNoKC9cLyhbYS16MC05QS1aXSspXC5odG1sLylbMV07CgkJCQkJCQkJYnJlYWs7CgkJCQkJCQljYXNlICI1aTVqIjoKCQkJCQkJCQl1ID0gcC5tYXRjaCgvXC8oW2EtejAtOV0rKSg/OiR8XD8pLylbMV07CgkJCQkJCQkJYnJlYWs7CgkJCQkJCQljYXNlICJjZW50YW5ldCI6CgkJCQkJCQkJdSA9IHAubWF0Y2goL1wvKFthLXowLTldKylcLmh0bWwvKVsxXQoJCQkJCQl9CgkJCQkJCXAgPSBlbmNvZGVVUklDb21wb25lbnQocCksIGUuZGF0YVtwXSAmJiBzLmVxKGMpLmFwcGVuZChvLmNvbXBpbGUoYSkoewoJCQkJCQkJZGF0YTogZS5kYXRhW3BdLAoJCQkJCQkJc2VydmVyOiB0LnNlcnZlciwKCQkJCQkJCXNfc2VydmVyOiB0LnNfc2VydmVyLAoJCQkJCQkJaG91c2Vjb2RlOiB1CgkJCQkJCX0pKQoJCQkJCX0KCQkJCQlzZXRUaW1lb3V0KGcsIDUwMCksIHcoKQoJCQkJfSwKCQkJCXkgPSBmdW5jdGlvbihlKSB7CgkJCQkJZm9yICh2YXIgYSA9IGYoKSwgciA9IHZvaWQgMCwgcyA9IHVbbF0sIGMgPSAwOyBjIDwgcy5sZW5ndGg7IGMrKykKCQkJCQkJaWYgKGkoc1tjXSkubGVuZ3RoID4gMCkgewoJCQkJCQkJciA9IHNbY107CgkJCQkJCQlicmVhawoJCQkJCQl9CgkJCQkJdmFyIGQgPSBuKDk1KTsKCQkJCQkiYmFpZHUiID09PSB0LmZyb21fZGV2aWNlICYmIChkID0gbig5NikpOwoJCQkJCXZhciBwID0gZW5jb2RlVVJJQ29tcG9uZW50KGxvY2F0aW9uLmhyZWYpOwoJCQkJCWkocikuYWZ0ZXIoby5jb21waWxlKGQpKHsKCQkJCQkJZGF0YTogZS5kYXRhW3BdLAoJCQkJCQlzZXJ2ZXI6IHQuc2VydmVyLAoJCQkJCQlzX3NlcnZlcjogdC5zX3NlcnZlciwKCQkJCQkJcGFnZXR5cGU6ICJkcHBhZ2UiLAoJCQkJCQlob3VzZWNvZGU6IGEKCQkJCQl9KSksIHcoKSwgc2V0VGltZW91dChnLCA1MDApCgkJCQl9LAoJCQkJayA9IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCA9IGhbbF0sCgkJCQkJCW4gPSB0Lmxpc3QgKyAiICIgKyB0LmhyZWZpdGVtLAoJCQkJCQlhID0gbG9jYXRpb24uaG9zdDsKCQkJCQlpZiAoYS5pbmRleE9mKCJsaWFuamlhIikgPiAtMSAmJiAyID09PSBlKSByZXR1cm4gbG9jYXRpb24uaHJlZjsKCQkJCQlpZiAoYS5pbmRleE9mKCJsaWFuamlhIikgPiAtMSkgewoJCQkJCQl2YXIgbyA9IEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChpKG4pLCBmdW5jdGlvbihlKSB7CgkJCQkJCQl2YXIgdCA9IGkoZSkuYXR0cigiaHJlZiIpOwoJCQkJCQkJcmV0dXJuICh0LmluZGV4T2YoImh0dHAiKSA+IC0xID8gIiIgOiAiaHR0cDovLyIgKyBsb2NhdGlvbi5ob3N0KSArIHQKCQkJCQkJfSk7CgkJCQkJCXJldHVybiBjID0gbywgby5qb2luKCJ8fCIpCgkJCQkJfQoJCQkJCWlmIChhLmluZGV4T2YoIjVpNWoiKSA+IC0xICYmIDIgPT09IGUpIHJldHVybiBsb2NhdGlvbi5ocmVmOwoJCQkJCWlmIChhLmluZGV4T2YoIjVpNWoiKSA+IC0xKSB7CgkJCQkJCXZhciBvID0gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKGkoIiNleGNoYW5nZUxpc3QgLmxpc3QtYm9keT5saT5hIiksIGZ1bmN0aW9uKGUpIHsKCQkJCQkJCXJldHVybiBsb2NhdGlvbi5wcm90b2NvbCArICIvLyIgKyBsb2NhdGlvbi5ob3N0ICsgaShlKS5hdHRyKCJocmVmIikKCQkJCQkJfSk7CgkJCQkJCXJldHVybiBjID0gbywgby5qb2luKCJ8fCIpCgkJCQkJfQoJCQkJCWlmIChhLmluZGV4T2YoImNlbnRhbmV0IikgPiAtMSAmJiAyID09PSBlKSByZXR1cm4gbG9jYXRpb24uaHJlZjsKCQkJCQlpZiAoYS5pbmRleE9mKCJjZW50YW5ldCIpID4gLTEpIHsKCQkJCQkJdmFyIG8gPSBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoaShuKSwgZnVuY3Rpb24oZSkgewoJCQkJCQkJcmV0dXJuIGxvY2F0aW9uLnByb3RvY29sICsgIi8vIiArIGxvY2F0aW9uLmhvc3QgKyBpKGUpLmF0dHIoImhyZWYiKQoJCQkJCQl9KTsKCQkJCQkJcmV0dXJuIGMgPSBvLCBvLmpvaW4oInx8IikKCQkJCQl9CgkJCQl9LAoJCQkJeiA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQlhLmdldChlKS5kb25lKGZ1bmN0aW9uKGUpIHsKCQkJCQkJdChlKQoJCQkJCX0pCgkJCQl9LAoJCQkJQiA9IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gbG9jYXRpb24uaHJlZiwKCQkJCQkJdCA9IDAsCgkJCQkJCW4gPSBsOwoJCQkJCXN3aXRjaCAobikgewoJCQkJCQljYXNlICJsaWFuamlhIjoKCQkJCQkJCXQgPSBlLm1hdGNoKC9cZCtcLmh0bWwvKSA/IDIgOiAxOwoJCQkJCQkJYnJlYWs7CgkJCQkJCWNhc2UgImxpYW5qaWEyIjoKCQkJCQkJCXQgPSBlLm1hdGNoKC9cZCtcLmh0bWwvKSA/IDIgOiAxOwoJCQkJCQkJYnJlYWs7CgkJCQkJCWNhc2UgIjVpNWoiOgoJCQkJCQkJZS5tYXRjaCgvZXhjaGFuZ2VcL1xkKyg/OiR8XD8pLykgJiYgaSgiLmJpZ0ltZyIpLmxlbmd0aCA+IDAgPyB0ID0gMiA6IGUubWF0Y2goL2V4Y2hhbmdlLykgJiYgKHQgPSAxKTsKCQkJCQkJCWJyZWFrOwoJCQkJCQljYXNlICJjZW50YW5ldCI6CgkJCQkJCQllLm1hdGNoKC9lcnNob3VmYW5nXC9bYS16MC05XStcLmh0bWwvKSAmJiBpKCIjcGljQm94IikubGVuZ3RoID4gMCA/IHQgPSAyIDogZS5tYXRjaCgvZXJzaG91ZmFuZy8pICYmICh0ID0gMSk7CgkJCQkJCQlicmVhazsKCQkJCQkJY2FzZSAiY2VudGFuZXQyIjoKCQkJCQkJCWUubWF0Y2goL2Vyc2hvdWZhbmdcL1thLXowLTldK1wuaHRtbC8pID8gdCA9IDIgOiBlLm1hdGNoKC9lcnNob3VmYW5nLykgJiYgKHQgPSAxKQoJCQkJCX0KCQkJCQlyZXR1cm4gdAoJCQkJfSwKCQkJCWogPSBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IG4oOTcpOwoJCQkJCWkoImJvZHkiKS5hcHBlbmQoby5jb21waWxlKGUpKHsKCQkJCQkJc19zZXJ2ZXI6IHQuc19zZXJ2ZXIsCgkJCQkJCWV4dEJyYW5kOiB0LmV4dEJyYW5kCgkJCQkJfSkpLCBpKCJib2R5IikuYWRkQ2xhc3MoImhvdXNlXyIgKyBsKQoJCQkJfTsKCQkJZS5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHsKCQkJCWlmIChsID0gdC5zaXRlLCAibGlhbmppYSIgPT0gbCB8fCAiNWk1aiIgPT0gbCB8fCAiY2VudGFuZXQiID09IGwpIHsKCQkJCQkoInNoLmxpYW5qaWEuY29tIiA9PT0gbG9jYXRpb24uaG9zdCB8fCAic3UubGlhbmppYS5jb20iID09PSBsb2NhdGlvbi5ob3N0KSAmJiAobCA9ICJsaWFuamlhMiIpLCAic2guY2VudGFuZXQuY29tIiA9PT0gbG9jYXRpb24uaG9zdCAmJiAobCA9ICJjZW50YW5ldDIiKTsKCQkJCQl2YXIgZSA9IEIoKSwKCQkJCQkJbiA9IGsoZSksCgkJCQkJCWkgPSB0LnNlcnZlciArICIvZXh0ZW5zaW9uL2hvdXNlVGlwP3VybD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KG4pOwoJCQkJCTIgPT09IGUgPyB6KGksIHkpIDogeihpLCBiKSwgaigpCgkJCQl9CgkJCX0KCQl9KS5jYWxsKHQsIG4oMSksIG4oNikpCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCXZhciBpOwoJCShmdW5jdGlvbihhLCBvKSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJaSA9IGZ1bmN0aW9uKCkgewoJCQkJZnVuY3Rpb24gZShlLCB0LCBuLCBpKSB7CgkJCQkJZnVuY3Rpb24gYSgpIHsKCQkJCQkJbyA+PSBuIHx8IChlKCkgPyB0KCkgOiAobysrLCBzZXRUaW1lb3V0KGEsIGkpKSkKCQkJCQl9CgkJCQkJdmFyIG8gPSAwOwoJCQkJCWEoKQoJCQkJfQoKCQkJCWZ1bmN0aW9uIHQoZSkgewoJCQkJCXZhciB0ID0gZSwKCQkJCQkJaSA9IG4oOSk7CgkJCQkJaS5nZXQoYS5zZXJ2ZXIgKyAiL2Jyd2V4dC9wZXJtYW5lbnRfaWQ/dmVyc2lvbj0yJm9wPXNldF9wX2ZvbGQmcF9mb2xkPSIgKyB0KS5kb25lKGZ1bmN0aW9uKGUpIHsKCQkJCQkJYS5wX2ZvbGQgPSB0CgkJCQkJfSkKCQkJCX0KCgkJCQlmdW5jdGlvbiBpKGUpIHsKCQkJCQlyZXR1cm4gby5leHRlbmQoITAsIHt9LCBlKQoJCQkJfQoJCQkJdmFyIHIgPSBmdW5jdGlvbihlLCB0LCBpKSB7CgkJCQkJdmFyIG8gPSBuKDkpOwoJCQkJCW8uZ2V0KGEuc2VydmVyICsgIi9icndleHQvcGVybWFuZW50X2lkPyIgKyAoInZlcnNpb249MiZvcD0iICsgZSArICImIiArIHQgKyAiPSIgKyBpKSkuZG9uZShmdW5jdGlvbihlKSB7CgkJCQkJCWFbdF0gPSBpCgkJCQkJfSkKCQkJCX07CgkJCQlyZXR1cm4gewoJCQkJCW1haW5iYXJmb2xkOiB0LAoJCQkJCXNldHRpbmdzOiByLAoJCQkJCXJldHJ5OiBlLAoJCQkJCWRlZXBDb3B5OiBpCgkJCQl9CgkJCX0uY2FsbCh0LCBuLCB0LCBlKSwgISh2b2lkIDAgIT09IGkgJiYgKGUuZXhwb3J0cyA9IGkpKQoJCX0pLmNhbGwodCwgbigxKSwgbig2KSkKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJKGZ1bmN0aW9uKHQsIG4pIHsKCQkJInVzZSBzdHJpY3QiOwoJCQl2YXIgaSA9IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgbiA9IG5ldyBEYXRlKGUgLSAyODhlNSksCgkJCQkJCWkgPSBuLmdldEZ1bGxZZWFyKCk7CgkJCQkJKHQuSUU3IHx8IHQuSUU4KSAmJiAoaSA9IG4uZ2V0RnVsbFllYXIoKSk7CgkJCQkJdmFyIGEgPSBuLmdldE1vbnRoKCkgKyAxLAoJCQkJCQlvID0gbi5nZXREYXRlKCk7CgkJCQkJMTAgPiBhICYmIChhID0gIjAiICsgYSksIDEwID4gbyAmJiAobyA9ICIwIiArIG8pOwoJCQkJCXZhciByID0gaSArICIvIiArIGEgKyAiLyIgKyBvOwoJCQkJCXJldHVybiByCgkJCQl9LAoJCQkJYSA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlyZXR1cm4gZQoJCQkJfTsKCQkJZS5leHBvcnRzID0gZnVuY3Rpb24oZSkgewoJCQkJdHJ5IHsKCQkJCQl2YXIgdCA9IHsKCQkJCQkJY2hhcnQ6IHsKCQkJCQkJCXJlbmRlclRvOiBlLmVsLAoJCQkJCQkJdHlwZTogImxpbmUiLAoJCQkJCQkJc3R5bGU6IHsKCQkJCQkJCQltYXJnaW5MZWZ0OiAiNHB4IiwKCQkJCQkJCQlwYWRkaW5nTGVmdDogIjBweCIsCgkJCQkJCQkJbWFyZ2luVG9wOiAiMCIsCgkJCQkJCQkJcGFkZGluZ1RvcDogIjBweCIsCgkJCQkJCQkJbWFyZ2luQm90dG9tOiAiMHB4IiwKCQkJCQkJCQlwYWRkaW5nQm90dG9tOiAiMHB4IgoJCQkJCQkJfSwKCQkJCQkJCWV2ZW50czogewoJCQkJCQkJCWxvYWQ6IGZ1bmN0aW9uKCkgewoJCQkJCQkJCQl0aGlzLnhBeGlzWzBdLnVwZGF0ZSh7CgkJCQkJCQkJCQltYXg6IHRoaXMueEF4aXNbMF0ubWF4ICsgODY0ZTYKCQkJCQkJCQkJfSkKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0sCgkJCQkJCWNyZWRpdHM6IHsKCQkJCQkJCWVuYWJsZWQ6ICExCgkJCQkJCX0sCgkJCQkJCWNvbG9yczogWyIjZDE1MGYwIiwgIiNmMGI1MDciLCAiIzNlYmRmNyJdLAoJCQkJCQl0aXRsZTogewoJCQkJCQkJdGV4dDogZS50aXRsZSB8fCAiIiwKCQkJCQkJCXg6IC0yMCwKCQkJCQkJCXN0eWxlOiB7CgkJCQkJCQkJY29sb3I6ICIjMmY3ZWQ4IgoJCQkJCQkJfQoJCQkJCQl9LAoJCQkJCQl4QXhpczogewoJCQkJCQkJdHlwZTogImRhdGV0aW1lIiwKCQkJCQkJCWRhdGVUaW1lTGFiZWxGb3JtYXRzOiB7CgkJCQkJCQkJZGF5OiAiJVkvJW0iLAoJCQkJCQkJCXdlZWs6ICIlWS8lbSIsCgkJCQkJCQkJbW9udGg6ICIlWS8lbSIKCQkJCQkJCX0sCgkJCQkJCQltaW5UaWNrSW50ZXJ2YWw6IDI1OTJlNiwKCQkJCQkJCXBsb3RMaW5lczogW3sKCQkJCQkJCQljb2xvcjogInJlZCIsCgkJCQkJCQkJZGFzaFN0eWxlOiAibG9uZ2Rhc2hkb3QiLAoJCQkJCQkJCXZhbHVlOiAzLAoJCQkJCQkJCXdpZHRoOiAyCgkJCQkJCQl9XSwKCQkJCQkJCW1pbm9yR3JpZExpbmVDb2xvcjogIiNkZmRmZGYiLAoJCQkJCQkJbGFiZWxzOiB7CgkJCQkJCQkJcm90YXRpb246IC0yNSwKCQkJCQkJCQl5OiAzMCwKCQkJCQkJCQlzdHlsZTogewoJCQkJCQkJCQlmb250U2l6ZTogIjEycHgiLAoJCQkJCQkJCQlmb250RmFtaWx5OiAiQXJpYWwiLAoJCQkJCQkJCQljb2xvcjogIiMzMjMzMzMiCgkJCQkJCQkJfSwKCQkJCQkJCQlhbGlnbjogImNlbnRlciIKCQkJCQkJCX0KCQkJCQkJfSwKCQkJCQkJeUF4aXM6IHsKCQkJCQkJCXRpdGxlOiB7CgkJCQkJCQkJdGV4dDogIiIsCgkJCQkJCQkJcm90YXRpb246IDAsCgkJCQkJCQkJYWxpZ246ICJoaWdoIiwKCQkJCQkJCQl5OiAtMTYsCgkJCQkJCQkJeDogLTEyLAoJCQkJCQkJCW9mZnNldDogLTU1LAoJCQkJCQkJCW1hcmdpbjogMCwKCQkJCQkJCQlzdHlsZTogewoJCQkJCQkJCQljb2xvcjogIiM1ODU4NTgiCgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXBsb3RMaW5lczogW3sKCQkJCQkJCQl2YWx1ZTogMCwKCQkJCQkJCQl3aWR0aDogMSwKCQkJCQkJCQljb2xvcjogIiM4MDgwODAiCgkJCQkJCQl9XSwKCQkJCQkJCWdyaWRMaW5lQ29sb3I6ICIjYzBkMGUwIiwKCQkJCQkJCW1pbm9yR3JpZExpbmVDb2xvcjogIiNkZmRmZGYiLAoJCQkJCQkJdGlja1BpeGVsSW50ZXJ2YWw6IDUwCgkJCQkJCX0sCgkJCQkJCXRvb2x0aXA6IHsKCQkJCQkJCXhEYXRlRm9ybWF0OiAiJVktJW0tJWQiLAoJCQkJCQkJc2hhcmVkOiAhMCwKCQkJCQkJCXZhbHVlRGVjaW1hbHM6IDIsCgkJCQkJCQl2YWx1ZVByZWZpeDogIiIsCgkJCQkJCQl1c2VIVE1MOiAhMCwKCQkJCQkJCXZhbHVlU3VmZml4OiAiIOS4hyIsCgkJCQkJCQlib3JkZXJDb2xvcjogIm5vbmUiLAoJCQkJCQkJcGFkZGluZzogMjAsCgkJCQkJCQlmb3JtYXR0ZXI6IGZ1bmN0aW9uKCkgewoJCQkJCQkJCWZvciAodmFyIGUgPSBpKHRoaXMueCksIHQgPSAnPHRhYmxlIHN0eWxlPSJtYXJnaW4tbGVmdDoxMnB4Ij48dHI+PHRkIHdpZHRoPSIxMDAlIiBjb2xzcGFuPSI4IiBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyO2ZvbnQtd2VpZ2h0OiBib2xkO2ZvbnQtZmFtaWx5OiBBcmlhbDtmb250LXNpemU6MTRweCI+JyArIGUgKyAiPC90ZD48L3RkPjwvdHI+IiwgbiA9IDA7IG4gPCB0aGlzLnBvaW50cy5sZW5ndGg7IG4rKykgewoJCQkJCQkJCQl2YXIgYSA9IHBhcnNlRmxvYXQoTnVtYmVyKHRoaXMucG9pbnRzW25dLnkpLnRvRml4ZWQoMikpICsgIuS4hyI7CgkJCQkJCQkJCXQgKz0gJzx0cj48dGQgc3R5bGU9IndpZHRoOiA4MHB4OyB0ZXh0LWFsaWduOiBsZWZ0Ij48c3BhbiBzdHlsZT0iY29sb3I6ICcgKyB0aGlzLnBvaW50c1tuXS5wb2ludC5zZXJpZXMuY29sb3IgKyAnO2ZvbnQtc2l6ZToxMnB4O2ZvbnQtZmFtaWx5OmFyaWFsO2Zsb2F0Om5vbmU7bWFyZ2luLXJpZ2h0OjVweDsiPuKXjzwvc3Bhbj4nICsgdGhpcy5wb2ludHNbbl0ucG9pbnQuc2VyaWVzLm5hbWUgKyAnPC90ZD5cbiAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmctbGVmdDo0cHg7Ij4nICsgYSArICI8L3RkPjwvdHI+IgoJCQkJCQkJCX0KCQkJCQkJCQlyZXR1cm4gdCArPSAiPC90YWJsZT4iCgkJCQkJCQl9CgkJCQkJCX0sCgkJCQkJCXBsb3RPcHRpb25zOiB7CgkJCQkJCQlzZXJpZXM6IHsKCQkJCQkJCQltYXJrZXI6IHsKCQkJCQkJCQkJcmFkaXVzOiAxLAoJCQkJCQkJCQlzdGF0ZXM6IHsKCQkJCQkJCQkJCWhvdmVyOiB7CgkJCQkJCQkJCQkJcmFkaXVzOiAyCgkJCQkJCQkJCQl9CgkJCQkJCQkJCX0KCQkJCQkJCQl9LAoJCQkJCQkJCWxpbmVXaWR0aDogMS41LAoJCQkJCQkJCXNoYWRvdzogITEsCgkJCQkJCQkJc3RhdGVzOiB7CgkJCQkJCQkJCWhvdmVyOiB7CgkJCQkJCQkJCQlsaW5lV2lkdGg6IDEKCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfSwKCQkJCQkJbGVnZW5kOiB7CgkJCQkJCQllbmFibGVkOiAhMCwKCQkJCQkJCWJvcmRlcldpZHRoOiAwLAoJCQkJCQkJdmVydGljYWxBbGlnbjogInRvcCIsCgkJCQkJCQl4OiAyMjgsCgkJCQkJCQl5OiAtOCwKCQkJCQkJCWl0ZW1TdHlsZTogewoJCQkJCQkJCWNvbG9yOiAiIzU4NTg1OCIsCgkJCQkJCQkJZm9udFdlaWdodDogIm5vcm1hbCIsCgkJCQkJCQkJZm9udFNpemU6ICIxNHB4IiwKCQkJCQkJCQltYXJnaW5Cb3R0b206ICIwcHgiCgkJCQkJCQl9LAoJCQkJCQkJc3ltYm9sV2lkdGg6IDEyLAoJCQkJCQkJc3ltYm9sSGVpZ2h0OiAzLAoJCQkJCQkJaXRlbU1hcmdpbkJvdHRvbTogMCwKCQkJCQkJCWl0ZW1NYXJnaW5Ub3A6IDAsCgkJCQkJCQltYXJnaW46IDEyCgkJCQkJCX0sCgkJCQkJCXNlcmllczogW10KCQkJCQl9OwoJCQkJCXQudGl0bGUuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKCQkJCQl2YXIgbyA9IGUubXNnOwoJCQkJCWlmIChlLm1haW5UcmVuZCkgdC5zZXJpZXNbMF0gPSB7CgkJCQkJCXZpc2libGU6ICEwLAoJCQkJCQluYW1lOiAi5oi/5rqQ5Lu35qC86LWw5Yq/IiwKCQkJCQkJbWFya2VyOiB7CgkJCQkJCQlzeW1ib2w6ICJjaXJjbGUiCgkJCQkJCX0sCgkJCQkJCWRhdGE6IFtdCgkJCQkJfSwgdC5zZXJpZXNbMF0uZGF0YSA9IG8ucHJpY2VfaGlzdG9yeSwgdC5zZXJpZXNbMF0uZGF0YSA9IGEodC5zZXJpZXNbMF0uZGF0YSksIHQuY29sb3JzID0gWyIjM2ViZGY3Il0sIHQubGVnZW5kLmVuYWJsZWQgPSAhMTsKCQkJCQllbHNlIHsKCQkJCQkJdmFyIHIgPSAwLAoJCQkJCQkJcyA9IDAsCgkJCQkJCQlsID0gMCwKCQkJCQkJCWMgPSBbXTsKCQkJCQkJaWYgKG8ub25zYWxlLmxlbmd0aCA+IDEpIHsKCQkJCQkJCXQuc2VyaWVzW3JdID0gewoJCQkJCQkJCXZpc2libGU6ICEwLAoJCQkJCQkJCW5hbWU6ICLmjILniYzljZXku7ciLAoJCQkJCQkJCW1hcmtlcjogewoJCQkJCQkJCQlzeW1ib2w6ICJjaXJjbGUiCgkJCQkJCQkJfSwKCQkJCQkJCQlkYXRhOiBbXQoJCQkJCQkJfSwgcysrLCBsKyssIGMucHVzaCgiI2QxNTBmMCIpLCB0LmxlZ2VuZC54ID0gdC5sZWdlbmQueCAtIDQ4OwoJCQkJCQkJZm9yICh2YXIgZCA9IDA7IGQgPCBlLm1zZy5vbnNhbGUubGVuZ3RoOyBkKyspIHsKCQkJCQkJCQl2YXIgcCA9IG5ldyBBcnJheSgyKTsKCQkJCQkJCQlwWzBdID0gMWUzICogZS5tc2cub25zYWxlW2RdWzBdLCBwWzFdID0gTWF0aC5yb3VuZCgxMDAgKiBlLm1zZy5vbnNhbGVbZF1bMV0pIC8gMTAwLCB0LnNlcmllc1tyXS5kYXRhLnB1c2gocCkKCQkJCQkJCX0KCQkJCQkJCXQuc2VyaWVzW3JdLmRhdGEgPSBhKHQuc2VyaWVzW3JdLmRhdGEpCgkJCQkJCX0KCQkJCQkJaWYgKG8uZGVhbHQubGVuZ3RoID4gMSkgewoJCQkJCQkJdC5zZXJpZXNbc10gPSB7CgkJCQkJCQkJdmlzaWJsZTogITAsCgkJCQkJCQkJbmFtZTogIuaIkOS6pOWNleS7tyIsCgkJCQkJCQkJbWFya2VyOiB7CgkJCQkJCQkJCXN5bWJvbDogImNpcmNsZSIKCQkJCQkJCQl9LAoJCQkJCQkJCWRhdGE6IFtdCgkJCQkJCQl9LCBsKyssIGMucHVzaCgiI2YwYjUwNyIpLCB0LmxlZ2VuZC54ID0gdC5sZWdlbmQueCAtIDQ4OwoJCQkJCQkJZm9yICh2YXIgZCA9IDA7IGQgPCBlLm1zZy5kZWFsdC5sZW5ndGg7IGQrKykgewoJCQkJCQkJCXZhciBwID0gbmV3IEFycmF5KDIpOwoJCQkJCQkJCXBbMF0gPSAxZTMgKiBlLm1zZy5kZWFsdFtkXVswXSwgcFsxXSA9IE1hdGgucm91bmQoMTAwICogZS5tc2cuZGVhbHRbZF1bMV0pIC8gMTAwLCB0LnNlcmllc1tzXS5kYXRhLnB1c2gocCkKCQkJCQkJCX0KCQkJCQkJCXQuc2VyaWVzW3NdLmRhdGEgPSBhKHQuc2VyaWVzW3NdLmRhdGEpCgkJCQkJCX0KCQkJCQkJdC55QXhpcy50aXRsZS50ZXh0ID0gIuWNleS9jSjkuIcpIiwgdC5jb2xvcnMgPSBjCgkJCQkJfQoJCQkJCW5ldyBuLkNoYXJ0KHQpCgkJCQl9IGNhdGNoIChoKSB7fQoJCQl9CgkJfSkuY2FsbCh0LCBuKDEpLCBuKDk0KSkKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJdmFyIGk7CgkJISBmdW5jdGlvbigpIHsKCQkJZnVuY3Rpb24gYShlLCB0KSB7CgkJCQl2YXIgbjsKCQkJCWUgfHwgKGUgPSB7fSk7CgkJCQlmb3IgKG4gaW4gdCkgZVtuXSA9IHRbbl07CgkJCQlyZXR1cm4gZQoJCQl9CgoJCQlmdW5jdGlvbiBvKCkgewoJCQkJdmFyIGUsIHQsIG4gPSBhcmd1bWVudHMsCgkJCQkJaSA9IHt9LAoJCQkJCWEgPSBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCXZhciBuLCBpOwoJCQkJCQkib2JqZWN0IiAhPSB0eXBlb2YgZSAmJiAoZSA9IHt9KTsKCQkJCQkJZm9yIChpIGluIHQpIHQuaGFzT3duUHJvcGVydHkoaSkgJiYgKG4gPSB0W2ldLCBuICYmICJvYmplY3QiID09IHR5cGVvZiBuICYmICJbb2JqZWN0IEFycmF5XSIgIT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChuKSAmJiAicmVuZGVyVG8iICE9PSBpICYmICJudW1iZXIiICE9IHR5cGVvZiBuLm5vZGVUeXBlID8gZVtpXSA9IGEoZVtpXSB8fCB7fSwgbikgOiBlW2ldID0gdFtpXSk7CgkJCQkJCXJldHVybiBlCgkJCQkJfTsKCQkJCWZvciAoblswXSA9PT0gITAgJiYgKGkgPSBuWzFdLCBuID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwobiwgMikpLCB0ID0gbi5sZW5ndGgsIGUgPSAwOyB0ID4gZTsgZSsrKSBpID0gYShpLCBuW2VdKTsKCQkJCXJldHVybiBpCgkJCX0KCgkJCWZ1bmN0aW9uIHIoZSwgdCkgewoJCQkJcmV0dXJuIHBhcnNlSW50KGUsIHQgfHwgMTApCgkJCX0KCgkJCWZ1bmN0aW9uIHMoZSkgewoJCQkJcmV0dXJuICJzdHJpbmciID09IHR5cGVvZiBlCgkJCX0KCgkJCWZ1bmN0aW9uIGwoZSkgewoJCQkJcmV0dXJuIGUgJiYgIm9iamVjdCIgPT0gdHlwZW9mIGUKCQkJfQoKCQkJZnVuY3Rpb24gYyhlKSB7CgkJCQlyZXR1cm4gIltvYmplY3QgQXJyYXldIiA9PT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpCgkJCX0KCgkJCWZ1bmN0aW9uIGQoZSkgewoJCQkJcmV0dXJuICJudW1iZXIiID09IHR5cGVvZiBlCgkJCX0KCgkJCWZ1bmN0aW9uIHAoZSkgewoJCQkJcmV0dXJuIF9lLmxvZyhlKSAvIF9lLkxOMTAKCQkJfQoKCQkJZnVuY3Rpb24gaChlKSB7CgkJCQlyZXR1cm4gX2UucG93KDEwLCBlKQoJCQl9CgoJCQlmdW5jdGlvbiB1KGUsIHQpIHsKCQkJCWZvciAodmFyIG4gPSBlLmxlbmd0aDsgbi0tOykKCQkJCQlpZiAoZVtuXSA9PT0gdCkgewoJCQkJCQllLnNwbGljZShuLCAxKTsKCQkJCQkJYnJlYWsKCQkJCQl9CgkJCX0KCgkJCWZ1bmN0aW9uIG0oZSkgewoJCQkJcmV0dXJuIGUgIT09IFcgJiYgbnVsbCAhPT0gZQoJCQl9CgoJCQlmdW5jdGlvbiBmKGUsIHQsIG4pIHsKCQkJCXZhciBpLCBhOwoJCQkJaWYgKHModCkpIG0obikgPyBlLnNldEF0dHJpYnV0ZSh0LCBuKSA6IGUgJiYgZS5nZXRBdHRyaWJ1dGUgJiYgKGEgPSBlLmdldEF0dHJpYnV0ZSh0KSk7CgkJCQllbHNlIGlmIChtKHQpICYmIGwodCkpCgkJCQkJZm9yIChpIGluIHQpIGUuc2V0QXR0cmlidXRlKGksIHRbaV0pOwoJCQkJcmV0dXJuIGEKCQkJfQoKCQkJZnVuY3Rpb24gZyhlKSB7CgkJCQlyZXR1cm4gYyhlKSA/IGUgOiBbZV0KCQkJfQoKCQkJZnVuY3Rpb24gXygpIHsKCQkJCXZhciBlLCB0LCBuID0gYXJndW1lbnRzLAoJCQkJCWkgPSBuLmxlbmd0aDsKCQkJCWZvciAoZSA9IDA7IGkgPiBlOyBlKyspCgkJCQkJaWYgKHQgPSBuW2VdLCB0ICE9PSBXICYmIG51bGwgIT09IHQpIHJldHVybiB0CgkJCX0KCgkJCWZ1bmN0aW9uIHgoZSwgdCkgewoJCQkJVGUgJiYgIU9lICYmIHQgJiYgdC5vcGFjaXR5ICE9PSBXICYmICh0LmZpbHRlciA9ICJhbHBoYShvcGFjaXR5PSIgKyAxMDAgKiB0Lm9wYWNpdHkgKyAiKSIpLCBhKGUuc3R5bGUsIHQpCgkJCX0KCgkJCWZ1bmN0aW9uIHcoZSwgdCwgbiwgaSwgbykgewoJCQkJdmFyIHIgPSBmZS5jcmVhdGVFbGVtZW50KGUpOwoJCQkJcmV0dXJuIHQgJiYgYShyLCB0KSwgbyAmJiB4KHIsIHsKCQkJCQlwYWRkaW5nOiAwLAoJCQkJCWJvcmRlcjogUWUsCgkJCQkJbWFyZ2luOiAwCgkJCQl9KSwgbiAmJiB4KHIsIG4pLCBpICYmIGkuYXBwZW5kQ2hpbGQociksIHIKCQkJfQoKCQkJZnVuY3Rpb24gdihlLCB0KSB7CgkJCQl2YXIgbiA9IGZ1bmN0aW9uKCkgewoJCQkJCXJldHVybiBXCgkJCQl9OwoJCQkJcmV0dXJuIG4ucHJvdG90eXBlID0gbmV3IGUsIGEobi5wcm90b3R5cGUsIHQpLCBuCgkJCX0KCgkJCWZ1bmN0aW9uIGIoZSwgdCwgbiwgaSkgewoJCQkJdmFyIGEgPSBsdC5udW1iZXJGb3JtYXQsCgkJCQkJbyA9IEcubGFuZywKCQkJCQlzID0gK2UgfHwgMCwKCQkJCQlsID0gLTEgPT09IHQgPyAocy50b1N0cmluZygpLnNwbGl0KCIuIilbMV0gfHwgIiIpLmxlbmd0aCA6IGlzTmFOKHQgPSBrZSh0KSkgPyAyIDogdCwKCQkJCQljID0gdm9pZCAwID09PSBuID8gby5kZWNpbWFsUG9pbnQgOiBuLAoJCQkJCWQgPSB2b2lkIDAgPT09IGkgPyBvLnRob3VzYW5kc1NlcCA6IGksCgkJCQkJcCA9IDAgPiBzID8gIi0iIDogIiIsCgkJCQkJaCA9IFN0cmluZyhyKHMgPSBrZShzKS50b0ZpeGVkKGwpKSksCgkJCQkJdSA9IGgubGVuZ3RoID4gMyA/IGgubGVuZ3RoICUgMyA6IDA7CgkJCQlyZXR1cm4gYSAhPT0gYiA/IGEoZSwgdCwgbiwgaSkgOiBwICsgKHUgPyBoLnN1YnN0cigwLCB1KSArIGQgOiAiIikgKyBoLnN1YnN0cih1KS5yZXBsYWNlKC8oXGR7M30pKD89XGQpL2csICIkMSIgKyBkKSArIChsID8gYyArIGtlKHMgLSBoKS50b0ZpeGVkKGwpLnNsaWNlKDIpIDogIiIpCgkJCX0KCgkJCWZ1bmN0aW9uIHkoZSwgdCkgewoJCQkJcmV0dXJuIG5ldyBBcnJheSgodCB8fCAyKSArIDEgLSBTdHJpbmcoZSkubGVuZ3RoKS5qb2luKDApICsgZQoJCQl9CgoJCQlmdW5jdGlvbiBrKGUsIHQsIG4pIHsKCQkJCXZhciBpID0gZVt0XTsKCQkJCWVbdF0gPSBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7CgkJCQkJcmV0dXJuIGUudW5zaGlmdChpKSwgbi5hcHBseSh0aGlzLCBlKQoJCQkJfQoJCQl9CgoJCQlmdW5jdGlvbiB6KGUsIHQpIHsKCQkJCXZhciBuLCBpID0gL2YkLywKCQkJCQlhID0gL1wuKFswLTldKS8sCgkJCQkJbyA9IEcubGFuZzsKCQkJCXJldHVybiBpLnRlc3QoZSkgPyAobiA9IGUubWF0Y2goYSksIG4gPSBuID8gblsxXSA6IC0xLCBudWxsICE9PSB0ICYmICh0ID0gYih0LCBuLCBvLmRlY2ltYWxQb2ludCwgZS5pbmRleE9mKCIsIikgPiAtMSA/IG8udGhvdXNhbmRzU2VwIDogIiIpKSkgOiB0ID0gWChlLCB0KSwgdAoJCQl9CgoJCQlmdW5jdGlvbiBCKGUsIHQpIHsKCQkJCWZvciAodmFyIG4sIGksIGEsIG8sIHIsIHMsIGwsIGMgPSAieyIsIGQgPSAhMSwgcCA9IFtdOyAtIDEgIT09IChsID0gZS5pbmRleE9mKGMpKTspIHsKCQkJCQlpZiAobiA9IGUuc2xpY2UoMCwgbCksIGQpIHsKCQkJCQkJZm9yIChpID0gbi5zcGxpdCgiOiIpLCBhID0gaS5zaGlmdCgpLnNwbGl0KCIuIiksIHIgPSBhLmxlbmd0aCwgcyA9IHQsIG8gPSAwOyByID4gbzsgbysrKSBzID0gc1thW29dXTsKCQkJCQkJaS5sZW5ndGggJiYgKHMgPSB6KGkuam9pbigiOiIpLCBzKSksIHAucHVzaChzKQoJCQkJCX0gZWxzZSBwLnB1c2gobik7CgkJCQkJZSA9IGUuc2xpY2UobCArIDEpLCBkID0gIWQsIGMgPSBkID8gIn0iIDogInsiCgkJCQl9CgkJCQlyZXR1cm4gcC5wdXNoKGUpLCBwLmpvaW4oIiIpCgkJCX0KCgkJCWZ1bmN0aW9uIGooZSkgewoJCQkJcmV0dXJuIF9lLnBvdygxMCwgd2UoX2UubG9nKGUpIC8gX2UuTE4xMCkpCgkJCX0KCgkJCWZ1bmN0aW9uIEMoZSwgdCwgbiwgaSkgewoJCQkJdmFyIGEsIG87CgkJCQlmb3IgKG4gPSBfKG4sIDEpLCBhID0gZSAvIG4sIHQgfHwgKHQgPSBbMSwgMiwgMi41LCA1LCAxMF0sIGkgPT09ICExICYmICgxID09PSBuID8gdCA9IFsxLCAyLCA1LCAxMF0gOiAuMSA+PSBuICYmICh0ID0gWzEgLyBuXSkpKSwgbyA9IDA7IG8gPCB0Lmxlbmd0aCAmJiAoZSA9IHRbb10sICEoYSA8PSAodFtvXSArICh0W28gKyAxXSB8fCB0W29dKSkgLyAyKSk7IG8rKyk7CgkJCQlyZXR1cm4gZSAqPSBuCgkJCX0KCgkJCWZ1bmN0aW9uIFMoZSwgdCkgewoJCQkJdmFyIG4sIGksIGEgPSBlLmxlbmd0aDsKCQkJCWZvciAoaSA9IDA7IGEgPiBpOyBpKyspIGVbaV0uc3NfaSA9IGk7CgkJCQlmb3IgKGUuc29ydChmdW5jdGlvbihlLCBpKSB7CgkJCQkJcmV0dXJuIG4gPSB0KGUsIGkpLCAwID09PSBuID8gZS5zc19pIC0gaS5zc19pIDogbgoJCQkJfSksIGkgPSAwOyBhID4gaTsgaSsrKSBkZWxldGUgZVtpXS5zc19pCgkJCX0KCgkJCWZ1bmN0aW9uIE4oZSkgewoJCQkJZm9yICh2YXIgdCA9IGUubGVuZ3RoLCBuID0gZVswXTsgdC0tOykgZVt0XSA8IG4gJiYgKG4gPSBlW3RdKTsKCQkJCXJldHVybiBuCgkJCX0KCgkJCWZ1bmN0aW9uIFQoZSkgewoJCQkJZm9yICh2YXIgdCA9IGUubGVuZ3RoLCBuID0gZVswXTsgdC0tOykgZVt0XSA+IG4gJiYgKG4gPSBlW3RdKTsKCQkJCXJldHVybiBuCgkJCX0KCgkJCWZ1bmN0aW9uIFAoZSwgdCkgewoJCQkJdmFyIG47CgkJCQlmb3IgKG4gaW4gZSkgZVtuXSAmJiBlW25dICE9PSB0ICYmIGVbbl0uZGVzdHJveSAmJiBlW25dLmRlc3Ryb3koKSwgZGVsZXRlIGVbbl0KCQkJfQoKCQkJZnVuY3Rpb24gSShlKSB7CgkJCQlZIHx8IChZID0gdyhZZSkpLCBlICYmIFkuYXBwZW5kQ2hpbGQoZSksIFkuaW5uZXJIVE1MID0gIiIKCQkJfQoKCQkJZnVuY3Rpb24gQShlKSB7CgkJCQlyZXR1cm4gcGFyc2VGbG9hdChlLnRvUHJlY2lzaW9uKDE0KSkKCQkJfQoKCQkJZnVuY3Rpb24gcShlLCB0KSB7CgkJCQlKID0gXyhlLCB0LmFuaW1hdGlvbikKCQkJfQoKCQkJZnVuY3Rpb24gRSgpIHsKCQkJCXZhciBlID0gRy5nbG9iYWwudXNlVVRDLAoJCQkJCXQgPSBlID8gImdldFVUQyIgOiAiZ2V0IiwKCQkJCQluID0gZSA/ICJzZXRVVEMiIDogInNldCI7CgkJCQllZSA9IEcuZ2xvYmFsLkRhdGUgfHwgd2luZG93LkRhdGUsIG5lID0gNmU0ICogKGUgJiYgRy5nbG9iYWwudGltZXpvbmVPZmZzZXQgfHwgMCksIHRlID0gZSA/IGVlLlVUQyA6IGZ1bmN0aW9uKGUsIHQsIG4sIGksIGEsIG8pIHsKCQkJCQlyZXR1cm4gbmV3IGVlKGUsIHQsIF8obiwgMSksIF8oaSwgMCksIF8oYSwgMCksIF8obywgMCkpLmdldFRpbWUoKQoJCQkJfSwgaWUgPSB0ICsgIk1pbnV0ZXMiLCBhZSA9IHQgKyAiSG91cnMiLCBvZSA9IHQgKyAiRGF5IiwgcmUgPSB0ICsgIkRhdGUiLCBzZSA9IHQgKyAiTW9udGgiLCBsZSA9IHQgKyAiRnVsbFllYXIiLCBjZSA9IG4gKyAiTWludXRlcyIsIGRlID0gbiArICJIb3VycyIsIHBlID0gbiArICJEYXRlIiwgaGUgPSBuICsgIk1vbnRoIiwgdWUgPSBuICsgIkZ1bGxZZWFyIgoJCQl9CgoJCQlmdW5jdGlvbiBPKGUpIHsKCQkJCXJldHVybiBHID0gbyghMCwgRywgZSksIEUoKSwgRwoJCQl9CgoJCQlmdW5jdGlvbiBMKCkgewoJCQkJcmV0dXJuIEcKCQkJfQoKCQkJZnVuY3Rpb24gRCgpIHt9CgoJCQlmdW5jdGlvbiBNKGUsIHQsIG4sIGkpIHsKCQkJCXRoaXMuYXhpcyA9IGUsIHRoaXMucG9zID0gdCwgdGhpcy50eXBlID0gbiB8fCAiIiwgdGhpcy5pc05ldyA9ICEwLCBuIHx8IGkgfHwgdGhpcy5hZGRMYWJlbCgpCgkJCX0KCgkJCWZ1bmN0aW9uIFIoKSB7CgkJCQl0aGlzLmluaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKQoJCQl9CgoJCQlmdW5jdGlvbiBGKCkgewoJCQkJdGhpcy5pbml0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKCQkJfQoKCQkJZnVuY3Rpb24gJChlLCB0LCBuLCBpLCBhKSB7CgkJCQl2YXIgbyA9IGUuY2hhcnQuaW52ZXJ0ZWQ7CgkJCQl0aGlzLmF4aXMgPSBlLCB0aGlzLmlzTmVnYXRpdmUgPSBuLCB0aGlzLm9wdGlvbnMgPSB0LCB0aGlzLnggPSBpLCB0aGlzLnRvdGFsID0gbnVsbCwgdGhpcy5wb2ludHMgPSB7fSwgdGhpcy5zdGFjayA9IGEsIHRoaXMuYWxpZ25PcHRpb25zID0gewoJCQkJCWFsaWduOiB0LmFsaWduIHx8IChvID8gbiA/ICJsZWZ0IiA6ICJyaWdodCIgOiAiY2VudGVyIiksCgkJCQkJdmVydGljYWxBbGlnbjogdC52ZXJ0aWNhbEFsaWduIHx8IChvID8gIm1pZGRsZSIgOiBuID8gImJvdHRvbSIgOiAidG9wIiksCgkJCQkJeTogXyh0LnksIG8gPyA0IDogbiA/IDE0IDogLTYpLAoJCQkJCXg6IF8odC54LCBvID8gbiA/IC02IDogNiA6IDApCgkJCQl9LCB0aGlzLnRleHRBbGlnbiA9IHQudGV4dEFsaWduIHx8IChvID8gbiA/ICJyaWdodCIgOiAibGVmdCIgOiAiY2VudGVyIikKCQkJfQoJCQl2YXIgVywgSCwgVSwgWSwgRywgWCwgSiwgWiwgViwgSywgUSwgZWUsIHRlLCBuZSwgaWUsIGFlLCBvZSwgcmUsIHNlLCBsZSwgY2UsIGRlLCBwZSwgaGUsIHVlLCBtZSA9IG4oNiksCgkJCQlmZSA9IGRvY3VtZW50LAoJCQkJZ2UgPSB3aW5kb3csCgkJCQlfZSA9IE1hdGgsCgkJCQl4ZSA9IF9lLnJvdW5kLAoJCQkJd2UgPSBfZS5mbG9vciwKCQkJCXZlID0gX2UuY2VpbCwKCQkJCWJlID0gX2UubWF4LAoJCQkJeWUgPSBfZS5taW4sCgkJCQlrZSA9IF9lLmFicywKCQkJCXplID0gX2UuY29zLAoJCQkJQmUgPSBfZS5zaW4sCgkJCQlqZSA9IF9lLlBJLAoJCQkJQ2UgPSAyICogamUgLyAzNjAsCgkJCQlTZSA9IG5hdmlnYXRvci51c2VyQWdlbnQsCgkJCQlOZSA9IGdlLm9wZXJhLAoJCQkJVGUgPSAvbXNpZS9pLnRlc3QoU2UpICYmICFOZSwKCQkJCVBlID0gOCA9PT0gZmUuZG9jdW1lbnRNb2RlLAoJCQkJSWUgPSAvQXBwbGVXZWJLaXQvLnRlc3QoU2UpLAoJCQkJQWUgPSAvRmlyZWZveC8udGVzdChTZSksCgkJCQlxZSA9IC8oTW9iaWxlfEFuZHJvaWR8V2luZG93cyBQaG9uZSkvLnRlc3QoU2UpLAoJCQkJRWUgPSAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLAoJCQkJT2UgPSAhIWZlLmNyZWF0ZUVsZW1lbnROUyAmJiAhIWZlLmNyZWF0ZUVsZW1lbnROUyhFZSwgInN2ZyIpLmNyZWF0ZVNWR1JlY3QsCgkJCQlMZSA9IEFlICYmIHBhcnNlSW50KFNlLnNwbGl0KCJGaXJlZm94LyIpWzFdLCAxMCkgPCA0LAoJCQkJRGUgPSAhT2UgJiYgIVRlICYmICEhZmUuY3JlYXRlRWxlbWVudCgiY2FudmFzIikuZ2V0Q29udGV4dCwKCQkJCU1lID0ge30sCgkJCQlSZSA9IDAsCgkJCQlGZSA9IGZ1bmN0aW9uKCkgewoJCQkJCXJldHVybiBXCgkJCQl9LAoJCQkJJGUgPSBbXSwKCQkJCVdlID0gMCwKCQkJCUhlID0gIkhpZ2hjaGFydHMiLAoJCQkJVWUgPSAiNC4wLjQiLAoJCQkJWWUgPSAiZGl2IiwKCQkJCUdlID0gImFic29sdXRlIiwKCQkJCVhlID0gInJlbGF0aXZlIiwKCQkJCUplID0gImhpZGRlbiIsCgkJCQlaZSA9ICJoaWdoY2hhcnRzLSIsCgkJCQlWZSA9ICJ2aXNpYmxlIiwKCQkJCUtlID0gInB4IiwKCQkJCVFlID0gIm5vbmUiLAoJCQkJZXQgPSAiTSIsCgkJCQl0dCA9ICJMIiwKCQkJCW50ID0gL15bMC05XSskLywKCQkJCWl0ID0gIiIsCgkJCQlhdCA9ICJob3ZlciIsCgkJCQlvdCA9ICJzZWxlY3QiLAoJCQkJcnQgPSAic3Ryb2tlLXdpZHRoIiwKCQkJCXN0ID0ge30sCgkJCQlsdCA9IHt9OwoJCQlpID0gZnVuY3Rpb24oKSB7CgkJCQkJcmV0dXJuIGx0CgkJCQl9LmNhbGwodCwgbiwgdCwgZSksICEodm9pZCAwICE9PSBpICYmIChlLmV4cG9ydHMgPSBpKSksIFggPSBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJaWYgKCFtKHQpIHx8IGlzTmFOKHQpKSByZXR1cm4gIkludmFsaWQgZGF0ZSI7CgkJCQkJZSA9IF8oZSwgIiVZLSVtLSVkICVIOiVNOiVTIik7CgkJCQkJdmFyIGksIG8gPSBuZXcgZWUodCAtIG5lKSwKCQkJCQkJciA9IG9bYWVdKCksCgkJCQkJCXMgPSBvW29lXSgpLAoJCQkJCQlsID0gb1tyZV0oKSwKCQkJCQkJYyA9IG9bc2VdKCksCgkJCQkJCWQgPSBvW2xlXSgpLAoJCQkJCQlwID0gRy5sYW5nLAoJCQkJCQloID0gcC53ZWVrZGF5cywKCQkJCQkJdSA9IGEoewoJCQkJCQkJYTogaFtzXS5zdWJzdHIoMCwgMyksCgkJCQkJCQlBOiBoW3NdLAoJCQkJCQkJZDogeShsKSwKCQkJCQkJCWU6IGwsCgkJCQkJCQliOiBwLnNob3J0TW9udGhzW2NdLAoJCQkJCQkJQjogcC5tb250aHNbY10sCgkJCQkJCQltOiB5KGMgKyAxKSwKCQkJCQkJCXk6IGQudG9TdHJpbmcoKS5zdWJzdHIoMiwgMiksCgkJCQkJCQlZOiBkLAoJCQkJCQkJSDogeShyKSwKCQkJCQkJCUk6IHkociAlIDEyIHx8IDEyKSwKCQkJCQkJCWw6IHIgJSAxMiB8fCAxMiwKCQkJCQkJCU06IHkob1tpZV0oKSksCgkJCQkJCQlwOiAxMiA+IHIgPyAiQU0iIDogIlBNIiwKCQkJCQkJCVA6IDEyID4gciA/ICJhbSIgOiAicG0iLAoJCQkJCQkJUzogeShvLmdldFNlY29uZHMoKSksCgkJCQkJCQlMOiB5KHhlKHQgJSAxZTMpLCAzKQoJCQkJCQl9LCBsdC5kYXRlRm9ybWF0cyk7CgkJCQkJZm9yIChpIGluIHUpCgkJCQkJCWZvciAoOyAtIDEgIT09IGUuaW5kZXhPZigiJSIgKyBpKTspIGUgPSBlLnJlcGxhY2UoIiUiICsgaSwgImZ1bmN0aW9uIiA9PSB0eXBlb2YgdVtpXSA/IHVbaV0odCkgOiB1W2ldKTsKCQkJCQlyZXR1cm4gbiA/IGUuc3Vic3RyKDAsIDEpLnRvVXBwZXJDYXNlKCkgKyBlLnN1YnN0cigxKSA6IGUKCQkJCX0sIEsgPSBmdW5jdGlvbihlLCB0KSB7CgkJCQkJdmFyIG4gPSAiSGlnaGNoYXJ0cyBlcnJvciAjIiArIGUgKyAiOiB3d3cuaGlnaGNoYXJ0cy5jb20vZXJyb3JzLyIgKyBlOwoJCQkJCWlmICh0KSB0aHJvdyBuOwoJCQkJCWdlLmNvbnNvbGUgJiYgY29uc29sZS5sb2cobikKCQkJCX0sIFYgPSB7CgkJCQkJbWlsbGlzZWNvbmQ6IDEsCgkJCQkJc2Vjb25kOiAxZTMsCgkJCQkJbWludXRlOiA2ZTQsCgkJCQkJaG91cjogMzZlNSwKCQkJCQlkYXk6IDg2NGU1LAoJCQkJCXdlZWs6IDYwNDhlNSwKCQkJCQltb250aDogMjY3ODRlNSwKCQkJCQl5ZWFyOiAzMTU1Njk1MmUzCgkJCQl9LCBaID0gewoJCQkJCWluaXQ6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQkJdCA9IHQgfHwgIiI7CgkJCQkJCXZhciBpLCBhLCBvLCByLCBzLCBsID0gZS5zaGlmdCwKCQkJCQkJCWMgPSB0LmluZGV4T2YoIkMiKSA+IC0xLAoJCQkJCQkJZCA9IGMgPyA3IDogMywKCQkJCQkJCXAgPSB0LnNwbGl0KCIgIiksCgkJCQkJCQloID0gW10uY29uY2F0KG4pLAoJCQkJCQkJdSA9IGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQlmb3IgKG8gPSBlLmxlbmd0aDsgby0tOykgZVtvXSA9PT0gZXQgJiYgZS5zcGxpY2UobyArIDEsIDAsIGVbbyArIDFdLCBlW28gKyAyXSwgZVtvICsgMV0sIGVbbyArIDJdKQoJCQkJCQkJfTsKCQkJCQkJaWYgKGMgJiYgKHUocCksIHUoaCkpLCBlLmlzQXJlYSAmJiAociA9IHAuc3BsaWNlKHAubGVuZ3RoIC0gNiwgNiksIHMgPSBoLnNwbGljZShoLmxlbmd0aCAtIDYsIDYpKSwgbCA8PSBoLmxlbmd0aCAvIGQgJiYgcC5sZW5ndGggPT09IGgubGVuZ3RoKQoJCQkJCQkJZm9yICg7IGwtLTspIGggPSBbXS5jb25jYXQoaCkuc3BsaWNlKDAsIGQpLmNvbmNhdChoKTsKCQkJCQkJaWYgKGUuc2hpZnQgPSAwLCBwLmxlbmd0aCkKCQkJCQkJCWZvciAoaSA9IGgubGVuZ3RoOyBwLmxlbmd0aCA8IGk7KSBhID0gW10uY29uY2F0KHApLnNwbGljZShwLmxlbmd0aCAtIGQsIGQpLCBjICYmIChhW2QgLSA2XSA9IGFbZCAtIDJdLCBhW2QgLSA1XSA9IGFbZCAtIDFdKSwgcCA9IHAuY29uY2F0KGEpOwoJCQkJCQlyZXR1cm4gciAmJiAocCA9IHAuY29uY2F0KHIpLCBoID0gaC5jb25jYXQocykpLCBbcCwgaF0KCQkJCQl9LAoJCQkJCXN0ZXA6IGZ1bmN0aW9uKGUsIHQsIG4sIGkpIHsKCQkJCQkJdmFyIGEsIG8gPSBbXSwKCQkJCQkJCXIgPSBlLmxlbmd0aDsKCQkJCQkJaWYgKDEgPT09IG4pIG8gPSBpOwoJCQkJCQllbHNlIGlmIChyID09PSB0Lmxlbmd0aCAmJiAxID4gbikKCQkJCQkJCWZvciAoOyByLS07KSBhID0gcGFyc2VGbG9hdChlW3JdKSwgb1tyXSA9IGlzTmFOKGEpID8gZVtyXSA6IG4gKiBwYXJzZUZsb2F0KHRbcl0gLSBhKSArIGE7CgkJCQkJCWVsc2UgbyA9IHQ7CgkJCQkJCXJldHVybiBvCgkJCQkJfQoJCQkJfSwKCQkJCWZ1bmN0aW9uKGUpIHsKCQkJCQlnZS5IaWdoY2hhcnRzQWRhcHRlciA9IGdlLkhpZ2hjaGFydHNBZGFwdGVyIHx8IGUgJiYgewoJCQkJCQlpbml0OiBmdW5jdGlvbih0KSB7CgkJCQkJCQl2YXIgbiA9IGUuZng7CgkJCQkJCQllLmV4dGVuZChlLmVhc2luZywgewoJCQkJCQkJCWVhc2VPdXRRdWFkOiBmdW5jdGlvbihlLCB0LCBuLCBpLCBhKSB7CgkJCQkJCQkJCXJldHVybiAtaSAqICh0IC89IGEpICogKHQgLSAyKSArIG4KCQkJCQkJCQl9CgkJCQkJCQl9KSwgZS5lYWNoKFsiY3VyIiwgIl9kZWZhdWx0IiwgIndpZHRoIiwgImhlaWdodCIsICJvcGFjaXR5Il0sIGZ1bmN0aW9uKHQsIGkpIHsKCQkJCQkJCQl2YXIgYSwgbyA9IG4uc3RlcDsKCQkJCQkJCQkiY3VyIiA9PT0gaSA/IG8gPSBuLnByb3RvdHlwZSA6ICJfZGVmYXVsdCIgPT09IGkgJiYgZS5Ud2VlbiAmJiAobyA9IGUuVHdlZW4ucHJvcEhvb2tzW2ldLCBpID0gInNldCIpLCBhID0gb1tpXSwgYSAmJiAob1tpXSA9IGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQkJdmFyIG47CgkJCQkJCQkJCXJldHVybiBlID0gdCA/IGUgOiB0aGlzLCAiYWxpZ24iICE9PSBlLnByb3AgPyAobiA9IGUuZWxlbSwgbi5hdHRyID8gbi5hdHRyKGUucHJvcCwgImN1ciIgPT09IGkgPyBXIDogZS5ub3cpIDogYS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSA6IHZvaWQgMAoJCQkJCQkJCX0pCgkJCQkJCQl9KSwgayhlLmNzc0hvb2tzLm9wYWNpdHksICJnZXQiLCBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJCQkJcmV0dXJuIHQuYXR0ciA/IHQub3BhY2l0eSB8fCAwIDogZS5jYWxsKHRoaXMsIHQsIG4pCgkJCQkJCQl9KSwgdGhpcy5hZGRBbmltU2V0dGVyKCJkIiwgZnVuY3Rpb24oZSkgewoJCQkJCQkJCXZhciBuLCBpID0gZS5lbGVtOwoJCQkJCQkJCWUuc3RhcnRlZCB8fCAobiA9IHQuaW5pdChpLCBpLmQsIGkudG9EKSwgZS5zdGFydCA9IG5bMF0sIGUuZW5kID0gblsxXSwgZS5zdGFydGVkID0gITApLCBpLmF0dHIoImQiLCB0LnN0ZXAoZS5zdGFydCwgZS5lbmQsIGUucG9zLCBpLnRvRCkpCgkJCQkJCQl9KSwgdGhpcy5lYWNoID0gQXJyYXkucHJvdG90eXBlLmZvckVhY2ggPyBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCQkJcmV0dXJuIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZSwgdCkKCQkJCQkJCX0gOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCQkJdmFyIG4sIGkgPSBlLmxlbmd0aDsKCQkJCQkJCQlmb3IgKG4gPSAwOyBpID4gbjsgbisrKQoJCQkJCQkJCQlpZiAodC5jYWxsKGVbbl0sIGVbbl0sIG4sIGUpID09PSAhMSkgcmV0dXJuIG4KCQkJCQkJCX0sIGUuZm4uaGlnaGNoYXJ0cyA9IGZ1bmN0aW9uKCkgewoJCQkJCQkJCXZhciBlLCB0LCBuLCBpID0gIkNoYXJ0IiwKCQkJCQkJCQkJYSA9IGFyZ3VtZW50czsKCQkJCQkJCQlyZXR1cm4gdGhpc1swXSAmJiAocyhhWzBdKSAmJiAoaSA9IGFbMF0sIGEgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhLCAxKSksIGUgPSBhWzBdLCBlICE9PSBXICYmIChlLmNoYXJ0ID0gZS5jaGFydCB8fCB7fSwgZS5jaGFydC5yZW5kZXJUbyA9IHRoaXNbMF0sIG4gPSBuZXcgbHRbaV0oZSwgYVsxXSksIHQgPSB0aGlzKSwgZSA9PT0gVyAmJiAodCA9ICRlW2YodGhpc1swXSwgImRhdGEtaGlnaGNoYXJ0cy1jaGFydCIpXSkpLCB0CgkJCQkJCQl9CgkJCQkJCX0sCgkJCQkJCWFkZEFuaW1TZXR0ZXI6IGZ1bmN0aW9uKHQsIG4pIHsKCQkJCQkJCWUuVHdlZW4gPyBlLlR3ZWVuLnByb3BIb29rc1t0XSA9IHsKCQkJCQkJCQlzZXQ6IG4KCQkJCQkJCX0gOiBlLmZ4LnN0ZXBbdF0gPSBuCgkJCQkJCX0sCgkJCQkJCWdldFNjcmlwdDogZS5nZXRTY3JpcHQsCgkJCQkJCWluQXJyYXk6IGUuaW5BcnJheSwKCQkJCQkJYWRhcHRlclJ1bjogZnVuY3Rpb24odCwgbikgewoJCQkJCQkJcmV0dXJuIGUodClbbl0oKQoJCQkJCQl9LAoJCQkJCQlncmVwOiBlLmdyZXAsCgkJCQkJCW1hcDogZnVuY3Rpb24oZSwgdCkgewoJCQkJCQkJZm9yICh2YXIgbiA9IFtdLCBpID0gMCwgYSA9IGUubGVuZ3RoOyBhID4gaTsgaSsrKSBuW2ldID0gdC5jYWxsKGVbaV0sIGVbaV0sIGksIGUpOwoJCQkJCQkJcmV0dXJuIG4KCQkJCQkJfSwKCQkJCQkJb2Zmc2V0OiBmdW5jdGlvbih0KSB7CgkJCQkJCQlyZXR1cm4gZSh0KS5vZmZzZXQoKQoJCQkJCQl9LAoJCQkJCQlhZGRFdmVudDogZnVuY3Rpb24odCwgbiwgaSkgewoJCQkJCQkJZSh0KS5iaW5kKG4sIGkpCgkJCQkJCX0sCgkJCQkJCXJlbW92ZUV2ZW50OiBmdW5jdGlvbih0LCBuLCBpKSB7CgkJCQkJCQl2YXIgYSA9IGZlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPyAicmVtb3ZlRXZlbnRMaXN0ZW5lciIgOiAiZGV0YWNoRXZlbnQiOwoJCQkJCQkJZmVbYV0gJiYgdCAmJiAhdFthXSAmJiAodFthXSA9IGZ1bmN0aW9uKCkge30pLCBlKHQpLnVuYmluZChuLCBpKQoJCQkJCQl9LAoJCQkJCQlmaXJlRXZlbnQ6IGZ1bmN0aW9uKHQsIG4sIGksIG8pIHsKCQkJCQkJCXZhciByLCBzID0gZS5FdmVudChuKSwKCQkJCQkJCQlsID0gImRldGFjaGVkIiArIG47CgkJCQkJCQkhVGUgJiYgaSAmJiAoZGVsZXRlIGkubGF5ZXJYLCBkZWxldGUgaS5sYXllclksIGRlbGV0ZSBpLnJldHVyblZhbHVlKSwgYShzLCBpKSwgdFtuXSAmJiAodFtsXSA9IHRbbl0sIHRbbl0gPSBudWxsKSwgZS5lYWNoKFsicHJldmVudERlZmF1bHQiLCAic3RvcFByb3BhZ2F0aW9uIl0sIGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQkJCQl2YXIgbiA9IHNbdF07CgkJCQkJCQkJc1t0XSA9IGZ1bmN0aW9uKCkgewoJCQkJCQkJCQl0cnkgewoJCQkJCQkJCQkJbi5jYWxsKHMpCgkJCQkJCQkJCX0gY2F0Y2ggKGUpIHsKCQkJCQkJCQkJCSJwcmV2ZW50RGVmYXVsdCIgPT09IHQgJiYgKHIgPSAhMCkKCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCX0pLCBlKHQpLnRyaWdnZXIocyksIHRbbF0gJiYgKHRbbl0gPSB0W2xdLCB0W2xdID0gbnVsbCksICFvIHx8IHMuaXNEZWZhdWx0UHJldmVudGVkKCkgfHwgciB8fCBvKHMpCgkJCQkJCX0sCgkJCQkJCXdhc2hNb3VzZUV2ZW50OiBmdW5jdGlvbihlKSB7CgkJCQkJCQl2YXIgdCA9IGUub3JpZ2luYWxFdmVudCB8fCBlOwoJCQkJCQkJcmV0dXJuIHQucGFnZVggPT09IFcgJiYgKHQucGFnZVggPSBlLnBhZ2VYLCB0LnBhZ2VZID0gZS5wYWdlWSksIHQKCQkJCQkJfSwKCQkJCQkJYW5pbWF0ZTogZnVuY3Rpb24odCwgbiwgaSkgewoJCQkJCQkJdmFyIGEgPSBlKHQpOwoJCQkJCQkJdC5zdHlsZSB8fCAodC5zdHlsZSA9IHt9KSwgbi5kICYmICh0LnRvRCA9IG4uZCwgbi5kID0gMSksIGEuc3RvcCgpLCBuLm9wYWNpdHkgIT09IFcgJiYgdC5hdHRyICYmIChuLm9wYWNpdHkgKz0gInB4IiksIHQuaGFzQW5pbSA9IDEsIGEuYW5pbWF0ZShuLCBpKQoJCQkJCQl9LAoJCQkJCQlzdG9wOiBmdW5jdGlvbih0KSB7CgkJCQkJCQl0Lmhhc0FuaW0gJiYgZSh0KS5zdG9wKCkKCQkJCQkJfQoJCQkJCX0KCQkJCX0obWUpOwoJCQl2YXIgY3QgPSBnZS5IaWdoY2hhcnRzQWRhcHRlciwKCQkJCWR0ID0gY3QgfHwge307CgkJCWN0ICYmIGN0LmluaXQuY2FsbChjdCwgWik7CgkJCXZhciBwdCA9IGR0LmFkYXB0ZXJSdW4sCgkJCQlodCA9IGR0LmdldFNjcmlwdCwKCQkJCXV0ID0gZHQuaW5BcnJheSwKCQkJCW10ID0gZHQuZWFjaCwKCQkJCWZ0ID0gZHQuZ3JlcCwKCQkJCWd0ID0gZHQub2Zmc2V0LAoJCQkJX3QgPSBkdC5tYXAsCgkJCQl4dCA9IGR0LmFkZEV2ZW50LAoJCQkJd3QgPSBkdC5yZW1vdmVFdmVudCwKCQkJCXZ0ID0gZHQuZmlyZUV2ZW50LAoJCQkJYnQgPSBkdC53YXNoTW91c2VFdmVudCwKCQkJCXl0ID0gZHQuYW5pbWF0ZSwKCQkJCWt0ID0gZHQuc3RvcCwKCQkJCXp0ID0gewoJCQkJCWVuYWJsZWQ6ICEwLAoJCQkJCXg6IDAsCgkJCQkJeTogMTUsCgkJCQkJc3R5bGU6IHsKCQkJCQkJY29sb3I6ICIjNjA2MDYwIiwKCQkJCQkJY3Vyc29yOiAiZGVmYXVsdCIsCgkJCQkJCWZvbnRTaXplOiAiMTFweCIKCQkJCQl9CgkJCQl9OwoJCQlHID0gewoJCQkJY29sb3JzOiBbIiM3Y2I1ZWMiLCAiIzQzNDM0OCIsICIjOTBlZDdkIiwgIiNmN2EzNWMiLCAiIzgwODVlOSIsICIjZjE1YzgwIiwgIiNlNGQzNTQiLCAiIzgwODVlOCIsICIjOGQ0NjUzIiwgIiM5MWU4ZTEiXSwKCQkJCXN5bWJvbHM6IFsiY2lyY2xlIiwgImRpYW1vbmQiLCAic3F1YXJlIiwgInRyaWFuZ2xlIiwgInRyaWFuZ2xlLWRvd24iXSwKCQkJCWxhbmc6IHsKCQkJCQlsb2FkaW5nOiAiTG9hZGluZy4uLiIsCgkJCQkJbW9udGhzOiBbIkphbnVhcnkiLCAiRmVicnVhcnkiLCAiTWFyY2giLCAiQXByaWwiLCAiTWF5IiwgIkp1bmUiLCAiSnVseSIsICJBdWd1c3QiLCAiU2VwdGVtYmVyIiwgIk9jdG9iZXIiLCAiTm92ZW1iZXIiLCAiRGVjZW1iZXIiXSwKCQkJCQlzaG9ydE1vbnRoczogWyJKYW4iLCAiRmViIiwgIk1hciIsICJBcHIiLCAiTWF5IiwgIkp1biIsICJKdWwiLCAiQXVnIiwgIlNlcCIsICJPY3QiLCAiTm92IiwgIkRlYyJdLAoJCQkJCXdlZWtkYXlzOiBbIlN1bmRheSIsICJNb25kYXkiLCAiVHVlc2RheSIsICJXZWRuZXNkYXkiLCAiVGh1cnNkYXkiLCAiRnJpZGF5IiwgIlNhdHVyZGF5Il0sCgkJCQkJZGVjaW1hbFBvaW50OiAiLiIsCgkJCQkJbnVtZXJpY1N5bWJvbHM6IFsiayIsICJNIiwgIkciLCAiVCIsICJQIiwgIkUiXSwKCQkJCQlyZXNldFpvb206ICJSZXNldCB6b29tIiwKCQkJCQlyZXNldFpvb21UaXRsZTogIlJlc2V0IHpvb20gbGV2ZWwgMToxIiwKCQkJCQl0aG91c2FuZHNTZXA6ICIsIgoJCQkJfSwKCQkJCWdsb2JhbDogewoJCQkJCXVzZVVUQzogITAsCgkJCQkJY2FudmFzVG9vbHNVUkw6ICJodHRwOi8vY29kZS5oaWdoY2hhcnRzLmNvbS80LjAuNC9tb2R1bGVzL2NhbnZhcy10b29scy5qcyIsCgkJCQkJVk1MUmFkaWFsR3JhZGllbnRVUkw6ICJodHRwOi8vY29kZS5oaWdoY2hhcnRzLmNvbS80LjAuNC9nZngvdm1sLXJhZGlhbC1ncmFkaWVudC5wbmciCgkJCQl9LAoJCQkJY2hhcnQ6IHsKCQkJCQlib3JkZXJDb2xvcjogIiM0NTcyQTciLAoJCQkJCWJvcmRlclJhZGl1czogMCwKCQkJCQlkZWZhdWx0U2VyaWVzVHlwZTogImxpbmUiLAoJCQkJCWlnbm9yZUhpZGRlblNlcmllczogITAsCgkJCQkJc3BhY2luZzogWzEwLCAxMCwgMTUsIDEwXSwKCQkJCQliYWNrZ3JvdW5kQ29sb3I6ICIjRkZGRkZGIiwKCQkJCQlwbG90Qm9yZGVyQ29sb3I6ICIjQzBDMEMwIiwKCQkJCQlyZXNldFpvb21CdXR0b246IHsKCQkJCQkJdGhlbWU6IHsKCQkJCQkJCXpJbmRleDogMjAKCQkJCQkJfSwKCQkJCQkJcG9zaXRpb246IHsKCQkJCQkJCWFsaWduOiAicmlnaHQiLAoJCQkJCQkJeDogLTEwLAoJCQkJCQkJeTogMTAKCQkJCQkJfQoJCQkJCX0KCQkJCX0sCgkJCQl0aXRsZTogewoJCQkJCXRleHQ6ICJDaGFydCB0aXRsZSIsCgkJCQkJYWxpZ246ICJjZW50ZXIiLAoJCQkJCW1hcmdpbjogMTUsCgkJCQkJc3R5bGU6IHsKCQkJCQkJY29sb3I6ICIjMzMzMzMzIiwKCQkJCQkJZm9udFNpemU6ICIxOHB4IgoJCQkJCX0KCQkJCX0sCgkJCQlzdWJ0aXRsZTogewoJCQkJCXRleHQ6ICIiLAoJCQkJCWFsaWduOiAiY2VudGVyIiwKCQkJCQlzdHlsZTogewoJCQkJCQljb2xvcjogIiM1NTU1NTUiCgkJCQkJfQoJCQkJfSwKCQkJCXBsb3RPcHRpb25zOiB7CgkJCQkJbGluZTogewoJCQkJCQlhbGxvd1BvaW50U2VsZWN0OiAhMSwKCQkJCQkJc2hvd0NoZWNrYm94OiAhMSwKCQkJCQkJYW5pbWF0aW9uOiB7CgkJCQkJCQlkdXJhdGlvbjogMWUzCgkJCQkJCX0sCgkJCQkJCWV2ZW50czoge30sCgkJCQkJCWxpbmVXaWR0aDogMiwKCQkJCQkJbWFya2VyOiB7CgkJCQkJCQlsaW5lV2lkdGg6IDAsCgkJCQkJCQlyYWRpdXM6IDQsCgkJCQkJCQlsaW5lQ29sb3I6ICIjRkZGRkZGIiwKCQkJCQkJCXN0YXRlczogewoJCQkJCQkJCWhvdmVyOiB7CgkJCQkJCQkJCWVuYWJsZWQ6ICEwLAoJCQkJCQkJCQlsaW5lV2lkdGhQbHVzOiAxLAoJCQkJCQkJCQlyYWRpdXNQbHVzOiAyCgkJCQkJCQkJfSwKCQkJCQkJCQlzZWxlY3Q6IHsKCQkJCQkJCQkJZmlsbENvbG9yOiAiI0ZGRkZGRiIsCgkJCQkJCQkJCWxpbmVDb2xvcjogIiMwMDAwMDAiLAoJCQkJCQkJCQlsaW5lV2lkdGg6IDIKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0sCgkJCQkJCXBvaW50OiB7CgkJCQkJCQlldmVudHM6IHt9CgkJCQkJCX0sCgkJCQkJCWRhdGFMYWJlbHM6IG8oenQsIHsKCQkJCQkJCWFsaWduOiAiY2VudGVyIiwKCQkJCQkJCWVuYWJsZWQ6ICExLAoJCQkJCQkJZm9ybWF0dGVyOiBmdW5jdGlvbigpIHsKCQkJCQkJCQlyZXR1cm4gbnVsbCA9PT0gdGhpcy55ID8gIiIgOiBiKHRoaXMueSwgLTEpCgkJCQkJCQl9LAoJCQkJCQkJdmVydGljYWxBbGlnbjogImJvdHRvbSIsCgkJCQkJCQl5OiAwCgkJCQkJCX0pLAoJCQkJCQljcm9wVGhyZXNob2xkOiAzMDAsCgkJCQkJCXBvaW50UmFuZ2U6IDAsCgkJCQkJCXN0YXRlczogewoJCQkJCQkJaG92ZXI6IHsKCQkJCQkJCQlsaW5lV2lkdGhQbHVzOiAxLAoJCQkJCQkJCW1hcmtlcjoge30sCgkJCQkJCQkJaGFsbzogewoJCQkJCQkJCQlzaXplOiAxMCwKCQkJCQkJCQkJb3BhY2l0eTogLjI1CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXNlbGVjdDogewoJCQkJCQkJCW1hcmtlcjoge30KCQkJCQkJCX0KCQkJCQkJfSwKCQkJCQkJc3RpY2t5VHJhY2tpbmc6ICEwLAoJCQkJCQl0dXJib1RocmVzaG9sZDogMWUzCgkJCQkJfQoJCQkJfSwKCQkJCWxhYmVsczogewoJCQkJCXN0eWxlOiB7CgkJCQkJCXBvc2l0aW9uOiBHZSwKCQkJCQkJY29sb3I6ICIjM0U1NzZGIgoJCQkJCX0KCQkJCX0sCgkJCQlsZWdlbmQ6IHsKCQkJCQllbmFibGVkOiAhMCwKCQkJCQlhbGlnbjogImNlbnRlciIsCgkJCQkJbGF5b3V0OiAiaG9yaXpvbnRhbCIsCgkJCQkJbGFiZWxGb3JtYXR0ZXI6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gdGhpcy5uYW1lCgkJCQkJfSwKCQkJCQlib3JkZXJDb2xvcjogIiM5MDkwOTAiLAoJCQkJCWJvcmRlclJhZGl1czogMCwKCQkJCQluYXZpZ2F0aW9uOiB7CgkJCQkJCWFjdGl2ZUNvbG9yOiAiIzI3NGI2ZCIsCgkJCQkJCWluYWN0aXZlQ29sb3I6ICIjQ0NDIgoJCQkJCX0sCgkJCQkJc2hhZG93OiAhMSwKCQkJCQlpdGVtU3R5bGU6IHsKCQkJCQkJY29sb3I6ICIjMzMzMzMzIiwKCQkJCQkJZm9udFNpemU6ICIxMnB4IiwKCQkJCQkJZm9udFdlaWdodDogImJvbGQiCgkJCQkJfSwKCQkJCQlpdGVtSG92ZXJTdHlsZTogewoJCQkJCQljb2xvcjogIiMwMDAiCgkJCQkJfSwKCQkJCQlpdGVtSGlkZGVuU3R5bGU6IHsKCQkJCQkJY29sb3I6ICIjQ0NDIgoJCQkJCX0sCgkJCQkJaXRlbUNoZWNrYm94U3R5bGU6IHsKCQkJCQkJcG9zaXRpb246IEdlLAoJCQkJCQl3aWR0aDogIjEzcHgiLAoJCQkJCQloZWlnaHQ6ICIxM3B4IgoJCQkJCX0sCgkJCQkJc3ltYm9sUGFkZGluZzogNSwKCQkJCQl2ZXJ0aWNhbEFsaWduOiAiYm90dG9tIiwKCQkJCQl4OiAwLAoJCQkJCXk6IDAsCgkJCQkJdGl0bGU6IHsKCQkJCQkJc3R5bGU6IHsKCQkJCQkJCWZvbnRXZWlnaHQ6ICJib2xkIgoJCQkJCQl9CgkJCQkJfQoJCQkJfSwKCQkJCWxvYWRpbmc6IHsKCQkJCQlsYWJlbFN0eWxlOiB7CgkJCQkJCWZvbnRXZWlnaHQ6ICJib2xkIiwKCQkJCQkJcG9zaXRpb246IFhlLAoJCQkJCQl0b3A6ICI0NSUiCgkJCQkJfSwKCQkJCQlzdHlsZTogewoJCQkJCQlwb3NpdGlvbjogR2UsCgkJCQkJCWJhY2tncm91bmRDb2xvcjogIndoaXRlIiwKCQkJCQkJb3BhY2l0eTogLjUsCgkJCQkJCXRleHRBbGlnbjogImNlbnRlciIKCQkJCQl9CgkJCQl9LAoJCQkJdG9vbHRpcDogewoJCQkJCWVuYWJsZWQ6ICEwLAoJCQkJCWFuaW1hdGlvbjogT2UsCgkJCQkJYmFja2dyb3VuZENvbG9yOiAicmdiYSgyNDksIDI0OSwgMjQ5LCAuODUpIiwKCQkJCQlib3JkZXJXaWR0aDogMSwKCQkJCQlib3JkZXJSYWRpdXM6IDMsCgkJCQkJZGF0ZVRpbWVMYWJlbEZvcm1hdHM6IHsKCQkJCQkJbWlsbGlzZWNvbmQ6ICIlQSwgJWIgJWUsICVIOiVNOiVTLiVMIiwKCQkJCQkJc2Vjb25kOiAiJUEsICViICVlLCAlSDolTTolUyIsCgkJCQkJCW1pbnV0ZTogIiVBLCAlYiAlZSwgJUg6JU0iLAoJCQkJCQlob3VyOiAiJUEsICViICVlLCAlSDolTSIsCgkJCQkJCWRheTogIiVBLCAlYiAlZSwgJVkiLAoJCQkJCQl3ZWVrOiAiV2VlayBmcm9tICVBLCAlYiAlZSwgJVkiLAoJCQkJCQltb250aDogIiVCICVZIiwKCQkJCQkJeWVhcjogIiVZIgoJCQkJCX0sCgkJCQkJaGVhZGVyRm9ybWF0OiAnPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTogMTBweCI+e3BvaW50LmtleX08L3NwYW4+PGJyLz4nLAoJCQkJCXBvaW50Rm9ybWF0OiAnPHNwYW4gc3R5bGU9ImNvbG9yOntzZXJpZXMuY29sb3J9Ij7il488L3NwYW4+IHtzZXJpZXMubmFtZX06IDxiPntwb2ludC55fTwvYj48YnIvPicsCgkJCQkJc2hhZG93OiAhMCwKCQkJCQlzbmFwOiBxZSA/IDI1IDogMTAsCgkJCQkJc3R5bGU6IHsKCQkJCQkJY29sb3I6ICIjMzMzMzMzIiwKCQkJCQkJY3Vyc29yOiAiZGVmYXVsdCIsCgkJCQkJCWZvbnRTaXplOiAiMTJweCIsCgkJCQkJCXBhZGRpbmc6ICI4cHgiLAoJCQkJCQl3aGl0ZVNwYWNlOiAibm93cmFwIgoJCQkJCX0KCQkJCX0sCgkJCQljcmVkaXRzOiB7CgkJCQkJZW5hYmxlZDogITAsCgkJCQkJdGV4dDogIkhpZ2hjaGFydHMuY29tIiwKCQkJCQlocmVmOiAiaHR0cDovL3d3dy5oaWdoY2hhcnRzLmNvbSIsCgkJCQkJcG9zaXRpb246IHsKCQkJCQkJYWxpZ246ICJyaWdodCIsCgkJCQkJCXg6IC0xMCwKCQkJCQkJdmVydGljYWxBbGlnbjogImJvdHRvbSIsCgkJCQkJCXk6IC01CgkJCQkJfSwKCQkJCQlzdHlsZTogewoJCQkJCQljdXJzb3I6ICJwb2ludGVyIiwKCQkJCQkJY29sb3I6ICIjOTA5MDkwIiwKCQkJCQkJZm9udFNpemU6ICI5cHgiCgkJCQkJfQoJCQkJfQoJCQl9OwoJCQl2YXIgQnQgPSBHLnBsb3RPcHRpb25zLAoJCQkJanQgPSBCdC5saW5lOwoJCQlFKCk7CgkJCXZhciBDdCA9IC9yZ2JhXChccyooWzAtOV17MSwzfSlccyosXHMqKFswLTldezEsM30pXHMqLFxzKihbMC05XXsxLDN9KVxzKixccyooWzAtOV0/KD86XC5bMC05XSspPylccypcKS8sCgkJCQlTdCA9IC8jKFthLWZBLUYwLTldezJ9KShbYS1mQS1GMC05XXsyfSkoW2EtZkEtRjAtOV17Mn0pLywKCQkJCU50ID0gL3JnYlwoXHMqKFswLTldezEsM30pXHMqLFxzKihbMC05XXsxLDN9KVxzKixccyooWzAtOV17MSwzfSlccypcKS8sCgkJCQlUdCA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlmdW5jdGlvbiB0KGUpIHsKCQkJCQkJZSAmJiBlLnN0b3BzID8gbCA9IF90KGUuc3RvcHMsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJCXJldHVybiBUdChlWzFdKQoJCQkJCQl9KSA6IChzID0gQ3QuZXhlYyhlKSwgcyA/IGMgPSBbcihzWzFdKSwgcihzWzJdKSwgcihzWzNdKSwgcGFyc2VGbG9hdChzWzRdLCAxMCldIDogKHMgPSBTdC5leGVjKGUpLCBzID8gYyA9IFtyKHNbMV0sIDE2KSwgcihzWzJdLCAxNiksIHIoc1szXSwgMTYpLCAxXSA6IChzID0gTnQuZXhlYyhlKSwgcyAmJiAoYyA9IFtyKHNbMV0pLCByKHNbMl0pLCByKHNbM10pLCAxXSkpKSkKCQkJCQl9CgoJCQkJCWZ1bmN0aW9uIG4odCkgewoJCQkJCQl2YXIgbjsKCQkJCQkJcmV0dXJuIGwgPyAobiA9IG8oZSksIG4uc3RvcHMgPSBbXS5jb25jYXQobi5zdG9wcyksIG10KGwsIGZ1bmN0aW9uKGUsIGkpIHsKCQkJCQkJCW4uc3RvcHNbaV0gPSBbbi5zdG9wc1tpXVswXSwgZS5nZXQodCldCgkJCQkJCX0pKSA6IG4gPSBjICYmICFpc05hTihjWzBdKSA/ICJyZ2IiID09PSB0ID8gInJnYigiICsgY1swXSArICIsIiArIGNbMV0gKyAiLCIgKyBjWzJdICsgIikiIDogImEiID09PSB0ID8gY1szXSA6ICJyZ2JhKCIgKyBjLmpvaW4oIiwiKSArICIpIiA6IGUsIG4KCQkJCQl9CgoJCQkJCWZ1bmN0aW9uIGkoZSkgewoJCQkJCQlpZiAobCkgbXQobCwgZnVuY3Rpb24odCkgewoJCQkJCQkJdC5icmlnaHRlbihlKQoJCQkJCQl9KTsKCQkJCQkJZWxzZSBpZiAoZChlKSAmJiAwICE9PSBlKSB7CgkJCQkJCQl2YXIgdDsKCQkJCQkJCWZvciAodCA9IDA7IDMgPiB0OyB0KyspIGNbdF0gKz0gcigyNTUgKiBlKSwgY1t0XSA8IDAgJiYgKGNbdF0gPSAwKSwgY1t0XSA+IDI1NSAmJiAoY1t0XSA9IDI1NSkKCQkJCQkJfQoJCQkJCQlyZXR1cm4gdGhpcwoJCQkJCX0KCgkJCQkJZnVuY3Rpb24gYShlKSB7CgkJCQkJCXJldHVybiBjWzNdID0gZSwgdGhpcwoJCQkJCX0KCQkJCQl2YXIgcywgbCwgYyA9IFtdOwoJCQkJCXJldHVybiB0KGUpLCB7CgkJCQkJCWdldDogbiwKCQkJCQkJYnJpZ2h0ZW46IGksCgkJCQkJCXJnYmE6IGMsCgkJCQkJCXNldE9wYWNpdHk6IGEKCQkJCQl9CgkJCQl9OwoJCQlELnByb3RvdHlwZSA9IHsKCQkJCW9wYWNpdHk6IDEsCgkJCQl0ZXh0UHJvcHM6IFsiZm9udFNpemUiLCAiZm9udFdlaWdodCIsICJmb250RmFtaWx5IiwgImNvbG9yIiwgImxpbmVIZWlnaHQiLCAid2lkdGgiLCAidGV4dERlY29yYXRpb24iLCAidGV4dFNoYWRvdyIsICJIY1RleHRTdHJva2UiXSwKCQkJCWluaXQ6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQl2YXIgbiA9IHRoaXM7CgkJCQkJbi5lbGVtZW50ID0gInNwYW4iID09PSB0ID8gdyh0KSA6IGZlLmNyZWF0ZUVsZW1lbnROUyhFZSwgdCksIG4ucmVuZGVyZXIgPSBlCgkJCQl9LAoJCQkJYW5pbWF0ZTogZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCXZhciBpID0gXyh0LCBKLCAhMCk7CgkJCQkJcmV0dXJuIGt0KHRoaXMpLCBpID8gKGkgPSBvKGksIHt9KSwgbiAmJiAoaS5jb21wbGV0ZSA9IG4pLCB5dCh0aGlzLCBlLCBpKSkgOiAodGhpcy5hdHRyKGUpLCBuICYmIG4oKSksIHRoaXMKCQkJCX0sCgkJCQljb2xvckdyYWRpZW50OiBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJdmFyIGksIGEsIHIsIHMsIGwsIGQsIHAsIGgsIHUsIGYsIGcsIF8gPSB0aGlzLnJlbmRlcmVyLAoJCQkJCQl4ID0gW107CgkJCQkJaWYgKGUubGluZWFyR3JhZGllbnQgPyBhID0gImxpbmVhckdyYWRpZW50IiA6IGUucmFkaWFsR3JhZGllbnQgJiYgKGEgPSAicmFkaWFsR3JhZGllbnQiKSwgYSkgewoJCQkJCQlyID0gZVthXSwgcyA9IF8uZ3JhZGllbnRzLCBkID0gZS5zdG9wcywgdSA9IG4ucmFkaWFsUmVmZXJlbmNlLCBjKHIpICYmIChlW2FdID0gciA9IHsKCQkJCQkJCXgxOiByWzBdLAoJCQkJCQkJeTE6IHJbMV0sCgkJCQkJCQl4MjogclsyXSwKCQkJCQkJCXkyOiByWzNdLAoJCQkJCQkJZ3JhZGllbnRVbml0czogInVzZXJTcGFjZU9uVXNlIgoJCQkJCQl9KSwgInJhZGlhbEdyYWRpZW50IiA9PT0gYSAmJiB1ICYmICFtKHIuZ3JhZGllbnRVbml0cykgJiYgKHIgPSBvKHIsIHsKCQkJCQkJCWN4OiB1WzBdIC0gdVsyXSAvIDIgKyByLmN4ICogdVsyXSwKCQkJCQkJCWN5OiB1WzFdIC0gdVsyXSAvIDIgKyByLmN5ICogdVsyXSwKCQkJCQkJCXI6IHIuciAqIHVbMl0sCgkJCQkJCQlncmFkaWVudFVuaXRzOiAidXNlclNwYWNlT25Vc2UiCgkJCQkJCX0pKTsKCQkJCQkJZm9yIChmIGluIHIpICJpZCIgIT09IGYgJiYgeC5wdXNoKGYsIHJbZl0pOwoJCQkJCQlmb3IgKGYgaW4gZCkgeC5wdXNoKGRbZl0pOwoJCQkJCQl4ID0geC5qb2luKCIsIiksIHNbeF0gPyBnID0gc1t4XS5hdHRyKCJpZCIpIDogKHIuaWQgPSBnID0gWmUgKyBSZSsrLCBzW3hdID0gbCA9IF8uY3JlYXRlRWxlbWVudChhKS5hdHRyKHIpLmFkZChfLmRlZnMpLCBsLnN0b3BzID0gW10sIG10KGQsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJCXZhciB0OwoJCQkJCQkJMCA9PT0gZVsxXS5pbmRleE9mKCJyZ2JhIikgPyAoaSA9IFR0KGVbMV0pLCBwID0gaS5nZXQoInJnYiIpLCBoID0gaS5nZXQoImEiKSkgOiAocCA9IGVbMV0sIGggPSAxKSwgdCA9IF8uY3JlYXRlRWxlbWVudCgic3RvcCIpLmF0dHIoewoJCQkJCQkJCW9mZnNldDogZVswXSwKCQkJCQkJCQkic3RvcC1jb2xvciI6IHAsCgkJCQkJCQkJInN0b3Atb3BhY2l0eSI6IGgKCQkJCQkJCX0pLmFkZChsKSwgbC5zdG9wcy5wdXNoKHQpCgkJCQkJCX0pKSwgbi5zZXRBdHRyaWJ1dGUodCwgInVybCgiICsgXy51cmwgKyAiIyIgKyBnICsgIikiKQoJCQkJCX0KCQkJCX0sCgkJCQlhdHRyOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJdmFyIG4sIGksIGEsIG8sIHIgPSB0aGlzLmVsZW1lbnQsCgkJCQkJCXMgPSB0aGlzOwoJCQkJCWlmICgic3RyaW5nIiA9PSB0eXBlb2YgZSAmJiB0ICE9PSBXICYmIChuID0gZSwgZSA9IHt9LCBlW25dID0gdCksICJzdHJpbmciID09IHR5cGVvZiBlKSBzID0gKHRoaXNbZSArICJHZXR0ZXIiXSB8fCB0aGlzLl9kZWZhdWx0R2V0dGVyKS5jYWxsKHRoaXMsIGUsIHIpOwoJCQkJCWVsc2UgewoJCQkJCQlmb3IgKG4gaW4gZSkgaSA9IGVbbl0sIG8gPSAhMSwgdGhpcy5zeW1ib2xOYW1lICYmIC9eKHh8eXx3aWR0aHxoZWlnaHR8cnxzdGFydHxlbmR8aW5uZXJSfGFuY2hvclh8YW5jaG9yWSkvLnRlc3QobikgJiYgKGEgfHwgKHRoaXMuc3ltYm9sQXR0cihlKSwgYSA9ICEwKSwgbyA9ICEwKSwgIXRoaXMucm90YXRpb24gfHwgIngiICE9PSBuICYmICJ5IiAhPT0gbiB8fCAodGhpcy5kb1RyYW5zZm9ybSA9ICEwKSwgbyB8fCAodGhpc1tuICsgIlNldHRlciJdIHx8IHRoaXMuX2RlZmF1bHRTZXR0ZXIpLmNhbGwodGhpcywgaSwgbiwgciksIHRoaXMuc2hhZG93cyAmJiAvXih3aWR0aHxoZWlnaHR8dmlzaWJpbGl0eXx4fHl8ZHx0cmFuc2Zvcm18Y3h8Y3l8cikkLy50ZXN0KG4pICYmIHRoaXMudXBkYXRlU2hhZG93cyhuLCBpKTsKCQkJCQkJdGhpcy5kb1RyYW5zZm9ybSAmJiAodGhpcy51cGRhdGVUcmFuc2Zvcm0oKSwgdGhpcy5kb1RyYW5zZm9ybSA9ICExKQoJCQkJCX0KCQkJCQlyZXR1cm4gcwoJCQkJfSwKCQkJCXVwZGF0ZVNoYWRvd3M6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQlmb3IgKHZhciBuID0gdGhpcy5zaGFkb3dzLCBpID0gbi5sZW5ndGg7IGktLTspIG5baV0uc2V0QXR0cmlidXRlKGUsICJoZWlnaHQiID09PSBlID8gYmUodCAtIChuW2ldLmN1dEhlaWdodCB8fCAwKSwgMCkgOiAiZCIgPT09IGUgPyB0aGlzLmQgOiB0KQoJCQkJfSwKCQkJCWFkZENsYXNzOiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQgPSB0aGlzLmVsZW1lbnQsCgkJCQkJCW4gPSBmKHQsICJjbGFzcyIpIHx8ICIiOwoJCQkJCXJldHVybiAtMSA9PT0gbi5pbmRleE9mKGUpICYmIGYodCwgImNsYXNzIiwgbiArICIgIiArIGUpLCB0aGlzCgkJCQl9LAoJCQkJc3ltYm9sQXR0cjogZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0ID0gdGhpczsKCQkJCQltdChbIngiLCAieSIsICJyIiwgInN0YXJ0IiwgImVuZCIsICJ3aWR0aCIsICJoZWlnaHQiLCAiaW5uZXJSIiwgImFuY2hvclgiLCAiYW5jaG9yWSJdLCBmdW5jdGlvbihuKSB7CgkJCQkJCXRbbl0gPSBfKGVbbl0sIHRbbl0pCgkJCQkJfSksIHQuYXR0cih7CgkJCQkJCWQ6IHQucmVuZGVyZXIuc3ltYm9sc1t0LnN5bWJvbE5hbWVdKHQueCwgdC55LCB0LndpZHRoLCB0LmhlaWdodCwgdCkKCQkJCQl9KQoJCQkJfSwKCQkJCWNsaXA6IGZ1bmN0aW9uKGUpIHsKCQkJCQlyZXR1cm4gdGhpcy5hdHRyKCJjbGlwLXBhdGgiLCBlID8gInVybCgiICsgdGhpcy5yZW5kZXJlci51cmwgKyAiIyIgKyBlLmlkICsgIikiIDogUWUpCgkJCQl9LAoJCQkJY3Jpc3A6IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCwgbiwgaSA9IHRoaXMsCgkJCQkJCWEgPSB7fSwKCQkJCQkJbyA9IGUuc3Ryb2tlV2lkdGggfHwgaS5zdHJva2VXaWR0aCB8fCAwOwoJCQkJCW4gPSB4ZShvKSAlIDIgLyAyLCBlLnggPSB3ZShlLnggfHwgaS54IHx8IDApICsgbiwgZS55ID0gd2UoZS55IHx8IGkueSB8fCAwKSArIG4sIGUud2lkdGggPSB3ZSgoZS53aWR0aCB8fCBpLndpZHRoIHx8IDApIC0gMiAqIG4pLCBlLmhlaWdodCA9IHdlKChlLmhlaWdodCB8fCBpLmhlaWdodCB8fCAwKSAtIDIgKiBuKSwgZS5zdHJva2VXaWR0aCA9IG87CgkJCQkJZm9yICh0IGluIGUpIGlbdF0gIT09IGVbdF0gJiYgKGlbdF0gPSBhW3RdID0gZVt0XSk7CgkJCQkJcmV0dXJuIGEKCQkJCX0sCgkJCQljc3M6IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCwgbiwgaSwgbyA9IHRoaXMsCgkJCQkJCXMgPSBvLnN0eWxlcywKCQkJCQkJbCA9IHt9LAoJCQkJCQljID0gby5lbGVtZW50LAoJCQkJCQlkID0gIiIsCgkJCQkJCXAgPSAhczsKCQkJCQlpZiAoZSAmJiBlLmNvbG9yICYmIChlLmZpbGwgPSBlLmNvbG9yKSwgcykKCQkJCQkJZm9yIChuIGluIGUpIGVbbl0gIT09IHNbbl0gJiYgKGxbbl0gPSBlW25dLCBwID0gITApOwoJCQkJCWlmIChwKSB7CgkJCQkJCWlmICh0ID0gby50ZXh0V2lkdGggPSBlICYmIGUud2lkdGggJiYgInRleHQiID09PSBjLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgJiYgcihlLndpZHRoKSwgcyAmJiAoZSA9IGEocywgbCkpLCBvLnN0eWxlcyA9IGUsIHQgJiYgKERlIHx8ICFPZSAmJiBvLnJlbmRlcmVyLmZvckV4cG9ydCkgJiYgZGVsZXRlIGUud2lkdGgsIFRlICYmICFPZSkgeChvLmVsZW1lbnQsIGUpOwoJCQkJCQllbHNlIHsKCQkJCQkJCWkgPSBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCQkJcmV0dXJuICItIiArIHQudG9Mb3dlckNhc2UoKQoJCQkJCQkJfTsKCQkJCQkJCWZvciAobiBpbiBlKSBkICs9IG4ucmVwbGFjZSgvKFtBLVpdKS9nLCBpKSArICI6IiArIGVbbl0gKyAiOyI7CgkJCQkJCQlmKGMsICJzdHlsZSIsIGQpCgkJCQkJCX0KCQkJCQkJdCAmJiBvLmFkZGVkICYmIG8ucmVuZGVyZXIuYnVpbGRUZXh0KG8pCgkJCQkJfQoJCQkJCXJldHVybiBvCgkJCQl9LAoJCQkJb246IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQl2YXIgbiA9IHRoaXMsCgkJCQkJCWkgPSBuLmVsZW1lbnQ7CgkJCQkJcmV0dXJuIFUgJiYgImNsaWNrIiA9PT0gZSA/IChpLm9udG91Y2hzdGFydCA9IGZ1bmN0aW9uKGUpIHsKCQkJCQkJbi50b3VjaEV2ZW50RmlyZWQgPSBlZS5ub3coKSwgZS5wcmV2ZW50RGVmYXVsdCgpLCB0LmNhbGwoaSwgZSkKCQkJCQl9LCBpLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7CgkJCQkJCSgtMSA9PT0gU2UuaW5kZXhPZigiQW5kcm9pZCIpIHx8IGVlLm5vdygpIC0gKG4udG91Y2hFdmVudEZpcmVkIHx8IDApID4gMTEwMCkgJiYgdC5jYWxsKGksIGUpCgkJCQkJfSkgOiBpWyJvbiIgKyBlXSA9IHQsIHRoaXMKCQkJCX0sCgkJCQlzZXRSYWRpYWxSZWZlcmVuY2U6IGZ1bmN0aW9uKGUpIHsKCQkJCQlyZXR1cm4gdGhpcy5lbGVtZW50LnJhZGlhbFJlZmVyZW5jZSA9IGUsIHRoaXMKCQkJCX0sCgkJCQl0cmFuc2xhdGU6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQlyZXR1cm4gdGhpcy5hdHRyKHsKCQkJCQkJdHJhbnNsYXRlWDogZSwKCQkJCQkJdHJhbnNsYXRlWTogdAoJCQkJCX0pCgkJCQl9LAoJCQkJaW52ZXJ0OiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IHRoaXM7CgkJCQkJcmV0dXJuIGUuaW52ZXJ0ZWQgPSAhMCwgZS51cGRhdGVUcmFuc2Zvcm0oKSwgZQoJCQkJfSwKCQkJCXVwZGF0ZVRyYW5zZm9ybTogZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUsIHQgPSB0aGlzLAoJCQkJCQluID0gdC50cmFuc2xhdGVYIHx8IDAsCgkJCQkJCWkgPSB0LnRyYW5zbGF0ZVkgfHwgMCwKCQkJCQkJYSA9IHQuc2NhbGVYLAoJCQkJCQlvID0gdC5zY2FsZVksCgkJCQkJCXIgPSB0LmludmVydGVkLAoJCQkJCQlzID0gdC5yb3RhdGlvbiwKCQkJCQkJbCA9IHQuZWxlbWVudDsKCQkJCQlyICYmIChuICs9IHQuYXR0cigid2lkdGgiKSwgaSArPSB0LmF0dHIoImhlaWdodCIpKSwgZSA9IFsidHJhbnNsYXRlKCIgKyBuICsgIiwiICsgaSArICIpIl0sIHIgPyBlLnB1c2goInJvdGF0ZSg5MCkgc2NhbGUoLTEsMSkiKSA6IHMgJiYgZS5wdXNoKCJyb3RhdGUoIiArIHMgKyAiICIgKyAobC5nZXRBdHRyaWJ1dGUoIngiKSB8fCAwKSArICIgIiArIChsLmdldEF0dHJpYnV0ZSgieSIpIHx8IDApICsgIikiKSwgKG0oYSkgfHwgbShvKSkgJiYgZS5wdXNoKCJzY2FsZSgiICsgXyhhLCAxKSArICIgIiArIF8obywgMSkgKyAiKSIpLCBlLmxlbmd0aCAmJiBsLnNldEF0dHJpYnV0ZSgidHJhbnNmb3JtIiwgZS5qb2luKCIgIikpCgkJCQl9LAoJCQkJdG9Gcm9udDogZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSB0aGlzLmVsZW1lbnQ7CgkJCQkJcmV0dXJuIGUucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChlKSwgdGhpcwoJCQkJfSwKCQkJCWFsaWduOiBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJdmFyIGksIGEsIG8sIHIsIGwsIGMgPSB7fSwKCQkJCQkJZCA9IHRoaXMucmVuZGVyZXIsCgkJCQkJCXAgPSBkLmFsaWduZWRPYmplY3RzOwoJCQkJCXJldHVybiBlID8gKHRoaXMuYWxpZ25PcHRpb25zID0gZSwgdGhpcy5hbGlnbkJ5VHJhbnNsYXRlID0gdCwgKCFuIHx8IHMobikpICYmICh0aGlzLmFsaWduVG8gPSBsID0gbiB8fCAicmVuZGVyZXIiLCB1KHAsIHRoaXMpLCBwLnB1c2godGhpcyksIG4gPSBudWxsKSkgOiAoZSA9IHRoaXMuYWxpZ25PcHRpb25zLCB0ID0gdGhpcy5hbGlnbkJ5VHJhbnNsYXRlLCBsID0gdGhpcy5hbGlnblRvKSwgbiA9IF8obiwgZFtsXSwgZCksIGkgPSBlLmFsaWduLCBhID0gZS52ZXJ0aWNhbEFsaWduLCBvID0gKG4ueCB8fCAwKSArIChlLnggfHwgMCksIHIgPSAobi55IHx8IDApICsgKGUueSB8fCAwKSwgKCJyaWdodCIgPT09IGkgfHwgImNlbnRlciIgPT09IGkpICYmIChvICs9IChuLndpZHRoIC0gKGUud2lkdGggfHwgMCkpIC8gewoJCQkJCQlyaWdodDogMSwKCQkJCQkJY2VudGVyOiAyCgkJCQkJfVtpXSksIGNbdCA/ICJ0cmFuc2xhdGVYIiA6ICJ4Il0gPSB4ZShvKSwgKCJib3R0b20iID09PSBhIHx8ICJtaWRkbGUiID09PSBhKSAmJiAociArPSAobi5oZWlnaHQgLSAoZS5oZWlnaHQgfHwgMCkpIC8gKHsKCQkJCQkJYm90dG9tOiAxLAoJCQkJCQltaWRkbGU6IDIKCQkJCQl9W2FdIHx8IDEpKSwgY1t0ID8gInRyYW5zbGF0ZVkiIDogInkiXSA9IHhlKHIpLCB0aGlzW3RoaXMucGxhY2VkID8gImFuaW1hdGUiIDogImF0dHIiXShjKSwgdGhpcy5wbGFjZWQgPSAhMCwgdGhpcy5hbGlnbkF0dHIgPSBjLCB0aGlzCgkJCQl9LAoJCQkJZ2V0QkJveDogZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUsIHQsIG4sIGkgPSB0aGlzLAoJCQkJCQlvID0gaS5iQm94LAoJCQkJCQlyID0gaS5yZW5kZXJlciwKCQkJCQkJcyA9IGkucm90YXRpb24sCgkJCQkJCWwgPSBpLmVsZW1lbnQsCgkJCQkJCWMgPSBpLnN0eWxlcywKCQkJCQkJZCA9IHMgKiBDZSwKCQkJCQkJcCA9IGkudGV4dFN0cjsKCQkJCQlpZiAoKCIiID09PSBwIHx8IG50LnRlc3QocCkpICYmIChuID0gIm51bS4iICsgcC50b1N0cmluZygpLmxlbmd0aCArIChjID8gInwiICsgYy5mb250U2l6ZSArICJ8IiArIGMuZm9udEZhbWlseSA6ICIiKSksIG4gJiYgKG8gPSByLmNhY2hlW25dKSwgIW8pIHsKCQkJCQkJaWYgKGwubmFtZXNwYWNlVVJJID09PSBFZSB8fCByLmZvckV4cG9ydCkgewoJCQkJCQkJdHJ5IHsKCQkJCQkJCQlvID0gbC5nZXRCQm94ID8gYSh7fSwgbC5nZXRCQm94KCkpIDogewoJCQkJCQkJCQl3aWR0aDogbC5vZmZzZXRXaWR0aCwKCQkJCQkJCQkJaGVpZ2h0OiBsLm9mZnNldEhlaWdodAoJCQkJCQkJCX0KCQkJCQkJCX0gY2F0Y2ggKGgpIHt9KCFvIHx8IG8ud2lkdGggPCAwKSAmJiAobyA9IHsKCQkJCQkJCQl3aWR0aDogMCwKCQkJCQkJCQloZWlnaHQ6IDAKCQkJCQkJCX0pCgkJCQkJCX0gZWxzZSBvID0gaS5odG1sR2V0QkJveCgpOwoJCQkJCQlyLmlzU1ZHICYmIChlID0gby53aWR0aCwgdCA9IG8uaGVpZ2h0LCBUZSAmJiBjICYmICIxMXB4IiA9PT0gYy5mb250U2l6ZSAmJiAiMTYuOSIgPT09IHQudG9QcmVjaXNpb24oMykgJiYgKG8uaGVpZ2h0ID0gdCA9IDE0KSwgcyAmJiAoby53aWR0aCA9IGtlKHQgKiBCZShkKSkgKyBrZShlICogemUoZCkpLCBvLmhlaWdodCA9IGtlKHQgKiB6ZShkKSkgKyBrZShlICogQmUoZCkpKSksIGkuYkJveCA9IG8sIG4gJiYgKHIuY2FjaGVbbl0gPSBvKQoJCQkJCX0KCQkJCQlyZXR1cm4gbwoJCQkJfSwKCQkJCXNob3c6IGZ1bmN0aW9uKGUpIHsKCQkJCQlyZXR1cm4gZSAmJiB0aGlzLmVsZW1lbnQubmFtZXNwYWNlVVJJID09PSBFZSA/IHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoInZpc2liaWxpdHkiKSA6IHRoaXMuYXR0cih7CgkJCQkJCXZpc2liaWxpdHk6IGUgPyAiaW5oZXJpdCIgOiBWZQoJCQkJCX0pLCB0aGlzCgkJCQl9LAoJCQkJaGlkZTogZnVuY3Rpb24oKSB7CgkJCQkJcmV0dXJuIHRoaXMuYXR0cih7CgkJCQkJCXZpc2liaWxpdHk6IEplCgkJCQkJfSkKCQkJCX0sCgkJCQlmYWRlT3V0OiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQgPSB0aGlzOwoJCQkJCXQuYW5pbWF0ZSh7CgkJCQkJCW9wYWNpdHk6IDAKCQkJCQl9LCB7CgkJCQkJCWR1cmF0aW9uOiBlIHx8IDE1MCwKCQkJCQkJY29tcGxldGU6IGZ1bmN0aW9uKCkgewoJCQkJCQkJdC5hdHRyKHsKCQkJCQkJCQl5OiAtOTk5OQoJCQkJCQkJfSkKCQkJCQkJfQoJCQkJCX0pCgkJCQl9LAoJCQkJYWRkOiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQsIG4sIGksIGEsIG8sIHMgPSB0aGlzLnJlbmRlcmVyLAoJCQkJCQlsID0gZSB8fCBzLAoJCQkJCQljID0gbC5lbGVtZW50IHx8IHMuYm94LAoJCQkJCQlkID0gdGhpcy5lbGVtZW50LAoJCQkJCQlwID0gdGhpcy56SW5kZXg7CgkJCQkJaWYgKGUgJiYgKHRoaXMucGFyZW50R3JvdXAgPSBlKSwgdGhpcy5wYXJlbnRJbnZlcnRlZCA9IGUgJiYgZS5pbnZlcnRlZCwgdm9pZCAwICE9PSB0aGlzLnRleHRTdHIgJiYgcy5idWlsZFRleHQodGhpcyksIHAgJiYgKGwuaGFuZGxlWiA9ICEwLCBwID0gcihwKSksIGwuaGFuZGxlWikKCQkJCQkJZm9yICh0ID0gYy5jaGlsZE5vZGVzLCBhID0gMDsgYSA8IHQubGVuZ3RoOyBhKyspCgkJCQkJCQlpZiAobiA9IHRbYV0sIGkgPSBmKG4sICJ6SW5kZXgiKSwgbiAhPT0gZCAmJiAocihpKSA+IHAgfHwgIW0ocCkgJiYgbShpKSkpIHsKCQkJCQkJCQljLmluc2VydEJlZm9yZShkLCBuKSwgbyA9ICEwOwoJCQkJCQkJCWJyZWFrCgkJCQkJCQl9CgkJCQkJcmV0dXJuIG8gfHwgYy5hcHBlbmRDaGlsZChkKSwgdGhpcy5hZGRlZCA9ICEwLCB0aGlzLm9uQWRkICYmIHRoaXMub25BZGQoKSwgdGhpcwoJCQkJfSwKCQkJCXNhZmVSZW1vdmVDaGlsZDogZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0ID0gZS5wYXJlbnROb2RlOwoJCQkJCXQgJiYgdC5yZW1vdmVDaGlsZChlKQoJCQkJfSwKCQkJCWRlc3Ryb3k6IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlLCB0LCBuLCBpID0gdGhpcywKCQkJCQkJYSA9IGkuZWxlbWVudCB8fCB7fSwKCQkJCQkJbyA9IGkuc2hhZG93cywKCQkJCQkJciA9IGkucmVuZGVyZXIuaXNTVkcgJiYgIlNQQU4iID09PSBhLm5vZGVOYW1lICYmIGkucGFyZW50R3JvdXA7CgkJCQkJaWYgKGEub25jbGljayA9IGEub25tb3VzZW91dCA9IGEub25tb3VzZW92ZXIgPSBhLm9ubW91c2Vtb3ZlID0gYS5wb2ludCA9IG51bGwsIGt0KGkpLCBpLmNsaXBQYXRoICYmIChpLmNsaXBQYXRoID0gaS5jbGlwUGF0aC5kZXN0cm95KCkpLCBpLnN0b3BzKSB7CgkJCQkJCWZvciAobiA9IDA7IG4gPCBpLnN0b3BzLmxlbmd0aDsgbisrKSBpLnN0b3BzW25dID0gaS5zdG9wc1tuXS5kZXN0cm95KCk7CgkJCQkJCWkuc3RvcHMgPSBudWxsCgkJCQkJfQoJCQkJCWZvciAoaS5zYWZlUmVtb3ZlQ2hpbGQoYSksIG8gJiYgbXQobywgZnVuY3Rpb24oZSkgewoJCQkJCQlpLnNhZmVSZW1vdmVDaGlsZChlKQoJCQkJCX0pOyByICYmIHIuZGl2ICYmIDAgPT09IHIuZGl2LmNoaWxkTm9kZXMubGVuZ3RoOykgZSA9IHIucGFyZW50R3JvdXAsIGkuc2FmZVJlbW92ZUNoaWxkKHIuZGl2KSwgZGVsZXRlIHIuZGl2LCByID0gZTsKCQkJCQlpLmFsaWduVG8gJiYgdShpLnJlbmRlcmVyLmFsaWduZWRPYmplY3RzLCBpKTsKCQkJCQlmb3IgKHQgaW4gaSkgZGVsZXRlIGlbdF07CgkJCQkJcmV0dXJuIG51bGwKCQkJCX0sCgkJCQlzaGFkb3c6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQl2YXIgaSwgYSwgbywgciwgcywgbCwgYyA9IFtdLAoJCQkJCQlkID0gdGhpcy5lbGVtZW50OwoJCQkJCWlmIChlKSB7CgkJCQkJCWZvciAociA9IF8oZS53aWR0aCwgMyksIHMgPSAoZS5vcGFjaXR5IHx8IC4xNSkgLyByLCBsID0gdGhpcy5wYXJlbnRJbnZlcnRlZCA/ICIoLTEsLTEpIiA6ICIoIiArIF8oZS5vZmZzZXRYLCAxKSArICIsICIgKyBfKGUub2Zmc2V0WSwgMSkgKyAiKSIsIGkgPSAxOyByID49IGk7IGkrKykgYSA9IGQuY2xvbmVOb2RlKDApLCBvID0gMiAqIHIgKyAxIC0gMiAqIGksIGYoYSwgewoJCQkJCQkJaXNTaGFkb3c6ICJ0cnVlIiwKCQkJCQkJCXN0cm9rZTogZS5jb2xvciB8fCAiYmxhY2siLAoJCQkJCQkJInN0cm9rZS1vcGFjaXR5IjogcyAqIGksCgkJCQkJCQkic3Ryb2tlLXdpZHRoIjogbywKCQkJCQkJCXRyYW5zZm9ybTogInRyYW5zbGF0ZSIgKyBsLAoJCQkJCQkJZmlsbDogUWUKCQkJCQkJfSksIG4gJiYgKGYoYSwgImhlaWdodCIsIGJlKGYoYSwgImhlaWdodCIpIC0gbywgMCkpLCBhLmN1dEhlaWdodCA9IG8pLCB0ID8gdC5lbGVtZW50LmFwcGVuZENoaWxkKGEpIDogZC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLCBkKSwgYy5wdXNoKGEpOwoJCQkJCQl0aGlzLnNoYWRvd3MgPSBjCgkJCQkJfQoJCQkJCXJldHVybiB0aGlzCgkJCQl9LAoJCQkJeEdldHRlcjogZnVuY3Rpb24oZSkgewoJCQkJCXJldHVybiAiY2lyY2xlIiA9PT0gdGhpcy5lbGVtZW50Lm5vZGVOYW1lICYmIChlID0gewoJCQkJCQl4OiAiY3giLAoJCQkJCQl5OiAiY3kiCgkJCQkJfVtlXSB8fCBlKSwgdGhpcy5fZGVmYXVsdEdldHRlcihlKQoJCQkJfSwKCQkJCV9kZWZhdWx0R2V0dGVyOiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQgPSBfKHRoaXNbZV0sIHRoaXMuZWxlbWVudCA/IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoZSkgOiBudWxsLCAwKTsKCQkJCQlyZXR1cm4gL15bXC0wLTlcLl0rJC8udGVzdCh0KSAmJiAodCA9IHBhcnNlRmxvYXQodCkpLCB0CgkJCQl9LAoJCQkJZFNldHRlcjogZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCWUgJiYgZS5qb2luICYmIChlID0gZS5qb2luKCIgIikpLCAvKE5hTnwgezJ9fF4kKS8udGVzdChlKSAmJiAoZSA9ICJNIDAgMCIpLCBuLnNldEF0dHJpYnV0ZSh0LCBlKSwgdGhpc1t0XSA9IGUKCQkJCX0sCgkJCQlkYXNoc3R5bGVTZXR0ZXI6IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdDsKCQkJCQlpZiAoZSA9IGUgJiYgZS50b0xvd2VyQ2FzZSgpKSB7CgkJCQkJCWZvciAoZSA9IGUucmVwbGFjZSgic2hvcnRkYXNoZG90ZG90IiwgIjMsMSwxLDEsMSwxLCIpLnJlcGxhY2UoInNob3J0ZGFzaGRvdCIsICIzLDEsMSwxIikucmVwbGFjZSgic2hvcnRkb3QiLCAiMSwxLCIpLnJlcGxhY2UoInNob3J0ZGFzaCIsICIzLDEsIikucmVwbGFjZSgibG9uZ2Rhc2giLCAiOCwzLCIpLnJlcGxhY2UoL2RvdC9nLCAiMSwzLCIpLnJlcGxhY2UoImRhc2giLCAiNCwzLCIpLnJlcGxhY2UoLywkLywgIiIpLnNwbGl0KCIsIiksIHQgPSBlLmxlbmd0aDsgdC0tOykgZVt0XSA9IHIoZVt0XSkgKiB0aGlzWyJzdHJva2Utd2lkdGgiXTsKCQkJCQkJZSA9IGUuam9pbigiLCIpLnJlcGxhY2UoIk5hTiIsICJub25lIiksIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoInN0cm9rZS1kYXNoYXJyYXkiLCBlKQoJCQkJCX0KCQkJCX0sCgkJCQlhbGlnblNldHRlcjogZnVuY3Rpb24oZSkgewoJCQkJCXRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoInRleHQtYW5jaG9yIiwgewoJCQkJCQlsZWZ0OiAic3RhcnQiLAoJCQkJCQljZW50ZXI6ICJtaWRkbGUiLAoJCQkJCQlyaWdodDogImVuZCIKCQkJCQl9W2VdKQoJCQkJfSwKCQkJCW9wYWNpdHlTZXR0ZXI6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQl0aGlzW3RdID0gZSwgbi5zZXRBdHRyaWJ1dGUodCwgZSkKCQkJCX0sCgkJCQl0aXRsZVNldHRlcjogZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0ID0gdGhpcy5lbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0aXRsZSIpWzBdOwoJCQkJCXQgfHwgKHQgPSBmZS5jcmVhdGVFbGVtZW50TlMoRWUsICJ0aXRsZSIpLCB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodCkpLCB0LnRleHRDb250ZW50ID0gXyhlLCAiIikucmVwbGFjZSgvPFtePl0qPi9nLCAiIikKCQkJCX0sCgkJCQl0ZXh0U2V0dGVyOiBmdW5jdGlvbihlKSB7CgkJCQkJZSAhPT0gdGhpcy50ZXh0U3RyICYmIChkZWxldGUgdGhpcy5iQm94LCB0aGlzLnRleHRTdHIgPSBlLCB0aGlzLmFkZGVkICYmIHRoaXMucmVuZGVyZXIuYnVpbGRUZXh0KHRoaXMpKQoJCQkJfSwKCQkJCWZpbGxTZXR0ZXI6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQkic3RyaW5nIiA9PSB0eXBlb2YgZSA/IG4uc2V0QXR0cmlidXRlKHQsIGUpIDogZSAmJiB0aGlzLmNvbG9yR3JhZGllbnQoZSwgdCwgbikKCQkJCX0sCgkJCQl6SW5kZXhTZXR0ZXI6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQluLnNldEF0dHJpYnV0ZSh0LCBlKSwgdGhpc1t0XSA9IGUKCQkJCX0sCgkJCQlfZGVmYXVsdFNldHRlcjogZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCW4uc2V0QXR0cmlidXRlKHQsIGUpCgkJCQl9CgkJCX0sIEQucHJvdG90eXBlLnlHZXR0ZXIgPSBELnByb3RvdHlwZS54R2V0dGVyLCBELnByb3RvdHlwZS50cmFuc2xhdGVYU2V0dGVyID0gRC5wcm90b3R5cGUudHJhbnNsYXRlWVNldHRlciA9IEQucHJvdG90eXBlLnJvdGF0aW9uU2V0dGVyID0gRC5wcm90b3R5cGUudmVydGljYWxBbGlnblNldHRlciA9IEQucHJvdG90eXBlLnNjYWxlWFNldHRlciA9IEQucHJvdG90eXBlLnNjYWxlWVNldHRlciA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCXRoaXNbdF0gPSBlLCB0aGlzLmRvVHJhbnNmb3JtID0gITAKCQkJfSwgRC5wcm90b3R5cGVbInN0cm9rZS13aWR0aFNldHRlciJdID0gRC5wcm90b3R5cGUuc3Ryb2tlU2V0dGVyID0gZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJdGhpc1t0XSA9IGUsIHRoaXMuc3Ryb2tlICYmIHRoaXNbInN0cm9rZS13aWR0aCJdID8gKHRoaXMuc3Ryb2tlV2lkdGggPSB0aGlzWyJzdHJva2Utd2lkdGgiXSwgRC5wcm90b3R5cGUuZmlsbFNldHRlci5jYWxsKHRoaXMsIHRoaXMuc3Ryb2tlLCAic3Ryb2tlIiwgbiksIG4uc2V0QXR0cmlidXRlKCJzdHJva2Utd2lkdGgiLCB0aGlzWyJzdHJva2Utd2lkdGgiXSksIHRoaXMuaGFzU3Ryb2tlID0gITApIDogInN0cm9rZS13aWR0aCIgPT09IHQgJiYgMCA9PT0gZSAmJiB0aGlzLmhhc1N0cm9rZSAmJiAobi5yZW1vdmVBdHRyaWJ1dGUoInN0cm9rZSIpLCB0aGlzLmhhc1N0cm9rZSA9ICExKQoJCQl9OwoJCQl2YXIgUHQgPSBmdW5jdGlvbigpIHsKCQkJCXRoaXMuaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpCgkJCX07CgkJCVB0LnByb3RvdHlwZSA9IHsKCQkJCUVsZW1lbnQ6IEQsCgkJCQlpbml0OiBmdW5jdGlvbihlLCB0LCBuLCBpLCBhKSB7CgkJCQkJdmFyIG8sIHIsIHMsIGwgPSB0aGlzLAoJCQkJCQljID0gbG9jYXRpb247CgkJCQkJbyA9IGwuY3JlYXRlRWxlbWVudCgic3ZnIikuYXR0cih7CgkJCQkJCXZlcnNpb246ICIxLjEiCgkJCQkJfSkuY3NzKHRoaXMuZ2V0U3R5bGUoaSkpLCByID0gby5lbGVtZW50LCBlLmFwcGVuZENoaWxkKHIpLCAtMSA9PT0gZS5pbm5lckhUTUwuaW5kZXhPZigieG1sbnMiKSAmJiBmKHIsICJ4bWxucyIsIEVlKSwgbC5pc1NWRyA9ICEwLCBsLmJveCA9IHIsIGwuYm94V3JhcHBlciA9IG8sIGwuYWxpZ25lZE9iamVjdHMgPSBbXSwgbC51cmwgPSAoQWUgfHwgSWUpICYmIGZlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJiYXNlIikubGVuZ3RoID8gYy5ocmVmLnJlcGxhY2UoLyMuKj8kLywgIiIpLnJlcGxhY2UoLyhbXCgnXCldKS9nLCAiXFwkMSIpLnJlcGxhY2UoLyAvZywgIiUyMCIpIDogIiIsIHMgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoImRlc2MiKS5hZGQoKSwgcy5lbGVtZW50LmFwcGVuZENoaWxkKGZlLmNyZWF0ZVRleHROb2RlKCJDcmVhdGVkIHdpdGggIiArIEhlICsgIiAiICsgVWUpKSwgbC5kZWZzID0gdGhpcy5jcmVhdGVFbGVtZW50KCJkZWZzIikuYWRkKCksIGwuZm9yRXhwb3J0ID0gYSwgbC5ncmFkaWVudHMgPSB7fSwgbC5jYWNoZSA9IHt9LCBsLnNldFNpemUodCwgbiwgITEpOwoJCQkJCXZhciBkLCBwOwoJCQkJCUFlICYmIGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0ICYmIChsLnN1YlBpeGVsRml4ID0gZCA9IGZ1bmN0aW9uKCkgewoJCQkJCQl4KGUsIHsKCQkJCQkJCWxlZnQ6IDAsCgkJCQkJCQl0b3A6IDAKCQkJCQkJfSksIHAgPSBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCB4KGUsIHsKCQkJCQkJCWxlZnQ6IHZlKHAubGVmdCkgLSBwLmxlZnQgKyBLZSwKCQkJCQkJCXRvcDogdmUocC50b3ApIC0gcC50b3AgKyBLZQoJCQkJCQl9KQoJCQkJCX0sIGQoKSwgeHQoZ2UsICJyZXNpemUiLCBkKSkKCQkJCX0sCgkJCQlnZXRTdHlsZTogZnVuY3Rpb24oZSkgewoJCQkJCXJldHVybiB0aGlzLnN0eWxlID0gYSh7CgkJCQkJCWZvbnRGYW1pbHk6ICciTHVjaWRhIEdyYW5kZSIsICJMdWNpZGEgU2FucyBVbmljb2RlIiwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZicsCgkJCQkJCWZvbnRTaXplOiAiMTJweCIKCQkJCQl9LCBlKQoJCQkJfSwKCQkJCWlzSGlkZGVuOiBmdW5jdGlvbigpIHsKCQkJCQlyZXR1cm4gIXRoaXMuYm94V3JhcHBlci5nZXRCQm94KCkud2lkdGgKCQkJCX0sCgkJCQlkZXN0cm95OiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IHRoaXMsCgkJCQkJCXQgPSBlLmRlZnM7CgkJCQkJcmV0dXJuIGUuYm94ID0gbnVsbCwgZS5ib3hXcmFwcGVyID0gZS5ib3hXcmFwcGVyLmRlc3Ryb3koKSwgUChlLmdyYWRpZW50cyB8fCB7fSksIGUuZ3JhZGllbnRzID0gbnVsbCwgdCAmJiAoZS5kZWZzID0gdC5kZXN0cm95KCkpLCBlLnN1YlBpeGVsRml4ICYmIHd0KGdlLCAicmVzaXplIiwgZS5zdWJQaXhlbEZpeCksIGUuYWxpZ25lZE9iamVjdHMgPSBudWxsLCBudWxsCgkJCQl9LAoJCQkJY3JlYXRlRWxlbWVudDogZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0ID0gbmV3IHRoaXMuRWxlbWVudDsKCQkJCQlyZXR1cm4gdC5pbml0KHRoaXMsIGUpLCB0CgkJCQl9LAoJCQkJZHJhdzogZnVuY3Rpb24oKSB7fSwKCQkJCWJ1aWxkVGV4dDogZnVuY3Rpb24oZSkgewoJCQkJCWZvciAodmFyIHQsIG4sIGksIGEgPSBlLmVsZW1lbnQsIG8gPSB0aGlzLCBzID0gby5mb3JFeHBvcnQsIGwgPSBfKGUudGV4dFN0ciwgIiIpLnRvU3RyaW5nKCksIGMgPSAtMSAhPT0gbC5pbmRleE9mKCI8IiksIGQgPSBhLmNoaWxkTm9kZXMsIHAgPSBmKGEsICJ4IiksIGggPSBlLnN0eWxlcywgdSA9IGUudGV4dFdpZHRoLCBtID0gaCAmJiBoLmxpbmVIZWlnaHQsIGcgPSBoICYmIGguSGNUZXh0U3Ryb2tlLCB3ID0gZC5sZW5ndGgsIHYgPSBmdW5jdGlvbihlKSB7CgkJCQkJCXJldHVybiBtID8gcihtKSA6IG8uZm9udE1ldHJpY3MoLyhweHxlbSkkLy50ZXN0KGUgJiYgZS5zdHlsZS5mb250U2l6ZSkgPyBlLnN0eWxlLmZvbnRTaXplIDogaCAmJiBoLmZvbnRTaXplIHx8IG8uc3R5bGUuZm9udFNpemUgfHwgMTIsIGUpLmgKCQkJCQl9OyB3LS07KSBhLnJlbW92ZUNoaWxkKGRbd10pOwoJCQkJCXJldHVybiBjIHx8IGcgfHwgLTEgIT09IGwuaW5kZXhPZigiICIpID8gKG4gPSAvPC4qc3R5bGU9IihbXiJdKykiLio+LywgaSA9IC88LipocmVmPSIoaHR0cFteIl0rKSIuKj4vLCB1ICYmICFlLmFkZGVkICYmIHRoaXMuYm94LmFwcGVuZENoaWxkKGEpLCB0ID0gYyA/IGwucmVwbGFjZSgvPChifHN0cm9uZyk+L2csICc8c3BhbiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZCI+JykucmVwbGFjZSgvPChpfGVtKT4vZywgJzxzcGFuIHN0eWxlPSJmb250LXN0eWxlOml0YWxpYyI+JykucmVwbGFjZSgvPGEvZywgIjxzcGFuIikucmVwbGFjZSgvPFwvKGJ8c3Ryb25nfGl8ZW18YSk+L2csICI8L3NwYW4+Iikuc3BsaXQoLzxici4qPz4vZykgOiBbbF0sICIiID09PSB0W3QubGVuZ3RoIC0gMV0gJiYgdC5wb3AoKSwgbXQodCwgZnVuY3Rpb24odCwgcikgewoJCQkJCQl2YXIgbCwgYyA9IDA7CgkJCQkJCXQgPSB0LnJlcGxhY2UoLzxzcGFuL2csICJ8fHw8c3BhbiIpLnJlcGxhY2UoLzxcL3NwYW4+L2csICI8L3NwYW4+fHx8IiksIGwgPSB0LnNwbGl0KCJ8fHwiKSwgbXQobCwgZnVuY3Rpb24odCkgewoJCQkJCQkJaWYgKCIiICE9PSB0IHx8IDEgPT09IGwubGVuZ3RoKSB7CgkJCQkJCQkJdmFyIGQsIG0gPSB7fSwKCQkJCQkJCQkJZyA9IGZlLmNyZWF0ZUVsZW1lbnROUyhFZSwgInRzcGFuIik7CgkJCQkJCQkJaWYgKG4udGVzdCh0KSAmJiAoZCA9IHQubWF0Y2gobilbMV0ucmVwbGFjZSgvKDt8IHxeKWNvbG9yKFsgOl0pLywgIiQxZmlsbCQyIiksIGYoZywgInN0eWxlIiwgZCkpLCBpLnRlc3QodCkgJiYgIXMgJiYgKGYoZywgIm9uY2xpY2siLCAnbG9jYXRpb24uaHJlZj0iJyArIHQubWF0Y2goaSlbMV0gKyAnIicpLCB4KGcsIHsKCQkJCQkJCQkJY3Vyc29yOiAicG9pbnRlciIKCQkJCQkJCQl9KSksIHQgPSAodC5yZXBsYWNlKC88KC58XG4pKj8+L2csICIiKSB8fCAiICIpLnJlcGxhY2UoLyZsdDsvZywgIjwiKS5yZXBsYWNlKC8mZ3Q7L2csICI+IiksICIgIiAhPT0gdCkgewoJCQkJCQkJCQlpZiAoZy5hcHBlbmRDaGlsZChmZS5jcmVhdGVUZXh0Tm9kZSh0KSksIGMgPyBtLmR4ID0gMCA6IHIgJiYgbnVsbCAhPT0gcCAmJiAobS54ID0gcCksIGYoZywgbSksIGEuYXBwZW5kQ2hpbGQoZyksICFjICYmIHIgJiYgKCFPZSAmJiBzICYmIHgoZywgewoJCQkJCQkJCQkJZGlzcGxheTogImJsb2NrIgoJCQkJCQkJCQl9KSwgZihnLCAiZHkiLCB2KGcpKSksIHUpCgkJCQkJCQkJCQlmb3IgKHZhciBfLCB3LCBiLCB5ID0gdC5yZXBsYWNlKC8oW15cXl0pLS9nLCAiJDEtICIpLnNwbGl0KCIgIiksIGsgPSBsLmxlbmd0aCA+IDEgfHwgeS5sZW5ndGggPiAxICYmICJub3dyYXAiICE9PSBoLndoaXRlU3BhY2UsIHogPSBoLkhjSGVpZ2h0LCBCID0gW10sIGogPSB2KGcpLCBDID0gMTsgayAmJiAoeS5sZW5ndGggfHwgQi5sZW5ndGgpOykgZGVsZXRlIGUuYkJveCwgYiA9IGUuZ2V0QkJveCgpLCB3ID0gYi53aWR0aCwgIU9lICYmIG8uZm9yRXhwb3J0ICYmICh3ID0gby5tZWFzdXJlU3BhbldpZHRoKGcuZmlyc3RDaGlsZC5kYXRhLCBlLnN0eWxlcykpLCBfID0gdyA+IHUsIF8gJiYgMSAhPT0geS5sZW5ndGggPyAoZy5yZW1vdmVDaGlsZChnLmZpcnN0Q2hpbGQpLCBCLnVuc2hpZnQoeS5wb3AoKSkpIDogKHkgPSBCLCBCID0gW10sIHkubGVuZ3RoICYmIChDKyssIHogJiYgQyAqIGogPiB6ID8gKHkgPSBbIi4uLiJdLCBlLmF0dHIoInRpdGxlIiwgZS50ZXh0U3RyKSkgOiAoZyA9IGZlLmNyZWF0ZUVsZW1lbnROUyhFZSwgInRzcGFuIiksIGYoZywgewoJCQkJCQkJCQkJCWR5OiBqLAoJCQkJCQkJCQkJCXg6IHAKCQkJCQkJCQkJCX0pLCBkICYmIGYoZywgInN0eWxlIiwgZCksIGEuYXBwZW5kQ2hpbGQoZykpKSwgdyA+IHUgJiYgKHUgPSB3KSksIHkubGVuZ3RoICYmIGcuYXBwZW5kQ2hpbGQoZmUuY3JlYXRlVGV4dE5vZGUoeS5qb2luKCIgIikucmVwbGFjZSgvLSAvZywgIi0iKSkpOwoJCQkJCQkJCQljKysKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0pCgkJCQkJfSksIHZvaWQgMCkgOiB2b2lkIGEuYXBwZW5kQ2hpbGQoZmUuY3JlYXRlVGV4dE5vZGUobCkpCgkJCQl9LAoJCQkJYnV0dG9uOiBmdW5jdGlvbihlLCB0LCBuLCBpLCByLCBzLCBsLCBjLCBkKSB7CgkJCQkJdmFyIHAsIGgsIHUsIG0sIGYsIGcsIF8gPSB0aGlzLmxhYmVsKGUsIHQsIG4sIGQsIG51bGwsIG51bGwsIG51bGwsIG51bGwsICJidXR0b24iKSwKCQkJCQkJeCA9IDAsCgkJCQkJCXcgPSB7CgkJCQkJCQl4MTogMCwKCQkJCQkJCXkxOiAwLAoJCQkJCQkJeDI6IDAsCgkJCQkJCQl5MjogMQoJCQkJCQl9OwoJCQkJCXJldHVybiByID0gbyh7CgkJCQkJCSJzdHJva2Utd2lkdGgiOiAxLAoJCQkJCQlzdHJva2U6ICIjQ0NDQ0NDIiwKCQkJCQkJZmlsbDogewoJCQkJCQkJbGluZWFyR3JhZGllbnQ6IHcsCgkJCQkJCQlzdG9wczogWwoJCQkJCQkJCVswLCAiI0ZFRkVGRSJdLAoJCQkJCQkJCVsxLCAiI0Y2RjZGNiJdCgkJCQkJCQldCgkJCQkJCX0sCgkJCQkJCXI6IDIsCgkJCQkJCXBhZGRpbmc6IDUsCgkJCQkJCXN0eWxlOiB7CgkJCQkJCQljb2xvcjogImJsYWNrIgoJCQkJCQl9CgkJCQkJfSwgciksIHUgPSByLnN0eWxlLCBkZWxldGUgci5zdHlsZSwgcyA9IG8ociwgewoJCQkJCQlzdHJva2U6ICIjNjhBIiwKCQkJCQkJZmlsbDogewoJCQkJCQkJbGluZWFyR3JhZGllbnQ6IHcsCgkJCQkJCQlzdG9wczogWwoJCQkJCQkJCVswLCAiI0ZGRiJdLAoJCQkJCQkJCVsxLCAiI0FDRiJdCgkJCQkJCQldCgkJCQkJCX0KCQkJCQl9LCBzKSwgbSA9IHMuc3R5bGUsIGRlbGV0ZSBzLnN0eWxlLCBsID0gbyhyLCB7CgkJCQkJCXN0cm9rZTogIiM2OEEiLAoJCQkJCQlmaWxsOiB7CgkJCQkJCQlsaW5lYXJHcmFkaWVudDogdywKCQkJCQkJCXN0b3BzOiBbCgkJCQkJCQkJWzAsICIjOUJEIl0sCgkJCQkJCQkJWzEsICIjQ0RGIl0KCQkJCQkJCV0KCQkJCQkJfQoJCQkJCX0sIGwpLCBmID0gbC5zdHlsZSwgZGVsZXRlIGwuc3R5bGUsIGMgPSBvKHIsIHsKCQkJCQkJc3R5bGU6IHsKCQkJCQkJCWNvbG9yOiAiI0NDQyIKCQkJCQkJfQoJCQkJCX0sIGMpLCBnID0gYy5zdHlsZSwgZGVsZXRlIGMuc3R5bGUsIHh0KF8uZWxlbWVudCwgVGUgPyAibW91c2VvdmVyIiA6ICJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7CgkJCQkJCTMgIT09IHggJiYgXy5hdHRyKHMpLmNzcyhtKQoJCQkJCX0pLCB4dChfLmVsZW1lbnQsIFRlID8gIm1vdXNlb3V0IiA6ICJtb3VzZWxlYXZlIiwgZnVuY3Rpb24oKSB7CgkJCQkJCTMgIT09IHggJiYgKHAgPSBbciwgcywgbF1beF0sIGggPSBbdSwgbSwgZl1beF0sIF8uYXR0cihwKS5jc3MoaCkpCgkJCQkJfSksIF8uc2V0U3RhdGUgPSBmdW5jdGlvbihlKSB7CgkJCQkJCV8uc3RhdGUgPSB4ID0gZSwgZSA/IDIgPT09IGUgPyBfLmF0dHIobCkuY3NzKGYpIDogMyA9PT0gZSAmJiBfLmF0dHIoYykuY3NzKGcpIDogXy5hdHRyKHIpLmNzcyh1KQoJCQkJCX0sIF8ub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCTMgIT09IHggJiYgaS5jYWxsKF8pCgkJCQkJfSkuYXR0cihyKS5jc3MoYSh7CgkJCQkJCWN1cnNvcjogImRlZmF1bHQiCgkJCQkJfSwgdSkpCgkJCQl9LAoJCQkJY3Jpc3BMaW5lOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJcmV0dXJuIGVbMV0gPT09IGVbNF0gJiYgKGVbMV0gPSBlWzRdID0geGUoZVsxXSkgLSB0ICUgMiAvIDIpLCBlWzJdID09PSBlWzVdICYmIChlWzJdID0gZVs1XSA9IHhlKGVbMl0pICsgdCAlIDIgLyAyKSwgZQoJCQkJfSwKCQkJCXBhdGg6IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCA9IHsKCQkJCQkJZmlsbDogUWUKCQkJCQl9OwoJCQkJCXJldHVybiBjKGUpID8gdC5kID0gZSA6IGwoZSkgJiYgYSh0LCBlKSwgdGhpcy5jcmVhdGVFbGVtZW50KCJwYXRoIikuYXR0cih0KQoJCQkJfSwKCQkJCWNpcmNsZTogZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCXZhciBpID0gbChlKSA/IGUgOiB7CgkJCQkJCQl4OiBlLAoJCQkJCQkJeTogdCwKCQkJCQkJCXI6IG4KCQkJCQkJfSwKCQkJCQkJYSA9IHRoaXMuY3JlYXRlRWxlbWVudCgiY2lyY2xlIik7CgkJCQkJcmV0dXJuIGEueFNldHRlciA9IGZ1bmN0aW9uKGUpIHsKCQkJCQkJdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgiY3giLCBlKQoJCQkJCX0sIGEueVNldHRlciA9IGZ1bmN0aW9uKGUpIHsKCQkJCQkJdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgiY3kiLCBlKQoJCQkJCX0sIGEuYXR0cihpKQoJCQkJfSwKCQkJCWFyYzogZnVuY3Rpb24oZSwgdCwgbiwgaSwgYSwgbykgewoJCQkJCXZhciByOwoJCQkJCXJldHVybiBsKGUpICYmICh0ID0gZS55LCBuID0gZS5yLCBpID0gZS5pbm5lclIsIGEgPSBlLnN0YXJ0LCBvID0gZS5lbmQsIGUgPSBlLngpLCByID0gdGhpcy5zeW1ib2woImFyYyIsIGUgfHwgMCwgdCB8fCAwLCBuIHx8IDAsIG4gfHwgMCwgewoJCQkJCQlpbm5lclI6IGkgfHwgMCwKCQkJCQkJc3RhcnQ6IGEgfHwgMCwKCQkJCQkJZW5kOiBvIHx8IDAKCQkJCQl9KSwgci5yID0gbiwgcgoJCQkJfSwKCQkJCXJlY3Q6IGZ1bmN0aW9uKGUsIHQsIG4sIGksIGEsIG8pIHsKCQkJCQlhID0gbChlKSA/IGUuciA6IGE7CgkJCQkJdmFyIHIgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoInJlY3QiKSwKCQkJCQkJcyA9IGwoZSkgPyBlIDogZSA9PT0gVyA/IHt9IDogewoJCQkJCQkJeDogZSwKCQkJCQkJCXk6IHQsCgkJCQkJCQl3aWR0aDogYmUobiwgMCksCgkJCQkJCQloZWlnaHQ6IGJlKGksIDApCgkJCQkJCX07CgkJCQkJcmV0dXJuIG8gIT09IFcgJiYgKHMuc3Ryb2tlV2lkdGggPSBvLCBzID0gci5jcmlzcChzKSksIGEgJiYgKHMuciA9IGEpLCByLnJTZXR0ZXIgPSBmdW5jdGlvbihlKSB7CgkJCQkJCWYodGhpcy5lbGVtZW50LCB7CgkJCQkJCQlyeDogZSwKCQkJCQkJCXJ5OiBlCgkJCQkJCX0pCgkJCQkJfSwgci5hdHRyKHMpCgkJCQl9LAoJCQkJc2V0U2l6ZTogZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCXZhciBpID0gdGhpcywKCQkJCQkJYSA9IGkuYWxpZ25lZE9iamVjdHMsCgkJCQkJCW8gPSBhLmxlbmd0aDsKCQkJCQlmb3IgKGkud2lkdGggPSBlLCBpLmhlaWdodCA9IHQsIGkuYm94V3JhcHBlcltfKG4sICEwKSA/ICJhbmltYXRlIiA6ICJhdHRyIl0oewoJCQkJCQl3aWR0aDogZSwKCQkJCQkJaGVpZ2h0OiB0CgkJCQkJfSk7IG8tLTspIGFbb10uYWxpZ24oKQoJCQkJfSwKCQkJCWc6IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCA9IHRoaXMuY3JlYXRlRWxlbWVudCgiZyIpOwoJCQkJCXJldHVybiBtKGUpID8gdC5hdHRyKHsKCQkJCQkJImNsYXNzIjogWmUgKyBlCgkJCQkJfSkgOiB0CgkJCQl9LAoJCQkJaW1hZ2U6IGZ1bmN0aW9uKGUsIHQsIG4sIGksIG8pIHsKCQkJCQl2YXIgciwgcyA9IHsKCQkJCQkJcHJlc2VydmVBc3BlY3RSYXRpbzogUWUKCQkJCQl9OwoJCQkJCXJldHVybiBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhKHMsIHsKCQkJCQkJeDogdCwKCQkJCQkJeTogbiwKCQkJCQkJd2lkdGg6IGksCgkJCQkJCWhlaWdodDogbwoJCQkJCX0pLCByID0gdGhpcy5jcmVhdGVFbGVtZW50KCJpbWFnZSIpLmF0dHIocyksIHIuZWxlbWVudC5zZXRBdHRyaWJ1dGVOUyA/IHIuZWxlbWVudC5zZXRBdHRyaWJ1dGVOUygiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsICJocmVmIiwgZSkgOiByLmVsZW1lbnQuc2V0QXR0cmlidXRlKCJoYy1zdmctaHJlZiIsIGUpLCByCgkJCQl9LAoJCQkJc3ltYm9sOiBmdW5jdGlvbihlLCB0LCBuLCBpLCBvLCByKSB7CgkJCQkJdmFyIHMsIGwsIGMsIGQsIHAsIGggPSB0aGlzLnN5bWJvbHNbZV0sCgkJCQkJCXUgPSBoICYmIGgoeGUodCksIHhlKG4pLCBpLCBvLCByKSwKCQkJCQkJbSA9IC9edXJsXCgoLio/KVwpJC87CgkJCQkJcmV0dXJuIHUgPyAocyA9IHRoaXMucGF0aCh1KSwgYShzLCB7CgkJCQkJCXN5bWJvbE5hbWU6IGUsCgkJCQkJCXg6IHQsCgkJCQkJCXk6IG4sCgkJCQkJCXdpZHRoOiBpLAoJCQkJCQloZWlnaHQ6IG8KCQkJCQl9KSwgciAmJiBhKHMsIHIpKSA6IG0udGVzdChlKSAmJiAocCA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQkJZS5lbGVtZW50ICYmIChlLmF0dHIoewoJCQkJCQkJd2lkdGg6IHRbMF0sCgkJCQkJCQloZWlnaHQ6IHRbMV0KCQkJCQkJfSksIGUuYWxpZ25CeVRyYW5zbGF0ZSB8fCBlLnRyYW5zbGF0ZSh4ZSgoaSAtIHRbMF0pIC8gMiksIHhlKChvIC0gdFsxXSkgLyAyKSkpCgkJCQkJfSwgYyA9IGUubWF0Y2gobSlbMV0sIGQgPSBNZVtjXSB8fCByICYmIHIud2lkdGggJiYgci5oZWlnaHQgJiYgW3Iud2lkdGgsIHIuaGVpZ2h0XSwgcyA9IHRoaXMuaW1hZ2UoYykuYXR0cih7CgkJCQkJCXg6IHQsCgkJCQkJCXk6IG4KCQkJCQl9KSwgcy5pc0ltZyA9ICEwLCBkID8gcChzLCBkKSA6IChzLmF0dHIoewoJCQkJCQl3aWR0aDogMCwKCQkJCQkJaGVpZ2h0OiAwCgkJCQkJfSksIGwgPSB3KCJpbWciLCB7CgkJCQkJCW9ubG9hZDogZnVuY3Rpb24oKSB7CgkJCQkJCQlwKHMsIE1lW2NdID0gW3RoaXMud2lkdGgsIHRoaXMuaGVpZ2h0XSkKCQkJCQkJfSwKCQkJCQkJc3JjOiBjCgkJCQkJfSkpKSwgcwoJCQkJfSwKCQkJCXN5bWJvbHM6IHsKCQkJCQljaXJjbGU6IGZ1bmN0aW9uKGUsIHQsIG4sIGkpIHsKCQkJCQkJdmFyIGEgPSAuMTY2ICogbjsKCQkJCQkJcmV0dXJuIFtldCwgZSArIG4gLyAyLCB0LCAiQyIsIGUgKyBuICsgYSwgdCwgZSArIG4gKyBhLCB0ICsgaSwgZSArIG4gLyAyLCB0ICsgaSwgIkMiLCBlIC0gYSwgdCArIGksIGUgLSBhLCB0LCBlICsgbiAvIDIsIHQsICJaIl0KCQkJCQl9LAoJCQkJCXNxdWFyZTogZnVuY3Rpb24oZSwgdCwgbiwgaSkgewoJCQkJCQlyZXR1cm4gW2V0LCBlLCB0LCB0dCwgZSArIG4sIHQsIGUgKyBuLCB0ICsgaSwgZSwgdCArIGksICJaIl0KCQkJCQl9LAoJCQkJCXRyaWFuZ2xlOiBmdW5jdGlvbihlLCB0LCBuLCBpKSB7CgkJCQkJCXJldHVybiBbZXQsIGUgKyBuIC8gMiwgdCwgdHQsIGUgKyBuLCB0ICsgaSwgZSwgdCArIGksICJaIl0KCQkJCQl9LAoJCQkJCSJ0cmlhbmdsZS1kb3duIjogZnVuY3Rpb24oZSwgdCwgbiwgaSkgewoJCQkJCQlyZXR1cm4gW2V0LCBlLCB0LCB0dCwgZSArIG4sIHQsIGUgKyBuIC8gMiwgdCArIGksICJaIl0KCQkJCQl9LAoJCQkJCWRpYW1vbmQ6IGZ1bmN0aW9uKGUsIHQsIG4sIGkpIHsKCQkJCQkJcmV0dXJuIFtldCwgZSArIG4gLyAyLCB0LCB0dCwgZSArIG4sIHQgKyBpIC8gMiwgZSArIG4gLyAyLCB0ICsgaSwgZSwgdCArIGkgLyAyLCAiWiJdCgkJCQkJfSwKCQkJCQlhcmM6IGZ1bmN0aW9uKGUsIHQsIG4sIGksIGEpIHsKCQkJCQkJdmFyIG8gPSBhLnN0YXJ0LAoJCQkJCQkJciA9IGEuciB8fCBuIHx8IGksCgkJCQkJCQlzID0gYS5lbmQgLSAuMDAxLAoJCQkJCQkJbCA9IGEuaW5uZXJSLAoJCQkJCQkJYyA9IGEub3BlbiwKCQkJCQkJCWQgPSB6ZShvKSwKCQkJCQkJCXAgPSBCZShvKSwKCQkJCQkJCWggPSB6ZShzKSwKCQkJCQkJCXUgPSBCZShzKSwKCQkJCQkJCW0gPSBhLmVuZCAtIG8gPCBqZSA/IDAgOiAxOwoJCQkJCQlyZXR1cm4gW2V0LCBlICsgciAqIGQsIHQgKyByICogcCwgIkEiLCByLCByLCAwLCBtLCAxLCBlICsgciAqIGgsIHQgKyByICogdSwgYyA/IGV0IDogdHQsIGUgKyBsICogaCwgdCArIGwgKiB1LCAiQSIsIGwsIGwsIDAsIG0sIDAsIGUgKyBsICogZCwgdCArIGwgKiBwLCBjID8gIiIgOiAiWiJdCgkJCQkJfSwKCQkJCQljYWxsb3V0OiBmdW5jdGlvbihlLCB0LCBuLCBpLCBhKSB7CgkJCQkJCXZhciBvLCByID0gNiwKCQkJCQkJCXMgPSA2LAoJCQkJCQkJbCA9IHllKGEgJiYgYS5yIHx8IDAsIG4sIGkpLAoJCQkJCQkJYyA9IGwgKyBzLAoJCQkJCQkJZCA9IGEgJiYgYS5hbmNob3JYLAoJCQkJCQkJcCA9IGEgJiYgYS5hbmNob3JZLAoJCQkJCQkJaCA9IHhlKGEuc3Ryb2tlV2lkdGggfHwgMCkgJSAyIC8gMjsKCQkJCQkJcmV0dXJuIGUgKz0gaCwgdCArPSBoLCBvID0gWyJNIiwgZSArIGwsIHQsICJMIiwgZSArIG4gLSBsLCB0LCAiQyIsIGUgKyBuLCB0LCBlICsgbiwgdCwgZSArIG4sIHQgKyBsLCAiTCIsIGUgKyBuLCB0ICsgaSAtIGwsICJDIiwgZSArIG4sIHQgKyBpLCBlICsgbiwgdCArIGksIGUgKyBuIC0gbCwgdCArIGksICJMIiwgZSArIGwsIHQgKyBpLCAiQyIsIGUsIHQgKyBpLCBlLCB0ICsgaSwgZSwgdCArIGkgLSBsLCAiTCIsIGUsIHQgKyBsLCAiQyIsIGUsIHQsIGUsIHQsIGUgKyBsLCB0XSwgZCAmJiBkID4gbiAmJiBwID4gdCArIGMgJiYgdCArIGkgLSBjID4gcCA/IG8uc3BsaWNlKDEzLCAzLCAiTCIsIGUgKyBuLCBwIC0gcywgZSArIG4gKyByLCBwLCBlICsgbiwgcCArIHMsIGUgKyBuLCB0ICsgaSAtIGwpIDogZCAmJiAwID4gZCAmJiBwID4gdCArIGMgJiYgdCArIGkgLSBjID4gcCA/IG8uc3BsaWNlKDMzLCAzLCAiTCIsIGUsIHAgKyBzLCBlIC0gciwgcCwgZSwgcCAtIHMsIGUsIHQgKyBsKSA6IHAgJiYgcCA+IGkgJiYgZCA+IGUgKyBjICYmIGUgKyBuIC0gYyA+IGQgPyBvLnNwbGljZSgyMywgMywgIkwiLCBkICsgcywgdCArIGksIGQsIHQgKyBpICsgciwgZCAtIHMsIHQgKyBpLCBlICsgbCwgdCArIGkpIDogcCAmJiAwID4gcCAmJiBkID4gZSArIGMgJiYgZSArIG4gLSBjID4gZCAmJiBvLnNwbGljZSgzLCAzLCAiTCIsIGQgLSBzLCB0LCBkLCB0IC0gciwgZCArIHMsIHQsIG4gLSBsLCB0KSwgbwoJCQkJCX0KCQkJCX0sCgkJCQljbGlwUmVjdDogZnVuY3Rpb24oZSwgdCwgbiwgaSkgewoJCQkJCXZhciBhLCBvID0gWmUgKyBSZSsrLAoJCQkJCQlyID0gdGhpcy5jcmVhdGVFbGVtZW50KCJjbGlwUGF0aCIpLmF0dHIoewoJCQkJCQkJaWQ6IG8KCQkJCQkJfSkuYWRkKHRoaXMuZGVmcyk7CgkJCQkJcmV0dXJuIGEgPSB0aGlzLnJlY3QoZSwgdCwgbiwgaSwgMCkuYWRkKHIpLCBhLmlkID0gbywgYS5jbGlwUGF0aCA9IHIsIGEKCQkJCX0sCgkJCQl0ZXh0OiBmdW5jdGlvbihlLCB0LCBuLCBpKSB7CgkJCQkJdmFyIGEsIG8gPSB0aGlzLAoJCQkJCQlyID0gRGUgfHwgIU9lICYmIG8uZm9yRXhwb3J0LAoJCQkJCQlzID0ge307CgkJCQkJcmV0dXJuIGkgJiYgIW8uZm9yRXhwb3J0ID8gby5odG1sKGUsIHQsIG4pIDogKHMueCA9IE1hdGgucm91bmQodCB8fCAwKSwgbiAmJiAocy55ID0gTWF0aC5yb3VuZChuKSksIChlIHx8IDAgPT09IGUpICYmIChzLnRleHQgPSBlKSwgYSA9IG8uY3JlYXRlRWxlbWVudCgidGV4dCIpLmF0dHIocyksIHIgJiYgYS5jc3MoewoJCQkJCQlwb3NpdGlvbjogR2UKCQkJCQl9KSwgaSB8fCAoYS54U2V0dGVyID0gZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCQl2YXIgaSwgYSwgbyA9IG4uZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRzcGFuIiksCgkJCQkJCQlyID0gbi5nZXRBdHRyaWJ1dGUodCk7CgkJCQkJCWZvciAoYSA9IDA7IGEgPCBvLmxlbmd0aDsgYSsrKSBpID0gb1thXSwgaS5nZXRBdHRyaWJ1dGUodCkgPT09IHIgJiYgaS5zZXRBdHRyaWJ1dGUodCwgZSk7CgkJCQkJCW4uc2V0QXR0cmlidXRlKHQsIGUpCgkJCQkJfSksIGEpCgkJCQl9LAoJCQkJZm9udE1ldHJpY3M6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQllID0gZSB8fCB0aGlzLnN0eWxlLmZvbnRTaXplLCB0ICYmIGdlLmdldENvbXB1dGVkU3R5bGUgJiYgKHQgPSB0LmVsZW1lbnQgfHwgdCwgZSA9IGdlLmdldENvbXB1dGVkU3R5bGUodCwgIiIpLmZvbnRTaXplKSwgZSA9IC9weC8udGVzdChlKSA/IHIoZSkgOiAvZW0vLnRlc3QoZSkgPyAxMiAqIHBhcnNlRmxvYXQoZSkgOiAxMjsKCQkJCQl2YXIgbiA9IDI0ID4gZSA/IGUgKyA0IDogeGUoMS4yICogZSksCgkJCQkJCWkgPSB4ZSguOCAqIG4pOwoJCQkJCXJldHVybiB7CgkJCQkJCWg6IG4sCgkJCQkJCWI6IGksCgkJCQkJCWY6IGUKCQkJCQl9CgkJCQl9LAoJCQkJbGFiZWw6IGZ1bmN0aW9uKGUsIHQsIG4sIGksIHIsIHMsIGwsIGMsIGQpIHsKCQkJCQlmdW5jdGlvbiBwKCkgewoJCQkJCQl2YXIgZSwgdCwgbiA9IEIuZWxlbWVudC5zdHlsZTsKCQkJCQkJZyA9ICh2b2lkIDAgPT09IF8gfHwgdm9pZCAwID09PSB4IHx8IHouc3R5bGVzLnRleHRBbGlnbikgJiYgQi50ZXh0U3RyICYmIEIuZ2V0QkJveCgpLCB6LndpZHRoID0gKF8gfHwgZy53aWR0aCB8fCAwKSArIDIgKiBDICsgUywgei5oZWlnaHQgPSAoeCB8fCBnLmhlaWdodCB8fCAwKSArIDIgKiBDLCBiID0gQyArIGsuZm9udE1ldHJpY3MobiAmJiBuLmZvbnRTaXplLCBCKS5iLCB5ICYmIChmIHx8IChlID0geGUoLWogKiBDKSwgdCA9IGMgPyAtYiA6IDAsIHouYm94ID0gZiA9IGkgPyBrLnN5bWJvbChpLCBlLCB0LCB6LndpZHRoLCB6LmhlaWdodCwgVCkgOiBrLnJlY3QoZSwgdCwgei53aWR0aCwgei5oZWlnaHQsIDAsIFRbcnRdKSwgZi5hdHRyKCJmaWxsIiwgUWUpLmFkZCh6KSksIGYuaXNJbWcgfHwgZi5hdHRyKGEoewoJCQkJCQkJd2lkdGg6IHhlKHoud2lkdGgpLAoJCQkJCQkJaGVpZ2h0OiB4ZSh6LmhlaWdodCkKCQkJCQkJfSwgVCkpLCBUID0gbnVsbCkKCQkJCQl9CgoJCQkJCWZ1bmN0aW9uIGgoKSB7CgkJCQkJCXZhciBlLCB0ID0gei5zdHlsZXMsCgkJCQkJCQluID0gdCAmJiB0LnRleHRBbGlnbiwKCQkJCQkJCWkgPSBTICsgQyAqICgxIC0gaik7CgkJCQkJCWUgPSBjID8gMCA6IGIsIG0oXykgJiYgZyAmJiAoImNlbnRlciIgPT09IG4gfHwgInJpZ2h0IiA9PT0gbikgJiYgKGkgKz0gewoJCQkJCQkJY2VudGVyOiAuNSwKCQkJCQkJCXJpZ2h0OiAxCgkJCQkJCX1bbl0gKiAoXyAtIGcud2lkdGgpKSwgKGkgIT09IEIueCB8fCBlICE9PSBCLnkpICYmIChCLmF0dHIoIngiLCBpKSwgZSAhPT0gVyAmJiBCLmF0dHIoInkiLCBlKSksIEIueCA9IGksIEIueSA9IGUKCQkJCQl9CgoJCQkJCWZ1bmN0aW9uIHUoZSwgdCkgewoJCQkJCQlmID8gZi5hdHRyKGUsIHQpIDogVFtlXSA9IHQKCQkJCQl9CgkJCQkJdmFyIGYsIGcsIF8sIHgsIHcsIHYsIGIsIHksIGsgPSB0aGlzLAoJCQkJCQl6ID0gay5nKGQpLAoJCQkJCQlCID0gay50ZXh0KCIiLCAwLCAwLCBsKS5hdHRyKHsKCQkJCQkJCXpJbmRleDogMQoJCQkJCQl9KSwKCQkJCQkJaiA9IDAsCgkJCQkJCUMgPSAzLAoJCQkJCQlTID0gMCwKCQkJCQkJTiA9IDAsCgkJCQkJCVQgPSB7fTsKCQkJCQl6Lm9uQWRkID0gZnVuY3Rpb24oKSB7CgkJCQkJCUIuYWRkKHopLCB6LmF0dHIoewoJCQkJCQkJdGV4dDogZSB8fCAwID09PSBlID8gZSA6ICIiLAoJCQkJCQkJeDogdCwKCQkJCQkJCXk6IG4KCQkJCQkJfSksIGYgJiYgbShyKSAmJiB6LmF0dHIoewoJCQkJCQkJYW5jaG9yWDogciwKCQkJCQkJCWFuY2hvclk6IHMKCQkJCQkJfSkKCQkJCQl9LCB6LndpZHRoU2V0dGVyID0gZnVuY3Rpb24oZSkgewoJCQkJCQlfID0gZQoJCQkJCX0sIHouaGVpZ2h0U2V0dGVyID0gZnVuY3Rpb24oZSkgewoJCQkJCQl4ID0gZQoJCQkJCX0sIHoucGFkZGluZ1NldHRlciA9IGZ1bmN0aW9uKGUpIHsKCQkJCQkJbShlKSAmJiBlICE9PSBDICYmIChDID0gZSwgaCgpKQoJCQkJCX0sIHoucGFkZGluZ0xlZnRTZXR0ZXIgPSBmdW5jdGlvbihlKSB7CgkJCQkJCW0oZSkgJiYgZSAhPT0gUyAmJiAoUyA9IGUsIGgoKSkKCQkJCQl9LCB6LmFsaWduU2V0dGVyID0gZnVuY3Rpb24oZSkgewoJCQkJCQlqID0gewoJCQkJCQkJbGVmdDogMCwKCQkJCQkJCWNlbnRlcjogLjUsCgkJCQkJCQlyaWdodDogMQoJCQkJCQl9W2VdCgkJCQkJfSwgei50ZXh0U2V0dGVyID0gZnVuY3Rpb24oZSkgewoJCQkJCQllICE9PSBXICYmIEIudGV4dFNldHRlcihlKSwgcCgpLCBoKCkKCQkJCQl9LCB6WyJzdHJva2Utd2lkdGhTZXR0ZXIiXSA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQkJZSAmJiAoeSA9ICEwKSwgTiA9IGUgJSAyIC8gMiwgdSh0LCBlKQoJCQkJCX0sIHouc3Ryb2tlU2V0dGVyID0gei5maWxsU2V0dGVyID0gei5yU2V0dGVyID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJCQkiZmlsbCIgPT09IHQgJiYgZSAmJiAoeSA9ICEwKSwgdSh0LCBlKQoJCQkJCX0sIHouYW5jaG9yWFNldHRlciA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQkJciA9IGUsIHUodCwgZSArIE4gLSB3KQoJCQkJCX0sIHouYW5jaG9yWVNldHRlciA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQkJcyA9IGUsIHUodCwgZSAtIHYpCgkJCQkJfSwgei54U2V0dGVyID0gZnVuY3Rpb24oZSkgewoJCQkJCQl6LnggPSBlLCBqICYmIChlIC09IGogKiAoKF8gfHwgZy53aWR0aCkgKyBDKSksIHcgPSB4ZShlKSwgei5hdHRyKCJ0cmFuc2xhdGVYIiwgdykKCQkJCQl9LCB6LnlTZXR0ZXIgPSBmdW5jdGlvbihlKSB7CgkJCQkJCXYgPSB6LnkgPSB4ZShlKSwgei5hdHRyKCJ0cmFuc2xhdGVZIiwgdikKCQkJCQl9OwoJCQkJCXZhciBQID0gei5jc3M7CgkJCQkJcmV0dXJuIGEoeiwgewoJCQkJCQljc3M6IGZ1bmN0aW9uKGUpIHsKCQkJCQkJCWlmIChlKSB7CgkJCQkJCQkJdmFyIHQgPSB7fTsKCQkJCQkJCQllID0gbyhlKSwgbXQoei50ZXh0UHJvcHMsIGZ1bmN0aW9uKG4pIHsKCQkJCQkJCQkJZVtuXSAhPT0gVyAmJiAodFtuXSA9IGVbbl0sIGRlbGV0ZSBlW25dKQoJCQkJCQkJCX0pLCBCLmNzcyh0KQoJCQkJCQkJfQoJCQkJCQkJcmV0dXJuIFAuY2FsbCh6LCBlKQoJCQkJCQl9LAoJCQkJCQlnZXRCQm94OiBmdW5jdGlvbigpIHsKCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJd2lkdGg6IGcud2lkdGggKyAyICogQywKCQkJCQkJCQloZWlnaHQ6IGcuaGVpZ2h0ICsgMiAqIEMsCgkJCQkJCQkJeDogZy54IC0gQywKCQkJCQkJCQl5OiBnLnkgLSBDCgkJCQkJCQl9CgkJCQkJCX0sCgkJCQkJCXNoYWRvdzogZnVuY3Rpb24oZSkgewoJCQkJCQkJcmV0dXJuIGYgJiYgZi5zaGFkb3coZSksIHoKCQkJCQkJfSwKCQkJCQkJZGVzdHJveTogZnVuY3Rpb24oKSB7CgkJCQkJCQl3dCh6LmVsZW1lbnQsICJtb3VzZWVudGVyIiksIHd0KHouZWxlbWVudCwgIm1vdXNlbGVhdmUiKSwgQiAmJiAoQiA9IEIuZGVzdHJveSgpKSwgZiAmJiAoZiA9IGYuZGVzdHJveSgpKSwgRC5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHopLCB6ID0gayA9IHAgPSBoID0gdSA9IG51bGwKCQkJCQkJfQoJCQkJCX0pCgkJCQl9CgkJCX0sIEggPSBQdCwgYShELnByb3RvdHlwZSwgewoJCQkJaHRtbENzczogZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0ID0gdGhpcywKCQkJCQkJbiA9IHQuZWxlbWVudCwKCQkJCQkJaSA9IGUgJiYgIlNQQU4iID09PSBuLnRhZ05hbWUgJiYgZS53aWR0aDsKCQkJCQlyZXR1cm4gaSAmJiAoZGVsZXRlIGUud2lkdGgsIHQudGV4dFdpZHRoID0gaSwgdC51cGRhdGVUcmFuc2Zvcm0oKSksIHQuc3R5bGVzID0gYSh0LnN0eWxlcywgZSksIHgodC5lbGVtZW50LCBlKSwgdAoJCQkJfSwKCQkJCWh0bWxHZXRCQm94OiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IHRoaXMsCgkJCQkJCXQgPSBlLmVsZW1lbnQsCgkJCQkJCW4gPSBlLmJCb3g7CgkJCQkJcmV0dXJuIG4gfHwgKCJ0ZXh0IiA9PT0gdC5ub2RlTmFtZSAmJiAodC5zdHlsZS5wb3NpdGlvbiA9IEdlKSwgbiA9IGUuYkJveCA9IHsKCQkJCQkJeDogdC5vZmZzZXRMZWZ0LAoJCQkJCQl5OiB0Lm9mZnNldFRvcCwKCQkJCQkJd2lkdGg6IHQub2Zmc2V0V2lkdGgsCgkJCQkJCWhlaWdodDogdC5vZmZzZXRIZWlnaHQKCQkJCQl9KSwgbgoJCQkJfSwKCQkJCWh0bWxVcGRhdGVUcmFuc2Zvcm06IGZ1bmN0aW9uKCkgewoJCQkJCWlmICghdGhpcy5hZGRlZCkgcmV0dXJuIHZvaWQodGhpcy5hbGlnbk9uQWRkID0gITApOwoJCQkJCXZhciBlID0gdGhpcywKCQkJCQkJdCA9IGUucmVuZGVyZXIsCgkJCQkJCW4gPSBlLmVsZW1lbnQsCgkJCQkJCWkgPSBlLnRyYW5zbGF0ZVggfHwgMCwKCQkJCQkJYSA9IGUudHJhbnNsYXRlWSB8fCAwLAoJCQkJCQlvID0gZS54IHx8IDAsCgkJCQkJCXMgPSBlLnkgfHwgMCwKCQkJCQkJbCA9IGUudGV4dEFsaWduIHx8ICJsZWZ0IiwKCQkJCQkJYyA9IHsKCQkJCQkJCWxlZnQ6IDAsCgkJCQkJCQljZW50ZXI6IC41LAoJCQkJCQkJcmlnaHQ6IDEKCQkJCQkJfVtsXSwKCQkJCQkJZCA9IGUuc2hhZG93czsKCQkJCQlpZiAoeChuLCB7CgkJCQkJCW1hcmdpbkxlZnQ6IGksCgkJCQkJCW1hcmdpblRvcDogYQoJCQkJCX0pLCBkICYmIG10KGQsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJeChlLCB7CgkJCQkJCQltYXJnaW5MZWZ0OiBpICsgMSwKCQkJCQkJCW1hcmdpblRvcDogYSArIDEKCQkJCQkJfSkKCQkJCQl9KSwgZS5pbnZlcnRlZCAmJiBtdChuLmNoaWxkTm9kZXMsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJdC5pbnZlcnRDaGlsZChlLCBuKQoJCQkJCX0pLCAiU1BBTiIgPT09IG4udGFnTmFtZSkgewoJCQkJCQl2YXIgcCwgaCwgdSA9IGUucm90YXRpb24sCgkJCQkJCQlmID0gcihlLnRleHRXaWR0aCksCgkJCQkJCQlnID0gW3UsIGwsIG4uaW5uZXJIVE1MLCBlLnRleHRXaWR0aF0uam9pbigiLCIpOwoJCQkJCQlnICE9PSBlLmNUVCAmJiAoaCA9IHQuZm9udE1ldHJpY3Mobi5zdHlsZS5mb250U2l6ZSkuYiwgbSh1KSAmJiBlLnNldFNwYW5Sb3RhdGlvbih1LCBjLCBoKSwgcCA9IF8oZS5lbGVtV2lkdGgsIG4ub2Zmc2V0V2lkdGgpLCBwID4gZiAmJiAvWyBcLV0vLnRlc3Qobi50ZXh0Q29udGVudCB8fCBuLmlubmVyVGV4dCkgJiYgKHgobiwgewoJCQkJCQkJd2lkdGg6IGYgKyBLZSwKCQkJCQkJCWRpc3BsYXk6ICJibG9jayIsCgkJCQkJCQl3aGl0ZVNwYWNlOiAibm9ybWFsIgoJCQkJCQl9KSwgcCA9IGYpLCBlLmdldFNwYW5Db3JyZWN0aW9uKHAsIGgsIGMsIHUsIGwpKSwgeChuLCB7CgkJCQkJCQlsZWZ0OiBvICsgKGUueENvcnIgfHwgMCkgKyBLZSwKCQkJCQkJCXRvcDogcyArIChlLnlDb3JyIHx8IDApICsgS2UKCQkJCQkJfSksIEllICYmIChoID0gbi5vZmZzZXRIZWlnaHQpLCBlLmNUVCA9IGcKCQkJCQl9CgkJCQl9LAoJCQkJc2V0U3BhblJvdGF0aW9uOiBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJdmFyIGkgPSB7fSwKCQkJCQkJYSA9IFRlID8gIi1tcy10cmFuc2Zvcm0iIDogSWUgPyAiLXdlYmtpdC10cmFuc2Zvcm0iIDogQWUgPyAiTW96VHJhbnNmb3JtIiA6IE5lID8gIi1vLXRyYW5zZm9ybSIgOiAiIjsKCQkJCQlpW2FdID0gaS50cmFuc2Zvcm0gPSAicm90YXRlKCIgKyBlICsgImRlZykiLCBpW2EgKyAoQWUgPyAiT3JpZ2luIiA6ICItb3JpZ2luIildID0gaS50cmFuc2Zvcm1PcmlnaW4gPSAxMDAgKiB0ICsgIiUgIiArIG4gKyAicHgiLCB4KHRoaXMuZWxlbWVudCwgaSkKCQkJCX0sCgkJCQlnZXRTcGFuQ29ycmVjdGlvbjogZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCXRoaXMueENvcnIgPSAtZSAqIG4sIHRoaXMueUNvcnIgPSAtdAoJCQkJfQoJCQl9KSwgYShQdC5wcm90b3R5cGUsIHsKCQkJCWh0bWw6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQl2YXIgaSA9IHRoaXMuY3JlYXRlRWxlbWVudCgic3BhbiIpLAoJCQkJCQlvID0gaS5lbGVtZW50LAoJCQkJCQlyID0gaS5yZW5kZXJlcjsKCQkJCQlyZXR1cm4gaS50ZXh0U2V0dGVyID0gZnVuY3Rpb24oZSkgewoJCQkJCQllICE9PSBvLmlubmVySFRNTCAmJiBkZWxldGUgdGhpcy5iQm94LCBvLmlubmVySFRNTCA9IHRoaXMudGV4dFN0ciA9IGUKCQkJCQl9LCBpLnhTZXR0ZXIgPSBpLnlTZXR0ZXIgPSBpLmFsaWduU2V0dGVyID0gaS5yb3RhdGlvblNldHRlciA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQkJImFsaWduIiA9PT0gdCAmJiAodCA9ICJ0ZXh0QWxpZ24iKSwgaVt0XSA9IGUsIGkuaHRtbFVwZGF0ZVRyYW5zZm9ybSgpCgkJCQkJfSwgaS5hdHRyKHsKCQkJCQkJdGV4dDogZSwKCQkJCQkJeDogeGUodCksCgkJCQkJCXk6IHhlKG4pCgkJCQkJfSkuY3NzKHsKCQkJCQkJcG9zaXRpb246IEdlLAoJCQkJCQl3aGl0ZVNwYWNlOiAibm93cmFwIiwKCQkJCQkJZm9udEZhbWlseTogdGhpcy5zdHlsZS5mb250RmFtaWx5LAoJCQkJCQlmb250U2l6ZTogdGhpcy5zdHlsZS5mb250U2l6ZQoJCQkJCX0pLCBpLmNzcyA9IGkuaHRtbENzcywgci5pc1NWRyAmJiAoaS5hZGQgPSBmdW5jdGlvbihlKSB7CgkJCQkJCXZhciB0LCBuLCBzID0gci5ib3gucGFyZW50Tm9kZSwKCQkJCQkJCWwgPSBbXTsKCQkJCQkJaWYgKHRoaXMucGFyZW50R3JvdXAgPSBlLCBlKSB7CgkJCQkJCQlpZiAodCA9IGUuZGl2LCAhdCkgewoJCQkJCQkJCWZvciAobiA9IGU7IG47KSBsLnB1c2gobiksIG4gPSBuLnBhcmVudEdyb3VwOwoJCQkJCQkJCW10KGwucmV2ZXJzZSgpLCBmdW5jdGlvbihlKSB7CgkJCQkJCQkJCXZhciBuOwoJCQkJCQkJCQl0ID0gZS5kaXYgPSBlLmRpdiB8fCB3KFllLCB7CgkJCQkJCQkJCQljbGFzc05hbWU6IGYoZS5lbGVtZW50LCAiY2xhc3MiKQoJCQkJCQkJCQl9LCB7CgkJCQkJCQkJCQlwb3NpdGlvbjogR2UsCgkJCQkJCQkJCQlsZWZ0OiAoZS50cmFuc2xhdGVYIHx8IDApICsgS2UsCgkJCQkJCQkJCQl0b3A6IChlLnRyYW5zbGF0ZVkgfHwgMCkgKyBLZQoJCQkJCQkJCQl9LCB0IHx8IHMpLCBuID0gdC5zdHlsZSwgYShlLCB7CgkJCQkJCQkJCQl0cmFuc2xhdGVYU2V0dGVyOiBmdW5jdGlvbih0LCBpKSB7CgkJCQkJCQkJCQkJbi5sZWZ0ID0gdCArIEtlLCBlW2ldID0gdCwgZS5kb1RyYW5zZm9ybSA9ICEwCgkJCQkJCQkJCQl9LAoJCQkJCQkJCQkJdHJhbnNsYXRlWVNldHRlcjogZnVuY3Rpb24odCwgaSkgewoJCQkJCQkJCQkJCW4udG9wID0gdCArIEtlLCBlW2ldID0gdCwgZS5kb1RyYW5zZm9ybSA9ICEwCgkJCQkJCQkJCQl9LAoJCQkJCQkJCQkJdmlzaWJpbGl0eVNldHRlcjogZnVuY3Rpb24oZSwgdCkgewoJCQkJCQkJCQkJCW5bdF0gPSBlCgkJCQkJCQkJCQl9CgkJCQkJCQkJCX0pCgkJCQkJCQkJfSkKCQkJCQkJCX0KCQkJCQkJfSBlbHNlIHQgPSBzOwoJCQkJCQlyZXR1cm4gdC5hcHBlbmRDaGlsZChvKSwgaS5hZGRlZCA9ICEwLCBpLmFsaWduT25BZGQgJiYgaS5odG1sVXBkYXRlVHJhbnNmb3JtKCksIGkKCQkJCQl9KSwgaQoJCQkJfQoJCQl9KTsKCQkJdmFyIEl0LCBBdDsKCQkJaWYgKCFPZSAmJiAhRGUpIHsKCQkJCUF0ID0gewoJCQkJCWluaXQ6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQkJdmFyIG4gPSB0aGlzLAoJCQkJCQkJaSA9IFsiPCIsIHQsICcgZmlsbGVkPSJmIiBzdHJva2VkPSJmIiddLAoJCQkJCQkJYSA9IFsicG9zaXRpb246ICIsIEdlLCAiOyJdLAoJCQkJCQkJbyA9IHQgPT09IFllOwoJCQkJCQkoInNoYXBlIiA9PT0gdCB8fCBvKSAmJiBhLnB1c2goImxlZnQ6MDt0b3A6MDt3aWR0aDoxcHg7aGVpZ2h0OjFweDsiKSwgYS5wdXNoKCJ2aXNpYmlsaXR5OiAiLCBvID8gSmUgOiBWZSksIGkucHVzaCgnIHN0eWxlPSInLCBhLmpvaW4oIiIpLCAnIi8+JyksIHQgJiYgKGkgPSBvIHx8ICJzcGFuIiA9PT0gdCB8fCAiaW1nIiA9PT0gdCA/IGkuam9pbigiIikgOiBlLnByZXBWTUwoaSksIG4uZWxlbWVudCA9IHcoaSkpLCBuLnJlbmRlcmVyID0gZQoJCQkJCX0sCgkJCQkJYWRkOiBmdW5jdGlvbihlKSB7CgkJCQkJCXZhciB0ID0gdGhpcywKCQkJCQkJCW4gPSB0LnJlbmRlcmVyLAoJCQkJCQkJaSA9IHQuZWxlbWVudCwKCQkJCQkJCWEgPSBuLmJveCwKCQkJCQkJCW8gPSBlICYmIGUuaW52ZXJ0ZWQsCgkJCQkJCQlyID0gZSA/IGUuZWxlbWVudCB8fCBlIDogYTsKCQkJCQkJcmV0dXJuIG8gJiYgbi5pbnZlcnRDaGlsZChpLCByKSwgci5hcHBlbmRDaGlsZChpKSwgdC5hZGRlZCA9ICEwLCB0LmFsaWduT25BZGQgJiYgIXQuZGVmZXJVcGRhdGVUcmFuc2Zvcm0gJiYgdC51cGRhdGVUcmFuc2Zvcm0oKSwgdC5vbkFkZCAmJiB0Lm9uQWRkKCksIHQKCQkJCQl9LAoJCQkJCXVwZGF0ZVRyYW5zZm9ybTogRC5wcm90b3R5cGUuaHRtbFVwZGF0ZVRyYW5zZm9ybSwKCQkJCQlzZXRTcGFuUm90YXRpb246IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IHRoaXMucm90YXRpb24sCgkJCQkJCQl0ID0gemUoZSAqIENlKSwKCQkJCQkJCW4gPSBCZShlICogQ2UpOwoJCQkJCQl4KHRoaXMuZWxlbWVudCwgewoJCQkJCQkJZmlsdGVyOiBlID8gWyJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuTWF0cml4KE0xMT0iLCB0LCAiLCBNMTI9IiwgLW4sICIsIE0yMT0iLCBuLCAiLCBNMjI9IiwgdCwgIiwgc2l6aW5nTWV0aG9kPSdhdXRvIGV4cGFuZCcpIl0uam9pbigiIikgOiBRZQoJCQkJCQl9KQoJCQkJCX0sCgkJCQkJZ2V0U3BhbkNvcnJlY3Rpb246IGZ1bmN0aW9uKGUsIHQsIG4sIGksIGEpIHsKCQkJCQkJdmFyIG8sIHIgPSBpID8gemUoaSAqIENlKSA6IDEsCgkJCQkJCQlzID0gaSA/IEJlKGkgKiBDZSkgOiAwLAoJCQkJCQkJbCA9IF8odGhpcy5lbGVtSGVpZ2h0LCB0aGlzLmVsZW1lbnQub2Zmc2V0SGVpZ2h0KSwKCQkJCQkJCWMgPSBhICYmICJsZWZ0IiAhPT0gYTsKCQkJCQkJdGhpcy54Q29yciA9IDAgPiByICYmIC1lLCB0aGlzLnlDb3JyID0gMCA+IHMgJiYgLWwsIG8gPSAwID4gciAqIHMsIHRoaXMueENvcnIgKz0gcyAqIHQgKiAobyA/IDEgLSBuIDogbiksIHRoaXMueUNvcnIgLT0gciAqIHQgKiAoaSA/IG8gPyBuIDogMSAtIG4gOiAxKSwgYyAmJiAodGhpcy54Q29yciAtPSBlICogbiAqICgwID4gciA/IC0xIDogMSksIGkgJiYgKHRoaXMueUNvcnIgLT0gbCAqIG4gKiAoMCA+IHMgPyAtMSA6IDEpKSwgeCh0aGlzLmVsZW1lbnQsIHsKCQkJCQkJCXRleHRBbGlnbjogYQoJCQkJCQl9KSkKCQkJCQl9LAoJCQkJCXBhdGhUb1ZNTDogZnVuY3Rpb24oZSkgewoJCQkJCQlmb3IgKHZhciB0ID0gZS5sZW5ndGgsIG4gPSBbXTsgdC0tOykgZChlW3RdKSA/IG5bdF0gPSB4ZSgxMCAqIGVbdF0pIC0gNSA6ICJaIiA9PT0gZVt0XSA/IG5bdF0gPSAieCIgOiAoblt0XSA9IGVbdF0sICFlLmlzQXJjIHx8ICJ3YSIgIT09IGVbdF0gJiYgImF0IiAhPT0gZVt0XSB8fCAoblt0ICsgNV0gPT09IG5bdCArIDddICYmIChuW3QgKyA3XSArPSBlW3QgKyA3XSA+IGVbdCArIDVdID8gMSA6IC0xKSwgblt0ICsgNl0gPT09IG5bdCArIDhdICYmIChuW3QgKyA4XSArPSBlW3QgKyA4XSA+IGVbdCArIDZdID8gMSA6IC0xKSkpOwoJCQkJCQlyZXR1cm4gbi5qb2luKCIgIikgfHwgIngiCgkJCQkJfSwKCQkJCQljbGlwOiBmdW5jdGlvbihlKSB7CgkJCQkJCXZhciB0LCBuLCBpID0gdGhpczsKCQkJCQkJcmV0dXJuIGUgPyAodCA9IGUubWVtYmVycywgdSh0LCBpKSwgdC5wdXNoKGkpLCBpLmRlc3Ryb3lDbGlwID0gZnVuY3Rpb24oKSB7CgkJCQkJCQl1KHQsIGkpCgkJCQkJCX0sIG4gPSBlLmdldENTUyhpKSkgOiAoaS5kZXN0cm95Q2xpcCAmJiBpLmRlc3Ryb3lDbGlwKCksIG4gPSB7CgkJCQkJCQljbGlwOiBQZSA/ICJpbmhlcml0IiA6ICJyZWN0KGF1dG8pIgoJCQkJCQl9KSwgaS5jc3MobikKCQkJCQl9LAoJCQkJCWNzczogRC5wcm90b3R5cGUuaHRtbENzcywKCQkJCQlzYWZlUmVtb3ZlQ2hpbGQ6IGZ1bmN0aW9uKGUpIHsKCQkJCQkJZS5wYXJlbnROb2RlICYmIEkoZSkKCQkJCQl9LAoJCQkJCWRlc3Ryb3k6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gdGhpcy5kZXN0cm95Q2xpcCAmJiB0aGlzLmRlc3Ryb3lDbGlwKCksIEQucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcykKCQkJCQl9LAoJCQkJCW9uOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCXJldHVybiB0aGlzLmVsZW1lbnRbIm9uIiArIGVdID0gZnVuY3Rpb24oKSB7CgkJCQkJCQl2YXIgZSA9IGdlLmV2ZW50OwoJCQkJCQkJZS50YXJnZXQgPSBlLnNyY0VsZW1lbnQsIHQoZSkKCQkJCQkJfSwgdGhpcwoJCQkJCX0sCgkJCQkJY3V0T2ZmUGF0aDogZnVuY3Rpb24oZSwgdCkgewoJCQkJCQl2YXIgbjsKCQkJCQkJcmV0dXJuIGUgPSBlLnNwbGl0KC9bICxdLyksIG4gPSBlLmxlbmd0aCwgKDkgPT09IG4gfHwgMTEgPT09IG4pICYmIChlW24gLSA0XSA9IGVbbiAtIDJdID0gcihlW24gLSAyXSkgLSAxMCAqIHQpLCBlLmpvaW4oIiAiKQoJCQkJCX0sCgkJCQkJc2hhZG93OiBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJCXZhciBpLCBhLCBvLCBzLCBsLCBjLCBkLCBwID0gW10sCgkJCQkJCQloID0gdGhpcy5lbGVtZW50LAoJCQkJCQkJdSA9IHRoaXMucmVuZGVyZXIsCgkJCQkJCQltID0gaC5zdHlsZSwKCQkJCQkJCWYgPSBoLnBhdGg7CgkJCQkJCWlmIChmICYmICJzdHJpbmciICE9IHR5cGVvZiBmLnZhbHVlICYmIChmID0gIngiKSwgbCA9IGYsIGUpIHsKCQkJCQkJCWZvciAoYyA9IF8oZS53aWR0aCwgMyksIGQgPSAoZS5vcGFjaXR5IHx8IC4xNSkgLyBjLCBpID0gMTsgMyA+PSBpOyBpKyspIHMgPSAyICogYyArIDEgLSAyICogaSwgbiAmJiAobCA9IHRoaXMuY3V0T2ZmUGF0aChmLnZhbHVlLCBzICsgLjUpKSwgbyA9IFsnPHNoYXBlIGlzU2hhZG93PSJ0cnVlIiBzdHJva2V3ZWlnaHQ9IicsIHMsICciIGZpbGxlZD0iZmFsc2UiIHBhdGg9IicsIGwsICciIGNvb3Jkc2l6ZT0iMTAgMTAiIHN0eWxlPSInLCBoLnN0eWxlLmNzc1RleHQsICciIC8+J10sIGEgPSB3KHUucHJlcFZNTChvKSwgbnVsbCwgewoJCQkJCQkJCWxlZnQ6IHIobS5sZWZ0KSArIF8oZS5vZmZzZXRYLCAxKSwKCQkJCQkJCQl0b3A6IHIobS50b3ApICsgXyhlLm9mZnNldFksIDEpCgkJCQkJCQl9KSwgbiAmJiAoYS5jdXRPZmYgPSBzICsgMSksIG8gPSBbJzxzdHJva2UgY29sb3I9IicsIGUuY29sb3IgfHwgImJsYWNrIiwgJyIgb3BhY2l0eT0iJywgZCAqIGksICciLz4nXSwgdyh1LnByZXBWTUwobyksIG51bGwsIG51bGwsIGEpLCB0ID8gdC5lbGVtZW50LmFwcGVuZENoaWxkKGEpIDogaC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLCBoKSwgcC5wdXNoKGEpOwoJCQkJCQkJdGhpcy5zaGFkb3dzID0gcAoJCQkJCQl9CgkJCQkJCXJldHVybiB0aGlzCgkJCQkJfSwKCQkJCQl1cGRhdGVTaGFkb3dzOiBGZSwKCQkJCQlzZXRBdHRyOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCVBlID8gdGhpcy5lbGVtZW50W2VdID0gdCA6IHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoZSwgdCkKCQkJCQl9LAoJCQkJCWNsYXNzU2V0dGVyOiBmdW5jdGlvbihlKSB7CgkJCQkJCXRoaXMuZWxlbWVudC5jbGFzc05hbWUgPSBlCgkJCQkJfSwKCQkJCQlkYXNoc3R5bGVTZXR0ZXI6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQkJdmFyIGkgPSBuLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzdHJva2UiKVswXSB8fCB3KHRoaXMucmVuZGVyZXIucHJlcFZNTChbIjxzdHJva2UvPiJdKSwgbnVsbCwgbnVsbCwgbik7CgkJCQkJCWlbdF0gPSBlIHx8ICJzb2xpZCIsIHRoaXNbdF0gPSBlCgkJCQkJfSwKCQkJCQlkU2V0dGVyOiBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJCXZhciBpLCBhID0gdGhpcy5zaGFkb3dzOwoJCQkJCQlpZiAoZSA9IGUgfHwgW10sIHRoaXMuZCA9IGUuam9pbiAmJiBlLmpvaW4oIiAiKSwgbi5wYXRoID0gZSA9IHRoaXMucGF0aFRvVk1MKGUpLCBhKQoJCQkJCQkJZm9yIChpID0gYS5sZW5ndGg7IGktLTspIGFbaV0ucGF0aCA9IGFbaV0uY3V0T2ZmID8gdGhpcy5jdXRPZmZQYXRoKGUsIGFbaV0uY3V0T2ZmKSA6IGU7CgkJCQkJCXRoaXMuc2V0QXR0cih0LCBlKQoJCQkJCX0sCgkJCQkJZmlsbFNldHRlcjogZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCQl2YXIgaSA9IG4ubm9kZU5hbWU7CgkJCQkJCSJTUEFOIiA9PT0gaSA/IG4uc3R5bGUuY29sb3IgPSBlIDogIklNRyIgIT09IGkgJiYgKG4uZmlsbGVkID0gZSAhPT0gUWUsIHRoaXMuc2V0QXR0cigiZmlsbGNvbG9yIiwgdGhpcy5yZW5kZXJlci5jb2xvcihlLCBuLCB0LCB0aGlzKSkpCgkJCQkJfSwKCQkJCQlvcGFjaXR5U2V0dGVyOiBGZSwKCQkJCQlyb3RhdGlvblNldHRlcjogZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCQl2YXIgaSA9IG4uc3R5bGU7CgkJCQkJCXRoaXNbdF0gPSBpW3RdID0gZSwgaS5sZWZ0ID0gLXhlKEJlKGUgKiBDZSkgKyAxKSArIEtlLCBpLnRvcCA9IHhlKHplKGUgKiBDZSkpICsgS2UKCQkJCQl9LAoJCQkJCXN0cm9rZVNldHRlcjogZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCQl0aGlzLnNldEF0dHIoInN0cm9rZWNvbG9yIiwgdGhpcy5yZW5kZXJlci5jb2xvcihlLCBuLCB0KSkKCQkJCQl9LAoJCQkJCSJzdHJva2Utd2lkdGhTZXR0ZXIiOiBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJCW4uc3Ryb2tlZCA9ICEhZSwgdGhpc1t0XSA9IGUsIGQoZSkgJiYgKGUgKz0gS2UpLCB0aGlzLnNldEF0dHIoInN0cm9rZXdlaWdodCIsIGUpCgkJCQkJfSwKCQkJCQl0aXRsZVNldHRlcjogZnVuY3Rpb24oZSwgdCkgewoJCQkJCQl0aGlzLnNldEF0dHIodCwgZSkKCQkJCQl9LAoJCQkJCXZpc2liaWxpdHlTZXR0ZXI6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQkJImluaGVyaXQiID09PSBlICYmIChlID0gVmUpLCB0aGlzLnNoYWRvd3MgJiYgbXQodGhpcy5zaGFkb3dzLCBmdW5jdGlvbihuKSB7CgkJCQkJCQluLnN0eWxlW3RdID0gZQoJCQkJCQl9KSwgIkRJViIgPT09IG4ubm9kZU5hbWUgJiYgKGUgPSBlID09PSBKZSA/ICItOTk5ZW0iIDogMCwgUGUgfHwgKG4uc3R5bGVbdF0gPSBlID8gVmUgOiBKZSksIHQgPSAidG9wIiksIG4uc3R5bGVbdF0gPSBlCgkJCQkJfSwKCQkJCQl4U2V0dGVyOiBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJCXRoaXNbdF0gPSBlLCAieCIgPT09IHQgPyB0ID0gImxlZnQiIDogInkiID09PSB0ICYmICh0ID0gInRvcCIpLCB0aGlzLnVwZGF0ZUNsaXBwaW5nID8gKHRoaXNbdF0gPSBlLCB0aGlzLnVwZGF0ZUNsaXBwaW5nKCkpIDogbi5zdHlsZVt0XSA9IGUKCQkJCQl9LAoJCQkJCXpJbmRleFNldHRlcjogZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCQluLnN0eWxlW3RdID0gZQoJCQkJCX0KCQkJCX0sIGx0LlZNTEVsZW1lbnQgPSBBdCA9IHYoRCwgQXQpLCBBdC5wcm90b3R5cGUueVNldHRlciA9IEF0LnByb3RvdHlwZS53aWR0aFNldHRlciA9IEF0LnByb3RvdHlwZS5oZWlnaHRTZXR0ZXIgPSBBdC5wcm90b3R5cGUueFNldHRlcjsKCQkJCXZhciBxdCA9IHsKCQkJCQlFbGVtZW50OiBBdCwKCQkJCQlpc0lFODogU2UuaW5kZXhPZigiTVNJRSA4LjAiKSA+IC0xLAoJCQkJCWluaXQ6IGZ1bmN0aW9uKGUsIHQsIG4sIGkpIHsKCQkJCQkJdmFyIG8sIHIsIHMsIGwgPSB0aGlzOwoJCQkJCQlpZiAobC5hbGlnbmVkT2JqZWN0cyA9IFtdLCBvID0gbC5jcmVhdGVFbGVtZW50KFllKS5jc3MoYSh0aGlzLmdldFN0eWxlKGkpLCB7CgkJCQkJCQlwb3NpdGlvbjogWGUKCQkJCQkJfSkpLCByID0gby5lbGVtZW50LCBlLmFwcGVuZENoaWxkKG8uZWxlbWVudCksIGwuaXNWTUwgPSAhMCwgbC5ib3ggPSByLCBsLmJveFdyYXBwZXIgPSBvLCBsLmNhY2hlID0ge30sIGwuc2V0U2l6ZSh0LCBuLCAhMSksICFmZS5uYW1lc3BhY2VzLmhjdikgewoJCQkJCQkJZmUubmFtZXNwYWNlcy5hZGQoImhjdiIsICJ1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOnZtbCIpLCBzID0gImhjdlxcOmZpbGwsIGhjdlxcOnBhdGgsIGhjdlxcOnNoYXBlLCBoY3ZcXDpzdHJva2V7IGJlaGF2aW9yOnVybCgjZGVmYXVsdCNWTUwpOyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IH0gIjsKCQkJCQkJCXRyeSB7CgkJCQkJCQkJZmUuY3JlYXRlU3R5bGVTaGVldCgpLmNzc1RleHQgPSBzCgkJCQkJCQl9IGNhdGNoIChjKSB7CgkJCQkJCQkJZmUuc3R5bGVTaGVldHNbMF0uY3NzVGV4dCArPSBzCgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9LAoJCQkJCWlzSGlkZGVuOiBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuICF0aGlzLmJveC5vZmZzZXRXaWR0aAoJCQkJCX0sCgkJCQkJY2xpcFJlY3Q6IGZ1bmN0aW9uKGUsIHQsIG4sIGkpIHsKCQkJCQkJdmFyIG8gPSB0aGlzLmNyZWF0ZUVsZW1lbnQoKSwKCQkJCQkJCXIgPSBsKGUpOwoJCQkJCQlyZXR1cm4gYShvLCB7CgkJCQkJCQltZW1iZXJzOiBbXSwKCQkJCQkJCWxlZnQ6IChyID8gZS54IDogZSkgKyAxLAoJCQkJCQkJdG9wOiAociA/IGUueSA6IHQpICsgMSwKCQkJCQkJCXdpZHRoOiAociA/IGUud2lkdGggOiBuKSAtIDEsCgkJCQkJCQloZWlnaHQ6IChyID8gZS5oZWlnaHQgOiBpKSAtIDEsCgkJCQkJCQlnZXRDU1M6IGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQl2YXIgdCA9IGUuZWxlbWVudCwKCQkJCQkJCQkJbiA9IHQubm9kZU5hbWUsCgkJCQkJCQkJCWkgPSAic2hhcGUiID09PSBuLAoJCQkJCQkJCQlvID0gZS5pbnZlcnRlZCwKCQkJCQkJCQkJciA9IHRoaXMsCgkJCQkJCQkJCXMgPSByLnRvcCAtIChpID8gdC5vZmZzZXRUb3AgOiAwKSwKCQkJCQkJCQkJbCA9IHIubGVmdCwKCQkJCQkJCQkJYyA9IGwgKyByLndpZHRoLAoJCQkJCQkJCQlkID0gcyArIHIuaGVpZ2h0LAoJCQkJCQkJCQlwID0gewoJCQkJCQkJCQkJY2xpcDogInJlY3QoIiArIHhlKG8gPyBsIDogcykgKyAicHgsIiArIHhlKG8gPyBkIDogYykgKyAicHgsIiArIHhlKG8gPyBjIDogZCkgKyAicHgsIiArIHhlKG8gPyBzIDogbCkgKyAicHgpIgoJCQkJCQkJCQl9OwoJCQkJCQkJCXJldHVybiAhbyAmJiBQZSAmJiAiRElWIiA9PT0gbiAmJiBhKHAsIHsKCQkJCQkJCQkJd2lkdGg6IGMgKyBLZSwKCQkJCQkJCQkJaGVpZ2h0OiBkICsgS2UKCQkJCQkJCQl9KSwgcAoJCQkJCQkJfSwKCQkJCQkJCXVwZGF0ZUNsaXBwaW5nOiBmdW5jdGlvbigpIHsKCQkJCQkJCQltdChvLm1lbWJlcnMsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQkJZS5lbGVtZW50ICYmIGUuY3NzKG8uZ2V0Q1NTKGUpKQoJCQkJCQkJCX0pCgkJCQkJCQl9CgkJCQkJCX0pCgkJCQkJfSwKCQkJCQljb2xvcjogZnVuY3Rpb24oZSwgdCwgbiwgaSkgewoJCQkJCQl2YXIgYSwgbywgciwgcyA9IHRoaXMsCgkJCQkJCQlsID0gL15yZ2JhLywKCQkJCQkJCWMgPSBRZTsKCQkJCQkJaWYgKGUgJiYgZS5saW5lYXJHcmFkaWVudCA/IHIgPSAiZ3JhZGllbnQiIDogZSAmJiBlLnJhZGlhbEdyYWRpZW50ICYmIChyID0gInBhdHRlcm4iKSwgcikgewoJCQkJCQkJdmFyIGQsIHAsIGgsIHUsIG0sIGYsIGcsIF8sIHgsIHYsIGIsIHksIGsgPSBlLmxpbmVhckdyYWRpZW50IHx8IGUucmFkaWFsR3JhZGllbnQsCgkJCQkJCQkJeiA9ICIiLAoJCQkJCQkJCUIgPSBlLnN0b3BzLAoJCQkJCQkJCWogPSBbXSwKCQkJCQkJCQlDID0gZnVuY3Rpb24oKSB7CgkJCQkJCQkJCW8gPSBbJzxmaWxsIGNvbG9ycz0iJyArIGouam9pbigiLCIpICsgJyIgb3BhY2l0eT0iJywgXywgJyIgbzpvcGFjaXR5Mj0iJywgZywgJyIgdHlwZT0iJywgciwgJyIgJywgeiwgJ2ZvY3VzPSIxMDAlIiBtZXRob2Q9ImFueSIgLz4nXSwgdyhzLnByZXBWTUwobyksIG51bGwsIG51bGwsIHQpCgkJCQkJCQkJfTsKCQkJCQkJCWlmIChiID0gQlswXSwgeSA9IEJbQi5sZW5ndGggLSAxXSwgYlswXSA+IDAgJiYgQi51bnNoaWZ0KFswLCBiWzFdXSksIHlbMF0gPCAxICYmIEIucHVzaChbMSwgeVsxXV0pLCBtdChCLCBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCQkJbC50ZXN0KGVbMV0pID8gKGEgPSBUdChlWzFdKSwgZCA9IGEuZ2V0KCJyZ2IiKSwgcCA9IGEuZ2V0KCJhIikpIDogKGQgPSBlWzFdLCBwID0gMSksIGoucHVzaCgxMDAgKiBlWzBdICsgIiUgIiArIGQpLCB0ID8gKF8gPSBwLCB4ID0gZCkgOiAoZyA9IHAsIHYgPSBkKQoJCQkJCQkJfSksICJmaWxsIiA9PT0gbikKCQkJCQkJCQlpZiAoImdyYWRpZW50IiA9PT0gcikgaCA9IGsueDEgfHwga1swXSB8fCAwLCB1ID0gay55MSB8fCBrWzFdIHx8IDAsIG0gPSBrLngyIHx8IGtbMl0gfHwgMCwgZiA9IGsueTIgfHwga1szXSB8fCAwLCB6ID0gJ2FuZ2xlPSInICsgKDkwIC0gMTgwICogX2UuYXRhbigoZiAtIHUpIC8gKG0gLSBoKSkgLyBqZSkgKyAnIicsIEMoKTsKCQkJCQkJCQllbHNlIHsKCQkJCQkJCQkJdmFyIFMsIE4gPSBrLnIsCgkJCQkJCQkJCQlUID0gMiAqIE4sCgkJCQkJCQkJCQlQID0gMiAqIE4sCgkJCQkJCQkJCQlJID0gay5jeCwKCQkJCQkJCQkJCUEgPSBrLmN5LAoJCQkJCQkJCQkJcSA9IHQucmFkaWFsUmVmZXJlbmNlLAoJCQkJCQkJCQkJRSA9IGZ1bmN0aW9uKCkgewoJCQkJCQkJCQkJCXEgJiYgKFMgPSBpLmdldEJCb3goKSwgSSArPSAocVswXSAtIFMueCkgLyBTLndpZHRoIC0gLjUsIEEgKz0gKHFbMV0gLSBTLnkpIC8gUy5oZWlnaHQgLSAuNSwgVCAqPSBxWzJdIC8gUy53aWR0aCwgUCAqPSBxWzJdIC8gUy5oZWlnaHQpLCB6ID0gJ3NyYz0iJyArIEcuZ2xvYmFsLlZNTFJhZGlhbEdyYWRpZW50VVJMICsgJyIgc2l6ZT0iJyArIFQgKyAiLCIgKyBQICsgJyIgb3JpZ2luPSIwLjUsMC41IiBwb3NpdGlvbj0iJyArIEkgKyAiLCIgKyBBICsgJyIgY29sb3IyPSInICsgdiArICciICcsIEMoKQoJCQkJCQkJCQkJfTsKCQkJCQkJCQkJaS5hZGRlZCA/IEUoKSA6IGkub25BZGQgPSBFLCBjID0geAoJCQkJCQkJCX0gZWxzZSBjID0gZAoJCQkJCQl9IGVsc2UgaWYgKGwudGVzdChlKSAmJiAiSU1HIiAhPT0gdC50YWdOYW1lKSBhID0gVHQoZSksIG8gPSBbIjwiLCBuLCAnIG9wYWNpdHk9IicsIGEuZ2V0KCJhIiksICciLz4nXSwgdyh0aGlzLnByZXBWTUwobyksIG51bGwsIG51bGwsIHQpLCBjID0gYS5nZXQoInJnYiIpOwoJCQkJCQllbHNlIHsKCQkJCQkJCXZhciBPID0gdC5nZXRFbGVtZW50c0J5VGFnTmFtZShuKTsKCQkJCQkJCU8ubGVuZ3RoICYmIChPWzBdLm9wYWNpdHkgPSAxLCBPWzBdLnR5cGUgPSAic29saWQiKSwgYyA9IGUKCQkJCQkJfQoJCQkJCQlyZXR1cm4gYwoJCQkJCX0sCgkJCQkJcHJlcFZNTDogZnVuY3Rpb24oZSkgewoJCQkJCQl2YXIgdCA9ICJkaXNwbGF5OmlubGluZS1ibG9jaztiZWhhdmlvcjp1cmwoI2RlZmF1bHQjVk1MKTsiLAoJCQkJCQkJbiA9IHRoaXMuaXNJRTg7CgkJCQkJCXJldHVybiBlID0gZS5qb2luKCIiKSwgbiA/IChlID0gZS5yZXBsYWNlKCIvPiIsICcgeG1sbnM9InVybjpzY2hlbWFzLW1pY3Jvc29mdC1jb206dm1sIiAvPicpLCBlID0gLTEgPT09IGUuaW5kZXhPZignc3R5bGU9IicpID8gZS5yZXBsYWNlKCIvPiIsICcgc3R5bGU9IicgKyB0ICsgJyIgLz4nKSA6IGUucmVwbGFjZSgnc3R5bGU9IicsICdzdHlsZT0iJyArIHQpKSA6IGUgPSBlLnJlcGxhY2UoIjwiLCAiPGhjdjoiKSwgZQoJCQkJCX0sCgkJCQkJdGV4dDogUHQucHJvdG90eXBlLmh0bWwsCgkJCQkJcGF0aDogZnVuY3Rpb24oZSkgewoJCQkJCQl2YXIgdCA9IHsKCQkJCQkJCWNvb3Jkc2l6ZTogIjEwIDEwIgoJCQkJCQl9OwoJCQkJCQlyZXR1cm4gYyhlKSA/IHQuZCA9IGUgOiBsKGUpICYmIGEodCwgZSksIHRoaXMuY3JlYXRlRWxlbWVudCgic2hhcGUiKS5hdHRyKHQpCgkJCQkJfSwKCQkJCQljaXJjbGU6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQkJdmFyIGkgPSB0aGlzLnN5bWJvbCgiY2lyY2xlIik7CgkJCQkJCXJldHVybiBsKGUpICYmIChuID0gZS5yLCB0ID0gZS55LCBlID0gZS54KSwgaS5pc0NpcmNsZSA9ICEwLCBpLnIgPSBuLCBpLmF0dHIoewoJCQkJCQkJeDogZSwKCQkJCQkJCXk6IHQKCQkJCQkJfSkKCQkJCQl9LAoJCQkJCWc6IGZ1bmN0aW9uKGUpIHsKCQkJCQkJdmFyIHQsIG47CgkJCQkJCXJldHVybiBlICYmIChuID0gewoJCQkJCQkJY2xhc3NOYW1lOiBaZSArIGUsCgkJCQkJCQkiY2xhc3MiOiBaZSArIGUKCQkJCQkJfSksIHQgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoWWUpLmF0dHIobikKCQkJCQl9LAoJCQkJCWltYWdlOiBmdW5jdGlvbihlLCB0LCBuLCBpLCBhKSB7CgkJCQkJCXZhciBvID0gdGhpcy5jcmVhdGVFbGVtZW50KCJpbWciKS5hdHRyKHsKCQkJCQkJCXNyYzogZQoJCQkJCQl9KTsKCQkJCQkJcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIG8uYXR0cih7CgkJCQkJCQl4OiB0LAoJCQkJCQkJeTogbiwKCQkJCQkJCXdpZHRoOiBpLAoJCQkJCQkJaGVpZ2h0OiBhCgkJCQkJCX0pLCBvCgkJCQkJfSwKCQkJCQljcmVhdGVFbGVtZW50OiBmdW5jdGlvbihlKSB7CgkJCQkJCXJldHVybiAicmVjdCIgPT09IGUgPyB0aGlzLnN5bWJvbChlKSA6IFB0LnByb3RvdHlwZS5jcmVhdGVFbGVtZW50LmNhbGwodGhpcywgZSkKCQkJCQl9LAoJCQkJCWludmVydENoaWxkOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCXZhciBuID0gdGhpcywKCQkJCQkJCWkgPSB0LnN0eWxlLAoJCQkJCQkJYSA9ICJJTUciID09PSBlLnRhZ05hbWUgJiYgZS5zdHlsZTsKCQkJCQkJeChlLCB7CgkJCQkJCQlmbGlwOiAieCIsCgkJCQkJCQlsZWZ0OiByKGkud2lkdGgpIC0gKGEgPyByKGEudG9wKSA6IDEpLAoJCQkJCQkJdG9wOiByKGkuaGVpZ2h0KSAtIChhID8gcihhLmxlZnQpIDogMSksCgkJCQkJCQlyb3RhdGlvbjogLTkwCgkJCQkJCX0pLCBtdChlLmNoaWxkTm9kZXMsIGZ1bmN0aW9uKHQpIHsKCQkJCQkJCW4uaW52ZXJ0Q2hpbGQodCwgZSkKCQkJCQkJfSkKCQkJCQl9LAoJCQkJCXN5bWJvbHM6IHsKCQkJCQkJYXJjOiBmdW5jdGlvbihlLCB0LCBuLCBpLCBhKSB7CgkJCQkJCQl2YXIgbywgciA9IGEuc3RhcnQsCgkJCQkJCQkJcyA9IGEuZW5kLAoJCQkJCQkJCWwgPSBhLnIgfHwgbiB8fCBpLAoJCQkJCQkJCWMgPSBhLmlubmVyUiwKCQkJCQkJCQlkID0gemUociksCgkJCQkJCQkJcCA9IEJlKHIpLAoJCQkJCQkJCWggPSB6ZShzKSwKCQkJCQkJCQl1ID0gQmUocyk7CgkJCQkJCQlyZXR1cm4gcyAtIHIgPT09IDAgPyBbIngiXSA6IChvID0gWyJ3YSIsIGUgLSBsLCB0IC0gbCwgZSArIGwsIHQgKyBsLCBlICsgbCAqIGQsIHQgKyBsICogcCwgZSArIGwgKiBoLCB0ICsgbCAqIHVdLCBhLm9wZW4gJiYgIWMgJiYgby5wdXNoKCJlIiwgZXQsIGUsIHQpLCBvLnB1c2goImF0IiwgZSAtIGMsIHQgLSBjLCBlICsgYywgdCArIGMsIGUgKyBjICogaCwgdCArIGMgKiB1LCBlICsgYyAqIGQsIHQgKyBjICogcCwgIngiLCAiZSIpLCBvLmlzQXJjID0gITAsIG8pCgkJCQkJCX0sCgkJCQkJCWNpcmNsZTogZnVuY3Rpb24oZSwgdCwgbiwgaSwgYSkgewoJCQkJCQkJcmV0dXJuIGEgJiYgKG4gPSBpID0gMiAqIGEuciksIGEgJiYgYS5pc0NpcmNsZSAmJiAoZSAtPSBuIC8gMiwgdCAtPSBpIC8gMiksIFsid2EiLCBlLCB0LCBlICsgbiwgdCArIGksIGUgKyBuLCB0ICsgaSAvIDIsIGUgKyBuLCB0ICsgaSAvIDIsICJlIl0KCQkJCQkJfSwKCQkJCQkJcmVjdDogZnVuY3Rpb24oZSwgdCwgbiwgaSwgYSkgewoJCQkJCQkJcmV0dXJuIFB0LnByb3RvdHlwZS5zeW1ib2xzW20oYSkgJiYgYS5yID8gImNhbGxvdXQiIDogInNxdWFyZSJdLmNhbGwoMCwgZSwgdCwgbiwgaSwgYSkKCQkJCQkJfQoJCQkJCX0KCQkJCX07CgkJCQlsdC5WTUxSZW5kZXJlciA9IEl0ID0gZnVuY3Rpb24oKSB7CgkJCQkJdGhpcy5pbml0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKCQkJCX0sIEl0LnByb3RvdHlwZSA9IG8oUHQucHJvdG90eXBlLCBxdCksIEggPSBJdAoJCQl9CgkJCVB0LnByb3RvdHlwZS5tZWFzdXJlU3BhbldpZHRoID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJdmFyIG4sIGkgPSBmZS5jcmVhdGVFbGVtZW50KCJzcGFuIiksCgkJCQkJYSA9IGZlLmNyZWF0ZVRleHROb2RlKGUpOwoJCQkJcmV0dXJuIGkuYXBwZW5kQ2hpbGQoYSksIHgoaSwgdCksIHRoaXMuYm94LmFwcGVuZENoaWxkKGkpLCBuID0gaS5vZmZzZXRXaWR0aCwgSShpKSwgbgoJCQl9OwoJCQl2YXIgRXQsIE90OwoJCQlEZSAmJiAobHQuQ2FuVkdSZW5kZXJlciA9IEV0ID0gZnVuY3Rpb24oKSB7CgkJCQlFZSA9ICJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIgoJCQl9LCBFdC5wcm90b3R5cGUuc3ltYm9scyA9IHt9LCBPdCA9IGZ1bmN0aW9uKCkgewoJCQkJZnVuY3Rpb24gZSgpIHsKCQkJCQl2YXIgZSwgbiA9IHQubGVuZ3RoOwoJCQkJCWZvciAoZSA9IDA7IG4gPiBlOyBlKyspIHRbZV0oKTsKCQkJCQl0ID0gW10KCQkJCX0KCQkJCXZhciB0ID0gW107CgkJCQlyZXR1cm4gewoJCQkJCXB1c2g6IGZ1bmN0aW9uKG4sIGkpIHsKCQkJCQkJMCA9PT0gdC5sZW5ndGggJiYgaHQoaSwgZSksIHQucHVzaChuKQoJCQkJCX0KCQkJCX0KCQkJfSgpLCBIID0gRXQpLCBNLnByb3RvdHlwZSA9IHsKCQkJCWFkZExhYmVsOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSwgdCwgbiwgaSwgbyA9IHRoaXMsCgkJCQkJCXIgPSBvLmF4aXMsCgkJCQkJCXMgPSByLm9wdGlvbnMsCgkJCQkJCWwgPSByLmNoYXJ0LAoJCQkJCQljID0gci5ob3JpeiwKCQkJCQkJcCA9IHIuY2F0ZWdvcmllcywKCQkJCQkJdSA9IHIubmFtZXMsCgkJCQkJCWYgPSBvLnBvcywKCQkJCQkJZyA9IHMubGFiZWxzLAoJCQkJCQl4ID0gZy5yb3RhdGlvbiwKCQkJCQkJdyA9IHIudGlja1Bvc2l0aW9ucywKCQkJCQkJdiA9IGMgJiYgcCAmJiAhZy5zdGVwICYmICFnLnN0YWdnZXJMaW5lcyAmJiAhZy5yb3RhdGlvbiAmJiBsLnBsb3RXaWR0aCAvIHcubGVuZ3RoIHx8ICFjICYmIChsLm1hcmdpblszXSB8fCAuMzMgKiBsLmNoYXJ0V2lkdGgpLAoJCQkJCQliID0gZiA9PT0gd1swXSwKCQkJCQkJeSA9IGYgPT09IHdbdy5sZW5ndGggLSAxXSwKCQkJCQkJayA9IHAgPyBfKHBbZl0sIHVbZl0sIGYpIDogZiwKCQkJCQkJeiA9IG8ubGFiZWwsCgkJCQkJCUIgPSB3LmluZm87CgkJCQkJci5pc0RhdGV0aW1lQXhpcyAmJiBCICYmIChpID0gcy5kYXRlVGltZUxhYmVsRm9ybWF0c1tCLmhpZ2hlclJhbmtzW2ZdIHx8IEIudW5pdE5hbWVdKSwgby5pc0ZpcnN0ID0gYiwgby5pc0xhc3QgPSB5LCBlID0gci5sYWJlbEZvcm1hdHRlci5jYWxsKHsKCQkJCQkJYXhpczogciwKCQkJCQkJY2hhcnQ6IGwsCgkJCQkJCWlzRmlyc3Q6IGIsCgkJCQkJCWlzTGFzdDogeSwKCQkJCQkJZGF0ZVRpbWVMYWJlbEZvcm1hdDogaSwKCQkJCQkJdmFsdWU6IHIuaXNMb2cgPyBBKGgoaykpIDogawoJCQkJCX0pLCB0ID0gdiAmJiB7CgkJCQkJCXdpZHRoOiBiZSgxLCB4ZSh2IC0gMiAqIChnLnBhZGRpbmcgfHwgMTApKSkgKyBLZQoJCQkJCX0sIG0oeikgPyB6ICYmIHouYXR0cih7CgkJCQkJCXRleHQ6IGUKCQkJCQl9KS5jc3ModCkgOiAobiA9IHsKCQkJCQkJYWxpZ246IHIubGFiZWxBbGlnbgoJCQkJCX0sIGQoeCkgJiYgKG4ucm90YXRpb24gPSB4KSwgdiAmJiBnLmVsbGlwc2lzICYmICh0LkhjSGVpZ2h0ID0gci5sZW4gLyB3Lmxlbmd0aCksIG8ubGFiZWwgPSB6ID0gbShlKSAmJiBnLmVuYWJsZWQgPyBsLnJlbmRlcmVyLnRleHQoZSwgMCwgMCwgZy51c2VIVE1MKS5hdHRyKG4pLmNzcyhhKHQsIGcuc3R5bGUpKS5hZGQoci5sYWJlbEdyb3VwKSA6IG51bGwsIHIudGlja0Jhc2VsaW5lID0gbC5yZW5kZXJlci5mb250TWV0cmljcyhnLnN0eWxlLmZvbnRTaXplLCB6KS5iLCB4ICYmIDIgPT09IHIuc2lkZSAmJiAoci50aWNrQmFzZWxpbmUgKj0gemUoeCAqIENlKSkpLCBvLnlPZmZzZXQgPSB6ID8gXyhnLnksIHIudGlja0Jhc2VsaW5lICsgKDIgPT09IHIuc2lkZSA/IDggOiAtKHouZ2V0QkJveCgpLmhlaWdodCAvIDIpKSkgOiAwCgkJCQl9LAoJCQkJZ2V0TGFiZWxTaXplOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IHRoaXMubGFiZWwsCgkJCQkJCXQgPSB0aGlzLmF4aXM7CgkJCQkJcmV0dXJuIGUgPyBlLmdldEJCb3goKVt0Lmhvcml6ID8gImhlaWdodCIgOiAid2lkdGgiXSA6IDAKCQkJCX0sCgkJCQlnZXRMYWJlbFNpZGVzOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IHRoaXMubGFiZWwuZ2V0QkJveCgpLAoJCQkJCQl0ID0gdGhpcy5heGlzLAoJCQkJCQluID0gdC5ob3JpeiwKCQkJCQkJaSA9IHQub3B0aW9ucywKCQkJCQkJYSA9IGkubGFiZWxzLAoJCQkJCQlvID0gbiA/IGUud2lkdGggOiBlLmhlaWdodCwKCQkJCQkJciA9IG4gPyBhLnggLSBvICogewoJCQkJCQkJbGVmdDogMCwKCQkJCQkJCWNlbnRlcjogLjUsCgkJCQkJCQlyaWdodDogMQoJCQkJCQl9W3QubGFiZWxBbGlnbl0gOiAwLAoJCQkJCQlzID0gbiA/IG8gKyByIDogbzsKCQkJCQlyZXR1cm4gW3IsIHNdCgkJCQl9LAoJCQkJaGFuZGxlT3ZlcmZsb3c6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQl2YXIgbiwgaSwgYSwgbywgciwgcyA9ICEwLAoJCQkJCQlsID0gdGhpcy5heGlzLAoJCQkJCQljID0gdGhpcy5pc0ZpcnN0LAoJCQkJCQlkID0gdGhpcy5pc0xhc3QsCgkJCQkJCXAgPSBsLmhvcml6LAoJCQkJCQloID0gcCA/IHQueCA6IHQueSwKCQkJCQkJdSA9IGwucmV2ZXJzZWQsCgkJCQkJCW0gPSBsLnRpY2tQb3NpdGlvbnMsCgkJCQkJCWYgPSB0aGlzLmdldExhYmVsU2lkZXMoKSwKCQkJCQkJZyA9IGZbMF0sCgkJCQkJCV8gPSBmWzFdLAoJCQkJCQl4ID0gdGhpcy5sYWJlbC5saW5lLAoJCQkJCQl3ID0geCB8fCAwLAoJCQkJCQl2ID0gbC5sYWJlbEVkZ2UsCgkJCQkJCWIgPSBsLmp1c3RpZnlMYWJlbHMgJiYgKGMgfHwgZCk7CgkJCQkJaWYgKHZbd10gPT09IFcgfHwgaCArIGcgPiB2W3ddID8gdlt3XSA9IGggKyBfIDogYiB8fCAocyA9ICExKSwgYikgewoJCQkJCQlyID0gbC5qdXN0aWZ5VG9QbG90LCBuID0gciA/IGwucG9zIDogMCwgaSA9IHIgPyBuICsgbC5sZW4gOiBsLmNoYXJ0LmNoYXJ0V2lkdGg7CgkJCQkJCWRvIGUgKz0gYyA/IDEgOiAtMSwgYSA9IGwudGlja3NbbVtlXV07IHdoaWxlIChtW2VdICYmICghYSB8fCAhYS5sYWJlbCB8fCBhLmxhYmVsLmxpbmUgIT09IHgpKTsKCQkJCQkJbyA9IGEgJiYgYS5sYWJlbC54eSAmJiBhLmxhYmVsLnh5LnggKyBhLmdldExhYmVsU2lkZXMoKVtjID8gMCA6IDFdLCBjICYmICF1IHx8IGQgJiYgdSA/IG4gPiBoICsgZyAmJiAoaCA9IG4gLSBnLCBhICYmIGggKyBfID4gbyAmJiAocyA9ICExKSkgOiBoICsgXyA+IGkgJiYgKGggPSBpIC0gXywgYSAmJiBvID4gaCArIGcgJiYgKHMgPSAhMSkpLCB0LnggPSBoCgkJCQkJfQoJCQkJCXJldHVybiBzCgkJCQl9LAoJCQkJZ2V0UG9zaXRpb246IGZ1bmN0aW9uKGUsIHQsIG4sIGkpIHsKCQkJCQl2YXIgYSA9IHRoaXMuYXhpcywKCQkJCQkJbyA9IGEuY2hhcnQsCgkJCQkJCXIgPSBpICYmIG8ub2xkQ2hhcnRIZWlnaHQgfHwgby5jaGFydEhlaWdodDsKCQkJCQlyZXR1cm4gewoJCQkJCQl4OiBlID8gYS50cmFuc2xhdGUodCArIG4sIG51bGwsIG51bGwsIGkpICsgYS50cmFuc0IgOiBhLmxlZnQgKyBhLm9mZnNldCArIChhLm9wcG9zaXRlID8gKGkgJiYgby5vbGRDaGFydFdpZHRoIHx8IG8uY2hhcnRXaWR0aCkgLSBhLnJpZ2h0IC0gYS5sZWZ0IDogMCksCgkJCQkJCXk6IGUgPyByIC0gYS5ib3R0b20gKyBhLm9mZnNldCAtIChhLm9wcG9zaXRlID8gYS5oZWlnaHQgOiAwKSA6IHIgLSBhLnRyYW5zbGF0ZSh0ICsgbiwgbnVsbCwgbnVsbCwgaSkgLSBhLnRyYW5zQgoJCQkJCX0KCQkJCX0sCgkJCQlnZXRMYWJlbFBvc2l0aW9uOiBmdW5jdGlvbihlLCB0LCBuLCBpLCBhLCBvLCByLCBzKSB7CgkJCQkJdmFyIGwgPSB0aGlzLmF4aXMsCgkJCQkJCWMgPSBsLnRyYW5zQSwKCQkJCQkJZCA9IGwucmV2ZXJzZWQsCgkJCQkJCXAgPSBsLnN0YWdnZXJMaW5lczsKCQkJCQlyZXR1cm4gZSA9IGUgKyBhLnggLSAobyAmJiBpID8gbyAqIGMgKiAoZCA/IC0xIDogMSkgOiAwKSwgdCA9IHQgKyB0aGlzLnlPZmZzZXQgLSAobyAmJiAhaSA/IG8gKiBjICogKGQgPyAxIDogLTEpIDogMCksIHAgJiYgKG4ubGluZSA9IHIgLyAocyB8fCAxKSAlIHAsIHQgKz0gbi5saW5lICogKGwubGFiZWxPZmZzZXQgLyBwKSksIHsKCQkJCQkJeDogZSwKCQkJCQkJeTogdAoJCQkJCX0KCQkJCX0sCgkJCQlnZXRNYXJrUGF0aDogZnVuY3Rpb24oZSwgdCwgbiwgaSwgYSwgbykgewoJCQkJCXJldHVybiBvLmNyaXNwTGluZShbZXQsIGUsIHQsIHR0LCBlICsgKGEgPyAwIDogLW4pLCB0ICsgKGEgPyBuIDogMCldLCBpKQoJCQkJfSwKCQkJCXJlbmRlcjogZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCXZhciBpLCBhLCBvLCByID0gdGhpcywKCQkJCQkJcyA9IHIuYXhpcywKCQkJCQkJbCA9IHMub3B0aW9ucywKCQkJCQkJYyA9IHMuY2hhcnQsCgkJCQkJCWQgPSBjLnJlbmRlcmVyLAoJCQkJCQlwID0gcy5ob3JpeiwKCQkJCQkJaCA9IHIudHlwZSwKCQkJCQkJdSA9IHIubGFiZWwsCgkJCQkJCW0gPSByLnBvcywKCQkJCQkJZiA9IGwubGFiZWxzLAoJCQkJCQlnID0gci5ncmlkTGluZSwKCQkJCQkJeCA9IGggPyBoICsgIkdyaWQiIDogImdyaWQiLAoJCQkJCQl3ID0gaCA/IGggKyAiVGljayIgOiAidGljayIsCgkJCQkJCXYgPSBsW3ggKyAiTGluZVdpZHRoIl0sCgkJCQkJCWIgPSBsW3ggKyAiTGluZUNvbG9yIl0sCgkJCQkJCXkgPSBsW3ggKyAiTGluZURhc2hTdHlsZSJdLAoJCQkJCQlrID0gbFt3ICsgIkxlbmd0aCJdLAoJCQkJCQl6ID0gbFt3ICsgIldpZHRoIl0gfHwgMCwKCQkJCQkJQiA9IGxbdyArICJDb2xvciJdLAoJCQkJCQlqID0gbFt3ICsgIlBvc2l0aW9uIl0sCgkJCQkJCUMgPSByLm1hcmssCgkJCQkJCVMgPSBmLnN0ZXAsCgkJCQkJCU4gPSAhMCwKCQkJCQkJVCA9IHMudGlja21hcmtPZmZzZXQsCgkJCQkJCVAgPSByLmdldFBvc2l0aW9uKHAsIG0sIFQsIHQpLAoJCQkJCQlJID0gUC54LAoJCQkJCQlBID0gUC55LAoJCQkJCQlxID0gcCAmJiBJID09PSBzLnBvcyArIHMubGVuIHx8ICFwICYmIEEgPT09IHMucG9zID8gLTEgOiAxOwoJCQkJCW4gPSBfKG4sIDEpLCB0aGlzLmlzQWN0aXZlID0gITAsIHYgJiYgKGkgPSBzLmdldFBsb3RMaW5lUGF0aChtICsgVCwgdiAqIHEsIHQsICEwKSwgZyA9PT0gVyAmJiAobyA9IHsKCQkJCQkJc3Ryb2tlOiBiLAoJCQkJCQkic3Ryb2tlLXdpZHRoIjogdgoJCQkJCX0sIHkgJiYgKG8uZGFzaHN0eWxlID0geSksIGggfHwgKG8uekluZGV4ID0gMSksIHQgJiYgKG8ub3BhY2l0eSA9IDApLCByLmdyaWRMaW5lID0gZyA9IHYgPyBkLnBhdGgoaSkuYXR0cihvKS5hZGQocy5ncmlkR3JvdXApIDogbnVsbCksICF0ICYmIGcgJiYgaSAmJiBnW3IuaXNOZXcgPyAiYXR0ciIgOiAiYW5pbWF0ZSJdKHsKCQkJCQkJZDogaSwKCQkJCQkJb3BhY2l0eTogbgoJCQkJCX0pKSwgeiAmJiBrICYmICgiaW5zaWRlIiA9PT0gaiAmJiAoayA9IC1rKSwgcy5vcHBvc2l0ZSAmJiAoayA9IC1rKSwgYSA9IHIuZ2V0TWFya1BhdGgoSSwgQSwgaywgeiAqIHEsIHAsIGQpLCBDID8gQy5hbmltYXRlKHsKCQkJCQkJZDogYSwKCQkJCQkJb3BhY2l0eTogbgoJCQkJCX0pIDogci5tYXJrID0gZC5wYXRoKGEpLmF0dHIoewoJCQkJCQlzdHJva2U6IEIsCgkJCQkJCSJzdHJva2Utd2lkdGgiOiB6LAoJCQkJCQlvcGFjaXR5OiBuCgkJCQkJfSkuYWRkKHMuYXhpc0dyb3VwKSksIHUgJiYgIWlzTmFOKEkpICYmICh1Lnh5ID0gUCA9IHIuZ2V0TGFiZWxQb3NpdGlvbihJLCBBLCB1LCBwLCBmLCBULCBlLCBTKSwgci5pc0ZpcnN0ICYmICFyLmlzTGFzdCAmJiAhXyhsLnNob3dGaXJzdExhYmVsLCAxKSB8fCByLmlzTGFzdCAmJiAhci5pc0ZpcnN0ICYmICFfKGwuc2hvd0xhc3RMYWJlbCwgMSkgPyBOID0gITEgOiBzLmlzUmFkaWFsIHx8IGYuc3RlcCB8fCBmLnJvdGF0aW9uIHx8IHQgfHwgMCA9PT0gbiB8fCAoTiA9IHIuaGFuZGxlT3ZlcmZsb3coZSwgUCkpLCBTICYmIGUgJSBTICYmIChOID0gITEpLCBOICYmICFpc05hTihQLnkpID8gKFAub3BhY2l0eSA9IG4sIHVbci5pc05ldyA/ICJhdHRyIiA6ICJhbmltYXRlIl0oUCksIHIuaXNOZXcgPSAhMSkgOiB1LmF0dHIoInkiLCAtOTk5OSkpCgkJCQl9LAoJCQkJZGVzdHJveTogZnVuY3Rpb24oKSB7CgkJCQkJUCh0aGlzLCB0aGlzLmF4aXMpCgkJCQl9CgkJCX0sIGx0LlBsb3RMaW5lT3JCYW5kID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJdGhpcy5heGlzID0gZSwgdCAmJiAodGhpcy5vcHRpb25zID0gdCwgdGhpcy5pZCA9IHQuaWQpCgkJCX0sIGx0LlBsb3RMaW5lT3JCYW5kLnByb3RvdHlwZSA9IHsKCQkJCXJlbmRlcjogZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUsIHQsIG4sIGksIGEsIHIsIHMgPSB0aGlzLAoJCQkJCQlsID0gcy5heGlzLAoJCQkJCQljID0gbC5ob3JpeiwKCQkJCQkJZCA9IChsLnBvaW50UmFuZ2UgfHwgMCkgLyAyLAoJCQkJCQloID0gcy5vcHRpb25zLAoJCQkJCQl1ID0gaC5sYWJlbCwKCQkJCQkJZiA9IHMubGFiZWwsCgkJCQkJCWcgPSBoLndpZHRoLAoJCQkJCQlfID0gaC50bywKCQkJCQkJeCA9IGguZnJvbSwKCQkJCQkJdyA9IG0oeCkgJiYgbShfKSwKCQkJCQkJdiA9IGgudmFsdWUsCgkJCQkJCWIgPSBoLmRhc2hTdHlsZSwKCQkJCQkJeSA9IHMuc3ZnRWxlbSwKCQkJCQkJayA9IFtdLAoJCQkJCQl6ID0gaC5jb2xvciwKCQkJCQkJQiA9IGguekluZGV4LAoJCQkJCQlqID0gaC5ldmVudHMsCgkJCQkJCUMgPSB7fSwKCQkJCQkJUyA9IGwuY2hhcnQucmVuZGVyZXI7CgkJCQkJaWYgKGwuaXNMb2cgJiYgKHggPSBwKHgpLCBfID0gcChfKSwgdiA9IHAodikpLCBnKSBrID0gbC5nZXRQbG90TGluZVBhdGgodiwgZyksIEMgPSB7CgkJCQkJCXN0cm9rZTogeiwKCQkJCQkJInN0cm9rZS13aWR0aCI6IGcKCQkJCQl9LCBiICYmIChDLmRhc2hzdHlsZSA9IGIpOwoJCQkJCWVsc2UgewoJCQkJCQlpZiAoIXcpIHJldHVybjsKCQkJCQkJeCA9IGJlKHgsIGwubWluIC0gZCksIF8gPSB5ZShfLCBsLm1heCArIGQpLCBrID0gbC5nZXRQbG90QmFuZFBhdGgoeCwgXywgaCksIHogJiYgKEMuZmlsbCA9IHopLCBoLmJvcmRlcldpZHRoICYmIChDLnN0cm9rZSA9IGguYm9yZGVyQ29sb3IsIENbInN0cm9rZS13aWR0aCJdID0gaC5ib3JkZXJXaWR0aCkKCQkJCQl9IGlmIChtKEIpICYmIChDLnpJbmRleCA9IEIpLCB5KSBrID8geS5hbmltYXRlKHsKCQkJCQkJZDogawoJCQkJCX0sIG51bGwsIHkub25HZXRQYXRoKSA6ICh5LmhpZGUoKSwgeS5vbkdldFBhdGggPSBmdW5jdGlvbigpIHsKCQkJCQkJeS5zaG93KCkKCQkJCQl9LCBmICYmIChzLmxhYmVsID0gZiA9IGYuZGVzdHJveSgpKSk7CgkJCQkJZWxzZSBpZiAoayAmJiBrLmxlbmd0aCAmJiAocy5zdmdFbGVtID0geSA9IFMucGF0aChrKS5hdHRyKEMpLmFkZCgpLCBqKSkgewoJCQkJCQllID0gZnVuY3Rpb24oZSkgewoJCQkJCQkJeS5vbihlLCBmdW5jdGlvbih0KSB7CgkJCQkJCQkJaltlXS5hcHBseShzLCBbdF0pCgkJCQkJCQl9KQoJCQkJCQl9OwoJCQkJCQlmb3IgKHQgaW4gaikgZSh0KQoJCQkJCX0KCQkJCQlyZXR1cm4gdSAmJiBtKHUudGV4dCkgJiYgayAmJiBrLmxlbmd0aCAmJiBsLndpZHRoID4gMCAmJiBsLmhlaWdodCA+IDAgPyAodSA9IG8oewoJCQkJCQlhbGlnbjogYyAmJiB3ICYmICJjZW50ZXIiLAoJCQkJCQl4OiBjID8gIXcgJiYgNCA6IDEwLAoJCQkJCQl2ZXJ0aWNhbEFsaWduOiAhYyAmJiB3ICYmICJtaWRkbGUiLAoJCQkJCQl5OiBjID8gdyA/IDE2IDogMTAgOiB3ID8gNiA6IC00LAoJCQkJCQlyb3RhdGlvbjogYyAmJiAhdyAmJiA5MAoJCQkJCX0sIHUpLCBmIHx8IChDID0gewoJCQkJCQlhbGlnbjogdS50ZXh0QWxpZ24gfHwgdS5hbGlnbiwKCQkJCQkJcm90YXRpb246IHUucm90YXRpb24KCQkJCQl9LCBtKEIpICYmIChDLnpJbmRleCA9IEIpLCBzLmxhYmVsID0gZiA9IFMudGV4dCh1LnRleHQsIDAsIDAsIHUudXNlSFRNTCkuYXR0cihDKS5jc3ModS5zdHlsZSkuYWRkKCkpLCBuID0gW2tbMV0sIGtbNF0sIHcgPyBrWzZdIDoga1sxXV0sIGkgPSBba1syXSwga1s1XSwgdyA/IGtbN10gOiBrWzJdXSwgYSA9IE4obiksIHIgPSBOKGkpLCBmLmFsaWduKHUsICExLCB7CgkJCQkJCXg6IGEsCgkJCQkJCXk6IHIsCgkJCQkJCXdpZHRoOiBUKG4pIC0gYSwKCQkJCQkJaGVpZ2h0OiBUKGkpIC0gcgoJCQkJCX0pLCBmLnNob3coKSkgOiBmICYmIGYuaGlkZSgpLCBzCgkJCQl9LAoJCQkJZGVzdHJveTogZnVuY3Rpb24oKSB7CgkJCQkJdSh0aGlzLmF4aXMucGxvdExpbmVzQW5kQmFuZHMsIHRoaXMpLCBkZWxldGUgdGhpcy5heGlzLCBQKHRoaXMpCgkJCQl9CgkJCX0sIFEgPSB7CgkJCQlnZXRQbG90QmFuZFBhdGg6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQl2YXIgbiA9IHRoaXMuZ2V0UGxvdExpbmVQYXRoKHQpLAoJCQkJCQlpID0gdGhpcy5nZXRQbG90TGluZVBhdGgoZSk7CgkJCQkJcmV0dXJuIGkgJiYgbiA/IGkucHVzaChuWzRdLCBuWzVdLCBuWzFdLCBuWzJdKSA6IGkgPSBudWxsLCBpCgkJCQl9LAoJCQkJYWRkUGxvdEJhbmQ6IGZ1bmN0aW9uKGUpIHsKCQkJCQlyZXR1cm4gdGhpcy5hZGRQbG90QmFuZE9yTGluZShlLCAicGxvdEJhbmRzIikKCQkJCX0sCgkJCQlhZGRQbG90TGluZTogZnVuY3Rpb24oZSkgewoJCQkJCXJldHVybiB0aGlzLmFkZFBsb3RCYW5kT3JMaW5lKGUsICJwbG90TGluZXMiKQoJCQkJfSwKCQkJCWFkZFBsb3RCYW5kT3JMaW5lOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJdmFyIG4gPSBuZXcgbHQuUGxvdExpbmVPckJhbmQodGhpcywgZSkucmVuZGVyKCksCgkJCQkJCWkgPSB0aGlzLnVzZXJPcHRpb25zOwoJCQkJCXJldHVybiBuICYmICh0ICYmIChpW3RdID0gaVt0XSB8fCBbXSwgaVt0XS5wdXNoKGUpKSwgdGhpcy5wbG90TGluZXNBbmRCYW5kcy5wdXNoKG4pKSwgbgoJCQkJfSwKCQkJCXJlbW92ZVBsb3RCYW5kT3JMaW5lOiBmdW5jdGlvbihlKSB7CgkJCQkJZm9yICh2YXIgdCA9IHRoaXMucGxvdExpbmVzQW5kQmFuZHMsIG4gPSB0aGlzLm9wdGlvbnMsIGkgPSB0aGlzLnVzZXJPcHRpb25zLCBhID0gdC5sZW5ndGg7IGEtLTspIHRbYV0uaWQgPT09IGUgJiYgdFthXS5kZXN0cm95KCk7CgkJCQkJbXQoW24ucGxvdExpbmVzIHx8IFtdLCBpLnBsb3RMaW5lcyB8fCBbXSwgbi5wbG90QmFuZHMgfHwgW10sIGkucGxvdEJhbmRzIHx8IFtdXSwgZnVuY3Rpb24odCkgewoJCQkJCQlmb3IgKGEgPSB0Lmxlbmd0aDsgYS0tOykgdFthXS5pZCA9PT0gZSAmJiB1KHQsIHRbYV0pCgkJCQkJfSkKCQkJCX0KCQkJfSwgUi5wcm90b3R5cGUgPSB7CgkJCQlkZWZhdWx0T3B0aW9uczogewoJCQkJCWRhdGVUaW1lTGFiZWxGb3JtYXRzOiB7CgkJCQkJCW1pbGxpc2Vjb25kOiAiJUg6JU06JVMuJUwiLAoJCQkJCQlzZWNvbmQ6ICIlSDolTTolUyIsCgkJCQkJCW1pbnV0ZTogIiVIOiVNIiwKCQkJCQkJaG91cjogIiVIOiVNIiwKCQkJCQkJZGF5OiAiJWUuICViIiwKCQkJCQkJd2VlazogIiVlLiAlYiIsCgkJCQkJCW1vbnRoOiAiJWIgJyV5IiwKCQkJCQkJeWVhcjogIiVZIgoJCQkJCX0sCgkJCQkJZW5kT25UaWNrOiAhMSwKCQkJCQlncmlkTGluZUNvbG9yOiAiI0MwQzBDMCIsCgkJCQkJbGFiZWxzOiB6dCwKCQkJCQlsaW5lQ29sb3I6ICIjQzBEMEUwIiwKCQkJCQlsaW5lV2lkdGg6IDEsCgkJCQkJbWluUGFkZGluZzogLjAxLAoJCQkJCW1heFBhZGRpbmc6IC4wMSwKCQkJCQltaW5vckdyaWRMaW5lQ29sb3I6ICIjRTBFMEUwIiwKCQkJCQltaW5vckdyaWRMaW5lV2lkdGg6IDEsCgkJCQkJbWlub3JUaWNrQ29sb3I6ICIjQTBBMEEwIiwKCQkJCQltaW5vclRpY2tMZW5ndGg6IDIsCgkJCQkJbWlub3JUaWNrUG9zaXRpb246ICJvdXRzaWRlIiwKCQkJCQlzdGFydE9mV2VlazogMSwKCQkJCQlzdGFydE9uVGljazogITEsCgkJCQkJdGlja0NvbG9yOiAiI0MwRDBFMCIsCgkJCQkJdGlja0xlbmd0aDogMTAsCgkJCQkJdGlja21hcmtQbGFjZW1lbnQ6ICJiZXR3ZWVuIiwKCQkJCQl0aWNrUGl4ZWxJbnRlcnZhbDogMTAwLAoJCQkJCXRpY2tQb3NpdGlvbjogIm91dHNpZGUiLAoJCQkJCXRpY2tXaWR0aDogMSwKCQkJCQl0aXRsZTogewoJCQkJCQlhbGlnbjogIm1pZGRsZSIsCgkJCQkJCXN0eWxlOiB7CgkJCQkJCQljb2xvcjogIiM3MDcwNzAiCgkJCQkJCX0KCQkJCQl9LAoJCQkJCXR5cGU6ICJsaW5lYXIiCgkJCQl9LAoJCQkJZGVmYXVsdFlBeGlzT3B0aW9uczogewoJCQkJCWVuZE9uVGljazogITAsCgkJCQkJZ3JpZExpbmVXaWR0aDogMSwKCQkJCQl0aWNrUGl4ZWxJbnRlcnZhbDogNzIsCgkJCQkJc2hvd0xhc3RMYWJlbDogITAsCgkJCQkJbGFiZWxzOiB7CgkJCQkJCXg6IC04LAoJCQkJCQl5OiAzCgkJCQkJfSwKCQkJCQlsaW5lV2lkdGg6IDAsCgkJCQkJbWF4UGFkZGluZzogLjA1LAoJCQkJCW1pblBhZGRpbmc6IC4wNSwKCQkJCQlzdGFydE9uVGljazogITAsCgkJCQkJdGlja1dpZHRoOiAwLAoJCQkJCXRpdGxlOiB7CgkJCQkJCXJvdGF0aW9uOiAyNzAsCgkJCQkJCXRleHQ6ICJWYWx1ZXMiCgkJCQkJfSwKCQkJCQlzdGFja0xhYmVsczogewoJCQkJCQllbmFibGVkOiAhMSwKCQkJCQkJZm9ybWF0dGVyOiBmdW5jdGlvbigpIHsKCQkJCQkJCXJldHVybiBiKHRoaXMudG90YWwsIC0xKQoJCQkJCQl9LAoJCQkJCQlzdHlsZTogenQuc3R5bGUKCQkJCQl9CgkJCQl9LAoJCQkJZGVmYXVsdExlZnRBeGlzT3B0aW9uczogewoJCQkJCWxhYmVsczogewoJCQkJCQl4OiAtMTUsCgkJCQkJCXk6IG51bGwKCQkJCQl9LAoJCQkJCXRpdGxlOiB7CgkJCQkJCXJvdGF0aW9uOiAyNzAKCQkJCQl9CgkJCQl9LAoJCQkJZGVmYXVsdFJpZ2h0QXhpc09wdGlvbnM6IHsKCQkJCQlsYWJlbHM6IHsKCQkJCQkJeDogMTUsCgkJCQkJCXk6IG51bGwKCQkJCQl9LAoJCQkJCXRpdGxlOiB7CgkJCQkJCXJvdGF0aW9uOiA5MAoJCQkJCX0KCQkJCX0sCgkJCQlkZWZhdWx0Qm90dG9tQXhpc09wdGlvbnM6IHsKCQkJCQlsYWJlbHM6IHsKCQkJCQkJeDogMCwKCQkJCQkJeTogbnVsbAoJCQkJCX0sCgkJCQkJdGl0bGU6IHsKCQkJCQkJcm90YXRpb246IDAKCQkJCQl9CgkJCQl9LAoJCQkJZGVmYXVsdFRvcEF4aXNPcHRpb25zOiB7CgkJCQkJbGFiZWxzOiB7CgkJCQkJCXg6IDAsCgkJCQkJCXk6IC0xNQoJCQkJCX0sCgkJCQkJdGl0bGU6IHsKCQkJCQkJcm90YXRpb246IDAKCQkJCQl9CgkJCQl9LAoJCQkJaW5pdDogZnVuY3Rpb24oZSwgdCkgewoJCQkJCXZhciBuID0gdC5pc1gsCgkJCQkJCWkgPSB0aGlzOwoJCQkJCWkuaG9yaXogPSBlLmludmVydGVkID8gIW4gOiBuLCBpLmlzWEF4aXMgPSBuLCBpLmNvbGwgPSBuID8gInhBeGlzIiA6ICJ5QXhpcyIsIGkub3Bwb3NpdGUgPSB0Lm9wcG9zaXRlLCBpLnNpZGUgPSB0LnNpZGUgfHwgKGkuaG9yaXogPyBpLm9wcG9zaXRlID8gMCA6IDIgOiBpLm9wcG9zaXRlID8gMSA6IDMpLCBpLnNldE9wdGlvbnModCk7CgkJCQkJdmFyIGEgPSB0aGlzLm9wdGlvbnMsCgkJCQkJCW8gPSBhLnR5cGUsCgkJCQkJCXIgPSAiZGF0ZXRpbWUiID09PSBvOwoJCQkJCWkubGFiZWxGb3JtYXR0ZXIgPSBhLmxhYmVscy5mb3JtYXR0ZXIgfHwgaS5kZWZhdWx0TGFiZWxGb3JtYXR0ZXIsIGkudXNlck9wdGlvbnMgPSB0LCBpLm1pblBpeGVsUGFkZGluZyA9IDAsIGkuY2hhcnQgPSBlLCBpLnJldmVyc2VkID0gYS5yZXZlcnNlZCwgaS56b29tRW5hYmxlZCA9IGEuem9vbUVuYWJsZWQgIT09ICExLCBpLmNhdGVnb3JpZXMgPSBhLmNhdGVnb3JpZXMgfHwgImNhdGVnb3J5IiA9PT0gbywgaS5uYW1lcyA9IFtdLCBpLmlzTG9nID0gImxvZ2FyaXRobWljIiA9PT0gbywgaS5pc0RhdGV0aW1lQXhpcyA9IHIsIGkuaXNMaW5rZWQgPSBtKGEubGlua2VkVG8pLCBpLnRpY2ttYXJrT2Zmc2V0ID0gaS5jYXRlZ29yaWVzICYmICJiZXR3ZWVuIiA9PT0gYS50aWNrbWFya1BsYWNlbWVudCAmJiAxID09PSBfKGEudGlja0ludGVydmFsLCAxKSA/IC41IDogMCwgaS50aWNrcyA9IHt9LCBpLmxhYmVsRWRnZSA9IFtdLCBpLm1pbm9yVGlja3MgPSB7fSwgaS5wbG90TGluZXNBbmRCYW5kcyA9IFtdLCBpLmFsdGVybmF0ZUJhbmRzID0ge30sIGkubGVuID0gMCwgaS5taW5SYW5nZSA9IGkudXNlck1pblJhbmdlID0gYS5taW5SYW5nZSB8fCBhLm1heFpvb20sIGkucmFuZ2UgPSBhLnJhbmdlLCBpLm9mZnNldCA9IGEub2Zmc2V0IHx8IDAsIGkuc3RhY2tzID0ge30sIGkub2xkU3RhY2tzID0ge30sIGkubWF4ID0gbnVsbCwgaS5taW4gPSBudWxsLCBpLmNyb3NzaGFpciA9IF8oYS5jcm9zc2hhaXIsIGcoZS5vcHRpb25zLnRvb2x0aXAuY3Jvc3NoYWlycylbbiA/IDAgOiAxXSwgITEpOwoJCQkJCXZhciBzLCBsID0gaS5vcHRpb25zLmV2ZW50czsgLSAxID09PSB1dChpLCBlLmF4ZXMpICYmIChuICYmICF0aGlzLmlzQ29sb3JBeGlzID8gZS5heGVzLnNwbGljZShlLnhBeGlzLmxlbmd0aCwgMCwgaSkgOiBlLmF4ZXMucHVzaChpKSwgZVtpLmNvbGxdLnB1c2goaSkpLCBpLnNlcmllcyA9IGkuc2VyaWVzIHx8IFtdLCBlLmludmVydGVkICYmIG4gJiYgaS5yZXZlcnNlZCA9PT0gVyAmJiAoaS5yZXZlcnNlZCA9ICEwKSwgaS5yZW1vdmVQbG90QmFuZCA9IGkucmVtb3ZlUGxvdEJhbmRPckxpbmUsIGkucmVtb3ZlUGxvdExpbmUgPSBpLnJlbW92ZVBsb3RCYW5kT3JMaW5lOwoJCQkJCWZvciAocyBpbiBsKSB4dChpLCBzLCBsW3NdKTsKCQkJCQlpLmlzTG9nICYmIChpLnZhbDJsaW4gPSBwLCBpLmxpbjJ2YWwgPSBoKQoJCQkJfSwKCQkJCXNldE9wdGlvbnM6IGZ1bmN0aW9uKGUpIHsKCQkJCQl0aGlzLm9wdGlvbnMgPSBvKHRoaXMuZGVmYXVsdE9wdGlvbnMsIHRoaXMuaXNYQXhpcyA/IHt9IDogdGhpcy5kZWZhdWx0WUF4aXNPcHRpb25zLCBbdGhpcy5kZWZhdWx0VG9wQXhpc09wdGlvbnMsIHRoaXMuZGVmYXVsdFJpZ2h0QXhpc09wdGlvbnMsIHRoaXMuZGVmYXVsdEJvdHRvbUF4aXNPcHRpb25zLCB0aGlzLmRlZmF1bHRMZWZ0QXhpc09wdGlvbnNdW3RoaXMuc2lkZV0sIG8oR1t0aGlzLmNvbGxdLCBlKSkKCQkJCX0sCgkJCQlkZWZhdWx0TGFiZWxGb3JtYXR0ZXI6IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlLCB0LCBuID0gdGhpcy5heGlzLAoJCQkJCQlpID0gdGhpcy52YWx1ZSwKCQkJCQkJYSA9IG4uY2F0ZWdvcmllcywKCQkJCQkJbyA9IHRoaXMuZGF0ZVRpbWVMYWJlbEZvcm1hdCwKCQkJCQkJciA9IEcubGFuZy5udW1lcmljU3ltYm9scywKCQkJCQkJcyA9IHIgJiYgci5sZW5ndGgsCgkJCQkJCWwgPSBuLm9wdGlvbnMubGFiZWxzLmZvcm1hdCwKCQkJCQkJYyA9IG4uaXNMb2cgPyBpIDogbi50aWNrSW50ZXJ2YWw7CgkJCQkJaWYgKGwpIHQgPSBCKGwsIHRoaXMpOwoJCQkJCWVsc2UgaWYgKGEpIHQgPSBpOwoJCQkJCWVsc2UgaWYgKG8pIHQgPSBYKG8sIGkpOwoJCQkJCWVsc2UgaWYgKHMgJiYgYyA+PSAxZTMpCgkJCQkJCWZvciAoOyBzLS0gJiYgdCA9PT0gVzspIGUgPSBNYXRoLnBvdygxZTMsIHMgKyAxKSwgYyA+PSBlICYmIG51bGwgIT09IHJbc10gJiYgKHQgPSBiKGkgLyBlLCAtMSkgKyByW3NdKTsKCQkJCQlyZXR1cm4gdCA9PT0gVyAmJiAodCA9IGtlKGkpID49IDFlNCA/IGIoaSwgMCkgOiBiKGksIC0xLCBXLCAiIikpLCB0CgkJCQl9LAoJCQkJZ2V0U2VyaWVzRXh0cmVtZXM6IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gdGhpcywKCQkJCQkJdCA9IGUuY2hhcnQ7CgkJCQkJZS5oYXNWaXNpYmxlU2VyaWVzID0gITEsIGUuZGF0YU1pbiA9IGUuZGF0YU1heCA9IGUuaWdub3JlTWluUGFkZGluZyA9IGUuaWdub3JlTWF4UGFkZGluZyA9IG51bGwsIGUuYnVpbGRTdGFja3MgJiYgZS5idWlsZFN0YWNrcygpLCBtdChlLnNlcmllcywgZnVuY3Rpb24obikgewoJCQkJCQlpZiAobi52aXNpYmxlIHx8ICF0Lm9wdGlvbnMuY2hhcnQuaWdub3JlSGlkZGVuU2VyaWVzKSB7CgkJCQkJCQl2YXIgaSwgYSwgbywgciA9IG4ub3B0aW9ucywKCQkJCQkJCQlzID0gci50aHJlc2hvbGQ7CgkJCQkJCQllLmhhc1Zpc2libGVTZXJpZXMgPSAhMCwgZS5pc0xvZyAmJiAwID49IHMgJiYgKHMgPSBudWxsKSwgZS5pc1hBeGlzID8gKGkgPSBuLnhEYXRhLCBpLmxlbmd0aCAmJiAoZS5kYXRhTWluID0geWUoXyhlLmRhdGFNaW4sIGlbMF0pLCBOKGkpKSwgZS5kYXRhTWF4ID0gYmUoXyhlLmRhdGFNYXgsIGlbMF0pLCBUKGkpKSkpIDogKG4uZ2V0RXh0cmVtZXMoKSwgbyA9IG4uZGF0YU1heCwgYSA9IG4uZGF0YU1pbiwgbShhKSAmJiBtKG8pICYmIChlLmRhdGFNaW4gPSB5ZShfKGUuZGF0YU1pbiwgYSksIGEpLCBlLmRhdGFNYXggPSBiZShfKGUuZGF0YU1heCwgbyksIG8pKSwgbShzKSAmJiAoZS5kYXRhTWluID49IHMgPyAoZS5kYXRhTWluID0gcywgZS5pZ25vcmVNaW5QYWRkaW5nID0gITApIDogZS5kYXRhTWF4IDwgcyAmJiAoZS5kYXRhTWF4ID0gcywgZS5pZ25vcmVNYXhQYWRkaW5nID0gITApKSkKCQkJCQkJfQoJCQkJCX0pCgkJCQl9LAoJCQkJdHJhbnNsYXRlOiBmdW5jdGlvbihlLCB0LCBuLCBpLCBhLCBvKSB7CgkJCQkJdmFyIHIsIHMgPSB0aGlzLAoJCQkJCQlsID0gMSwKCQkJCQkJYyA9IDAsCgkJCQkJCXAgPSBpID8gcy5vbGRUcmFuc0EgOiBzLnRyYW5zQSwKCQkJCQkJaCA9IGkgPyBzLm9sZE1pbiA6IHMubWluLAoJCQkJCQl1ID0gcy5taW5QaXhlbFBhZGRpbmcsCgkJCQkJCW0gPSAocy5vcHRpb25zLm9yZGluYWwgfHwgcy5pc0xvZyAmJiBhKSAmJiBzLmxpbjJ2YWw7CgkJCQkJcmV0dXJuIHAgfHwgKHAgPSBzLnRyYW5zQSksIG4gJiYgKGwgKj0gLTEsIGMgPSBzLmxlbiksIHMucmV2ZXJzZWQgJiYgKGwgKj0gLTEsIGMgLT0gbCAqIChzLnNlY3RvciB8fCBzLmxlbikpLCB0ID8gKGUgPSBlICogbCArIGMsIGUgLT0gdSwgciA9IGUgLyBwICsgaCwgbSAmJiAociA9IHMubGluMnZhbChyKSkpIDogKG0gJiYgKGUgPSBzLnZhbDJsaW4oZSkpLCAiYmV0d2VlbiIgPT09IG8gJiYgKG8gPSAuNSksIHIgPSBsICogKGUgLSBoKSAqIHAgKyBjICsgbCAqIHUgKyAoZChvKSA/IHAgKiBvICogcy5wb2ludFJhbmdlIDogMCkpLCByCgkJCQl9LAoJCQkJdG9QaXhlbHM6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQlyZXR1cm4gdGhpcy50cmFuc2xhdGUoZSwgITEsICF0aGlzLmhvcml6LCBudWxsLCAhMCkgKyAodCA/IDAgOiB0aGlzLnBvcykKCQkJCX0sCgkJCQl0b1ZhbHVlOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJcmV0dXJuIHRoaXMudHJhbnNsYXRlKGUgLSAodCA/IDAgOiB0aGlzLnBvcyksICEwLCAhdGhpcy5ob3JpeiwgbnVsbCwgITApCgkJCQl9LAoJCQkJZ2V0UGxvdExpbmVQYXRoOiBmdW5jdGlvbihlLCB0LCBuLCBpLCBhKSB7CgkJCQkJdmFyIG8sIHIsIHMsIGwsIGMsIGQgPSB0aGlzLAoJCQkJCQlwID0gZC5jaGFydCwKCQkJCQkJaCA9IGQubGVmdCwKCQkJCQkJdSA9IGQudG9wLAoJCQkJCQltID0gbiAmJiBwLm9sZENoYXJ0SGVpZ2h0IHx8IHAuY2hhcnRIZWlnaHQsCgkJCQkJCWYgPSBuICYmIHAub2xkQ2hhcnRXaWR0aCB8fCBwLmNoYXJ0V2lkdGgsCgkJCQkJCWcgPSBkLnRyYW5zQjsKCQkJCQlyZXR1cm4gYSA9IF8oYSwgZC50cmFuc2xhdGUoZSwgbnVsbCwgbnVsbCwgbikpLCBvID0gcyA9IHhlKGEgKyBnKSwgciA9IGwgPSB4ZShtIC0gYSAtIGcpLCBpc05hTihhKSA/IGMgPSAhMCA6IGQuaG9yaXogPyAociA9IHUsIGwgPSBtIC0gZC5ib3R0b20sIChoID4gbyB8fCBvID4gaCArIGQud2lkdGgpICYmIChjID0gITApKSA6IChvID0gaCwgcyA9IGYgLSBkLnJpZ2h0LCAodSA+IHIgfHwgciA+IHUgKyBkLmhlaWdodCkgJiYgKGMgPSAhMCkpLCBjICYmICFpID8gbnVsbCA6IHAucmVuZGVyZXIuY3Jpc3BMaW5lKFtldCwgbywgciwgdHQsIHMsIGxdLCB0IHx8IDEpCgkJCQl9LAoJCQkJZ2V0TGluZWFyVGlja1Bvc2l0aW9uczogZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCXZhciBpLCBhLCBvID0gQSh3ZSh0IC8gZSkgKiBlKSwKCQkJCQkJciA9IEEodmUobiAvIGUpICogZSksCgkJCQkJCXMgPSBbXTsKCQkJCQlpZiAodCA9PT0gbiAmJiBkKHQpKSByZXR1cm4gW3RdOwoJCQkJCWZvciAoaSA9IG87IHIgPj0gaSAmJiAocy5wdXNoKGkpLCBpID0gQShpICsgZSksIGkgIT09IGEpOykgYSA9IGk7CgkJCQkJcmV0dXJuIHMKCQkJCX0sCgkJCQlnZXRNaW5vclRpY2tQb3NpdGlvbnM6IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlLCB0LCBuLCBpID0gdGhpcywKCQkJCQkJYSA9IGkub3B0aW9ucywKCQkJCQkJbyA9IGkudGlja1Bvc2l0aW9ucywKCQkJCQkJciA9IGkubWlub3JUaWNrSW50ZXJ2YWwsCgkJCQkJCXMgPSBbXTsKCQkJCQlpZiAoaS5pc0xvZykKCQkJCQkJZm9yIChuID0gby5sZW5ndGgsIHQgPSAxOyBuID4gdDsgdCsrKSBzID0gcy5jb25jYXQoaS5nZXRMb2dUaWNrUG9zaXRpb25zKHIsIG9bdCAtIDFdLCBvW3RdLCAhMCkpOwoJCQkJCWVsc2UgaWYgKGkuaXNEYXRldGltZUF4aXMgJiYgImF1dG8iID09PSBhLm1pbm9yVGlja0ludGVydmFsKSBzID0gcy5jb25jYXQoaS5nZXRUaW1lVGlja3MoaS5ub3JtYWxpemVUaW1lVGlja0ludGVydmFsKHIpLCBpLm1pbiwgaS5tYXgsIGEuc3RhcnRPZldlZWspKSwgc1swXSA8IGkubWluICYmIHMuc2hpZnQoKTsKCQkJCQllbHNlCgkJCQkJCWZvciAoZSA9IGkubWluICsgKG9bMF0gLSBpLm1pbikgJSByOyBlIDw9IGkubWF4OyBlICs9IHIpIHMucHVzaChlKTsKCQkJCQlyZXR1cm4gcwoJCQkJfSwKCQkJCWFkanVzdEZvck1pblJhbmdlOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSwgdCwgbiwgaSwgYSwgbywgciwgcywgbCA9IHRoaXMsCgkJCQkJCWMgPSBsLm9wdGlvbnMsCgkJCQkJCWQgPSBsLm1pbiwKCQkJCQkJcCA9IGwubWF4LAoJCQkJCQloID0gbC5kYXRhTWF4IC0gbC5kYXRhTWluID49IGwubWluUmFuZ2U7CgkJCQkJaWYgKGwuaXNYQXhpcyAmJiBsLm1pblJhbmdlID09PSBXICYmICFsLmlzTG9nICYmIChtKGMubWluKSB8fCBtKGMubWF4KSA/IGwubWluUmFuZ2UgPSBudWxsIDogKG10KGwuc2VyaWVzLCBmdW5jdGlvbihlKSB7CgkJCQkJCWZvciAoYSA9IGUueERhdGEsIG8gPSBlLnhJbmNyZW1lbnQgPyAxIDogYS5sZW5ndGggLSAxLCBuID0gbzsgbiA+IDA7IG4tLSkgaSA9IGFbbl0gLSBhW24gLSAxXSwgKHQgPT09IFcgfHwgdCA+IGkpICYmICh0ID0gaSkKCQkJCQl9KSwgbC5taW5SYW5nZSA9IHllKDUgKiB0LCBsLmRhdGFNYXggLSBsLmRhdGFNaW4pKSksIHAgLSBkIDwgbC5taW5SYW5nZSkgewoJCQkJCQl2YXIgdSA9IGwubWluUmFuZ2U7CgkJCQkJCWUgPSAodSAtIHAgKyBkKSAvIDIsIHIgPSBbZCAtIGUsIF8oYy5taW4sIGQgLSBlKV0sIGggJiYgKHJbMl0gPSBsLmRhdGFNaW4pLCBkID0gVChyKSwgcyA9IFtkICsgdSwgXyhjLm1heCwgZCArIHUpXSwgaCAmJiAoc1syXSA9IGwuZGF0YU1heCksIHAgPSBOKHMpLCB1ID4gcCAtIGQgJiYgKHJbMF0gPSBwIC0gdSwgclsxXSA9IF8oYy5taW4sIHAgLSB1KSwgZCA9IFQocikpCgkJCQkJfQoJCQkJCWwubWluID0gZCwgbC5tYXggPSBwCgkJCQl9LAoJCQkJc2V0QXhpc1RyYW5zbGF0aW9uOiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQsIG4sIGkgPSB0aGlzLAoJCQkJCQlhID0gaS5tYXggLSBpLm1pbiwKCQkJCQkJbyA9IGkuYXhpc1BvaW50UmFuZ2UgfHwgMCwKCQkJCQkJciA9IDAsCgkJCQkJCWwgPSAwLAoJCQkJCQljID0gaS5saW5rZWRQYXJlbnQsCgkJCQkJCWQgPSAhIWkuY2F0ZWdvcmllcywKCQkJCQkJcCA9IGkudHJhbnNBOwoJCQkJCShpLmlzWEF4aXMgfHwgZCB8fCBvKSAmJiAoYyA/IChyID0gYy5taW5Qb2ludE9mZnNldCwgbCA9IGMucG9pbnRSYW5nZVBhZGRpbmcpIDogbXQoaS5zZXJpZXMsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJdmFyIG4gPSBkID8gMSA6IGkuaXNYQXhpcyA/IGUucG9pbnRSYW5nZSA6IGkuYXhpc1BvaW50UmFuZ2UgfHwgMCwKCQkJCQkJCWMgPSBlLm9wdGlvbnMucG9pbnRQbGFjZW1lbnQsCgkJCQkJCQlwID0gZS5jbG9zZXN0UG9pbnRSYW5nZTsKCQkJCQkJbiA+IGEgJiYgKG4gPSAwKSwgbyA9IGJlKG8sIG4pLCByID0gYmUociwgcyhjKSA/IDAgOiBuIC8gMiksIGwgPSBiZShsLCAib24iID09PSBjID8gMCA6IG4pLCAhZS5ub1NoYXJlZFRvb2x0aXAgJiYgbShwKSAmJiAodCA9IG0odCkgPyB5ZSh0LCBwKSA6IHApCgkJCQkJfSksIG4gPSBpLm9yZGluYWxTbG9wZSAmJiB0ID8gaS5vcmRpbmFsU2xvcGUgLyB0IDogMSwgaS5taW5Qb2ludE9mZnNldCA9IHIgKj0gbiwgaS5wb2ludFJhbmdlUGFkZGluZyA9IGwgKj0gbiwgaS5wb2ludFJhbmdlID0geWUobywgYSksIGkuY2xvc2VzdFBvaW50UmFuZ2UgPSB0KSwgZSAmJiAoaS5vbGRUcmFuc0EgPSBwKSwgaS50cmFuc2xhdGlvblNsb3BlID0gaS50cmFuc0EgPSBwID0gaS5sZW4gLyAoYSArIGwgfHwgMSksIGkudHJhbnNCID0gaS5ob3JpeiA/IGkubGVmdCA6IGkuYm90dG9tLCBpLm1pblBpeGVsUGFkZGluZyA9IHAgKiByCgkJCQl9LAoJCQkJc2V0VGlja1Bvc2l0aW9uczogZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0LCBuLCBpLCBhLCBvID0gdGhpcywKCQkJCQkJciA9IG8uY2hhcnQsCgkJCQkJCXMgPSBvLm9wdGlvbnMsCgkJCQkJCWwgPSBzLnN0YXJ0T25UaWNrLAoJCQkJCQljID0gcy5lbmRPblRpY2ssCgkJCQkJCWggPSBvLmlzTG9nLAoJCQkJCQl1ID0gby5pc0RhdGV0aW1lQXhpcywKCQkJCQkJZiA9IG8uaXNYQXhpcywKCQkJCQkJZyA9IG8uaXNMaW5rZWQsCgkJCQkJCXggPSBvLm9wdGlvbnMudGlja1Bvc2l0aW9uZXIsCgkJCQkJCXcgPSBzLm1heFBhZGRpbmcsCgkJCQkJCXYgPSBzLm1pblBhZGRpbmcsCgkJCQkJCWIgPSBzLnRpY2tJbnRlcnZhbCwKCQkJCQkJeSA9IHMubWluVGlja0ludGVydmFsLAoJCQkJCQlrID0gcy50aWNrUGl4ZWxJbnRlcnZhbCwKCQkJCQkJeiA9IG8uY2F0ZWdvcmllczsKCQkJCQlpZiAoZyA/IChvLmxpbmtlZFBhcmVudCA9IHJbby5jb2xsXVtzLmxpbmtlZFRvXSwgbiA9IG8ubGlua2VkUGFyZW50LmdldEV4dHJlbWVzKCksIG8ubWluID0gXyhuLm1pbiwgbi5kYXRhTWluKSwgby5tYXggPSBfKG4ubWF4LCBuLmRhdGFNYXgpLCBzLnR5cGUgIT09IG8ubGlua2VkUGFyZW50Lm9wdGlvbnMudHlwZSAmJiBLKDExLCAxKSkgOiAoby5taW4gPSBfKG8udXNlck1pbiwgcy5taW4sIG8uZGF0YU1pbiksIG8ubWF4ID0gXyhvLnVzZXJNYXgsIHMubWF4LCBvLmRhdGFNYXgpKSwgaCAmJiAoIWUgJiYgeWUoby5taW4sIF8oby5kYXRhTWluLCBvLm1pbikpIDw9IDAgJiYgSygxMCwgMSksIG8ubWluID0gQShwKG8ubWluKSksIG8ubWF4ID0gQShwKG8ubWF4KSkpLCBvLnJhbmdlICYmIG0oby5tYXgpICYmIChvLnVzZXJNaW4gPSBvLm1pbiA9IGJlKG8ubWluLCBvLm1heCAtIG8ucmFuZ2UpLCBvLnVzZXJNYXggPSBvLm1heCwgby5yYW5nZSA9IG51bGwpLCBvLmJlZm9yZVBhZGRpbmcgJiYgby5iZWZvcmVQYWRkaW5nKCksIG8uYWRqdXN0Rm9yTWluUmFuZ2UoKSwgeiB8fCBvLmF4aXNQb2ludFJhbmdlIHx8IG8udXNlUGVyY2VudGFnZSB8fCBnIHx8ICFtKG8ubWluKSB8fCAhbShvLm1heCkgfHwgKHQgPSBvLm1heCAtIG8ubWluLCB0ICYmIChtKHMubWluKSB8fCBtKG8udXNlck1pbikgfHwgIXYgfHwgIShvLmRhdGFNaW4gPCAwKSAmJiBvLmlnbm9yZU1pblBhZGRpbmcgfHwgKG8ubWluIC09IHQgKiB2KSwgbShzLm1heCkgfHwgbShvLnVzZXJNYXgpIHx8ICF3IHx8ICEoby5kYXRhTWF4ID4gMCkgJiYgby5pZ25vcmVNYXhQYWRkaW5nIHx8IChvLm1heCArPSB0ICogdykpKSwgZChzLmZsb29yKSAmJiAoby5taW4gPSBiZShvLm1pbiwgcy5mbG9vcikpLCBkKHMuY2VpbGluZykgJiYgKG8ubWF4ID0geWUoby5tYXgsIHMuY2VpbGluZykpLCBvLm1pbiA9PT0gby5tYXggfHwgdm9pZCAwID09PSBvLm1pbiB8fCB2b2lkIDAgPT09IG8ubWF4ID8gby50aWNrSW50ZXJ2YWwgPSAxIDogZyAmJiAhYiAmJiBrID09PSBvLmxpbmtlZFBhcmVudC5vcHRpb25zLnRpY2tQaXhlbEludGVydmFsID8gby50aWNrSW50ZXJ2YWwgPSBvLmxpbmtlZFBhcmVudC50aWNrSW50ZXJ2YWwgOiAoby50aWNrSW50ZXJ2YWwgPSBfKGIsIHogPyAxIDogKG8ubWF4IC0gby5taW4pICogayAvIGJlKG8ubGVuLCBrKSksICFtKGIpICYmIG8ubGVuIDwgayAmJiAhdGhpcy5pc1JhZGlhbCAmJiAhdGhpcy5pc0xvZyAmJiAheiAmJiBsICYmIGMgJiYgKGEgPSAhMCwgby50aWNrSW50ZXJ2YWwgLz0gNCkpLCBmICYmICFlICYmIG10KG8uc2VyaWVzLCBmdW5jdGlvbihlKSB7CgkJCQkJCWUucHJvY2Vzc0RhdGEoby5taW4gIT09IG8ub2xkTWluIHx8IG8ubWF4ICE9PSBvLm9sZE1heCkKCQkJCQl9KSwgby5zZXRBeGlzVHJhbnNsYXRpb24oITApLCBvLmJlZm9yZVNldFRpY2tQb3NpdGlvbnMgJiYgby5iZWZvcmVTZXRUaWNrUG9zaXRpb25zKCksIG8ucG9zdFByb2Nlc3NUaWNrSW50ZXJ2YWwgJiYgKG8udGlja0ludGVydmFsID0gby5wb3N0UHJvY2Vzc1RpY2tJbnRlcnZhbChvLnRpY2tJbnRlcnZhbCkpLCBvLnBvaW50UmFuZ2UgJiYgKG8udGlja0ludGVydmFsID0gYmUoby5wb2ludFJhbmdlLCBvLnRpY2tJbnRlcnZhbCkpLCAhYiAmJiBvLnRpY2tJbnRlcnZhbCA8IHkgJiYgKG8udGlja0ludGVydmFsID0geSksIHUgfHwgaCB8fCBiIHx8IChvLnRpY2tJbnRlcnZhbCA9IEMoby50aWNrSW50ZXJ2YWwsIG51bGwsIGooby50aWNrSW50ZXJ2YWwpLCBfKHMuYWxsb3dEZWNpbWFscywgIShvLnRpY2tJbnRlcnZhbCA+IDEgJiYgby50aWNrSW50ZXJ2YWwgPCA1ICYmIG8ubWF4ID4gMWUzICYmIG8ubWF4IDwgOTk5OSkpKSksIG8ubWlub3JUaWNrSW50ZXJ2YWwgPSAiYXV0byIgPT09IHMubWlub3JUaWNrSW50ZXJ2YWwgJiYgby50aWNrSW50ZXJ2YWwgPyBvLnRpY2tJbnRlcnZhbCAvIDUgOiBzLm1pbm9yVGlja0ludGVydmFsLCBvLnRpY2tQb3NpdGlvbnMgPSBpID0gcy50aWNrUG9zaXRpb25zID8gW10uY29uY2F0KHMudGlja1Bvc2l0aW9ucykgOiB4ICYmIHguYXBwbHkobywgW28ubWluLCBvLm1heF0pLCBpIHx8ICghby5vcmRpbmFsUG9zaXRpb25zICYmIChvLm1heCAtIG8ubWluKSAvIG8udGlja0ludGVydmFsID4gYmUoMiAqIG8ubGVuLCAyMDApICYmIEsoMTksICEwKSwgaSA9IHUgPyBvLmdldFRpbWVUaWNrcyhvLm5vcm1hbGl6ZVRpbWVUaWNrSW50ZXJ2YWwoby50aWNrSW50ZXJ2YWwsIHMudW5pdHMpLCBvLm1pbiwgby5tYXgsIHMuc3RhcnRPZldlZWssIG8ub3JkaW5hbFBvc2l0aW9ucywgby5jbG9zZXN0UG9pbnRSYW5nZSwgITApIDogaCA/IG8uZ2V0TG9nVGlja1Bvc2l0aW9ucyhvLnRpY2tJbnRlcnZhbCwgby5taW4sIG8ubWF4KSA6IG8uZ2V0TGluZWFyVGlja1Bvc2l0aW9ucyhvLnRpY2tJbnRlcnZhbCwgby5taW4sIG8ubWF4KSwgYSAmJiBpLnNwbGljZSgxLCBpLmxlbmd0aCAtIDIpLCBvLnRpY2tQb3NpdGlvbnMgPSBpKSwgIWcpIHsKCQkJCQkJdmFyIEIsIFMgPSBpWzBdLAoJCQkJCQkJTiA9IGlbaS5sZW5ndGggLSAxXSwKCQkJCQkJCVQgPSBvLm1pblBvaW50T2Zmc2V0IHx8IDA7CgkJCQkJCWwgPyBvLm1pbiA9IFMgOiBvLm1pbiAtIFQgPiBTICYmIGkuc2hpZnQoKSwgYyA/IG8ubWF4ID0gTiA6IG8ubWF4ICsgVCA8IE4gJiYgaS5wb3AoKSwgMCA9PT0gaS5sZW5ndGggJiYgbShTKSAmJiBpLnB1c2goKE4gKyBTKSAvIDIpLCAxID09PSBpLmxlbmd0aCAmJiAoQiA9IGtlKG8ubWF4KSA+IDFlMTMgPyAxIDogLjAwMSwgby5taW4gLT0gQiwgby5tYXggKz0gQikKCQkJCQl9CgkJCQl9LAoJCQkJc2V0TWF4VGlja3M6IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gdGhpcy5jaGFydCwKCQkJCQkJdCA9IGUubWF4VGlja3MgfHwge30sCgkJCQkJCW4gPSB0aGlzLnRpY2tQb3NpdGlvbnMsCgkJCQkJCWkgPSB0aGlzLl9tYXhUaWNrc0tleSA9IFt0aGlzLmNvbGwsIHRoaXMucG9zLCB0aGlzLmxlbl0uam9pbigiLSIpOwoJCQkJCSF0aGlzLmlzTGlua2VkICYmICF0aGlzLmlzRGF0ZXRpbWVBeGlzICYmIG4gJiYgbi5sZW5ndGggPiAodFtpXSB8fCAwKSAmJiB0aGlzLm9wdGlvbnMuYWxpZ25UaWNrcyAhPT0gITEgJiYgKHRbaV0gPSBuLmxlbmd0aCksIGUubWF4VGlja3MgPSB0CgkJCQl9LAoJCQkJYWRqdXN0VGlja0Ftb3VudDogZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSB0aGlzLAoJCQkJCQl0ID0gZS5jaGFydCwKCQkJCQkJbiA9IGUuX21heFRpY2tzS2V5LAoJCQkJCQlpID0gZS50aWNrUG9zaXRpb25zLAoJCQkJCQlhID0gdC5tYXhUaWNrczsKCQkJCQlpZiAoYSAmJiBhW25dICYmICFlLmlzRGF0ZXRpbWVBeGlzICYmICFlLmNhdGVnb3JpZXMgJiYgIWUuaXNMaW5rZWQgJiYgZS5vcHRpb25zLmFsaWduVGlja3MgIT09ICExICYmIHRoaXMubWluICE9PSBXKSB7CgkJCQkJCXZhciBvLCByID0gZS50aWNrQW1vdW50LAoJCQkJCQkJcyA9IGkubGVuZ3RoOwoJCQkJCQlpZiAoZS50aWNrQW1vdW50ID0gbyA9IGFbbl0sIG8gPiBzKSB7CgkJCQkJCQlmb3IgKDsgaS5sZW5ndGggPCBvOykgaS5wdXNoKEEoaVtpLmxlbmd0aCAtIDFdICsgZS50aWNrSW50ZXJ2YWwpKTsKCQkJCQkJCWUudHJhbnNBICo9IChzIC0gMSkgLyAobyAtIDEpLCBlLm1heCA9IGlbaS5sZW5ndGggLSAxXQoJCQkJCQl9CgkJCQkJCW0ocikgJiYgbyAhPT0gciAmJiAoZS5pc0RpcnR5ID0gITApCgkJCQkJfQoJCQkJfSwKCQkJCXNldFNjYWxlOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSwgdCwgbiwgaSwgYSA9IHRoaXMsCgkJCQkJCW8gPSBhLnN0YWNrczsKCQkJCQlpZiAoYS5vbGRNaW4gPSBhLm1pbiwgYS5vbGRNYXggPSBhLm1heCwgYS5vbGRBeGlzTGVuZ3RoID0gYS5sZW4sIGEuc2V0QXhpc1NpemUoKSwgaSA9IGEubGVuICE9PSBhLm9sZEF4aXNMZW5ndGgsIG10KGEuc2VyaWVzLCBmdW5jdGlvbihlKSB7CgkJCQkJCShlLmlzRGlydHlEYXRhIHx8IGUuaXNEaXJ0eSB8fCBlLnhBeGlzLmlzRGlydHkpICYmIChuID0gITApCgkJCQkJfSksIGkgfHwgbiB8fCBhLmlzTGlua2VkIHx8IGEuZm9yY2VSZWRyYXcgfHwgYS51c2VyTWluICE9PSBhLm9sZFVzZXJNaW4gfHwgYS51c2VyTWF4ICE9PSBhLm9sZFVzZXJNYXgpIHsKCQkJCQkJaWYgKCFhLmlzWEF4aXMpCgkJCQkJCQlmb3IgKGUgaW4gbykKCQkJCQkJCQlmb3IgKHQgaW4gb1tlXSkgb1tlXVt0XS50b3RhbCA9IG51bGwsIG9bZV1bdF0uY3VtID0gMDsKCQkJCQkJYS5mb3JjZVJlZHJhdyA9ICExLCBhLmdldFNlcmllc0V4dHJlbWVzKCksIGEuc2V0VGlja1Bvc2l0aW9ucygpLCBhLm9sZFVzZXJNaW4gPSBhLnVzZXJNaW4sIGEub2xkVXNlck1heCA9IGEudXNlck1heCwgYS5pc0RpcnR5IHx8IChhLmlzRGlydHkgPSBpIHx8IGEubWluICE9PSBhLm9sZE1pbiB8fCBhLm1heCAhPT0gYS5vbGRNYXgpCgkJCQkJfSBlbHNlIGlmICghYS5pc1hBeGlzKSB7CgkJCQkJCWEub2xkU3RhY2tzICYmIChvID0gYS5zdGFja3MgPSBhLm9sZFN0YWNrcyk7CgkJCQkJCWZvciAoZSBpbiBvKQoJCQkJCQkJZm9yICh0IGluIG9bZV0pIG9bZV1bdF0uY3VtID0gb1tlXVt0XS50b3RhbAoJCQkJCX0KCQkJCQlhLnNldE1heFRpY2tzKCkKCQkJCX0sCgkJCQlzZXRFeHRyZW1lczogZnVuY3Rpb24oZSwgdCwgbiwgaSwgbykgewoJCQkJCXZhciByID0gdGhpcywKCQkJCQkJcyA9IHIuY2hhcnQ7CgkJCQkJbiA9IF8obiwgITApLCBvID0gYShvLCB7CgkJCQkJCW1pbjogZSwKCQkJCQkJbWF4OiB0CgkJCQkJfSksIHZ0KHIsICJzZXRFeHRyZW1lcyIsIG8sIGZ1bmN0aW9uKCkgewoJCQkJCQlyLnVzZXJNaW4gPSBlLCByLnVzZXJNYXggPSB0LCByLmV2ZW50QXJncyA9IG8sIHIuaXNEaXJ0eUV4dHJlbWVzID0gITAsIG4gJiYgcy5yZWRyYXcoaSkKCQkJCQl9KQoJCQkJfSwKCQkJCXpvb206IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQl2YXIgbiA9IHRoaXMuZGF0YU1pbiwKCQkJCQkJaSA9IHRoaXMuZGF0YU1heCwKCQkJCQkJYSA9IHRoaXMub3B0aW9uczsKCQkJCQlyZXR1cm4gdGhpcy5hbGxvd1pvb21PdXRzaWRlIHx8IChtKG4pICYmIGUgPD0geWUobiwgXyhhLm1pbiwgbikpICYmIChlID0gVyksIG0oaSkgJiYgdCA+PSBiZShpLCBfKGEubWF4LCBpKSkgJiYgKHQgPSBXKSksIHRoaXMuZGlzcGxheUJ0biA9IGUgIT09IFcgfHwgdCAhPT0gVywgdGhpcy5zZXRFeHRyZW1lcyhlLCB0LCAhMSwgVywgewoJCQkJCQl0cmlnZ2VyOiAiem9vbSIKCQkJCQl9KSwgITAKCQkJCX0sCgkJCQlzZXRBeGlzU2l6ZTogZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSB0aGlzLmNoYXJ0LAoJCQkJCQl0ID0gdGhpcy5vcHRpb25zLAoJCQkJCQluID0gdC5vZmZzZXRMZWZ0IHx8IDAsCgkJCQkJCWkgPSB0Lm9mZnNldFJpZ2h0IHx8IDAsCgkJCQkJCWEgPSB0aGlzLmhvcml6LAoJCQkJCQlvID0gXyh0LndpZHRoLCBlLnBsb3RXaWR0aCAtIG4gKyBpKSwKCQkJCQkJciA9IF8odC5oZWlnaHQsIGUucGxvdEhlaWdodCksCgkJCQkJCXMgPSBfKHQudG9wLCBlLnBsb3RUb3ApLAoJCQkJCQlsID0gXyh0LmxlZnQsIGUucGxvdExlZnQgKyBuKSwKCQkJCQkJYyA9IC8lJC87CgkJCQkJYy50ZXN0KHIpICYmIChyID0gcGFyc2VJbnQociwgMTApIC8gMTAwICogZS5wbG90SGVpZ2h0KSwgYy50ZXN0KHMpICYmIChzID0gcGFyc2VJbnQocywgMTApIC8gMTAwICogZS5wbG90SGVpZ2h0ICsgZS5wbG90VG9wKSwgdGhpcy5sZWZ0ID0gbCwgdGhpcy50b3AgPSBzLCB0aGlzLndpZHRoID0gbywgdGhpcy5oZWlnaHQgPSByLCB0aGlzLmJvdHRvbSA9IGUuY2hhcnRIZWlnaHQgLSByIC0gcywgdGhpcy5yaWdodCA9IGUuY2hhcnRXaWR0aCAtIG8gLSBsLCB0aGlzLmxlbiA9IGJlKGEgPyBvIDogciwgMCksIHRoaXMucG9zID0gYSA/IGwgOiBzCgkJCQl9LAoJCQkJZ2V0RXh0cmVtZXM6IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gdGhpcywKCQkJCQkJdCA9IGUuaXNMb2c7CgkJCQkJcmV0dXJuIHsKCQkJCQkJbWluOiB0ID8gQShoKGUubWluKSkgOiBlLm1pbiwKCQkJCQkJbWF4OiB0ID8gQShoKGUubWF4KSkgOiBlLm1heCwKCQkJCQkJZGF0YU1pbjogZS5kYXRhTWluLAoJCQkJCQlkYXRhTWF4OiBlLmRhdGFNYXgsCgkJCQkJCXVzZXJNaW46IGUudXNlck1pbiwKCQkJCQkJdXNlck1heDogZS51c2VyTWF4CgkJCQkJfQoJCQkJfSwKCQkJCWdldFRocmVzaG9sZDogZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0ID0gdGhpcywKCQkJCQkJbiA9IHQuaXNMb2csCgkJCQkJCWkgPSBuID8gaCh0Lm1pbikgOiB0Lm1pbiwKCQkJCQkJYSA9IG4gPyBoKHQubWF4KSA6IHQubWF4OwoJCQkJCXJldHVybiBpID4gZSB8fCBudWxsID09PSBlID8gZSA9IGkgOiBlID4gYSAmJiAoZSA9IGEpLCB0LnRyYW5zbGF0ZShlLCAwLCAxLCAwLCAxKQoJCQkJfSwKCQkJCWF1dG9MYWJlbEFsaWduOiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQsIG4gPSAoXyhlLCAwKSAtIDkwICogdGhpcy5zaWRlICsgNzIwKSAlIDM2MDsKCQkJCQlyZXR1cm4gdCA9IG4gPiAxNSAmJiAxNjUgPiBuID8gInJpZ2h0IiA6IG4gPiAxOTUgJiYgMzQ1ID4gbiA/ICJsZWZ0IiA6ICJjZW50ZXIiCgkJCQl9LAoJCQkJZ2V0T2Zmc2V0OiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSwgdCwgbiwgaSwgYSwgbywgciwgcywgbCwgYywgZCwgcCwgaCwgdSwgZiwgZyA9IHRoaXMsCgkJCQkJCXggPSBnLmNoYXJ0LAoJCQkJCQl3ID0geC5yZW5kZXJlciwKCQkJCQkJdiA9IGcub3B0aW9ucywKCQkJCQkJYiA9IGcudGlja1Bvc2l0aW9ucywKCQkJCQkJeSA9IGcudGlja3MsCgkJCQkJCWsgPSBnLmhvcml6LAoJCQkJCQl6ID0gZy5zaWRlLAoJCQkJCQlCID0geC5pbnZlcnRlZCA/IFsxLCAwLCAzLCAyXVt6XSA6IHosCgkJCQkJCWogPSAwLAoJCQkJCQlDID0gMCwKCQkJCQkJUyA9IHYudGl0bGUsCgkJCQkJCU4gPSB2LmxhYmVscywKCQkJCQkJVCA9IDAsCgkJCQkJCVAgPSB4LmF4aXNPZmZzZXQsCgkJCQkJCUkgPSB4LmNsaXBPZmZzZXQsCgkJCQkJCUEgPSBbLTEsIDEsIDEsIC0xXVt6XSwKCQkJCQkJcSA9IDEsCgkJCQkJCUUgPSBfKE4ubWF4U3RhZ2dlckxpbmVzLCA1KTsKCQkJCQlpZiAoZy5oYXNEYXRhID0gZSA9IGcuaGFzVmlzaWJsZVNlcmllcyB8fCBtKGcubWluKSAmJiBtKGcubWF4KSAmJiAhIWIsIGcuc2hvd0F4aXMgPSB0ID0gZSB8fCBfKHYuc2hvd0VtcHR5LCAhMCksIGcuc3RhZ2dlckxpbmVzID0gZy5ob3JpeiAmJiBOLnN0YWdnZXJMaW5lcywgZy5heGlzR3JvdXAgfHwgKGcuZ3JpZEdyb3VwID0gdy5nKCJncmlkIikuYXR0cih7CgkJCQkJCXpJbmRleDogdi5ncmlkWkluZGV4IHx8IDEKCQkJCQl9KS5hZGQoKSwgZy5heGlzR3JvdXAgPSB3LmcoImF4aXMiKS5hdHRyKHsKCQkJCQkJekluZGV4OiB2LnpJbmRleCB8fCAyCgkJCQkJfSkuYWRkKCksIGcubGFiZWxHcm91cCA9IHcuZygiYXhpcy1sYWJlbHMiKS5hdHRyKHsKCQkJCQkJekluZGV4OiBOLnpJbmRleCB8fCA3CgkJCQkJfSkuYWRkQ2xhc3MoWmUgKyBnLmNvbGwudG9Mb3dlckNhc2UoKSArICItbGFiZWxzIikuYWRkKCkpLCBlIHx8IGcuaXNMaW5rZWQpIHsKCQkJCQkJaWYgKGcubGFiZWxBbGlnbiA9IF8oTi5hbGlnbiB8fCBnLmF1dG9MYWJlbEFsaWduKE4ucm90YXRpb24pKSwgbXQoYiwgZnVuY3Rpb24oZSkgewoJCQkJCQkJeVtlXSA/IHlbZV0uYWRkTGFiZWwoKSA6IHlbZV0gPSBuZXcgTShnLCBlKQoJCQkJCQl9KSwgZy5ob3JpeiAmJiAhZy5zdGFnZ2VyTGluZXMgJiYgRSAmJiAhTi5yb3RhdGlvbikgewoJCQkJCQkJZm9yIChyID0gZy5yZXZlcnNlZCA/IFtdLmNvbmNhdChiKS5yZXZlcnNlKCkgOiBiOyBFID4gcTspIHsKCQkJCQkJCQlmb3IgKHMgPSBbXSwgbCA9ICExLCBvID0gMDsgbyA8IHIubGVuZ3RoOyBvKyspIGMgPSByW29dLCBkID0geVtjXS5sYWJlbCAmJiB5W2NdLmxhYmVsLmdldEJCb3goKSwgaCA9IGQgPyBkLndpZHRoIDogMCwgdSA9IG8gJSBxLCBoICYmIChwID0gZy50cmFuc2xhdGUoYyksIHNbdV0gIT09IFcgJiYgcCA8IHNbdV0gJiYgKGwgPSAhMCksIHNbdV0gPSBwICsgaCk7CgkJCQkJCQkJaWYgKCFsKSBicmVhazsKCQkJCQkJCQlxKysKCQkJCQkJCX0KCQkJCQkJCXEgPiAxICYmIChnLnN0YWdnZXJMaW5lcyA9IHEpCgkJCQkJCX0KCQkJCQkJbXQoYiwgZnVuY3Rpb24oZSkgewoJCQkJCQkJKDAgPT09IHogfHwgMiA9PT0geiB8fCB7CgkJCQkJCQkJMTogImxlZnQiLAoJCQkJCQkJCTM6ICJyaWdodCIKCQkJCQkJCX1bel0gPT09IGcubGFiZWxBbGlnbikgJiYgKFQgPSBiZSh5W2VdLmdldExhYmVsU2l6ZSgpLCBUKSkKCQkJCQkJfSksIGcuc3RhZ2dlckxpbmVzICYmIChUICo9IGcuc3RhZ2dlckxpbmVzLCBnLmxhYmVsT2Zmc2V0ID0gVCkKCQkJCQl9IGVsc2UKCQkJCQkJZm9yIChhIGluIHkpIHlbYV0uZGVzdHJveSgpLCBkZWxldGUgeVthXTsKCQkJCQlTICYmIFMudGV4dCAmJiBTLmVuYWJsZWQgIT09ICExICYmIChnLmF4aXNUaXRsZSB8fCAoZy5heGlzVGl0bGUgPSB3LnRleHQoUy50ZXh0LCAwLCAwLCBTLnVzZUhUTUwpLmF0dHIoewoJCQkJCQl6SW5kZXg6IDcsCgkJCQkJCXJvdGF0aW9uOiBTLnJvdGF0aW9uIHx8IDAsCgkJCQkJCWFsaWduOiBTLnRleHRBbGlnbiB8fCB7CgkJCQkJCQlsb3c6ICJsZWZ0IiwKCQkJCQkJCW1pZGRsZTogImNlbnRlciIsCgkJCQkJCQloaWdoOiAicmlnaHQiCgkJCQkJCX1bUy5hbGlnbl0KCQkJCQl9KS5hZGRDbGFzcyhaZSArIHRoaXMuY29sbC50b0xvd2VyQ2FzZSgpICsgIi10aXRsZSIpLmNzcyhTLnN0eWxlKS5hZGQoZy5heGlzR3JvdXApLCBnLmF4aXNUaXRsZS5pc05ldyA9ICEwKSwgdCAmJiAoaiA9IGcuYXhpc1RpdGxlLmdldEJCb3goKVtrID8gImhlaWdodCIgOiAid2lkdGgiXSwgbiA9IFMub2Zmc2V0LCBDID0gbShuKSA/IDAgOiBfKFMubWFyZ2luLCBrID8gNSA6IDEwKSksIGcuYXhpc1RpdGxlW3QgPyAic2hvdyIgOiAiaGlkZSJdKCkpLCBnLm9mZnNldCA9IEEgKiBfKHYub2Zmc2V0LCBQW3pdKSwgZiA9IDIgPT09IHogPyBnLnRpY2tCYXNlbGluZSA6IDAsIGkgPSBUICsgQyArIChUICYmIEEgKiAoayA/IF8oTi55LCBnLnRpY2tCYXNlbGluZSArIDgpIDogTi54KSAtIGYpLCBnLmF4aXNUaXRsZU1hcmdpbiA9IF8obiwgaSksIFBbel0gPSBiZShQW3pdLCBnLmF4aXNUaXRsZU1hcmdpbiArIGogKyBBICogZy5vZmZzZXQsIGkpLCBJW0JdID0gYmUoSVtCXSwgMiAqIHdlKHYubGluZVdpZHRoIC8gMikpCgkJCQl9LAoJCQkJZ2V0TGluZVBhdGg6IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCA9IHRoaXMuY2hhcnQsCgkJCQkJCW4gPSB0aGlzLm9wcG9zaXRlLAoJCQkJCQlpID0gdGhpcy5vZmZzZXQsCgkJCQkJCWEgPSB0aGlzLmhvcml6LAoJCQkJCQlvID0gdGhpcy5sZWZ0ICsgKG4gPyB0aGlzLndpZHRoIDogMCkgKyBpLAoJCQkJCQlyID0gdC5jaGFydEhlaWdodCAtIHRoaXMuYm90dG9tIC0gKG4gPyB0aGlzLmhlaWdodCA6IDApICsgaTsKCQkJCQlyZXR1cm4gbiAmJiAoZSAqPSAtMSksIHQucmVuZGVyZXIuY3Jpc3BMaW5lKFtldCwgYSA/IHRoaXMubGVmdCA6IG8sIGEgPyByIDogdGhpcy50b3AsIHR0LCBhID8gdC5jaGFydFdpZHRoIC0gdGhpcy5yaWdodCA6IG8sIGEgPyByIDogdC5jaGFydEhlaWdodCAtIHRoaXMuYm90dG9tXSwgZSkKCQkJCX0sCgkJCQlnZXRUaXRsZVBvc2l0aW9uOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IHRoaXMuaG9yaXosCgkJCQkJCXQgPSB0aGlzLmxlZnQsCgkJCQkJCW4gPSB0aGlzLnRvcCwKCQkJCQkJaSA9IHRoaXMubGVuLAoJCQkJCQlhID0gdGhpcy5vcHRpb25zLnRpdGxlLAoJCQkJCQlvID0gZSA/IHQgOiBuLAoJCQkJCQlzID0gdGhpcy5vcHBvc2l0ZSwKCQkJCQkJbCA9IHRoaXMub2Zmc2V0LAoJCQkJCQljID0gcihhLnN0eWxlLmZvbnRTaXplIHx8IDEyKSwKCQkJCQkJZCA9IHsKCQkJCQkJCWxvdzogbyArIChlID8gMCA6IGkpLAoJCQkJCQkJbWlkZGxlOiBvICsgaSAvIDIsCgkJCQkJCQloaWdoOiBvICsgKGUgPyBpIDogMCkKCQkJCQkJfVthLmFsaWduXSwKCQkJCQkJcCA9IChlID8gbiArIHRoaXMuaGVpZ2h0IDogdCkgKyAoZSA/IDEgOiAtMSkgKiAocyA/IC0xIDogMSkgKiB0aGlzLmF4aXNUaXRsZU1hcmdpbiArICgyID09PSB0aGlzLnNpZGUgPyBjIDogMCk7CgkJCQkJcmV0dXJuIHsKCQkJCQkJeDogZSA/IGQgOiBwICsgKHMgPyB0aGlzLndpZHRoIDogMCkgKyBsICsgKGEueCB8fCAwKSwKCQkJCQkJeTogZSA/IHAgLSAocyA/IHRoaXMuaGVpZ2h0IDogMCkgKyBsIDogZCArIChhLnkgfHwgMCkKCQkJCQl9CgkJCQl9LAoJCQkJcmVuZGVyOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSwgdCwgbiwgaSwgYSA9IHRoaXMsCgkJCQkJCW8gPSBhLmhvcml6LAoJCQkJCQlyID0gYS5yZXZlcnNlZCwKCQkJCQkJcyA9IGEuY2hhcnQsCgkJCQkJCWwgPSBzLnJlbmRlcmVyLAoJCQkJCQljID0gYS5vcHRpb25zLAoJCQkJCQlkID0gYS5pc0xvZywKCQkJCQkJcCA9IGEuaXNMaW5rZWQsCgkJCQkJCXUgPSBhLnRpY2tQb3NpdGlvbnMsCgkJCQkJCWYgPSBhLmF4aXNUaXRsZSwKCQkJCQkJZyA9IGEudGlja3MsCgkJCQkJCV8gPSBhLm1pbm9yVGlja3MsCgkJCQkJCXggPSBhLmFsdGVybmF0ZUJhbmRzLAoJCQkJCQl3ID0gYy5zdGFja0xhYmVscywKCQkJCQkJdiA9IGMuYWx0ZXJuYXRlR3JpZENvbG9yLAoJCQkJCQliID0gYS50aWNrbWFya09mZnNldCwKCQkJCQkJeSA9IGMubGluZVdpZHRoLAoJCQkJCQlrID0gcy5oYXNSZW5kZXJlZCwKCQkJCQkJeiA9IGsgJiYgbShhLm9sZE1pbikgJiYgIWlzTmFOKGEub2xkTWluKSwKCQkJCQkJQiA9IGEuaGFzRGF0YSwKCQkJCQkJaiA9IGEuc2hvd0F4aXMsCgkJCQkJCUMgPSBjLmxhYmVscy5vdmVyZmxvdywKCQkJCQkJUyA9IGEuanVzdGlmeUxhYmVscyA9IG8gJiYgQyAhPT0gITE7CgkJCQkJYS5sYWJlbEVkZ2UubGVuZ3RoID0gMCwgYS5qdXN0aWZ5VG9QbG90ID0gImp1c3RpZnkiID09PSBDLCBtdChbZywgXywgeF0sIGZ1bmN0aW9uKGUpIHsKCQkJCQkJdmFyIHQ7CgkJCQkJCWZvciAodCBpbiBlKSBlW3RdLmlzQWN0aXZlID0gITEKCQkJCQl9KSwgKEIgfHwgcCkgJiYgKGEubWlub3JUaWNrSW50ZXJ2YWwgJiYgIWEuY2F0ZWdvcmllcyAmJiBtdChhLmdldE1pbm9yVGlja1Bvc2l0aW9ucygpLCBmdW5jdGlvbihlKSB7CgkJCQkJCV9bZV0gfHwgKF9bZV0gPSBuZXcgTShhLCBlLCAibWlub3IiKSksIHogJiYgX1tlXS5pc05ldyAmJiBfW2VdLnJlbmRlcihudWxsLCAhMCksIF9bZV0ucmVuZGVyKG51bGwsICExLCAxKQoJCQkJCX0pLCB1Lmxlbmd0aCAmJiAoZSA9IHUuc2xpY2UoKSwgKG8gJiYgciB8fCAhbyAmJiAhcikgJiYgZS5yZXZlcnNlKCksIFMgJiYgKGUgPSBlLnNsaWNlKDEpLmNvbmNhdChbZVswXV0pKSwgbXQoZSwgZnVuY3Rpb24odCwgbikgewoJCQkJCQlTICYmIChuID0gbiA9PT0gZS5sZW5ndGggLSAxID8gMCA6IG4gKyAxKSwgKCFwIHx8IHQgPj0gYS5taW4gJiYgdCA8PSBhLm1heCkgJiYgKGdbdF0gfHwgKGdbdF0gPSBuZXcgTShhLCB0KSksIHogJiYgZ1t0XS5pc05ldyAmJiBnW3RdLnJlbmRlcihuLCAhMCwgLjEpLCBnW3RdLnJlbmRlcihuKSkKCQkJCQl9KSwgYiAmJiAwID09PSBhLm1pbiAmJiAoZ1stMV0gfHwgKGdbLTFdID0gbmV3IE0oYSwgLTEsIG51bGwsICEwKSksIGdbLTFdLnJlbmRlcigtMSkpKSwgdiAmJiBtdCh1LCBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCXQgJSAyID09PSAwICYmIGUgPCBhLm1heCAmJiAoeFtlXSB8fCAoeFtlXSA9IG5ldyBsdC5QbG90TGluZU9yQmFuZChhKSksIG4gPSBlICsgYiwgaSA9IHVbdCArIDFdICE9PSBXID8gdVt0ICsgMV0gKyBiIDogYS5tYXgsIHhbZV0ub3B0aW9ucyA9IHsKCQkJCQkJCWZyb206IGQgPyBoKG4pIDogbiwKCQkJCQkJCXRvOiBkID8gaChpKSA6IGksCgkJCQkJCQljb2xvcjogdgoJCQkJCQl9LCB4W2VdLnJlbmRlcigpLCB4W2VdLmlzQWN0aXZlID0gITApCgkJCQkJfSksIGEuX2FkZGVkUGxvdExCIHx8IChtdCgoYy5wbG90TGluZXMgfHwgW10pLmNvbmNhdChjLnBsb3RCYW5kcyB8fCBbXSksIGZ1bmN0aW9uKGUpIHsKCQkJCQkJYS5hZGRQbG90QmFuZE9yTGluZShlKQoJCQkJCX0pLCBhLl9hZGRlZFBsb3RMQiA9ICEwKSksIG10KFtnLCBfLCB4XSwgZnVuY3Rpb24oZSkgewoJCQkJCQl2YXIgdCwgbiwgaSA9IFtdLAoJCQkJCQkJYSA9IEogPyBKLmR1cmF0aW9uIHx8IDUwMCA6IDAsCgkJCQkJCQlvID0gZnVuY3Rpb24oKSB7CgkJCQkJCQkJZm9yIChuID0gaS5sZW5ndGg7IG4tLTspIGVbaVtuXV0gJiYgIWVbaVtuXV0uaXNBY3RpdmUgJiYgKGVbaVtuXV0uZGVzdHJveSgpLCBkZWxldGUgZVtpW25dXSkKCQkJCQkJCX07CgkJCQkJCWZvciAodCBpbiBlKSBlW3RdLmlzQWN0aXZlIHx8IChlW3RdLnJlbmRlcih0LCAhMSwgMCksIGVbdF0uaXNBY3RpdmUgPSAhMSwgaS5wdXNoKHQpKTsKCQkJCQkJZSAhPT0geCAmJiBzLmhhc1JlbmRlcmVkICYmIGEgPyBhICYmIHNldFRpbWVvdXQobywgYSkgOiBvKCkKCQkJCQl9KSwgeSAmJiAodCA9IGEuZ2V0TGluZVBhdGgoeSksIGEuYXhpc0xpbmUgPyBhLmF4aXNMaW5lLmFuaW1hdGUoewoJCQkJCQlkOiB0CgkJCQkJfSkgOiBhLmF4aXNMaW5lID0gbC5wYXRoKHQpLmF0dHIoewoJCQkJCQlzdHJva2U6IGMubGluZUNvbG9yLAoJCQkJCQkic3Ryb2tlLXdpZHRoIjogeSwKCQkJCQkJekluZGV4OiA3CgkJCQkJfSkuYWRkKGEuYXhpc0dyb3VwKSwgYS5heGlzTGluZVtqID8gInNob3ciIDogImhpZGUiXSgpKSwgZiAmJiBqICYmIChmW2YuaXNOZXcgPyAiYXR0ciIgOiAiYW5pbWF0ZSJdKGEuZ2V0VGl0bGVQb3NpdGlvbigpKSwgZi5pc05ldyA9ICExKSwgdyAmJiB3LmVuYWJsZWQgJiYgYS5yZW5kZXJTdGFja1RvdGFscygpLCBhLmlzRGlydHkgPSAhMQoJCQkJfSwKCQkJCXJlZHJhdzogZnVuY3Rpb24oKSB7CgkJCQkJdGhpcy5yZW5kZXIoKSwgbXQodGhpcy5wbG90TGluZXNBbmRCYW5kcywgZnVuY3Rpb24oZSkgewoJCQkJCQllLnJlbmRlcigpCgkJCQkJfSksIG10KHRoaXMuc2VyaWVzLCBmdW5jdGlvbihlKSB7CgkJCQkJCWUuaXNEaXJ0eSA9ICEwCgkJCQkJfSkKCQkJCX0sCgkJCQlkZXN0cm95OiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQsIG4sIGkgPSB0aGlzLAoJCQkJCQlhID0gaS5zdGFja3MsCgkJCQkJCW8gPSBpLnBsb3RMaW5lc0FuZEJhbmRzOwoJCQkJCWUgfHwgd3QoaSk7CgkJCQkJZm9yICh0IGluIGEpIFAoYVt0XSksIGFbdF0gPSBudWxsOwoJCQkJCWZvciAobXQoW2kudGlja3MsIGkubWlub3JUaWNrcywgaS5hbHRlcm5hdGVCYW5kc10sIGZ1bmN0aW9uKGUpIHsKCQkJCQkJUChlKQoJCQkJCX0pLCBuID0gby5sZW5ndGg7IG4tLTspIG9bbl0uZGVzdHJveSgpOwoJCQkJCW10KFsic3RhY2tUb3RhbEdyb3VwIiwgImF4aXNMaW5lIiwgImF4aXNUaXRsZSIsICJheGlzR3JvdXAiLCAiY3Jvc3MiLCAiZ3JpZEdyb3VwIiwgImxhYmVsR3JvdXAiXSwgZnVuY3Rpb24oZSkgewoJCQkJCQlpW2VdICYmIChpW2VdID0gaVtlXS5kZXN0cm95KCkpCgkJCQkJfSksIHRoaXMuY3Jvc3MgJiYgdGhpcy5jcm9zcy5kZXN0cm95KCkKCQkJCX0sCgkJCQlkcmF3Q3Jvc3NoYWlyOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJaWYgKHRoaXMuY3Jvc3NoYWlyKSB7CgkJCQkJCWlmICgobSh0KSB8fCAhXyh0aGlzLmNyb3NzaGFpci5zbmFwLCAhMCkpID09PSAhMSkgcmV0dXJuIHZvaWQgdGhpcy5oaWRlQ3Jvc3NoYWlyKCk7CgkJCQkJCXZhciBuLCBpLCBhID0gdGhpcy5jcm9zc2hhaXIsCgkJCQkJCQlvID0gYS5hbmltYXRpb247CgkJCQkJCWlmIChfKGEuc25hcCwgITApID8gbSh0KSAmJiAoaSA9IHRoaXMuY2hhcnQuaW52ZXJ0ZWQgIT0gdGhpcy5ob3JpeiA/IHQucGxvdFggOiB0aGlzLmxlbiAtIHQucGxvdFkpIDogaSA9IHRoaXMuaG9yaXogPyBlLmNoYXJ0WCAtIHRoaXMucG9zIDogdGhpcy5sZW4gLSBlLmNoYXJ0WSArIHRoaXMucG9zLCBuID0gdGhpcy5pc1JhZGlhbCA/IHRoaXMuZ2V0UGxvdExpbmVQYXRoKHRoaXMuaXNYQXhpcyA/IHQueCA6IF8odC5zdGFja1ksIHQueSkpIDogdGhpcy5nZXRQbG90TGluZVBhdGgobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgaSksIG51bGwgPT09IG4pIHJldHVybiB2b2lkIHRoaXMuaGlkZUNyb3NzaGFpcigpOwoJCQkJCQlpZiAodGhpcy5jcm9zcykgdGhpcy5jcm9zcy5hdHRyKHsKCQkJCQkJCXZpc2liaWxpdHk6IFZlCgkJCQkJCX0pW28gPyAiYW5pbWF0ZSIgOiAiYXR0ciJdKHsKCQkJCQkJCWQ6IG4KCQkJCQkJfSwgbyk7CgkJCQkJCWVsc2UgewoJCQkJCQkJdmFyIHIgPSB7CgkJCQkJCQkJInN0cm9rZS13aWR0aCI6IGEud2lkdGggfHwgMSwKCQkJCQkJCQlzdHJva2U6IGEuY29sb3IgfHwgIiNDMEMwQzAiLAoJCQkJCQkJCXpJbmRleDogYS56SW5kZXggfHwgMgoJCQkJCQkJfTsKCQkJCQkJCWEuZGFzaFN0eWxlICYmIChyLmRhc2hzdHlsZSA9IGEuZGFzaFN0eWxlKSwgdGhpcy5jcm9zcyA9IHRoaXMuY2hhcnQucmVuZGVyZXIucGF0aChuKS5hdHRyKHIpLmFkZCgpCgkJCQkJCX0KCQkJCQl9CgkJCQl9LAoJCQkJaGlkZUNyb3NzaGFpcjogZnVuY3Rpb24oKSB7CgkJCQkJdGhpcy5jcm9zcyAmJiB0aGlzLmNyb3NzLmhpZGUoKQoJCQkJfQoJCQl9LCBhKFIucHJvdG90eXBlLCBRKSwgUi5wcm90b3R5cGUuZ2V0VGltZVRpY2tzID0gZnVuY3Rpb24oZSwgdCwgbiwgaSkgewoJCQkJdmFyIG8sIHIsIHMgPSBbXSwKCQkJCQlsID0ge30sCgkJCQkJYyA9IEcuZ2xvYmFsLnVzZVVUQywKCQkJCQlkID0gbmV3IGVlKHQgLSBuZSksCgkJCQkJcCA9IGUudW5pdFJhbmdlLAoJCQkJCWggPSBlLmNvdW50OwoJCQkJaWYgKG0odCkpIHsKCQkJCQlwID49IFYuc2Vjb25kICYmIChkLnNldE1pbGxpc2Vjb25kcygwKSwgZC5zZXRTZWNvbmRzKHAgPj0gVi5taW51dGUgPyAwIDogaCAqIHdlKGQuZ2V0U2Vjb25kcygpIC8gaCkpKSwgcCA+PSBWLm1pbnV0ZSAmJiBkW2NlXShwID49IFYuaG91ciA/IDAgOiBoICogd2UoZFtpZV0oKSAvIGgpKSwgcCA+PSBWLmhvdXIgJiYgZFtkZV0ocCA+PSBWLmRheSA/IDAgOiBoICogd2UoZFthZV0oKSAvIGgpKSwgcCA+PSBWLmRheSAmJiBkW3BlXShwID49IFYubW9udGggPyAxIDogaCAqIHdlKGRbcmVdKCkgLyBoKSksIHAgPj0gVi5tb250aCAmJiAoZFtoZV0ocCA+PSBWLnllYXIgPyAwIDogaCAqIHdlKGRbc2VdKCkgLyBoKSksIHIgPSBkW2xlXSgpKSwgcCA+PSBWLnllYXIgJiYgKHIgLT0gciAlIGgsIGRbdWVdKHIpKSwgcCA9PT0gVi53ZWVrICYmIGRbcGVdKGRbcmVdKCkgLSBkW29lXSgpICsgXyhpLCAxKSksIG8gPSAxLCBuZSAmJiAoZCA9IG5ldyBlZShkLmdldFRpbWUoKSArIG5lKSksIHIgPSBkW2xlXSgpOwoJCQkJCWZvciAodmFyIHUgPSBkLmdldFRpbWUoKSwgZiA9IGRbc2VdKCksIGcgPSBkW3JlXSgpLCB4ID0gKFYuZGF5ICsgKGMgPyBuZSA6IDYwICogZC5nZXRUaW1lem9uZU9mZnNldCgpICogMWUzKSkgJSBWLmRheTsgbiA+IHU7KSBzLnB1c2godSksIHAgPT09IFYueWVhciA/IHUgPSB0ZShyICsgbyAqIGgsIDApIDogcCA9PT0gVi5tb250aCA/IHUgPSB0ZShyLCBmICsgbyAqIGgpIDogYyB8fCBwICE9PSBWLmRheSAmJiBwICE9PSBWLndlZWsgPyB1ICs9IHAgKiBoIDogdSA9IHRlKHIsIGYsIGcgKyBvICogaCAqIChwID09PSBWLmRheSA/IDEgOiA3KSksIG8rKzsKCQkJCQlzLnB1c2godSksIG10KGZ0KHMsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJcmV0dXJuIHAgPD0gVi5ob3VyICYmIGUgJSBWLmRheSA9PT0geAoJCQkJCX0pLCBmdW5jdGlvbihlKSB7CgkJCQkJCWxbZV0gPSAiZGF5IgoJCQkJCX0pCgkJCQl9CgkJCQlyZXR1cm4gcy5pbmZvID0gYShlLCB7CgkJCQkJaGlnaGVyUmFua3M6IGwsCgkJCQkJdG90YWxSYW5nZTogcCAqIGgKCQkJCX0pLCBzCgkJCX0sIFIucHJvdG90eXBlLm5vcm1hbGl6ZVRpbWVUaWNrSW50ZXJ2YWwgPSBmdW5jdGlvbihlLCB0KSB7CgkJCQl2YXIgbiwgaSwgYSA9IHQgfHwgWwoJCQkJCQlbIm1pbGxpc2Vjb25kIiwgWzEsIDIsIDUsIDEwLCAyMCwgMjUsIDUwLCAxMDAsIDIwMCwgNTAwXV0sCgkJCQkJCVsic2Vjb25kIiwgWzEsIDIsIDUsIDEwLCAxNSwgMzBdXSwKCQkJCQkJWyJtaW51dGUiLCBbMSwgMiwgNSwgMTAsIDE1LCAzMF1dLAoJCQkJCQlbImhvdXIiLCBbMSwgMiwgMywgNCwgNiwgOCwgMTJdXSwKCQkJCQkJWyJkYXkiLCBbMSwgMl1dLAoJCQkJCQlbIndlZWsiLCBbMSwgMl1dLAoJCQkJCQlbIm1vbnRoIiwgWzEsIDIsIDMsIDQsIDZdXSwKCQkJCQkJWyJ5ZWFyIiwgbnVsbF0KCQkJCQldLAoJCQkJCW8gPSBhW2EubGVuZ3RoIC0gMV0sCgkJCQkJciA9IFZbb1swXV0sCgkJCQkJcyA9IG9bMV07CgkJCQlmb3IgKGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykKCQkJCQlpZiAobyA9IGFbaV0sIHIgPSBWW29bMF1dLCBzID0gb1sxXSwgYVtpICsgMV0pIHsKCQkJCQkJdmFyIGwgPSAociAqIHNbcy5sZW5ndGggLSAxXSArIFZbYVtpICsgMV1bMF1dKSAvIDI7CgkJCQkJCWlmIChsID49IGUpIGJyZWFrCgkJCQkJfQoJCQkJcmV0dXJuIHIgPT09IFYueWVhciAmJiA1ICogciA+IGUgJiYgKHMgPSBbMSwgMiwgNV0pLCBuID0gQyhlIC8gciwgcywgInllYXIiID09PSBvWzBdID8gYmUoaihlIC8gciksIDEpIDogMSksIHsKCQkJCQl1bml0UmFuZ2U6IHIsCgkJCQkJY291bnQ6IG4sCgkJCQkJdW5pdE5hbWU6IG9bMF0KCQkJCX0KCQkJfSwgUi5wcm90b3R5cGUuZ2V0TG9nVGlja1Bvc2l0aW9ucyA9IGZ1bmN0aW9uKGUsIHQsIG4sIGkpIHsKCQkJCXZhciBhID0gdGhpcywKCQkJCQlvID0gYS5vcHRpb25zLAoJCQkJCXIgPSBhLmxlbiwKCQkJCQlzID0gW107CgkJCQlpZiAoaSB8fCAoYS5fbWlub3JBdXRvSW50ZXJ2YWwgPSBudWxsKSwgZSA+PSAuNSkgZSA9IHhlKGUpLCBzID0gYS5nZXRMaW5lYXJUaWNrUG9zaXRpb25zKGUsIHQsIG4pOwoJCQkJZWxzZSBpZiAoZSA+PSAuMDgpIHsKCQkJCQl2YXIgbCwgYywgZCwgdSwgbSwgZiwgZywgeCA9IHdlKHQpOwoJCQkJCWZvciAobCA9IGUgPiAuMyA/IFsxLCAyLCA0XSA6IGUgPiAuMTUgPyBbMSwgMiwgNCwgNiwgOF0gOiBbMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOV0sIGMgPSB4OyBuICsgMSA+IGMgJiYgIWc7IGMrKykKCQkJCQkJZm9yICh1ID0gbC5sZW5ndGgsIGQgPSAwOyB1ID4gZCAmJiAhZzsgZCsrKSBtID0gcChoKGMpICogbFtkXSksIG0gPiB0ICYmICghaSB8fCBuID49IGYpICYmIGYgIT09IFcgJiYgcy5wdXNoKGYpLCBmID4gbiAmJiAoZyA9ICEwKSwgZiA9IG0KCQkJCX0gZWxzZSB7CgkJCQkJdmFyIHcgPSBoKHQpLAoJCQkJCQl2ID0gaChuKSwKCQkJCQkJYiA9IG9baSA/ICJtaW5vclRpY2tJbnRlcnZhbCIgOiAidGlja0ludGVydmFsIl0sCgkJCQkJCXkgPSAiYXV0byIgPT09IGIgPyBudWxsIDogYiwKCQkJCQkJayA9IG8udGlja1BpeGVsSW50ZXJ2YWwgLyAoaSA/IDUgOiAxKSwKCQkJCQkJeiA9IGkgPyByIC8gYS50aWNrUG9zaXRpb25zLmxlbmd0aCA6IHI7CgkJCQkJZSA9IF8oeSwgYS5fbWlub3JBdXRvSW50ZXJ2YWwsICh2IC0gdykgKiBrIC8gKHogfHwgMSkpLCBlID0gQyhlLCBudWxsLCBqKGUpKSwgcyA9IF90KGEuZ2V0TGluZWFyVGlja1Bvc2l0aW9ucyhlLCB3LCB2KSwgcCksIGkgfHwgKGEuX21pbm9yQXV0b0ludGVydmFsID0gZSAvIDUpCgkJCQl9CgkJCQlyZXR1cm4gaSB8fCAoYS50aWNrSW50ZXJ2YWwgPSBlKSwgcwoJCQl9OwoJCQl2YXIgTHQgPSBsdC5Ub29sdGlwID0gZnVuY3Rpb24oKSB7CgkJCQl0aGlzLmluaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKQoJCQl9OwoJCQlMdC5wcm90b3R5cGUgPSB7CgkJCQlpbml0OiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJdmFyIG4gPSB0LmJvcmRlcldpZHRoLAoJCQkJCQlpID0gdC5zdHlsZSwKCQkJCQkJYSA9IHIoaS5wYWRkaW5nKTsKCQkJCQl0aGlzLmNoYXJ0ID0gZSwgdGhpcy5vcHRpb25zID0gdCwgdGhpcy5jcm9zc2hhaXJzID0gW10sIHRoaXMubm93ID0gewoJCQkJCQl4OiAwLAoJCQkJCQl5OiAwCgkJCQkJfSwgdGhpcy5pc0hpZGRlbiA9ICEwLCB0aGlzLmxhYmVsID0gZS5yZW5kZXJlci5sYWJlbCgiIiwgMCwgMCwgdC5zaGFwZSB8fCAiY2FsbG91dCIsIG51bGwsIG51bGwsIHQudXNlSFRNTCwgbnVsbCwgInRvb2x0aXAiKS5hdHRyKHsKCQkJCQkJcGFkZGluZzogYSwKCQkJCQkJZmlsbDogdC5iYWNrZ3JvdW5kQ29sb3IsCgkJCQkJCSJzdHJva2Utd2lkdGgiOiBuLAoJCQkJCQlyOiB0LmJvcmRlclJhZGl1cywKCQkJCQkJekluZGV4OiA4CgkJCQkJfSkuY3NzKGkpLmNzcyh7CgkJCQkJCXBhZGRpbmc6IDAKCQkJCQl9KS5hZGQoKS5hdHRyKHsKCQkJCQkJeTogLTk5OTkKCQkJCQl9KSwgRGUgfHwgdGhpcy5sYWJlbC5zaGFkb3codC5zaGFkb3cpLCB0aGlzLnNoYXJlZCA9IHQuc2hhcmVkCgkJCQl9LAoJCQkJZGVzdHJveTogZnVuY3Rpb24oKSB7CgkJCQkJdGhpcy5sYWJlbCAmJiAodGhpcy5sYWJlbCA9IHRoaXMubGFiZWwuZGVzdHJveSgpKSwgY2xlYXJUaW1lb3V0KHRoaXMuaGlkZVRpbWVyKSwgY2xlYXJUaW1lb3V0KHRoaXMudG9vbHRpcFRpbWVvdXQpCgkJCQl9LAoJCQkJbW92ZTogZnVuY3Rpb24oZSwgdCwgbiwgaSkgewoJCQkJCXZhciBvID0gdGhpcywKCQkJCQkJciA9IG8ubm93LAoJCQkJCQlzID0gby5vcHRpb25zLmFuaW1hdGlvbiAhPT0gITEgJiYgIW8uaXNIaWRkZW4gJiYgKGtlKGUgLSByLngpID4gMSB8fCBrZSh0IC0gci55KSA+IDEpLAoJCQkJCQlsID0gby5mb2xsb3dQb2ludGVyIHx8IG8ubGVuID4gMTsKCQkJCQlhKHIsIHsKCQkJCQkJeDogcyA/ICgyICogci54ICsgZSkgLyAzIDogZSwKCQkJCQkJeTogcyA/IChyLnkgKyB0KSAvIDIgOiB0LAoJCQkJCQlhbmNob3JYOiBsID8gVyA6IHMgPyAoMiAqIHIuYW5jaG9yWCArIG4pIC8gMyA6IG4sCgkJCQkJCWFuY2hvclk6IGwgPyBXIDogcyA/IChyLmFuY2hvclkgKyBpKSAvIDIgOiBpCgkJCQkJfSksIG8ubGFiZWwuYXR0cihyKSwgcyAmJiAoY2xlYXJUaW1lb3V0KHRoaXMudG9vbHRpcFRpbWVvdXQpLCB0aGlzLnRvb2x0aXBUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJbyAmJiBvLm1vdmUoZSwgdCwgbiwgaSkKCQkJCQl9LCAzMikpCgkJCQl9LAoJCQkJaGlkZTogZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0LCBuID0gdGhpczsKCQkJCQljbGVhclRpbWVvdXQodGhpcy5oaWRlVGltZXIpLCB0aGlzLmlzSGlkZGVuIHx8ICh0ID0gdGhpcy5jaGFydC5ob3ZlclBvaW50cywgdGhpcy5oaWRlVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCQluLmxhYmVsLmZhZGVPdXQoKSwgbi5pc0hpZGRlbiA9ICEwCgkJCQkJfSwgXyhlLCB0aGlzLm9wdGlvbnMuaGlkZURlbGF5LCA1MDApKSwgdCAmJiBtdCh0LCBmdW5jdGlvbihlKSB7CgkJCQkJCWUuc2V0U3RhdGUoKQoJCQkJCX0pLCB0aGlzLmNoYXJ0LmhvdmVyUG9pbnRzID0gbnVsbCkKCQkJCX0sCgkJCQlnZXRBbmNob3I6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQl2YXIgbiwgaSwgYSA9IHRoaXMuY2hhcnQsCgkJCQkJCW8gPSBhLmludmVydGVkLAoJCQkJCQlyID0gYS5wbG90VG9wLAoJCQkJCQlzID0gMCwKCQkJCQkJbCA9IDA7CgkJCQkJcmV0dXJuIGUgPSBnKGUpLCBuID0gZVswXS50b29sdGlwUG9zLCB0aGlzLmZvbGxvd1BvaW50ZXIgJiYgdCAmJiAodC5jaGFydFggPT09IFcgJiYgKHQgPSBhLnBvaW50ZXIubm9ybWFsaXplKHQpKSwgbiA9IFt0LmNoYXJ0WCAtIGEucGxvdExlZnQsIHQuY2hhcnRZIC0gcl0pLCBuIHx8IChtdChlLCBmdW5jdGlvbihlKSB7CgkJCQkJCWkgPSBlLnNlcmllcy55QXhpcywgcyArPSBlLnBsb3RYLCBsICs9IChlLnBsb3RMb3cgPyAoZS5wbG90TG93ICsgZS5wbG90SGlnaCkgLyAyIDogZS5wbG90WSkgKyAoIW8gJiYgaSA/IGkudG9wIC0gciA6IDApCgkJCQkJfSksIHMgLz0gZS5sZW5ndGgsIGwgLz0gZS5sZW5ndGgsIG4gPSBbbyA/IGEucGxvdFdpZHRoIC0gbCA6IHMsIHRoaXMuc2hhcmVkICYmICFvICYmIGUubGVuZ3RoID4gMSAmJiB0ID8gdC5jaGFydFkgLSByIDogbyA/IGEucGxvdEhlaWdodCAtIHMgOiBsXSksIF90KG4sIHhlKQoJCQkJfSwKCQkJCWdldFBvc2l0aW9uOiBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJdmFyIGksIGEgPSB0aGlzLmNoYXJ0LAoJCQkJCQlvID0gdGhpcy5kaXN0YW5jZSwKCQkJCQkJciA9IHt9LAoJCQkJCQlzID0gWyJ5IiwgYS5jaGFydEhlaWdodCwgdCwgbi5wbG90WSArIGEucGxvdFRvcF0sCgkJCQkJCWwgPSBbIngiLCBhLmNoYXJ0V2lkdGgsIGUsIG4ucGxvdFggKyBhLnBsb3RMZWZ0XSwKCQkJCQkJYyA9IG4udHRCZWxvdyB8fCBhLmludmVydGVkICYmICFuLm5lZ2F0aXZlIHx8ICFhLmludmVydGVkICYmIG4ubmVnYXRpdmUsCgkJCQkJCWQgPSBmdW5jdGlvbihlLCB0LCBuLCBpKSB7CgkJCQkJCQl2YXIgYSA9IGkgLSBvID4gbiwKCQkJCQkJCQlzID0gdCA+IGkgKyBvICsgbiwKCQkJCQkJCQlsID0gaSAtIG8gLSBuLAoJCQkJCQkJCWQgPSBpICsgbzsKCQkJCQkJCWlmIChjICYmIHMpIHJbZV0gPSBkOwoJCQkJCQkJZWxzZSBpZiAoIWMgJiYgYSkgcltlXSA9IGw7CgkJCQkJCQllbHNlIGlmIChhKSByW2VdID0gbDsKCQkJCQkJCWVsc2UgewoJCQkJCQkJCWlmICghcykgcmV0dXJuICExOwoJCQkJCQkJCXJbZV0gPSBkCgkJCQkJCQl9CgkJCQkJCX0sCgkJCQkJCXAgPSBmdW5jdGlvbihlLCB0LCBuLCBpKSB7CgkJCQkJCQlyZXR1cm4gbyA+IGkgfHwgaSA+IHQgLSBvID8gITEgOiB2b2lkKG4gLyAyID4gaSA/IHJbZV0gPSAxIDogaSA+IHQgLSBuIC8gMiA/IHJbZV0gPSB0IC0gbiAtIDIgOiByW2VdID0gaSAtIG4gLyAyKQoJCQkJCQl9LAoJCQkJCQloID0gZnVuY3Rpb24oZSkgewoJCQkJCQkJdmFyIHQgPSBzOwoJCQkJCQkJcyA9IGwsIGwgPSB0LCBpID0gZQoJCQkJCQl9LAoJCQkJCQl1ID0gZnVuY3Rpb24oKSB7CgkJCQkJCQlkLmFwcGx5KDAsIHMpICE9PSAhMSA/IHAuYXBwbHkoMCwgbCkgIT09ICExIHx8IGkgfHwgKGgoITApLCB1KCkpIDogaSA/IHIueCA9IHIueSA9IDAgOiAoaCghMCksIHUoKSkKCQkJCQkJfTsKCQkJCQlyZXR1cm4gKGEuaW52ZXJ0ZWQgfHwgdGhpcy5sZW4gPiAxKSAmJiBoKCksIHUoKSwgcgoJCQkJfSwKCQkJCWRlZmF1bHRGb3JtYXR0ZXI6IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCwgbiA9IHRoaXMucG9pbnRzIHx8IGcodGhpcyksCgkJCQkJCWkgPSBuWzBdLnNlcmllczsKCQkJCQlyZXR1cm4gdCA9IFtlLnRvb2x0aXBIZWFkZXJGb3JtYXR0ZXIoblswXSldLCBtdChuLCBmdW5jdGlvbihlKSB7CgkJCQkJCWkgPSBlLnNlcmllcywgdC5wdXNoKGkudG9vbHRpcEZvcm1hdHRlciAmJiBpLnRvb2x0aXBGb3JtYXR0ZXIoZSkgfHwgZS5wb2ludC50b29sdGlwRm9ybWF0dGVyKGkudG9vbHRpcE9wdGlvbnMucG9pbnRGb3JtYXQpKQoJCQkJCX0pLCB0LnB1c2goZS5vcHRpb25zLmZvb3RlckZvcm1hdCB8fCAiIiksIHQuam9pbigiIikKCQkJCX0sCgkJCQlyZWZyZXNoOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJdmFyIG4sIGksIGEsIG8sIHIsIHMsIGwgPSB0aGlzLAoJCQkJCQljID0gbC5jaGFydCwKCQkJCQkJZCA9IGwubGFiZWwsCgkJCQkJCXAgPSBsLm9wdGlvbnMsCgkJCQkJCWggPSB7fSwKCQkJCQkJdSA9IFtdLAoJCQkJCQltID0gcC5mb3JtYXR0ZXIgfHwgbC5kZWZhdWx0Rm9ybWF0dGVyLAoJCQkJCQlmID0gYy5ob3ZlclBvaW50cywKCQkJCQkJeCA9IGwuc2hhcmVkOwoJCQkJCWNsZWFyVGltZW91dCh0aGlzLmhpZGVUaW1lciksIGwuZm9sbG93UG9pbnRlciA9IGcoZSlbMF0uc2VyaWVzLnRvb2x0aXBPcHRpb25zLmZvbGxvd1BvaW50ZXIsIGEgPSBsLmdldEFuY2hvcihlLCB0KSwgbiA9IGFbMF0sIGkgPSBhWzFdLCAheCB8fCBlLnNlcmllcyAmJiBlLnNlcmllcy5ub1NoYXJlZFRvb2x0aXAgPyBoID0gZS5nZXRMYWJlbENvbmZpZygpIDogKGMuaG92ZXJQb2ludHMgPSBlLCBmICYmIG10KGYsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJZS5zZXRTdGF0ZSgpCgkJCQkJfSksIG10KGUsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJZS5zZXRTdGF0ZShhdCksIHUucHVzaChlLmdldExhYmVsQ29uZmlnKCkpCgkJCQkJfSksIGggPSB7CgkJCQkJCXg6IGVbMF0uY2F0ZWdvcnksCgkJCQkJCXk6IGVbMF0ueQoJCQkJCX0sIGgucG9pbnRzID0gdSwgdGhpcy5sZW4gPSB1Lmxlbmd0aCwgZSA9IGVbMF0pLCBvID0gbS5jYWxsKGgsIGwpLCBzID0gZS5zZXJpZXMsIHRoaXMuZGlzdGFuY2UgPSBfKHMudG9vbHRpcE9wdGlvbnMuZGlzdGFuY2UsIDE2KSwgbyA9PT0gITEgPyB0aGlzLmhpZGUoKSA6IChsLmlzSGlkZGVuICYmIChrdChkKSwgZC5hdHRyKCJvcGFjaXR5IiwgMSkuc2hvdygpKSwgZC5hdHRyKHsKCQkJCQkJdGV4dDogbwoJCQkJCX0pLCByID0gcC5ib3JkZXJDb2xvciB8fCBlLmNvbG9yIHx8IHMuY29sb3IgfHwgIiM2MDYwNjAiLCBkLmF0dHIoewoJCQkJCQlzdHJva2U6IHIKCQkJCQl9KSwgbC51cGRhdGVQb3NpdGlvbih7CgkJCQkJCXBsb3RYOiBuLAoJCQkJCQlwbG90WTogaSwKCQkJCQkJbmVnYXRpdmU6IGUubmVnYXRpdmUsCgkJCQkJCXR0QmVsb3c6IGUudHRCZWxvdwoJCQkJCX0pLCB0aGlzLmlzSGlkZGVuID0gITEpLCB2dChjLCAidG9vbHRpcFJlZnJlc2giLCB7CgkJCQkJCXRleHQ6IG8sCgkJCQkJCXg6IG4gKyBjLnBsb3RMZWZ0LAoJCQkJCQl5OiBpICsgYy5wbG90VG9wLAoJCQkJCQlib3JkZXJDb2xvcjogcgoJCQkJCX0pCgkJCQl9LAoJCQkJdXBkYXRlUG9zaXRpb246IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCA9IHRoaXMuY2hhcnQsCgkJCQkJCW4gPSB0aGlzLmxhYmVsLAoJCQkJCQlpID0gKHRoaXMub3B0aW9ucy5wb3NpdGlvbmVyIHx8IHRoaXMuZ2V0UG9zaXRpb24pLmNhbGwodGhpcywgbi53aWR0aCwgbi5oZWlnaHQsIGUpOwoJCQkJCXRoaXMubW92ZSh4ZShpLngpLCB4ZShpLnkpLCBlLnBsb3RYICsgdC5wbG90TGVmdCwgZS5wbG90WSArIHQucGxvdFRvcCkKCQkJCX0sCgkJCQl0b29sdGlwSGVhZGVyRm9ybWF0dGVyOiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQsIG4gPSBlLnNlcmllcywKCQkJCQkJaSA9IG4udG9vbHRpcE9wdGlvbnMsCgkJCQkJCWEgPSBpLmRhdGVUaW1lTGFiZWxGb3JtYXRzLAoJCQkJCQlvID0gaS54RGF0ZUZvcm1hdCwKCQkJCQkJciA9IG4ueEF4aXMsCgkJCQkJCXMgPSByICYmICJkYXRldGltZSIgPT09IHIub3B0aW9ucy50eXBlICYmIGQoZS5rZXkpLAoJCQkJCQlsID0gaS5oZWFkZXJGb3JtYXQsCgkJCQkJCWMgPSByICYmIHIuY2xvc2VzdFBvaW50UmFuZ2U7CgkJCQkJaWYgKHMgJiYgIW8pIHsKCQkJCQkJaWYgKGMpIHsKCQkJCQkJCWZvciAodCBpbiBWKQoJCQkJCQkJCWlmIChWW3RdID49IGMgfHwgVlt0XSA8PSBWLmRheSAmJiBlLmtleSAlIFZbdF0gPiAwKSB7CgkJCQkJCQkJCW8gPSBhW3RdOwoJCQkJCQkJCQlicmVhawoJCQkJCQkJCX0KCQkJCQkJfSBlbHNlIG8gPSBhLmRheTsKCQkJCQkJbyA9IG8gfHwgYS55ZWFyCgkJCQkJfQoJCQkJCXJldHVybiBzICYmIG8gJiYgKGwgPSBsLnJlcGxhY2UoIntwb2ludC5rZXl9IiwgIntwb2ludC5rZXk6IiArIG8gKyAifSIpKSwgQihsLCB7CgkJCQkJCXBvaW50OiBlLAoJCQkJCQlzZXJpZXM6IG4KCQkJCQl9KQoJCQkJfQoJCQl9OwoJCQl2YXIgRHQ7CgkJCVUgPSBmZS5kb2N1bWVudEVsZW1lbnQub250b3VjaHN0YXJ0ICE9PSBXOwoJCQl2YXIgTXQgPSBsdC5Qb2ludGVyID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJdGhpcy5pbml0KGUsIHQpCgkJCX07CgkJCWlmIChNdC5wcm90b3R5cGUgPSB7CgkJCQlpbml0OiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJdmFyIG4sIGksIGEgPSB0LmNoYXJ0LAoJCQkJCQlvID0gYS5ldmVudHMsCgkJCQkJCXIgPSBEZSA/ICIiIDogYS56b29tVHlwZSwKCQkJCQkJcyA9IGUuaW52ZXJ0ZWQ7CgkJCQkJdGhpcy5vcHRpb25zID0gdCwgdGhpcy5jaGFydCA9IGUsIHRoaXMuem9vbVggPSBuID0gL3gvLnRlc3QociksIHRoaXMuem9vbVkgPSBpID0gL3kvLnRlc3QociksIHRoaXMuem9vbUhvciA9IG4gJiYgIXMgfHwgaSAmJiBzLCB0aGlzLnpvb21WZXJ0ID0gaSAmJiAhcyB8fCBuICYmIHMsIHRoaXMuaGFzWm9vbSA9IG4gfHwgaSwgdGhpcy5ydW5DaGFydENsaWNrID0gbyAmJiAhIW8uY2xpY2ssIHRoaXMucGluY2hEb3duID0gW10sIHRoaXMubGFzdFZhbGlkVG91Y2ggPSB7fSwgbHQuVG9vbHRpcCAmJiB0LnRvb2x0aXAuZW5hYmxlZCAmJiAoZS50b29sdGlwID0gbmV3IEx0KGUsIHQudG9vbHRpcCksIHRoaXMuZm9sbG93VG91Y2hNb3ZlID0gdC50b29sdGlwLmZvbGxvd1RvdWNoTW92ZSksIHRoaXMuc2V0RE9NRXZlbnRzKCkKCQkJCX0sCgkJCQlub3JtYWxpemU6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQl2YXIgbiwgaSwgbzsKCQkJCQlyZXR1cm4gZSA9IGUgfHwgd2luZG93LmV2ZW50LCBlID0gYnQoZSksIGUudGFyZ2V0IHx8IChlLnRhcmdldCA9IGUuc3JjRWxlbWVudCksIG8gPSBlLnRvdWNoZXMgPyBlLnRvdWNoZXMubGVuZ3RoID8gZS50b3VjaGVzLml0ZW0oMCkgOiBlLmNoYW5nZWRUb3VjaGVzWzBdIDogZSwgdCB8fCAodGhpcy5jaGFydFBvc2l0aW9uID0gdCA9IGd0KHRoaXMuY2hhcnQuY29udGFpbmVyKSksIG8ucGFnZVggPT09IFcgPyAobiA9IGJlKGUueCwgZS5jbGllbnRYIC0gdC5sZWZ0KSwgaSA9IGUueSkgOiAobiA9IG8ucGFnZVggLSB0LmxlZnQsIGkgPSBvLnBhZ2VZIC0gdC50b3ApLCBhKGUsIHsKCQkJCQkJY2hhcnRYOiB4ZShuKSwKCQkJCQkJY2hhcnRZOiB4ZShpKQoJCQkJCX0pCgkJCQl9LAoJCQkJZ2V0Q29vcmRpbmF0ZXM6IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCA9IHsKCQkJCQkJeEF4aXM6IFtdLAoJCQkJCQl5QXhpczogW10KCQkJCQl9OwoJCQkJCXJldHVybiBtdCh0aGlzLmNoYXJ0LmF4ZXMsIGZ1bmN0aW9uKG4pIHsKCQkJCQkJdFtuLmlzWEF4aXMgPyAieEF4aXMiIDogInlBeGlzIl0ucHVzaCh7CgkJCQkJCQlheGlzOiBuLAoJCQkJCQkJdmFsdWU6IG4udG9WYWx1ZShlW24uaG9yaXogPyAiY2hhcnRYIiA6ICJjaGFydFkiXSkKCQkJCQkJfSkKCQkJCQl9KSwgdAoJCQkJfSwKCQkJCWdldEluZGV4OiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQgPSB0aGlzLmNoYXJ0OwoJCQkJCXJldHVybiB0LmludmVydGVkID8gdC5wbG90SGVpZ2h0ICsgdC5wbG90VG9wIC0gZS5jaGFydFkgOiBlLmNoYXJ0WCAtIHQucGxvdExlZnQKCQkJCX0sCgkJCQlydW5Qb2ludEFjdGlvbnM6IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCwgbiwgaSwgYSwgbywgciwgcyA9IHRoaXMsCgkJCQkJCWwgPSBzLmNoYXJ0LAoJCQkJCQljID0gbC5zZXJpZXMsCgkJCQkJCWQgPSBsLnRvb2x0aXAsCgkJCQkJCXAgPSBsLmhvdmVyUG9pbnQsCgkJCQkJCWggPSBsLmhvdmVyU2VyaWVzLAoJCQkJCQl1ID0gbC5jaGFydFdpZHRoLAoJCQkJCQltID0gcy5nZXRJbmRleChlKTsKCQkJCQlpZiAoZCAmJiBzLm9wdGlvbnMudG9vbHRpcC5zaGFyZWQgJiYgKCFoIHx8ICFoLm5vU2hhcmVkVG9vbHRpcCkpIHsKCQkJCQkJZm9yIChpID0gW10sIGEgPSBjLmxlbmd0aCwgbyA9IDA7IGEgPiBvOyBvKyspIGNbb10udmlzaWJsZSAmJiBjW29dLm9wdGlvbnMuZW5hYmxlTW91c2VUcmFja2luZyAhPT0gITEgJiYgIWNbb10ubm9TaGFyZWRUb29sdGlwICYmIGNbb10uc2luZ3VsYXJUb29sdGlwcyAhPT0gITAgJiYgY1tvXS50b29sdGlwUG9pbnRzLmxlbmd0aCAmJiAobiA9IGNbb10udG9vbHRpcFBvaW50c1ttXSwgbiAmJiBuLnNlcmllcyAmJiAobi5fZGlzdCA9IGtlKG0gLSBuLmNsaWVudFgpLCB1ID0geWUodSwgbi5fZGlzdCksIGkucHVzaChuKSkpOwoJCQkJCQlmb3IgKGEgPSBpLmxlbmd0aDsgYS0tOykgaVthXS5fZGlzdCA+IHUgJiYgaS5zcGxpY2UoYSwgMSk7CgkJCQkJCWkubGVuZ3RoICYmIGlbMF0uY2xpZW50WCAhPT0gcy5ob3ZlclggJiYgKGQucmVmcmVzaChpLCBlKSwgcy5ob3ZlclggPSBpWzBdLmNsaWVudFgpCgkJCQkJfQoJCQkJCXQgPSBoICYmIGgudG9vbHRpcE9wdGlvbnMuZm9sbG93UG9pbnRlciwgaCAmJiBoLnRyYWNrZXIgJiYgIXQgPyAobiA9IGgudG9vbHRpcFBvaW50c1ttXSwgbiAmJiBuICE9PSBwICYmIG4ub25Nb3VzZU92ZXIoZSkpIDogZCAmJiB0ICYmICFkLmlzSGlkZGVuICYmIChyID0gZC5nZXRBbmNob3IoW3t9XSwgZSksIGQudXBkYXRlUG9zaXRpb24oewoJCQkJCQlwbG90WDogclswXSwKCQkJCQkJcGxvdFk6IHJbMV0KCQkJCQl9KSksIGQgJiYgIXMuX29uRG9jdW1lbnRNb3VzZU1vdmUgJiYgKHMuX29uRG9jdW1lbnRNb3VzZU1vdmUgPSBmdW5jdGlvbihlKSB7CgkJCQkJCSRlW0R0XSAmJiAkZVtEdF0ucG9pbnRlci5vbkRvY3VtZW50TW91c2VNb3ZlKGUpCgkJCQkJfSwgeHQoZmUsICJtb3VzZW1vdmUiLCBzLl9vbkRvY3VtZW50TW91c2VNb3ZlKSksIG10KGwuYXhlcywgZnVuY3Rpb24odCkgewoJCQkJCQl0LmRyYXdDcm9zc2hhaXIoZSwgXyhuLCBwKSkKCQkJCQl9KQoJCQkJfSwKCQkJCXJlc2V0OiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJdmFyIG4gPSB0aGlzLAoJCQkJCQlpID0gbi5jaGFydCwKCQkJCQkJYSA9IGkuaG92ZXJTZXJpZXMsCgkJCQkJCW8gPSBpLmhvdmVyUG9pbnQsCgkJCQkJCXIgPSBpLnRvb2x0aXAsCgkJCQkJCXMgPSByICYmIHIuc2hhcmVkID8gaS5ob3ZlclBvaW50cyA6IG87CgkJCQkJZSA9IGUgJiYgciAmJiBzLCBlICYmIGcocylbMF0ucGxvdFggPT09IFcgJiYgKGUgPSAhMSksIGUgPyAoci5yZWZyZXNoKHMpLCBvICYmIG8uc2V0U3RhdGUoby5zdGF0ZSwgITApKSA6IChvICYmIG8ub25Nb3VzZU91dCgpLCBhICYmIGEub25Nb3VzZU91dCgpLCByICYmIHIuaGlkZSh0KSwgbi5fb25Eb2N1bWVudE1vdXNlTW92ZSAmJiAod3QoZmUsICJtb3VzZW1vdmUiLCBuLl9vbkRvY3VtZW50TW91c2VNb3ZlKSwgbi5fb25Eb2N1bWVudE1vdXNlTW92ZSA9IG51bGwpLCBtdChpLmF4ZXMsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJZS5oaWRlQ3Jvc3NoYWlyKCkKCQkJCQl9KSwgbi5ob3ZlclggPSBudWxsKQoJCQkJfSwKCQkJCXNjYWxlR3JvdXBzOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJdmFyIG4sIGkgPSB0aGlzLmNoYXJ0OwoJCQkJCW10KGkuc2VyaWVzLCBmdW5jdGlvbihhKSB7CgkJCQkJCW4gPSBlIHx8IGEuZ2V0UGxvdEJveCgpLCBhLnhBeGlzICYmIGEueEF4aXMuem9vbUVuYWJsZWQgJiYgKGEuZ3JvdXAuYXR0cihuKSwgYS5tYXJrZXJHcm91cCAmJiAoYS5tYXJrZXJHcm91cC5hdHRyKG4pLCBhLm1hcmtlckdyb3VwLmNsaXAodCA/IGkuY2xpcFJlY3QgOiBudWxsKSksIGEuZGF0YUxhYmVsc0dyb3VwICYmIGEuZGF0YUxhYmVsc0dyb3VwLmF0dHIobikpCgkJCQkJfSksIGkuY2xpcFJlY3QuYXR0cih0IHx8IGkuY2xpcEJveCkKCQkJCX0sCgkJCQlkcmFnU3RhcnQ6IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCA9IHRoaXMuY2hhcnQ7CgkJCQkJdC5tb3VzZUlzRG93biA9IGUudHlwZSwgdC5jYW5jZWxDbGljayA9ICExLCB0Lm1vdXNlRG93blggPSB0aGlzLm1vdXNlRG93blggPSBlLmNoYXJ0WCwgdC5tb3VzZURvd25ZID0gdGhpcy5tb3VzZURvd25ZID0gZS5jaGFydFkKCQkJCX0sCgkJCQlkcmFnOiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQsIG4sIGkgPSB0aGlzLmNoYXJ0LAoJCQkJCQlhID0gaS5vcHRpb25zLmNoYXJ0LAoJCQkJCQlvID0gZS5jaGFydFgsCgkJCQkJCXIgPSBlLmNoYXJ0WSwKCQkJCQkJcyA9IHRoaXMuem9vbUhvciwKCQkJCQkJbCA9IHRoaXMuem9vbVZlcnQsCgkJCQkJCWMgPSBpLnBsb3RMZWZ0LAoJCQkJCQlkID0gaS5wbG90VG9wLAoJCQkJCQlwID0gaS5wbG90V2lkdGgsCgkJCQkJCWggPSBpLnBsb3RIZWlnaHQsCgkJCQkJCXUgPSB0aGlzLm1vdXNlRG93blgsCgkJCQkJCW0gPSB0aGlzLm1vdXNlRG93blksCgkJCQkJCWYgPSBhLnBhbktleSAmJiBlW2EucGFuS2V5ICsgIktleSJdOwoJCQkJCWMgPiBvID8gbyA9IGMgOiBvID4gYyArIHAgJiYgKG8gPSBjICsgcCksIGQgPiByID8gciA9IGQgOiByID4gZCArIGggJiYgKHIgPSBkICsgaCksIHRoaXMuaGFzRHJhZ2dlZCA9IE1hdGguc3FydChNYXRoLnBvdyh1IC0gbywgMikgKyBNYXRoLnBvdyhtIC0gciwgMikpLCB0aGlzLmhhc0RyYWdnZWQgPiAxMCAmJiAodCA9IGkuaXNJbnNpZGVQbG90KHUgLSBjLCBtIC0gZCksIGkuaGFzQ2FydGVzaWFuU2VyaWVzICYmICh0aGlzLnpvb21YIHx8IHRoaXMuem9vbVkpICYmIHQgJiYgIWYgJiYgKHRoaXMuc2VsZWN0aW9uTWFya2VyIHx8ICh0aGlzLnNlbGVjdGlvbk1hcmtlciA9IGkucmVuZGVyZXIucmVjdChjLCBkLCBzID8gMSA6IHAsIGwgPyAxIDogaCwgMCkuYXR0cih7CgkJCQkJCWZpbGw6IGEuc2VsZWN0aW9uTWFya2VyRmlsbCB8fCAicmdiYSg2OSwxMTQsMTY3LDAuMjUpIiwKCQkJCQkJekluZGV4OiA3CgkJCQkJfSkuYWRkKCkpKSwgdGhpcy5zZWxlY3Rpb25NYXJrZXIgJiYgcyAmJiAobiA9IG8gLSB1LCB0aGlzLnNlbGVjdGlvbk1hcmtlci5hdHRyKHsKCQkJCQkJd2lkdGg6IGtlKG4pLAoJCQkJCQl4OiAobiA+IDAgPyAwIDogbikgKyB1CgkJCQkJfSkpLCB0aGlzLnNlbGVjdGlvbk1hcmtlciAmJiBsICYmIChuID0gciAtIG0sIHRoaXMuc2VsZWN0aW9uTWFya2VyLmF0dHIoewoJCQkJCQloZWlnaHQ6IGtlKG4pLAoJCQkJCQl5OiAobiA+IDAgPyAwIDogbikgKyBtCgkJCQkJfSkpLCB0ICYmICF0aGlzLnNlbGVjdGlvbk1hcmtlciAmJiBhLnBhbm5pbmcgJiYgaS5wYW4oZSwgYS5wYW5uaW5nKSkKCQkJCX0sCgkJCQlkcm9wOiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQgPSB0aGlzLmNoYXJ0LAoJCQkJCQluID0gdGhpcy5oYXNQaW5jaGVkOwoJCQkJCWlmICh0aGlzLnNlbGVjdGlvbk1hcmtlcikgewoJCQkJCQl2YXIgaSwgbyA9IHsKCQkJCQkJCQl4QXhpczogW10sCgkJCQkJCQkJeUF4aXM6IFtdLAoJCQkJCQkJCW9yaWdpbmFsRXZlbnQ6IGUub3JpZ2luYWxFdmVudCB8fCBlCgkJCQkJCQl9LAoJCQkJCQkJciA9IHRoaXMuc2VsZWN0aW9uTWFya2VyLAoJCQkJCQkJcyA9IHIuYXR0ciA/IHIuYXR0cigieCIpIDogci54LAoJCQkJCQkJbCA9IHIuYXR0ciA/IHIuYXR0cigieSIpIDogci55LAoJCQkJCQkJYyA9IHIuYXR0ciA/IHIuYXR0cigid2lkdGgiKSA6IHIud2lkdGgsCgkJCQkJCQlkID0gci5hdHRyID8gci5hdHRyKCJoZWlnaHQiKSA6IHIuaGVpZ2h0OwoJCQkJCQkodGhpcy5oYXNEcmFnZ2VkIHx8IG4pICYmIChtdCh0LmF4ZXMsIGZ1bmN0aW9uKHQpIHsKCQkJCQkJCWlmICh0Lnpvb21FbmFibGVkKSB7CgkJCQkJCQkJdmFyIG4gPSB0Lmhvcml6LAoJCQkJCQkJCQlhID0gInRvdWNoZW5kIiA9PT0gZS50eXBlID8gdC5taW5QaXhlbFBhZGRpbmcgOiAwLAoJCQkJCQkJCQlyID0gdC50b1ZhbHVlKChuID8gcyA6IGwpICsgYSksCgkJCQkJCQkJCXAgPSB0LnRvVmFsdWUoKG4gPyBzICsgYyA6IGwgKyBkKSAtIGEpOwoJCQkJCQkJCWlzTmFOKHIpIHx8IGlzTmFOKHApIHx8IChvW3QuY29sbF0ucHVzaCh7CgkJCQkJCQkJCWF4aXM6IHQsCgkJCQkJCQkJCW1pbjogeWUociwgcCksCgkJCQkJCQkJCW1heDogYmUociwgcCkKCQkJCQkJCQl9KSwgaSA9ICEwKQoJCQkJCQkJfQoJCQkJCQl9KSwgaSAmJiB2dCh0LCAic2VsZWN0aW9uIiwgbywgZnVuY3Rpb24oZSkgewoJCQkJCQkJdC56b29tKGEoZSwgbiA/IHsKCQkJCQkJCQlhbmltYXRpb246ICExCgkJCQkJCQl9IDogbnVsbCkpCgkJCQkJCX0pKSwgdGhpcy5zZWxlY3Rpb25NYXJrZXIgPSB0aGlzLnNlbGVjdGlvbk1hcmtlci5kZXN0cm95KCksIG4gJiYgdGhpcy5zY2FsZUdyb3VwcygpCgkJCQkJfQoJCQkJCXQgJiYgKHgodC5jb250YWluZXIsIHsKCQkJCQkJY3Vyc29yOiB0Ll9jdXJzb3IKCQkJCQl9KSwgdC5jYW5jZWxDbGljayA9IHRoaXMuaGFzRHJhZ2dlZCA+IDEwLCB0Lm1vdXNlSXNEb3duID0gdGhpcy5oYXNEcmFnZ2VkID0gdGhpcy5oYXNQaW5jaGVkID0gITEsIHRoaXMucGluY2hEb3duID0gW10pCgkJCQl9LAoJCQkJb25Db250YWluZXJNb3VzZURvd246IGZ1bmN0aW9uKGUpIHsKCQkJCQllID0gdGhpcy5ub3JtYWxpemUoZSksIGUucHJldmVudERlZmF1bHQgJiYgZS5wcmV2ZW50RGVmYXVsdCgpLCB0aGlzLmRyYWdTdGFydChlKQoJCQkJfSwKCQkJCW9uRG9jdW1lbnRNb3VzZVVwOiBmdW5jdGlvbihlKSB7CgkJCQkJJGVbRHRdICYmICRlW0R0XS5wb2ludGVyLmRyb3AoZSkKCQkJCX0sCgkJCQlvbkRvY3VtZW50TW91c2VNb3ZlOiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQgPSB0aGlzLmNoYXJ0LAoJCQkJCQluID0gdGhpcy5jaGFydFBvc2l0aW9uLAoJCQkJCQlpID0gdC5ob3ZlclNlcmllczsKCQkJCQllID0gdGhpcy5ub3JtYWxpemUoZSwgbiksIG4gJiYgaSAmJiAhdGhpcy5pbkNsYXNzKGUudGFyZ2V0LCAiaGlnaGNoYXJ0cy10cmFja2VyIikgJiYgIXQuaXNJbnNpZGVQbG90KGUuY2hhcnRYIC0gdC5wbG90TGVmdCwgZS5jaGFydFkgLSB0LnBsb3RUb3ApICYmIHRoaXMucmVzZXQoKQoJCQkJfSwKCQkJCW9uQ29udGFpbmVyTW91c2VMZWF2ZTogZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSAkZVtEdF07CgkJCQkJZSAmJiAoZS5wb2ludGVyLnJlc2V0KCksIGUucG9pbnRlci5jaGFydFBvc2l0aW9uID0gbnVsbCkKCQkJCX0sCgkJCQlvbkNvbnRhaW5lck1vdXNlTW92ZTogZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0ID0gdGhpcy5jaGFydDsKCQkJCQlEdCA9IHQuaW5kZXgsIGUgPSB0aGlzLm5vcm1hbGl6ZShlKSwgZS5yZXR1cm5WYWx1ZSA9ICExLCAibW91c2Vkb3duIiA9PT0gdC5tb3VzZUlzRG93biAmJiB0aGlzLmRyYWcoZSksICF0aGlzLmluQ2xhc3MoZS50YXJnZXQsICJoaWdoY2hhcnRzLXRyYWNrZXIiKSAmJiAhdC5pc0luc2lkZVBsb3QoZS5jaGFydFggLSB0LnBsb3RMZWZ0LCBlLmNoYXJ0WSAtIHQucGxvdFRvcCkgfHwgdC5vcGVuTWVudSB8fCB0aGlzLnJ1blBvaW50QWN0aW9ucyhlKQoJCQkJfSwKCQkJCWluQ2xhc3M6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQlmb3IgKHZhciBuOyBlOykgewoJCQkJCQlpZiAobiA9IGYoZSwgImNsYXNzIikpIHsKCQkJCQkJCWlmICgtMSAhPT0gbi5pbmRleE9mKHQpKSByZXR1cm4gITA7CgkJCQkJCQlpZiAoLTEgIT09IG4uaW5kZXhPZihaZSArICJjb250YWluZXIiKSkgcmV0dXJuICExCgkJCQkJCX0KCQkJCQkJZSA9IGUucGFyZW50Tm9kZQoJCQkJCX0KCQkJCX0sCgkJCQlvblRyYWNrZXJNb3VzZU91dDogZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0ID0gdGhpcy5jaGFydC5ob3ZlclNlcmllcywKCQkJCQkJbiA9IGUucmVsYXRlZFRhcmdldCB8fCBlLnRvRWxlbWVudCwKCQkJCQkJaSA9IG4gJiYgbi5wb2ludCAmJiBuLnBvaW50LnNlcmllczsKCQkJCQkhdCB8fCB0Lm9wdGlvbnMuc3RpY2t5VHJhY2tpbmcgfHwgdGhpcy5pbkNsYXNzKG4sIFplICsgInRvb2x0aXAiKSB8fCBpID09PSB0IHx8IHQub25Nb3VzZU91dCgpCgkJCQl9LAoJCQkJb25Db250YWluZXJDbGljazogZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0ID0gdGhpcy5jaGFydCwKCQkJCQkJbiA9IHQuaG92ZXJQb2ludCwKCQkJCQkJaSA9IHQucGxvdExlZnQsCgkJCQkJCW8gPSB0LnBsb3RUb3A7CgkJCQkJZSA9IHRoaXMubm9ybWFsaXplKGUpLCBlLmNhbmNlbEJ1YmJsZSA9ICEwLCB0LmNhbmNlbENsaWNrIHx8IChuICYmIHRoaXMuaW5DbGFzcyhlLnRhcmdldCwgWmUgKyAidHJhY2tlciIpID8gKHZ0KG4uc2VyaWVzLCAiY2xpY2siLCBhKGUsIHsKCQkJCQkJcG9pbnQ6IG4KCQkJCQl9KSksIHQuaG92ZXJQb2ludCAmJiBuLmZpcmVQb2ludEV2ZW50KCJjbGljayIsIGUpKSA6IChhKGUsIHRoaXMuZ2V0Q29vcmRpbmF0ZXMoZSkpLCB0LmlzSW5zaWRlUGxvdChlLmNoYXJ0WCAtIGksIGUuY2hhcnRZIC0gbykgJiYgdnQodCwgImNsaWNrIiwgZSkpKQoJCQkJfSwKCQkJCXNldERPTUV2ZW50czogZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSB0aGlzLAoJCQkJCQl0ID0gZS5jaGFydC5jb250YWluZXI7CgkJCQkJdC5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKHQpIHsKCQkJCQkJZS5vbkNvbnRhaW5lck1vdXNlRG93bih0KQoJCQkJCX0sIHQub25tb3VzZW1vdmUgPSBmdW5jdGlvbih0KSB7CgkJCQkJCWUub25Db250YWluZXJNb3VzZU1vdmUodCkKCQkJCQl9LCB0Lm9uY2xpY2sgPSBmdW5jdGlvbih0KSB7CgkJCQkJCWUub25Db250YWluZXJDbGljayh0KQoJCQkJCX0sIHh0KHQsICJtb3VzZWxlYXZlIiwgZS5vbkNvbnRhaW5lck1vdXNlTGVhdmUpLCAxID09PSBXZSAmJiB4dChmZSwgIm1vdXNldXAiLCBlLm9uRG9jdW1lbnRNb3VzZVVwKSwgVSAmJiAodC5vbnRvdWNoc3RhcnQgPSBmdW5jdGlvbih0KSB7CgkJCQkJCWUub25Db250YWluZXJUb3VjaFN0YXJ0KHQpCgkJCQkJfSwgdC5vbnRvdWNobW92ZSA9IGZ1bmN0aW9uKHQpIHsKCQkJCQkJZS5vbkNvbnRhaW5lclRvdWNoTW92ZSh0KQoJCQkJCX0sIDEgPT09IFdlICYmIHh0KGZlLCAidG91Y2hlbmQiLCBlLm9uRG9jdW1lbnRUb3VjaEVuZCkpCgkJCQl9LAoJCQkJZGVzdHJveTogZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGU7CgkJCQkJd3QodGhpcy5jaGFydC5jb250YWluZXIsICJtb3VzZWxlYXZlIiwgdGhpcy5vbkNvbnRhaW5lck1vdXNlTGVhdmUpLCBXZSB8fCAod3QoZmUsICJtb3VzZXVwIiwgdGhpcy5vbkRvY3VtZW50TW91c2VVcCksIHd0KGZlLCAidG91Y2hlbmQiLCB0aGlzLm9uRG9jdW1lbnRUb3VjaEVuZCkpLCBjbGVhckludGVydmFsKHRoaXMudG9vbHRpcFRpbWVvdXQpOwoJCQkJCWZvciAoZSBpbiB0aGlzKSB0aGlzW2VdID0gbnVsbAoJCQkJfQoJCQl9LCBhKGx0LlBvaW50ZXIucHJvdG90eXBlLCB7CgkJCQlwaW5jaFRyYW5zbGF0ZTogZnVuY3Rpb24oZSwgdCwgbiwgaSwgYSwgbykgewoJCQkJCSh0aGlzLnpvb21Ib3IgfHwgdGhpcy5waW5jaEhvcikgJiYgdGhpcy5waW5jaFRyYW5zbGF0ZURpcmVjdGlvbighMCwgZSwgdCwgbiwgaSwgYSwgbyksICh0aGlzLnpvb21WZXJ0IHx8IHRoaXMucGluY2hWZXJ0KSAmJiB0aGlzLnBpbmNoVHJhbnNsYXRlRGlyZWN0aW9uKCExLCBlLCB0LCBuLCBpLCBhLCBvKQoJCQkJfSwKCQkJCXBpbmNoVHJhbnNsYXRlRGlyZWN0aW9uOiBmdW5jdGlvbihlLCB0LCBuLCBpLCBhLCBvLCByLCBzKSB7CgkJCQkJdmFyIGwsIGMsIGQsIHAsIGgsIHUsIG0gPSB0aGlzLmNoYXJ0LAoJCQkJCQlmID0gZSA/ICJ4IiA6ICJ5IiwKCQkJCQkJZyA9IGUgPyAiWCIgOiAiWSIsCgkJCQkJCV8gPSAiY2hhcnQiICsgZywKCQkJCQkJeCA9IGUgPyAid2lkdGgiIDogImhlaWdodCIsCgkJCQkJCXcgPSBtWyJwbG90IiArIChlID8gIkxlZnQiIDogIlRvcCIpXSwKCQkJCQkJdiA9IHMgfHwgMSwKCQkJCQkJYiA9IG0uaW52ZXJ0ZWQsCgkJCQkJCXkgPSBtLmJvdW5kc1tlID8gImgiIDogInYiXSwKCQkJCQkJayA9IDEgPT09IHQubGVuZ3RoLAoJCQkJCQl6ID0gdFswXVtfXSwKCQkJCQkJQiA9IG5bMF1bX10sCgkJCQkJCWogPSAhayAmJiB0WzFdW19dLAoJCQkJCQlDID0gIWsgJiYgblsxXVtfXSwKCQkJCQkJUyA9IGZ1bmN0aW9uKCkgewoJCQkJCQkJIWsgJiYga2UoeiAtIGopID4gMjAgJiYgKHYgPSBzIHx8IGtlKEIgLSBDKSAvIGtlKHogLSBqKSksIGQgPSAodyAtIEIpIC8gdiArIHosIGwgPSBtWyJwbG90IiArIChlID8gIldpZHRoIiA6ICJIZWlnaHQiKV0gLyB2CgkJCQkJCX07CgkJCQkJUygpLCBjID0gZCwgYyA8IHkubWluID8gKGMgPSB5Lm1pbiwgcCA9ICEwKSA6IGMgKyBsID4geS5tYXggJiYgKGMgPSB5Lm1heCAtIGwsIHAgPSAhMCksIHAgPyAoQiAtPSAuOCAqIChCIC0gcltmXVswXSksIGsgfHwgKEMgLT0gLjggKiAoQyAtIHJbZl1bMV0pKSwgUygpKSA6IHJbZl0gPSBbQiwgQ10sIGIgfHwgKG9bZl0gPSBkIC0gdywgb1t4XSA9IGwpLCB1ID0gYiA/IGUgPyAic2NhbGVZIiA6ICJzY2FsZVgiIDogInNjYWxlIiArIGcsIGggPSBiID8gMSAvIHYgOiB2LCBhW3hdID0gbCwgYVtmXSA9IGMsIGlbdV0gPSB2LCBpWyJ0cmFuc2xhdGUiICsgZ10gPSBoICogdyArIChCIC0gaCAqIHopCgkJCQl9LAoJCQkJcGluY2g6IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCA9IHRoaXMsCgkJCQkJCW4gPSB0LmNoYXJ0LAoJCQkJCQlpID0gdC5waW5jaERvd24sCgkJCQkJCW8gPSB0LmZvbGxvd1RvdWNoTW92ZSwKCQkJCQkJciA9IGUudG91Y2hlcywKCQkJCQkJcyA9IHIubGVuZ3RoLAoJCQkJCQlsID0gdC5sYXN0VmFsaWRUb3VjaCwKCQkJCQkJYyA9IHQuaGFzWm9vbSwKCQkJCQkJZCA9IHQuc2VsZWN0aW9uTWFya2VyLAoJCQkJCQlwID0ge30sCgkJCQkJCWggPSAxID09PSBzICYmICh0LmluQ2xhc3MoZS50YXJnZXQsIFplICsgInRyYWNrZXIiKSAmJiBuLnJ1blRyYWNrZXJDbGljayB8fCB0LnJ1bkNoYXJ0Q2xpY2spLAoJCQkJCQl1ID0ge307CgkJCQkJIWMgJiYgIW8gfHwgaCB8fCBlLnByZXZlbnREZWZhdWx0KCksIF90KHIsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJcmV0dXJuIHQubm9ybWFsaXplKGUpCgkJCQkJfSksICJ0b3VjaHN0YXJ0IiA9PT0gZS50eXBlID8gKG10KHIsIGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQkJaVt0XSA9IHsKCQkJCQkJCWNoYXJ0WDogZS5jaGFydFgsCgkJCQkJCQljaGFydFk6IGUuY2hhcnRZCgkJCQkJCX0KCQkJCQl9KSwgbC54ID0gW2lbMF0uY2hhcnRYLCBpWzFdICYmIGlbMV0uY2hhcnRYXSwgbC55ID0gW2lbMF0uY2hhcnRZLCBpWzFdICYmIGlbMV0uY2hhcnRZXSwgbXQobi5heGVzLCBmdW5jdGlvbihlKSB7CgkJCQkJCWlmIChlLnpvb21FbmFibGVkKSB7CgkJCQkJCQl2YXIgdCA9IG4uYm91bmRzW2UuaG9yaXogPyAiaCIgOiAidiJdLAoJCQkJCQkJCWkgPSBlLm1pblBpeGVsUGFkZGluZywKCQkJCQkJCQlhID0gZS50b1BpeGVscyhfKGUub3B0aW9ucy5taW4sIGUuZGF0YU1pbikpLAoJCQkJCQkJCW8gPSBlLnRvUGl4ZWxzKF8oZS5vcHRpb25zLm1heCwgZS5kYXRhTWF4KSksCgkJCQkJCQkJciA9IHllKGEsIG8pLAoJCQkJCQkJCXMgPSBiZShhLCBvKTsKCQkJCQkJCXQubWluID0geWUoZS5wb3MsIHIgLSBpKSwgdC5tYXggPSBiZShlLnBvcyArIGUubGVuLCBzICsgaSkKCQkJCQkJfQoJCQkJCX0pLCB0LnJlcyA9ICEwKSA6IGkubGVuZ3RoICYmIChkIHx8ICh0LnNlbGVjdGlvbk1hcmtlciA9IGQgPSBhKHsKCQkJCQkJZGVzdHJveTogRmUKCQkJCQl9LCBuLnBsb3RCb3gpKSwgdC5waW5jaFRyYW5zbGF0ZShpLCByLCBwLCBkLCB1LCBsKSwgdC5oYXNQaW5jaGVkID0gYywgdC5zY2FsZUdyb3VwcyhwLCB1KSwgIWMgJiYgbyAmJiAxID09PSBzID8gdGhpcy5ydW5Qb2ludEFjdGlvbnModC5ub3JtYWxpemUoZSkpIDogdC5yZXMgJiYgKHQucmVzID0gITEsIHRoaXMucmVzZXQoITEsIDApKSkKCQkJCX0sCgkJCQlvbkNvbnRhaW5lclRvdWNoU3RhcnQ6IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCA9IHRoaXMuY2hhcnQ7CgkJCQkJRHQgPSB0LmluZGV4LCAxID09PSBlLnRvdWNoZXMubGVuZ3RoID8gKGUgPSB0aGlzLm5vcm1hbGl6ZShlKSwgdC5pc0luc2lkZVBsb3QoZS5jaGFydFggLSB0LnBsb3RMZWZ0LCBlLmNoYXJ0WSAtIHQucGxvdFRvcCkgPyAodGhpcy5ydW5Qb2ludEFjdGlvbnMoZSksIHRoaXMucGluY2goZSkpIDogdGhpcy5yZXNldCgpKSA6IDIgPT09IGUudG91Y2hlcy5sZW5ndGggJiYgdGhpcy5waW5jaChlKQoJCQkJfSwKCQkJCW9uQ29udGFpbmVyVG91Y2hNb3ZlOiBmdW5jdGlvbihlKSB7CgkJCQkJKDEgPT09IGUudG91Y2hlcy5sZW5ndGggfHwgMiA9PT0gZS50b3VjaGVzLmxlbmd0aCkgJiYgdGhpcy5waW5jaChlKQoJCQkJfSwKCQkJCW9uRG9jdW1lbnRUb3VjaEVuZDogZnVuY3Rpb24oZSkgewoJCQkJCSRlW0R0XSAmJiAkZVtEdF0ucG9pbnRlci5kcm9wKGUpCgkJCQl9CgkJCX0pLCBnZS5Qb2ludGVyRXZlbnQgfHwgZ2UuTVNQb2ludGVyRXZlbnQpIHsKCQkJCXZhciBSdCA9IHt9LAoJCQkJCUZ0ID0gISFnZS5Qb2ludGVyRXZlbnQsCgkJCQkJJHQgPSBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUsIHQgPSBbXTsKCQkJCQkJdC5pdGVtID0gZnVuY3Rpb24oZSkgewoJCQkJCQkJcmV0dXJuIHRoaXNbZV0KCQkJCQkJfTsKCQkJCQkJZm9yIChlIGluIFJ0KSBSdC5oYXNPd25Qcm9wZXJ0eShlKSAmJiB0LnB1c2goewoJCQkJCQkJcGFnZVg6IFJ0W2VdLnBhZ2VYLAoJCQkJCQkJcGFnZVk6IFJ0W2VdLnBhZ2VZLAoJCQkJCQkJdGFyZ2V0OiBSdFtlXS50YXJnZXQKCQkJCQkJfSk7CgkJCQkJCXJldHVybiB0CgkJCQkJfSwKCQkJCQlXdCA9IGZ1bmN0aW9uKGUsIHQsIG4sIGkpIHsKCQkJCQkJdmFyIGE7CgkJCQkJCWUgPSBlLm9yaWdpbmFsRXZlbnQgfHwgZSwgInRvdWNoIiAhPT0gZS5wb2ludGVyVHlwZSAmJiBlLnBvaW50ZXJUeXBlICE9PSBlLk1TUE9JTlRFUl9UWVBFX1RPVUNIIHx8ICEkZVtEdF0gfHwgKGkoZSksIGEgPSAkZVtEdF0ucG9pbnRlciwgYVt0XSh7CgkJCQkJCQl0eXBlOiBuLAoJCQkJCQkJdGFyZ2V0OiBlLmN1cnJlbnRUYXJnZXQsCgkJCQkJCQlwcmV2ZW50RGVmYXVsdDogRmUsCgkJCQkJCQl0b3VjaGVzOiAkdCgpCgkJCQkJCX0pKQoJCQkJCX07CgkJCQlhKE10LnByb3RvdHlwZSwgewoJCQkJCW9uQ29udGFpbmVyUG9pbnRlckRvd246IGZ1bmN0aW9uKGUpIHsKCQkJCQkJV3QoZSwgIm9uQ29udGFpbmVyVG91Y2hTdGFydCIsICJ0b3VjaHN0YXJ0IiwgZnVuY3Rpb24oZSkgewoJCQkJCQkJUnRbZS5wb2ludGVySWRdID0gewoJCQkJCQkJCXBhZ2VYOiBlLnBhZ2VYLAoJCQkJCQkJCXBhZ2VZOiBlLnBhZ2VZLAoJCQkJCQkJCXRhcmdldDogZS5jdXJyZW50VGFyZ2V0CgkJCQkJCQl9CgkJCQkJCX0pCgkJCQkJfSwKCQkJCQlvbkNvbnRhaW5lclBvaW50ZXJNb3ZlOiBmdW5jdGlvbihlKSB7CgkJCQkJCVd0KGUsICJvbkNvbnRhaW5lclRvdWNoTW92ZSIsICJ0b3VjaG1vdmUiLCBmdW5jdGlvbihlKSB7CgkJCQkJCQlSdFtlLnBvaW50ZXJJZF0gPSB7CgkJCQkJCQkJcGFnZVg6IGUucGFnZVgsCgkJCQkJCQkJcGFnZVk6IGUucGFnZVkKCQkJCQkJCX0sIFJ0W2UucG9pbnRlcklkXS50YXJnZXQgfHwgKFJ0W2UucG9pbnRlcklkXS50YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQpCgkJCQkJCX0pCgkJCQkJfSwKCQkJCQlvbkRvY3VtZW50UG9pbnRlclVwOiBmdW5jdGlvbihlKSB7CgkJCQkJCVd0KGUsICJvbkNvbnRhaW5lclRvdWNoRW5kIiwgInRvdWNoZW5kIiwgZnVuY3Rpb24oZSkgewoJCQkJCQkJZGVsZXRlIFJ0W2UucG9pbnRlcklkXQoJCQkJCQl9KQoJCQkJCX0sCgkJCQkJYmF0Y2hNU0V2ZW50czogZnVuY3Rpb24oZSkgewoJCQkJCQllKHRoaXMuY2hhcnQuY29udGFpbmVyLCBGdCA/ICJwb2ludGVyZG93biIgOiAiTVNQb2ludGVyRG93biIsIHRoaXMub25Db250YWluZXJQb2ludGVyRG93biksIGUodGhpcy5jaGFydC5jb250YWluZXIsIEZ0ID8gInBvaW50ZXJtb3ZlIiA6ICJNU1BvaW50ZXJNb3ZlIiwgdGhpcy5vbkNvbnRhaW5lclBvaW50ZXJNb3ZlKSwgZShmZSwgRnQgPyAicG9pbnRlcnVwIiA6ICJNU1BvaW50ZXJVcCIsIHRoaXMub25Eb2N1bWVudFBvaW50ZXJVcCkKCQkJCQl9CgkJCQl9KSwgayhNdC5wcm90b3R5cGUsICJpbml0IiwgZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCWUuY2FsbCh0aGlzLCB0LCBuKSwgKHRoaXMuaGFzWm9vbSB8fCB0aGlzLmZvbGxvd1RvdWNoTW92ZSkgJiYgeCh0LmNvbnRhaW5lciwgewoJCQkJCQkiLW1zLXRvdWNoLWFjdGlvbiI6IFFlLAoJCQkJCQkidG91Y2gtYWN0aW9uIjogUWUKCQkJCQl9KQoJCQkJfSksIGsoTXQucHJvdG90eXBlLCAic2V0RE9NRXZlbnRzIiwgZnVuY3Rpb24oZSkgewoJCQkJCWUuYXBwbHkodGhpcyksICh0aGlzLmhhc1pvb20gfHwgdGhpcy5mb2xsb3dUb3VjaE1vdmUpICYmIHRoaXMuYmF0Y2hNU0V2ZW50cyh4dCkKCQkJCX0pLCBrKE10LnByb3RvdHlwZSwgImRlc3Ryb3kiLCBmdW5jdGlvbihlKSB7CgkJCQkJdGhpcy5iYXRjaE1TRXZlbnRzKHd0KSwgZS5jYWxsKHRoaXMpCgkJCQl9KQoJCQl9CgkJCXZhciBIdCA9IGx0LkxlZ2VuZCA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCXRoaXMuaW5pdChlLCB0KQoJCQl9OwoJCQlIdC5wcm90b3R5cGUgPSB7CgkJCQlpbml0OiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJdmFyIG4gPSB0aGlzLAoJCQkJCQlpID0gdC5pdGVtU3R5bGUsCgkJCQkJCWEgPSBfKHQucGFkZGluZywgOCksCgkJCQkJCXIgPSB0Lml0ZW1NYXJnaW5Ub3AgfHwgMDsKCQkJCQl0aGlzLm9wdGlvbnMgPSB0LCB0LmVuYWJsZWQgJiYgKG4uaXRlbVN0eWxlID0gaSwgbi5pdGVtSGlkZGVuU3R5bGUgPSBvKGksIHQuaXRlbUhpZGRlblN0eWxlKSwgbi5pdGVtTWFyZ2luVG9wID0gciwgbi5wYWRkaW5nID0gYSwgbi5pbml0aWFsSXRlbVggPSBhLCBuLmluaXRpYWxJdGVtWSA9IGEgLSA1LCBuLm1heEl0ZW1XaWR0aCA9IDAsIG4uY2hhcnQgPSBlLCBuLml0ZW1IZWlnaHQgPSAwLCBuLmxhc3RMaW5lSGVpZ2h0ID0gMCwgbi5zeW1ib2xXaWR0aCA9IF8odC5zeW1ib2xXaWR0aCwgMTYpLCBuLnBhZ2VzID0gW10sIG4ucmVuZGVyKCksIHh0KG4uY2hhcnQsICJlbmRSZXNpemUiLCBmdW5jdGlvbigpIHsKCQkJCQkJbi5wb3NpdGlvbkNoZWNrYm94ZXMoKQoJCQkJCX0pKQoJCQkJfSwKCQkJCWNvbG9yaXplSXRlbTogZnVuY3Rpb24oZSwgdCkgewoJCQkJCXZhciBuLCBpLCBhID0gdGhpcywKCQkJCQkJbyA9IGEub3B0aW9ucywKCQkJCQkJciA9IGUubGVnZW5kSXRlbSwKCQkJCQkJcyA9IGUubGVnZW5kTGluZSwKCQkJCQkJbCA9IGUubGVnZW5kU3ltYm9sLAoJCQkJCQljID0gYS5pdGVtSGlkZGVuU3R5bGUuY29sb3IsCgkJCQkJCWQgPSB0ID8gby5pdGVtU3R5bGUuY29sb3IgOiBjLAoJCQkJCQlwID0gdCA/IGUubGVnZW5kQ29sb3IgfHwgZS5jb2xvciB8fCAiI0NDQyIgOiBjLAoJCQkJCQloID0gZS5vcHRpb25zICYmIGUub3B0aW9ucy5tYXJrZXIsCgkJCQkJCXUgPSB7CgkJCQkJCQlmaWxsOiBwCgkJCQkJCX07CgkJCQkJaWYgKHIgJiYgci5jc3MoewoJCQkJCQlmaWxsOiBkLAoJCQkJCQljb2xvcjogZAoJCQkJCX0pLCBzICYmIHMuYXR0cih7CgkJCQkJCXN0cm9rZTogcAoJCQkJCX0pLCBsKSB7CgkJCQkJCWlmIChoICYmIGwuaXNNYXJrZXIpIHsKCQkJCQkJCXUuc3Ryb2tlID0gcCwgaCA9IGUuY29udmVydEF0dHJpYnMoaCk7CgkJCQkJCQlmb3IgKG4gaW4gaCkgaSA9IGhbbl0sIGkgIT09IFcgJiYgKHVbbl0gPSBpKQoJCQkJCQl9CgkJCQkJCWwuYXR0cih1KQoJCQkJCX0KCQkJCX0sCgkJCQlwb3NpdGlvbkl0ZW06IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCA9IHRoaXMsCgkJCQkJCW4gPSB0Lm9wdGlvbnMsCgkJCQkJCWkgPSBuLnN5bWJvbFBhZGRpbmcsCgkJCQkJCWEgPSAhbi5ydGwsCgkJCQkJCW8gPSBlLl9sZWdlbmRJdGVtUG9zLAoJCQkJCQlyID0gb1swXSwKCQkJCQkJcyA9IG9bMV0sCgkJCQkJCWwgPSBlLmNoZWNrYm94OwoJCQkJCWUubGVnZW5kR3JvdXAgJiYgZS5sZWdlbmRHcm91cC50cmFuc2xhdGUoYSA/IHIgOiB0LmxlZ2VuZFdpZHRoIC0gciAtIDIgKiBpIC0gNCwgcyksIGwgJiYgKGwueCA9IHIsIGwueSA9IHMpCgkJCQl9LAoJCQkJZGVzdHJveUl0ZW06IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCA9IGUuY2hlY2tib3g7CgkJCQkJbXQoWyJsZWdlbmRJdGVtIiwgImxlZ2VuZExpbmUiLCAibGVnZW5kU3ltYm9sIiwgImxlZ2VuZEdyb3VwIl0sIGZ1bmN0aW9uKHQpIHsKCQkJCQkJZVt0XSAmJiAoZVt0XSA9IGVbdF0uZGVzdHJveSgpKQoJCQkJCX0pLCB0ICYmIEkoZS5jaGVja2JveCkKCQkJCX0sCgkJCQlkZXN0cm95OiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IHRoaXMsCgkJCQkJCXQgPSBlLmdyb3VwLAoJCQkJCQluID0gZS5ib3g7CgkJCQkJbiAmJiAoZS5ib3ggPSBuLmRlc3Ryb3koKSksIHQgJiYgKGUuZ3JvdXAgPSB0LmRlc3Ryb3koKSkKCQkJCX0sCgkJCQlwb3NpdGlvbkNoZWNrYm94ZXM6IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCwgbiA9IHRoaXMuZ3JvdXAuYWxpZ25BdHRyLAoJCQkJCQlpID0gdGhpcy5jbGlwSGVpZ2h0IHx8IHRoaXMubGVnZW5kSGVpZ2h0OwoJCQkJCW4gJiYgKHQgPSBuLnRyYW5zbGF0ZVksIG10KHRoaXMuYWxsSXRlbXMsIGZ1bmN0aW9uKGEpIHsKCQkJCQkJdmFyIG8sIHIgPSBhLmNoZWNrYm94OwoJCQkJCQlyICYmIChvID0gdCArIHIueSArIChlIHx8IDApICsgMywgeChyLCB7CgkJCQkJCQlsZWZ0OiBuLnRyYW5zbGF0ZVggKyBhLmNoZWNrYm94T2Zmc2V0ICsgci54IC0gMjAgKyBLZSwKCQkJCQkJCXRvcDogbyArIEtlLAoJCQkJCQkJZGlzcGxheTogbyA+IHQgLSA2ICYmIHQgKyBpIC0gNiA+IG8gPyAiIiA6IFFlCgkJCQkJCX0pKQoJCQkJCX0pKQoJCQkJfSwKCQkJCXJlbmRlclRpdGxlOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSwgdCA9IHRoaXMub3B0aW9ucywKCQkJCQkJbiA9IHRoaXMucGFkZGluZywKCQkJCQkJaSA9IHQudGl0bGUsCgkJCQkJCWEgPSAwOwoJCQkJCWkudGV4dCAmJiAodGhpcy50aXRsZSB8fCAodGhpcy50aXRsZSA9IHRoaXMuY2hhcnQucmVuZGVyZXIubGFiZWwoaS50ZXh0LCBuIC0gMywgbiAtIDQsIG51bGwsIG51bGwsIG51bGwsIG51bGwsIG51bGwsICJsZWdlbmQtdGl0bGUiKS5hdHRyKHsKCQkJCQkJekluZGV4OiAxCgkJCQkJfSkuY3NzKGkuc3R5bGUpLmFkZCh0aGlzLmdyb3VwKSksIGUgPSB0aGlzLnRpdGxlLmdldEJCb3goKSwgYSA9IGUuaGVpZ2h0LCB0aGlzLm9mZnNldFdpZHRoID0gZS53aWR0aCwgdGhpcy5jb250ZW50R3JvdXAuYXR0cih7CgkJCQkJCXRyYW5zbGF0ZVk6IGEKCQkJCQl9KSksIHRoaXMudGl0bGVIZWlnaHQgPSBhCgkJCQl9LAoJCQkJcmVuZGVySXRlbTogZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0LCBuLCBpLCBhID0gdGhpcywKCQkJCQkJciA9IGEuY2hhcnQsCgkJCQkJCXMgPSByLnJlbmRlcmVyLAoJCQkJCQlsID0gYS5vcHRpb25zLAoJCQkJCQljID0gImhvcml6b250YWwiID09PSBsLmxheW91dCwKCQkJCQkJZCA9IGEuc3ltYm9sV2lkdGgsCgkJCQkJCXAgPSBsLnN5bWJvbFBhZGRpbmcsCgkJCQkJCWggPSBhLml0ZW1TdHlsZSwKCQkJCQkJdSA9IGEuaXRlbUhpZGRlblN0eWxlLAoJCQkJCQltID0gYS5wYWRkaW5nLAoJCQkJCQlmID0gYyA/IF8obC5pdGVtRGlzdGFuY2UsIDIwKSA6IDAsCgkJCQkJCWcgPSAhbC5ydGwsCgkJCQkJCXggPSBsLndpZHRoLAoJCQkJCQl3ID0gbC5pdGVtTWFyZ2luQm90dG9tIHx8IDAsCgkJCQkJCXYgPSBhLml0ZW1NYXJnaW5Ub3AsCgkJCQkJCWIgPSBhLmluaXRpYWxJdGVtWCwKCQkJCQkJeSA9IGUubGVnZW5kSXRlbSwKCQkJCQkJayA9IGUuc2VyaWVzICYmIGUuc2VyaWVzLmRyYXdMZWdlbmRTeW1ib2wgPyBlLnNlcmllcyA6IGUsCgkJCQkJCXogPSBrLm9wdGlvbnMsCgkJCQkJCWogPSBhLmNyZWF0ZUNoZWNrYm94Rm9ySXRlbSAmJiB6ICYmIHouc2hvd0NoZWNrYm94LAoJCQkJCQlDID0gbC51c2VIVE1MOwoJCQkJCXkgfHwgKGUubGVnZW5kR3JvdXAgPSBzLmcoImxlZ2VuZC1pdGVtIikuYXR0cih7CgkJCQkJCQl6SW5kZXg6IDEKCQkJCQkJfSkuYWRkKGEuc2Nyb2xsR3JvdXApLCBlLmxlZ2VuZEl0ZW0gPSB5ID0gcy50ZXh0KGwubGFiZWxGb3JtYXQgPyBCKGwubGFiZWxGb3JtYXQsIGUpIDogbC5sYWJlbEZvcm1hdHRlci5jYWxsKGUpLCBnID8gZCArIHAgOiAtcCwgYS5iYXNlbGluZSB8fCAwLCBDKS5jc3MobyhlLnZpc2libGUgPyBoIDogdSkpLmF0dHIoewoJCQkJCQkJYWxpZ246IGcgPyAibGVmdCIgOiAicmlnaHQiLAoJCQkJCQkJekluZGV4OiAyCgkJCQkJCX0pLmFkZChlLmxlZ2VuZEdyb3VwKSwgYS5iYXNlbGluZSB8fCAoYS5iYXNlbGluZSA9IHMuZm9udE1ldHJpY3MoaC5mb250U2l6ZSwgeSkuZiArIDMgKyB2LCB5LmF0dHIoInkiLCBhLmJhc2VsaW5lKSksIGsuZHJhd0xlZ2VuZFN5bWJvbChhLCBlKSwgYS5zZXRJdGVtRXZlbnRzICYmIGEuc2V0SXRlbUV2ZW50cyhlLCB5LCBDLCBoLCB1KSwgYS5jb2xvcml6ZUl0ZW0oZSwgZS52aXNpYmxlKSwgaiAmJiBhLmNyZWF0ZUNoZWNrYm94Rm9ySXRlbShlKSksIG4gPSB5LmdldEJCb3goKSwgaSA9IGUuY2hlY2tib3hPZmZzZXQgPSBsLml0ZW1XaWR0aCB8fCBlLmxlZ2VuZEl0ZW1XaWR0aCB8fCBkICsgcCArIG4ud2lkdGggKyBmICsgKGogPyAyMCA6IDApLCBhLml0ZW1IZWlnaHQgPSB0ID0geGUoZS5sZWdlbmRJdGVtSGVpZ2h0IHx8IG4uaGVpZ2h0KSwgYyAmJiBhLml0ZW1YIC0gYiArIGkgPiAoeCB8fCByLmNoYXJ0V2lkdGggLSAyICogbSAtIGIgLSBsLngpICYmIChhLml0ZW1YID0gYiwgYS5pdGVtWSArPSB2ICsgYS5sYXN0TGluZUhlaWdodCArIHcsIGEubGFzdExpbmVIZWlnaHQgPSAwKSwgYS5tYXhJdGVtV2lkdGggPSBiZShhLm1heEl0ZW1XaWR0aCwgaSksIGEubGFzdEl0ZW1ZID0gdiArIGEuaXRlbVkgKyB3LAoJCQkJCQlhLmxhc3RMaW5lSGVpZ2h0ID0gYmUodCwgYS5sYXN0TGluZUhlaWdodCksIGUuX2xlZ2VuZEl0ZW1Qb3MgPSBbYS5pdGVtWCwgYS5pdGVtWV0sIGMgPyBhLml0ZW1YICs9IGkgOiAoYS5pdGVtWSArPSB2ICsgdCArIHcsIGEubGFzdExpbmVIZWlnaHQgPSB0KSwgYS5vZmZzZXRXaWR0aCA9IHggfHwgYmUoKGMgPyBhLml0ZW1YIC0gYiAtIGYgOiBpKSArIG0sIGEub2Zmc2V0V2lkdGgpCgkJCQl9LAoJCQkJZ2V0QWxsSXRlbXM6IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gW107CgkJCQkJcmV0dXJuIG10KHRoaXMuY2hhcnQuc2VyaWVzLCBmdW5jdGlvbih0KSB7CgkJCQkJCXZhciBuID0gdC5vcHRpb25zOwoJCQkJCQlfKG4uc2hvd0luTGVnZW5kLCBtKG4ubGlua2VkVG8pID8gITEgOiBXLCAhMCkgJiYgKGUgPSBlLmNvbmNhdCh0LmxlZ2VuZEl0ZW1zIHx8ICgicG9pbnQiID09PSBuLmxlZ2VuZFR5cGUgPyB0LmRhdGEgOiB0KSkpCgkJCQkJfSksIGUKCQkJCX0sCgkJCQlyZW5kZXI6IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlLCB0LCBuLCBpLCBvID0gdGhpcywKCQkJCQkJciA9IG8uY2hhcnQsCgkJCQkJCXMgPSByLnJlbmRlcmVyLAoJCQkJCQlsID0gby5ncm91cCwKCQkJCQkJYyA9IG8uYm94LAoJCQkJCQlkID0gby5vcHRpb25zLAoJCQkJCQlwID0gby5wYWRkaW5nLAoJCQkJCQloID0gZC5ib3JkZXJXaWR0aCwKCQkJCQkJdSA9IGQuYmFja2dyb3VuZENvbG9yOwoJCQkJCW8uaXRlbVggPSBvLmluaXRpYWxJdGVtWCwgby5pdGVtWSA9IG8uaW5pdGlhbEl0ZW1ZLCBvLm9mZnNldFdpZHRoID0gMCwgby5sYXN0SXRlbVkgPSAwLCBsIHx8IChvLmdyb3VwID0gbCA9IHMuZygibGVnZW5kIikuYXR0cih7CgkJCQkJCXpJbmRleDogNwoJCQkJCX0pLmFkZCgpLCBvLmNvbnRlbnRHcm91cCA9IHMuZygpLmF0dHIoewoJCQkJCQl6SW5kZXg6IDEKCQkJCQl9KS5hZGQobCksIG8uc2Nyb2xsR3JvdXAgPSBzLmcoKS5hZGQoby5jb250ZW50R3JvdXApKSwgby5yZW5kZXJUaXRsZSgpLCBlID0gby5nZXRBbGxJdGVtcygpLCBTKGUsIGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQkJcmV0dXJuIChlLm9wdGlvbnMgJiYgZS5vcHRpb25zLmxlZ2VuZEluZGV4IHx8IDApIC0gKHQub3B0aW9ucyAmJiB0Lm9wdGlvbnMubGVnZW5kSW5kZXggfHwgMCkKCQkJCQl9KSwgZC5yZXZlcnNlZCAmJiBlLnJldmVyc2UoKSwgby5hbGxJdGVtcyA9IGUsIG8uZGlzcGxheSA9IHQgPSAhIWUubGVuZ3RoLCBtdChlLCBmdW5jdGlvbihlKSB7CgkJCQkJCW8ucmVuZGVySXRlbShlKQoJCQkJCX0pLCBuID0gZC53aWR0aCB8fCBvLm9mZnNldFdpZHRoLCBpID0gby5sYXN0SXRlbVkgKyBvLmxhc3RMaW5lSGVpZ2h0ICsgby50aXRsZUhlaWdodCwgaSA9IG8uaGFuZGxlT3ZlcmZsb3coaSksIChoIHx8IHUpICYmIChuICs9IHAsIGkgKz0gcCwgYyA/IG4gPiAwICYmIGkgPiAwICYmIChjW2MuaXNOZXcgPyAiYXR0ciIgOiAiYW5pbWF0ZSJdKGMuY3Jpc3AoewoJCQkJCQl3aWR0aDogbiwKCQkJCQkJaGVpZ2h0OiBpCgkJCQkJfSkpLCBjLmlzTmV3ID0gITEpIDogKG8uYm94ID0gYyA9IHMucmVjdCgwLCAwLCBuLCBpLCBkLmJvcmRlclJhZGl1cywgaCB8fCAwKS5hdHRyKHsKCQkJCQkJc3Ryb2tlOiBkLmJvcmRlckNvbG9yLAoJCQkJCQkic3Ryb2tlLXdpZHRoIjogaCB8fCAwLAoJCQkJCQlmaWxsOiB1IHx8IFFlCgkJCQkJfSkuYWRkKGwpLnNoYWRvdyhkLnNoYWRvdyksIGMuaXNOZXcgPSAhMCksIGNbdCA/ICJzaG93IiA6ICJoaWRlIl0oKSksIG8ubGVnZW5kV2lkdGggPSBuLCBvLmxlZ2VuZEhlaWdodCA9IGksIG10KGUsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJby5wb3NpdGlvbkl0ZW0oZSkKCQkJCQl9KSwgdCAmJiBsLmFsaWduKGEoewoJCQkJCQl3aWR0aDogbiwKCQkJCQkJaGVpZ2h0OiBpCgkJCQkJfSwgZCksICEwLCAic3BhY2luZ0JveCIpLCByLmlzUmVzaXppbmcgfHwgdGhpcy5wb3NpdGlvbkNoZWNrYm94ZXMoKQoJCQkJfSwKCQkJCWhhbmRsZU92ZXJmbG93OiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQsIG4sIGkgPSB0aGlzLAoJCQkJCQlhID0gdGhpcy5jaGFydCwKCQkJCQkJbyA9IGEucmVuZGVyZXIsCgkJCQkJCXIgPSB0aGlzLm9wdGlvbnMsCgkJCQkJCXMgPSByLnksCgkJCQkJCWwgPSAidG9wIiA9PT0gci52ZXJ0aWNhbEFsaWduLAoJCQkJCQljID0gYS5zcGFjaW5nQm94LmhlaWdodCArIChsID8gLXMgOiBzKSAtIHRoaXMucGFkZGluZywKCQkJCQkJZCA9IHIubWF4SGVpZ2h0LAoJCQkJCQlwID0gdGhpcy5jbGlwUmVjdCwKCQkJCQkJaCA9IHIubmF2aWdhdGlvbiwKCQkJCQkJdSA9IF8oaC5hbmltYXRpb24sICEwKSwKCQkJCQkJbSA9IGguYXJyb3dTaXplIHx8IDEyLAoJCQkJCQlmID0gdGhpcy5uYXYsCgkJCQkJCWcgPSB0aGlzLnBhZ2VzLAoJCQkJCQl4ID0gdGhpcy5hbGxJdGVtczsKCQkJCQlyZXR1cm4gImhvcml6b250YWwiID09PSByLmxheW91dCAmJiAoYyAvPSAyKSwgZCAmJiAoYyA9IHllKGMsIGQpKSwgZy5sZW5ndGggPSAwLCBlID4gYyAmJiAhci51c2VIVE1MID8gKHRoaXMuY2xpcEhlaWdodCA9IHQgPSBiZShjIC0gMjAgLSB0aGlzLnRpdGxlSGVpZ2h0IC0gdGhpcy5wYWRkaW5nLCAwKSwgdGhpcy5jdXJyZW50UGFnZSA9IF8odGhpcy5jdXJyZW50UGFnZSwgMSksIHRoaXMuZnVsbEhlaWdodCA9IGUsIG10KHgsIGZ1bmN0aW9uKGUsIGkpIHsKCQkJCQkJdmFyIGEgPSBlLl9sZWdlbmRJdGVtUG9zWzFdLAoJCQkJCQkJbyA9IHhlKGUubGVnZW5kSXRlbS5nZXRCQm94KCkuaGVpZ2h0KSwKCQkJCQkJCXIgPSBnLmxlbmd0aDsKCQkJCQkJKCFyIHx8IGEgLSBnW3IgLSAxXSA+IHQgJiYgKG4gfHwgYSkgIT09IGdbciAtIDFdKSAmJiAoZy5wdXNoKG4gfHwgYSksIHIrKyksIGkgPT09IHgubGVuZ3RoIC0gMSAmJiBhICsgbyAtIGdbciAtIDFdID4gdCAmJiBnLnB1c2goYSksIGEgIT09IG4gJiYgKG4gPSBhKQoJCQkJCX0pLCBwIHx8IChwID0gaS5jbGlwUmVjdCA9IG8uY2xpcFJlY3QoMCwgdGhpcy5wYWRkaW5nLCA5OTk5LCAwKSwgaS5jb250ZW50R3JvdXAuY2xpcChwKSksIHAuYXR0cih7CgkJCQkJCWhlaWdodDogdAoJCQkJCX0pLCBmIHx8ICh0aGlzLm5hdiA9IGYgPSBvLmcoKS5hdHRyKHsKCQkJCQkJekluZGV4OiAxCgkJCQkJfSkuYWRkKHRoaXMuZ3JvdXApLCB0aGlzLnVwID0gby5zeW1ib2woInRyaWFuZ2xlIiwgMCwgMCwgbSwgbSkub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCWkuc2Nyb2xsKC0xLCB1KQoJCQkJCX0pLmFkZChmKSwgdGhpcy5wYWdlciA9IG8udGV4dCgiIiwgMTUsIDEwKS5jc3MoaC5zdHlsZSkuYWRkKGYpLCB0aGlzLmRvd24gPSBvLnN5bWJvbCgidHJpYW5nbGUtZG93biIsIDAsIDAsIG0sIG0pLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQlpLnNjcm9sbCgxLCB1KQoJCQkJCX0pLmFkZChmKSksIGkuc2Nyb2xsKDApLCBlID0gYykgOiBmICYmIChwLmF0dHIoewoJCQkJCQloZWlnaHQ6IGEuY2hhcnRIZWlnaHQKCQkJCQl9KSwgZi5oaWRlKCksIHRoaXMuc2Nyb2xsR3JvdXAuYXR0cih7CgkJCQkJCXRyYW5zbGF0ZVk6IDEKCQkJCQl9KSwgdGhpcy5jbGlwSGVpZ2h0ID0gMCksIGUKCQkJCX0sCgkJCQlzY3JvbGw6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQl2YXIgbiwgaSA9IHRoaXMucGFnZXMsCgkJCQkJCWEgPSBpLmxlbmd0aCwKCQkJCQkJbyA9IHRoaXMuY3VycmVudFBhZ2UgKyBlLAoJCQkJCQlyID0gdGhpcy5jbGlwSGVpZ2h0LAoJCQkJCQlzID0gdGhpcy5vcHRpb25zLm5hdmlnYXRpb24sCgkJCQkJCWwgPSBzLmFjdGl2ZUNvbG9yLAoJCQkJCQljID0gcy5pbmFjdGl2ZUNvbG9yLAoJCQkJCQlkID0gdGhpcy5wYWdlciwKCQkJCQkJcCA9IHRoaXMucGFkZGluZzsKCQkJCQlvID4gYSAmJiAobyA9IGEpLCBvID4gMCAmJiAodCAhPT0gVyAmJiBxKHQsIHRoaXMuY2hhcnQpLCB0aGlzLm5hdi5hdHRyKHsKCQkJCQkJdHJhbnNsYXRlWDogcCwKCQkJCQkJdHJhbnNsYXRlWTogciArIHRoaXMucGFkZGluZyArIDcgKyB0aGlzLnRpdGxlSGVpZ2h0LAoJCQkJCQl2aXNpYmlsaXR5OiBWZQoJCQkJCX0pLCB0aGlzLnVwLmF0dHIoewoJCQkJCQlmaWxsOiAxID09PSBvID8gYyA6IGwKCQkJCQl9KS5jc3MoewoJCQkJCQljdXJzb3I6IDEgPT09IG8gPyAiZGVmYXVsdCIgOiAicG9pbnRlciIKCQkJCQl9KSwgZC5hdHRyKHsKCQkJCQkJdGV4dDogbyArICIvIiArIGEKCQkJCQl9KSwgdGhpcy5kb3duLmF0dHIoewoJCQkJCQl4OiAxOCArIHRoaXMucGFnZXIuZ2V0QkJveCgpLndpZHRoLAoJCQkJCQlmaWxsOiBvID09PSBhID8gYyA6IGwKCQkJCQl9KS5jc3MoewoJCQkJCQljdXJzb3I6IG8gPT09IGEgPyAiZGVmYXVsdCIgOiAicG9pbnRlciIKCQkJCQl9KSwgbiA9IC1pW28gLSAxXSArIHRoaXMuaW5pdGlhbEl0ZW1ZLCB0aGlzLnNjcm9sbEdyb3VwLmFuaW1hdGUoewoJCQkJCQl0cmFuc2xhdGVZOiBuCgkJCQkJfSksIHRoaXMuY3VycmVudFBhZ2UgPSBvLCB0aGlzLnBvc2l0aW9uQ2hlY2tib3hlcyhuKSkKCQkJCX0KCQkJfTsKCQkJdmFyIFV0ID0gbHQuTGVnZW5kU3ltYm9sTWl4aW4gPSB7CgkJCQlkcmF3UmVjdGFuZ2xlOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJdmFyIG4gPSBlLm9wdGlvbnMuc3ltYm9sSGVpZ2h0IHx8IDEyOwoJCQkJCXQubGVnZW5kU3ltYm9sID0gdGhpcy5jaGFydC5yZW5kZXJlci5yZWN0KDAsIGUuYmFzZWxpbmUgLSA1IC0gbiAvIDIsIGUuc3ltYm9sV2lkdGgsIG4sIGUub3B0aW9ucy5zeW1ib2xSYWRpdXMgfHwgMCkuYXR0cih7CgkJCQkJCXpJbmRleDogMwoJCQkJCX0pLmFkZCh0LmxlZ2VuZEdyb3VwKQoJCQkJfSwKCQkJCWRyYXdMaW5lTWFya2VyOiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQsIG4sIGksIGEgPSB0aGlzLm9wdGlvbnMsCgkJCQkJCW8gPSBhLm1hcmtlciwKCQkJCQkJciA9IGUub3B0aW9ucywKCQkJCQkJcyA9IGUuc3ltYm9sV2lkdGgsCgkJCQkJCWwgPSB0aGlzLmNoYXJ0LnJlbmRlcmVyLAoJCQkJCQljID0gdGhpcy5sZWdlbmRHcm91cCwKCQkJCQkJZCA9IGUuYmFzZWxpbmUgLSB4ZSguMyAqIGwuZm9udE1ldHJpY3Moci5pdGVtU3R5bGUuZm9udFNpemUsIHRoaXMubGVnZW5kSXRlbSkuYik7CgkJCQkJYS5saW5lV2lkdGggJiYgKGkgPSB7CgkJCQkJCSJzdHJva2Utd2lkdGgiOiBhLmxpbmVXaWR0aAoJCQkJCX0sIGEuZGFzaFN0eWxlICYmIChpLmRhc2hzdHlsZSA9IGEuZGFzaFN0eWxlKSwgdGhpcy5sZWdlbmRMaW5lID0gbC5wYXRoKFtldCwgMCwgZCwgdHQsIHMsIGRdKS5hdHRyKGkpLmFkZChjKSksIG8gJiYgby5lbmFibGVkICE9PSAhMSAmJiAodCA9IG8ucmFkaXVzLCB0aGlzLmxlZ2VuZFN5bWJvbCA9IG4gPSBsLnN5bWJvbCh0aGlzLnN5bWJvbCwgcyAvIDIgLSB0LCBkIC0gdCwgMiAqIHQsIDIgKiB0KS5hZGQoYyksIG4uaXNNYXJrZXIgPSAhMCkKCQkJCX0KCQkJfTsKCQkJKC9UcmlkZW50XC83XC4wLy50ZXN0KFNlKSB8fCBBZSkgJiYgayhIdC5wcm90b3R5cGUsICJwb3NpdGlvbkl0ZW0iLCBmdW5jdGlvbihlLCB0KSB7CgkJCQl2YXIgbiA9IHRoaXMsCgkJCQkJaSA9IGZ1bmN0aW9uKCkgewoJCQkJCQl0Ll9sZWdlbmRJdGVtUG9zICYmIGUuY2FsbChuLCB0KQoJCQkJCX07CgkJCQlpKCksIHNldFRpbWVvdXQoaSkKCQkJfSksIEYucHJvdG90eXBlID0gewoJCQkJaW5pdDogZnVuY3Rpb24oZSwgdCkgewoJCQkJCXZhciBuLCBpID0gZS5zZXJpZXM7CgkJCQkJZS5zZXJpZXMgPSBudWxsLCBuID0gbyhHLCBlKSwgbi5zZXJpZXMgPSBlLnNlcmllcyA9IGksIHRoaXMudXNlck9wdGlvbnMgPSBlOwoJCQkJCXZhciBhID0gbi5jaGFydDsKCQkJCQl0aGlzLm1hcmdpbiA9IHRoaXMuc3BsYXNoQXJyYXkoIm1hcmdpbiIsIGEpLCB0aGlzLnNwYWNpbmcgPSB0aGlzLnNwbGFzaEFycmF5KCJzcGFjaW5nIiwgYSk7CgkJCQkJdmFyIHIgPSBhLmV2ZW50czsKCQkJCQl0aGlzLmJvdW5kcyA9IHsKCQkJCQkJaDoge30sCgkJCQkJCXY6IHt9CgkJCQkJfSwgdGhpcy5jYWxsYmFjayA9IHQsIHRoaXMuaXNSZXNpemluZyA9IDAsIHRoaXMub3B0aW9ucyA9IG4sIHRoaXMuYXhlcyA9IFtdLCB0aGlzLnNlcmllcyA9IFtdLCB0aGlzLmhhc0NhcnRlc2lhblNlcmllcyA9IGEuc2hvd0F4ZXM7CgkJCQkJdmFyIHMsIGwgPSB0aGlzOwoJCQkJCWlmIChsLmluZGV4ID0gJGUubGVuZ3RoLCAkZS5wdXNoKGwpLCBXZSsrLCBhLnJlZmxvdyAhPT0gITEgJiYgeHQobCwgImxvYWQiLCBmdW5jdGlvbigpIHsKCQkJCQkJbC5pbml0UmVmbG93KCkKCQkJCQl9KSwgcikKCQkJCQkJZm9yIChzIGluIHIpIHh0KGwsIHMsIHJbc10pOwoJCQkJCWwueEF4aXMgPSBbXSwgbC55QXhpcyA9IFtdLCBsLmFuaW1hdGlvbiA9IERlID8gITEgOiBfKGEuYW5pbWF0aW9uLCAhMCksIGwucG9pbnRDb3VudCA9IGwuY29sb3JDb3VudGVyID0gbC5zeW1ib2xDb3VudGVyID0gMCwgbC5maXJzdFJlbmRlcigpCgkJCQl9LAoJCQkJaW5pdFNlcmllczogZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0LCBuID0gdGhpcywKCQkJCQkJaSA9IG4ub3B0aW9ucy5jaGFydCwKCQkJCQkJYSA9IGUudHlwZSB8fCBpLnR5cGUgfHwgaS5kZWZhdWx0U2VyaWVzVHlwZSwKCQkJCQkJbyA9IHN0W2FdOwoJCQkJCXJldHVybiBvIHx8IEsoMTcsICEwKSwgdCA9IG5ldyBvLCB0LmluaXQodGhpcywgZSksIHQKCQkJCX0sCgkJCQlpc0luc2lkZVBsb3Q6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQl2YXIgaSA9IG4gPyB0IDogZSwKCQkJCQkJYSA9IG4gPyBlIDogdDsKCQkJCQlyZXR1cm4gaSA+PSAwICYmIGkgPD0gdGhpcy5wbG90V2lkdGggJiYgYSA+PSAwICYmIGEgPD0gdGhpcy5wbG90SGVpZ2h0CgkJCQl9LAoJCQkJYWRqdXN0VGlja0Ftb3VudHM6IGZ1bmN0aW9uKCkgewoJCQkJCXRoaXMub3B0aW9ucy5jaGFydC5hbGlnblRpY2tzICE9PSAhMSAmJiBtdCh0aGlzLmF4ZXMsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJZS5hZGp1c3RUaWNrQW1vdW50KCkKCQkJCQl9KSwgdGhpcy5tYXhUaWNrcyA9IG51bGwKCQkJCX0sCgkJCQlyZWRyYXc6IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCwgbiwgaSwgbyA9IHRoaXMsCgkJCQkJCXIgPSBvLmF4ZXMsCgkJCQkJCXMgPSBvLnNlcmllcywKCQkJCQkJbCA9IG8ucG9pbnRlciwKCQkJCQkJYyA9IG8ubGVnZW5kLAoJCQkJCQlkID0gby5pc0RpcnR5TGVnZW5kLAoJCQkJCQlwID0gby5oYXNDYXJ0ZXNpYW5TZXJpZXMsCgkJCQkJCWggPSBvLmlzRGlydHlCb3gsCgkJCQkJCXUgPSBzLmxlbmd0aCwKCQkJCQkJbSA9IHUsCgkJCQkJCWYgPSBvLnJlbmRlcmVyLAoJCQkJCQlnID0gZi5pc0hpZGRlbigpLAoJCQkJCQlfID0gW107CgkJCQkJZm9yIChxKGUsIG8pLCBnICYmIG8uY2xvbmVSZW5kZXJUbygpLCBvLmxheU91dFRpdGxlcygpOyBtLS07KQoJCQkJCQlpZiAoaSA9IHNbbV0sIGkub3B0aW9ucy5zdGFja2luZyAmJiAodCA9ICEwLCBpLmlzRGlydHkpKSB7CgkJCQkJCQluID0gITA7CgkJCQkJCQlicmVhawoJCQkJCQl9CgkJCQkJaWYgKG4pCgkJCQkJCWZvciAobSA9IHU7IG0tLTspIGkgPSBzW21dLCBpLm9wdGlvbnMuc3RhY2tpbmcgJiYgKGkuaXNEaXJ0eSA9ICEwKTsKCQkJCQltdChzLCBmdW5jdGlvbihlKSB7CgkJCQkJCWUuaXNEaXJ0eSAmJiAicG9pbnQiID09PSBlLm9wdGlvbnMubGVnZW5kVHlwZSAmJiAoZCA9ICEwKQoJCQkJCX0pLCBkICYmIGMub3B0aW9ucy5lbmFibGVkICYmIChjLnJlbmRlcigpLCBvLmlzRGlydHlMZWdlbmQgPSAhMSksIHQgJiYgby5nZXRTdGFja3MoKSwgcCAmJiAoby5pc1Jlc2l6aW5nIHx8IChvLm1heFRpY2tzID0gbnVsbCwgbXQociwgZnVuY3Rpb24oZSkgewoJCQkJCQllLnNldFNjYWxlKCkKCQkJCQl9KSksIG8uYWRqdXN0VGlja0Ftb3VudHMoKSksIG8uZ2V0TWFyZ2lucygpLCBwICYmIChtdChyLCBmdW5jdGlvbihlKSB7CgkJCQkJCWUuaXNEaXJ0eSAmJiAoaCA9ICEwKQoJCQkJCX0pLCBtdChyLCBmdW5jdGlvbihlKSB7CgkJCQkJCWUuaXNEaXJ0eUV4dHJlbWVzICYmIChlLmlzRGlydHlFeHRyZW1lcyA9ICExLCBfLnB1c2goZnVuY3Rpb24oKSB7CgkJCQkJCQl2dChlLCAiYWZ0ZXJTZXRFeHRyZW1lcyIsIGEoZS5ldmVudEFyZ3MsIGUuZ2V0RXh0cmVtZXMoKSkpLCBkZWxldGUgZS5ldmVudEFyZ3MKCQkJCQkJfSkpLCAoaCB8fCB0KSAmJiBlLnJlZHJhdygpCgkJCQkJfSkpLCBoICYmIG8uZHJhd0NoYXJ0Qm94KCksIG10KHMsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJZS5pc0RpcnR5ICYmIGUudmlzaWJsZSAmJiAoIWUuaXNDYXJ0ZXNpYW4gfHwgZS54QXhpcykgJiYgZS5yZWRyYXcoKQoJCQkJCX0pLCBsICYmIGwucmVzZXQoITApLCBmLmRyYXcoKSwgdnQobywgInJlZHJhdyIpLCBnICYmIG8uY2xvbmVSZW5kZXJUbyghMCksIG10KF8sIGZ1bmN0aW9uKGUpIHsKCQkJCQkJZS5jYWxsKCkKCQkJCQl9KQoJCQkJfSwKCQkJCWdldDogZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0LCBuLCBpLCBhID0gdGhpcywKCQkJCQkJbyA9IGEuYXhlcywKCQkJCQkJciA9IGEuc2VyaWVzOwoJCQkJCWZvciAodCA9IDA7IHQgPCBvLmxlbmd0aDsgdCsrKQoJCQkJCQlpZiAob1t0XS5vcHRpb25zLmlkID09PSBlKSByZXR1cm4gb1t0XTsKCQkJCQlmb3IgKHQgPSAwOyB0IDwgci5sZW5ndGg7IHQrKykKCQkJCQkJaWYgKHJbdF0ub3B0aW9ucy5pZCA9PT0gZSkgcmV0dXJuIHJbdF07CgkJCQkJZm9yICh0ID0gMDsgdCA8IHIubGVuZ3RoOyB0KyspCgkJCQkJCWZvciAoaSA9IHJbdF0ucG9pbnRzIHx8IFtdLCBuID0gMDsgbiA8IGkubGVuZ3RoOyBuKyspCgkJCQkJCQlpZiAoaVtuXS5pZCA9PT0gZSkgcmV0dXJuIGlbbl07CgkJCQkJcmV0dXJuIG51bGwKCQkJCX0sCgkJCQlnZXRBeGVzOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSwgdCwgbiA9IHRoaXMsCgkJCQkJCWkgPSB0aGlzLm9wdGlvbnMsCgkJCQkJCWEgPSBpLnhBeGlzID0gZyhpLnhBeGlzIHx8IHt9KSwKCQkJCQkJbyA9IGkueUF4aXMgPSBnKGkueUF4aXMgfHwge30pOwoJCQkJCW10KGEsIGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQkJZS5pbmRleCA9IHQsIGUuaXNYID0gITAKCQkJCQl9KSwgbXQobywgZnVuY3Rpb24oZSwgdCkgewoJCQkJCQllLmluZGV4ID0gdAoJCQkJCX0pLCBlID0gYS5jb25jYXQobyksIG10KGUsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJdCA9IG5ldyBSKG4sIGUpCgkJCQkJfSksIG4uYWRqdXN0VGlja0Ftb3VudHMoKQoJCQkJfSwKCQkJCWdldFNlbGVjdGVkUG9pbnRzOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IFtdOwoJCQkJCXJldHVybiBtdCh0aGlzLnNlcmllcywgZnVuY3Rpb24odCkgewoJCQkJCQllID0gZS5jb25jYXQoZnQodC5wb2ludHMgfHwgW10sIGZ1bmN0aW9uKGUpIHsKCQkJCQkJCXJldHVybiBlLnNlbGVjdGVkCgkJCQkJCX0pKQoJCQkJCX0pLCBlCgkJCQl9LAoJCQkJZ2V0U2VsZWN0ZWRTZXJpZXM6IGZ1bmN0aW9uKCkgewoJCQkJCXJldHVybiBmdCh0aGlzLnNlcmllcywgZnVuY3Rpb24oZSkgewoJCQkJCQlyZXR1cm4gZS5zZWxlY3RlZAoJCQkJCX0pCgkJCQl9LAoJCQkJZ2V0U3RhY2tzOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IHRoaXM7CgkJCQkJbXQoZS55QXhpcywgZnVuY3Rpb24oZSkgewoJCQkJCQllLnN0YWNrcyAmJiBlLmhhc1Zpc2libGVTZXJpZXMgJiYgKGUub2xkU3RhY2tzID0gZS5zdGFja3MpCgkJCQkJfSksIG10KGUuc2VyaWVzLCBmdW5jdGlvbih0KSB7CgkJCQkJCSF0Lm9wdGlvbnMuc3RhY2tpbmcgfHwgdC52aXNpYmxlICE9PSAhMCAmJiBlLm9wdGlvbnMuY2hhcnQuaWdub3JlSGlkZGVuU2VyaWVzICE9PSAhMSB8fCAodC5zdGFja0tleSA9IHQudHlwZSArIF8odC5vcHRpb25zLnN0YWNrLCAiIikpCgkJCQkJfSkKCQkJCX0sCgkJCQlzZXRUaXRsZTogZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCXZhciBpLCBhLCByID0gdGhpcywKCQkJCQkJcyA9IHIub3B0aW9uczsKCQkJCQlpID0gcy50aXRsZSA9IG8ocy50aXRsZSwgZSksIGEgPSBzLnN1YnRpdGxlID0gbyhzLnN1YnRpdGxlLCB0KSwgbXQoWwoJCQkJCQlbInRpdGxlIiwgZSwgaV0sCgkJCQkJCVsic3VidGl0bGUiLCB0LCBhXQoJCQkJCV0sIGZ1bmN0aW9uKGUpIHsKCQkJCQkJdmFyIHQgPSBlWzBdLAoJCQkJCQkJbiA9IHJbdF0sCgkJCQkJCQlpID0gZVsxXSwKCQkJCQkJCWEgPSBlWzJdOwoJCQkJCQluICYmIGkgJiYgKHJbdF0gPSBuID0gbi5kZXN0cm95KCkpLCBhICYmIGEudGV4dCAmJiAhbiAmJiAoclt0XSA9IHIucmVuZGVyZXIudGV4dChhLnRleHQsIDAsIDAsIGEudXNlSFRNTCkuYXR0cih7CgkJCQkJCQlhbGlnbjogYS5hbGlnbiwKCQkJCQkJCSJjbGFzcyI6IFplICsgdCwKCQkJCQkJCXpJbmRleDogYS56SW5kZXggfHwgNAoJCQkJCQl9KS5jc3MoYS5zdHlsZSkuYWRkKCkpCgkJCQkJfSksIHIubGF5T3V0VGl0bGVzKG4pCgkJCQl9LAoJCQkJbGF5T3V0VGl0bGVzOiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQsIG4gPSAwLAoJCQkJCQlpID0gdGhpcy50aXRsZSwKCQkJCQkJbyA9IHRoaXMuc3VidGl0bGUsCgkJCQkJCXIgPSB0aGlzLm9wdGlvbnMsCgkJCQkJCXMgPSByLnRpdGxlLAoJCQkJCQlsID0gci5zdWJ0aXRsZSwKCQkJCQkJYyA9IHRoaXMucmVuZGVyZXIsCgkJCQkJCWQgPSB0aGlzLnNwYWNpbmdCb3gud2lkdGggLSA0NDsKCQkJCQlpICYmIChpLmNzcyh7CgkJCQkJCXdpZHRoOiAocy53aWR0aCB8fCBkKSArIEtlCgkJCQkJfSkuYWxpZ24oYSh7CgkJCQkJCXk6IGMuZm9udE1ldHJpY3Mocy5zdHlsZS5mb250U2l6ZSwgaSkuYiAtIDMKCQkJCQl9LCBzKSwgITEsICJzcGFjaW5nQm94IiksIHMuZmxvYXRpbmcgfHwgcy52ZXJ0aWNhbEFsaWduIHx8IChuID0gaS5nZXRCQm94KCkuaGVpZ2h0KSksIG8gJiYgKG8uY3NzKHsKCQkJCQkJd2lkdGg6IChsLndpZHRoIHx8IGQpICsgS2UKCQkJCQl9KS5hbGlnbihhKHsKCQkJCQkJeTogbiArIChzLm1hcmdpbiAtIDEzKSArIGMuZm9udE1ldHJpY3Mocy5zdHlsZS5mb250U2l6ZSwgbykuYgoJCQkJCX0sIGwpLCAhMSwgInNwYWNpbmdCb3giKSwgbC5mbG9hdGluZyB8fCBsLnZlcnRpY2FsQWxpZ24gfHwgKG4gPSB2ZShuICsgby5nZXRCQm94KCkuaGVpZ2h0KSkpLCB0ID0gdGhpcy50aXRsZU9mZnNldCAhPT0gbiwgdGhpcy50aXRsZU9mZnNldCA9IG4sICF0aGlzLmlzRGlydHlCb3ggJiYgdCAmJiAodGhpcy5pc0RpcnR5Qm94ID0gdCwgdGhpcy5oYXNSZW5kZXJlZCAmJiBfKGUsICEwKSAmJiB0aGlzLmlzRGlydHlCb3ggJiYgdGhpcy5yZWRyYXcoKSkKCQkJCX0sCgkJCQlnZXRDaGFydFNpemU6IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gdGhpcywKCQkJCQkJdCA9IGUub3B0aW9ucy5jaGFydCwKCQkJCQkJbiA9IHQud2lkdGgsCgkJCQkJCWkgPSB0LmhlaWdodCwKCQkJCQkJYSA9IGUucmVuZGVyVG9DbG9uZSB8fCBlLnJlbmRlclRvOwoJCQkJCW0obikgfHwgKGUuY29udGFpbmVyV2lkdGggPSBwdChhLCAid2lkdGgiKSksIG0oaSkgfHwgKGUuY29udGFpbmVySGVpZ2h0ID0gcHQoYSwgImhlaWdodCIpKSwgZS5jaGFydFdpZHRoID0gYmUoMCwgbiB8fCBlLmNvbnRhaW5lcldpZHRoIHx8IDYwMCksIGUuY2hhcnRIZWlnaHQgPSBiZSgwLCBfKGksIGUuY29udGFpbmVySGVpZ2h0ID4gMTkgPyBlLmNvbnRhaW5lckhlaWdodCA6IDQwMCkpCgkJCQl9LAoJCQkJY2xvbmVSZW5kZXJUbzogZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0ID0gdGhpcy5yZW5kZXJUb0Nsb25lLAoJCQkJCQluID0gdGhpcy5jb250YWluZXI7CgkJCQkJZSA/IHQgJiYgKHRoaXMucmVuZGVyVG8uYXBwZW5kQ2hpbGQobiksIEkodCksIGRlbGV0ZSB0aGlzLnJlbmRlclRvQ2xvbmUpIDogKG4gJiYgbi5wYXJlbnROb2RlID09PSB0aGlzLnJlbmRlclRvICYmIHRoaXMucmVuZGVyVG8ucmVtb3ZlQ2hpbGQobiksIHRoaXMucmVuZGVyVG9DbG9uZSA9IHQgPSB0aGlzLnJlbmRlclRvLmNsb25lTm9kZSgwKSwgeCh0LCB7CgkJCQkJCXBvc2l0aW9uOiBHZSwKCQkJCQkJdG9wOiAiLTk5OTlweCIsCgkJCQkJCWRpc3BsYXk6ICJibG9jayIKCQkJCQl9KSwgdC5zdHlsZS5zZXRQcm9wZXJ0eSAmJiB0LnN0eWxlLnNldFByb3BlcnR5KCJkaXNwbGF5IiwgImJsb2NrIiwgImltcG9ydGFudCIpLCBmZS5ib2R5LmFwcGVuZENoaWxkKHQpLCBuICYmIHQuYXBwZW5kQ2hpbGQobikpCgkJCQl9LAoJCQkJZ2V0Q29udGFpbmVyOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSwgdCwgbiwgaSwgbywgbCwgYyA9IHRoaXMsCgkJCQkJCWQgPSBjLm9wdGlvbnMuY2hhcnQsCgkJCQkJCXAgPSAiZGF0YS1oaWdoY2hhcnRzLWNoYXJ0IjsKCQkJCQljLnJlbmRlclRvID0gaSA9IGQucmVuZGVyVG8sIGwgPSBaZSArIFJlKyssIHMoaSkgJiYgKGMucmVuZGVyVG8gPSBpID0gZmUuZ2V0RWxlbWVudEJ5SWQoaSkpLCBpIHx8IEsoMTMsICEwKSwgbyA9IHIoZihpLCBwKSksICFpc05hTihvKSAmJiAkZVtvXSAmJiAkZVtvXS5oYXNSZW5kZXJlZCAmJiAkZVtvXS5kZXN0cm95KCksIGYoaSwgcCwgYy5pbmRleCksIGkuaW5uZXJIVE1MID0gIiIsIGQuc2tpcENsb25lIHx8IGkub2Zmc2V0V2lkdGggfHwgYy5jbG9uZVJlbmRlclRvKCksIGMuZ2V0Q2hhcnRTaXplKCksIHQgPSBjLmNoYXJ0V2lkdGgsIG4gPSBjLmNoYXJ0SGVpZ2h0LCBjLmNvbnRhaW5lciA9IGUgPSB3KFllLCB7CgkJCQkJCWNsYXNzTmFtZTogWmUgKyAiY29udGFpbmVyIiArIChkLmNsYXNzTmFtZSA/ICIgIiArIGQuY2xhc3NOYW1lIDogIiIpLAoJCQkJCQlpZDogbAoJCQkJCX0sIGEoewoJCQkJCQlwb3NpdGlvbjogWGUsCgkJCQkJCW92ZXJmbG93OiBKZSwKCQkJCQkJd2lkdGg6IHQgKyBLZSwKCQkJCQkJaGVpZ2h0OiBuICsgS2UsCgkJCQkJCXRleHRBbGlnbjogImxlZnQiLAoJCQkJCQlsaW5lSGVpZ2h0OiAibm9ybWFsIiwKCQkJCQkJekluZGV4OiAwLAoJCQkJCQkiLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yIjogInJnYmEoMCwwLDAsMCkiCgkJCQkJfSwgZC5zdHlsZSksIGMucmVuZGVyVG9DbG9uZSB8fCBpKSwgYy5fY3Vyc29yID0gZS5zdHlsZS5jdXJzb3IsIGMucmVuZGVyZXIgPSBkLmZvckV4cG9ydCA/IG5ldyBQdChlLCB0LCBuLCBkLnN0eWxlLCAhMCkgOiBuZXcgSChlLCB0LCBuLCBkLnN0eWxlKSwgRGUgJiYgYy5yZW5kZXJlci5jcmVhdGUoYywgZSwgdCwgbikKCQkJCX0sCgkJCQlnZXRNYXJnaW5zOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSwgdCA9IHRoaXMsCgkJCQkJCW4gPSB0LnNwYWNpbmcsCgkJCQkJCWkgPSB0LmxlZ2VuZCwKCQkJCQkJYSA9IHQubWFyZ2luLAoJCQkJCQlvID0gdC5vcHRpb25zLmxlZ2VuZCwKCQkJCQkJciA9IF8oby5tYXJnaW4sIDIwKSwKCQkJCQkJcyA9IG8ueCwKCQkJCQkJbCA9IG8ueSwKCQkJCQkJYyA9IG8uYWxpZ24sCgkJCQkJCWQgPSBvLnZlcnRpY2FsQWxpZ24sCgkJCQkJCXAgPSB0LnRpdGxlT2Zmc2V0OwoJCQkJCXQucmVzZXRNYXJnaW5zKCksIGUgPSB0LmF4aXNPZmZzZXQsIHAgJiYgIW0oYVswXSkgJiYgKHQucGxvdFRvcCA9IGJlKHQucGxvdFRvcCwgcCArIHQub3B0aW9ucy50aXRsZS5tYXJnaW4gKyBuWzBdKSksIGkuZGlzcGxheSAmJiAhby5mbG9hdGluZyAmJiAoInJpZ2h0IiA9PT0gYyA/IG0oYVsxXSkgfHwgKHQubWFyZ2luUmlnaHQgPSBiZSh0Lm1hcmdpblJpZ2h0LCBpLmxlZ2VuZFdpZHRoIC0gcyArIHIgKyBuWzFdKSkgOiAibGVmdCIgPT09IGMgPyBtKGFbM10pIHx8ICh0LnBsb3RMZWZ0ID0gYmUodC5wbG90TGVmdCwgaS5sZWdlbmRXaWR0aCArIHMgKyByICsgblszXSkpIDogInRvcCIgPT09IGQgPyBtKGFbMF0pIHx8ICh0LnBsb3RUb3AgPSBiZSh0LnBsb3RUb3AsIGkubGVnZW5kSGVpZ2h0ICsgbCArIHIgKyBuWzBdKSkgOiAiYm90dG9tIiA9PT0gZCAmJiAobShhWzJdKSB8fCAodC5tYXJnaW5Cb3R0b20gPSBiZSh0Lm1hcmdpbkJvdHRvbSwgaS5sZWdlbmRIZWlnaHQgLSBsICsgciArIG5bMl0pKSkpLCB0LmV4dHJhQm90dG9tTWFyZ2luICYmICh0Lm1hcmdpbkJvdHRvbSArPSB0LmV4dHJhQm90dG9tTWFyZ2luKSwgdC5leHRyYVRvcE1hcmdpbiAmJiAodC5wbG90VG9wICs9IHQuZXh0cmFUb3BNYXJnaW4pLCB0Lmhhc0NhcnRlc2lhblNlcmllcyAmJiBtdCh0LmF4ZXMsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJZS5nZXRPZmZzZXQoKQoJCQkJCX0pLCBtKGFbM10pIHx8ICh0LnBsb3RMZWZ0ICs9IGVbM10pLCBtKGFbMF0pIHx8ICh0LnBsb3RUb3AgKz0gZVswXSksIG0oYVsyXSkgfHwgKHQubWFyZ2luQm90dG9tICs9IGVbMl0pLCBtKGFbMV0pIHx8ICh0Lm1hcmdpblJpZ2h0ICs9IGVbMV0pLCB0LnNldENoYXJ0U2l6ZSgpCgkJCQl9LAoJCQkJcmVmbG93OiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQgPSB0aGlzLAoJCQkJCQluID0gdC5vcHRpb25zLmNoYXJ0LAoJCQkJCQlpID0gdC5yZW5kZXJUbywKCQkJCQkJYSA9IG4ud2lkdGggfHwgcHQoaSwgIndpZHRoIiksCgkJCQkJCW8gPSBuLmhlaWdodCB8fCBwdChpLCAiaGVpZ2h0IiksCgkJCQkJCXIgPSBlID8gZS50YXJnZXQgOiBnZSwKCQkJCQkJcyA9IGZ1bmN0aW9uKCkgewoJCQkJCQkJdC5jb250YWluZXIgJiYgKHQuc2V0U2l6ZShhLCBvLCAhMSksIHQuaGFzVXNlclNpemUgPSBudWxsKQoJCQkJCQl9OwoJCQkJCXQuaGFzVXNlclNpemUgfHwgIWEgfHwgIW8gfHwgciAhPT0gZ2UgJiYgciAhPT0gZmUgfHwgKChhICE9PSB0LmNvbnRhaW5lcldpZHRoIHx8IG8gIT09IHQuY29udGFpbmVySGVpZ2h0KSAmJiAoY2xlYXJUaW1lb3V0KHQucmVmbG93VGltZW91dCksIGUgPyB0LnJlZmxvd1RpbWVvdXQgPSBzZXRUaW1lb3V0KHMsIDEwMCkgOiBzKCkpLCB0LmNvbnRhaW5lcldpZHRoID0gYSwgdC5jb250YWluZXJIZWlnaHQgPSBvKQoJCQkJfSwKCQkJCWluaXRSZWZsb3c6IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gdGhpcywKCQkJCQkJdCA9IGZ1bmN0aW9uKHQpIHsKCQkJCQkJCWUucmVmbG93KHQpCgkJCQkJCX07CgkJCQkJeHQoZ2UsICJyZXNpemUiLCB0KSwgeHQoZSwgImRlc3Ryb3kiLCBmdW5jdGlvbigpIHsKCQkJCQkJd3QoZ2UsICJyZXNpemUiLCB0KQoJCQkJCX0pCgkJCQl9LAoJCQkJc2V0U2l6ZTogZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCXZhciBpLCBhLCBvLCByID0gdGhpczsKCQkJCQlyLmlzUmVzaXppbmcgKz0gMSwgbyA9IGZ1bmN0aW9uKCkgewoJCQkJCQlyICYmIHZ0KHIsICJlbmRSZXNpemUiLCBudWxsLCBmdW5jdGlvbigpIHsKCQkJCQkJCXIuaXNSZXNpemluZyAtPSAxCgkJCQkJCX0pCgkJCQkJfSwgcShuLCByKSwgci5vbGRDaGFydEhlaWdodCA9IHIuY2hhcnRIZWlnaHQsIHIub2xkQ2hhcnRXaWR0aCA9IHIuY2hhcnRXaWR0aCwgbShlKSAmJiAoci5jaGFydFdpZHRoID0gaSA9IGJlKDAsIHhlKGUpKSwgci5oYXNVc2VyU2l6ZSA9ICEhaSksIG0odCkgJiYgKHIuY2hhcnRIZWlnaHQgPSBhID0gYmUoMCwgeGUodCkpKSwgKEogPyB5dCA6IHgpKHIuY29udGFpbmVyLCB7CgkJCQkJCXdpZHRoOiBpICsgS2UsCgkJCQkJCWhlaWdodDogYSArIEtlCgkJCQkJfSwgSiksIHIuc2V0Q2hhcnRTaXplKCEwKSwgci5yZW5kZXJlci5zZXRTaXplKGksIGEsIG4pLCByLm1heFRpY2tzID0gbnVsbCwgbXQoci5heGVzLCBmdW5jdGlvbihlKSB7CgkJCQkJCWUuaXNEaXJ0eSA9ICEwLCBlLnNldFNjYWxlKCkKCQkJCQl9KSwgbXQoci5zZXJpZXMsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJZS5pc0RpcnR5ID0gITAKCQkJCQl9KSwgci5pc0RpcnR5TGVnZW5kID0gITAsIHIuaXNEaXJ0eUJveCA9ICEwLCByLmxheU91dFRpdGxlcygpLCByLmdldE1hcmdpbnMoKSwgci5yZWRyYXcobiksIHIub2xkQ2hhcnRIZWlnaHQgPSBudWxsLCB2dChyLCAicmVzaXplIiksIEogPT09ICExID8gbygpIDogc2V0VGltZW91dChvLCBKICYmIEouZHVyYXRpb24gfHwgNTAwKQoJCQkJfSwKCQkJCXNldENoYXJ0U2l6ZTogZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0LCBuLCBpLCBhLCBvLCByLCBzLCBsID0gdGhpcywKCQkJCQkJYyA9IGwuaW52ZXJ0ZWQsCgkJCQkJCWQgPSBsLnJlbmRlcmVyLAoJCQkJCQlwID0gbC5jaGFydFdpZHRoLAoJCQkJCQloID0gbC5jaGFydEhlaWdodCwKCQkJCQkJdSA9IGwub3B0aW9ucy5jaGFydCwKCQkJCQkJbSA9IGwuc3BhY2luZywKCQkJCQkJZiA9IGwuY2xpcE9mZnNldDsKCQkJCQlsLnBsb3RMZWZ0ID0gaSA9IHhlKGwucGxvdExlZnQpLCBsLnBsb3RUb3AgPSBhID0geGUobC5wbG90VG9wKSwgbC5wbG90V2lkdGggPSBvID0gYmUoMCwgeGUocCAtIGkgLSBsLm1hcmdpblJpZ2h0KSksIGwucGxvdEhlaWdodCA9IHIgPSBiZSgwLCB4ZShoIC0gYSAtIGwubWFyZ2luQm90dG9tKSksIGwucGxvdFNpemVYID0gYyA/IHIgOiBvLCBsLnBsb3RTaXplWSA9IGMgPyBvIDogciwgbC5wbG90Qm9yZGVyV2lkdGggPSB1LnBsb3RCb3JkZXJXaWR0aCB8fCAwLCBsLnNwYWNpbmdCb3ggPSBkLnNwYWNpbmdCb3ggPSB7CgkJCQkJCXg6IG1bM10sCgkJCQkJCXk6IG1bMF0sCgkJCQkJCXdpZHRoOiBwIC0gbVszXSAtIG1bMV0sCgkJCQkJCWhlaWdodDogaCAtIG1bMF0gLSBtWzJdCgkJCQkJfSwgbC5wbG90Qm94ID0gZC5wbG90Qm94ID0gewoJCQkJCQl4OiBpLAoJCQkJCQl5OiBhLAoJCQkJCQl3aWR0aDogbywKCQkJCQkJaGVpZ2h0OiByCgkJCQkJfSwgcyA9IDIgKiB3ZShsLnBsb3RCb3JkZXJXaWR0aCAvIDIpLCB0ID0gdmUoYmUocywgZlszXSkgLyAyKSwgbiA9IHZlKGJlKHMsIGZbMF0pIC8gMiksIGwuY2xpcEJveCA9IHsKCQkJCQkJeDogdCwKCQkJCQkJeTogbiwKCQkJCQkJd2lkdGg6IHdlKGwucGxvdFNpemVYIC0gYmUocywgZlsxXSkgLyAyIC0gdCksCgkJCQkJCWhlaWdodDogYmUoMCwgd2UobC5wbG90U2l6ZVkgLSBiZShzLCBmWzJdKSAvIDIgLSBuKSkKCQkJCQl9LCBlIHx8IG10KGwuYXhlcywgZnVuY3Rpb24oZSkgewoJCQkJCQllLnNldEF4aXNTaXplKCksIGUuc2V0QXhpc1RyYW5zbGF0aW9uKCkKCQkJCQl9KQoJCQkJfSwKCQkJCXJlc2V0TWFyZ2luczogZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSB0aGlzLAoJCQkJCQl0ID0gZS5zcGFjaW5nLAoJCQkJCQluID0gZS5tYXJnaW47CgkJCQkJZS5wbG90VG9wID0gXyhuWzBdLCB0WzBdKSwgZS5tYXJnaW5SaWdodCA9IF8oblsxXSwgdFsxXSksIGUubWFyZ2luQm90dG9tID0gXyhuWzJdLCB0WzJdKSwgZS5wbG90TGVmdCA9IF8oblszXSwgdFszXSksIGUuYXhpc09mZnNldCA9IFswLCAwLCAwLCAwXSwgZS5jbGlwT2Zmc2V0ID0gWzAsIDAsIDAsIDBdCgkJCQl9LAoJCQkJZHJhd0NoYXJ0Qm94OiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSwgdCwgbiA9IHRoaXMsCgkJCQkJCWkgPSBuLm9wdGlvbnMuY2hhcnQsCgkJCQkJCWEgPSBuLnJlbmRlcmVyLAoJCQkJCQlvID0gbi5jaGFydFdpZHRoLAoJCQkJCQlyID0gbi5jaGFydEhlaWdodCwKCQkJCQkJcyA9IG4uY2hhcnRCYWNrZ3JvdW5kLAoJCQkJCQlsID0gbi5wbG90QmFja2dyb3VuZCwKCQkJCQkJYyA9IG4ucGxvdEJvcmRlciwKCQkJCQkJZCA9IG4ucGxvdEJHSW1hZ2UsCgkJCQkJCXAgPSBpLmJvcmRlcldpZHRoIHx8IDAsCgkJCQkJCWggPSBpLmJhY2tncm91bmRDb2xvciwKCQkJCQkJdSA9IGkucGxvdEJhY2tncm91bmRDb2xvciwKCQkJCQkJbSA9IGkucGxvdEJhY2tncm91bmRJbWFnZSwKCQkJCQkJZiA9IGkucGxvdEJvcmRlcldpZHRoIHx8IDAsCgkJCQkJCWcgPSBuLnBsb3RMZWZ0LAoJCQkJCQlfID0gbi5wbG90VG9wLAoJCQkJCQl4ID0gbi5wbG90V2lkdGgsCgkJCQkJCXcgPSBuLnBsb3RIZWlnaHQsCgkJCQkJCXYgPSBuLnBsb3RCb3gsCgkJCQkJCWIgPSBuLmNsaXBSZWN0LAoJCQkJCQl5ID0gbi5jbGlwQm94OwoJCQkJCWUgPSBwICsgKGkuc2hhZG93ID8gOCA6IDApLCAocCB8fCBoKSAmJiAocyA/IHMuYW5pbWF0ZShzLmNyaXNwKHsKCQkJCQkJd2lkdGg6IG8gLSBlLAoJCQkJCQloZWlnaHQ6IHIgLSBlCgkJCQkJfSkpIDogKHQgPSB7CgkJCQkJCWZpbGw6IGggfHwgUWUKCQkJCQl9LCBwICYmICh0LnN0cm9rZSA9IGkuYm9yZGVyQ29sb3IsIHRbInN0cm9rZS13aWR0aCJdID0gcCksIG4uY2hhcnRCYWNrZ3JvdW5kID0gYS5yZWN0KGUgLyAyLCBlIC8gMiwgbyAtIGUsIHIgLSBlLCBpLmJvcmRlclJhZGl1cywgcCkuYXR0cih0KS5hZGRDbGFzcyhaZSArICJiYWNrZ3JvdW5kIikuYWRkKCkuc2hhZG93KGkuc2hhZG93KSkpLCB1ICYmIChsID8gbC5hbmltYXRlKHYpIDogbi5wbG90QmFja2dyb3VuZCA9IGEucmVjdChnLCBfLCB4LCB3LCAwKS5hdHRyKHsKCQkJCQkJZmlsbDogdQoJCQkJCX0pLmFkZCgpLnNoYWRvdyhpLnBsb3RTaGFkb3cpKSwgbSAmJiAoZCA/IGQuYW5pbWF0ZSh2KSA6IG4ucGxvdEJHSW1hZ2UgPSBhLmltYWdlKG0sIGcsIF8sIHgsIHcpLmFkZCgpKSwgYiA/IGIuYW5pbWF0ZSh7CgkJCQkJCXdpZHRoOiB5LndpZHRoLAoJCQkJCQloZWlnaHQ6IHkuaGVpZ2h0CgkJCQkJfSkgOiBuLmNsaXBSZWN0ID0gYS5jbGlwUmVjdCh5KSwgZiAmJiAoYyA/IGMuYW5pbWF0ZShjLmNyaXNwKHsKCQkJCQkJeDogZywKCQkJCQkJeTogXywKCQkJCQkJd2lkdGg6IHgsCgkJCQkJCWhlaWdodDogdywKCQkJCQkJc3Ryb2tlV2lkdGg6IC1mCgkJCQkJfSkpIDogbi5wbG90Qm9yZGVyID0gYS5yZWN0KGcsIF8sIHgsIHcsIDAsIC1mKS5hdHRyKHsKCQkJCQkJc3Ryb2tlOiBpLnBsb3RCb3JkZXJDb2xvciwKCQkJCQkJInN0cm9rZS13aWR0aCI6IGYsCgkJCQkJCWZpbGw6IFFlLAoJCQkJCQl6SW5kZXg6IDEKCQkJCQl9KS5hZGQoKSksIG4uaXNEaXJ0eUJveCA9ICExCgkJCQl9LAoJCQkJcHJvcEZyb21TZXJpZXM6IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlLCB0LCBuLCBpID0gdGhpcywKCQkJCQkJYSA9IGkub3B0aW9ucy5jaGFydCwKCQkJCQkJbyA9IGkub3B0aW9ucy5zZXJpZXM7CgkJCQkJbXQoWyJpbnZlcnRlZCIsICJhbmd1bGFyIiwgInBvbGFyIl0sIGZ1bmN0aW9uKHIpIHsKCQkJCQkJZm9yIChlID0gc3RbYS50eXBlIHx8IGEuZGVmYXVsdFNlcmllc1R5cGVdLCBuID0gaVtyXSB8fCBhW3JdIHx8IGUgJiYgZS5wcm90b3R5cGVbcl0sIHQgPSBvICYmIG8ubGVuZ3RoOyAhbiAmJiB0LS07KSBlID0gc3Rbb1t0XS50eXBlXSwgZSAmJiBlLnByb3RvdHlwZVtyXSAmJiAobiA9ICEwKTsKCQkJCQkJaVtyXSA9IG4KCQkJCQl9KQoJCQkJfSwKCQkJCWxpbmtTZXJpZXM6IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gdGhpcywKCQkJCQkJdCA9IGUuc2VyaWVzOwoJCQkJCW10KHQsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJZS5saW5rZWRTZXJpZXMubGVuZ3RoID0gMAoJCQkJCX0pLCBtdCh0LCBmdW5jdGlvbih0KSB7CgkJCQkJCXZhciBuID0gdC5vcHRpb25zLmxpbmtlZFRvOwoJCQkJCQlzKG4pICYmIChuID0gIjpwcmV2aW91cyIgPT09IG4gPyBlLnNlcmllc1t0LmluZGV4IC0gMV0gOiBlLmdldChuKSwgbiAmJiAobi5saW5rZWRTZXJpZXMucHVzaCh0KSwgdC5saW5rZWRQYXJlbnQgPSBuKSkKCQkJCQl9KQoJCQkJfSwKCQkJCXJlbmRlclNlcmllczogZnVuY3Rpb24oKSB7CgkJCQkJbXQodGhpcy5zZXJpZXMsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJZS50cmFuc2xhdGUoKSwgZS5zZXRUb29sdGlwUG9pbnRzICYmIGUuc2V0VG9vbHRpcFBvaW50cygpLCBlLnJlbmRlcigpCgkJCQkJfSkKCQkJCX0sCgkJCQlyZW5kZXJMYWJlbHM6IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gdGhpcywKCQkJCQkJdCA9IGUub3B0aW9ucy5sYWJlbHM7CgkJCQkJdC5pdGVtcyAmJiBtdCh0Lml0ZW1zLCBmdW5jdGlvbihuKSB7CgkJCQkJCXZhciBpID0gYSh0LnN0eWxlLCBuLnN0eWxlKSwKCQkJCQkJCW8gPSByKGkubGVmdCkgKyBlLnBsb3RMZWZ0LAoJCQkJCQkJcyA9IHIoaS50b3ApICsgZS5wbG90VG9wICsgMTI7CgkJCQkJCWRlbGV0ZSBpLmxlZnQsIGRlbGV0ZSBpLnRvcCwgZS5yZW5kZXJlci50ZXh0KG4uaHRtbCwgbywgcykuYXR0cih7CgkJCQkJCQl6SW5kZXg6IDIKCQkJCQkJfSkuY3NzKGkpLmFkZCgpCgkJCQkJfSkKCQkJCX0sCgkJCQlyZW5kZXI6IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gdGhpcywKCQkJCQkJdCA9IGUuYXhlcywKCQkJCQkJbiA9IGUucmVuZGVyZXIsCgkJCQkJCWkgPSBlLm9wdGlvbnM7CgkJCQkJZS5zZXRUaXRsZSgpLCBlLmxlZ2VuZCA9IG5ldyBIdChlLCBpLmxlZ2VuZCksIGUuZ2V0U3RhY2tzKCksIG10KHQsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJZS5zZXRTY2FsZSgpCgkJCQkJfSksIGUuZ2V0TWFyZ2lucygpLCBlLm1heFRpY2tzID0gbnVsbCwgbXQodCwgZnVuY3Rpb24oZSkgewoJCQkJCQllLnNldFRpY2tQb3NpdGlvbnMoITApLCBlLnNldE1heFRpY2tzKCkKCQkJCQl9KSwgZS5hZGp1c3RUaWNrQW1vdW50cygpLCBlLmdldE1hcmdpbnMoKSwgZS5kcmF3Q2hhcnRCb3goKSwgZS5oYXNDYXJ0ZXNpYW5TZXJpZXMgJiYgbXQodCwgZnVuY3Rpb24oZSkgewoJCQkJCQllLnJlbmRlcigpCgkJCQkJfSksIGUuc2VyaWVzR3JvdXAgfHwgKGUuc2VyaWVzR3JvdXAgPSBuLmcoInNlcmllcy1ncm91cCIpLmF0dHIoewoJCQkJCQl6SW5kZXg6IDMKCQkJCQl9KS5hZGQoKSksIGUucmVuZGVyU2VyaWVzKCksIGUucmVuZGVyTGFiZWxzKCksIGUuc2hvd0NyZWRpdHMoaS5jcmVkaXRzKSwgZS5oYXNSZW5kZXJlZCA9ICEwCgkJCQl9LAoJCQkJc2hvd0NyZWRpdHM6IGZ1bmN0aW9uKGUpIHsKCQkJCQllLmVuYWJsZWQgJiYgIXRoaXMuY3JlZGl0cyAmJiAodGhpcy5jcmVkaXRzID0gdGhpcy5yZW5kZXJlci50ZXh0KGUudGV4dCwgMCwgMCkub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCWUuaHJlZiAmJiAobG9jYXRpb24uaHJlZiA9IGUuaHJlZikKCQkJCQl9KS5hdHRyKHsKCQkJCQkJYWxpZ246IGUucG9zaXRpb24uYWxpZ24sCgkJCQkJCXpJbmRleDogOAoJCQkJCX0pLmNzcyhlLnN0eWxlKS5hZGQoKS5hbGlnbihlLnBvc2l0aW9uKSkKCQkJCX0sCgkJCQlkZXN0cm95OiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSwgdCA9IHRoaXMsCgkJCQkJCW4gPSB0LmF4ZXMsCgkJCQkJCWkgPSB0LnNlcmllcywKCQkJCQkJYSA9IHQuY29udGFpbmVyLAoJCQkJCQlvID0gYSAmJiBhLnBhcmVudE5vZGU7CgkJCQkJZm9yICh2dCh0LCAiZGVzdHJveSIpLCAkZVt0LmluZGV4XSA9IFcsIFdlLS0sIHQucmVuZGVyVG8ucmVtb3ZlQXR0cmlidXRlKCJkYXRhLWhpZ2hjaGFydHMtY2hhcnQiKSwgd3QodCksIGUgPSBuLmxlbmd0aDsgZS0tOykgbltlXSA9IG5bZV0uZGVzdHJveSgpOwoJCQkJCWZvciAoZSA9IGkubGVuZ3RoOyBlLS07KSBpW2VdID0gaVtlXS5kZXN0cm95KCk7CgkJCQkJbXQoWyJ0aXRsZSIsICJzdWJ0aXRsZSIsICJjaGFydEJhY2tncm91bmQiLCAicGxvdEJhY2tncm91bmQiLCAicGxvdEJHSW1hZ2UiLCAicGxvdEJvcmRlciIsICJzZXJpZXNHcm91cCIsICJjbGlwUmVjdCIsICJjcmVkaXRzIiwgInBvaW50ZXIiLCAic2Nyb2xsZXIiLCAicmFuZ2VTZWxlY3RvciIsICJsZWdlbmQiLCAicmVzZXRab29tQnV0dG9uIiwgInRvb2x0aXAiLCAicmVuZGVyZXIiXSwgZnVuY3Rpb24oZSkgewoJCQkJCQl2YXIgbiA9IHRbZV07CgkJCQkJCW4gJiYgbi5kZXN0cm95ICYmICh0W2VdID0gbi5kZXN0cm95KCkpCgkJCQkJfSksIGEgJiYgKGEuaW5uZXJIVE1MID0gIiIsIHd0KGEpLCBvICYmIEkoYSkpOwoJCQkJCWZvciAoZSBpbiB0KSBkZWxldGUgdFtlXQoJCQkJfSwKCQkJCWlzUmVhZHlUb1JlbmRlcjogZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSB0aGlzOwoJCQkJCXJldHVybiAhT2UgJiYgZ2UgPT0gZ2UudG9wICYmICJjb21wbGV0ZSIgIT09IGZlLnJlYWR5U3RhdGUgfHwgRGUgJiYgIWdlLmNhbnZnID8gKERlID8gT3QucHVzaChmdW5jdGlvbigpIHsKCQkJCQkJZS5maXJzdFJlbmRlcigpCgkJCQkJfSwgZS5vcHRpb25zLmdsb2JhbC5jYW52YXNUb29sc1VSTCkgOiBmZS5hdHRhY2hFdmVudCgib25yZWFkeXN0YXRlY2hhbmdlIiwgZnVuY3Rpb24oKSB7CgkJCQkJCWZlLmRldGFjaEV2ZW50KCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCBlLmZpcnN0UmVuZGVyKSwgImNvbXBsZXRlIiA9PT0gZmUucmVhZHlTdGF0ZSAmJiBlLmZpcnN0UmVuZGVyKCkKCQkJCQl9KSwgITEpIDogITAKCQkJCX0sCgkJCQlmaXJzdFJlbmRlcjogZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSB0aGlzLAoJCQkJCQl0ID0gZS5vcHRpb25zLAoJCQkJCQluID0gZS5jYWxsYmFjazsKCQkJCQllLmlzUmVhZHlUb1JlbmRlcigpICYmIChlLmdldENvbnRhaW5lcigpLCB2dChlLCAiaW5pdCIpLCBlLnJlc2V0TWFyZ2lucygpLCBlLnNldENoYXJ0U2l6ZSgpLCBlLnByb3BGcm9tU2VyaWVzKCksIGUuZ2V0QXhlcygpLCBtdCh0LnNlcmllcyB8fCBbXSwgZnVuY3Rpb24odCkgewoJCQkJCQllLmluaXRTZXJpZXModCkKCQkJCQl9KSwgZS5saW5rU2VyaWVzKCksIHZ0KGUsICJiZWZvcmVSZW5kZXIiKSwgbHQuUG9pbnRlciAmJiAoZS5wb2ludGVyID0gbmV3IE10KGUsIHQpKSwgZS5yZW5kZXIoKSwgZS5yZW5kZXJlci5kcmF3KCksIG4gJiYgbi5hcHBseShlLCBbZV0pLCBtdChlLmNhbGxiYWNrcywgZnVuY3Rpb24odCkgewoJCQkJCQl0LmFwcGx5KGUsIFtlXSkKCQkJCQl9KSwgZS5jbG9uZVJlbmRlclRvKCEwKSwgdnQoZSwgImxvYWQiKSkKCQkJCX0sCgkJCQlzcGxhc2hBcnJheTogZnVuY3Rpb24oZSwgdCkgewoJCQkJCXZhciBuID0gdFtlXSwKCQkJCQkJaSA9IGwobikgPyBuIDogW24sIG4sIG4sIG5dOwoJCQkJCXJldHVybiBbXyh0W2UgKyAiVG9wIl0sIGlbMF0pLCBfKHRbZSArICJSaWdodCJdLCBpWzFdKSwgXyh0W2UgKyAiQm90dG9tIl0sIGlbMl0pLCBfKHRbZSArICJMZWZ0Il0sIGlbM10pXQoJCQkJfQoJCQl9LCBGLnByb3RvdHlwZS5jYWxsYmFja3MgPSBbXTsKCQkJdmFyIFl0ID0gbHQuQ2VudGVyZWRTZXJpZXNNaXhpbiA9IHsKCQkJCQlnZXRDZW50ZXI6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSwgdCwgbiA9IHRoaXMub3B0aW9ucywKCQkJCQkJCWkgPSB0aGlzLmNoYXJ0LAoJCQkJCQkJYSA9IDIgKiAobi5zbGljZWRPZmZzZXQgfHwgMCksCgkJCQkJCQlvID0gaS5wbG90V2lkdGggLSAyICogYSwKCQkJCQkJCXMgPSBpLnBsb3RIZWlnaHQgLSAyICogYSwKCQkJCQkJCWwgPSBuLmNlbnRlciwKCQkJCQkJCWMgPSBbXyhsWzBdLCAiNTAlIiksIF8obFsxXSwgIjUwJSIpLCBuLnNpemUgfHwgIjEwMCUiLCBuLmlubmVyU2l6ZSB8fCAwXSwKCQkJCQkJCWQgPSB5ZShvLCBzKTsKCQkJCQkJcmV0dXJuIF90KGMsIGZ1bmN0aW9uKG4sIGkpIHsKCQkJCQkJCXJldHVybiB0ID0gLyUkLy50ZXN0KG4pLCBlID0gMiA+IGkgfHwgMiA9PT0gaSAmJiB0LCAodCA/IFtvLCBzLCBkLCBkXVtpXSAqIHIobikgLyAxMDAgOiBuKSArIChlID8gYSA6IDApCgkJCQkJCX0pCgkJCQkJfQoJCQkJfSwKCQkJCUd0ID0gZnVuY3Rpb24oKSB7fTsKCQkJR3QucHJvdG90eXBlID0gewoJCQkJaW5pdDogZnVuY3Rpb24oZSwgdCwgbikgewoJCQkJCXZhciBpLCBhID0gdGhpczsKCQkJCQlyZXR1cm4gYS5zZXJpZXMgPSBlLCBhLmFwcGx5T3B0aW9ucyh0LCBuKSwgYS5wb2ludEF0dHIgPSB7fSwgZS5vcHRpb25zLmNvbG9yQnlQb2ludCAmJiAoaSA9IGUub3B0aW9ucy5jb2xvcnMgfHwgZS5jaGFydC5vcHRpb25zLmNvbG9ycywgYS5jb2xvciA9IGEuY29sb3IgfHwgaVtlLmNvbG9yQ291bnRlcisrXSwgZS5jb2xvckNvdW50ZXIgPT09IGkubGVuZ3RoICYmIChlLmNvbG9yQ291bnRlciA9IDApKSwgZS5jaGFydC5wb2ludENvdW50KyssIGEKCQkJCX0sCgkJCQlhcHBseU9wdGlvbnM6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQl2YXIgbiA9IHRoaXMsCgkJCQkJCWkgPSBuLnNlcmllcywKCQkJCQkJbyA9IGkub3B0aW9ucy5wb2ludFZhbEtleSB8fCBpLnBvaW50VmFsS2V5OwoJCQkJCXJldHVybiBlID0gR3QucHJvdG90eXBlLm9wdGlvbnNUb09iamVjdC5jYWxsKHRoaXMsIGUpLCBhKG4sIGUpLCBuLm9wdGlvbnMgPSBuLm9wdGlvbnMgPyBhKG4ub3B0aW9ucywgZSkgOiBlLCBvICYmIChuLnkgPSBuW29dKSwgbi54ID09PSBXICYmIGkgJiYgKG4ueCA9IHQgPT09IFcgPyBpLmF1dG9JbmNyZW1lbnQoKSA6IHQpLCBuCgkJCQl9LAoJCQkJb3B0aW9uc1RvT2JqZWN0OiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQsIG4gPSB7fSwKCQkJCQkJaSA9IHRoaXMuc2VyaWVzLAoJCQkJCQlhID0gaS5wb2ludEFycmF5TWFwIHx8IFsieSJdLAoJCQkJCQlvID0gYS5sZW5ndGgsCgkJCQkJCXIgPSAwLAoJCQkJCQlzID0gMDsKCQkJCQlpZiAoIm51bWJlciIgPT0gdHlwZW9mIGUgfHwgbnVsbCA9PT0gZSkgblthWzBdXSA9IGU7CgkJCQkJZWxzZSBpZiAoYyhlKSkKCQkJCQkJZm9yIChlLmxlbmd0aCA+IG8gJiYgKHQgPSB0eXBlb2YgZVswXSwgInN0cmluZyIgPT09IHQgPyBuLm5hbWUgPSBlWzBdIDogIm51bWJlciIgPT09IHQgJiYgKG4ueCA9IGVbMF0pLCByKyspOyBvID4gczspIG5bYVtzKytdXSA9IGVbcisrXTsKCQkJCQllbHNlICJvYmplY3QiID09IHR5cGVvZiBlICYmIChuID0gZSwgZS5kYXRhTGFiZWxzICYmIChpLl9oYXNQb2ludExhYmVscyA9ICEwKSwgZS5tYXJrZXIgJiYgKGkuX2hhc1BvaW50TWFya2VycyA9ICEwKSk7CgkJCQkJcmV0dXJuIG4KCQkJCX0sCgkJCQlkZXN0cm95OiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSwgdCA9IHRoaXMsCgkJCQkJCW4gPSB0LnNlcmllcywKCQkJCQkJaSA9IG4uY2hhcnQsCgkJCQkJCWEgPSBpLmhvdmVyUG9pbnRzOwoJCQkJCWkucG9pbnRDb3VudC0tLCBhICYmICh0LnNldFN0YXRlKCksIHUoYSwgdCksIGEubGVuZ3RoIHx8IChpLmhvdmVyUG9pbnRzID0gbnVsbCkpLCB0ID09PSBpLmhvdmVyUG9pbnQgJiYgdC5vbk1vdXNlT3V0KCksICh0LmdyYXBoaWMgfHwgdC5kYXRhTGFiZWwpICYmICh3dCh0KSwgdC5kZXN0cm95RWxlbWVudHMoKSksIHQubGVnZW5kSXRlbSAmJiBpLmxlZ2VuZC5kZXN0cm95SXRlbSh0KTsKCQkJCQlmb3IgKGUgaW4gdCkgdFtlXSA9IG51bGwKCQkJCX0sCgkJCQlkZXN0cm95RWxlbWVudHM6IGZ1bmN0aW9uKCkgewoJCQkJCWZvciAodmFyIGUsIHQgPSB0aGlzLCBuID0gWyJncmFwaGljIiwgImRhdGFMYWJlbCIsICJkYXRhTGFiZWxVcHBlciIsICJncm91cCIsICJjb25uZWN0b3IiLCAic2hhZG93R3JvdXAiXSwgaSA9IDY7IGktLTspIGUgPSBuW2ldLCB0W2VdICYmICh0W2VdID0gdFtlXS5kZXN0cm95KCkpCgkJCQl9LAoJCQkJZ2V0TGFiZWxDb25maWc6IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gdGhpczsKCQkJCQlyZXR1cm4gewoJCQkJCQl4OiBlLmNhdGVnb3J5LAoJCQkJCQl5OiBlLnksCgkJCQkJCWtleTogZS5uYW1lIHx8IGUuY2F0ZWdvcnksCgkJCQkJCXNlcmllczogZS5zZXJpZXMsCgkJCQkJCXBvaW50OiBlLAoJCQkJCQlwZXJjZW50YWdlOiBlLnBlcmNlbnRhZ2UsCgkJCQkJCXRvdGFsOiBlLnRvdGFsIHx8IGUuc3RhY2tUb3RhbAoJCQkJCX0KCQkJCX0sCgkJCQl0b29sdGlwRm9ybWF0dGVyOiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQgPSB0aGlzLnNlcmllcywKCQkJCQkJbiA9IHQudG9vbHRpcE9wdGlvbnMsCgkJCQkJCWkgPSBfKG4udmFsdWVEZWNpbWFscywgIiIpLAoJCQkJCQlhID0gbi52YWx1ZVByZWZpeCB8fCAiIiwKCQkJCQkJbyA9IG4udmFsdWVTdWZmaXggfHwgIiI7CgkJCQkJcmV0dXJuIG10KHQucG9pbnRBcnJheU1hcCB8fCBbInkiXSwgZnVuY3Rpb24odCkgewoJCQkJCQl0ID0gIntwb2ludC4iICsgdCwgKGEgfHwgbykgJiYgKGUgPSBlLnJlcGxhY2UodCArICJ9IiwgYSArIHQgKyAifSIgKyBvKSksIGUgPSBlLnJlcGxhY2UodCArICJ9IiwgdCArICI6LC4iICsgaSArICJmfSIpCgkJCQkJfSksIEIoZSwgewoJCQkJCQlwb2ludDogdGhpcywKCQkJCQkJc2VyaWVzOiB0aGlzLnNlcmllcwoJCQkJCX0pCgkJCQl9LAoJCQkJZmlyZVBvaW50RXZlbnQ6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQl2YXIgaSA9IHRoaXMsCgkJCQkJCWEgPSB0aGlzLnNlcmllcywKCQkJCQkJbyA9IGEub3B0aW9uczsKCQkJCQkoby5wb2ludC5ldmVudHNbZV0gfHwgaS5vcHRpb25zICYmIGkub3B0aW9ucy5ldmVudHMgJiYgaS5vcHRpb25zLmV2ZW50c1tlXSkgJiYgdGhpcy5pbXBvcnRFdmVudHMoKSwgImNsaWNrIiA9PT0gZSAmJiBvLmFsbG93UG9pbnRTZWxlY3QgJiYgKG4gPSBmdW5jdGlvbihlKSB7CgkJCQkJCWkuc2VsZWN0KG51bGwsIGUuY3RybEtleSB8fCBlLm1ldGFLZXkgfHwgZS5zaGlmdEtleSkKCQkJCQl9KSwgdnQodGhpcywgZSwgdCwgbikKCQkJCX0KCQkJfTsKCQkJdmFyIFh0ID0gZnVuY3Rpb24oKSB7fTsKCQkJWHQucHJvdG90eXBlID0gewoJCQkJaXNDYXJ0ZXNpYW46ICEwLAoJCQkJdHlwZTogImxpbmUiLAoJCQkJcG9pbnRDbGFzczogR3QsCgkJCQlzb3J0ZWQ6ICEwLAoJCQkJcmVxdWlyZVNvcnRpbmc6ICEwLAoJCQkJcG9pbnRBdHRyVG9PcHRpb25zOiB7CgkJCQkJc3Ryb2tlOiAibGluZUNvbG9yIiwKCQkJCQkic3Ryb2tlLXdpZHRoIjogImxpbmVXaWR0aCIsCgkJCQkJZmlsbDogImZpbGxDb2xvciIsCgkJCQkJcjogInJhZGl1cyIKCQkJCX0sCgkJCQlheGlzVHlwZXM6IFsieEF4aXMiLCAieUF4aXMiXSwKCQkJCWNvbG9yQ291bnRlcjogMCwKCQkJCXBhcmFsbGVsQXJyYXlzOiBbIngiLCAieSJdLAoJCQkJaW5pdDogZnVuY3Rpb24oZSwgdCkgewoJCQkJCXZhciBuLCBpLCBvID0gdGhpcywKCQkJCQkJciA9IGUuc2VyaWVzLAoJCQkJCQlzID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJCQkJcmV0dXJuIF8oZS5vcHRpb25zLmluZGV4LCBlLl9pKSAtIF8odC5vcHRpb25zLmluZGV4LCB0Ll9pKQoJCQkJCQl9OwoJCQkJCW8uY2hhcnQgPSBlLCBvLm9wdGlvbnMgPSB0ID0gby5zZXRPcHRpb25zKHQpLCBvLmxpbmtlZFNlcmllcyA9IFtdLCBvLmJpbmRBeGVzKCksIGEobywgewoJCQkJCQluYW1lOiB0Lm5hbWUsCgkJCQkJCXN0YXRlOiBpdCwKCQkJCQkJcG9pbnRBdHRyOiB7fSwKCQkJCQkJdmlzaWJsZTogdC52aXNpYmxlICE9PSAhMSwKCQkJCQkJc2VsZWN0ZWQ6IHQuc2VsZWN0ZWQgPT09ICEwCgkJCQkJfSksIERlICYmICh0LmFuaW1hdGlvbiA9ICExKSwgaSA9IHQuZXZlbnRzOwoJCQkJCWZvciAobiBpbiBpKSB4dChvLCBuLCBpW25dKTsKCQkJCQkoaSAmJiBpLmNsaWNrIHx8IHQucG9pbnQgJiYgdC5wb2ludC5ldmVudHMgJiYgdC5wb2ludC5ldmVudHMuY2xpY2sgfHwgdC5hbGxvd1BvaW50U2VsZWN0KSAmJiAoZS5ydW5UcmFja2VyQ2xpY2sgPSAhMCksIG8uZ2V0Q29sb3IoKSwgby5nZXRTeW1ib2woKSwgbXQoby5wYXJhbGxlbEFycmF5cywgZnVuY3Rpb24oZSkgewoJCQkJCQlvW2UgKyAiRGF0YSJdID0gW10KCQkJCQl9KSwgby5zZXREYXRhKHQuZGF0YSwgITEpLCBvLmlzQ2FydGVzaWFuICYmIChlLmhhc0NhcnRlc2lhblNlcmllcyA9ICEwKSwgci5wdXNoKG8pLCBvLl9pID0gci5sZW5ndGggLSAxLCBTKHIsIHMpLCB0aGlzLnlBeGlzICYmIFModGhpcy55QXhpcy5zZXJpZXMsIHMpLCBtdChyLCBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCWUuaW5kZXggPSB0LCBlLm5hbWUgPSBlLm5hbWUgfHwgIlNlcmllcyAiICsgKHQgKyAxKQoJCQkJCX0pCgkJCQl9LAoJCQkJYmluZEF4ZXM6IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlLCB0ID0gdGhpcywKCQkJCQkJbiA9IHQub3B0aW9ucywKCQkJCQkJaSA9IHQuY2hhcnQ7CgkJCQkJbXQodC5heGlzVHlwZXMgfHwgW10sIGZ1bmN0aW9uKGEpIHsKCQkJCQkJbXQoaVthXSwgZnVuY3Rpb24oaSkgewoJCQkJCQkJZSA9IGkub3B0aW9ucywgKG5bYV0gPT09IGUuaW5kZXggfHwgblthXSAhPT0gVyAmJiBuW2FdID09PSBlLmlkIHx8IG5bYV0gPT09IFcgJiYgMCA9PT0gZS5pbmRleCkgJiYgKGkuc2VyaWVzLnB1c2godCksIHRbYV0gPSBpLCBpLmlzRGlydHkgPSAhMCkKCQkJCQkJfSksIHRbYV0gfHwgdC5vcHRpb25hbEF4aXMgPT09IGEgfHwgSygxOCwgITApCgkJCQkJfSkKCQkJCX0sCgkJCQl1cGRhdGVQYXJhbGxlbEFycmF5czogZnVuY3Rpb24oZSwgdCkgewoJCQkJCXZhciBuID0gZS5zZXJpZXMsCgkJCQkJCWkgPSBhcmd1bWVudHMsCgkJCQkJCWEgPSAibnVtYmVyIiA9PSB0eXBlb2YgdCA/IGZ1bmN0aW9uKGkpIHsKCQkJCQkJCXZhciBhID0gInkiID09PSBpICYmIG4udG9ZRGF0YSA/IG4udG9ZRGF0YShlKSA6IGVbaV07CgkJCQkJCQluW2kgKyAiRGF0YSJdW3RdID0gYQoJCQkJCQl9IDogZnVuY3Rpb24oZSkgewoJCQkJCQkJQXJyYXkucHJvdG90eXBlW3RdLmFwcGx5KG5bZSArICJEYXRhIl0sIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGksIDIpKQoJCQkJCQl9OwoJCQkJCW10KG4ucGFyYWxsZWxBcnJheXMsIGEpCgkJCQl9LAoJCQkJYXV0b0luY3JlbWVudDogZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSB0aGlzLAoJCQkJCQl0ID0gZS5vcHRpb25zLAoJCQkJCQluID0gZS54SW5jcmVtZW50OwoJCQkJCXJldHVybiBuID0gXyhuLCB0LnBvaW50U3RhcnQsIDApLCBlLnBvaW50SW50ZXJ2YWwgPSBfKGUucG9pbnRJbnRlcnZhbCwgdC5wb2ludEludGVydmFsLCAxKSwgZS54SW5jcmVtZW50ID0gbiArIGUucG9pbnRJbnRlcnZhbCwgbgoJCQkJfSwKCQkJCWdldFNlZ21lbnRzOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSwgdCA9IHRoaXMsCgkJCQkJCW4gPSAtMSwKCQkJCQkJaSA9IFtdLAoJCQkJCQlhID0gdC5wb2ludHMsCgkJCQkJCW8gPSBhLmxlbmd0aDsKCQkJCQlpZiAobykKCQkJCQkJaWYgKHQub3B0aW9ucy5jb25uZWN0TnVsbHMpIHsKCQkJCQkJCWZvciAoZSA9IG87IGUtLTspIG51bGwgPT09IGFbZV0ueSAmJiBhLnNwbGljZShlLCAxKTsKCQkJCQkJCWEubGVuZ3RoICYmIChpID0gW2FdKQoJCQkJCQl9IGVsc2UgbXQoYSwgZnVuY3Rpb24oZSwgdCkgewoJCQkJCQkJbnVsbCA9PT0gZS55ID8gKHQgPiBuICsgMSAmJiBpLnB1c2goYS5zbGljZShuICsgMSwgdCkpLCBuID0gdCkgOiB0ID09PSBvIC0gMSAmJiBpLnB1c2goYS5zbGljZShuICsgMSwgdCArIDEpKQoJCQkJCQl9KTsKCQkJCQl0LnNlZ21lbnRzID0gaQoJCQkJfSwKCQkJCXNldE9wdGlvbnM6IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCwgbiA9IHRoaXMuY2hhcnQsCgkJCQkJCWkgPSBuLm9wdGlvbnMsCgkJCQkJCWEgPSBpLnBsb3RPcHRpb25zLAoJCQkJCQlyID0gbi51c2VyT3B0aW9ucyB8fCB7fSwKCQkJCQkJcyA9IHIucGxvdE9wdGlvbnMgfHwge30sCgkJCQkJCWwgPSBhW3RoaXMudHlwZV07CgkJCQkJcmV0dXJuIHRoaXMudXNlck9wdGlvbnMgPSBlLCB0ID0gbyhsLCBhLnNlcmllcywgZSksIHRoaXMudG9vbHRpcE9wdGlvbnMgPSBvKEcudG9vbHRpcCwgRy5wbG90T3B0aW9uc1t0aGlzLnR5cGVdLnRvb2x0aXAsIHIudG9vbHRpcCwgcy5zZXJpZXMgJiYgcy5zZXJpZXMudG9vbHRpcCwgc1t0aGlzLnR5cGVdICYmIHNbdGhpcy50eXBlXS50b29sdGlwLCBlLnRvb2x0aXApLCBudWxsID09PSBsLm1hcmtlciAmJiBkZWxldGUgdC5tYXJrZXIsIHQKCQkJCX0sCgkJCQlnZXRDeWNsaWM6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQl2YXIgaSwgYSA9IHRoaXMudXNlck9wdGlvbnMsCgkJCQkJCW8gPSAiXyIgKyBlICsgIkluZGV4IiwKCQkJCQkJciA9IGUgKyAiQ291bnRlciI7CgkJCQkJdCB8fCAobShhW29dKSA/IGkgPSBhW29dIDogKGFbb10gPSBpID0gdGhpcy5jaGFydFtyXSAlIG4ubGVuZ3RoLCB0aGlzLmNoYXJ0W3JdICs9IDEpLCB0ID0gbltpXSksIHRoaXNbZV0gPSB0CgkJCQl9LAoJCQkJZ2V0Q29sb3I6IGZ1bmN0aW9uKCkgewoJCQkJCXRoaXMub3B0aW9ucy5jb2xvckJ5UG9pbnQgfHwgdGhpcy5nZXRDeWNsaWMoImNvbG9yIiwgdGhpcy5vcHRpb25zLmNvbG9yIHx8IEJ0W3RoaXMudHlwZV0uY29sb3IsIHRoaXMuY2hhcnQub3B0aW9ucy5jb2xvcnMpCgkJCQl9LAoJCQkJZ2V0U3ltYm9sOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IHRoaXMub3B0aW9ucy5tYXJrZXI7CgkJCQkJdGhpcy5nZXRDeWNsaWMoInN5bWJvbCIsIGUuc3ltYm9sLCB0aGlzLmNoYXJ0Lm9wdGlvbnMuc3ltYm9scyksIC9edXJsLy50ZXN0KHRoaXMuc3ltYm9sKSAmJiAoZS5yYWRpdXMgPSAwKQoJCQkJfSwKCQkJCWRyYXdMZWdlbmRTeW1ib2w6IFV0LmRyYXdMaW5lTWFya2VyLAoJCQkJc2V0RGF0YTogZnVuY3Rpb24oZSwgdCwgbiwgaSkgewoJCQkJCXZhciBhLCBvLCByLCBsID0gdGhpcywKCQkJCQkJcCA9IGwucG9pbnRzLAoJCQkJCQloID0gcCAmJiBwLmxlbmd0aCB8fCAwLAoJCQkJCQl1ID0gbC5vcHRpb25zLAoJCQkJCQltID0gbC5jaGFydCwKCQkJCQkJZiA9IG51bGwsCgkJCQkJCWcgPSBsLnhBeGlzLAoJCQkJCQl4ID0gZyAmJiAhIWcuY2F0ZWdvcmllcywKCQkJCQkJdyA9IGwudG9vbHRpcFBvaW50cywKCQkJCQkJdiA9IHUudHVyYm9UaHJlc2hvbGQsCgkJCQkJCWIgPSB0aGlzLnhEYXRhLAoJCQkJCQl5ID0gdGhpcy55RGF0YSwKCQkJCQkJayA9IGwucG9pbnRBcnJheU1hcCwKCQkJCQkJeiA9IGsgJiYgay5sZW5ndGg7CgkJCQkJaWYgKGUgPSBlIHx8IFtdLCBhID0gZS5sZW5ndGgsIHQgPSBfKHQsICEwKSwgaSA9PT0gITEgfHwgIWEgfHwgaCAhPT0gYSB8fCBsLmNyb3BwZWQgfHwgbC5oYXNHcm91cGVkRGF0YSkgewoJCQkJCQlpZiAobC54SW5jcmVtZW50ID0gbnVsbCwgbC5wb2ludFJhbmdlID0geCA/IDEgOiB1LnBvaW50UmFuZ2UsIGwuY29sb3JDb3VudGVyID0gMCwgbXQodGhpcy5wYXJhbGxlbEFycmF5cywgZnVuY3Rpb24oZSkgewoJCQkJCQkJbFtlICsgIkRhdGEiXS5sZW5ndGggPSAwCgkJCQkJCX0pLCB2ICYmIGEgPiB2KSB7CgkJCQkJCQlmb3IgKG8gPSAwOyBudWxsID09PSBmICYmIGEgPiBvOykgZiA9IGVbb10sIG8rKzsKCQkJCQkJCWlmIChkKGYpKSB7CgkJCQkJCQkJdmFyIEIgPSBfKHUucG9pbnRTdGFydCwgMCksCgkJCQkJCQkJCWogPSBfKHUucG9pbnRJbnRlcnZhbCwgMSk7CgkJCQkJCQkJZm9yIChvID0gMDsgYSA+IG87IG8rKykgYltvXSA9IEIsIHlbb10gPSBlW29dLCBCICs9IGo7CgkJCQkJCQkJbC54SW5jcmVtZW50ID0gQgoJCQkJCQkJfSBlbHNlIGlmIChjKGYpKQoJCQkJCQkJCWlmICh6KQoJCQkJCQkJCQlmb3IgKG8gPSAwOyBhID4gbzsgbysrKSByID0gZVtvXSwgYltvXSA9IHJbMF0sIHlbb10gPSByLnNsaWNlKDEsIHogKyAxKTsKCQkJCQkJCQllbHNlCgkJCQkJCQkJCWZvciAobyA9IDA7IGEgPiBvOyBvKyspIHIgPSBlW29dLCBiW29dID0gclswXSwgeVtvXSA9IHJbMV07CgkJCQkJCQllbHNlIEsoMTIpCgkJCQkJCX0gZWxzZQoJCQkJCQkJZm9yIChvID0gMDsgYSA+IG87IG8rKykgZVtvXSAhPT0gVyAmJiAociA9IHsKCQkJCQkJCQlzZXJpZXM6IGwKCQkJCQkJCX0sIGwucG9pbnRDbGFzcy5wcm90b3R5cGUuYXBwbHlPcHRpb25zLmFwcGx5KHIsIFtlW29dXSksIGwudXBkYXRlUGFyYWxsZWxBcnJheXMociwgbyksIHggJiYgci5uYW1lICYmIChnLm5hbWVzW3IueF0gPSByLm5hbWUpKTsKCQkJCQkJZm9yIChzKHlbMF0pICYmIEsoMTQsICEwKSwgbC5kYXRhID0gW10sIGwub3B0aW9ucy5kYXRhID0gZSwgbyA9IGg7IG8tLTspIHBbb10gJiYgcFtvXS5kZXN0cm95ICYmIHBbb10uZGVzdHJveSgpOwoJCQkJCQl3ICYmICh3Lmxlbmd0aCA9IDApLCBnICYmIChnLm1pblJhbmdlID0gZy51c2VyTWluUmFuZ2UpLCBsLmlzRGlydHkgPSBsLmlzRGlydHlEYXRhID0gbS5pc0RpcnR5Qm94ID0gITAsIG4gPSAhMQoJCQkJCX0gZWxzZSBtdChlLCBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCXBbdF0udXBkYXRlKGUsICExLCBudWxsLCAhMSkKCQkJCQl9KTsKCQkJCQl0ICYmIG0ucmVkcmF3KG4pCgkJCQl9LAoJCQkJcHJvY2Vzc0RhdGE6IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCwgbiwgaSwgYSwgbywgciwgcywgbCwgYyA9IHRoaXMsCgkJCQkJCWQgPSBjLnhEYXRhLAoJCQkJCQlwID0gYy55RGF0YSwKCQkJCQkJaCA9IGQubGVuZ3RoLAoJCQkJCQl1ID0gMCwKCQkJCQkJbSA9IGMueEF4aXMsCgkJCQkJCWYgPSBjLm9wdGlvbnMsCgkJCQkJCWcgPSBmLmNyb3BUaHJlc2hvbGQsCgkJCQkJCV8gPSAwLAoJCQkJCQl4ID0gYy5pc0NhcnRlc2lhbjsKCQkJCQlpZiAoeCAmJiAhYy5pc0RpcnR5ICYmICFtLmlzRGlydHkgJiYgIWMueUF4aXMuaXNEaXJ0eSAmJiAhZSkgcmV0dXJuICExOwoJCQkJCWZvciAobSAmJiAociA9IG0uZ2V0RXh0cmVtZXMoKSwgcyA9IHIubWluLCBsID0gci5tYXgpLCB4ICYmIGMuc29ydGVkICYmICghZyB8fCBoID4gZyB8fCBjLmZvcmNlQ3JvcCkgJiYgKGRbaCAtIDFdIDwgcyB8fCBkWzBdID4gbCA/IChkID0gW10sIHAgPSBbXSkgOiAoZFswXSA8IHMgfHwgZFtoIC0gMV0gPiBsKSAmJiAodCA9IHRoaXMuY3JvcERhdGEoYy54RGF0YSwgYy55RGF0YSwgcywgbCksIGQgPSB0LnhEYXRhLCBwID0gdC55RGF0YSwgdSA9IHQuc3RhcnQsIG4gPSAhMCwgXyA9IGQubGVuZ3RoKSksIG8gPSBkLmxlbmd0aCAtIDE7IG8gPj0gMDsgby0tKSBpID0gZFtvXSAtIGRbbyAtIDFdLCAhbiAmJiBkW29dID4gcyAmJiBkW29dIDwgbCAmJiBfKyssIGkgPiAwICYmIChhID09PSBXIHx8IGEgPiBpKSA/IGEgPSBpIDogMCA+IGkgJiYgYy5yZXF1aXJlU29ydGluZyAmJiBLKDE1KTsKCQkJCQljLmNyb3BwZWQgPSBuLCBjLmNyb3BTdGFydCA9IHUsIGMucHJvY2Vzc2VkWERhdGEgPSBkLCBjLnByb2Nlc3NlZFlEYXRhID0gcCwgYy5hY3RpdmVQb2ludENvdW50ID0gXywgbnVsbCA9PT0gZi5wb2ludFJhbmdlICYmIChjLnBvaW50UmFuZ2UgPSBhIHx8IDEpLCBjLmNsb3Nlc3RQb2ludFJhbmdlID0gYQoJCQkJfSwKCQkJCWNyb3BEYXRhOiBmdW5jdGlvbihlLCB0LCBuLCBpKSB7CgkJCQkJdmFyIGEsIG8gPSBlLmxlbmd0aCwKCQkJCQkJciA9IDAsCgkJCQkJCXMgPSBvLAoJCQkJCQlsID0gXyh0aGlzLmNyb3BTaG91bGRlciwgMSk7CgkJCQkJZm9yIChhID0gMDsgbyA+IGE7IGErKykKCQkJCQkJaWYgKGVbYV0gPj0gbikgewoJCQkJCQkJciA9IGJlKDAsIGEgLSBsKTsKCQkJCQkJCWJyZWFrCgkJCQkJCX0KCQkJCQlmb3IgKDsgbyA+IGE7IGErKykKCQkJCQkJaWYgKGVbYV0gPiBpKSB7CgkJCQkJCQlzID0gYSArIGw7CgkJCQkJCQlicmVhawoJCQkJCQl9CgkJCQkJcmV0dXJuIHsKCQkJCQkJeERhdGE6IGUuc2xpY2UociwgcyksCgkJCQkJCXlEYXRhOiB0LnNsaWNlKHIsIHMpLAoJCQkJCQlzdGFydDogciwKCQkJCQkJZW5kOiBzCgkJCQkJfQoJCQkJfSwKCQkJCWdlbmVyYXRlUG9pbnRzOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSwgdCwgbiwgaSwgYSA9IHRoaXMsCgkJCQkJCW8gPSBhLm9wdGlvbnMsCgkJCQkJCXIgPSBvLmRhdGEsCgkJCQkJCXMgPSBhLmRhdGEsCgkJCQkJCWwgPSBhLnByb2Nlc3NlZFhEYXRhLAoJCQkJCQljID0gYS5wcm9jZXNzZWRZRGF0YSwKCQkJCQkJZCA9IGEucG9pbnRDbGFzcywKCQkJCQkJcCA9IGwubGVuZ3RoLAoJCQkJCQloID0gYS5jcm9wU3RhcnQgfHwgMCwKCQkJCQkJdSA9IGEuaGFzR3JvdXBlZERhdGEsCgkJCQkJCW0gPSBbXTsKCQkJCQlpZiAoIXMgJiYgIXUpIHsKCQkJCQkJdmFyIGYgPSBbXTsKCQkJCQkJZi5sZW5ndGggPSByLmxlbmd0aCwgcyA9IGEuZGF0YSA9IGYKCQkJCQl9CgkJCQkJZm9yIChpID0gMDsgcCA+IGk7IGkrKykgdCA9IGggKyBpLCB1ID8gbVtpXSA9IChuZXcgZCkuaW5pdChhLCBbbFtpXV0uY29uY2F0KGcoY1tpXSkpKSA6IChzW3RdID8gbiA9IHNbdF0gOiByW3RdICE9PSBXICYmIChzW3RdID0gbiA9IChuZXcgZCkuaW5pdChhLCByW3RdLCBsW2ldKSksIG1baV0gPSBuKSwgbVtpXS5pbmRleCA9IHQ7CgkJCQkJaWYgKHMgJiYgKHAgIT09IChlID0gcy5sZW5ndGgpIHx8IHUpKQoJCQkJCQlmb3IgKGkgPSAwOyBlID4gaTsgaSsrKSBpICE9PSBoIHx8IHUgfHwgKGkgKz0gcCksIHNbaV0gJiYgKHNbaV0uZGVzdHJveUVsZW1lbnRzKCksIHNbaV0ucGxvdFggPSBXKTsKCQkJCQlhLmRhdGEgPSBzLCBhLnBvaW50cyA9IG0KCQkJCX0sCgkJCQlnZXRFeHRyZW1lczogZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0LCBuLCBpLCBhLCBvLCByLCBzLCBsLCBjLCBkID0gdGhpcy54QXhpcywKCQkJCQkJcCA9IHRoaXMueUF4aXMsCgkJCQkJCWggPSB0aGlzLnByb2Nlc3NlZFhEYXRhLAoJCQkJCQl1ID0gW10sCgkJCQkJCW0gPSAwLAoJCQkJCQlmID0gZC5nZXRFeHRyZW1lcygpLAoJCQkJCQlnID0gZi5taW4sCgkJCQkJCXggPSBmLm1heDsKCQkJCQlmb3IgKGUgPSBlIHx8IHRoaXMuc3RhY2tlZFlEYXRhIHx8IHRoaXMucHJvY2Vzc2VkWURhdGEsIHQgPSBlLmxlbmd0aCwgbCA9IDA7IHQgPiBsOyBsKyspCgkJCQkJCWlmIChyID0gaFtsXSwgcyA9IGVbbF0sIG4gPSBudWxsICE9PSBzICYmIHMgIT09IFcgJiYgKCFwLmlzTG9nIHx8IHMubGVuZ3RoIHx8IHMgPiAwKSwgaSA9IHRoaXMuZ2V0RXh0cmVtZXNGcm9tQWxsIHx8IHRoaXMuY3JvcHBlZCB8fCAoaFtsICsgMV0gfHwgcikgPj0gZyAmJiAoaFtsIC0gMV0gfHwgcikgPD0geCwgbiAmJiBpKQoJCQkJCQkJaWYgKGMgPSBzLmxlbmd0aCkKCQkJCQkJCQlmb3IgKDsgYy0tOykgbnVsbCAhPT0gc1tjXSAmJiAodVttKytdID0gc1tjXSk7CgkJCQkJCQllbHNlIHVbbSsrXSA9IHM7CgkJCQkJdGhpcy5kYXRhTWluID0gXyhhLCBOKHUpKSwgdGhpcy5kYXRhTWF4ID0gXyhvLCBUKHUpKQoJCQkJfSwKCQkJCXRyYW5zbGF0ZTogZnVuY3Rpb24oKSB7CgkJCQkJdGhpcy5wcm9jZXNzZWRYRGF0YSB8fCB0aGlzLnByb2Nlc3NEYXRhKCksIHRoaXMuZ2VuZXJhdGVQb2ludHMoKTsKCQkJCQl2YXIgZSwgdCA9IHRoaXMsCgkJCQkJCW4gPSB0Lm9wdGlvbnMsCgkJCQkJCWkgPSBuLnN0YWNraW5nLAoJCQkJCQlhID0gdC54QXhpcywKCQkJCQkJbyA9IGEuY2F0ZWdvcmllcywKCQkJCQkJciA9IHQueUF4aXMsCgkJCQkJCXMgPSB0LnBvaW50cywKCQkJCQkJbCA9IHMubGVuZ3RoLAoJCQkJCQljID0gISF0Lm1vZGlmeVZhbHVlLAoJCQkJCQlwID0gbi5wb2ludFBsYWNlbWVudCwKCQkJCQkJaCA9ICJiZXR3ZWVuIiA9PT0gcCB8fCBkKHApLAoJCQkJCQl1ID0gbi50aHJlc2hvbGQ7CgkJCQkJZm9yIChlID0gMDsgbCA+IGU7IGUrKykgewoJCQkJCQl2YXIgZiwgZywgeCA9IHNbZV0sCgkJCQkJCQl3ID0geC54LAoJCQkJCQkJdiA9IHgueSwKCQkJCQkJCWIgPSB4LmxvdywKCQkJCQkJCXkgPSBpICYmIHIuc3RhY2tzWyh0Lm5lZ1N0YWNrcyAmJiB1ID4gdiA/ICItIiA6ICIiKSArIHQuc3RhY2tLZXldOwoJCQkJCQlyLmlzTG9nICYmIDAgPj0gdiAmJiAoeC55ID0gdiA9IG51bGwsIEsoMTApKSwgeC5wbG90WCA9IGEudHJhbnNsYXRlKHcsIDAsIDAsIDAsIDEsIHAsICJmbGFncyIgPT09IHRoaXMudHlwZSksIGkgJiYgdC52aXNpYmxlICYmIHkgJiYgeVt3XSAmJiAoZiA9IHlbd10sIGcgPSBmLnBvaW50c1t0LmluZGV4ICsgIiwiICsgZV0sIGIgPSBnWzBdLCB2ID0gZ1sxXSwgMCA9PT0gYiAmJiAoYiA9IF8odSwgci5taW4pKSwgci5pc0xvZyAmJiAwID49IGIgJiYgKGIgPSBudWxsKSwgeC50b3RhbCA9IHguc3RhY2tUb3RhbCA9IGYudG90YWwsIHgucGVyY2VudGFnZSA9IGYudG90YWwgJiYgeC55IC8gZi50b3RhbCAqIDEwMCwgeC5zdGFja1kgPSB2LCBmLnNldE9mZnNldCh0LnBvaW50WE9mZnNldCB8fCAwLCB0LmJhclcgfHwgMCkpLCB4LnlCb3R0b20gPSBtKGIpID8gci50cmFuc2xhdGUoYiwgMCwgMSwgMCwgMSkgOiBudWxsLCBjICYmICh2ID0gdC5tb2RpZnlWYWx1ZSh2LCB4KSksIHgucGxvdFkgPSAibnVtYmVyIiA9PSB0eXBlb2YgdiAmJiB2ICE9PSAxIC8gMCA/IHIudHJhbnNsYXRlKHYsIDAsIDEsIDAsIDEpIDogVywgeC5jbGllbnRYID0gaCA/IGEudHJhbnNsYXRlKHcsIDAsIDAsIDAsIDEpIDogeC5wbG90WCwgeC5uZWdhdGl2ZSA9IHgueSA8ICh1IHx8IDApLCB4LmNhdGVnb3J5ID0gbyAmJiBvW3gueF0gIT09IFcgPyBvW3gueF0gOiB4LngKCQkJCQl9CgkJCQkJdC5nZXRTZWdtZW50cygpCgkJCQl9LAoJCQkJYW5pbWF0ZTogZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0LCBuLCBpLCBvID0gdGhpcywKCQkJCQkJciA9IG8uY2hhcnQsCgkJCQkJCXMgPSByLnJlbmRlcmVyLAoJCQkJCQljID0gby5vcHRpb25zLmFuaW1hdGlvbiwKCQkJCQkJZCA9IG8uY2xpcEJveCB8fCByLmNsaXBCb3gsCgkJCQkJCXAgPSByLmludmVydGVkOwoJCQkJCWMgJiYgIWwoYykgJiYgKGMgPSBCdFtvLnR5cGVdLmFuaW1hdGlvbiksIGkgPSBbIl9zaGFyZWRDbGlwIiwgYy5kdXJhdGlvbiwgYy5lYXNpbmcsIGQuaGVpZ2h0XS5qb2luKCIsIiksIGUgPyAodCA9IHJbaV0sIG4gPSByW2kgKyAibSJdLCB0IHx8IChyW2ldID0gdCA9IHMuY2xpcFJlY3QoYShkLCB7CgkJCQkJCXdpZHRoOiAwCgkJCQkJfSkpLCByW2kgKyAibSJdID0gbiA9IHMuY2xpcFJlY3QoLTk5LCBwID8gLXIucGxvdExlZnQgOiAtci5wbG90VG9wLCA5OSwgcCA/IHIuY2hhcnRXaWR0aCA6IHIuY2hhcnRIZWlnaHQpKSwgby5ncm91cC5jbGlwKHQpLCBvLm1hcmtlckdyb3VwLmNsaXAobiksIG8uc2hhcmVkQ2xpcEtleSA9IGkpIDogKHQgPSByW2ldLCB0ICYmIHQuYW5pbWF0ZSh7CgkJCQkJCXdpZHRoOiByLnBsb3RTaXplWAoJCQkJCX0sIGMpLCByW2kgKyAibSJdICYmIHJbaSArICJtIl0uYW5pbWF0ZSh7CgkJCQkJCXdpZHRoOiByLnBsb3RTaXplWCArIDk5CgkJCQkJfSwgYyksIG8uYW5pbWF0ZSA9IG51bGwpCgkJCQl9LAoJCQkJYWZ0ZXJBbmltYXRlOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IHRoaXMuY2hhcnQsCgkJCQkJCXQgPSB0aGlzLnNoYXJlZENsaXBLZXksCgkJCQkJCW4gPSB0aGlzLmdyb3VwLAoJCQkJCQlpID0gdGhpcy5jbGlwQm94OwoJCQkJCW4gJiYgdGhpcy5vcHRpb25zLmNsaXAgIT09ICExICYmICh0ICYmIGkgfHwgbi5jbGlwKGkgPyBlLnJlbmRlcmVyLmNsaXBSZWN0KGkpIDogZS5jbGlwUmVjdCksIHRoaXMubWFya2VyR3JvdXAuY2xpcCgpKSwgdnQodGhpcywgImFmdGVyQW5pbWF0ZSIpLCBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCQl0ICYmIGVbdF0gJiYgKGkgfHwgKGVbdF0gPSBlW3RdLmRlc3Ryb3koKSksIGVbdCArICJtIl0gJiYgKGVbdCArICJtIl0gPSBlW3QgKyAibSJdLmRlc3Ryb3koKSkpCgkJCQkJfSwgMTAwKQoJCQkJfSwKCQkJCWRyYXdQb2ludHM6IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlLCB0LCBuLCBpLCBvLCByLCBzLCBsLCBjLCBkLCBwLCBoLCB1LCBtID0gdGhpcywKCQkJCQkJZiA9IG0ucG9pbnRzLAoJCQkJCQlnID0gbS5jaGFydCwKCQkJCQkJeCA9IG0ub3B0aW9ucywKCQkJCQkJdyA9IHgubWFya2VyLAoJCQkJCQl2ID0gbS5wb2ludEF0dHJbIiJdLAoJCQkJCQliID0gbS5tYXJrZXJHcm91cCwKCQkJCQkJeSA9IF8ody5lbmFibGVkLCAhbS5yZXF1aXJlU29ydGluZyB8fCBtLmFjdGl2ZVBvaW50Q291bnQgPCAuNSAqIG0ueEF4aXMubGVuIC8gdy5yYWRpdXMpOwoJCQkJCWlmICh3LmVuYWJsZWQgIT09ICExIHx8IG0uX2hhc1BvaW50TWFya2VycykKCQkJCQkJZm9yIChpID0gZi5sZW5ndGg7IGktLTspIG8gPSBmW2ldLCB0ID0gd2Uoby5wbG90WCksIG4gPSBvLnBsb3RZLCBjID0gby5ncmFwaGljLCBkID0gby5tYXJrZXIgfHwge30sIHAgPSAhIW8ubWFya2VyLCBoID0geSAmJiBkLmVuYWJsZWQgPT09IFcgfHwgZC5lbmFibGVkLCB1ID0gZy5pc0luc2lkZVBsb3QoeGUodCksIG4sIGcuaW52ZXJ0ZWQpLCBoICYmIG4gIT09IFcgJiYgIWlzTmFOKG4pICYmIG51bGwgIT09IG8ueSA/IChlID0gby5wb2ludEF0dHJbby5zZWxlY3RlZCA/IG90IDogaXRdIHx8IHYsIHIgPSBlLnIsIHMgPSBfKGQuc3ltYm9sLCBtLnN5bWJvbCksIGwgPSAwID09PSBzLmluZGV4T2YoInVybCIpLCBjID8gY1t1ID8gInNob3ciIDogImhpZGUiXSghMCkuYW5pbWF0ZShhKHsKCQkJCQkJCXg6IHQgLSByLAoJCQkJCQkJeTogbiAtIHIKCQkJCQkJfSwgYy5zeW1ib2xOYW1lID8gewoJCQkJCQkJd2lkdGg6IDIgKiByLAoJCQkJCQkJaGVpZ2h0OiAyICogcgoJCQkJCQl9IDoge30pKSA6IHUgJiYgKHIgPiAwIHx8IGwpICYmIChvLmdyYXBoaWMgPSBjID0gZy5yZW5kZXJlci5zeW1ib2wocywgdCAtIHIsIG4gLSByLCAyICogciwgMiAqIHIsIHAgPyBkIDogdykuYXR0cihlKS5hZGQoYikpKSA6IGMgJiYgKG8uZ3JhcGhpYyA9IGMuZGVzdHJveSgpKQoJCQkJfSwKCQkJCWNvbnZlcnRBdHRyaWJzOiBmdW5jdGlvbihlLCB0LCBuLCBpKSB7CgkJCQkJdmFyIGEsIG8sIHIgPSB0aGlzLnBvaW50QXR0clRvT3B0aW9ucywKCQkJCQkJcyA9IHt9OwoJCQkJCWUgPSBlIHx8IHt9LCB0ID0gdCB8fCB7fSwgbiA9IG4gfHwge30sIGkgPSBpIHx8IHt9OwoJCQkJCWZvciAoYSBpbiByKSBvID0gclthXSwgc1thXSA9IF8oZVtvXSwgdFthXSwgblthXSwgaVthXSk7CgkJCQkJcmV0dXJuIHMKCQkJCX0sCgkJCQlnZXRBdHRyaWJzOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSwgdCwgbiwgaSwgbywgciwgcyA9IHRoaXMsCgkJCQkJCWwgPSBzLm9wdGlvbnMsCgkJCQkJCWMgPSBCdFtzLnR5cGVdLm1hcmtlciA/IGwubWFya2VyIDogbCwKCQkJCQkJZCA9IGMuc3RhdGVzLAoJCQkJCQlwID0gZFthdF0sCgkJCQkJCWggPSBzLmNvbG9yLAoJCQkJCQl1ID0gewoJCQkJCQkJc3Ryb2tlOiBoLAoJCQkJCQkJZmlsbDogaAoJCQkJCQl9LAoJCQkJCQlmID0gcy5wb2ludHMgfHwgW10sCgkJCQkJCWcgPSBbXSwKCQkJCQkJXyA9IHMucG9pbnRBdHRyVG9PcHRpb25zLAoJCQkJCQl4ID0gcy5oYXNQb2ludFNwZWNpZmljT3B0aW9ucywKCQkJCQkJdyA9IGwubmVnYXRpdmVDb2xvciwKCQkJCQkJdiA9IGMubGluZUNvbG9yLAoJCQkJCQliID0gYy5maWxsQ29sb3IsCgkJCQkJCXkgPSBsLnR1cmJvVGhyZXNob2xkOwoJCQkJCWlmIChsLm1hcmtlciA/IChwLnJhZGl1cyA9IHAucmFkaXVzIHx8IGMucmFkaXVzICsgcC5yYWRpdXNQbHVzLCBwLmxpbmVXaWR0aCA9IHAubGluZVdpZHRoIHx8IGMubGluZVdpZHRoICsgcC5saW5lV2lkdGhQbHVzKSA6IHAuY29sb3IgPSBwLmNvbG9yIHx8IFR0KHAuY29sb3IgfHwgaCkuYnJpZ2h0ZW4ocC5icmlnaHRuZXNzKS5nZXQoKSwgZ1tpdF0gPSBzLmNvbnZlcnRBdHRyaWJzKGMsIHUpLCBtdChbYXQsIG90XSwgZnVuY3Rpb24oZSkgewoJCQkJCQlnW2VdID0gcy5jb252ZXJ0QXR0cmlicyhkW2VdLCBnW2l0XSkKCQkJCQl9KSwgcy5wb2ludEF0dHIgPSBnLCB0ID0gZi5sZW5ndGgsICF5IHx8IHkgPiB0IHx8IHgpCgkJCQkJCWZvciAoOyB0LS07KSB7CgkJCQkJCQlpZiAobiA9IGZbdF0sIGMgPSBuLm9wdGlvbnMgJiYgbi5vcHRpb25zLm1hcmtlciB8fCBuLm9wdGlvbnMsIGMgJiYgYy5lbmFibGVkID09PSAhMSAmJiAoYy5yYWRpdXMgPSAwKSwgbi5uZWdhdGl2ZSAmJiB3ICYmIChuLmNvbG9yID0gbi5maWxsQ29sb3IgPSB3KSwgeCA9IGwuY29sb3JCeVBvaW50IHx8IG4uY29sb3IsIG4ub3B0aW9ucykKCQkJCQkJCQlmb3IgKHIgaW4gXykgbShjW19bcl1dKSAmJiAoeCA9ICEwKTsKCQkJCQkJCXggPyAoYyA9IGMgfHwge30sIGkgPSBbXSwgZCA9IGMuc3RhdGVzIHx8IHt9LCBlID0gZFthdF0gPSBkW2F0XSB8fCB7fSwgbC5tYXJrZXIgfHwgKGUuY29sb3IgPSBlLmNvbG9yIHx8ICFuLm9wdGlvbnMuY29sb3IgJiYgcC5jb2xvciB8fCBUdChuLmNvbG9yKS5icmlnaHRlbihlLmJyaWdodG5lc3MgfHwgcC5icmlnaHRuZXNzKS5nZXQoKSksIG8gPSB7CgkJCQkJCQkJY29sb3I6IG4uY29sb3IKCQkJCQkJCX0sIGIgfHwgKG8uZmlsbENvbG9yID0gbi5jb2xvciksIHYgfHwgKG8ubGluZUNvbG9yID0gbi5jb2xvciksIGlbaXRdID0gcy5jb252ZXJ0QXR0cmlicyhhKG8sIGMpLCBnW2l0XSksIGlbYXRdID0gcy5jb252ZXJ0QXR0cmlicyhkW2F0XSwgZ1thdF0sIGlbaXRdKSwgaVtvdF0gPSBzLmNvbnZlcnRBdHRyaWJzKGRbb3RdLCBnW290XSwgaVtpdF0pKSA6IGkgPSBnLCBuLnBvaW50QXR0ciA9IGkKCQkJCQkJfQoJCQkJfSwKCQkJCWRlc3Ryb3k6IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlLCB0LCBuLCBpLCBhLCBvID0gdGhpcywKCQkJCQkJciA9IG8uY2hhcnQsCgkJCQkJCXMgPSAvQXBwbGVXZWJLaXRcLzUzMy8udGVzdChTZSksCgkJCQkJCWwgPSBvLmRhdGEgfHwgW107CgkJCQkJZm9yICh2dChvLCAiZGVzdHJveSIpLCB3dChvKSwgbXQoby5heGlzVHlwZXMgfHwgW10sIGZ1bmN0aW9uKGUpIHsKCQkJCQkJYSA9IG9bZV0sIGEgJiYgKHUoYS5zZXJpZXMsIG8pLCBhLmlzRGlydHkgPSBhLmZvcmNlUmVkcmF3ID0gITApCgkJCQkJfSksIG8ubGVnZW5kSXRlbSAmJiBvLmNoYXJ0LmxlZ2VuZC5kZXN0cm95SXRlbShvKSwgdCA9IGwubGVuZ3RoOyB0LS07KSBuID0gbFt0XSwgbiAmJiBuLmRlc3Ryb3kgJiYgbi5kZXN0cm95KCk7CgkJCQkJby5wb2ludHMgPSBudWxsLCBjbGVhclRpbWVvdXQoby5hbmltYXRpb25UaW1lb3V0KSwgbXQoWyJhcmVhIiwgImdyYXBoIiwgImRhdGFMYWJlbHNHcm91cCIsICJncm91cCIsICJtYXJrZXJHcm91cCIsICJ0cmFja2VyIiwgImdyYXBoTmVnIiwgImFyZWFOZWciLCAicG9zQ2xpcCIsICJuZWdDbGlwIl0sIGZ1bmN0aW9uKHQpIHsKCQkJCQkJb1t0XSAmJiAoZSA9IHMgJiYgImdyb3VwIiA9PT0gdCA/ICJoaWRlIiA6ICJkZXN0cm95Iiwgb1t0XVtlXSgpKQoJCQkJCX0pLCByLmhvdmVyU2VyaWVzID09PSBvICYmIChyLmhvdmVyU2VyaWVzID0gbnVsbCksIHUoci5zZXJpZXMsIG8pOwoJCQkJCWZvciAoaSBpbiBvKSBkZWxldGUgb1tpXQoJCQkJfSwKCQkJCWdldFNlZ21lbnRQYXRoOiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQgPSB0aGlzLAoJCQkJCQluID0gW10sCgkJCQkJCWkgPSB0Lm9wdGlvbnMuc3RlcDsKCQkJCQlyZXR1cm4gbXQoZSwgZnVuY3Rpb24oYSwgbykgewoJCQkJCQl2YXIgciwgcyA9IGEucGxvdFgsCgkJCQkJCQlsID0gYS5wbG90WTsKCQkJCQkJdC5nZXRQb2ludFNwbGluZSA/IG4ucHVzaC5hcHBseShuLCB0LmdldFBvaW50U3BsaW5lKGUsIGEsIG8pKSA6IChuLnB1c2gobyA/IHR0IDogZXQpLCBpICYmIG8gJiYgKHIgPSBlW28gLSAxXSwgInJpZ2h0IiA9PT0gaSA/IG4ucHVzaChyLnBsb3RYLCBsKSA6ICJjZW50ZXIiID09PSBpID8gbi5wdXNoKChyLnBsb3RYICsgcykgLyAyLCByLnBsb3RZLCAoci5wbG90WCArIHMpIC8gMiwgbCkgOiBuLnB1c2gocywgci5wbG90WSkpLCBuLnB1c2goYS5wbG90WCwgYS5wbG90WSkpCgkJCQkJfSksIG4KCQkJCX0sCgkJCQlnZXRHcmFwaFBhdGg6IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlLCB0ID0gdGhpcywKCQkJCQkJbiA9IFtdLAoJCQkJCQlpID0gW107CgkJCQkJcmV0dXJuIG10KHQuc2VnbWVudHMsIGZ1bmN0aW9uKGEpIHsKCQkJCQkJZSA9IHQuZ2V0U2VnbWVudFBhdGgoYSksIGEubGVuZ3RoID4gMSA/IG4gPSBuLmNvbmNhdChlKSA6IGkucHVzaChhWzBdKQoJCQkJCX0pLCB0LnNpbmdsZVBvaW50cyA9IGksIHQuZ3JhcGhQYXRoID0gbiwgbgoJCQkJfSwKCQkJCWRyYXdHcmFwaDogZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSB0aGlzLAoJCQkJCQl0ID0gdGhpcy5vcHRpb25zLAoJCQkJCQluID0gWwoJCQkJCQkJWyJncmFwaCIsIHQubGluZUNvbG9yIHx8IHRoaXMuY29sb3JdCgkJCQkJCV0sCgkJCQkJCWkgPSB0LmxpbmVXaWR0aCwKCQkJCQkJYSA9IHQuZGFzaFN0eWxlLAoJCQkJCQlvID0gInNxdWFyZSIgIT09IHQubGluZWNhcCwKCQkJCQkJciA9IHRoaXMuZ2V0R3JhcGhQYXRoKCksCgkJCQkJCXMgPSB0Lm5lZ2F0aXZlQ29sb3I7CgkJCQkJcyAmJiBuLnB1c2goWyJncmFwaE5lZyIsIHNdKSwgbXQobiwgZnVuY3Rpb24obiwgcykgewoJCQkJCQl2YXIgbCwgYyA9IG5bMF0sCgkJCQkJCQlkID0gZVtjXTsKCQkJCQkJZCA/IChrdChkKSwgZC5hbmltYXRlKHsKCQkJCQkJCWQ6IHIKCQkJCQkJfSkpIDogaSAmJiByLmxlbmd0aCAmJiAobCA9IHsKCQkJCQkJCXN0cm9rZTogblsxXSwKCQkJCQkJCSJzdHJva2Utd2lkdGgiOiBpLAoJCQkJCQkJZmlsbDogUWUsCgkJCQkJCQl6SW5kZXg6IDEKCQkJCQkJfSwgYSA/IGwuZGFzaHN0eWxlID0gYSA6IG8gJiYgKGxbInN0cm9rZS1saW5lY2FwIl0gPSBsWyJzdHJva2UtbGluZWpvaW4iXSA9ICJyb3VuZCIpLCBlW2NdID0gZS5jaGFydC5yZW5kZXJlci5wYXRoKHIpLmF0dHIobCkuYWRkKGUuZ3JvdXApLnNoYWRvdyghcyAmJiB0LnNoYWRvdykpCgkJCQkJfSkKCQkJCX0sCgkJCQljbGlwTmVnOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSwgdCwgbiwgaSwgYSwgbyA9IHRoaXMub3B0aW9ucywKCQkJCQkJciA9IHRoaXMuY2hhcnQsCgkJCQkJCXMgPSByLnJlbmRlcmVyLAoJCQkJCQlsID0gby5uZWdhdGl2ZUNvbG9yIHx8IG8ubmVnYXRpdmVGaWxsQ29sb3IsCgkJCQkJCWMgPSB0aGlzLmdyYXBoLAoJCQkJCQlkID0gdGhpcy5hcmVhLAoJCQkJCQlwID0gdGhpcy5wb3NDbGlwLAoJCQkJCQloID0gdGhpcy5uZWdDbGlwLAoJCQkJCQl1ID0gci5jaGFydFdpZHRoLAoJCQkJCQltID0gci5jaGFydEhlaWdodCwKCQkJCQkJZiA9IGJlKHUsIG0pLAoJCQkJCQlnID0gdGhpcy55QXhpczsKCQkJCQlsICYmIChjIHx8IGQpICYmIChlID0geGUoZy50b1BpeGVscyhvLnRocmVzaG9sZCB8fCAwLCAhMCkpLCAwID4gZSAmJiAoZiAtPSBlKSwgaSA9IHsKCQkJCQkJeDogMCwKCQkJCQkJeTogMCwKCQkJCQkJd2lkdGg6IGYsCgkJCQkJCWhlaWdodDogZQoJCQkJCX0sIGEgPSB7CgkJCQkJCXg6IDAsCgkJCQkJCXk6IGUsCgkJCQkJCXdpZHRoOiBmLAoJCQkJCQloZWlnaHQ6IGYKCQkJCQl9LCByLmludmVydGVkICYmIChpLmhlaWdodCA9IGEueSA9IHIucGxvdFdpZHRoIC0gZSwgcy5pc1ZNTCAmJiAoaSA9IHsKCQkJCQkJeDogci5wbG90V2lkdGggLSBlIC0gci5wbG90TGVmdCwKCQkJCQkJeTogMCwKCQkJCQkJd2lkdGg6IHUsCgkJCQkJCWhlaWdodDogbQoJCQkJCX0sIGEgPSB7CgkJCQkJCXg6IGUgKyByLnBsb3RMZWZ0IC0gdSwKCQkJCQkJeTogMCwKCQkJCQkJd2lkdGg6IHIucGxvdExlZnQgKyBlLAoJCQkJCQloZWlnaHQ6IHUKCQkJCQl9KSksIGcucmV2ZXJzZWQgPyAodCA9IGEsIG4gPSBpKSA6ICh0ID0gaSwgbiA9IGEpLCBwID8gKHAuYW5pbWF0ZSh0KSwgaC5hbmltYXRlKG4pKSA6ICh0aGlzLnBvc0NsaXAgPSBwID0gcy5jbGlwUmVjdCh0KSwgdGhpcy5uZWdDbGlwID0gaCA9IHMuY2xpcFJlY3QobiksIGMgJiYgdGhpcy5ncmFwaE5lZyAmJiAoYy5jbGlwKHApLCB0aGlzLmdyYXBoTmVnLmNsaXAoaCkpLCBkICYmIChkLmNsaXAocCksIHRoaXMuYXJlYU5lZy5jbGlwKGgpKSkpCgkJCQl9LAoJCQkJaW52ZXJ0R3JvdXBzOiBmdW5jdGlvbigpIHsKCQkJCQlmdW5jdGlvbiBlKCkgewoJCQkJCQl2YXIgZSA9IHsKCQkJCQkJCXdpZHRoOiB0LnlBeGlzLmxlbiwKCQkJCQkJCWhlaWdodDogdC54QXhpcy5sZW4KCQkJCQkJfTsKCQkJCQkJbXQoWyJncm91cCIsICJtYXJrZXJHcm91cCJdLCBmdW5jdGlvbihuKSB7CgkJCQkJCQl0W25dICYmIHRbbl0uYXR0cihlKS5pbnZlcnQoKQoJCQkJCQl9KQoJCQkJCX0KCQkJCQl2YXIgdCA9IHRoaXMsCgkJCQkJCW4gPSB0LmNoYXJ0OwoJCQkJCXQueEF4aXMgJiYgKHh0KG4sICJyZXNpemUiLCBlKSwgeHQodCwgImRlc3Ryb3kiLCBmdW5jdGlvbigpIHsKCQkJCQkJd3QobiwgInJlc2l6ZSIsIGUpCgkJCQkJfSksIGUoKSwgdC5pbnZlcnRHcm91cHMgPSBlKQoJCQkJfSwKCQkJCXBsb3RHcm91cDogZnVuY3Rpb24oZSwgdCwgbiwgaSwgYSkgewoJCQkJCXZhciBvID0gdGhpc1tlXSwKCQkJCQkJciA9ICFvOwoJCQkJCXJldHVybiByICYmICh0aGlzW2VdID0gbyA9IHRoaXMuY2hhcnQucmVuZGVyZXIuZyh0KS5hdHRyKHsKCQkJCQkJdmlzaWJpbGl0eTogbiwKCQkJCQkJekluZGV4OiBpIHx8IC4xCgkJCQkJfSkuYWRkKGEpKSwgb1tyID8gImF0dHIiIDogImFuaW1hdGUiXSh0aGlzLmdldFBsb3RCb3goKSksIG8KCQkJCX0sCgkJCQlnZXRQbG90Qm94OiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IHRoaXMuY2hhcnQsCgkJCQkJCXQgPSB0aGlzLnhBeGlzLAoJCQkJCQluID0gdGhpcy55QXhpczsKCQkJCQlyZXR1cm4gZS5pbnZlcnRlZCAmJiAodCA9IG4sIG4gPSB0aGlzLnhBeGlzKSwgewoJCQkJCQl0cmFuc2xhdGVYOiB0ID8gdC5sZWZ0IDogZS5wbG90TGVmdCwKCQkJCQkJdHJhbnNsYXRlWTogbiA/IG4udG9wIDogZS5wbG90VG9wLAoJCQkJCQlzY2FsZVg6IDEsCgkJCQkJCXNjYWxlWTogMQoJCQkJCX0KCQkJCX0sCgkJCQlyZW5kZXI6IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlLCB0ID0gdGhpcywKCQkJCQkJbiA9IHQuY2hhcnQsCgkJCQkJCWkgPSB0Lm9wdGlvbnMsCgkJCQkJCWEgPSBpLmFuaW1hdGlvbiwKCQkJCQkJbyA9IGEgJiYgISF0LmFuaW1hdGUgJiYgbi5yZW5kZXJlci5pc1NWRyAmJiBfKGEuZHVyYXRpb24sIDUwMCkgfHwgMCwKCQkJCQkJciA9IHQudmlzaWJsZSA/IFZlIDogSmUsCgkJCQkJCXMgPSBpLnpJbmRleCwKCQkJCQkJbCA9IHQuaGFzUmVuZGVyZWQsCgkJCQkJCWMgPSBuLnNlcmllc0dyb3VwOwoJCQkJCWUgPSB0LnBsb3RHcm91cCgiZ3JvdXAiLCAic2VyaWVzIiwgciwgcywgYyksIHQubWFya2VyR3JvdXAgPSB0LnBsb3RHcm91cCgibWFya2VyR3JvdXAiLCAibWFya2VycyIsIHIsIHMsIGMpLCBvICYmIHQuYW5pbWF0ZSghMCksIHQuZ2V0QXR0cmlicygpLCBlLmludmVydGVkID0gdC5pc0NhcnRlc2lhbiA/IG4uaW52ZXJ0ZWQgOiAhMSwgdC5kcmF3R3JhcGggJiYgKHQuZHJhd0dyYXBoKCksCgkJCQkJCXQuY2xpcE5lZygpKSwgbXQodC5wb2ludHMsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJZS5yZWRyYXcgJiYgZS5yZWRyYXcoKQoJCQkJCX0pLCB0LmRyYXdEYXRhTGFiZWxzICYmIHQuZHJhd0RhdGFMYWJlbHMoKSwgdC52aXNpYmxlICYmIHQuZHJhd1BvaW50cygpLCB0LmRyYXdUcmFja2VyICYmIHQub3B0aW9ucy5lbmFibGVNb3VzZVRyYWNraW5nICE9PSAhMSAmJiB0LmRyYXdUcmFja2VyKCksIG4uaW52ZXJ0ZWQgJiYgdC5pbnZlcnRHcm91cHMoKSwgaS5jbGlwID09PSAhMSB8fCB0LnNoYXJlZENsaXBLZXkgfHwgbCB8fCBlLmNsaXAobi5jbGlwUmVjdCksIG8gJiYgdC5hbmltYXRlKCksIGwgfHwgKG8gPyB0LmFuaW1hdGlvblRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCQl0LmFmdGVyQW5pbWF0ZSgpCgkJCQkJfSwgbykgOiB0LmFmdGVyQW5pbWF0ZSgpKSwgdC5pc0RpcnR5ID0gdC5pc0RpcnR5RGF0YSA9ICExLCB0Lmhhc1JlbmRlcmVkID0gITAKCQkJCX0sCgkJCQlyZWRyYXc6IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gdGhpcywKCQkJCQkJdCA9IGUuY2hhcnQsCgkJCQkJCW4gPSBlLmlzRGlydHlEYXRhLAoJCQkJCQlpID0gZS5ncm91cCwKCQkJCQkJYSA9IGUueEF4aXMsCgkJCQkJCW8gPSBlLnlBeGlzOwoJCQkJCWkgJiYgKHQuaW52ZXJ0ZWQgJiYgaS5hdHRyKHsKCQkJCQkJd2lkdGg6IHQucGxvdFdpZHRoLAoJCQkJCQloZWlnaHQ6IHQucGxvdEhlaWdodAoJCQkJCX0pLCBpLmFuaW1hdGUoewoJCQkJCQl0cmFuc2xhdGVYOiBfKGEgJiYgYS5sZWZ0LCB0LnBsb3RMZWZ0KSwKCQkJCQkJdHJhbnNsYXRlWTogXyhvICYmIG8udG9wLCB0LnBsb3RUb3ApCgkJCQkJfSkpLCBlLnRyYW5zbGF0ZSgpLCBlLnNldFRvb2x0aXBQb2ludHMgJiYgZS5zZXRUb29sdGlwUG9pbnRzKCEwKSwgZS5yZW5kZXIoKSwgbiAmJiB2dChlLCAidXBkYXRlZERhdGEiKQoJCQkJfQoJCQl9LCAkLnByb3RvdHlwZSA9IHsKCQkJCWRlc3Ryb3k6IGZ1bmN0aW9uKCkgewoJCQkJCVAodGhpcywgdGhpcy5heGlzKQoJCQkJfSwKCQkJCXJlbmRlcjogZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0ID0gdGhpcy5vcHRpb25zLAoJCQkJCQluID0gdC5mb3JtYXQsCgkJCQkJCWkgPSBuID8gQihuLCB0aGlzKSA6IHQuZm9ybWF0dGVyLmNhbGwodGhpcyk7CgkJCQkJdGhpcy5sYWJlbCA/IHRoaXMubGFiZWwuYXR0cih7CgkJCQkJCXRleHQ6IGksCgkJCQkJCXZpc2liaWxpdHk6IEplCgkJCQkJfSkgOiB0aGlzLmxhYmVsID0gdGhpcy5heGlzLmNoYXJ0LnJlbmRlcmVyLnRleHQoaSwgbnVsbCwgbnVsbCwgdC51c2VIVE1MKS5jc3ModC5zdHlsZSkuYXR0cih7CgkJCQkJCWFsaWduOiB0aGlzLnRleHRBbGlnbiwKCQkJCQkJcm90YXRpb246IHQucm90YXRpb24sCgkJCQkJCXZpc2liaWxpdHk6IEplCgkJCQkJfSkuYWRkKGUpCgkJCQl9LAoJCQkJc2V0T2Zmc2V0OiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJdmFyIG4sIGkgPSB0aGlzLAoJCQkJCQlhID0gaS5heGlzLAoJCQkJCQlvID0gYS5jaGFydCwKCQkJCQkJciA9IG8uaW52ZXJ0ZWQsCgkJCQkJCXMgPSB0aGlzLmlzTmVnYXRpdmUsCgkJCQkJCWwgPSBhLnRyYW5zbGF0ZShhLnVzZVBlcmNlbnRhZ2UgPyAxMDAgOiB0aGlzLnRvdGFsLCAwLCAwLCAwLCAxKSwKCQkJCQkJYyA9IGEudHJhbnNsYXRlKDApLAoJCQkJCQlkID0ga2UobCAtIGMpLAoJCQkJCQlwID0gby54QXhpc1swXS50cmFuc2xhdGUodGhpcy54KSArIGUsCgkJCQkJCWggPSBvLnBsb3RIZWlnaHQsCgkJCQkJCXUgPSB7CgkJCQkJCQl4OiByID8gcyA/IGwgOiBsIC0gZCA6IHAsCgkJCQkJCQl5OiByID8gaCAtIHAgLSB0IDogcyA/IGggLSBsIC0gZCA6IGggLSBsLAoJCQkJCQkJd2lkdGg6IHIgPyBkIDogdCwKCQkJCQkJCWhlaWdodDogciA/IHQgOiBkCgkJCQkJCX0sCgkJCQkJCW0gPSB0aGlzLmxhYmVsOwoJCQkJCW0gJiYgKG0uYWxpZ24odGhpcy5hbGlnbk9wdGlvbnMsIG51bGwsIHUpLCBuID0gbS5hbGlnbkF0dHIsIG1bdGhpcy5vcHRpb25zLmNyb3AgPT09ICExIHx8IG8uaXNJbnNpZGVQbG90KG4ueCwgbi55KSA/ICJzaG93IiA6ICJoaWRlIl0oITApKQoJCQkJfQoJCQl9LCBSLnByb3RvdHlwZS5idWlsZFN0YWNrcyA9IGZ1bmN0aW9uKCkgewoJCQkJdmFyIGUgPSB0aGlzLnNlcmllcywKCQkJCQl0ID0gXyh0aGlzLm9wdGlvbnMucmV2ZXJzZWRTdGFja3MsICEwKSwKCQkJCQluID0gZS5sZW5ndGg7CgkJCQlpZiAoIXRoaXMuaXNYQXhpcykgewoJCQkJCWZvciAodGhpcy51c2VQZXJjZW50YWdlID0gITE7IG4tLTspIGVbdCA/IG4gOiBlLmxlbmd0aCAtIG4gLSAxXS5zZXRTdGFja2VkUG9pbnRzKCk7CgkJCQkJaWYgKHRoaXMudXNlUGVyY2VudGFnZSkKCQkJCQkJZm9yIChuID0gMDsgbiA8IGUubGVuZ3RoOyBuKyspIGVbbl0uc2V0UGVyY2VudFN0YWNrcygpCgkJCQl9CgkJCX0sIFIucHJvdG90eXBlLnJlbmRlclN0YWNrVG90YWxzID0gZnVuY3Rpb24oKSB7CgkJCQl2YXIgZSwgdCwgbiwgaSA9IHRoaXMsCgkJCQkJYSA9IGkuY2hhcnQsCgkJCQkJbyA9IGEucmVuZGVyZXIsCgkJCQkJciA9IGkuc3RhY2tzLAoJCQkJCXMgPSBpLnN0YWNrVG90YWxHcm91cDsKCQkJCXMgfHwgKGkuc3RhY2tUb3RhbEdyb3VwID0gcyA9IG8uZygic3RhY2stbGFiZWxzIikuYXR0cih7CgkJCQkJdmlzaWJpbGl0eTogVmUsCgkJCQkJekluZGV4OiA2CgkJCQl9KS5hZGQoKSksIHMudHJhbnNsYXRlKGEucGxvdExlZnQsIGEucGxvdFRvcCk7CgkJCQlmb3IgKGUgaW4gcikgewoJCQkJCXQgPSByW2VdOwoJCQkJCWZvciAobiBpbiB0KSB0W25dLnJlbmRlcihzKQoJCQkJfQoJCQl9LCBYdC5wcm90b3R5cGUuc2V0U3RhY2tlZFBvaW50cyA9IGZ1bmN0aW9uKCkgewoJCQkJaWYgKHRoaXMub3B0aW9ucy5zdGFja2luZyAmJiAodGhpcy52aXNpYmxlID09PSAhMCB8fCB0aGlzLmNoYXJ0Lm9wdGlvbnMuY2hhcnQuaWdub3JlSGlkZGVuU2VyaWVzID09PSAhMSkpIHsKCQkJCQl2YXIgZSwgdCwgbiwgaSwgYSwgbywgciwgcywgbCA9IHRoaXMsCgkJCQkJCWMgPSBsLnByb2Nlc3NlZFhEYXRhLAoJCQkJCQlkID0gbC5wcm9jZXNzZWRZRGF0YSwKCQkJCQkJcCA9IFtdLAoJCQkJCQloID0gZC5sZW5ndGgsCgkJCQkJCXUgPSBsLm9wdGlvbnMsCgkJCQkJCW0gPSB1LnRocmVzaG9sZCwKCQkJCQkJZiA9IHUuc3RhY2ssCgkJCQkJCWcgPSB1LnN0YWNraW5nLAoJCQkJCQlfID0gbC5zdGFja0tleSwKCQkJCQkJeCA9ICItIiArIF8sCgkJCQkJCXcgPSBsLm5lZ1N0YWNrcywKCQkJCQkJdiA9IGwueUF4aXMsCgkJCQkJCWIgPSB2LnN0YWNrcywKCQkJCQkJeSA9IHYub2xkU3RhY2tzOwoJCQkJCWZvciAobyA9IDA7IGggPiBvOyBvKyspIHIgPSBjW29dLCBzID0gZFtvXSwgYSA9IGwuaW5kZXggKyAiLCIgKyBvLCBlID0gdyAmJiBtID4gcywgaSA9IGUgPyB4IDogXywgYltpXSB8fCAoYltpXSA9IHt9KSwgYltpXVtyXSB8fCAoeVtpXSAmJiB5W2ldW3JdID8gKGJbaV1bcl0gPSB5W2ldW3JdLCBiW2ldW3JdLnRvdGFsID0gbnVsbCkgOiBiW2ldW3JdID0gbmV3ICQodiwgdi5vcHRpb25zLnN0YWNrTGFiZWxzLCBlLCByLCBmKSksIHQgPSBiW2ldW3JdLCB0LnBvaW50c1thXSA9IFt0LmN1bSB8fCAwXSwgInBlcmNlbnQiID09PSBnID8gKG4gPSBlID8gXyA6IHgsIHcgJiYgYltuXSAmJiBiW25dW3JdID8gKG4gPSBiW25dW3JdLCB0LnRvdGFsID0gbi50b3RhbCA9IGJlKG4udG90YWwsIHQudG90YWwpICsga2UocykgfHwgMCkgOiB0LnRvdGFsID0gQSh0LnRvdGFsICsgKGtlKHMpIHx8IDApKSkgOiB0LnRvdGFsID0gQSh0LnRvdGFsICsgKHMgfHwgMCkpLCB0LmN1bSA9ICh0LmN1bSB8fCAwKSArIChzIHx8IDApLCB0LnBvaW50c1thXS5wdXNoKHQuY3VtKSwgcFtvXSA9IHQuY3VtOwoJCQkJCSJwZXJjZW50IiA9PT0gZyAmJiAodi51c2VQZXJjZW50YWdlID0gITApLCB0aGlzLnN0YWNrZWRZRGF0YSA9IHAsIHYub2xkU3RhY2tzID0ge30KCQkJCX0KCQkJfSwgWHQucHJvdG90eXBlLnNldFBlcmNlbnRTdGFja3MgPSBmdW5jdGlvbigpIHsKCQkJCXZhciBlID0gdGhpcywKCQkJCQl0ID0gZS5zdGFja0tleSwKCQkJCQluID0gZS55QXhpcy5zdGFja3MsCgkJCQkJaSA9IGUucHJvY2Vzc2VkWERhdGE7CgkJCQltdChbdCwgIi0iICsgdF0sIGZ1bmN0aW9uKHQpIHsKCQkJCQlmb3IgKHZhciBhLCBvLCByLCBzLCBsID0gaS5sZW5ndGg7IGwtLTspIGEgPSBpW2xdLCBvID0gblt0XSAmJiBuW3RdW2FdLCByID0gbyAmJiBvLnBvaW50c1tlLmluZGV4ICsgIiwiICsgbF0sIHIgJiYgKHMgPSBvLnRvdGFsID8gMTAwIC8gby50b3RhbCA6IDAsIHJbMF0gPSBBKHJbMF0gKiBzKSwgclsxXSA9IEEoclsxXSAqIHMpLCBlLnN0YWNrZWRZRGF0YVtsXSA9IHJbMV0pCgkJCQl9KQoJCQl9LCBhKEYucHJvdG90eXBlLCB7CgkJCQlhZGRTZXJpZXM6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQl2YXIgaSwgYSA9IHRoaXM7CgkJCQkJcmV0dXJuIGUgJiYgKHQgPSBfKHQsICEwKSwgdnQoYSwgImFkZFNlcmllcyIsIHsKCQkJCQkJb3B0aW9uczogZQoJCQkJCX0sIGZ1bmN0aW9uKCkgewoJCQkJCQlpID0gYS5pbml0U2VyaWVzKGUpLCBhLmlzRGlydHlMZWdlbmQgPSAhMCwgYS5saW5rU2VyaWVzKCksIHQgJiYgYS5yZWRyYXcobikKCQkJCQl9KSksIGkKCQkJCX0sCgkJCQlhZGRBeGlzOiBmdW5jdGlvbihlLCB0LCBuLCBpKSB7CgkJCQkJdmFyIGEsIHIgPSB0ID8gInhBeGlzIiA6ICJ5QXhpcyIsCgkJCQkJCXMgPSB0aGlzLm9wdGlvbnM7CgkJCQkJYSA9IG5ldyBSKHRoaXMsIG8oZSwgewoJCQkJCQlpbmRleDogdGhpc1tyXS5sZW5ndGgsCgkJCQkJCWlzWDogdAoJCQkJCX0pKSwgc1tyXSA9IGcoc1tyXSB8fCB7fSksIHNbcl0ucHVzaChlKSwgXyhuLCAhMCkgJiYgdGhpcy5yZWRyYXcoaSkKCQkJCX0sCgkJCQlzaG93TG9hZGluZzogZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0ID0gdGhpcywKCQkJCQkJbiA9IHQub3B0aW9ucywKCQkJCQkJaSA9IHQubG9hZGluZ0RpdiwKCQkJCQkJbyA9IG4ubG9hZGluZywKCQkJCQkJciA9IGZ1bmN0aW9uKCkgewoJCQkJCQkJaSAmJiB4KGksIHsKCQkJCQkJCQlsZWZ0OiB0LnBsb3RMZWZ0ICsgS2UsCgkJCQkJCQkJdG9wOiB0LnBsb3RUb3AgKyBLZSwKCQkJCQkJCQl3aWR0aDogdC5wbG90V2lkdGggKyBLZSwKCQkJCQkJCQloZWlnaHQ6IHQucGxvdEhlaWdodCArIEtlCgkJCQkJCQl9KQoJCQkJCQl9OwoJCQkJCWkgfHwgKHQubG9hZGluZ0RpdiA9IGkgPSB3KFllLCB7CgkJCQkJCWNsYXNzTmFtZTogWmUgKyAibG9hZGluZyIKCQkJCQl9LCBhKG8uc3R5bGUsIHsKCQkJCQkJekluZGV4OiAxMCwKCQkJCQkJZGlzcGxheTogUWUKCQkJCQl9KSwgdC5jb250YWluZXIpLCB0LmxvYWRpbmdTcGFuID0gdygic3BhbiIsIG51bGwsIG8ubGFiZWxTdHlsZSwgaSksIHh0KHQsICJyZWRyYXciLCByKSksIHQubG9hZGluZ1NwYW4uaW5uZXJIVE1MID0gZSB8fCBuLmxhbmcubG9hZGluZywgdC5sb2FkaW5nU2hvd24gfHwgKHgoaSwgewoJCQkJCQlvcGFjaXR5OiAwLAoJCQkJCQlkaXNwbGF5OiAiIgoJCQkJCX0pLCB5dChpLCB7CgkJCQkJCW9wYWNpdHk6IG8uc3R5bGUub3BhY2l0eQoJCQkJCX0sIHsKCQkJCQkJZHVyYXRpb246IG8uc2hvd0R1cmF0aW9uIHx8IDAKCQkJCQl9KSwgdC5sb2FkaW5nU2hvd24gPSAhMCksIHIoKQoJCQkJfSwKCQkJCWhpZGVMb2FkaW5nOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IHRoaXMub3B0aW9ucywKCQkJCQkJdCA9IHRoaXMubG9hZGluZ0RpdjsKCQkJCQl0ICYmIHl0KHQsIHsKCQkJCQkJb3BhY2l0eTogMAoJCQkJCX0sIHsKCQkJCQkJZHVyYXRpb246IGUubG9hZGluZy5oaWRlRHVyYXRpb24gfHwgMTAwLAoJCQkJCQljb21wbGV0ZTogZnVuY3Rpb24oKSB7CgkJCQkJCQl4KHQsIHsKCQkJCQkJCQlkaXNwbGF5OiBRZQoJCQkJCQkJfSkKCQkJCQkJfQoJCQkJCX0pLCB0aGlzLmxvYWRpbmdTaG93biA9ICExCgkJCQl9CgkJCX0pLCBhKEd0LnByb3RvdHlwZSwgewoJCQkJdXBkYXRlOiBmdW5jdGlvbihlLCB0LCBuLCBpKSB7CgkJCQkJZnVuY3Rpb24gYSgpIHsKCQkJCQkJci5hcHBseU9wdGlvbnMoZSksIGwoZSkgJiYgIWMoZSkgJiYgKHIucmVkcmF3ID0gZnVuY3Rpb24oKSB7CgkJCQkJCQlkICYmIChlICYmIGUubWFya2VyICYmIGUubWFya2VyLnN5bWJvbCA/IHIuZ3JhcGhpYyA9IGQuZGVzdHJveSgpIDogZC5hdHRyKHIucG9pbnRBdHRyW3Iuc3RhdGUgfHwgIiJdKSksIGUgJiYgZS5kYXRhTGFiZWxzICYmIHIuZGF0YUxhYmVsICYmIChyLmRhdGFMYWJlbCA9IHIuZGF0YUxhYmVsLmRlc3Ryb3koKSksIHIucmVkcmF3ID0gbnVsbAoJCQkJCQl9KSwgbyA9IHIuaW5kZXgsIHMudXBkYXRlUGFyYWxsZWxBcnJheXMociwgbyksIGguZGF0YVtvXSA9IHIub3B0aW9ucywgcy5pc0RpcnR5ID0gcy5pc0RpcnR5RGF0YSA9ICEwLCAhcy5maXhlZEJveCAmJiBzLmhhc0NhcnRlc2lhblNlcmllcyAmJiAocC5pc0RpcnR5Qm94ID0gITApLCAicG9pbnQiID09PSBoLmxlZ2VuZFR5cGUgJiYgcC5sZWdlbmQuZGVzdHJveUl0ZW0ociksIHQgJiYgcC5yZWRyYXcobikKCQkJCQl9CgkJCQkJdmFyIG8sIHIgPSB0aGlzLAoJCQkJCQlzID0gci5zZXJpZXMsCgkJCQkJCWQgPSByLmdyYXBoaWMsCgkJCQkJCXAgPSBzLmNoYXJ0LAoJCQkJCQloID0gcy5vcHRpb25zOwoJCQkJCXQgPSBfKHQsICEwKSwgaSA9PT0gITEgPyBhKCkgOiByLmZpcmVQb2ludEV2ZW50KCJ1cGRhdGUiLCB7CgkJCQkJCW9wdGlvbnM6IGUKCQkJCQl9LCBhKQoJCQkJfSwKCQkJCXJlbW92ZTogZnVuY3Rpb24oZSwgdCkgewoJCQkJCXZhciBuLCBpID0gdGhpcywKCQkJCQkJYSA9IGkuc2VyaWVzLAoJCQkJCQlvID0gYS5wb2ludHMsCgkJCQkJCXIgPSBhLmNoYXJ0LAoJCQkJCQlzID0gYS5kYXRhOwoJCQkJCXEodCwgciksIGUgPSBfKGUsICEwKSwgaS5maXJlUG9pbnRFdmVudCgicmVtb3ZlIiwgbnVsbCwgZnVuY3Rpb24oKSB7CgkJCQkJCW4gPSB1dChpLCBzKSwgcy5sZW5ndGggPT09IG8ubGVuZ3RoICYmIG8uc3BsaWNlKG4sIDEpLCBzLnNwbGljZShuLCAxKSwgYS5vcHRpb25zLmRhdGEuc3BsaWNlKG4sIDEpLCBhLnVwZGF0ZVBhcmFsbGVsQXJyYXlzKGksICJzcGxpY2UiLCBuLCAxKSwgaS5kZXN0cm95KCksIGEuaXNEaXJ0eSA9ICEwLCBhLmlzRGlydHlEYXRhID0gITAsIGUgJiYgci5yZWRyYXcoKQoJCQkJCX0pCgkJCQl9CgkJCX0pLCBhKFh0LnByb3RvdHlwZSwgewoJCQkJYWRkUG9pbnQ6IGZ1bmN0aW9uKGUsIHQsIG4sIGkpIHsKCQkJCQl2YXIgYSwgbywgciwgcywgbCA9IHRoaXMsCgkJCQkJCWMgPSBsLm9wdGlvbnMsCgkJCQkJCWQgPSBsLmRhdGEsCgkJCQkJCXAgPSBsLmdyYXBoLAoJCQkJCQloID0gbC5hcmVhLAoJCQkJCQl1ID0gbC5jaGFydCwKCQkJCQkJbSA9IGwueEF4aXMgJiYgbC54QXhpcy5uYW1lcywKCQkJCQkJZiA9IHAgJiYgcC5zaGlmdCB8fCAwLAoJCQkJCQlnID0gYy5kYXRhLAoJCQkJCQl4ID0gbC54RGF0YTsKCQkJCQlpZiAocShpLCB1KSwgbiAmJiBtdChbcCwgaCwgbC5ncmFwaE5lZywgbC5hcmVhTmVnXSwgZnVuY3Rpb24oZSkgewoJCQkJCQllICYmIChlLnNoaWZ0ID0gZiArIDEpCgkJCQkJfSksIGggJiYgKGguaXNBcmVhID0gITApLCB0ID0gXyh0LCAhMCksIGEgPSB7CgkJCQkJCXNlcmllczogbAoJCQkJCX0sIGwucG9pbnRDbGFzcy5wcm90b3R5cGUuYXBwbHlPcHRpb25zLmFwcGx5KGEsIFtlXSksIHIgPSBhLngsIHMgPSB4Lmxlbmd0aCwgbC5yZXF1aXJlU29ydGluZyAmJiByIDwgeFtzIC0gMV0pCgkJCQkJCWZvciAobyA9ICEwOyBzICYmIHhbcyAtIDFdID4gcjspIHMtLTsKCQkJCQlsLnVwZGF0ZVBhcmFsbGVsQXJyYXlzKGEsICJzcGxpY2UiLCBzLCAwLCAwKSwgbC51cGRhdGVQYXJhbGxlbEFycmF5cyhhLCBzKSwgbSAmJiBhLm5hbWUgJiYgKG1bcl0gPSBhLm5hbWUpLCBnLnNwbGljZShzLCAwLCBlKSwgbyAmJiAobC5kYXRhLnNwbGljZShzLCAwLCBudWxsKSwgbC5wcm9jZXNzRGF0YSgpKSwgInBvaW50IiA9PT0gYy5sZWdlbmRUeXBlICYmIGwuZ2VuZXJhdGVQb2ludHMoKSwgbiAmJiAoZFswXSAmJiBkWzBdLnJlbW92ZSA/IGRbMF0ucmVtb3ZlKCExKSA6IChkLnNoaWZ0KCksIGwudXBkYXRlUGFyYWxsZWxBcnJheXMoYSwgInNoaWZ0IiksIGcuc2hpZnQoKSkpLCBsLmlzRGlydHkgPSAhMCwgbC5pc0RpcnR5RGF0YSA9ICEwLCB0ICYmIChsLmdldEF0dHJpYnMoKSwgdS5yZWRyYXcoKSkKCQkJCX0sCgkJCQlyZW1vdmU6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQl2YXIgbiA9IHRoaXMsCgkJCQkJCWkgPSBuLmNoYXJ0OwoJCQkJCWUgPSBfKGUsICEwKSwgbi5pc1JlbW92aW5nIHx8IChuLmlzUmVtb3ZpbmcgPSAhMCwgdnQobiwgInJlbW92ZSIsIG51bGwsIGZ1bmN0aW9uKCkgewoJCQkJCQluLmRlc3Ryb3koKSwgaS5pc0RpcnR5TGVnZW5kID0gaS5pc0RpcnR5Qm94ID0gITAsIGkubGlua1NlcmllcygpLCBlICYmIGkucmVkcmF3KHQpCgkJCQkJfSkpLCBuLmlzUmVtb3ZpbmcgPSAhMQoJCQkJfSwKCQkJCXVwZGF0ZTogZnVuY3Rpb24oZSwgdCkgewoJCQkJCXZhciBuLCBpID0gdGhpcywKCQkJCQkJciA9IHRoaXMuY2hhcnQsCgkJCQkJCXMgPSB0aGlzLnVzZXJPcHRpb25zLAoJCQkJCQlsID0gdGhpcy50eXBlLAoJCQkJCQljID0gc3RbbF0ucHJvdG90eXBlLAoJCQkJCQlkID0gWyJncm91cCIsICJtYXJrZXJHcm91cCIsICJkYXRhTGFiZWxzR3JvdXAiXTsKCQkJCQltdChkLCBmdW5jdGlvbihlKSB7CgkJCQkJCWRbZV0gPSBpW2VdLCBkZWxldGUgaVtlXQoJCQkJCX0pLCBlID0gbyhzLCB7CgkJCQkJCWFuaW1hdGlvbjogITEsCgkJCQkJCWluZGV4OiB0aGlzLmluZGV4LAoJCQkJCQlwb2ludFN0YXJ0OiB0aGlzLnhEYXRhWzBdCgkJCQkJfSwgewoJCQkJCQlkYXRhOiB0aGlzLm9wdGlvbnMuZGF0YQoJCQkJCX0sIGUpLCB0aGlzLnJlbW92ZSghMSk7CgkJCQkJZm9yIChuIGluIGMpIGMuaGFzT3duUHJvcGVydHkobikgJiYgKHRoaXNbbl0gPSBXKTsKCQkJCQlhKHRoaXMsIHN0W2UudHlwZSB8fCBsXS5wcm90b3R5cGUpLCBtdChkLCBmdW5jdGlvbihlKSB7CgkJCQkJCWlbZV0gPSBkW2VdCgkJCQkJfSksIHRoaXMuaW5pdChyLCBlKSwgci5saW5rU2VyaWVzKCksIF8odCwgITApICYmIHIucmVkcmF3KCExKQoJCQkJfQoJCQl9KSwgYShSLnByb3RvdHlwZSwgewoJCQkJdXBkYXRlOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJdmFyIG4gPSB0aGlzLmNoYXJ0OwoJCQkJCWUgPSBuLm9wdGlvbnNbdGhpcy5jb2xsXVt0aGlzLm9wdGlvbnMuaW5kZXhdID0gbyh0aGlzLnVzZXJPcHRpb25zLCBlKSwgdGhpcy5kZXN0cm95KCEwKSwgdGhpcy5fYWRkZWRQbG90TEIgPSBXLCB0aGlzLmluaXQobiwgYShlLCB7CgkJCQkJCWV2ZW50czogVwoJCQkJCX0pKSwgbi5pc0RpcnR5Qm94ID0gITAsIF8odCwgITApICYmIG4ucmVkcmF3KCkKCQkJCX0sCgkJCQlyZW1vdmU6IGZ1bmN0aW9uKGUpIHsKCQkJCQlmb3IgKHZhciB0ID0gdGhpcy5jaGFydCwgbiA9IHRoaXMuY29sbCwgaSA9IHRoaXMuc2VyaWVzLCBhID0gaS5sZW5ndGg7IGEtLTspIGlbYV0gJiYgaVthXS5yZW1vdmUoITEpOwoJCQkJCXUodC5heGVzLCB0aGlzKSwgdSh0W25dLCB0aGlzKSwgdC5vcHRpb25zW25dLnNwbGljZSh0aGlzLm9wdGlvbnMuaW5kZXgsIDEpLCBtdCh0W25dLCBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCWUub3B0aW9ucy5pbmRleCA9IHQKCQkJCQl9KSwgdGhpcy5kZXN0cm95KCksIHQuaXNEaXJ0eUJveCA9ICEwLCBfKGUsICEwKSAmJiB0LnJlZHJhdygpCgkJCQl9LAoJCQkJc2V0VGl0bGU6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQl0aGlzLnVwZGF0ZSh7CgkJCQkJCXRpdGxlOiBlCgkJCQkJfSwgdCkKCQkJCX0sCgkJCQlzZXRDYXRlZ29yaWVzOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJdGhpcy51cGRhdGUoewoJCQkJCQljYXRlZ29yaWVzOiBlCgkJCQkJfSwgdCkKCQkJCX0KCQkJfSk7CgkJCXZhciBKdCA9IHYoWHQpOwoJCQlzdC5saW5lID0gSnQsIEJ0LmFyZWEgPSBvKGp0LCB7CgkJCQl0aHJlc2hvbGQ6IDAKCQkJfSk7CgkJCXZhciBadCA9IHYoWHQsIHsKCQkJCXR5cGU6ICJhcmVhIiwKCQkJCWdldFNlZ21lbnRzOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSwgdCwgbiwgaSwgYSA9IHRoaXMsCgkJCQkJCW8gPSBbXSwKCQkJCQkJciA9IFtdLAoJCQkJCQlzID0gW10sCgkJCQkJCWwgPSB0aGlzLnhBeGlzLAoJCQkJCQljID0gdGhpcy55QXhpcywKCQkJCQkJZCA9IGMuc3RhY2tzW3RoaXMuc3RhY2tLZXldLAoJCQkJCQlwID0ge30sCgkJCQkJCWggPSB0aGlzLnBvaW50cywKCQkJCQkJdSA9IHRoaXMub3B0aW9ucy5jb25uZWN0TnVsbHM7CgkJCQkJaWYgKHRoaXMub3B0aW9ucy5zdGFja2luZyAmJiAhdGhpcy5jcm9wcGVkKSB7CgkJCQkJCWZvciAobiA9IDA7IG4gPCBoLmxlbmd0aDsgbisrKSBwW2hbbl0ueF0gPSBoW25dOwoJCQkJCQlmb3IgKGkgaW4gZCkgbnVsbCAhPT0gZFtpXS50b3RhbCAmJiBzLnB1c2goK2kpOwoJCQkJCQlzLnNvcnQoZnVuY3Rpb24oZSwgdCkgewoJCQkJCQkJcmV0dXJuIGUgLSB0CgkJCQkJCX0pLCBtdChzLCBmdW5jdGlvbihpKSB7CgkJCQkJCQl2YXIgbywgcyA9IDA7CgkJCQkJCQlpZiAoIXUgfHwgcFtpXSAmJiBudWxsICE9PSBwW2ldLnkpCgkJCQkJCQkJaWYgKHBbaV0pIHIucHVzaChwW2ldKTsKCQkJCQkJCQllbHNlIHsKCQkJCQkJCQkJZm9yIChuID0gYS5pbmRleDsgbiA8PSBjLnNlcmllcy5sZW5ndGg7IG4rKykKCQkJCQkJCQkJCWlmIChvID0gZFtpXS5wb2ludHNbbiArICIsIiArIGldKSB7CgkJCQkJCQkJCQkJcyA9IG9bMV07CgkJCQkJCQkJCQkJYnJlYWsKCQkJCQkJCQkJCX0KCQkJCQkJCQkJZSA9IGwudHJhbnNsYXRlKGkpLCB0ID0gYy50b1BpeGVscyhzLCAhMCksIHIucHVzaCh7CgkJCQkJCQkJCQl5OiBudWxsLAoJCQkJCQkJCQkJcGxvdFg6IGUsCgkJCQkJCQkJCQljbGllbnRYOiBlLAoJCQkJCQkJCQkJcGxvdFk6IHQsCgkJCQkJCQkJCQl5Qm90dG9tOiB0LAoJCQkJCQkJCQkJb25Nb3VzZU92ZXI6IEZlCgkJCQkJCQkJCX0pCgkJCQkJCQkJfQoJCQkJCQl9KSwgci5sZW5ndGggJiYgby5wdXNoKHIpCgkJCQkJfSBlbHNlIFh0LnByb3RvdHlwZS5nZXRTZWdtZW50cy5jYWxsKHRoaXMpLCBvID0gdGhpcy5zZWdtZW50czsKCQkJCQl0aGlzLnNlZ21lbnRzID0gbwoJCQkJfSwKCQkJCWdldFNlZ21lbnRQYXRoOiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQsIG4sIGkgPSBYdC5wcm90b3R5cGUuZ2V0U2VnbWVudFBhdGguY2FsbCh0aGlzLCBlKSwKCQkJCQkJYSA9IFtdLmNvbmNhdChpKSwKCQkJCQkJbyA9IHRoaXMub3B0aW9ucywKCQkJCQkJciA9IGkubGVuZ3RoLAoJCQkJCQlzID0gdGhpcy55QXhpcy5nZXRUaHJlc2hvbGQoby50aHJlc2hvbGQpOwoJCQkJCWlmICgzID09PSByICYmIGEucHVzaCh0dCwgaVsxXSwgaVsyXSksIG8uc3RhY2tpbmcgJiYgIXRoaXMuY2xvc2VkU3RhY2tzKQoJCQkJCQlmb3IgKHQgPSBlLmxlbmd0aCAtIDE7IHQgPj0gMDsgdC0tKSBuID0gXyhlW3RdLnlCb3R0b20sIHMpLCB0IDwgZS5sZW5ndGggLSAxICYmIG8uc3RlcCAmJiBhLnB1c2goZVt0ICsgMV0ucGxvdFgsIG4pLCBhLnB1c2goZVt0XS5wbG90WCwgbik7CgkJCQkJZWxzZSB0aGlzLmNsb3NlU2VnbWVudChhLCBlLCBzKTsKCQkJCQlyZXR1cm4gdGhpcy5hcmVhUGF0aCA9IHRoaXMuYXJlYVBhdGguY29uY2F0KGEpLCBpCgkJCQl9LAoJCQkJY2xvc2VTZWdtZW50OiBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJZS5wdXNoKHR0LCB0W3QubGVuZ3RoIC0gMV0ucGxvdFgsIG4sIHR0LCB0WzBdLnBsb3RYLCBuKQoJCQkJfSwKCQkJCWRyYXdHcmFwaDogZnVuY3Rpb24oKSB7CgkJCQkJdGhpcy5hcmVhUGF0aCA9IFtdLCBYdC5wcm90b3R5cGUuZHJhd0dyYXBoLmFwcGx5KHRoaXMpOwoJCQkJCXZhciBlID0gdGhpcywKCQkJCQkJdCA9IHRoaXMuYXJlYVBhdGgsCgkJCQkJCW4gPSB0aGlzLm9wdGlvbnMsCgkJCQkJCWkgPSBuLm5lZ2F0aXZlQ29sb3IsCgkJCQkJCWEgPSBuLm5lZ2F0aXZlRmlsbENvbG9yLAoJCQkJCQlvID0gWwoJCQkJCQkJWyJhcmVhIiwgdGhpcy5jb2xvciwgbi5maWxsQ29sb3JdCgkJCQkJCV07CgkJCQkJKGkgfHwgYSkgJiYgby5wdXNoKFsiYXJlYU5lZyIsIGksIGFdKSwgbXQobywgZnVuY3Rpb24oaSkgewoJCQkJCQl2YXIgYSA9IGlbMF0sCgkJCQkJCQlvID0gZVthXTsKCQkJCQkJbyA/IG8uYW5pbWF0ZSh7CgkJCQkJCQlkOiB0CgkJCQkJCX0pIDogZVthXSA9IGUuY2hhcnQucmVuZGVyZXIucGF0aCh0KS5hdHRyKHsKCQkJCQkJCWZpbGw6IF8oaVsyXSwgVHQoaVsxXSkuc2V0T3BhY2l0eShfKG4uZmlsbE9wYWNpdHksIC43NSkpLmdldCgpKSwKCQkJCQkJCXpJbmRleDogMAoJCQkJCQl9KS5hZGQoZS5ncm91cCkKCQkJCQl9KQoJCQkJfSwKCQkJCWRyYXdMZWdlbmRTeW1ib2w6IFV0LmRyYXdSZWN0YW5nbGUKCQkJfSk7CgkJCXN0LmFyZWEgPSBadCwgQnQuc3BsaW5lID0gbyhqdCk7CgkJCXZhciBWdCA9IHYoWHQsIHsKCQkJCXR5cGU6ICJzcGxpbmUiLAoJCQkJZ2V0UG9pbnRTcGxpbmU6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQl2YXIgaSwgYSwgbywgciwgcywgbCA9IDEuNSwKCQkJCQkJYyA9IGwgKyAxLAoJCQkJCQlkID0gdC5wbG90WCwKCQkJCQkJcCA9IHQucGxvdFksCgkJCQkJCWggPSBlW24gLSAxXSwKCQkJCQkJdSA9IGVbbiArIDFdOwoJCQkJCWlmIChoICYmIHUpIHsKCQkJCQkJdmFyIG0sIGYgPSBoLnBsb3RYLAoJCQkJCQkJZyA9IGgucGxvdFksCgkJCQkJCQlfID0gdS5wbG90WCwKCQkJCQkJCXggPSB1LnBsb3RZOwoJCQkJCQlpID0gKGwgKiBkICsgZikgLyBjLCBhID0gKGwgKiBwICsgZykgLyBjLCBvID0gKGwgKiBkICsgXykgLyBjLCByID0gKGwgKiBwICsgeCkgLyBjLCBtID0gKHIgLSBhKSAqIChvIC0gZCkgLyAobyAtIGkpICsgcCAtIHIsIGEgKz0gbSwgciArPSBtLCBhID4gZyAmJiBhID4gcCA/IChhID0gYmUoZywgcCksIHIgPSAyICogcCAtIGEpIDogZyA+IGEgJiYgcCA+IGEgJiYgKGEgPSB5ZShnLCBwKSwgciA9IDIgKiBwIC0gYSksIHIgPiB4ICYmIHIgPiBwID8gKHIgPSBiZSh4LCBwKSwgYSA9IDIgKiBwIC0gcikgOiB4ID4gciAmJiBwID4gciAmJiAociA9IHllKHgsIHApLCBhID0gMiAqIHAgLSByKSwgdC5yaWdodENvbnRYID0gbywgdC5yaWdodENvbnRZID0gcgoJCQkJCX0KCQkJCQlyZXR1cm4gbiA/IChzID0gWyJDIiwgaC5yaWdodENvbnRYIHx8IGgucGxvdFgsIGgucmlnaHRDb250WSB8fCBoLnBsb3RZLCBpIHx8IGQsIGEgfHwgcCwgZCwgcF0sIGgucmlnaHRDb250WCA9IGgucmlnaHRDb250WSA9IG51bGwpIDogcyA9IFtldCwgZCwgcF0sIHMKCQkJCX0KCQkJfSk7CgkJCXN0LnNwbGluZSA9IFZ0LCBCdC5hcmVhc3BsaW5lID0gbyhCdC5hcmVhKTsKCQkJdmFyIEt0ID0gWnQucHJvdG90eXBlLAoJCQkJUXQgPSB2KFZ0LCB7CgkJCQkJdHlwZTogImFyZWFzcGxpbmUiLAoJCQkJCWNsb3NlZFN0YWNrczogITAsCgkJCQkJZ2V0U2VnbWVudFBhdGg6IEt0LmdldFNlZ21lbnRQYXRoLAoJCQkJCWNsb3NlU2VnbWVudDogS3QuY2xvc2VTZWdtZW50LAoJCQkJCWRyYXdHcmFwaDogS3QuZHJhd0dyYXBoLAoJCQkJCWRyYXdMZWdlbmRTeW1ib2w6IFV0LmRyYXdSZWN0YW5nbGUKCQkJCX0pOwoJCQlzdC5hcmVhc3BsaW5lID0gUXQsIEJ0LmNvbHVtbiA9IG8oanQsIHsKCQkJCWJvcmRlckNvbG9yOiAiI0ZGRkZGRiIsCgkJCQlib3JkZXJSYWRpdXM6IDAsCgkJCQlncm91cFBhZGRpbmc6IC4yLAoJCQkJbWFya2VyOiBudWxsLAoJCQkJcG9pbnRQYWRkaW5nOiAuMSwKCQkJCW1pblBvaW50TGVuZ3RoOiAwLAoJCQkJY3JvcFRocmVzaG9sZDogNTAsCgkJCQlwb2ludFJhbmdlOiBudWxsLAoJCQkJc3RhdGVzOiB7CgkJCQkJaG92ZXI6IHsKCQkJCQkJYnJpZ2h0bmVzczogLjEsCgkJCQkJCXNoYWRvdzogITEsCgkJCQkJCWhhbG86ICExCgkJCQkJfSwKCQkJCQlzZWxlY3Q6IHsKCQkJCQkJY29sb3I6ICIjQzBDMEMwIiwKCQkJCQkJYm9yZGVyQ29sb3I6ICIjMDAwMDAwIiwKCQkJCQkJc2hhZG93OiAhMQoJCQkJCX0KCQkJCX0sCgkJCQlkYXRhTGFiZWxzOiB7CgkJCQkJYWxpZ246IG51bGwsCgkJCQkJdmVydGljYWxBbGlnbjogbnVsbCwKCQkJCQl5OiBudWxsCgkJCQl9LAoJCQkJc3RpY2t5VHJhY2tpbmc6ICExLAoJCQkJdG9vbHRpcDogewoJCQkJCWRpc3RhbmNlOiA2CgkJCQl9LAoJCQkJdGhyZXNob2xkOiAwCgkJCX0pOwoJCQl2YXIgZW4gPSB2KFh0LCB7CgkJCQl0eXBlOiAiY29sdW1uIiwKCQkJCXBvaW50QXR0clRvT3B0aW9uczogewoJCQkJCXN0cm9rZTogImJvcmRlckNvbG9yIiwKCQkJCQlmaWxsOiAiY29sb3IiLAoJCQkJCXI6ICJib3JkZXJSYWRpdXMiCgkJCQl9LAoJCQkJY3JvcFNob3VsZGVyOiAwLAoJCQkJdHJhY2tlckdyb3VwczogWyJncm91cCIsICJkYXRhTGFiZWxzR3JvdXAiXSwKCQkJCW5lZ1N0YWNrczogITAsCgkJCQlpbml0OiBmdW5jdGlvbigpIHsKCQkJCQlYdC5wcm90b3R5cGUuaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwoJCQkJCXZhciBlID0gdGhpcywKCQkJCQkJdCA9IGUuY2hhcnQ7CgkJCQkJdC5oYXNSZW5kZXJlZCAmJiBtdCh0LnNlcmllcywgZnVuY3Rpb24odCkgewoJCQkJCQl0LnR5cGUgPT09IGUudHlwZSAmJiAodC5pc0RpcnR5ID0gITApCgkJCQkJfSkKCQkJCX0sCgkJCQlnZXRDb2x1bW5NZXRyaWNzOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSwgdCwgbiA9IHRoaXMsCgkJCQkJCWkgPSBuLm9wdGlvbnMsCgkJCQkJCWEgPSBuLnhBeGlzLAoJCQkJCQlvID0gbi55QXhpcywKCQkJCQkJciA9IGEucmV2ZXJzZWQsCgkJCQkJCXMgPSB7fSwKCQkJCQkJbCA9IDA7CgkJCQkJaS5ncm91cGluZyA9PT0gITEgPyBsID0gMSA6IG10KG4uY2hhcnQuc2VyaWVzLCBmdW5jdGlvbihpKSB7CgkJCQkJCXZhciBhID0gaS5vcHRpb25zLAoJCQkJCQkJciA9IGkueUF4aXM7CgkJCQkJCWkudHlwZSA9PT0gbi50eXBlICYmIGkudmlzaWJsZSAmJiBvLmxlbiA9PT0gci5sZW4gJiYgby5wb3MgPT09IHIucG9zICYmIChhLnN0YWNraW5nID8gKGUgPSBpLnN0YWNrS2V5LCBzW2VdID09PSBXICYmIChzW2VdID0gbCsrKSwgdCA9IHNbZV0pIDogYS5ncm91cGluZyAhPT0gITEgJiYgKHQgPSBsKyspLCBpLmNvbHVtbkluZGV4ID0gdCkKCQkJCQl9KTsKCQkJCQl2YXIgYyA9IHllKGtlKGEudHJhbnNBKSAqIChhLm9yZGluYWxTbG9wZSB8fCBpLnBvaW50UmFuZ2UgfHwgYS5jbG9zZXN0UG9pbnRSYW5nZSB8fCBhLnRpY2tJbnRlcnZhbCB8fCAxKSwgYS5sZW4pLAoJCQkJCQlkID0gYyAqIGkuZ3JvdXBQYWRkaW5nLAoJCQkJCQlwID0gYyAtIDIgKiBkLAoJCQkJCQloID0gcCAvIGwsCgkJCQkJCXUgPSBpLnBvaW50V2lkdGgsCgkJCQkJCWYgPSBtKHUpID8gKGggLSB1KSAvIDIgOiBoICogaS5wb2ludFBhZGRpbmcsCgkJCQkJCWcgPSBfKHUsIGggLSAyICogZiksCgkJCQkJCXggPSAociA/IGwgLSAobi5jb2x1bW5JbmRleCB8fCAwKSA6IG4uY29sdW1uSW5kZXgpIHx8IDAsCgkJCQkJCXcgPSBmICsgKGQgKyB4ICogaCAtIGMgLyAyKSAqIChyID8gLTEgOiAxKTsKCQkJCQlyZXR1cm4gbi5jb2x1bW5NZXRyaWNzID0gewoJCQkJCQl3aWR0aDogZywKCQkJCQkJb2Zmc2V0OiB3CgkJCQkJfQoJCQkJfSwKCQkJCXRyYW5zbGF0ZTogZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSB0aGlzLAoJCQkJCQl0ID0gZS5jaGFydCwKCQkJCQkJbiA9IGUub3B0aW9ucywKCQkJCQkJaSA9IGUuYm9yZGVyV2lkdGggPSBfKG4uYm9yZGVyV2lkdGgsIGUuYWN0aXZlUG9pbnRDb3VudCA+IC41ICogZS54QXhpcy5sZW4gPyAwIDogMSksCgkJCQkJCWEgPSBlLnlBeGlzLAoJCQkJCQlvID0gbi50aHJlc2hvbGQsCgkJCQkJCXIgPSBlLnRyYW5zbGF0ZWRUaHJlc2hvbGQgPSBhLmdldFRocmVzaG9sZChvKSwKCQkJCQkJcyA9IF8obi5taW5Qb2ludExlbmd0aCwgNSksCgkJCQkJCWwgPSBlLmdldENvbHVtbk1ldHJpY3MoKSwKCQkJCQkJYyA9IGwud2lkdGgsCgkJCQkJCWQgPSBlLmJhclcgPSBiZShjLCAxICsgMiAqIGkpLAoJCQkJCQlwID0gZS5wb2ludFhPZmZzZXQgPSBsLm9mZnNldCwKCQkJCQkJaCA9IC0oaSAlIDIgPyAuNSA6IDApLAoJCQkJCQl1ID0gaSAlIDIgPyAuNSA6IDE7CgkJCQkJdC5yZW5kZXJlci5pc1ZNTCAmJiB0LmludmVydGVkICYmICh1ICs9IDEpLCBuLnBvaW50UGFkZGluZyAmJiAoZCA9IHZlKGQpKSwgWHQucHJvdG90eXBlLnRyYW5zbGF0ZS5hcHBseShlKSwgbXQoZS5wb2ludHMsIGZ1bmN0aW9uKG4pIHsKCQkJCQkJdmFyIGksIG8sIGwsIG0gPSBfKG4ueUJvdHRvbSwgciksCgkJCQkJCQlmID0geWUoYmUoLTk5OSAtIG0sIG4ucGxvdFkpLCBhLmxlbiArIDk5OSArIG0pLAoJCQkJCQkJZyA9IG4ucGxvdFggKyBwLAoJCQkJCQkJeCA9IGQsCgkJCQkJCQl3ID0geWUoZiwgbSksCgkJCQkJCQl2ID0gYmUoZiwgbSkgLSB3OwoJCQkJCQlrZSh2KSA8IHMgJiYgcyAmJiAodiA9IHMsIHcgPSB4ZShrZSh3IC0gcikgPiBzID8gbSAtIHMgOiByIC0gKGEudHJhbnNsYXRlKG4ueSwgMCwgMSwgMCwgMSkgPD0gciA/IHMgOiAwKSkpLCBuLmJhclggPSBnLCBuLnBvaW50V2lkdGggPSBjLCBuLnRvb2x0aXBQb3MgPSB0LmludmVydGVkID8gW2EubGVuIC0gZiwgZS54QXhpcy5sZW4gLSBnIC0geCAvIDJdIDogW2cgKyB4IC8gMiwgZiArIGEucG9zIC0gdC5wbG90VG9wXSwgaSA9IHhlKGcgKyB4KSArIGgsIGcgPSB4ZShnKSArIGgsIHggPSBpIC0gZywgbCA9IGtlKHcpIDwgLjUsIG8gPSB4ZSh3ICsgdikgKyB1LCB3ID0geGUodykgKyB1LCB2ID0gbyAtIHcsIGwgJiYgKHcgLT0gMSwgdiArPSAxKSwgbi5zaGFwZVR5cGUgPSAicmVjdCIsIG4uc2hhcGVBcmdzID0gewoJCQkJCQkJeDogZywKCQkJCQkJCXk6IHcsCgkJCQkJCQl3aWR0aDogeCwKCQkJCQkJCWhlaWdodDogdgoJCQkJCQl9CgkJCQkJfSkKCQkJCX0sCgkJCQlnZXRTeW1ib2w6IEZlLAoJCQkJZHJhd0xlZ2VuZFN5bWJvbDogVXQuZHJhd1JlY3RhbmdsZSwKCQkJCWRyYXdHcmFwaDogRmUsCgkJCQlkcmF3UG9pbnRzOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSwgdCwgbiA9IHRoaXMsCgkJCQkJCWkgPSB0aGlzLmNoYXJ0LAoJCQkJCQlhID0gbi5vcHRpb25zLAoJCQkJCQlyID0gaS5yZW5kZXJlciwKCQkJCQkJcyA9IGEuYW5pbWF0aW9uTGltaXQgfHwgMjUwOwoJCQkJCW10KG4ucG9pbnRzLCBmdW5jdGlvbihsKSB7CgkJCQkJCXZhciBjLCBkID0gbC5wbG90WSwKCQkJCQkJCXAgPSBsLmdyYXBoaWM7CgkJCQkJCWQgPT09IFcgfHwgaXNOYU4oZCkgfHwgbnVsbCA9PT0gbC55ID8gcCAmJiAobC5ncmFwaGljID0gcC5kZXN0cm95KCkpIDogKGUgPSBsLnNoYXBlQXJncywgYyA9IG0obi5ib3JkZXJXaWR0aCkgPyB7CgkJCQkJCQkic3Ryb2tlLXdpZHRoIjogbi5ib3JkZXJXaWR0aAoJCQkJCQl9IDoge30sIHQgPSBsLnBvaW50QXR0cltsLnNlbGVjdGVkID8gb3QgOiBpdF0gfHwgbi5wb2ludEF0dHJbaXRdLCBwID8gKGt0KHApLCBwLmF0dHIoYylbaS5wb2ludENvdW50IDwgcyA/ICJhbmltYXRlIiA6ICJhdHRyIl0obyhlKSkpIDogbC5ncmFwaGljID0gcCA9IHJbbC5zaGFwZVR5cGVdKGUpLmF0dHIodCkuYXR0cihjKS5hZGQobi5ncm91cCkuc2hhZG93KGEuc2hhZG93LCBudWxsLCBhLnN0YWNraW5nICYmICFhLmJvcmRlclJhZGl1cykpCgkJCQkJfSkKCQkJCX0sCgkJCQlhbmltYXRlOiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQsIG4gPSB0aGlzLAoJCQkJCQlpID0gdGhpcy55QXhpcywKCQkJCQkJYSA9IG4ub3B0aW9ucywKCQkJCQkJbyA9IHRoaXMuY2hhcnQuaW52ZXJ0ZWQsCgkJCQkJCXIgPSB7fTsKCQkJCQlPZSAmJiAoZSA/IChyLnNjYWxlWSA9IC4wMDEsIHQgPSB5ZShpLnBvcyArIGkubGVuLCBiZShpLnBvcywgaS50b1BpeGVscyhhLnRocmVzaG9sZCkpKSwgbyA/IHIudHJhbnNsYXRlWCA9IHQgLSBpLmxlbiA6IHIudHJhbnNsYXRlWSA9IHQsIG4uZ3JvdXAuYXR0cihyKSkgOiAoci5zY2FsZVkgPSAxLCByW28gPyAidHJhbnNsYXRlWCIgOiAidHJhbnNsYXRlWSJdID0gaS5wb3MsIG4uZ3JvdXAuYW5pbWF0ZShyLCBuLm9wdGlvbnMuYW5pbWF0aW9uKSwgbi5hbmltYXRlID0gbnVsbCkpCgkJCQl9LAoJCQkJcmVtb3ZlOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IHRoaXMsCgkJCQkJCXQgPSBlLmNoYXJ0OwoJCQkJCXQuaGFzUmVuZGVyZWQgJiYgbXQodC5zZXJpZXMsIGZ1bmN0aW9uKHQpIHsKCQkJCQkJdC50eXBlID09PSBlLnR5cGUgJiYgKHQuaXNEaXJ0eSA9ICEwKQoJCQkJCX0pLCBYdC5wcm90b3R5cGUucmVtb3ZlLmFwcGx5KGUsIGFyZ3VtZW50cykKCQkJCX0KCQkJfSk7CgkJCXN0LmNvbHVtbiA9IGVuLCBCdC5iYXIgPSBvKEJ0LmNvbHVtbik7CgkJCXZhciB0biA9IHYoZW4sIHsKCQkJCXR5cGU6ICJiYXIiLAoJCQkJaW52ZXJ0ZWQ6ICEwCgkJCX0pOwoJCQlzdC5iYXIgPSB0biwgQnQuc2NhdHRlciA9IG8oanQsIHsKCQkJCWxpbmVXaWR0aDogMCwKCQkJCXRvb2x0aXA6IHsKCQkJCQloZWFkZXJGb3JtYXQ6ICc8c3BhbiBzdHlsZT0iY29sb3I6e3Nlcmllcy5jb2xvcn0iPuKXjzwvc3Bhbj4gPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTogMTBweDsiPiB7c2VyaWVzLm5hbWV9PC9zcGFuPjxici8+JywKCQkJCQlwb2ludEZvcm1hdDogIng6IDxiPntwb2ludC54fTwvYj48YnIvPnk6IDxiPntwb2ludC55fTwvYj48YnIvPiIKCQkJCX0sCgkJCQlzdGlja3lUcmFja2luZzogITEKCQkJfSk7CgkJCXZhciBubiA9IHYoWHQsIHsKCQkJCXR5cGU6ICJzY2F0dGVyIiwKCQkJCXNvcnRlZDogITEsCgkJCQlyZXF1aXJlU29ydGluZzogITEsCgkJCQlub1NoYXJlZFRvb2x0aXA6ICEwLAoJCQkJdHJhY2tlckdyb3VwczogWyJtYXJrZXJHcm91cCIsICJkYXRhTGFiZWxzR3JvdXAiXSwKCQkJCXRha2VPcmRpbmFsUG9zaXRpb246ICExLAoJCQkJc2luZ3VsYXJUb29sdGlwczogITAsCgkJCQlkcmF3R3JhcGg6IGZ1bmN0aW9uKCkgewoJCQkJCXRoaXMub3B0aW9ucy5saW5lV2lkdGggJiYgWHQucHJvdG90eXBlLmRyYXdHcmFwaC5jYWxsKHRoaXMpCgkJCQl9CgkJCX0pOwoJCQlzdC5zY2F0dGVyID0gbm4sIEJ0LnBpZSA9IG8oanQsIHsKCQkJCWJvcmRlckNvbG9yOiAiI0ZGRkZGRiIsCgkJCQlib3JkZXJXaWR0aDogMSwKCQkJCWNlbnRlcjogW251bGwsIG51bGxdLAoJCQkJY2xpcDogITEsCgkJCQljb2xvckJ5UG9pbnQ6ICEwLAoJCQkJZGF0YUxhYmVsczogewoJCQkJCWRpc3RhbmNlOiAzMCwKCQkJCQllbmFibGVkOiAhMCwKCQkJCQlmb3JtYXR0ZXI6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gdGhpcy5wb2ludC5uYW1lCgkJCQkJfQoJCQkJfSwKCQkJCWlnbm9yZUhpZGRlblBvaW50OiAhMCwKCQkJCWxlZ2VuZFR5cGU6ICJwb2ludCIsCgkJCQltYXJrZXI6IG51bGwsCgkJCQlzaXplOiBudWxsLAoJCQkJc2hvd0luTGVnZW5kOiAhMSwKCQkJCXNsaWNlZE9mZnNldDogMTAsCgkJCQlzdGF0ZXM6IHsKCQkJCQlob3ZlcjogewoJCQkJCQlicmlnaHRuZXNzOiAuMSwKCQkJCQkJc2hhZG93OiAhMQoJCQkJCX0KCQkJCX0sCgkJCQlzdGlja3lUcmFja2luZzogITEsCgkJCQl0b29sdGlwOiB7CgkJCQkJZm9sbG93UG9pbnRlcjogITAKCQkJCX0KCQkJfSk7CgkJCXZhciBhbiA9IHYoR3QsIHsKCQkJCQlpbml0OiBmdW5jdGlvbigpIHsKCQkJCQkJR3QucHJvdG90eXBlLmluaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKCQkJCQkJdmFyIGUsIHQgPSB0aGlzOwoJCQkJCQlyZXR1cm4gdC55IDwgMCAmJiAodC55ID0gbnVsbCksIGEodCwgewoJCQkJCQkJdmlzaWJsZTogdC52aXNpYmxlICE9PSAhMSwKCQkJCQkJCW5hbWU6IF8odC5uYW1lLCAiU2xpY2UiKQoJCQkJCQl9KSwgZSA9IGZ1bmN0aW9uKGUpIHsKCQkJCQkJCXQuc2xpY2UoInNlbGVjdCIgPT09IGUudHlwZSkKCQkJCQkJfSwgeHQodCwgInNlbGVjdCIsIGUpLCB4dCh0LCAidW5zZWxlY3QiLCBlKSwgdAoJCQkJCX0sCgkJCQkJc2V0VmlzaWJsZTogZnVuY3Rpb24oZSkgewoJCQkJCQl2YXIgdCA9IHRoaXMsCgkJCQkJCQluID0gdC5zZXJpZXMsCgkJCQkJCQlpID0gbi5jaGFydDsKCQkJCQkJdC52aXNpYmxlID0gdC5vcHRpb25zLnZpc2libGUgPSBlID0gZSA9PT0gVyA/ICF0LnZpc2libGUgOiBlLCBuLm9wdGlvbnMuZGF0YVt1dCh0LCBuLmRhdGEpXSA9IHQub3B0aW9ucywgbXQoWyJncmFwaGljIiwgImRhdGFMYWJlbCIsICJjb25uZWN0b3IiLCAic2hhZG93R3JvdXAiXSwgZnVuY3Rpb24obikgewoJCQkJCQkJdFtuXSAmJiB0W25dW2UgPyAic2hvdyIgOiAiaGlkZSJdKCEwKQoJCQkJCQl9KSwgdC5sZWdlbmRJdGVtICYmIGkubGVnZW5kLmNvbG9yaXplSXRlbSh0LCBlKSwgIW4uaXNEaXJ0eSAmJiBuLm9wdGlvbnMuaWdub3JlSGlkZGVuUG9pbnQgJiYgKG4uaXNEaXJ0eSA9ICEwLCBpLnJlZHJhdygpKQoJCQkJCX0sCgkJCQkJc2xpY2U6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQkJdmFyIGksIGEgPSB0aGlzLAoJCQkJCQkJbyA9IGEuc2VyaWVzLAoJCQkJCQkJciA9IG8uY2hhcnQ7CgkJCQkJCXEobiwgciksIHQgPSBfKHQsICEwKSwgYS5zbGljZWQgPSBhLm9wdGlvbnMuc2xpY2VkID0gZSA9IG0oZSkgPyBlIDogIWEuc2xpY2VkLCBvLm9wdGlvbnMuZGF0YVt1dChhLCBvLmRhdGEpXSA9IGEub3B0aW9ucywgaSA9IGUgPyBhLnNsaWNlZFRyYW5zbGF0aW9uIDogewoJCQkJCQkJdHJhbnNsYXRlWDogMCwKCQkJCQkJCXRyYW5zbGF0ZVk6IDAKCQkJCQkJfSwgYS5ncmFwaGljLmFuaW1hdGUoaSksIGEuc2hhZG93R3JvdXAgJiYgYS5zaGFkb3dHcm91cC5hbmltYXRlKGkpCgkJCQkJfSwKCQkJCQloYWxvUGF0aDogZnVuY3Rpb24oZSkgewoJCQkJCQl2YXIgdCA9IHRoaXMuc2hhcGVBcmdzLAoJCQkJCQkJbiA9IHRoaXMuc2VyaWVzLmNoYXJ0OwoJCQkJCQlyZXR1cm4gdGhpcy5zbGljZWQgfHwgIXRoaXMudmlzaWJsZSA/IFtdIDogdGhpcy5zZXJpZXMuY2hhcnQucmVuZGVyZXIuc3ltYm9scy5hcmMobi5wbG90TGVmdCArIHQueCwgbi5wbG90VG9wICsgdC55LCB0LnIgKyBlLCB0LnIgKyBlLCB7CgkJCQkJCQlpbm5lclI6IHRoaXMuc2hhcGVBcmdzLnIsCgkJCQkJCQlzdGFydDogdC5zdGFydCwKCQkJCQkJCWVuZDogdC5lbmQKCQkJCQkJfSkKCQkJCQl9CgkJCQl9KSwKCQkJCW9uID0gewoJCQkJCXR5cGU6ICJwaWUiLAoJCQkJCWlzQ2FydGVzaWFuOiAhMSwKCQkJCQlwb2ludENsYXNzOiBhbiwKCQkJCQlyZXF1aXJlU29ydGluZzogITEsCgkJCQkJbm9TaGFyZWRUb29sdGlwOiAhMCwKCQkJCQl0cmFja2VyR3JvdXBzOiBbImdyb3VwIiwgImRhdGFMYWJlbHNHcm91cCJdLAoJCQkJCWF4aXNUeXBlczogW10sCgkJCQkJcG9pbnRBdHRyVG9PcHRpb25zOiB7CgkJCQkJCXN0cm9rZTogImJvcmRlckNvbG9yIiwKCQkJCQkJInN0cm9rZS13aWR0aCI6ICJib3JkZXJXaWR0aCIsCgkJCQkJCWZpbGw6ICJjb2xvciIKCQkJCQl9LAoJCQkJCXNpbmd1bGFyVG9vbHRpcHM6ICEwLAoJCQkJCWdldENvbG9yOiBGZSwKCQkJCQlhbmltYXRlOiBmdW5jdGlvbihlKSB7CgkJCQkJCXZhciB0ID0gdGhpcywKCQkJCQkJCW4gPSB0LnBvaW50cywKCQkJCQkJCWkgPSB0LnN0YXJ0QW5nbGVSYWQ7CgkJCQkJCWUgfHwgKG10KG4sIGZ1bmN0aW9uKGUpIHsKCQkJCQkJCXZhciBuID0gZS5ncmFwaGljLAoJCQkJCQkJCWEgPSBlLnNoYXBlQXJnczsKCQkJCQkJCW4gJiYgKG4uYXR0cih7CgkJCQkJCQkJcjogdC5jZW50ZXJbM10gLyAyLAoJCQkJCQkJCXN0YXJ0OiBpLAoJCQkJCQkJCWVuZDogaQoJCQkJCQkJfSksIG4uYW5pbWF0ZSh7CgkJCQkJCQkJcjogYS5yLAoJCQkJCQkJCXN0YXJ0OiBhLnN0YXJ0LAoJCQkJCQkJCWVuZDogYS5lbmQKCQkJCQkJCX0sIHQub3B0aW9ucy5hbmltYXRpb24pKQoJCQkJCQl9KSwgdC5hbmltYXRlID0gbnVsbCkKCQkJCQl9LAoJCQkJCXNldERhdGE6IGZ1bmN0aW9uKGUsIHQsIG4sIGkpIHsKCQkJCQkJWHQucHJvdG90eXBlLnNldERhdGEuY2FsbCh0aGlzLCBlLCAhMSwgbiwgaSksIHRoaXMucHJvY2Vzc0RhdGEoKSwgdGhpcy5nZW5lcmF0ZVBvaW50cygpLCBfKHQsICEwKSAmJiB0aGlzLmNoYXJ0LnJlZHJhdyhuKQoJCQkJCX0sCgkJCQkJZ2VuZXJhdGVQb2ludHM6IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSwgdCwgbiwgaSwgYSA9IDAsCgkJCQkJCQlvID0gdGhpcy5vcHRpb25zLmlnbm9yZUhpZGRlblBvaW50OwoJCQkJCQlmb3IgKFh0LnByb3RvdHlwZS5nZW5lcmF0ZVBvaW50cy5jYWxsKHRoaXMpLCB0ID0gdGhpcy5wb2ludHMsIG4gPSB0Lmxlbmd0aCwgZSA9IDA7IG4gPiBlOyBlKyspIGkgPSB0W2VdLCBhICs9IG8gJiYgIWkudmlzaWJsZSA/IDAgOiBpLnk7CgkJCQkJCWZvciAodGhpcy50b3RhbCA9IGEsIGUgPSAwOyBuID4gZTsgZSsrKSBpID0gdFtlXSwgaS5wZXJjZW50YWdlID0gYSA+IDAgPyBpLnkgLyBhICogMTAwIDogMCwgaS50b3RhbCA9IGEKCQkJCQl9LAoJCQkJCXRyYW5zbGF0ZTogZnVuY3Rpb24oZSkgewoJCQkJCQl0aGlzLmdlbmVyYXRlUG9pbnRzKCk7CgkJCQkJCXZhciB0LCBuLCBpLCBhLCBvLCByLCBzLCBsID0gdGhpcywKCQkJCQkJCWMgPSAwLAoJCQkJCQkJZCA9IDFlMywKCQkJCQkJCXAgPSBsLm9wdGlvbnMsCgkJCQkJCQloID0gcC5zbGljZWRPZmZzZXQsCgkJCQkJCQl1ID0gaCArIHAuYm9yZGVyV2lkdGgsCgkJCQkJCQltID0gcC5zdGFydEFuZ2xlIHx8IDAsCgkJCQkJCQlmID0gbC5zdGFydEFuZ2xlUmFkID0gamUgLyAxODAgKiAobSAtIDkwKSwKCQkJCQkJCWcgPSBsLmVuZEFuZ2xlUmFkID0gamUgLyAxODAgKiAoXyhwLmVuZEFuZ2xlLCBtICsgMzYwKSAtIDkwKSwKCQkJCQkJCXggPSBnIC0gZiwKCQkJCQkJCXcgPSBsLnBvaW50cywKCQkJCQkJCXYgPSBwLmRhdGFMYWJlbHMuZGlzdGFuY2UsCgkJCQkJCQliID0gcC5pZ25vcmVIaWRkZW5Qb2ludCwKCQkJCQkJCXkgPSB3Lmxlbmd0aDsKCQkJCQkJZm9yIChlIHx8IChsLmNlbnRlciA9IGUgPSBsLmdldENlbnRlcigpKSwgbC5nZXRYID0gZnVuY3Rpb24odCwgbikgewoJCQkJCQkJcmV0dXJuIGkgPSBfZS5hc2luKHllKCh0IC0gZVsxXSkgLyAoZVsyXSAvIDIgKyB2KSwgMSkpLCBlWzBdICsgKG4gPyAtMSA6IDEpICogKHplKGkpICogKGVbMl0gLyAyICsgdikpCgkJCQkJCX0sIHIgPSAwOyB5ID4gcjsgcisrKSBzID0gd1tyXSwgdCA9IGYgKyBjICogeCwgKCFiIHx8IHMudmlzaWJsZSkgJiYgKGMgKz0gcy5wZXJjZW50YWdlIC8gMTAwKSwgbiA9IGYgKyBjICogeCwgcy5zaGFwZVR5cGUgPSAiYXJjIiwgcy5zaGFwZUFyZ3MgPSB7CgkJCQkJCQl4OiBlWzBdLAoJCQkJCQkJeTogZVsxXSwKCQkJCQkJCXI6IGVbMl0gLyAyLAoJCQkJCQkJaW5uZXJSOiBlWzNdIC8gMiwKCQkJCQkJCXN0YXJ0OiB4ZSh0ICogZCkgLyBkLAoJCQkJCQkJZW5kOiB4ZShuICogZCkgLyBkCgkJCQkJCX0sIGkgPSAobiArIHQpIC8gMiwgaSA+IDEuNSAqIGplID8gaSAtPSAyICogamUgOiAtamUgLyAyID4gaSAmJiAoaSArPSAyICogamUpLCBzLnNsaWNlZFRyYW5zbGF0aW9uID0gewoJCQkJCQkJdHJhbnNsYXRlWDogeGUoemUoaSkgKiBoKSwKCQkJCQkJCXRyYW5zbGF0ZVk6IHhlKEJlKGkpICogaCkKCQkJCQkJfSwgYSA9IHplKGkpICogZVsyXSAvIDIsIG8gPSBCZShpKSAqIGVbMl0gLyAyLCBzLnRvb2x0aXBQb3MgPSBbZVswXSArIC43ICogYSwgZVsxXSArIC43ICogb10sIHMuaGFsZiA9IC1qZSAvIDIgPiBpIHx8IGkgPiBqZSAvIDIgPyAxIDogMCwgcy5hbmdsZSA9IGksIHUgPSB5ZSh1LCB2IC8gMiksIHMubGFiZWxQb3MgPSBbZVswXSArIGEgKyB6ZShpKSAqIHYsIGVbMV0gKyBvICsgQmUoaSkgKiB2LCBlWzBdICsgYSArIHplKGkpICogdSwgZVsxXSArIG8gKyBCZShpKSAqIHUsIGVbMF0gKyBhLCBlWzFdICsgbywgMCA+IHYgPyAiY2VudGVyIiA6IHMuaGFsZiA/ICJyaWdodCIgOiAibGVmdCIsIGldCgkJCQkJfSwKCQkJCQlkcmF3R3JhcGg6IG51bGwsCgkJCQkJZHJhd1BvaW50czogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlLCB0LCBuLCBpLCBvID0gdGhpcywKCQkJCQkJCXIgPSBvLmNoYXJ0LAoJCQkJCQkJcyA9IHIucmVuZGVyZXIsCgkJCQkJCQlsID0gby5vcHRpb25zLnNoYWRvdzsKCQkJCQkJbCAmJiAhby5zaGFkb3dHcm91cCAmJiAoby5zaGFkb3dHcm91cCA9IHMuZygic2hhZG93IikuYWRkKG8uZ3JvdXApKSwgbXQoby5wb2ludHMsIGZ1bmN0aW9uKHIpIHsKCQkJCQkJCXQgPSByLmdyYXBoaWMsIGkgPSByLnNoYXBlQXJncywgbiA9IHIuc2hhZG93R3JvdXAsIGwgJiYgIW4gJiYgKG4gPSByLnNoYWRvd0dyb3VwID0gcy5nKCJzaGFkb3ciKS5hZGQoby5zaGFkb3dHcm91cCkpLCBlID0gci5zbGljZWQgPyByLnNsaWNlZFRyYW5zbGF0aW9uIDogewoJCQkJCQkJCXRyYW5zbGF0ZVg6IDAsCgkJCQkJCQkJdHJhbnNsYXRlWTogMAoJCQkJCQkJfSwgbiAmJiBuLmF0dHIoZSksIHQgPyB0LmFuaW1hdGUoYShpLCBlKSkgOiByLmdyYXBoaWMgPSB0ID0gc1tyLnNoYXBlVHlwZV0oaSkuc2V0UmFkaWFsUmVmZXJlbmNlKG8uY2VudGVyKS5hdHRyKHIucG9pbnRBdHRyW3Iuc2VsZWN0ZWQgPyBvdCA6IGl0XSkuYXR0cih7CgkJCQkJCQkJInN0cm9rZS1saW5lam9pbiI6ICJyb3VuZCIKCQkJCQkJCX0pLmF0dHIoZSkuYWRkKG8uZ3JvdXApLnNoYWRvdyhsLCBuKSwgdm9pZCAwICE9PSByLnZpc2libGUgJiYgci5zZXRWaXNpYmxlKHIudmlzaWJsZSkKCQkJCQkJfSkKCQkJCQl9LAoJCQkJCXNvcnRCeUFuZ2xlOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCWUuc29ydChmdW5jdGlvbihlLCBuKSB7CgkJCQkJCQlyZXR1cm4gdm9pZCAwICE9PSBlLmFuZ2xlICYmIChuLmFuZ2xlIC0gZS5hbmdsZSkgKiB0CgkJCQkJCX0pCgkJCQkJfSwKCQkJCQlkcmF3TGVnZW5kU3ltYm9sOiBVdC5kcmF3UmVjdGFuZ2xlLAoJCQkJCWdldENlbnRlcjogWXQuZ2V0Q2VudGVyLAoJCQkJCWdldFN5bWJvbDogRmUKCQkJCX07CgkJCW9uID0gdihYdCwgb24pLCBzdC5waWUgPSBvbiwgWHQucHJvdG90eXBlLmRyYXdEYXRhTGFiZWxzID0gZnVuY3Rpb24oKSB7CgkJCQl2YXIgZSwgdCwgbiwgaSwgciA9IHRoaXMsCgkJCQkJcyA9IHIub3B0aW9ucywKCQkJCQlsID0gcy5jdXJzb3IsCgkJCQkJYyA9IHMuZGF0YUxhYmVscywKCQkJCQlkID0gci5wb2ludHMsCgkJCQkJcCA9IHIuaGFzUmVuZGVyZWQgfHwgMDsKCQkJCShjLmVuYWJsZWQgfHwgci5faGFzUG9pbnRMYWJlbHMpICYmIChyLmRsUHJvY2Vzc09wdGlvbnMgJiYgci5kbFByb2Nlc3NPcHRpb25zKGMpLCBpID0gci5wbG90R3JvdXAoImRhdGFMYWJlbHNHcm91cCIsICJkYXRhLWxhYmVscyIsIGMuZGVmZXIgPyBKZSA6IFZlLCBjLnpJbmRleCB8fCA2KSwgXyhjLmRlZmVyLCAhMCkgJiYgKGkuYXR0cih7CgkJCQkJb3BhY2l0eTogK3AKCQkJCX0pLCBwIHx8IHh0KHIsICJhZnRlckFuaW1hdGUiLCBmdW5jdGlvbigpIHsKCQkJCQlyLnZpc2libGUgJiYgaS5zaG93KCksIGlbcy5hbmltYXRpb24gPyAiYW5pbWF0ZSIgOiAiYXR0ciJdKHsKCQkJCQkJb3BhY2l0eTogMQoJCQkJCX0sIHsKCQkJCQkJZHVyYXRpb246IDIwMAoJCQkJCX0pCgkJCQl9KSksIHQgPSBjLCBtdChkLCBmdW5jdGlvbihzKSB7CgkJCQkJdmFyIGQsIHAsIGgsIHUsIGYsIGcgPSBzLmRhdGFMYWJlbCwKCQkJCQkJeCA9IHMuY29ubmVjdG9yLAoJCQkJCQl3ID0gITA7CgkJCQkJaWYgKGUgPSBzLm9wdGlvbnMgJiYgcy5vcHRpb25zLmRhdGFMYWJlbHMsIGQgPSBfKGUgJiYgZS5lbmFibGVkLCB0LmVuYWJsZWQpLCBnICYmICFkKSBzLmRhdGFMYWJlbCA9IGcuZGVzdHJveSgpOwoJCQkJCWVsc2UgaWYgKGQpIHsKCQkJCQkJaWYgKGMgPSBvKHQsIGUpLCBmID0gYy5yb3RhdGlvbiwgcCA9IHMuZ2V0TGFiZWxDb25maWcoKSwgbiA9IGMuZm9ybWF0ID8gQihjLmZvcm1hdCwgcCkgOiBjLmZvcm1hdHRlci5jYWxsKHAsIGMpLCBjLnN0eWxlLmNvbG9yID0gXyhjLmNvbG9yLCBjLnN0eWxlLmNvbG9yLCByLmNvbG9yLCAiYmxhY2siKSwgZykgbShuKSA/IChnLmF0dHIoewoJCQkJCQkJdGV4dDogbgoJCQkJCQl9KSwgdyA9ICExKSA6IChzLmRhdGFMYWJlbCA9IGcgPSBnLmRlc3Ryb3koKSwgeCAmJiAocy5jb25uZWN0b3IgPSB4LmRlc3Ryb3koKSkpOwoJCQkJCQllbHNlIGlmIChtKG4pKSB7CgkJCQkJCQloID0gewoJCQkJCQkJCWZpbGw6IGMuYmFja2dyb3VuZENvbG9yLAoJCQkJCQkJCXN0cm9rZTogYy5ib3JkZXJDb2xvciwKCQkJCQkJCQkic3Ryb2tlLXdpZHRoIjogYy5ib3JkZXJXaWR0aCwKCQkJCQkJCQlyOiBjLmJvcmRlclJhZGl1cyB8fCAwLAoJCQkJCQkJCXJvdGF0aW9uOiBmLAoJCQkJCQkJCXBhZGRpbmc6IGMucGFkZGluZywKCQkJCQkJCQl6SW5kZXg6IDEKCQkJCQkJCX07CgkJCQkJCQlmb3IgKHUgaW4gaCkgaFt1XSA9PT0gVyAmJiBkZWxldGUgaFt1XTsKCQkJCQkJCWcgPSBzLmRhdGFMYWJlbCA9IHIuY2hhcnQucmVuZGVyZXJbZiA/ICJ0ZXh0IiA6ICJsYWJlbCJdKG4sIDAsIC05OTksIG51bGwsIG51bGwsIG51bGwsIGMudXNlSFRNTCkuYXR0cihoKS5jc3MoYShjLnN0eWxlLCBsICYmIHsKCQkJCQkJCQljdXJzb3I6IGwKCQkJCQkJCX0pKS5hZGQoaSkuc2hhZG93KGMuc2hhZG93KQoJCQkJCQl9CgkJCQkJCWcgJiYgci5hbGlnbkRhdGFMYWJlbChzLCBnLCBjLCBudWxsLCB3KQoJCQkJCX0KCQkJCX0pKQoJCQl9LCBYdC5wcm90b3R5cGUuYWxpZ25EYXRhTGFiZWwgPSBmdW5jdGlvbihlLCB0LCBuLCBpLCBvKSB7CgkJCQl2YXIgciwgcyA9IHRoaXMuY2hhcnQsCgkJCQkJbCA9IHMuaW52ZXJ0ZWQsCgkJCQkJYyA9IF8oZS5wbG90WCwgLTk5OSksCgkJCQkJZCA9IF8oZS5wbG90WSwgLTk5OSksCgkJCQkJcCA9IHQuZ2V0QkJveCgpLAoJCQkJCWggPSB0aGlzLnZpc2libGUgJiYgKGUuc2VyaWVzLmZvcmNlREwgfHwgcy5pc0luc2lkZVBsb3QoYywgeGUoZCksIGwpIHx8IGkgJiYgcy5pc0luc2lkZVBsb3QoYywgbCA/IGkueCArIDEgOiBpLnkgKyBpLmhlaWdodCAtIDEsIGwpKTsKCQkJCWggJiYgKGkgPSBhKHsKCQkJCQl4OiBsID8gcy5wbG90V2lkdGggLSBkIDogYywKCQkJCQl5OiB4ZShsID8gcy5wbG90SGVpZ2h0IC0gYyA6IGQpLAoJCQkJCXdpZHRoOiAwLAoJCQkJCWhlaWdodDogMAoJCQkJfSwgaSksIGEobiwgewoJCQkJCXdpZHRoOiBwLndpZHRoLAoJCQkJCWhlaWdodDogcC5oZWlnaHQKCQkJCX0pLCBuLnJvdGF0aW9uID8gdFtvID8gImF0dHIiIDogImFuaW1hdGUiXSh7CgkJCQkJeDogaS54ICsgbi54ICsgaS53aWR0aCAvIDIsCgkJCQkJeTogaS55ICsgbi55ICsgaS5oZWlnaHQgLyAyCgkJCQl9KS5hdHRyKHsKCQkJCQlhbGlnbjogbi5hbGlnbgoJCQkJfSkgOiAodC5hbGlnbihuLCBudWxsLCBpKSwgciA9IHQuYWxpZ25BdHRyLCAianVzdGlmeSIgPT09IF8obi5vdmVyZmxvdywgImp1c3RpZnkiKSA/IHRoaXMuanVzdGlmeURhdGFMYWJlbCh0LCBuLCByLCBwLCBpLCBvKSA6IF8obi5jcm9wLCAhMCkgJiYgKGggPSBzLmlzSW5zaWRlUGxvdChyLngsIHIueSkgJiYgcy5pc0luc2lkZVBsb3Qoci54ICsgcC53aWR0aCwgci55ICsgcC5oZWlnaHQpKSkpLCBoIHx8ICh0LmF0dHIoewoJCQkJCXk6IC05OTkKCQkJCX0pLCB0LnBsYWNlZCA9ICExKQoJCQl9LCBYdC5wcm90b3R5cGUuanVzdGlmeURhdGFMYWJlbCA9IGZ1bmN0aW9uKGUsIHQsIG4sIGksIGEsIG8pIHsKCQkJCXZhciByLCBzLCBsID0gdGhpcy5jaGFydCwKCQkJCQljID0gdC5hbGlnbiwKCQkJCQlkID0gdC52ZXJ0aWNhbEFsaWduOwoJCQkJciA9IG4ueCwgMCA+IHIgJiYgKCJyaWdodCIgPT09IGMgPyB0LmFsaWduID0gImxlZnQiIDogdC54ID0gLXIsIHMgPSAhMCksIHIgPSBuLnggKyBpLndpZHRoLCByID4gbC5wbG90V2lkdGggJiYgKCJsZWZ0IiA9PT0gYyA/IHQuYWxpZ24gPSAicmlnaHQiIDogdC54ID0gbC5wbG90V2lkdGggLSByLCBzID0gITApLCByID0gbi55LCAwID4gciAmJiAoImJvdHRvbSIgPT09IGQgPyB0LnZlcnRpY2FsQWxpZ24gPSAidG9wIiA6IHQueSA9IC1yLCBzID0gITApLCByID0gbi55ICsgaS5oZWlnaHQsIHIgPiBsLnBsb3RIZWlnaHQgJiYgKCJ0b3AiID09PSBkID8gdC52ZXJ0aWNhbEFsaWduID0gImJvdHRvbSIgOiB0LnkgPSBsLnBsb3RIZWlnaHQgLSByLCBzID0gITApLCBzICYmIChlLnBsYWNlZCA9ICFvLCBlLmFsaWduKHQsIG51bGwsIGEpKQoJCQl9LCBzdC5waWUgJiYgKHN0LnBpZS5wcm90b3R5cGUuZHJhd0RhdGFMYWJlbHMgPSBmdW5jdGlvbigpIHsKCQkJCXZhciBlLCB0LCBuLCBpLCBhLCBvLCByLCBzLCBsLCBjLCBkLCBwLCBoLCB1ID0gdGhpcywKCQkJCQltID0gdS5kYXRhLAoJCQkJCWYgPSB1LmNoYXJ0LAoJCQkJCWcgPSB1Lm9wdGlvbnMuZGF0YUxhYmVscywKCQkJCQl4ID0gXyhnLmNvbm5lY3RvclBhZGRpbmcsIDEwKSwKCQkJCQl3ID0gXyhnLmNvbm5lY3RvcldpZHRoLCAxKSwKCQkJCQl2ID0gZi5wbG90V2lkdGgsCgkJCQkJYiA9IGYucGxvdEhlaWdodCwKCQkJCQl5ID0gXyhnLnNvZnRDb25uZWN0b3IsICEwKSwKCQkJCQlrID0gZy5kaXN0YW5jZSwKCQkJCQl6ID0gdS5jZW50ZXIsCgkJCQkJQiA9IHpbMl0gLyAyLAoJCQkJCWogPSB6WzFdLAoJCQkJCUMgPSBrID4gMCwKCQkJCQlTID0gWwoJCQkJCQlbXSwKCQkJCQkJW10KCQkJCQldLAoJCQkJCU4gPSBbMCwgMCwgMCwgMF0sCgkJCQkJUCA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQkJcmV0dXJuIHQueSAtIGUueQoJCQkJCX07CgkJCQlpZiAodS52aXNpYmxlICYmIChnLmVuYWJsZWQgfHwgdS5faGFzUG9pbnRMYWJlbHMpKSB7CgkJCQkJZm9yIChYdC5wcm90b3R5cGUuZHJhd0RhdGFMYWJlbHMuYXBwbHkodSksIG10KG0sIGZ1bmN0aW9uKGUpIHsKCQkJCQkJZS5kYXRhTGFiZWwgJiYgZS52aXNpYmxlICYmIFNbZS5oYWxmXS5wdXNoKGUpCgkJCQkJfSksIHAgPSAyOyBwLS07KSB7CgkJCQkJCXZhciBJLCBBLCBxLCBFLCBPID0gW10sCgkJCQkJCQlMID0gW10sCgkJCQkJCQlEID0gU1twXSwKCQkJCQkJCU0gPSBELmxlbmd0aDsKCQkJCQkJaWYgKE0pIHsKCQkJCQkJCWZvciAodS5zb3J0QnlBbmdsZShELCBwIC0gLjUpLCBoID0gciA9IDA7ICFyICYmIERbaF07KSByID0gRFtoXSAmJiBEW2hdLmRhdGFMYWJlbCAmJiAoRFtoXS5kYXRhTGFiZWwuZ2V0QkJveCgpLmhlaWdodCB8fCAyMSksIGgrKzsKCQkJCQkJCWlmIChrID4gMCkgewoJCQkJCQkJCWZvciAocSA9IHllKGogKyBCICsgaywgZi5wbG90SGVpZ2h0KSwgQSA9IGJlKDAsIGogLSBCIC0gayk7IHEgPj0gQTsgQSArPSByKSBPLnB1c2goQSk7CgkJCQkJCQkJaWYgKEkgPSBPLmxlbmd0aCwgTSA+IEkpIHsKCQkJCQkJCQkJZm9yIChkID0gW10uY29uY2F0KEQpLCBkLnNvcnQoUCksIGggPSBNOyBoLS07KSBkW2hdLnJhbmsgPSBoOwoJCQkJCQkJCQlmb3IgKGggPSBNOyBoLS07KSBEW2hdLnJhbmsgPj0gSSAmJiBELnNwbGljZShoLCAxKTsKCQkJCQkJCQkJTSA9IEQubGVuZ3RoCgkJCQkJCQkJfQoJCQkJCQkJCWZvciAoaCA9IDA7IE0gPiBoOyBoKyspIHsKCQkJCQkJCQkJZSA9IERbaF0sIG8gPSBlLmxhYmVsUG9zOwoJCQkJCQkJCQl2YXIgUiwgRiwgJCA9IDk5OTk7CgkJCQkJCQkJCWZvciAoRiA9IDA7IEkgPiBGOyBGKyspIFIgPSBrZShPW0ZdIC0gb1sxXSksICQgPiBSICYmICgkID0gUiwgRSA9IEYpOwoJCQkJCQkJCQlpZiAoaCA+IEUgJiYgbnVsbCAhPT0gT1toXSkgRSA9IGg7CgkJCQkJCQkJCWVsc2UgaWYgKE0gLSBoICsgRSA+IEkgJiYgbnVsbCAhPT0gT1toXSkKCQkJCQkJCQkJCWZvciAoRSA9IEkgLSBNICsgaDsgbnVsbCA9PT0gT1tFXTspIEUrKzsKCQkJCQkJCQkJZWxzZQoJCQkJCQkJCQkJZm9yICg7IG51bGwgPT09IE9bRV07KSBFKys7CgkJCQkJCQkJCUwucHVzaCh7CgkJCQkJCQkJCQlpOiBFLAoJCQkJCQkJCQkJeTogT1tFXQoJCQkJCQkJCQl9KSwgT1tFXSA9IG51bGwKCQkJCQkJCQl9CgkJCQkJCQkJTC5zb3J0KFApCgkJCQkJCQl9CgkJCQkJCQlmb3IgKGggPSAwOyBNID4gaDsgaCsrKSB7CgkJCQkJCQkJdmFyIFcsIEg7CgkJCQkJCQkJZSA9IERbaF0sIG8gPSBlLmxhYmVsUG9zLCBpID0gZS5kYXRhTGFiZWwsIGMgPSBlLnZpc2libGUgPT09ICExID8gSmUgOiBWZSwgSCA9IG9bMV0sIGsgPiAwID8gKFcgPSBMLnBvcCgpLCBFID0gVy5pLCBsID0gVy55LCAoSCA+IGwgJiYgbnVsbCAhPT0gT1tFICsgMV0gfHwgbCA+IEggJiYgbnVsbCAhPT0gT1tFIC0gMV0pICYmIChsID0geWUoYmUoMCwgSCksIGYucGxvdEhlaWdodCkpKSA6IGwgPSBILCBzID0gZy5qdXN0aWZ5ID8gelswXSArIChwID8gLTEgOiAxKSAqIChCICsgaykgOiB1LmdldFgobCA9PT0gaiAtIEIgLSBrIHx8IGwgPT09IGogKyBCICsgayA/IEggOiBsLCBwKSwgaS5fYXR0ciA9IHsKCQkJCQkJCQkJdmlzaWJpbGl0eTogYywKCQkJCQkJCQkJYWxpZ246IG9bNl0KCQkJCQkJCQl9LCBpLl9wb3MgPSB7CgkJCQkJCQkJCXg6IHMgKyBnLnggKyAoewoJCQkJCQkJCQkJbGVmdDogeCwKCQkJCQkJCQkJCXJpZ2h0OiAteAoJCQkJCQkJCQl9W29bNl1dIHx8IDApLAoJCQkJCQkJCQl5OiBsICsgZy55IC0gMTAKCQkJCQkJCQl9LCBpLmNvbm5YID0gcywgaS5jb25uWSA9IGwsIG51bGwgPT09IHRoaXMub3B0aW9ucy5zaXplICYmIChhID0gaS53aWR0aCwgeCA+IHMgLSBhID8gTlszXSA9IGJlKHhlKGEgLSBzICsgeCksIE5bM10pIDogcyArIGEgPiB2IC0geCAmJiAoTlsxXSA9IGJlKHhlKHMgKyBhIC0gdiArIHgpLCBOWzFdKSksIDAgPiBsIC0gciAvIDIgPyBOWzBdID0gYmUoeGUoLWwgKyByIC8gMiksIE5bMF0pIDogbCArIHIgLyAyID4gYiAmJiAoTlsyXSA9IGJlKHhlKGwgKyByIC8gMiAtIGIpLCBOWzJdKSkpCgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9KDAgPT09IFQoTikgfHwgdGhpcy52ZXJpZnlEYXRhTGFiZWxPdmVyZmxvdyhOKSkgJiYgKHRoaXMucGxhY2VEYXRhTGFiZWxzKCksIEMgJiYgdyAmJiBtdCh0aGlzLnBvaW50cywgZnVuY3Rpb24oZSkgewoJCQkJCQl0ID0gZS5jb25uZWN0b3IsIG8gPSBlLmxhYmVsUG9zLCBpID0gZS5kYXRhTGFiZWwsIGkgJiYgaS5fcG9zID8gKGMgPSBpLl9hdHRyLnZpc2liaWxpdHksIHMgPSBpLmNvbm5YLCBsID0gaS5jb25uWSwgbiA9IHkgPyBbZXQsIHMgKyAoImxlZnQiID09PSBvWzZdID8gNSA6IC01KSwgbCwgIkMiLCBzLCBsLCAyICogb1syXSAtIG9bNF0sIDIgKiBvWzNdIC0gb1s1XSwgb1syXSwgb1szXSwgdHQsIG9bNF0sIG9bNV1dIDogW2V0LCBzICsgKCJsZWZ0IiA9PT0gb1s2XSA/IDUgOiAtNSksIGwsIHR0LCBvWzJdLCBvWzNdLCB0dCwgb1s0XSwgb1s1XV0sIHQgPyAodC5hbmltYXRlKHsKCQkJCQkJCWQ6IG4KCQkJCQkJfSksIHQuYXR0cigidmlzaWJpbGl0eSIsIGMpKSA6IGUuY29ubmVjdG9yID0gdCA9IHUuY2hhcnQucmVuZGVyZXIucGF0aChuKS5hdHRyKHsKCQkJCQkJCSJzdHJva2Utd2lkdGgiOiB3LAoJCQkJCQkJc3Ryb2tlOiBnLmNvbm5lY3RvckNvbG9yIHx8IGUuY29sb3IgfHwgIiM2MDYwNjAiLAoJCQkJCQkJdmlzaWJpbGl0eTogYwoJCQkJCQl9KS5hZGQodS5kYXRhTGFiZWxzR3JvdXApKSA6IHQgJiYgKGUuY29ubmVjdG9yID0gdC5kZXN0cm95KCkpCgkJCQkJfSkpCgkJCQl9CgkJCX0sIHN0LnBpZS5wcm90b3R5cGUucGxhY2VEYXRhTGFiZWxzID0gZnVuY3Rpb24oKSB7CgkJCQltdCh0aGlzLnBvaW50cywgZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0LCBuID0gZS5kYXRhTGFiZWw7CgkJCQkJbiAmJiAodCA9IG4uX3BvcywgdCA/IChuLmF0dHIobi5fYXR0ciksIG5bbi5tb3ZlZCA/ICJhbmltYXRlIiA6ICJhdHRyIl0odCksIG4ubW92ZWQgPSAhMCkgOiBuICYmIG4uYXR0cih7CgkJCQkJCXk6IC05OTkKCQkJCQl9KSkKCQkJCX0pCgkJCX0sIHN0LnBpZS5wcm90b3R5cGUuYWxpZ25EYXRhTGFiZWwgPSBGZSwgc3QucGllLnByb3RvdHlwZS52ZXJpZnlEYXRhTGFiZWxPdmVyZmxvdyA9IGZ1bmN0aW9uKGUpIHsKCQkJCXZhciB0LCBuID0gdGhpcy5jZW50ZXIsCgkJCQkJaSA9IHRoaXMub3B0aW9ucywKCQkJCQlhID0gaS5jZW50ZXIsCgkJCQkJbyA9IGkubWluU2l6ZSB8fCA4MCwKCQkJCQlyID0gbzsKCQkJCXJldHVybiBudWxsICE9PSBhWzBdID8gciA9IGJlKG5bMl0gLSBiZShlWzFdLCBlWzNdKSwgbykgOiAociA9IGJlKG5bMl0gLSBlWzFdIC0gZVszXSwgbyksIG5bMF0gKz0gKGVbM10gLSBlWzFdKSAvIDIpLCBudWxsICE9PSBhWzFdID8gciA9IGJlKHllKHIsIG5bMl0gLSBiZShlWzBdLCBlWzJdKSksIG8pIDogKHIgPSBiZSh5ZShyLCBuWzJdIC0gZVswXSAtIGVbMl0pLCBvKSwgblsxXSArPSAoZVswXSAtIGVbMl0pIC8gMiksIHIgPCBuWzJdID8gKG5bMl0gPSByLCB0aGlzLnRyYW5zbGF0ZShuKSwgbXQodGhpcy5wb2ludHMsIGZ1bmN0aW9uKGUpIHsKCQkJCQllLmRhdGFMYWJlbCAmJiAoZS5kYXRhTGFiZWwuX3BvcyA9IG51bGwpCgkJCQl9KSwgdGhpcy5kcmF3RGF0YUxhYmVscyAmJiB0aGlzLmRyYXdEYXRhTGFiZWxzKCkpIDogdCA9ICEwLCB0CgkJCX0pLCBzdC5jb2x1bW4gJiYgKHN0LmNvbHVtbi5wcm90b3R5cGUuYWxpZ25EYXRhTGFiZWwgPSBmdW5jdGlvbihlLCB0LCBuLCBpLCBhKSB7CgkJCQl2YXIgciA9IHRoaXMuY2hhcnQsCgkJCQkJcyA9IHIuaW52ZXJ0ZWQsCgkJCQkJbCA9IGUuZGxCb3ggfHwgZS5zaGFwZUFyZ3MsCgkJCQkJYyA9IGUuYmVsb3cgfHwgZS5wbG90WSA+IF8odGhpcy50cmFuc2xhdGVkVGhyZXNob2xkLCByLnBsb3RTaXplWSksCgkJCQkJZCA9IF8obi5pbnNpZGUsICEhdGhpcy5vcHRpb25zLnN0YWNraW5nKTsKCQkJCWwgJiYgKGkgPSBvKGwpLCBzICYmIChpID0gewoJCQkJCXg6IHIucGxvdFdpZHRoIC0gaS55IC0gaS5oZWlnaHQsCgkJCQkJeTogci5wbG90SGVpZ2h0IC0gaS54IC0gaS53aWR0aCwKCQkJCQl3aWR0aDogaS5oZWlnaHQsCgkJCQkJaGVpZ2h0OiBpLndpZHRoCgkJCQl9KSwgZCB8fCAocyA/IChpLnggKz0gYyA/IDAgOiBpLndpZHRoLCBpLndpZHRoID0gMCkgOiAoaS55ICs9IGMgPyBpLmhlaWdodCA6IDAsIGkuaGVpZ2h0ID0gMCkpKSwgbi5hbGlnbiA9IF8obi5hbGlnbiwgIXMgfHwgZCA/ICJjZW50ZXIiIDogYyA/ICJyaWdodCIgOiAibGVmdCIpLCBuLnZlcnRpY2FsQWxpZ24gPSBfKG4udmVydGljYWxBbGlnbiwgcyB8fCBkID8gIm1pZGRsZSIgOiBjID8gInRvcCIgOiAiYm90dG9tIiksIFh0LnByb3RvdHlwZS5hbGlnbkRhdGFMYWJlbC5jYWxsKHRoaXMsIGUsIHQsIG4sIGksIGEpCgkJCX0pOwoJCQl2YXIgcm4gPSBsdC5UcmFja2VyTWl4aW4gPSB7CgkJCQlkcmF3VHJhY2tlclBvaW50OiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IHRoaXMsCgkJCQkJCXQgPSBlLmNoYXJ0LAoJCQkJCQluID0gdC5wb2ludGVyLAoJCQkJCQlpID0gZS5vcHRpb25zLmN1cnNvciwKCQkJCQkJYSA9IGkgJiYgewoJCQkJCQkJY3Vyc29yOiBpCgkJCQkJCX0sCgkJCQkJCW8gPSBmdW5jdGlvbihuKSB7CgkJCQkJCQl2YXIgaSwgYSA9IG4udGFyZ2V0OwoJCQkJCQkJZm9yICh0LmhvdmVyU2VyaWVzICE9PSBlICYmIGUub25Nb3VzZU92ZXIoKTsgYSAmJiAhaTspIGkgPSBhLnBvaW50LCBhID0gYS5wYXJlbnROb2RlOwoJCQkJCQkJaSAhPT0gVyAmJiBpICE9PSB0LmhvdmVyUG9pbnQgJiYgaS5vbk1vdXNlT3ZlcihuKQoJCQkJCQl9OwoJCQkJCW10KGUucG9pbnRzLCBmdW5jdGlvbihlKSB7CgkJCQkJCWUuZ3JhcGhpYyAmJiAoZS5ncmFwaGljLmVsZW1lbnQucG9pbnQgPSBlKSwgZS5kYXRhTGFiZWwgJiYgKGUuZGF0YUxhYmVsLmVsZW1lbnQucG9pbnQgPSBlKQoJCQkJCX0pLCBlLl9oYXNUcmFja2luZyB8fCAobXQoZS50cmFja2VyR3JvdXBzLCBmdW5jdGlvbih0KSB7CgkJCQkJCWVbdF0gJiYgKGVbdF0uYWRkQ2xhc3MoWmUgKyAidHJhY2tlciIpLm9uKCJtb3VzZW92ZXIiLCBvKS5vbigibW91c2VvdXQiLCBmdW5jdGlvbihlKSB7CgkJCQkJCQluLm9uVHJhY2tlck1vdXNlT3V0KGUpCgkJCQkJCX0pLmNzcyhhKSwgVSAmJiBlW3RdLm9uKCJ0b3VjaHN0YXJ0IiwgbykpCgkJCQkJfSksIGUuX2hhc1RyYWNraW5nID0gITApCgkJCQl9LAoJCQkJZHJhd1RyYWNrZXJHcmFwaDogZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUsIHQsIG4gPSB0aGlzLAoJCQkJCQlpID0gbi5vcHRpb25zLAoJCQkJCQlhID0gaS50cmFja0J5QXJlYSwKCQkJCQkJbyA9IFtdLmNvbmNhdChhID8gbi5hcmVhUGF0aCA6IG4uZ3JhcGhQYXRoKSwKCQkJCQkJciA9IG8ubGVuZ3RoLAoJCQkJCQlzID0gbi5jaGFydCwKCQkJCQkJbCA9IHMucG9pbnRlciwKCQkJCQkJYyA9IHMucmVuZGVyZXIsCgkJCQkJCWQgPSBzLm9wdGlvbnMudG9vbHRpcC5zbmFwLAoJCQkJCQlwID0gbi50cmFja2VyLAoJCQkJCQloID0gaS5jdXJzb3IsCgkJCQkJCXUgPSBoICYmIHsKCQkJCQkJCWN1cnNvcjogaAoJCQkJCQl9LAoJCQkJCQltID0gbi5zaW5nbGVQb2ludHMsCgkJCQkJCWYgPSBmdW5jdGlvbigpIHsKCQkJCQkJCXMuaG92ZXJTZXJpZXMgIT09IG4gJiYgbi5vbk1vdXNlT3ZlcigpCgkJCQkJCX0sCgkJCQkJCWcgPSAicmdiYSgxOTIsMTkyLDE5MiwiICsgKE9lID8gMWUtNCA6IC4wMDIpICsgIikiOwoJCQkJCWlmIChyICYmICFhKQoJCQkJCQlmb3IgKHQgPSByICsgMTsgdC0tOykgb1t0XSA9PT0gZXQgJiYgby5zcGxpY2UodCArIDEsIDAsIG9bdCArIDFdIC0gZCwgb1t0ICsgMl0sIHR0KSwgKHQgJiYgb1t0XSA9PT0gZXQgfHwgdCA9PT0gcikgJiYgby5zcGxpY2UodCwgMCwgdHQsIG9bdCAtIDJdICsgZCwgb1t0IC0gMV0pOwoJCQkJCWZvciAodCA9IDA7IHQgPCBtLmxlbmd0aDsgdCsrKSBlID0gbVt0XSwgby5wdXNoKGV0LCBlLnBsb3RYIC0gZCwgZS5wbG90WSwgdHQsIGUucGxvdFggKyBkLCBlLnBsb3RZKTsKCQkJCQlwID8gcC5hdHRyKHsKCQkJCQkJZDogbwoJCQkJCX0pIDogKG4udHJhY2tlciA9IGMucGF0aChvKS5hdHRyKHsKCQkJCQkJInN0cm9rZS1saW5lam9pbiI6ICJyb3VuZCIsCgkJCQkJCXZpc2liaWxpdHk6IG4udmlzaWJsZSA/IFZlIDogSmUsCgkJCQkJCXN0cm9rZTogZywKCQkJCQkJZmlsbDogYSA/IGcgOiBRZSwKCQkJCQkJInN0cm9rZS13aWR0aCI6IGkubGluZVdpZHRoICsgKGEgPyAwIDogMiAqIGQpLAoJCQkJCQl6SW5kZXg6IDIKCQkJCQl9KS5hZGQobi5ncm91cCksIG10KFtuLnRyYWNrZXIsIG4ubWFya2VyR3JvdXBdLCBmdW5jdGlvbihlKSB7CgkJCQkJCWUuYWRkQ2xhc3MoWmUgKyAidHJhY2tlciIpLm9uKCJtb3VzZW92ZXIiLCBmKS5vbigibW91c2VvdXQiLCBmdW5jdGlvbihlKSB7CgkJCQkJCQlsLm9uVHJhY2tlck1vdXNlT3V0KGUpCgkJCQkJCX0pLmNzcyh1KSwgVSAmJiBlLm9uKCJ0b3VjaHN0YXJ0IiwgZikKCQkJCQl9KSkKCQkJCX0KCQkJfTsKCQkJc3QuY29sdW1uICYmIChlbi5wcm90b3R5cGUuZHJhd1RyYWNrZXIgPSBybi5kcmF3VHJhY2tlclBvaW50KSwgc3QucGllICYmIChzdC5waWUucHJvdG90eXBlLmRyYXdUcmFja2VyID0gcm4uZHJhd1RyYWNrZXJQb2ludCksIHN0LnNjYXR0ZXIgJiYgKG5uLnByb3RvdHlwZS5kcmF3VHJhY2tlciA9IHJuLmRyYXdUcmFja2VyUG9pbnQpLCBhKEh0LnByb3RvdHlwZSwgewoJCQkJc2V0SXRlbUV2ZW50czogZnVuY3Rpb24oZSwgdCwgbiwgaSwgYSkgewoJCQkJCXZhciBvID0gdGhpczsKCQkJCQkobiA/IHQgOiBlLmxlZ2VuZEdyb3VwKS5vbigibW91c2VvdmVyIiwgZnVuY3Rpb24oKSB7CgkJCQkJCWUuc2V0U3RhdGUoYXQpLCB0LmNzcyhvLm9wdGlvbnMuaXRlbUhvdmVyU3R5bGUpCgkJCQkJfSkub24oIm1vdXNlb3V0IiwgZnVuY3Rpb24oKSB7CgkJCQkJCXQuY3NzKGUudmlzaWJsZSA/IGkgOiBhKSwgZS5zZXRTdGF0ZSgpCgkJCQkJfSkub24oImNsaWNrIiwgZnVuY3Rpb24odCkgewoJCQkJCQl2YXIgbiA9ICJsZWdlbmRJdGVtQ2xpY2siLAoJCQkJCQkJaSA9IGZ1bmN0aW9uKCkgewoJCQkJCQkJCWUuc2V0VmlzaWJsZSgpCgkJCQkJCQl9OwoJCQkJCQl0ID0gewoJCQkJCQkJYnJvd3NlckV2ZW50OiB0CgkJCQkJCX0sIGUuZmlyZVBvaW50RXZlbnQgPyBlLmZpcmVQb2ludEV2ZW50KG4sIHQsIGkpIDogdnQoZSwgbiwgdCwgaSkKCQkJCQl9KQoJCQkJfSwKCQkJCWNyZWF0ZUNoZWNrYm94Rm9ySXRlbTogZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0ID0gdGhpczsKCQkJCQllLmNoZWNrYm94ID0gdygiaW5wdXQiLCB7CgkJCQkJCXR5cGU6ICJjaGVja2JveCIsCgkJCQkJCWNoZWNrZWQ6IGUuc2VsZWN0ZWQsCgkJCQkJCWRlZmF1bHRDaGVja2VkOiBlLnNlbGVjdGVkCgkJCQkJfSwgdC5vcHRpb25zLml0ZW1DaGVja2JveFN0eWxlLCB0LmNoYXJ0LmNvbnRhaW5lciksIHh0KGUuY2hlY2tib3gsICJjbGljayIsIGZ1bmN0aW9uKHQpIHsKCQkJCQkJdmFyIG4gPSB0LnRhcmdldDsKCQkJCQkJdnQoZSwgImNoZWNrYm94Q2xpY2siLCB7CgkJCQkJCQljaGVja2VkOiBuLmNoZWNrZWQKCQkJCQkJfSwgZnVuY3Rpb24oKSB7CgkJCQkJCQllLnNlbGVjdCgpCgkJCQkJCX0pCgkJCQkJfSkKCQkJCX0KCQkJfSksIEcubGVnZW5kLml0ZW1TdHlsZS5jdXJzb3IgPSAicG9pbnRlciIsIGEoRi5wcm90b3R5cGUsIHsKCQkJCXNob3dSZXNldFpvb206IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gdGhpcywKCQkJCQkJdCA9IEcubGFuZywKCQkJCQkJbiA9IGUub3B0aW9ucy5jaGFydC5yZXNldFpvb21CdXR0b24sCgkJCQkJCWkgPSBuLnRoZW1lLAoJCQkJCQlhID0gaS5zdGF0ZXMsCgkJCQkJCW8gPSAiY2hhcnQiID09PSBuLnJlbGF0aXZlVG8gPyBudWxsIDogInBsb3RCb3giOwoJCQkJCXRoaXMucmVzZXRab29tQnV0dG9uID0gZS5yZW5kZXJlci5idXR0b24odC5yZXNldFpvb20sIG51bGwsIG51bGwsIGZ1bmN0aW9uKCkgewoJCQkJCQllLnpvb21PdXQoKQoJCQkJCX0sIGksIGEgJiYgYS5ob3ZlcikuYXR0cih7CgkJCQkJCWFsaWduOiBuLnBvc2l0aW9uLmFsaWduLAoJCQkJCQl0aXRsZTogdC5yZXNldFpvb21UaXRsZQoJCQkJCX0pLmFkZCgpLmFsaWduKG4ucG9zaXRpb24sICExLCBvKQoJCQkJfSwKCQkJCXpvb21PdXQ6IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gdGhpczsKCQkJCQl2dChlLCAic2VsZWN0aW9uIiwgewoJCQkJCQlyZXNldFNlbGVjdGlvbjogITAKCQkJCQl9LCBmdW5jdGlvbigpIHsKCQkJCQkJZS56b29tKCkKCQkJCQl9KQoJCQkJfSwKCQkJCXpvb206IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCwgbiwgaSA9IHRoaXMsCgkJCQkJCWEgPSBpLnBvaW50ZXIsCgkJCQkJCW8gPSAhMTsKCQkJCQkhZSB8fCBlLnJlc2V0U2VsZWN0aW9uID8gbXQoaS5heGVzLCBmdW5jdGlvbihlKSB7CgkJCQkJCXQgPSBlLnpvb20oKQoJCQkJCX0pIDogbXQoZS54QXhpcy5jb25jYXQoZS55QXhpcyksIGZ1bmN0aW9uKGUpIHsKCQkJCQkJdmFyIG4gPSBlLmF4aXMsCgkJCQkJCQlpID0gbi5pc1hBeGlzOwoJCQkJCQkoYVtpID8gInpvb21YIiA6ICJ6b29tWSJdIHx8IGFbaSA/ICJwaW5jaFgiIDogInBpbmNoWSJdKSAmJiAodCA9IG4uem9vbShlLm1pbiwgZS5tYXgpLCBuLmRpc3BsYXlCdG4gJiYgKG8gPSAhMCkpCgkJCQkJfSksIG4gPSBpLnJlc2V0Wm9vbUJ1dHRvbiwgbyAmJiAhbiA/IGkuc2hvd1Jlc2V0Wm9vbSgpIDogIW8gJiYgbChuKSAmJiAoaS5yZXNldFpvb21CdXR0b24gPSBuLmRlc3Ryb3koKSksIHQgJiYgaS5yZWRyYXcoXyhpLm9wdGlvbnMuY2hhcnQuYW5pbWF0aW9uLCBlICYmIGUuYW5pbWF0aW9uLCBpLnBvaW50Q291bnQgPCAxMDApKQoJCQkJfSwKCQkJCXBhbjogZnVuY3Rpb24oZSwgdCkgewoJCQkJCXZhciBuLCBpID0gdGhpcywKCQkJCQkJYSA9IGkuaG92ZXJQb2ludHM7CgkJCQkJYSAmJiBtdChhLCBmdW5jdGlvbihlKSB7CgkJCQkJCWUuc2V0U3RhdGUoKQoJCQkJCX0pLCBtdCgieHkiID09PSB0ID8gWzEsIDBdIDogWzFdLCBmdW5jdGlvbih0KSB7CgkJCQkJCXZhciBhID0gZVt0ID8gImNoYXJ0WCIgOiAiY2hhcnRZIl0sCgkJCQkJCQlvID0gaVt0ID8gInhBeGlzIiA6ICJ5QXhpcyJdWzBdLAoJCQkJCQkJciA9IGlbdCA/ICJtb3VzZURvd25YIiA6ICJtb3VzZURvd25ZIl0sCgkJCQkJCQlzID0gKG8ucG9pbnRSYW5nZSB8fCAwKSAvIDIsCgkJCQkJCQlsID0gby5nZXRFeHRyZW1lcygpLAoJCQkJCQkJYyA9IG8udG9WYWx1ZShyIC0gYSwgITApICsgcywKCQkJCQkJCWQgPSBvLnRvVmFsdWUociArIGlbdCA/ICJwbG90V2lkdGgiIDogInBsb3RIZWlnaHQiXSAtIGEsICEwKSAtIHM7CgkJCQkJCW8uc2VyaWVzLmxlbmd0aCAmJiBjID4geWUobC5kYXRhTWluLCBsLm1pbikgJiYgZCA8IGJlKGwuZGF0YU1heCwgbC5tYXgpICYmIChvLnNldEV4dHJlbWVzKGMsIGQsICExLCAhMSwgewoJCQkJCQkJdHJpZ2dlcjogInBhbiIKCQkJCQkJfSksIG4gPSAhMCksIGlbdCA/ICJtb3VzZURvd25YIiA6ICJtb3VzZURvd25ZIl0gPSBhCgkJCQkJfSksIG4gJiYgaS5yZWRyYXcoITEpLCB4KGkuY29udGFpbmVyLCB7CgkJCQkJCWN1cnNvcjogIm1vdmUiCgkJCQkJfSkKCQkJCX0KCQkJfSksIGEoR3QucHJvdG90eXBlLCB7CgkJCQlzZWxlY3Q6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQl2YXIgbiA9IHRoaXMsCgkJCQkJCWkgPSBuLnNlcmllcywKCQkJCQkJYSA9IGkuY2hhcnQ7CgkJCQkJZSA9IF8oZSwgIW4uc2VsZWN0ZWQpLCBuLmZpcmVQb2ludEV2ZW50KGUgPyAic2VsZWN0IiA6ICJ1bnNlbGVjdCIsIHsKCQkJCQkJYWNjdW11bGF0ZTogdAoJCQkJCX0sIGZ1bmN0aW9uKCkgewoJCQkJCQluLnNlbGVjdGVkID0gbi5vcHRpb25zLnNlbGVjdGVkID0gZSwgaS5vcHRpb25zLmRhdGFbdXQobiwgaS5kYXRhKV0gPSBuLm9wdGlvbnMsIG4uc2V0U3RhdGUoZSAmJiBvdCksIHQgfHwgbXQoYS5nZXRTZWxlY3RlZFBvaW50cygpLCBmdW5jdGlvbihlKSB7CgkJCQkJCQllLnNlbGVjdGVkICYmIGUgIT09IG4gJiYgKGUuc2VsZWN0ZWQgPSBlLm9wdGlvbnMuc2VsZWN0ZWQgPSAhMSwgaS5vcHRpb25zLmRhdGFbdXQoZSwgaS5kYXRhKV0gPSBlLm9wdGlvbnMsIGUuc2V0U3RhdGUoaXQpLCBlLmZpcmVQb2ludEV2ZW50KCJ1bnNlbGVjdCIpKQoJCQkJCQl9KQoJCQkJCX0pCgkJCQl9LAoJCQkJb25Nb3VzZU92ZXI6IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCA9IHRoaXMsCgkJCQkJCW4gPSB0LnNlcmllcywKCQkJCQkJaSA9IG4uY2hhcnQsCgkJCQkJCWEgPSBpLnRvb2x0aXAsCgkJCQkJCW8gPSBpLmhvdmVyUG9pbnQ7CgkJCQkJbyAmJiBvICE9PSB0ICYmIG8ub25Nb3VzZU91dCgpLCB0LmZpcmVQb2ludEV2ZW50KCJtb3VzZU92ZXIiKSwgIWEgfHwgYS5zaGFyZWQgJiYgIW4ubm9TaGFyZWRUb29sdGlwIHx8IGEucmVmcmVzaCh0LCBlKSwgdC5zZXRTdGF0ZShhdCksIGkuaG92ZXJQb2ludCA9IHQKCQkJCX0sCgkJCQlvbk1vdXNlT3V0OiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IHRoaXMuc2VyaWVzLmNoYXJ0LAoJCQkJCQl0ID0gZS5ob3ZlclBvaW50czsKCQkJCQl0aGlzLmZpcmVQb2ludEV2ZW50KCJtb3VzZU91dCIpLCB0ICYmIC0xICE9PSB1dCh0aGlzLCB0KSB8fCAodGhpcy5zZXRTdGF0ZSgpLCBlLmhvdmVyUG9pbnQgPSBudWxsKQoJCQkJfSwKCQkJCWltcG9ydEV2ZW50czogZnVuY3Rpb24oKSB7CgkJCQkJaWYgKCF0aGlzLmhhc0ltcG9ydGVkRXZlbnRzKSB7CgkJCQkJCXZhciBlLCB0ID0gdGhpcywKCQkJCQkJCW4gPSBvKHQuc2VyaWVzLm9wdGlvbnMucG9pbnQsIHQub3B0aW9ucyksCgkJCQkJCQlpID0gbi5ldmVudHM7CgkJCQkJCXQuZXZlbnRzID0gaTsKCQkJCQkJZm9yIChlIGluIGkpIHh0KHQsIGUsIGlbZV0pOwoJCQkJCQl0aGlzLmhhc0ltcG9ydGVkRXZlbnRzID0gITAKCQkJCQl9CgkJCQl9LAoJCQkJc2V0U3RhdGU6IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQl2YXIgbiwgaSwgciwgcywgbCA9IHRoaXMsCgkJCQkJCWMgPSBsLnBsb3RYLAoJCQkJCQlkID0gbC5wbG90WSwKCQkJCQkJcCA9IGwuc2VyaWVzLAoJCQkJCQloID0gcC5vcHRpb25zLnN0YXRlcywKCQkJCQkJdSA9IEJ0W3AudHlwZV0ubWFya2VyICYmIHAub3B0aW9ucy5tYXJrZXIsCgkJCQkJCW0gPSB1ICYmICF1LmVuYWJsZWQsCgkJCQkJCWYgPSB1ICYmIHUuc3RhdGVzW2VdLAoJCQkJCQlnID0gZiAmJiBmLmVuYWJsZWQgPT09ICExLAoJCQkJCQlfID0gcC5zdGF0ZU1hcmtlckdyYXBoaWMsCgkJCQkJCXggPSBsLm1hcmtlciB8fCB7fSwKCQkJCQkJdyA9IHAuY2hhcnQsCgkJCQkJCXYgPSBwLmhhbG87CgkJCQkJZSA9IGUgfHwgaXQsIHMgPSBsLnBvaW50QXR0cltlXSB8fCBwLnBvaW50QXR0cltlXSwgZSA9PT0gbC5zdGF0ZSAmJiAhdCB8fCBsLnNlbGVjdGVkICYmIGUgIT09IG90IHx8IGhbZV0gJiYgaFtlXS5lbmFibGVkID09PSAhMSB8fCBlICYmIChnIHx8IG0gJiYgZi5lbmFibGVkID09PSAhMSkgfHwgZSAmJiB4LnN0YXRlcyAmJiB4LnN0YXRlc1tlXSAmJiB4LnN0YXRlc1tlXS5lbmFibGVkID09PSAhMSB8fCAobC5ncmFwaGljID8gKG4gPSB1ICYmIGwuZ3JhcGhpYy5zeW1ib2xOYW1lICYmIHMuciwgbC5ncmFwaGljLmF0dHIobyhzLCBuID8gewoJCQkJCQl4OiBjIC0gbiwKCQkJCQkJeTogZCAtIG4sCgkJCQkJCXdpZHRoOiAyICogbiwKCQkJCQkJaGVpZ2h0OiAyICogbgoJCQkJCX0gOiB7fSkpLCBfICYmIF8uaGlkZSgpKSA6IChlICYmIGYgJiYgKG4gPSBmLnJhZGl1cywgciA9IHguc3ltYm9sIHx8IHAuc3ltYm9sLCBfICYmIF8uY3VycmVudFN5bWJvbCAhPT0gciAmJiAoXyA9IF8uZGVzdHJveSgpKSwgXyA/IF9bdCA/ICJhbmltYXRlIiA6ICJhdHRyIl0oewoJCQkJCQl4OiBjIC0gbiwKCQkJCQkJeTogZCAtIG4KCQkJCQl9KSA6IHIgJiYgKHAuc3RhdGVNYXJrZXJHcmFwaGljID0gXyA9IHcucmVuZGVyZXIuc3ltYm9sKHIsIGMgLSBuLCBkIC0gbiwgMiAqIG4sIDIgKiBuKS5hdHRyKHMpLmFkZChwLm1hcmtlckdyb3VwKSwgXy5jdXJyZW50U3ltYm9sID0gcikpLCBfICYmIF9bZSAmJiB3LmlzSW5zaWRlUGxvdChjLCBkLCB3LmludmVydGVkKSA/ICJzaG93IiA6ICJoaWRlIl0oKSksIGkgPSBoW2VdICYmIGhbZV0uaGFsbywgaSAmJiBpLnNpemUgPyAodiB8fCAocC5oYWxvID0gdiA9IHcucmVuZGVyZXIucGF0aCgpLmFkZChwLnNlcmllc0dyb3VwKSksIHYuYXR0cihhKHsKCQkJCQkJZmlsbDogVHQobC5jb2xvciB8fCBwLmNvbG9yKS5zZXRPcGFjaXR5KGkub3BhY2l0eSkuZ2V0KCkKCQkJCQl9LCBpLmF0dHJpYnV0ZXMpKVt0ID8gImFuaW1hdGUiIDogImF0dHIiXSh7CgkJCQkJCWQ6IGwuaGFsb1BhdGgoaS5zaXplKQoJCQkJCX0pKSA6IHYgJiYgdi5hdHRyKHsKCQkJCQkJZDogW10KCQkJCQl9KSwgbC5zdGF0ZSA9IGUpCgkJCQl9LAoJCQkJaGFsb1BhdGg6IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCA9IHRoaXMuc2VyaWVzLAoJCQkJCQluID0gdC5jaGFydCwKCQkJCQkJaSA9IHQuZ2V0UGxvdEJveCgpLAoJCQkJCQlhID0gbi5pbnZlcnRlZDsKCQkJCQlyZXR1cm4gbi5yZW5kZXJlci5zeW1ib2xzLmNpcmNsZShpLnRyYW5zbGF0ZVggKyAoYSA/IHQueUF4aXMubGVuIC0gdGhpcy5wbG90WSA6IHRoaXMucGxvdFgpIC0gZSwgaS50cmFuc2xhdGVZICsgKGEgPyB0LnhBeGlzLmxlbiAtIHRoaXMucGxvdFggOiB0aGlzLnBsb3RZKSAtIGUsIDIgKiBlLCAyICogZSkKCQkJCX0KCQkJfSksIGEoWHQucHJvdG90eXBlLCB7CgkJCQlvbk1vdXNlT3ZlcjogZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSB0aGlzLAoJCQkJCQl0ID0gZS5jaGFydCwKCQkJCQkJbiA9IHQuaG92ZXJTZXJpZXM7CgkJCQkJbiAmJiBuICE9PSBlICYmIG4ub25Nb3VzZU91dCgpLCBlLm9wdGlvbnMuZXZlbnRzLm1vdXNlT3ZlciAmJiB2dChlLCAibW91c2VPdmVyIiksIGUuc2V0U3RhdGUoYXQpLCB0LmhvdmVyU2VyaWVzID0gZQoJCQkJfSwKCQkJCW9uTW91c2VPdXQ6IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gdGhpcywKCQkJCQkJdCA9IGUub3B0aW9ucywKCQkJCQkJbiA9IGUuY2hhcnQsCgkJCQkJCWkgPSBuLnRvb2x0aXAsCgkJCQkJCWEgPSBuLmhvdmVyUG9pbnQ7CgkJCQkJYSAmJiBhLm9uTW91c2VPdXQoKSwgZSAmJiB0LmV2ZW50cy5tb3VzZU91dCAmJiB2dChlLCAibW91c2VPdXQiKSwgIWkgfHwgdC5zdGlja3lUcmFja2luZyB8fCBpLnNoYXJlZCAmJiAhZS5ub1NoYXJlZFRvb2x0aXAgfHwgaS5oaWRlKCksIGUuc2V0U3RhdGUoKSwgbi5ob3ZlclNlcmllcyA9IG51bGwKCQkJCX0sCgkJCQlzZXRTdGF0ZTogZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0LCBuID0gdGhpcywKCQkJCQkJaSA9IG4ub3B0aW9ucywKCQkJCQkJYSA9IG4uZ3JhcGgsCgkJCQkJCW8gPSBuLmdyYXBoTmVnLAoJCQkJCQlyID0gaS5zdGF0ZXMsCgkJCQkJCXMgPSBpLmxpbmVXaWR0aDsKCQkJCQlpZiAoZSA9IGUgfHwgaXQsIG4uc3RhdGUgIT09IGUpIHsKCQkJCQkJaWYgKG4uc3RhdGUgPSBlLCByW2VdICYmIHJbZV0uZW5hYmxlZCA9PT0gITEpIHJldHVybjsKCQkJCQkJZSAmJiAocyA9IHJbZV0ubGluZVdpZHRoIHx8IHMgKyAocltlXS5saW5lV2lkdGhQbHVzIHx8IDApKSwgYSAmJiAhYS5kYXNoc3R5bGUgJiYgKHQgPSB7CgkJCQkJCQkic3Ryb2tlLXdpZHRoIjogcwoJCQkJCQl9LCBhLmF0dHIodCksIG8gJiYgby5hdHRyKHQpKQoJCQkJCX0KCQkJCX0sCgkJCQlzZXRWaXNpYmxlOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJdmFyIG4sIGkgPSB0aGlzLAoJCQkJCQlhID0gaS5jaGFydCwKCQkJCQkJbyA9IGkubGVnZW5kSXRlbSwKCQkJCQkJciA9IGEub3B0aW9ucy5jaGFydC5pZ25vcmVIaWRkZW5TZXJpZXMsCgkJCQkJCXMgPSBpLnZpc2libGU7CgkJCQkJaS52aXNpYmxlID0gZSA9IGkudXNlck9wdGlvbnMudmlzaWJsZSA9IGUgPT09IFcgPyAhcyA6IGUsIG4gPSBlID8gInNob3ciIDogImhpZGUiLCBtdChbImdyb3VwIiwgImRhdGFMYWJlbHNHcm91cCIsICJtYXJrZXJHcm91cCIsICJ0cmFja2VyIl0sIGZ1bmN0aW9uKGUpIHsKCQkJCQkJaVtlXSAmJiBpW2VdW25dKCkKCQkJCQl9KSwgYS5ob3ZlclNlcmllcyA9PT0gaSAmJiBpLm9uTW91c2VPdXQoKSwgbyAmJiBhLmxlZ2VuZC5jb2xvcml6ZUl0ZW0oaSwgZSksIGkuaXNEaXJ0eSA9ICEwLCBpLm9wdGlvbnMuc3RhY2tpbmcgJiYgbXQoYS5zZXJpZXMsIGZ1bmN0aW9uKGUpIHsKCQkJCQkJZS5vcHRpb25zLnN0YWNraW5nICYmIGUudmlzaWJsZSAmJiAoZS5pc0RpcnR5ID0gITApCgkJCQkJfSksIG10KGkubGlua2VkU2VyaWVzLCBmdW5jdGlvbih0KSB7CgkJCQkJCXQuc2V0VmlzaWJsZShlLCAhMSkKCQkJCQl9KSwgciAmJiAoYS5pc0RpcnR5Qm94ID0gITApLCB0ICE9PSAhMSAmJiBhLnJlZHJhdygpLCB2dChpLCBuKQoJCQkJfSwKCQkJCXNldFRvb2x0aXBQb2ludHM6IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCwgbiwgaSwgYSwgbywgciwgcywgbCA9IHRoaXMsCgkJCQkJCWMgPSBbXSwKCQkJCQkJZCA9IGwueEF4aXMsCgkJCQkJCXAgPSBkICYmIGQuZ2V0RXh0cmVtZXMoKSwKCQkJCQkJaCA9IGQgPyBkLnRvb2x0aXBMZW4gfHwgZC5sZW4gOiBsLmNoYXJ0LnBsb3RTaXplWCwKCQkJCQkJdSA9IFtdOwoJCQkJCWlmIChsLm9wdGlvbnMuZW5hYmxlTW91c2VUcmFja2luZyAhPT0gITEgJiYgIWwuc2luZ3VsYXJUb29sdGlwcykgewoJCQkJCQlmb3IgKGUgJiYgKGwudG9vbHRpcFBvaW50cyA9IG51bGwpLCBtdChsLnNlZ21lbnRzIHx8IGwucG9pbnRzLCBmdW5jdGlvbihlKSB7CgkJCQkJCQljID0gYy5jb25jYXQoZSkKCQkJCQkJfSksIGQgJiYgZC5yZXZlcnNlZCAmJiAoYyA9IGMucmV2ZXJzZSgpKSwgbC5vcmRlclRvb2x0aXBQb2ludHMgJiYgbC5vcmRlclRvb2x0aXBQb2ludHMoYyksIHQgPSBjLmxlbmd0aCwgcyA9IDA7IHQgPiBzOyBzKyspCgkJCQkJCQlpZiAoYSA9IGNbc10sIG8gPSBhLngsIG8gPj0gcC5taW4gJiYgbyA8PSBwLm1heCkKCQkJCQkJCQlmb3IgKHIgPSBjW3MgKyAxXSwgbiA9IGkgPT09IFcgPyAwIDogaSArIDEsIGkgPSBjW3MgKyAxXSA/IHllKGJlKDAsIHdlKChhLmNsaWVudFggKyAociA/IHIud3JhcHBlZENsaWVudFggfHwgci5jbGllbnRYIDogaCkpIC8gMikpLCBoKSA6IGg7IG4gPj0gMCAmJiBpID49IG47KSB1W24rK10gPSBhOwoJCQkJCQlsLnRvb2x0aXBQb2ludHMgPSB1CgkJCQkJfQoJCQkJfSwKCQkJCXNob3c6IGZ1bmN0aW9uKCkgewoJCQkJCXRoaXMuc2V0VmlzaWJsZSghMCkKCQkJCX0sCgkJCQloaWRlOiBmdW5jdGlvbigpIHsKCQkJCQl0aGlzLnNldFZpc2libGUoITEpCgkJCQl9LAoJCQkJc2VsZWN0OiBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQgPSB0aGlzOwoJCQkJCXQuc2VsZWN0ZWQgPSBlID0gZSA9PT0gVyA/ICF0LnNlbGVjdGVkIDogZSwgdC5jaGVja2JveCAmJiAodC5jaGVja2JveC5jaGVja2VkID0gZSksIHZ0KHQsIGUgPyAic2VsZWN0IiA6ICJ1bnNlbGVjdCIpCgkJCQl9LAoJCQkJZHJhd1RyYWNrZXI6IHJuLmRyYXdUcmFja2VyR3JhcGgKCQkJfSksIGEobHQsIHsKCQkJCUF4aXM6IFIsCgkJCQlDaGFydDogRiwKCQkJCUNvbG9yOiBUdCwKCQkJCVBvaW50OiBHdCwKCQkJCVRpY2s6IE0sCgkJCQlSZW5kZXJlcjogSCwKCQkJCVNlcmllczogWHQsCgkJCQlTVkdFbGVtZW50OiBELAoJCQkJU1ZHUmVuZGVyZXI6IFB0LAoJCQkJYXJyYXlNaW46IE4sCgkJCQlhcnJheU1heDogVCwKCQkJCWNoYXJ0czogJGUsCgkJCQlkYXRlRm9ybWF0OiBYLAoJCQkJZm9ybWF0OiBCLAoJCQkJcGF0aEFuaW06IFosCgkJCQlnZXRPcHRpb25zOiBMLAoJCQkJaGFzQmlkaUJ1ZzogTGUsCgkJCQlpc1RvdWNoRGV2aWNlOiBxZSwKCQkJCW51bWJlckZvcm1hdDogYiwKCQkJCXNlcmllc1R5cGVzOiBzdCwKCQkJCXNldE9wdGlvbnM6IE8sCgkJCQlhZGRFdmVudDogeHQsCgkJCQlyZW1vdmVFdmVudDogd3QsCgkJCQljcmVhdGVFbGVtZW50OiB3LAoJCQkJZGlzY2FyZEVsZW1lbnQ6IEksCgkJCQljc3M6IHgsCgkJCQllYWNoOiBtdCwKCQkJCWV4dGVuZDogYSwKCQkJCW1hcDogX3QsCgkJCQltZXJnZTogbywKCQkJCXBpY2s6IF8sCgkJCQlzcGxhdDogZywKCQkJCWV4dGVuZENsYXNzOiB2LAoJCQkJcEludDogciwKCQkJCXdyYXA6IGssCgkJCQlzdmc6IE9lLAoJCQkJY2FudmFzOiBEZSwKCQkJCXZtbDogIU9lICYmICFEZSwKCQkJCXByb2R1Y3Q6IEhlLAoJCQkJdmVyc2lvbjogVWUKCQkJfSkKCQl9KCkKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJZS5leHBvcnRzID0gJzxkaXYgY2xhc3M9ImhvdXNlLXRyZW5kLWJveCB7e3BhZ2V0eXBlfX0gdHJlbmQtYm94e3tkYXRhLnRyZW5kfX0iPlxuICA8ZGl2IGNsYXNzPSJob3VzZXQtYnRuIj5cbiAgICA8YSBjbGFzcz0iaG91c2UtdHJlbmQtYmciIHRpdGxlPSLmkrjmiL/ku7ciPjwvYT5cbiAgICA8ZGl2IGNsYXNzPSJodC10cmVuZC1kZXNjIj5cbiAgICAgIDxzcGFuIGNsYXNzPSJoLWNvbG9ye3tkYXRhLnRyZW5kfX0iPnt7ZGF0YS50cmVuZE1zZ319PC9zcGFuPlxuICAgICAgPGVtIGNsYXNzPSJ0cmVuZC1pY29ue3tkYXRhLnRyZW5kfX0gaG91c2UtdHJlbmQtYmciPjwvZW0+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz0iaHQtcHJpY2UtcmVtaW5kIiBkYXRhLWlkPSJ7e2hvdXNlY29kZX19Ij5cbiAgICAgIDxlbSBjbGFzcz0iaG91c2UtdHJlbmQtYmciPjwvZW0+XG4gICAgICA8c3Bhbj7pmY3ku7fmj5DphpI8L3NwYW4+ICBcbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4gIDxkaXYgY2xhc3M9ImhvdXNldC1kZXRhaWwiPlxuICAgIDxkaXYgY2xhc3M9ImhvdXNlLXRyZW5kLWltZyIgaWQ9ImhvdXNlLXRyZW5kLXt7aG91c2Vjb2RlfX0iID5cbiAgICAgICA8aW1nIHNyYz0iIiBkYXRhLXNyYz0ie3tzZXJ2ZXJ9fXt7ZGF0YS50cmVuZEltZ319JndpZHRoPTQ2MCZoZWlnaHQ9MjEwJnBsb3RGb250U2l6ZT0xMCI+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz0iaG91c2UtcHJpY2UtcXJjb2RlIj5cbiAgICAgIDxzcGFuIGNsYXNzPSJtZ3RvcCI+5q+P5pel5oiQ5Lqk6KGM5oOFPC9zcGFuPlxuICAgICAgPHNwYW4gY2xhc3M9InJlZC1wcmkiPuacgOaWsOmZjeS7t+aIv+a6kDwvc3Bhbj5cbiAgICAgIDxpbWcgc3JjPSJ7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvbmV3YmFyL2hvdXNlcHJpLXFyY29kZTIucG5nIj5cbiAgICAgIDxwPuaJq+eggeWFs+azqOaSuOaIv+S7tzwvcD5cbiAgICAgIDxwIGNsYXNzPSJob3VzZS1wLXAyIj7pmY3ku7fmj5DphpLkvaA8L3A+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz0icHJpY2UtcmFuZ2UiPlxuICAgICAge3tpZiBkYXRhLm1heFByaWNlID09IGRhdGEubWluUHJpY2V9fVxuICAgICAgICA8c3BhbiA+546w5Lu377yae3tkYXRhLm1heFByaWNlfX3kuIc8L3NwYW4+XG4gICAgICB7e2Vsc2V9fVxuICAgICAgICA8c3BhbiBjbGFzcz0idG9wcHJpIj7mnIDpq5jku7c6e3tkYXRhLm1heFByaWNlfX3kuIc8L3NwYW4+XG4gICAgICAgIDxzcGFuIGNsYXNzPSJsb3dwcmkiPuacgOS9juS7tzp7e2RhdGEubWluUHJpY2V9feS4hzwvc3Bhbj5cbiAgICAgIHt7L2lmfX1cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPSJjaGFuZ2VfdHJlbmRfYnRuIj5cbiAgICAgIDxkaXY+XG4gICAgICAgIDxzcGFuIGNsYXNzPSJob3VzZS10cmVuZC1iIHRyZW5kLWNob29zZSI+5oi/5rqQ6KGM5oOFPC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz0iY29tbXVuaXR5LXRyZW5kLWIiPuWwj+WMuuihjOaDhTwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuICAgICAgXG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz0iY29tbXVuaXR5LXByaWNlIiBpZD0iY29tbXVuaXR5LXt7aG91c2Vjb2RlfX0iIGRhdGEtdT0ie3tzZXJ2ZXJ9fXt7ZGF0YS5jb21tdW5pdHlQcmljZX19IiBkYXRhLWM9Int7ZGF0YS5jb21tdW5pdHl9fSI+PC9kaXY+XG4gIDwvZGl2PlxuICA8ZGl2IGNsYXNzPSJodC13eHFyY29kZSI+XG4gICAgPHNwYW4gY2xhc3M9Imh0LXd4LXNwMSI+5YWz5rOo5YWs5LyX5Y+3PC9zcGFuPlxuICAgIDxzcGFuIGNsYXNzPSJodC13eC1zcDIiPuaIv+a6kOmZjeS7t+WunuaXtuaPkOmGkjwvc3Bhbj5cbiAgICA8aW1nIHNyYz0ie3tzX3NlcnZlcn19L2ltYWdlcy9leHRlbnNpb25zL25ld2Jhci9ob3VzZXByaS1xcmNvZGUyLnBuZyI+XG4gICAgPHNwYW4gY2xhc3M9Imh0LXd4LXNwMyI+5LiN5YaN5o+Q56S6PC9zcGFuPlxuICA8L2Rpdj5cblxuPC9kaXY+JzsKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJZS5leHBvcnRzID0gJzxkaXYgaWQ9ImJkZXh0X21iX2JnIiBjbGFzcz0ie3twYWdldHlwZX19IHRyZW5kLWJveHt7ZGF0YS50cmVuZH19Ij5cbiAgPGRpdiBpZD0iYmRleHRfbWluaWJhciIgPlxuICAgIDxkaXYgY2xhc3M9ImJkZXh0LXRvcHRhYnMiPlxuICAgICAgPGRpdiBjbGFzcz0iYmRleHQtbWluaS1sb2dvIj5cbiAgICAgICAgPGEgPlxuICAgICAgICAgIDxlbSBjbGFzcz0iYmRleHQtYmciPjwvZW0+XG4gICAgICAgIDwvYT5cbiAgICAgICAgXG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9ImJkZXh0LW1pbmktdHJlbmQiPlxuICAgICAgICA8ZW0gY2xhc3M9ImJkZXh0LWJnIHRyZW5kLWljb257e2RhdGEudHJlbmR9fSI+PC9lbT5cbiAgICAgICAgPHNwYW4gPnt7ZGF0YS50cmVuZE1zZ319PC9zcGFuPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuICA8ZGl2IGNsYXNzPSJob3VzZXQtZGV0YWlsIj5cbiAgICA8ZGl2IGNsYXNzPSJob3VzZS10cmVuZC1pbWciPlxuICAgICAgPGltZyBzcmM9IiIgZGF0YS1zcmM9Int7c2VydmVyfX17e2RhdGEudHJlbmRJbWd9fSZ3aWR0aD00NjAmaGVpZ2h0PTIxMCZwbG90Rm9udFNpemU9MTAiPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9ImhvdXNlLXByaWNlLXFyY29kZSI+XG4gICAgICA8c3BhbiBjbGFzcz0ibWd0b3AiPuavj+aXpeaIkOS6pOihjOaDhTwvc3Bhbj5cbiAgICAgIDxzcGFuIGNsYXNzPSJyZWQtcHJpIj7miL/mupDljoblj7LmiqXku7c8L3NwYW4+XG4gICAgICA8aW1nIHNyYz0ie3tzX3NlcnZlcn19L2ltYWdlcy9leHRlbnNpb25zL25ld2Jhci9ob3VzZXByaS1xcmNvZGUuanBnIj5cbiAgICAgIDxwPuaJq+eggeWFs+azqOaSuOaIv+S7tzwvcD5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPSJwcmljZS1yYW5nZSI+XG4gICAgICB7e2lmIGRhdGEubWF4UHJpY2UgPT0gZGF0YS5taW5QcmljZX19XG4gICAgICAgIDxzcGFuID7njrDku7fvvJp7e2RhdGEubWF4UHJpY2V9feS4hzwvc3Bhbj5cbiAgICAgIHt7ZWxzZX19XG4gICAgICAgIDxzcGFuIGNsYXNzPSJ0b3BwcmkiPuacgOmrmOS7t++8mnt7ZGF0YS5tYXhQcmljZX195LiHPC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz0ibG93cHJpIj7mnIDkvY7ku7fvvJp7e2RhdGEubWluUHJpY2V9feS4hzwvc3Bhbj5cbiAgICAgIHt7L2lmfX1cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L2Rpdj4nCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICc8c3R5bGUgdHlwZT0idGV4dC9jc3MiPlxuICAuaG91c2VfY2VudGFuZXQyIC5ob3VzZS1pdGVtIHtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgb3ZlcmZsb3c6IHZpc2libGU7XG4gIH1cbiAgLmhvdXNlXzVpNWogI2JkZXh0X21iX2JnLmRwcGFnZSwgLmhvdXNlX2NlbnRhbmV0MiAjYmRleHRfbWJfYmcuZHBwYWdlIHtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIH1cbiAgI2JkZXh0X21iX2JnLmRwcGFnZSB7XG4gICAgaGVpZ2h0OiA0MHB4O1xuICB9XG4gIC5ob3VzZS10cmVuZC1iZyB7XG4gICAgICBiYWNrZ3JvdW5kOiB1cmwoInt7c19zZXJ2ZXJ9fS9pbWFnZXMvZXh0ZW5zaW9ucy94YnQvaG91c2UtdHJlbmQtaWNvbjIucG5nIikgbm8tcmVwZWF0O1xuICAgIH1cbiAgICAuaG91c2UtdHJlbmQtYm94IHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHJpZ2h0OiAwcHg7XG4gICAgICBib3R0b206IDU2cHg7XG4gICAgICB3aWR0aDogMjgycHg7XG4gICAgICBoZWlnaHQ6IDMycHg7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCAjZWVlO1xuICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgYmFja2dyb3VuZDogI2ZmZjtcbiAgICAgIGRpc3BsYXk6IGJsb2NrIWltcG9ydGFudDtcbiAgICAgIGJveC1zaXppbmc6IGNvbnRlbnQtYm94O1xuICAgICAgZm9udC1mYW1pbHk6ICJNaWNyb3NvZnQgWWFoZWkiLCLlvq7ova/pm4Xpu5EiXG4gICAgfVxuICAgICNiZGV4dF9tYl9iZyAjYmRleHRfbWluaWJhciB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICByaWdodDogMHB4O1xuICAgICAgYm90dG9tOiA1NnB4O1xuICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgfVxuICAgIC5ob3VzZV9jZW50YW5ldDIgI2JkZXh0X21iX2JnICNiZGV4dF9taW5pYmFyIHtcbiAgICAgIHJpZ2h0OiA2cHg7XG4gICAgICBib3R0b206IDI5cHg7XG4gICAgfVxuICAgIC5ob3VzZV9jZW50YW5ldDIgI2JkZXh0X21iX2JnLmRwcGFnZSAjYmRleHRfbWluaWJhciB7XG4gICAgICByaWdodDogLTMycHg7XG4gICAgfVxuICAgIC5ob3VzZV9jZW50YW5ldCAjYmRleHRfbWJfYmcuZHBwYWdlICNiZGV4dF9taW5pYmFyIHtcbiAgICAgIHJpZ2h0OiAtMThweDtcbiAgICB9XG4gICAgLmhvdXNlXzVpNWogI2JkZXh0X21iX2JnICNiZGV4dF9taW5pYmFyIHtcbiAgICAgIGJvdHRvbTogMzBweDtcbiAgICB9XG4gICAgLmhvdXNlX2NlbnRhbmV0ICNiZGV4dF9tYl9iZyAjYmRleHRfbWluaWJhciB7XG4gICAgICBib3R0b206IDIwcHg7XG4gICAgfVxuICAgICNiZGV4dF9tYl9iZy5kcHBhZ2UgI2JkZXh0X21pbmliYXIge1xuICAgICAgYm90dG9tOiAtOHB4O1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgfVxuICAgIC5ob3VzZS10cmVuZC1ib3ggKiB7XG4gICAgICBib3gtc2l6aW5nOiBjb250ZW50LWJveDtcbiAgICB9XG4gICAgLmhvdXNlLXRyZW5kLWJveC50cmVuZC1ib3gtMSAuaHQtdHJlbmQtZGVzYyB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjBmMGYwO1xuICAgIH1cbiAgICAuaG91c2VfbGlhbmppYTIgLmhvdXNlLXRyZW5kLWJveCB7XG4gICAgICBib3R0b206IDMycHg7XG4gICAgfVxuICAgIC5ob3VzZV9jZW50YW5ldCAuaG91c2UtdHJlbmQtYm94IHtcbiAgICAgIHJpZ2h0OiA0MHB4O1xuICAgICAgYm90dG9tOiAyMnB4O1xuICAgIH1cbiAgICAuaG91c2VfY2VudGFuZXQyIC5ob3VzZS10cmVuZC1ib3gge1xuICAgICAgcmlnaHQ6IDUycHg7XG4gICAgICBib3R0b206IDMycHg7XG4gICAgfVxuICAgIC5ob3VzZV9jZW50YW5ldCAuaG91c2UtdHJlbmQtYm94LmRwcGFnZSB7XG4gICAgICByaWdodDogLTE2cHg7XG4gICAgICBib3R0b206IDBweDtcbiAgICB9XG4gICAgLmhvdXNlX2NlbnRhbmV0MiAuaG91c2UtdHJlbmQtYm94LmRwcGFnZSB7XG4gICAgICByaWdodDogLTM4cHg7XG4gICAgICBib3R0b206IC0xNXB4O1xuICAgIH1cbiAgICAue3tleHRCcmFuZH19XzVpNWogLmhvdXNlLXRyZW5kLWJveCB7XG4gICAgICBib3R0b206IDMwcHg7XG4gICAgfVxuICAgIC5ob3VzZS10cmVuZC1ib3guZHBwYWdlIHtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIGJvdHRvbTogMHB4O1xuICAgIH1cbiAgICAuaG91c2VfbGlhbmppYTIgLmhvdXNlLXRyZW5kLWJveC5kcHBhZ2Uge1xuICAgICAgYm90dG9tOiAxcHg7XG4gICAgfVxuICAgIC5ob3VzZXQtYnRuIHtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgIH1cbiAgICAuaG91c2V0LWJ0bjphZnRlciB7XG4gICAgICBjb250ZW50OiAiIjtcbiAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgY2xlYXI6IGJvdGg7XG4gICAgfVxuICAgIC5ob3VzZXQtZGV0YWlsIHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHRvcDogMzJweDtcbiAgICAgIHJpZ2h0OiAwcHg7XG4gICAgICBoZWlnaHQ6IDI4NXB4O1xuICAgICAgd2lkdGg6IDU4MHB4O1xuICAgICAgei1pbmRleDogOTk5OTk5OTk5O1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgI2VlZTtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gICAgICBib3gtc2l6aW5nOiBjb250ZW50LWJveDtcbiAgICAgIGJveC1zaGFkb3c6IDBweCA1cHggMTVweCAwIHJnYmEoMjMsMjUsMjcsMC4xNSk7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgICAjYmRleHRfbWJfYmcgLmhvdXNldC1kZXRhaWwge1xuICAgICAgdG9wOiAxODhweDtcbiAgICAgIHJpZ2h0OiAwcHg7XG4gICAgfVxuICAgIC5ob3VzZV9jZW50YW5ldDIgI2JkZXh0X21iX2JnIC5ob3VzZXQtZGV0YWlsIHtcbiAgICAgIHRvcDogMTk2cHg7XG4gICAgICByaWdodDogNXB4O1xuICAgIH1cbiAgICAuaG91c2VfNWk1aiAjYmRleHRfbWJfYmcgLmhvdXNldC1kZXRhaWwge1xuICAgICAgdG9wOiAxMzNweDtcbiAgICB9XG4gICAgLmhvdXNlX2NlbnRhbmV0ICNiZGV4dF9tYl9iZyAuaG91c2V0LWRldGFpbCB7XG4gICAgICB0b3A6IDIzMHB4O1xuICAgIH1cbiAgICAjYmRleHRfbWJfYmcuZHBwYWdlIC5ob3VzZXQtZGV0YWlsIHtcbiAgICAgIHRvcDogOTdweDtcbiAgICAgIHJpZ2h0OiAxNDlweDtcbiAgICB9XG4gICAgLmhvdXNlX2NlbnRhbmV0MiAjYmRleHRfbWJfYmcuZHBwYWdlIC5ob3VzZXQtZGV0YWlsIHtcbiAgICAgIHRvcDogNDhweDtcbiAgICAgIHJpZ2h0OiAyMzVweDtcbiAgICB9XG4gICAgLmhvdXNlX2NlbnRhbmV0ICNiZGV4dF9tYl9iZy5kcHBhZ2UgLmhvdXNldC1kZXRhaWwge1xuICAgICAgdG9wOiAxNTJweDtcbiAgICAgIHJpZ2h0OiA1MXB4O1xuICAgIH1cbiAgICAuaG91c2VfNWk1aiAjYmRleHRfbWJfYmcuZHBwYWdlIC5ob3VzZXQtZGV0YWlsIHtcbiAgICAgIHRvcDogNDZweDtcbiAgICAgIHJpZ2h0OiA3OHB4O1xuICAgIH1cbiAgICAuaG91c2UtdHJlbmQtaW1nIHtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgd2lkdGg6IDQ1MnB4O1xuICAgICAgaGVpZ2h0OiAyMTdweDtcbiAgICAgIG1hcmdpbi10b3A6IDI4cHg7XG4gICAgfVxuICAgIC5ob3VzZXQtYnRuIGEge1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICB3aWR0aDogMzJweDtcbiAgICAgIGhlaWdodDogMzJweDtcbiAgICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNlNmU2ZTY7XG4gICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNnB4IC00OHB4O1xuICAgIH1cbiAgICAuaHQtdHJlbmQtZGVzYyB7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIGhlaWdodDogMzJweDtcbiAgICAgIHdpZHRoOiAxMjRweDtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB9XG4gICAgLmh0LXByaWNlLXJlbWluZCB7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIHdpZHRoOiAxMjRweDtcbiAgICAgIGhlaWdodDogMzJweDtcbiAgICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgI2U2ZTZlNjtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB9XG4gICAgLmh0LXByaWNlLXJlbWluZDpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjFmNWY2O1xuICAgIH1cbiAgICAuaHQtcHJpY2UtcmVtaW5kIHNwYW4ge1xuICAgICAgY29sb3I6ICNmNzcwNWI7XG4gICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICBmbG9hdDogcmlnaHQ7XG4gICAgICBoZWlnaHQ6IDMycHg7XG4gICAgICB3aWR0aDogYXV0bztcbiAgICAgIGxpbmUtaGVpZ2h0OiAzMnB4O1xuICAgICAgbWFyZ2luLXJpZ2h0OiA2cHg7XG4gICAgfVxuICAgIC5odC1wcmljZS1yZW1pbmQgZW0ge1xuICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTMwcHggLTIycHg7XG4gICAgICBoZWlnaHQ6IDE2cHg7XG4gICAgICB3aWR0aDogMTZweDtcbiAgICAgIGZsb2F0OiByaWdodDtcbiAgICAgIG1hcmdpbi1yaWdodDogMjJweDtcbiAgICAgIG1hcmdpbi10b3A6IDhweDtcbiAgICB9XG4gICAgLmh0LXByaWNlLXJlbWluZC5oYXNyZW1pbmQgc3BhbiB7XG4gICAgICBjb2xvcjogIzMzMztcbiAgICB9XG4gICAgLmh0LXByaWNlLXJlbWluZC5oYXNyZW1pbmQgZW0ge1xuICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTU3cHggLTIycHg7XG4gICAgICBtYXJnaW4tcmlnaHQ6IDE2cHg7XG4gICAgfVxuICAgIC5iZGV4dC1taW5pLXRyZW5kLm1zaG92ZXJ7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCAjNDI1NzY2O1xuICAgICAgei1pbmRleDogMjtcbiAgICB9XG4gICAgLmh0LXRyZW5kLWRlc2MubXNob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjFmNWY2O1xuICAgIH1cbiAgICAuaHQtdHJlbmQtZGVzYyBzcGFuIHtcbiAgICAgIGxpbmUtaGVpZ2h0OiAzMnB4O1xuICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICBtYXJnaW4tbGVmdDogMjJweDtcbiAgICB9XG4gICAgLmh0LXRyZW5kLWRlc2Mgc3Bhbi5oLWNvbG9yMCB7XG4gICAgICBjb2xvcjogI2Y3YTgyYjtcbiAgICB9XG4gICAgLmh0LXRyZW5kLWRlc2Mgc3Bhbi5oLWNvbG9yMSB7XG4gICAgICBjb2xvcjogI2ZmMWUxZTtcbiAgICB9XG4gICAgLmh0LXRyZW5kLWRlc2Mgc3Bhbi5oLWNvbG9yMiwgLmh0LXRyZW5kLWRlc2Mgc3Bhbi5oLWNvbG9yMyB7XG4gICAgICBjb2xvcjogIzBiYWE3NDtcbiAgICB9XG4gICAgLmh0LXRyZW5kLWRlc2Mgc3Bhbi5oLWNvbG9yMyB7XG4gICAgICBtYXJnaW4tbGVmdDogMTBweDtcbiAgICB9XG4gICAgLmh0LXRyZW5kLWRlc2Mgc3Bhbi5oLWNvbG9yLTEge1xuICAgICAgY29sb3I6ICM4ODg7XG4gICAgfVxuICAgIC5odC10cmVuZC1kZXNjIGVtIHtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgaGVpZ2h0OiAyMHB4O1xuICAgICAgd2lkdGg6IDI2cHg7XG4gICAgICBtYXJnaW4tdG9wOiA2cHg7XG4gICAgICBtYXJnaW4tbGVmdDogOHB4O1xuICAgIH1cbiAgICAuaHQtdHJlbmQtZGVzYyAudHJlbmQtaWNvbjAge1xuICAgICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMzJweCAtMnB4O1xuICAgIH1cbiAgICAuaHQtdHJlbmQtZGVzYyAudHJlbmQtaWNvbjEge1xuICAgICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNjZweCAtMnB4O1xuICAgIH1cbiAgICAuaHQtdHJlbmQtZGVzYyAudHJlbmQtaWNvbjIge1xuICAgICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNXB4IC0ycHg7XG4gICAgfVxuICAgIC5odC10cmVuZC1kZXNjIC50cmVuZC1pY29uMyB7XG4gICAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IC00cHggLTIwcHg7XG4gICAgfVxuICAgIC5odC10cmVuZC1kZXNjIC50cmVuZC1pY29uLTEge1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG4gICAgI2JkZXh0X21iX2JnIC50cmVuZC1pY29uMiwgI2JkZXh0X21iX2JnIC50cmVuZC1pY29uMyB7XG4gICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwcHggLTEwOXB4O1xuICAgIH1cbiAgICAjYmRleHRfbWJfYmcgLnRyZW5kLWljb24wIHtcbiAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IDBweCAtODRweDtcbiAgICB9XG4gICAgI2JkZXh0X21iX2JnIC50cmVuZC1pY29uMSB7XG4gICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwcHggLTU3cHg7XG4gICAgfVxuICAgICNiZGV4dF9tYl9iZyAudHJlbmQtaWNvbi0xIHtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgfVxuICAgIC5wcmljZS1yYW5nZSB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICB0b3A6IDhweDtcbiAgICAgIHJpZ2h0OiAxMjlweDtcbiAgICAgIHdpZHRoOiBhdXRvO1xuICAgICAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gICAgfVxuICAgIC5wcmljZS1yYW5nZSBzcGFuIHtcbiAgICAgIGxpbmUtaGVpZ2h0OiAyMHB4O1xuICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgY29sb3I6ICM1MDUwNTA7XG4gICAgfVxuICAgIC5wcmljZS1yYW5nZSAudG9wcHJpIHtcbiAgICAgIGNvbG9yOiAjZTY0MzQwO1xuICAgIH1cbiAgICAucHJpY2UtcmFuZ2UgLmxvd3ByaSB7XG4gICAgICBjb2xvcjogIzBiYWE3NDtcbiAgICAgIG1hcmdpbi1sZWZ0OiAxNHB4O1xuICAgIH1cbiAgICAuaG91c2UtcHJpY2UtcXJjb2RlIHtcbiAgICAgIGZsb2F0OiByaWdodDtcbiAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIHdpZHRoOiAxMjNweDtcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgI2YwZjBmMDtcbiAgICB9XG4gICAgLmhvdXNlLXByaWNlLXFyY29kZSBzcGFuIHtcbiAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICBoZWlnaHQ6IDE0cHg7XG4gICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICBsaW5lLWhlaWdodDogMTRweCFpbXBvcnRhbnQ7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICBjb2xvcjogIzM1MzUzNTtcbiAgICB9XG4gICAgLmhvdXNlLXByaWNlLXFyY29kZSAubWd0b3Age1xuICAgICAgbWFyZ2luLXRvcDogNTFweDtcbiAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgfVxuICAgIC5ob3VzZS1wcmljZS1xcmNvZGUgaW1nIHtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jayFpbXBvcnRhbnQ7XG4gICAgICB3aWR0aDogMTAwcHghaW1wb3J0YW50O1xuICAgICAgaGVpZ2h0OiBhdXRvIWltcG9ydGFudDtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgbWFyZ2luLWxlZnQ6IDExcHg7XG4gICAgfVxuICAgIC5ob3VzZS1wcmljZS1xcmNvZGUgcCB7XG4gICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICBsaW5lLWhlaWdodDogMTJweDtcbiAgICAgIG1hcmdpbi10b3A6IDVweDtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgbWFyZ2luLWxlZnQ6IDIwcHg7XG4gICAgfVxuICAgIC5ob3VzZS1wcmljZS1xcmNvZGUgcC5ob3VzZS1wLXAye1xuICAgICAgbWFyZ2luLWxlZnQ6IDMycHg7XG4gICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgfVxuICAgICNleGNoYW5nZUxpc3QgLmxpc3QtYm9keT5saSB7XG4gICAgICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgICAgIGhlaWdodDogMTY2cHg7XG4gICAgfVxuICAgIC5ob3VzZS1iYXNpYy1tYWluIHtcbiAgICAgIG92ZXJmbG93OiB2aXNpYmxlO1xuICAgICAgaGVpZ2h0OiAzNzhweDtcbiAgICB9XG4gICAgLnt7ZXh0QnJhbmR9fV9saWFuamlhIC5jb250ZW50ICB7XG4gICAgICBwYWRkaW5nLWJvdHRvbTogNzBweDtcbiAgICB9XG4gICAgLmhvdXNlX2xpYW5qaWEyIC5tLWxpc3QgbGkge1xuICAgICAgaGVpZ2h0OiAyMTRweDtcbiAgICAgIG92ZXJmbG93OiB2aXNpYmxlO1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIH1cbiAgICAuaHQtd3hxcmNvZGUge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgdG9wOiAzMnB4O1xuICAgICAgcmlnaHQ6IDBweDtcbiAgICAgIHdpZHRoOiAxMjRweDtcbiAgICAgIGhlaWdodDogMTc2cHg7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGFkZWUxO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICAgIHotaW5kZXg6IDk5OTk5OTk5OTk5OTtcbiAgICAgIGJveC1zaGFkb3c6IDBweCA1cHggMTVweCAwIHJnYmEoMjMsMjUsMjcsMC4xNSk7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgICAuaHQtd3hxcmNvZGUgKiB7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICB9XG4gICAgLmh0LXd4cXJjb2RlIHNwYW4ge1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICBoZWlnaHQ6IDE0cHg7XG4gICAgICBsaW5lLWhlaWdodDogMTRweDtcbiAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICB9XG4gICAgLmh0LXd4cXJjb2RlIGltZyB7XG4gICAgICB3aWR0aDogMTAwcHghaW1wb3J0YW50O1xuICAgICAgaGVpZ2h0OiAxMDBweCFpbXBvcnRhbnQ7XG4gICAgICBtYXJnaW4tdG9wOiA0cHg7XG4gICAgICBtYXJnaW4tbGVmdDogMTFweDtcbiAgICB9XG4gICAgLmh0LXd4LXNwMSB7XG4gICAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICAgICAgY29sb3I6ICM1ODU4NTg7XG4gICAgfVxuICAgIC5odC13eC1zcDIge1xuICAgICAgbWFyZ2luLXRvcDogOHB4O1xuICAgICAgY29sb3I6ICNlYjY4NjI7XG4gICAgfVxuICAgIC5odC13eC1zcDMge1xuICAgICAgY29sb3I6ICNiMmIyYjI7XG4gICAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZSFpbXBvcnRhbnQ7XG4gICAgICBmb250LXNpemU6IDEycHghaW1wb3J0YW50O1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIH1cblxuICAgIC5jb21tdW5pdHktcHJpY2Uge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgaGVpZ2h0OiAyNDdweDtcbiAgICAgIHdpZHRoOiA0NTJweDtcbiAgICAgIHRvcDogMHB4O1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgIGJhY2tncm91bmQ6ICNmZmY7XG4gICAgfVxuICAgIC5jaGFuZ2VfdHJlbmRfYnRuIHtcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIGJvdHRvbTogMTZweDtcbiAgICAgIHdpZHRoOiA0NjJweDtcbiAgICAgIHotaW5kZXg6IDk5O1xuICAgIH1cbiAgICAuY2hhbmdlX3RyZW5kX2J0biBkaXYge1xuICAgICAgbWFyZ2luOiAwIGF1dG87XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICB3aWR0aDogYXV0bztcbiAgICAgIGhlaWdodDogMjJweDtcbiAgICB9XG4gICAgLmNoYW5nZV90cmVuZF9idG4gc3BhbiB7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIGhlaWdodDogMjJweDtcbiAgICAgIHdpZHRoOiA4MHB4O1xuICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgIzNlYmRlZjtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDIwcHg7XG4gICAgICBjb2xvcjogIzNlYmRlZjtcbiAgICAgIG1hcmdpbi1sZWZ0OiA3MHB4O1xuICAgICAgbGluZS1oZWlnaHQ6IDIycHg7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgfVxuICAgIC5jaGFuZ2VfdHJlbmRfYnRuIHNwYW4udHJlbmQtY2hvb3NlIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICMzZWJkZWY7XG4gICAgICBjb2xvcjogI2ZmZjtcbiAgICB9XG4gICAgLmNoYW5nZV90cmVuZF9idG4gLmhvdXNlLXRyZW5kLWIge1xuICAgICAgbWFyZ2luLWxlZnQ6IDBweDtcbiAgICB9XG48L3N0eWxlPicKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJKGZ1bmN0aW9uKHQsIGkpIHsKCQkJInVzZSBzdHJpY3QiOwoJCQl2YXIgYSA9IG4oMTYpLAoJCQkJbyA9IG4oOTIpLAoJCQkJciA9IG4oMjYpLAoJCQkJcyA9IHZvaWQgMCwKCQkJCWwgPSAwLAoJCQkJYyA9IHsKCQkJCQlhZGRDYXJ0OiBuKDk5KSwKCQkJCQljaGVja291dDogbigxMDApLAoJCQkJCXNoaXBwaW5nMTogbigxMDEpLAoJCQkJCXNoaXBwaW5nMjogbigxMDIpLAoJCQkJCWNvbnRpbnVlMTogbigxMDMpLAoJCQkJCWNvbnRpbnVlMjogbigxMDQpLAoJCQkJCWNyZWRpdGluZm86IG4oMTA1KSwKCQkJCQlhZGRjcmVkaXQ6IG4oMTA2KSwKCQkJCQlwcm9tb2NvZGU6IG4oMTA3KSwKCQkJCQljaG9vc2VDcmVkaXQ6IG4oMTA4KSwKCQkJCQlmaW5pc2hlZDogbigxMDkpCgkJCQl9LAoJCQkJZCA9IHsKCQkJCQlhZGRDYXJ0OiAiI2J1eWJveF9mZWF0dXJlX2RpdiAjYWRkVG9DYXJ0IC5hLWJ1dHRvbi1zdGFjayAuYS1idXR0b24taW5wdXQiLAoJCQkJCWNoZWNrb3V0OiAiI2hsYi1wdGMtYnRuLW5hdGl2ZSIsCgkJCQkJc2hpcHBpbmcxOiAiI2lkZW50aXR5LWFkZC1uZXctYWRkcmVzcyAjZW50ZXJBZGRyZXNzRnVsbE5hbWVDb250YWluZXIiLAoJCQkJCXNoaXBwaW5nMjogIiNpZGVudGl0eS1hZGQtbmV3LWFkZHJlc3MgI2VudGVyQWRkcmVzc0Z1bGxOYW1lQ29udGFpbmVyIiwKCQkJCQljb250aW51ZTE6ICIjc2hpcHBpbmdPcHRpb25Gb3JtSWQgLmEtc3BhY2luZy1tZWRpdW0gLmNvbnRpbnVlLWJ1dHRvbiAuYS1idXR0b24taW5uZXIiLAoJCQkJCWNvbnRpbnVlMjogIiNvcmRlci1zdW1tYXJ5ICNvcmRlci1zdW1tYXJ5LWNvbnRhaW5lciAuY29udGludWUtYnV0dG9ucyAuYS1idXR0b24taW5uZXIgI2NvbnRpbnVlLXRvcCIsCgkJCQkJY3JlZGl0aW5mbzogIiN3cmFwcGVyLW5ldy1jYyIsCgkJCQkJYWRkY3JlZGl0OiAiI3dyYXBwZXItbmV3LWNjIiwKCQkJCQlwcm9tb2NvZGU6ICIucG10cy1yZWRlZW0tY2xhaW0tY29kZS1mb3JtIiwKCQkJCQljaG9vc2VDcmVkaXQ6ICIjbmF2LWJhcisuYS1jb250YWluZXIgLmEtc3BhY2luZy1iYXNlIiwKCQkJCQlmaW5pc2hlZDogIiNvcmRlci1zdW1tYXJ5LWJveCIKCQkJCX0sCgkJCQlwID0gZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSB0KCJib2R5IilbMF07CgkJCQkJaWYgKGUpIHsKCQkJCQkJdmFyIG4gPSBmdW5jdGlvbiBpKCkgewoJCQkJCQkJY2xlYXJUaW1lb3V0KHMpLCBzID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJCQlyZXR1cm4gbCsrLCA0NSA9PT0gbCA/IHZvaWQgZS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01TdWJ0cmVlTW9kaWZpZWQiLCBpLCAhMSkgOiB2b2lkIG0oKQoJCQkJCQkJfSwgMmUzKQoJCQkJCQl9OwoJCQkJCQllLmFkZEV2ZW50TGlzdGVuZXIgJiYgZS5hZGRFdmVudExpc3RlbmVyKCJET01TdWJ0cmVlTW9kaWZpZWQiLCBuLCAhMSkKCQkJCQl9CgkJCQl9LAoJCQkJaCA9IGZ1bmN0aW9uKGUsIG4pIHsKCQkJCQlpZiAoISh0KCIuZ3dkXyIgKyBlKS5sZW5ndGggPiAwKSkgewoJCQkJCQlyKCJoYWl0YW9fcmVtaW5kXyIgKyBlKTsKCQkJCQkJdmFyIG8gPSBjW2VdOwoJCQkJCQkiYWZ0ZXIiID09IG4gPyB0KGRbZV0pLmVxKDApLmFmdGVyKGEuY29tcGlsZShvKSh7CgkJCQkJCQljX3NlcnZlcjogaS5jX3NlcnZlciwKCQkJCQkJCXNfc2VydmVyOiBpLnNfc2VydmVyCgkJCQkJCX0pKSA6ICJhcHBlbmQiID09IG4gJiYgdChkW2VdKS5lcSgwKS5hcHBlbmQoYS5jb21waWxlKG8pKHsKCQkJCQkJCWNfc2VydmVyOiBpLmNfc2VydmVyLAoJCQkJCQkJc19zZXJ2ZXI6IGkuc19zZXJ2ZXIKCQkJCQkJfSkpCgkJCQkJfQoJCQkJfSwKCQkJCXUgPSBmdW5jdGlvbigpIHsKCQkJCQl0KCIuYmpkX2J0bl9ib3ggLmJqZF9jbG9zZSIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gdCgiLmJqZF9idG5fYm94IikuaGlkZSgpLCBvLnNldHRpbmdzKCJzZXRfaGlkZV9zaG9wdGlwIiwgImhpZGVfc2hvcHRpcCIsICIxIiksICExCgkJCQkJfSkKCQkJCX0sCgkJCQltID0gZnVuY3Rpb24oKSB7CgkJCQkJMiA9PSBpLnBhZ2VJbmZvLnR5cGUgPyBoKCJhZGRDYXJ0IiwgImFmdGVyIikgOiB0KCIjaGxiLXB0Yy1idG4tbmF0aXZlIikubGVuZ3RoID4gMCA/IGgoImNoZWNrb3V0IiwgImFmdGVyIikgOiB0KCIjaWRlbnRpdHktYWRkLW5ldy1hZGRyZXNzIikubGVuZ3RoID4gMCA/IGgoInNoaXBwaW5nMSIsICJhcHBlbmQiKSA6IHQoIiNzaGlwcGluZ09wdGlvbkZvcm1JZCAuYS1zcGFjaW5nLW1lZGl1bSAuY29udGludWUtYnV0dG9uIC5hLWJ1dHRvbi1pbm5lciIpLmxlbmd0aCA+IDAgPyAoaCgiY29udGludWUxIiwgImFwcGVuZCIpLCB0KCIjc2hpcHBpbmdPcHRpb25Gb3JtSWQgLmEtc3BhY2luZy1tZWRpdW0gLmNvbnRpbnVlLWJ1dHRvbiAuYS1idXR0b24taW5uZXIgLmEtYnV0dG9uLXRleHQiKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQkJc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJCXQoIiN3cmFwcGVyLW5ldy1jYyIpLmxlbmd0aCA+IDAgJiYgKGgoImNyZWRpdGluZm8iLCAiYXBwZW5kIiksIGgoImFkZGNyZWRpdCIsICJhcHBlbmQiKSwgaCgiY2hvb3NlQ3JlZGl0IiwgImFwcGVuZCIpKQoJCQkJCQl9LCAxNTAwKQoJCQkJCX0pKSA6IHQoIiNjb250aW51ZS10b3AiKS5sZW5ndGggPiAwID8gKGgoImNvbnRpbnVlMiIsICJhZnRlciIpLCB0KCIjd3JhcHBlci1uZXctY2MiKS5sZW5ndGggPiAwICYmIChoKCJjcmVkaXRpbmZvIiwgImFwcGVuZCIpLCBoKCJhZGRjcmVkaXQiLCAiYXBwZW5kIiksIGgoImNob29zZUNyZWRpdCIsICJhcHBlbmQiKSwgdCgiI29yZGVyLXN1bW1hcnktY29udGFpbmVyICNjb250aW51ZS10b3AiKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQkJc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJCWgoInByb21vY29kZSIsICJhcHBlbmQiKSwgaCgiZmluaXNoZWQiLCAiYXBwZW5kIiksIHQoIiNvcmRlci1zdW1tYXJ5LWJveCAuYS1idXR0b24tdGV4dC5wbGFjZS15b3VyLW9yZGVyLWJ1dHRvbiIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQkJCXIoImhhaXRhb19yZW1pbmRfZmluaXNob3JkZXJzdWNjZXNzIikKCQkJCQkJCX0pCgkJCQkJCX0sIDFlMykKCQkJCQl9KSkpIDogdCgiLnBtdHMtcmVkZWVtLWNsYWltLWNvZGUtZm9ybSIpLmxlbmd0aCA+IDAgPyAoaCgicHJvbW9jb2RlIiwgImFwcGVuZCIpLCBoKCJmaW5pc2hlZCIsICJhcHBlbmQiKSwgdCgiI29yZGVyLXN1bW1hcnktYm94IC5hLWJ1dHRvbi10ZXh0LnBsYWNlLXlvdXItb3JkZXItYnV0dG9uIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCXIoImhhaXRhb19yZW1pbmRfZmluaXNob3JkZXJzdWNjZXNzIikKCQkJCQl9KSkgOiB0KCIjb3JkZXItc3VtbWFyeS1ib3ggLmEtYnV0dG9uLXRleHQucGxhY2UteW91ci1vcmRlci1idXR0b24iKS5sZW5ndGggPiAwICYmIChoKCJwcm9tb2NvZGUiLCAiYXBwZW5kIiksIGgoImZpbmlzaGVkIiwgImFwcGVuZCIpLCB0KCIjb3JkZXItc3VtbWFyeS1ib3ggLmEtYnV0dG9uLXRleHQucGxhY2UteW91ci1vcmRlci1idXR0b24iKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQkJcigiaGFpdGFvX3JlbWluZF9maW5pc2hvcmRlcnN1Y2Nlc3MiKQoJCQkJCX0pKSwgdCgiI3dyYXBwZXItbmV3LWNjIikubGVuZ3RoID4gMCAmJiAoaCgiY3JlZGl0aW5mbyIsICJhcHBlbmQiKSwgaCgiYWRkY3JlZGl0IiwgImFwcGVuZCIpLCBoKCJjaG9vc2VDcmVkaXQiLCAiYXBwZW5kIikpLCB0KCIjY2NBZGRDYXJkIikubGVuZ3RoICYmIHQoIiNjY0FkZENhcmQiKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQkJc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJCWgoImNyZWRpdGluZm8iLCAiYXBwZW5kIiksIGgoImFkZGNyZWRpdCIsICJhcHBlbmQiKSwgaCgiY2hvb3NlQ3JlZGl0IiwgImFwcGVuZCIpCgkJCQkJCX0sIDE1MDApCgkJCQkJfSksIHUoKQoJCQkJfTsKCQkJZS5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHsKCQkJCWkuSUU2IHx8IGkuSUU3IHx8IGkuSUU4IHx8IGxvY2F0aW9uLmhvc3QuaW5kZXhPZigiYW1hem9uIikgPiAtMSAmJiAid3d3LmFtYXpvbi5jbiIgIT0gbG9jYXRpb24uaG9zdCAmJiAobG9jYXRpb24uaG9zdC5pbmRleE9mKCIuY28uanAiKSA+IC0xICYmIHQoImh0bWwiKS5hZGRDbGFzcygiYW1hem9uLWpwIiksIGxvY2F0aW9uLmhvc3QuaW5kZXhPZigiLmRlIikgPiAtMSB8fCBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCW0oKSwgcCgpCgkJCQl9LCAxNTAwKSkKCQkJfQoJCX0pLmNhbGwodCwgbig2KSwgbigxKSkKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJZS5leHBvcnRzID0gJzxkaXYgY2xhc3M9Imd3ZF9hZGRDYXJ0IGJqZF9idG5fYm94Ij5cbiAgPGEgaHJlZj0ie3tjX3NlcnZlcn19IiB0YXJnZXQ9Il9ibGFuayIgdGl0bGU9Iui0reeJqeWFmiI+PC9hPlxuICA8c3BhbiBjbGFzcz0iYmpkX2FkZGNhcnQiPuS4gOmUrua1t+a3mDwvc3Bhbj5cbiAgPHNwYW4gY2xhc3M9ImJqZF9jbG9zZSI+PC9zcGFuPlxuPC9kaXY+XG48c3R5bGUgdHlwZT0idGV4dC9jc3MiPlxuICAuZ3dkX2FkZENhcnQge1xuICAgIHdpZHRoOiAxODBweDtcbiAgICBoZWlnaHQ6IDM2cHg7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICBjb2xvcjogIzQ5NGI0ZDtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgbGVmdDogLTIxNnB4O1xuICAgIHRvcDogMzZweDtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgbGluZS1oZWlnaHQ6IDM1cHg7XG4gICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMjhweDtcbiAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAyOHB4O1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjNDdiZWZlO1xuICAgIGZvbnQtZmFtaWx5OiBcJ01pY3Jvc29mdCBZYWhlaVwnO1xuICB9XG4gIC5nd2RfYWRkQ2FydCBhLCAuZ3dkX2FkZENhcnQgc3BhbiB7XG4gICAgZmxvYXQ6IGxlZnQ7XG4gICAgbWFyZ2luLWxlZnQ6IDE5cHg7XG4gIH1cbiAgLmd3ZF9hZGRDYXJ0IC5iamRfYWRkY2FydCB7XG4gICAgY3Vyc29yOiB0ZXh0O1xuICB9XG4gIC5nd2RfYWRkQ2FydCBhIHtcbiAgICBiYWNrZ3JvdW5kOiB1cmwoXCd7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvaGFpdGFvX3NpdGVpY29uLnBuZ1wnKSAwcHggNnB4IG5vLXJlcGVhdDtcbiAgICBiYWNrZ3JvdW5kLXNpemU6IDI0cHggMjJweDtcbiAgICBoZWlnaHQ6IDM1cHg7XG4gICAgd2lkdGg6IDI2cHg7XG4gIH1cbiAgLmJqZF9jbG9zZSB7XG4gICAgYmFja2dyb3VuZDogdXJsKFwne3tzX3NlcnZlcn19L2ltYWdlcy9leHRlbnNpb25zL2hhaXRhb19jbG9zZWljb24ucG5nXCcpIDBweCAwcHggbm8tcmVwZWF0O1xuICAgIHdpZHRoOiAyMHB4O1xuICAgIGhlaWdodDogMjBweDtcbiAgICBtYXJnaW4tdG9wOiAxMnB4O1xuICAgIGJhY2tncm91bmQtc2l6ZTogMTJweCAxMnB4O1xuICB9XG4gIC5nd2RfYWRkQ2FydDpiZWZvcmV7XG4gICAgYm9yZGVyOiAxOHB4IHNvbGlkIHRyYW5zcGFyZW50O1xuICAgIGJvcmRlci1sZWZ0LWNvbG9yOiAjNDdiZWZlO1xuICAgIGNvbnRlbnQ6ICIiO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBsZWZ0OiAxNzhweDtcbiAgICB3aWR0aDogMHB4O1xuICAgIGhlaWdodDogMHB4O1xuICAgIHRvcDogLTFweDtcbiAgfVxuICAuZ3dkX2FkZENhcnQ6YWZ0ZXJ7XG4gICAgYm9yZGVyOiAxN3B4IHNvbGlkIHRyYW5zcGFyZW50O1xuICAgIGJvcmRlci1sZWZ0LWNvbG9yOiAjZmZmO1xuICAgIGNvbnRlbnQ6ICIiO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBsZWZ0OiAxNzhweDtcbiAgICB3aWR0aDogMHB4O1xuICAgIGhlaWdodDogMHB4O1xuICAgIHRvcDogMHB4O1xuICB9XG4gICNidXlib3hfZmVhdHVyZV9kaXYgI2FkZFRvQ2FydCAuYS1idXR0b24tc3RhY2sgc3Bhbi5hLWJ1dHRvbi1pbm5lciB7XG4gICAgb3ZlcmZsb3c6IHZpc2libGU7XG4gIH1cbiAgI3JiYkNvbnRhaW5lciBkaXYucmJiU2VjdGlvbiB7XG4gICAgb3ZlcmZsb3c6IHZpc2libGU7XG4gIH1cbjwvc3R5bGU+JwoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQllLmV4cG9ydHMgPSAnPGRpdiBjbGFzcz0iZ3dkX2NoZWNrb3V0IGJqZF9idG5fYm94Ij5cbiAgPGEgaHJlZj0ie3tjX3NlcnZlcn19IiB0YXJnZXQ9Il9ibGFuayIgdGl0bGU9Iui0reeJqeWFmiI+PC9hPlxuICA8c3BhbiBjbGFzcz0iYmpkX2FkZGNhcnQiPuWOu+e7k+eulzwvc3Bhbj5cbiAgPHNwYW4gY2xhc3M9ImJqZF9jbG9zZSI+PC9zcGFuPlxuPC9kaXY+XG48c3R5bGUgdHlwZT0idGV4dC9jc3MiPlxuICAuZ3dkX2NoZWNrb3V0IHtcbiAgICB3aWR0aDogMTQ4cHg7XG4gICAgaGVpZ2h0OiAzNnB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gICAgY29sb3I6ICM0OTRiNGQ7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGxpbmUtaGVpZ2h0OiAzNXB4O1xuICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAyOHB4O1xuICAgIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAyOHB4O1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjNDdiZWZlO1xuICAgIGZvbnQtZmFtaWx5OiBcJ01pY3Jvc29mdCBZYWhlaVwnO1xuICAgIHRvcDogMnB4O1xuICAgIHotaW5kZXg6IDk5O1xuICAgIHJpZ2h0OiAtMjExcHg7XG4gIH1cbiAgLmd3ZF9jaGVja291dCBhLCAuZ3dkX2NoZWNrb3V0IHNwYW4ge1xuICAgIGZsb2F0OiBsZWZ0O1xuICAgIG1hcmdpbi1sZWZ0OiAxOXB4O1xuICB9XG4gIC5nd2RfY2hlY2tvdXQgLmJqZF9hZGRjYXJ0IHtcbiAgICBjdXJzb3I6IHRleHQ7XG4gIH1cbiAgLmd3ZF9jaGVja291dCBhIHtcbiAgICBiYWNrZ3JvdW5kOiB1cmwoXCd7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvaGFpdGFvX3NpdGVpY29uLnBuZ1wnKSAwcHggNnB4IG5vLXJlcGVhdDtcbiAgICBiYWNrZ3JvdW5kLXNpemU6IDI0cHggMjJweDtcbiAgICBoZWlnaHQ6IDM1cHg7XG4gICAgd2lkdGg6IDI2cHg7XG4gICAgbWFyZ2luLWxlZnQ6IDdweDtcbiAgfVxuICAuYmpkX2Nsb3NlIHtcbiAgICBiYWNrZ3JvdW5kOiB1cmwoXCd7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvaGFpdGFvX2Nsb3NlaWNvbi5wbmdcJykgMHB4IDBweCBuby1yZXBlYXQ7XG4gICAgd2lkdGg6IDIwcHg7XG4gICAgaGVpZ2h0OiAyMHB4O1xuICAgIG1hcmdpbi10b3A6IDEycHg7XG4gICAgYmFja2dyb3VuZC1zaXplOiAxMnB4IDEycHg7XG4gIH1cbiAgLmd3ZF9jaGVja291dDpiZWZvcmV7XG4gICAgYm9yZGVyOiAyOXB4IHNvbGlkIHRyYW5zcGFyZW50O1xuICAgIGJvcmRlci1yaWdodC1jb2xvcjogIzQ3YmVmZTtcbiAgICBjb250ZW50OiAiIjtcbiAgICBib3JkZXItYm90dG9tLXdpZHRoOiAxOHB4O1xuICAgIGJvcmRlci10b3Atd2lkdGg6IDE4cHg7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGxlZnQ6IC01OHB4O1xuICAgIHdpZHRoOiAwcHg7XG4gICAgaGVpZ2h0OiAwcHg7XG4gICAgdG9wOiAtMXB4O1xuICB9XG4gIC5nd2RfY2hlY2tvdXQ6YWZ0ZXIge1xuICAgIGJvcmRlcjogMjdweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgICBib3JkZXItcmlnaHQtY29sb3I6ICNmZmY7XG4gICAgY29udGVudDogIiI7XG4gICAgYm9yZGVyLWJvdHRvbS13aWR0aDogMTdweDtcbiAgICBib3JkZXItdG9wLXdpZHRoOiAxN3B4O1xuICAgIGJvcmRlci1sZWZ0LXdpZHRoOiAzMHB4O1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBsZWZ0OiAtNTdweDtcbiAgICB3aWR0aDogMHB4O1xuICAgIGhlaWdodDogMHB4O1xuICAgIHRvcDogMHB4O1xuICB9XG4jaGxiLXB0Yy1idG4gc3Bhbi5hLWJ1dHRvbi1pbm5lcntcbiAgb3ZlcmZsb3c6IHZpc2libGU7XG59XG5cbjwvc3R5bGU+JwoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQllLmV4cG9ydHMgPSAnPGRpdiBjbGFzcz0iZ3dkX3NoaXBwaW5nMSBiamRfYnRuX2JveCI+XG4gIDxwPua4qemmqOaPkOekujwvcD5cbiAgPHNwYW4+5aaC6YCJ5oup55u06YKu77yM6K+355u05o6l5aGr5YaZ5Zu95YaF5pS26LSn5Zyw5Z2A77ybPC9zcGFuPlxuICA8c3Bhbj7lpoLkvb/nlKjovazov5DvvIzor7flnKjmraTpobXpnaLloavlhpnovazov5Dlhazlj7jlnLDlnYDvvJs8L3NwYW4+XG4gIDxhIGhyZWY9Int7Y19zZXJ2ZXJ9fS9hcHAvaGFpdGFvX2ludHIiIHRhcmdldD0iX2JsYW5rIiBjbGFzcz0idHJhbnNfYSI+6L2s6L+Q5pS755WlPC9hPlxuICA8YSBocmVmPSJ7e2Nfc2VydmVyfX0iIHRhcmdldD0iX2JsYW5rIiB0aXRsZT0i6LSt54mp5YWaIiBjbGFzcz0iYmpkX3NpdGVfaWNvbiI+PC9hPlxuICA8c3BhbiBjbGFzcz0iYmpkX2Nsb3NlIj48L3NwYW4+XG48L2Rpdj5cbjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+XG4gIC5nd2Rfc2hpcHBpbmcxIHtcbiAgICB3aWR0aDogMzQwcHg7XG4gICAgaGVpZ2h0OiAxNjBweDtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgcmlnaHQ6IC0zNjVweDtcbiAgICB0b3A6IDg3cHg7XG4gICAgYm9yZGVyLXJhZGl1czogMjBweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkICM0N2JlZmU7XG4gICAgZm9udC1mYW1pbHk6IFwnTWljcm9zb2Z0IFlhaGVpXCc7XG4gIH1cbiAgLmFtYXpvbi1kZSAuZ3dkX3NoaXBwaW5nMSB7XG4gICAgdG9wOiAzNTBweDtcbiAgfVxuICAuZ3dkX3NoaXBwaW5nMSBwIHtcbiAgICBmb250LXNpemU6IDE2cHg7XG4gICAgY29sb3I6ICMzRjQxNDI7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgbWFyZ2luOiAxN3B4IDAgMTZweCA2MHB4O1xuICB9XG4gIC5nd2Rfc2hpcHBpbmcxIHNwYW4ge1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIHdpZHRoOiBhdXRvO1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICBjb2xvcjogIzQ5NGI0ZDtcbiAgICBsaW5lLWhlaWdodDogMjJweDtcbiAgICBwYWRkaW5nLWxlZnQ6IDMycHg7XG4gIH1cbiAgLmJqZF9zaXRlX2ljb24ge1xuICAgIGJhY2tncm91bmQ6IHVybChcJ3t7c19zZXJ2ZXJ9fS9pbWFnZXMvZXh0ZW5zaW9ucy9oYWl0YW9fc2l0ZWljb24yLnBuZ1wnKSAwcHggMHB4IG5vLXJlcGVhdDtcbiAgICBiYWNrZ3JvdW5kLXNpemU6IDQ3cHggNDVweDtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgd2lkdGg6IDQ4cHg7XG4gICAgaGVpZ2h0OiA0OHB4O1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IC0xcHg7XG4gICAgbGVmdDogMHB4O1xuICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDIwcHg7XG4gIH1cbiAgLmd3ZF9zaGlwcGluZzEgLnRyYW5zX2F7XG4gICAgZmxvYXQ6IGxlZnQ7XG4gICAgbWFyZ2luOiAxN3B4IDMycHg7XG4gICAgY29sb3I6ICM0MEFDRTY7XG4gIH1cbiAgLmJqZF9jbG9zZSB7XG4gICAgYmFja2dyb3VuZDogdXJsKFwne3tzX3NlcnZlcn19L2ltYWdlcy9leHRlbnNpb25zL2hhaXRhb19jbG9zZWljb24ucG5nXCcpIDBweCAwcHggbm8tcmVwZWF0O1xuICAgIHdpZHRoOiAyMHB4O1xuICAgIGhlaWdodDogMjBweDtcbiAgICBtYXJnaW4tdG9wOiAxMnB4O1xuICAgIGJhY2tncm91bmQtc2l6ZTogMTJweCAxMnB4O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgfVxuICAuZ3dkX3NoaXBwaW5nMSAuYmpkX2Nsb3NlIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgcmlnaHQ6IDBweDtcbiAgICB0b3A6IDBweDtcbiAgfVxuICAjaWRlbnRpdHktYWRkLW5ldy1hZGRyZXNzICNlbnRlckFkZHJlc3NGdWxsTmFtZUNvbnRhaW5lcntcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIH1cbjwvc3R5bGU+JwoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQllLmV4cG9ydHMgPSAnPGRpdiBjbGFzcz0iZ3dkX3NoaXBwaW5nX3JlbWluZCI+XG4gIDxwPuivpeWVhuWTgeaUr+aMgeebtOmCruS4reWbvTwvcD5cbiAgPHA+55u06YKu77yM6K+35aGr5YaZ5Zu95YaF5pS26LSn5Zyw5Z2A77ybPC9wPlxuICA8cD7ovazov5DvvIzor7floavlhpnovazov5Dlhazlj7jlnLDlnYDjgII8L3A+XG48L2Rpdj5cbjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+XG4gIC5nd2Rfc2hpcHBpbmdfcmVtaW5kIHtcbiAgICB3aWR0aDogMTcycHg7XG4gICAgaGVpZ2h0OiAxMjVweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTc5MWRlO1xuICAgIGNvbG9yOiAjZmZmO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICByaWdodDogLTE5NXB4O1xuICAgIHRvcDogMHB4O1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBsaW5lLWhlaWdodDogMzVweDtcbiAgICBib3JkZXItcmFkaXVzOiAzcHg7XG4gICAgZm9udC1zaXplOiAxNHB4O1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIGZvbnQtZmFtaWx5OiBcJ01pY3Jvc29mdCBZYWhlaVwnO1xuICB9XG4gIC5nd2Rfc2hpcHBpbmdfcmVtaW5kOmFmdGVye1xuICAgIGJvcmRlcjogOHB4IHNvbGlkIHRyYW5zcGFyZW50O1xuICAgIGJvcmRlci1yaWdodC1jb2xvcjogIzE3OTFkZTtcbiAgICBjb250ZW50OiAiIjtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgbGVmdDogLTE2cHg7XG4gICAgd2lkdGg6IDBweDtcbiAgICBoZWlnaHQ6IDBweDtcbiAgICB0b3A6IDEwcHg7XG4gIH1cbiAgI2lkZW50aXR5LWFkZC1uZXctYWRkcmVzcyAjZW50ZXJBZGRyZXNzRnVsbE5hbWVDb250YWluZXJ7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB9XG48L3N0eWxlPicKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJZS5leHBvcnRzID0gJzxkaXYgY2xhc3M9Imd3ZF9jb250aW51ZTEgYmpkX2J0bl9ib3giPlxuICA8YSBocmVmPSJ7e2Nfc2VydmVyfX0iIHRhcmdldD0iX2JsYW5rIiB0aXRsZT0i6LSt54mp5YWaIj48L2E+XG4gIDxzcGFuIGNsYXNzPSJiamRfYWRkY2FydCI+54K55q2k6L+b5YWl5LiL5LiA5q2lPC9zcGFuPlxuICA8c3BhbiBjbGFzcz0iYmpkX2Nsb3NlIj48L3NwYW4+XG48L2Rpdj5cbjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+XG4gIC5nd2RfY29udGludWUxIHtcbiAgICB3aWR0aDogMjEwcHg7XG4gICAgaGVpZ2h0OiAzNnB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gICAgY29sb3I6ICM0OTRiNGQ7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGxlZnQ6IC0yNTNweDtcbiAgICB0b3A6IC00cHg7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGxpbmUtaGVpZ2h0OiAzNXB4O1xuICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDI4cHg7XG4gICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMjhweDtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgIzQ3YmVmZTtcbiAgICBmb250LWZhbWlseTogXCdNaWNyb3NvZnQgWWFoZWlcJztcbiAgfVxuICAuZ3dkX2NvbnRpbnVlMSBhLCAuZ3dkX2NvbnRpbnVlMSBzcGFuIHtcbiAgICBmbG9hdDogbGVmdDtcbiAgICBtYXJnaW4tbGVmdDogMTlweDtcbiAgfVxuICAuZ3dkX2NvbnRpbnVlMSAuYmpkX2FkZGNhcnQge1xuICAgIGN1cnNvcjogdGV4dDtcbiAgfVxuICAuZ3dkX2NvbnRpbnVlMSBhIHtcbiAgICBiYWNrZ3JvdW5kOiB1cmwoXCd7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvaGFpdGFvX3NpdGVpY29uLnBuZ1wnKSAwcHggNnB4IG5vLXJlcGVhdDtcbiAgICBiYWNrZ3JvdW5kLXNpemU6IDI0cHggMjJweDtcbiAgICBoZWlnaHQ6IDM1cHg7XG4gICAgd2lkdGg6IDI2cHg7XG4gIH1cbiAgLmJqZF9jbG9zZSB7XG4gICAgYmFja2dyb3VuZDogdXJsKFwne3tzX3NlcnZlcn19L2ltYWdlcy9leHRlbnNpb25zL2hhaXRhb19jbG9zZWljb24ucG5nXCcpIDBweCAwcHggbm8tcmVwZWF0O1xuICAgIHdpZHRoOiAyMHB4O1xuICAgIGhlaWdodDogMjBweDtcbiAgICBtYXJnaW4tdG9wOiAxMnB4O1xuICAgIGJhY2tncm91bmQtc2l6ZTogMTJweCAxMnB4O1xuICB9XG4gIC5nd2RfY29udGludWUxOmJlZm9yZXtcbiAgICBib3JkZXI6IDE4cHggc29saWQgdHJhbnNwYXJlbnQ7XG4gICAgYm9yZGVyLWxlZnQtY29sb3I6ICM0N2JlZmU7XG4gICAgY29udGVudDogIiI7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGxlZnQ6IDIwOHB4O1xuICAgIHdpZHRoOiAwcHg7XG4gICAgaGVpZ2h0OiAwcHg7XG4gICAgdG9wOiAtMXB4O1xuICB9XG4gIC5nd2RfY29udGludWUxOmFmdGVye1xuICAgIGJvcmRlcjogMTdweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgICBib3JkZXItbGVmdC1jb2xvcjogI2ZmZjtcbiAgICBjb250ZW50OiAiIjtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgbGVmdDogMjA4cHg7XG4gICAgd2lkdGg6IDBweDtcbiAgICBoZWlnaHQ6IDBweDtcbiAgICB0b3A6IDBweDtcbiAgfVxuICAjc2hpcHBpbmdPcHRpb25Gb3JtSWQgLmEtYm94LWlubmVyIHNwYW4uYS1idXR0b24taW5uZXIsICNzaGlwcGluZ09wdGlvbkZvcm1JZCAuYS1ib3gtaW5uZXIgLmNvbnRpbnVlLWJ1dHRvbntcbiAgICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgfVxuPC9zdHlsZT4nCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICc8ZGl2IGNsYXNzPSJnd2RfY29udGludWUyIGJqZF9idG5fYm94Ij5cbiAgPGEgaHJlZj0ie3tjX3NlcnZlcn19IiB0YXJnZXQ9Il9ibGFuayIgdGl0bGU9Iui0reeJqeWFmiI+PC9hPlxuICA8c3BhbiBjbGFzcz0iYmpkX2FkZGNhcnQiPueCueatpOi/m+WFpeS4i+S4gOatpTwvc3Bhbj5cbiAgPHNwYW4gY2xhc3M9ImJqZF9jbG9zZSI+PC9zcGFuPlxuPC9kaXY+XG48c3R5bGUgdHlwZT0idGV4dC9jc3MiPlxuICAuZ3dkX2NvbnRpbnVlMiB7XG4gICAgd2lkdGg6IDIxMHB4O1xuICAgIGhlaWdodDogMzZweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgIGNvbG9yOiAjNDk0YjRkO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBsZWZ0OiAtMjUzcHg7XG4gICAgdG9wOiAtMzNweDtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgbGluZS1oZWlnaHQ6IDM1cHg7XG4gICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMjhweDtcbiAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAyOHB4O1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjNDdiZWZlO1xuICAgIGZvbnQtZmFtaWx5OiBcJ01pY3Jvc29mdCBZYWhlaVwnO1xuICB9XG4gIC5nd2RfY29udGludWUyIGEsIC5nd2RfY29udGludWUyIHNwYW4ge1xuICAgIGZsb2F0OiBsZWZ0O1xuICAgIG1hcmdpbi1sZWZ0OiAxOXB4O1xuICB9XG4gIC5nd2RfY29udGludWUyIC5iamRfYWRkY2FydCB7XG4gICAgY3Vyc29yOiB0ZXh0O1xuICB9XG4gIC5nd2RfY29udGludWUyIGEge1xuICAgIGJhY2tncm91bmQ6IHVybChcJ3t7c19zZXJ2ZXJ9fS9pbWFnZXMvZXh0ZW5zaW9ucy9oYWl0YW9fc2l0ZWljb24ucG5nXCcpIDBweCA2cHggbm8tcmVwZWF0O1xuICAgIGJhY2tncm91bmQtc2l6ZTogMjRweCAyMnB4O1xuICAgIGhlaWdodDogMzVweDtcbiAgICB3aWR0aDogMjZweDtcbiAgfVxuICAuYmpkX2Nsb3NlIHtcbiAgICBiYWNrZ3JvdW5kOiB1cmwoXCd7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvaGFpdGFvX2Nsb3NlaWNvbi5wbmdcJykgMHB4IDBweCBuby1yZXBlYXQ7XG4gICAgd2lkdGg6IDIwcHg7XG4gICAgaGVpZ2h0OiAyMHB4O1xuICAgIG1hcmdpbi10b3A6IDEycHg7XG4gICAgYmFja2dyb3VuZC1zaXplOiAxMnB4IDEycHg7XG4gIH1cbiAgLmd3ZF9jb250aW51ZTI6YmVmb3Jle1xuICAgIGJvcmRlcjogMThweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgICBib3JkZXItbGVmdC1jb2xvcjogIzQ3YmVmZTtcbiAgICBjb250ZW50OiAiIjtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgbGVmdDogMjA4cHg7XG4gICAgd2lkdGg6IDBweDtcbiAgICBoZWlnaHQ6IDBweDtcbiAgICB0b3A6IC0xcHg7XG4gIH1cbiAgLmd3ZF9jb250aW51ZTI6YWZ0ZXJ7XG4gICAgYm9yZGVyOiAxN3B4IHNvbGlkIHRyYW5zcGFyZW50O1xuICAgIGJvcmRlci1sZWZ0LWNvbG9yOiAjZmZmO1xuICAgIGNvbnRlbnQ6ICIiO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBsZWZ0OiAyMDhweDtcbiAgICB3aWR0aDogMHB4O1xuICAgIGhlaWdodDogMHB4O1xuICAgIHRvcDogMHB4O1xuICB9XG4gICNvcmRlci1zdW1tYXJ5LWNvbnRhaW5lciAuYS1ib3gtaW5uZXIgc3BhbiwgI3NoaXBwaW5nT3B0aW9uRm9ybUlkIC5hLWJveC1pbm5lciAuY29udGludWUtYnV0dG9uIC5hLWJ1dHRvbi1wcmltYXJ5e1xuICAgIG92ZXJmbG93OiB2aXNpYmxlO1xuICB9XG48L3N0eWxlPicKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJZS5leHBvcnRzID0gJzxkaXYgY2xhc3M9Imd3ZF9jcmVkaXRpbmZvIGJqZF9idG5fYm94Ij5cbiAgPHA+5L+h55So5Y2h6K+G5YirPC9wPlxuICA8c3Bhbj7ljZXluIHkv6HnlKjljaHvvJrkv6HnlKjljaHkuIrlj6rmnInpk7bogZTmoIflv5fvvJs8L3NwYW4+XG4gIDxzcGFuPuWPjOW4geS/oeeUqOWNoe+8muS/oeeUqOWNoeS4iuaciTxiPlZpc3RhPC9iPuOAgTxiPk1hc3RlckNhcmQ8L2I+44CBPGI+SkNCPC9iPuOAgTwvc3Bhbj5cbiAgPHNwYW4gY2xhc3M9ImJqZF9zcGFuXzIiPjxiPkFtZXJpY2FuRXhwcmVzczwvYj7moIflv5fnmoTvvIzkuIDoiKzpg73mmK/lj4zluIHkv6HnlKjljaE8L3NwYW4+XG4gIDxhIGhyZWY9Int7Y19zZXJ2ZXJ9fSIgdGFyZ2V0PSJfYmxhbmsiIHRpdGxlPSLotK3nianlhZoiIGNsYXNzPSJiamRfc2l0ZV9pY29uIj48L2E+XG4gIDxzcGFuIGNsYXNzPSJiamRfY2xvc2UiPjwvc3Bhbj5cbjwvZGl2PlxuPHN0eWxlIHR5cGU9InRleHQvY3NzIj5cbiAgLmd3ZF9jcmVkaXRpbmZvIHtcbiAgICB3aWR0aDogNDU0cHg7XG4gICAgaGVpZ2h0OiAxNDBweDtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgcmlnaHQ6IC00NjlweDtcbiAgICB0b3A6IDMwcHg7XG4gICAgYm9yZGVyLXJhZGl1czogMjBweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkICM0N2JlZmU7XG4gICAgZm9udC1mYW1pbHk6IFwnTWljcm9zb2Z0IFlhaGVpXCc7XG4gIH1cbiAgLmFtYXpvbi1qcCAuZ3dkX2NyZWRpdGluZm8ge1xuICAgIHRvcDogLTYwcHg7XG4gIH1cbiAgLmFtYXpvbi1kZSAuZ3dkX2NyZWRpdGluZm8ge1xuICAgIHRvcDogLTc1cHg7XG4gICAgei1pbmRleDogOTk5O1xuICB9XG4gIC5nd2RfY3JlZGl0aW5mbyBwIHtcbiAgICBmb250LXNpemU6IDE2cHg7XG4gICAgY29sb3I6ICMzRjQxNDI7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgbWFyZ2luOiAxN3B4IDAgMTZweCA2MHB4O1xuICB9XG4gIC5nd2RfY3JlZGl0aW5mbyBzcGFuIHtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgICB3aWR0aDogYXV0bztcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgY29sb3I6ICM0OTRiNGQ7XG4gICAgbGluZS1oZWlnaHQ6IDIycHg7XG4gICAgcGFkZGluZy1sZWZ0OiAzMnB4O1xuICB9XG4gIC5nd2RfY3JlZGl0aW5mbyAuYmpkX3NwYW5fMiB7XG4gICAgcGFkZGluZy1sZWZ0OiAxMThweDtcbiAgfVxuICAuYmpkX3NpdGVfaWNvbiB7XG4gICAgYmFja2dyb3VuZDogdXJsKFwne3tzX3NlcnZlcn19L2ltYWdlcy9leHRlbnNpb25zL2hhaXRhb19zaXRlaWNvbjIucG5nXCcpIDBweCAwcHggbm8tcmVwZWF0O1xuICAgIGJhY2tncm91bmQtc2l6ZTogNDdweCA0NXB4O1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICB3aWR0aDogNDhweDtcbiAgICBoZWlnaHQ6IDQ4cHg7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogLTFweDtcbiAgICBsZWZ0OiAwcHg7XG4gICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMjBweDtcbiAgfVxuICAuYmpkX2Nsb3NlIHtcbiAgICBiYWNrZ3JvdW5kOiB1cmwoXCd7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvaGFpdGFvX2Nsb3NlaWNvbi5wbmdcJykgMHB4IDBweCBuby1yZXBlYXQ7XG4gICAgd2lkdGg6IDIwcHg7XG4gICAgaGVpZ2h0OiAyMHB4O1xuICAgIG1hcmdpbi10b3A6IDEycHg7XG4gICAgYmFja2dyb3VuZC1zaXplOiAxMnB4IDEycHg7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICB9XG4gIC5nd2RfY3JlZGl0aW5mbyAuYmpkX2Nsb3NlIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgcmlnaHQ6IDBweDtcbiAgICB0b3A6IDBweDtcbiAgfVxuICAjaWRlbnRpdHktYWRkLW5ldy1hZGRyZXNzICNlbnRlckFkZHJlc3NGdWxsTmFtZUNvbnRhaW5lcntcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIH1cbjwvc3R5bGU+JwoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQllLmV4cG9ydHMgPSAnPGRpdiBjbGFzcz0iZ3dkX2FkZGNyZWRpdCBiamRfYnRuX2JveCIgaWQ9ImFkZGNyZWRpdF9idG4iPlxuICA8YSBocmVmPSJ7e2Nfc2VydmVyfX0iIHRhcmdldD0iX2JsYW5rIiB0aXRsZT0i6LSt54mp5YWaIj48L2E+XG4gIDxzcGFuIGNsYXNzPSJiamRfYWRkY2FydCI+5re75Yqg5L+h55So5Y2hPC9zcGFuPlxuICA8c3BhbiBjbGFzcz0iYmpkX2Nsb3NlIj48L3NwYW4+XG4gIDxkaXYgY2xhc3M9ImNyZWRpdF9kZXRhaWwiPjwvZGl2PlxuPC9kaXY+XG48c3R5bGUgdHlwZT0idGV4dC9jc3MiPlxuICAuZ3dkX2FkZGNyZWRpdCB7XG4gICAgd2lkdGg6IDE4MHB4O1xuICAgIGhlaWdodDogMzZweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgIGNvbG9yOiAjNDk0YjRkO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBsaW5lLWhlaWdodDogMzVweDtcbiAgICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogMjhweDtcbiAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogMjhweDtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgIzQ3YmVmZTtcbiAgICBmb250LWZhbWlseTogXCdNaWNyb3NvZnQgWWFoZWlcJztcbiAgICB0b3A6IDQ3cHg7XG4gICAgei1pbmRleDogOTk7XG4gICAgbGVmdDogMTIycHg7XG4gIH1cbiAgLmFtYXpvbi1qcCAuZ3dkX2FkZGNyZWRpdCB7XG4gICAgdG9wOiA1NHB4O1xuICAgIGxlZnQ6IDEzMHB4O1xuICB9XG4gIC5hbWF6b24tZGUgLmd3ZF9hZGRjcmVkaXQge1xuICAgIHRvcDogNTNweDtcbiAgICBsZWZ0OiAxODBweDtcbiAgfVxuICAuY3JlZGl0X2RldGFpbCB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgei1pbmRleDogOTk5O1xuICAgIHRvcDogLTUzcHg7XG4gICAgbGVmdDogMTk2cHg7XG4gICAgYmFja2dyb3VuZDogdXJsKFwne3tzX3NlcnZlcn19L2ltYWdlcy9leHRlbnNpb25zL2hhaXRhby9hbWF6b25fcmVtaW5kX2NyZWRpdF9pbmZvLnBuZ1wnKSAwcHggMHB4IG5vLXJlcGVhdDtcbiAgICB3aWR0aDogMzQycHg7XG4gICAgaGVpZ2h0OiAxNDBweDtcbiAgfVxuICAuYW1hem9uLWRlIC5jcmVkaXRfZGV0YWlsIHtcbiAgICBiYWNrZ3JvdW5kOiB1cmwoXCd7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvaGFpdGFvL2FtYXpvbl9yZW1pbmRfY3JlZGl0X2luZm9fZGUucG5nXCcpIDBweCAwcHggbm8tcmVwZWF0O1xuICB9XG4gIC5hbWF6b24tanAgLmNyZWRpdF9kZXRhaWwge1xuICAgIGJhY2tncm91bmQ6IHVybChcJ3t7c19zZXJ2ZXJ9fS9pbWFnZXMvZXh0ZW5zaW9ucy9oYWl0YW8vYW1hem9uX3JlbWluZF9jcmVkaXRfaW5mb19qcC5wbmdcJykgMHB4IDBweCBuby1yZXBlYXQ7XG4gIH1cbiAgI2FkZGNyZWRpdF9idG46aG92ZXIgLmNyZWRpdF9kZXRhaWwge1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICB9XG4gIC5nd2RfYWRkY3JlZGl0IGEsIC5nd2RfYWRkY3JlZGl0IHNwYW4ge1xuICAgIGZsb2F0OiBsZWZ0O1xuICAgIG1hcmdpbi1sZWZ0OiAxOXB4O1xuICB9XG4gIC5nd2RfYWRkY3JlZGl0IC5iamRfYWRkY2FydCB7XG4gICAgY3Vyc29yOiB0ZXh0O1xuICB9XG4gIC5nd2RfYWRkY3JlZGl0IGEge1xuICAgIGJhY2tncm91bmQ6IHVybChcJ3t7c19zZXJ2ZXJ9fS9pbWFnZXMvZXh0ZW5zaW9ucy9oYWl0YW9fc2l0ZWljb24ucG5nXCcpIDBweCA2cHggbm8tcmVwZWF0O1xuICAgIGJhY2tncm91bmQtc2l6ZTogMjRweCAyMnB4O1xuICAgIGhlaWdodDogMzVweDtcbiAgICB3aWR0aDogMjZweDtcbiAgICBtYXJnaW4tbGVmdDogN3B4O1xuICB9XG4gIC5iamRfY2xvc2Uge1xuICAgIGJhY2tncm91bmQ6IHVybChcJ3t7c19zZXJ2ZXJ9fS9pbWFnZXMvZXh0ZW5zaW9ucy9oYWl0YW9fY2xvc2VpY29uLnBuZ1wnKSAwcHggMHB4IG5vLXJlcGVhdDtcbiAgICB3aWR0aDogMjBweDtcbiAgICBoZWlnaHQ6IDIwcHg7XG4gICAgbWFyZ2luLXRvcDogMTJweDtcbiAgICBiYWNrZ3JvdW5kLXNpemU6IDEycHggMTJweDtcbiAgfVxuICAuZ3dkX2FkZGNyZWRpdDpiZWZvcmV7XG4gICAgYm9yZGVyOiAyOXB4IHNvbGlkIHRyYW5zcGFyZW50O1xuICAgIGJvcmRlci1yaWdodC1jb2xvcjogIzQ3YmVmZTtcbiAgICBjb250ZW50OiAiIjtcbiAgICBib3JkZXItYm90dG9tLXdpZHRoOiAxOHB4O1xuICAgIGJvcmRlci10b3Atd2lkdGg6IDE4cHg7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGxlZnQ6IC01OHB4O1xuICAgIHdpZHRoOiAwcHg7XG4gICAgaGVpZ2h0OiAwcHg7XG4gICAgdG9wOiAtMXB4O1xuICB9XG4gIC5nd2RfYWRkY3JlZGl0OmFmdGVyIHtcbiAgICBib3JkZXI6IDI3cHggc29saWQgdHJhbnNwYXJlbnQ7XG4gICAgYm9yZGVyLXJpZ2h0LWNvbG9yOiAjZmZmO1xuICAgIGNvbnRlbnQ6ICIiO1xuICAgIGJvcmRlci1ib3R0b20td2lkdGg6IDE3cHg7XG4gICAgYm9yZGVyLXRvcC13aWR0aDogMTdweDtcbiAgICBib3JkZXItbGVmdC13aWR0aDogMzBweDtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgbGVmdDogLTU3cHg7XG4gICAgd2lkdGg6IDBweDtcbiAgICBoZWlnaHQ6IDBweDtcbiAgICB0b3A6IDBweDtcbiAgfVxuICAjaWRlbnRpdHktYWRkLW5ldy1hZGRyZXNzICNlbnRlckFkZHJlc3NGdWxsTmFtZUNvbnRhaW5lcntcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIH1cbjwvc3R5bGU+JwoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQllLmV4cG9ydHMgPSAnPGRpdiBjbGFzcz0iZ3dkX3Byb21vY29kZSBiamRfYnRuX2JveCI+XG4gIDxhIGhyZWY9Int7Y19zZXJ2ZXJ9fSIgdGFyZ2V0PSJfYmxhbmsiIHRpdGxlPSLotK3nianlhZoiPjwvYT5cbiAgPHNwYW4gY2xhc3M9ImJqZF9hZGRjYXJ0Ij7lpoLmnInkvJjmg6DnoIHvvIzmraTlpITmt7vliqDkvJjmg6DnoIE8L3NwYW4+XG4gIDxzcGFuIGNsYXNzPSJiamRfY2xvc2UiPjwvc3Bhbj5cbjwvZGl2PlxuPHN0eWxlIHR5cGU9InRleHQvY3NzIj5cbiAgLmd3ZF9wcm9tb2NvZGUge1xuICAgIHdpZHRoOiAyOTNweDtcbiAgICBoZWlnaHQ6IDM2cHg7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICBjb2xvcjogIzQ5NGI0ZDtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgbGVmdDogLTY5cHg7XG4gICAgdG9wOiA0NXB4O1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBsaW5lLWhlaWdodDogMzVweDtcbiAgICBib3JkZXItcmFkaXVzOiAyOHB4O1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjNDdiZWZlO1xuICAgIGZvbnQtZmFtaWx5OiBcJ01pY3Jvc29mdCBZYWhlaVwnO1xuICB9XG4gIC5nd2RfcHJvbW9jb2RlIGEsIC5nd2RfcHJvbW9jb2RlIHNwYW4ge1xuICAgIGZsb2F0OiBsZWZ0O1xuICAgIG1hcmdpbi1sZWZ0OiAxOXB4O1xuICB9XG4gIC5nd2RfcHJvbW9jb2RlIC5iamRfYWRkY2FydCB7XG4gICAgY3Vyc29yOiB0ZXh0O1xuICB9XG4gIC5nd2RfcHJvbW9jb2RlIGEge1xuICAgIGJhY2tncm91bmQ6IHVybChcJ3t7c19zZXJ2ZXJ9fS9pbWFnZXMvZXh0ZW5zaW9ucy9oYWl0YW9fc2l0ZWljb24ucG5nXCcpIDBweCA2cHggbm8tcmVwZWF0O1xuICAgIGJhY2tncm91bmQtc2l6ZTogMjRweCAyMnB4O1xuICAgIGhlaWdodDogMzVweDtcbiAgICB3aWR0aDogMjZweDtcbiAgfVxuICAuYmpkX2Nsb3NlIHtcbiAgICBiYWNrZ3JvdW5kOiB1cmwoXCd7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvaGFpdGFvX2Nsb3NlaWNvbi5wbmdcJykgMHB4IDBweCBuby1yZXBlYXQ7XG4gICAgd2lkdGg6IDIwcHg7XG4gICAgaGVpZ2h0OiAyMHB4O1xuICAgIG1hcmdpbi10b3A6IDEycHg7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIGJhY2tncm91bmQtc2l6ZTogMTJweCAxMnB4O1xuICB9XG4gIC5nd2RfcHJvbW9jb2RlOmJlZm9yZXtcbiAgICBib3JkZXI6IDEwcHggc29saWQgdHJhbnNwYXJlbnQ7XG4gICAgYm9yZGVyLWJvdHRvbS1jb2xvcjogIzQ3YmVmZTtcbiAgICBjb250ZW50OiAiIjtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgbGVmdDogMTQ5cHg7XG4gICAgd2lkdGg6IDBweDtcbiAgICBoZWlnaHQ6IDBweDtcbiAgICB0b3A6IC0yMXB4O1xuICB9XG4gIC5nd2RfcHJvbW9jb2RlOmFmdGVye1xuICAgIGJvcmRlcjogMTBweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgICBib3JkZXItYm90dG9tLWNvbG9yOiAjZmZmO1xuICAgIGNvbnRlbnQ6ICIiO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBsZWZ0OiAxNDlweDtcbiAgICB3aWR0aDogMHB4O1xuICAgIGhlaWdodDogMHB4O1xuICAgIHRvcDogLTIwcHg7XG4gIH1cbiAgLnBtdHMtcmVkZWVtLWNsYWltLWNvZGUtZm9ybSB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB9XG48L3N0eWxlPicKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJZS5leHBvcnRzID0gJzxkaXYgY2xhc3M9Imd3ZF9jaG9vc2VDcmVkaXQgYmpkX2J0bl9ib3giPlxuICA8YSBocmVmPSJ7e2Nfc2VydmVyfX0iIHRhcmdldD0iX2JsYW5rIiB0aXRsZT0i6LSt54mp5YWaIj48L2E+XG4gIDxzcGFuIGNsYXNzPSJiamRfYWRkY2FydCI+5pSv5oyB5Y2V5biBIC8g5Y+M5biB5L+h55So5Y2hPC9zcGFuPlxuICA8c3BhbiBjbGFzcz0iYmpkX2Nsb3NlIj48L3NwYW4+XG48L2Rpdj5cbjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+XG4gIC5nd2RfY2hvb3NlQ3JlZGl0IHtcbiAgICB3aWR0aDogMjQ5cHg7XG4gICAgaGVpZ2h0OiAzNnB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gICAgY29sb3I6ICM0OTRiNGQ7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGxpbmUtaGVpZ2h0OiAzNXB4O1xuICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAyOHB4O1xuICAgIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAyOHB4O1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjNDdiZWZlO1xuICAgIGZvbnQtZmFtaWx5OiBcJ01pY3Jvc29mdCBZYWhlaVwnO1xuICAgIHRvcDogMHB4O1xuICAgIHotaW5kZXg6IDk5O1xuICAgIGxlZnQ6IDM2NXB4O1xuICB9XG4gIC5hbWF6b24tZGUgLmd3ZF9jaG9vc2VDcmVkaXQge1xuICAgIHRvcDogLTNweDtcbiAgICBsZWZ0OiA1MDdweDtcbiAgfVxuICAuZ3dkX2Nob29zZUNyZWRpdCBhLCAuZ3dkX2Nob29zZUNyZWRpdCBzcGFuIHtcbiAgICBmbG9hdDogbGVmdDtcbiAgICBtYXJnaW4tbGVmdDogMTlweDtcbiAgfVxuICAuZ3dkX2Nob29zZUNyZWRpdCAuYmpkX2FkZGNhcnQge1xuICAgIGN1cnNvcjogdGV4dDtcbiAgfVxuICAuZ3dkX2Nob29zZUNyZWRpdCBhIHtcbiAgICBiYWNrZ3JvdW5kOiB1cmwoXCd7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvaGFpdGFvX3NpdGVpY29uLnBuZ1wnKSAwcHggNnB4IG5vLXJlcGVhdDtcbiAgICBiYWNrZ3JvdW5kLXNpemU6IDI0cHggMjJweDtcbiAgICBoZWlnaHQ6IDM1cHg7XG4gICAgd2lkdGg6IDI2cHg7XG4gICAgbWFyZ2luLWxlZnQ6IDdweDtcbiAgfVxuICAuYmpkX2Nsb3NlIHtcbiAgICBiYWNrZ3JvdW5kOiB1cmwoXCd7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvaGFpdGFvX2Nsb3NlaWNvbi5wbmdcJykgMHB4IDBweCBuby1yZXBlYXQ7XG4gICAgd2lkdGg6IDIwcHg7XG4gICAgaGVpZ2h0OiAyMHB4O1xuICAgIG1hcmdpbi10b3A6IDEycHg7XG4gICAgYmFja2dyb3VuZC1zaXplOiAxMnB4IDEycHg7XG4gIH1cbiAgLmd3ZF9jaG9vc2VDcmVkaXQ6YmVmb3Jle1xuICAgIGJvcmRlcjogMjlweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgICBib3JkZXItcmlnaHQtY29sb3I6ICM0N2JlZmU7XG4gICAgY29udGVudDogIiI7XG4gICAgYm9yZGVyLWJvdHRvbS13aWR0aDogMThweDtcbiAgICBib3JkZXItdG9wLXdpZHRoOiAxOHB4O1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBsZWZ0OiAtNThweDtcbiAgICB3aWR0aDogMHB4O1xuICAgIGhlaWdodDogMHB4O1xuICAgIHRvcDogLTFweDtcbiAgfVxuICAuZ3dkX2Nob29zZUNyZWRpdDphZnRlciB7XG4gICAgYm9yZGVyOiAyN3B4IHNvbGlkIHRyYW5zcGFyZW50O1xuICAgIGJvcmRlci1yaWdodC1jb2xvcjogI2ZmZjtcbiAgICBjb250ZW50OiAiIjtcbiAgICBib3JkZXItYm90dG9tLXdpZHRoOiAxN3B4O1xuICAgIGJvcmRlci10b3Atd2lkdGg6IDE3cHg7XG4gICAgYm9yZGVyLWxlZnQtd2lkdGg6IDMwcHg7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGxlZnQ6IC01N3B4O1xuICAgIHdpZHRoOiAwcHg7XG4gICAgaGVpZ2h0OiAwcHg7XG4gICAgdG9wOiAwcHg7XG4gIH1cbiAgI25hdi1iYXIge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgfVxuICAuYS1zcGFjaW5nLWJhc2Uge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgfSc7Cgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICc8ZGl2IGNsYXNzPSJnd2RfZmluaXNoZWQgYmpkX2J0bl9ib3giPlxuICA8YSBocmVmPSJ7e2Nfc2VydmVyfX0iIHRhcmdldD0iX2JsYW5rIiB0aXRsZT0i6LSt54mp5YWaIj48L2E+XG4gIDxzcGFuIGNsYXNzPSJiamRfYWRkY2FydCI+54K55q2k5a6M5oiQ6K6i5Y2VPC9zcGFuPlxuICA8c3BhbiBjbGFzcz0iYmpkX2Nsb3NlIj48L3NwYW4+XG48L2Rpdj5cbjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+XG4gIC5nd2RfZmluaXNoZWQge1xuICAgIHdpZHRoOiAxOTBweDtcbiAgICBoZWlnaHQ6IDM2cHg7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICBjb2xvcjogIzQ5NGI0ZDtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgbGVmdDogLTIyOHB4O1xuICAgIHRvcDogLTMycHg7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGxpbmUtaGVpZ2h0OiAzNXB4O1xuICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDI4cHg7XG4gICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMjhweDtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgIzQ3YmVmZTtcbiAgICBmb250LWZhbWlseTogXCdNaWNyb3NvZnQgWWFoZWlcJztcbiAgfVxuICAuZ3dkX2ZpbmlzaGVkIGEsIC5nd2RfZmluaXNoZWQgc3BhbiB7XG4gICAgZmxvYXQ6IGxlZnQ7XG4gICAgbWFyZ2luLWxlZnQ6IDE5cHg7XG4gIH1cbiAgLmd3ZF9maW5pc2hlZCAuYmpkX2FkZGNhcnQge1xuICAgIGN1cnNvcjogdGV4dDtcbiAgfVxuICAuZ3dkX2ZpbmlzaGVkIGEge1xuICAgIGJhY2tncm91bmQ6IHVybChcJ3t7c19zZXJ2ZXJ9fS9pbWFnZXMvZXh0ZW5zaW9ucy9oYWl0YW9fc2l0ZWljb24ucG5nXCcpIDBweCA2cHggbm8tcmVwZWF0O1xuICAgIGJhY2tncm91bmQtc2l6ZTogMjRweCAyMnB4O1xuICAgIGhlaWdodDogMzVweDtcbiAgICB3aWR0aDogMjZweDtcbiAgfVxuICAuYmpkX2Nsb3NlIHtcbiAgICBiYWNrZ3JvdW5kOiB1cmwoXCd7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvaGFpdGFvX2Nsb3NlaWNvbi5wbmdcJykgMHB4IDBweCBuby1yZXBlYXQ7XG4gICAgd2lkdGg6IDIwcHg7XG4gICAgaGVpZ2h0OiAyMHB4O1xuICAgIG1hcmdpbi10b3A6IDEycHg7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIGJhY2tncm91bmQtc2l6ZTogMTJweCAxMnB4O1xuICB9XG4gIC5nd2RfZmluaXNoZWQ6YmVmb3Jle1xuICAgIGJvcmRlcjogMThweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgICBib3JkZXItbGVmdC1jb2xvcjogIzQ3YmVmZTtcbiAgICBjb250ZW50OiAiIjtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgbGVmdDogMTg4cHg7XG4gICAgd2lkdGg6IDBweDtcbiAgICBoZWlnaHQ6IDBweDtcbiAgICB0b3A6IC0xcHg7XG4gIH1cbiAgLmd3ZF9maW5pc2hlZDphZnRlcntcbiAgICBib3JkZXI6IDE3cHggc29saWQgdHJhbnNwYXJlbnQ7XG4gICAgYm9yZGVyLWxlZnQtY29sb3I6ICNmZmY7XG4gICAgY29udGVudDogIiI7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGxlZnQ6IDE4OHB4O1xuICAgIHdpZHRoOiAwcHg7XG4gICAgaGVpZ2h0OiAwcHg7XG4gICAgdG9wOiAwcHg7XG4gIH1cbiAgI29yZGVyLXN1bW1hcnktYm94e1xuICAgIG92ZXJmbG93OiB2aXNpYmxlO1xuICB9XG4gIDwvc3R5bGU+JwoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCwgbikgewoJCQkidXNlIHN0cmljdCI7CgoJCQlmdW5jdGlvbiBpKGUsIHQpIHsKCQkJCWlmICgwICE9IHQuaW5kZXhPZigiaHR0cCIpKSB7CgkJCQkJaWYgKDAgPT0gdC5pbmRleE9mKCJqYXZhc2NyaXB0IikpIGUgPSAiIiwgdCA9ICIiOwoJCQkJCWVsc2UgaWYgKDAgPT0gdC5pbmRleE9mKCIvLyIpKSBlID0gImh0dHA6IjsKCQkJCQllbHNlIGlmICgwID09IHQuaW5kZXhPZigiLyIpKSBlID0gZS5yZXBsYWNlKC8oaHR0cDpcL1wvW15cL10rKS4qL2dpLCAiJDEiKTsKCQkJCQllbHNlIHsKCQkJCQkJdmFyIG4gPSBlLnN1YnN0cigwLCBlLmluZGV4T2YoIi8vIikgKyAyKTsKCQkJCQkJZSA9IGUuc3Vic3RyKGUuaW5kZXhPZigiLy8iKSArIDIpOwoJCQkJCQl2YXIgaSA9IGUuc3BsaXQoIi8iKSwKCQkJCQkJCWEgPSBpLmxlbmd0aCAtIDE7CgkJCQkJCWlmICgwID09IHQuaW5kZXhPZigiLi8iKSkgdCA9IHQuc3Vic3RyKDIpOwoJCQkJCQllbHNlIGlmICgwID09IHQuaW5kZXhPZigiLi4vIikpCgkJCQkJCQlmb3IgKDsgMCA9PSB0LmluZGV4T2YoIi4uLyIpOykgdCA9IHQuc3Vic3RyKDMpLCBhLS07CgkJCQkJCWUgPSBuOwoJCQkJCQlmb3IgKHZhciBvID0gMDsgYSA+IG87IG8rKykgZSArPSBpW29dICsgIi8iCgkJCQkJfQoJCQkJCXQgPSBlICsgdAoJCQkJfQoJCQkJcmV0dXJuIHQKCQkJfQoKCQkJZnVuY3Rpb24gYSgpIHsKCQkJCXZhciBlID0gdC5zaXRlOwoJCQkJcmV0dXJuICJ5aGQiID09IHQuc2l0ZSAmJiAoZSA9ICJ5aWhhb2RpYW4iKSwgInZpcCIgPT0gdC5zaXRlICYmIChlID0gInZpcHNob3AiKSwgZQoJCQl9CgoJCQlmdW5jdGlvbiBvKCkgewoJCQkJKCJiYWlkdSIgPT0gdC5mcm9tX2RldmljZSB8fCAibWlfbmV3IiA9PSB0LmZyb21fZGV2aWNlIHx8ICJuamNrIiA9PSB0LmZyb21fZGV2aWNlIHx8ICJiamx0IiA9PSB0LmZyb21fZGV2aWNlIHx8IHQubmV3X2V4dGVuc2lvbikgJiYgKGRbIjM2MGJ1eSJdID0gMykKCQkJfQoJCQl2YXIgciA9IHQudV9zZXJ2ZXIgKyAiL3VuaW9uL2dvIiwKCQkJCXMgPSBbImpzZHgiLCAidGx4cyIsICJobmR4IiwgInhkamYiLCAiaGFndyIsICJiYWlkdSIsICJtaV9uZXciXTsKCQkJIXQuaXNNb2JpbGUgJiYgcy5pbmRleE9mICYmIHMuaW5kZXhPZih0LmZyb21fZGV2aWNlKSA+IC0xICYmIChyID0gdC5zcGVjaWFsVW5pb24pOwoJCQl2YXIgbCwgYyA9ICEwLAoJCQkJZCA9IHsKCQkJCQlkYW5nZGFuZzogMiwKCQkJCQluZXdlZ2c6IDcsCgkJCQkJbTE4OiAxMCwKCQkJCQlzZXBob3JhY3BzOiAxMiwKCQkJCQlsZWZlbmc6IDEzLAoJCQkJCXM6IDE0LAoJCQkJCSI1MWJ1eSI6IDE1LAoJCQkJCW1vb25iYXNhOiAxNywKCQkJCQlrZWVkZTogMTgsCgkJCQkJa2VkZTogMTgsCgkJCQkJdmFuY2w6IDE5LAoJCQkJCWxldGFvOiAyMiwKCQkJCQl0YW94aWU6IDI0LAoJCQkJCXN1bmluZzogMjUsCgkJCQkJY29vODogMjYsCgkJCQkJZ29tZTogMjgsCgkJCQkJImdvbWUtcnVzaGJ1eSI6IDI4LAoJCQkJCWdvbWVoaWdvOiAyOCwKCQkJCQl5aWhhb2RpYW46IDMxLAoJCQkJCSJ5aWhhb2RpYW4tdHVhbiI6IDMxLAoJCQkJCXdvbWFpOiAzMiwKCQkJCQlsZXlvdTogMzMsCgkJCQkJc2hvcGluOiAzNCwKCQkJCQl4aXU6IDM1LAoJCQkJCW1iYW9iYW86IDM2LAoJCQkJCWNodW5zaHVpdGFuZzogNDAsCgkJCQkJeDogNDEsCgkJCQkJbm81OiA0MywKCQkJCQlzYXNhOiA0NSwKCQkJCQkiMzYwa3hyIjogNTAsCgkJCQkJbTZnbzogNTEsCgkJCQkJbW9yZWZvb2Q6IDU0LAoJCQkJCSI5OXJlYWQiOiA1OSwKCQkJCQkiY2hpbmEtcHViIjogNjAsCgkJCQkJYm9va3NjaGluYTogNjEsCgkJCQkJd2lueHVhbjogNjIsCgkJCQkJZWZlaWh1OiA2MywKCQkJCQl5aW50YWk6IDY2LAoJCQkJCXN0cmF3YmVycnluZXQ6IDY5LAoJCQkJCWhhcHBpZ286IDcyLAoJCQkJCWdhcDogNzMsCgkJCQkJdG1hbGw6IDgzLAoJCQkJCXRpYW50aWFuOiA4NCwKCQkJCQlqdW1laTogODYsCgkJCQkJeW91Z291OiA5MywKCQkJCQkxMTE6IDk0LAoJCQkJCWppYW5rZTogOTcsCgkJCQkJbXV5aW5nemhpamlhOiA5OCwKCQkJCQlsaW5nc2hpOiA5OSwKCQkJCQliYW5nZ286IDEwMCwKCQkJCQl5ZXNteXdpbmU6IDEwMSwKCQkJCQlqaXVtZWk6IDEwMiwKCQkJCQl3aW5lbmljZTogMTAyLAoJCQkJCWppdXhpYW46IDEwMywKCQkJCQlnb3VqaXV3YW5nOiAxMDgsCgkJCQkJb2tocWI6IDEwOSwKCQkJCQlib29rdXU6IDExMCwKCQkJCQlkMTogMTE1LAoJCQkJCXBhaXhpZTogMTIyLAoJCQkJCXM4OiAxMjMsCgkJCQkJaG9tZXZ2OiAxMjQsCgkJCQkJanhkeWY6IDEyNSwKCQkJCQlqaW54aWFuZzogMTI1LAoJCQkJCXNmYmVzdDogMTI2LAoJCQkJCWJlbmxhaTogMTI3LAoJCQkJCXRvb3RvbzogMTI4LAoJCQkJCXZpcHNob3A6IDEyOSwKCQkJCQlmY2x1YjogMTMwLAoJCQkJCWlodXNoOiAxMzEsCgkJCQkJdm1hbGw6IDEzNCwKCQkJCQlsZW5vdm86IDEzNSwKCQkJCQlhcHBsZTogMTM2LAoJCQkJCXptNzogMTM4LAoJCQkJCW1pcWk6IDEzOSwKCQkJCQl6aGl3bzogMTQwLAoJCQkJCWoxOiAxNDEsCgkJCQkJd2FuZ2ppdTogMTQyLAoJCQkJCWxpZWJvOiAxNDQsCgkJCQkJZXNwcml0OiAxNDUsCgkJCQkJbGFtaXU6IDE0NiwKCQkJCQlhaW1lcjogMTQ3LAoJCQkJCWthZGFuZzogMTQ4LAoJCQkJCWxpemk6IDE0OSwKCQkJCQltZXRyb21hbGw6IDE1MCwKCQkJCQlwYmE6IDE1MSwKCQkJCQlzaGFuZ3BpbjogMTUyLAoJCQkJCXdiaWFvOiAxNTMsCgkJCQkJaGFuZHV5aXNoZTogMTU0LAoJCQkJCWVoYWllcjogMTU1LAoJCQkJCXNlY29vOiAxNTYsCgkJCQkJY2FtZWw6IDE1NywKCQkJCQltYXNhbWFzbzogMTU4LAoJCQkJCW5vcDogMTU5LAoJCQkJCW5hcnVrdTogMTYwLAoJCQkJCWdhb2ppZTogMTYxLAoJCQkJCXpoZW5waW46IDE2MiwKCQkJCQlzcG9ydGljYTogMTYzLAoJCQkJCXhpZnVxdWFuOiAxNjQsCgkJCQkJbWlsaWVyOiAxNjUsCgkJCQkJbGVtYWxsOiAxNjgsCgkJCQkJZGlhbnBpbmc6IDE3MSwKCQkJCQljdHJpcDogMTczLAoJCQkJCXlpZ3VvOiAxNzQsCgkJCQkJeXVtbXk3NzogMTc1LAoJCQkJCWZydWl0ZGF5OiAxNzgsCgkJCQkJanVtZWlnbG9iYWw6IDE3OSwKCQkJCQlmZWluaXU6IDE4MCwKCQkJCQlmZWlmZWk6IDE4MSwKCQkJCQl6dWlwaW46IDE4MiwKCQkJCQl5b2hvYnV5OiAxODQsCgkJCQkJbHZtYW1hOiAxODUsCgkJCQkJaWtqdGFvOiAxODgsCgkJCQkJbWY5MTA6IDE5NCwKCQkJCQltYXJrbWFsbDogMTk0LAoJCQkJCW1peWFiYW9iZWk6IDE5NSwKCQkJCQl1bGU6IDE5NiwKCQkJCQltaW5nc2hlbmdlYzogMTk3LAoJCQkJCXdhbmdmdWppbmc6IDE5OCwKCQkJCQludW9taTogMTk5LAoJCQkJCXF1bmFyOiAyMDAsCgkJCQkJbWVpbGlzaHVvOiAyMDIsCgkJCQkJbW9ndWppZTogMjAzLAoJCQkJCSI1NXR1YW4iOiAyMDQsCgkJCQkJamluamlhbmdpbm5zOiAyMDUsCgkJCQkJZWxvbmc6IDIwNiwKCQkJCQk1MDA6IDIwOSwKCQkJCQlzdXB1eTogMjEwLAoJCQkJCWx2OiAyMTEsCgkJCQkJY2FpcGlhbzogMjEyLAoJCQkJCWxpbmluZzogMjEzLAoJCQkJCWtvb2xlYXJuOiAyMTQsCgkJCQkJc3ByaW5ndG91cjogMjE1LAoJCQkJCTIyODogMjE2LAoJCQkJCXJyczogMjE3LAoJCQkJCWNvb2NhYTogMjE4LAoJCQkJCWxpZmV2YzogMjIwLAoJCQkJCW5pdWJpYTogMjIxLAoJCQkJCWt6ajM2NTogMjIyLAoJCQkJCWthb2xhOiAyMjMsCgkJCQkJeW1hdG91OiAyMjQsCgkJCQkJbWV0YW86IDIyNSwKCQkJCQlranQ6IDIyNiwKCQkJCQlsb2dpdGVjaDogMjI3LAoJCQkJCWViYXk6IDIzMCwKCQkJCQl4aWppOiAyMzIsCgkJCQkJbmlrZTogMjMzLAoJCQkJCSIzNjBrYWQiOiAyMzQsCgkJCQkJbGJ4Y246IDIzNSwKCQkJCQltZWljaTogMjM2LAoJCQkJCWJlaWJlaTogMjM3LAoJCQkJCSI2cG0iOiAyMzgsCgkJCQkJc2hvcGJvcDogMjQxLAoJCQkJCXNpZXJyYXRyYWRpbmdwb3N0OiAyNDMsCgkJCQkJYXNoZm9yZDogMjQzLAoJCQkJCSJsb29rZmFudGFzdGljLWNvbSI6IDI0OCwKCQkJCQlpaGVyYjogMjUwLAoJCQkJCXZzaWdvOiAyNTIsCgkJCQkJIjEwMHl1ZSI6IDI1NiwKCQkJCQloYWl0YW9jaGVuZzogMjU4LAoJCQkJCWpvZXNuZXdiYWxhbmNlb3V0bGV0OiAyNTksCgkJCQkJZGFsaW5nOiAyNjcsCgkJCQkJc2ZodDogMjY4LAoJCQkJCWZlbmdxdTogMjY4LAoJCQkJCW1laTogMjY5LAoJCQkJCXNob3dqb3k6IDI3MCwKCQkJCQlvY2o6IDI3MSwKCQkJCQlzdW5kYW46IDI3MiwKCQkJCQllYXNlZXllczogMjczLAoJCQkJCXl1bmhvdTogMjc0LAoJCQkJCWhhaXR1bmN1bjogMjc1LAoJCQkJCXdhbG1hcnQ6IDI3NiwKCQkJCQl2bWVpOiAyNzcsCgkJCQkJamdiOiAyNzgsCgkJCQkJIjUxZGluIjogMjc5LAoJCQkJCWFpZGFpOiAyODAsCgkJCQkJYm9xaWk6IDI4MSwKCQkJCQl0b3Vyc2ZvcmZ1bjogMjgyLAoJCQkJCWx1bHV0cmlwOiAyODMsCgkJCQkJc3BpZGVyOiAyODQsCgkJCQkJbWljcm9zb2Z0c3RvcmU6IDI4NSwKCQkJCQlqaWFlOiAyODYsCgkJCQkJemF6aGlwdTogMjg3LAoJCQkJCXhnZHE6IDI4OCwKCQkJCQl4dGVwOiAyODksCgkJCQkJbWlkZWE6IDI5MCwKCQkJCQlzdGFwbGVzOiAyOTEsCgkJCQkJZWZvdGlsZTogMjkyLAoJCQkJCWJlc3RjYWtlOiAyOTMsCgkJCQkJbG92bzogMjk0LAoJCQkJCWh1YTogMjk1LAoJCQkJCXpoZTgwMDogMjk2LAoJCQkJCWJmdHY6IDI5NywKCQkJCQl0dWppYTogMjk4LAoJCQkJCXR1aHU6IDI5OSwKCQkJCQlodGM6IDMwMCwKCQkJCQlyb3Nlb25seTogMzAxLAoJCQkJCXJvbmczNjA6IDMwMiwKCQkJCQluaXdvZGFpOiAzMDMsCgkJCQkJY29zbWU6IDMwNCwKCQkJCQlkaWFwZXJzOiAzMDUsCgkJCQkJd2luZGVsbjogMzA2LAoJCQkJCWJhYnluZW86IDMwNywKCQkJCQllc2NlbnR1YWw6IDMwOCwKCQkJCQl0aGV3YXRjaGVyeTogMzA5LAoJCQkJCXNha3NmaWZ0aGF2ZW51ZTogMzEwLAoJCQkJCWVzdGVlbGF1ZGVyOiAzMTEsCgkJCQkJYmljY2FtZXJhOiAzMTIsCgkJCQkJdGFxdTogMzEzLAoJCQkJCXF5ZXI6IDMxNCwKCQkJCQkiYXhtYWxsICI6IDMxNSwKCQkJCQltdWppOiAzMTYsCgkJCQkJZ21hcmtldDogMzE3LAoJCQkJCSIxMXN0IjogMzE4LAoJCQkJCXNtYXJ0YmFyZ2FpbnM6IDMxOSwKCQkJCQl5YWhvb3Nob3A6IDMyMCwKCQkJCQlibG9vbWluZ2RhbGVzOiAzMjEsCgkJCQkJbWlraWhvdXNlOiAzMjIsCgkJCQkJdG95c3J1czogMzIzLAoJCQkJCWNvbWZvcnRmaXJzdDogMzI0LAoJCQkJCWd5bWJvcmVlOiAzMjUsCgkJCQkJYWxiZWViYWJ5OiAzMjYsCgkJCQkJYmFieW1hcmt0OiAzMjcsCgkJCQkJdWdnYXVzdHJhbGlhOiAzMjgsCgkJCQkJbmVpbWFubWFyY3VzOiAzMjksCgkJCQkJc2hvZWJ1eTogMzMwLAoJCQkJCXN6dWw6IDMzMSwKCQkJCQl0aW1leDogMzMyLAoJCQkJCWtheTogMzMzLAoJCQkJCWV3YXRjaGVzOiAzMzQsCgkJCQkJc3dhcm92c2tpOiAzMzUsCgkJCQkJd29ybGRvZndhdGNoZXM6IDMzNiwKCQkJCQlkYW5pZWx3ZWxsaW5ndG9uOiAzMzcsCgkJCQkJYmVhdXR5YmF5OiAzMzgsCgkJCQkJYmVhdXR5OiAzMzksCgkJCQkJYmVhdXR5YmFyOiAzNDAsCgkJCQkJc2tpbnN0b3JlOiAzNDEsCgkJCQkJbGFuZWlnZTogMzQyLAoJCQkJCWJvc2U6IDM0MywKCQkJCQliZXN0YnV5OiAzNDQsCgkJCQkJYmhwaG90b3ZpZGVvOiAzNDUsCgkJCQkJc29ueTogMzQ2LAoJCQkJCWJsOiAzNDcsCgkJCQkJYmVzdGluZm9vZHM6IDM0OCwKCQkJCQl5b3UxNjM6IDM0OSwKCQkJCQlqaW5qaWFuZzogMzUwLAoJCQkJCWd1b2ppbWFtaTogMzUxLAoJCQkJCWJhaXlhbmd3YW5nOiAzNTIsCgkJCQkJcm95eW91bmdjaGVtaXN0OiAzNTQsCgkJCQkJbWVkaWhlYWxzaG9wOiAzNTUsCgkJCQkJIjEwMDFwaGFybWFjaWVzIjogMzU2LAoJCQkJCSJsb29rZmFudGFzdGljLWNuIjogMzU3LAoJCQkJCSIxLTE2MyI6IDM1OCwKCQkJCQlrYWl4aW5iYW86IDM1OSwKCQkJCQlqdWFucGk6IDM2MCwKCQkJCQlib29raW5nOiAzNjEsCgkJCQkJcGhhcm1hY3lvbmxpbmU6IDM2MiwKCQkJCQlib2R5Z3VhcmRhcG90aGVrZTogMzYzLAoJCQkJCXB1cmNvdHRvbjogMzY0LAoJCQkJCXdzdHg6IDM2NywKCQkJCQloaXNlbnNlOiAzNjgsCgkJCQkJemhvbmdqaXU6IDM2OSwKCQkJCQlrYWx1bGk6IDM3MCwKCQkJCQl0bzh0bzogMzcxLAoJCQkJCW9wcG9zaG9wOiAzNzIsCgkJCQkJYmFvYmVpZ2V6aTogMzczLAoJCQkJCXlhbzEyMzogMzc0LAoJCQkJCWJhaWNoZW5nOiAzNzUsCgkJCQkJZ2lvbmVlOiAzNzYsCgkJCQkJc3Vhbmp1emk6IDM3NywKCQkJCQlhb215Z29kOiAzNzgsCgkJCQkJbHVvbGFpOiAzNzksCgkJCQkJdml2bzogMzgwLAoJCQkJCWRpeGludG9uZzogMzgxLAoJCQkJCWNvb2xwYWQ6IDM4MiwKCQkJCQlza2c6IDM4MywKCQkJCQlpcWl5aTogMzg0LAoJCQkJCWFvbGFpZ286IDM4NSwKCQkJCQltaXNzZnJlc2g6IDM4NiwKCQkJCQlwdXNoZW5rdWFqaW5nOiAzODcsCgkJCQkJZmVlbHVuaXF1ZTogMzg4LAoJCQkJCWNoZW1pc3RkaXJlY3Q6IDM4OSwKCQkJCQluZXRwaGFybWFjeTogMzkwLAoJCQkJCXBoYXJtYWN5NGxlc3M6IDM5MSwKCQkJCQlwaGFybWFjeWRpcmVjdDogMzkyLAoJCQkJCWFtY2FsOiAzOTMsCgkJCQkJbGFyZWRvdXRlOiAzOTQsCgkJCQkJdW5zZXJla2xlaW5lYXBvdGhla2U6IDM5NSwKCQkJCQllcndpbm11ZWxsZXI6IDM5NiwKCQkJCQlraXdpZGlzY292ZXJ5OiAzOTcsCgkJCQkJc3ByaW5nbGFuZTogMzk4LAoJCQkJCSJqYWtvLW8iOiAzOTksCgkJCQkJZWFzeXRveXM6IDQwMCwKCQkJCQl0bGNwaGFybWFjeTogNDAxLAoJCQkJCWJpZW5tYW5nZXI6IDQwMiwKCQkJCQlkZXdhcmVuOiA0MDMsCgkJCQkJImRpc2NvdW50LWFwb3RoZWtlIjogNDA0LAoJCQkJCSJob2xsYW5kLWF0LWhvbWUiOiA0MDUsCgkJCQkJeW91eXU6IDQwNiwKCQkJCQlraXdpc3RhcmNhcmU6IDQwNywKCQkJCQlsZW5vdm9tb2JpbGU6IDQwOCwKCQkJCQlraWVobHM6IDQwOSwKCQkJCQl6YXBwb3M6IDQxMCwKCQkJCQljb2FjaDogNDExLAoJCQkJCXlvb3g6IDQxMiwKCQkJCQkiMTFzdHJlZXQiOiA0MTMsCgkJCQkJIjUxdGFvdWsiOiA0MTQsCgkJCQkJaHFoYWlyOiA0MTUsCgkJCQkJa2F0ZXNwYWRlOiA0MTYsCgkJCQkJdml0YWZ5OiA0MTcsCgkJCQkJbG90dGU6IDQxOCwKCQkJCQljYXJyZWZvdXI6IDQxOSwKCQkJCQl0ZWE3OiA0MjAsCgkJCQkJcHV6ZXlmOiA0MjEsCgkJCQkJa29obHM6IDQyMiwKCQkJCQlib2R5YnVpbGRpbmc6IDQyMywKCQkJCQlub3Jkc3Ryb206IDQyNCwKCQkJCQljb3N0Y286IDQyNSwKCQkJCQl0YXJnZXQ6IDQyNiwKCQkJCQlrbWFydDogNDI3LAoJCQkJCW92ZXJzdG9jazogNDI4LAoJCQkJCXNlYXJzOiA0MjksCgkJCQkJc2hvcHJvYmFtOiA0MzAsCgkJCQkJZ291bWluOiA0MzEsCgkJCQkJZmx5Y286IDQzMiwKCQkJCQlvcHBsZXN0b3JlOiA0MzMsCgkJCQkJc3lzaG9wOiA0MzQsCgkJCQkJeWZkeWY6IDQzNSwKCQkJCQlob3RlbHM6IDQzNiwKCQkJCQlhaWh1aXNob3U6IDQzNywKCQkJCQl0aGViZWFzdHNob3A6IDQzOCwKCQkJCQlqb21vb3Nob3A6IDQzOSwKCQkJCQlzZXB0d29sdmVzOiA0NDAsCgkJCQkJbGlhbmppYTogNDQxLAoJCQkJCSI1aTVqIjogNDQyLAoJCQkJCWhvbWU2OiA0NDMsCgkJCQkJIjgwMHBoYXJtIjogNDQ0LAoJCQkJCXVqaXBpbjogNDQ1LAoJCQkJCW1tYjogNDQ2LAoJCQkJCWloYXZldTogNDQ3LAoJCQkJCWlrYW5nOiA0NDgsCgkJCQkJd3luODg6IDQ0OSwKCQkJCQltY2FrZTogNDUwLAoJCQkJCXhtZWlzZTogNDUxLAoJCQkJCWxlY2FrZTogNDUyLAoJCQkJCWpkMTAwOiA0NTMsCgkJCQkJamluZ2h1YTogNDU0LAoJCQkJCXRhb2h3dTogNDU1LAoJCQkJCXpiaXJkOiA0NTYsCgkJCQkJa20xODE4OiA0NTcsCgkJCQkJem9jYWk6IDQ1OCwKCQkJCQl0YW9zaHU6IDQ1OSwKCQkJCQlhaXpoaWd1OiA0NjAsCgkJCQkJdGlleW91OiA0NjEsCgkJCQkJZmllbGRzY2hpbmE6IDQ2MiwKCQkJCQl3ZG1jYWtlOiA0NjMsCgkJCQkJbHF4c2hvcDogNDY0LAoJCQkJCXVzYXNob3BjbjogNDY3LAoJCQkJCXdpbmU5OiA0NjgsCgkJCQkJcWlwYWltYWxsOiA0NjksCgkJCQkJeW9kb2RvOiA0NzAsCgkJCQkJMTY4ODogNDcxLAoJCQkJCXlvZ2VyOiA0NzIsCgkJCQkJZGFwdTogNDczLAoJCQkJCXdpbm9uYTogNDc0LAoJCQkJCXdsOiA0NzUsCgkJCQkJc2hhbm1haTogNDc2LAoJCQkJCXpnc2hvZXM6IDQ3NywKCQkJCQltYWljaGF3YW5nOiA0NzgsCgkJCQkJdWVtYWxsOiA0ODksCgkJCQkJIjUxeW91IjogNDgwLAoJCQkJCWJlaWZhYm9vazogNDgxLAoJCQkJCWpwZWVuOiA0ODIsCgkJCQkJaHVhdHVveWY6IDQ4MywKCQkJCQlmZW5nYnV5OiA0ODQsCgkJCQkJdWl5aTogNDg1LAoJCQkJCWhlY2hhOiA0ODYsCgkJCQkJdDEwOiA0ODcsCgkJCQkJcXc6IDQ4OCwKCQkJCQltaXV0b3VyOiA0ODksCgkJCQkJZWhhb3lhbzogNDkwLAoJCQkJCWlkeDogNDkxLAoJCQkJCXV5YTEwMDogNDkyLAoJCQkJCXNzbmV3eW9yazogNDkzLAoJCQkJCWNsaW5pcXVlOiA0OTQsCgkJCQkJaHhlcGF3bjogNDk1LAoJCQkJCWJyb29rc2Jyb3RoZXJzOiA0OTYsCgkJCQkJb210YW86IDQ5NywKCQkJCQllcDM2NTogNDk4LAoJCQkJCWNvbHVtYmlhc3BvcnRzOiA0OTksCgkJCQkJYnN0YXBwOiA1MDAsCgkJCQkJbmV3YmFsYW5jZTogNTAxLAoJCQkJCXdqaWtlOiA1MDIsCgkJCQkJYmFsbHk6IDUwMywKCQkJCQkiMWhhaSI6IDUwNCwKCQkJCQlqaWFsaWNoOiA1MDUsCgkJCQkJdGFrZXlhOiA1MDYsCgkJCQkJZm9yZXZlcjIxOiA1MDcsCgkJCQkJbW9kZXJuYXZlbnVlOiA1MDgsCgkJCQkJbXVuaWFvOiA1MDksCgkJCQkJenVpaHVpeW91OiA1MTAsCgkJCQkJY2VudGFuZXQ6IDUxMSwKCQkJCQlib2JiaWJyb3duY29zbWV0aWNzOiA1MTIsCgkJCQkJInN1cGVyLWluIjogNTEzLAoJCQkJCWhhbmdvd2E6IDUxNCwKCQkJCQlsZXZpOiA1MTUsCgkJCQkJZmlsYTogNTE2LAoJCQkJCWNvbnZlcnNlOiA1MTcsCgkJCQkJbmV4dGRpcmVjdDogNTE4LAoJCQkJCWl0cmlwOiA1MTksCgkJCQkJbGFzaG91OiA1MjAsCgkJCQkJbGl1ZmVuZzogNTIxLAoJCQkJCXRydDogNTIyLAoJCQkJCXdvZGluZ2h1YTogNTIzLAoJCQkJCXd1bGl3dWxpOiA1MjQsCgkJCQkJZm9yZXN0Zm9vZDogNTI1LAoJCQkJCWJvbmpvdXJoazogNTI2LAoJCQkJCXZpdGFnb3U6IDUyNywKCQkJCQlraW5ob206IDUyOCwKCQkJCQkiMzYwbGoiOiA1MjksCgkJCQkJY2hhbmdiYTogNTMwLAoJCQkJCW9ha2xleTogNTMxLAoJCQkJCWpweW9vOiA1MzIsCgkJCQkJY2xhcmtzdXNhOiA1MzMsCgkJCQkJc3Rhcndvb2Rob3RlbHM6IDUzNCwKCQkJCQltYXJyaW90dDogNTM1LAoJCQkJCXllc3N0eWxlOiA1MzYsCgkJCQkJZXZpc3U6IDUzNywKCQkJCQlsaWZlc2Vhc3k6IDUzOCwKCQkJCQljY3hwZXQ6IDUzOSwKCQkJCQl4MDA2MTogNTQwLAoJCQkJCWtrZ3VhbjogNTQxLAoJCQkJCSJzdHlsZS1vY2xvY2siOiA1NDIsCgkJCQkJcGVpa3VhOiA1NDMsCgkJCQkJYWlyZnJhbmNlOiA1NDQsCgkJCQkJYWNjb3Job3RlbHM6IDU0NSwKCQkJCQlzcGFjZW5rOiA1NDYsCgkJCQkJaGFpY2h1ZmFuZzogNTQ3LAoJCQkJCXdjb25jZXB0OiA1NDgsCgkJCQkJZ2FudDogNTQ5LAoJCQkJCWNhdGZvb3R3ZWFyOiA1NTAsCgkJCQkJc2F1Y29ueTogNTUxLAoJCQkJCXphb3p1bzogNTUyLAoJCQkJCWxpdHRsZXN3YW46IDU1MywKCQkJCQljYW46IDU1NCwKCQkJCQlzc3JqOiA1NTUsCgkJCQkJZ3Vlc3M6IDU1NiwKCQkJCQlldGloYWQ6IDU1NywKCQkJCQlmaWlsOiA1NTgsCgkJCQkJbWlhbnNodWkzNjU6IDU1OSwKCQkJCQl0ZWdvdXNoZTogNTYwLAoJCQkJCXdpZ2dsZTogNTYxLAoJCQkJCW1kcmVhbXM6IDU2MiwKCQkJCQllY292YWNzOiA1NjMsCgkJCQkJY2Fsdmlua2xlaW46IDU2NCwKCQkJCQltZW1lYm94OiA1NjUsCgkJCQkJaGlsdG9uOiA1NjYsCgkJCQkJcmV2b2x2ZTogNTY3LAoJCQkJCXNoaXNlaWRvOiA1NjgsCgkJCQkJY2xhcmluc3VzYTogNTY5LAoJCQkJCXN0YXJidWNrczogNTcwLAoJCQkJCSJyYXktYmFuIjogNTcxLAoJCQkJCXB1bWE6IDU3MiwKCQkJCQluYXV0aWNhOiA1NzMsCgkJCQkJY3JlbWVkZWxhbWVyOiA1NzQsCgkJCQkJImtpcGxpbmctdXNhIjogNTc1LAoJCQkJCWp1cmxpcXVlOiA1NzYsCgkJCQkJaHVzaHB1cHBpZXM6IDU3NywKCQkJCQlvcmlnaW5zOiA1NzgsCgkJCQkJZm9sbGlmb2xsaWU6IDc3OSwKCQkJCQlsb2NjaXRhbmU6IDU4MCwKCQkJCQlocHN0b3JlOiA1ODIsCgkJCQkJIjAxaG9tZSI6IDU4NCwKCQkJCQloZWFsdGhwb3N0OiA1ODgsCgkJCQkJaW1lbmd4aWFuZzogNTkwLAoJCQkJCWh5c2o6IDU5MSwKCQkJCQlzYW9odW83OiA1OTIsCgkJCQkJcmVwYWk6IDU5MywKCQkJCQltYXlpOiA1OTQsCgkJCQkJeWlucGlhbzogNTk1LAoJCQkJCSJpaG9tZS1pbnMiOiA1OTYsCgkJCQkJaW5jYWtlOiA1OTcsCgkJCQkJa3V3bzogNTk4LAoJCQkJCXl3YXJ0OiA1OTksCgkJCQkJY2N0OiA2MDAsCgkJCQkJYW5zZ286IDYwMSwKCQkJCQlwaWxpYmFiYTogNjAyLAoJCQkJCXhpYW9uaXU4ODogNjAzLAoJCQkJCWFoYXZhOiA2MDQsCgkJCQkJIjUtZmlmdGgiOiA2MDUsCgkJCQkJdGhld2F0Y2hodXQ6IDYwNiwKCQkJCQliYWJ5aGF2ZW46IDYwNywKCQkJCQkiY29zbWUtZGUiOiA2MDgsCgkJCQkJZ2V0dGhlbGFiZWw6IDYwOSwKCQkJCQltYXRzdXlhOiA2MTAsCgkJCQkJdGltYmVybGFuZDogNjExLAoJCQkJCXRvcG1hbjogNjEyLAoJCQkJCWhvbWVhd2F5OiA2MTMsCgkJCQkJYmVhdXR5ZXhwZXJ0OiA2MTQsCgkJCQkJaGFpbWk6IDYxNSwKCQkJCQltYW5raW5kOiA2MTYsCgkJCQkJdGhlaHV0OiA2MTcsCgkJCQkJdG9wc2hvcDogNjE4LAoJCQkJCW1hbWFsYWRlbjogNjE5LAoJCQkJCSJ0cmF2ZWxlci1zdG9yZSI6IDYyMCwKCQkJCQl0cmF2ZWx6b286IDYyMSwKCQkJCQl1bWlzaG9lczogNjIyLAoJCQkJCXBlcnJpY29uZW1kOiA2MjMsCgkJCQkJZmVycmFyaTogNjI0LAoJCQkJCXdpbGxlcmV4cHJlc3M6IDYyNSwKCQkJCQl1bmluZWVkOiA2MjYsCgkJCQkJYWNuZXN0dWRpb3M6IDYyNywKCQkJCQlhZXJvcG9zdGFsZTogNjI4LAoJCQkJCWFnb2RhOiA2MjksCgkJCQkJYWxiYW1vZGE6IDYzMCwKCQkJCQlhbGxiZWF1dHk6IDYzMSwKCQkJCQlhbGxzYWludHM6IDYzMiwKCQkJCQlhbGxzb2xlOiA2MzMsCgkJCQkJdXJiYW5vdXRmaXR0ZXJzOiA2MzQsCgkJCQkJdml0YWJpb3RpY3M6IDYzNSwKCQkJCQliZWxsZW1haXNvbjogNjM2LAoJCQkJCWJlbmVmaXRjb3NtZXRpY3M6IDYzNywKCQkJCQliaGNvc21ldGljczogNjM4LAoJCQkJCWJqbXlsaWtlczogNjM5LAoJCQkJCXZpdGFtaW5iYXk6IDY0MCwKCQkJCQl3YWl0cm9zZTogNjQxLAoJCQkJCXdvbGZvcmRzaG9wOiA2NDIsCgkJCQkJYm9vaG9vOiA2NDMsCgkJCQkJYm9vdHM6IDY0NCwKCQkJCQlicml0aXNoY29ybmVyc2hvcDogNjQ1LAoJCQkJCXlpcmVuZGFpOiA2NDYsCgkJCQkJeXM3OiA2NDcsCgkJCQkJY29nZ2xlczogNjQ4LAoJCQkJCWNvcnNldGRlYWw6IDY0OSwKCQkJCQljb3R0b25vbjogNjUwLAoJCQkJCWNyb2NzOiA2NTEsCgkJCQkJY3J1aXNlZmFzaGlvbjogNjUyLAoJCQkJCWRlbGw6IDY1MywKCQkJCQlkZXJtc3RvcmU6IDY1NCwKCQkJCQlkaXNuZXlzdG9yZTogNjU1LAoJCQkJCWRvcm90aHlwZXJraW5zOiA2NTYsCgkJCQkJZG91ZG91a2FuZzogNjU3LAoJCQkJCWR1amlha2U6IDY1OCwKCQkJCQlkdW5lbG9uZG9uOiA2NTksCgkJCQkJZWFzdGJheTogNjYwLAoJCQkJCWVhc3RkYW5lOiA2NjEsCgkJCQkJemFmdWw6IDY2MiwKCQkJCQl6YXZ2aTogNjYzLAoJCQkJCWZlaW5rZWl0OiA2NjQsCgkJCQkJZWlibWFya3Q6IDY2NSwKCQkJCQliZWxsdW5hOiA2NjYsCgkJCQkJZW1pcmF0ZXM6IDY2NywKCQkJCQllbXM6IDY2OCwKCQkJCQlldGVybmE6IDY2OSwKCQkJCQlldXJhaWw6IDY3MCwKCQkJCQlleGFudGVkaWV0OiA2NzEsCgkJCQkJZXhwZWRpYTogNjcyLAoJCQkJCWZhbGtlOiA2NzMsCgkJCQkJZmFtb3VzZm9vdHdlYXI6IDY3NCwKCQkJCQlmb3JlbzogNjc2LAoJCQkJCXdhbmd4aW5saWNhaTogNjc3LAoJCQkJCWZvcmV2ZXJ1bmlxdWU6IDY3OCwKCQkJCQlmb3J6aWVyaTogNjc5LAoJCQkJCWZyZWVjb3VudHJ5OiA2ODAsCgkJCQkJZnJlbmNoY29ubmVjdGlvbjogNjgyLAoJCQkJCSJnaWZ0LWxhbmQiOiA2ODMsCgkJCQkJZ3Jvd2dvcmdlb3VzOiA2ODcsCgkJCQkJaG90ZWw6IDY5MCwKCQkJCQlob3VzZW9mZnJhc2VyOiA2OTEsCgkJCQkJaHVpenVjaGU6IDY5MiwKCQkJCQlpd2FudG9uZW9mdGhvc2U6IDY5NSwKCQkJCQlqamdsb2JhbDogNjk2LAoJCQkJCWp1aWN5Y291dHVyZTogNjk5LAoJCQkJCWtlbmtvOiA3MDAsCgkJCQkJa2lrb2Nvc21ldGljczogNzAyLAoJCQkJCWxhbmNlcnNraW5jYXJlOiA3MDMsCgkJCQkJbGVnbzogNzA0LAoJCQkJCWxvcmRhbmR0YXlsb3I6IDcwNiwKCQkJCQltYWl6aGk6IDcxMSwKCQkJCQltYXRjaGVzZmFzaGlvbjogNzEyLAoJCQkJCW1hdHN1a2l5bzogNzEzLAoJCQkJCW1pY3Jvc29mdDogNzE1LAoJCQkJCW1pb3NraW5jYXJlOiA3MTYsCgkJCQkJbWlzc3NlbGZyaWRnZTogNzE3LAoJCQkJCW1vdW50YWluZ2VhcjogNzE4LAoJCQkJCW15YmFnOiA3MjAsCgkJCQkJbXlwcm90ZWluOiA3MjEsCgkJCQkJbXl2aXRhbWluczogNzIzLAoJCQkJCSJuZXQtYS1wb3J0ZXIiOiA3MjQsCgkJCQkJIm5ld2JhbGFuY2UtdWsiOiA3MjUsCgkJCQkJZGRreTogNzI2LAoJCQkJCW5ld2xvb2s6IDcyNywKCQkJCQljaGluYWFjYzogNzI4LAoJCQkJCWJtYWk6IDcyOSwKCQkJCQkibmlrZS1oayI6IDczMCwKCQkJCQkibmlrZS1iciI6IDczMSwKCQkJCQlpbmtlOiA3MzIsCgkJCQkJbnlhbmRjb21wYW55OiA3MzMsCgkJCQkJIm9hc2lzLXN0b3JlcyI6IDczNCwKCQkJCQlvcmJpdHo6IDczNSwKCQkJCQlvcmNoaXJhOiA3MzYsCgkJCQkJIm9yaWdpbnMtdWsiOiA3MzcsCgkJCQkJcGV0c21hcnQ6IDczOCwKCQkJCQlqdW5yb25nZGFpOiA3MzksCgkJCQkJbmFwYWk6IDc0MCwKCQkJCQlncmVlOiA3NDEsCgkJCQkJcHJvYmlrZWtpdDogNzQyLAoJCQkJCXFhdGFyYWlyd2F5czogNzQzLAoJCQkJCXJhZGxleTogNzQ0LAoJCQkJCWFsbGlhbno6IDc0NSwKCQkJCQlyYWxwaGxhdXJlbjogNzQ2LAoJCQkJCXJlYmVjY2FtaW5rb2ZmOiA3NDcsCgkJCQkJeW91bWk6IDc0OCwKCQkJCQkiMjFjYWtlIjogNzQ5LAoJCQkJCXJlbnRhbGNhcnM6IDc1MCwKCQkJCQlyaWNhdWQ6IDc1MSwKCQkJCQlyb2NrcG9ydDogNzUyLAoJCQkJCXJ1ZWxhbGE6IDc1MywKCQkJCQkiNTZyZW4iOiA3NTQsCgkJCQkJc2Frc29mZjV0aDogNzU1LAoJCQkJCWFuYW50YXJhOiA3NTYsCgkJCQkJc2MyNDogNzU3LAoJCQkJCWNoZXN1ZGk6IDc1OCwKCQkJCQlzaG9lczogNzU5LAoJCQkJCXNob3BzcHJpbmc6IDc2MCwKCQkJCQlzaW1wbHlzdXBwbGVtZW50czogNzYxLAoJCQkJCWVobWFsbDogNzYyLAoJCQkJCWZhcmZldGNoOiA3NjMsCgkJCQkJc3NlbnNlOiA3NjQsCgkJCQkJc3RldmVtYWRkZW46IDc2NSwKCQkJCQlmcmVlcGVvcGxlOiA3NjYsCgkJCQkJZ2Fvc291eWk6IDc2NywKCQkJCQlpbW9tb2tvOiA3NjgsCgkJCQkJdGFvZG86IDc2OSwKCQkJCQltaWNoYWVsa29yczogNzcwLAoJCQkJCXR0Y2o6IDc3MSwKCQkJCQkidWYtY2x1YiI6IDc3MiwKCQkJCQl6aGFpZG91OiA3NzMsCgkJCQkJIjE2M3l1biI6IDc3NCwKCQkJCQlhcG86IDc3NSwKCQkJCQlqaW11OiA3NzYsCgkJCQkJaGFvMjQ6IDc3NywKCQkJCQlzZWFnb29yOiA3NzgsCgkJCQkJd2FubmFyOiA3NzksCgkJCQkJY2FpaGFuZzogNzgwLAoJCQkJCWNzbWFsbDogNzgxLAoJCQkJCWt1YWppbmc6IDc4MiwKCQkJCQltaWxsZW5uaXVtaG90ZWxzOiA3ODMsCgkJCQkJcmVlYm9uejogNzg0LAoJCQkJCXdlbWFrZXByaWNlOiA3ODUsCgkJCQkJd3pob3VodWk6IDc4NiwKCQkJCQlodWlqaWF5b3U6IDc4NywKCQkJCQltZWxpbWVsbzogNzg4LAoJCQkJCSI5MXhjbSI6IDc4OSwKCQkJCQkiYXNoZm9yZC16aCI6IDc5MCwKCQkJCQljam9ubWFydDogNzkxLAoJCQkJCWNueXRvOiA3OTIsCgkJCQkJZ3JhbmRkZnM6IDc5MywKCQkJCQlvZmZpY2VkZXBvdDogNzk0LAoJCQkJCXRpYW5ob25nOiA3OTUsCgkJCQkJeWlsaW5nc2hvcDogNzk2LAoJCQkJCWtsb29rOiA3OTcsCgkJCQkJImNoYXJtLWNvbG9yIjogNzk4LAoJCQkJCWZlbGlzc2ltbzogNzk5LAoJCQkJCXN1cmZzdGl0Y2g6IDgwMCwKCQkJCQlsb3JuYWphbmU6IDgwMSwKCQkJCQlyZWlzczogODAyLAoJCQkJCWd6bDogODAzLAoJCQkJCSI5ZHJ1ZyI6IDgwNCwKCQkJCQl5dW5nb3ViczogODA1LAoJCQkJCXllbmNpdHk6IDgwNiwKCQkJCQlodWppYW5nOiA4MDcsCgkJCQkJIm1laXR1YW4taXBoeCI6IDgwOCwKCQkJCQlzdmdvdXd1OiA4MDksCgkJCQkJaHF3eDogODExLAoJCQkJCXRjbDogODEyCgkJCQl9OwoJCQllLmV4cG9ydHMgPSBmdW5jdGlvbigpIHsKCQkJCXZhciBlID0gYSgpOwoJCQkJbygpOwoJCQkJdmFyIHMgPSBsb2NhdGlvbi5ocmVmOwoJCQkJaWYgKCEocy5pbmRleE9mKCJvcmRlciIpID4gLTEgfHwgcy5pbmRleE9mKCJjYXJ0IikgPiAtMSkgJiYgdC5zZXRfZm9yY2UpIHRyeSB7CgkJCQkJaWYgKGRbZV0gJiYgbi5pbkFycmF5KCIiICsgZFtlXSwgdC5mb3JjZSkgPj0gMCkgcmV0dXJuOwoJCQkJCW4oImJvZHkiKS5kZWxlZ2F0ZSgiYSIsICJtb3VzZWVudGVyIG1vdXNlbGVhdmUgbW91c2VvdmVyIiwgZnVuY3Rpb24oZSkgewoJCQkJCQl2YXIgdCA9IG4odGhpcykuYXR0cigiY3QiKTsKCQkJCQkJIm1vdXNlb3ZlciIgIT0gZS50eXBlICYmIHQgJiYgbih0aGlzKS5hdHRyKCJocmVmIiwgdCkucmVtb3ZlQXR0cigiY3QiKS5hdHRyKCJjdGVkIiwgIjEiKQoJCQkJCX0pLCAiczgiICE9IGUgPyBuKCJib2R5IikuZGVsZWdhdGUoImEiLCAiY2xpY2siLCBmdW5jdGlvbihhKSB7CgkJCQkJCWlmICghKG4uaW5BcnJheSgiIiArIGRbZV0sIHQuZm9yY2UpID49IDApICYmICFsICYmICgiMSIgIT09IG4odGhpcykuYXR0cigiY3RlZCIpIHx8IHQuaXNNb2JpbGUpKSB7CgkJCQkJCQlpZiAoYyAmJiAhdC5pc01vYmlsZSAmJiAoImpzZHgiID09IHQuZnJvbV9kZXZpY2UgJiYgdC5zZWNvbmRTaG93IHx8ICJ0bHhzIiA9PSB0LmZyb21fZGV2aWNlICYmIHQuc2Vjb25kU2hvdyB8fCAiaG5keCIgPT0gdC5mcm9tX2RldmljZSB8fCAieGRqZiIgPT0gdC5mcm9tX2RldmljZSAmJiB0LnNlY29uZFNob3cgfHwgImhhZ3ciID09IHQuZnJvbV9kZXZpY2UgJiYgdC5zZWNvbmRTaG93IHx8ICJtaV9uZXciID09IHQuZnJvbV9kZXZpY2UpKSByZXR1cm4gdm9pZChjID0gITEpOwoJCQkJCQkJaWYgKGRbZV0pIHsKCQkJCQkJCQl2YXIgbyA9IG4odGhpcykuYXR0cigiaHJlZiIpOwoJCQkJCQkJCWlmICghbyB8fCBvLmluZGV4T2YoIm9yZGVyIikgPiAtMSB8fCBvLmluZGV4T2YoImNhcnQiKSA+IC0xKSByZXR1cm47CgkJCQkJCQkJdmFyIHMgPSBuKHRoaXMpLmF0dHIoImNsYXNzIikgfHwgIiI7CgkJCQkJCQkJbyA9IGkodC5ocmVmLCBvKSwgMCA9PSBvLmluZGV4T2YoImh0dHAiKSAmJiBvLmluZGV4T2YoIiIgKyB0LmV4dE5hbWUpIDwgMCAmJiAtMSA9PSBzLmluZGV4T2YodC5leHROYW1lICsgIl9saW5rIikgJiYgKG8gPSByICsgIj9zaXRlX2lkPSIgKyBkW2VdICsgIiZ0YXJnZXRfdXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQobykgKyAiJmZyb209Y3QmY29sdW1uPWRpY3RzJnVuaW9uPSIgKyB0LnVuaW9uLnJlcGxhY2UoInVuaW9uXyIsICIiKSwgbih0aGlzKS5hdHRyKCJjdCIsIG4odGhpcykuYXR0cigiaHJlZiIpKSwgbih0aGlzKS5hdHRyKCJocmVmIiwgbyksIGwgPSAhMCwgbi5hamF4KHsKCQkJCQkJCQkJdXJsOiB0LnNlcnZlciArICIvYnJ3ZXh0L3Blcm1hbmVudF9pZC8iLAoJCQkJCQkJCQlkYXRhVHlwZTogImpzb25wIiwKCQkJCQkJCQkJanNvbnA6ICJjYWxsYmFjayIsCgkJCQkJCQkJCWFzeW5jOiAhMCwKCQkJCQkJCQkJZGF0YTogInZlcnNpb249MiZvcD1zZXRfZm9yY2UmdHlwZT0iICsgZFtlXSArICImdW5pb249IiArIHQudW5pb24sCgkJCQkJCQkJCXN1Y2Nlc3M6IGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQkJCXQuZm9yY2UgPSBlLmZvcmNlCgkJCQkJCQkJCX0sCgkJCQkJCQkJCWVycm9yOiBmdW5jdGlvbihlLCB0LCBuKSB7fQoJCQkJCQkJCX0pKQoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfSkgOiBuKCJib2R5IikuZGVsZWdhdGUoImEiLCAiY2xpY2siLCBmdW5jdGlvbihhKSB7CgkJCQkJCWlmICghKG4uaW5BcnJheSgiIiArIGRbZV0sIHQuZm9yY2UpID49IDApKSB7CgkJCQkJCQlpZiAoYykgcmV0dXJuIHZvaWQoYyA9ICExKTsKCQkJCQkJCWlmIChkW2VdKSB7CgkJCQkJCQkJdmFyIG8gPSBuKHRoaXMpLmF0dHIoImhyZWYiKTsKCQkJCQkJCQlvID0gaSh0LmhyZWYsIG8pLCAwID09IG8uaW5kZXhPZigiaHR0cCIpICYmIG8uaW5kZXhPZigiIiArIHQuZXh0TmFtZSkgPCAwICYmIChvLmluZGV4T2YoIml0ZW0iKSA+IDAgfHwgby5pbmRleE9mKCJkZXRhaWwiKSA+IDApICYmIChvID0gciArICI/c2l0ZV9pZD0iICsgZFtlXSArICImdGFyZ2V0X3VybD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KG8pICsgIiZmcm9tPWN0Iiwgbih0aGlzKS5hdHRyKCJjdCIsIG4odGhpcykuYXR0cigiaHJlZiIpKSwgbih0aGlzKS5hdHRyKCJocmVmIiwgbyksIG4uYWpheCh7CgkJCQkJCQkJCXVybDogdC5zZXJ2ZXIgKyAiL2Jyd2V4dC9wZXJtYW5lbnRfaWQvIiwKCQkJCQkJCQkJZGF0YVR5cGU6ICJqc29ucCIsCgkJCQkJCQkJCWpzb25wOiAiY2FsbGJhY2siLAoJCQkJCQkJCQlhc3luYzogITAsCgkJCQkJCQkJCWRhdGE6ICJ2ZXJzaW9uPTImb3A9c2V0X2ZvcmNlJnR5cGU9IiArIGRbZV0sCgkJCQkJCQkJCXN1Y2Nlc3M6IGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQkJCXQuZm9yY2UgPSBlLmZvcmNlCgkJCQkJCQkJCX0sCgkJCQkJCQkJCWVycm9yOiBmdW5jdGlvbihlLCB0LCBuKSB7fQoJCQkJCQkJCX0pKQoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfSkKCQkJCX0gY2F0Y2ggKHApIHsKCQkJCQlpZiAodC5kZWJ1ZykgdGhyb3cgcAoJCQkJfQoJCQl9CgkJfSkuY2FsbCh0LCBuKDEpLCBuKDYpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCwgaSkgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBhID0gbigxNiksCgkJCQlvID0gbigyOSksCgkJCQlyID0gby5nZXRCcm93c2VyKCksCgkJCQlzID0gbigxMTIpLAoJCQkJbCA9IG4oMTcpLAoJCQkJYyA9IG4oOSksCgkJCQlkID0gbigyNiksCgkJCQlwID0gbigxMyksCgkJCQloID0gZnVuY3Rpb24oKSB7CgkJCQkJci51dGl0bGUuaW5kZXhPZigiMzYwIikgPiAtMSAmJiAoci51dGl0bGUgPSAzNjApLCB0KCJib2R5IikuYXBwZW5kKGEuY29tcGlsZShzKSh7CgkJCQkJCWRhdGE6IHIsCgkJCQkJCXNfc2VydmVyOiBpLnNfc2VydmVyLAoJCQkJCQlleHROYW1lOiBpLmV4dE5hbWUKCQkJCQl9KSksIHQoImh0bWwiKS5hZGRDbGFzcygicmVtaW5kIiksIGQoInRyYWNrOnVwZGF0ZV9yZW1pbmQiKSwgcC5sb2coIuaPkuS7tuaOqOW5v+WxleeOsCIpLCBmKCksIHUoKQoJCQkJfSwKCQkJCXUgPSBmdW5jdGlvbigpIHsKCQkJCQl0KCIjcmVtaW5kX2Nsb3NlIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCXQoIiN1cGRhdGVfcmVtaW5kIikucmVtb3ZlKCksIGQoImNsaWNrOnVwZGF0ZV9yZW1pbmRfY2xvc2UiKSwgcC5sb2coIuaPkuS7tuaOqOW5v+WFs+mXrSIpLCBtKCkKCQkJCQl9KSwgdCgiI3VwZGF0ZV9yZW1pbmQgYSIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQlkKCJjbGljazp1cGRhdGVfcmVtaW5kX2luc3RhbGwiKSwgcC5sb2coIuaPkuS7tuaOqOW5v+eCueWHu+WuieijhSIpLCBtKCkKCQkJCQl9KQoJCQkJfSwKCQkJCW0gPSBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IGkuc2VydmVyICsgIi9icndleHQvcGVybWFuZW50X2lkP3ZlcnNpb249MiZvcD1zZXRfY2xvc2VfdXBkYXRlJmNsb3NlX3VwZGF0ZT0xIjsKCQkJCQljLmdldChlKS5kb25lKGZ1bmN0aW9uKGUpIHsKCQkJCQkJbC5zZXQoZSkKCQkJCQl9KQoJCQkJfSwKCQkJCWYgPSBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IGkuc2VydmVyICsgIi9icndleHQvcGVybWFuZW50X2lkP3ZlcnNpb249MiZvcD1zZXRfY2xvc2VfdXBkYXRlX2hvdXImY2xvc2VfdXBkYXRlX2hvdXI9MSI7CgkJCQkJYy5nZXQoZSkuZG9uZShmdW5jdGlvbihlKSB7CgkJCQkJCWwuc2V0KGUpCgkJCQkJfSkKCQkJCX07CgkJCWUuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7CgkJCQl2YXIgZSA9IHQoIiNCSUpJQV9IQVNfQlVJTFQiKS5hdHRyKCJjbGFzcyIpIHx8ICIiLAoJCQkJCW4gPSBbXSwKCQkJCQlhID0gTWF0aC5yb3VuZCgxMDAgKiBNYXRoLnJhbmRvbSgpKSA+IDgwOwoJCQkJZSA9IGUuc3BsaXQoIiAiKS5sZW5ndGgsIG4uaW5kZXhPZihpLmZyb21fZGV2aWNlKSA+IC0xICYmICIxIiAhPSBsLmdldCgiY2xvc2VfdXBkYXRlIikgJiYgIjEiICE9IGwuZ2V0KCJjbG9zZV91cGRhdGVfaG91ciIpICYmIDIgPiBlICYmIGEgJiYgaCgpCgkJCX0KCQl9KS5jYWxsKHQsIG4oNiksIG4oMSkpCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICc8ZGl2IGlkPSJ1cGRhdGVfcmVtaW5kIj5cbiAgPGRpdiBjbGFzcz0idV9jb250ZW50Ij5cbiAgICA8c3BhbiBjbGFzcz0idXBkYXRlX2ljb24iPjwvc3Bhbj5cbiAgICA8YSBjbGFzcz0idXBkYXRlX3R4dCB7e2V4dE5hbWV9fV9saW5rIiBocmVmPSJ7e2RhdGEudXJsfX0iIHRhcmdldD0iX2JsYW5rIj7ojrflj5Z7e2RhdGEudXRpdGxlfX3mtY/op4jlmajoh6rliqjmr5Tku7flt6XlhbfvvIzov5npobnlronoo4XmnInliqnkuo7mlLnov5vkvaDnmoTnvZHotK3kvZPpqozvvIzlnKjmtY/op4jllYblk4HpobXpnaLml7boh6rliqjlsZXnpLoxODDlpKnku7fmoLzljoblj7Llkozlhbbku5bnvZHnq5nmiqXku7c8L2E+XG4gICAgPGEgY2xhc3M9InVwZGF0ZV9idG4ge3tleHROYW1lfX1fbGluayIgaHJlZj0ie3tkYXRhLnVybH19IiB0YXJnZXQ9Il9ibGFuayI+56uL5Y2z5a6J6KOFPC9hPlxuICA8L2Rpdj5cbiAgPHNwYW4gaWQ9InJlbWluZF9jbG9zZSI+PC9zcGFuPlxuICA8c3R5bGUgdHlwZT0idGV4dC9jc3MiPlxuICAgICN1cGRhdGVfcmVtaW5kIHtcbiAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgaGVpZ2h0OiA0MHB4O1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI0ZGRkVFRTtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNFNEU0RTQ7XG4gICAgICB0b3A6IDBweDtcbiAgICAgIHotaW5kZXg6IDIxNDc0ODM2NDc7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgfVxuICAgIC51X2NvbnRlbnQge1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgbWFyZ2luOiAwIGF1dG87XG4gICAgfVxuICAgIC51cGRhdGVfaWNvbiB7XG4gICAgICBiYWNrZ3JvdW5kOiB1cmwoXCd7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvZ3dkX3VwZGF0ZV9yZW1pbmQucG5nXCcpO1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICBoZWlnaHQ6IDE2cHg7XG4gICAgICB3aWR0aDogMTZweDtcbiAgICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgICBtYXJnaW4tcmlnaHQ6IDZweDtcbiAgICB9XG4gICAgI3VwZGF0ZV9yZW1pbmQgLnVwZGF0ZV90eHQge1xuICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgY29sb3I6ICMwMDAwNjY7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICBoZWlnaHQ6IDQwcHg7XG4gICAgICBsaW5lLWhlaWdodDogNDBweDtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgIH1cbiAgICAjdXBkYXRlX3JlbWluZCAudXBkYXRlX3R4dDpob3ZlciB7XG4gICAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcbiAgICAgIGNvbG9yOiAjRkYzMzMzO1xuICAgIH1cbiAgICAjdXBkYXRlX3JlbWluZCAudXBkYXRlX2J0biB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRjJGMkYyO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgI0NDQztcbiAgICAgIGNvbG9yOiAjMzMzO1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgaGVpZ2h0OiAyNnB4O1xuICAgICAgd2lkdGg6IDgwcHg7XG4gICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICBsaW5lLWhlaWdodDogMjZweDtcbiAgICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xuICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgICAgbWFyZ2luLXRvcDogNXB4O1xuICAgIH1cbiAgICAjdXBkYXRlX3JlbWluZCAudXBkYXRlX2J0bjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRTRFNEU0O1xuICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgIH1cbiAgICAjcmVtaW5kX2Nsb3Nle1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgcmlnaHQ6IDE2cHg7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICB0b3A6IDEzcHg7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICBiYWNrZ3JvdW5kOiB1cmwoXCd7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvZ3dkX3VwZGF0ZV9yZW1pbmRfY2xvc2UucG5nXCcpIG5vLXJlcGVhdDtcbiAgICAgIGhlaWdodDogMTJweDtcbiAgICAgIHdpZHRoOiAxMnB4O1xuICAgICAgYmFja2dyb3VuZC1zaXplOiAxMnB4IDEycHg7XG4gICAgfVxuICA8L3N0eWxlPlxuPC9kaXY+JwoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCwgaSkgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBhID0gbigxNiksCgkJCQlvID0gbigxMyksCgkJCQlyID0gbigyNiksCgkJCQlzID0gbig5MiksCgkJCQlsID0gewoJCQkJCXRtYWxsOiB7CgkJCQkJCWltZzogImh0dHA6Ly9yZWFkaW5kZXguYmpjbmMuc2NzLnNvaHVjcy5jb20vYmFubmVyL3F1YW5sb2dvMi5wbmciLAoJCQkJCQl1cmx0YjogImh0dHBzOi8vcy5jbGljay50YW9iYW8uY29tL1kzaXU3aXciLAoJCQkJCQl1cmw6ICJodHRwczovL3MuY2xpY2sudGFvYmFvLmNvbS9aR05hbWh3IgoJCQkJCX0KCQkJCX0sCgkJCQljID0gZnVuY3Rpb24oZSkgewoJCQkJCXQoIiNxdWFubG9nbyAuY2xvc2VfYnRuIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCXQoIiNxdWFubG9nbyIpLnJlbW92ZSgpLCBvLmxvZygiaW1hZ2VhZDpjbG9zZToiICsgZSksIHIoImltYWdlYWQ6Y2xvc2U6IiArIGUpLCBzLnNldHRpbmdzKCJzZXRfaW1hZ2VBZCIsICJpbWFnZUFkIiwgIjAiKQoJCQkJCX0pLCB0KCIjcXVhbmxvZ28gYSIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQlvLmxvZygiaW1hZ2VhZDpjbGljazoiICsgZSksIHIoImltYWdlYWQ6Y2xpY2s6IiArIGUpCgkJCQkJfSkKCQkJCX0sCgkJCQlkID0gZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSAidG1hbGwiLAoJCQkJCQlzID0gbFtlXSwKCQkJCQkJZCA9IG4oMTE0KTsKCQkJCQl0KCJib2R5IikuYXBwZW5kKGEuY29tcGlsZShkKSh7CgkJCQkJCXNyYzogcy5pbWcsCgkJCQkJCXNfc2VydmVyOiBpLnNfc2VydmVyLAoJCQkJCQl1cmw6IHMudXJsCgkJCQkJfSkpLCBvLmxvZygiaW1hZ2VhZDp0cmFjazoiICsgZSksIHIoImltYWdlYWQ6dHJhY2s6IiArIGUpLCBjKGUpCgkJCQl9OwoJCQllLmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkgewoJCQkJaS5uZXdfZXh0ZW5zaW9uICYmICgiMCIgPT09IGkuaW1hZ2VBZCB8fCBpLmZvcmJpZEFkIHx8IGQoKSkKCQkJfQoJCX0pLmNhbGwodCwgbig2KSwgbigxKSkKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJZS5leHBvcnRzID0gJzxkaXYgaWQ9InF1YW5sb2dvIj5cbiAgPGEgaHJlZj0ie3t1cmx9fSIgdGFyZ2V0PSJfYmxhbmsiPlxuICAgIDxpbWcgc3JjPSJ7e3NyY319Ij5cbiAgPC9hPlxuICA8c3BhbiBjbGFzcz0iY2xvc2VfYnRuIj48L3NwYW4+XG4gIDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+XG4gICAgI3F1YW5sb2dvIHtcbiAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgIHdpZHRoOiBhdXRvO1xuICAgICAgaGVpZ2h0OiBhdXRvO1xuICAgICAgcmlnaHQ6IDQwcHg7XG4gICAgICB0b3A6IDI5MHB4O1xuICAgICAgei1pbmRleDogOTk5OTk5OTk5OTk5OTk5OTk5OTk5O1xuICAgIH1cbiAgICAjcXVhbmxvZ28gaW1nIHtcbiAgICAgIGhlaWdodDogYXV0bztcbiAgICAgIHdpZHRoOiBhdXRvO1xuICAgIH1cbiAgICAjcXVhbmxvZ28gLmNsb3NlX2J0biB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICB0b3A6IC0xNXB4O1xuICAgICAgcmlnaHQ6IDIwcHg7XG4gICAgICBiYWNrZ3JvdW5kOiB1cmwoXCd7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvbmV3YmFyL3F1YW5sb2dvX2Nsb3NlLnBuZ1wnKSAwcHggMHB4IG5vLXJlcGVhdDtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIGhlaWdodDogMjBweDtcbiAgICAgIHdpZHRoOiAyMHB4O1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIH1cbiAgPC9zdHlsZT5cbjwvZGl2PicKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJKGZ1bmN0aW9uKHQpIHsKCQkJInVzZSBzdHJpY3QiOwoJCQl2YXIgaSA9IG4oMjgpOwoJCQllLmV4cG9ydHMucmVhZHkgPSBmdW5jdGlvbigpIHsKCQkJCXZhciBlID0gWyJ3d3cuYW1hem9uLmNvbSIsICJ3d3cuYW1hem9uLmRlIiwgInd3dy5hbWF6b24uY28uanAiXTsKCQkJCWlmICgtMSAhPSBlLmluZGV4T2YobG9jYXRpb24uaG9zdCkpIHsKCQkJCQl2YXIgbiA9IHsKCQkJCQkJbmFtZTogdC5kcC5uYW1lIHx8ICIiLAoJCQkJCQlwcmljZTogdC5kcC5vbGRQcmljZSB8fCAiMCIKCQkJCQl9OwoJCQkJCWkudHJpZ2dlcih7CgkJCQkJCXR5cGU6ICJnZXRBbWF6b25QcmljZVRyZW5kIiwKCQkJCQkJaW5mbzogSlNPTi5zdHJpbmdpZnkobikKCQkJCQl9KQoJCQkJfQoJCQl9CgkJfSkuY2FsbCh0LCBuKDEpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkidXNlIHN0cmljdCI7CgkJdmFyIGkgPSBuKDExNyksCgkJCWEgPSBuKDI4KSwKCQkJbyA9IHZvaWQgMCwKCQkJciA9IHZvaWQgMCwKCQkJcyA9IGZ1bmN0aW9uKCkgewoJCQkJdmFyIGUgPSB7CgkJCQkJCXR5cGU6ICJqc29uIiwKCQkJCQkJYnJvd3NlcjogImNocm9tZSIsCgkJCQkJCXZlcjogIjYuMSIsCgkJCQkJCXN0eWxlX3Nob3dfdHlwZTogbnVsbCwKCQkJCQkJc3R5bGVfQURJRDogbnVsbCwKCQkJCQkJY3VycmVuY3k6IG51bGwsCgkJCQkJCWxhbmd1YWdlOiAiZW5nbGlzaCIsCgkJCQkJCXI6IC43MTk2OTU5MTM5ODE3NTMxLAoJCQkJCQl1cmw6IGxvY2F0aW9uLmhyZWYKCQkJCQl9LAoJCQkJCXQgPSAidHlwZT0iICsgZS50eXBlICsgIiZicm93c2VyPSIgKyBlLmJyb3dzZXIgKyAiJnZlcj0iICsgZS52ZXIgKyAiJnN0eWxlX3Nob3dfdHlwZT11bmRlZmluZWQmc3R5bGVfQURJRD11bmRlZmluZWQmY3VycmVuY3k9dW5kZWZpbmVkJmxhbmd1YWdlPSIgKyBlLmxhbmd1YWdlICsgIiZyPSIgKyBlLnIgKyAiJnVybD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGxvY2F0aW9uLmhyZWYpOwoJCQkJcmV0dXJuIHQKCQkJfSwKCQkJbCA9IGZ1bmN0aW9uKGUpIHsKCQkJCWZvciAodmFyIHQgPSBmdW5jdGlvbih0KSB7CgkJCQkJZm9yICh2YXIgbiA9IDA7IG4gPCBlLmxlbmd0aCAtIDE7IG4rKykKCQkJCQkJaWYgKHQgPj0gMWUzICogTnVtYmVyKGVbbl0udGltZV91cGRhdGUpICYmIHQgPCAxZTMgKiBOdW1iZXIoZVtuICsgMV0udGltZV91cGRhdGUpKSByZXR1cm4gZVtuXS5wcmljZTsKCQkJCQlyZXR1cm4gZVtlLmxlbmd0aCAtIDFdLnByaWNlCgkJCQl9LCBuID0gMzZlNSwgYSA9IDI0ICogbiwgciA9IE51bWJlcihvLmxvd2VzdF9waWNlLnByaWNlKSwgcyA9IHIsIGwgPSAxZTMgKiBOdW1iZXIoZVswXS50aW1lX3VwZGF0ZSksIGMgPSBuZXcgRGF0ZShsKS5nZXREYXRlKCksIGQgPSBuZXcgRGF0ZShsKS5nZXRNb250aCgpLCBwID0gbmV3IERhdGUobCkuZ2V0RnVsbFllYXIoKSwgaCA9IFtdLCB1ID0gbmV3IERhdGUsIG0gPSBlW2UubGVuZ3RoIC0gMV0ucHJpY2UsIGYgPSAwOyBmIDwgZS5sZW5ndGg7IGYrKykgTnVtYmVyKGVbZl0ucHJpY2UpID4gcyAmJiAocyA9IE51bWJlcihlW2ZdLnByaWNlKSk7CgkJCQlmb3IgKHZhciBnID0gciArICItIiArIHMsIF8gPSBsOyBfIDw9IHUuZ2V0VGltZSgpOykgewoJCQkJCXZhciB4ID0gdChfKTsKCQkJCQloLnB1c2gocGFyc2VGbG9hdCh4KSksIF8gKz0gYQoJCQkJfQoJCQkJdmFyIHcgPSBpLmdldFByaWNlU3RhdHVzTmV3KGgpLAoJCQkJCXYgPSB3LnByaWNlX3N0YXR1cywKCQkJCQliID0gbnVsbDsKCQkJCWgubGVuZ3RoID49IDM2NSAmJiAoYiA9IGguc2xpY2UoaC5sZW5ndGggLSAzNjUpKTsKCQkJCXZhciB5ID0gbnVsbDsKCQkJCWgubGVuZ3RoID49IDMxICYmICh5ID0gaC5zbGljZShoLmxlbmd0aCAtIDMxKSk7CgkJCQl2YXIgayA9IG51bGw7CgkJCQlpZiAoaC5sZW5ndGggPj0gNikgewoJCQkJCXZhciB6ID0gaC5zbGljZShoLmxlbmd0aCAtIDYpOwoJCQkJCWsgPSBbXTsKCQkJCQlmb3IgKHZhciBmID0gMDsgZiA8IHoubGVuZ3RoIC0gMTsgZisrKSB7CgkJCQkJCWZvciAodmFyIEIgPSBbXSwgaiA9IDA7IDI0ID4gajsgaisrKSBCLnB1c2goeltmXSk7CgkJCQkJCWsgPSBrLmNvbmNhdChCKQoJCQkJCX0KCQkJCQlrLnB1c2goelt6Lmxlbmd0aCAtIDFdKQoJCQkJfQoJCQkJdmFyIEMgPSB7CgkJCQkJcHJpY2Vfc3RhdHVzOiB2LAoJCQkJCXN0YXJ0RDogYywKCQkJCQlzdGFydE06IGQsCgkJCQkJc3RhcnRZOiBwLAoJCQkJCW5vd19kYXk6IHUuZ2V0VGltZSgpLAoJCQkJCWV4dHJhOiAic3RhcnQgZnJvbSBhbm90aGVyIiwKCQkJCQlzdG9yZTogW3sKCQkJCQkJY3VycmVudF9wcmljZTogbSwKCQkJCQkJYWxsX2xpbmU6IGgsCgkJCQkJCWFsbF9saW5lX2JlZ2luX3RpbWU6IGwgKyA4ICogbiwKCQkJCQkJeWVhcl9saW5lOiBiLAoJCQkJCQl5ZWFyX2xpbmVfdGltZTogdS5nZXRUaW1lKCkgLSAzNjUgKiBhLAoJCQkJCQltb250aF9saW5lOiB5LAoJCQkJCQltb250aF9saW5lX3RpbWU6IHUuZ2V0VGltZSgpIC0gMzAgKiBhLAoJCQkJCQlzaG9ydF9kYXlfbGluZTogaywKCQkJCQkJc2hvcnRfZGF5X2xpbmVfYmVnaW5fdGltZTogdS5nZXRUaW1lKCkgKyA4ICogbiAtIDUgKiBhLAoJCQkJCQltaW5fc3RhbXA6ICIwIiwKCQkJCQkJaXNsb3dlc3Q6IDAsCgkJCQkJCW5hbWU6ICJhbGlleHByZXNzIiwKCQkJCQkJcHJpY2VfcmFuZ2U6IGcsCgkJCQkJCXByb21vOiBbXSwKCQkJCQkJYWxsX2VxdWFsX3Nob3J0OiAhMQoJCQkJCX1dCgkJCQl9OwoJCQkJcmV0dXJuIEMKCQkJfTsKCQllLmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkgewoJCQl2YXIgZSA9IHMoKTsKCQkJYS5vbihmdW5jdGlvbihlKSB7CgkJCQkiYWxpZXhwcmVzcyIgPT09IGUudHlwZSAmJiAobyA9IEpTT04ucGFyc2UoZS52YWx1ZSksIG8ucHJpY2VfdHJhY2tpbmcgJiYgKG8ucHJpY2VfdHJhY2tpbmcgPSBsKG8ucHJpY2VfdHJhY2tpbmcpLCByICYmIHIoby5wcmljZV90cmFja2luZykpKQoJCQl9KSwgYS50cmlnZ2VyKHsKCQkJCXR5cGU6ICJhbGlleHByZXNzIiwKCQkJCXVybDogImh0dHBzOi8vcGx1Z2luLmFsaXByaWNlLmNvbS9wbHVnaW4vY2hyb21lX3YwNy5waHA/IiArIGUKCQkJfSkKCQl9LCBlLmV4cG9ydHMuZ2V0VHJlbmREYXRhID0gZnVuY3Rpb24oZSkgewoJCQlvID8gZShvKSA6IHIgPSBlCgkJfQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQl2YXIgaTsKCQkoZnVuY3Rpb24oYSwgbykgewoJCQkidXNlIHN0cmljdCI7CgkJCWkgPSBmdW5jdGlvbigpIHsKCQkJCWZ1bmN0aW9uIGUoKSB7CgkJCQkJdmFyIGUgPSAiIiwKCQkJCQkJdCA9IHsKCQkJCQkJCXRhb2JhbzogIua3mOWunSIsCgkJCQkJCQl0bWFsbDogIuWkqeeMqyIsCgkJCQkJCQkiMzYwYnV5IjogIuS6rOS4nOWVhuWfjiIsCgkJCQkJCQkiNTFidXkiOiAi5piT6L+F572RIiwKCQkJCQkJCXN1bmluZzogIuiLj+WugeaYk+i0rSIsCgkJCQkJCQl5aWhhb2RpYW46ICLkuIDlj7flupciLAoJCQkJCQkJZGFuZ2Rhbmc6ICLlvZPlvZPnvZEiLAoJCQkJCQkJZ29tZTogIuWbvee+juWcqOe6vyIsCgkJCQkJCQlsZWZlbmc6ICLkuZDonILnvZEiLAoJCQkJCQkJeGl1OiAi6LWw56eA572RIiwKCQkJCQkJCXBoaWxpcHM6ICLpo57liKnmtaYiLAoJCQkJCQkJdGNsOiAiVENM5ZWG5Z+OIiwKCQkJCQkJCSJlLWNoYW5naG9uZyI6ICLplb/ombnllYbln44iLAoJCQkJCQkJa29ua2E6ICLlurfkvbPllYbln44iLAoJCQkJCQkJaGlzZW5zZTogIua1t+S/oeWVhuWfjiIsCgkJCQkJCQlpbmVpZ286ICLniLHlhoXotK0iLAoJCQkJCQkJc2tnOiAiU0tH5ZWG5Z+OIiwKCQkJCQkJCSJrLXRvdWNoIjogIuWkqeivreaJi+acuuWumOe9kSIsCgkJCQkJCQlnaW9uZWU6ICLph5Hnq4siLAoJCQkJCQkJb3BwbzogIk9QUE8iLAoJCQkJCQkJZ2ZpdmU6ICLln7rkvI3lrpjmlrnllYbln44iLAoJCQkJCQkJdml2bzogInZpdm8iLAoJCQkJCQkJbWVpbGlzaHVvOiAi576O5Li96K+0IiwKCQkJCQkJCW1vZ3VqaWU6ICLomJHoj4fooZciLAoJCQkJCQkJeGlhb21pOiAi5bCP57Gz5a6Y572RIiwKCQkJCQkJCWxlbWFsbDogIuS5kOinhuWVhuWfjiIsCgkJCQkJCQlncmFpbmdlcjogIuWbuuWuieaNt+WumOe9kSIsCgkJCQkJCQlwaWFvOiAi572R5piT55S15b2x56WoIiwKCQkJCQkJCTE2MzogIue9keaYk+WVhuWfjiIsCgkJCQkJCQlkaWFucGluZzogIueCueivhOWboiIsCgkJCQkJCQludW9taTogIueZvuW6puezr+exsyIsCgkJCQkJCQltZWl0dWFuOiAi576O5ZuiIiwKCQkJCQkJCWJvb2t1dTogIuWNmuW6k+aWh+WFtyIsCgkJCQkJCQlib29rc2NoaW5hOiAi5Lit5Zu95Zu+5Lmm572RIiwKCQkJCQkJCTE2ODg6ICLpmL/ph4zlt7Tlt7QiLAoJCQkJCQkJem9sOiAi5Lit5YWz5p2R5ZWG5Z+OIiwKCQkJCQkJCWFtYXpvbjogIuS6mumprOmAiiIsCgkJCQkJCQl0aWFudGlhbjogIuWkqeWkqee9kSIsCgkJCQkJCQl3b21haTogIuaIkeS5sOe9kSIsCgkJCQkJCQl5b3Vnb3U6ICLkvJjotK3nvZEiLAoJCQkJCQkJdm1hbGw6ICLljY7kuLrllYbln44iLAoJCQkJCQkJcGFpeGllOiAi5ouN6Z6L572RIiwKCQkJCQkJCW5ld2VnZzogIuaWsOibi+WVhuWfjiIsCgkJCQkJCQl2YW5jbDogIuWHoeWuouivmuWTgSIKCQkJCQkJfTsKCQkJCQl0cnkgewoJCQkJCQlmb3IgKHZhciBuID0gYS5zaXRlLCBpID0gWyIzNjBidXkiLCAiZ29tZSIsICJzdW5pbmciLCAidGFvYmFvIiwgInlpaGFvZGlhbiIsICJ3b21haSIsICJib29rc2NoaW5hIiwgInBhaXhpZSIsICJib29rdXUiLCAidGlhbnRpYW4iXSwgbyA9IDA7IG8gPCBpLmxlbmd0aDsgbysrKQoJCQkJCQkJaWYgKG4uaW5kZXhPZihpW29dKSA+IC0xKSB7CgkJCQkJCQkJbiA9IGlbb107CgkJCQkJCQkJYnJlYWsKCQkJCQkJCX0KCQkJCQkJZSA9IHRbbl0KCQkJCQl9IGNhdGNoIChyKSB7CgkJCQkJCWlmIChhLmRlYnVnKSB0aHJvdyByCgkJCQkJfQoJCQkJCXJldHVybiAidW5kZWZpbmVkIiA9PSB0eXBlb2YgZSAmJiAoZSA9ICIiKSwgIua3mOWunSIgPT0gZSAmJiB3aW5kb3cubG9jYXRpb24uaG9zdC50b1N0cmluZygpLmluZGV4T2YoInRtYWxsIikgPiAtMSAmJiAoZSA9ICLlpKnnjKsiKSwgZQoJCQkJfQoKCQkJCWZ1bmN0aW9uIHQoZSkgewoJCQkJCXZhciB0ID0gYS5zaXRlLAoJCQkJCQluID0gJChhLnNpdGUpLAoJCQkJCQlpID0gIiI7CgkJCQkJKCJ0YW9iYW8iID09IGEuc2l0ZSB8fCAidG1hbGwiID09IGEuc2l0ZSB8fCBhLnNpdGUuaW5kZXhPZigidGFvYmFvIikgPiAtMSkgJiYgKGkgPSAiMSIpOwoJCQkJCXRyeSB7CgkJCQkJCVMuZ2V0KGEuc2VydmVyICsgIi9hcHAvcHJpY2VfdHJlbmQ/ZHBfaWRzPSIgKyB1ICsgIiZkcF9pZD0iICsgbSArICImc2l0ZT0iICsgdCArICImZGF5cz0iICsgQyArICImaXNfbGlnaHQ9JmlzdGFvYmFvPSIgKyBpICsgIiZwcmljZT0iICsgbikuZG9uZShmdW5jdGlvbih0KSB7CgkJCQkJCQllKHQpCgkJCQkJCX0pLmZhaWwoZnVuY3Rpb24oKSB7CgkJCQkJCQllKCExKQoJCQkJCQl9KQoJCQkJCX0gY2F0Y2ggKG8pIHt9CgkJCQl9CgoJCQkJZnVuY3Rpb24gaSh0KSB7CgkJCQkJaWYgKHQgJiYgdC5saXN0KSB7CgkJCQkJCXZhciBuID0gdm9pZCAwLAoJCQkJCQkJaSA9IHZvaWQgMCwKCQkJCQkJCW8gPSB2b2lkIDAsCgkJCQkJCQlyID0gdm9pZCAwLAoJCQkJCQkJcyA9IHZvaWQgMCwKCQkJCQkJCWwgPSB0Lmxpc3QubGVuZ3RoLAoJCQkJCQkJYyA9IFtdOwoJCQkJCQlyID0gbmV3IERhdGUodC5jdXJUaW1lKS5nZXRUaW1lKCksIGkgPSBvID0gdC5saXN0WzBdLnByaWNlOwoJCQkJCQl0cnkgewoJCQkJCQkJZm9yICh2YXIgZCA9IDA7IGwgPiBkOyBkKyspIHsKCQkJCQkJCQl2YXIgcCA9IHQubGlzdFtkXTsKCQkJCQkJCQljLnB1c2goW25ldyBEYXRlKHAudGltZSkuZ2V0VGltZSgpLCBwLnByaWNlXSksIHAucHJpY2UgPiBvICYmIChvID0gcC5wcmljZSksIHAucHJpY2UgPCBpICYmIChpID0gcC5wcmljZSkKCQkJCQkJCX0KCQkJCQkJCWZvciAodmFyIGQgPSBsIC0gMTsgZCA+IDA7IGQtLSkKCQkJCQkJCQlpZiAoY1tkXVswXSAtIGNbZCAtIDFdWzBdID4gODY0ZTUpIHsKCQkJCQkJCQkJdmFyIGggPSBbY1tkXVswXSAtIDg2NGU1LCBjW2QgLSAxXVsxXV07CgkJCQkJCQkJCWMuc3BsaWNlKGQsIDAsIGgpCgkJCQkJCQkJfQoJCQkJCQkJdmFyIHUgPSBjW2MubGVuZ3RoIC0gMV07CgkJCQkJCQlpZiAodVswXSA8IHIpIHsKCQkJCQkJCQl2YXIgbSA9IHVbMV0sCgkJCQkJCQkJCWYgPSAkKGEuc2l0ZSk7CgkJCQkJCQkJciAtIHVbMF0gPiA4NjRlNSAmJiBjLnB1c2goW3IgLSA4NjRlNSwgbV0pLCBmICYmIG0gIT0gZiAmJiAoZiA+IG8gJiYgKG8gPSBmKSwgaSA+IGYgJiYgKGkgPSBmKSwgYy5wdXNoKFtyLCBmXSkpCgkJCQkJCQl9CgkJCQkJCQl2YXIgZyA9IFIoYyksCgkJCQkJCQkJXyA9IGcucHJpY2Vfc3RhdHVzLAoJCQkJCQkJCXggPSBnLnByaWNlX2xhc3Q7CgkJCQkJCQluID0gZy5pc2xvd2VzdDsKCQkJCQkJCXZhciB3ID0gaSArICItIiArIG8sCgkJCQkJCQkJdiA9IG5ldyBEYXRlKHQuc3RhcnRUaW1lKS5nZXREYXRlKCksCgkJCQkJCQkJYiA9IG5ldyBEYXRlKHQuc3RhcnRUaW1lKS5nZXRNb250aCgpLAoJCQkJCQkJCXkgPSBuZXcgRGF0ZSh0LnN0YXJ0VGltZSkuZ2V0RnVsbFllYXIoKTsKCQkJCQkJCXMgPSB7CgkJCQkJCQkJcHJpY2Vfc3RhdHVzOiBfLAoJCQkJCQkJCXN0YXJ0RDogdiwKCQkJCQkJCQlzdGFydE06IGIsCgkJCQkJCQkJc3RhcnRZOiB5LAoJCQkJCQkJCXN0b3JlOiBbewoJCQkJCQkJCQljdXJyZW50X3ByaWNlOiB4LAoJCQkJCQkJCQlkYXRhOiBjLAoJCQkJCQkJCQltaW5fc3RhbXA6ICIwIiwKCQkJCQkJCQkJaXNsb3dlc3Q6IG4sCgkJCQkJCQkJCW5hbWU6IGUoKSwKCQkJCQkJCQkJcHJpY2VfcmFuZ2U6IHcKCQkJCQkJCQl9XQoJCQkJCQkJfQoJCQkJCQl9IGNhdGNoIChrKSB7fQoJCQkJCQlyZXR1cm4gcwoJCQkJCX0KCQkJCX0KCgkJCQlmdW5jdGlvbiByKGUpIHsKCQkJCQlyZXR1cm4gcGFyc2VJbnQoZSkgPiA5OTk5OTkgPyBwYXJzZUludChlKSA6IHBhcnNlRmxvYXQoZSkudG9GaXhlZCgxKQoJCQkJfQoKCQkJCWZ1bmN0aW9uIHMoZSkgewoJCQkJCWlmICgidGFvYmFvIiAhPSBhLnNpdGUgJiYgMCA9PSBlLnN0b3JlLmxlbmd0aCwgZS5zdG9yZS5sZW5ndGggPiAwKSB7CgkJCQkJCVcoZSksICJib3R0b20iID09PSBhLnN0eWxlID8gSChlKSA6IChrKCIjIiArIGEuZXh0TmFtZSArICItdHJlbmQgLnByaWNlLXRyZW5kLWljb24iKS5zaG93KCksIGsoIiMiICsgYS5leHRCcmFuZCArICJfcHJpY2VfaGlzdG9yeV9idG4gLnByaWNlLXRyZW5kLWljb24iKS5zaG93KCksIDAgPT0gZS5wcmljZV9zdGF0dXMgPyAoaygiIyIgKyBhLmV4dE5hbWUgKyAiLXRyZW5kIC5wcmljZS10cmVuZC1pY29uIikuY3NzKCJtYXJnaW4tdG9wIiwgIjdweCIpLCBrKCIjIiArIGEuZXh0TmFtZSArICItdHJlbmQgLnByaWNlLXRyZW5kLWljb24iKS5jc3MoImJhY2tncm91bmQtcG9zaXRpb24iLCAiLTE4OXB4IC0zMXB4IiksIGsoIiMiICsgYS5leHROYW1lICsgIi10cmVuZC10ZXh0IikuY3NzKCJjb2xvciIsICIjZmY5MDAwIikuaHRtbCgi5Lu35qC85bmz56izIikpIDogMSA9PSBlLnByaWNlX3N0YXR1cyA/IChrKCIjIiArIGEuZXh0TmFtZSArICItdHJlbmQgLnByaWNlLXRyZW5kLWljb24iKS5jc3MoIm1hcmdpbi10b3AiLCAiNnB4IiksIGsoIiMiICsgYS5leHROYW1lICsgIi10cmVuZCAucHJpY2UtdHJlbmQtaWNvbiIpLmNzcygiYmFja2dyb3VuZC1wb3NpdGlvbiIsICItMjIycHggLTMxcHgiKSwgaygiIyIgKyBhLmV4dE5hbWUgKyAiLXRyZW5kLXRleHQiKS5jc3MoImNvbG9yIiwgIiNkODAwMDEiKS5odG1sKCLku7fmoLzkuIrmtqgiKSkgOiAoaygiIyIgKyBhLmV4dE5hbWUgKyAiLXRyZW5kIC5wcmljZS10cmVuZC1pY29uIikuY3NzKCJtYXJnaW4tdG9wIiwgIjRweCIpLCBBKGUpIHx8IGUuc3RvcmVbMF0uaXNsb3dlc3QgPyAoaygiIyIgKyBhLmV4dE5hbWUgKyAiLXRyZW5kIC5wcmljZS10cmVuZC1pY29uIikuY3NzKCJiYWNrZ3JvdW5kLXBvc2l0aW9uIiwgIi0yNTRweCAtMzFweCIpLCBrKCIjIiArIGEuZXh0TmFtZSArICItdHJlbmQtdGV4dCIpLmNzcygiY29sb3IiLCAiIzAwQTY2QyIpLmh0bWwoIuWOhuWPsuacgOS9jiIpKSA6IChrKCIjIiArIGEuZXh0TmFtZSArICItdHJlbmQgLnByaWNlLXRyZW5kLWljb24iKS5jc3MoImJhY2tncm91bmQtcG9zaXRpb24iLCAiLTI1NHB4IC0zMXB4IiksIGsoIiMiICsgYS5leHROYW1lICsgIi10cmVuZC10ZXh0IikuY3NzKCJjb2xvciIsICIjMDBBNjZDIikuaHRtbCgi5Lu35qC85LiL6ZmNIikpKSksIGsoIiMiICsgYS5leHROYW1lICsgIi10cmVuZCIpLnNob3coKSwgaygiIyIgKyBhLmV4dE5hbWUgKyAiLXRyZW5kLWN1cnJlbnQtcHJpY2UiKS5odG1sKGIocGFyc2VGbG9hdChlLnN0b3JlWzBdLmN1cnJlbnRfcHJpY2UpKSksIHcgJiYgKGsoIiMiICsgYS5leHROYW1lICsgIi10cmVuZC1jdXJyZW50LXByaWNlIikuaHRtbChiKHBhcnNlRmxvYXQoei5nZXRQcmljZUJlZm9yZUV4Y2hhbmdlUmF0ZShhLmRwLm9sZFByaWNlKSkpKSwgInd3dy5hbWF6b24uY28uanAiID09IGxvY2F0aW9uLmhvc3QgJiYgaygiIyIgKyBhLmV4dE5hbWUgKyAiLXRyZW5kLWN1cnJlbnQtcHJpY2UiKS5odG1sKGIocGFyc2VGbG9hdCh6LmdldFByaWNlQmVmb3JlRXhjaGFuZ2VSYXRlKGEuZHAub2xkUHJpY2UpKSkgKyAi5pel5YWDIikpOwoJCQkJCQl2YXIgdCA9IGUuc3RvcmVbMF0ucHJpY2VfcmFuZ2Uuc3BsaXQoIi0iKSwKCQkJCQkJCW4gPSBiKHBhcnNlRmxvYXQodFswXSkpICsgIi0iICsgYihwYXJzZUZsb2F0KHRbMV0pKTsKCQkJCQkJaygiIyIgKyBhLmV4dE5hbWUgKyAiLXRyZW5kLXByaS1yYW5nZSIpLmh0bWwobiksICJ3d3cuYW1hem9uLmNvLmpwIiA9PSBsb2NhdGlvbi5ob3N0ICYmIGsoIiMiICsgYS5leHROYW1lICsgIi10cmVuZC1wcmktcmFuZ2UiKS5odG1sKG4gKyAi5pel5YWDIiksIGsoIiMiICsgYS5leHROYW1lICsgIi1wcmktdHJlbmQtY2hhcnQiKS5jc3MoIndpZHRoIiwgYS53aWR0aCAtIDQwMCksIGsoIiMiICsgYS5leHROYW1lICsgIi10cmVuZC1kZXRhaWwgLnJlbWluZCIpLmNzcygibGVmdCIsIGEud2lkdGggLSAzNzkpLCBrKCIjIiArIGEuZXh0TmFtZSArICItcmVtaW5kLWJ0biIpLmNsaWNrKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCWUucHJldmVudERlZmF1bHQoKSwgaygiLnJlbWluZC1lcnJvciIpLmhpZGUoKTsKCQkJCQkJCXZhciB0ID0gL15bXHctXSsoXC5bXHctXSspKkBbXHctXSsoXC5bXHctXSspKyQvLAoJCQkJCQkJCW4gPSAxLAoJCQkJCQkJCWkgPSAwLAoJCQkJCQkJCW8gPSBrKCIjIiArIGEuZXh0TmFtZSArICItcmVtaW5kLWVtYWlsIikudmFsKCksCgkJCQkJCQkJciA9IGEubm93X2RwX2lkOwoJCQkJCQkJaygiIyIgKyBhLmV4dE5hbWUgKyAiLXByaS1ub3RpY2UtaW0iKS5hdHRyKCJjaGVja2VkIikgPyBuID0gMSA6IGsoIiMiICsgYS5leHROYW1lICsgIi1wcmktbm90aWNlLWxpIikuYXR0cigiY2hlY2tlZCIpICYmIChuID0gMiwgaSA9IHBhcnNlRmxvYXQoaygiIyIgKyBhLmV4dE5hbWUgKyAiLXByaS1saW1pdCIpLnZhbCgpKSksIHQudGVzdChvKSA/IFMuZ2V0KGEuc2VydmVyICsgIi9icndleHQvcmVtaW5kP2FjdGlvbj1hZGQmZHBfaWQ9IiArIHIgKyAiJmVtYWlsPSIgKyBlbmNvZGVVUklDb21wb25lbnQobykgKyAiJnR5cGU9IiArIG4gKyAiJnByaWNlPSIgKyBpKS5kb25lKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQkxID09IGUuY29kZSA/IGsoIiMiICsgYS5leHROYW1lICsgIi1yZW1pbmQtZXJyb3IyIikuc2hvdygpIDogMiA9PSBlLmNvZGUgPyBrKCIjIiArIGEuZXh0TmFtZSArICItcmVtaW5kLWVycm9yMyIpLnNob3coKSA6IGsoIiMiICsgYS5leHROYW1lICsgIi1yZW1pbmQtZXJyb3IxIikuc2hvdygpCgkJCQkJCQl9KSA6IGsoIiMiICsgYS5leHROYW1lICsgIi1yZW1pbmQtZXJyb3IwIikuc2hvdygpCgkJCQkJCX0pLCAiIiAhPSBhLmVtYWlsICYmIGsoIiMiICsgYS5leHROYW1lICsgIi1yZW1pbmQtZW1haWwiKS52YWwoYS5lbWFpbCksIChhLklFNiB8fCBhLklFNykgJiYgImFtYXpvbiIgPT0gYS5zaXRlICYmIGsoIiMiICsgYS5leHROYW1lICsgIi1yZW1pbmQtZW1haWwiKS5oZWlnaHQoMjgpCgkJCQkJfQoJCQkJfQoKCQkJCWZ1bmN0aW9uIGwoZSkgewoJCQkJCWlmICgidGFvYmFvIiAhPSBhLnNpdGUgJiYgMCA9PSBlLnN0b3JlLmxlbmd0aCwgZS5zdG9yZS5sZW5ndGggPiAwKSB7CgkJCQkJCVcoZSksIGsoIiMiICsgYS5leHROYW1lICsgIi10cmVuZCAucHJpY2UtdHJlbmQtaWNvbiIpLmNzcygibWFyZ2luLXRvcCIsICI0cHgiKSwgaygiIyIgKyBhLmV4dE5hbWUgKyAiLXRyZW5kIC5wcmljZS10cmVuZC1pY29uIikuc2hvdygpLCBrKCIjIiArIGEuZXh0QnJhbmQgKyAiX3ByaWNlX2hpc3RvcnlfYnRuIC5wcmljZS10cmVuZC1pY29uIikuc2hvdygpLCAwID09IGUucHJpY2Vfc3RhdHVzID8gKGsoIiMiICsgYS5leHROYW1lICsgIi10cmVuZCAucHJpY2UtdHJlbmQtaWNvbiIpLmNzcygiYmFja2dyb3VuZC1wb3NpdGlvbiIsICItMTUxcHggMXB4IiksIGsoIiMiICsgYS5leHROYW1lICsgIi10cmVuZC10ZXh0IikuY3NzKCJjb2xvciIsICIjZmY5MDAwIikuaHRtbCgi5Lu35qC85bmz56izIikpIDogMSA9PSBlLnByaWNlX3N0YXR1cyA/IChrKCIjIiArIGEuZXh0TmFtZSArICItdHJlbmQgLnByaWNlLXRyZW5kLWljb24iKS5jc3MoImJhY2tncm91bmQtcG9zaXRpb24iLCAiLTEyOHB4IDFweCIpLCBrKCIjIiArIGEuZXh0TmFtZSArICItdHJlbmQtdGV4dCIpLmNzcygiY29sb3IiLCAiI2Q4MDAwMSIpLmh0bWwoIuS7t+agvOS4iua2qCIpKSA6IEEoZSwgITApIHx8IGUuc3RvcmVbMF0uaXNsb3dlc3QgPyAoaygiIyIgKyBhLmV4dE5hbWUgKyAiLXRyZW5kIC5wcmljZS10cmVuZC1pY29uIikuY3NzKCJiYWNrZ3JvdW5kLXBvc2l0aW9uIiwgIi0xMDVweCAxcHgiKSwgaygiIyIgKyBhLmV4dE5hbWUgKyAiLXRyZW5kLXRleHQiKS5jc3MoImNvbG9yIiwgIiMwMEE2NkMiKS5odG1sKCLljoblj7LmnIDkvY4iKSkgOiAoaygiIyIgKyBhLmV4dE5hbWUgKyAiLXRyZW5kIC5wcmljZS10cmVuZC1pY29uIikuY3NzKCJiYWNrZ3JvdW5kLXBvc2l0aW9uIiwgIi0xMDVweCAxcHgiKSwgaygiIyIgKyBhLmV4dE5hbWUgKyAiLXRyZW5kLXRleHQiKS5jc3MoImNvbG9yIiwgIiMwMEE2NkMiKS5odG1sKCLku7fmoLzkuIvpmY0iKSksIGsoIiMiICsgYS5leHROYW1lICsgIi10cmVuZCIpLnNob3coKSwgaygiIyIgKyBhLmV4dE5hbWUgKyAiLXRyZW5kLWN1cnJlbnQtcHJpY2UiKS5odG1sKGUuc3RvcmVbMF0uY3VycmVudF9wcmljZSksIGsoIiMiICsgYS5leHROYW1lICsgIi10cmVuZC1wcmktcmFuZ2UiKS5odG1sKGUuc3RvcmVbMF0ucHJpY2VfcmFuZ2UpOwoJCQkJCQlmb3IgKHZhciB0ID0gewoJCQkJCQkJY2hhcnQ6IHsKCQkJCQkJCQlyZW5kZXJUbzogYS5leHROYW1lICsgIi1wcmktdHJlbmQtY2hhcnQiLAoJCQkJCQkJCXR5cGU6ICJsaW5lIiwKCQkJCQkJCQltYXJnaW5SaWdodDogMTMwLAoJCQkJCQkJCW1hcmdpbkJvdHRvbTogMjUKCQkJCQkJCX0sCgkJCQkJCQljcmVkaXRzOiB7CgkJCQkJCQkJZW5hYmxlZDogITEKCQkJCQkJCX0sCgkJCQkJCQljb2xvcnM6IFsiIzdjYjVlYyIsICIjNDM0MzQ4IiwgIiM5MGVkN2QiLCAiI2Y3YTM1YyIsICIjODA4NWU5IiwgIiNmMTVjODAiLCAiI2U0ZDM1NCIsICIjODA4NWU4IiwgIiM4ZDQ2NTMiLCAiIzkxZThlMSJdLAoJCQkJCQkJdGl0bGU6IHsKCQkJCQkJCQl0ZXh0OiAi5ZWG5Z+O5pyA6L+RIiArIEMgKyAi5aSp5Lu35qC86LaL5Yq/IiwKCQkJCQkJCQl4OiAtMjAsCgkJCQkJCQkJc3R5bGU6IHsKCQkJCQkJCQkJY29sb3I6ICIjNjY2IgoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl4QXhpczogewoJCQkJCQkJCXR5cGU6ICJkYXRldGltZSIsCgkJCQkJCQkJZGF0ZVRpbWVMYWJlbEZvcm1hdHM6IHsKCQkJCQkJCQkJZGF5OiAiJW0tJWQiLAoJCQkJCQkJCQl3ZWVrOiAiJW0tJWQiLAoJCQkJCQkJCQltb250aDogIiVtLSVkIgoJCQkJCQkJCX0sCgkJCQkJCQkJbWlub3JHcmlkTGluZUNvbG9yOiAiI2RmZGZkZiIKCQkJCQkJCX0sCgkJCQkJCQl5QXhpczogewoJCQkJCQkJCXRpdGxlOiB7CgkJCQkJCQkJCXRleHQ6ICIiCgkJCQkJCQkJfSwKCQkJCQkJCQlwbG90TGluZXM6IFt7CgkJCQkJCQkJCXZhbHVlOiAwLAoJCQkJCQkJCQl3aWR0aDogMSwKCQkJCQkJCQkJY29sb3I6ICIjODA4MDgwIgoJCQkJCQkJCX1dLAoJCQkJCQkJCWdyaWRMaW5lQ29sb3I6ICIjYzBkMGUwIiwKCQkJCQkJCQltaW5vckdyaWRMaW5lQ29sb3I6ICIjZGZkZmRmIiwKCQkJCQkJCQl0aWNrUGl4ZWxJbnRlcnZhbDogNTAKCQkJCQkJCX0sCgkJCQkJCQl0b29sdGlwOiB7CgkJCQkJCQkJeERhdGVGb3JtYXQ6ICIlWS0lbS0lZCAlSDolTTolUyIsCgkJCQkJCQkJc2hhcmVkOiAhMAoJCQkJCQkJfSwKCQkJCQkJCXBsb3RPcHRpb25zOiB7CgkJCQkJCQkJc2VyaWVzOiB7CgkJCQkJCQkJCW1hcmtlcjogewoJCQkJCQkJCQkJcmFkaXVzOiAzCgkJCQkJCQkJCX0sCgkJCQkJCQkJCXNoYWRvdzogITEKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJbGVnZW5kOiB7CgkJCQkJCQkJZW5hYmxlZDogITAsCgkJCQkJCQkJbGF5b3V0OiAidmVydGljYWwiLAoJCQkJCQkJCWFsaWduOiAicmlnaHQiLAoJCQkJCQkJCXZlcnRpY2FsQWxpZ246ICJ0b3AiLAoJCQkJCQkJCXdpZHRoOiAxMDAsCgkJCQkJCQkJYm9yZGVyV2lkdGg6IDAsCgkJCQkJCQkJeDogLTIwLAoJCQkJCQkJCXk6IDIwCgkJCQkJCQl9LAoJCQkJCQkJc2VyaWVzOiBbXQoJCQkJCQl9LCBuID0gZS5zdG9yZS5sZW5ndGgsIGkgPSAwOyBuID4gaTsgaSsrKSB7CgkJCQkJCQl2YXIgciA9IGUuc3RvcmVbaV07CgkJCQkJCQlpZiAodC5zZXJpZXNbaV0gPSB7CgkJCQkJCQkJdmlzaWJsZTogITEsCgkJCQkJCQkJbmFtZTogci5uYW1lLAoJCQkJCQkJCXBvaW50U3RhcnQ6IERhdGUuVVRDKGUuc3RhcnRZLCBlLnN0YXJ0TSwgZS5zdGFydEQpLAoJCQkJCQkJCXBvaW50SW50ZXJ2YWw6IDg2NGU1LAoJCQkJCQkJCWRhdGE6IFtdCgkJCQkJCQl9LCAwID09IGkgJiYgKHQuc2VyaWVzW2ldLnZpc2libGUgPSAhMCksIHIuZGF0YS5sZW5ndGggPiAwKQoJCQkJCQkJCWZvciAodmFyIHMgPSByLmRhdGEubGVuZ3RoLCBsID0gci5kYXRhLCBjID0gMDsgcyA+IGM7IGMrKykgewoJCQkJCQkJCQl2YXIgZCA9IG5ldyBBcnJheSgyKTsKCQkJCQkJCQkJZFswXSA9IHBhcnNlSW50KGxbY11bMF0pLCBkWzFdID0gcGFyc2VGbG9hdChsW2NdWzFdKSwgdC5zZXJpZXNbaV0uZGF0YS5wdXNoKGQpCgkJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCWsoIiMiICsgYS5leHROYW1lICsgIi1wcmktdHJlbmQtY2hhcnQiKS5jc3MoIndpZHRoIiwgYS53aWR0aCAtIDMwMCksIGsoIiMiICsgYS5leHROYW1lICsgIi10cmVuZC1kZXRhaWwgLnJlbWluZCIpLmNzcygibGVmdCIsIGEud2lkdGggLSAyNzkpLCBrKCIjIiArIHQuY2hhcnQucmVuZGVyVG8pLmxlbmd0aCAmJiBuZXcgby5DaGFydCh0KSwgaygiIyIgKyBhLmV4dE5hbWUgKyAiLXJlbWluZC1idG4iKS5jbGljayhmdW5jdGlvbihlKSB7CgkJCQkJCQllLnByZXZlbnREZWZhdWx0KCksIGsoIi5yZW1pbmQtZXJyb3IiKS5oaWRlKCk7CgkJCQkJCQl2YXIgdCA9IC9eW1x3LV0rKFwuW1x3LV0rKSpAW1x3LV0rKFwuW1x3LV0rKSskLywKCQkJCQkJCQluID0gMSwKCQkJCQkJCQlpID0gMCwKCQkJCQkJCQlvID0gaygiIyIgKyBhLmV4dE5hbWUgKyAiLXJlbWluZC1lbWFpbCIpLnZhbCgpLAoJCQkJCQkJCXIgPSBhLm5vd19kcF9pZDsKCQkJCQkJCWsoIiMiICsgYS5leHROYW1lICsgIi1wcmktbm90aWNlLWltIikuYXR0cigiY2hlY2tlZCIpID8gbiA9IDEgOiBrKCIjIiArIGEuZXh0TmFtZSArICItcHJpLW5vdGljZS1saSIpLmF0dHIoImNoZWNrZWQiKSAmJiAobiA9IDIsIGkgPSBwYXJzZUZsb2F0KGsoIiMiICsgYS5leHROYW1lICsgIi1wcmktbGltaXQiKS52YWwoKSkpLCB0LnRlc3QobykgPyBTLmdldChhLnNlcnZlciArICIvYnJ3ZXh0L3JlbWluZD9hY3Rpb249YWRkJmRwX2lkPSIgKyByICsgIiZlbWFpbD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KG8pICsgIiZ0eXBlPSIgKyBuICsgIiZwcmljZT0iICsgaSkuZG9uZShmdW5jdGlvbihlKSB7CgkJCQkJCQkJMSA9PSBlLmNvZGUgPyBrKCIjIiArIGEuZXh0TmFtZSArICItcmVtaW5kLWVycm9yMiIpLnNob3coKSA6IDIgPT0gZS5jb2RlID8gaygiIyIgKyBhLmV4dE5hbWUgKyAiLXJlbWluZC1lcnJvcjMiKS5zaG93KCkgOiBrKCIjIiArIGEuZXh0TmFtZSArICItcmVtaW5kLWVycm9yMSIpLnNob3coKQoJCQkJCQkJfSkgOiBrKCIjIiArIGEuZXh0TmFtZSArICItcmVtaW5kLWVycm9yMCIpLnNob3coKQoJCQkJCQl9KSwgIiIgIT0gYS5lbWFpbCAmJiBrKCIjIiArIGEuZXh0TmFtZSArICItcmVtaW5kLWVtYWlsIikudmFsKGEuZW1haWwpLCAoYS5JRTYgfHwgYS5JRTcpICYmICJhbWF6b24iID09IGEuc2l0ZSAmJiBrKCIjIiArIGEuZXh0TmFtZSArICItcmVtaW5kLWVtYWlsIikuaGVpZ2h0KDI4KQoJCQkJCX0KCQkJCX0KCgkJCQlmdW5jdGlvbiBjKGUsIHQpIHsKCQkJCQlpZiAoIShhLnNpdGUuaW5kZXhPZigidGFvYmFvIikgPiAtMSB8fCBhLnNpdGUuaW5kZXhPZigidG1hbGwiKSA+IC0xKSkgewoJCQkJCQl2YXIgaSA9IG4oMTQ1KSwKCQkJCQkJCW8gPSBuKDE0NiksCgkJCQkJCQlzID0gW107CgkJCQkJCWEuc2F2ZV9kcF9xdWVyeSAmJiBhLnNhdmVfZHBfcXVlcnkuYjJjICYmIGEuc2F2ZV9kcF9xdWVyeS5iMmMuc3RvcmUgJiYgKHMgPSBhLnNhdmVfZHBfcXVlcnkuYjJjLnN0b3JlKTsKCQkJCQkJZm9yICh2YXIgbCA9IGsoIiN0cmVuZF9kZXRhaWxfYm9keV91bCIpLCBjID0gW10sIGQgPSBzLmxlbmd0aCwgcCA9IFsxLCAxMDMsIDEwOCwgMTIzLCAxMjQsIDEyNiwgMTI5LCAxMzQsIDEzNiwgMTQsIDE0MSwgMTUsIDE2NywgMTY4LCAxOSwgMiwgMjEsIDI1LCAyNiwgMjgsIDMsIDMxLCAzNCwgMzUsIDQxLCA2LCA2NiwgNywgODYsIDkzLCA5XSwgaCA9IDA7IGggPCBzLmxlbmd0aCAmJiA2ID4gaDsgaCsrKSB7CgkJCQkJCQl2YXIgdSA9IHNbaF0ucHJvZHVjdCAmJiBzW2hdLnByb2R1Y3RbMF0gfHwgc1toXSwKCQkJCQkJCQltID0gdS5kcF9pZCB8fCAiIiwKCQkJCQkJCQlmID0gbS5tYXRjaCgvWzAtOV0rLShbMC05XSspLyk7CgkJCQkJCQlmID0gZiAmJiBmWzFdOwoJCQkJCQkJdmFyIGcgPSBwLmluZGV4T2YoTnVtYmVyKGYpKSA+IC0xID8gIi5wbmciIDogIi5pY28iOwoJCQkJCQkJZiAmJiAodS5wcmljZSA9IHIodS5wcmljZS5yZXBsYWNlKC8sL2csICIiKSksIHUuaWNvdXJsID0gYS5zX3NlcnZlciArICIvaW1hZ2VzL2Zhdmljb24vIiArIGYgKyBnLCBjLnB1c2godSkpCgkJCQkJCX0KCQkJCQkJdmFyIF8gPSAi5YW25LuWIiArIGQgKyAi5a625oql5Lu3IjsKCQkJCQkJMCA9PT0gYy5sZW5ndGggPyBfID0gIuaaguaXoOWVhuWfjuavlOS7tyIgOiBjWzBdLnByaWNlIDwgTnVtYmVyKGUuc3RvcmVbMF0uY3VycmVudF9wcmljZSkgJiYgKF8gPSAi5pu05L2O5Lu377yaIiArIGNbMF0ucHJpY2UpLCBsLmFwcGVuZChqLmNvbXBpbGUoaSkoewoJCQkJCQkJZGF0YTogYywKCQkJCQkJCWFsbExpbms6IGEuY19zZXJ2ZXIgKyAiL2RwIiArIGEubm93X2RwX2lkLAoJCQkJCQkJc3RvcmVTaXplOiBkCgkJCQkJCX0pKSwgaygiLnRyZW5kLWNvbS1taW5pIikuYXBwZW5kKGouY29tcGlsZShvKSh7CgkJCQkJCQlkYXRhOiBjLAoJCQkJCQkJYWxsTGluazogYS5jX3NlcnZlciArICIvZHAiICsgYS5ub3dfZHBfaWQsCgkJCQkJCQlzdG9yZVNpemU6IGQKCQkJCQkJfSkpLCBrKCIjZ3dkX21pbmlfY29tcGFyZSIpLnNob3coKSwgMCA9PT0gYy5sZW5ndGggJiYgaygiI2d3ZF9taW5pX2NvbXBhcmUiKS5hZGRDbGFzcygibm8tY29tLWluZm8iKS5vZmYoKSwgaygiI2d3ZF9taW5pX2NvbXBhcmUgLm1pbi1jb20tYm94IHNwYW4iKS50ZXh0KF8pCgkJCQkJfQoJCQkJfQoKCQkJCWZ1bmN0aW9uIGQodCwgbiwgaSkgewoJCQkJCWlmICh0LnN0b3JlLmxlbmd0aCA+IDAgJiYgaygiIyIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF90cmVuZF9kZXRhaWwiKS5sZW5ndGggPiAwKSB7CgkJCQkJCWEuc2hvd01pbmlUcmVuZCA9ICEwLCAwID09IHQucHJpY2Vfc3RhdHVzID8gKGsoIiMiICsgYS5leHRCcmFuZCArICJfcHJpY2VfaGlzdG9yeV9idG4gLnByaWNlLXRyZW5kLWljb24iKS5hZGRDbGFzcygicHJpY2UtdHJlbmQtaWNvbi1zb2x3IiksIGsoIiMiICsgYS5leHRCcmFuZCArICJfcHJpY2VfaGlzdG9yeV9idG4gc3BhbiIpLmNzcygiY29sb3IiLCAiI2ZmOTAwMCIpLmh0bWwoIuS7t+agvOW5s+eosyIpKSA6IDEgPT0gdC5wcmljZV9zdGF0dXMgPyAoaygiIyIgKyBhLmV4dEJyYW5kICsgIl9wcmljZV9oaXN0b3J5X2J0biAucHJpY2UtdHJlbmQtaWNvbiIpLmFkZENsYXNzKCJwcmljZS10cmVuZC1pY29uLXVwIiksIGsoIiMiICsgYS5leHRCcmFuZCArICJfcHJpY2VfaGlzdG9yeV9idG4gc3BhbiIpLmNzcygiY29sb3IiLCAiI2Q4MDAwMSIpLmh0bWwoIuS7t+agvOS4iua2qCIpKSA6IEEodCwgITApIHx8IHQuc3RvcmVbMF0uaXNsb3dlc3QgPyAoaygiIyIgKyBhLmV4dEJyYW5kICsgIl9wcmljZV9oaXN0b3J5X2J0biAucHJpY2UtdHJlbmQtaWNvbiIpLmFkZENsYXNzKCJwcmljZS10cmVuZC1pY29uLWRvd24iKSwgaygiIyIgKyBhLmV4dEJyYW5kICsgIl9wcmljZV9oaXN0b3J5X2J0biBzcGFuIikuY3NzKCJjb2xvciIsICIjMDBBNjZDIikuaHRtbCgi5Y6G5Y+y5pyA5L2OIikpIDogKGsoIiMiICsgYS5leHRCcmFuZCArICJfcHJpY2VfaGlzdG9yeV9idG4gLnByaWNlLXRyZW5kLWljb24iKS5hZGRDbGFzcygicHJpY2UtdHJlbmQtaWNvbi1kb3duIiksIGsoIiMiICsgYS5leHRCcmFuZCArICJfcHJpY2VfaGlzdG9yeV9idG4gc3BhbiIpLmNzcygiY29sb3IiLCAiIzAwQTY2QyIpLmh0bWwoIuS7t+agvOS4i+mZjSIpKSwgaygiLnByaWNlLXRyZW5kLWljb24iKS5zaG93KCk7CgkJCQkJCXZhciByID0gewoJCQkJCQkJCWNoYXJ0OiB7CgkJCQkJCQkJCXJlbmRlclRvOiBhLmV4dEJyYW5kICsgIl93aXNobGlzdF90cmVuZF9kZXRhaWxfY2hhcnQiLAoJCQkJCQkJCQl3aWR0aDogaS53aWR0aCwKCQkJCQkJCQkJaGVpZ2h0OiBpLmhlaWdodCwKCQkJCQkJCQkJdHlwZTogImxpbmUiCgkJCQkJCQkJfSwKCQkJCQkJCQljcmVkaXRzOiB7CgkJCQkJCQkJCWVuYWJsZWQ6ICExCgkJCQkJCQkJfSwKCQkJCQkJCQljb2xvcnM6IFsiIzU3YjJlYyJdLAoJCQkJCQkJCXRpdGxlOiB7CgkJCQkJCQkJCXRleHQ6IGUoKSArICIg6L+RMTgw5aSp5Lu35qC86LaL5Yq/IiwKCQkJCQkJCQkJc3R5bGU6IHsKCQkJCQkJCQkJCWNvbG9yOiAiIzY2NiIsCgkJCQkJCQkJCQlmb250U2l6ZTogbgoJCQkJCQkJCQl9CgkJCQkJCQkJfSwKCQkJCQkJCQl4QXhpczogewoJCQkJCQkJCQl0eXBlOiAiZGF0ZXRpbWUiLAoJCQkJCQkJCQlkYXRlVGltZUxhYmVsRm9ybWF0czogewoJCQkJCQkJCQkJZGF5OiAiJW0tJWQiLAoJCQkJCQkJCQkJd2VlazogIiVtLSVkIiwKCQkJCQkJCQkJCW1vbnRoOiAiJW0tJWQiCgkJCQkJCQkJCX0sCgkJCQkJCQkJCW1pbm9yR3JpZExpbmVDb2xvcjogIiNkZmRmZGYiLAoJCQkJCQkJCQlsYWJlbHM6IHsKCQkJCQkJCQkJCXN0eWxlOiB7CgkJCQkJCQkJCQkJY29sb3I6ICIjOTk5IgoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9CgkJCQkJCQkJfSwKCQkJCQkJCQl5QXhpczogewoJCQkJCQkJCQl0aXRsZTogewoJCQkJCQkJCQkJdGV4dDogIiIKCQkJCQkJCQkJfSwKCQkJCQkJCQkJcGxvdExpbmVzOiBbewoJCQkJCQkJCQkJdmFsdWU6IDAsCgkJCQkJCQkJCQl3aWR0aDogMSwKCQkJCQkJCQkJCWNvbG9yOiAiIzgwODA4MCIKCQkJCQkJCQkJfV0sCgkJCQkJCQkJCWdyaWRMaW5lQ29sb3I6ICIjYzBkMGUwIiwKCQkJCQkJCQkJbWlub3JHcmlkTGluZUNvbG9yOiAiI2RmZGZkZiIsCgkJCQkJCQkJCXRpY2tQaXhlbEludGVydmFsOiA1MCwKCQkJCQkJCQkJbGFiZWxzOiB7CgkJCQkJCQkJCQlzdHlsZTogewoJCQkJCQkJCQkJCWNvbG9yOiAiIzk5OSIKCQkJCQkJCQkJCX0KCQkJCQkJCQkJfQoJCQkJCQkJCX0sCgkJCQkJCQkJdG9vbHRpcDogewoJCQkJCQkJCQl4RGF0ZUZvcm1hdDogIiVZLSVtLSVkIiwKCQkJCQkJCQkJc2hhcmVkOiAhMAoJCQkJCQkJCX0sCgkJCQkJCQkJcGxvdE9wdGlvbnM6IHsKCQkJCQkJCQkJc2VyaWVzOiB7CgkJCQkJCQkJCQltYXJrZXI6IHsKCQkJCQkJCQkJCQlyYWRpdXM6IDEKCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQlzaGFkb3c6ICExLAoJCQkJCQkJCQkJc3RhdGVzOiB7CgkJCQkJCQkJCQkJaG92ZXI6IHsKCQkJCQkJCQkJCQkJbGluZVdpZHRoOiAyCgkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9CgkJCQkJCQkJfSwKCQkJCQkJCQlsZWdlbmQ6IHsKCQkJCQkJCQkJZW5hYmxlZDogITEsCgkJCQkJCQkJCWxheW91dDogInZlcnRpY2FsIiwKCQkJCQkJCQkJYWxpZ246ICJyaWdodCIsCgkJCQkJCQkJCXZlcnRpY2FsQWxpZ246ICJ0b3AiLAoJCQkJCQkJCQlib3JkZXJXaWR0aDogMCwKCQkJCQkJCQkJeTogMjAKCQkJCQkJCQl9LAoJCQkJCQkJCXNlcmllczogW3sKCQkJCQkJCQkJdmlzaWJsZTogITAsCgkJCQkJCQkJCXBvaW50U3RhcnQ6IERhdGUuVVRDKHQuc3RhcnRZLCB0LnN0YXJ0TSwgdC5zdGFydEQpLAoJCQkJCQkJCQlwb2ludEludGVydmFsOiA4NjRlNSwKCQkJCQkJCQkJZGF0YTogW10KCQkJCQkJCQl9XQoJCQkJCQkJfSwKCQkJCQkJCXMgPSB0LnN0b3JlWzBdOwoJCQkJCQlpZiAoci5zZXJpZXNbMF0ubmFtZSA9IHMubmFtZSwgcy5kYXRhLmxlbmd0aCA+IDApIHsKCQkJCQkJCWZvciAodmFyIGwsIGMsIGQgPSBzLnByaWNlX3JhbmdlLnNwbGl0KCItIiksIHAgPSBwYXJzZUZsb2F0KGRbMF0ucmVwbGFjZSgvLC9nLCAiIikpLCBoID0gcGFyc2VGbG9hdChkWzFdLnJlcGxhY2UoLywvZywgIiIpKSwgdSA9IHMuZGF0YS5sZW5ndGgsIG0gPSBzLmRhdGEsIGYgPSAwOyB1ID4gZjsgZisrKSB7CgkJCQkJCQkJdmFyIGcgPSB7fTsKCQkJCQkJCQlnLnggPSBwYXJzZUludChtW2ZdWzBdKSwgZy55ID0gcGFyc2VGbG9hdChtW2ZdWzFdKSwgZy55ID09PSBoICYmIChsID0gZiksIGcueSA9PT0gcCAmJiAoYyA9IGYpLCByLnNlcmllc1swXS5kYXRhLnB1c2goZykKCQkJCQkJCX0obCB8fCAwID09PSBsKSAmJiAoci5zZXJpZXNbMF0uZGF0YVtsXS5tYXJrZXIgPSB7CgkJCQkJCQkJZmlsbENvbG9yOiAiI0U0MzkzQyIsCgkJCQkJCQkJbGluZVdpZHRoOiA0LAoJCQkJCQkJCWxpbmVDb2xvcjogIiNFNDM5M0MiCgkJCQkJCQl9KSwgKGMgfHwgMCA9PT0gYykgJiYgKHIuc2VyaWVzWzBdLmRhdGFbY10ubWFya2VyID0gewoJCQkJCQkJCWZpbGxDb2xvcjogIiMwMEE2NkMiLAoJCQkJCQkJCWxpbmVXaWR0aDogNCwKCQkJCQkJCQlsaW5lQ29sb3I6ICIjMDBBNjZDIgoJCQkJCQkJfSkKCQkJCQkJfQoJCQkJCQlrKCIjIiArIHIuY2hhcnQucmVuZGVyVG8pLmxlbmd0aCAmJiBuZXcgby5DaGFydChyKSwgaygiIyIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF90cmVuZF9kZXRhaWxfaW5mbyIpLmh0bWwoJzxzcGFuIGNsYXNzPSInICsgYS5leHRCcmFuZCArICdfbWluX3ByaWNlIj7mnIDkvY7ku7fvvJo8c3BhbiBjbGFzcz0iJyArIGEuZXh0QnJhbmQgKyAnX3ByaWNlIj7vv6UnICsgcCArICI8L3NwYW4+PC9zcGFuPiIgKyAoJyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOzxzcGFuIGNsYXNzPSInICsgYS5leHRCcmFuZCArICdfbWF4X3ByaWNlIj7mnIDpq5jku7fvvJo8c3BhbiBjbGFzcz0iJyArIGEuZXh0QnJhbmQgKyAnX3ByaWNlIj7vv6UnKSArIGggKyAiPC9zcGFuPjwvc3Bhbj4iKSwgaygiIyIgKyBhLmV4dEJyYW5kICsgIl9wcmljZV9oaXN0b3J5X2J0biIpLnNob3coKSwgaygiIyIgKyBhLmV4dEJyYW5kICsgIl9wcmljZV9oaXN0b3J5X2J0biArIGRpdi5zaHV4aWFuIikuc2hvdygpCgkJCQkJfSBlbHNlICJsdXlvdSIgPT0gYS5idHlwZSA/IChrKCIjIiArIGEuZXh0QnJhbmQgKyAiX3dpc2hsaXN0X3RyZW5kX2RldGFpbCIpLmhpZGUoKSwgaygiIyIgKyBhLmV4dEJyYW5kICsgIl9wcmljZV9oaXN0b3J5X2J0biIpLmhpZGUoKSwgaygiIyIgKyBhLmV4dEJyYW5kICsgIl9wcmljZV9oaXN0b3J5X2J0biArIGRpdiIpLmhpZGUoKSkgOiAoaygiIyIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF90cmVuZF9kZXRhaWwiKS5oaWRlKCksCgkJCQkJCWsoIiMiICsgYS5leHRCcmFuZCArICJfcHJpY2VfaGlzdG9yeV9idG4gc3BhbiIpLnRleHQoIuaaguaXoOS7t+agvOi1sOWKvyIpLCBrKCIjIiArIGEuZXh0QnJhbmQgKyAiX3ByaWNlX2hpc3RvcnlfYnRuIikub2ZmKCksIGsoIiMiICsgYS5leHRCcmFuZCArICJfcHJpY2VfaGlzdG9yeV9idG4iKS5hZGRDbGFzcygiX25vcHJpY2UiKS5zaG93KCksIGsoIiMiICsgYS5leHRCcmFuZCArICJfcHJpY2VfaGlzdG9yeV9idG4gZW0iKS5oaWRlKCkpCgkJCQl9CgoJCQkJZnVuY3Rpb24gcChlKSB7CgkJCQkJdmFyIHQgPSB7CgkJCQkJCXdpZHRoOiA0MDAsCgkJCQkJCWhlaWdodDogMjAwCgkJCQkJfTsKCQkJCQkibHV5b3UiICE9IGEuYnR5cGUgJiYgKHQud2lkdGggPSAzNjAsIHQuaGVpZ2h0ID0gMTgwKSwgaCB8fCAoaCA9ICEwLCBjKGUsIDQpLCBHKGUsICIxOHB4IiwgdCkpCgkJCQl9CgkJCQl2YXIgaCwgdSwgbSwgZiwgZyA9IHRoaXMsCgkJCQkJXyA9IDM2ZTUsCgkJCQkJeCA9IDI0ICogXywKCQkJCQl3ID0gITEsCgkJCQkJdiA9IHZvaWQgMCwKCQkJCQliID0gbigxMTgpLAoJCQkJCXkgPSB7fSwKCQkJCQlrID0gbig2KSwKCQkJCQl6ID0gbig0MCksCgkJCQkJQiA9IG4oMTE5KSwKCQkJCQlqID0gbigxNiksCgkJCQkJQyA9IDE4MCwKCQkJCQlTID0gbig5KSwKCQkJCQlOID0gWyJ3YW5nZ291LmNvbSIsICJsdnlvdW1hbGwuY29tIiwgImRvdWJhbi5jb20iLCAic2hhbmdwaW4uY29tIiwgInNoYW5ncGluLmNvbS5oayJdLAoJCQkJCVQgPSBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSB3aW5kb3cubG9jYXRpb24uaG9zdC50b1N0cmluZygpOwoJCQkJCQlmb3IgKHZhciB0IGluIE4pCgkJCQkJCQlpZiAoZS5pbmRleE9mKE5bdF0pID4gMCkgcmV0dXJuIGsoIiMiICsgYS5leHRCcmFuZCArICJfd2lzaGxpc3RfdHJlbmRfZGV0YWlsIikuaGlkZSgpLCBrKCIjIiArIGEuZXh0QnJhbmQgKyAiX3ByaWNlX2hpc3RvcnlfYnRuIikuaGlkZSgpLCBrKCIjIiArIGEuZXh0QnJhbmQgKyAiX3dpc2hsaXN0X2J0biIpLmNzcygiYm9yZGVyLWxlZnQiLCAiMXB4IHNvbGlkICNkZGQiKSwgITA7CgkJCQkJCXJldHVybiAhMQoJCQkJCX0sCgkJCQkJUCA9IGZ1bmN0aW9uKGUpIHsKCQkJCQkJbigxMzgpLmluaXQoZSwgImRwUGFnZSIsICExLCB7CgkJCQkJCQl0b3A6ICExLAoJCQkJCQkJbWlkZGxlOiAhMSwKCQkJCQkJCWJvdHRvbTogITEsCgkJCQkJCQliYWlkdTogITEKCQkJCQkJfSksICghZSB8fCBlICYmIDAgPT09IGUuc3RvcmUubGVuZ3RoKSAmJiBhLm5ld19leHRlbnNpb24gJiYgKGsoIiMiICsgYS53aXNoZG9tMikuaGlkZSgpLCBrKCIuIiArIGEuZXh0QnJhbmQgKyAiX3Byb21vX2JyYW5kX2xheW91dCIpLmNzcygicGFkZGluZyIsICIwcHgiKSk7CgkJCQkJCXRyeSB7CgkJCQkJCQkoInRvcCIgPT0gZiB8fCAicmlnaHQiID09IGYpICYmICgidG9wIiA9PSBmICYmIChzKGUpLCBhLmZpeFdpZHRoKCkpLCBwKGUpKSwgImJvdHRvbSIgPT0gZiAmJiAocyhlKSwgcChlKSwgYS5hdXRvRml4V2lkdGgoKSksIChhLklFNyB8fCBhLklFOCkgJiYgbigxNDIpLnRyZW5kVXBkYXRlKCkKCQkJCQkJfSBjYXRjaCAodCkgewoJCQkJCQkJaWYgKGEuZGVidWcpIHRocm93IHQKCQkJCQkJfQoJCQkJCX0sCgkJCQkJSSA9IGZ1bmN0aW9uKGUpIHsKCQkJCQkJKCFlIHx8IGUgJiYgMCA9PT0gZS5zdG9yZS5sZW5ndGgpICYmIGEubmV3X2V4dGVuc2lvbiAmJiAoaygiIyIgKyBhLndpc2hkb20yKS5oaWRlKCksIGsoIi4iICsgYS5leHRCcmFuZCArICJfcHJvbW9fYnJhbmRfbGF5b3V0IikuY3NzKCJwYWRkaW5nIiwgIjBweCIpKTsKCQkJCQkJdHJ5IHsKCQkJCQkJCSgidG9wIiA9PSBmIHx8ICJyaWdodCIgPT0gZikgJiYgKCJ0b3AiID09IGYgJiYgKHMoZSksIGEuZml4V2lkdGgoKSksIHAoZSkpLCAiYm90dG9tIiA9PSBmICYmIChIKGUpLCBwKGUpLCBhLmF1dG9GaXhXaWR0aCgpKSwgbigxNDIpLnRyZW5kVXBkYXRlKCkKCQkJCQkJfSBjYXRjaCAodCkgewoJCQkJCQkJaWYgKGEuZGVidWcpIHRocm93IHQKCQkJCQkJfQoJCQkJCX0sCgkJCQkJQSA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQkJaWYgKHQpIHsKCQkJCQkJCXZhciBuID0gcGFyc2VGbG9hdChlLnN0b3JlWzBdLmN1cnJlbnRfcHJpY2UucmVwbGFjZSgiLCIsICIiKSksCgkJCQkJCQkJaSA9IHBhcnNlRmxvYXQoZS5zdG9yZVswXS5wcmljZV9yYW5nZS5zcGxpdCgiLSIsIDEpWzBdLnJlcGxhY2UoIiwiLCAiIikpOwoJCQkJCQkJcmV0dXJuIG4gPT0gaSA/ICEwIDogITEKCQkJCQkJfQoJCQkJCQl0cnkgewoJCQkJCQkJdmFyIG4gPSBwYXJzZUludChlLnN0b3JlWzBdLmN1cnJlbnRfcHJpY2UucmVwbGFjZSgiLCIsICIiKSksCgkJCQkJCQkJYSA9IGUuc3RvcmVbMF0uYWxsX2xpbmU7CgkJCQkJCQluID0gYVthLmxlbmd0aCAtIDFdOwoJCQkJCQkJdmFyIG8gPSBNYXRoLm1pbi5hcHBseShudWxsLCBlLnN0b3JlWzBdLmFsbF9saW5lKTsKCQkJCQkJCXJldHVybiBuID09IG8gPyAhMCA6ICExCgkJCQkJCX0gY2F0Y2ggKHIpIHt9CgkJCQkJfSwKCQkJCQlxID0gZnVuY3Rpb24oZSkgewoJCQkJCQlmdW5jdGlvbiB0KGUpIHsKCQkJCQkJCWlmIChpID49IDkgJiYgImFtYXpvbiIgPT0gYS5zaXRlICYmIC0xICE9IGxvY2F0aW9uLmhvc3QuaW5kZXhPZigiY24iKSkgcmV0dXJuIGUoITEpOwoJCQkJCQkJaWYgKGkgPj0gNikgcmV0dXJuIGUoITEpOwoJCQkJCQkJdmFyIG4gPSBrKCIjIiArIGEuZXh0QnJhbmQgKyAiX215RGl2IikudGV4dCgpOwoJCQkJCQkJbiA/IGUobikgOiAoaSsrLCBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCQkJCXQoZSkKCQkJCQkJCX0sIDFlMykpCgkJCQkJCX0KCQkJCQkJdmFyIGkgPSAwOwoJCQkJCQkiNnBtIiA9PT0gYS5zaXRlICYmICh3ID0gITAsIHYgPSAiVVNEIiksICJhbWF6b24iID09PSBhLnNpdGUgJiYgInd3dy5hbWF6b24uY24iICE9IGxvY2F0aW9uLmhvc3QgPyAodyA9ICEwLCB2ID0gIlVTRCIsICJ3d3cuYW1hem9uLmNvLmpwIiA9PSBsb2NhdGlvbi5ob3N0ICYmICh2ID0gIkpQWSIpLCBbInd3dy5hbWF6b24uZnIiLCAid3d3LmFtYXpvbi5kZSIsICJ3d3cuYW1hem9uLmVzIiwgInd3dy5hbWF6b24ubmwiLCAid3d3LmFtYXpvbi5pdCJdLmluZGV4T2YobG9jYXRpb24uaG9zdCkgPiAtMSAmJiAodiA9ICJFVVIiKSwgInd3dy5hbWF6b24uY2EiID09IGxvY2F0aW9uLmhvc3QgJiYgKHYgPSAiQ0FEIiksICJ3d3cuYW1hem9uLmNvLnVrIiA9PSBsb2NhdGlvbi5ob3N0ICYmICh2ID0gIkdCUCIpLCB0KGZ1bmN0aW9uKHQpIHsKCQkJCQkJCWlmICh0KSB7CgkJCQkJCQkJaWYgKCJhbWF6b24iID09PSBhLnNpdGUpIHsKCQkJCQkJCQkJdmFyIG4gPSBMKHQpOwoJCQkJCQkJCQluID8gZShuKSA6IE8oZnVuY3Rpb24odCkgewoJCQkJCQkJCQkJZSh0KQoJCQkJCQkJCQl9KQoJCQkJCQkJCX0KCQkJCQkJCX0gZWxzZSBPKGZ1bmN0aW9uKHQpIHsKCQkJCQkJCQllKHQpCgkJCQkJCQl9KQoJCQkJCQl9KSkgOiAidG1hbGwiID09PSBhLnNpdGUgfHwgInRhb2Jhby05NTA5NSIgPT09IGEuc2l0ZSB8fCAiYWktdGFvYmFvIiA9PT0gYS5zaXRlIHx8ICJ0YW9iYW8iID09PSBhLnNpdGUgPyBPKGZ1bmN0aW9uKHQpIHsKCQkJCQkJCXQuc3RvcmUubGVuZ3RoID4gMCAmJiB0LnN0b3JlWzBdLmFsbF9saW5lLmxlbmd0aCA+IDAgPyBlKHQpIDogbig0OCkuZ2V0VHJlbmQoZnVuY3Rpb24obikgewoJCQkJCQkJCW4gPyBGKG4sIGZ1bmN0aW9uKG4pIHsKCQkJCQkJCQkJZShuID8gbiA6IHQpCgkJCQkJCQkJfSkgOiBlKHQpCgkJCQkJCQl9KQoJCQkJCQl9KSA6ICJhbGlleHByZXNzIiA9PT0gYS5zaXRlID8gbigxMTYpLmdldFRyZW5kRGF0YShmdW5jdGlvbih0KSB7CgkJCQkJCQl0ICYmIGUodCkKCQkJCQkJfSkgOiBPKGZ1bmN0aW9uKHQpIHsKCQkJCQkJCWUodCkKCQkJCQkJfSkKCQkJCQl9LAoJCQkJCUUgPSBmdW5jdGlvbihlKSB7CgkJCQkJCWZ1bmN0aW9uIG8oZSkgewoJCQkJCQkJaWYgKHIgPj0gOSAmJiAiYW1hem9uIiA9PSBhLnNpdGUgJiYgLTEgIT0gbG9jYXRpb24uaG9zdC5pbmRleE9mKCJjbiIpKSByZXR1cm4gZSghMSk7CgkJCQkJCQlpZiAociA+PSA2KSByZXR1cm4gZSghMSk7CgkJCQkJCQl2YXIgdCA9IGsoIiMiICsgYS5leHRCcmFuZCArICJfbXlEaXYiKS50ZXh0KCk7CgkJCQkJCQl0ID8gZSh0KSA6IChyKyssIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJCQkJbyhlKQoJCQkJCQkJfSwgMWUzKSkKCQkJCQkJfQoJCQkJCQl2YXIgciA9IDA7CgkJCQkJCSJhbWF6b24iID09PSBhLnNpdGUgJiYgInd3dy5hbWF6b24uY24iICE9IGxvY2F0aW9uLmhvc3QgPyBvKGZ1bmN0aW9uKG4pIHsKCQkJCQkJCWlmIChuKSB7CgkJCQkJCQkJaWYgKCJhbWF6b24iID09PSBhLnNpdGUpIHsKCQkJCQkJCQkJdmFyIGkgPSBEKG4pOwoJCQkJCQkJCQlpID8gZShpKSA6IHQoZnVuY3Rpb24odCkgewoJCQkJCQkJCQkJZSh0KQoJCQkJCQkJCQl9KQoJCQkJCQkJCX0KCQkJCQkJCX0gZWxzZSB0KGZ1bmN0aW9uKHQpIHsKCQkJCQkJCQllKHQpCgkJCQkJCQl9KQoJCQkJCQl9KSA6ICJhaS10YW9iYW8iID09PSBhLnNpdGUgfHwgInRhb2JhbyIgPT09IGEuc2l0ZSB8fCAidG1hbGwiID09PSBhLnNpdGUgfHwgInRhb2Jhby05NTA5NSIgPT09IGEuc2l0ZSA/IG4oNDgpLmdldFRyZW5kKGZ1bmN0aW9uKG4pIHsKCQkJCQkJCXZhciBhID0gaShuKTsKCQkJCQkJCWEgPyBlKGEpIDogdChmdW5jdGlvbih0KSB7CgkJCQkJCQkJZSh0KQoJCQkJCQkJfSkKCQkJCQkJfSkgOiB0KGZ1bmN0aW9uKHQpIHsKCQkJCQkJCWUodCkKCQkJCQkJfSkKCQkJCQl9LAoJCQkJCU8gPSBmdW5jdGlvbihlKSB7CgkJCQkJCXZhciB0ID0gZnVuY3Rpb24oKSB7CgkJCQkJCQl2YXIgdCA9ICQoYS5zaXRlKTsKCQkJCQkJCWlmICh0IHx8ICh0ID0gYS5kcC5wcmljZSksICJzdW5pbmciID09PSBhLnNpdGUpIHsKCQkJCQkJCQl2YXIgbiA9IHZvaWQgMCwKCQkJCQkJCQkJaSA9IGsoIi53MyIpLnRvQXJyYXkoKTsKCQkJCQkJCQlpID0gaS5tYXAoZnVuY3Rpb24oZSkgewoJCQkJCQkJCQlyZXR1cm4gZS5pbm5lckhUTUwKCQkJCQkJCQl9KSwgaS5pbmRleE9mKCLlm6LotK3ku7ciKSA+IC0xICYmIChuID0gaygic3Bhbi5zbWFsbC1wcmljZSIpLnRleHQoKSk7CgkJCQkJCQkJdmFyIG8gPSBrKCIjcHJvbW90aW9uUHJpY2UubWFpbnByaWNlIikudGV4dCgpLAoJCQkJCQkJCQlyID0gaygiLm1haW5wcmljZSIpLnRleHQoKTsKCQkJCQkJCQlyICYmICh0ID0gciksIG8gJiYgKHQgPSBvKSwgbiAmJiAodCA9IG4pLCB0ID0geih0KSwgYS5kcC5wcmljZSA9IHQKCQkJCQkJCX0KCQkJCQkJCXQgPSBwYXJzZUZsb2F0KHQpLCB0ID8gKHcgJiYgKHQgPSB6LmdldFByaWNlQmVmb3JlRXhjaGFuZ2VSYXRlKGEuZHAub2xkUHJpY2UpKSwgdCA9IHBhcnNlSW50KHBhcnNlRmxvYXQoMTAwICogdCkudG9GaXhlZCgyKSksIHQgPSB0LnRvRml4ZWQoMikpIDogdCA9ICIiLCBhLm5vUmVhbFByaWNlICYmICh0ID0gMCksIFMuZ2V0KGEuc2VydmVyICsgIi9leHRlbnNpb24/YWM9cHJpY2VfdHJlbmQmZHBfaWRzPSIgKyB1ICsgIiZkcF9pZD0iICsgbSArICImcHJpY2U9IiArIHQpLmRvbmUoZnVuY3Rpb24odCkgewoJCQkJCQkJCWlmICh3ICYmIHQuc3RvcmVbMF0pIHsKCQkJCQkJCQkJdC5zdG9yZSA9IFt0LnN0b3JlWzBdXSwgdC5zdG9yZVswXS5jdXJyZW5jeSA9IHY7CgkJCQkJCQkJCXZhciBuID0gdC5zdG9yZVswXS5uYW1lOwoJCQkJCQkJCQlzd2l0Y2ggKGxvY2F0aW9uLmhvc3QpIHsKCQkJCQkJCQkJCWNhc2UgInd3dy5hbWF6b24uY28uanAiOgoJCQkJCQkJCQkJCW4gPSAi5Lqa6ams6YCK5pel5pysKOW9k+WJjSkiOwoJCQkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCQkJY2FzZSAid3d3LmFtYXpvbi5jb20iOgoJCQkJCQkJCQkJCW4gPSAi5Lqa6ams6YCK576O5Zu9KOW9k+WJjSkiOwoJCQkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCQkJY2FzZSAid3d3LmFtYW96bi5mciI6CgkJCQkJCQkJCQkJbiA9ICLkuprpqazpgIrms5Xlm70o5b2T5YmNKSI7CgkJCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJCQljYXNlICJ3d3cuYW1hem9uLmNvLnVrIjoKCQkJCQkJCQkJCQluID0gIuS6mumprOmAiuiLseWbvSjlvZPliY0pIjsKCQkJCQkJCQkJCQlicmVhazsKCQkJCQkJCQkJCWNhc2UgInd3dy5hbWF6b24uZGUiOgoJCQkJCQkJCQkJCW4gPSAi5Lqa6ams6YCK5b635Zu9KOW9k+WJjSkiOwoJCQkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCQkJY2FzZSAid3d3LmFtYXpvbi5jYSI6CgkJCQkJCQkJCQkJbiA9ICLkuprpqazpgIrliqDmi7/lpKco5b2T5YmNKSIKCQkJCQkJCQkJfQoJCQkJCQkJCQl0LnN0b3JlWzBdLm5hbWUgPSBuCgkJCQkJCQkJfQoJCQkJCQkJCWUodCkKCQkJCQkJCX0pLmZhaWwoZnVuY3Rpb24oKSB7CgkJCQkJCQkJZSghMSkKCQkJCQkJCX0pCgkJCQkJCX07CgkJCQkJCVsic3VuaW5nIiwgImZlaW5pdSIsICJqdW1laWdsb2JhbCIsICJ5b3Vnb3UiXS5pbmRleE9mKGEuc2l0ZSkgPiAtMSA/IHNldFRpbWVvdXQodCwgMWUzKSA6IHQoKQoJCQkJCX0sCgkJCQkJTCA9IGZ1bmN0aW9uKGUpIHsKCQkJCQkJdmFyIHQgPSAxMDA7CgkJCQkJCWlmICh3ID0gITAsIHYgPSAiVVNEIiwgInd3dy5hbWF6b24uY28uanAiID09IGxvY2F0aW9uLmhvc3QgJiYgKHQgPSAxLCB2ID0gIkpQWSIpLCBbInd3dy5hbWF6b24uZnIiLCAid3d3LmFtYXpvbi5kZSIsICJ3d3cuYW1hem9uLmVzIiwgInd3dy5hbWF6b24ubmwiLCAid3d3LmFtYXpvbi5pdCIsICJ3d3cuYW1hem9uLmNvLnVrIl0uaW5kZXhPZihsb2NhdGlvbi5ob3N0KSA+IC0xICYmICh0ID0gMTAwLCB2ID0gIkVVUiIpLCAid3d3LmFtYXpvbi5jYSIgPT0gbG9jYXRpb24uaG9zdCAmJiAodiA9ICJDQUQiKSwgZSAmJiAiIiAhPSBlKSB7CgkJCQkJCQl0cnkgewoJCQkJCQkJCXZhciBpID0gSlNPTi5wYXJzZShlKQoJCQkJCQkJfSBjYXRjaCAobykgewoJCQkJCQkJCXJldHVybgoJCQkJCQkJfQoJCQkJCQkJdmFyIHIgPSAi5Lqa6ams6YCKIjsKCQkJCQkJCXN3aXRjaCAobG9jYXRpb24uaG9zdCkgewoJCQkJCQkJCWNhc2UgInd3dy5hbWF6b24uY28uanAiOgoJCQkJCQkJCQlyID0gIuS6mumprOmAiuaXpeacrCI7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgInd3dy5hbWF6b24uY29tIjoKCQkJCQkJCQkJciA9ICLkuprpqazpgIrnvo7lm70iOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlICJ3d3cuYW1hb3puLmZyIjoKCQkJCQkJCQkJciA9ICLkuprpqazpgIrms5Xlm70iOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlICJ3d3cuYW1hem9uLmNvLnVrIjoKCQkJCQkJCQkJciA9ICLkuprpqazpgIroi7Hlm70iOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlICJ3d3cuYW1hem9uLmRlIjoKCQkJCQkJCQkJciA9ICLkuprpqazpgIrlvrflm70iOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlICJ3d3cuYW1hem9uLmNhIjoKCQkJCQkJCQkJciA9ICLkuprpqazpgIrliqDmi7/lpKciCgkJCQkJCQl9CgkJCQkJCQl2YXIgcyA9IGkuc2VsZl9jdXJ2ZSwKCQkJCQkJCQlsID0gaS5vdGhlcl9jdXJ2ZTsKCQkJCQkJCWlmICgocyB8fCBsKSAmJiAoMCAhPSBzLmxlbmd0aCB8fCAwICE9IGwubGVuZ3RoKSkgewoJCQkJCQkJCXMgJiYgMCAhPSBzLmxlbmd0aCB8fCAocyA9IGwsIHIgPSAi5Lqa6ams6YCK56ys5LiJ5pa5Iik7CgkJCQkJCQkJdmFyIGMgPSB2b2lkIDAsCgkJCQkJCQkJCWQgPSB2b2lkIDAsCgkJCQkJCQkJCXAgPSB2b2lkIDAsCgkJCQkJCQkJCWggPSB2b2lkIDAsCgkJCQkJCQkJCXUgPSB2b2lkIDAsCgkJCQkJCQkJCW0gPSB2b2lkIDAsCgkJCQkJCQkJCWYgPSBbXTsKCQkJCQkJCQljID0gMWUzICogKDM2MDAgKiBzWzBdLnRtICsgMTQxNzYwNTEwNyksIGQgPSBwID0gc1swXS5waSAvIHQ7CgkJCQkJCQkJZm9yICh2YXIgZyA9IDAsIGIgPSBzLmxlbmd0aDsgYiA+IGc7IGcrKykgewoJCQkJCQkJCQl2YXIgeSA9IHNbZ107CgkJCQkJCQkJCTAgIT0geS5waSAmJiAoeS5waSA9IHkucGkgLyB0LCB5LnRtID0gMWUzICogKDM2MDAgKiB5LnRtICsgMTQxNzYwNTEwNyksIGYucHVzaChbeS50bSwgeS5waV0pKQoJCQkJCQkJCX0KCQkJCQkJCQlpZiAoMCA9PSBmLmxlbmd0aCkgcmV0dXJuICExOwoJCQkJCQkJCWggPSBuZXcgRGF0ZShwYXJzZUludChjKSkuZ2V0RnVsbFllYXIoKSwgdSA9IG5ldyBEYXRlKHBhcnNlSW50KGMpKS5nZXRNb250aCgpLCBtID0gbmV3IERhdGUocGFyc2VJbnQoYykpLmdldERhdGUoKTsKCQkJCQkJCQlmb3IgKHZhciBrID0gZi5sZW5ndGgsIEIgPSBrIC0gMTsgQiA+IDA7IEItLSkKCQkJCQkJCQkJaWYgKCEoZltCXVswXSA8PSBmW0IgLSAxXVswXSArIDg2NGU1IHx8IGZbQl1bMV0gPT0gZltCIC0gMV1bMV0pKSB7CgkJCQkJCQkJCQl2YXIgaiA9IFtmW0JdWzBdIC0gODY0ZTUsIGZbQiAtIDFdWzFdXTsKCQkJCQkJCQkJCWYuc3BsaWNlKEIsIDAsIGopCgkJCQkJCQkJCX0KCQkJCQkJCQlpZiAoRGF0ZS5wYXJzZShuZXcgRGF0ZSkgLSBmW2YubGVuZ3RoIC0gMV1bMF0gPiA4NjRlNSkgZi5wdXNoKFtEYXRlLnBhcnNlKG5ldyBEYXRlKSAtIDg2NGU1LCBwYXJzZUZsb2F0KHouZ2V0UHJpY2VCZWZvcmVFeGNoYW5nZVJhdGUoYS5kcC5vbGRQcmljZSkpXSk7CgkJCQkJCQkJZWxzZSB0cnkgewoJCQkJCQkJCQlmW2YubGVuZ3RoIC0gMV1bMV0gPSBwYXJzZUZsb2F0KHouZ2V0UHJpY2VCZWZvcmVFeGNoYW5nZVJhdGUoYS5kcC5vbGRQcmljZSkpCgkJCQkJCQkJfSBjYXRjaCAoQykge30KCQkJCQkJCQlmb3IgKHZhciBTID0gdm9pZCAwLCBOID0gdm9pZCAwLCBUID0gdm9pZCAwLCBQID0gdm9pZCAwLCBJID0gZiwgQSA9IFtdLCBxID0gbmV3IERhdGUsIEUgPSBmdW5jdGlvbihlKSB7CgkJCQkJCQkJCWZvciAodmFyIHQgPSAwOyB0IDwgSS5sZW5ndGggLSAxOyB0KyspCgkJCQkJCQkJCQlpZiAoZSA+PSBJW3RdWzBdICYmIGUgPCBJW3QgKyAxXVswXSkgcmV0dXJuIElbdF1bMV07CgkJCQkJCQkJCXJldHVybiBJW0kubGVuZ3RoIC0gMV1bMV0KCQkJCQkJCQl9LCBPID0gSVswXVswXTsgTyA8PSBxLmdldFRpbWUoKTspIHsKCQkJCQkJCQkJdmFyIEwgPSBFKE8pOwoJCQkJCQkJCQlBLnB1c2gocGFyc2VGbG9hdChMLnRvRml4ZWQoMikpKSwgTyArPSB4CgkJCQkJCQkJfQoJCQkJCQkJCWlmIChBW0EubGVuZ3RoIC0gMV0pIHsKCQkJCQkJCQkJdmFyIEQgPSBuKDQwKS5nZXRQcmljZUJlZm9yZUV4Y2hhbmdlUmF0ZShhLmRwLm9sZFByaWNlKTsKCQkJCQkJCQkJQVtBLmxlbmd0aCAtIDFdID0gcGFyc2VGbG9hdChEKQoJCQkJCQkJCX0gZWxzZSBBW0EubGVuZ3RoIC0gMV0gPSBBW0EubGVuZ3RoIC0gMl0sIGEuZHAub2xkUHJpY2UgPSBBW0EubGVuZ3RoIC0gMV0sIGEuZHAucHJpY2UgPSBuKDQwKShhLmRwLm9sZFByaWNlKTsKCQkJCQkJCQl0cnkgewoJCQkJCQkJCQlTID0gTShBKSwgTiA9IFMucHJpY2Vfc3RhdHVzLCBUID0gUy5wcmljZV9sYXN0LCBQID0gUy5pc2xvd2VzdAoJCQkJCQkJCX0gY2F0Y2ggKEMpIHt9CgkJCQkJCQkJdmFyIFIgPSBudWxsOwoJCQkJCQkJCUEubGVuZ3RoID49IDM2NSAmJiAoUiA9IEEuc2xpY2UoQS5sZW5ndGggLSAzNjUpKTsKCQkJCQkJCQl2YXIgRiA9IG51bGw7CgkJCQkJCQkJQS5sZW5ndGggPj0gMzEgJiYgKEYgPSBBLnNsaWNlKEEubGVuZ3RoIC0gMzEpKTsKCQkJCQkJCQl2YXIgJCA9IG51bGw7CgkJCQkJCQkJaWYgKEEubGVuZ3RoID49IDYpIHsKCQkJCQkJCQkJdmFyIFcgPSBBLnNsaWNlKEEubGVuZ3RoIC0gNik7CgkJCQkJCQkJCSQgPSBbXTsKCQkJCQkJCQkJZm9yICh2YXIgSCA9IDA7IEggPCBXLmxlbmd0aCAtIDE7IEgrKykgewoJCQkJCQkJCQkJZm9yICh2YXIgVSA9IFtdLCBZID0gMDsgMjQgPiBZOyBZKyspIFUucHVzaChXW0hdKTsKCQkJCQkJCQkJCSQgPSAkLmNvbmNhdChVKQoJCQkJCQkJCQl9CgkJCQkJCQkJCSQucHVzaChXW1cubGVuZ3RoIC0gMV0pCgkJCQkJCQkJfQoJCQkJCQkJCWQgPSBBWzBdOwoJCQkJCQkJCWZvciAodmFyIEcgPSAwOyBHIDwgQS5sZW5ndGg7IEcrKykgZCA+IEFbR10gJiYgKGQgPSBBW0ddKSwgcCA8IEFbR10gJiYgKHAgPSBBW0ddKTsKCQkJCQkJCQl2YXIgWCA9IGQgKyAiLSIgKyBwLAoJCQkJCQkJCQlKID0gewoJCQkJCQkJCQkJcHJpY2Vfc3RhdHVzOiBOLAoJCQkJCQkJCQkJc3RhcnREOiBtLAoJCQkJCQkJCQkJc3RhcnRNOiB1LAoJCQkJCQkJCQkJbm93X2RheTogcSwKCQkJCQkJCQkJCXN0YXJ0WTogaCwKCQkJCQkJCQkJCXN0b3JlOiBbewoJCQkJCQkJCQkJCWN1cnJlbnRfcHJpY2U6IFQsCgkJCQkJCQkJCQkJYWxsX2xpbmU6IEEsCgkJCQkJCQkJCQkJYWxsX2xpbmVfYmVnaW5fdGltZTogSVswXVswXSwKCQkJCQkJCQkJCQl5ZWFyX2xpbmU6IFIsCgkJCQkJCQkJCQkJeWVhcl9saW5lX3RpbWU6IHEuZ2V0VGltZSgpIC0gMzY1ICogeCwKCQkJCQkJCQkJCQltb250aF9saW5lOiBGLAoJCQkJCQkJCQkJCW1vbnRoX2xpbmVfdGltZTogcS5nZXRUaW1lKCkgLSAzMCAqIHgsCgkJCQkJCQkJCQkJc2hvcnRfZGF5X2xpbmU6ICQsCgkJCQkJCQkJCQkJc2hvcnRfZGF5X2xpbmVfYmVnaW5fdGltZTogcS5nZXRUaW1lKCkgKyA4ICogXyAtIDUgKiB4LAoJCQkJCQkJCQkJCW1pbl9zdGFtcDogIjAiLAoJCQkJCQkJCQkJCWlzbG93ZXN0OiBQLAoJCQkJCQkJCQkJCW5hbWU6IHIgKyAiKOW9k+WJjSkiLAoJCQkJCQkJCQkJCXByaWNlX3JhbmdlOiBYLAoJCQkJCQkJCQkJCXByb21vOiBbXSwKCQkJCQkJCQkJCQlhbGxfZXF1YWxfc2hvcnQ6ICExLAoJCQkJCQkJCQkJCWN1cnJlbmN5OiB2CgkJCQkJCQkJCQl9XQoJCQkJCQkJCQl9OwoJCQkJCQkJCXJldHVybiBKCgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9LAoJCQkJCUQgPSBmdW5jdGlvbihlKSB7CgkJCQkJCXZhciB0ID0gMTAwOwoJCQkJCQlpZiAoInd3dy5hbWF6b24uY28uanAiID09IGxvY2F0aW9uLmhvc3QgJiYgKHQgPSAxKSwgZSAmJiAiIiAhPSBlKSB7CgkJCQkJCQl0cnkgewoJCQkJCQkJCXZhciBuID0gSlNPTi5wYXJzZShlKQoJCQkJCQkJfSBjYXRjaCAoaSkgewoJCQkJCQkJCXJldHVybgoJCQkJCQkJfQoJCQkJCQkJdmFyIGEgPSAi5Lqa6ams6YCKIiwKCQkJCQkJCQlvID0gbi5zZWxmX2N1cnZlLAoJCQkJCQkJCXIgPSBuLm90aGVyX2N1cnZlOwoJCQkJCQkJaWYgKChvIHx8IHIpICYmICgwICE9IG8ubGVuZ3RoIHx8IDAgIT0gci5sZW5ndGgpKSB7CgkJCQkJCQkJbyAmJiAwICE9IG8ubGVuZ3RoIHx8IChvID0gciwgYSA9ICLkuprpqazpgIrnrKzkuInmlrkiKTsKCQkJCQkJCQl2YXIgcyA9IHZvaWQgMCwKCQkJCQkJCQkJbCA9IHZvaWQgMCwKCQkJCQkJCQkJYyA9IHZvaWQgMCwKCQkJCQkJCQkJZCA9IHZvaWQgMCwKCQkJCQkJCQkJcCA9IHZvaWQgMCwKCQkJCQkJCQkJaCA9IHZvaWQgMCwKCQkJCQkJCQkJdSA9IFtdOwoJCQkJCQkJCXMgPSAxZTMgKiAoMzYwMCAqIG9bMF0udG0gKyAxNDE3NjA1MTA3KSwgbCA9IGMgPSBvWzBdLnBpIC8gdDsKCQkJCQkJCQlmb3IgKHZhciBtID0gMCwgZiA9IG8ubGVuZ3RoOyBmID4gbTsgbSsrKSB7CgkJCQkJCQkJCXZhciBnID0gb1ttXTsKCQkJCQkJCQkJMCAhPSBnLnBpICYmIChnLnBpID0gZy5waSAvIHQsIGcudG0gPSAxZTMgKiAoMzYwMCAqIGcudG0gKyAxNDE3NjA1MTA3KSwgZy5waSA8IGwgJiYgKGwgPSBnLnBpKSwgZy5waSA+IGMgJiYgKGMgPSBnLnBpKSwgdS5wdXNoKFtnLnRtLCBnLnBpXSkpCgkJCQkJCQkJfQoJCQkJCQkJCWlmICgwID09IHUubGVuZ3RoKSByZXR1cm4gITE7CgkJCQkJCQkJZCA9IG5ldyBEYXRlKHBhcnNlSW50KHMpKS5nZXRGdWxsWWVhcigpLCBwID0gbmV3IERhdGUocGFyc2VJbnQocykpLmdldE1vbnRoKCksIGggPSBuZXcgRGF0ZShwYXJzZUludChzKSkuZ2V0RGF0ZSgpOwoJCQkJCQkJCWZvciAodmFyIF8gPSB1Lmxlbmd0aCwgeCA9IF8gLSAxOyB4ID4gMDsgeC0tKQoJCQkJCQkJCQlpZiAoISh1W3hdWzBdIDw9IHVbeCAtIDFdWzBdICsgODY0ZTUgfHwgdVt4XVsxXSA9PSB1W3ggLSAxXVsxXSkpIHsKCQkJCQkJCQkJCXZhciB3ID0gW3VbeF1bMF0gLSA4NjRlNSwgdVt4IC0gMV1bMV1dOwoJCQkJCQkJCQkJdS5zcGxpY2UoeCwgMCwgdykKCQkJCQkJCQkJfQoJCQkJCQkJCURhdGUucGFyc2UobmV3IERhdGUpIC0gdVt1Lmxlbmd0aCAtIDFdWzBdID4gODY0ZTUgJiYgdS5wdXNoKFtEYXRlLnBhcnNlKG5ldyBEYXRlKSAtIDg2NGU1LCB1W3UubGVuZ3RoIC0gMV1bMV1dKTsKCQkJCQkJCQlmb3IgKHZhciB2ID0gMCwgYiA9IHUubGVuZ3RoLCB5ID0gcGFyc2VGbG9hdCh1W2IgLSAxXVsxXSksIGsgPSAyMCwgeCA9IGIgLSAxOyB4ID4gMDsgeC0tKSB7CgkJCQkJCQkJCXZhciB6ID0gcGFyc2VGbG9hdCh1W3hdWzFdKSwKCQkJCQkJCQkJCUIgPSAocGFyc2VGbG9hdCh1W3hdWzBdKSAtIHBhcnNlRmxvYXQodVt4IC0gMV1bMF0pKSAvIDg2NGU1OwoJCQkJCQkJCQlpZiAoMCAhPT0geikKCQkJCQkJCQkJCWlmICh5ICE9IHopIHsKCQkJCQkJCQkJCQlpZiAocGFyc2VGbG9hdCh5KSA+IHBhcnNlRmxvYXQoeikgJiYgeCA+PSBiIC0gayAtIDEpIHsKCQkJCQkJCQkJCQkJdiA9IDE7CgkJCQkJCQkJCQkJCWJyZWFrCgkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCWlmIChwYXJzZUZsb2F0KHkpIDwgcGFyc2VGbG9hdCh6KSkgewoJCQkJCQkJCQkJCQl2ID0gLTE7CgkJCQkJCQkJCQkJCWJyZWFrCgkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJfSBlbHNlIGlmIChCID4gNCkgYnJlYWsKCQkJCQkJCQl9CgkJCQkJCQkJdmFyIGogPSBsICsgIi0iICsgYywKCQkJCQkJCQkJQyA9IHsKCQkJCQkJCQkJCXByaWNlX3N0YXR1czogdiwKCQkJCQkJCQkJCXN0YXJ0RDogaCwKCQkJCQkJCQkJCXN0YXJ0TTogcCwKCQkJCQkJCQkJCXN0YXJ0WTogZCwKCQkJCQkJCQkJCXN0b3JlOiBbewoJCQkJCQkJCQkJCWN1cnJlbnRfcHJpY2U6IHksCgkJCQkJCQkJCQkJZGF0YTogdSwKCQkJCQkJCQkJCQlsYXN0X3ByaWNlOiBsLAoJCQkJCQkJCQkJCW1pbl9zdGFtcDogIjAiLAoJCQkJCQkJCQkJCW5hbWU6IGEsCgkJCQkJCQkJCQkJcHJpY2VfcmFuZ2U6IGoKCQkJCQkJCQkJCX1dCgkJCQkJCQkJCX07CgkJCQkJCQkJcmV0dXJuIEMKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0sCgkJCQkJTSA9IGZ1bmN0aW9uKGUpIHsKCQkJCQkJZm9yICh2YXIgdCA9IDAsIG4gPSBlLmxlbmd0aCwgaSA9IE1hdGgubWluLmFwcGx5KGcsIGUpLCBhID0gZVtuIC0gMV0sIG8gPSAhMSwgciA9IDE4MCwgcyA9IDAsIGwgPSBlLmxlbmd0aCAtIDE7IGwgPj0gMDsgbC0tKSB7CgkJCQkJCQl2YXIgYyA9IGVbbF07CgkJCQkJCQlpZiAobCA+IDAgJiYgKHMgKz0gMSksIDAgIT0gYykKCQkJCQkJCQlpZiAoYSAhPSBjKSB7CgkJCQkJCQkJCWlmIChwYXJzZUZsb2F0KGEpID4gcGFyc2VGbG9hdChjKSAmJiBsID49IG4gLSByIC0gMSkgewoJCQkJCQkJCQkJdCA9IDE7CgkJCQkJCQkJCQlicmVhawoJCQkJCQkJCQl9CgkJCQkJCQkJCWlmIChwYXJzZUZsb2F0KGEpIDwgcGFyc2VGbG9hdChjKSkgewoJCQkJCQkJCQkJdCA9IC0xLCBhID09PSBpICYmIChvID0gITApOwoJCQkJCQkJCQkJYnJlYWsKCQkJCQkJCQkJfQoJCQkJCQkJCX0gZWxzZSBpZiAocyA+IDE4MCkgYnJlYWsKCQkJCQkJfQoJCQkJCQlyZXR1cm4gewoJCQkJCQkJcHJpY2Vfc3RhdHVzOiB0LAoJCQkJCQkJaXNsb3dlc3Q6IG8sCgkJCQkJCQlwcmljZV9sYXN0OiBhCgkJCQkJCX0KCQkJCQl9LAoJCQkJCVIgPSBmdW5jdGlvbihlKSB7CgkJCQkJCWZvciAodmFyIHQgPSAwLCBuID0gZS5sZW5ndGgsIGkgPSBlLm1hcChmdW5jdGlvbihlKSB7CgkJCQkJCQlyZXR1cm4gZVsxXQoJCQkJCQl9KSwgYSA9IE1hdGgubWluLmFwcGx5KGcsIGkpLCBvID0gZVtuIC0gMV1bMV0sIHIgPSAhMSwgcyA9IDIwLCBsID0gMCwgYyA9IG4gLSAxOyBjID49IDA7IGMtLSkgewoJCQkJCQkJdmFyIGQgPSBlW2NdWzFdOwoJCQkJCQkJaWYgKGMgPiAwICYmIChsICs9IChlW2NdWzBdIC0gZVtjIC0gMV1bMF0pIC8gODY0ZTUpLCAwICE9IGQpCgkJCQkJCQkJaWYgKG8gIT0gZCkgewoJCQkJCQkJCQlpZiAocGFyc2VGbG9hdChvKSA+IHBhcnNlRmxvYXQoZCkgJiYgYyA+PSBuIC0gcyAtIDEpIHsKCQkJCQkJCQkJCXQgPSAxOwoJCQkJCQkJCQkJYnJlYWsKCQkJCQkJCQkJfQoJCQkJCQkJCQlpZiAocGFyc2VGbG9hdChvKSA8IHBhcnNlRmxvYXQoZCkpIHsKCQkJCQkJCQkJCXQgPSAtMSwgbyA9PT0gYSAmJiAociA9ICEwKTsKCQkJCQkJCQkJCWJyZWFrCgkJCQkJCQkJCX0KCQkJCQkJCQl9IGVsc2UgaWYgKGwgPiAxODApIGJyZWFrCgkJCQkJCX0KCQkJCQkJcmV0dXJuIHsKCQkJCQkJCXByaWNlX3N0YXR1czogdCwKCQkJCQkJCWlzbG93ZXN0OiByLAoJCQkJCQkJcHJpY2VfbGFzdDogbwoJCQkJCQl9CgkJCQkJfSwKCQkJCQlGID0gZnVuY3Rpb24odCwgbikgewoJCQkJCQlpZiAodCAmJiB0Lmxpc3QpIHsKCQkJCQkJCXZhciBpID0gdm9pZCAwLAoJCQkJCQkJCW8gPSB2b2lkIDAsCgkJCQkJCQkJciA9IHZvaWQgMCwKCQkJCQkJCQlzID0gdm9pZCAwLAoJCQkJCQkJCWwgPSB2b2lkIDAsCgkJCQkJCQkJYyA9IHQubGlzdC5sZW5ndGgsCgkJCQkJCQkJZCA9IFtdOwoJCQkJCQkJcyA9IG5ldyBEYXRlKHQuY3VyVGltZSkuZ2V0VGltZSgpLCBvID0gciA9IHQubGlzdFswXS5wcmljZTsKCQkJCQkJCXRyeSB7CgkJCQkJCQkJZm9yICh2YXIgcCA9IDA7IGMgPiBwOyBwKyspIHsKCQkJCQkJCQkJdmFyIGggPSB0Lmxpc3RbcF07CgkJCQkJCQkJCWQucHVzaChbbmV3IERhdGUoaC50aW1lKS5nZXRUaW1lKCksIGgucHJpY2VdKSwgaC5wcmljZSA+IHIgJiYgKHIgPSBoLnByaWNlKSwgaC5wcmljZSA8IG8gJiYgKG8gPSBoLnByaWNlKQoJCQkJCQkJCX0KCQkJCQkJCQlmb3IgKHZhciBwID0gYyAtIDE7IHAgPiAwOyBwLS0pCgkJCQkJCQkJCWlmIChkW3BdWzBdIC0gZFtwIC0gMV1bMF0gPiA4NjRlNSkgewoJCQkJCQkJCQkJdmFyIHUgPSBbZFtwXVswXSAtIDg2NGU1LCBkW3AgLSAxXVsxXV07CgkJCQkJCQkJCQlkLnNwbGljZShwLCAwLCB1KQoJCQkJCQkJCQl9CgkJCQkJCQkJdmFyIG0gPSBkW2QubGVuZ3RoIC0gMV07CgkJCQkJCQkJaWYgKG1bMF0gPCBzKSB7CgkJCQkJCQkJCXZhciBmID0gbVsxXSwKCQkJCQkJCQkJCWcgPSAkKGEuc2l0ZSk7CgkJCQkJCQkJCXMgLSBtWzBdID4gODY0ZTUgJiYgZC5wdXNoKFtzIC0gODY0ZTUsIGZdKSwgZyAmJiBmICE9IGcgJiYgKGcgPiByICYmIChyID0gZyksIG8gPiBnICYmIChvID0gZyksIGQucHVzaChbcywgZ10pKQoJCQkJCQkJCX0KCQkJCQkJCQlzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCQkJCQl2YXIgcyA9ICQoYS5zaXRlKTsKCQkJCQkJCQkJcyAmJiAoZFtkLmxlbmd0aCAtIDFdWzFdID0gcyk7CgkJCQkJCQkJCXZhciBjID0gUihkKSwKCQkJCQkJCQkJCXAgPSBjLnByaWNlX3N0YXR1cywKCQkJCQkJCQkJCWggPSBjLnByaWNlX2xhc3Q7CgkJCQkJCQkJCWkgPSBjLmlzbG93ZXN0OwoJCQkJCQkJCQlmb3IgKHZhciB1ID0gbyArICItIiArIHIsIG0gPSBuZXcgRGF0ZSh0LnN0YXJ0VGltZSkuZ2V0RGF0ZSgpLCBmID0gbmV3IERhdGUodC5zdGFydFRpbWUpLmdldE1vbnRoKCksIGcgPSBuZXcgRGF0ZSh0LnN0YXJ0VGltZSkuZ2V0RnVsbFllYXIoKSwgdyA9IFtdLCB2ID0gbmV3IERhdGUsIGIgPSBmdW5jdGlvbihlKSB7CgkJCQkJCQkJCQlmb3IgKHZhciB0ID0gMDsgdCA8IGQubGVuZ3RoIC0gMTsgdCsrKQoJCQkJCQkJCQkJCWlmIChlID49IGRbdF1bMF0gJiYgZSA8IGRbdCArIDFdWzBdKSByZXR1cm4gZFt0XVsxXTsKCQkJCQkJCQkJCXJldHVybiBkW2QubGVuZ3RoIC0gMV1bMV0KCQkJCQkJCQkJfSwgeSA9IGRbMF1bMF07IHkgPD0gdi5nZXRUaW1lKCk7KSB7CgkJCQkJCQkJCQl2YXIgayA9IGIoeSk7CgkJCQkJCQkJCQl3LnB1c2gocGFyc2VGbG9hdChrLnRvRml4ZWQoMikpKSwgeSArPSB4CgkJCQkJCQkJCX0KCQkJCQkJCQkJdmFyIHogPSBudWxsOwoJCQkJCQkJCQl3Lmxlbmd0aCA+PSAzNjUgJiYgKHogPSB3LnNsaWNlKHcubGVuZ3RoIC0gMzY1KSk7CgkJCQkJCQkJCXZhciBCID0gbnVsbDsKCQkJCQkJCQkJdy5sZW5ndGggPj0gMzEgJiYgKEIgPSB3LnNsaWNlKHcubGVuZ3RoIC0gMzEpKTsKCQkJCQkJCQkJdmFyIGogPSBudWxsOwoJCQkJCQkJCQlpZiAody5sZW5ndGggPj0gNikgewoJCQkJCQkJCQkJdmFyIEMgPSB3LnNsaWNlKHcubGVuZ3RoIC0gNik7CgkJCQkJCQkJCQlqID0gW107CgkJCQkJCQkJCQlmb3IgKHZhciBTID0gMDsgUyA8IEMubGVuZ3RoIC0gMTsgUysrKSB7CgkJCQkJCQkJCQkJZm9yICh2YXIgTiA9IFtdLCBUID0gMDsgMjQgPiBUOyBUKyspIE4ucHVzaChDW1NdKTsKCQkJCQkJCQkJCQlqID0gai5jb25jYXQoTikKCQkJCQkJCQkJCX0KCQkJCQkJCQkJCWoucHVzaChDW0MubGVuZ3RoIC0gMV0pCgkJCQkJCQkJCX0KCQkJCQkJCQkJdmFyIFAgPSBuZXcgRGF0ZTsKCQkJCQkJCQkJbCA9IHsKCQkJCQkJCQkJCXByaWNlX3N0YXR1czogcCwKCQkJCQkJCQkJCXN0YXJ0RDogbSwKCQkJCQkJCQkJCXN0YXJ0TTogZiwKCQkJCQkJCQkJCXN0YXJ0WTogZywKCQkJCQkJCQkJCW5vd19kYXk6IHYuZ2V0VGltZSgpLAoJCQkJCQkJCQkJZXh0cmE6ICJzdGFydCBmcm9tIGFub3RoZXIiLAoJCQkJCQkJCQkJc3RvcmU6IFt7CgkJCQkJCQkJCQkJY3VycmVudF9wcmljZTogaCwKCQkJCQkJCQkJCQlhbGxfbGluZTogdywKCQkJCQkJCQkJCQlhbGxfbGluZV9iZWdpbl90aW1lOiBkWzBdWzBdICsgOCAqIF8sCgkJCQkJCQkJCQkJeWVhcl9saW5lOiB6LAoJCQkJCQkJCQkJCXllYXJfbGluZV90aW1lOiB2LmdldFRpbWUoKSAtIDM2NSAqIHgsCgkJCQkJCQkJCQkJbW9udGhfbGluZTogQiwKCQkJCQkJCQkJCQltb250aF9saW5lX3RpbWU6IHYuZ2V0VGltZSgpIC0gMzAgKiB4LAoJCQkJCQkJCQkJCXNob3J0X2RheV9saW5lOiBqLAoJCQkJCQkJCQkJCXNob3J0X2RheV9saW5lX2JlZ2luX3RpbWU6IFAuZ2V0VGltZSgpICsgOCAqIF8gLSA1ICogeCwKCQkJCQkJCQkJCQltaW5fc3RhbXA6ICIwIiwKCQkJCQkJCQkJCQlpc2xvd2VzdDogaSwKCQkJCQkJCQkJCQluYW1lOiBlKCksCgkJCQkJCQkJCQkJcHJpY2VfcmFuZ2U6IHUsCgkJCQkJCQkJCQkJcHJvbW86IFtdLAoJCQkJCQkJCQkJCWFsbF9lcXVhbF9zaG9ydDogITEKCQkJCQkJCQkJCX1dCgkJCQkJCQkJCX0sIG4obCkKCQkJCQkJCQl9LCAxZTMpCgkJCQkJCQl9IGNhdGNoICh3KSB7fQoJCQkJCQl9CgkJCQkJfSwKCQkJCQkkID0gZnVuY3Rpb24oZSkgewoJCQkJCQl2YXIgdCA9ICIiOwoJCQkJCQlpZiAoInRhb2JhbyIgPT0gZSAmJiAodCA9IGsoIiNKX1Byb21vUHJpY2VOdW0iKS50ZXh0KCksICIiID09IHQgJiYgMCA9PSBrKCIjSl9Qcm9tb1ByaWNlTnVtIikubGVuZ3RoICYmICh0ID0gaygiI0pfU3RyUHJpY2UgLnRiLXJtYi1udW0iKS50ZXh0KCkpKSwgInRtYWxsIiA9PSBlICYmICgiIiA9PSB0ICYmICh0ID0gaygiI0pfRGV0YWlsTWV0YSAjSl9Qcm9tb1ByaWNlIHNwYW4udG0tcHJpY2UiKS50ZXh0KCkpLCAiIiA9PSB0ICYmICh0ID0gaygic3Bhbi50bS1wcmljZSIpLnRleHQoKSksICJkZXRhaWwudG1hbGwuaGsiID09PSBsb2NhdGlvbi5ob3N0ICYmICh0ID0gaygic3Bhbi50bS1wcmljZTplcSgxKSIpLnRleHQoKSksIGsoIi50Yi13clR1YW4tbnVtIikudGV4dCgpICYmICh0ID0gaygiLnRiLXdyVHVhbi1udW0iKS50ZXh0KCkpKSwgInRhb2Jhby05NTA5NSIgPT0gZSAmJiAodCA9IGsoIiNKX1Byb21vUHJpY2UgLnRtLXByaWNlIikudGV4dCgpLCAiIiA9PSB0ICYmICh0ID0gaygiI0pfU3RyUHJpY2VNb2RCb3ggLnRtLXByaWNlIikudGV4dCgpKSksICJhaS10YW9iYW8iID09IGUpIHsKCQkJCQkJCWlmIChhLmNocm9tZV9leHRlbnNpb24pIHsKCQkJCQkJCQl2YXIgbiA9IGsoIi5haXRhb2Jhby1lZGV0YWlsLWhlYWRlciBzY3JpcHQiKS50ZXh0KCk7CgkJCQkJCQkJdCA9IC9wcm9tb1ByaWNlIjoiKFtcZFwuXSspIi8uZXhlYyhuKSwgdCAmJiAodCA9IHRbMV0pCgkJCQkJCQl9IGVsc2UgdCA9IHdpbmRvdy5wYWdlY29uZmlnLnByb21vUHJpY2U7CgkJCQkJCQkiIiAhPSB0ICYmIHQgfHwgKHQgPSBrKCIucHJpY2Utd3JhcCAucHJpY2Utc2luZ2xlIC5wcmljZS1wcm9tbyBzdHJvbmciKS50ZXh0KCkpCgkJCQkJCX0KCQkJCQkJcmV0dXJuIHQuaW5kZXhPZigiLSIpID4gLTEgJiYgKHQgPSB0LnNwbGl0KCItIilbMF0pLCB6KHQpCgkJCQkJfSwKCQkJCQlXID0gZnVuY3Rpb24oZSkgewoJCQkJCQl2YXIgdCA9IGRvY3VtZW50LmxvY2F0aW9uLmhvc3QsCgkJCQkJCQlpID0gIiZ5ZW47IiwKCQkJCQkJCW8gPSB7CgkJCQkJCQkJY29tOiAiJCIsCgkJCQkJCQkJImNvLnVrIjogIsKjIiwKCQkJCQkJCQlkZTogIkVVUiIsCgkJCQkJCQkJImNvLmpwIjogIiIsCgkJCQkJCQkJZnI6ICJFVVIiLAoJCQkJCQkJCWNhOiAiQ0ROJCIsCgkJCQkJCQkJY246ICImeWVuOyIsCgkJCQkJCQkJaXQ6ICJFVVIiLAoJCQkJCQkJCWVzOiAiRVVSIiwKCQkJCQkJCQkiNnBtIjogIiQiCgkJCQkJCQl9OwoJCQkJCQlmb3IgKHZhciByIGluIG8pCgkJCQkJCQlpZiAodC5pbmRleE9mKHIpID4gLTEgJiYgKCJhbWF6b24iID09PSBhLnNpdGUgfHwgIjZwbSIgPT09IGEuc2l0ZSB8fCAiYWxpZXhwcmVzcyIgPT09IGEuc2l0ZSkpIHsKCQkJCQkJCQlpID0gb1tyXTsKCQkJCQkJCQlicmVhawoJCQkJCQkJfQoJCQkJCQlpZiAoaygiIyIgKyBhLmV4dE5hbWUgKyAiLXRyZW5kLWRldGFpbCIpLmVtcHR5KCkuYXBwZW5kKGsoIjxkaXY+IiwgewoJCQkJCQkJImNsYXNzIjogInBhbmVsLXdyYXAiCgkJCQkJCX0pLmFwcGVuZChrKCI8ZGl2PiIsIHsKCQkJCQkJCSJjbGFzcyI6ICJjaGFydCIsCgkJCQkJCQlpZDogYS5leHROYW1lICsgIi1wcmktdHJlbmQtY2hhcnQiLAoJCQkJCQkJc3R5bGU6ICJ3aWR0aDo3MDBweDsgaGVpZ2h0OjI0MHB4IgoJCQkJCQl9KSkpLmFwcGVuZChrKCI8ZGl2PiIsIHsKCQkJCQkJCSJjbGFzcyI6ICJwYW5lbC1zaGFkb3ciCgkJCQkJCX0pKSwgbigxMzUpLmluaXQoIiMiICsgYS5leHROYW1lICsgIi10cmVuZC1kZXRhaWwgLnBhbmVsLXdyYXAiLCBpLCBlKSwgImFtYXpvbiIgPT0gYS5zaXRlKSB7CgkJCQkJCQl2YXIgcyA9IHdpbmRvdy5sb2NhdGlvbiAmJiB3aW5kb3cubG9jYXRpb24uaG9zdCAmJiB3aW5kb3cubG9jYXRpb24uaG9zdC5pbmRleE9mKCJhbWF6b24uY29tIikgPj0gMCB8fCAhMTsKCQkJCQkJCXMgJiYgaygiI3Ric2Itbm90aWZpZXJzIC5yZW1pbmQsI3Ric2Itbm90aWZpZXJzIC5wYW5lbC13cmFwLCN0YnNiLW5vdGlmaWVycyAuY2hhcnQiKS5hZGRDbGFzcygiZml4LWFtYXpvbi1jb20iKQoJCQkJCQl9CgkJCQkJfSwKCQkJCQlIID0gZnVuY3Rpb24oZSkgewoJCQkJCQkwID09IGUucHJpY2Vfc3RhdHVzID8gKGsoIi5wcmljZS10cmVuZC1idG4gLnRyZW5kLWJveC1kZXYgZW0iKS5hZGRDbGFzcygidHJlbmQtc3RhYmxlIiksIGsoIi5wcmljZS10cmVuZC1idG4gLnRyZW5kLWJveC1kZXYgc3BhbiIpLmFkZENsYXNzKCJ0cmVuZC1zdGFibGUiKS50ZXh0KCLku7fmoLzlubPnqLMiKSkgOiAxID09IGUucHJpY2Vfc3RhdHVzID8gKGsoIi5wcmljZS10cmVuZC1idG4gLnRyZW5kLWJveC1kZXYgZW0iKS5hZGRDbGFzcygidHJlbmQtdXAiKSwgaygiLnByaWNlLXRyZW5kLWJ0biAudHJlbmQtYm94LWRldiBzcGFuIikuYWRkQ2xhc3MoInRyZW5kLXJlZCIpLnRleHQoIuS7t+agvOS4iua2qCIpKSA6IEEoZSkgfHwgZS5zdG9yZVswXS5pc2xvd2VzdCA/IChrKCIucHJpY2UtdHJlbmQtYnRuIC50cmVuZC1ib3gtZGV2IGVtIikuYWRkQ2xhc3MoInRyZW5kLWRvd24iKSwgaygiLnByaWNlLXRyZW5kLWJ0biAudHJlbmQtYm94LWRldiBzcGFuIikuYWRkQ2xhc3MoInRyZW5kLWdyZWVuIikudGV4dCgi5Y6G5Y+y5pyA5L2OIikpIDogKGsoIi5wcmljZS10cmVuZC1idG4gLnRyZW5kLWJveC1kZXYgZW0iKS5hZGRDbGFzcygidHJlbmQtZG93biIpLCBrKCIucHJpY2UtdHJlbmQtYnRuIC50cmVuZC1ib3gtZGV2IHNwYW4iKS5hZGRDbGFzcygidHJlbmQtZ3JlZW4iKS50ZXh0KCLku7fmoLzkuIvpmY0iKSkKCQkJCQl9LAoJCQkJCVUgPSBmdW5jdGlvbihlKSB7CgkJCQkJCWlmIChlICYmIGUuc3RvcmUubGVuZ3RoID4gMCkgewoJCQkJCQkJMCA9PSBlLnByaWNlX3N0YXR1cyA/IChrKCIuIiArIGEuZXh0QnJhbmQgKyAiLXRyZW5kLWljb24iKS5hZGRDbGFzcyhhLmV4dEJyYW5kICsgIi10cmVuZC1zdGFibGUiKSwgaygiLiIgKyBhLmV4dEJyYW5kICsgIi10cmVuZCBwIikuYWRkQ2xhc3MoYS5leHRCcmFuZCArICItc3RhYmxlIikuZmluZCgiYiIpLnRleHQoIuS7t+agvOW5s+eosyIpKSA6IDEgPT0gZS5wcmljZV9zdGF0dXMgPyAoaygiLiIgKyBhLmV4dEJyYW5kICsgIi10cmVuZC1pY29uIikuYWRkQ2xhc3MoYS5leHRCcmFuZCArICItdHJlbmQtdXAiKSwgaygiLiIgKyBhLmV4dEJyYW5kICsgIi10cmVuZCBwIikuYWRkQ2xhc3MoYS5leHRCcmFuZCArICItcmVkIikuZmluZCgiYiIpLnRleHQoIuS7t+agvOS4iua2qCIpKSA6IEEoZSwgITApIHx8IGUuc3RvcmVbMF0uaXNsb3dlc3QgPyAoaygiLiIgKyBhLmV4dEJyYW5kICsgIi10cmVuZC1pY29uIikuYWRkQ2xhc3MoYS5leHRCcmFuZCArICItdHJlbmQtZG93biIpLCBrKCIuIiArIGEuZXh0QnJhbmQgKyAiLXRyZW5kIHAiKS5hZGRDbGFzcyhhLmV4dEJyYW5kICsgIi1ncmVlbiIpLmZpbmQoImIiKS50ZXh0KCLljoblj7LmnIDkvY4iKSkgOiAoaygiLiIgKyBhLmV4dEJyYW5kICsgIi10cmVuZC1pY29uIikuYWRkQ2xhc3MoYS5leHRCcmFuZCArICItdHJlbmQtZG93biIpLCBrKCIuIiArIGEuZXh0QnJhbmQgKyAiLXRyZW5kIHAiKS5hZGRDbGFzcyhhLmV4dEJyYW5kICsgIi1ncmVlbiIpLmZpbmQoImIiKS50ZXh0KCLku7fmoLzkuIvpmY0iKSk7CgkJCQkJCQlmb3IgKHZhciB0ID0gewoJCQkJCQkJCWNoYXJ0OiB7CgkJCQkJCQkJCXJlbmRlclRvOiBhLmV4dEJyYW5kICsgIi10cmVuZC1jaGFydCIsCgkJCQkJCQkJCXR5cGU6ICJsaW5lIiwKCQkJCQkJCQkJc3R5bGU6IHsKCQkJCQkJCQkJCW1hcmdpbjogIjFweCIsCgkJCQkJCQkJCQloZWlnaHQ6ICIyNTBweCIsCgkJCQkJCQkJCQl3aWR0aDogIjgwMHB4IgoJCQkJCQkJCQl9CgkJCQkJCQkJfSwKCQkJCQkJCQljcmVkaXRzOiB7CgkJCQkJCQkJCWVuYWJsZWQ6ICExCgkJCQkJCQkJfSwKCQkJCQkJCQljb2xvcnM6IFsiIzJmN2VkOCJdLAoJCQkJCQkJCXRpdGxlOiB7CgkJCQkJCQkJCXRleHQ6ICLllYbln47mnIDov5EiICsgQyArICLlpKnku7fmoLzotovlir8iLAoJCQkJCQkJCQl4OiAtMjAsCgkJCQkJCQkJCXN0eWxlOiB7CgkJCQkJCQkJCQljb2xvcjogIiM2NjYiCgkJCQkJCQkJCX0KCQkJCQkJCQl9LAoJCQkJCQkJCXhBeGlzOiB7CgkJCQkJCQkJCXR5cGU6ICJkYXRldGltZSIsCgkJCQkJCQkJCWRhdGVUaW1lTGFiZWxGb3JtYXRzOiB7CgkJCQkJCQkJCQlkYXk6ICIlbS0lZCIsCgkJCQkJCQkJCQl3ZWVrOiAiJW0tJWQiLAoJCQkJCQkJCQkJbW9udGg6ICIlbS0lZCIKCQkJCQkJCQkJfSwKCQkJCQkJCQkJbWlub3JHcmlkTGluZUNvbG9yOiAiI2RmZGZkZiIKCQkJCQkJCQl9LAoJCQkJCQkJCXlBeGlzOiB7CgkJCQkJCQkJCXRpdGxlOiB7CgkJCQkJCQkJCQl0ZXh0OiAi5Lu35qC8KOWFgykiCgkJCQkJCQkJCX0sCgkJCQkJCQkJCXBsb3RMaW5lczogW3sKCQkJCQkJCQkJCXZhbHVlOiAwLAoJCQkJCQkJCQkJd2lkdGg6IDEsCgkJCQkJCQkJCQljb2xvcjogIiM4MDgwODAiCgkJCQkJCQkJCX1dLAoJCQkJCQkJCQlncmlkTGluZUNvbG9yOiAiI2MwZDBlMCIsCgkJCQkJCQkJCW1pbm9yR3JpZExpbmVDb2xvcjogIiNkZmRmZGYiLAoJCQkJCQkJCQl0aWNrUGl4ZWxJbnRlcnZhbDogNTAKCQkJCQkJCQl9LAoJCQkJCQkJCXRvb2x0aXA6IHsKCQkJCQkJCQkJeERhdGVGb3JtYXQ6ICIlWS0lbS0lZCIsCgkJCQkJCQkJCXNoYXJlZDogITAKCQkJCQkJCQl9LAoJCQkJCQkJCXBsb3RPcHRpb25zOiB7CgkJCQkJCQkJCXNlcmllczogewoJCQkJCQkJCQkJbWFya2VyOiB7CgkJCQkJCQkJCQkJcmFkaXVzOiAzCgkJCQkJCQkJCQl9LAoJCQkJCQkJCQkJc2hhZG93OiAhMQoJCQkJCQkJCQl9CgkJCQkJCQkJfSwKCQkJCQkJCQlsZWdlbmQ6IHsKCQkJCQkJCQkJZW5hYmxlZDogITEsCgkJCQkJCQkJCWJvcmRlcldpZHRoOiAwCgkJCQkJCQkJfSwKCQkJCQkJCQlzZXJpZXM6IFtdCgkJCQkJCQl9LCBuID0gZS5zdG9yZS5sZW5ndGgsIGkgPSAwOyBuID4gaTsgaSsrKSB7CgkJCQkJCQkJdmFyIHIgPSBlLnN0b3JlW2ldOwoJCQkJCQkJCWlmICh0LnNlcmllc1tpXSA9IHsKCQkJCQkJCQkJdmlzaWJsZTogITEsCgkJCQkJCQkJCW5hbWU6IHIubmFtZSwKCQkJCQkJCQkJcG9pbnRTdGFydDogRGF0ZS5VVEMoZS5zdGFydFksIGUuc3RhcnRNLCBlLnN0YXJ0RCksCgkJCQkJCQkJCXBvaW50SW50ZXJ2YWw6IDg2NGU1LAoJCQkJCQkJCQlkYXRhOiBbXQoJCQkJCQkJCX0sIDAgPT0gaSAmJiAodC5zZXJpZXNbaV0udmlzaWJsZSA9ICEwKSwgci5kYXRhLmxlbmd0aCA+IDApCgkJCQkJCQkJCWZvciAodmFyIHMgPSByLmRhdGEubGVuZ3RoLCBsID0gci5kYXRhLCBjID0gMDsgcyA+IGM7IGMrKykgewoJCQkJCQkJCQkJdmFyIGQgPSBuZXcgQXJyYXkoMik7CgkJCQkJCQkJCQlkWzBdID0gcGFyc2VJbnQobFtjXVswXSksIGRbMV0gPSBwYXJzZUZsb2F0KGxbY11bMV0pLCB0LnNlcmllc1tpXS5kYXRhLnB1c2goZCkKCQkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQkJaygiIyIgKyB0LmNoYXJ0LnJlbmRlclRvKS5sZW5ndGggJiYgbmV3IG8uQ2hhcnQodCksIGsoIiMiICsgYS5leHRCcmFuZCArICItdHJlbmQiKS5hdHRyKCJzaG93IiwgMSkuc2hvdygpLCBhLm5ld19leHRlbnNpb24gfHwgaygiIyIgKyBhLmV4dEJyYW5kICsgIi10cmVuZC1jaGFydCIpLmFwcGVuZChrKCI8YT4iLCB7CgkJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICJfd2lzaGxpc3RfYnRuICIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF9idG5faGFuZGxlX2V2ZW50IiwKCQkJCQkJCQlocmVmOiAiamF2YXNjcmlwdDoiLAoJCQkJCQkJCXRhcmdldDogIl9zZWxmIgoJCQkJCQkJfSkuY2xpY2soZnVuY3Rpb24oZSkgewoJCQkJCQkJCWUucHJldmVudERlZmF1bHQoKSwgQi5hZGRNaW5pKCkKCQkJCQkJCX0pLmFwcGVuZChrKCI8c3Bhbj4iKS50ZXh0KCLpmY3ku7fmj5DphpIiKSkpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCVkgPSBmdW5jdGlvbigpIHsKCQkJCQkJaygiIyIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF90cmVuZF9kZXRhaWwiKS5oaWRlKCksIGsoIiMiICsgYS5leHRCcmFuZCArICJfcHJpY2VfaGlzdG9yeV9idG4gc3BhbiIpLnRleHQoIuaaguaXoOS7t+agvOi1sOWKvyIpLCBrKCIjIiArIGEuZXh0QnJhbmQgKyAiX3ByaWNlX2hpc3RvcnlfYnRuIikub2ZmKCksIGsoIiMiICsgYS5leHRCcmFuZCArICJfcHJpY2VfaGlzdG9yeV9idG4iKS5hZGRDbGFzcygiX25vcHJpY2UiKS5zaG93KCksIGsoIiMiICsgYS5leHRCcmFuZCArICJfcHJpY2VfaGlzdG9yeV9idG4gZW0iKS5oaWRlKCkKCQkJCQl9LAoJCQkJCUcgPSBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJCWUuc3RvcmVbMF0uYWxsX2xpbmUubGVuZ3RoID4gMCAmJiBrKCIjIiArIGEuZXh0QnJhbmQgKyAiX3dpc2hsaXN0X3RyZW5kX2RldGFpbCIpLmxlbmd0aCA+IDAgPyAoYS5zaG93TWluaVRyZW5kID0gITAsIDAgPT0gZS5wcmljZV9zdGF0dXMgPyAoaygiIyIgKyBhLmV4dEJyYW5kICsgIl9wcmljZV9oaXN0b3J5X2J0biAucHJpY2UtdHJlbmQtaWNvbiIpLmFkZENsYXNzKCJwcmljZS10cmVuZC1pY29uLXNvbHciKSwgaygiIyIgKyBhLmV4dEJyYW5kICsgIl9wcmljZV9oaXN0b3J5X2J0biBzcGFuIikuaHRtbCgi5Lu35qC85bmz56izIikpIDogMSA9PSBlLnByaWNlX3N0YXR1cyA/IChrKCIjIiArIGEuZXh0QnJhbmQgKyAiX3ByaWNlX2hpc3RvcnlfYnRuIC5wcmljZS10cmVuZC1pY29uIikuYWRkQ2xhc3MoInByaWNlLXRyZW5kLWljb24tdXAiKSwgaygiIyIgKyBhLmV4dEJyYW5kICsgIl9wcmljZV9oaXN0b3J5X2J0biBzcGFuIikuaHRtbCgi5Lu35qC85LiK5raoIikpIDogQShlKSB8fCBlLnN0b3JlWzBdLmlzbG93ZXN0ID8gKGsoIiMiICsgYS5leHRCcmFuZCArICJfcHJpY2VfaGlzdG9yeV9idG4gLnByaWNlLXRyZW5kLWljb24iKS5hZGRDbGFzcygicHJpY2UtdHJlbmQtaWNvbi1kb3duIiksIGsoIiMiICsgYS5leHRCcmFuZCArICJfcHJpY2VfaGlzdG9yeV9idG4gc3BhbiIpLmh0bWwoIuWOhuWPsuacgOS9jiIpKSA6IChrKCIjIiArIGEuZXh0QnJhbmQgKyAiX3ByaWNlX2hpc3RvcnlfYnRuIC5wcmljZS10cmVuZC1pY29uIikuYWRkQ2xhc3MoInByaWNlLXRyZW5kLWljb24tZG93biIpLCBrKCIjIiArIGEuZXh0QnJhbmQgKyAiX3ByaWNlX2hpc3RvcnlfYnRuIHNwYW4iKS5odG1sKCLku7fmoLzkuIvpmY0iKSksIGsoIi5wcmljZS10cmVuZC1pY29uIikuc2hvdygpLCBrKCIjIiArIGEuZXh0QnJhbmQgKyAiX3ByaWNlX2hpc3RvcnlfYnRuIikuc2hvdygpLCBrKCIjIiArIGEuZXh0QnJhbmQgKyAiX3ByaWNlX2hpc3RvcnlfYnRuICsgZGl2LnNodXhpYW4iKS5zaG93KCkpIDogImx1eW91IiA9PSBhLmJ0eXBlID8gKGsoIiMiICsgYS5leHRCcmFuZCArICJfd2lzaGxpc3RfdHJlbmRfZGV0YWlsIikuaGlkZSgpLCBrKCIjIiArIGEuZXh0QnJhbmQgKyAiX3ByaWNlX2hpc3RvcnlfYnRuIikuaGlkZSgpLCBrKCIjIiArIGEuZXh0QnJhbmQgKyAiX3ByaWNlX2hpc3RvcnlfYnRuICsgZGl2IikuaGlkZSgpKSA6ICgwID09PSBlLnN0b3JlWzBdLmFsbF9saW5lLmxlbmd0aCAmJiAoaygiIyIgKyBhLmV4dE5hbWUgKyAiLXRyZW5kIikuaGlkZSgpLCBrKCIjIiArIGEuZXh0QnJhbmQgKyAiLXRyZW5kIikuaGlkZSgpKSwgWSgpKQoJCQkJCX07CgkJCQlyZXR1cm4geS5nZXRQcmljZVN0YXR1c05ldyA9IE0sIHkuaW5pdCA9IGZ1bmN0aW9uKGUsIG8sIHIpIHsKCQkJCQlpZiAoIShhLklFOSAmJiAiYW1hem9uIiA9PT0gYS5zaXRlIHx8IChuKDE0NyksICJrZWVkZSIgPT09IGEuc2l0ZSAmJiBuKDE0OCkoKSwgVCgpKSkpIHsKCQkJCQkJaWYgKG8ubWF0Y2goL14wLVswLTldKy8pKSByZXR1cm4gdm9pZCBZKCk7CgkJCQkJCWlmIChlIHx8IChlID0gIiIpLCBvICYmIChlICs9ICIsIiArIG8pLCBlIHx8ICJhbWF6b24iID09IGEuc2l0ZSB8fCAiYWktdGFvYmFvIiA9PSBhLnNpdGUgfHwgInRhb2JhbyIgPT0gYS5zaXRlIHx8ICJ0bWFsbCIgPT0gYS5zaXRlIHx8ICJ0YW9iYW8tOTUwOTUiID09IGEuc2l0ZSkgewoJCQkJCQkJdSA9IGUsIG0gPSBvLCBmID0gciwgaygiIyIgKyBhLmV4dE5hbWUgKyAiLW1haW4tY29udGVudHMiKS5hcHBlbmQoaygiPGE+IiwgewoJCQkJCQkJCWhyZWY6ICJqYXZhc2NyaXB0OiIsCgkJCQkJCQkJaWQ6IGEuZXh0TmFtZSArICItdHJlbmQiLAoJCQkJCQkJCXN0eWxlOiAiZGlzcGxheTpub25lOyIsCgkJCQkJCQkJImNsYXNzIjogYS5leHROYW1lICsgIi10YWIiCgkJCQkJCQl9KS5hcHBlbmQoaygiPHNwYW4+IiwgewoJCQkJCQkJCSJjbGFzcyI6ICJzZXR0aW5nLWJnIHByaWNlLXRyZW5kLWljb24iCgkJCQkJCQl9KSkuYXBwZW5kKGsoIjxzcGFuPiIsIHsKCQkJCQkJCQlpZDogYS5leHROYW1lICsgIi10cmVuZC10ZXh0IgoJCQkJCQkJfSkudGV4dCgi5Lu35qC85Y6G5Y+yIikpKSwgaygiIyIgKyBhLmV4dE5hbWUgKyAiLW1haW4iKS5hcHBlbmQoaygiPGRpdj4iLCB7CgkJCQkJCQkJImNsYXNzIjogInBhbmVsIHByaWNlLXRyZW5kIiwKCQkJCQkJCQlpZDogYS5leHROYW1lICsgIi10cmVuZC1kZXRhaWwiCgkJCQkJCQl9KSk7CgkJCQkJCQl2YXIgYyA9IG4oMjkpLmdldENocm9tZVZlcnNpb24oKTsKCQkJCQkJCShhLklFNyB8fCBhLklFOCB8fCBjICYmIDMwID4gYyB8fCAibHV5b3UiID09PSBhLmJ0eXBlKSAmJiAocSA9IEUsIEwgPSBELCBGID0gaSwgTyA9IHQsIHMgPSBsLCBIID0gVSwgRyA9IGQsIFAgPSBJKSwgcShmdW5jdGlvbihlKSB7CgkJCQkJCQkJbigxNDkpLCBuKDE1MCkuaW5pdChlLnJldmlld190cmVuZCksIFAoZSkKCQkJCQkJCX0pCgkJCQkJCX0KCQkJCQl9CgkJCQl9LCB5CgkJCX0uY2FsbCh0LCBuLCB0LCBlKSwgISh2b2lkIDAgIT09IGkgJiYgKGUuZXhwb3J0cyA9IGkpKQoJCX0pLmNhbGwodCwgbigxKSwgbig5NCkpCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCXZhciBpOwoJCWkgPSBmdW5jdGlvbigpIHsKCQkJcmV0dXJuIGZ1bmN0aW9uKGUpIHsKCQkJCWlmIChlID0gcGFyc2VGbG9hdChlKSwgZSA+IDFlNCkgewoJCQkJCXZhciB0ID0gKGUgLyAxZTQpLnRvRml4ZWQoMik7CgkJCQkJcmV0dXJuIHQgPSB0LnJlcGxhY2UoIi4wMCIsICIiKSwgdCArICLkuIciCgkJCQl9CgkJCQlyZXR1cm4gZS50b0ZpeGVkKDIpLnJlcGxhY2UoIi4wMCIsICIiKQoJCQl9CgkJfS5jYWxsKHQsIG4sIHQsIGUpLCAhKHZvaWQgMCAhPT0gaSAmJiAoZS5leHBvcnRzID0gaSkpCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCXZhciBpOwoJCShmdW5jdGlvbihhLCBvKSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJaSA9IGZ1bmN0aW9uKCkgewoJCQkJdmFyIGUgPSBuKDEyMCksCgkJCQkJdCA9IG4oMjYpLAoJCQkJCWkgPSBuKDEzKSwKCQkJCQlyID0gbigxNiksCgkJCQkJcyA9IG4oNDApLAoJCQkJCWwgPSBuKDkpLAoJCQkJCWMgPSB2b2lkIDAsCgkJCQkJZCA9IHt9LAoJCQkJCXAgPSBbXSwKCQkJCQloID0gdm9pZCAwOwoJCQkJcmV0dXJuIHsKCQkJCQlpbml0OiBmdW5jdGlvbihlLCBuKSB7CgkJCQkJCWlmICghYS5mb3JiaWRXaXNobGl0KSB7CgkJCQkJCQl2YXIgciwgcyA9IGEuc2l0ZSwKCQkJCQkJCQlsID0gW107CgkJCQkJCQlmb3IgKHZhciBjIGluIHRoaXMuc2l0ZVBhdHRlcm4pIGMgPT0gcyAmJiAobCA9IHRoaXMuc2l0ZVBhdHRlcm5bY10pOwoJCQkJCQkJaWYgKGwubGVuZ3RoID4gMCkgewoJCQkJCQkJCWZvciAodmFyIGQgPSAwOyBkIDwgbC5sZW5ndGg7IGQrKykKCQkJCQkJCQkJaWYgKG8obFtkXSkubGVuZ3RoID4gMCAmJiAociA9IG8obFtkXSkuZXEoMCkpKSB7CgkJCQkJCQkJCQkwICE9IGEuc2hvd19wcm9tbyAmJiAibHV5b3UiID09IGEuYnR5cGUgJiYgIjM2MGJ1eS1yZSIgIT09IGEuc2l0ZSAmJiAodGhpcy5pbnNlcnRQcm9tbyhyKSwgdGhpcy5pbnNlcnRQcm9tb0FjdGl2ZShyKSksIDAgIT0gYS5zaG93X3dpc2hsaXN0ICYmIHRoaXMuaW5zZXJ0KHIsIG4pLCB0aGlzLmluc2VydERvdWJhbihsW2RdKTsKCQkJCQkJCQkJCWJyZWFrCgkJCQkJCQkJCX0KCQkJCQkJCQlvKCIuIiArIGEuZXh0QnJhbmQgKyAiX3Byb21vX2FjdGl2ZSIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQkJCQl0KCJjbGljazptaW5pOnByb21vLWFkIiksIGkubG9nKCLltYzlhaXkv4PplIDlub/lkYrngrnlh7siKQoJCQkJCQkJCX0pLCBvKCIuIiArIGEuZXh0QnJhbmQgKyAiX3Byb21vX2JyYW5kX2xheW91dCIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQkJCQlpLmxvZygi5bWM5YWl5L+D6ZSA5rS75Yqo54K55Ye7IikKCQkJCQkJCQl9KSwgInN1bmluZyIgPT0gYS5zaXRlICYmIG8oIi5wcm9pbmZvLW1haW4iKS5jc3MoImhlaWdodCIsICJhdXRvIikKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0sCgkJCQkJYXV0b0FkZEZhdm9yOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIG4gPSB3aW5kb3cubG9jYXRpb24uaHJlZi50b1N0cmluZygpOwoJCQkJCQluLmluZGV4T2YoYS5leHRCcmFuZCArICJfYWRkX2Zhdm9yX3VuaXF1ZSIpID4gLTEgJiYgbygiIyIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF9idG4iKS5jbGljayhmdW5jdGlvbihuKSB7CgkJCQkJCQluLnByZXZlbnREZWZhdWx0KCksIHQoIm1pbmktZmF2b3ItYnRuLWNsaWNrIiksIGkubG9nKCJtaW5pLWZhdm9yLWJ0bi1jbGljayIpLCBlLnRvZ2dsZV9mYXZvcigpCgkJCQkJCX0pCgkJCQkJfSwKCQkJCQlpbnNlcnRQcm9tbzogZnVuY3Rpb24oZSkgewoJCQkJCQlvKGEuZXh0QnJhbmQgKyAiX3Byb21vX2JyYW5kX2xheW91dF8iICsgKGEuaHJlZi5pbmRleE9mKCJ0bWFsbCIpID49IDAgPyAidG1hbGwiIDogYS5zaXRlKSkubGVuZ3RoID4gMCB8fCBvKGUpLmVxKDApLmFmdGVyKG8oIjxkaXY+IiwgewoJCQkJCQkJaWQ6IGEuZXh0QnJhbmQgKyAiX3Byb21vX2JyYW5kX2xheW91dF8iICsgKGEuaHJlZi5pbmRleE9mKCJ0bWFsbCIpID49IDAgPyAidG1hbGwiIDogYS5zaXRlKSwKCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiX3Byb21vX2JyYW5kX2xheW91dCIKCQkJCQkJfSkpCgkJCQkJfSwKCQkJCQlpbnNlcnRQcm9tb0FjdGl2ZTogZnVuY3Rpb24oZSkgewoJCQkJCQlvKCIjIiArIGEuZXh0QnJhbmQgKyAiX3Byb21vX2FjdGl2ZV8iICsgKGEuaHJlZi5pbmRleE9mKCJ0bWFsbCIpID49IDAgPyAidG1hbGwiIDogYS5zaXRlKSkubGVuZ3RoID4gMCB8fCBvKGUpLmVxKDApLmFmdGVyKG8oIjxkaXY+IiwgewoJCQkJCQkJaWQ6IGEuZXh0QnJhbmQgKyAiX3Byb21vX2FjdGl2ZV8iICsgKGEuaHJlZi5pbmRleE9mKCJ0bWFsbCIpID49IDAgPyAidG1hbGwiIDogYS5zaXRlKSwKCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiX3Byb21vX2FjdGl2ZSIKCQkJCQkJfSkpCgkJCQkJfSwKCQkJCQlpbnNlcnREb3ViYW46IGZ1bmN0aW9uKGUpIHsKCQkJCQkJbygiIyIgKyBhLmV4dE5hbWUgKyAiX2RvdWJhbl9kaXYiKS5sZW5ndGggPiAwIHx8IChvKGUpLmVxKDApLmFmdGVyKG8oIjxkaXY+IiwgewoJCQkJCQkJaWQ6IGEuZXh0TmFtZSArICJfZG91YmFuX2RpdiIKCQkJCQkJfSkpLCAieWloYW9kaWFuIiA9PSBhLnNpdGUgJiYgbygiIyIgKyBhLmV4dE5hbWUgKyAiX2RvdWJhbl9kaXYiKS5wcmV2KCkuZmluZCgiLmNvbXBhcmVfY29uIikuY3NzKCJ6LWluZGV4IiwgIjEiKSkKCQkJCQl9LAoJCQkJCWluc2VydDogZnVuY3Rpb24oZSwgcykgewoJCQkJCQlhLnRpbWVyNyA9IG51bGw7CgkJCQkJCXZhciBsID0gdGhpcywKCQkJCQkJCWQgPSAiIyIgKyBhLndpc2hkb20yLAoJCQkJCQkJcCA9IG4oMTIyKTsKCQkJCQkJaWYgKCEobyhkKS5sZW5ndGggPiAwKSkgewoJCQkJCQkJaWYgKCJsdXlvdSIgPT0gYS5idHlwZSkgdmFyIGggPSBuKDEyMyksCgkJCQkJCQkJdSA9IHIuY29tcGlsZShoKSh7CgkJCQkJCQkJCW5ld19leHRlbnNpb246IGEubmV3X2V4dGVuc2lvbiwKCQkJCQkJCQkJZXh0TmFtZTogYS5leHROYW1lLAoJCQkJCQkJCQlleHRCcmFuZDogYS5leHRCcmFuZCwKCQkJCQkJCQkJbWluaWRvbTogYS53aXNoZG9tMiwKCQkJCQkJCQkJYmpkX3NpdGU6IGEuc2l0ZQoJCQkJCQkJCX0pOwoJCQkJCQkJZWxzZSB7CgkJCQkJCQkJdmFyIG0gPSAiIjsKCQkJCQkJCQkoYS5JRTcgfHwgYS5JRTgpICYmIChtID0gImllaGFjayIpOwoJCQkJCQkJCXZhciBoID0gbigxMjQpLAoJCQkJCQkJCQlmID0gbigxMjUpLAoJCQkJCQkJCQlnID0gZi5nZXRVcmwoKSwKCQkJCQkJCQkJXyA9IGEuc2VydmVyICsgIi9icndleHQvc2V0dGluZz9mcm9tPSIgKyBwKGEuZnJvbV9kZXZpY2UpICsgIiZidHlwZT0iICsgKGEuYnR5cGUgPyBhLmJ0eXBlIDogIiIpLAoJCQkJCQkJCQl4ID0gImh0dHA6Ly93d3cuIiArIGEuZXh0TmFtZSArICIuY29tL2Jyd2V4dC9zdWdnZXN0P3JlZmVyPSIgKyBlbmNvZGVVUklDb21wb25lbnQoZG9jdW1lbnQubG9jYXRpb24uaHJlZikgKyAiJmZyb21fZGV2aWNlPSIgKyBhLmZyb21fZGV2aWNlICsgIiZidHlwZT0iICsgKGEuYnR5cGUgPyBhLmJ0eXBlIDogIiIpLAoJCQkJCQkJCQl1ID0gci5jb21waWxlKGgpKHsKCQkJCQkJCQkJCXVybDogZywKCQkJCQkJCQkJCXNldFVybDogXywKCQkJCQkJCQkJCWllaGFjazogbSwKCQkJCQkJCQkJCXNfc2VydmVyOiBhLnNfc2VydmVyLAoJCQkJCQkJCQkJYWxpU2l0ZTogYS5hbGlTaXRlLAoJCQkJCQkJCQkJZmVlZGJhY2tVcmw6IHgsCgkJCQkJCQkJCQltaW5pZG9tOiBhLndpc2hkb20yLAoJCQkJCQkJCQkJY19zZXJ2ZXI6IGEuY19zZXJ2ZXIsCgkJCQkJCQkJCQl3aXNoZG9tOiBhLndpc2hkb20KCQkJCQkJCQkJfSkKCQkJCQkJCX0gaWYgKGUuYWZ0ZXIodSksIG4oMTI4KS5yZW5kZXJXaXNobGlzdEFkKHMuY2xhc3NfaWQsIHMuY29yZXdvcmQpLCAibHV5b3UiICE9IGEuYnR5cGUgJiYgKG4oMTMxKS5pbml0KCksIGEuc2F2ZV9kcF9xdWVyeS5vdGhlcl9jbGllbnQgJiYgIjM2MGJ1eSIgPT09IGEuc2l0ZSAmJiBuKDEzMykuaW5pdChhLnNhdmVfZHBfcXVlcnkub3RoZXJfY2xpZW50LCBzLm5vd19kcF9pZCksIGwucmVuZGVyTWluaUZhdm9yKCkpLCAibHV5b3UiICE9IGEuYnR5cGUpIHsKCQkJCQkJCQlsLmNoZWNrX2Zhdm9yKHMuZHBfaWQpOwoJCQkJCQkJCXZhciB3ID0gbygiLiIgKyBhLmV4dEJyYW5kICsgIl9iZ19kaXYiKS5uZXh0KCk7CgkJCQkJCQkJIm5vbmUiICE9IG8odykuY3NzKCJkaXNwbGF5IikgJiYgbygiLiIgKyBhLmV4dEJyYW5kICsgIl9iZ19kaXYiKS5jc3MoImJhY2tncm91bmQtY29sb3IiLCBvKCIuIiArIGEuZXh0QnJhbmQgKyAiX2JnX2RpdiIpLm5leHQoKS5jc3MoImJhY2tncm91bmQtY29sb3IiKSkKCQkJCQkJCX0KCQkJCQkJCWlmIChvKCIjdHJlbmRfZGV0YWlsX3JlbWFpbmVkX21lIikub24oImNsaWNrIiwgZnVuY3Rpb24oZSkgewoJCQkJCQkJCW8oIiMiICsgYS5leHRCcmFuZCArICJfd2lzaGxpc3RfYnRuIHNwYW4iKS5hZGRDbGFzcygibGlua2VkIiksIGUucHJldmVudERlZmF1bHQoKSwgbC5hZGRNaW5pKCkKCQkJCQkJCX0pLCAibHV5b3UiICE9IGEuYnR5cGUpIHsKCQkJCQkJCQl2YXIgdiA9ICJjbGljayI7CgkJCQkJCQkJYS5lbWFpbCAmJiAodiA9ICJtb3VzZWVudGVyIiksIG8oIiMiICsgYS5leHRCcmFuZCArICJfd2lzaGxpc3RfYnRuIikub24odiwgZnVuY3Rpb24oKSB7CgkJCQkJCQkJCW8oIiMiICsgYS5leHRCcmFuZCArICJfd2lzaGxpc3RfYnRuIikuYWRkQ2xhc3MoIm1zaG92ZXIiKSwgbygiIyIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF9idG4gZW0iKS5hZGRDbGFzcygiY29sbGVjdF9ob3ZlciIpLCBvKCJodG1sIikuYWRkQ2xhc3MoImJqZC1mYXZvci1zaG93IiksIG8oIiNiamRfbWluaWZhdm9yX2NvbnRlbnQiKS5zaG93KCkKCQkJCQkJCQl9KS5vbigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uKCkgewoJCQkJCQkJCQljID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJCQkJCW8oIiMiICsgYS5leHRCcmFuZCArICJfd2lzaGxpc3RfYnRuIikucmVtb3ZlQ2xhc3MoIm1zaG92ZXIiKSwgbygiIyIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF9idG4gZW0iKS5yZW1vdmVDbGFzcygiY29sbGVjdF9ob3ZlciIpLCBvKCJodG1sIikucmVtb3ZlQ2xhc3MoImJqZC1mYXZvci1zaG93IiksIG8oIiNiamRfbWluaWZhdm9yX2NvbnRlbnQiKS5oaWRlKCkKCQkJCQkJCQkJfSwgMTAwKQoJCQkJCQkJCX0pLCAoYS5JRTcgfHwgYS5JRTgpICYmIG8oZCkub24oIm1vdXNlZW50ZXIiLCBmdW5jdGlvbigpIHsKCQkJCQkJCQkJbyh0aGlzKS5hZGRDbGFzcygiaWVoYWNrIikKCQkJCQkJCQl9KS5vbigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uKCkgewoJCQkJCQkJCQlvKHRoaXMpLnJlbW92ZUNsYXNzKCJpZWhhY2siKQoJCQkJCQkJCX0pCgkJCQkJCQl9CgkJCQkJCQlvKCIjIiArIGEuZXh0QnJhbmQgKyAiX3dlYnNpdGVfaWNvbiIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQkJCXQoImNsaWNrOm1haW46bG9nbyIpLCBpLmxvZygi5bWM5YWl5q+U5Lu35Yy6bG9nb+eCueWHuyIpCgkJCQkJCQl9KTsKCQkJCQkJCXZhciBiID0gIm1vdXNlbGVhdmUiLAoJCQkJCQkJCXkgPSAibW91c2VlbnRlciI7CgkJCQkJCQlvKCIjIiArIGEuZXh0QnJhbmQgKyAiX3ByaWNlX2hpc3RvcnlfYnRuIikuYmluZCh5LCBmdW5jdGlvbigpIHsKCQkJCQkJCQlyZXR1cm4gYS5zaG93TWluaVRyZW5kID8gKGNsZWFyVGltZW91dChhLnRpbWVyNCksIG8oZCkuYWRkQ2xhc3MoYS5leHRCcmFuZCArICJfd2lzaGxpc3RfZGl2X2hvdmVyIiksIG8oIiMiICsgYS5leHRCcmFuZCArICJfcHJpY2VfaGlzdG9yeV9idG4iKS5hZGRDbGFzcyhhLmV4dEJyYW5kICsgIl93aXNobGlzdF90cmVuZF9ob3ZlciIpLCBvKCIjIiArIGEuZXh0QnJhbmQgKyAiX3dpc2hsaXN0X3RyZW5kX2RldGFpbCIpLnNob3coKSwgdCgiaG92ZXI6bWluaTpwcmljZXRyZW5kIiksIHZvaWQgaS5sb2coIuW1jOWFpeS7t+agvOi2i+WKv+m8oOagh+aCrOa1riIpKSA6ICExCgkJCQkJCQl9KS5iaW5kKGIsIGZ1bmN0aW9uKCkgewoJCQkJCQkJCWNsZWFyVGltZW91dChhLnRpbWVyNCksIGEudGltZXI0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJCQkJbygiIyIgKyBhLmV4dEJyYW5kICsgIl9wcmljZV9oaXN0b3J5X2J0biIpLnJlbW92ZUNsYXNzKGEuZXh0QnJhbmQgKyAiX3dpc2hsaXN0X3RyZW5kX2hvdmVyIiksIG8oIiMiICsgYS5leHRCcmFuZCArICJfd2lzaGxpc3RfdHJlbmRfZGV0YWlsIikuaGlkZSgpLCAibHV5b3UiID09IGEuYnR5cGUgJiYgbygiLiIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF9kaXYiKS5jc3MoImhlaWdodCIsICIzMHB4IikKCQkJCQkJCQl9LCAxMDApCgkJCQkJCQl9KS5iaW5kKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQkJCWNsZWFyVGltZW91dChhLnRpbWVyNCksICJibG9jayIgPT0gbygiIyIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF90cmVuZF9kZXRhaWwiKS5jc3MoImRpc3BsYXkiKSA/IChvKCIjIiArIGEuZXh0QnJhbmQgKyAiX3ByaWNlX2hpc3RvcnlfYnRuIikucmVtb3ZlQ2xhc3MoYS5leHRCcmFuZCArICJfd2lzaGxpc3RfdHJlbmRfaG92ZXIiKSwgbyhkKS5yZW1vdmVDbGFzcyhhLmV4dEJyYW5kICsgIl93aXNobGlzdF9kaXZfaG92ZXIiKSwgbygiIyIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF90cmVuZF9kZXRhaWwiKS5oaWRlKCksICJsdXlvdSIgPT0gYS5idHlwZSAmJiBvKCIuIiArIGEuZXh0QnJhbmQgKyAiX3dpc2hsaXN0X2RpdiIpLmNzcygiaGVpZ2h0IiwgIjMwcHgiKSkgOiAobyhkKS5hZGRDbGFzcyhhLmV4dEJyYW5kICsgIl93aXNobGlzdF9kaXZfaG92ZXIiKSwgbygiIyIgKyBhLmV4dEJyYW5kICsgIl9wcmljZV9oaXN0b3J5X2J0biIpLmFkZENsYXNzKGEuZXh0QnJhbmQgKyAiX3dpc2hsaXN0X3RyZW5kX2hvdmVyIiksIG8oIiMiICsgYS5leHRCcmFuZCArICJfd2lzaGxpc3RfdHJlbmRfZGV0YWlsIikuc2hvdygpKQoJCQkJCQkJfSksIG8oIiMiICsgYS5leHRCcmFuZCArICJfd2lzaGxpc3RfdHJlbmRfZGV0YWlsIikuYmluZCh5LCBmdW5jdGlvbigpIHsKCQkJCQkJCQljbGVhclRpbWVvdXQoYS50aW1lcjQpLCBvKCIjIiArIGEuZXh0QnJhbmQgKyAiX3ByaWNlX2hpc3RvcnlfYnRuIikuYWRkQ2xhc3MoYS5leHRCcmFuZCArICJfd2lzaGxpc3RfdHJlbmRfaG92ZXIiKSwgbyhkKS5hZGRDbGFzcyhhLmV4dEJyYW5kICsgIl93aXNobGlzdF9kaXZfaG92ZXIiKSwgbygiIyIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF90cmVuZF9kZXRhaWwiKS5zaG93KCkKCQkJCQkJCX0pLmJpbmQoYiwgZnVuY3Rpb24oKSB7CgkJCQkJCQkJY2xlYXJUaW1lb3V0KGEudGltZXI0KSwgYS50aW1lcjQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCQkJCQlvKCIjIiArIGEuZXh0QnJhbmQgKyAiX3ByaWNlX2hpc3RvcnlfYnRuIikucmVtb3ZlQ2xhc3MoYS5leHRCcmFuZCArICJfd2lzaGxpc3RfdHJlbmRfaG92ZXIiKSwgbygiIyIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF90cmVuZF9kZXRhaWwiKS5oaWRlKCksICJsdXlvdSIgPT0gYS5idHlwZSAmJiBvKCIuIiArIGEuZXh0QnJhbmQgKyAiX3dpc2hsaXN0X2RpdiIpLmNzcygiaGVpZ2h0IiwgIjMwcHgiKQoJCQkJCQkJCX0sIDMwMCkKCQkJCQkJCX0pLCBvKCIjZ3dkX21pbmlfY29tcGFyZSIpLm9uKHksIGZ1bmN0aW9uKCkgewoJCQkJCQkJCW8oIiNnd2Rfd2lzaGxpc3RfdHJlbmRfY29tcGFyZSIpLnNob3coKSwgbyhkKS5hZGRDbGFzcyhhLmV4dEJyYW5kICsgIl93aXNobGlzdF9kaXZfaG92ZXIiKSwgbygiI2d3ZF9taW5pX2NvbXBhcmUiKS5hZGRDbGFzcygiZ3dkX3dpc2hsaXN0X2NvbXBhcmVfaG92ZXIiKQoJCQkJCQkJfSkub24oYiwgZnVuY3Rpb24oKSB7CgkJCQkJCQkJYS50aW1lcjYgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCQkJCQlvKCIjZ3dkX3dpc2hsaXN0X3RyZW5kX2NvbXBhcmUiKS5oaWRlKCksIG8oIiNnd2RfbWluaV9jb21wYXJlIikucmVtb3ZlQ2xhc3MoImd3ZF93aXNobGlzdF9jb21wYXJlX2hvdmVyIiksIG8oZCkucmVtb3ZlQ2xhc3MoYS5leHRCcmFuZCArICJfd2lzaGxpc3RfZGl2X2hvdmVyIikKCQkJCQkJCQl9LCAxMDApCgkJCQkJCQl9KSwgbygiI2d3ZF93aXNobGlzdF90cmVuZF9jb21wYXJlIikub24oeSwgZnVuY3Rpb24oKSB7CgkJCQkJCQkJY2xlYXJUaW1lb3V0KGEudGltZXI2KQoJCQkJCQkJfSksIG8oIiNnd2Rfd2lzaGxpc3RfdHJlbmRfY29tcGFyZSIpLm9uKGIsIGZ1bmN0aW9uKCkgewoJCQkJCQkJCW8oIiNnd2Rfd2lzaGxpc3RfdHJlbmRfY29tcGFyZSIpLmhpZGUoKSwgbyhkKS5yZW1vdmVDbGFzcyhhLmV4dEJyYW5kICsgIl93aXNobGlzdF9kaXZfaG92ZXIiKSwgbygiI2d3ZF9taW5pX2NvbXBhcmUiKS5yZW1vdmVDbGFzcygiZ3dkX3dpc2hsaXN0X2NvbXBhcmVfaG92ZXIiKQoJCQkJCQkJfSksICJsdXlvdSIgIT0gYS5idHlwZSAmJiAobygiIyIgKyBhLmV4dEJyYW5kICsgIl93ZWJzaXRlX2ljb24iKS5vbigibW91c2VlbnRlciIsIGZ1bmN0aW9uKCkgewoJCQkJCQkJCW8oIiN3aXNobGlzdC1zZXR0aW5nIikuc2hvdygpLCBvKGQpLmFkZENsYXNzKGEuZXh0QnJhbmQgKyAiX3dpc2hsaXN0X2Rpdl9ob3ZlciIpCgkJCQkJCQl9KS5vbigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uKCkgewoJCQkJCQkJCWEudGltZXI3ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJCQkJbygiI3dpc2hsaXN0LXNldHRpbmciKS5oaWRlKCksIG8oZCkucmVtb3ZlQ2xhc3MoYS5leHRCcmFuZCArICJfd2lzaGxpc3RfZGl2X2hvdmVyIikKCQkJCQkJCQl9LCAyMDApCgkJCQkJCQl9KSwgbygiI3dpc2hsaXN0LXNldHRpbmciKS5vbigibW91c2VlbnRlciIsIGZ1bmN0aW9uKCkgewoJCQkJCQkJCWNsZWFyVGltZW91dChhLnRpbWVyNykKCQkJCQkJCX0pLm9uKCJtb3VzZWxlYXZlIiwgZnVuY3Rpb24oKSB7CgkJCQkJCQkJbygiI3dpc2hsaXN0LXNldHRpbmciKS5oaWRlKCksIG8oZCkucmVtb3ZlQ2xhc3MoYS5leHRCcmFuZCArICJfd2lzaGxpc3RfZGl2X2hvdmVyIikKCQkJCQkJCX0pKQoJCQkJCQl9CgkJCQkJfSwKCQkJCQlnZXRSZW1pbmRTdHlsZTogZnVuY3Rpb24oZSkgewoJCQkJCQlpZiAoYS5yZW1pbmRJbmZvKSByZXR1cm4gdm9pZCBlKGEucmVtaW5kSW5mbyk7CgkJCQkJCWlmIChoKSByZXR1cm4gdm9pZCBwLnB1c2goZSk7CgkJCQkJCWggPSAhMDsKCQkJCQkJdmFyIHQgPSBhLm5vd19kcF9pZDsgLSAxID09PSB0LmluZGV4T2YoIi0iKSAmJiAodCA9IHQgKyAiLSIgKyBhLnNpdGVfaWQpOwoJCQkJCQl2YXIgbiA9IGEuY19zZXJ2ZXIgKyAiL2FwaS9yZW1pbmRfc2V0dGluZz9hY3Rpb249Z2V0JmVtYWlsPSIgKyBhLmVtYWlsICsgIiZkcF9pZD0iICsgdDsKCQkJCQkJbC5nZXQobikuZG9uZShmdW5jdGlvbih0KSB7CgkJCQkJCQlpZiAoYS5yZW1pbmRJbmZvID0gdCwgZSh0KSwgcC5sZW5ndGggPiAwKQoJCQkJCQkJCWZvciAodmFyIG4gPSAwOyBuIDwgcC5sZW5ndGg7IG4rKykgcFtuXSh0KQoJCQkJCQl9KQoJCQkJCX0sCgkJCQkJcmVuZGVyTWluaUZhdm9yOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSB0aGlzLAoJCQkJCQkJcyA9ICIjIiArIGEud2lzaGRvbTI7CgkJCQkJCWlmICghYS5JRTcgJiYgIWEuSUU4KSB7CgkJCQkJCQl2YXIgbCA9IHZvaWQgMCwKCQkJCQkJCQljID0gdm9pZCAwLAoJCQkJCQkJCXAgPSB2b2lkIDAsCgkJCQkJCQkJaCA9IGEuZW1haWwsCgkJCQkJCQkJdSA9IGEuc2F2ZV9kcF9xdWVyeTsKCQkJCQkJCWlmICh1Lm5vdy5ub3dfZHBfaWQpIHsKCQkJCQkJCQl2YXIgbSA9IGVuY29kZVVSSUNvbXBvbmVudChsb2NhdGlvbi5ocmVmKSwKCQkJCQkJCQkJZiA9IHUubm93LnByaWNlIHx8IGEuZHAucHJpY2U7CgkJCQkJCQkJYS5hbGlTaXRlICYmIChmID0gYS5kcC5wcmljZSk7CgkJCQkJCQkJdmFyIGcgPSB1LmIyYy5taW5fcHJpY2UgfHwgZjsKCQkJCQkJCQlmID0gTnVtYmVyKGYudG9TdHJpbmcoKS5yZXBsYWNlKCIsIiwgIiIpKSwgZyA9IE51bWJlcihnLnRvU3RyaW5nKCkucmVwbGFjZSgiLCIsICIiKSksIHUuYjJjLnByb2R1Y3QgJiYgKHAgPSB1LmIyYy5wcm9kdWN0WzBdLnVybCwgdCgiYWxsc2l0ZS1sb3dwcmktc2hvdyIpLCBpLmxvZygiYWxsc2l0ZS1sb3dwcmktc2hvdyIpKSwgZC5ub3dwcmljZSA9IGY7CgkJCQkJCQkJdmFyIF8gPSBuKDEzNCk7CgkJCQkJCQkJaWYgKGEuZW1haWwpIHRoaXMuZ2V0UmVtaW5kU3R5bGUoZnVuY3Rpb24odCkgewoJCQkJCQkJCQl0Lmhhc19yZW1pbmRfdHlwZSAmJiAobCA9ICEwKSwgdC5pc19jb2xsZWN0ZWQgJiYgKGQuaXNfY29sbGVjdGVkID0gdC5pc19jb2xsZWN0ZWQsICIxIiA9PT0gdC5ub3RpZnlfc2l0ZSA/IGYgPSB0LnJlbWluZF9wcmljZSA6IGcgPSB0LnJlbWluZF9wcmljZSksIGQubm90aWZ5X3NpdGUgPSB0Lm5vdGlmeV9zaXRlIHx8ICIxIiwgYyA9IHQucmVtaW5kX3R5cGUgfHwgIjAiLCBhLmVtYWlsLmluZGV4T2YoYS5leHROYW1lICsgIi5jb20iKSA+IC0xICYmIChoID0gIiIpOwoJCQkJCQkJCQl2YXIgbiA9IHIuY29tcGlsZShfKSh7CgkJCQkJCQkJCQljaG9vc2VkOiBsLAoJCQkJCQkJCQkJZW1haWw6IGEuZW1haWwsCgkJCQkJCQkJCQllbWFpbHZhbHVlOiBoLAoJCQkJCQkJCQkJdXJsOiBtLAoJCQkJCQkJCQkJbG93ZXN0VXJsOiBwLAoJCQkJCQkJCQkJbm90aWZ5X3NpdGU6IGQubm90aWZ5X3NpdGUsCgkJCQkJCQkJCQlub3dwcmljZTogZiwKCQkJCQkJCQkJCWFsbHByaWNlOiBnLAoJCQkJCQkJCQkJcmVtaW5kX3R5cGU6IGMsCgkJCQkJCQkJCQlleHROYW1lOiBhLmV4dE5hbWUKCQkJCQkJCQkJfSk7CgkJCQkJCQkJCW8ocykuYXBwZW5kKG4pLCBlLm1pbmlGYXZvckV2ZW50KCkKCQkJCQkJCQl9KTsKCQkJCQkJCQllbHNlIHsKCQkJCQkJCQkJdmFyIHggPSByLmNvbXBpbGUoXykoewoJCQkJCQkJCQkJY2hvb3NlZDogbCwKCQkJCQkJCQkJCWVtYWlsOiBhLmVtYWlsLAoJCQkJCQkJCQkJZW1haWx2YWx1ZTogaCwKCQkJCQkJCQkJCXVybDogbSwKCQkJCQkJCQkJCWxvd2VzdFVybDogcCwKCQkJCQkJCQkJCW5vdGlmeV9zaXRlOiBkLm5vdGlmeV9zaXRlLAoJCQkJCQkJCQkJbm93cHJpY2U6IGYsCgkJCQkJCQkJCQlhbGxwcmljZTogZywKCQkJCQkJCQkJCXJlbWluZF90eXBlOiBjLAoJCQkJCQkJCQkJZXh0TmFtZTogYS5leHROYW1lCgkJCQkJCQkJCX0pOwoJCQkJCQkJCQlvKHMpLmFwcGVuZCh4KSwgdGhpcy5taW5pRmF2b3JFdmVudCgpCgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfSwKCQkJCQltaW5pRmF2b3JFdmVudDogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gdGhpcywKCQkJCQkJCXIgPSBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCQkJdmFyIG4gPSBlLAoJCQkJCQkJCQlpID0gdCB8fCAiIiwKCQkJCQkJCQkJbyA9IGEuY19zZXJ2ZXIgKyAiL2FwaS9yZW1pbmRfc2V0dGluZz9hY3Rpb249c2V0JmVtYWlsPSIgKyBhLmVtYWlsICsgIiZzZXR0aW5nX3R5cGU9IiArIG4gKyAiJnJlbWluZF9lbWFpbD0iICsgaTsKCQkJCQkJCQlsLmdldChvKQoJCQkJCQkJfTsKCQkJCQkJbygiI2JqZF9taW5pZmF2b3JfY29udGVudCIpLm9uKCJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7CgkJCQkJCQljbGVhclRpbWVvdXQoYykKCQkJCQkJfSksIG8oIiNiamRfbWluaWZhdm9yX2NvbnRlbnQiKS5vbigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uKCkgewoJCQkJCQkJbygiIyIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF9idG4iKS5yZW1vdmVDbGFzcygibXNob3ZlciIpLCBvKCIjIiArIGEuZXh0QnJhbmQgKyAiX3dpc2hsaXN0X2J0biBlbSIpLnJlbW92ZUNsYXNzKCJjb2xsZWN0X2hvdmVyIiksIG8oImh0bWwiKS5yZW1vdmVDbGFzcygiYmpkLWZhdm9yLXNob3ciKSwgbygiI2JqZF9taW5pZmF2b3JfY29udGVudCIpLmhpZGUoKQoJCQkJCQl9KSwgbygiLmppYW5namlhLWxlZnQgLnNlbGVjdC1pdGVtIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCQlvKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoIi5zZWxlY3QtaXRlbSIpLnJlbW92ZUNsYXNzKCJzZWxlY3RlZCIpLCBvKHRoaXMpLmFkZENsYXNzKCJzZWxlY3RlZCIpCgkJCQkJCX0pLCBvKCIjZWRpdF9yZV9zdHlsZSIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQkJbygiI2JqZF9taW5pZmF2b3JfY29udGVudCIpLnJlbW92ZUNsYXNzKCJiamRfY2hvb3NlZCIpCgkJCQkJCX0pLCBvKCIjbG9naW5DbGlja0J0biIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQkJdmFyIHQgPSBvKCIjYmpkX21pbmlmYXZvcl9jb250ZW50ICN1c2VybmFtZSIpLnZhbCgpLAoJCQkJCQkJCWkgPSBvKCIjYmpkX21pbmlmYXZvcl9jb250ZW50ICNwYXNzd29yZCIpLnZhbCgpOwoJCQkJCQkJcmV0dXJuIHQgJiYgaSA/IChuKDEzNSkubG9naW5SZW5kZXJUb3AoKSwgdm9pZCBlLnVzZXJMb2dpbih0LCBpKSkgOiB2b2lkIG8oIiNsb2dpbl9yZW1pbmRfdGxlIikuY3NzKCJkaXNwbGF5IiwgImJsb2NrIikuZmFkZU91dCg1ZTMpCgkJCQkJCX0pLCBvKCIjc3ViYnRuIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCQl2YXIgbiA9IG8oIiNiamRfbWluaWZhdm9yX2NvbnRlbnQiKS5oYXNDbGFzcygiYmpkX2Nob29zZWQiKTsKCQkJCQkJCWlmICghbikgewoJCQkJCQkJCXZhciBhID0gdm9pZCAwLAoJCQkJCQkJCQlzID0gbygiLmpqLXN0eWxlIC5zZWxlY3QtaXRlbS5zZWxlY3RlZCIpLmF0dHIoImRhdGEtdHlwZSIpOwoJCQkJCQkJCWlmICgiMSIgPT09IHMgJiYgKGEgPSBvKCIuamotc3R5bGUgLnJlLW1haWwiKS52YWwoKSwgIWEpKSByZXR1cm4gdm9pZCBvKCIjZXJyb3JfcmVtaW5kX3RsZSIpLnRleHQoIuivt+i+k+WFpeato+ehrueahOmCrueuseWcsOWdgCIpLmNzcygiZGlzcGxheSIsICJibG9jayIpLmZhZGVPdXQoNWUzKTsKCQkJCQkJCQlyKHMsIGEpCgkJCQkJCQl9CgkJCQkJCQl2YXIgbCA9IG8oIi5qai1yZW1pbmQgLnNlbGVjdC1pdGVtLnNlbGVjdGVkIiksCgkJCQkJCQkJYyA9IGwuYXR0cigiZGF0YS10eXBlIiksCgkJCQkJCQkJcCA9IGwucGFyZW50KCkuZmluZCgiaW5wdXQiKS52YWwoKTsKCQkJCQkJCXJldHVybiAiIiA9PT0gcCA/IHZvaWQgbygiI2Vycm9yX3JlbWluZF90bGUiKS50ZXh0KCLor7fovpPlhaXllYblk4HmnJ/mnJvku7fmoLwiKS5jc3MoImRpc3BsYXkiLCAiYmxvY2siKS5mYWRlT3V0KDVlMykgOiBOdW1iZXIocCkgPD0gMCB8fCAhcC5tYXRjaCgvKD86XlxkKyR8XlxkK1wuXGR7MSwyfSQpLykgPyB2b2lkIG8oIiNlcnJvcl9yZW1pbmRfdGxlIikudGV4dCgi6K+36L6T5YWl5q2j56Gu5qC85byP55qE5Lu35qC8IikuY3NzKCJkaXNwbGF5IiwgImJsb2NrIikuZmFkZU91dCg1ZTMpIDogTnVtYmVyKHApID4gZC5ub3dwcmljZSAmJiAiMSIgPT09IGMgPyB2b2lkIG8oIiNlcnJvcl9yZW1pbmRfdGxlIikudGV4dCgi5Lu35qC85LiN6IO96auY5LqO5b2T5YmN5ZWG5ZOB5Lu35qC8IikuY3NzKCJkaXNwbGF5IiwgImJsb2NrIikuZmFkZU91dCg1ZTMpIDogKHQoIm1pbmktZmF2b3ItZGV0YWlsLWJ0bi1jbGljayIpLCBpLmxvZygibWluaS1mYXZvci1kZXRhaWwtYnRuLWNsaWNrIiksIGUuYWRkX2Zhdm9yKGMsIHApLCB2b2lkIG8oIiNiamRfbWluaWZhdm9yX2NvbnRlbnQiKS5oaWRlKCkuYWRkQ2xhc3MoImJqZF9jaG9vc2VkIikpCgkJCQkJCX0pLCBvKCIuamotcmVtaW5kLWxvZ28iKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQkJCXQoImFsbHNpdGUtbG93cHJpLWNsaWNrIiksIGkubG9nKCJhbGxzaXRlLWxvd3ByaS1jbGljayIpCgkJCQkJCX0pCgkJCQkJfSwKCQkJCQl1c2VyTG9naW46IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQkJdmFyIGkgPSB0aGlzOwoJCQkJCQlvLmFqYXgoewoJCQkJCQkJdHlwZTogInBvc3QiLAoJCQkJCQkJdXJsOiAiaHR0cHM6Ly93d3cuIiArIGEuZXh0TmFtZSArICIuY29tL3VzZXIvYWpfbG9naW4iLAoJCQkJCQkJeGhyRmllbGRzOiB7CgkJCQkJCQkJd2l0aENyZWRlbnRpYWxzOiAhMAoJCQkJCQkJfSwKCQkJCQkJCWNyb3NzRG9tYWluOiAhMCwKCQkJCQkJCWRhdGE6IHsKCQkJCQkJCQllbWFpbDogZSwKCQkJCQkJCQlwYXNzd29yZDogdCwKCQkJCQkJCQl0OiAiY2hlY2siLAoJCQkJCQkJCWhvc3Q6IGxvY2F0aW9uLnByb3RvY29sICsgIi8vIiArIGxvY2F0aW9uLmhvc3QKCQkJCQkJCX0sCgkJCQkJCQlzdWNjZXNzOiBmdW5jdGlvbih0KSB7CgkJCQkJCQkJcmV0dXJuICIxIiAhPT0gdCA/IHZvaWQgbygiI2xvZ2luX3JlbWluZF90bGUiKS5jc3MoImRpc3BsYXkiLCAiYmxvY2siKS5mYWRlT3V0KDVlMykgOiAoYS5lbWFpbCA9IGUsIG4gJiYgbigpLCBvKCIuYmpkLWxvZ2luLWJveCwgLmxvZ2luLWNvbnRlbnQiKS5oaWRlKCksIG8oIi5iamQtamlhbmdqaWEtcmUiKS5zaG93KCksIGkuY2hlY2tfZmF2b3IoYS5ub3dfZHBfaWQpLCBpLmdldFJlbWluZFN0eWxlKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQkJZSAmJiAoZC5pc19jb2xsZWN0ZWQgPSBlLmlzX2NvbGxlY3RlZCwgZS5oYXNfcmVtaW5kX3R5cGUgPyAobygiLnNlbGVjdC1pdGVtIikucmVtb3ZlQ2xhc3MoInNlbGVjdGVkIiksIG8oIiNiamRfbWluaWZhdm9yX2NvbnRlbnQiKS5hZGRDbGFzcygiYmpkX2Nob29zZWQiKSwgbygiI2Zhdm9yX2JveCIpLmFkZENsYXNzKCJmYXZvcl9jaG9vc2VkIiksIG8oJy5qai1zdHlsZSAuc2VsZWN0LWl0ZW1bZGF0YS10eXBlPSInICsgZS5yZW1pbmRfdHlwZSArICciXScpLmFkZENsYXNzKCJzZWxlY3RlZCIpKSA6IG8oJy5qai1zdHlsZSAuc2VsZWN0LWl0ZW1bZGF0YS10eXBlPSIxIl0nKS5hZGRDbGFzcygic2VsZWN0ZWQiKSwgZS5ub3RpZnlfc2l0ZSA9IGUubm90aWZ5X3NpdGUgfHwgIjEiLCBvKCcuamotcmVtaW5kIC5zZWxlY3QtaXRlbVtkYXRhLXR5cGU9IicgKyBlLm5vdGlmeV9zaXRlICsgJyJdJykuYWRkQ2xhc3MoInNlbGVjdGVkIiksIGUucmVtaW5kX3ByaWNlICYmIG8oJy5qai1yZW1pbmQgLnNlbGVjdC1pdGVtW2RhdGEtdHlwZT0iJyArIGUubm90aWZ5X3NpdGUgKyAnIl0nKS5wYXJlbnQoKS5maW5kKCJpbnB1dCIpLnZhbChlLnJlbWluZF9wcmljZSksIG8oIi5qai1zdHlsZSAucmUtbWFpbCIpLnZhbChhLmVtYWlsKSkKCQkJCQkJCQl9KSwgdm9pZCAwKQoJCQkJCQkJfQoJCQkJCQl9KQoJCQkJCX0sCgkJCQkJYWRkTWluaTogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gYS5jb2xsZWN0SW5mbzsKCQkJCQkJcmV0dXJuIGUucHJpY2UgPSBhLnNhdmVfZHBfcXVlcnkubm93LnByaWNlLCAiIiA9PSBlLmRwX2lkID8gKG8oImEuIiArIGEuZXh0QnJhbmQgKyAiX3dpc2hsaXN0X2J0bl9oYW5kbGVfZXZlbnQgc3BhbiIpLnRleHQoIuaaguS4jeaUr+aMgSIpLCBvKCJkaXYuIiArIGEuZXh0QnJhbmQgKyAiX3dpc2hsaXN0X2J0bl9oYW5kbGVfZXZlbnQiKS50ZXh0KCLmmoLkuI3mlK/mjIEiKSwgdm9pZCBvKCJhLiIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF9idG5faGFuZGxlX2V2ZW50IikudW5iaW5kKCJjbGljayIpKSA6IChvKCJhLiIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF9idG5faGFuZGxlX2V2ZW50IHNwYW4iKS50ZXh0KCLmraPlnKjmt7vliqAiKSwgbygiZGl2LiIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF9idG5faGFuZGxlX2V2ZW50IikudGV4dCgi5q2j5Zyo5re75YqgIiksICIiID09IGUudGl0bGUgPyBlLnRpdGxlID0gbygidGl0bGUiKS50ZXh0KCkgOiAoIiIgPT0gZS5wcmljZSB8fCBwYXJzZUZsb2F0KGUucHJpY2UpICE9IGUucHJpY2UpICYmIChlLnByaWNlID0gMCksIGUucHJpY2UgfHwgKGUucHJpY2UgPSBhLmRwLnByaWNlKSwgdm9pZCBsLmdldChhLmNfc2VydmVyICsgIi9jb2xsZWN0L2FqX2FkZD9kcF9pZD0iICsgZS5kcF9pZCArICImdXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQoZS51cmwgfHwgYS5kcC51cmwpICsgIiZpbWc9IiArIGVuY29kZVVSSUNvbXBvbmVudChlLmltZyB8fCBhLmRwLmltZykgKyAiJnRpdGxlPSIgKyBlbmNvZGVVUklDb21wb25lbnQoZS50aXRsZSB8fCBhLmRwLm5hbWUpICsgIiZwcmljZT0iICsgZS5wcmljZSArICImc2l0ZV9pZD0iICsgZS5zaXRlX2lkICsgIiZjYXRfaWQ9IiArIGEuZHAuY2F0X2lkKS5kb25lKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCWlmICgxMDAgPT0gZS5jb2RlIHx8IGUuY29kZSA8PSAwKSB7CgkJCQkJCQkJdmFyIHQgPSB3aW5kb3cubG9jYXRpb24uaHJlZi50b1N0cmluZygpOwoJCQkJCQkJCXQgKz0gdC5pbmRleE9mKCI/IikgPiAtMSA/ICImIiArIGEuZXh0QnJhbmQgKyAiX2FkZF9mYXZvcl91bmlxdWU9dHJ1ZSIgOiAiPyIgKyBhLmV4dEJyYW5kICsgIl9hZGRfZmF2b3JfdW5pcXVlPXRydWUiLCB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGEuY19zZXJ2ZXIgKyAiL3VzZXIvbG9naW4/ZnJvbV91cmw9IiArIGVuY29kZVVSSUNvbXBvbmVudCh0KQoJCQkJCQkJfSBlbHNlIDEgPT0gZS5jb2RlID8gKCJsdXlvdSIgPT0gYS5idHlwZSAmJiBvKCJhLiIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF9idG5faGFuZGxlX2V2ZW50IGVtIikuYXR0cigiY2xhc3MiLCAiY29sbGVjdC1tYWlsaW4taWNvbiIpLCBvKCJhLiIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF9idG5faGFuZGxlX2V2ZW50IHNwYW4iKS50ZXh0KCLlt7Lmt7vliqDmj5DphpIiKSwgbygiZGl2LiIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF9idG5faGFuZGxlX2V2ZW50IikudGV4dCgi5bey5re75Yqg5o+Q6YaSIiksIG8oImEuIiArIGEuZXh0QnJhbmQgKyAiX3dpc2hsaXN0X2J0bl9oYW5kbGVfZXZlbnQiKS51bmJpbmQoImNsaWNrIiksIG8oImRpdi4iICsgYS5leHRCcmFuZCArICJfd2lzaGxpc3RfYnRuX2hhbmRsZV9ldmVudCIpLnVuYmluZCgiY2xpY2siKSkgOiAyID09IGUuY29kZSAmJiAoImx1eW91IiA9PSBhLmJ0eXBlICYmIG8oImEuIiArIGEuZXh0QnJhbmQgKyAiX3dpc2hsaXN0X2J0bl9oYW5kbGVfZXZlbnQgZW0iKS5hdHRyKCJjbGFzcyIsICJjb2xsZWN0LW1haWxpbi1pY29uIiksIG8oImEuIiArIGEuZXh0QnJhbmQgKyAiX3dpc2hsaXN0X2J0bl9oYW5kbGVfZXZlbnQgc3BhbiIpLnRleHQoIuW3sua3u+WKoOaPkOmGkiIpLCBvKCJkaXYuIiArIGEuZXh0QnJhbmQgKyAiX3dpc2hsaXN0X2J0bl9oYW5kbGVfZXZlbnQiKS50ZXh0KCLlt7Lmt7vliqDmj5DphpIiKSwgbygiYS4iICsgYS5leHRCcmFuZCArICJfd2lzaGxpc3RfYnRuX2hhbmRsZV9ldmVudCIpLnVuYmluZCgiY2xpY2siKSwgbygiZGl2LiIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF9idG5faGFuZGxlX2V2ZW50IikudW5iaW5kKCJjbGljayIpKQoJCQkJCQl9KS5mYWlsKGZ1bmN0aW9uKCkgewoJCQkJCQkJbygiYS4iICsgYS5leHRCcmFuZCArICJfd2lzaGxpc3RfYnRuX2hhbmRsZV9ldmVudCBzcGFuIikudGV4dCgi5pS26JeP5aSx6LSlIiksIG8oImRpdi4iICsgYS5leHRCcmFuZCArICJfd2lzaGxpc3RfYnRuX2hhbmRsZV9ldmVudCIpLnRleHQoIuaUtuiXj+Wksei0pSIpCgkJCQkJCX0pKQoJCQkJCX0sCgkJCQkJZmF2b3I6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQkJaWYgKG8oZSkpIHsKCQkJCQkJCXZhciBpID0gdGhpcywKCQkJCQkJCQlyID0gbygiPGRpdj4iLCB7CgkJCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLWZhdm9yLW1vZHVsZSAiICsgYS5leHRCcmFuZCArICItY2xvc2UtbW9kdWxlIgoJCQkJCQkJCX0pLm1vdXNlZW50ZXIoZnVuY3Rpb24oKSB7CgkJCQkJCQkJCWkuYm90dG9tX2xpc3RfZmF2b3IoKQoJCQkJCQkJCX0pLmFwcGVuZChvKCI8YT4iLCB7CgkJCQkJCQkJCWlkOiBhLmV4dEJyYW5kICsgIl9mYXZvciIsCgkJCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLXRhYiAiICsgYS5leHRCcmFuZCArICItZmF2b3IiLAoJCQkJCQkJCQlocmVmOiBhLmNfc2VydmVyICsgIi9taW5lL2NvbGxlY3Rpb24iLAoJCQkJCQkJCQl0aXRsZTogIuafpeeci+aIkeeahOWFqOe9keaUtuiXj+WkuSIsCgkJCQkJCQkJCXRhcmdldDogIl9ibGFuayIKCQkJCQkJCQl9KS5hcHBlbmQobygiPGVtPiIsIHsKCQkJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItZmF2b3ItYmciCgkJCQkJCQkJfSkpKS5hcHBlbmQobygiPGRpdj4iLCB7CgkJCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLWRldGFpbCAiICsgYS5leHRCcmFuZCArICItbm90LWxvZ2luICIgKyBhLmV4dEJyYW5kICsgIi1sb2FkaW5nIiwKCQkJCQkJCQkJaWQ6IGEuZXh0QnJhbmQgKyAiLWZhdm9yLWRldGFpbCIKCQkJCQkJCQl9KS5hcHBlbmQobygiPHA+IiwgewoJCQkJCQkJCQkiY2xhc3MiOiBhLmV4dEJyYW5kICsgIi1jb21wYXJlLWl0ZW0tZGV0YWlsLXRpdGxlICIgKyBhLmV4dEJyYW5kICsgIi1oZWlnaHQtYXV0byIKCQkJCQkJCQl9KS5hcHBlbmQobygiPHNwYW4+IiwgewoJCQkJCQkJCQkiY2xhc3MiOiBhLmV4dEJyYW5kICsgIi1kZXRhaWwtdGl0bGUtZGVzYyIKCQkJCQkJCQl9KS5odG1sKCfmiJHnmoTmlLbol48oPGVtIGlkPSInICsgYS5leHRCcmFuZCArICdfZmF2b3JfbnVtIj4wPC9lbT7kuKopJykpLmFwcGVuZChvKCI8YT4iLCB7CgkJCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLWJsdWUiLAoJCQkJCQkJCQlocmVmOiBhLmNfc2VydmVyICsgIi9taW5lL2NvbGxlY3Rpb24iLAoJCQkJCQkJCQl0YXJnZXQ6ICJfYmxhbmsiCgkJCQkJCQkJfSkuaHRtbCgi5p+l55yL5YWo6YOoIikpKS5hcHBlbmQobygiPGltZz4iLCB7CgkJCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLWxvYWRpbmctaW1nIiwKCQkJCQkJCQkJc3JjOiBhLnNfc2VydmVyICsgIi9pbWFnZXMvbG9hZGluZy5naWYiCgkJCQkJCQkJfSkpLmFwcGVuZChvKCI8cD4iLCB7CgkJCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLWxvZ2luLWluZm8iLAoJCQkJCQkJCQlzdHlsZTogInBhZGRpbmc6IDEycHggMHB4IDVweDsiCgkJCQkJCQkJfSkuaHRtbCgn6K+35YWIIDxhIGNsYXNzPSInICsgYS5leHRCcmFuZCArICctYmx1ZSIgaHJlZj0iJyArIGEuY19zZXJ2ZXIgKyAiL3VzZXIvbG9naW4/ZnJvbV91cmw9IiArIGVuY29kZVVSSUNvbXBvbmVudCh3aW5kb3cubG9jYXRpb24gJiYgd2luZG93LmxvY2F0aW9uLmhyZWYpICsgJyIgdGFyZ2V0PSJfc2VsZiI+55m75b2VPC9hPiDotK3nianlhZrvvIzmiJbkvb/nlKjnrKzkuInmlrnotKblj7fvvJonKSkuYXBwZW5kKG8oIjxwPiIsIHsKCQkJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItbG9naW4taW5mbyIsCgkJCQkJCQkJCXN0eWxlOiAiaGVpZ2h0Ojc1cHg7IgoJCQkJCQkJCX0pLmFwcGVuZChvKCI8YT4iLCB7CgkJCQkJCQkJCWhyZWY6IGEuY19zZXJ2ZXIgKyAiL3VzZXIvb2F1dGhoLz9wbD0yJm9wPWxvZ2luJmZyb21fdXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQod2luZG93LmxvY2F0aW9uICYmIHdpbmRvdy5sb2NhdGlvbi5ocmVmKSwKCQkJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItc2luYSAiICsgYS5leHRCcmFuZCArICItYmciLAoJCQkJCQkJCQl0YXJnZXQ6ICJfc2VsZiIKCQkJCQkJCQl9KSkuYXBwZW5kKG8oIjxhPiIsIHsKCQkJCQkJCQkJaHJlZjogYS5jX3NlcnZlciArICIvdXNlci9vYXV0aC8/cGw9NyZvcD1sb2dpbiZmcm9tX3VybD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5sb2NhdGlvbiAmJiB3aW5kb3cubG9jYXRpb24uaHJlZiksCgkJCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLXFxICIgKyBhLmV4dEJyYW5kICsgIi1iZyIsCgkJCQkJCQkJCXRhcmdldDogIl9zZWxmIgoJCQkJCQkJCX0pKSkuYXBwZW5kKG8oIjx1bD4iLCB7CgkJCQkJCQkJCWlkOiBhLmV4dEJyYW5kICsgIl9mYXZvcl9pdGVtX2xpc3QiLAoJCQkJCQkJCQkiY2xhc3MiOiBhLmV4dEJyYW5kICsgIi1pdGVtLWxpc3QiCgkJCQkJCQkJfSkpLmFwcGVuZChvKCI8c3Bhbj4iLCB7CgkJCQkJCQkJCWlkOiBhLmV4dEJyYW5kICsgIi1mYXZvci1ub3RpY2UiCgkJCQkJCQkJfSkuaGlkZSgpKS5hcHBlbmQobygiPGE+IiwgewoJCQkJCQkJCQlpZDogYS5leHRCcmFuZCArICJfYWRkX2Zhdm9yIiwKCQkJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItYWRkLWZhdm9yICIgKyBhLmV4dEJyYW5kICsgIi1iZyIsCgkJCQkJCQkJCWhyZWY6ICJqYXZhc2NyaXB0OnZvaWQoMCkiCgkJCQkJCQkJfSkudGV4dCgi5pS26JeP6K+l5ZWG5ZOBIikuY2xpY2soZnVuY3Rpb24oZSkgewoJCQkJCQkJCQllLnByZXZlbnREZWZhdWx0KCksIGkuYWRkX2Zhdm9yKCkKCQkJCQkJCQl9KSkpOwoJCQkJCQkJc3dpdGNoICh0KSB7CgkJCQkJCQkJY2FzZSAiYXBwZW5kIjoKCQkJCQkJCQkJbyhlKS5hcHBlbmQocik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgImFmdGVyIjoKCQkJCQkJCQkJbyhlKS5hZnRlcihyKTsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJZGVmYXVsdDoKCQkJCQkJCQkJbyhlKS5hZnRlcihyKQoJCQkJCQkJfQoJCQkJCQkJdHJ5IHsKCQkJCQkJCQkidGFvYmFvIiA9PSBhLnNpdGUgfHwgInRtYWxsIiA9PSBhLnNpdGUgfHwgYS5zaXRlLmluZGV4T2YoInRhb2JhbyIpID4gLTEgPyBuLmNvbGxlY3RJbmZvLmRwX2lkICYmIG4uZXhhY3RfYXJyLnRhb2Jhb19zYW1lX2lkICYmIG4uY29sbGVjdEluZm8uZHBfaWQgPT0gbi5leGFjdF9hcnIudGFvYmFvX3NhbWVfaWQgJiYgbi5jb2xsZWN0SW5mby5wcmljZSAmJiBwYXJzZUludChuLmNvbGxlY3RJbmZvLnByaWNlKSA+IDAgfHwgbygiIyIgKyBhLmV4dEJyYW5kICsgIl9hZGRfZmF2b3IiKS5yZW1vdmUoKSA6IG4ubm93ICYmICIiID09IG4ubm93Lm5vd19kcF9pZCAmJiBvKCIjIiArIGEuZXh0QnJhbmQgKyAiLWZhdm9yLWRldGFpbCAuIiArIGEuZXh0QnJhbmQgKyAiLWFkZC1mYXZvciIpLnJlbW92ZSgpCgkJCQkJCQl9IGNhdGNoIChzKSB7CgkJCQkJCQkJaWYgKGEuZGVidWcpIHRocm93IHMKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0sCgkJCQkJYWRkX2Zhdm9yOiBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCWUgPSBlIHx8ICIiLCB0ID0gdCB8fCAiIjsKCQkJCQkJdmFyIG4gPSB0aGlzLAoJCQkJCQkJaSA9IGEuY29sbGVjdEluZm87CgkJCQkJCWlmIChpLnByaWNlID0gYS5kcC5vbGRQcmljZSwgbygiIyIgKyBhLmV4dEJyYW5kICsgIl9hZGRfZmF2b3IiKS50ZXh0KCLmraPlnKjmlLbol48iKSwgIiIgIT0gaS50aXRsZSAmJiBpLnRpdGxlID8gKCIiID09IGkucHJpY2UgfHwgcGFyc2VGbG9hdChpLnByaWNlKSAhPSBpLnByaWNlKSAmJiAoaS5wcmljZSA9IDApIDogaS50aXRsZSA9IGEuZHAubmFtZSB8fCBvKCJ0aXRsZSIpLmh0bWwoKSwgIiIgPT0gaS5wcmljZSB8fCBpLnByaWNlIDw9IDApIHsKCQkJCQkJCXZhciByID0gcy5nZXRQcmljZUJlZm9yZUV4Y2hhbmdlUmF0ZShhLmRwLnByaWNlKTsKCQkJCQkJCWkucHJpY2UgPSByCgkJCQkJCX0KCQkJCQkJdmFyIGMgPSAiMCI7CgkJCQkJCWQuaXNfY29sbGVjdGVkICYmIChjID0gIjEiKSwgKCI4MyIgPT0gYS5zaXRlX2lkIHx8ICIxMjMiID09PSBhLnNpdGVfaWQpICYmIChpLmRwX2lkID0gaS5kcF9pZCArICItIiArIGEuc2l0ZV9pZCk7CgkJCQkJCXZhciBwID0gYS5jX3NlcnZlciArICIvY29sbGVjdC9hal9hZGQ/ZHBfaWQ9IiArIGkuZHBfaWQgKyAiJnVybD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGkudXJsIHx8IGxvY2F0aW9uLmhyZWYpICsgIiZpbWc9IiArIGVuY29kZVVSSUNvbXBvbmVudChpLmltZyB8fCBhLmRwLmltZykgKyAiJnRpdGxlPSIgKyBlbmNvZGVVUklDb21wb25lbnQoaS50aXRsZSkgKyAiJnByaWNlPSIgKyBpLnByaWNlICsgIiZzaXRlX2lkPSIgKyBpLnNpdGVfaWQgKyAiJmNhdF9pZD0iICsgYS5kcC5jYXRfaWQgKyAiJm5vdGlmeV9zaXRlPSIgKyBlICsgIiZub3RpZnlfcHJpY2U9IiArIHQgKyAiJmlzX2NvbGxlY3RlZD0iICsgYzsKCQkJCQkJbC5nZXQocCkuZG9uZShmdW5jdGlvbihlKSB7CgkJCQkJCQlvKCIjIiArIGEuZXh0QnJhbmQgKyAiX2FkZF9mYXZvciIpLnRleHQoIuaUtuiXj+ivpeWVhuWTgSIpLCAxMDAgPT0gZS5jb2RlIHx8IGUuY29kZSA8PSAwID8gKG8oIiMiICsgYS5leHRCcmFuZCArICJfYWRkX2Zhdm9yIikuaGlkZSgpLCBvKCIjIiArIGEuZXh0QnJhbmQgKyAiX2Zhdm9yX2l0ZW1fbGlzdCIpLmVtcHR5KCkuaGlkZSgpLCBvKCIjIiArIGEuZXh0QnJhbmQgKyAiLWZhdm9yLWRldGFpbCAuIiArIGEuZXh0QnJhbmQgKyAiLWxvZ2luLWluZm8iKS5zaG93KCkpIDogMSA9PSBlLmNvZGUgPyAoYS5jb2xsZWN0aW9uQ2hhbmdlZCA9ICEwLCBuLmJvdHRvbV9saXN0X2Zhdm9yKCksIG8oIiMiICsgYS5leHRCcmFuZCArICJfYWRkX2Zhdm9yIikudGV4dCgi5pS26JeP5oiQ5YqfIiksIG8oIiMiICsgYS5leHROYW1lICsgIi10cmVuZC1kZXRhaWwiKS5oaWRlKCksICJsdXlvdSIgPT0gYS5idHlwZSA/IChvKCJhLiIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF9idG5faGFuZGxlX2V2ZW50IGVtIikucmVtb3ZlQ2xhc3MoImNvbGxlY3QtbWFpbG91dC1pY29uIiksIG8oImEuIiArIGEuZXh0QnJhbmQgKyAiX3dpc2hsaXN0X2J0bl9oYW5kbGVfZXZlbnQgZW0iKS5hZGRDbGFzcygiY29sbGVjdC1tYWlsaW4taWNvbiIpKSA6IG8oImEuIiArIGEuZXh0QnJhbmQgKyAiX3dpc2hsaXN0X2J0bl9oYW5kbGVfZXZlbnQgZW0iKS5hZGRDbGFzcygiYWRkc3VjY2VzcyIpLCBvKCJhLiIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF9idG5faGFuZGxlX2V2ZW50IHNwYW4iKS50ZXh0KCLlt7Lmt7vliqDmj5DphpIiKSwgbygiZGl2LiIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF9idG5faGFuZGxlX2V2ZW50IikudGV4dCgi5bey5re75Yqg5o+Q6YaSIiksIG8oImEuIiArIGEuZXh0QnJhbmQgKyAiX3dpc2hsaXN0X2J0bl9oYW5kbGVfZXZlbnQiKS51bmJpbmQoImNsaWNrIiksIG8oImRpdi4iICsgYS5leHRCcmFuZCArICJfd2lzaGxpc3RfYnRuX2hhbmRsZV9ldmVudCIpLnVuYmluZCgiY2xpY2siKSkgOiAyID09IGUuY29kZSAmJiAobygiIyIgKyBhLmV4dEJyYW5kICsgIl9hZGRfZmF2b3IiKS50ZXh0KCLlt7Lmt7vliqDmj5DphpIiKSwgImx1eW91IiA9PSBhLmJ0eXBlICYmIChvKCJhLiIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF9idG5faGFuZGxlX2V2ZW50IGVtIikucmVtb3ZlQ2xhc3MoImNvbGxlY3QtbWFpbG91dC1pY29uIiksIG8oImEuIiArIGEuZXh0QnJhbmQgKyAiX3dpc2hsaXN0X2J0bl9oYW5kbGVfZXZlbnQgZW0iKS5hZGRDbGFzcygiY29sbGVjdC1tYWlsaW4taWNvbiIpKSwgbygiYS4iICsgYS5leHRCcmFuZCArICJfd2lzaGxpc3RfYnRuX2hhbmRsZV9ldmVudCBzcGFuIikudGV4dCgi5bey5re75Yqg5o+Q6YaSIiksIG8oImRpdi4iICsgYS5leHRCcmFuZCArICJfd2lzaGxpc3RfYnRuX2hhbmRsZV9ldmVudCIpLnRleHQoIuW3sua3u+WKoOaPkOmGkiIpLCBvKCJhLiIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF9idG5faGFuZGxlX2V2ZW50IikudW5iaW5kKCJjbGljayIpLCBvKCJkaXYuIiArIGEuZXh0QnJhbmQgKyAiX3dpc2hsaXN0X2J0bl9oYW5kbGVfZXZlbnQiKS51bmJpbmQoImNsaWNrIiksIGEuYnJvd3Nlci5hZ2VudCAmJiAidG1hbGwiID09IGEuc2l0ZSAmJiBuLmJvdHRvbV9saXN0X2Zhdm9yKCkpCgkJCQkJCX0pLmZhaWwoZnVuY3Rpb24oKSB7CgkJCQkJCQlvKCIjIiArIGEuZXh0QnJhbmQgKyAiX2FkZF9mYXZvciIpLnRleHQoIuaUtuiXj+WVhuWTgSIpCgkJCQkJCX0pCgkJCQkJfSwKCQkJCQlib3R0b21fbGlzdF9mYXZvcjogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gdGhpcywKCQkJCQkJCXQgPSBuKDEyMCksCgkJCQkJCQlpID0gdC5zaG93TGlzdFByaWNlLAoJCQkJCQkJcyA9IG4oMTM3KTsKCQkJCQkJKGEuY29sbGVjdGlvbkNoYW5nZWQgfHwgInRtYWxsIiA9PSBhLnNpdGUgfHwgIWEuYnJvd3Nlci5hZ2VudCkgJiYgKGEuY29sbGVjdGlvbkNoYW5nZWQgPSAhMSwgbygiIyIgKyBhLmV4dEJyYW5kICsgIi1mYXZvci1kZXRhaWwgLiIgKyBhLmV4dEJyYW5kICsgIi1sb2FkaW5nLWltZyIpLmNzcygidmlzaWJpbGl0eSIsICJ2aXNpYmxlIiksIGwuZ2V0KGEuY19zZXJ2ZXIgKyAiL2FwcC9jb2xsZWN0aW9uPyIpLmRvbmUoZnVuY3Rpb24odCkgewoJCQkJCQkJaWYgKG8oIiMiICsgYS5leHRCcmFuZCArICItZmF2b3ItZGV0YWlsIC4iICsgYS5leHRCcmFuZCArICItbG9hZGluZy1pbWciKS5jc3MoInZpc2liaWxpdHkiLCAiaGlkZGVuIiksIDEgPT0gdC5lcnJvcl9jb2RlKQoJCQkJCQkJCWlmIChvKCIjIiArIGEuZXh0QnJhbmQgKyAiLWZhdm9yLWRldGFpbCAuIiArIGEuZXh0QnJhbmQgKyAiLWxvZ2luLWluZm8iKS5oaWRlKCksICIiID09IGEuY29sbGVjdEluZm8uZHBfaWQgPyBvKCIjIiArIGEuZXh0QnJhbmQgKyAiX2FkZF9mYXZvciIpLmhpZGUoKSA6IG8oIiMiICsgYS5leHRCcmFuZCArICJfYWRkX2Zhdm9yIikuc2hvdygpLCBvKCIjIiArIGEuZXh0QnJhbmQgKyAiX2Zhdm9yX2l0ZW1fbGlzdCIpLmVtcHR5KCkuc2hvdygpLCB0LnByb2R1Y3RzLmxlbmd0aCA+IDApIHsKCQkJCQkJCQkJZm9yICh2YXIgbiA9IDA7IDMgPiBuICYmIG4gPCB0LnByb2R1Y3RzLmxlbmd0aDsgbisrKSB7CgkJCQkJCQkJCQl2YXIgbCA9IHQucHJvZHVjdHNbbl07CgkJCQkJCQkJCQlsLm5ld1ByaWNlID0gaShsLm5vd19wcmljZSwgbC5kcF9pZCksICLmmoLml7bnvLrotKciICE9IGwubmV3UHJpY2UgJiYgKGwuaGFzcHJpY2UgPSAhMCkKCQkJCQkJCQkJfQoJCQkJCQkJCQlvKCIjIiArIGEuZXh0QnJhbmQgKyAiX2Zhdm9yX2l0ZW1fbGlzdCIpLmFwcGVuZChyLmNvbXBpbGUocykoewoJCQkJCQkJCQkJZGF0YTogdC5wcm9kdWN0cy5zbGljZSgwLCAzKSwKCQkJCQkJCQkJCWV4dE5hbWU6IGEuZXh0TmFtZSwKCQkJCQkJCQkJCWV4dEJyYW5kOiBhLmV4dEJyYW5kCgkJCQkJCQkJCX0pKSwgbygiLiIgKyBhLmV4dEJyYW5kICsgIi1kZWwiKS5jbGljayhmdW5jdGlvbigpIHsKCQkJCQkJCQkJCWUuYm90dG9tX2RlbF9mYXZvcihvKHRoaXMpLmF0dHIoImRwX2lkIikpLCBvKCIjIiArIGEuZXh0QnJhbmQgKyAiX2FkZF9mYXZvciIpLnRleHQoIuaUtuiXj+WVhuWTgSIpCgkJCQkJCQkJCX0pLCBvKCIjIiArIGEuZXh0QnJhbmQgKyAiX2Zhdm9yX251bSIpLnRleHQodC50b3RhbF9jbnQpLCBvKCIjIiArIGEuZXh0QnJhbmQgKyAiX2Zhdm9yX2l0ZW1fbGlzdCBpbWciKS5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJCQkJCQkJdmFyIGUgPSBvKHRoaXMpOwoJCQkJCQkJCQkJZS5hdHRyKCJkYXRhLW9yaWdpbmFsIikgIT0gZS5hdHRyKCJzcmMiKSAmJiBhLmNoZWNrSW1hZ2UoZS5hdHRyKCJkYXRhLW9yaWdpbmFsIiksIGUsIDkwLCBmdW5jdGlvbigpIHsKCQkJCQkJCQkJCQllLmhlaWdodCgpIDwgNjAgJiYgZS5jc3MoIm1hcmdpblRvcCIsIDMwIC0gZS5oZWlnaHQoKSAvIDIpCgkJCQkJCQkJCQl9KQoJCQkJCQkJCQl9KQoJCQkJCQkJCX0gZWxzZSBvKCIjIiArIGEuZXh0QnJhbmQgKyAiX2Zhdm9yX251bSIpLnRleHQoIjAiKSwgbygiIyIgKyBhLmV4dEJyYW5kICsgIl9mYXZvcl9pdGVtX2xpc3QiKS5hcHBlbmQobygiPHA+IiwgewoJCQkJCQkJCQlzdHlsZTogInRleHQtaW5kZW50OiAyZW07bGluZS1oZWlnaHQ6IDIwcHg7cGFkZGluZzogMjZweCFpbXBvcnRhbnQ7IgoJCQkJCQkJCX0pLnRleHQoIuaCqOi/mOayoeacieaUtuiXj+WVhuWTgeOAguaUtuiXj+WQjuWPr+iOt+W+l+WVhuWTgemZjeS7ty/liLDotKfmj5DphpLvvIzluK7liqnmgqjlj4rml7blhaXmiYvmg7PopoHnmoTllYblk4HjgIIiKSk7CgkJCQkJCQllbHNlIDAgPT0gdC5lcnJvcl9jb2RlICYmIChvKCIjIiArIGEuZXh0QnJhbmQgKyAiX2FkZF9mYXZvciIpLmhpZGUoKSwgbygiIyIgKyBhLmV4dEJyYW5kICsgIl9mYXZvcl9pdGVtX2xpc3QiKS5lbXB0eSgpLmhpZGUoKSwgbygiIyIgKyBhLmV4dEJyYW5kICsgIi1mYXZvci1kZXRhaWwgLiIgKyBhLmV4dEJyYW5kICsgIi1sb2dpbi1pbmZvIikuc2hvdygpKQoJCQkJCQl9KS5mYWlsKGZ1bmN0aW9uKCkgewoJCQkJCQkJbygiIyIgKyBhLmV4dEJyYW5kICsgIl9mYXZvcl9pdGVtX2xpc3QiKS5hcHBlbmQobygiPHA+IiwgewoJCQkJCQkJCXN0eWxlOiAidGV4dC1pbmRlbnQ6IDJlbTtsaW5lLWhlaWdodDogMjBweDtwYWRkaW5nOiAyNnB4IWltcG9ydGFudDsiCgkJCQkJCQl9KS5odG1sKCfkurLvvIzkuI3lpb3mhI/mgJ3mnI3liqHlmajlvIDlsI/lt67kuobvvIzmi4nlj5bmlbDmja7lpLHotKXvvIzngrnlh7sgPGEgY2xhc3M9IicgKyBhLmV4dEJyYW5kICsgJy1ibHVlIiBocmVmPSJodHRwOi8vd3d3LicgKyBhLmV4dE5hbWUgKyAnLmNvbS9taW5lL2NvbGxlY3Rpb24/ZnJvbT1oYW8xMjMiIHRhcmdldD0iX2JsYW5rIj7mlLbol4/lpLk8L2E+IOafpeeci+abtOWkmi4uJykpLCBvKCIjIiArIGEuZXh0QnJhbmQgKyAiX2FkZF9mYXZvciIpLmhpZGUoKSwgbygiIyIgKyBhLmV4dEJyYW5kICsgIi1mYXZvci1kZXRhaWwgLiIgKyBhLmV4dEJyYW5kICsgIi1sb2FkaW5nLWltZyIpLmNzcygidmlzaWJpbGl0eSIsICJoaWRkZW4iKQoJCQkJCQl9KSkKCQkJCQl9LAoJCQkJCWJvdHRvbV9kZWxfZmF2b3I6IGZ1bmN0aW9uKGUpIHsKCQkJCQkJdmFyIHQgPSB0aGlzOwoJCQkJCQlsLmdldChhLmNfc2VydmVyICsgIi9jb2xsZWN0L2FqX2RlbD9kcF9pZD0iICsgZSkuZG9uZShmdW5jdGlvbihlKSB7CgkJCQkJCQkxID09IGUuY29kZSA/IChvKCIjIiArIGEuZXh0QnJhbmQgKyAiLWZhdm9yLW5vdGljZSIpLnNob3coKS50ZXh0KCLliKDpmaTmiJDlip8iKS5mYWRlT3V0KDNlMyksIGEuY29sbGVjdGlvbkNoYW5nZWQgPSAhMCwgdC5ib3R0b21fbGlzdF9mYXZvcigpKSA6IDEwMCA9PSBlLmNvZGUgPyAobygiIyIgKyBhLmV4dEJyYW5kICsgIl9hZGRfZmF2b3IiKS5oaWRlKCksIG8oIiMiICsgYS5leHRCcmFuZCArICJfZmF2b3JfaXRlbV9saXN0IikuZW1wdHkoKS5oaWRlKCksIG8oIiMiICsgYS5leHRCcmFuZCArICItZmF2b3ItZGV0YWlsIC4iICsgYS5leHRCcmFuZCArICItbG9naW4taW5mbyIpLnNob3coKSkgOiBhLmJyb3dzZXIuYWdlbnQgJiYgInRtYWxsIiA9PSBhLnNpdGUgJiYgKG8oIiMiICsgYS5leHRCcmFuZCArICItZmF2b3Itbm90aWNlIikuc2hvdygpLnRleHQoIuWIoOmZpOaIkOWKnyIpLmZhZGVPdXQoM2UzKSwgdC5ib3R0b21fbGlzdF9mYXZvcigpKQoJCQkJCQl9KS5mYWlsKGZ1bmN0aW9uKCkgewoJCQkJCQkJbygiIyIgKyBhLmV4dEJyYW5kICsgIi1mYXZvci1ub3RpY2UiKS5zaG93KCkudGV4dCgi5Yig6Zmk5oiQ5YqfIikuZmFkZU91dCgzZTMpCgkJCQkJCX0pCgkJCQkJfSwKCQkJCQljaGVja19mYXZvcjogZnVuY3Rpb24oZSkgewoJCQkJCQlpZiAoYS5lbWFpbCAmJiBlKSB7CgkJCQkJCQl2YXIgdCA9IGEuY19zZXJ2ZXIgKyAiL2Jyd2V4dC9jaGVja19jb2xsZWN0ZWQ/ZW1haWw9IiArIGEuZW1haWwgKyAiJmRwX2lkPSIgKyBlOwoJCQkJCQkJbC5nZXQodCkuZG9uZShmdW5jdGlvbihlKSB7CgkJCQkJCQkJZSAmJiBlLm1zZyA9PT0gITAgJiYgbygiI2d3ZF93aXNobGlzdF9idG4gc3BhbiIpLnRleHQoIuW3sua3u+WKoOaPkOmGkiIpCgkJCQkJCQl9KQoJCQkJCQl9CgkJCQkJfSwKCQkJCQlzaXRlUGF0dGVybjogewoJCQkJCQl2bWFsbDogWyIucHJvLXJpZ2h0IC5wcm8tbWV0YS1hcmVhIiwgIi5wcm8tcHJpY2UiXSwKCQkJCQkJeW91Z291OiBbIiN5Z3ByaWNlX2FyZWEiXSwKCQkJCQkJZ29tZTogWyIucHJkcHJpY2UiLCAiI2JhcmdhaW4iLCAiLnByZC1wcmljZS0xIl0sCgkJCQkJCXZpcHNob3A6IFsiLnBpLXByaWNlLWJveCJdLAoJCQkJCQkiMzYwYnV5IjogWyIjc3VtbWFyeS1wcmljZSIsICIuc3VtbWFyeS1wcmljZSIsICIjc3VycGx1cy10aW1lIiwgIiNwcm9kdWN0LWludHJvICNwcmljZSJdLAoJCQkJCQkiMzYwYnV5LWJvb2siOiBbIiNzdW1tYXJ5LXByaWNlIl0sCgkJCQkJCSIzNjBidXktcmUiOiBbIi5zaG9wX2ludHJvIC5zaG9wX2ludHJvX2EiXSwKCQkJCQkJdGFvYmFvOiBbIi50bS1mY3MtcGFuZWwiLCAiI0pfUHJvbW9QcmljZSIsICIjSl9TdHJQcmljZU1vZEJveCJdLAoJCQkJCQkidGFvYmFvLTk1MDk1IjogWyIudG0tZmNzLXBhbmVsIiwgIiNKX1Byb21vUHJpY2UiLCAiI0pfU3RyUHJpY2VNb2RCb3giXSwKCQkJCQkJdG1hbGw6IFsiLnRtLWZjcy1wYW5lbCIsICIjSl9Qcm9tb1ByaWNlIiwgIiNKX1N0clByaWNlTW9kQm94Il0sCgkJCQkJCSI1MWJ1eSI6IFsnLnhiYXNlX2l0ZW06Y29udGFpbnMoIuS/g+mUgOS7tyIpJywgJy54YmFzZV9pdGVtOmNvbnRhaW5zKCLmmJPov4Xku7ciKScsICIjZ29vZHNfZGV0YWlsX21hdGUgLml0ZW1faWNzb24iLCAiLnhiYXNlX3JvdzIiLCAiI3Byb21vdGVQcmljZSIsICIjc2hvcHByaWNlIiwgIiNwcm9tb3RlUHJpY2VBcmVhIl0sCgkJCQkJCXN1bmluZzogWyIjbm9QcmljZSIsICIjX21haW5fcHJpY2UiLCAiI2V4aXN0UHJpY2UiLCAiI25ldFByaWNlQm94IiwgIiNoYXNQcmljZSIsICIjcHJpY2VEb20iXSwKCQkJCQkJZGFuZ2Rhbmc6IFsiLmQxNV9wcmljZV9pbmZvIiwgIi5wcmljZV9xaWFuZyIsICIucHJpY2VfaW5mbyIsICIuc2hvd19pbmZvIC5zYWxlPnAiLCAiLnNhbGVfYm94OmZpcnN0Il0sCgkJCQkJCXlpaGFvZGlhbjogWyIjcG9pbnRfcHJvZHVjdFByaWNlIiwgIi5wcmljZV9hcnJheSIsICIjY3VycmVudFByaWNlQXJlYSJdLAoJCQkJCQl2YW5jbDogWyIjcHJpY2VhcmVhIC5jdXhpYW9QcmljZSJdLAoJCQkJCQluZXdlZ2c6IFsiLm5ld2VnZ1ByaWNlIiwgIi5nb29kc19wcmljZV9ub3ciXSwKCQkJCQkJa2FvbGE6IFsiLm0tcHJpY2UiXQoJCQkJCX0KCQkJCX0KCQkJfS5jYWxsKHQsIG4sIHQsIGUpLCAhKHZvaWQgMCAhPT0gaSAmJiAoZS5leHBvcnRzID0gaSkpCgkJfSkuY2FsbCh0LCBuKDEpLCBuKDYpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQl2YXIgaTsKCQkoZnVuY3Rpb24oYSkgewoJCQkidXNlIHN0cmljdCI7CgkJCWkgPSBmdW5jdGlvbigpIHsKCQkJCWZ1bmN0aW9uIGUoKSB7CgkJCQkJdmFyIGUgPSB1W2xvY2F0aW9uLmhvc3RdIHx8ICLvv6UiLAoJCQkJCQluID0gYS5jb2xsZWN0SW5mbzsKCQkJCQlpZiAobi5wcmljZSA9IGEuZHAub2xkUHJpY2UsIG4uaW1nID0gbi5pbWcgfHwgYS5kcC5pbWcgfHwgIiIsICIiID09IG4uaW1nKQoJCQkJCQlmb3IgKHZhciBpIGluIHIoImltZyIpKSB7CgkJCQkJCQl2YXIgbyA9IHIoImltZyIpLmVxKGkpLAoJCQkJCQkJCXMgPSBwYXJzZUludChyKG8pLndpZHRoKCkpLAoJCQkJCQkJCWwgPSBwYXJzZUludChyKG8pLmhlaWdodCgpKTsKCQkJCQkJCWlmIChzID49IDIwMCAmJiA4MDAgPj0gcyAmJiBsID49IDIwMCAmJiA4MDAgPj0gbCAmJiBzIC8gbCA+PSAuNSAmJiAxLjUgPj0gcyAvIGwpIHsKCQkJCQkJCQluLmltZyA9IHIobykuYXR0cigic3JjIik7CgkJCQkJCQkJYnJlYWsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCWlmIChuLnRpdGxlIHx8IChuLnRpdGxlID0gYS5kcC5uYW1lKSwgbi5pbWcgfHwgKG4uaW1nID0gYS5kcC5pbWcpLCAiIiA9PSBuLnVybCkgewoJCQkJCQl2YXIgYyA9IGRvY3VtZW50LmxvY2F0aW9uLmhyZWY7CgkJCQkJCW4udXJsID0gYwoJCQkJCX0KCQkJCQlpZiAoIiIgPT0gbi5wcmljZSB8fCBuLnByaWNlIDwgMCkgewoJCQkJCQl2YXIgcCA9IGQuZ2V0UHJpY2VCZWZvcmVFeGNoYW5nZVJhdGUoYS5kcC5vbGRQcmljZSk7CgkJCQkJCW4ucHJpY2UgPSBwCgkJCQkJfQoJCQkJCWEuY29sbGVjdEluZm8gPSBuOwoJCQkJCXZhciBoID0gIiI7CgkJCQkJYS5JRTYgJiYgYS5JRTcgJiYgKGggPSAibWFyZ2luLXRvcDotMjVweDsiKSwgcigiIyIgKyBhLmV4dE5hbWUgKyAiLWZhdm9yLWRldGFpbCB1bC5pdGVtLWxpc3QiKS5wcmVwZW5kKHIoIjxsaT4iLCB7CgkJCQkJCSJjbGFzcyI6ICJwb3AiLAoJCQkJCQlzdHlsZTogImhlaWdodDowIgoJCQkJCX0pLmFwcGVuZChyKCI8ZGl2PiIsIHsKCQkJCQkJImNsYXNzIjogInBpYyIKCQkJCQl9KS5hcHBlbmQocigiPGE+IiwgewoJCQkJCQlocmVmOiAiamF2YXNjcmlwdDoiCgkJCQkJfSkuYXBwZW5kKHIoIjxpbWc+IiwgewoJCQkJCQlzcmM6IGEuc2VydmVyICsgIi90ZW1wbGF0ZS9hdWcvaW1hZ2VzL25ldy8xMjAuZ2lmIiwKCQkJCQkJImRhdGEtb3JpZ2luYWwiOiBuLmltZywKCQkJCQkJZF93aWR0aDogNjAsCgkJCQkJCWRfaGVpZ2h0OiA2MCwKCQkJCQkJaWQ6IGEuZXh0TmFtZSArICItYWRkLWZhdm9yLWRwIgoJCQkJCX0pLmxvYWQoZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gcih0aGlzKSwKCQkJCQkJCXQgPSByKHRoaXMpLmF0dHIoImlkIik7CgkJCQkJCWUuYXR0cigiZGF0YS1vcmlnaW5hbCIpICE9IGUuYXR0cigic3JjIikgJiYgYS5jaGVja19pbWFnZShlLmF0dHIoImRhdGEtb3JpZ2luYWwiKSwgdCwgNjApCgkJCQkJfSkpKSkuYXBwZW5kKHIoIjx1bD4iLCB7CgkJCQkJCSJjbGFzcyI6ICJpdGVtLWluZm8iCgkJCQkJfSkuYXBwZW5kKHIoIjxsaT4iLCB7CgkJCQkJCSJjbGFzcyI6ICJ0bGUiCgkJCQkJfSkuYXBwZW5kKHIoIjxpbnB1dD4iKS52YWwobi50aXRsZSkua2V5dXAoZnVuY3Rpb24oKSB7CgkJCQkJCWEuY29sbGVjdEluZm8udGl0bGUgPSByKHRoaXMpLnZhbCgpCgkJCQkJfSkpKS5hcHBlbmQocigiPGxpPiIsIHsKCQkJCQkJImNsYXNzIjogInByaSIKCQkJCQl9KS5hcHBlbmQoZSkuYXBwZW5kKHIoIjxpbnB1dD4iKS52YWwobi5wcmljZSkua2V5dXAoZnVuY3Rpb24oKSB7CgkJCQkJCWEuY29sbGVjdEluZm8ubmV3cHJpY2UgPSByKHRoaXMpLnZhbCgpCgkJCQkJfSkpLmFwcGVuZChyKCI8YnV0dG9uPiIsIHsKCQkJCQkJc3R5bGU6IGgKCQkJCQl9KS50ZXh0KCLnoa7orqQiKS5jbGljayhmdW5jdGlvbihlKSB7CgkJCQkJCWUucHJldmVudERlZmF1bHQoKSwgdCgpCgkJCQkJfSkpKSkpCgkJCQl9CgoJCQkJZnVuY3Rpb24gdCgpIHsKCQkJCQl2YXIgZSA9IGEuY29sbGVjdEluZm87CgkJCQkJaWYgKGUucHJpY2UgPSBhLmRwLm9sZFByaWNlLCByKCIjIiArIGEuZXh0TmFtZSArICItZmF2b3ItZGV0YWlsIC5hZGQiKS50ZXh0KCLmraPlnKjmlLbol48iKSwgIiIgIT0gZS50aXRsZSAmJiBlLnRpdGxlID8gKCIiID09IGUucHJpY2UgfHwgcGFyc2VGbG9hdChlLnByaWNlKSAhPSBlLnByaWNlKSAmJiAoZS5wcmljZSA9IDApIDogZS50aXRsZSA9IGEuZHAubmFtZSB8fCByKCJ0aXRsZSIpLmh0bWwoKSwgIWUucHJpY2UgfHwgZS5wcmljZSA8IDApIHsKCQkJCQkJdmFyIHQgPSBkLmdldFByaWNlQmVmb3JlRXhjaGFuZ2VSYXRlKGEuZHAub2xkUHJpY2UpOwoJCQkJCQllLnByaWNlID0gdAoJCQkJCX0KCQkJCQlhLmNvbGxlY3RJbmZvLm5ld3ByaWNlICYmIChlLnByaWNlID0gYS5jb2xsZWN0SW5mby5uZXdwcmljZSksIGwuZ2V0KGEuY19zZXJ2ZXIgKyAiL2NvbGxlY3QvYWpfYWRkP2RwX2lkPSIgKyBlLmRwX2lkICsgIiZ1cmw9IiArIGVuY29kZVVSSUNvbXBvbmVudChlLnVybCB8fCBsb2NhdGlvbi5ocmVmKSArICImaW1nPSIgKyBlbmNvZGVVUklDb21wb25lbnQoZS5pbWcgfHwgYS5kcC5pbWcpICsgIiZ0aXRsZT0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGUudGl0bGUpICsgIiZwcmljZT0iICsgZS5wcmljZSArICImc2l0ZV9pZD0iICsgZS5zaXRlX2lkICsgIiZjYXRfaWQ9IiArIGEuZHAuY2F0X2lkKS5kb25lKGZ1bmN0aW9uKGUpIHsKCQkJCQkJcigiIyIgKyBhLmV4dE5hbWUgKyAiLWZhdm9yLWRldGFpbCAuYWRkIikudGV4dCgi5pS26JeP5ZWG5ZOBIiksIDEwMCA9PSBlLmNvZGUgfHwgZS5jb2RlIDw9IDAgPyAocigiIyIgKyBhLmV4dE5hbWUgKyAiLWZhdm9yLWRldGFpbCB1bC5pdGVtLWxpc3Q+bGlbY2xhc3MhPXBvcF0iKS5yZW1vdmUoKSwgcigiIyIgKyBhLmV4dE5hbWUgKyAiLWZhdm9yLWRldGFpbCAuYWRkIikuaGlkZSgpLCByKCIjIiArIGEuZXh0TmFtZSArICItZmF2b3ItZGV0YWlsIC5wb3AtbG9naW4iKS5zaG93KCkpIDogMSA9PSBlLmNvZGUgPyAocigiIyIgKyBhLmV4dE5hbWUgKyAiLWZhdm9yLWRldGFpbCAuZmF2b3Itbm90aWNlIikuc2hvdygpLnRleHQoIuaUtuiXj+aIkOWKnyIpLmZhZGVPdXQoM2UzKSwgcy5saXN0X2Zhdm9yKCksICJsdXlvdSIgPT0gYS5idHlwZSAmJiByKCJhLiIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF9idG5faGFuZGxlX2V2ZW50IGVtIikuYXR0cigiY2xhc3MiLCAiY29sbGVjdC1tYWlsaW4taWNvbiIpLCByKCJhLiIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF9idG5faGFuZGxlX2V2ZW50IHNwYW4iKS50ZXh0KCLmt7vliqDmiJDlip8iKSwgcigiZGl2LiR7Ry5leHRCcmFuZH1fd2lzaGxpc3RfYnRuX2hhbmRsZV9ldmVudCIpLnRleHQoIua3u+WKoOaIkOWKnyIpLCByKCJhLiIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF9idG5faGFuZGxlX2V2ZW50IikudW5iaW5kKCJjbGljayIpLCByKCJkaXYuJHtHLmV4dEJyYW5kfV93aXNobGlzdF9idG5faGFuZGxlX2V2ZW50IikudW5iaW5kKCJjbGljayIpKSA6IDIgPT0gZS5jb2RlICYmIChyKCIjIiArIGEuZXh0TmFtZSArICItZmF2b3ItZGV0YWlsIC5mYXZvci1ub3RpY2UiKS5zaG93KCkudGV4dCgi5pS26JeP6L+H5LqGIikuZmFkZU91dCgzZTMpLCAibHV5b3UiID09IGEuYnR5cGUgJiYgcigiYS4iICsgYS5leHRCcmFuZCArICJfd2lzaGxpc3RfYnRuX2hhbmRsZV9ldmVudCBlbSIpLmF0dHIoImNsYXNzIiwgImNvbGxlY3QtbWFpbGluLWljb24iKSwgcigiYS4iICsgYS5leHRCcmFuZCArICJfd2lzaGxpc3RfYnRuX2hhbmRsZV9ldmVudCBzcGFuIikudGV4dCgi5pS26JeP6L+H5LqGIiksIHIoImRpdi4ke0cuZXh0QnJhbmR9X3dpc2hsaXN0X2J0bl9oYW5kbGVfZXZlbnQiKS50ZXh0KCLmlLbol4/ov4fkuoYiKSwgcigiYS4iICsgYS5leHRCcmFuZCArICJfd2lzaGxpc3RfYnRuX2hhbmRsZV9ldmVudCIpLnVuYmluZCgiY2xpY2siKSwgcigiZGl2LiIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF9idG5faGFuZGxlX2V2ZW50IikudW5iaW5kKCJjbGljayIpLCBhLmJyb3dzZXIuYWdlbnQgJiYgInRtYWxsIiA9PSBhLnNpdGUgJiYgcy5saXN0X2Zhdm9yKCkpLCByKCIjIiArIGEuZXh0TmFtZSArICItZmF2b3ItZGV0YWlsIHVsLml0ZW0tbGlzdCAucG9wIikuYW5pbWF0ZSh7CgkJCQkJCQloZWlnaHQ6IDAKCQkJCQkJfSwgNTAwLCBmdW5jdGlvbigpIHsKCQkJCQkJCXIoIiMiICsgYS5leHROYW1lICsgIi1mYXZvci1kZXRhaWwgdWwuaXRlbS1saXN0IC5wb3AiKS5oaWRlKCkKCQkJCQkJfSkKCQkJCQl9KS5mYWlsKGZ1bmN0aW9uKCkgewoJCQkJCQlyKCIjIiArIGEuZXh0TmFtZSArICItZmF2b3ItZGV0YWlsIC5hZGQiKS50ZXh0KCLmlLbol4/llYblk4EiKSwgcigiIyIgKyBhLmV4dE5hbWUgKyAiLWZhdm9yLWRldGFpbCAuZmF2b3Itbm90aWNlIikuc2hvdygpLnRleHQoIuaUtuiXj+aIkOWKnyIpLmZhZGVPdXQoM2UzKSwgcy5saXN0X2Zhdm9yKCksIHIoIiMiICsgYS5leHROYW1lICsgIi1mYXZvci1kZXRhaWwgdWwuaXRlbS1saXN0IC5wb3AiKS5hbmltYXRlKHsKCQkJCQkJCWhlaWdodDogMAoJCQkJCQl9LCA1MDAsIGZ1bmN0aW9uKCkgewoJCQkJCQkJcigiIyIgKyBhLmV4dE5hbWUgKyAiLWZhdm9yLWRldGFpbCB1bC5pdGVtLWxpc3QgLnBvcCIpLmhpZGUoKQoJCQkJCQl9KQoJCQkJCX0pCgkJCQl9CgoJCQkJZnVuY3Rpb24gaShlKSB7CgkJCQkJbC5nZXQoYS5jX3NlcnZlciArICIvY29sbGVjdC9hal9kZWw/ZHBfaWQ9IiArIGUpLmRvbmUoZnVuY3Rpb24oZSkgewoJCQkJCQkxID09IGUuY29kZSA/IChyKCIjIiArIGEuZXh0TmFtZSArICItZmF2b3ItZGV0YWlsIC5mYXZvci1ub3RpY2UiKS5zaG93KCkudGV4dCgi5Yig6Zmk5oiQ5YqfIikuZmFkZU91dCgzZTMpLCBzLmxpc3RfZmF2b3IoKSkgOiAxMDAgPT0gZS5jb2RlID8gKHIoIiMiICsgYS5leHROYW1lICsgIi1mYXZvci1kZXRhaWwgdWwuaXRlbS1saXN0PmxpW2NsYXNzIT1wb3BdIikucmVtb3ZlKCksIHIoIiMiICsgYS5leHROYW1lICsgIi1mYXZvci1kZXRhaWwgLmFkZCIpLmhpZGUoKSwgcigiIyIgKyBhLmV4dE5hbWUgKyAiLWZhdm9yLWRldGFpbCAucG9wLWxvZ2luIikuc2hvdygpKSA6IGEuYnJvd3Nlci5hZ2VudCAmJiAidG1hbGwiID09IGEuc2l0ZSAmJiAocigiIyIgKyBhLmV4dE5hbWUgKyAiLWZhdm9yLWRldGFpbCAuZmF2b3Itbm90aWNlIikuc2hvdygpLnRleHQoIuWIoOmZpOaIkOWKnyIpLmZhZGVPdXQoM2UzKSwgcy5saXN0X2Zhdm9yKCkpCgkJCQkJfSkuZmFpbChmdW5jdGlvbigpIHsKCQkJCQkJcigiIyIgKyBhLmV4dE5hbWUgKyAiLWZhdm9yLWRldGFpbCAuZmF2b3Itbm90aWNlIikuc2hvdygpLnRleHQoIuWIoOmZpOaIkOWKnyIpLmZhZGVPdXQoM2UzKSwgcy5saXN0X2Zhdm9yKCkKCQkJCQl9KQoJCQkJfQoKCQkJCWZ1bmN0aW9uIG8oZSwgdCkgewoJCQkJCXZhciBuID0gdC5zcGxpdCgiLSIpLAoJCQkJCQlpID0gbltuLmxlbmd0aCAtIDFdOwoJCQkJCWlmICgwID4gZSkgcmV0dXJuICLmmoLml7bnvLrotKciOwoJCQkJCWlmIChwLmluZGV4T2YoaSkgPiAtMSkgewoJCQkJCQl2YXIgYSA9ICIyMjkiID09IGkgPyAiKOaXpeWFgykiIDogIiI7CgkJCQkJCXJldHVybiBoW2ldICsgZS50b1N0cmluZygpICsgYQoJCQkJCX0KCQkJCQlyZXR1cm4gIsKlIiArIGUudG9TdHJpbmcoKQoJCQkJfQoJCQkJdmFyIHIgPSBuKDYpLAoJCQkJCXMgPSB7fSwKCQkJCQlsID0gbig5KSwKCQkJCQljID0gbigxNiksCgkJCQkJZCA9IG4oNDApLAoJCQkJCXAgPSBbIjIyOCIsICIyNjYiLCAiMjQ2IiwgIjIyOSIsICIzNjUiLCAiMzY2IiwgIjEiLCAiMjM4IiwgIjIzMCJdLAoJCQkJCWggPSB7CgkJCQkJCTIyODogIiQiLAoJCQkJCQkyMzA6ICIkIiwKCQkJCQkJMjM4OiAiJCIsCgkJCQkJCTI2NjogIsKjIiwKCQkJCQkJMjQ2OiAiRVVSIiwKCQkJCQkJMjI5OiAiwqUiLAoJCQkJCQkzNjU6ICJFVVIiLAoJCQkJCQkzNjY6ICJDRE4kIiwKCQkJCQkJMTogIsKlIgoJCQkJCX0sCgkJCQkJdSA9IHsKCQkJCQkJInd3dy5hbWF6b24uY29tIjogIiQiLAoJCQkJCQkid3d3LmViYXkuY29tIjogIiQiLAoJCQkJCQkid3d3LjZwbS5jb20iOiAiJCIsCgkJCQkJCSJ3d3cuYW1hem9uLmNvLnVrIjogIsKjIiwKCQkJCQkJInd3dy5hbWF6b24uZGUiOiAiRVVSIiwKCQkJCQkJInd3dy5hbWF6b24uY28uanAiOiAiwqUiLAoJCQkJCQkid3d3LmFtYXpvbi5mciI6ICJFVVIiLAoJCQkJCQkid3d3LmFtYXpvbi5jYSI6ICJDRE4kIiwKCQkJCQkJInd3dy5hbWF6b24uY24iOiAiwqUiCgkJCQkJfTsKCQkJCXJldHVybiBzLmxpc3RfZmF2b3IgPSBmdW5jdGlvbigpIHsKCQkJCQlsLmdldChhLmNfc2VydmVyICsgIi9hcHAvY29sbGVjdGlvbiIpLmRvbmUoZnVuY3Rpb24oZSkgewoJCQkJCQlpZiAocigiIyIgKyBhLmV4dE5hbWUgKyAiLWZhdm9yLWRldGFpbCAubG9hZGluZyIpLmhpZGUoKSwgMSA9PSBlLmVycm9yX2NvZGUpCgkJCQkJCQlpZiAocigiIyIgKyBhLmV4dE5hbWUgKyAiLWZhdm9yLWRldGFpbCAucG9wLWxvZ2luIikuaGlkZSgpLCAiIiA9PSBhLmNvbGxlY3RJbmZvLmRwX2lkID8gcigiIyIgKyBhLmV4dE5hbWUgKyAiLWZhdm9yLWRldGFpbCAuYWRkIikuaGlkZSgpIDogcigiIyIgKyBhLmV4dE5hbWUgKyAiLWZhdm9yLWRldGFpbCAuYWRkIikuc2hvdygpLCByKCIjIiArIGEuZXh0TmFtZSArICItZmF2b3ItZGV0YWlsIHVsLml0ZW0tbGlzdD5saVtjbGFzcyE9cG9wXSIpLnJlbW92ZSgpLCByKCIjIiArIGEuZXh0TmFtZSArICItZmF2b3ItZGV0YWlsIHVsLml0ZW0tbGlzdCIpLmh0bWwoIiIpLnNob3coKSwgZS5wcm9kdWN0cy5sZW5ndGggPiAwKSB7CgkJCQkJCQkJZm9yICh2YXIgdCA9IDA7IDMgPiB0ICYmIHQgPCBlLnByb2R1Y3RzLmxlbmd0aDsgdCsrKSB7CgkJCQkJCQkJCXZhciBzID0gZS5wcm9kdWN0c1t0XTsKCQkJCQkJCQkJcy5uZXdQcmljZSA9IG8ocy5ub3dfcHJpY2UsIHMuZHBfaWQpLCAi5pqC5pe257y66LSnIiAhPSBzLm5ld1ByaWNlICYmIChzLmhhc3ByaWNlID0gITApCgkJCQkJCQkJfQoJCQkJCQkJCXZhciBsID0gbigxMjEpOwoJCQkJCQkJCXIoIiMiICsgYS5leHROYW1lICsgIi1mYXZvci1kZXRhaWwgdWwuaXRlbS1saXN0IikuYXBwZW5kKGMuY29tcGlsZShsKSh7CgkJCQkJCQkJCWRhdGE6IGUucHJvZHVjdHMuc2xpY2UoMCwgMyksCgkJCQkJCQkJCWV4dE5hbWU6IGEuZXh0TmFtZSwKCQkJCQkJCQkJc2VydmVyOiBhLnNlcnZlcgoJCQkJCQkJCX0pKSwgcigiIyIgKyBhLmV4dE5hbWUgKyAiLWZhdm9yLWRldGFpbCAuZGVsIikuY2xpY2soZnVuY3Rpb24oKSB7CgkJCQkJCQkJCWkocih0aGlzKS5hdHRyKCJkcF9pZCIpKSwgcigiIyIgKyBhLmV4dE5hbWUgKyAiLWZhdm9yLWRldGFpbCBhLmFkZCIpLnRleHQoIuaUtuiXj+WVhuWTgSIpCgkJCQkJCQkJfSksIHIoIiMiICsgYS5leHROYW1lICsgIi1mYXZvci1kZXRhaWwgdWwuaXRlbS1saXN0IikuYXBwZW5kKHIoIjxsaT4iLCB7CgkJCQkJCQkJCXN0eWxlOiAiZmxvYXQ6cmlnaHQ7aGVpZ2h0OjIwcHg7Y29sb3I6IzE3N0VFNTtib3JkZXI6MDsiCgkJCQkJCQkJfSkuYXBwZW5kKHIoIjxhPiIsIHsKCQkJCQkJCQkJaHJlZjogImh0dHBzOi8vd3d3LiIgKyBhLmV4dE5hbWUgKyAiLmNvbS9taW5lP21ldGhvZD1teUNvbGxlY3Rpb24mZnJvbT1icm93c2VyJm09ZmF2b3Imb3JkZXJieT1jb2xsZWN0aW9uX3RpbWUmb3JkZXI9ZGVzYyZwcmljZWRvd249MSIsCgkJCQkJCQkJCXN0eWxlOiAiY29sb3I6IzE3N0VFNTsiLAoJCQkJCQkJCQl0YXJnZXQ6ICJfYmxhbmsiCgkJCQkJCQkJfSkudGV4dCgi5p+l55yL5YWo6YOo77yIIiArIGUudG90YWxfY250ICsgIu+8iSIpKSksIHIoIiMiICsgYS5leHROYW1lICsgIi1mYXZvci1kZXRhaWwgdWwuaXRlbS1saXN0IGltZyIpLmVhY2goZnVuY3Rpb24oKSB7CgkJCQkJCQkJCXZhciBlID0gcih0aGlzKSwKCQkJCQkJCQkJCXQgPSByKHRoaXMpLmF0dHIoImlkIik7CgkJCQkJCQkJCWUuYXR0cigiZGF0YS1vcmlnaW5hbCIpICE9IGUuYXR0cigic3JjIikgJiYgYS5jaGVja19pbWFnZShlLmF0dHIoImRhdGEtb3JpZ2luYWwiKSwgdCwgNjApCgkJCQkJCQkJfSkKCQkJCQkJCX0gZWxzZSByKCIjIiArIGEuZXh0TmFtZSArICItZmF2b3ItZGV0YWlsIHVsLml0ZW0tbGlzdCIpLnRleHQoIuaCqOi/mOayoeacieaUtuiXj+WVhuWTgeOAguaUtuiXj+WQjuWPr+iOt+W+l+WVhuWTgemZjeS7ty/liLDotKfmj5DphpLvvIzluK7liqnmgqjlj4rml7blhaXmiYvmg7PopoHnmoTllYblk4HjgIIiKTsKCQkJCQkJZWxzZSAwID09IGUuZXJyb3JfY29kZSAmJiAocigiIyIgKyBhLmV4dE5hbWUgKyAiLWZhdm9yLWRldGFpbCB1bC5pdGVtLWxpc3QiKS5odG1sKCIiKSwgcigiIyIgKyBhLmV4dE5hbWUgKyAiLWZhdm9yLWRldGFpbCAuYWRkIikuaGlkZSgpLCByKCIjIiArIGEuZXh0TmFtZSArICItZmF2b3ItZGV0YWlsIC5wb3AtbG9naW4iKS5zaG93KCkpOwoJCQkJCQlhLmhpZGRlbkZhdm9yQnV0dG9uICYmIHIoIiMiICsgYS5leHROYW1lICsgIi1mYXZvci1kZXRhaWwgYS5hZGQiKS5oaWRlKCkKCQkJCQl9KS5mYWlsKGZ1bmN0aW9uKCkgewoJCQkJCQlyKCIjIiArIGEuZXh0TmFtZSArICItZmF2b3ItZGV0YWlsIC5sb2FkaW5nIikuaGlkZSgpLCByKCIjIiArIGEuZXh0TmFtZSArICItZmF2b3ItZGV0YWlsIHVsLml0ZW0tbGlzdCIpLmh0bWwoIiIpLCByKCIjIiArIGEuZXh0TmFtZSArICItZmF2b3ItZGV0YWlsIC5hZGQiKS5oaWRlKCksIHIoIiMiICsgYS5leHROYW1lICsgIi1mYXZvci1kZXRhaWwgLnBhbmVsLW1haW4iKS5odG1sKCLlvojmirHmrYnvvIzlv4PmhL/ljZXmmoLml7bkuI3mlK/mjIFJRTbjgIFJRTc8YnI+5bu66K6u5oKo5pu05paw5YiwSUU45Lul5LiK5YaN6K+V44CCIikuY3NzKCJjb2xvciIsICIjNjY2IikuY3NzKCJwYWRkaW5nIiwgIjVweCAxMHB4IikKCQkJCQl9KQoJCQkJfSwgcy50b2dnbGVfZmF2b3IgPSBmdW5jdGlvbigpIHsKCQkJCQl2YXIgbiA9IGEuY29sbGVjdEluZm87CgkJCQkJaWYgKCIiICE9IG4uZHBfaWQgJiYgIiIgIT0gbi5pbWcgJiYgIiIgIT0gbi50aXRsZSAmJiAiIiAhPSBuLnByaWNlICYmICIiICE9IG4udXJsKSB0KCk7CgkJCQkJZWxzZSB7CgkJCQkJCWlmICgwID09IHIoIiMiICsgYS5leHROYW1lICsgIi1mYXZvci1kZXRhaWwgdWwuaXRlbS1saXN0IC5wb3AiKS5sZW5ndGgpIHJldHVybiBlKCksIHZvaWQgcigiIyIgKyBhLmV4dE5hbWUgKyAiLWZhdm9yLWRldGFpbCB1bC5pdGVtLWxpc3QgLnBvcCIpLnNob3coKS5hbmltYXRlKHsKCQkJCQkJCWhlaWdodDogODIKCQkJCQkJfSwgNTAwLCBmdW5jdGlvbigpIHt9KTsKCQkJCQkJaWYgKDAgIT0gcigiIyIgKyBhLmV4dE5hbWUgKyAiLWZhdm9yLWRldGFpbCB1bC5pdGVtLWxpc3QgLnBvcCIpLmhlaWdodCgpKSByZXR1cm4gdm9pZCByKCIjIiArIGEuZXh0TmFtZSArICItZmF2b3ItZGV0YWlsIHVsLml0ZW0tbGlzdCAucG9wIikuYW5pbWF0ZSh7CgkJCQkJCQloZWlnaHQ6IDAKCQkJCQkJfSwgNTAwLCBmdW5jdGlvbigpIHsKCQkJCQkJCXIoIiMiICsgYS5leHROYW1lICsgIi1mYXZvci1kZXRhaWwgdWwuaXRlbS1saXN0IC5wb3AiKS5oaWRlKCkKCQkJCQkJfSk7CgkJCQkJCXIoIiMiICsgYS5leHROYW1lICsgIi1mYXZvci1kZXRhaWwgdWwuaXRlbS1saXN0IC5wb3AiKS5zaG93KCkuYW5pbWF0ZSh7CgkJCQkJCQloZWlnaHQ6IDgyCgkJCQkJCX0sIDUwMCwgZnVuY3Rpb24oKSB7fSkKCQkJCQl9CgkJCQl9LCBzLm1vbmV5U2lnbiA9IGgsIHMuc2hvd0xpc3RQcmljZSA9IG8sIHMKCQkJfS5jYWxsKHQsIG4sIHQsIGUpLCAhKHZvaWQgMCAhPT0gaSAmJiAoZS5leHBvcnRzID0gaSkpCgkJfSkuY2FsbCh0LCBuKDEpKQoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQllLmV4cG9ydHMgPSAne3tlYWNoIGRhdGF9fVxuPGxpPlxuICA8ZGl2IGNsYXNzPSJwaWMiPlxuICAgIDxhIHRhcmdldD0iX2JsYW5rIiBocmVmPSJ7eyR2YWx1ZS51cmx9fSI+XG4gICAgICA8aW1nIHNyYz0ie3tzZXJ2ZXJ9fS90ZW1wbGF0ZS9hdWcvaW1hZ2VzL25ldy8xMjAuZ2lmIiBkYXRhLW9yaWdpbmFsPSJ7eyR2YWx1ZS5waWNfdXJsfX0iIGRfd2lkdGg9IjYwIiBkX2hlaWdodD0iNjAiIGlkPSJ7e2V4dE5hbWV9fS1mYXZvci1kcHt7JHZhbHVlLmRwX2lkfX0iID5cbiAgICA8L2E+XG4gIDwvZGl2PlxuICA8dWwgY2xhc3M9Iml0ZW0taW5mbyI+XG4gICAgPGxpIGNsYXNzPSJ0bGUiPlxuICAgICAgPGEgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9Int7JHZhbHVlLnVybH19Ij57eyR2YWx1ZS50aXRsZX19PC9hPlxuICAgIDwvbGk+XG4gICAgPGxpIGNsYXNzPSJwcmkiPlxuICAgICAgPGEgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9Int7JHZhbHVlLnVybH19IiBjbGFzcz0icHJpY2UiPlxuICAgICAgICB7eyR2YWx1ZS5uZXdQcmljZX19XG4gICAgICAgIHt7aWYgJHZhbHVlLmhhc3ByaWNlfX1cbiAgICAgICAgPHNwYW4gc3R5bGU9ImNvbG9yOiMzMzMiPiDotbc8L3NwYW4+XG4gICAgICAgIHt7L2lmfX1cbiAgICAgIDwvYT5cbiAgICAgIDxhIGNsYXNzPSJkZWwiIGhyZWY9ImphdmFzY3JpcHQ6IiBkcF9pZD0ie3skdmFsdWUuZHBfaWR9fSI+5Yig6ZmkPC9hPlxuICAgIDwvbGk+XG4gIDwvdWw+XG48L2xpPlxue3svZWFjaH19JwoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQkidXNlIHN0cmljdCI7CgkJZS5leHBvcnRzID0gZnVuY3Rpb24oZSkgewoJCQlmb3IgKHZhciB0ID0gIiIsIG4gPSAwOyBuIDwgZS5sZW5ndGg7IG4rKykgdCA9IHQgKyAiXyIgKyBlLmNoYXJDb2RlQXQobikudG9TdHJpbmcoOCk7CgkJCXJldHVybiB0CgkJfQoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQllLmV4cG9ydHMgPSAne3tpZiBiamRfc2l0ZSA9PSBcJzM2MGJ1eVwnfX1cbjxkaXYgY2xhc3M9ImJqZF9wcmljZV82MThfZGl2Ij48c3BhbiBjbGFzcz0iYmpkX3ByaWNlXzYxOCI+5Y675bm0IDxzdHJvbmc+NjE4IDwvc3Ryb25nPuS7t+agvO+8mjxzdHJvbmc+PGVtPjwvZW0+PC9zdHJvbmc+PC9zcGFuPjwvZGl2Plxue3svaWZ9fVxuPGRpdiBpZD0ie3ttaW5pZG9tfX0iIGNsYXNzPSJ7e21pbmlkb219fSAiPlxuICA8YSBjbGFzcz0ie3tleHRCcmFuZH19X3dlYnNpdGVfaWNvbiIgaWQ9Int7ZXh0QnJhbmR9fV93ZWJzaXRlX2ljb24iIHt7aWYgIW5ld19leHRlbnNpb259fSB0aXRsZT0i6LSt54mp5YWaIiAgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9Imh0dHA6Ly93d3cue3tleHROYW1lfX0uY29tIiB7ey9pZn19PlxuICAgIDxlbSBjbGFzcz0ie3tleHRCcmFuZH19X2JnIj48L2VtPlxuICA8L2E+XG4gIDxhIGNsYXNzPSJ7e2V4dEJyYW5kfX1fd2lzaGxpc3RfYnRuIHt7ZXh0QnJhbmR9fV93aXNobGlzdF90cmVuZCIgaWQ9Int7ZXh0QnJhbmR9fV9wcmljZV9oaXN0b3J5X2J0biIgdGFyZ2V0PSJfc2VsZiIgdGl0bGU9Iuafpeeci+ivpeWVhuWTgeeahDE4MOS7t+agvOWOhuWPsiIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+XG4gICAgPGVtIGNsYXNzPSJ7e2V4dEJyYW5kfX1fYmcgcHJpY2UtdHJlbmQtaWNvbiI+PC9lbT5cbiAgICA8c3Bhbj7ku7fmoLzljoblj7I8L3NwYW4+XG4gIDwvYT5cbiAge3tpZiAhbmV3X2V4dGVuc2lvbn19XG4gIDxkaXYgY2xhc3M9InNodXhpYW4iIHN0eWxlPSJkaXNwbGF5Om5vbmUiPnw8L2Rpdj5cbiAgPGEgY2xhc3M9Int7ZXh0QnJhbmR9fV93aXNobGlzdF9idG4ge3tleHRCcmFuZH19X3dpc2hsaXN0X2J0bl9oYW5kbGVfZXZlbnQiIGlkPSJ7e2V4dEJyYW5kfX1fd2lzaGxpc3RfYnRuIiB0YXJnZXQ9Il9zZWxmIiB0aXRsZT0i5pS26JeP5Yiw6LSt54mp5YWa5YWo572R5pS26JeP5aS577yM5bm26I635b6X6ZmN5Lu35o+Q6YaSIj5cbiAgICA8ZW0gY2xhc3M9Int7ZXh0QnJhbmR9fV9iZyBjb2xsZWN0LW1haWxvdXQtaWNvbiI+PC9lbT5cbiAgICA8c3Bhbj7pmY3ku7fmj5DphpI8L3NwYW4+XG4gIDwvYT5cbiAgPGRpdiBjbGFzcz0ic2h1eGlhbiBzdWJzY3JpYmVfc2h1eGlhbiI+fDwvZGl2PlxuICA8ZGl2IGlkPSJ7e2V4dEJyYW5kfX0tYnJhbmQtc3Vic2NyaWJlLWJveCI+XG4gICAgPGEgY2xhc3M9Int7ZXh0QnJhbmR9fS1icmFuZC1zdWJzY3JpYmUiIGlkPSJ7e2V4dEJyYW5kfX0tYnJhbmQtc3Vic2NyaWJlLWJ0biIgdGl0bGU9IuWTgeeJjOeJueWNluaPkOWJjeefpemBkyIgPlxuICAgICAgPHNwYW4gY2xhc3M9Int7ZXh0QnJhbmR9fS1iZyB7e2V4dEJyYW5kfX0tYnJhbmQtc3Vic2NyaWJlLWljb24tYmx1ZSI+PC9zcGFuPlxuICAgICAgPHNwYW4gY2xhc3M9Int7ZXh0QnJhbmR9fS1icmFuZC1zdWJzY3JpYmUtdGV4dCI+5YWz5rOo5q2k5ZOB54mMPC9zcGFuPlxuICAgIDwvYT5cbiAgPC9kaXY+XG4gIHt7L2lmfX1cbiAgPGRpdiBpZD0ie3tleHRCcmFuZH19X3dpc2hsaXN0X3RyZW5kX2RldGFpbCI+XG4gICAgPGRpdiBpZD0ie3tleHRCcmFuZH19X3dpc2hsaXN0X3RyZW5kX2NvbXBhcmUiPlxuICAgICAgPGRpdiBpZD0idHJlbmRfZGV0YWlsX3RvcCI+5ZWG5Z+O5q+U5Lu3OjwvZGl2PlxuICAgICAgPGRpdiBpZD0idHJlbmRfZGV0YWlsX2JvZHkiPlxuICAgICAgICA8ZGl2IGlkPSJ0cmVuZF9kZXRhaWxfYm9keV91bCI+PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgaWQ9InRyZW5kX2RldGFpbF9ib3R0b20iPlxuICAgICAgICB7e2lmICFuZXdfZXh0ZW5zaW9ufX1cbiAgICAgICAgPGRpdiBpZD0idHJlbmRfZGV0YWlsX3JlbWFpbmVkX21lIiB0aXRsZT0i5pS26JeP5bm26ZmN5Lu35o+Q6YaSIiBjbGFzcz0ie3tleHRCcmFuZH19X3dpc2hsaXN0X2J0biB7e2V4dEJyYW5kfX1fd2lzaGxpc3RfYnRuX2hhbmRsZV9ldmVudCI+6ZmN5Lu35o+Q6YaSPC9kaXY+XG4gICAgICAgIHt7L2lmfX1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9Int7ZXh0QnJhbmR9fV93aXNobGlzdF90cmVuZF9kZXRhaWxfd3JhcHBlciIgc3R5bGU9ImZsb2F0OmxlZnQiPlxuICAgICAgPGRpdiBpZD0ie3tleHRCcmFuZH19X3dpc2hsaXN0X3RyZW5kX2RldGFpbF9jaGFydCI+PC9kaXY+XG4gICAgICA8ZGl2IGlkPSJ7e2V4dEJyYW5kfX1fd2lzaGxpc3RfdHJlbmRfZGV0YWlsX2luZm8iPjwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbiAgPGRpdiBzdHlsZT0iY2xlYXI6Ym90aCI+PC9kaXY+XG48L2Rpdj5cbjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+XG4gIC5iamRfcHJpY2VfNjE4X2RpdiB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2Y3ZjdmNztcbiAgfVxuICBkaXYuZmlyc3RfYXJlYV9tZCB7XG4gICAgaGVpZ2h0OiA1MDBweDtcbiAgfVxuICAuYmpkX3ByaWNlXzYxOCB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgd2lkdGg6IGF1dG87XG4gICAgICBoZWlnaHQ6IDI0cHg7XG4gICAgICBib3JkZXItcmFkaXVzOiAzcHg7XG4gICAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogMTJweDtcbiAgICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAxMnB4O1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgI2U2ZTllYjtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICBjb2xvcjogIzc5N0Q4MDtcbiAgICAgIGxpbmUtaGVpZ2h0OiAyNHB4O1xuICAgICAgcGFkZGluZzogMCAxMnB4IDAgMTBweDtcbiAgICB9XG4gICAgLmJqZF9wcmljZV82MTggZW0ge1xuICAgICAgY29sb3I6ICNFQzQ5NjY7XG4gICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgfVxuPC9zdHlsZT4nCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICc8ZGl2IGNsYXNzPSJ7e3dpc2hkb219fSIgc3R5bGU9ImZvbnQtc2l6ZTogMTJweCI+XG48ZGl2IGlkPSJ7e21pbmlkb219fSIgY2xhc3M9Imd3ZF93aXNobGlzdF9kaXYge3tpZiBhbGlTaXRlfX0gYWxpc2l0ZV9wYWdlIHt7L2lmfX0iPlxuICA8YSBjbGFzcz0iZ3dkX3dlYnNpdGUiIHRpdGxlPSLotK3nianlhZoiIGlkPSJnd2Rfd2Vic2l0ZV9pY29uIiB0YXJnZXQ9Il9ibGFuayIgaHJlZj0ie3tjX3NlcnZlcn19Ij5cbiAgICA8ZW0gY2xhc3M9InNldHRpbmctYmcgd2Vic2l0ZV9pY29uIj48L2VtPlxuICA8L2E+XG4gIDxhIGNsYXNzPSJnd2Rfd2lzaGxpc3RfYnRuIGd3ZF93aXNobGlzdF90cmVuZCIgaWQ9Imd3ZF9wcmljZV9oaXN0b3J5X2J0biIgIHN0eWxlPSIiPlxuICAgIDxlbSBjbGFzcz0ic2V0dGluZy1iZyBwcmljZS10cmVuZC1pY29uIj48L2VtPlxuICAgIDxzcGFuIHN0eWxlPSJmbG9hdDogbm9uZSI+5Lu35qC85Y6G5Y+yPC9zcGFuPlxuICA8L2E+XG4gIHt7aWYgIWFsaVNpdGV9fVxuICA8YSBjbGFzcz0iZ3dkX3dpc2hsaXN0X2J0biBnd2Rfd2lzaGxpc3RfY29tcGFyZSIgaWQ9Imd3ZF9taW5pX2NvbXBhcmUiPlxuICAgIDxzcGFuIGNsYXNzPSJtaW4tY29tLWJveCI+XG4gICAgICA8ZW0gY2xhc3M9InNldHRpbmctYmcgbWluaS1jb21wYXJlLWljb24iPjwvZW0+XG4gICAgICA8c3BhbiA+PC9zcGFuPlxuICAgIDwvc3Bhbj5cbiAgPC9hPlxuICB7ey9pZn19XG4gIDxhIGNsYXNzPSJnd2Rfd2lzaGxpc3RfYnRuIGd3ZF93aXNobGlzdF9idG5faGFuZGxlX2V2ZW50IiBpZD0iZ3dkX3dpc2hsaXN0X2J0biIgIHRpdGxlPSLmlLbol4/liLDotK3nianlhZrlhajnvZHmlLbol4/lpLnvvIzlubbojrflvpfpmY3ku7fmj5DphpIiPlxuICAgIDxkaXYgY2xhc3M9Indpc2hsaXN0LWJ0bi1ib3giPlxuICAgICAgPGVtIGNsYXNzPSJzZXR0aW5nLWJnIGNvbGxlY3RfbWFpbG91dF9pY29uIj48L2VtPlxuICAgICAgPHNwYW4+6ZmN5Lu35o+Q6YaSPC9zcGFuPlxuICAgIDwvZGl2PlxuICAgIFxuICA8L2E+XG4gIDxkaXYgaWQ9Imd3ZF9wcm9tb19ib3giPlxuICAgIDxkaXYgY2xhc3M9InByb21vX2JveF9sZWZ0Ij5cbiAgICAgIDx1bD5cbiAgICAgICAgXG4gICAgICA8L3VsPlxuICAgIDwvZGl2PlxuICAgIDxlbSBjbGFzcz0icHJvbW9fc2h1eGlhbiI+PC9lbT5cbiAgPC9kaXY+XG4gIDxkaXYgaWQ9Imd3ZF93aXNobGlzdF90cmVuZF9kZXRhaWwiPlxuICAgIDxkaXYgY2xhc3M9Imd3ZF93aXNobGlzdF90cmVuZF9kZXRhaWxfd3JhcHBlciIgc3R5bGU9ImZsb2F0OmxlZnQiPlxuICAgICAgPGRpdiBpZD0iZ3dkX3dpc2hsaXN0X3RyZW5kX2RldGFpbF9jaGFydCI+PC9kaXY+XG4gICAgICA8ZGl2IGlkPSJnd2Rfd2lzaGxpc3RfdHJlbmRfZGV0YWlsX2luZm8iPjwvZGl2PlxuICAgICAgPGRpdiBpZD0iZ3dkX3dpc2hsaXN0X3RyZW5kX2RldGFpbF9idG4iPlxuICAgICAgICA8c3BhbiBjbGFzcz0icHJpY2UtdHJlbmQtc3AgcHQtc3AxIHJldmlldy1iZyIgZGF0YS1pZD0icGxvdEFsbCI+PC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz0icmV2aWV3LXRyZW5kLXNwIHJldmlldy1iZyIgZGF0YS1pZD0icGxvdFNwZWNpYWwiPjwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgICAge3tpZiAhYWxpU2l0ZX19XG4gICAgPGRpdiBjbGFzcz0idHJlbmQtY29tLW1pbmkiPlxuICAgICAgXG4gICAgPC9kaXY+XG4gICAge3svaWZ9fVxuICAgIDxkaXYgY2xhc3M9InRyZW5kLW1heC1taW4tcHJpY2UiPlxuICAgICAgPHNwYW4gY2xhc3M9InQtbWF4LXByaSI+PC9zcGFuPlxuICAgICAgPHNwYW4gY2xhc3M9InQtbWluLXByaSI+PC9zcGFuPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbiAgPGRpdiBpZD0iZ3dkX3dpc2hsaXN0X3RyZW5kX2NvbXBhcmUiPlxuICAgICAgPGRpdiBpZD0idHJlbmRfZGV0YWlsX2JvZHlfdWwiPjwvZGl2PlxuICA8L2Rpdj5cbiAgPC9kaXY+XG4gIDxkaXYgaWQ9Indpc2hsaXN0LXNldHRpbmciPlxuICAgICAgPGEgY2xhc3M9InNldHRpbmctaXRlbSIgaHJlZj0ie3tzZXRVcmx9fSIgdGFyZ2V0PSJfYmxhbmsiPlxuICAgICAgICA8c3BhbiBjbGFzcz0ic2V0dGluZy1iZyBmdW5jdGlvbi1zZXR0aW5nIj48L3NwYW4+XG4gICAgICAgIDxzcGFuICBjbGFzcz0iaXRlbS10bGUiPuWKn+iDveiuvue9rjwvc3Bhbj5cbiAgICAgIDwvYT5cbiAgICAgIDxhIGNsYXNzPSJzZXR0aW5nLWl0ZW0iIGhyZWY9Int7ZmVlZGJhY2tVcmx9fSIgdGFyZ2V0PSJfYmxhbmsiPlxuICAgICAgICA8c3BhbiBjbGFzcz0ic2V0dGluZy1iZyBvcGluaW9uLWZlZWRiYWNrIj48L3NwYW4+XG4gICAgICAgIDxzcGFuICBjbGFzcz0iaXRlbS10bGUiPuaEj+ingeWPjemmiDwvc3Bhbj5cbiAgICAgIDwvYT5cbiAgICAgIDxhIGNsYXNzPSJzZXR0aW5nLWl0ZW0iIGhyZWY9Int7Y19zZXJ2ZXJ9fS8iIHRhcmdldD0iX2JsYW5rIj5cbiAgICAgICAgPHNwYW4gY2xhc3M9InNldHRpbmctYmcgaG9tZXBhZ2UiPjwvc3Bhbj5cbiAgICAgICAgPHNwYW4gIGNsYXNzPSJpdGVtLXRsZSI+6LSt54mp5YWa6aaW6aG1PC9zcGFuPlxuICAgICAgPC9hPlxuICA8L2Rpdj5cbiAgXG4gIDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+XG4gICAgLnJldmlldy1iZyB7XG4gICAgICBiYWNrZ3JvdW5kOiB1cmwoXCd7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMveGJ0L3Jldmlldy1iZy5wbmdcJykgbm8tcmVwZWF0O1xuICAgIH1cbiAgICAjZ3dkX3dpc2hsaXN0X3RyZW5kX2RldGFpbCAuc2VydmVyX251bSB7XG4gICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICBtYXJnaW4tYm90dG9tOiA5cHg7XG4gICAgfVxuICAgIC57e3dpc2hkb219fSBzcGFuIHtcbiAgICAgIGxpbmUtaGVpZ2h0OiBpbmhlcml0O1xuICAgIH1cbiAgICBkaXYuZmlyc3RfYXJlYV9tZCB7XG4gICAgICBoZWlnaHQ6IDUwMHB4O1xuICAgIH1cbiAgICAjd2lzaGxpc3Qtc2V0dGluZyB7XG4gICAgICBoZWlnaHQ6IDkwcHg7XG4gICAgICB3aWR0aDogMTA0cHg7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgICAgdG9wOiAzNnB4O1xuICAgICAgbGVmdDogMHB4O1xuICAgICAgei1pbmRleDogOTk5O1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlZGYxZjI7XG4gICAgfVxuICAgIFxuICAgIC5mdW5jdGlvbi1zZXR0aW5nIHtcbiAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IC04NXB4IC04cHg7XG4gICAgfVxuICAgIC5zZXR0aW5nLWl0ZW06aG92ZXIgLmZ1bmN0aW9uLXNldHRpbmcge1xuICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTExMXB4IC04cHg7XG4gICAgfVxuICAgIC5vcGluaW9uLWZlZWRiYWNrIHtcbiAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IC0xODhweCAtOHB4O1xuICAgIH1cbiAgICAuc2V0dGluZy1pdGVtOmhvdmVyIC5vcGluaW9uLWZlZWRiYWNrIHtcbiAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IC0yMTRweCAtOHB4O1xuICAgIH1cbiAgICAuaG9tZXBhZ2Uge1xuICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTEzN3B4IC04cHg7XG4gICAgfVxuICAgIC5zZXR0aW5nLWl0ZW06aG92ZXIgLmhvbWVwYWdlIHtcbiAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IC0xNjNweCAtOHB4O1xuICAgIH1cbiAgICAjd2lzaGxpc3Qtc2V0dGluZyAuc2V0dGluZy1pdGVtIHtcbiAgICAgIHdpZHRoOiAxMDRweDtcbiAgICAgIGhlaWdodDogMzBweDtcbiAgICAgIGxpbmUtaGVpZ2h0OiAzMHB4O1xuICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgfVxuICAgICN3aXNobGlzdC1zZXR0aW5nIC5zZXR0aW5nLWl0ZW06aG92ZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2VkZjFmMjtcbiAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICB9XG4gICAgLnNldHRpbmctaXRlbSAuc2V0dGluZy1iZyB7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIGhlaWdodDogMjBweDtcbiAgICAgIHdpZHRoOiAyMHB4O1xuICAgICAgbWFyZ2luLXRvcDogNHB4O1xuICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7XG4gICAgICBtYXJnaW4tcmlnaHQ6IDhweDtcbiAgICB9XG4gICAgLnNldHRpbmctaXRlbSAuaXRlbS10bGUge1xuICAgICAgY29sb3I6ICM5Njk2OTk7XG4gICAgfVxuICAgIC5zZXR0aW5nLWl0ZW06aG92ZXIgLml0ZW0tdGxlIHtcbiAgICAgIGNvbG9yOiAjNGU0ZTYxO1xuICAgIH0gXG4gICAgI2d3ZF9zZXR0aW5nX2NvbnRlbnQgLmd3ZF9zZXR0aW5nX2l0ZW0gYSB7XG4gICAgICBmb250LWZhbWlseTogIk1pY3Jvc29mdCBZYWhlaSIhaW1wb3J0YW50O1xuICAgIH1cblxuICAgIC5nd2Rfd2lzaGxpc3RfYnRuIHtcbiAgICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgI2VkZjFmMiFpbXBvcnRhbnQ7XG4gICAgfVxuICAgICNnd2Rfd2lzaGxpc3RfYnRuIHtcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICB9XG4gICAgLndpc2hsaXN0LWJ0bi1ib3gge1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgbWFyZ2luOiAwIGF1dG87XG4gICAgfVxuXG4gICAgLmd3ZF93aXNobGlzdF9idG4ubXNob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kOiAjZWRmMWYyO1xuICAgICAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcbiAgICB9XG4gICAgLmd3ZF93aXNobGlzdF9kaXYgI2d3ZF93aXNobGlzdF90cmVuZF9kZXRhaWwge1xuICAgICAgYm94LXNoYWRvdzogMHB4IDVweCAxNXB4IDAgcmdiYSgyMywyNSwyNywwLjE1KTtcbiAgICAgIHdpZHRoOiA1NzRweDtcbiAgICB9XG4gICAgLmFsaXNpdGVfcGFnZS5nd2Rfd2lzaGxpc3RfZGl2ICNnd2Rfd2lzaGxpc3RfdHJlbmRfZGV0YWlsIHtcbiAgICAgIHdpZHRoOiA0NjBweDtcbiAgICB9XG4gICAgLmd3ZF93aXNobGlzdF90cmVuZF9kZXRhaWxfd3JhcHBlciB7XG4gICAgICBoZWlnaHQ6IDI4NXB4O1xuICAgICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgI2VkZjFmMjtcbiAgICB9XG4gICAgI2d3ZF93aXNobGlzdF90cmVuZF9jb21wYXJle1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgbWFyZ2luOiAwcHggMCAxMnB4IDBweDtcbiAgICAgIGhlaWdodDogYXV0bztcbiAgICAgIHdpZHRoOiAyNzhweDtcbiAgICAgIHRvcDogMzZweDtcbiAgICAgIGxlZnQ6IDExNXB4O1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCAjZWRmMWYyO1xuICAgICAgYm94LXNoYWRvdzogMCAycHggNHB4IDAgcmdiYSgwLDAsMCwwLjExKTtcbiAgICB9XG4gICAgI2d3ZF93aXNobGlzdF90cmVuZF9jb21wYXJlIGxpIHtcbiAgICAgIGhlaWdodDogNDBweDtcbiAgICB9XG4gICAgI2d3ZF93aXNobGlzdF90cmVuZF9jb21wYXJlIGxpIGEge1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgaGVpZ2h0OiAzOXB4O1xuICAgICAgd2lkdGg6IDI0OHB4O1xuICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZGYxZjE7XG4gICAgICBtYXJnaW4tbGVmdDogMTVweDtcbiAgICB9XG4gICAgI2d3ZF93aXNobGlzdF90cmVuZF9jb21wYXJlIGxpOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlZGYxZjE7XG4gICAgfVxuICAgICNnd2Rfd2lzaGxpc3RfdHJlbmRfY29tcGFyZSBsaSAqIHtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgIH1cbiAgICAjZ3dkX3dpc2hsaXN0X3RyZW5kX2NvbXBhcmUgbGkgaW1nIHtcbiAgICAgIHdpZHRoOiAxNnB4O1xuICAgICAgbWFyZ2luLXRvcDogMTJweDtcbiAgICAgIG1hcmdpbi1yaWdodDogMTRweDtcbiAgICB9XG4gICAgI2d3ZF93aXNobGlzdF90cmVuZF9jb21wYXJlIGxpIC5tLWl0ZW0tc2l0ZW5hbWUge1xuICAgICAgd2lkdGg6IDEwMHB4O1xuICAgICAgbWFyZ2luLXJpZ2h0OiA2cHg7XG4gICAgICBsaW5lLWhlaWdodDogNDBweDtcbiAgICAgIGhlaWdodDogNDBweDtcbiAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgIGNvbG9yOiAjNDA0NTQ3O1xuICAgIH1cbiAgICAjZ3dkX3dpc2hsaXN0X3RyZW5kX2NvbXBhcmUgbGkgLm0taXRlbS1wcmljZSB7XG4gICAgICBjb2xvcjogI0QxMDgzMTtcbiAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgIGZsb2F0OiByaWdodDtcbiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIH1cbiAgICAjZ3dkX3dpc2hsaXN0X3RyZW5kX2NvbXBhcmUgLm0tYWxsLWxpbmsge1xuICAgICAgY29sb3I6ICM1ZWJlZmYhaW1wb3J0YW50O1xuICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lIWltcG9ydGFudDtcbiAgICAgIGZsb2F0OiByaWdodDtcbiAgICAgIGhlaWdodDogMTJweDtcbiAgICAgIGxpbmUtaGVpZ2h0OiAxMnB4O1xuICAgICAgbWFyZ2luLXJpZ2h0OiA5cHg7XG4gICAgICBtYXJnaW4tdG9wOiAxNXB4O1xuICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICB9XG4gICAgI3t7bWluaWRvbX19Lmd3ZF93aXNobGlzdF9kaXYge1xuICAgICAgd2lkdGg6IDQ2MHB4O1xuICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgaGVpZ2h0OiAzNnB4O1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICB9XG4gICAgI3t7bWluaWRvbX19ICAuZ3dkX3dpc2hsaXN0X3RyZW5kIHtcbiAgICAgIHdpZHRoOiAxMjdweDtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgfVxuICAgICN7e21pbmlkb219fSAjZ3dkX21pbmlfY29tcGFyZS5nd2Rfd2lzaGxpc3RfY29tcGFyZSB7XG4gICAgICB3aWR0aDogMTU1cHg7XG4gICAgICBjdXJzb3I6IGRlZmF1bHQ7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgICAuZ3dkX3dpc2hsaXN0X2NvbXBhcmUubm8tY29tLWluZm8ge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2VkZjFmMjtcbiAgICB9XG4gICAgLmd3ZF93aXNobGlzdF9jb21wYXJlLmd3ZF93aXNobGlzdF9jb21wYXJlX2hvdmVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlZGYxZjI7XG4gICAgfVxuICAgIC5nd2Rfd2lzaGxpc3RfY29tcGFyZS5uby1jb20taW5mbyAubWluLWNvbS1ib3ggc3BhbiB7XG4gICAgICBjb2xvcjogIzk5OSFpbXBvcnRhbnQ7XG4gICAgfVxuXG4gICAgI3t7bWluaWRvbX19LmFsaXNpdGVfcGFnZSAuZ3dkX3dpc2hsaXN0X3RyZW5kIHtcbiAgICAgIHdpZHRoOiAyMDVweDtcbiAgICB9XG4gICAgI3t7bWluaWRvbX19LmllaGFjayB7XG4gICAgICB6LWluZGV4OiA5OTk5OTk5OTk5O1xuICAgIH1cbiAgICAje3ttaW5pZG9tfX0gI2d3ZF9wcmljZV9oaXN0b3J5X2J0bi5fbm9wcmljZSB7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICBjb2xvcjogIzk5OTtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlZWU7XG4gICAgfVxuICAgICNnd2RfcHJpY2VfaGlzdG9yeV9idG4uX25vcHJpY2UgZW0ge1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG4gICAgI3t7bWluaWRvbX19IC5zaHV4aWFuIHtcbiAgICAgIHdpZHRoOiAycHg7XG4gICAgfVxuICAgICN7e21pbmlkb219fS5nd2Rfd2lzaGxpc3RfZGl2IGEjZ3dkX3dpc2hsaXN0X2J0biB7XG4gICAgICB3aWR0aDogMTI3cHg7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgfVxuICAgICN7e21pbmlkb219fS5nd2Rfd2lzaGxpc3RfZGl2LmFsaXNpdGVfcGFnZSBhI2d3ZF93aXNobGlzdF9idG4ge1xuICAgICAgd2lkdGg6IDIwNXB4O1xuICAgIH1cbiAgICAubWluLWNvbS1ib3gge1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgbWFyZ2luOiAwIGF1dG87XG4gICAgfVxuICAgIC5taW5pLWNvbXBhcmUtaWNvbiB7XG4gICAgICB3aWR0aDogMjJweDtcbiAgICAgIGhlaWdodDogMjJweDtcbiAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIG1hcmdpbi1yaWdodDogOHB4O1xuICAgICAgbWFyZ2luLXRvcDogN3B4O1xuICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTlweCAtMTA5cHg7XG4gICAgfVxuICAgIC5nd2Rfd2lzaGxpc3RfY29tcGFyZV9ob3ZlciAubWluaS1jb21wYXJlLWljb24ge1xuICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTQwcHggLTEwOXB4O1xuICAgIH1cbiAgICAuZ3dkX3dpc2hsaXN0X2NvbXBhcmUubm8tY29tLWluZm8gLm1pbmktY29tcGFyZS1pY29uIHtcbiAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IC03MnB4IC0xMDlweDtcbiAgICB9XG4gICAgI3t7bWluaWRvbX19IC5nd2Rfd2lzaGxpc3RfYnRuIC5wcmljZS10cmVuZC1pY29uIHtcbiAgICAgIG1hcmdpbi1sZWZ0OiAxOXB4O1xuICAgICAgbWFyZ2luLXJpZ2h0OiA5cHg7XG4gICAgfVxuICAgICN7e21pbmlkb219fS5hbGlzaXRlX3BhZ2UgLmd3ZF93aXNobGlzdF9idG4gLnByaWNlLXRyZW5kLWljb24ge1xuICAgICAgbWFyZ2luLWxlZnQ6IDU3cHg7XG4gICAgfVxuICAgICN7e21pbmlkb219fS5nd2Rfd2lzaGxpc3RfZGl2IGEuZ3dkX3dpc2hsaXN0X2J0biB7XG4gICAgICBwYWRkaW5nOiAwcHg7XG4gICAgfVxuICAgIGEjZ3dkX3dpc2hsaXN0X2J0biBzcGFuIHtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgIH1cbiAgICAud2Vic2l0ZV9pY29uLCAuY29sbGVjdF9tYWlsb3V0X2ljb24ge1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgIH1cbiAgICBcbiAgICAje3ttaW5pZG9tfX0gLmd3ZF93ZWJzaXRle1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICB3aWR0aDogNDhweDtcbiAgICB9XG4gICAgI3t7bWluaWRvbX19IC5nd2Rfd2Vic2l0ZSAud2Vic2l0ZV9pY29uIHtcbiAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IC0xMHB4IC0yOHB4O1xuICAgICAgaGVpZ2h0OiAzNnB4O1xuICAgICAgd2lkdGg6IDI1cHg7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIG1hcmdpbi1sZWZ0OiAxMnB4O1xuICAgIH1cbiAgICAuY29sbGVjdF9tYWlsb3V0X2ljb24ge1xuICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTEyNHB4IC0zMHB4O1xuICAgICAgaGVpZ2h0OiAzMHB4O1xuICAgICAgd2lkdGg6IDMwcHg7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIG1hcmdpbi1yaWdodDogNXB4O1xuICAgIH1cbiAgICAuY29sbGVjdF9tYWlsb3V0X2ljb24uYWRkc3VjY2VzcyB7XG4gICAgICBtYXJnaW4tcmlnaHQ6IDBweDtcbiAgICB9XG4gICAgLmNvbGxlY3RfbWFpbG91dF9pY29uLmNvbGxlY3RfaG92ZXIge1xuICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE1NXB4IC0zMHB4O1xuICAgIH1cbiAgICAje3ttaW5pZG9tfX0gYS5nd2Rfd2lzaGxpc3RfdHJlbmRfaG92ZXIge1xuICAgICAgLypib3JkZXI6IDFweCBzb2xpZCAjMTc5MGRkOyovXG4gICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VkZjFmMjtcbiAgICAgIGJhY2tncm91bmQ6ICNlZGYxZjI7XG4gICAgfVxuICAgICN7e21pbmlkb219fSAjdHJlbmRfZGV0YWlsX3JlbWFpbmVkX21lIHtcbiAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICB9XG4gICAgI3t7bWluaWRvbX19Lm9uZWxpbmV7XG4gICAgICBoZWlnaHQ6IDc2cHg7XG4gICAgfVxuICAgICN7e21pbmlkb219fS50d29saW5lc3tcbiAgICAgIGhlaWdodDogMTA2cHg7XG4gICAgfVxuICAgIC5nd2Rfd2lzaGxpc3RfYm94IHtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgaGVpZ2h0OiAxNjBweDtcbiAgICB9XG4gICAgLmd3ZF9uZXdlZ2cgLmd3ZF93aXNobGlzdF9ib3h7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICB9XG4gICAgI2d3ZF9wcm9tb19ib3gge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgdG9wOiAzNnB4O1xuICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlOGU4ZTg7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGhlaWdodDogNzBweDtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgbGVmdDogMHB4O1xuICAgIH1cbiAgICAje3ttaW5pZG9tfX0ub25lbGluZSAjZ3dkX3Byb21vX2JveCB7XG4gICAgICBoZWlnaHQ6IDM5cHg7XG4gICAgfVxuICAgIFxuICAgICNnd2RfcHJvbW9fYm94ID5kaXYge1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgd2lkdGg6IDQ4MHB4O1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICBoZWlnaHQ6IDY5cHg7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIH1cbiAgICAje3ttaW5pZG9tfX0ub25lbGluZSAjZ3dkX3Byb21vX2JveCBkaXYge1xuICAgICAgaGVpZ2h0OiAzOXB4O1xuICAgIH1cbiAgICAje3ttaW5pZG9tfX0udGlyZGxpbmVzICNnd2RfcHJvbW9fYm94IGRpdiB7XG4gICAgICBoZWlnaHQ6IDc1cHg7XG4gICAgfVxuICAgICNnd2RfcHJvbW9fYm94IC5wcm9tb19ib3hfbGVmdCB1bCB7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIHdpZHRoOiA0ODBweDtcbiAgICAgIGhlaWdodDogNjlweDtcbiAgICB9XG4gICAgLm9uZWxpbmUgI2d3ZF9wcm9tb19ib3ggLnByb21vX2JveF9sZWZ0IHVsIHtcbiAgICAgIGhlaWdodDogMzlweDtcbiAgICB9XG4gICAgI2d3ZF9wcm9tb19ib3ggZGl2IGxpIHtcbiAgICAgIGxpbmUtaGVpZ2h0OiAxNnB4O1xuICAgICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgcGFkZGluZzogMHB4O1xuICAgICAgd2lkdGg6IDIwMnB4O1xuICAgIH1cbiAgICAjZ3dkX3Byb21vX2JveCBkaXYgbGkubGlfMCwgI2d3ZF9wcm9tb19ib3ggZGl2IGxpLmxpXzEge1xuICAgICAgbWFyZ2luLXRvcDogMTNweDtcbiAgICB9XG4gICAgI2d3ZF9wcm9tb19ib3ggZGl2IGxpLmxpXzAsICNnd2RfcHJvbW9fYm94IGRpdiBsaS5saV8yIHtcbiAgICAgIG1hcmdpbi1sZWZ0OiAxNHB4O1xuICAgIH1cbiAgICAjZ3dkX3Byb21vX2JveCBkaXYgbGkubGlfMSwgI2d3ZF9wcm9tb19ib3ggZGl2IGxpLmxpXzMge1xuICAgICAgbWFyZ2luLWxlZnQ6IDI5cHg7XG4gICAgfVxuICAgICNnd2RfcHJvbW9fYm94IGRpdiBsaS5saV8yLCAjZ3dkX3Byb21vX2JveCBkaXYgbGkubGlfM3tcbiAgICAgIG1hcmdpbi1ib3R0b206IDEzcHg7XG4gICAgfVxuICAgIC5wcm9tb19zaHV4aWFuIHtcbiAgICAgIHdpZHRoOiAxcHg7XG4gICAgICBsZWZ0OiAyMzBweDtcbiAgICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgI2U4ZThlODtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB9XG4gICAgLnByb21vX3NodXhpYW4ge1xuICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgIH1cbiAgICAjZ3dkX3Byb21vX2JveCBkaXYgbGkgYSB7XG4gICAgICB3aWR0aDogMTcwcHg7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgaGVpZ2h0OiAxNnB4O1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgY29sb3I6ICM3ZDdlODA7XG4gICAgfVxuICAgICNnd2RfcHJvbW9fYm94IGRpdiBsaSBhLnByb21vX2FkX2Ege1xuICAgICAgd2lkdGg6IDE1OXB4O1xuICAgIH1cbiAgICAjZ3dkX3Byb21vX2JveCBkaXYgbGkgYTpob3ZlciB7XG4gICAgICBjb2xvcjogI2VjNDk2NjtcbiAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICB9XG4gICAgI2d3ZF9wcm9tb19ib3ggPnNwYW4ge1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkICNlOGU4ZTg7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICBoZWlnaHQ6IDM1cHg7XG4gICAgICBtYXJnaW4tdG9wOiAxM3B4O1xuICAgIH1cbiAgICAje3ttaW5pZG9tfX0ub25lbGluZSAjZ3dkX3Byb21vX2JveCA+c3BhbiB7XG4gICAgICAgaGVpZ2h0OiAxMnB4O1xuICAgIH1cbiAgICAjZ3dkX3Byb21vX2JveCB1bCBsaSBzcGFue1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgaGVpZ2h0OiAxNnB4O1xuICAgICAgd2lkdGg6IDE2cHg7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWM0OTY2O1xuICAgICAgYm9yZGVyLXJhZGl1czogM3B4O1xuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgbGluZS1oZWlnaHQ6IDE2cHg7XG4gICAgICBjb2xvcjogI2ZmZjtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgbWFyZ2luLXJpZ2h0OiAxMXB4O1xuICAgIH1cbiAgICAjZ3dkX3Byb21vX2JveCB1bCBsaSBzcGFuLnByb21vX2FkX3NwYW4ge1xuICAgICAgd2lkdGg6IDMycHg7XG4gICAgfVxuICAgICNnd2RfcHJvbW9fYm94IHVsIGxpICNnd2RfbW9iaWxlX3ByaWNlIC5tb2JpbGVfdGl0bGUsICNnd2RfcHJvbW9fYm94IHVsIGxpICNnd2Rfd2VpeGluX3ByaWNlIC53ZWl4aW5fdGl0bGV7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNGFhYmU4O1xuICAgICAgd2lkdGg6IDY2cHg7XG4gICAgICBib3JkZXItcmFkaXVzOiAycHg7XG4gICAgfVxuICAgICNnd2RfcHJvbW9fYm94IHVsIGxpICNnd2RfbW9iaWxlX3ByaWNlIC5tb2JpbGVfbnVtLCAjZ3dkX3Byb21vX2JveCB1bCBsaSAjZ3dkX3dlaXhpbl9wcmljZSAud2VpeGluX251bXtcbiAgICAgIGJhY2tncm91bmQ6IG5vbmU7XG4gICAgICBjb2xvcjogI2Q4MDAwMDtcbiAgICAgIHdpZHRoOiBhdXRvO1xuICAgICAgbWFyZ2luLWxlZnQ6IDZweDtcbiAgICB9XG4gICAgI2d3ZF9wcm9tb19ib3ggdWwgbGkgI2d3ZF9tb2JpbGVfcHJpY2UgLm1vYmlsZV9udW06aG92ZXIge1xuICAgICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XG4gICAgfVxuICAgICNnd2Rfd2lzaGxpc3RfdHJlbmRfZGV0YWlsX2J0biB7XG4gICAgICBoZWlnaHQ6IDIwcHg7XG4gICAgICBtYXJnaW4tdG9wOiAycHg7XG4gICAgfVxuICAgIC50cmVuZC1tYXgtbWluLXByaWNlIHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHRvcDogMzBweDtcbiAgICAgIGxlZnQ6IDcwcHg7XG4gICAgICBoZWlnaHQ6IDEycHg7XG4gICAgICBsaW5lLWhlaWdodDogMTJweDtcbiAgICB9XG4gICAgLnRyZW5kLW1heC1taW4tcHJpY2UucmV2aWV3VCB7XG4gICAgICB0b3A6IDQwcHg7XG4gICAgfVxuICAgIC50cmVuZC1tYXgtbWluLXByaWNlIHNwYW4ge1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICB9XG4gICAgLnQtbWF4LXByaSB7XG4gICAgICBjb2xvcjogI2U0MzkzYztcbiAgICB9XG4gICAgI2d3ZF93aXNobGlzdF90cmVuZF9kZXRhaWwgLnQtbWluLXByaSB7XG4gICAgICBjb2xvcjogIzM1YmQ2NztcbiAgICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xuICAgIH1cbiAgICAjZ3dkX3dpc2hsaXN0X3RyZW5kX2RldGFpbF9idG4gc3BhbiB7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIGhlaWdodDogMjBweDtcbiAgICAgIHdpZHRoOiA3N3B4O1xuICAgICAgbWFyZ2luLWxlZnQ6IDcwcHg7XG4gICAgfVxuICAgICNnd2Rfd2lzaGxpc3RfdHJlbmRfZGV0YWlsX2J0biBzcGFuLnB0LXNwMSB7XG4gICAgICBtYXJnaW4tbGVmdDogMTEycHg7XG4gICAgfVxuICAgIHNwYW4ucHJpY2UtdHJlbmQtc3Age1xuICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTM4cHggLTM4cHg7XG4gICAgfVxuICAgIHNwYW4ucmV2aWV3LXRyZW5kLXNwIHtcbiAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IC0zOHB4IC02MnB4O1xuICAgIH1cbiAgICBzcGFuLnJldmlldy10cmVuZC1zcC5tc2NsaWNrIHtcbiAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IC0zOHB4IC04NnB4O1xuICAgIH1cbiAgICAuYmpkX3BsdF9iZyB0ZCB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgIH1cbiAgICAuYmpkX3BsdF9iZyB0YWJsZSB7XG4gICAgICBtYXJnaW4tdG9wOiAwcHg7XG4gICAgfVxuICAgIC5uby1yZXZpZXcgc3Bhbi5yZXZpZXctdHJlbmQtc3Age1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG4gICAgI2d3ZF93aXNobGlzdF90cmVuZF9kZXRhaWxfYnRuLm5vLXJldmlldyBzcGFuLnB0LXNwMSB7XG4gICAgICBtYXJnaW4tbGVmdDogMTg4cHg7XG4gICAgfVxuICA8L3N0eWxlPlxuPC9kaXY+XG48L2Rpdj4nOwoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCwgaSkgewoJCQkidXNlIHN0cmljdCI7CgoJCQlmdW5jdGlvbiBhKGUpIHsKCQkJCXZhciBhID0gbigxMjYpOwoJCQkJdCgiIyIgKyBpLmV4dE5hbWUgKyAiLW1haW4iKS5hcHBlbmQoZi5jb21waWxlKGEpKHsKCQkJCQlyZW1vOiAi54K55Ye75p+l55yL5YWo6YOo5YC85b6X5Lmw5ZWG5ZOBIiwKCQkJCQlkYXRhOiBlLnNsaWNlKDAsIDMpLAoJCQkJCXNpdGVfaWQ6IGgsCgkJCQkJemhpVXJsOiB1LAoJCQkJCXNfc2VydmVyOiBpLnNfc2VydmVyLAoJCQkJCWltZ19zZXJ2ZXI6IGkuY3JjNjQgPyBpLmltZzY0X3NlcnZlciA6IGkuaW1nX3NlcnZlciwKCQkJCQlleHROYW1lOiBpLmV4dE5hbWUsCgkJCQkJYWxpc2l0ZTogaS5hbGlTaXRlLAoJCQkJCWV4dEJyYW5kOiBpLmV4dEJyYW5kCgkJCQl9KSksIHQoIiMiICsgaS5leHRCcmFuZCArICJfemhpZGVtYWkiKS5zaG93KCksIGkuZWRpdE9yaWdpbmFsKCIjemhpZGVtYWktaXRlbS1saXN0IC5zbWFsbC1pbWcgaW1nIikKCQkJfQoKCQkJZnVuY3Rpb24gbyhlKSB7CgkJCQl2YXIgYSA9IG4oMTI2KTsKCQkJCXQoIiNiamRfYm90dG9tX2RldGFpbCIpLmFwcGVuZChmLmNvbXBpbGUoYSkoewoJCQkJCXJlbW86ICLngrnlh7vmn6XnnIvlhajpg6jlgLzlvpfkubDllYblk4EiLAoJCQkJCWRhdGE6IGUuc2xpY2UoMCwgMyksCgkJCQkJc2l0ZV9pZDogaCwKCQkJCQl6aGlVcmw6IHUsCgkJCQkJc19zZXJ2ZXI6IGkuc19zZXJ2ZXIsCgkJCQkJaW1nX3NlcnZlcjogaS5jcmM2NCA/IGkuaW1nNjRfc2VydmVyIDogaS5pbWdfc2VydmVyLAoJCQkJCWV4dE5hbWU6IGkuZXh0TmFtZSwKCQkJCQlhbGlzaXRlOiBpLmFsaVNpdGUsCgkJCQkJZXh0QnJhbmQ6IGkuZXh0QnJhbmQKCQkJCX0pKSwgdCgiLmNvbS16ZG0iKS5zaG93KCksIGkuZWRpdE9yaWdpbmFsKCIjemhpZGVtYWktaXRlbS1saXN0IC5zbWFsbC1pbWcgaW1nIikKCQkJfQoKCQkJZnVuY3Rpb24gcihlKSB7CgkJCQkwICE9IGUgJiYgKHQoIiMiICsgaS5leHRCcmFuZCArICJfemhpZGVtYWksIC5jb20temRtIikub24oIm1vdXNlZW50ZXIiLCBmdW5jdGlvbigpIHsKCQkJCQlpZiAoInRvcCIgPT09IGkuc3R5bGUpIHsKCQkJCQkJdmFyIGUgPSB0KCIjIiArIGkuZXh0QnJhbmQgKyAiX3poaWRlbWFpIikub2Zmc2V0KCkubGVmdDsKCQkJCQkJdCgiIyIgKyBpLmV4dEJyYW5kICsgIl96aGlkZW1haV9kZXRhaWwiKS5jc3MoImxlZnQiLCBlICsgInB4IikuY3NzKCJyaWdodCIsICJhdXRvIiksIHQodGhpcykuYWRkQ2xhc3MoaS5leHRCcmFuZCArICJfemhpZGVtYWlfaG92ZXIiKQoJCQkJCX0gZWxzZSB7CgkJCQkJCXQodGhpcykuYWRkQ2xhc3MoInpkbV9tc19ob3ZlciIpOwoJCQkJCQl2YXIgZSA9IHQoIi5jb20temRtIikub2Zmc2V0KCkubGVmdDsKCQkJCQkJdCgiIyIgKyBpLmV4dEJyYW5kICsgIl96aGlkZW1haV9kZXRhaWwiKS5jc3MoImxlZnQiLCBlIC0gMiArICJweCIpCgkJCQkJfQoJCQkJCXQoIiMiICsgaS5leHRCcmFuZCArICJfemhpZGVtYWlfZGV0YWlsIC5hbGwtcHJvZHVjdHMiKS5jc3MoIndpZHRoIiwgdCh3aW5kb3cpLndpZHRoKCkgLSA4MCksIHQoIiMiICsgaS5leHRCcmFuZCArICJfemhpZGVtYWlfZGV0YWlsIikuc2hvdygpLCBnKCJwcm9kdWN0X3BhZ2VfemhpZGVtYWlfc2hvdyIpLCAidG9wIiA9PT0gaS5zdHlsZSAmJiB0KHdpbmRvdykud2lkdGgoKSAtICh0KCIjIiArIGkuZXh0QnJhbmQgKyAiX3poaWRlbWFpX2RldGFpbCIpLm9mZnNldCgpLmxlZnQgKyB0KCIjIiArIGkuZXh0QnJhbmQgKyAiX3poaWRlbWFpX2RldGFpbCIpLm91dGVyV2lkdGgoKSArIDIpIDwgMCAmJiB0KCIjIiArIGkuZXh0QnJhbmQgKyAiX3poaWRlbWFpX2RldGFpbCIpLmNzcygicmlnaHQiLCAiMHB4IikuY3NzKCJsZWZ0IiwgImF1dG8iKSwgKGkuSUU3IHx8IGkuSUU4KSAmJiB0KHdpbmRvdykud2lkdGgoKSA8IDE1MDAgJiYgdCgiIyIgKyBpLmV4dEJyYW5kICsgIl96aGlkZW1haV9kZXRhaWwiKS5jc3MoInJpZ2h0IiwgIjBweCIpLmNzcygibGVmdCIsICJhdXRvIikKCQkJCX0pLCB0KCIjIiArIGkuZXh0QnJhbmQgKyAiX3poaWRlbWFpLCAuY29tLXpkbSIpLm9uKCJtb3VzZWxlYXZlIiwgZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSB0aGlzOwoJCQkJCW0gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCQl0KGUpLnJlbW92ZUNsYXNzKGkuZXh0QnJhbmQgKyAiX3poaWRlbWFpX2hvdmVyIikucmVtb3ZlQ2xhc3MoInpkbV9tc19ob3ZlciIpLCB0KCIjIiArIGkuZXh0QnJhbmQgKyAiX3poaWRlbWFpX2RldGFpbCIpLmhpZGUoKQoJCQkJCX0sIDIwMCkKCQkJCX0pLCB0KCIjIiArIGkuZXh0QnJhbmQgKyAiX3poaWRlbWFpX2RldGFpbCIpLm9uKCJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7CgkJCQkJY2xlYXJUaW1lb3V0KG0pCgkJCQl9KSwgdCgiIyIgKyBpLmV4dEJyYW5kICsgIl96aGlkZW1haV9kZXRhaWwiKS5vbigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uKCkgewoJCQkJCXQoIiMiICsgaS5leHRCcmFuZCArICJfemhpZGVtYWkiKS5yZW1vdmVDbGFzcyhpLmV4dEJyYW5kICsgIl96aGlkZW1haV9ob3ZlciIpLCB0KCIuY29tLXpkbSIpLnJlbW92ZUNsYXNzKCJ6ZG1fbXNfaG92ZXIiKSwgdCh0aGlzKS5oaWRlKCkKCQkJCX0pLCB0KCIjIiArIGkuZXh0QnJhbmQgKyAiX3poaWRlbWFpX2RldGFpbCIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCWcoInByb2R1Y3RfcGFnZV96aGlkZW1haV9jbGljayIpCgkJCQl9KSkKCQkJfQoKCQkJZnVuY3Rpb24gcyhlKSB7CgkJCQlpLmFsaVNpdGUgJiYgKGUgPSAiamF2YXNjcmlwdDoiKTsKCQkJCXZhciBuID0gJzxhIGlkPSInICsgaS5leHRCcmFuZCArICdfemhpZGVtYWkiIHN0eWxlPSJkaXNwbGF5Om5vbmUiIHRhcmdldD0iX2JsYW5rIiBocmVmPSInICsgZSArICciIHRpdGxlPSLngrnlh7vmn6XnnIvlhajpg6jlgLzlvpfkubDllYblk4EiPjxzcGFuIGNsYXNzPSJ6aGlkZW1haV9pY29uIG5ld2ItYmciPjwvc3Bhbj48c3BhbiBjbGFzcz0iemhpZGVtYWlfdGV4dCI+5YC85b6X5LmwPC9zcGFuPjwvYT4nOwoJCQkJdCgiI3JpZ2h0X2luZm8iKS5hcHBlbmQoZi5jb21waWxlKG4pKHt9KSkKCQkJfQoKCQkJZnVuY3Rpb24gbChlKSB7CgkJCQkidG9wIiA9PSBpLnN0eWxlICYmICJ2aXBzaG9wIiAhPSBpLnNpdGUgJiYgcyhlKQoJCQl9CgoJCQlmdW5jdGlvbiBjKGUpIHsKCQkJCXUgPSBlLmxpbmssIGwoZS5saW5rKTsKCQkJCXZhciB0ID0gZS5kYXRhLAoJCQkJCW4gPSB0Lmxlbmd0aDsKCQkJCSJ0b3AiID09IGkuc3R5bGUgJiYgInZpcHNob3AiICE9IGkuc2l0ZSAmJiAoYSh0KSwgcihuKSksICJib3R0b20iID09IGkuc3R5bGUgJiYgKG8odCksIHIobikpLCAibHV5b3UiICE9IGkuYnR5cGUgJiYgZCh0LnNsaWNlKDAsIDQpKQoJCQl9CgoJCQlmdW5jdGlvbiBkKGUpIHsKCQkJCWlmIChlLmxlbmd0aCA9IDAsIDAgIT0gdCgiIyIgKyBpLndpc2hkb20yKS5sZW5ndGgpIHsKCQkJCQlpZiAoMCA9PSBlLmxlbmd0aCkgcmV0dXJuIHQoIiMiICsgaS5leHRCcmFuZCArICJfd2lzaGxpc3RfemRtX2J0biIpLm9mZigpLCB0KCIjIiArIGkuZXh0QnJhbmQgKyAiX3dpc2hsaXN0X3pkbV9idG4iKS5hdHRyKCJocmVmIiwgdSkuYXR0cigidGl0bGUiLCAi54K55Ye75p+l55yL5pu05aSa5YC85b6X5Lmw5ZWG5ZOBIiksIHZvaWQgdCgiIyIgKyBpLmV4dEJyYW5kICsgIl93aXNobGlzdF96ZG1fZGV0YWlsIikucmVtb3ZlKCk7CgkJCQkJdmFyIGEgPSBuKDEyNyk7CgkJCQkJdCgiIyIgKyBpLmV4dEJyYW5kICsgIl93aXNobGlzdF96ZG1fZGV0YWlsIHVsIikuYXBwZW5kKGYuY29tcGlsZShhKSh7CgkJCQkJCWRhdGE6IGUsCgkJCQkJCWltZ19zZXJ2ZXI6IGkuaW1nX3NlcnZlciwKCQkJCQkJZXh0QnJhbmQ6IGkuZXh0QnJhbmQKCQkJCQl9KSksIHQoIiMiICsgaS5leHRCcmFuZCArICJfd2lzaGxpc3RfemRtX2J0biwgLiIgKyBpLmV4dEJyYW5kICsgIl96ZG1fbW9yZV9saW5rIikuYXR0cigiaHJlZiIsIHUpCgkJCQl9CgkJCX0KCgkJCWZ1bmN0aW9uIHAoZSkgewoJCQkJdmFyIHQgPSB4LmdldCgiZHBfZGF0YSIpLAoJCQkJCW4gPSAiMCI7CgkJCQlpLmFsaVNpdGUgJiYgKG4gPSAiMSIpOwoJCQkJdmFyIGEgPSBpLnNlcnZlciArICIvZXh0ZW5zaW9uP2FjPXpkbSZzaXRlX2lkPSIgKyBoICsgIiZwcmljZT0iICsgKGkuZHAucHJpY2UgfHwgdC5ub3cucHJpY2UpICsgIiZub19icmFuZD0xJmNvcmV3b3JkPSIgKyBlbmNvZGVVUklDb21wb25lbnQodC5ub3cuY29yZXdvcmQpICsgIiZjbGFzc19pZD0iICsgdC5ub3cuY2xhc3NfaWQgKyAiJmFsaXNpdGU9IiArIG47CgkJCQlfLmdldChhKS5kb25lKGZ1bmN0aW9uKHQpIHsKCQkJCQl0ICYmIHQuZGF0YSAmJiBlKHQpCgkJCQl9KQoJCQl9CgkJCXZhciBoLCB1LCBtLCBmID0gbigxNiksCgkJCQlnID0gbigyNiksCgkJCQlfID0gbig5KSwKCQkJCXggPSBuKDcxKTsKCQkJZS5leHBvcnRzLmdldFVybCA9IGZ1bmN0aW9uKCkgewoJCQkJcmV0dXJuIHUKCQkJfSwgZS5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHsKCQkJCXZhciBlID0geC5nZXQoImRwX2RhdGEiKTsKCQkJCWkuc2l0ZS5pbmRleE9mKCJ0YW9iYW8iKSA+IC0xIHx8ICJ0bWFsbCIgPT0gaS5zaXRlIHx8IChoID0gZS5ub3cuc2l0ZV9pZCwgcChjKSkKCQkJfQoJCX0pLmNhbGwodCwgbig2KSwgbigxKSkKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJZS5leHBvcnRzID0gJzxkaXYgaWQ9Int7ZXh0QnJhbmR9fV96aGlkZW1haV9kZXRhaWwiIGNsYXNzPSJiamQtcHJvZHVjdC1kZXRhaWwiPlxuICA8dWwgaWQ9InpoaWRlbWFpLWl0ZW0tbGlzdCI+XG4gICAge3tlYWNoIGRhdGF9fVxuICAgICAgPGxpIGlkPSJ6aGlkZW1haS1wcm9kLWl0ZW0te3skaW5kZXh9fSI+XG4gICAgICAgIDxhIGhyZWY9Int7JHZhbHVlLnVybH19IiB0YXJnZXQ9Il9ibGFuayIgdGl0bGU9Int7JHZhbHVlLnRpdGxlfX0iIGNsYXNzPSJzbWFsbC1pbWciPlxuICAgICAgICAgIDxpbWcgc3JjPSJ7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvZGVmYXVsdF9sb2FkX2ltYWdlLnBuZyIgaWQ9InptZF9pbWdfe3skaW5kZXh9fSIgZGF0YS1vcmlnaW5hbD0ie3skdmFsdWUuaW1nX3VybH19Ij5cbiAgICAgICAgPC9hPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPSJ7e2V4dEJyYW5kfX0tcHJpY2UiPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9InpkbS1zdG9yZS1ib3giPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ic2l0ZV9pY29uIiB0aXRsZT0ie3skdmFsdWUuc2l0ZV9uYW1lfX0iPjxpbWcgc3JjPSJ7e3Nfc2VydmVyfX0vaW1hZ2VzL2Zhdmljb24ve3skdmFsdWUuc2l0ZV9pZH19LmljbyI+PC9zcGFuPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iemRtLXN0b3JlLXRsZSI+e3skdmFsdWUucHJpY2VfaW5mb319PC9zcGFuPlxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPHAgY2xhc3M9ImRwIj5cbiAgICAgICAgICA8IS0tIDxhIGhyZWY9IiMiIGNsYXNzPSJ6ZG1fcXVhbiIgc3R5bGU9Int7KCR2YWx1ZS5kaXNjb3VudF9jb2RlICE9IFwnXCcgfHwgJHZhbHVlLmNvdXBvbl91cmwgPT0gXCdcJyk/XCdkaXNwbGF5Om5vbmVcJzpcJ1wnfX0iPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9InJlZF9iZyI+6ZyA55So5Yi4PC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9InF1YW5fYiI+54K55q2k6aKG5Yi4PC9zcGFuPlxuICAgICAgICAgIDwvYT5cbiAgICAgICAgICA8c3BhbiBjbGFzcz0iemRtX21hIiBzdHlsZT0ie3tpZiAhJHZhbHVlLmRpc2NvdW50X2NvZGV9fWRpc3BsYXk6bm9uZTt7ey9pZn19Ij5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJyZWRfYmciPumcgOeUqOeggTwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJtYV9udW0iPnt7JHZhbHVlLmRpc2NvdW50X2NvZGV9fTwvc3Bhbj5cbiAgICAgICAgICA8L3NwYW4+IC0tPlxuICAgICAgICAgIDxhIGhyZWY9Int7JHZhbHVlLnVybH19IiB0YXJnZXQ9Il9ibGFuayIgdGl0bGU9Int7JHZhbHVlLnRpdGxlfX0iPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9Int7ZXh0QnJhbmR9fV90aXRsZSI+e3skdmFsdWUudGl0bGV9fTwvc3Bhbj5cbiAgICAgICAgICA8L2E+XG4gICAgICAgIDwvcD5cbiAgICAgICAgXG4gICAgICA8L2xpPlxuICAgIHt7L2VhY2h9fVxuICA8L3VsPlxuICB7e2lmICFhbGlzaXRlfX1cbiAgPGEgaHJlZj0ie3t6aGlVcmx9fSIgaWQ9Int7ZXh0QnJhbmR9fV96ZG1fbW9yZWxpbmsiIHRhcmdldD0iX2JsYW5rIj7mn6XnnIvlhajpg6g+PjwvYT5cbiAge3svaWZ9fVxuICA8c3R5bGUgdHlwZT0idGV4dC9jc3MiPlxuICAgICN7e2V4dEJyYW5kfX1femhpZGVtYWlfZGV0YWlsIHNwYW4uc2l0ZV9pY29uIHtcbiAgICAgIG1hcmdpbi1yaWdodDogNHB4O1xuICAgIH1cbiAgICAuYmpkLXByb2R1Y3QtZGV0YWlsIHtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgfVxuICAgIGEjZ3dkX3pkbV9tb3JlbGluayB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBib3R0b206IDEwcHg7XG4gICAgICByaWdodDogMTNweDtcbiAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgIGNvbG9yOiAjOWI5YjliO1xuICAgIH1cbiAgICBhI2d3ZF96ZG1fbW9yZWxpbms6aG92ZXIge1xuICAgICAgY29sb3I6ICM1ZWJlZmY7XG4gICAgfVxuICAgIC56ZG0tc3RvcmUtYm94IHtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jayFpbXBvcnRhbnQ7XG4gICAgfVxuICAgIHNwYW4uemRtLXN0b3JlLWJveCBzcGFuIHtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgIH1cbiAgICAuc2l0ZV9pY29uIGltZyB7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICB9XG4gICAgLnpkbS1zdG9yZS10bGUge1xuICAgICAgbWF4LXdpZHRoOiAxODBweDtcbiAgICAgIGhlaWdodDogMTdweDtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICBjb2xvcjogI2QxMDgzMSFpbXBvcnRhbnQ7XG4gICAgfVxuICA8L3N0eWxlPlxuPC9kaXY+JwoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQllLmV4cG9ydHMgPSAne3tlYWNoIGRhdGF9fVxuICA8bGkgY2xhc3M9Int7ZXh0QnJhbmR9fS1saXN0LWl0ZW0gbGlfe3skaW5kZXh9fSI+XG4gICAgPGEgY2xhc3M9Int7ZXh0QnJhbmR9fS1waWMiIGhyZWY9Int7JHZhbHVlLnVybH19IiB0YXJnZXQ9Il9ibGFuayIgcmVsPSJub3JlZmVycmVyIiB0aXRsZT0ie3skdmFsdWUudGl0bGV9fSI+XG4gICAgICA8aW1nIHNyYz0iaHR0cDovL3t7aW1nX3NlcnZlcn19L2Nfem9vbSx3XzkwL3poaV97eyR2YWx1ZS5kcF9pZH19LnBuZyIgPlxuICAgIDwvYT5cbiAgICA8YSBjbGFzcz0ie3tleHRCcmFuZH19LXByb2R1Y3QtdGl0bGUiIGhyZWY9Int7JHZhbHVlLnVybH19IiB0YXJnZXQ9Il9ibGFuayIgdGl0bGU9Int7JHZhbHVlLnRpdGxlfX0iIHJlbD0ibm9yZWZlcnJlciI+XG4gICAgICB7eyR2YWx1ZS50aXRsZX19XG4gICAgPC9hPlxuICAgIDxzcGFuIGNsYXNzPSJ7e2V4dEJyYW5kfX0tcHJpY2UiID5cbiAgICAgIHt7JHZhbHVlLnByaWNlX2luZm99fVxuICAgIDwvc3Bhbj5cbiAgICBcbiAgPC9saT5cbnt7L2VhY2h9fVxuJwoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCwgaSkgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBhID0gbigxNiksCgkJCQlvID0gbigxMjkpLAoJCQkJciA9IG4oMTMwKSwKCQkJCXMgPSBmdW5jdGlvbihlKSB7CgkJCQkJaWYgKGUgJiYgMCAhPT0gZS5hZC5sZW5ndGgpIHsKCQkJCQkJdmFyIG4gPSB0KCI8bGk+PC9saT4iKTsKCQkJCQkJdChuKS5hcHBlbmQoYS5jb21waWxlKG8pKHsKCQkJCQkJCXByb2R1Y3Q6IGUuYWRbMF0KCQkJCQkJfSkpLCB0KCIjZ3dkX2xvd3ByaV9kZXRhaWwgI2xvd3ByaS1pdGVtLWxpc3QiKS5hcHBlbmQodChuKSkKCQkJCQl9CgkJCQl9LAoJCQkJbCA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlpZiAoZSAmJiAwICE9PSBlLnByb21vLmxlbmd0aCkgewoJCQkJCQl2YXIgbiA9IGUucHJvbW9bMF0sCgkJCQkJCQlhID0gJzxsaSBjbGFzcz0ibGlfMCIgPjxzcGFuIGNsYXNzPSJwcm9tb19hZF9zcGFuIj7ng63ljZY8L3NwYW4+IDxhIGNsYXNzPSJwcm9tb19hZF9hIiBocmVmPSInICsgbi51cmwgKyAnIiB0YXJnZXQ9Il9ibGFuayIgdGl0bGU9IicgKyBuLnRpdGxlICsgJyI+JyArIG4udGl0bGUgKyAiPC9hPjwvbGk+IiwKCQkJCQkJCW8gPSB0KCIucHJvbW9fYm94X2xlZnQgdWwiKSwKCQkJCQkJCXIgPSB0KCIucHJvbW9fYm94X2xlZnQgdWwgbGlbZGF0YS10eXBlXSIpLAoJCQkJCQkJcyA9IHIubGVuZ3RoOwoJCQkJCQkwID09PSBzID8gKG8ucHJlcGVuZCh0KGEpKSwgdCgiIyIgKyBpLmV4dEJyYW5kICsgIl9wcm9tb19ib3giKS5zaG93KCksIHQoIiMiICsgaS53aXNoZG9tMikuYWRkQ2xhc3MoIm9uZWxpbmUiKSkgOiByLmFmdGVyKHQoYSkpOwoJCQkJCQlmb3IgKHZhciBsID0gby5maW5kKCJsaSIpLCBjID0gMDsgYyA+IGwubGVuZ3RoOyBjKyspIGwuZXEoYykuYXR0cigiY2xhc3MiLCAibGlfIiArIGMpCgkJCQkJfQoJCQkJfTsKCQkJZS5leHBvcnRzLnJlbmRlckxvd2VzdEFkID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJci5pbml0KHsKCQkJCQlrZXl3b3JkOiB0LAoJCQkJCWNsYXNzX2lkOiBlCgkJCQl9LCBzKQoJCQl9LCBlLmV4cG9ydHMucmVuZGVyV2lzaGxpc3RBZCA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCXIuaW5pdCh7CgkJCQkJa2V5d29yZDogdCwKCQkJCQljbGFzc19pZDogZQoJCQkJfSwgbCkKCQkJfQoJCX0pLmNhbGwodCwgbig2KSwgbigxKSkKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJZS5leHBvcnRzID0gJ1xuICA8ZGl2IGlkPSJwcm9kdWN0X2FkX2l0ZW0iPlxuICAgIDxhIGNsYXNzPSJhZF9pdGVtX2ltZyIgaHJlZj0ie3twcm9kdWN0LnVybH19IiB0YXJnZXQ9Il9ibGFuayI+XG4gICAgICA8aW1nIHNyYz0ie3twcm9kdWN0LmltZ319Ij5cbiAgICA8L2E+XG4gICAgPHNwYW4gY2xhc3M9ImFkX3ByaWNlaW5mbyI+XG4gICAgICA8c3BhbiBjbGFzcz0ibm93X3ByaWNlIj7CpSB7e3Byb2R1Y3QuZHBfcHJpY2V9fTwvc3Bhbj5cbiAgICAgIDxzcGFuIGNsYXNzPSJvbGRfcHJpY2UiPsKlIHt7cHJvZHVjdC5vcmlfcHJpY2V9fTwvc3Bhbj5cbiAgICA8L3NwYW4+XG4gICAgPGEgaHJlZj0ie3twcm9kdWN0LnVybH19IiBjbGFzcz0iYWRfdGxlIiB0YXJnZXQ9Il9ibGFuayIgdGl0bGU9Int7cHJvZHVjdC50aXRsZX19Ij57e3Byb2R1Y3QudGl0bGV9fTwvYT5cbiAgICA8YSBocmVmPSJ7e3Byb2R1Y3Quc3RvcmVfdXJsfX0iIHRhcmdldD0iX2JsYW5rIiBjbGFzcz0iYWRfc2hvcF9uYW1lIj57e2lmIHByb2R1Y3QucGxhdGZvcm19fSB7e3Byb2R1Y3QucGxhdGZvcm0gKyAi77yaIn19IHt7L2lmfX17e3Byb2R1Y3Quc3RvcmVfbmFtZX19PC9hPlxuICAgIDxzcGFuIGNsYXNzPSJvdGhlcl9kZXNjIj5cbiAgICAgIDxzcGFuIGNsYXNzPSJhZF9kaXNjb3VudCI+e3twcm9kdWN0LmRpc2NvdW50fX3mipg8L3NwYW4+XG4gICAgICA8c3BhbiBjbGFzcz0iYWRfZm9yZWlnaCI+e3twcm9kdWN0LmZyZWlnaHR0bGV9fTwvc3Bhbj5cbiAgICA8L3NwYW4+XG4gICAgPHNwYW4gY2xhc3M9InR1aWd1YW5nX2xpbmsiID7mjqjlub88L3NwYW4+XG4gIDwvZGl2PlxuICA8c3R5bGUgdHlwZT0idGV4dC9jc3MiPlxuICAgICNwcm9kdWN0X2FkX2l0ZW0ge1xuICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgfVxuICAgICNwcm9kdWN0X2FkX2l0ZW0gPiAqICwgI3Byb2R1Y3RfYWRfaXRlbSAuYWRfaXRlbV9pbWd7XG4gICAgICBkaXNwbGF5OiBibG9jaztcbiAgICB9XG4gICAgLmFkX2l0ZW1faW1nIHtcbiAgICAgIG1hcmdpbjogMCBhdXRvO1xuICAgICAgd2lkdGg6IDE4MHB4O1xuICAgICAgaGVpZ2h0OiA5MHB4O1xuXG4gICAgfVxuICAgICNwcm9kdWN0X2FkX2l0ZW0gLmFkX3ByaWNlaW5mbyB7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGhlaWdodDogMjJweDtcbiAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgICBtYXJnaW4tdG9wOiAzcHg7XG4gICAgICBkaXNwbGF5OiBibG9jaztcbiAgICB9XG4gICAgI3Byb2R1Y3RfYWRfaXRlbSAuYWRfdGxle1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICBoZWlnaHQ6IDQwcHg7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgbGluZS1oZWlnaHQ6IDIwcHg7XG4gICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgICBkaXNwbGF5OiBibG9jaztcbiAgICB9XG4gICAgZGl2I3Byb2R1Y3RfYWRfaXRlbSAuYWRfc2hvcF9uYW1lIHtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICB0ZXh0LWFsaWduOmxlZnQ7XG4gICAgICBmb250LXNpemU6IDEycHg7XG4gICAgfVxuICAgICNwcm9kdWN0X2FkX2l0ZW0gLmFkX3ByaWNlaW5mbyAubm93X3ByaWNlIHtcbiAgICAgIGNvbG9yOiAjRTUyNjAwO1xuICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgIH1cbiAgICAjcHJvZHVjdF9hZF9pdGVtIC5hZF9wcmljZWluZm8gLm9sZF9wcmljZSB7XG4gICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICBjb2xvcjogIzk5OTtcbiAgICAgIHRleHQtZGVjb3JhdGlvbjogbGluZS10aHJvdWdoO1xuICAgIH1cbiAgICAjcHJvZHVjdF9hZF9pdGVtIC5vdGhlcl9kZXNjIHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHRvcDogMHB4O1xuICAgICAgbGVmdDogMHB4O1xuICAgIH1cbiAgICAjcHJvZHVjdF9hZF9pdGVtIC5hZF9kaXNjb3VudCB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRTUyNjAwO1xuICAgICAgY29sb3I6ICNmZmY7XG4gICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICBsaW5lLWhlaWdodDogMThweDtcbiAgICB9XG4gICAgI3Byb2R1Y3RfYWRfaXRlbSAuYWRfZm9yZWlnaCB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgI0U1MjYwMDtcbiAgICAgIGNvbG9yOiAjRTUyNjAwO1xuICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgbGluZS1oZWlnaHQ6IDE2cHg7XG4gICAgICBtYXJnaW4tbGVmdDogNHB4O1xuICAgIH1cbiAgICBkaXYjcHJvZHVjdF9hZF9pdGVtIHNwYW4udHVpZ3VhbmdfbGluayB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBjb2xvcjogI2JiYjtcbiAgICAgIHJpZ2h0OiAwcHg7XG4gICAgICB0b3A6IDBweDtcbiAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICB9XG4gIDwvc3R5bGU+XG4nCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCShmdW5jdGlvbih0KSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJdmFyIGkgPSBuKDkpLAoJCQkJYSA9IHZvaWQgMCwKCQkJCW8gPSB2b2lkIDAsCgkJCQlyID0gdm9pZCAwLAoJCQkJcyA9IFtdLAoJCQkJbCA9IGZ1bmN0aW9uKGUsIG4pIHsKCQkJCQllID0gZSB8fCB7fTsKCQkJCQl2YXIgbCA9IGUua2V5d29yZCB8fCAiIiwKCQkJCQkJZCA9IGUuY2xhc3NfaWQgfHwgIiIsCgkJCQkJCXAgPSBsb2NhdGlvbi5wcm90b2NvbCArICIvL2EuIiArIHQuZXh0TmFtZSArICIuY29tL2NnaS9nZXQ/Y2F0ZWdvcnk9IiArIGQgKyAiJmtleXdvcmQ9IiArIGVuY29kZVVSSUNvbXBvbmVudChsKSArICImbG9jYXRlPSIgKyBlbmNvZGVVUklDb21wb25lbnQobG9jYXRpb24uaHJlZik7CgkJCQkJaS5nZXQocCkuZG9uZShmdW5jdGlvbihlKSB7CgkJCQkJCWlmIChlICYmIChlLmFkLmxlbmd0aCA+IDAgfHwgZS5wcm9tby5sZW5ndGggPiAwKSkgewoJCQkJCQkJaWYgKGUgPSBjKGUpLCBuKGUpLCBvID0gZSwgcy5sZW5ndGggPiAwKQoJCQkJCQkJCWZvciAodmFyIHQgPSAwOyB0IDwgcy5sZW5ndGg7IHQrKykgc1t0XShlKTsKCQkJCQkJCXIgPSAhMAoJCQkJCQl9CgkJCQkJfSksIGEgPSAhMAoJCQkJfSwKCQkJCWMgPSBmdW5jdGlvbihlKSB7CgkJCQkJaWYgKGUuYWQubGVuZ3RoID4gMCkKCQkJCQkJZm9yICh2YXIgdCA9IDA7IHQgPCBlLmFkLmxlbmd0aDsgdCsrKSAiMSIgPT0gZS5hZFt0XS5mcmVpZ2h0ICYmIChlLmFkW3RdLmZyZWlnaHR0bGUgPSAi5YyF6YKuIiksICIwIiA9PSBlLmFkW3RdLmRpc2NvdW50ICYmIChlLmFkW3RdLmRpc2NvdW50ID0gKGUuYWRbdF0uZHBfcHJpY2UgLyBlLmFkW3RdLm9yaV9wcmljZSAqIDEwKS50b0ZpeGVkKDEpKSwgZS5hZFt0XS5kcF9wcmljZSA9IChOdW1iZXIoZS5hZFt0XS5kcF9wcmljZSkgLyAxMDApLnRvRml4ZWQoMiksIGUuYWRbdF0ub3JpX3ByaWNlID0gKE51bWJlcihlLmFkW3RdLm9yaV9wcmljZSkgLyAxMDApLnRvRml4ZWQoMik7CgkJCQkJcmV0dXJuIGUKCQkJCX07CgkJCWUuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJaWYgKHQpIHsKCQkJCQlpZiAobykgcmV0dXJuIHZvaWQgdChvKTsKCQkJCQlhID8gcy5wdXNoKHQpIDogbChlLCB0KSwgc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJaWYgKCFyICYmICh0ICYmIHQoKSwgcykpCgkJCQkJCQlmb3IgKHZhciBlID0gMDsgZSA8IHMubGVuZ3RoOyBlKyspIHNbZV0oKQoJCQkJCX0sIDRlMykKCQkJCX0KCQkJfQoJCX0pLmNhbGwodCwgbigxKSkKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJKGZ1bmN0aW9uKHQsIGkpIHsKCQkJInVzZSBzdHJpY3QiOwoJCQl2YXIgYSA9IG4oMTYpLAoJCQkJbyA9IG4oOSksCgkJCQlyID0gbigxOCksCgkJCQlzID0gbig4MSksCgkJCQlsID0gdm9pZCAwLAoJCQkJYyA9IHZvaWQgMCwKCQkJCWQgPSB2b2lkIDAsCgkJCQlwID0gdm9pZCAwLAoJCQkJaCA9IHZvaWQgMCwKCQkJCXUgPSB2b2lkIDAsCgkJCQltID0gInRhb2JhbyIgPT0gdC5zaXRlIHx8ICJ0bWFsbCIgPT0gdC5zaXRlIHx8IHQuc2l0ZS5pbmRleE9mKCJ0YW9iYW8iKSA+IC0xLAoJCQkJZiA9IHsKCQkJCQkxOiAi5Lqa6ams6YCKIiwKCQkJCQkzOiAi5Lqs5Lic5ZWG5Z+OIiwKCQkJCQkyOiAi5b2T5b2T572RIiwKCQkJCQkzMTogIuS4gOWPt+W6lyIsCgkJCQkJMjU6ICLoi4/lroHmmJPotK0iCgkJCQl9LAoJCQkJZyA9IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgbyA9IG4oMTMyKSwKCQkJCQkJciA9IGEuY29tcGlsZShvKSh7CgkJCQkJCQlkYXRhOiBlLAoJCQkJCQkJYWxpc2l0ZTogbSwKCQkJCQkJCXNfc2VydmVyOiB0LnNfc2VydmVyLAoJCQkJCQkJY19zZXJ2ZXI6IHQuY19zZXJ2ZXIsCgkJCQkJCQlleHROYW1lOiB0LmV4dE5hbWUKCQkJCQkJfSk7CgkJCQkJdSA9IGUubGVuZ3RoLCBpKCIjIiArIHQud2lzaGRvbTIpLmFmdGVyKHIpLCBpKCIuYmpkLXlpZmVucWlhbi1ib3giKS5hZGRDbGFzcygieWlmZW5xaWFuc2hvdyIpLCB1ID4gMSAmJiAoYyA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkgewoJCQkJCQl2KGUubGVuZ3RoKQoJCQkJCX0sIDZlMyksIGggPSAhMCwgdygpKSwgImthb2xhIiA9PT0gdC5zaXRlICYmIGkoIiNiamRfeWlmZW5xaWFuX2RldGFpbCAueWZxLXByaSIpLmNzcyh7CgkJCQkJCXBvc2l0aW9uOiAicmVsYXRpdmUiLAoJCQkJCQl0b3A6ICItMnB4IgoJCQkJCX0pCgkJCQl9LAoJCQkJXyA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlsID0gIXQuc2l0ZV9pZCAmJiAodC5zaXRlLmluZGV4T2YoInRhb2JhbyIpID4gLTEgfHwgdC5zaXRlLmluZGV4T2YoInRtYWxsIikgPiAtMSkgPyAiODMiIDogdC5zaXRlX2lkOwoJCQkJCWZvciAodmFyIG4gPSBbXSwgaSA9IFtdLCBhID0gMDsgYSA8IGUubGVuZ3RoOyBhKyspIHsKCQkJCQkJaWYgKGVbYV0ucHJpY2UgPSAoTnVtYmVyKGVbYV0ucHJpY2UpIC8gMTAwKS50b0ZpeGVkKDIpLCAiODMiID09PSBlW2FdLnNpdGVfaWQpIHsKCQkJCQkJCXZhciBvID0gewoJCQkJCQkJCXNvdXJjZTogInlpZmVucWlhbiIsCgkJCQkJCQkJaW1nX3VybDogZVthXS5pbWdfdXJsLAoJCQkJCQkJCXRpdGxlOiBlW2FdLnRpdGxlLAoJCQkJCQkJCXByaWNlOiBlW2FdLnByaWNlLAoJCQkJCQkJCXNob3BfbmFtZTogIiIsCgkJCQkJCQkJc2FsZXM6ICIiLAoJCQkJCQkJCWlkOiBlW2FdLnVybF9jcmMsCgkJCQkJCQkJdXJsOiBlW2FdLnVybCwKCQkJCQkJCQlkaXNjdXNzOiAiIiwKCQkJCQkJCQlpc3Rhb2JhbzogIjAiLAoJCQkJCQkJCWRwX2lkOiBlW2FdLnVybF9jcmMgKyAiLSIgKyBlW2FdLnNpdGVfaWQsCgkJCQkJCQkJc2l0ZV9pZDogIjgzIgoJCQkJCQkJfTsKCQkJCQkJCW0gfHwgKGVbYV0udXJsID0gcyhvKSkKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciBvID0gewoJCQkJCQkJCXNpdGVfaWQ6IGVbYV0uc2l0ZV9pZCwKCQkJCQkJCQl1cmw6IGVbYV0udXJsLAoJCQkJCQkJCW1vZDogInlpZmVucWlhbiIsCgkJCQkJCQkJdW5pb246IHQudW5pb24uc3BsaXQoIl8iKVsxXSwKCQkJCQkJCQlkcF9pZDogZVthXS51cmxfY3JjICsgIi0iICsgZVthXS5zaXRlX2lkCgkJCQkJCQl9OwoJCQkJCQkJZVthXS51cmwgPSByLmluaXQobyksIGVbYV0udGl0bGUgPSBmW2VbYV0uc2l0ZV9pZF0gKyAiJm5ic3A7Jm5ic3A7IiArIGVbYV0udGl0bGUKCQkJCQkJfQoJCQkJCQllW2FdLnNpdGVfaWQgPT0gbCA/IG4ucHVzaChlW2FdKSA6IGkucHVzaChlW2FdKQoJCQkJCX0KCQkJCQlyZXR1cm4gbi5jb25jYXQoaSkKCQkJCX0sCgkJCQl4ID0gZnVuY3Rpb24oZSkgewoJCQkJCXZhciBuID0gIjAiOwoJCQkJCSh0LnNpdGUuaW5kZXhPZigidGFvYmFvIikgPiAtMSB8fCB0LnNpdGUuaW5kZXhPZigidG1hbGwiKSA+IC0xKSAmJiAobiA9ICIxIik7CgkJCQkJdmFyIGkgPSB0LnNlcnZlciArICIvZXh0ZW5zaW9uP2FjPXlpZmVucWlhbiZhbGlzaXRlPSIgKyBuOwoJCQkJCW8uZ2V0KGkpLmRvbmUoZnVuY3Rpb24odCkgewoJCQkJCQl0ICYmIHQubGVuZ3RoID4gMCAmJiAodCA9IF8odCksIGUodCkpCgkJCQkJfSkKCQkJCX0sCgkJCQl3ID0gZnVuY3Rpb24oKSB7CgkJCQkJaSgiLmJqZC15aWZlbnFpYW4tYm94Iikub24oIm1vdXNlZW50ZXIiLCBmdW5jdGlvbigpIHsKCQkJCQkJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJCQljbGVhckludGVydmFsKGMpLCBoID0gITEKCQkJCQkJfSwgMjAwKQoJCQkJCX0pLCBpKCIuYmpkLXlpZmVucWlhbi1ib3giKS5vbigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uKCkgewoJCQkJCQljbGVhclRpbWVvdXQoZCksIGNsZWFyVGltZW91dChwKSwgaCB8fCAoaCA9ICEwLCBwID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJCXYodSkKCQkJCQkJfSwgNTAwKSwgYyA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkgewoJCQkJCQkJdih1KQoJCQkJCQl9LCA2ZTMpKQoJCQkJCX0pCgkJCQl9LAoJCQkJdiA9IGZ1bmN0aW9uKGUpIHsKCQkJCQkxICE9PSBlICYmIGkoIi5iamQteWlmZW5xaWFuLWJveCBsaSIpLmVhY2goZnVuY3Rpb24odCwgbikgewoJCQkJCQl2YXIgYSA9IGkobikuY3NzKCJ0b3AiKS5tYXRjaCgvKD86LXwpXGQrLyk7CgkJCQkJCWEgJiYgKGEgPSBwYXJzZUludChhWzBdKSksIDAgPiBhID8gKGEgPSAzNCAqIChlIC0gMSksIGEgLT0gMzQsIGkobikuY3NzKCJ0b3AiLCBhICsgInB4IikpIDogKGEgJSAzNCAhPT0gMCA/IGEgPSAzNCAqIE1hdGguZmxvb3IoYSAvIDM0KSA6IGEgLT0gMzQsIGkobikuYW5pbWF0ZSh7CgkJCQkJCQl0b3A6IGEgKyAicHgiCgkJCQkJCX0sIDUwMCkpCgkJCQkJfSkKCQkJCX07CgkJCWUuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7CgkJCQkiMzYwYnV5LXJlIiAhPT0gdC5zaXRlICYmICh0LmZvcmJpZFlGUSB8fCB0LklFNyB8fCB4KGcpKQoJCQl9CgkJfSkuY2FsbCh0LCBuKDEpLCBuKDYpKQoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQllLmV4cG9ydHMgPSAnPGRpdiBpZD0iYmpkX3lpZmVucWlhbl9kZXRhaWwiIGNsYXNzPSJiamQteWlmZW5xaWFuLWJveCI+XG4gIDx1bD5cbiAgICB7e2VhY2ggZGF0YX19XG4gICAgPGxpIHN0eWxlPSJ0b3A6IHt7JGluZGV4KjM0fX1weDsiPlxuICAgICAgPGltZyBzcmM9Int7c19zZXJ2ZXJ9fS9pbWFnZXMvZmF2aWNvbi97eyR2YWx1ZS5zaXRlX2lkfX0uaWNvIiA+XG4gICAgICA8YSBocmVmPSJ7eyR2YWx1ZS51cmx9fSIgY2xhc3M9InlmcS10bGUiIHRhcmdldD0iX2JsYW5rIiB0aXRsZT0ie3skdmFsdWUudGl0bGV9fSI+e3skdmFsdWUudGl0bGV9fTwvYT5cbiAgICAgIDxzcGFuIGNsYXNzPSJ5ZnEtcHJpIj7vv6V7eyR2YWx1ZS5wcmljZX19PC9zcGFuPlxuICAgICAgXG4gICAgPC9saT5cbiAgICB7ey9lYWNofX1cbiAgPC91bD5cbiAge3tpZiAhYWxpc2l0ZX19XG4gIDxhIGhyZWY9Imh0dHBzOi8vd3d3Lnt7ZXh0TmFtZX19LmNvbS9wcm9tb3Rpb24vemhpP2lzX3RlamlhPTEiIGNsYXNzPSJ5ZnEtbW9yZSIgdGFyZ2V0PSJfYmxhbmsiPuabtOWkmj4gPC9hPlxuICB7ey9pZn19XG4gIDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+XG4gICAgLmJqZC15aWZlbnFpYW4tYm94IHtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgfVxuICAgIHt7aWYgYWxpc2l0ZX19XG4gICAgI2JqZF95aWZlbnFpYW5fZGV0YWlsIHVsIGxpIC55ZnEtdGxlIHtcbiAgICAgIHdpZHRoOiAzNTRweDtcbiAgICB9XG4gICAge3svaWZ9fVxuICA8L3N0eWxlPlxuPC9kaXY+JwoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCwgbikgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBpID0gZnVuY3Rpb24oZSwgbiwgaSkgewoJCQkJCXZhciBhID0gJzxsaSBjbGFzcz0ibGlfMCIgZGF0YS10eXBlPSJtb2IiPjxhIGhyZWY9IicgKyBlICsgJyIgdGl0bGU9Iui0reeJqeWFmuWwhuW4puaCqOWJjeW+gOenu+WKqOeJiOmhtemdou+8jOS7peS4k+S6q+S7t+i0reS5sOWVhuWTgSIgdGFyZ2V0PSJfYmxhbmsiIGlkPSInICsgdC5leHRCcmFuZCArICdfbW9iaWxlX3ByaWNlIiByZWw9Im5vcmVmZXJyZXIiPjxzcGFuIGNsYXNzPSJtb2JpbGVfdGl0bGUiID7np7vliqjkuJPkuqs8L3NwYW4+PHNwYW4gY2xhc3M9Im1vYmlsZV9udW0iPu+/pScgKyBuICsgIjwvc3Bhbj48L2E+PC9saT4iOwoJCQkJCXIoYSkKCQkJCX0sCgkJCQlhID0gZnVuY3Rpb24oZSkgewoJCQkJCXZhciBuID0gJzxsaSBjbGFzcz0ibGlfMCIgZGF0YS10eXBlPSJtb2IiPjxhIGlkPSInICsgdC5leHRCcmFuZCArICdfd2VpeGluX3ByaWNlIiByZWw9Im5vcmVmZXJyZXIiPjxzcGFuIGNsYXNzPSJ3ZWl4aW5fdGl0bGUiID7lvq7kv6HmiavnoIE8L3NwYW4+PHNwYW4gY2xhc3M9IndlaXhpbl9udW0iPu+/pScgKyBlICsgIjwvc3Bhbj48L2E+PC9saT4iOwoJCQkJCXIobikKCQkJCX0sCgkJCQlvID0gZnVuY3Rpb24oZSkgewoJCQkJCXZhciBpID0gJzxkaXYgaWQ9Ind4X3FyY29kZSI+XG4gICAgICAgICAgICAgICAgPHNwYW4+5omT5byA5b6u5L+h5omr5LiA5omrPC9zcGFuPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPSInICsgZSArICciIGFsdD0i5b6u5L+h5Lu35qC85LqM57u056CBIiAvPlxuICAgICAgICAgICAgICA8L2Rpdj4nOwoJCQkJCW4oIiMiICsgdC53aXNoZG9tMikuYXBwZW5kKG4oaSkpCgkJCQl9LAoJCQkJciA9IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgaSA9ICIjIiArIHQud2lzaGRvbTI7CgkJCQkJbigiLnByb21vX2JveF9sZWZ0IHVsIikucHJlcGVuZChuKGUpKTsKCQkJCQlmb3IgKHZhciBhID0gbigiLnByb21vX2JveF9sZWZ0IHVsIGxpIiksIG8gPSBhLmxlbmd0aCwgciA9IDA7IG8gPiByOyByKyspIGEuZXEocikuYXR0cigiY2xhc3MiLCAibGlfIiArIHIpOwoJCQkJCTMgPiBvID8gKG4oaSkuYWRkQ2xhc3MoIm9uZWxpbmUiKSwgbigiIyIgKyB0LmV4dEJyYW5kICsgIl9wcm9tb19ib3giKS5zaG93KCksIDEgPT0gbyAmJiBuKCIucHJvbW9fc2h1eGlhbiIpLmhpZGUoKSkgOiBuKGkpLnJlbW92ZUNsYXNzKCJvbmVsaW5lIikuYWRkQ2xhc3MoInR3b2xpbmVzIikKCQkJCX0sCgkJCQlzID0gZnVuY3Rpb24oKSB7CgkJCQkJbigiI2d3ZF93ZWl4aW5fcHJpY2UiKS5vbigibW91c2VlbnRlciIsIGZ1bmN0aW9uKCkgewoJCQkJCQluKCIjd3hfcXJjb2RlIikuc2hvdygpCgkJCQkJfSkub24oIm1vdXNlbGVhdmUiLCBmdW5jdGlvbigpIHsKCQkJCQkJbigiI3d4X3FyY29kZSIpLmhpZGUoKQoJCQkJCX0pCgkJCQl9OwoJCQllLmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKGUsIG4pIHsKCQkJCWlmIChlLm1vYmlsZSkgewoJCQkJCWlmICh0LklFNyB8fCB0LklFOCB8fCB0LklFOSB8fCB0LklFMTApIHJldHVybjsKCQkJCQlpKGUubW9iaWxlLmxpbmssIGUubW9iaWxlLnByaWNlLCBuKQoJCQkJfSBlbHNlIGUud2VpeGluICYmIChhKGUud2VpeGluLnByaWNlKSwgbyhlLndlaXhpbi5xcl9jb2RlX2xpbmspLCBzKCkpCgkJCX0KCQl9KS5jYWxsKHQsIG4oMSksIG4oNikpCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICc8ZGl2IGlkPSJiamRfbWluaWZhdm9yX2NvbnRlbnQiICB7e2lmIGNob29zZWQgfX1jbGFzcz0iYmpkX2Nob29zZWQiIHt7L2lmfX0+XG4gIDxkaXYgY2xhc3M9ImJqZC1sb2dpbi1ib3giPlxuICAgIDxkaXYgY2xhc3M9ImxvZ2luLWxlZnQiPlxuICAgICAgPGRpdiBjbGFzcz0ibG9naW4taW5wdXQiPlxuICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgIGlkPSJ1c2VybmFtZSIgYXV0b2NvbXBsZXRlPSJvZmYiIHBsYWNlaG9sZGVyPSLpgq7nrrEiPlxuICAgICAgICA8aW5wdXQgdHlwZT0icGFzc3dvcmQiIGlkPSJwYXNzd29yZCIgcGxhY2Vob2xkZXI9IuWvhueggSI+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPGEgaHJlZj0iaHR0cHM6Ly93d3cue3tleHROYW1lfX0uY29tL3VzZXIvZm9yZ290X3B3ZC8iIHRhcmdldD0iX2JsYW5rIj7lv5jorrDlr4bnoIE8L2E+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICBcbiAgICAgIDwvZGl2PlxuICAgICAgPHNwYW4gaWQ9ImxvZ2luQ2xpY2tCdG4iIHNlPueZu+W9lTwvc3Bhbj5cbiAgICAgIDxhIGhyZWY9Imh0dHBzOi8vd3d3Lnt7ZXh0TmFtZX19LmNvbS91c2VyL3JlZ2lzdGVyIiBjbGFzcz0icXVpY2stcmVnIiB0YXJnZXQ9Il9ibGFuayI+5b+r6YCf5rOo5YaMPC9hPlxuICAgICAgPHNwYW4gaWQ9ImxvZ2luX3JlbWluZF90bGUiPui0puWPt+aIluWvhueggemUmeivr++8jOivt+mHjeaWsOi+k+WFpe+8gTwvc3Bhbj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPSJsb2dpbi1yaWdodCI+XG4gICAgICA8ZGl2IGNsYXNzPSJzcC1ib3JkZXIiPjwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz0ib3RoZXItbG9naW4tc3R5bGUiPlxuICAgICAgICA8YSBocmVmPSJodHRwczovL3d3dy57e2V4dE5hbWV9fS5jb20vdXNlci9vYXV0aC8/cGw9NyZvcD1sb2dpbiZmcm9tX3VybD17e3VybH19IiBjbGFzcz0icXFsb2dpbiIgPjwvYT5cbiAgICAgICAgPGEgaHJlZj0iaHR0cHM6Ly93d3cue3tleHROYW1lfX0uY29tL3VzZXIvb2F1dGhoLz9wbD0yJm9wPWxvZ2luJmZyb21fdXJsPXt7dXJsfX0iIGNsYXNzPSJzaW5hbG9naW4gIG1pbmktYmciID48L2E+XG4gICAgICAgIDxhIGhyZWY9Imh0dHBzOi8vb3Blbi53ZWl4aW4ucXEuY29tL2Nvbm5lY3QvcXJjb25uZWN0P2FwcGlkPXd4MzQwMDZjMTQxZjlkYWEzYSZyZXNwb25zZV90eXBlPWNvZGUmc2NvcGU9c25zYXBpX2xvZ2luJnN0YXRlPTJjZWQ5NzBkNWI5NzY4MGU5NTY3MGE0OGQxMTAyNjExJnJlZGlyZWN0X3VyaT1odHRwJTNBJTJGJTJGd3d3Lnt7ZXh0TmFtZX19LmNvbSUyRnVzZXIlMkZ3ZWNoYXRfb2F1dGglMkYlM0ZwbCUzRDklMjZvcCUzRGxvZ2luJTI2ZnJvbV91cmwlM0R7e3VybH19IiBjbGFzcz0id2VpeGlubG9naW4gIG1pbmktYmciID48L2E+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4gIDxkaXYgY2xhc3M9ImJqZC1qaWFuZ2ppYS1yZSI+XG4gICAgPGRpdiBjbGFzcz0iamlhbmdqaWEtbGVmdCI+XG4gICAgICA8ZGl2IGNsYXNzPSJqai1yZW1pbmQiPlxuICAgICAgICA8cD7pmY3ku7fmj5DphpI8L3A+XG4gICAgICAgIDxkaXYgY2xhc3M9InJlbWluZC1pdGVtIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz0ic2VsZWN0LWl0ZW0gbWluaS1iZyB7e2lmIG5vdGlmeV9zaXRlID09IFwnMFwnfX1zZWxlY3RlZCB7ey9pZn19IiAgZGF0YS10eXBlPSIwIj48L3NwYW4+XG4gICAgICAgICAgPHNwYW4+5YWo572R5ZWG5a625L2O5LqOPC9zcGFuPlxuICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiB2YWx1ZT0ie3thbGxwcmljZX19Ij5cbiAgICAgICAgICA8c3Bhbj7lhYPml7bmj5DphpI8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPSJyZW1pbmQtaXRlbSByZW1pbmQtaXRlbS1zbmQiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPSJzZWxlY3QtaXRlbSBtaW5pLWJnIHt7aWYgbm90aWZ5X3NpdGUgPT0gXCcxXCd9fXNlbGVjdGVkIHt7L2lmfX0iIGRhdGEtdHlwZT0iMSI+PC9zcGFuPlxuICAgICAgICAgIDxzcGFuPuW9k+WJjeWVhuWutuS9juS6jjwvc3Bhbj5cbiAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9Int7bm93cHJpY2V9fSI+XG4gICAgICAgICAgPHNwYW4+5YWD5pe25o+Q6YaSPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAge3tpZiBsb3dlc3RVcmx9fVxuICAgICAgICA8YSBjbGFzcz0iamotcmVtaW5kLWxvZ28gbWluaS1iZyIgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9Int7bG93ZXN0VXJsfX0iPjwvYT5cbiAgICAgICAge3svaWZ9fVxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPSJqai1zdHlsZSI+XG4gICAgICAgIDxwPuaPkOmGkuaWueW8jzwvcD5cbiAgICAgICAgIDxkaXYgY2xhc3M9InJlbWluZC1pdGVtIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz0ic2VsZWN0LWl0ZW0gbWluaS1iZyB7e2lmIHJlbWluZF90eXBlID09IFwnMFwnfX1zZWxlY3RlZCB7ey9pZn19IiBkYXRhLXR5cGU9IjAiPjwvc3Bhbj5cbiAgICAgICAgICA8c3Bhbj7lhbPms6jlvq7kv6HorqLpmIXlj7fvvIzlvq7kv6Hmj5DphpI8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPSJyZW1pbmQtaXRlbSBqai1yZW1pbmQtaXRlbS1zbmQiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPSJzZWxlY3QtaXRlbSBtaW5pLWJnIHt7aWYgcmVtaW5kX3R5cGUgPT0gXCcxXCd9fXNlbGVjdGVkIHt7L2lmfX0iIGRhdGEtdHlwZT0iMSI+PC9zcGFuPlxuICAgICAgICAgIDxzcGFuPumCrueuseaPkOmGkjwvc3Bhbj5cbiAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9Int7ZW1haWx2YWx1ZX19IiBjbGFzcz0icmUtbWFpbCI+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8c3BhbiBpZD0iZXJyb3JfcmVtaW5kX3RsZSI+6K+36L6T5YWl5q2j56Gu55qE6YKu566x5Zyw5Z2APC9zcGFuPlxuICAgICAgPHNwYW4gaWQ9InN1YmJ0biIgY2xhc3M9InN1YmJ0biI+5o+Q5LqkPC9zcGFuPlxuICAgICAgPHNwYW4gaWQ9ImVkaXRfcmVfc3R5bGUiPuabtOaUueS7t+agvOaPkOmGkuaWueW8jzwvc3Bhbj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPSJqaWFuZ2ppYS1yaWdodCI+XG4gICAgICA8c3BhbiBjbGFzcz0ibWd0b3AiPuW+ruS/oeafpeivojwvc3Bhbj5cbiAgICAgIDxkaXYgY2xhc3M9InFyY29kZS1qaiI+XG4gICAgICAgIDxpbWcgc3JjPSJodHRwOi8vY2RuLnt7ZXh0TmFtZX19LmNvbS9pbWFnZXMvZXh0ZW5zaW9ucy9uZXdiYXIvbWluaV9mYXZvcl93eF9xcmNvZGUuanBnIj5cbiAgICAgIDwvZGl2PlxuICAgICAgPHAgY2xhc3M9ImZpcnN0LXAiPuaJq+eggeWFs+azqOW+ruS/oeWPtzwvcD5cbiAgICAgIDxwPuWVhuWTgemZjeS7t+WunuaXtuaPkOmGkjwvcD5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4gIDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+XG4gICAgLmJqZC1qaWFuZ2ppYS1yZSB7XG4gICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICB7e2lmICFlbWFpbH19XG4gICAgICBkaXNwbGF5Om5vbmU7IFxuICAgICAge3svaWZ9fVxuICAgIH1cbiAgICAuYmpkLWxvZ2luLWJveCB7XG4gICAgICB7e2lmIGVtYWlsfX1cbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICB7ey9pZn19XG4gICAgfVxuICAgIC5qaWFuZ2ppYS1yaWdodCAubWd0b3Age1xuICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgY29sb3I6ICMzMzM7XG4gICAgICBsaW5lLWhlaWdodDogMTRweDtcbiAgICAgIG1hcmdpbi10b3A6IDE4cHg7XG4gICAgfVxuICAgICNiamRfbWluaWZhdm9yX2NvbnRlbnQgI3VzZXJuYW1lIHtcbiAgICAgIG1hcmdpbi10b3A6IDMwcHg7XG4gICAgICBtYXJnaW4tbGVmdDogMzZweDtcbiAgICB9XG4gICAgI2JqZF9taW5pZmF2b3JfY29udGVudCAjcGFzc3dvcmQge1xuICAgICAgbWFyZ2luLWxlZnQ6IDM2cHg7XG4gICAgICBtYXJnaW4tdG9wOiAyMnB4O1xuICAgIH1cbiAgICAjYmpkX21pbmlmYXZvcl9jb250ZW50IC5sb2dpbi1pbnB1dCB7XG4gICAgICBtYXJnaW4tdG9wOiAxNnB4O1xuICAgIH1cbiAgICAjYmpkX21pbmlmYXZvcl9jb250ZW50IC5sb2dpbi1pbnB1dCwgI2JqZF9taW5pZmF2b3JfY29udGVudCAjbG9naW5DbGlja0J0biB7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICB9XG4gICAgI2JqZF9taW5pZmF2b3JfY29udGVudCAubG9naW4taW5wdXQgZGl2IHtcbiAgICAgIGhlaWdodDogNDBweDtcbiAgICAgIGxpbmUtaGVpZ2h0OiA0MHB4O1xuICAgIH1cbiAgICAjYmpkX21pbmlmYXZvcl9jb250ZW50IC5xdWljay1yZWcge1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICBsaW5lLWhlaWdodDogMTJweDtcbiAgICAgIG1hcmdpbi10b3A6IDE0cHg7XG4gICAgfVxuICAgICNiamRfbWluaWZhdm9yX2NvbnRlbnQgLm90aGVyLWxvZ2luLXN0eWxlIHtcbiAgICAgIHBhZGRpbmc6IDU5cHggMDtcbiAgICB9XG4gICAgI2xvZ2luQ2xpY2tCdG4ge1xuICAgICAgbW96LXVzZXItc2VsZWN0OiAtbW96LW5vbmU7XG4gICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xuICAgICAgLW8tdXNlci1zZWxlY3Q6bm9uZTtcbiAgICAgIC1raHRtbC11c2VyLXNlbGVjdDpub25lO1xuICAgICAgLXdlYmtpdC11c2VyLXNlbGVjdDpub25lO1xuICAgICAgLW1zLXVzZXItc2VsZWN0Om5vbmU7XG4gICAgICB1c2VyLXNlbGVjdDpub25lO1xuICAgIH1cbiAgPC9zdHlsZT5cbjwvZGl2PicKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJKGZ1bmN0aW9uKHQsIGkpIHsKCQkJInVzZSBzdHJpY3QiOwoJCQl2YXIgYSA9IG4oMTM2KSwKCQkJCW8gPSBuKDE2KSwKCQkJCXIgPSBuKDExOSksCgkJCQlzID0gbig5KSwKCQkJCWwgPSB7fSwKCQkJCWMgPSBmdW5jdGlvbigpIHsKCQkJCQl0KCIjbG9naW4tcmVtaW5kIHAiKS5jc3MoImNvbG9yIiwgIiNEMTA4MzEiKQoJCQkJfSwKCQkJCWQgPSBmdW5jdGlvbihlLCB0KSB7CgkJCQkJdmFyIG4gPSBlLAoJCQkJCQlhID0gdCB8fCAiIiwKCQkJCQkJbyA9IGkuY19zZXJ2ZXIgKyAiL2FwaS9yZW1pbmRfc2V0dGluZz9hY3Rpb249c2V0JmVtYWlsPSIgKyBpLmVtYWlsICsgIiZzZXR0aW5nX3R5cGU9IiArIG4gKyAiJnJlbWluZF9lbWFpbD0iICsgYTsKCQkJCQlzLmdldChvKQoJCQkJfSwKCQkJCXAgPSBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IHZvaWQgMDsKCQkJCQl0KCIjZmF2b3JfYm94IC5iYXItamlhbmdqaWEtcmUgLnNlbGVjdC1pdGVtIikub2ZmKCJjbGljayIsIGMpLCB0KCIjZmF2b3JfYm94IC5iYXItamlhbmdqaWEtcmUgLnNlbGVjdC1pdGVtIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCXQodGhpcykucGFyZW50KCkucGFyZW50KCkuZmluZCgiLnNlbGVjdC1pdGVtIikucmVtb3ZlQ2xhc3MoInNlbGVjdGVkIiksIHQodGhpcykuYWRkQ2xhc3MoInNlbGVjdGVkIiksIHQodGhpcykuaGFzQ2xhc3MoInFyY29kZS1pdGVtIikgPyB0KCIjcmVtaW5kX3FyY29kZV9pbWciKS5zaG93KCkgOiB0KHRoaXMpLmhhc0NsYXNzKCJlbWFpbC1pdGVtIikgJiYgdCgiI3JlbWluZF9xcmNvZGVfaW1nIikuaGlkZSgpCgkJCQkJfSksIHQoIiNiYXJfc3ViYnRuIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBuID0gdCgiI2Zhdm9yX2JveCIpLmhhc0NsYXNzKCJmYXZvcl9jaG9vc2VkIiksCgkJCQkJCQlhID0gdCgiI2Zhdm9yX2JveCAuamotcmVtaW5kIC5zZWxlY3QtaXRlbS5zZWxlY3RlZCIpLAoJCQkJCQkJbyA9IGEuYXR0cigiZGF0YS10eXBlIiksCgkJCQkJCQlzID0gYS5wYXJlbnQoKS5maW5kKCJpbnB1dCIpLnZhbCgpOwoJCQkJCQlpZiAoIXMgfHwgIjAiID09PSBzKSByZXR1cm4gdm9pZCB0KCIuZXJyb3JfcmVtaW5kIikuc2hvdygpLmZhZGVPdXQoMmUzKTsKCQkJCQkJaWYgKCFuKSB7CgkJCQkJCQl2YXIgbCA9IHZvaWQgMCwKCQkJCQkJCQljID0gdCgiI2Zhdm9yX2JveCAuamotc3R5bGUgLnNlbGVjdC1pdGVtLnNlbGVjdGVkIikuYXR0cigiZGF0YS10eXBlIik7CgkJCQkJCQkiMSIgPT09IGMgJiYgKGwgPSB0KCIjZmF2b3JfYm94IC5qai1zdHlsZSAucmUtbWFpbCIpLnZhbCgpKSwgZChjLCBsKSwgdCgiI2Zhdm9yX2JveCIpLmFkZENsYXNzKCJmYXZvcl9jaG9vc2VkIiksIHQoIiNlZGl0X3JlbWluZF9zdHlsZSwgI3JlbWluZF9xcmNvZGUiKS5zaG93KCkKCQkJCQkJfQoJCQkJCQl0KCIjIiArIGkuZXh0TmFtZSArICItdHJlbmQtZGV0YWlsIikuaGlkZSgpLCB0KCIjcmVtaW5kX3FyY29kZV9pbWciKS5oaWRlKCksIGUgPSAhMSwgci5hZGRfZmF2b3IobywgcykKCQkJCQl9KSwgdCgiI3JlbWluZF9xcmNvZGUiKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQkJZSA/ICh0KCIjcmVtaW5kX3FyY29kZV9pbWciKS5oaWRlKCksIGUgPSAhMSkgOiAodCgiI3JlbWluZF9xcmNvZGVfaW1nIikuc2hvdygpLCBlID0gITApCgkJCQkJfSksIHQoIiNlZGl0X3JlbWluZF9zdHlsZSIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQl0KCIjZmF2b3JfYm94IikucmVtb3ZlQ2xhc3MoImZhdm9yX2Nob29zZWQiKSwgdCgiI2VkaXRfcmVtaW5kX3N0eWxlIikuaGlkZSgpCgkJCQkJfSkKCQkJCX07CgkJCWUuZXhwb3J0cy5sb2dpblJlbmRlclRvcCA9IGZ1bmN0aW9uKCkgewoJCQkJdCgiI2xvZ2luLXJlbWluZCIpLmhpZGUoKSwgcCgpLCB1KCkKCQkJfTsKCQkJdmFyIGggPSBmdW5jdGlvbigpIHsKCQkJCQl0KCIjbG9naW4tcmVtaW5kIC5nb19sb2dpbl9idG4iKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQkJdCgiI2xvZ2luLXJlbWluZCBwIikuY3NzKCJjb2xvciIsICIjOWI5YjliIiksIHQoIiNsb2dpbi1yZW1pbmQiKS5oaWRlKCksIHQoIi5sb2dpbi1jb250ZW50Iikuc2hvdygpLmFuaW1hdGUoewoJCQkJCQkJcmlnaHQ6ICIwcHgiCgkJCQkJCX0sIDUwMCkKCQkJCQl9KSwgdCgiI2xvZ2luQ2xpY2tCdG5CYXIiKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSB0KCIjYmFydXNlcm5hbWUiKS52YWwoKSwKCQkJCQkJCW4gPSB0KCIjYmFycGFzc3dvcmQiKS52YWwoKTsKCQkJCQkJcmV0dXJuIGUgJiYgbiA/IHZvaWQgci51c2VyTG9naW4oZSwgbiwgZnVuY3Rpb24oKSB7CgkJCQkJCQlwKCksIHUoKQoJCQkJCQl9KSA6IHZvaWQgdCgiI2xvZ2luX3JlbWluZF90bGUsICNsb2dpbl9yZW1pbmRfdGxlX2JhciIpLmNzcygiZGlzcGxheSIsICJibG9jayIpLmZhZGVPdXQoNWUzKQoJCQkJCX0pLCB0KCIjbG9nX2JhY2tfYnRuIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCXQoIiNsb2dpbi1yZW1pbmQiKS5zaG93KCksIHQoIi5sb2dpbi1jb250ZW50IikuYW5pbWF0ZSh7CgkJCQkJCQlyaWdodDogIi0yOTJweCIKCQkJCQkJfSwgNTAwLCBmdW5jdGlvbigpIHsKCQkJCQkJCXQoIi5sb2dpbi1jb250ZW50IikuaGlkZSgpCgkJCQkJCX0pCgkJCQkJfSkKCQkJCX0sCgkJCQl1ID0gZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSAiaHR0cHM6Ly93d3cuZ3dkYW5nLmNvbS9jb2xsZWN0L2dldF9xcmNvZGUvP2VtYWlsPSIgKyBpLmVtYWlsOwoJCQkJCXMuZ2V0KGUpLmRvbmUoZnVuY3Rpb24oZSkgewoJCQkJCQl0KCIjcmVtaW5kX3FyY29kZV9pbWcgaW1nIikuYXR0cigic3JjIiwgZS5pbWdfdXJsKSwgdCgiLnFyY29kZS1qaiBpbWciKS5hdHRyKCJzcmMiLCBlLmltZ191cmwpLCB0KCIjcmVtaW5kX3FyY29kZSIpLnNob3coKQoJCQkJCX0pCgkJCQl9LAoJCQkJbSA9IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgbiA9IHZvaWQgMCwKCQkJCQkJciA9IHZvaWQgMCwKCQkJCQkJcyA9IHZvaWQgMCwKCQkJCQkJYyA9IGkuZW1haWwsCgkJCQkJCWQgPSBpLnNhdmVfZHBfcXVlcnk7CgkJCQkJaWYgKGQubm93Lm5vd19kcF9pZCkgewoJCQkJCQl2YXIgaCA9IGVuY29kZVVSSUNvbXBvbmVudChsb2NhdGlvbi5ocmVmKSwKCQkJCQkJCW0gPSBpLmRwLm9sZFByaWNlIHx8IGQubm93LnByaWNlIHx8IGkuZHAucHJpY2U7CgkJCQkJCWkuYWxpU2l0ZSAmJiAobSA9IGkuZHAucHJpY2UpOwoJCQkJCQl2YXIgZiA9IGQuYjJjLm1pbl9wcmljZSB8fCBtOwoJCQkJCQltID0gTnVtYmVyKG0udG9TdHJpbmcoKS5yZXBsYWNlKCIsIiwgIiIpKSwgZiA9IE51bWJlcihmLnRvU3RyaW5nKCkucmVwbGFjZSgiLCIsICIiKSksIGQuYjJjLnByb2R1Y3QgJiYgKHMgPSBkLmIyYy5wcm9kdWN0WzBdLnVybCksIGkuYWxpU2l0ZSAmJiAocyA9ICJqYXZhc2NyaXB0OiIpLCBlLmhhc19yZW1pbmRfdHlwZSAmJiAobiA9ICEwKSwgZS5pc19jb2xsZWN0ZWQgJiYgKGwuaXNfY29sbGVjdGVkID0gZS5pc19jb2xsZWN0ZWQsICIxIiA9PT0gZS5ub3RpZnlfc2l0ZSA/IG0gPSBlLnJlbWluZF9wcmljZSA6IGYgPSBlLnJlbWluZF9wcmljZSksIGwubm90aWZ5X3NpdGUgPSBlLm5vdGlmeV9zaXRlIHx8ICIxIiwgciA9IGUucmVtaW5kX3R5cGUgfHwgIjAiLCBpLmVtYWlsLmluZGV4T2YoaS5leHROYW1lICsgIi5jb20iKSA+IC0xICYmIChjID0gIiIpOwoJCQkJCQl2YXIgZyA9IG8uY29tcGlsZShhKSh7CgkJCQkJCQljaG9vc2VkOiBuLAoJCQkJCQkJaXNsb2dpbjogITAsCgkJCQkJCQllbWFpbDogaS5lbWFpbCwKCQkJCQkJCWVtYWlsdmFsdWU6IGMsCgkJCQkJCQl1cmw6IGgsCgkJCQkJCQlhbGlTaXRlOiBpLmFsaVNpdGUsCgkJCQkJCQlsb3dlc3RVcmw6IHMsCgkJCQkJCQlub3RpZnlfc2l0ZTogbC5ub3RpZnlfc2l0ZSwKCQkJCQkJCW5vd3ByaWNlOiBtLAoJCQkJCQkJYWxscHJpY2U6IGYsCgkJCQkJCQlyZW1pbmRfdHlwZTogciwKCQkJCQkJCWV4dE5hbWU6IGkuZXh0TmFtZSwKCQkJCQkJCW1vbmV5OiBsLm1vbmV5LAoJCQkJCQkJbGFzdHByaWNlOiBsLm5vd3ByaWNlLAoJCQkJCQkJcHJpY2VfcmFuZ2U6IGwucHJpY2VfcmFuZ2UKCQkJCQkJfSk7CgkJCQkJCXQobC5kb20pLmFwcGVuZChnKSwgcCgpLCB1KCkKCQkJCQl9CgkJCQl9LAoJCQkJZiA9IGZ1bmN0aW9uKGUsIG4pIHsKCQkJCQl2YXIgciA9IHZvaWQgMCwKCQkJCQkJcyA9IGkuZHAucHJpY2UsCgkJCQkJCWQgPSBpLnNhdmVfZHBfcXVlcnk7CgkJCQkJZC5iMmMucHJvZHVjdCAmJiAociA9IGQuYjJjLnByb2R1Y3RbMF0udXJsKTsKCQkJCQl2YXIgcCA9IG8uY29tcGlsZShhKSh7CgkJCQkJCWVtYWlsOiBpLmVtYWlsLAoJCQkJCQllbWFpbHZhbHVlOiAiIiwKCQkJCQkJbG93ZXN0VXJsOiByLAoJCQkJCQlub3RpZnlfc2l0ZTogIjAiLAoJCQkJCQlub3dwcmljZTogbC5ub3dwcmljZSwKCQkJCQkJYWxscHJpY2U6IHMsCgkJCQkJCXJlbWluZF90eXBlOiAiMCIsCgkJCQkJCWV4dE5hbWU6IGkuZXh0TmFtZSwKCQkJCQkJbW9uZXk6IG4sCgkJCQkJCWFsaVNpdGU6IGkuYWxpU2l0ZSwKCQkJCQkJbGFzdHByaWNlOiBsLm5vd3ByaWNlLAoJCQkJCQlwcmljZV9yYW5nZTogbC5wcmljZV9yYW5nZQoJCQkJCX0pOwoJCQkJCXQoZSkuYXBwZW5kKHApLCB0KCIjZmF2b3JfYm94IC5iYXItamlhbmdqaWEtcmUgLnNlbGVjdC1pdGVtIikub24oImNsaWNrIiwgYykKCQkJCX07CgkJCWUuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oZSwgdCwgYSkgewoJCQkJaWYgKGwubm93cHJpY2UgPSBOdW1iZXIoYS5zdG9yZVswXS5jdXJyZW50X3ByaWNlKSwgbC5wcmljZV9yYW5nZSA9IGEuc3RvcmVbMF0ucHJpY2VfcmFuZ2UucmVwbGFjZSgiLSIsICIgfiAiKSwgbC5kb20gPSBlLCBsLm1vbmV5ID0gdCwgaS5lbWFpbCkgdHJ5IHsKCQkJCQluKDExOSkuZ2V0UmVtaW5kU3R5bGUobSkKCQkJCX0gY2F0Y2ggKG8pIHt9IGVsc2UgZihlLCB0KTsKCQkJCWgoKQoJCQl9CgkJfSkuY2FsbCh0LCBuKDYpLCBuKDEpKQoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQllLmV4cG9ydHMgPSAnPGRpdiBpZD0iZmF2b3JfYm94IiB7e2lmIGNob29zZWQgfX1jbGFzcz0iZmF2b3JfY2hvb3NlZCIge3svaWZ9fT5cbiAgPGRpdiBjbGFzcz0ibG9naW4tY29udGVudCAiPlxuICAgIDxkaXYgY2xhc3M9ImJqZC1sb2dpbi1ib3giPlxuICAgIDxkaXYgY2xhc3M9ImxvZ2luLWxlZnQiPlxuICAgICAgPGRpdiBjbGFzcz0ibG9naW4taW5wdXQiPlxuICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgIGlkPSJiYXJ1c2VybmFtZSIgcGxhY2Vob2xkZXI9IumCrueusSI+XG4gICAgICAgIDxpbnB1dCB0eXBlPSJwYXNzd29yZCIgaWQ9ImJhcnBhc3N3b3JkIiBwbGFjZWhvbGRlcj0i5a+G56CBIj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8YSBocmVmPSJodHRwczovL3d3dy57e2V4dE5hbWV9fS5jb20vdXNlci9mb3Jnb3RfcHdkLyIgdGFyZ2V0PSJfYmxhbmsiPuW/mOiusOWvhueggTwvYT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIFxuICAgICAgPC9kaXY+XG4gICAgICA8c3BhbiBpZD0ibG9naW5DbGlja0J0bkJhciI+55m75b2VPC9zcGFuPlxuICAgICAgPGEgaHJlZj0iaHR0cHM6Ly93d3cue3tleHROYW1lfX0uY29tL3VzZXIvcmVnaXN0ZXIiIGNsYXNzPSJxdWljay1yZWciIHRhcmdldD0iX2JsYW5rIj7lv6vpgJ/ms6jlhow8L2E+XG4gICAgICA8c3BhbiBpZD0ibG9naW5fcmVtaW5kX3RsZV9iYXIiPui0puWPt+aIluWvhueggemUmeivr++8jOivt+mHjeaWsOi+k+WFpe+8gTwvc3Bhbj5cbiAgICAgIDxzcGFuIGlkPSJsb2dfYmFja19idG4iPjwvc3Bhbj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPSJsb2dpbi1yaWdodCI+XG4gICAgICA8ZGl2IGNsYXNzPSJzcC1ib3JkZXIiPjwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz0ib3RoZXItbG9naW4tc3R5bGUiPlxuICAgICAgICA8YSBocmVmPSJodHRwczovL3d3dy57e2V4dE5hbWV9fS5jb20vdXNlci9vYXV0aC8/cGw9NyZvcD1sb2dpbiZmcm9tX3VybD17e3VybH19IiBjbGFzcz0icXFsb2dpbiIgPjwvYT5cbiAgICAgICAgPGEgaHJlZj0iaHR0cHM6Ly93d3cue3tleHROYW1lfX0uY29tL3VzZXIvb2F1dGhoLz9wbD0yJm9wPWxvZ2luJmZyb21fdXJsPXt7dXJsfX0iIGNsYXNzPSJzaW5hbG9naW4gIG1pbmktYmciID48L2E+XG4gICAgICAgIDxhIGhyZWY9Imh0dHBzOi8vb3Blbi53ZWl4aW4ucXEuY29tL2Nvbm5lY3QvcXJjb25uZWN0P2FwcGlkPXd4MzQwMDZjMTQxZjlkYWEzYSZyZXNwb25zZV90eXBlPWNvZGUmc2NvcGU9c25zYXBpX2xvZ2luJnN0YXRlPTJjZWQ5NzBkNWI5NzY4MGU5NTY3MGE0OGQxMTAyNjExJnJlZGlyZWN0X3VyaT1odHRwJTNBJTJGJTJGd3d3Lnt7ZXh0TmFtZX19LmNvbSUyRnVzZXIlMkZ3ZWNoYXRfb2F1dGglMkYlM0ZwbCUzRDklMjZvcCUzRGxvZ2luJTI2ZnJvbV91cmwlM0R7e3VybH19IiBjbGFzcz0id2VpeGlubG9naW4gIG1pbmktYmciID48L2E+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4gIDwvZGl2PlxuICA8ZGl2IGNsYXNzPSJiYXItamlhbmdqaWEtcmUiPlxuICAgIDxkaXYgY2xhc3M9InByaWNlLWhlYWQiPlxuICAgICAgPGRpdiBjbGFzcz0iaGVhZC1pdGVtIG5vdy1wcmktZGl2Ij5cbiAgICAgICAgPHNwYW4gY2xhc3M9InJlLXN0cm9uZyI+5b2T5YmN5Lu35qC877yaPC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz0icmUtcHJpY2UiPnt7bW9uZXl9fXt7bGFzdHByaWNlfX08L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9ImhlYWQtaXRlbSBoaXMtcHJpLWRpdiI+XG4gICAgICAgIDxzcGFuIGNsYXNzPSJyZS1zdHJvbmciPuWOhuWPsuS7t+agvO+8mjwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9InJlLXByaWNlLW51bSI+e3ttb25leX19e3twcmljZV9yYW5nZX19PC9zcGFuPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz0iamotcmVtaW5kIj5cbiAgICAgICAgPHA+6ZmN5Lu35o+Q6YaSPC9wPlxuICAgICAgICA8ZGl2IGNsYXNzPSJyZW1pbmQtaXRlbSByZW1pbmQtaXRlbS1mc3QiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPSJzZWxlY3QtaXRlbSBtaW5pLWJnIHt7aWYgbm90aWZ5X3NpdGUgPT0gXCcwXCd9fXNlbGVjdGVkIHt7L2lmfX0iICBkYXRhLXR5cGU9IjAiPjwvc3Bhbj5cbiAgICAgICAgICA8c3Bhbj7lhajnvZHllYblrrbkvY7kuo57e21vbmV5fX08L3NwYW4+XG4gICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIHZhbHVlPSJ7e2FsbHByaWNlfX0iPlxuICAgICAgICAgIDxzcGFuPuaXtuaPkOmGkjwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9InJlbWluZC1pdGVtIHJlbWluZC1pdGVtLXNuZCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9InNlbGVjdC1pdGVtIG1pbmktYmcge3tpZiBub3RpZnlfc2l0ZSA9PSBcJzFcJ319c2VsZWN0ZWQge3svaWZ9fSIgZGF0YS10eXBlPSIxIj48L3NwYW4+XG4gICAgICAgICAgPHNwYW4+5b2T5YmN5ZWG5a625L2O5LqOe3ttb25leX19PC9zcGFuPlxuICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiB2YWx1ZT0ie3tub3dwcmljZX19Ij5cbiAgICAgICAgICA8c3Bhbj7ml7bmj5DphpI8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7e2lmIGFsbHByaWNlICYmICFhbGlTaXRlICYmIGxvd2VzdFVybH19XG4gICAgICAgIDxhIGNsYXNzPSJqai1yZW1pbmQtbG9nbzIgaGFzdXJsIG1pbmktYmciIHRhcmdldD0iX2JsYW5rIiBocmVmPSJ7e2xvd2VzdFVybH19Ij48L2E+XG4gICAgICAgIHt7ZWxzZSBpZiAhYWxpU2l0ZSAmJiAhYWxscHJpY2V9fVxuICAgICAgICAgIDxhIGNsYXNzPSJqai1yZW1pbmQtbG9nbyIgPjwvYT5cbiAgICAgICAge3svaWZ9fVxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPSJqai1zdHlsZSI+XG4gICAgICAgIDxwPuaPkOmGkuaWueW8jzwvcD5cbiAgICAgICAgIDxkaXYgY2xhc3M9InJlbWluZC1pdGVtIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz0icXJjb2RlLWl0ZW0gc2VsZWN0LWl0ZW0gbWluaS1iZyB7e2lmIHJlbWluZF90eXBlID09IFwnMFwnfX1zZWxlY3RlZCB7ey9pZn19IiBkYXRhLXR5cGU9IjAiPjwvc3Bhbj5cbiAgICAgICAgICA8c3Bhbj7lhbPms6jlvq7kv6HorqLpmIXlj7fvvIzlvq7kv6Hmj5DphpI8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPSJyZW1pbmQtaXRlbSByZW1pbmQtaXRlbS1zbmQiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPSJlbWFpbC1pdGVtIHNlbGVjdC1pdGVtIG1pbmktYmcge3tpZiByZW1pbmRfdHlwZSA9PSBcJzFcJ319c2VsZWN0ZWQge3svaWZ9fSIgZGF0YS10eXBlPSIxIj48L3NwYW4+XG4gICAgICAgICAgPHNwYW4+6YKu566x5o+Q6YaSPC9zcGFuPlxuICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiB2YWx1ZT0ie3tlbWFpbHZhbHVlfX0iIGNsYXNzPSJyZS1tYWlsIj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgXG4gICAgICA8L2Rpdj5cbiAgICAgICA8c3BhbiBpZD0iYmFyX3N1YmJ0biIgY2xhc3M9InN1YmJ0biI+5o+Q5LqkPC9zcGFuPlxuICAgICAgPGRpdiBpZD0ibG9naW4tcmVtaW5kIiBjbGFzcz0ie3tpZiBpc2xvZ2lufX0gbG9naW5lZCB7ey9pZn19Ij5cbiAgICAgICAgPHNwYW4gY2xhc3M9ImdvX2xvZ2luX2J0biI+5Y6755m75b2VPC9zcGFuPlxuICAgICAgICA8cD7nmbvlvZXotKbmiLfvvIzlj4rml7bojrflj5bllYblk4HpmY3ku7fkv6Hmga/mj5DphpI8L3A+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxzcGFuIGNsYXNzPSJlcnJvcl9yZW1pbmQiPuivt+i+k+WFpeato+ehruagvOW8j+WVhuWTgeS7t+agvDwvc3Bhbj5cbiAgICAgIDxzcGFuIGlkPSJlZGl0X3JlbWluZF9zdHlsZSI+5pu05pS55Lu35qC85o+Q6YaS5pa55byPPC9zcGFuPlxuICAgICAgPHNwYW4gaWQ9InJlbWluZF9xcmNvZGUiIGNsYXNzPSJ7e2lmIGlzbG9naW59fSBsb2dpbmVkIHt7L2lmfX0iIG5vcz7lvq7kv6Hkuoznu7TnoIE8L3NwYW4+XG4gICAgICA8ZGl2IGlkPSJyZW1pbmRfcXJjb2RlX2ltZyI+XG4gICAgICAgIDxpbWcgc3JjPSIiIGFsdD0i5LqM57u056CBIj5cbiAgICAgICAgPHA+6LSt54mp5YWa5q+U5Lu3PC9wPlxuICAgICAgPC9kaXY+XG4gIDwvZGl2PlxuICA8c3R5bGUgdHlwZT0idGV4dC9jc3MiPlxuICAgICNmYXZvcl9ib3ggLmVycm9yX3JlbWluZCB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBib3R0b206IDk3cHg7XG4gICAgICBsZWZ0OiAxMDJweDtcbiAgICAgIGZvbnQtc2l6ZTogMTJweCFpbXBvcnRhbnQ7XG4gICAgICBjb2xvcjogI0VGMTEzNyFpbXBvcnRhbnQ7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgICAjZmF2b3JfYm94LmZhdm9yX2Nob29zZWQgLmVycm9yX3JlbWluZCB7XG4gICAgICBib3R0b206IDY5cHg7XG4gICAgICBsZWZ0OiA5NXB4O1xuICAgIH1cbiAgICAjZmF2b3JfYm94IHtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIGZsb2F0OiByaWdodDtcbiAgICAgIHdpZHRoOiAzMjBweDtcbiAgICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgI2VhZWFlYTtcbiAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB9XG4gICAgLmxvZ2luLWNvbnRlbnQge1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgIGhlaWdodDogMjYwcHg7XG4gICAgICB3aWR0aDogMzIwcHg7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCAjZWFlYWVhO1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgdG9wOiAwcHg7XG4gICAgICByaWdodDogLTI5MnB4O1xuICAgICAgei1pbmRleDogOTk5O1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICB9XG4gICAgLmxvZ2luLWNvbnRlbnQgLmxvZ2luLXJpZ2h0IHtcbiAgICAgIHdpZHRoOiA4NnB4O1xuICAgICAgaGVpZ2h0OiAyNTBweDtcbiAgICB9XG4gICAgLmxvZ2luLWNvbnRlbnQgLm90aGVyLWxvZ2luLXN0eWxlIHtcbiAgICAgIHdpZHRoOiA0MHB4O1xuICAgICAgcGFkZGluZzogMzRweCAwO1xuICAgICAgbWFyZ2luLWxlZnQ6IDE4cHg7XG4gICAgfVxuICAgIC5sb2dpbi1jb250ZW50IC5sb2dpbi1sZWZ0IHtcbiAgICAgIHdpZHRoOiAyMjZweDtcbiAgICAgIGhlaWdodDogMjUwcHg7XG4gICAgfVxuICAgIC5sb2dpbi1jb250ZW50IC5vdGhlci1sb2dpbi1zdHlsZSBhIHtcbiAgICAgIG1hcmdpbjogMTBweCAwcHg7XG4gICAgfVxuICAgIC5sb2dpbi1jb250ZW50IC5sb2dpbi1pbnB1dCBpbnB1dCB7XG4gICAgICB3aWR0aDogMTQ4cHg7XG4gICAgICBtYXJnaW4tbGVmdDogMjNweDtcbiAgICAgIG1hcmdpbi10b3A6IDIycHg7XG4gICAgfVxuICAgICNiamQtbm90aWZpZXIgLnByaWNlLXRyZW5kIGRpdi5jaGFydCB7XG4gICAgICBib3JkZXItcmlnaHQ6IG5vbmUhaW1wb3J0YW50O1xuICAgIH1cbiAgICAjZmF2b3JfYm94IC5wcmljZS1oZWFkIHtcbiAgICAgIG1hcmdpbi10b3A6IDE0cHg7XG4gICAgfVxuICAgICNmYXZvcl9ib3ggLmhlYWQtaXRlbSB7XG4gICAgICBsaW5lLWhlaWdodDogMTRweDtcbiAgICAgIGhlaWdodDogMTRweDtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgIH1cbiAgICAjZmF2b3JfYm94IC5oZWFkLWl0ZW0gc3BhbiB7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICB9XG4gICAgI2Zhdm9yX2JveCAuaGVhZC1pdGVtOmFmdGVyIHtcbiAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgY29udGVudDogIiI7XG4gICAgICBjbGVhcjogYm90aDtcbiAgICB9XG4gICAgI2Zhdm9yX2JveCAuaGlzLXByaS1kaXYge1xuICAgICAgbWFyZ2luLXRvcDogOXB4O1xuICAgIH1cbiAgICAjZmF2b3JfYm94IC5sb2dpbi1pbnB1dCBkaXYgYSB7XG4gICAgICBjb2xvcjogIzgyYzBlMDtcbiAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICB9XG4gICAgI2Zhdm9yX2JveCAubG9naW4taW5wdXQgZGl2IHtcbiAgICAgIHBhZGRpbmctdG9wOiAzcHg7XG4gICAgICBwYWRkaW5nLXJpZ2h0OiAyN3B4O1xuICAgIH1cbiAgICAjZmF2b3JfYm94IGEucXVpY2stcmVnIHtcbiAgICAgIGNvbG9yOiAjNWNjMmZiO1xuICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgICBtYXJnaW4tbGVmdDogOTBweDtcbiAgICB9XG4gICAgI2xvZ19iYWNrX2J0biB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICB0b3A6IDEwcHg7XG4gICAgICBsZWZ0OiAxMHB4O1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgaGVpZ2h0OiAxOHB4O1xuICAgICAgd2lkdGg6IDE4cHg7XG4gICAgICBiYWNrZ3JvdW5kOiB1cmwoXCdodHRwczovL2Nkbi5nd2RhbmcuY29tL2ltYWdlcy9leHRlbnNpb25zL25ld2Jhci9sb2dpbi1kZWxldGUucG5nXCcpIG5vLXJlcGVhdCAwcHggMHB4O1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIH1cbiAgICAjbG9naW5DbGlja0J0bkJhciB7XG4gICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgIGhlaWdodDogMzBweDtcbiAgICAgIHdpZHRoOiA4MHB4O1xuICAgICAgbGluZS1oZWlnaHQ6IDMwcHg7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDdCRUZFO1xuICAgICAgY29sb3I6ICNmZmY7XG4gICAgICBib3JkZXItcmFkaXVzOiAxNXB4O1xuICAgICAgbWFyZ2luLWxlZnQ6IDcycHg7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICBtYXJnaW4tdG9wOiAyM3B4O1xuICAgIH1cbiAgICAjZmF2b3JfYm94IC5sb2dpbi1pbnB1dCB7XG4gICAgICBtYXJnaW4tdG9wOiAxN3B4O1xuICAgIH1cblxuICAgICNmYXZvcl9ib3ggc3Bhbi5yZS1zdHJvbmcge1xuICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgY29sb3I6ICMyZjM3MzU7XG4gICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgIG1hcmdpbi1sZWZ0OiAxM3B4O1xuICAgIH1cbiAgICAjZmF2b3JfYm94IC5yZS1wcmljZS1udW0ge1xuICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICBjb2xvcjogIzQ1NEE0RDtcbiAgICB9XG4gICAgI2Zhdm9yX2JveCBzcGFuLnJlLXByaWNlIHtcbiAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgIGNvbG9yOiAjRDEwODMxO1xuICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgfVxuICAgICNmYXZvcl9ib3ggLnNlbGVjdC1pdGVtIHtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgaGVpZ2h0OiAxNnB4O1xuICAgICAgd2lkdGg6IDE2cHg7XG4gICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjQzcHggLTEwcHg7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICBtYXJnaW4tbGVmdDogMTJweDtcbiAgICAgIG1hcmdpbi1yaWdodDogMTJweDtcbiAgICB9XG4gICAgI2Zhdm9yX2JveCAuc2VsZWN0LWl0ZW0uc2VsZWN0ZWQge1xuICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTI2OXB4IC0xMHB4O1xuICAgIH1cbiAgICAjZmF2b3JfYm94IC5qai1yZW1pbmQ+cCwgI2Zhdm9yX2JveCAuamotc3R5bGU+cCB7XG4gICAgICBtYXJnaW4tbGVmdDogMTNweDtcbiAgICB9XG4gICAgI2Zhdm9yX2JveCAuamotc3R5bGU+cCB7XG4gICAgICBtYXJnaW4tYm90dG9tOiAxMnB4O1xuICAgIH1cbiAgICAuamotc3R5bGUgLnJlbWluZC1pdGVtLXNuZCB7XG4gICAgICBtYXJnaW4tdG9wOiAxMXB4O1xuICAgIH1cbiAgICAuZmF2b3JfY2hvb3NlZCAgLmpqLXJlbWluZCB7XG4gICAgICBtYXJnaW4tdG9wOiAyMHB4O1xuICAgICAgaGVpZ2h0OiAxMDJweDtcbiAgICB9XG4gICAgLmZhdm9yX2Nob29zZWQgLnJlbWluZC1pdGVtLWZzdCB7XG4gICAgICBtYXJnaW4tdG9wOiAzMHB4O1xuICAgICAgbWFyZ2luLWJvdHRvbTogMjJweDtcbiAgICB9XG4gICAgI2Zhdm9yX2JveCAucmVtaW5kLWl0ZW0ge1xuICAgICAgaGVpZ2h0OiAxNnB4O1xuICAgICAgbGluZS1oZWlnaHQ6IDE2cHg7XG4gICAgfVxuICAgIC5yZW1pbmQtaXRlbS1zbmQge1xuICAgICAgbWFyZ2luLXRvcDogMTFweDtcbiAgICB9XG4gICAgI2Zhdm9yX2JveC5mYXZvcl9jaG9vc2VkIC5qai1yZW1pbmQgLmpqLXJlbWluZC1sb2dvIHtcbiAgICAgIHRvcDogMTZweDtcbiAgICB9XG4gICAgI2Zhdm9yX2JveC5mYXZvcl9jaG9vc2VkIC5qai1yZW1pbmQgLmpqLXJlbWluZC1sb2dvMiB7XG4gICAgICB0b3A6IDEycHg7XG4gICAgfVxuICAgIC5mYXZvcl9jaG9vc2VkIHNwYW4uc3ViYnRuIHtcbiAgICAgIG1hcmdpbi10b3A6IDI2cHg7XG4gICAgICBtYXJnaW4tbGVmdDogMTM2cHg7XG4gICAgfVxuICAgIC5qai1zdHlsZSB7XG4gICAgICBoZWlnaHQ6IDczcHg7XG4gICAgfVxuICAgIC5mYXZvcl9jaG9vc2VkIC5qai1zdHlsZSB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgICAjZmF2b3JfYm94IC5qai1yZW1pbmQgLmpqLXJlbWluZC1sb2dvIHtcbiAgICAgIHRvcDogLTRweDtcbiAgICAgIGJhY2tncm91bmQ6IHVybChcJ2h0dHBzOi8vY2RuLmd3ZGFuZy5jb20vaW1hZ2VzL2V4dGVuc2lvbnMvbmV3YmFyL3JlbWluZF9wcmljZS5wbmdcJykgbm8tcmVwZWF0IDBweCAwcHg7XG4gICAgICB3aWR0aDogMTI1cHg7XG4gICAgICBsZWZ0OiAxMTNweDtcbiAgICB9XG4gICAgI2Zhdm9yX2JveCAuamotcmVtaW5kIC5qai1yZW1pbmQtbG9nbzIge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgaGVpZ2h0OiAyNXB4O1xuICAgICAgd2lkdGg6IDExMHB4O1xuICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTEyMnB4IC03NHB4O1xuICAgICAgbGVmdDogMTE2cHg7XG4gICAgICB0b3A6IC0ycHg7XG4gICAgfVxuICAgICNmYXZvcl9ib3ggLmpqLXJlbWluZCAuamotcmVtaW5kLWxvZ28yOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IC04cHggLTc0cHg7XG4gICAgfVxuICAgIC5yZW1pbmQtaXRlbS1mc3Qge1xuICAgICAgbWFyZ2luLXRvcDogMTNweDtcbiAgICB9XG4gICAgI2xvZ2luLXJlbWluZCB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgI2VhZWFlYTtcbiAgICAgIGhlaWdodDogMTExcHg7XG4gICAgICB3aWR0aDogMzE5cHg7XG4gICAgICBib3R0b206IDBweDtcbiAgICAgIHJpZ2h0OiAwcHg7XG4gICAgfVxuICAgICNsb2dpbi1yZW1pbmQubG9naW5lZCB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgICAjbG9naW4tcmVtaW5kIC5nb19sb2dpbl9idG4ge1xuICAgICAgd2lkdGg6IDcwcHg7XG4gICAgICBoZWlnaHQ6IDI2cHg7XG4gICAgICBsaW5lLWhlaWdodDogMjZweDtcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICM1ZWJlZmY7XG4gICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIGNvbG9yOiAjZmZmO1xuICAgICAgbWFyZ2luOiAzMHB4IDBweCAwcHggMTMwcHg7XG4gICAgICBib3JkZXItcmFkaXVzOiAycHg7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgfVxuICAgICNsb2dpbi1yZW1pbmQgLmdvX2xvZ2luX2J0bjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzc5MGUxO1xuICAgIH1cbiAgICAjbG9naW4tcmVtaW5kIHAge1xuICAgICAgY29sb3I6ICM5YjliOWI7XG4gICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICBtYXJnaW4tdG9wOiA2OHB4O1xuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgd2lkdGg6IDMyMHB4O1xuICAgIH1cbiAgICAubG9naW4tY29udGVudCAuc3AtYm9yZGVyIHtcbiAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IDBweCAxNnB4O1xuICAgICAgd2lkdGg6IDIwcHg7XG4gICAgfVxuICAgICNlZGl0X3JlbWluZF9zdHlsZSwgI3JlbWluZF9xcmNvZGV7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgICAuZmF2b3JfY2hvb3NlZCAjZWRpdF9yZW1pbmRfc3R5bGUge1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgIH1cbiAgICAjcmVtaW5kX3FyY29kZS5sb2dpbmVke1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgIH1cbiAgICAjZWRpdF9yZW1pbmRfc3R5bGUge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgYm90dG9tOiAxMXB4O1xuICAgICAgbGVmdDogMTRweDtcbiAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgIGNvbG9yOiAjNWViZWZmO1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIH1cbiAgICAjcmVtaW5kX3FyY29kZSB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBib3R0b206IDdweDtcbiAgICAgIHJpZ2h0OiAzOHB4O1xuICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgY29sb3I6ICM1ZWJlZmY7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAtbW96LXVzZXItc2VsZWN0OiAtbW96LW5vbmU7XG4gICAgICAta2h0bWwtdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xuICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lO1xuICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgfVxuICAgIC5mYXZvcl9jaG9vc2VkICNyZW1pbmRfcXJjb2RlIHtcbiAgICAgIGJvdHRvbTogMTFweDtcbiAgICAgIHJpZ2h0OiAxNHB4O1xuICAgICAgei1pbmRleDogOTk5OTk5OTk7XG4gICAgfVxuICAgICNyZW1pbmRfcXJjb2RlX2ltZyB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICByaWdodDogMTBweDtcbiAgICAgIGhlaWdodDogMTM0cHg7XG4gICAgICB3aWR0aDogMTIwcHg7XG4gICAgICBib3R0b206IDM2cHg7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgI2UxZTFlMTtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gICAgICBib3gtc2hhZG93OiAwcHggNXB4IDE1cHggMCByZ2JhKDIzLDI1LDI3LDAuMTUpO1xuICAgIH1cbiAgICAjcmVtaW5kX3FyY29kZV9pbWcgaW1nIHtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgIH1cbiAgICAjcmVtaW5kX3FyY29kZV9pbWc6YmVmb3JlIHtcbiAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgY29udGVudDogIiI7XG4gICAgICBoZWlnaHQ6IDBweDtcbiAgICAgIHdpZHRoOiAwcHg7XG4gICAgICBib3JkZXI6IDhweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgICAgIGJvcmRlci10b3AtY29sb3I6ICM5OTk7XG4gICAgICBib3JkZXItcmlnaHQtd2lkdGg6IDdweDtcbiAgICAgIGJvcmRlci1sZWZ0LXdpZHRoOiA3cHg7XG4gICAgICB0b3A6IDEzNXB4O1xuICAgICAgcmlnaHQ6IDUycHg7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgfVxuICAgICNyZW1pbmRfcXJjb2RlX2ltZzphZnRlciB7XG4gICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgIGNvbnRlbnQ6ICIiO1xuICAgICAgaGVpZ2h0OiAwcHg7XG4gICAgICB3aWR0aDogMHB4O1xuICAgICAgYm9yZGVyOiA4cHggc29saWQgdHJhbnNwYXJlbnQ7XG4gICAgICBib3JkZXItdG9wLWNvbG9yOiAjZmZmO1xuICAgICAgYm9yZGVyLXJpZ2h0LXdpZHRoOiA4cHg7XG4gICAgICBib3JkZXItbGVmdC13aWR0aDogOHB4O1xuICAgICAgdG9wOiAxMzRweDtcbiAgICAgIHJpZ2h0OiA1MXB4O1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIH1cbiAgICAjcmVtaW5kX3FyY29kZV9pbWcgcCB7XG4gICAgICB0ZXh0LWFsaWduOiBqdXN0aWZ5O1xuICAgICAgbWFyZ2luOiAwcHg7XG4gICAgICBwYWRkaW5nOiAwcHggNnB4O1xuICAgICAgaGVpZ2h0OiAyMHB4O1xuICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgY29sb3I6ICM4ZDhkOGQ7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICB0b3A6IC04cHg7XG4gICAgfVxuICAgICNyZW1pbmRfcXJjb2RlX2ltZyBwOmFmdGVye1xuICAgICAgY29udGVudDoiLiI7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICB3aWR0aDoxMDAlO1xuICAgICAgb3ZlcmZsb3c6aGlkZGVuO1xuICAgICAgaGVpZ2h0OjA7XG4gICAgfVxuICAgICNmYXZvcl9ib3ggLnFxbG9naW4ge1xuICAgICAgbWFyZ2luLXRvcDogMjBweCFpbXBvcnRhbnQ7XG4gICAgfVxuICA8L3N0eWxlPlxuPC9kaXY+JzsKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJZS5leHBvcnRzID0gJ3t7ZWFjaCBkYXRhfX1cbjxsaSBjbGFzcz0ie3tleHRCcmFuZH19LWxpc3QtaXRlbSIgc3R5bGU9ImRpc3BsYXk6YmxvY2siPlxuICA8YSBjbGFzcz0ie3tleHRCcmFuZH19LWZhdm9yLXBpYyIgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9Int7JHZhbHVlLnVybH19Ij5cbiAgICA8aW1nIHNyYz0iaHR0cDovL2Jyb3dzZXIue3tleHROYW1lfX0uY29tL3RlbXBsYXRlL2F1Zy9pbWFnZXMvbmV3LzEyMC5naWYiIGRhdGEtb3JpZ2luYWw9Int7JHZhbHVlLnBpY191cmx9fSIgZF93aWR0aD0iNjAiIGRfaGVpZ2h0PSI2MCIgaWQ9Int7ZXh0TmFtZX19LWZhdm9yLWRwe3skdmFsdWUuZHBfaWR9fSI+PC9hPlxuICAgIDxwIGNsYXNzPSJ7e2V4dEJyYW5kfX0tZmF2b3ItcHJvZHVjdC10aXRsZSI+XG4gICAgICA8YSBocmVmPSJ7eyR2YWx1ZS51cmx9fSIgdGFyZ2V0PSJfYmxhbmsiPnt7JHZhbHVlLnRpdGxlfX08L2E+XG4gICAgPC9wPlxuICAgIDxzcGFuIGNsYXNzPSJ7e2V4dEJyYW5kfX0tcHJpY2Uge3tleHRCcmFuZH19LWZhdm9yLXByaWNlIj5cbiAgICAgIHt7JHZhbHVlLm5ld1ByaWNlfX1cbiAgICAgIHt7aWYgJHZhbHVlLmhhc3ByaWNlfX1cbiAgICAgIDxlbT4gJm5ic3A76LW3PC9lbT5cbiAgICAgIHt7L2lmfX1cbiAgICA8L3NwYW4+XG4gICAgPHNwYW4gY2xhc3M9Int7ZXh0QnJhbmR9fS1kZWwge3tleHRCcmFuZH19LWdyYXkiIGRwX2lkPSJ7eyR2YWx1ZS5kcF9pZH19Ij7liKAmbmJzcDvpmaQ8L3NwYW4+XG4gIDwvbGk+XG4gIHt7L2VhY2h9fScKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJdmFyIGk7CgkJKGZ1bmN0aW9uKGEsIG8pIHsKCQkJInVzZSBzdHJpY3QiOwoJCQlpID0gZnVuY3Rpb24oKSB7CgkJCQl2YXIgZSA9IG5ldyBEYXRlLAoJCQkJCWkgPSB2b2lkIDAsCgkJCQkJciA9IG4oMTM5KSwKCQkJCQlzID0gbig0MCksCgkJCQkJbCA9IG4oMTQwKSwKCQkJCQljID0gbig2KSwKCQkJCQlkID0gbigxMTgpLAoJCQkJCXAgPSBuKDE2KSwKCQkJCQloID0gbigxMyksCgkJCQkJdSA9IG4oMjYpLAoJCQkJCW0gPSBuKDkyKSwKCQkJCQlmID0gITEsCgkJCQkJZyA9ICLnvo7lhYMiLAoJCQkJCV8gPSAxLAoJCQkJCXggPSAwLAoJCQkJCXcgPSA4NjRlNSwKCQkJCQl2ID0gMTAsCgkJCQkJYiA9IDMsCgkJCQkJeSA9ICExLAoJCQkJCWsgPSB2b2lkIDAsCgkJCQkJeiA9IHZvaWQgMCwKCQkJCQlCID0gITEsCgkJCQkJaiA9IHZvaWQgMCwKCQkJCQlDID0gdm9pZCAwOwoJCQkJYS5TVkdSZW5kZXJlci5wcm90b3R5cGUuc3ltYm9scy5yZWN0ID0gZnVuY3Rpb24oZSwgdCwgbiwgaSkgewoJCQkJCXJldHVybiBbIk0iLCBlIC0gMiwgdCwgIkwiLCBlICsgOSwgdCwgIkwiLCBlICsgOSwgdCArIDUsICJMIiwgZSAtIDIsIHQgKyA1LCAiWiJdCgkJCQl9LCBhLlNWR1JlbmRlcmVyLnByb3RvdHlwZS5zeW1ib2xzLnNtYWxsUmVjdCA9IGZ1bmN0aW9uKGUsIHQsIG4sIGkpIHsKCQkJCQlyZXR1cm4gWyJNIiwgZSAtIDIsIHQsICJMIiwgZSArIDksIHQsICJaIl0KCQkJCX0sIGEud3JhcChhLlRvb2x0aXAucHJvdG90eXBlLCAiaGlkZSIsIGZ1bmN0aW9uKGUpIHsKCQkJCQllLmFwcGx5KHRoaXMpLCB0aGlzLmNoYXJ0LnRvb2x0aXAub3B0aW9ucy5vbkhpZGUuYXBwbHkodGhpcykKCQkJCX0pOwoJCQkJdmFyIFMgPSB7CgkJCQkJZm9sZGVkOiAic21hbGxSZWN0IiwKCQkJCQlleHRlbmRlZDogInJlY3QiCgkJCQl9OwoJCQkJKG8uSUU3IHx8IG8uSUU4KSAmJiAoUy5mb2xkZWQgPSAiY2lyY2xlIiwgUy5leHRlbmRlZCA9ICJjaXJjbGUiKTsKCQkJCXZhciBOID0gInBsb3RBbGwiLAoJCQkJCVQgPSAhMSwKCQkJCQlQID0gZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gW10sCgkJCQkJCQl0ID0gewoJCQkJCQkJCWluTGlzdDogZnVuY3Rpb24odCkgewoJCQkJCQkJCQlyZXR1cm4gZS5pbmRleE9mKHQpID4gLTEKCQkJCQkJCQl9LAoJCQkJCQkJCWFkZDogZnVuY3Rpb24odCkgewoJCQkJCQkJCQlCICYmIFQgfHwgZS5pbmRleE9mKHQpID4gLTEgfHwgZS5wdXNoKHQpCgkJCQkJCQkJfSwKCQkJCQkJCQlyZW1vdmU6IGZ1bmN0aW9uKHQpIHsKCQkJCQkJCQkJdmFyIG4gPSBlLmluZGV4T2YodCk7CgkJCQkJCQkJCW4gPiAtMSAmJiBlLnNwbGljZShuLCAxKQoJCQkJCQkJCX0KCQkJCQkJCX07CgkJCQkJCXJldHVybiB0CgkJCQkJfSgpLAoJCQkJCUkgPSBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSB7fTsKCQkJCQkJZVsi6K+E6K665pWwIl0gPSAiI2NhNjBhNiI7CgkJCQkJCXZhciB0ID0gWyIjNDViN2Y1IiwgIiNlYjQ2ZWIiLCAiI2ZmYWQwNiIsICIjMjFjMWRiIiwgIiNiODhhZTYiLCAiI2IzNzAzNiIsICIjYjlkYjBmIiwgIiNmZmQ5MWMiXSwKCQkJCQkJCW4gPSAwOwoJCQkJCQlyZXR1cm4gZnVuY3Rpb24oaSkgewoJCQkJCQkJcmV0dXJuIGVbaV0gPyBlW2ldIDogbiA8IHQubGVuZ3RoID8gKGVbaV0gPSB0W24rK10sIGVbaV0pIDogKGVbaV0gPSAiIyIgKyBwYXJzZUludCgyNTYgKiBNYXRoLnJhbmRvbSgpICogMjU2ICogMjU2KS50b1N0cmluZygxNiksIGVbaV0pCgkJCQkJCX0KCQkJCQl9KCksCgkJCQkJQSA9IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9ICExOwoJCQkJCQlyZXR1cm4gZnVuY3Rpb24oKSB7CgkJCQkJCQllIHx8IChlID0gITAsIGgubG9nKCJ0cmVuZC1xcmNvZGUtc2hvdyIpLCB1KCJ0cmVuZC1xcmNvZGUtc2hvdyIpKQoJCQkJCQl9CgkJCQkJfSgpLAoJCQkJCXEgPSBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCXJldHVybiBNYXRoLmFicyhlIC0gdCkgPCAxZS00CgkJCQkJfSwKCQkJCQlFID0gZnVuY3Rpb24oZSkgewoJCQkJCQlyZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSkKCQkJCQl9LAoJCQkJCU8gPSAhMCwKCQkJCQlMID0gMCwKCQkJCQlEID0gITEsCgkJCQkJTSA9IHZvaWQgMCwKCQkJCQlSID0gdm9pZCAwLAoJCQkJCUYgPSB2b2lkIDAsCgkJCQkJJCA9IHZvaWQgMCwKCQkJCQlXID0gdm9pZCAwLAoJCQkJCUggPSB2b2lkIDA7CgkJCQlMID0gbigxNDEpOwoJCQkJdmFyIFUgPSBmdW5jdGlvbihlLCB0LCBuLCBpKSB7CgkJCQkJCXZhciBhID0gJC5zdG9yZS5maWx0ZXIoZnVuY3Rpb24odCkgewoJCQkJCQkJcmV0dXJuIHQubmFtZSA9PT0gZQoJCQkJCQl9KVswXTsKCQkJCQkJaWYgKHZvaWQgMCA9PSBhKSByZXR1cm4gdDsKCQkJCQkJdmFyIG8gPSBhW1ddOwoJCQkJCQlpZiAoIW8pIHJldHVybiB0OwoJCQkJCQlpZiAoIWEuYWxsX2VxdWFsX3Nob3J0ICYmICJzaG9ydF9kYXlfbGluZSIgIT09IFcgJiYgaSkgewoJCQkJCQkJdmFyIHIgPSB2b2lkIDAsCgkJCQkJCQkJcyA9IHZvaWQgMDsKCQkJCQkJCXN3aXRjaCAoVykgewoJCQkJCQkJCWNhc2UgImFsbF9saW5lIjoKCQkJCQkJCQkJciA9IGEuYWxsX2xpbmVfYmVnaW5fdGltZTsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJY2FzZSAieWVhcl9saW5lIjoKCQkJCQkJCQkJciA9IGEueWVhcl9saW5lX3RpbWU7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgIm1vbnRoX2xpbmUiOgoJCQkJCQkJCQlyID0gYS5tb250aF9saW5lX3RpbWUKCQkJCQkJCX0KCQkJCQkJCXJldHVybiByID0gbmV3IERhdGUociAtIDI4OGU1KSwgciA9IG5ldyBEYXRlKHIuZ2V0WWVhcigpICsgMTkwMCwgci5nZXRNb250aCgpLCByLmdldERhdGUoKSksIHMgPSBpIC0gci5nZXRUaW1lKCksIG9bcGFyc2VJbnQocyAvIHcpXQoJCQkJCQl9CgkJCQkJCXZhciBsID0gcGFyc2VJbnQoby5sZW5ndGggKiBuIC0gMSk7CgkJCQkJCTAgPiBsICYmIChsICs9IDEpOwoJCQkJCQl2YXIgYyA9IHZvaWQgMDsKCQkJCQkJYyA9IGwgPj0gMSA/IFtvW2wgLSAxXSwgb1tsXSwgb1tsICsgMV1dIDogW29bbF0sIG9bbCArIDFdXSwgYyA9IGMuZmlsdGVyKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCXJldHVybiB2b2lkIDAgIT09IGUKCQkJCQkJfSk7CgkJCQkJCXZhciBkID0gYy5tYXAoZnVuY3Rpb24oZSkgewoJCQkJCQkJCXJldHVybiBNYXRoLmFicyhlIC0gdCkKCQkJCQkJCX0pLAoJCQkJCQkJcCA9IGQuaW5kZXhPZihNYXRoLm1pbi5hcHBseShudWxsLCBkKSk7CgkJCQkJCXJldHVybiBjW3BdCgkJCQkJfSwKCQkJCQlZID0gbnVsbCwKCQkJCQlHID0ge30sCgkJCQkJWCA9IHsKCQkJCQkJeDogMCwKCQkJCQkJeTogMAoJCQkJCX07CgkJCQlhLnNldE9wdGlvbnMoewoJCQkJCWdsb2JhbDogewoJCQkJCQl0aW1lem9uZU9mZnNldDogOAoJCQkJCX0KCQkJCX0pOwoJCQkJdmFyIEogPSB7CgkJCQkJCWhpZ2hMaW5lOiBudWxsLAoJCQkJCQlsb3dMaW5lOiBudWxsCgkJCQkJfSwKCQkJCQlaID0gITEsCgkJCQkJViA9IGZ1bmN0aW9uKGUpIHsKCQkJCQkJdmFyIHQgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgdm9pZCAwID09PSBhcmd1bWVudHNbMV0gPyAhMSA6IGFyZ3VtZW50c1sxXSwKCQkJCQkJCW4gPSBlLnlBeGlzIGluc3RhbmNlb2YgQXJyYXkgPyBlLnlBeGlzWzBdIDogZS55QXhpcywKCQkJCQkJCWkgPSBuLnBsb3RMaW5lc0FuZEJhbmRzLAoJCQkJCQkJciA9IGUuY2hhcnQgPyBlLmNoYXJ0IDogZSwKCQkJCQkJCXMgPSByLnNlcmllczsKCQkJCQkJcy5mb3JFYWNoKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCSgibWF4IiA9PT0gZS5uYW1lIHx8ICJtaW4iID09PSBlLm5hbWUpICYmIGUucmVtb3ZlKCEwKQoJCQkJCQl9KSwgTCB8fCAoTCA9IDApOwoJCQkJCQl2YXIgbCA9IGllKHMpLAoJCQkJCQkJYyA9IGkuZmlsdGVyKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQlyZXR1cm4gImhpZ2hQcmljZSIgPT09IGUuaWQKCQkJCQkJCX0pLAoJCQkJCQkJcCA9IGkuZmlsdGVyKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQlyZXR1cm4gImxvd1ByaWNlIiA9PT0gZS5pZAoJCQkJCQkJfSksCgkJCQkJCQloID0gaS5maWx0ZXIoZnVuY3Rpb24oZSkgewoJCQkJCQkJCXJldHVybiAib3JpZ2luUHJpY2UiID09PSBlLmlkCgkJCQkJCQl9KTsKCQkJCQkJaWYgKGMgPSBjLmxlbmd0aCA/IGNbMF0ub3B0aW9ucyA6IEouaGlnaExpbmUsIHAgPSBwLmxlbmd0aCA/IHBbMF0ub3B0aW9ucyA6IEoubG93TGluZSwgaC5sZW5ndGggJiYgKGggPSBoWzBdLm9wdGlvbnMpLCBKLmhpZ2hMaW5lID0gYywgSi5sb3dMaW5lID0gcCwgbi5yZW1vdmVQbG90TGluZSgiaGlnaFByaWNlIiksIG4ucmVtb3ZlUGxvdExpbmUoImxvd1ByaWNlIiksIGggJiYgKG4ucmVtb3ZlUGxvdExpbmUoIm9yaWdpblByaWNlIiksIG4uYWRkUGxvdExpbmUoaCkpLCBsKSB7CgkJCQkJCQlsLm1heCA9IHBhcnNlRmxvYXQoYS5udW1iZXJGb3JtYXQobC5tYXgsIDIsICIuIiwgIiIpKSwgbC5taW4gPSBwYXJzZUZsb2F0KGEubnVtYmVyRm9ybWF0KGwubWluLCAyLCAiLiIsICIiKSksIGMudmFsdWUgPSBsLm1heCwgcC52YWx1ZSA9IGwubWluOwoJCQkJCQkJdmFyIHUgPSBmdW5jdGlvbihlKSB7CgkJCQkJCQkJcmV0dXJuICIiCgkJCQkJCQl9OwoJCQkJCQkJZiAmJiAodSA9IGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQl2YXIgdCA9IHsKCQkJCQkJCQkJCWNvbTogIiQiLAoJCQkJCQkJCQkJImNvLnVrIjogIsKjIiwKCQkJCQkJCQkJCWRlOiAiRVVSIiwKCQkJCQkJCQkJCSJjby5qcCI6ICLCpSIsCgkJCQkJCQkJCQlmcjogIkVVUiIsCgkJCQkJCQkJCQljYTogIkNETiQiLAoJCQkJCQkJCQkJY246ICLCpSIsCgkJCQkJCQkJCQlpdDogIkVVUiIsCgkJCQkJCQkJCQllczogIkVVUiIsCgkJCQkJCQkJCQkiNnBtIjogIiQiCgkJCQkJCQkJCX0sCgkJCQkJCQkJCW4gPSAiIjsKCQkJCQkJCQlmb3IgKHZhciBpIGluIHQpIGxvY2F0aW9uLmhvc3QuaW5kZXhPZihpKSA+IC0xICYmICgiYW1hem9uIiA9PT0gby5zaXRlIHx8ICI2cG0iID09IG8uc2l0ZSkgJiYgKG4gPSB0W2ldKTsKCQkJCQkJCQlyZXR1cm4gbgoJCQkJCQkJfSk7CgkJCQkJCQl2YXIgbSA9IHUoKTsKCQkJCQkJCWMubGFiZWwudGV4dCA9ICLmnIDpq5g6IiArIG0gKyBkKGwubWF4KSwgcC5sYWJlbC50ZXh0ID0gIuacgOS9jjoiICsgbSArIGQobC5taW4pLCAid3d3LmFtYXpvbi5jby5qcCIgPT0gbG9jYXRpb24uaG9zdCAmJiAoYy5sYWJlbC50ZXh0ID0gIuacgOmrmDoiICsgZChsLm1heCkgKyAi5pel5YWDIiwgcC5sYWJlbC50ZXh0ID0gIuacgOS9jjoiICsgZChsLm1pbikgKyAi5pel5YWDIiksIGMubGFiZWwueSA9IGIsIHAubGFiZWwueSA9IGIsIGgubGFiZWwgJiYgKGgubGFiZWwueSA9IGIpOwoJCQkJCQkJdmFyIGcgPSBmdW5jdGlvbihlLCB0KSB7CgkJCQkJCQkJcmV0dXJuIE1hdGguYWJzKGUgLSB0KSA8IC4wNQoJCQkJCQkJfTsKCQkJCQkJCXEoYy52YWx1ZSwgcC52YWx1ZSkgJiYgKGMubGFiZWwudGV4dCA9ICIiLCBwLmxhYmVsLnRleHQgPSAi546w5Lu3OiIgKyBtICsgZChsLm1pbiksICJ3d3cuYW1hem9uLmNvLmpwIiA9PSBsb2NhdGlvbi5ob3N0ICYmIChwLmxhYmVsLnRleHQgPSAi546w5Lu3OiIgKyBkKGwubWluKSArICLml6XlhYMiKSwgbC5taW5TdGFydCA9IE1hdGgubWF4KGwubWluU3RhcnQsIGwubWF4U3RhcnQpLCBsLm1heFN0YXJ0ID0gbC5taW5TdGFydCksIChnKGMudmFsdWUsIEwpIHx8IGcocC52YWx1ZSwgTCkpICYmIChPIHx8IFQpICYmIGgubGFiZWwgPyAoaC5sYWJlbC50ZXh0ID0gIiIsIG4ucmVtb3ZlUGxvdExpbmUoIm9yaWdpblByaWNlIiksIG4uYWRkUGxvdExpbmUoaCkpIDogTyAmJiBoLmxhYmVsICYmIChoLmxhYmVsLnRleHQgPSAi5Y6f5Lu3OiIgKyBtICsgZChMKSwgInd3dy5hbWF6b24uY28uanAiID09IGxvY2F0aW9uLmhvc3QgJiYgKGgubGFiZWwudGV4dCA9ICLljp/ku7c6IiArIGQoTCkgKyAi5pel5YWDIiksIG4ucmVtb3ZlUGxvdExpbmUoIm9yaWdpblByaWNlIiksIG4uYWRkUGxvdExpbmUoaCkpLCB0IHx8IChuLmFkZFBsb3RMaW5lKGMpLCBuLmFkZFBsb3RMaW5lKHApKTsKCQkJCQkJCXZhciBfID0gc1swXSwKCQkJCQkJCQl4ID0gXy5kYXRhW18uZGF0YS5sZW5ndGggLSAxXTsKCQkJCQkJCXggfHwgKHggPSB7CgkJCQkJCQkJeDogRgoJCQkJCQkJfSk7CgkJCQkJCQl2YXIgdyA9IHsKCQkJCQkJCQkJbmFtZTogIm1heCIsCgkJCQkJCQkJCXNob3dJbkxlZ2VuZDogITEsCgkJCQkJCQkJCXBvaW50U3RhcnQ6IGwubWF4U3RhcnQsCgkJCQkJCQkJCXBvaW50SW50ZXJ2YWw6IHgueCAtIGwubWF4U3RhcnQsCgkJCQkJCQkJCXpJbmRleDogMWUzLAoJCQkJCQkJCQlkYXRhOiBbewoJCQkJCQkJCQkJeTogbC5tYXgsCgkJCQkJCQkJCQltYXJrZXI6IHsKCQkJCQkJCQkJCQllbmFibGVkOiAhMCwKCQkJCQkJCQkJCQlmaWxsQ29sb3I6ICIjZWQ0YTRhIiwKCQkJCQkJCQkJCQlyYWRpdXM6IDMsCgkJCQkJCQkJCQkJc3ltYm9sOiAiY2lyY2xlIiwKCQkJCQkJCQkJCQlzdGF0ZXM6IHsKCQkJCQkJCQkJCQkJaG92ZXI6IHsKCQkJCQkJCQkJCQkJCWVuYWJsZWQ6ICEwLAoJCQkJCQkJCQkJCQkJbGluZUNvbG9yOiAiI2ZhZGJkYyIsCgkJCQkJCQkJCQkJCQlmaWxsQ29sb3I6ICIjZWQ0YTRhIiwKCQkJCQkJCQkJCQkJCWxpbmVXaWR0aDogMywKCQkJCQkJCQkJCQkJCXJhZGl1czogNSwKCQkJCQkJCQkJCQkJCXN5bWJvbDogImNpcmNsZSIKCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCX0KCQkJCQkJCQkJfSwgewoJCQkJCQkJCQkJeTogbC5tYXgsCgkJCQkJCQkJCQltYXJrZXI6IHsKCQkJCQkJCQkJCQllbmFibGVkOiAhMSwKCQkJCQkJCQkJCQlzdGF0ZXM6IHsKCQkJCQkJCQkJCQkJaG92ZXI6IHsKCQkJCQkJCQkJCQkJCWVuYWJsZWQ6ICExCgkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQl9CgkJCQkJCQkJCX1dLAoJCQkJCQkJCQljb2xvcjogIiNlZDRhNGEiLAoJCQkJCQkJCQlkYXNoU3R5bGU6ICJkYXNoIiwKCQkJCQkJCQkJbGluZVdpZHRoOiAxLAoJCQkJCQkJCQlzdGF0ZXM6IHsKCQkJCQkJCQkJCWhvdmVyOiB7CgkJCQkJCQkJCQkJZW5hYmxlZDogITAsCgkJCQkJCQkJCQkJaGFsbzogewoJCQkJCQkJCQkJCQlzaXplOiAwCgkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9CgkJCQkJCQkJfSwKCQkJCQkJCQl2ID0gewoJCQkJCQkJCQluYW1lOiAibWluIiwKCQkJCQkJCQkJc2hvd0luTGVnZW5kOiAhMSwKCQkJCQkJCQkJcG9pbnRTdGFydDogbC5taW5TdGFydCwKCQkJCQkJCQkJcG9pbnRJbnRlcnZhbDogeC54IC0gbC5taW5TdGFydCwKCQkJCQkJCQkJekluZGV4OiAxZTMsCgkJCQkJCQkJCWRhdGE6IFt7CgkJCQkJCQkJCQl5OiBsLm1pbiwKCQkJCQkJCQkJCW1hcmtlcjogewoJCQkJCQkJCQkJCWZpbGxDb2xvcjogIiMzNWJkNjciLAoJCQkJCQkJCQkJCXJhZGl1czogMywKCQkJCQkJCQkJCQllbmFibGVkOiAhMCwKCQkJCQkJCQkJCQlzeW1ib2w6ICJjaXJjbGUiLAoJCQkJCQkJCQkJCXN0YXRlczogewoJCQkJCQkJCQkJCQlob3ZlcjogewoJCQkJCQkJCQkJCQkJZW5hYmxlZDogITAsCgkJCQkJCQkJCQkJCQlsaW5lQ29sb3I6ICIjZGFmNWU0IiwKCQkJCQkJCQkJCQkJCWZpbGxDb2xvcjogIiMzNWJkNjciLAoJCQkJCQkJCQkJCQkJbGluZVdpZHRoOiAzLAoJCQkJCQkJCQkJCQkJcmFkaXVzOiA1LAoJCQkJCQkJCQkJCQkJc3ltYm9sOiAiY2lyY2xlIgoJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9LCB7CgkJCQkJCQkJCQl5OiBsLm1pbiwKCQkJCQkJCQkJCW1hcmtlcjogewoJCQkJCQkJCQkJCWVuYWJsZWQ6ICExLAoJCQkJCQkJCQkJCXN0YXRlczogewoJCQkJCQkJCQkJCQlob3ZlcjogewoJCQkJCQkJCQkJCQkJZW5hYmxlZDogITEKCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCX0KCQkJCQkJCQkJfV0sCgkJCQkJCQkJCWNvbG9yOiAiIzM1YmQ2NyIsCgkJCQkJCQkJCWRhc2hTdHlsZTogImRhc2giLAoJCQkJCQkJCQlsaW5lV2lkdGg6IDEKCQkJCQkJCQl9OwoJCQkJCQkJdCB8fCAoci5hZGRTZXJpZXModyksIHIuYWRkU2VyaWVzKHYpKTsKCQkJCQkJCXZhciBCID0gbC5tYXggLSBsLm1pbjsKCQkJCQkJCShMIC0gbC5tYXgpIC8gQiA+IC41ICYmIEIgPyAoeSA9ICEwLCBoLnZhbHVlID0gYy52YWx1ZSArIC41ICogQiwgayA9IGgudmFsdWUsIHogPSBMIC0gaC52YWx1ZSkgOiAoeSA9ICExLCBoLnZhbHVlID0gTCk7CgkJCQkJCQl2YXIgaiA9IGwubWF4LAoJCQkJCQkJCUMgPSBsLm1pbjsKCQkJCQkJCU8gJiYgKGogPSBNYXRoLm1heChsLm1heCwgaC52YWx1ZSksIEMgPSBNYXRoLm1pbihsLm1pbiwgaC52YWx1ZSkpLCAwID09PSBDICYmIChDID0gbC5taW4pOwoJCQkJCQkJdmFyIFMgPSBqIC0gQywKCQkJCQkJCQlOID0gcGFyc2VJbnQoUyAvIDUgKiAxMCkgLyAxMCwKCQkJCQkJCQlQID0gLjU7CgkJCQkJCQlpZiAoUyA+IDUwICYmIChQID0gMTApLCAuNSA+IFMgJiYgKFAgPSAuMSksIC4yID4gUyAmJiAoUCA9IC4wNSksIFAgPiBOKSBOID0gUDsKCQkJCQkJCWVsc2UgewoJCQkJCQkJCWZvciAodmFyIEkgPSBQOyBOID4gSTspIEkgKz0gUDsKCQkJCQkJCQlOID0gSQoJCQkJCQkJfQoJCQkJCQkJdmFyIEEgPSB7CgkJCQkJCQkJbWF4OiBqICsgLjEgKiBTLAoJCQkJCQkJCW1pbjogQyAtIC4xICogUyA+IDAgPyBDIC0gLjEgKiBTIDogQywKCQkJCQkJCQl0aWNrSW50ZXJ2YWw6IFMgPyBOIDogMTAsCgkJCQkJCQkJdGlja1N0YXJ0OiBwYXJzZUludChDKQoJCQkJCQkJfTsKCQkJCQkJCWgudmFsdWUgPiBBLm1heCAmJiBUICYmIChBLm1heCA9IGgudmFsdWUpLCBuLnVwZGF0ZShBKTsKCQkJCQkJCXZhciBFID0gbi5wbG90TGluZXNBbmRCYW5kcy5tYXAoZnVuY3Rpb24oZSkgewoJCQkJCQkJCQlyZXR1cm4gZS5zdmdFbGVtID8gewoJCQkJCQkJCQkJaWQ6IGUuaWQsCgkJCQkJCQkJCQl5OiBlLnN2Z0VsZW0uZC5zcGxpdCgiICIpWzJdCgkJCQkJCQkJCX0gOiB7CgkJCQkJCQkJCQlpZDogZS5pZCwKCQkJCQkJCQkJCXk6IGUudmFsdWUKCQkJCQkJCQkJfQoJCQkJCQkJCX0pLAoJCQkJCQkJCUQgPSB7fTsKCQkJCQkJCWlmIChFLmZvckVhY2goZnVuY3Rpb24oZSkgewoJCQkJCQkJCURbZS5pZF0gPSBwYXJzZUZsb2F0KGUueSkKCQkJCQkJCX0pLCAhKEUubGVuZ3RoIDw9IDIpKSB7CgkJCQkJCQkJdmFyIE0gPSB7CgkJCQkJCQkJCWhpZ2hMb3c6IEQuaGlnaFByaWNlIC0gRC5sb3dQcmljZSwKCQkJCQkJCQkJaGlnaE9yaWdpbjogRC5oaWdoUHJpY2UgLSBELm9yaWdpblByaWNlLAoJCQkJCQkJCQlsb3dPcmlnaW46IEQubG93UHJpY2UgLSBELm9yaWdpblByaWNlCgkJCQkJCQkJfTsKCQkJCQkJCQlNYXRoLmFicyhNLmhpZ2hMb3cpIDwgMTEgJiYgMCAhPT0gTS5oaWdoTG93ICYmIChjLmxhYmVsLnkgLT0gNS41LCBwLmxhYmVsLnkgKz0gNS41KSwgTWF0aC5hYnMoTS5oaWdoT3JpZ2luKSA8IDExICYmIChjLnZhbHVlIC0gaC52YWx1ZSA8IDAgPyAoaC5sYWJlbC55IC09IDUuNSwgYy5sYWJlbC55ICs9IDUuNSkgOiBjLnZhbHVlIC0gaC52YWx1ZSA+IDAgJiYgKGgubGFiZWwueSArPSA1LjUsIGMubGFiZWwueSAtPSA1LjUpKSwgTWF0aC5hYnMoTS5sb3dPcmlnaW4pIDwgMTEgJiYgKHAudmFsdWUgLSBoLnZhbHVlIDwgMCA/IChoLmxhYmVsLnkgLT0gNS41LCBwLmxhYmVsLnkgKz0gNS41KSA6IHAudmFsdWUgLSBoLnZhbHVlID4gMCAmJiAoaC5sYWJlbC55ICs9IDUuNSwgcC5sYWJlbC55IC09IDUuNSkpLCBuLnJlbW92ZVBsb3RMaW5lKCJoaWdoUHJpY2UiKSwgbi5yZW1vdmVQbG90TGluZSgibG93UHJpY2UiKSwgbi5yZW1vdmVQbG90TGluZSgib3JpZ2luUHJpY2UiKSwgdCB8fCAobi5hZGRQbG90TGluZShjKSwgbi5hZGRQbG90TGluZShwKSwgbi5hZGRQbG90TGluZShoKSkKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0sCgkJCQkJSyA9IHsKCQkJCQkJY2hhcnQ6IHsKCQkJCQkJCXJlbmRlclRvOiAicGxvdEFyZWEiLAoJCQkJCQkJdHlwZTogImxpbmUiLAoJCQkJCQkJYW5pbWF0aW9uOiAhMSwKCQkJCQkJCW1hcmdpblJpZ2h0OiAyOTAsCgkJCQkJCQltYXJnaW5MZWZ0OiA3MCwKCQkJCQkJCWV2ZW50czogewoJCQkJCQkJCWxvYWQ6IGZ1bmN0aW9uKCkgewoJCQkJCQkJCQl2YXIgdCA9IHRoaXMuc2VyaWVzWzBdOwoJCQkJCQkJCQlwID0gdC5kYXRhW3QuZGF0YS5sZW5ndGggLSAxXS54OwoJCQkJCQkJCQl2YXIgbiA9IHRoaXMueEF4aXNbMF0ubWF4IC0gNSAqIHc7CgkJCQkJCQkJCXQub3B0aW9ucy5wb2ludFN0YXJ0ID4gbiAmJiAobiA9IHQub3B0aW9ucy5wb2ludFN0YXJ0KTsKCQkJCQkJCQkJdmFyIGkgPSB7CgkJCQkJCQkJCQkJbmFtZTogIuW9k+WJjeWVhuWfjuWOn+Wni+S7t+agvCIsCgkJCQkJCQkJCQkJcG9pbnRTdGFydDogbiwKCQkJCQkJCQkJCQlwb2ludEludGVydmFsOiAxLAoJCQkJCQkJCQkJCWRhdGE6IFt7CgkJCQkJCQkJCQkJCXk6IEwsCgkJCQkJCQkJCQkJCW1hcmtlcjogewoJCQkJCQkJCQkJCQkJZW5hYmxlZDogITEKCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCX0sIHsKCQkJCQkJCQkJCQkJeTogTCwKCQkJCQkJCQkJCQkJbWFya2VyOiB7CgkJCQkJCQkJCQkJCQllbmFibGVkOiAhMQoJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJfV0sCgkJCQkJCQkJCQkJbGluZVdpZHRoOiAxLAoJCQkJCQkJCQkJCXpJbmRleDogMSwKCQkJCQkJCQkJCQltYXJrZXI6IHsKCQkJCQkJCQkJCQkJc3ltYm9sOiBTLmV4dGVuZGVkLAoJCQkJCQkJCQkJCQlzdGF0ZXM6IHsKCQkJCQkJCQkJCQkJCWhvdmVyOiB7CgkJCQkJCQkJCQkJCQkJZW5hYmxlZDogITEKCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQkJY29sb3I6ICIjODg4ODg4IiwKCQkJCQkJCQkJCQllbmFibGVNb3VzZVRyYWNraW5nOiAhMSwKCQkJCQkJCQkJCQlsZWdlbmRJbmRleDogMAoJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCWEgPSB0aGlzLnNlcmllczsKCQkJCQkJCQkJQyA9IGEgJiYgYVsxXSAmJiAi6K+E6K665pWwIiA9PT0gYVsxXS5uYW1lID8gYVsxXSA6IG51bGwsIEggPSB0aGlzLnBsb3RXaWR0aDsKCQkJCQkJCQkJdmFyIG8gPSBhWzBdLmRhdGE7CgkJCQkJCQkJCWlmIChpLmRhdGFbMF0ueSA/IHRoaXMuYWRkU2VyaWVzKGkpIDogdGhpcy55QXhpc1swXS5yZW1vdmVQbG90TGluZSgib3JpZ2luUHJpY2UiKSwgVCkgYS5mb3JFYWNoKGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQkJCQkJCTAgPT09IHQgfHwgIuW9k+WJjeWVhuWfjuWOn+Wni+S7t+agvCIgPT09IGUubmFtZSA/IGUuc2hvdygpIDogZS5oaWRlKCkKCQkJCQkJCQkJfSk7CgkJCQkJCQkJCWVsc2UgewoJCQkJCQkJCQkJZm9yICh2YXIgciA9IDA7IHIgPCBhLmxlbmd0aDsgcisrKSBQLmluTGlzdChhW3JdLm5hbWUpID8gKGFbcl0uc2hvdygpLCAi5b2T5YmN5ZWG5Z+O5Y6f5aeL5Lu35qC8IiA9PT0gYVtyXS5uYW1lICYmIEwgJiYgKHRoaXMueUF4aXNbMF0uYWRkUGxvdExpbmUoUiksIE8gPSAhMCwgaS5kYXRhWzBdLnkgfHwgdGhpcy55QXhpc1swXS5yZW1vdmVQbG90TGluZSgib3JpZ2luUHJpY2UiKSwgTyA9ICEwKSwgYVtyXS51cGRhdGUoewoJCQkJCQkJCQkJCW1hcmtlcjogewoJCQkJCQkJCQkJCQlzeW1ib2w6IFMuZXh0ZW5kZWQKCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQl9KSkgOiAoYVtyXS5oaWRlKCksICLlvZPliY3llYbln47ljp/lp4vku7fmoLwiID09PSBhW3JdLm5hbWUgJiYgKHRoaXMueUF4aXNbMF0ucmVtb3ZlUGxvdExpbmUoIm9yaWdpblByaWNlIiksIE8gPSAhMSksIGFbcl0udXBkYXRlKHsKCQkJCQkJCQkJCQltYXJrZXI6IHsKCQkJCQkJCQkJCQkJc3ltYm9sOiBTLmZvbGRlZAoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCX0pKTsKCQkJCQkJCQkJCUIgJiYgYVsxXSAmJiAi6K+E6K665pWwIiA9PT0gYVsxXS5uYW1lICYmIGFbMV0gJiYgYVsxXS5zaG93KCkKCQkJCQkJCQkJfQoJCQkJCQkJCQl2YXIgcyA9IDA7CgkJCQkJCQkJCXN3aXRjaCAoTikgewoJCQkJCQkJCQkJY2FzZSAicGxvdFllYXIiOgoJCQkJCQkJCQkJCXMgPSAzNjY7CgkJCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJCQljYXNlICJwbG90TW9udGgiOgoJCQkJCQkJCQkJCXMgPSAzMDsKCQkJCQkJCQkJCQlicmVhazsKCQkJCQkJCQkJCWNhc2UgInBsb3Q1RGF5IjoKCQkJCQkJCQkJCQlzID0gNQoJCQkJCQkJCQl9CgkJCQkJCQkJCVYodGhpcywgWiksICJwbG90QWxsIiA9PT0gTiB8fCBUIHx8IHRoaXMueEF4aXNbMF0udXBkYXRlKHsKCQkJCQkJCQkJCW1pbjogRiAtIHMgKiB3LAoJCQkJCQkJCQkJbWF4OiBGCgkJCQkJCQkJCX0pOwoJCQkJCQkJCQl2YXIgbCA9IGEuZmlsdGVyKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQkJCXJldHVybiBlLnZpc2libGUgJiYgIm1heCIgIT09IGUubmFtZSAmJiAibWluIiAhPT0gZS5uYW1lCgkJCQkJCQkJCX0pOwoJCQkJCQkJCQlpZiAoMCAhPT0gbC5sZW5ndGgpIHsKCQkJCQkJCQkJCXZhciBjID0gbC5tYXAoZnVuY3Rpb24oZSkgewoJCQkJCQkJCQkJCQlyZXR1cm4gZS5vcHRpb25zLnBvaW50U3RhcnQKCQkJCQkJCQkJCQl9KS5maWx0ZXIoZnVuY3Rpb24oZSkgewoJCQkJCQkJCQkJCQlyZXR1cm4gZQoJCQkJCQkJCQkJCX0pLAoJCQkJCQkJCQkJCWQgPSBNYXRoLm1pbi5hcHBseShudWxsLCBjKTsKCQkJCQkJCQkJCSJwbG90QWxsIiA9PT0gTiB8fCBUIHx8IChkID0gRiAtIHMgKiB3KTsKCQkJCQkJCQkJCWZvciAodmFyIHIgPSAwOyByIDwgYS5sZW5ndGg7IHIrKykKCQkJCQkJCQkJCQlpZiAoYVtyXS5kYXRhLmxlbmd0aCkgewoJCQkJCQkJCQkJCQlvID0gYVtyXS5kYXRhOwoJCQkJCQkJCQkJCQlicmVhawoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCXZhciBwID0gb1tvLmxlbmd0aCAtIDFdOwoJCQkJCQkJCQkJaWYgKHRoaXMueEF4aXNbMF0udXBkYXRlKHsKCQkJCQkJCQkJCQltaW46IGQsCgkJCQkJCQkJCQkJbWF4OiBwID8gcC54IDogZS5nZXRUaW1lKCkKCQkJCQkJCQkJCX0pLCAxID09PSBsLmxlbmd0aCAmJiAi5b2T5YmN5ZWG5Z+O5Y6f5aeL5Lu35qC8IiA9PT0gbFswXS5uYW1lICYmICgicGxvdEFsbCIgIT09IE4gfHwgVCB8fCB0aGlzLnhBeGlzWzBdLnVwZGF0ZSh7CgkJCQkJCQkJCQkJbWluOiBGIC0gMzZlNSwKCQkJCQkJCQkJCQltYXg6IEYKCQkJCQkJCQkJCX0pLCB0aGlzLnlBeGlzWzBdLnVwZGF0ZSh7CgkJCQkJCQkJCQkJbWluOiBMLAoJCQkJCQkJCQkJCW1heDogTAoJCQkJCQkJCQkJfSkpLCB0aGlzLnlBeGlzLmxlbmd0aCA+IDEpIHsKCQkJCQkJCQkJCQlpZiAodGhpcy55QXhpc1swXS5kYXRhTWluID09IHRoaXMueUF4aXNbMF0uZGF0YU1heCkgewoJCQkJCQkJCQkJCQl2YXIgaCA9IHBhcnNlSW50KC4yICogdGhpcy55QXhpc1swXS5kYXRhTWluKTsKCQkJCQkJCQkJCQkJaCA+IDEwMCAmJiAoaCA9IDEwMCAqIE1hdGgucm91bmQoaCAvIDEwMCkpLCB0aGlzLnlBeGlzWzBdLnVwZGF0ZSh7CgkJCQkJCQkJCQkJCQltaW46IHBhcnNlSW50KC41ICogdGhpcy55QXhpc1swXS5kYXRhTWluKSwKCQkJCQkJCQkJCQkJCW1heDogcGFyc2VJbnQoMS41ICogdGhpcy55QXhpc1swXS5kYXRhTWluKSwKCQkJCQkJCQkJCQkJCXRpY2tJbnRlcnZhbDogaAoJCQkJCQkJCQkJCQl9KQoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQl0aGlzLnlBeGlzWzFdLnVwZGF0ZSh7CgkJCQkJCQkJCQkJCW1pbjogdGhpcy55QXhpc1sxXS5kYXRhTWluLAoJCQkJCQkJCQkJCQltYXg6IHRoaXMueUF4aXNbMV0uZGF0YU1heCwKCQkJCQkJCQkJCQkJdGlja0ludGVydmFsOiBwYXJzZUludCh0aGlzLnlBeGlzWzFdLmRhdGFNYXggLyA1KSB8fCAxCgkJCQkJCQkJCQkJfSksIHRoaXMueEF4aXNbMF0udXBkYXRlKHsKCQkJCQkJCQkJCQkJbWluOiB0aGlzLnNlcmllc1sxXS5kYXRhWzBdLmNhdGVnb3J5CgkJCQkJCQkJCQkJfSkKCQkJCQkJCQkJCX0KCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfSwKCQkJCQkJY3JlZGl0czogewoJCQkJCQkJZW5hYmxlZDogITEKCQkJCQkJfSwKCQkJCQkJdGl0bGU6IHsKCQkJCQkJCXRleHQ6ICJ0ZXN0IiwKCQkJCQkJCXN0eWxlOiB7CgkJCQkJCQkJZm9udFdlaWdodDogImJvbGQiLAoJCQkJCQkJCWZvbnRGYW1pbHk6ICJNaWNyb3NvZnQgWWFIZWkiLAoJCQkJCQkJCWZvbnRTaXplOiAxNgoJCQkJCQkJfQoJCQkJCQl9LAoJCQkJCQl4QXhpczogewoJCQkJCQkJb2Zmc2V0OiAwLAoJCQkJCQkJdHlwZTogImRhdGV0aW1lIiwKCQkJCQkJCWRhdGVUaW1lTGFiZWxGb3JtYXRzOiB7CgkJCQkJCQkJbWludXRlOiAiJW0vJWQiLAoJCQkJCQkJCWhvdXI6ICIlbS8lZCIsCgkJCQkJCQkJZGF5OiAiJW0vJWQiLAoJCQkJCQkJCXdlZWs6ICIlbS8lZCIsCgkJCQkJCQkJbW9udGg6ICIlWS8lbSIKCQkJCQkJCX0sCgkJCQkJCQltaW5vckdyaWRMaW5lQ29sb3I6ICIjZGZkZmRmIiwKCQkJCQkJCWxhYmVsczogewoJCQkJCQkJCXJvdGF0aW9uOiAtMjUsCgkJCQkJCQkJeTogMzAsCgkJCQkJCQkJc3R5bGU6IHsKCQkJCQkJCQkJZm9udFNpemU6ICIxMnB4IiwKCQkJCQkJCQkJZm9udEZhbWlseTogIkFyaWFsIiwKCQkJCQkJCQkJY29sb3I6ICIjMzIzMzMzIgoJCQkJCQkJCX0sCgkJCQkJCQkJYWxpZ246ICJjZW50ZXIiCgkJCQkJCQl9LAoJCQkJCQkJZ3JpZExpbmVDb2xvcjogIiNlNmU5ZWIiLAoJCQkJCQkJbGluZUNvbG9yOiAiI2U2ZTllYiIsCgkJCQkJCQlncmlkTGluZVdpZHRoOiAxLAoJCQkJCQkJdGlja0xlbmd0aDogMCwKCQkJCQkJCW1pblRpY2tJbnRlcnZhbDogdywKCQkJCQkJCXN0YXJ0T25UaWNrOiAhMSwKCQkJCQkJCXRpY2tQb3NpdGlvbmVyOiBmdW5jdGlvbigpIHsKCQkJCQkJCQl2YXIgZSA9IFtdLAoJCQkJCQkJCQl0ID0gdGhpcy5taW4sCgkJCQkJCQkJCW4gPSB0aGlzLm1heCwKCQkJCQkJCQkJaSA9IG5ldyBEYXRlKHQpLAoJCQkJCQkJCQlhID0gMCwKCQkJCQkJCQkJbyA9IHZvaWQgMCwKCQkJCQkJCQkJciA9IDE7CgkJCQkJCQkJaWYgKG4gLSB0ID4gMzAwICogdykgewoJCQkJCQkJCQl2YXIgcyA9IG5ldyBEYXRlKDE5MDAgKyBpLmdldFllYXIoKSwgaS5nZXRNb250aCgpICsgMSwgMik7CgkJCQkJCQkJCWEgPSBzLmdldFRpbWUoKTsKCQkJCQkJCQkJZm9yICh2YXIgbCA9IEggLyAoKG4gLSB0KSAvICgzMCAqIHcpKTsgMTAwID4gciAqIGw7KSByKys7CgkJCQkJCQkJCW8gPSAibm1vbnRoIgoJCQkJCQkJCX0gZWxzZSBpZiAobiAtIHQgPiA2NCAqIHcpIHsKCQkJCQkJCQkJdmFyIHMgPSBuZXcgRGF0ZSgxOTAwICsgaS5nZXRZZWFyKCksIGkuZ2V0TW9udGgoKSArIDEsIDIpOwoJCQkJCQkJCQlhID0gcy5nZXRUaW1lKCksIG8gPSAibW9udGgiCgkJCQkJCQkJfSBlbHNlIGlmIChuIC0gdCA+IDEwICogdykgYSA9IHQsIG8gPSAiZGF5IjsKCQkJCQkJCQllbHNlIHsKCQkJCQkJCQkJdmFyIHMgPSBuZXcgRGF0ZSgxOTAwICsgaS5nZXRZZWFyKCksIGkuZ2V0TW9udGgoKSwgaS5nZXREYXRlKCkgKyAxKTsKCQkJCQkJCQkJYSA9IHMuZ2V0VGltZSgpLCBvID0gImhvdXIiCgkJCQkJCQkJfQoJCQkJCQkJCWZvciAoOyBuID49IGEgLSA1NGU2Oykgc3dpdGNoIChlLnB1c2goYSAtIDU0ZTYpLCBvKSB7CgkJCQkJCQkJCWNhc2UgIm1vbnRoIjoKCQkJCQkJCQkJCXZhciBzID0gbmV3IERhdGUoYSksCgkJCQkJCQkJCQkJYyA9IG5ldyBEYXRlKDE5MDAgKyBzLmdldFllYXIoKSwgcy5nZXRNb250aCgpICsgMSwgMik7CgkJCQkJCQkJCQlhID0gYy5nZXRUaW1lKCk7CgkJCQkJCQkJCQlicmVhazsKCQkJCQkJCQkJY2FzZSAiZGF5IjoKCQkJCQkJCQkJCWEgKz0gNSAqIHc7CgkJCQkJCQkJCQlicmVhazsKCQkJCQkJCQkJY2FzZSAiaG91ciI6CgkJCQkJCQkJCQlhICs9IHc7CgkJCQkJCQkJCQlicmVhazsKCQkJCQkJCQkJY2FzZSAibm1vbnRoIjoKCQkJCQkJCQkJCXMgPSBuZXcgRGF0ZShhKSwgYyA9IG5ldyBEYXRlKDE5MDAgKyBzLmdldFllYXIoKSwgcy5nZXRNb250aCgpICsgciwgMiksIGEgPSBjLmdldFRpbWUoKQoJCQkJCQkJCX0KCQkJCQkJCQlpZiAoVCkgewoJCQkJCQkJCQlmb3IgKHZhciBkID0gMDsgZVtkXSA8IHRoaXMubWluOykgZCsrOwoJCQkJCQkJCQllID0gW2VbZF0sIGVbZS5sZW5ndGggLSAxXV0KCQkJCQkJCQl9CgkJCQkJCQkJc3dpdGNoIChvKSB7CgkJCQkJCQkJCWNhc2UgIm1vbnRoIjoKCQkJCQkJCQkJY2FzZSAibm1vbnRoIjoKCQkJCQkJCQkJCWUuaW5mbyA9IHsKCQkJCQkJCQkJCQl1bml0TmFtZTogIm1vbnRoIiwKCQkJCQkJCQkJCQloaWdoZXJSYW5rczoge30KCQkJCQkJCQkJCX07CgkJCQkJCQkJCQlicmVhazsKCQkJCQkJCQkJZGVmYXVsdDoKCQkJCQkJCQkJCWUuaW5mbyA9IHsKCQkJCQkJCQkJCQl1bml0TmFtZTogImRheSIsCgkJCQkJCQkJCQkJaGlnaGVyUmFua3M6IHt9CgkJCQkJCQkJCQl9CgkJCQkJCQkJfQoJCQkJCQkJCXJldHVybiBlCgkJCQkJCQl9CgkJCQkJCX0sCgkJCQkJCXlBeGlzOiB7CgkJCQkJCQlvZmZzZXQ6IDAsCgkJCQkJCQlsYWJlbHM6IHsKCQkJCQkJCQlmb3JtYXR0ZXI6IGZ1bmN0aW9uKCkgewoJCQkJCQkJCQl2YXIgZSA9IHZvaWQgMDsKCQkJCQkJCQkJcmV0dXJuIGUgPSAheSB8fCB0aGlzLnZhbHVlIDwgayA/IGEubnVtYmVyRm9ybWF0KHRoaXMudmFsdWUsIDIpIDogYS5udW1iZXJGb3JtYXQodGhpcy52YWx1ZSArIHosIDIpLCBlID0gZS5yZXBsYWNlKCIuMDAiLCAiIikKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJYWxpZ246ICJoaWdoIiwKCQkJCQkJCWdyaWRMaW5lQ29sb3I6ICIjZTZlOWViIiwKCQkJCQkJCXRpdGxlOiB7CgkJCQkJCQkJdGV4dDogIuS6uuawkeW4gToiLAoJCQkJCQkJCXJvdGF0aW9uOiAwLAoJCQkJCQkJCXk6IC0yMCwKCQkJCQkJCQl4OiAtMTMsCgkJCQkJCQkJYWxpZ246ICJoaWdoIiwKCQkJCQkJCQlvZmZzZXQ6IDAsCgkJCQkJCQkJc3R5bGU6IHsKCQkJCQkJCQkJZm9udEZhbWlseTogIk1pY3Jvc29mdCBZYUhlaSIsCgkJCQkJCQkJCWZvbnRTaXplOiAxMiwKCQkJCQkJCQkJY29sb3I6ICIjMzIzMzMzIgoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQlwbG90TGluZXM6IFt7CgkJCQkJCQkJaWQ6ICJoaWdoUHJpY2UiLAoJCQkJCQkJCWNvbG9yOiAicmdiYSgyNTUsMjU1LDI1NSwxKSIsCgkJCQkJCQkJZGFzaFN0eWxlOiAiZGFzaCIsCgkJCQkJCQkJdmFsdWU6IDAsCgkJCQkJCQkJd2lkdGg6IDEsCgkJCQkJCQkJbGFiZWw6IHsKCQkJCQkJCQkJdGV4dDogIuacgOmrmCIsCgkJCQkJCQkJCWFsaWduOiAicmlnaHQiLAoJCQkJCQkJCQl4OiB2LAoJCQkJCQkJCQl5OiBiLAoJCQkJCQkJCQl0ZXh0QWxpZ246ICJsZWZ0IiwKCQkJCQkJCQkJc3R5bGU6IHsKCQkJCQkJCQkJCWNvbG9yOiAiI2U0MzkzYyIsCgkJCQkJCQkJCQlmb250V2VpZ2h0OiAiYm9sZCIsCgkJCQkJCQkJCQlmb250RmFtaWx5OiAiTWljcm9zb2Z0IFlhSGVpIiwKCQkJCQkJCQkJCWZvbnRTaXplOiAxMgoJCQkJCQkJCQl9CgkJCQkJCQkJfQoJCQkJCQkJfSwgewoJCQkJCQkJCWlkOiAibG93UHJpY2UiLAoJCQkJCQkJCWNvbG9yOiAiI2ZmZiIsCgkJCQkJCQkJZGFzaFN0eWxlOiAiZGFzaCIsCgkJCQkJCQkJdmFsdWU6IDAsCgkJCQkJCQkJd2lkdGg6IDEsCgkJCQkJCQkJbGFiZWw6IHsKCQkJCQkJCQkJdGV4dDogIuacgOS9jiIsCgkJCQkJCQkJCWFsaWduOiAicmlnaHQiLAoJCQkJCQkJCQl0ZXh0QWxpZ246ICJsZWZ0IiwKCQkJCQkJCQkJeDogdiwKCQkJCQkJCQkJeTogYiwKCQkJCQkJCQkJc3R5bGU6IHsKCQkJCQkJCQkJCWNvbG9yOiAiIzM1YmQ2NyIsCgkJCQkJCQkJCQlmb250V2VpZ2h0OiAiYm9sZCIsCgkJCQkJCQkJCQlmb250RmFtaWx5OiAiTWljcm9zb2Z0IFlhSGVpIiwKCQkJCQkJCQkJCWZvbnRTaXplOiAxMgoJCQkJCQkJCQl9CgkJCQkJCQkJfQoJCQkJCQkJfSwgewoJCQkJCQkJCWlkOiAib3JpZ2luUHJpY2UiLAoJCQkJCQkJCXZhbHVlOiBMLAoJCQkJCQkJCXdpZHRoOiAxLAoJCQkJCQkJCWNvbG9yOiAiIzg4ODg4OCIsCgkJCQkJCQkJekluZGV4OiAxLAoJCQkJCQkJCWxhYmVsOiB7CgkJCQkJCQkJCXRleHQ6ICLljp/ku7c6IiArIEwsCgkJCQkJCQkJCWFsaWduOiAicmlnaHQiLAoJCQkJCQkJCQl0ZXh0QWxpZ246ICJsZWZ0IiwKCQkJCQkJCQkJeDogdiwKCQkJCQkJCQkJeTogYiwKCQkJCQkJCQkJc3R5bGU6IHsKCQkJCQkJCQkJCWNvbG9yOiAiIzg4ODg4OCIsCgkJCQkJCQkJCQlmb250V2VpZ2h0OiAiYm9sZCIsCgkJCQkJCQkJCQlmb250RmFtaWx5OiAiTWljcm9zb2Z0IFlhSGVpIiwKCQkJCQkJCQkJCWZvbnRTaXplOiAxMgoJCQkJCQkJCQl9CgkJCQkJCQkJfQoJCQkJCQkJfV0KCQkJCQkJfSwKCQkJCQkJbGVnZW5kOiB7CgkJCQkJCQllbmFibGVkOiAhMCwKCQkJCQkJCWFsaWduOiAicmlnaHQiLAoJCQkJCQkJdmVydGljYWxBbGlnbjogInRvcCIsCgkJCQkJCQlsYXlvdXQ6ICJ2ZXJ0aWNsZSIsCgkJCQkJCQlib3JkZXJDb2xvcjogIiNmMGYzZjUiLAoJCQkJCQkJYm9yZGVyV2lkdGg6IDEsCgkJCQkJCQl3aWR0aDogMTUwLAoJCQkJCQkJeDogLTMwLAoJCQkJCQkJeTogMzAsCgkJCQkJCQlzeW1ib2xXaWR0aDogMTAsCgkJCQkJCQlzeW1ib2xIZWlnaHQ6IDEwLAoJCQkJCQkJaXRlbU1hcmdpblRvcDogNCwKCQkJCQkJCWl0ZW1TdHlsZTogewoJCQkJCQkJCWZvbnRGYW1pbHk6ICJNaWNyb3NvZnQgWWFoZWkiLAoJCQkJCQkJCWZvbnRTaXplOiAiMTJweCIsCgkJCQkJCQkJY29sb3I6ICIjMzIzMjMzIgoJCQkJCQkJfQoJCQkJCQl9LAoJCQkJCQlwbG90T3B0aW9uczogewoJCQkJCQkJc2VyaWVzOiB7CgkJCQkJCQkJdHVyYm9UaHJlc2hvbGQ6IDAsCgkJCQkJCQkJc3RhdGVzOiB7CgkJCQkJCQkJCWhvdmVyOiB7CgkJCQkJCQkJCQllbmFibGVkOiAhMCwKCQkJCQkJCQkJCWhhbG86IHsKCQkJCQkJCQkJCQlzaXplOiAwCgkJCQkJCQkJCQl9CgkJCQkJCQkJCX0KCQkJCQkJCQl9LAoJCQkJCQkJCW1hcmtlcjogewoJCQkJCQkJCQllbmFibGVkOiAhMQoJCQkJCQkJCX0sCgkJCQkJCQkJZGF0YUdyb3VwaW5nOiB7CgkJCQkJCQkJCWVuYWJsZWQ6ICExCgkJCQkJCQkJfSwKCQkJCQkJCQlhbmltYXRpb246ICExLAoJCQkJCQkJCWV2ZW50czogewoJCQkJCQkJCQlsZWdlbmRJdGVtQ2xpY2s6IGZ1bmN0aW9uKHQpIHsKCQkJCQkJCQkJCXZhciBuID0gdGhpcy5jaGFydC5zZXJpZXM7CgkJCQkJCQkJCQluLmZvckVhY2goZnVuY3Rpb24oZSkgewoJCQkJCQkJCQkJCSJtYXgiICE9PSBlLm5hbWUgJiYgIm1pbiIgIT09IGUubmFtZSB8fCAhZS5yZW1vdmUgfHwgZS5yZW1vdmUoITApCgkJCQkJCQkJCQl9KTsKCQkJCQkJCQkJCXZhciBpID0gdGhpcy5pbmRleCwKCQkJCQkJCQkJCQlhID0gdGhpcy54QXhpcy5taW4sCgkJCQkJCQkJCQkJbyA9IHRoaXMueEF4aXMubWF4OwoJCQkJCQkJCQkJIuW9k+WJjeWVhuWfjuWOn+Wni+S7t+agvCIgPT09IG5baV0ubmFtZSAmJiAoTyA/IHRoaXMueUF4aXMucmVtb3ZlUGxvdExpbmUoIm9yaWdpblByaWNlIikgOiB0aGlzLnlBeGlzLmFkZFBsb3RMaW5lKFIpLCBPID0gIU8pLCBuW2ldLnZpc2libGUgPyBuW2ldLmhpZGUoKSA6IG5baV0uc2hvdygpLCBuLmZvckVhY2goZnVuY3Rpb24oZSwgdCkgewoJCQkJCQkJCQkJCWUudmlzaWJsZSAmJiAi6K+E6K665pWwIiAhPT0gZS5uYW1lID8gKFAuYWRkKGUubmFtZSksIGUudXBkYXRlKHsKCQkJCQkJCQkJCQkJbWFya2VyOiB7CgkJCQkJCQkJCQkJCQlzeW1ib2w6IFMuZXh0ZW5kZWQKCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCX0pKSA6IChQLnJlbW92ZShlLm5hbWUpLCBlLnVwZGF0ZSh7CgkJCQkJCQkJCQkJCW1hcmtlcjogewoJCQkJCQkJCQkJCQkJc3ltYm9sOiBTLmZvbGRlZAoJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJfSkpCgkJCQkJCQkJCQl9KTsKCQkJCQkJCQkJCXZhciByID0gbi5maWx0ZXIoZnVuY3Rpb24oZSkgewoJCQkJCQkJCQkJCXJldHVybiBlLnZpc2libGUgJiYgIm1heCIgIT09IGUubmFtZSAmJiAibWluIiAhPT0gZS5uYW1lCgkJCQkJCQkJCQl9KTsKCQkJCQkJCQkJCWlmICgwID09PSByLmxlbmd0aCkgcmV0dXJuIFYodGhpcywgWiksICExOwoJCQkJCQkJCQkJdmFyIHMgPSByWzBdLmRhdGE7CgkJCQkJCQkJCQlpZiAocyA9IHNbcy5sZW5ndGggLSAxXSwgInBsb3RBbGwiID09PSBOKSB7CgkJCQkJCQkJCQkJdmFyIGwgPSByLm1hcChmdW5jdGlvbihlKSB7CgkJCQkJCQkJCQkJCQlyZXR1cm4gZS5vcHRpb25zLnBvaW50U3RhcnQKCQkJCQkJCQkJCQkJfSkuZmlsdGVyKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQkJCQkJCXJldHVybiBlCgkJCQkJCQkJCQkJCX0pLAoJCQkJCQkJCQkJCQljID0gTWF0aC5taW4uYXBwbHkobnVsbCwgbCk7CgkJCQkJCQkJCQkJdGhpcy54QXhpcy51cGRhdGUoewoJCQkJCQkJCQkJCQltaW46IGMsCgkJCQkJCQkJCQkJCW1heDogcyA/IHMueCA6IGUuZ2V0VGltZSgpCgkJCQkJCQkJCQkJfSkKCQkJCQkJCQkJCX0KCQkJCQkJCQkJCWlmICgxID09PSByLmxlbmd0aCAmJiAi5b2T5YmN5ZWG5Z+O5Y6f5aeL5Lu35qC8IiA9PT0gclswXS5uYW1lKSB7CgkJCQkJCQkJCQkJdmFyIHAgPSB0aGlzLnlBeGlzLnBsb3RMaW5lc0FuZEJhbmRzLmZpbHRlcihmdW5jdGlvbihlKSB7CgkJCQkJCQkJCQkJCXJldHVybiAib3JpZ2luUHJpY2UiID09PSBlLmlkCgkJCQkJCQkJCQkJfSk7CgkJCQkJCQkJCQkJcCA9IHBbMF0ub3B0aW9ucywgcC52YWx1ZSA9IEwsIHRoaXMueUF4aXMucmVtb3ZlUGxvdExpbmUoIm9yaWdpblByaWNlIiksIHAubGFiZWwudGV4dCA9ICLljp/ku7c6IiArIGQoTCksIHRoaXMueUF4aXMuYWRkUGxvdExpbmUocCksICJ1bmRlZmluZWQiID09PSBhIHx8ICJ1bmRlZmluZWQiID09PSBvID8gdGhpcy54QXhpcy51cGRhdGUoewoJCQkJCQkJCQkJCQltYXg6IEYsCgkJCQkJCQkJCQkJCW1pbjogRiAtIDMwICogdwoJCQkJCQkJCQkJCX0pIDogdGhpcy54QXhpcy51cGRhdGUoewoJCQkJCQkJCQkJCQltaW46IGEsCgkJCQkJCQkJCQkJCW1heDogbwoJCQkJCQkJCQkJCX0pLCB0aGlzLnlBeGlzLnVwZGF0ZSh7CgkJCQkJCQkJCQkJCW1pbjogTCwKCQkJCQkJCQkJCQkJbWF4OiBMCgkJCQkJCQkJCQkJfSkKCQkJCQkJCQkJCX0KCQkJCQkJCQkJCXJldHVybiAicGxvdFllYXIiID09PSBOICYmIHRoaXMueEF4aXMudXBkYXRlKHsKCQkJCQkJCQkJCQltaW46IEYgLSAzNjcgKiB3LAoJCQkJCQkJCQkJCW1heDogRgoJCQkJCQkJCQkJfSksIFYodGhpcywgWiksICExCgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJbGluZTogewoJCQkJCQkJCXN0YXRlczogewoJCQkJCQkJCQlob3ZlcjogewoJCQkJCQkJCQkJZW5hYmxlZDogITAsCgkJCQkJCQkJCQlsaW5lV2lkdGg6IDEKCQkJCQkJCQkJfQoJCQkJCQkJCX0sCgkJCQkJCQkJZXZlbnRzOiB7CgkJCQkJCQkJCW1vdXNlT3V0OiBmdW5jdGlvbihlKSB7CgkJCQkJCQkJCQljKCIjdGltZUN1cnNvciIpLmNzcyh7CgkJCQkJCQkJCQkJbGVmdDogIi0xMDAwcHgiLAoJCQkJCQkJCQkJCXJpZ2h0OiAiIgoJCQkJCQkJCQkJfSksIGMoIiNkYXNoZWRMaW5lIikuY3NzKHsKCQkJCQkJCQkJCQlsZWZ0OiAiLTEwMDBweCIKCQkJCQkJCQkJCX0pCgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0sCgkJCQkJCXRvb2x0aXA6IHsKCQkJCQkJCXNoYWRvdzogITEsCgkJCQkJCQlzaGFyZWQ6ICEwLAoJCQkJCQkJdmFsdWVTdWZmaXg6ICLlhYMiLAoJCQkJCQkJaGlkZURlbGF5OiAwLAoJCQkJCQkJc2hhcGU6ICJzcXVhcmUiLAoJCQkJCQkJZm9sbG93UG9pbnRlcjogITEsCgkJCQkJCQlkYXRlVGltZUxhYmVsRm9ybWF0czogewoJCQkJCQkJCWRheTogIiVZLyVtLyVlIiwKCQkJCQkJCQltaW51dGU6ICIlWS8lbS8lZSIsCgkJCQkJCQkJc2Vjb25kOiAiJVkvJW0vJWUiLAoJCQkJCQkJCWhvdXI6ICIlWS8lbS8lZSAlSDolTSIKCQkJCQkJCX0sCgkJCQkJCQl1c2VIVE1MOiAhMCwKCQkJCQkJCXBvc2l0aW9uZXI6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQkJCQlyZXR1cm4gbi5wbG90WCArIGUgPiB0aGlzLmNoYXJ0LnBsb3RXaWR0aCArIDEyID8gewoJCQkJCQkJCQl4OiBuLnBsb3RYIC0gZSArIHRoaXMuY2hhcnQucGxvdExlZnQsCgkJCQkJCQkJCXk6IHRoaXMuY2hhcnQucGxvdEhlaWdodCAvIDIgLSB0IC8gMiArIDQ1CgkJCQkJCQkJfSA6IHsKCQkJCQkJCQkJeDogbi5wbG90WCArIHRoaXMuY2hhcnQucGxvdExlZnQsCgkJCQkJCQkJCXk6IHRoaXMuY2hhcnQucGxvdEhlaWdodCAvIDIgLSB0IC8gMiArIDQ1CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCW9uSGlkZTogZnVuY3Rpb24oKSB7CgkJCQkJCQkJYygiI3RpbWVDdXJzb3IiKS5jc3MoewoJCQkJCQkJCQlsZWZ0OiAiLTEwMDBweCIsCgkJCQkJCQkJCXJpZ2h0OiAiIgoJCQkJCQkJCX0pLCBjKCIjZGFzaGVkTGluZSIpLmNzcyh7CgkJCQkJCQkJCWxlZnQ6ICItMTAwMHB4IgoJCQkJCQkJCX0pCgkJCQkJCQl9LAoJCQkJCQkJZm9ybWF0dGVyOiBmdW5jdGlvbigpIHsKCQkJCQkJCQl2YXIgZSA9IHRoaXMsCgkJCQkJCQkJCXQgPSBuZXcgRGF0ZSh0aGlzLnggLSAyODhlNSksCgkJCQkJCQkJCW4gPSB0LmdldFllYXIoKSArIDE5MDA7CgkJCQkJCQkJKG8uSUU3IHx8IG8uSUU4KSAmJiAobiA9IHQuZ2V0WWVhcigpKTsKCQkJCQkJCQl2YXIgaSA9IHQuZ2V0TW9udGgoKSArIDEsCgkJCQkJCQkJCXIgPSB0LmdldERhdGUoKSwKCQkJCQkJCQkJcyA9IHQuZ2V0SG91cnMoKSwKCQkJCQkJCQkJbCA9IG4gKyAiLyIgKyBpICsgIi8iICsgciArIChEID8gIiAiICsgcyArICI6MDAiIDogIiIpLAoJCQkJCQkJCQlwID0gJzx0YWJsZSBzdHlsZT0idGFibGUtbGF5b3V0OiBmaXhlZDsiPjx0cj48dGQgY29sc3Bhbj0iMyIgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjtmb250LXdlaWdodDogYm9sZDtmb250LWZhbWlseTogQXJpYWw7Zm9udC1zaXplOjE0cHgiPicgKyBsICsgJzwvdGQ+PHRkPjwvdGQ+PHRkIGNhbHNzPSJwcm9tb1RkIj48L3RkPjwvdHI+JywKCQkJCQkJCQkJaCA9IHRoaXMucG9pbnRzLnNvcnQoZnVuY3Rpb24oZSwgdCkgewoJCQkJCQkJCQkJdmFyIG4gPSBVKHQuc2VyaWVzLm5hbWUsIHQueSwgKHQucG9pbnQuaW5kZXggKyAxKSAvIHQuc2VyaWVzLmRhdGEubGVuZ3RoLCB0LnggLSAyODhlNSkgLSBVKGUuc2VyaWVzLm5hbWUsIGUueSwgKGUucG9pbnQuaW5kZXggKyAxKSAvIGUuc2VyaWVzLmRhdGEubGVuZ3RoLCB0LnggLSAyODhlNSk7CgkJCQkJCQkJCQlyZXR1cm4gbgoJCQkJCQkJCQl9KS5maWx0ZXIoZnVuY3Rpb24oZSkgewoJCQkJCQkJCQkJcmV0dXJuICJtYXgiID09PSBlLnNlcmllcy5uYW1lIHx8ICJtaW4iID09PSBlLnNlcmllcy5uYW1lID8gITEgOiAhMAoJCQkJCQkJCQl9KTsKCQkJCQkJCQlyZXR1cm4gMCA9PT0gaC5sZW5ndGggPyAhMSA6IChjKCIjdGltZUN1cnNvciIpLmh0bWwobCksIGMoIiN0aW1lQ3Vyc29yIikuY3NzKHsKCQkJCQkJCQkJbGVmdDogWC54ICsgUSgpICsgInB4IiwKCQkJCQkJCQkJcmlnaHQ6ICIiCgkJCQkJCQkJfSksIFgueCArIDM4ICsgUSgpID4gSCAmJiBjKCIjdGltZUN1cnNvciIpLmNzcyh7CgkJCQkJCQkJCWxlZnQ6IFgueCArIFEoKSAtIHBhcnNlSW50KGMoIiN0aW1lQ3Vyc29yIikuY3NzKCJ3aWR0aCIpKSAtIDEwICsgInB4IgoJCQkJCQkJCX0pLCAiLTEwMDBweCIgPT09IGMoIiNkYXNoZWRMaW5lIikuY3NzKCJsZWZ0IikgJiYgdGhpcy5wb2ludHNbMF0ucG9pbnQuaW5kZXggPT09IHRoaXMucG9pbnRzWzBdLnNlcmllcy5kYXRhLmxlbmd0aCAtIDEgJiYgKFgueCAtPSAzKSwgYygiI2Rhc2hlZExpbmUiKS5jc3MoewoJCQkJCQkJCQlsZWZ0OiBYLnggKyBRKCkgKyAicHgiCgkJCQkJCQkJfSksIGguZm9yRWFjaChmdW5jdGlvbih0LCBuKSB7CgkJCQkJCQkJCXZhciBpID0gdC5wb2ludC5zZXJpZXMubmFtZSwKCQkJCQkJCQkJCW8gPSBVKGksIHQucG9pbnQueSwgKHQucG9pbnQuaW5kZXggKyAxKSAvIHQucG9pbnQuc2VyaWVzLmRhdGEubGVuZ3RoLCB0LnBvaW50LnggLSAyODhlNSksCgkJCQkJCQkJCQlyID0gYS5udW1iZXJGb3JtYXQobyAqIF8sIDIpOwoJCQkJCQkJCQlvID0gYS5udW1iZXJGb3JtYXQobywgMiksICIuIiA9PT0gb1tvLmxlbmd0aCAtIDFdICYmIChvICs9ICIwMCIpOwoJCQkJCQkJCQl2YXIgcyA9ICgoZS54IC0gNjg0ZTUpIC8gMWUzKS50b1N0cmluZygpLAoJCQkJCQkJCQkJbCA9IEcgJiYgR1tzXSAmJiBHW3NdLm1zZyB8fCAiIjsKCQkJCQkJCQkJbCA9ICIiOwoJCQkJCQkJCQl2YXIgYyA9IGYgPyAiKCIgKyByICsgZyArICIpIiA6ICIiLAoJCQkJCQkJCQkJaCA9IGEubnVtYmVyRm9ybWF0KHgsIDIpOwoJCQkJCQkJCQkiLiIgPT09IGhbaC5sZW5ndGggLSAxXSAmJiAoaCArPSAiMDAiKSwgYyA9IGUueCA9PT0gWSAmJiBmID8gIigiICsgaCArIGcgKyAiKSIgOiBjLCAwICE9PSB0LnNlcmllcy5pbmRleCAmJiAoYyA9ICIiKTsKCQkJCQkJCQkJdmFyIHUgPSBvICsgIuWFgyIgKyBjOwoJCQkJCQkJCQlmICYmICh1ID0gIiIgKyBnICsgbyArICIoJnllbiIgKyByICsgIikiKSwgbCAmJiAodSA9IHUgKyAiKOWOn+S7tzogIiArIChHW3NdLm9yaV9wcmljZSAvIDEwMCkudG9GaXhlZCgyKSArICIpIiksICJ3d3cuYW1hem9uLmNvLmpwIiA9PSBsb2NhdGlvbi5ob3N0ICYmIChvID0gby5yZXBsYWNlKCIsIiwgIiIpLCBvID0gZChwYXJzZUZsb2F0KG8pKSwgdSA9IG8gKyAi5pel5YWDKCIgKyByICsgIuS6uuawkeW4gSkiKSwgIuivhOiuuuaVsCIgPT09IGkgJiYgKG8gPSBvLnJlcGxhY2UoIi4wMCIsICIiKSwgdSA9IG8gKyAi5qyhIiksIHAgKz0gJzx0cj48dGQgc3R5bGU9IndpZHRoOiA4MHB4OyB0ZXh0LWFsaWduOiBsZWZ0Ij48c3BhbiBzdHlsZT0iY29sb3I6ICcgKyB0LnBvaW50LnNlcmllcy5jb2xvciArICc7Zm9udC1zaXplOjEycHg7Zm9udC1mYW1pbHk6YXJpYWw7ZmxvYXQ6bm9uZSI+4pePPC9zcGFuPicgKyB0LnBvaW50LnNlcmllcy5uYW1lICsgJzwvdGQ+XG4JCQkJCTx0ZCBzdHlsZT0idGV4dC1hbGlnbjogcmlnaHQ7d2lkdGg6IDgwcHg7Ij4nICsgdSArICc8L3RkPjx0ZCBjbGFzcz0icHJvbW9UZCI+JyArIGwgKyAiPC90ZD48L3RyPiIKCQkJCQkJCQl9KSwgcCArPSAiPC90YWJsZT4iKQoJCQkJCQkJfSwKCQkJCQkJCWJhY2tncm91bmRDb2xvcjogInJnYmEoMjU1LDI1NSwyNTUsMC44KSIsCgkJCQkJCQlib3JkZXJDb2xvcjogIiM0ZDRkNGQiLAoJCQkJCQkJYm9yZGVyV2lkdGg6IC4zLAoJCQkJCQkJc3R5bGU6IHsKCQkJCQkJCQlwYWRkaW5nOiAwCgkJCQkJCQl9CgkJCQkJCX0sCgkJCQkJCXNlcmllczogW10KCQkJCQl9OwoJCQkJKG8uSUU3IHx8IG8uSUU4KSAmJiAoSy50b29sdGlwLnN0eWxlID0gewoJCQkJCXdpZHRoOiAiNDAwcHgiCgkJCQl9KSwgUiA9IEsueUF4aXMucGxvdExpbmVzLmZpbHRlcihmdW5jdGlvbihlKSB7CgkJCQkJcmV0dXJuICJvcmlnaW5QcmljZSIgPT09IGUuaWQKCQkJCX0pWzBdOwoJCQkJdmFyIFEgPSBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIC1jKCIjYmlnZ3JhcGgiKS5vZmZzZXQoKS5sZWZ0CgkJCQkJfSwKCQkJCQllZSA9IGZ1bmN0aW9uKGUpIHsKCQkJCQkJcmV0dXJuIGUubGVuZ3RoID8gMSA9PT0gZS5sZW5ndGggPyBlWzBdLmFsbF9saW5lX2JlZ2luX3RpbWUgOiBlLnJlZHVjZShmdW5jdGlvbihlLCB0KSB7CgkJCQkJCQlyZXR1cm4gIm51bWJlciIgPT0gdHlwZW9mIGUgPyBNYXRoLm1pbihlLCB0LmFsbF9saW5lX2JlZ2luX3RpbWUpIDogTWF0aC5taW4oZS5hbGxfbGluZV9iZWdpbl90aW1lLCB0LmFsbF9saW5lX2JlZ2luX3RpbWUpCgkJCQkJCX0pIDogITEKCQkJCQl9LAoJCQkJCXRlID0gewoJCQkJCQlwbG90QWxsOiBbXSwKCQkJCQkJcGxvdFllYXI6IFtdLAoJCQkJCQlwbG90TW9udGg6IFtdLAoJCQkJCQlwbG90NURheTogW10sCgkJCQkJCXBsb3RTcGVjaWFsOiBbXQoJCQkJCX0sCgkJCQkJbmUgPSBmdW5jdGlvbihlKSB7CgkJCQkJCUsueEF4aXMubWluVGlja0ludGVydmFsID0gZQoJCQkJCX0sCgkJCQkJaWUgPSBmdW5jdGlvbihlKSB7CgkJCQkJCXZhciB0ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IHZvaWQgMCA9PT0gYXJndW1lbnRzWzFdID8gITEgOiBhcmd1bWVudHNbMV0sCgkJCQkJCQluID0gZS5maWx0ZXIoZnVuY3Rpb24oZSkgewoJCQkJCQkJCXJldHVybiB0ID8gITAgOiAi5b2T5YmN5ZWG5Z+O5Y6f5aeL5Lu35qC8IiA9PT0gZS5uYW1lIHx8ICJtYXgiID09PSBlLm5hbWUgfHwgIm1pbiIgPT09IGUubmFtZSB8fCAi6K+E6K665pWwIiA9PT0gZS5uYW1lID8gITEgOiB2b2lkIDAgPT09IGUudmlzaWJsZSA/ICEwIDogZS52aXNpYmxlCgkJCQkJCQl9KTsKCQkJCQkJcmV0dXJuIG4gPSBuLm1hcChmdW5jdGlvbihlKSB7CgkJCQkJCQlpZiAoIm51bWJlciIgPT0gdHlwZW9mIGUuZGF0YVswXSkgcmV0dXJuIHsKCQkJCQkJCQltYXg6IE1hdGgubWF4LmFwcGx5KG51bGwsIGUuZGF0YSksCgkJCQkJCQkJbWluOiBNYXRoLm1pbi5hcHBseShudWxsLCBlLmRhdGEpCgkJCQkJCQl9OwoJCQkJCQkJdmFyIHQgPSBmdW5jdGlvbigpIHsKCQkJCQkJCQl2YXIgdCA9IGUuZGF0YS5tYXAoZnVuY3Rpb24oZSkgewoJCQkJCQkJCQkJcmV0dXJuIGUueQoJCQkJCQkJCQl9KSwKCQkJCQkJCQkJbiA9IE1hdGgubWF4LmFwcGx5KG51bGwsIHQpLAoJCQkJCQkJCQlpID0gTWF0aC5taW4uYXBwbHkobnVsbCwgdCksCgkJCQkJCQkJCWEgPSBlLmRhdGEuZmlsdGVyKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQkJCXJldHVybiBlLnkgPT09IG4KCQkJCQkJCQkJfSksCgkJCQkJCQkJCW8gPSBlLmRhdGEuZmlsdGVyKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQkJCXJldHVybiBlLnkgPT09IGkKCQkJCQkJCQkJfSksCgkJCQkJCQkJCXIgPSBhLm1hcChmdW5jdGlvbihlKSB7CgkJCQkJCQkJCQlyZXR1cm4gZS54CgkJCQkJCQkJCX0pLAoJCQkJCQkJCQlzID0gby5tYXAoZnVuY3Rpb24oZSkgewoJCQkJCQkJCQkJcmV0dXJuIGUueAoJCQkJCQkJCQl9KSwKCQkJCQkJCQkJbCA9IHsKCQkJCQkJCQkJCW1heDogbiwKCQkJCQkJCQkJCW1pbjogaSwKCQkJCQkJCQkJCW1heFN0YXJ0OiBNYXRoLm1heC5hcHBseShudWxsLCByKSwKCQkJCQkJCQkJCW1pblN0YXJ0OiBNYXRoLm1heC5hcHBseShudWxsLCBzKQoJCQkJCQkJCQl9OwoJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCXY6IGwKCQkJCQkJCQl9CgkJCQkJCQl9KCk7CgkJCQkJCQlyZXR1cm4gIm9iamVjdCIgPT0gdHlwZW9mIHQgPyB0LnYgOiB2b2lkIDAKCQkJCQkJfSksIDAgPT09IG4ubGVuZ3RoID8gITEgOiAxID09PSBuLmxlbmd0aCA/IHsKCQkJCQkJCW1heDogblswXS5tYXgsCgkJCQkJCQltaW46IG5bMF0ubWluLAoJCQkJCQkJbWF4U3RhcnQ6IG5bMF0ubWF4U3RhcnQsCgkJCQkJCQltaW5TdGFydDogblswXS5taW5TdGFydAoJCQkJCQl9IDogbi5yZWR1Y2UoZnVuY3Rpb24oZSwgdCkgewoJCQkJCQkJdmFyIG4gPSBlLm1heCA+IHQubWF4ID8gZS5tYXhTdGFydCA6IHQubWF4U3RhcnQsCgkJCQkJCQkJaSA9IGUubWluIDwgdC5taW4gPyBlLm1pblN0YXJ0IDogdC5taW5TdGFydDsKCQkJCQkJCXJldHVybiBlLm1heCA9PT0gdC5tYXggJiYgKG4gPSBNYXRoLm1heChlLm1heFN0YXJ0LCB0Lm1heFN0YXJ0KSksIGUubWluID09PSB0Lm1pbiAmJiAoaSA9IE1hdGgubWF4KGUubWluU3RhcnQsIHQubWluU3RhcnQpKSwgewoJCQkJCQkJCW1heDogTWF0aC5tYXgoZS5tYXgsIHQubWF4KSwKCQkJCQkJCQltaW46IE1hdGgubWluKGUubWluLCB0Lm1pbiksCgkJCQkJCQkJbWF4U3RhcnQ6IG4sCgkJCQkJCQkJbWluU3RhcnQ6IGkKCQkJCQkJCX0KCQkJCQkJfSkKCQkJCQl9LAoJCQkJCWFlID0gRShLLnlBeGlzLnBsb3RMaW5lcyksCgkJCQkJb2UgPSBmdW5jdGlvbihlKSB7CgkJCQkJCXZhciB0ID0gbS5kZWVwQ29weShlKTsKCQkJCQkJaWYgKCEodC55QXhpcyBpbnN0YW5jZW9mIEFycmF5ICYmIHQueUF4aXMubGVuZ3RoID4gMSkpIHsKCQkJCQkJCXZhciBuID0gewoJCQkJCQkJCQlvZmZzZXQ6IDAsCgkJCQkJCQkJCWFsaWduOiAiaGlnaCIsCgkJCQkJCQkJCWdyaWRMaW5lQ29sb3I6ICIjZTZlOWViIiwKCQkJCQkJCQkJb3Bwb3NpdGU6ICEwLAoJCQkJCQkJCQlsYWJlbHM6IHsKCQkJCQkJCQkJCXpJbmRleDogOTk5OTkKCQkJCQkJCQkJfSwKCQkJCQkJCQkJbWluOiAwLAoJCQkJCQkJCQltYXg6IDEwMCwKCQkJCQkJCQkJdGl0bGU6IHsKCQkJCQkJCQkJCXRleHQ6ICLor4Torroo5qyhKSIsCgkJCQkJCQkJCQlyb3RhdGlvbjogMCwKCQkJCQkJCQkJCXk6IC0yMCwKCQkJCQkJCQkJCXg6IC0zLAoJCQkJCQkJCQkJYWxpZ246ICJoaWdoIiwKCQkJCQkJCQkJCW9mZnNldDogNjUsCgkJCQkJCQkJCQlzdHlsZTogewoJCQkJCQkJCQkJCWZvbnRGYW1pbHk6ICJNaWNyb3NvZnQgWWFIZWkiLAoJCQkJCQkJCQkJCWZvbnRTaXplOiAxMiwKCQkJCQkJCQkJCQljb2xvcjogIiMzMjMzMzMiCgkJCQkJCQkJCQl9CgkJCQkJCQkJCX0KCQkJCQkJCQl9LAoJCQkJCQkJCWkgPSB0LnlBeGlzOwoJCQkJCQkJcmV0dXJuIHQueUF4aXMgPSB0LnlBeGlzIGluc3RhbmNlb2YgQXJyYXkgPyB0LnlBeGlzIDogW10sIDAgPT0gdC55QXhpcy5sZW5ndGggJiYgdC55QXhpcy5wdXNoKGkpLCB0LnlBeGlzLnB1c2gobiksIHQKCQkJCQkJfQoJCQkJCX0sCgkJCQkJcmUgPSBmdW5jdGlvbih0LCBuLCBvLCByKSB7CgkJCQkJCXZvaWQgMCA9PT0gbiAmJiAobiA9ICExKTsKCQkJCQkJdmFyIHMgPSB0OwoJCQkJCQlUID0gbiwgImNlbnRlciIgPT09IHQgJiYgKHQgPSAicGxvdEFsbCIpLCAicGxvdFNwZWNpYWwiID09PSBzICYmIChaID0gITApLCBvLnNlcmllcyA9IHRlW3RdLCAicGxvdFNwZWNpYWwiID09PSB0ICYmICh0ID0gInBsb3RBbGwiKSwgYygiLmZsb2F0QnV0dG9ucz5hIikucmVtb3ZlQ2xhc3MoImFjdGl2ZVBsb3QiKSwgYygiLmZsb2F0QnV0dG9ucz4jIiArIHQpLmFkZENsYXNzKCJhY3RpdmVQbG90IiksIG8udGl0bGUudGV4dCA9IGMoIiMiICsgdCkudGV4dCgpOwoJCQkJCQl2YXIgbCA9IHRlW3NdLAoJCQkJCQkJcCA9IGllKGwsICEwKTsKCQkJCQkJaWYgKHAgJiYgc2UocC5tYXgsIHAubWluLCBvKSwgInBsb3Q1RGF5IiA9PT0gdCA/IChvLnRpdGxlLnRleHQgPSAi6L+R5LqU5aSp5Lu35qC86LWw5Yq/IiwgbmUodyksIEQgPSAhMCwgVyA9ICJzaG9ydF9kYXlfbGluZSIpIDogRCA9ICExLCAicGxvdE1vbnRoIiA9PT0gdCAmJiAoby50aXRsZS50ZXh0ID0gIui/keS4gOaciOS7t+agvOi1sOWKvyIsIG5lKDUgKiB3KSwgVyA9ICJtb250aF9saW5lIiksICJwbG90QWxsIiA9PT0gdCkgewoJCQkJCQkJby50aXRsZS50ZXh0ID0gIuWFqOmDqOS7t+agvOi1sOWKvyIsICJwbG90U3BlY2lhbCIgPT09IHMgJiYgKG8udGl0bGUudGV4dCA9ICLlhajpg6jku7fmoLwm6K+E6K666LWw5Yq/Iiwgby50aXRsZS5zdHlsZS5mb250V2VpZ2h0ID0gIm5vcm1hbCIsIG8uY2hhcnQubWFyZ2luVG9wID0gNzAsIG8uY2hhcnQubWFyZ2luQm90dG9tID0gNDAsIG8uY2hhcnQubWFyZ2luUmlnaHQgPSA4MCksIHIgJiYgIWogJiYgKG8udGl0bGUudGV4dCA9ICLlhajpg6jku7fmoLzotbDlir8iKTsKCQkJCQkJCXZhciBoID0gTWF0aC5tYXguYXBwbHkobnVsbCwgbC5tYXAoZnVuY3Rpb24oZSkgewoJCQkJCQkJCXJldHVybiBlLmRhdGEubGVuZ3RoCgkJCQkJCQl9KSk7CgkJCQkJCQluZShoID4gMzAgPyAzMCAqIHcgOiBoID4gNSA/IDUgKiB3IDogdyksIFcgPSAiYWxsX2xpbmUiLCAoTVswXS5hbGxfZXF1YWxfc2hvcnQgfHwgTVswXS5hbGxfbGluZS5sZW5ndGggPCA1ICYmIDEgPT0gTS5sZW5ndGgpICYmIChXID0gInNob3J0X2RheV9saW5lIiwgRCA9ICEwLCBNWzBdLmFsbF9saW5lLmxlbmd0aCA8IDUgJiYgMSA9PSBNLmxlbmd0aCAmJiAoby5zZXJpZXNbMF0ucG9pbnRTdGFydCA9IGUuZ2V0VGltZSgpICsgMjg4ZTUgLSAoTVswXS5hbGxfbGluZS5sZW5ndGggLSAxKSAqIHcpKQoJCQkJCQl9CgkJCQkJCSJwbG90WWVhciIgPT09IHQgJiYgKG8udGl0bGUudGV4dCA9ICLov5HkuIDlubTku7fmoLzotbDlir8iLCBuZSgzMCAqIHcpLCBXID0gInllYXJfbGluZSIsIG8uY2hhcnQubWFyZ2luQm90dG9tID0gNTUpLCBuIHx8IChOID0gdCksICJwbG90U3BlY2lhbCIgPT09IHMgJiYgKG8gPSBvZShvKSwgby5zZXJpZXNbMV0ueUF4aXMgPSAxLCBvLnNlcmllc1swXS55QXhpcyA9IDApOwoJCQkJCQl2YXIgdSA9IG8ueUF4aXMgaW5zdGFuY2VvZiBBcnJheSA/IG8ueUF4aXNbMF0gOiBvLnlBeGlzOwoJCQkJCQlaIHx8ICh1LnBsb3RMaW5lc1syXS52YWx1ZSA9IEwsIHUucGxvdExpbmVzWzJdLmxhYmVsLnRleHQgPSAi5Y6f5Lu3OiIgKyBkKEwpKSwgaSA9IG5ldyBhLkNoYXJ0KG8pCgkJCQkJfSwKCQkJCQlzZSA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkJCQkJaWYgKCFaKSB7CgkJCQkJCQl2YXIgaSA9IG4ueUF4aXMgaW5zdGFuY2VvZiBBcnJheSA/IG4ueUF4aXNbMF0gOiBuLnlBeGlzOwoJCQkJCQkJaS5wbG90TGluZXMgPSBFKGFlKSwgaS5wbG90TGluZXMgaW5zdGFuY2VvZiBBcnJheSB8fCAoaS5wbG90TGluZXMgPSBKU09OLnBhcnNlKGkucGxvdExpbmVzKSksIGkucGxvdExpbmVzWzBdLnZhbHVlID0gZSwgaS5wbG90TGluZXNbMV0udmFsdWUgPSB0LCBpLnBsb3RMaW5lc1swXS5sYWJlbC50ZXh0ID0gIuacgOmrmDoiICsgZSArICLlhYMiLCBpLnBsb3RMaW5lc1sxXS5sYWJlbC50ZXh0ID0gIuacgOS9jjoiICsgdCArICLlhYMiLCBpLm1pbiA9IE1hdGgubWluKHQsIEwpCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWxlID0gZnVuY3Rpb24oZSkgewoJCQkJCQljKCIuZmxvYXRCdXR0b25zPiIgKyBlKS5yZW1vdmVDbGFzcygiYmpkLWhpZGRlbiIpCgkJCQkJfSwKCQkJCQljZSA9IGZ1bmN0aW9uKCkgewoJCQkJCQljKCIuZmxvYXRCdXR0b25zIikub24oImNsaWNrIiwgImEiLCBmdW5jdGlvbihlKSB7CgkJCQkJCQlyZShlLnRhcmdldC5pZCwgITEsIG0uZGVlcENvcHkoSykpCgkJCQkJCX0pCgkJCQkJfSwKCQkJCQlkZSA9IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IHZvaWQgMCwKCQkJCQkJCXQgPSB2b2lkIDA7CgkJCQkJCWMoIiNnd2Rfd2lzaGxpc3RfdHJlbmRfZGV0YWlsX2J0biIpLm9uKCJjbGljayIsICJzcGFuIiwgZnVuY3Rpb24obikgewoJCQkJCQkJdmFyIGkgPSBjKG4udGFyZ2V0KS5hdHRyKCJkYXRhLWlkIik7CgkJCQkJCQlpZiAoInBsb3RTcGVjaWFsIiA9PT0gaSkgewoJCQkJCQkJCWlmIChjKCIudHJlbmQtbWF4LW1pbi1wcmljZSIpLmFkZENsYXNzKCJyZXZpZXdUIiksIHQgfHwgKHQgPSAhMCwgaC5sb2coInJldmlldy10cmVuZC1jbGljayIpLCB1KCJyZXZpZXctdHJlbmQtY2xpY2siKSksIGopIHJldHVybjsKCQkJCQkJCQlpZiAoQykgcmV0dXJuIHZvaWQoZSA/IChDLnNob3coKSwgZSA9ICExLCBjKCJzcGFuLnJldmlldy10cmVuZC1zcCIpLmFkZENsYXNzKCJtc2NsaWNrIikpIDogKEMuaGlkZSgpLCBlID0gITAsIGMoInNwYW4ucmV2aWV3LXRyZW5kLXNwIikucmVtb3ZlQ2xhc3MoIm1zY2xpY2siKSkpOwoJCQkJCQkJCWUgPSAhMSwgQiA9ICEwLCBjKCJzcGFuLnJldmlldy10cmVuZC1zcCIpLmFkZENsYXNzKCJtc2NsaWNrIikKCQkJCQkJCX0gZWxzZSBDID0gbnVsbCwgQiA9ICExLCBjKCIudHJlbmQtbWF4LW1pbi1wcmljZSIpLnJlbW92ZUNsYXNzKCJyZXZpZXdUIiksIGMoInNwYW4ucmV2aWV3LXRyZW5kLXNwIikucmVtb3ZlQ2xhc3MoIm1zY2xpY2siKTsKCQkJCQkJCXJlKGksICExLCBtLmRlZXBDb3B5KEspLCAhMCkKCQkJCQkJfSkKCQkJCQl9LAoJCQkJCXBlID0gZnVuY3Rpb24oZSkgewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJeTogZSwKCQkJCQkJCW1hcmtlcjogewoJCQkJCQkJCWVuYWJsZWQ6ICExCgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9OwoJCQkJcmV0dXJuIHQgPSB7CgkJCQkJaW5pdDogZnVuY3Rpb24oZSkgewoJCQkJCQl2YXIgdCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCB2b2lkIDAgPT09IGFyZ3VtZW50c1sxXSA/ICJkcFBhZ2UiIDogYXJndW1lbnRzWzFdLAoJCQkJCQkJbiA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCB2b2lkIDAgPT09IGFyZ3VtZW50c1syXSA/ICExIDogYXJndW1lbnRzWzJdLAoJCQkJCQkJYSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMyB8fCB2b2lkIDAgPT09IGFyZ3VtZW50c1szXSA/ICExIDogYXJndW1lbnRzWzNdLAoJCQkJCQkJZCA9IEsueUF4aXMgaW5zdGFuY2VvZiBBcnJheSA/IEsueUF4aXNbMF0gOiBLLnlBeGlzOwoJCQkJCQlpZiAoYSB8fCAoYSA9IHsKCQkJCQkJCXRvcDogITAsCgkJCQkJCQlib3R0b206ICEwLAoJCQkJCQkJbWlkZGxlOiAhMCwKCQkJCQkJCWJhaWR1OiAhMAoJCQkJCQl9KSwgIWUuc3RvcmUgfHwgIWUuc3RvcmVbMF0gfHwgMCAhPT0gZS5zdG9yZVswXS5hbGxfbGluZS5sZW5ndGgpIHsKCQkJCQkJCWMoImJvZHkiKS5hcHBlbmQoJzxkaXYgaWQ9ImJpZ2dyYXBoIiBzdHlsZT0icG9zaXRpb246IGFic29sdXRlO2xlZnQ6IC0xMDAwMDAwcHg7IHRvcDogLTEwMDAwMHB4O2JhY2tncm91bmQ6IHdoaXRlO292ZXJmbG93OiBoaWRkZW4iPjwvZGl2PicpLCBjKCIjYmlnZ3JhcGgiKS5hcHBlbmQocC5jb21waWxlKHIpKHsKCQkJCQkJCQlleHRCcmFuZDogby5leHRCcmFuZCwKCQkJCQkJCQlzX3NlcnZlcjogby5zX3NlcnZlcgoJCQkJCQkJfSkpOwoJCQkJCQkJdmFyIHYgPSAiIjsKCQkJCQkJCWNlKCksIG4gJiYgYyhuKS5hcHBlbmQoYygiI2JpZ2dyYXBoIikpLCBjKCIjIiArIG8uZXh0TmFtZSArICItdHJlbmQiKS5ob3ZlcihmdW5jdGlvbigpIHsKCQkJCQkJCQlpZiAoSy55QXhpcy50aXRsZS50ZXh0ID0gIuS6uuawkeW4gToiLCBaID0gYS50b3AsIGMod2luZG93KS53aWR0aCgpIDwgMTIwMCAmJiAoSy50aXRsZS54ID0gLTE1MCksIEsubGVnZW5kLmVuYWJsZWQgPSAhMCwgWiA/IEsuY2hhcnQubWFyZ2luUmlnaHQgPSAyMDAgOiBLLmNoYXJ0Lm1hcmdpblJpZ2h0ID0gMzA1LCBLLmNoYXJ0Lm1hcmdpbkJvdHRvbSA9IDU1LCBjKCIjYmlnZ3JhcGgiKS5jc3MoewoJCQkJCQkJCQlsZWZ0OiAwLAoJCQkJCQkJCQl0b3A6IDAsCgkJCQkJCQkJCWJvdHRvbTogMCwKCQkJCQkJCQkJcmlnaHQ6IDAKCQkJCQkJCQl9KSwgInRyZW5kIiAhPT0gdikgewoJCQkJCQkJCQl2YXIgZSA9IGMoIiMiICsgby5leHROYW1lICsgIi1wcmktdHJlbmQtY2hhcnQiKTsKCQkJCQkJCQkJZS5hcHBlbmQoYygiI2JpZ2dyYXBoIikpLCB2ID0gInRyZW5kIiwgYygiLmZsb2F0QnV0dG9ucyIpLnNob3coKSwgYygiI2JqZC1xcmNvZGUtdHJlbmQiKS5zaG93KCksIGMoIiNiamQtcXJjb2RlLXRyZW5kIikubGVuZ3RoICYmIEEoKSwgYygiI2JpZ2dyYXBoIikuY3NzKHsKCQkJCQkJCQkJCXZpc2liaWxpdHk6ICJoaWRkZW4iCgkJCQkJCQkJCX0pLCB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJCQkJCXJlKE4sICExLCBtLmRlZXBDb3B5KEspKTsKCQkJCQkJCQkJCXZhciBlID0gYygiIyIgKyBvLmV4dE5hbWUgKyAiLXByaS10cmVuZC1jaGFydCIpLndpZHRoKCk7CgkJCQkJCQkJCQlpLnNldFNpemUoZSArIDIwLCAyNTApLCBIID0gaS5wbG90V2lkdGgsIGkuYXhlc1swXS51cGRhdGUoSy54QXhpcyksIGMoIiNiaWdncmFwaCIpLmNzcyh7CgkJCQkJCQkJCQkJdmlzaWJpbGl0eTogInZpc2libGUiCgkJCQkJCQkJCQl9KQoJCQkJCQkJCQl9LCAwKQoJCQkJCQkJCX0KCQkJCQkJCX0pOwoJCQkJCQkJdmFyIGIgPSBmdW5jdGlvbih0KSB7CgkJCQkJCQkJYygiLnRyZW5kLW1heC1taW4tcHJpY2UgLnQtbWF4LXByaSIpLnRleHQoIuacgOmrmDoiICsgKGUuc3RvcmVbMF0uaGlnaGVzdCB8fCBlLnN0b3JlWzBdLnByaWNlX3JhbmdlLnNwbGl0KCItIilbMV0pKSwgYygiLnRyZW5kLW1heC1taW4tcHJpY2UgLnQtbWluLXByaSIpLnRleHQoIuacgOS9jjoiICsgKGUuc3RvcmVbMF0ubG93ZXN0IHx8IGUuc3RvcmVbMF0ucHJpY2VfcmFuZ2Uuc3BsaXQoIi0iKVswXSkpLCBaID0gYS5taWRkbGUsIFogPSAhMCwgSy50aXRsZS54ID0gMCwgSy5sZWdlbmQuZW5hYmxlZCA9ICExLCBLLmNoYXJ0Lm1hcmdpblJpZ2h0ID0gNDAsIEsuY2hhcnQubWFyZ2luVG9wID0gNjAsIEsuY2hhcnQubWFyZ2luQm90dG9tID0gNjgsIEsueUF4aXMudGl0bGUudGV4dCA9ICLku7fmoLwo5YWDKSIsIEsueEF4aXMubGFiZWxzLnkgPSAyNSwgSy50aXRsZS5zdHlsZS5mb250V2VpZ2h0ID0gIm5vcm1hbCIsIGMoIi5mbG9hdEJ1dHRvbnMiKS5oaWRlKCksIGMoIiNiamQtcXJjb2RlLXRyZW5kIikuaGlkZSgpLCBjKCIjZGV0YWlsUHJvbW90aW9uIikuY3NzKHsKCQkJCQkJCQkJekluZGV4OiAwCgkJCQkJCQkJfSksIGMoIiNiaWdncmFwaCIpLmNzcyh7CgkJCQkJCQkJCWxlZnQ6IDAsCgkJCQkJCQkJCXRvcDogMCwKCQkJCQkJCQkJYm90dG9tOiAwLAoJCQkJCQkJCQlyaWdodDogMAoJCQkJCQkJCX0pLCAiYnRuIiAhPT0gdiAmJiAoYyh0KS5hcHBlbmQoYygiI2JpZ2dyYXBoIikpLCBkZSgpLCB2ID0gImJ0biIsIGMoIiNiaWdncmFwaCIpLmNzcyh7CgkJCQkJCQkJCXZpc2liaWxpdHk6ICJoaWRkZW4iCgkJCQkJCQkJfSksIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCQkJCQlPID0gITEsIEwgPSAwLCByZShCID8gInBsb3RTcGVjaWFsIiA6ICJwbG90QWxsIiwgITEsIG0uZGVlcENvcHkoSyksICEwKSwgYygiI2JpZ2dyYXBoIikuY3NzKHsKCQkJCQkJCQkJCXZpc2liaWxpdHk6ICJ2aXNpYmxlIgoJCQkJCQkJCQl9KQoJCQkJCQkJCX0sIDApKQoJCQkJCQkJfTsKCQkJCQkJCWMoIiMiICsgby5leHRCcmFuZCArICJfcHJpY2VfaGlzdG9yeV9idG4iKS5ob3ZlcihmdW5jdGlvbigpIHsKCQkJCQkJCQliKCIjIiArIG8uZXh0QnJhbmQgKyAiX3dpc2hsaXN0X3RyZW5kX2RldGFpbF9jaGFydCIpCgkJCQkJCQl9KSwgYygiIyIgKyBvLmV4dEJyYW5kICsgIl93aXNobGlzdF90cmVuZF9kZXRhaWwiKS5tb3VzZWxlYXZlKGZ1bmN0aW9uKCkgewoJCQkJCQkJCWMoIiNkZXRhaWxQcm9tb3Rpb24iKS5jc3MoewoJCQkJCQkJCQl6SW5kZXg6IDE1CgkJCQkJCQkJfSkKCQkJCQkJCX0pLCBjKCIjIiArIG8uZXh0QnJhbmQgKyAiLXRyZW5kIikuaG92ZXIoZnVuY3Rpb24oKSB7CgkJCQkJCQkJWiA9IGEuYm90dG9tLCBLLnlBeGlzLnRpdGxlLnRleHQgPSAi5Lq65rCR5biBOiIsIHYgIT09ICIiICsgby5leHRCcmFuZCAmJiAoSy5sZWdlbmQuZW5hYmxlZCA9ICEwLCBaID8gSy5jaGFydC5tYXJnaW5SaWdodCA9IDIwMCA6IEsuY2hhcnQubWFyZ2luUmlnaHQgPSAzMDUsIGMoIiNiaWdncmFwaCIpLmNzcyh7CgkJCQkJCQkJCWxlZnQ6IDAsCgkJCQkJCQkJCXRvcDogMCwKCQkJCQkJCQkJYm90dG9tOiAwLAoJCQkJCQkJCQlyaWdodDogMAoJCQkJCQkJCX0pLCBjKCIjIiArIG8uZXh0QnJhbmQgKyAiLXRyZW5kLWNoYXJ0IikuYXBwZW5kKGMoIiNiaWdncmFwaCIpKSwgdiA9ICIiICsgby5leHRCcmFuZCwgYygiI2JpZ2dyYXBoIikuY3NzKHsKCQkJCQkJCQkJdmlzaWJpbGl0eTogImhpZGRlbiIKCQkJCQkJCQl9KSwgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJCQkJCXJlKE4sICExLCBtLmRlZXBDb3B5KEspKSwgaS5yZWZsb3coKSwgYygiI2JpZ2dyYXBoIikuY3NzKHsKCQkJCQkJCQkJCXZpc2liaWxpdHk6ICJ2aXNpYmxlIgoJCQkJCQkJCQl9KSwgYygiIyIgKyBvLmV4dEJyYW5kICsgIi10cmVuZC1jaGFydCIpLnNob3coKQoJCQkJCQkJCX0sIDApLCBjKCIuZmxvYXRCdXR0b25zIikuc2hvdygpLCBjKCIjYmpkLXFyY29kZS10cmVuZCIpLnNob3coKSwgYygiI2JqZC1xcmNvZGUtdHJlbmQiKS5sZW5ndGggJiYgQSgpLCBjKCIjYmpkLXFyY29kZS10cmVuZCIpLmNzcygiYm90dG9tIiwgIjlweCIpKQoJCQkJCQkJfSksIGMoIi5iZGV4dC10cmVuZCIpLm9uKCJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7CgkJCQkJCQkJcmV0dXJuIFogPSBhLmJhaWR1LCAiYmR0cmVuZCIgPT09IHYgPyB2b2lkIGMoIiNiZGV4dF9tYWludHJlbmRfZGV0YWlsIikuc2hvdygpIDogKEsubGVnZW5kLmVuYWJsZWQgPSAhMCwgSy5jaGFydC5tYXJnaW5SaWdodCA9IDMwNSwgYygiI2JpZ2dyYXBoIikuY3NzKHsKCQkJCQkJCQkJbGVmdDogMCwKCQkJCQkJCQkJdG9wOiAwLAoJCQkJCQkJCQlib3R0b206IDAsCgkJCQkJCQkJCXJpZ2h0OiAwCgkJCQkJCQkJfSksIGMoIiNiZGV4dF9tYWludHJlbmRfZGV0YWlsIikuYXBwZW5kKGMoIiNiaWdncmFwaCIpKSwgdiA9ICJiZHRyZW5kIiwgYygiI2JpZ2dyYXBoIikuY3NzKHsKCQkJCQkJCQkJdmlzaWJpbGl0eTogImhpZGRlbiIKCQkJCQkJCQl9KSwgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJCQkJCXJlKE4sICExLCBtLmRlZXBDb3B5KEspKSwgaS5yZWZsb3coKSwgYygiI2JpZ2dyYXBoIikuY3NzKHsKCQkJCQkJCQkJCXZpc2liaWxpdHk6ICJ2aXNpYmxlIgoJCQkJCQkJCQl9KQoJCQkJCQkJCX0sIDApLCBjKCIjYmRleHRfbWFpbnRyZW5kX2RldGFpbCIpLnNob3coKSwgdm9pZCBjKCIuZmxvYXRCdXR0b25zIikuc2hvdygpKQoJCQkJCQkJfSksIGMoIi5iZGV4dC1taW5pLXRyZW5kIikub24oIm1vdXNlZW50ZXIiLCBmdW5jdGlvbigpIHsKCQkJCQkJCQliKCIjYmRleHRfbWluaV90cmVuZGJveCIpLCBjKCIjYmRleHRfbWluaXRyZW5kX2RldGFpbCIpLnNob3coKQoJCQkJCQkJfSksIGMoIiNwbG90QXJlYSIpLmNzcyh7CgkJCQkJCQkJbWF4V2lkdGg6IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggLSAyODAgKyAicHgiCgkJCQkJCQl9KSwgYygiI3Bsb3RBcmVhIikubW91c2Vtb3ZlKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQlYLnggPSBlLnBhZ2VYLCBYLnkgPSBlLnBhZ2VZCgkJCQkJCQl9KSwgYygiI3Bsb3RBcmVhIikuY2xpY2soZnVuY3Rpb24oKSB7CgkJCQkJCQkJcmV0dXJuICExCgkJCQkJCQl9KSwgYygiI3RpbWVDdXJzb3IiKS5jc3MoewoJCQkJCQkJCWxlZnQ6ICItMTAwMHB4IgoJCQkJCQkJfSksIGUgJiYgISBmdW5jdGlvbigpIHsKCQkJCQkJCQlNID0gZS5zdG9yZSwgZS5yZXZpZXdfdHJlbmQgJiYgZS5yZXZpZXdfdHJlbmQucmV2aWV3X3RyZW5kICYmIGUucmV2aWV3X3RyZW5kLnJldmlld190cmVuZC5saXN0Lmxlbmd0aCA+IDEgPyBNLnB1c2goewoJCQkJCQkJCQluYW1lOiAi6K+E6K665pWwIiwKCQkJCQkJCQkJYWxsX2xpbmVfYmVnaW5fdGltZTogbmV3IERhdGUoZS5yZXZpZXdfdHJlbmQucmV2aWV3X3RyZW5kLnN0YXJ0VGltZSkuZ2V0VGltZSgpLAoJCQkJCQkJCQlhbGxfbGluZTogZS5yZXZpZXdfdHJlbmQucmV2aWV3X3RyZW5kLmxpc3QKCQkJCQkJCQl9KSA6IChqID0gITAsIGMoIiNnd2Rfd2lzaGxpc3RfdHJlbmRfZGV0YWlsX2J0biIpLmFkZENsYXNzKCJuby1yZXZpZXciKSksICQgPSBlLCBHID0gZS5wcm9tb0luZm87CgkJCQkJCQkJdmFyIG4gPSBNYXRoLm1pbihlLnN0b3JlWzBdICYmIGUuc3RvcmVbMF0uYWxsX2xpbmVfYmVnaW5fdGltZSwgZWUoTSkpLAoJCQkJCQkJCQlpID0gZS5ub3dfZGF5OwoJCQkJCQkJCUYgPSBlLm5vd19kYXk7CgkJCQkJCQkJdmFyIGEgPSBbewoJCQkJCQkJCQlwbG90OiAicGxvdEFsbCIsCgkJCQkJCQkJCXN0YXJ0OiAiYWxsX2xpbmVfYmVnaW5fdGltZSIsCgkJCQkJCQkJCW1pbkRheTogLjEsCgkJCQkJCQkJCWRhdGE6ICJhbGxfbGluZSIKCQkJCQkJCQl9LCB7CgkJCQkJCQkJCXBsb3Q6ICJwbG90NURheSIsCgkJCQkJCQkJCXN0YXJ0OiAic2hvcnRfZGF5X2xpbmVfYmVnaW5fdGltZSIsCgkJCQkJCQkJCW1pbkRheTogNSwKCQkJCQkJCQkJZGF0YTogInNob3J0X2RheV9saW5lIgoJCQkJCQkJCX0sIHsKCQkJCQkJCQkJcGxvdDogInBsb3RNb250aCIsCgkJCQkJCQkJCXN0YXJ0OiAibW9udGhfbGluZV90aW1lIiwKCQkJCQkJCQkJbWluRGF5OiAzMCwKCQkJCQkJCQkJZGF0YTogIm1vbnRoX2xpbmUiCgkJCQkJCQkJfSwgewoJCQkJCQkJCQlwbG90OiAicGxvdFllYXIiLAoJCQkJCQkJCQlzdGFydDogInllYXJfbGluZV90aW1lIiwKCQkJCQkJCQkJbWluRGF5OiAzNjUsCgkJCQkJCQkJCWRhdGE6ICJ5ZWFyX2xpbmUiCgkJCQkJCQkJfSwgewoJCQkJCQkJCQlwbG90OiAicGxvdFNwZWNpYWwiLAoJCQkJCQkJCQlzdGFydDogImFsbF9saW5lX2JlZ2luX3RpbWUiLAoJCQkJCQkJCQltaW5EYXk6IC4xLAoJCQkJCQkJCQlkYXRhOiAiYWxsX2xpbmUiCgkJCQkJCQkJfV07CgkJCQkJCQkJaWYgKGxlKCIjcGxvdEFsbCIpLCAtMSA9PT0gTVswXS5uYW1lLmluZGV4T2YoIijlvZPliY0pIikgJiYgKE1bMF0ubmFtZSArPSAiKOW9k+WJjSkiKSwgTVswXS5jdXJyZW5jeSB8fCAid3d3LmFtYXpvbi5jb20iID09PSBsb2NhdGlvbi5ob3N0IHx8ICJ3d3cuYWxpZXhwcmVzcy5jb20iID09PSBsb2NhdGlvbi5ob3N0KSB7CgkJCQkJCQkJCXZhciByID0gewoJCQkJCQkJCQkJCVVTRDogIiQiLAoJCQkJCQkJCQkJCUVVUjogIkVVUiIsCgkJCQkJCQkJCQkJSlBZOiAi5pel5YWDIiwKCQkJCQkJCQkJCQlDQUQ6ICJDRE4kIiwKCQkJCQkJCQkJCQlHQlA6ICLCoyIKCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQlwID0gewoJCQkJCQkJCQkJCVVTRDogIue+juWFgyIsCgkJCQkJCQkJCQkJRVVSOiAi5qyn5YWDIiwKCQkJCQkJCQkJCQlKUFk6ICLml6XlhYMiLAoJCQkJCQkJCQkJCUNBRDogIuWKoOWFgyIsCgkJCQkJCQkJCQkJR0JQOiAi6Iux6ZWRIgoJCQkJCQkJCQkJfTsKCQkJCQkJCQkJTVswXS5jdXJyZW5jeSB8fCAoTVswXS5jdXJyZW5jeSA9ICJVU0QiKSwgeCA9IHMuZ2V0UHJpY2VCZWZvcmVFeGNoYW5nZVJhdGUoby5kcC5vbGRQcmljZSksIGcgPSByW01bMF0uY3VycmVuY3ldLCBkLnRpdGxlLnRleHQgPSBwW01bMF0uY3VycmVuY3ldICsgIu+8miIsIEsuY2hhcnQubWFyZ2luUmlnaHQgPSAzOTAsIGYgPSAhMDsKCQkJCQkJCQkJdmFyIHYgPSBmdW5jdGlvbihlKSB7CgkJCQkJCQkJCQlyZXR1cm4gcyhlLCBNWzBdLmN1cnJlbmN5KQoJCQkJCQkJCQl9OwoJCQkJCQkJCQlfID0gdigxZTYpIC8gMWU2LCBMIC89IF87CgkJCQkJCQkJCXZhciBiID0gZnVuY3Rpb24oZSkgewoJCQkJCQkJCQkJcmV0dXJuIGUgJiYgKGUgPSBlLm1hcChmdW5jdGlvbihlKSB7CgkJCQkJCQkJCQkJcmV0dXJuIGUgLyBfCgkJCQkJCQkJCQl9KSksIGUKCQkJCQkJCQkJfTsKCQkJCQkJCQkJaWYgKE0ubGVuZ3RoID4gMSkKCQkJCQkJCQkJCWZvciAodmFyIHkgPSAxOyB5IDwgTS5sZW5ndGg7IHkrKykgIuS6mumprOmAiiIgPT09IE1beV0ubmFtZSAmJiAoTVt5XS5uYW1lID0gIuS6mumprOmAiuS4reWbvSIpLCBNW3ldLmFsbF9saW5lID0gYihNW3ldLmFsbF9saW5lKSwgTVt5XS5zaG9ydF9kYXlfbGluZSA9IGIoTVt5XS5zaG9ydF9kYXlfbGluZSksIE1beV0ubW9udGhfbGluZSA9IGIoTVt5XS5tb250aF9saW5lKSwgTVt5XS55ZWFyX2xpbmUgPSBiKE1beV0ueWVhcl9saW5lKTsKCQkJCQkJCQkJdHJ5IHsKCQkJCQkJCQkJCXZhciBrID0gWyJhbGxfbGluZSIsICJzaG9ydF9kYXlfbGluZSIsICJtb250aF9saW5lIiwgInllYXJfbGluZSJdOwoJCQkJCQkJCQkJay5mb3JFYWNoKGZ1bmN0aW9uKGUpIHt9KQoJCQkJCQkJCQl9IGNhdGNoICh6KSB7fQoJCQkJCQkJCX0KCQkJCQkJCQl2YXIgQiA9IDE4OwoJCQkJCQkJCSJ6aGlkZW1haSIgPT09IHQgJiYgKEIgPSAxKSwgInByaWNlSGlzdG9yeSIgPT09IHQgJiYgKEIgPSAyMCk7CgkJCQkJCQkJZm9yICh2YXIgQyA9ICExLCB5ID0gMDsgeSA8IE1hdGgubWluKE0ubGVuZ3RoLCBCKTsgeSsrKShpIC0gTVt5XS5hbGxfbGluZV9iZWdpbl90aW1lID4gNSAqIHcgfHwgIU1beV0uYWxsX2VxdWFsX3Nob3J0KSAmJiAoQyA9ICEwKTsKCQkJCQkJCQkxICE9PSBNLmxlbmd0aCB8fCBNWzFdICYmICLor4TorrrmlbAiID09PSBNWzFdLm5hbWUgPyBjKCIjYmpkLXFyY29kZS10cmVuZCIpLnJlbW92ZSgpIDogKGgubG9nKCJ0cmVuZC1xcmNvZGUtc2hvdyIpLCB1KCJ0cmVuZC1xcmNvZGUtc2hvdyIpKTsKCQkJCQkJCQlmb3IgKHZhciBOID0gcGFyc2VJbnQoKGkgLSBuKSAvIHcpLCB5ID0gMDsgeSA8IE1hdGgubWluKE0ubGVuZ3RoLCBCKTsgeSsrKQoJCQkJCQkJCQlpZiAoMCAhPT0gTVt5XS5hbGxfbGluZS5sZW5ndGgpIHsKCQkJCQkJCQkJCWlmIChNW3ldLmFsbF9lcXVhbF9zaG9ydCAmJiAxICE9PSBNLmxlbmd0aCkgewoJCQkJCQkJCQkJCU1beV0uYWxsX2xpbmUgPSBbXTsKCQkJCQkJCQkJCQlmb3IgKHZhciBUID0gMDsgVCA8IE1beV0uc2hvcnRfZGF5X2xpbmUubGVuZ3RoOyBUICs9IDI0KSBNW3ldLmFsbF9saW5lLnB1c2goTVt5XS5zaG9ydF9kYXlfbGluZVtUXSk7CgkJCQkJCQkJCQkJTVt5XS5hbGxfbGluZV9iZWdpbl90aW1lID0gZS5ub3dfZGF5IC0gNSAqIHcsIE1beV0uYWxsX2VxdWFsX3Nob3J0ID0gITEKCQkJCQkJCQkJCX0KCQkJCQkJCQkJCWZvciAodmFyIEEgPSAwOyBBIDwgYS5sZW5ndGg7IEErKykgewoJCQkJCQkJCQkJCXZhciBUID0gYVtBXTsKCQkJCQkJCQkJCQlpZiAobChpKSAtIGwobikgPj0gVC5taW5EYXkgKiB3IHx8ICJwbG90NURheSIgPT09IFQucGxvdCAmJiBDKSB7CgkJCQkJCQkJCQkJCWlmICghTVt5XVtULmRhdGFdKSBjb250aW51ZTsKCQkJCQkJCQkJCQkJaWYgKCJwbG90NURheSIgPT09IFQucGxvdCAmJiAhQykgY29udGludWU7CgkJCQkJCQkJCQkJCWlmICgicGxvdFNwZWNpYWwiICE9PSBULnBsb3QgJiYgIuivhOiuuuaVsCIgPT09IE1beV0ubmFtZSkgY29udGludWU7CgkJCQkJCQkJCQkJCWlmICgicGxvdFNwZWNpYWwiID09PSBULnBsb3QgJiYgeSA+IDAgJiYgIuivhOiuuuaVsCIgIT09IE1beV0ubmFtZSkgY29udGludWU7CgkJCQkJCQkJCQkJCSJzaG9ydF9kYXlfbGluZV9iZWdpbl90aW1lIiAhPT0gVC5zdGFydCAmJiAoTVt5XVtULnN0YXJ0XSA9IGwoTVt5XVtULnN0YXJ0XSkpLCBNW3ldLmFsbF9lcXVhbF9zaG9ydCAmJiAiYWxsX2xpbmVfYmVnaW5fdGltZSIgPT09IFQuc3RhcnQgJiYgKE1beV1bVC5zdGFydF0gPSBNW3ldLnNob3J0X2RheV9saW5lX2JlZ2luX3RpbWUpLCBsZSgiIyIgKyBULnBsb3QpOwoJCQkJCQkJCQkJCQl2YXIgcSA9IHsKCQkJCQkJCQkJCQkJCWNvbG9yOiBJKE1beV0ubmFtZSksCgkJCQkJCQkJCQkJCQluYW1lOiBNW3ldLm5hbWUsCgkJCQkJCQkJCQkJCQlwb2ludFN0YXJ0OiBNW3ldW1Quc3RhcnRdLAoJCQkJCQkJCQkJCQkJcG9pbnRJbnRlcnZhbDogdywKCQkJCQkJCQkJCQkJCWxlZ2VuZEluZGV4OiAxLAoJCQkJCQkJCQkJCQkJbGluZVdpZHRoOiAxLAoJCQkJCQkJCQkJCQkJekluZGV4OiA1MDAsCgkJCQkJCQkJCQkJCQltYXJrZXI6IHsKCQkJCQkJCQkJCQkJCQlzeW1ib2w6IFMuZXh0ZW5kZWQsCgkJCQkJCQkJCQkJCQkJc3RhdGVzOiB7CgkJCQkJCQkJCQkJCQkJCWhvdmVyOiB7CgkJCQkJCQkJCQkJCQkJCQllbmFibGVkOiAhMQoJCQkJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCQkJCXN0YXRlczogewoJCQkJCQkJCQkJCQkJCWhvdmVyOiB7CgkJCQkJCQkJCQkJCQkJCWVuYWJsZWQ6ICExLAoJCQkJCQkJCQkJCQkJCQloYWxvOiB7CgkJCQkJCQkJCQkJCQkJCQlzaXplOiAwCgkJCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJCQl9LAoJCQkJCQkJCQkJCQkJZGF0YTogTVt5XVtULmRhdGFdCgkJCQkJCQkJCQkJCX07CgkJCQkJCQkJCQkJCWlmICgicGxvdDVEYXkiID09PSBULnBsb3QgJiYgKHEucG9pbnRJbnRlcnZhbCA9IDM2ZTUsIHEucG9pbnRJbnRlcnZhbCAqIHEuZGF0YS5sZW5ndGggKyBxLnBvaW50U3RhcnQgPiBGICYmIChGID0gcS5wb2ludEludGVydmFsICogcS5kYXRhLmxlbmd0aCArIHEucG9pbnRTdGFydCkpLCAicGxvdEFsbCIgPT09IFQucGxvdCAmJiBxLmRhdGEubGVuZ3RoIDwgMzAgJiYgKHEucG9pbnRJbnRlcnZhbCA9IHcsIG5lKHcpKSwgInBsb3RBbGwiID09PSBULnBsb3QgJiYgTVt5XS5hbGxfZXF1YWxfc2hvcnQpCgkJCQkJCQkJCQkJCQlpZiAoMCA9PT0geSkgcS5wb2ludEludGVydmFsID0gMzZlNTsKCQkJCQkJCQkJCQkJCWVsc2UgewoJCQkJCQkJCQkJCQkJCXZhciBPID0gbmV3IERhdGUocS5wb2ludFN0YXJ0KSwKCQkJCQkJCQkJCQkJCQkJRCA9IG5ldyBEYXRlKE8uZ2V0WWVhcigpICsgMTkwMCwgTy5nZXRNb250aCgpLCBPLmdldERhdGUoKSwgOCk7CgkJCQkJCQkJCQkJCQkJcS5wb2ludFN0YXJ0ID0gRC5nZXRUaW1lKCksIHEucG9pbnRJbnRlcnZhbCA9IHc7CgkJCQkJCQkJCQkJCQkJZm9yICh2YXIgUiA9IFtdLCBXID0gMDsgVyA8IHEuZGF0YS5sZW5ndGg7IFcgKz0gMjQpIFIucHVzaChxLmRhdGFbV10pOwoJCQkJCQkJCQkJCQkJCXEuZGF0YSA9IFIKCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJZm9yICg7IHEuZGF0YSAmJiBxLmRhdGEubGVuZ3RoIDwgMTAwICYmICJwbG90QWxsIiAhPT0gVC5wbG90OykgewoJCQkJCQkJCQkJCQkJZm9yICh2YXIgSCA9IFtdLCBVID0gMDsgVSA8IHEuZGF0YS5sZW5ndGggJiYgKEgucHVzaChxLmRhdGFbVV0pLCBVICsgMSAhPT0gcS5kYXRhLmxlbmd0aCk7IFUrKykgSC5wdXNoKChxLmRhdGFbVSArIDFdICsgcS5kYXRhW1VdKSAvIDIpOwoJCQkJCQkJCQkJCQkJcS5kYXRhID0gSCwgcS5wb2ludEludGVydmFsID0gcS5wb2ludEludGVydmFsIC8gMgoJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJCXEuZGF0YSA9IHEuZGF0YSA/IHEuZGF0YS5tYXAocGUpIDogbnVsbCwgbnVsbCAhPSBxLmRhdGEgJiYgdGVbVC5wbG90XS5wdXNoKHEpCgkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9CgkJCQkJCQkJaWYgKDEgPT09IHRlLnBsb3RBbGwubGVuZ3RoKSB7CgkJCQkJCQkJCXZhciBZID0gdGUucGxvdEFsbFswXTsKCQkJCQkJCQkJZm9yIChZLmRhdGEgPSBZLmRhdGEubWFwKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQkJCXJldHVybiBlLnkKCQkJCQkJCQkJfSk7IFkuZGF0YS5sZW5ndGggPCAxMDA7KSB7CgkJCQkJCQkJCQlmb3IgKHZhciBIID0gW10sIEEgPSAwOyBBIDwgWS5kYXRhLmxlbmd0aCAmJiAoSC5wdXNoKFkuZGF0YVtBXSksIEEgKyAxICE9PSBZLmRhdGEubGVuZ3RoKTsgQSsrKSBILnB1c2goKFkuZGF0YVtBICsgMV0gKyBZLmRhdGFbQV0pIC8gMik7CgkJCQkJCQkJCQlZLmRhdGEgPSBILCBZLnBvaW50SW50ZXJ2YWwgPSBZLnBvaW50SW50ZXJ2YWwgLyAyCgkJCQkJCQkJCX0KCQkJCQkJCQkJWS5kYXRhID0gWS5kYXRhLm1hcChmdW5jdGlvbihlKSB7CgkJCQkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCQkJCXk6IGUsCgkJCQkJCQkJCQkJbWFya2VyOiB7CgkJCQkJCQkJCQkJCWVuYWJsZWQ6ICExCgkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9KQoJCQkJCQkJCX0KCQkJCQkJCQlNWzBdLmFsbF9lcXVhbF9zaG9ydCA/IChOKyssIGMoIiNwbG90QWxsIikuaHRtbCgi5YWo6YOoKCIgKyBOICsgIuWkqSkiKSkgOiBjKCIjcGxvdEFsbCIpLmh0bWwoIuWFqOmDqCIgKyBNWzBdLmFsbF9saW5lLmxlbmd0aCArICLlpKkiKSwgTCAmJiAiemhpZGVtYWkiICE9PSB0ICYmIFAuYWRkKCLlvZPliY3llYbln47ljp/lp4vku7fmoLwiKSwgUC5hZGQoTVswXS5uYW1lKTsKCQkJCQkJCQl2YXIgWCA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQkJCQkJCXZhciBuID0gdC5tYXAoZnVuY3Rpb24oZSkgewoJCQkJCQkJCQkJCXJldHVybiBlLm5hbWUKCQkJCQkJCQkJCX0pOwoJCQkJCQkJCQkJcmV0dXJuIGUubWFwKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQkJCQlpZiAoLTEgPT09IG4uaW5kZXhPZihlLm5hbWUpKSByZXR1cm4gZTsKCQkJCQkJCQkJCQl2YXIgaSA9IHQuZmlsdGVyKGZ1bmN0aW9uKHQpIHsKCQkJCQkJCQkJCQkJCXJldHVybiB0Lm5hbWUgPT09IGUubmFtZQoJCQkJCQkJCQkJCQl9KVswXSwKCQkJCQkJCQkJCQkJYSA9IEUoZSk7CgkJCQkJCQkJCQkJcmV0dXJuIGEuZGF0YSA9IGkuZGF0YSwgYS5wb2ludFN0YXJ0ID0gaS5wb2ludFN0YXJ0LCBhLnBvaW50SW50ZXJ2YWwgPSBpLnBvaW50SW50ZXJ2YWwsIGEKCQkJCQkJCQkJCX0pCgkJCQkJCQkJCX0sCgkJCQkJCQkJCUogPSBmdW5jdGlvbihlKSB7CgkJCQkJCQkJCQl2YXIgdCA9IGUubWFwKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQkJCQkJcmV0dXJuIGUucG9pbnRJbnRlcnZhbAoJCQkJCQkJCQkJCX0pLAoJCQkJCQkJCQkJCW4gPSBNYXRoLm1pbi5hcHBseShudWxsLCB0KTsKCQkJCQkJCQkJCWUuZm9yRWFjaChmdW5jdGlvbihlKSB7CgkJCQkJCQkJCQkJZm9yICg7IGUucG9pbnRJbnRlcnZhbCA+IG47KSB7CgkJCQkJCQkJCQkJCWZvciAodmFyIHQgPSBbXSwgaSA9IDA7IGkgPCBlLmRhdGEubGVuZ3RoICYmICh0LnB1c2goZS5kYXRhW2ldKSwgaSArIDEgIT09IGUuZGF0YS5sZW5ndGgpOyBpKyspIHsKCQkJCQkJCQkJCQkJCXZhciBhID0gewoJCQkJCQkJCQkJCQkJCW1hcmtlcjogZS5kYXRhW2ldLm1hcmtlciwKCQkJCQkJCQkJCQkJCQl5OiAoZS5kYXRhW2kgKyAxXS55ICsgZS5kYXRhW2ldLnkpIC8gMgoJCQkJCQkJCQkJCQkJfTsKCQkJCQkJCQkJCQkJCXQucHVzaChhKQoJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJCWUucG9pbnRJbnRlcnZhbCA9IGUucG9pbnRJbnRlcnZhbCAvIDIsIGUuZGF0YSA9IHQKCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQl9KQoJCQkJCQkJCQl9OwoJCQkJCQkJCVsicGxvdE1vbnRoIiwgInBsb3RZZWFyIl0uZm9yRWFjaChmdW5jdGlvbihlKSB7CgkJCQkJCQkJCWlmICghYygiIyIgKyBlKS5oYXNDbGFzcygiYmpkLWhpZGRlbiIpKSB7CgkJCQkJCQkJCQl2YXIgdCA9IHRlLnBsb3RBbGwsCgkJCQkJCQkJCQkJbiA9IHRlW2VdLAoJCQkJCQkJCQkJCWkgPSBYKHQsIG4pOwoJCQkJCQkJCQkJdGVbZV0gPSBpLCBKKHRlW2VdKQoJCQkJCQkJCQl9CgkJCQkJCQkJfSksIEoodGUucGxvdEFsbCksIEoodGUucGxvdFNwZWNpYWwpLCByZSgicGxvdEFsbCIsICExLCBtLmRlZXBDb3B5KEspKQoJCQkJCQkJfSgpLCAoby5JRTcgfHwgby5JRTggfHwgby5JRTkgfHwgby5JRTEwIHx8IG8uSUUxMSkgJiYgKGMoIiNnd2Rfd2lzaGxpc3RfdHJlbmRfZGV0YWlsX2NoYXJ0IikuY3NzKHsKCQkJCQkJCQl3aWR0aDogIjQ2MHB4IgoJCQkJCQkJfSksIGMoIiNnd2Rfd2lzaGxpc3RfdHJlbmRfZGV0YWlsIikuY3NzKHsKCQkJCQkJCQl3aWR0aDogIjU2OXB4IgoJCQkJCQkJfSkpLCAhby5JRTkgJiYgIW8uSUUxMCB8fCAidmlwIiAhPT0gby5zaXRlICYmICJ2aXBzaG9wIiAhPT0gby5zaXRlIHx8IGMoIiNnd2Rfd2lzaGxpc3RfdHJlbmRfZGV0YWlsX2NoYXJ0IikuY3NzKHsKCQkJCQkJCQl3aWR0aDogIjM5MHB4IgoJCQkJCQkJfSkKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfS5jYWxsKHQsIG4sIHQsIGUpLCAhKHZvaWQgMCAhPT0gaSAmJiAoZS5leHBvcnRzID0gaSkpCgkJfSkuY2FsbCh0LCBuKDk0KSwgbigxKSkKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJZS5leHBvcnRzID0gJzxzdHlsZT5cbgkucGFuZWwtc2hhZG93IHtcbgkJdG9wOiAyNTBweDtcbgl9XG5cbgkuZmxvYXRCdXR0b25zIHtcbgkJcG9zaXRpb246IGFic29sdXRlO1xuCQl0b3A6IDlweDtcbgkJcmlnaHQ6IDBweDtcbgkJb3ZlcmZsb3c6IGhpZGRlbjtcbgkJei1pbmRleDogOTk7XG4JfVxuXG4JLmhpZ2hjaGFydHMtY29udGFpbmVyIHtcbgkJd2lkdGg6IDEwMCUhaW1wb3J0YW50O1xuCQloZWlnaHQ6IDEwMCUhaW1wb3J0YW50O1xuCX1cblxuCS5oaWdoY2hhcnRzLWNvbnRhaW5lciA+IHN2ZyB7XG4JCXdpZHRoOiAxMDAlIWltcG9ydGFudDtcbgkJaGVpZ2h0OiAxMDAlIWltcG9ydGFudDsJCVxuCX1cblxuCS5oaWdoY2hhcnRzLXRvb2x0aXAgc3BhbiB7XG4JCXotaW5kZXg6IDk5OTkhaW1wb3J0YW50O1xuCX1cblxuCS5oaWdoY2hhcnRzLXRvb2x0aXAgdGFibGUge1xuCQl3aWR0aDogYXV0byFpbXBvcnRhbnQ7XG4JCW1hcmdpbi1sZWZ0OiA4cHghaW1wb3J0YW50O1xuCQltYXJnaW4tcmlnaHQ6IDhweCFpbXBvcnRhbnQ7XG4JCWJvcmRlcjogbm9uZTtcbgkJYm9yZGVyLXNwYWNpbmc6IG5vbmU7XG4JfVxuXG4JLmhpZ2hjaGFydHMtdG9vbHRpcCB0ZCB7XG4JCWZvbnQtZmFtaWx5OiAiTWljcm9zb2Z0IFlhaGVpIjtcbgkJZm9udC1zaXplOiAxMnB4O1xuCQlib3JkZXI6IG5vbmU7XG4JfVxuXG4JLmhpZ2hjaGFydHMtdG9vbHRpcCAucHJvbW9UZHtcbgkJdGV4dC1hbGlnbjogbGVmdDtcbgkJcGFkZGluZy1sZWZ0OiA1cHg7XG4JCXdpZHRoOiAxMDBweDtcbgkJbWF4LXdpZHRoOiAxMDBweDtcbgkJY29sb3I6ICM0YTkwZTI7XG4JCW92ZXJmbG93OiBoaWRkZW47XG4JCXRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzIWltcG9ydGFudDtcbgl9XG5cbgkuZmxvYXRCdXR0b25zID4gYXtcbgkJY3Vyc29yOiBwb2ludGVyO1xuCQliYWNrZ3JvdW5kOiBub25lO1xuCQlib3JkZXI6IG5vbmU7XG4JCWJvcmRlci1yaWdodDogMXB4IHNvbGlkIGJsYWNrO1xuCQlwYWRkaW5nLWxlZnQ6IDIwcHg7XG4JCXBhZGRpbmctcmlnaHQ6IDIwcHg7XG4JCWhlaWdodDogMTZweDtcbgkJbGluZS1oZWlnaHQ6IDE2cHg7XG4JCWNvbG9yOiAjMDAwO1xuCQlmb250LWZhbWlseTogIk1pY3Jvc29mdCBZYUhlaSI7XG4JCWZvbnQtc2l6ZTogMTJweCFpbXBvcnRhbnQ7XG4JfVxuXG4JI3t7ZXh0QnJhbmR9fV93aXNobGlzdF90cmVuZF9kZXRhaWxfY2hhcnQge1xuCQlwb3NpdGlvbjogcmVsYXRpdmU7XG4JCXdpZHRoOiA0NjBweDtcbgkJaGVpZ2h0OiAyNTRweDtcbgl9XG5cbgkje3tleHRCcmFuZH19X3dpc2hsaXN0X3RyZW5kX2RldGFpbCB7XG4JCWNsZWFyOiBib3RoO1xuCQliYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbgkJaGVpZ2h0OiAyODVweDtcbgl9XG5cbglAbWVkaWEgKG1heC13aWR0aDogMTI1MHB4KSB7XG4JCSN7e2V4dEJyYW5kfX0tdHJlbmQtY2hhcnQge1xuCQkJcG9zaXRpb246IGZpeGVkO1xuCQkJbGVmdDogNTAlO1xuCQkJbWFyZ2luLWxlZnQ6IC00MDBweDtcbgkJfVxuCX1cblxuCS5mbG9hdEJ1dHRvbnMgPiBhOmZpcnN0LWNoaWxkIHtcbgkJYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCBibGFjaztcbgl9XG5cbgkuZmxvYXRCdXR0b25zID4gYTpmb2N1cyB7XG4JCW91dGxpbmU6IG5vbmU7XG4JfVxuXG4JLmFjdGl2ZVBsb3Qge1xuCQliYWNrZ3JvdW5kOiByZ2IoMjI3LDIyNywyMjcpIWltcG9ydGFudDtcbgl9XG5cbgkuYmpkLW5ld3RyZW5kLWRldiAuYmpkLWhpZGRlbiB7XG4JCWRpc3BsYXk6IG5vbmUhaW1wb3J0YW50O1xuCX1cblxuCSNwbG90QXJlYSB7XG4JCXBvc2l0aW9uOiBhYnNvbHV0ZTtcbgkJcmlnaHQ6IDBweDtcbgkJbGVmdDogMHB4O1xuCQloZWlnaHQ6IDI1NHB4O1xuCQltYXgtd2lkdGg6IDIwMDBweCFpbXBvcnRhbnQ7XG4JCWZvbnQtZmFtaWx5OiAiTWljcm9zb2Z0IFlhSGVpIjtcbgl9XG5cbgkjdGltZUN1cnNvciB7XG4JCXBvc2l0aW9uOiBhYnNvbHV0ZTtcbgkJaGVpZ2h0OiAyMHB4O1xuCQlsaW5lLWhlaWdodDogMjBweDtcbgkJY29sb3I6ICNmZmY7XG4JCWJhY2tncm91bmQ6ICM0NTRhNGQ7XG4JCWZvbnQtZmFtaWx5OiBcJ0FyaWFsXCc7XG4JCWZvbnQtd2VpZ2h0OiBib2xkO1xuCQl0b3A6IDIwNXB4O1xuCQlmb250LXNpemU6IDEycHg7XG4JCXBhZGRpbmctbGVmdDogN3B4O1xuCQlwYWRkaW5nLXJpZ2h0OiA3cHg7XG4JCS8qbGVmdDogLTEwMDAwcHg7Ki9cbgl9XG5cbgkjZGFzaGVkTGluZSB7XG4JCXBvc2l0aW9uOiBhYnNvbHV0ZTtcbgkJaGVpZ2h0OiAxNjBweDtcbgkJbGVmdDogLTEwMDAwMHB4O1xuCQlib3JkZXI6IG5vbmU7XG4JCWJvcmRlci1sZWZ0OiAycHggZG90dGVkICMwMDA7XG4JCXRvcDogNTRweDtcbgkJei1pbmRleDogMTtcbgkJcG9pbnRlci1ldmVudHM6IG5vbmU7XG4JfVxuXG4JLmhpZ2hjaGFydHMtdG9vbHRpcCB7XG4JCXotaW5kZXg6IDk5O1xuCQliYWNrZ3JvdW5kOiB3aGl0ZTtcbgl9XG5cblxuCSNiamQtcXJjb2RlLXRyZW5kIHtcbgkJcG9zaXRpb246IGFic29sdXRlO1xuCQl3aWR0aDogMTUwcHg7XG4JCWhlaWdodDogMTUwcHg7XG4JCXJpZ2h0OiAzNXB4O1xuCQlib3R0b206IDBweDtcbgkJdGV4dC1hbGlnbjogY2VudGVyO1xuCX1cblxuCSNiamQtcXJjb2RlLXRyZW5kIHNwYW4ge1xuCQlwb3NpdGlvbjogcmVsYXRpdmU7XG4JCWZvbnQtc2l6ZTogMTJweDtcbgkJZm9udC1mYW1pbHk6ICJNaWNyb3NvZnQgWWFoZWkiO1xuCQljb2xvcjogIzUzNTg1NDtcbgkJdG9wOiA4cHg7XG4JfVxuPC9zdHlsZT5cblxuPGRpdiBjbGFzcz0iZmxvYXRCdXR0b25zIGJqZC1uZXd0cmVuZC1kZXYiPlxuCTxhIGNsYXNzPSJiamQtaGlkZGVuIiBpZD0icGxvdEFsbCI+5YWo6YOoPC9hPjxhIGNsYXNzPSJiamQtaGlkZGVuIiBpZD0icGxvdFllYXIiPuW5tOe6vzwvYT48YSBjbGFzcz0iYmpkLWhpZGRlbiIgaWQ9InBsb3RNb250aCI+5pyI57q/PC9hPjxhIGNsYXNzPSJiamQtaGlkZGVuIiBpZD0icGxvdDVEYXkiPjXml6Xnur88L2E+XG48L2Rpdj5cbjxkaXYgaWQ9InBsb3RBcmVhIj5cbglcbjwvZGl2PlxuPGRpdiBpZD0idGltZUN1cnNvciI+XG4J6K+356iN5YCZLi4uXG48L2Rpdj5cbjxkaXYgaWQ9ImRhc2hlZExpbmUiPjwvZGl2PlxuPCEtLSA8ZGl2IGlkPSJiamQtcXJjb2RlLXRyZW5kIj5cbgk8aW1nIHNyYz0ie3tzX3NlcnZlcn19L2ltYWdlcy9leHRlbnNpb25zL3RyZW5kX3FyY29kZS5qcGciIGFsdD0iIiBzdHlsZT0id2lkdGg6IDk0cHg7aGVpZ2h0Ojk0cHgiIC8+XG4JPGJyPlxuCTxzcGFuPuW+ruS/oeS4iuS5n+iDveafpeWOhuWPsuS7t+agvDwvc3Bhbj5cbjwvZGl2PiAtLT4nOwoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQl2YXIgaTsKCQlpID0gZnVuY3Rpb24oKSB7CgkJCXJldHVybiBmdW5jdGlvbihlKSB7CgkJCQl2YXIgdCA9IG5ldyBEYXRlKGUpLAoJCQkJCW4gPSBuZXcgRGF0ZSh0LmdldEZ1bGxZZWFyKCksIHQuZ2V0TW9udGgoKSwgdC5nZXREYXRlKCkpLAoJCQkJCWkgPSBuLmdldFRpbWUoKSArIDY4NGU1OwoJCQkJcmV0dXJuIGkKCQkJfQoJCX0uY2FsbCh0LCBuLCB0LCBlKSwgISh2b2lkIDAgIT09IGkgJiYgKGUuZXhwb3J0cyA9IGkpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQl2YXIgaTsKCQkoZnVuY3Rpb24oYSwgbykgewoJCQkidXNlIHN0cmljdCI7CgkJCWkgPSBmdW5jdGlvbigpIHsKCQkJCXZhciBlID0gMCwKCQkJCQl0ID0gewoJCQkJCQkiMzYwYnV5IjogIiNwYWdlX21hcHJpY2UiLAoJCQkJCQlzdW5pbmc6IFsiZGVsLnNtYWxsLXByaWNlIiwgImRlbCIsICIjaXRlbVByaWNlPmRlbCJdLAoJCQkJCQlhbWF6b246IFsiLmRpZ2l0YWwtbGlzdC1wcmljZT50ZD4uYS10ZXh0LXN0cmlrZSIsICIuYS1zcGFuMTIuYS1jb2xvci1zZWNvbmRhcnkuYS1zaXplLWJhc2UiLCAiLmEtdGV4dC1zdHJpa2UiXSwKCQkJCQkJeW91Z291OiAiZGVsOmVxKDApIiwKCQkJCQkJZGFuZ2Rhbmc6IFsiLnByaWNlX206ZXEoMCkiLCAiLmQxNV9wcmljZV9pbmZvIC5wcmljZV9wYyAucHJpY2VfbSJdLAoJCQkJCQl2aXBzaG9wOiAiLkotbVByaWNlIiwKCQkJCQkJa2VlZGU6ICIubWVzc2FnZV9wcmljZV9rZCIsCgkJCQkJCWZlaW5pdTogImRlbC5mbi1ybWItbnVtOmVxKDApIiwKCQkJCQkJa2FvbGE6ICIjanNfbWFya2V0UHJpY2UiLAoJCQkJCQkxMTE6ICJkZWwiLAoJCQkJCQlqaXV4aWFuOiAiZGVsIiwKCQkJCQkJeWludGFpOiAiLm1rLW51bSIsCgkJCQkJCWJlaWJlaTogJy5zdHJpa2Vbb3AtdmFsdWU9Im9yaWdpblByaWNlIl0nLAoJCQkJCQlib29rc2NoaW5hOiAidGQ6ZXEoMTkpIiwKCQkJCQkJdG1hbGw6IFsiLnRiLXJtYi1udW0iLCAiLnRtLXRhZ1ByaWNlLXBhbmVsIC50bS1wcmljZSIsICIudG0tcHJpY2UtcGFuZWwgLnRtLXByaWNlIl0sCgkJCQkJCXRhb2JhbzogIiNKX1N0clByaWNlPmVtLnRiLXJtYi1udW0iLAoJCQkJCQkidGFvYmFvLTk1MDk1IjogIi50bS1wcmljZS1wYW5lbCAudG0tcHJpY2U6ZXEoMCkiLAoJCQkJCQlsZWZlbmc6ICIubWFya2V0UHJpY2UtcyIKCQkJCQl9LAoJCQkJCWkgPSAiIjsKCQkJCWlmICh2b2lkIDAgIT0gdFthLnNpdGVdKSB7CgkJCQkJdmFyIHIgPSB0W2Euc2l0ZV07CgkJCQkJaWYgKHIgaW5zdGFuY2VvZiBBcnJheSkgci5mb3JFYWNoKGZ1bmN0aW9uKHQpIHsKCQkJCQkJdmFyIG4gPSBvKHQpLAoJCQkJCQkJYSA9IG8odCkudG9BcnJheSgpLmxlbmd0aDsKCQkJCQkJaWYgKGEgPiAxICYmIChuID0gbyh0ICsgKCI6ZXEoIiArIChhIC0gMSkgKyAiKSIpKSksICFlICYmIG4gJiYgbi50ZXh0KCkpIHsKCQkJCQkJCXZhciByID0gbi50ZXh0KCk7CgkJCQkJCQlyLnRyaW0gJiYgKHIgPSByLnRyaW0oKSk7CgkJCQkJCQl2YXIgcyA9IHBhcnNlRmxvYXQoci5yZXBsYWNlKCIsIiwgIiIpLnJlcGxhY2UoIu+/pSIsICIiKS5yZXBsYWNlKCLCpSIsICIiKS5yZXBsYWNlKCIkIiwgIiIpLnJlcGxhY2UoIiwiLCAiIikpOwoJCQkJCQkJZSA9IHMsIGkgPSB0CgkJCQkJCX0KCQkJCQl9KTsKCQkJCQllbHNlIHsKCQkJCQkJdmFyIHMgPSBvKHIpOwoJCQkJCQlpZiAocyAmJiBzLnRleHQoKS5sZW5ndGggPiAwKSB7CgkJCQkJCQl2YXIgbCA9IHMudGV4dCgpOwoJCQkJCQkJbC50cmltICYmIChsID0gbC50cmltKCkpOwoJCQkJCQkJdmFyIGMgPSBwYXJzZUZsb2F0KGwucmVwbGFjZSgiLCIsICIiKS5yZXBsYWNlKCLvv6UiLCAiIikucmVwbGFjZSgiwqUiLCAiIikucmVwbGFjZSgiLCIsICIiKSk7CgkJCQkJCQllID0gYywgaSA9IHIKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJCWlmICgiZGV0YWlsLnRtYWxsLmhrIiA9PT0gbG9jYXRpb24uaG9zdCkgewoJCQkJCWUgPSBvKCJzcGFuLnRtLXByaWNlOmVxKDApIikudGV4dCgpOwoJCQkJCXZhciBkID0gbygiZW0udG0teWVuOmVxKDApIikudGV4dCgpOwoJCQkJCSgi4oKpIiA9PT0gZCB8fCAiTlQkIiA9PT0gZCB8fCAtMSA9PT0gbygic3Bhbi50bS1wcmljZTplcSgwKSIpLmNzcygidGV4dC1kZWNvcmF0aW9uIikuaW5kZXhPZigibGluZS10aHJvdWdoIikpICYmIChlID0gbnVsbCk7CgkJCQkJdmFyIHAgPSBvKCIud3J0b3JpZ2lucHJpY2UgLnRtLXByaWNlIikudGV4dCgpOwoJCQkJCXAgJiYgKGUgPSBwKQoJCQkJfQoJCQkJdmFyIGggPSBvKCIjSl9TdHJQcmljZSIpLnRleHQoKSAmJiAtMSA9PT0gbygiI0pfU3RyUHJpY2UiKS5jc3MoInRleHQtZGVjb3JhdGlvbiIpLnRvU3RyaW5nKCkuaW5kZXhPZigibGluZS10aHJvdWdoIik7CgkJCQlpZiAoInRhb2JhbyIgIT09IGEuc2l0ZSAmJiAidG1hbGwiICE9PSBhLnNpdGUgJiYgInRhb2Jhby05NTA5NSIgIT09IGEuc2l0ZSB8fCAhKGggfHwgInRtYWxsIiA9PT0gYS5zaXRlICYmICJub25lIiA9PT0gbygiI0pfU3RyUHJpY2VNb2RCb3giKS5jc3MoImRpc3BsYXkiKSkgfHwgKCIudG0tcHJpY2UtcGFuZWwgLnRtLXByaWNlIiA9PT0gaSB8fCAiI0pfU3RyUHJpY2U+ZW0udGItcm1iLW51bSIgPT09IGkpICYmIChlID0gbnVsbCksICJ0YW9iYW8iID09PSBhLnNpdGUgfHwgInRtYWxsIiA9PT0gYS5zaXRlIHx8ICJ0YW9iYW8tOTUwOTUiID09PSBhLnNpdGUpIHsKCQkJCQl2YXIgdSA9IG8oaSk7CgkJCQkJdS5jc3MoInRleHQtZGVjb3JhdGlvbiIpICYmIC0xID09PSB1LmNzcygidGV4dC1kZWNvcmF0aW9uIikudG9TdHJpbmcoKS5pbmRleE9mKCJsaW5lLXRocm91Z2giKSAmJiAoInRhb2JhbyIgPT09IGEuc2l0ZSA/IC0xID09PSB1LnBhcmVudCgpLmNzcygidGV4dC1kZWNvcmF0aW9uIikudG9TdHJpbmcoKS5pbmRleE9mKCJsaW5lLXRocm91Z2giKSAmJiAoZSA9IG51bGwpIDogZSA9IG51bGwpCgkJCQl9CgkJCQlpZiAoImJvb2tzY2hpbmEiID09PSBhLnNpdGUpIHsKCQkJCQl2YXIgbSA9IG8oInRkIikudG9BcnJheSgpLm1hcChmdW5jdGlvbihlKSB7CgkJCQkJCQlyZXR1cm4gZS5pbm5lclRleHQKCQkJCQkJfSksCgkJCQkJCWYgPSBtLmluZGV4T2YoIuWumsKgwqDCoMKg5Lu377yaIik7CgkJCQkJZSA9IG1bZiArIDFdCgkJCQl9CgkJCQl2YXIgZyA9IG51bGw7CgkJCQlyZXR1cm4gInd3dy5hbWF6b24uY28uanAiID09PSBsb2NhdGlvbi5ob3N0ICYmIChnID0gIkpQWSIpLCBlID0gbig0MCkoZSwgZyksIGUgPSBwYXJzZUZsb2F0KGUpCgkJCX0uY2FsbCh0LCBuLCB0LCBlKSwgISh2b2lkIDAgIT09IGkgJiYgKGUuZXhwb3J0cyA9IGkpKQoJCX0pLmNhbGwodCwgbigxKSwgbig2KSkKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJdmFyIGk7CgkJKGZ1bmN0aW9uKGEpIHsKCQkJInVzZSBzdHJpY3QiOwoJCQlpID0gZnVuY3Rpb24oKSB7CgkJCQlmdW5jdGlvbiBlKCkgewoJCQkJCWlmIChhLm5ld19leHRlbnNpb24pIHJldHVybiAhMTsKCQkJCQl2YXIgZSA9IFsianNkeCIsICJuamNrIiwgImhpd2lmaSJdOwoJCQkJCXJldHVybiBlLmluZGV4T2YoYS5mcm9tX2RldmljZSkgPiAtMSA/ICEwIDogITEKCQkJCX0KCgkJCQlmdW5jdGlvbiB0KCkgewoJCQkJCXZhciBlOwoJCQkJCXMoIi5nd2RfdXBkYXRlIikub24oIm1vdXNlZW50ZXIiLCBmdW5jdGlvbigpIHsKCQkJCQkJcygiLmd3ZF91cGRhdGVfd2lzaF9kZXRhaWwiKS5zaG93KCksIHMoIi5nd2RfdXBkYXRlIikuYWRkQ2xhc3MoInVwZGF0ZV9ob3Zlcl9pdGVtIikKCQkJCQl9KS5vbigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uKCkgewoJCQkJCQllID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJCXMoIi5nd2RfdXBkYXRlX3dpc2hfZGV0YWlsIikuaGlkZSgpLCBzKCIuZ3dkX3VwZGF0ZSIpLnJlbW92ZUNsYXNzKCJ1cGRhdGVfaG92ZXJfaXRlbSIpCgkJCQkJCX0sIDIwMCkKCQkJCQl9KSwgcygiLmd3ZF91cGRhdGVfd2lzaF9kZXRhaWwiKS5vbigibW91c2VlbnRlciIsIGZ1bmN0aW9uKCkgewoJCQkJCQljbGVhclRpbWVvdXQoZSkKCQkJCQl9KS5vbigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uKCkgewoJCQkJCQlzKCIuZ3dkX3VwZGF0ZV93aXNoX2RldGFpbCIpLmhpZGUoKSwgcygiLmd3ZF91cGRhdGUiKS5yZW1vdmVDbGFzcygidXBkYXRlX2hvdmVyX2l0ZW0iKQoJCQkJCX0pCgkJCQl9CgoJCQkJZnVuY3Rpb24gaSgpIHsKCQkJCQl2YXIgZTsKCQkJCQlhLklFNiAmJiAocygiLmd3ZF91cGRhdGVfc2hlbmdqaSIpLm9uKCJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7CgkJCQkJCXMoIi5nd2RfdXBkYXRlX2RldGFpbCIpLnNob3coKQoJCQkJCX0pLm9uKCJtb3VzZWxlYXZlIiwgZnVuY3Rpb24oKSB7CgkJCQkJCWUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCQkJcygiLmd3ZF91cGRhdGVfZGV0YWlsIikuaGlkZSgpCgkJCQkJCX0sIDIwMCkKCQkJCQl9KSwgcygiLmd3ZF91cGRhdGVfZGV0YWlsIikub24oIm1vdXNlZW50ZXIiLCBmdW5jdGlvbigpIHsKCQkJCQkJY2xlYXJUaW1lb3V0KGUpCgkJCQkJfSkub24oZnVuY3Rpb24oKSB7CgkJCQkJCXMoIi5nd2RfdXBkYXRlX2RldGFpbCIpLmhpZGUoKQoJCQkJCX0pKQoJCQkJfQoJCQkJdmFyIG8sIHIgPSB7fSwKCQkJCQlzID0gbig2KSwKCQkJCQlsID0gbigxNiksCgkJCQkJYyA9IG4oMTQzKSwKCQkJCQlkID0gbigyOSksCgkJCQkJcCA9IGQuZ2V0QnJvd3NlcigpOwoJCQkJcmV0dXJuIHIuaXNCZWlqaW5nID0gZnVuY3Rpb24oZSkgewoJCQkJCXZvaWQgMCA9PT0gbyAmJiBhLmZvcmJpdE5qID8gcy5nZXRKU09OKGEuc2VydmVyICsgIi9pcC5waHA/Y2FsbGJhY2s9PyZsb2NhdGlvbj0iICsgZW5jb2RlVVJJQ29tcG9uZW50KCLljZfkuqwiKSkuZG9uZShmdW5jdGlvbih0KSB7CgkJCQkJCW8gPSB0LnJlc3VsdCwgZShvKQoJCQkJCX0pIDogZShvKQoJCQkJfSwgci5tYWluYmFyID0gZnVuY3Rpb24oKSB7CgkJCQkJZSgpICYmIHIuaXNCZWlqaW5nKGZ1bmN0aW9uKGUpIHsKCQkJCQkJaWYgKCFlICYmICFhLklFNikgewoJCQkJCQkJdmFyIHQgPSBzKCIjQklKSUFfSEFTX0JVSUxUIikuYXR0cigiY2xhc3MiKTsKCQkJCQkJCWlmICh0KSB7CgkJCQkJCQkJdmFyIG8gPSB0LnNwbGl0KCIgIik7CgkJCQkJCQkJaWYgKG8ubGVuZ3RoID4gMSkgcmV0dXJuCgkJCQkJCQl9CgkJCQkJCQlzKCJhLnJlLWd3ZC1kZXNjLmd3ZC1kZXNjIikuaGlkZSgpLCBzKCJhLnJlLWd3ZC1kZXNjLmd3ZC1kZXNjIikucmVtb3ZlQ2xhc3MoImd3ZC1jbG9zZS1tb2R1bGUiKTsKCQkJCQkJCXZhciByID0gbigxNDQpOwoJCQkJCQkJcygiLmd3ZC1yZS1jaGFuZ2UtbG9nbyIpLmFmdGVyKGwuY29tcGlsZShyKSh7CgkJCQkJCQkJYnJvd3NlcjogcCwKCQkJCQkJCQlzX3NlcnZlcjogYS5zX3NlcnZlciwKCQkJCQkJCQlsaW5rQ2xhc3M6IGEuZXh0TmFtZSArICJfbGluayIKCQkJCQkJCX0pKSwgcygiZGl2Lmd3ZF91cGRhdGVfc2hlbmdqaSAuc2hlbmdqaV9jb250ZW50IikuY2xpY2soZnVuY3Rpb24oZSkgewoJCQkJCQkJCWUuc3RvcFByb3BhZ2F0aW9uKCkKCQkJCQkJCX0pLCBzKCIjbmV3X2Rvd25sb2FkX25ld19idXR0b25fYm90dG9tIGltZyIpLmF0dHIoInNyYyIsIGEuc19zZXJ2ZXIgKyAiL2ltYWdlcy9leHRlbnNpb25zL2ZyZWVfIiArIHAudXR5cGUgKyAiLnBuZyIpLmNsaWNrKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQllLnN0b3BQcm9wYWdhdGlvbigpCgkJCQkJCQl9KSwgImNocm9tZSIgPT09IHAudXR5cGUgPyBzKCIjbmV3X2Rvd25sb2FkX25ld190eHRfYm90dG9tIikudGV4dCgiMzYw55So5oi36K+354K55q2k5LiL6L29IikuYXR0cigiaHJlZiIsICJodHRwczovL2V4dC5zZS4zNjAuY24vd2Vic3RvcmUvZGV0YWlsL25mYmlrZGtqZmpjZWpkZGJkY3BiYWZuY2xrZmRoaWpkIikuY3NzKCJjb2xvciIsICJncmF5IikuYWRkQ2xhc3MoYS5leHROYW1lICsgIl9saW5rIikgOiAoIjM2MHNlIiA9PT0gcC51dHlwZSB8fCAiMzYwZWUiID09PSBwLnV0eXBlKSAmJiBzKCIjbmV3X2Rvd25sb2FkX25ld190eHRfYm90dG9tIikudGV4dCgiY2hyb21l55So5oi36K+354K55q2k5LiL6L29IikuYXR0cigiaHJlZiIsICJodHRwOi8vd3d3LiIgKyBhLmV4dE5hbWUgKyAiLmNvbS9hcHAvZXh0ZW5zaW9uP2Zyb21fZGV2aWNlPSIgKyBhLmZyb21fZGV2aWNlX251bSkuY3NzKHsKCQkJCQkJCQljb2xvcjogImdyYXkiLAoJCQkJCQkJCXJpZ2h0OiAiMjRweCIKCQkJCQkJCX0pLmFkZENsYXNzKGEuZXh0TmFtZSArICJfbGluayIpLCBpKCkKCQkJCQkJfQoJCQkJCX0pCgkJCQl9LCByLm1pbmliYXIgPSBmdW5jdGlvbigpIHsKCQkJCQllKCkgJiYgci5pc0JlaWppbmcoZnVuY3Rpb24obikgewoJCQkJCQlpZiAoIW4gJiYgZSgpICYmICFhLklFNikgewoJCQkJCQkJdmFyIGkgPSBzKCIjQklKSUFfSEFTX0JVSUxUIikuYXR0cigiY2xhc3MiKTsKCQkJCQkJCWlmIChpKSB7CgkJCQkJCQkJdmFyIG8gPSBpLnNwbGl0KCIgIik7CgkJCQkJCQkJaWYgKG8ubGVuZ3RoID4gMSkgcmV0dXJuCgkJCQkJCQl9CgkJCQkJCQlzKCIjZ3dkLWJyYW5kLXN1YnNjcmliZS1ib3giKS5hZnRlcihsLmNvbXBpbGUoYykoewoJCQkJCQkJCWJyb3dzZXI6IHAsCgkJCQkJCQkJc19zZXJ2ZXI6IGEuc19zZXJ2ZXIsCgkJCQkJCQkJbGlua0NsYXNzOiBhLmV4dE5hbWUgKyAiX2xpbmsiCgkJCQkJCQl9KSksIHMoImEuZ3dkX3VwZGF0ZSIpLmNsaWNrKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQllLnN0b3BQcm9wYWdhdGlvbigpCgkJCQkJCQl9KSwgcygiI25ld19kb3dubG9hZF9uZXdfYnV0dG9uIGltZyIpLmF0dHIoInNyYyIsIGEuc19zZXJ2ZXIgKyAiL2ltYWdlcy9leHRlbnNpb25zL2ZyZWVfIiArIHAudXR5cGUgKyAiLnBuZyIpLmNsaWNrKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQllLnN0b3BQcm9wYWdhdGlvbigpCgkJCQkJCQl9KSwgImNocm9tZSIgPT09IHAudXR5cGUgPyBzKCIjbmV3X2Rvd25sb2FkX25ld190eHQiKS50ZXh0KCIzNjDnlKjmiLfor7fngrnmraTkuIvovb0iKS5hdHRyKCJocmVmIiwgImh0dHBzOi8vZXh0LnNlLjM2MC5jbi93ZWJzdG9yZS9kZXRhaWwvbmZiaWtka2pmamNlamRkYmRjcGJhZm5jbGtmZGhpamQiKS5jc3MoImNvbG9yIiwgImdyYXkiKS5hZGRDbGFzcyhhLmV4dE5hbWUgKyAiX2xpbmsiKSA6ICgiMzYwc2UiID09PSBwLnV0eXBlIHx8ICIzNjBlZSIgPT09IHAudXR5cGUpICYmIHMoIiNuZXdfZG93bmxvYWRfbmV3X3R4dCIpLnRleHQoImNocm9tZeeUqOaIt+ivt+eCueatpOS4i+i9vSIpLmF0dHIoImhyZWYiLCAiaHR0cDovL3d3dy4iICsgYS5leHROYW1lICsgIi5jb20vYXBwL2V4dGVuc2lvbj9mcm9tX2RldmljZT0iICsgYS5mcm9tX2RldmljZV9udW0pLmNzcyh7CgkJCQkJCQkJY29sb3I6ICJncmF5IiwKCQkJCQkJCQlyaWdodDogIjI0cHgiCgkJCQkJCQl9KS5hZGRDbGFzcyhhLmV4dE5hbWUgKyAiX2xpbmsiKSwgdCgpCgkJCQkJCX0KCQkJCQl9KQoJCQkJfSwgci50cmVuZFVwZGF0ZSA9IGZ1bmN0aW9uKCkgewoJCQkJCWUoKSAmJiByLmlzQmVpamluZyhmdW5jdGlvbih0KSB7CgkJCQkJCSF0ICYmIGUoKSAmJiAocygiI2d3ZC10cmVuZC1jaGFydCIpLmFwcGVuZCgnPGEgY2xhc3M9Imd3ZF9ib3R0b210cmVuZF91cGRhdGUgJyArIGEuZXh0TmFtZSArICdfbGluayIgaHJlZj0iJyArIHAudXJsICsgJyIgdGFyZ2V0PSJfYmxhbmsiID48L2E+JykuY2xpY2soZnVuY3Rpb24oZSkgewoJCQkJCQkJZS5zdG9wUHJvcGFnYXRpb24oKQoJCQkJCQl9KSwgcygiI2d3ZF93aXNobGlzdF90cmVuZF9kZXRhaWxfaW5mbyIpLmFwcGVuZCgnPGEgY2xhc3M9Imd3ZF91cGRhdGVfdHJlbmRfYnRuICcgKyBhLmV4dE5hbWUgKyAnX2xpbmsiIGhyZWY9IicgKyBwLnVybCArICciIHRhcmdldD0iX2JsYW5rIiA+PC9hPicpLmNsaWNrKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCWUuc3RvcFByb3BhZ2F0aW9uKCkKCQkJCQkJfSkpCgkJCQkJfSkKCQkJCX0sIHIKCQkJfS5jYWxsKHQsIG4sIHQsIGUpLCAhKHZvaWQgMCAhPT0gaSAmJiAoZS5leHBvcnRzID0gaSkpCgkJfSkuY2FsbCh0LCBuKDEpKQoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQllLmV4cG9ydHMgPSAnPGRpdiBjbGFzcz0ic2h1eGlhbiI+fDwvZGl2PlxuPGRpdiBpZD0iZ3dkX3VwZGF0ZV9uZXdfd3JhcHBlciI+XG4gIDxhIGhyZWY9Int7YnJvd3Nlci51cmx9fSIgY2xhc3M9Imd3ZF91cGRhdGUge3tsaW5rQ2xhc3N9fSIgdGFyZ2V0PSJfYmxhbmsiPlxuICAgIDxkaXYgY2xhc3M9Imd3ZF91cGRhdGVfaWNvbiI+PGltZyBjbGFzcz0iZ3dkX3VwZGF0ZV9pY29uX291dCIgc3JjPSJ7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvZnJlZWRvd25kb3dubG9hZC5naWYiPjwvZGl2PlxuICAgIDxzcGFuPuS9k+mqjOacgOaWsOeJiOacrOavlOS7t+W3peWFtzwvc3Bhbj5cbiAgPC9hPlxuICA8ZGl2IGNsYXNzPSJnd2RfdXBkYXRlX3dpc2hfZGV0YWlsIj5cbiAgICA8ZGl2IGNsYXNzPSJnd2RfdXBkYXRlX2RldGFpbF90eHQiPlxuICAgICAgICA8cCBjbGFzcz0icGFsYl9pbl90eHQiPuS6su+8jOS9oOS5sOWIsOacgOS9juS7t+S6huWQl++8nzwvcD5cbiAgICAgICAgPGltZyBzcmM9Int7c19zZXJ2ZXJ9fS9pbWFnZXMvZXh0ZW5zaW9ucy9mcmVlZG93bmJhY2tncm91bmRncmFwaC5wbmciPlxuICAgICAgICA8ZGl2IGNsYXNzPSJwYXJiX2luX3R4dCI+XG4gICAgICAgICAgPHAgY2xhc3M9ImNvbG9ycmVkIj7nq4vljbPljYfnuqfoh7PotK3nianlhZo8c3BhbiBjbGFzcz0iYmlnIj4mbmJzcDs1LjIuOTI8L3NwYW4+PC9wPlxuICAgICAgICAgIDxwPuiHquWKqOaQnOe0ouWVhuWTgTxzcGFuIGNsYXNzPSJiaWdjb2xvciI+Jm5ic3A75pyA5L2O5Lu3PC9zcGFuPjwvcD5cbiAgICAgICAgICA8cD4xODDlpKk8c3BhbiBjbGFzcz0iYmlnY29sb3IiPiZuYnNwO+S7t+agvOi1sOWKv+Wbvjwvc3Bhbj48L3A+XG4gICAgICAgICAgPHA+5pSv5oyB5ZCE5aSn5Li75rWB5rWP6KeI5ZmoPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGEgaWQ9Im5ld19kb3dubG9hZF9uZXdfYnV0dG9uIiBocmVmPSJ7e2Jyb3dzZXIudXJsfX0iIHRhcmdldD0iX2JsYW5rIiBjbGFzcz0ie3tsaW5rQ2xhc3N9fSI+XG4gICAgICAgICAgPGltZyBzcmM9Int7c19zZXJ2ZXJ9fS9pbWFnZXMvZXh0ZW5zaW9ucy9mcmVlX2Nocm9tZS5wbmciPlxuICAgICAgICA8L2E+IFxuICAgICAgICA8YSBpZD0ibmV3X2Rvd25sb2FkX25ld190eHQiIGhyZWY9IiIgdGFyZ2V0PSJfYmxhbmsiIGNsYXNzPSJ7e2xpbmtDbGFzc319Ij48L2E+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuPC9kaXY+JwoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQllLmV4cG9ydHMgPSAnPGRpdiBjbGFzcz0iZ3dkX3VwZGF0ZV9zaGVuZ2ppIGd3ZC1jbG9zZS1tb2R1bGUiPlxuICA8ZGl2IGNsYXNzPSJzaGVuZ2ppX2NvbnRlbnQiPlxuICAgIDxhIGhyZWYgPSJ7e2Jyb3dzZXIudXJsfX0iIHRhcmdldD0iX2JsYW5rIiBjbGFzcz0ie3tsaW5rQ2xhc3N9fSI+5Y2H57qnPC9hPlxuICA8L2Rpdj5cbiAgPGRpdiBjbGFzcz0iZ3dkX3VwZGF0ZV9kZXRhaWwiPlxuICAgIDxwIGNsYXNzPSJwYWxiX2luX3R4dCI+5Lqy77yM5L2g5Lmw5Yiw5pyA5L2O5Lu35LqG5ZCX77yfPC9wPlxuICAgIDxpbWcgc3JjPSJ7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvZnJlZWRvd25iYWNrZ3JvdW5kZ3JhcGgucG5nIj5cbiAgICA8ZGl2IGNsYXNzPSJwYXJiX2luX3R4dCI+XG4gICAgICA8cCBjbGFzcz0iY29sb3JyZWQiPueri+WNs+WNh+e6p+iHs+i0reeJqeWFmjxzcGFuIGNsYXNzPSJiaWciPiZuYnNwOzUuMi45Mjwvc3Bhbj48L3A+XG4gICAgICA8cD7oh6rliqjmkJzntKLllYblk4E8c3BhbiBjbGFzcz0iYmlnY29sb3IiPiZuYnNwO+acgOS9juS7tzwvc3Bhbj48L3A+XG4gICAgICA8cD4xODDlpKk8c3BhbiBjbGFzcz0iYmlnY29sb3IiPiZuYnNwO+S7t+agvOi1sOWKv+Wbvjwvc3Bhbj48L3A+XG4gICAgICA8cD7mlK/mjIHlkITlpKfkuLvmtYHmtY/op4jlmag8L3A+XG4gICAgPC9kaXY+XG4gICAgPGEgaWQ9Im5ld19kb3dubG9hZF9uZXdfYnV0dG9uX2JvdHRvbSIgaHJlZj0ie3ticm93c2VyLnVybH19IiB0YXJnZXQ9Il9ibGFuayIgY2xhc3M9Int7bGlua0NsYXNzfX0iPlxuICAgICAgPGltZyBzcmM9Int7c19zZXJ2ZXJ9fS9pbWFnZXMvZXh0ZW5zaW9ucy9mcmVlX2Nocm9tZS5wbmciPlxuICAgIDwvYT4gXG4gICAgPGEgaWQ9Im5ld19kb3dubG9hZF9uZXdfdHh0X2JvdHRvbSIgaHJlZj0iIiB0YXJnZXQ9Il9ibGFuayIgY2xhc3M9Int7bGlua0NsYXNzfX0iPjwvYT5cbiAgPC9kaXY+XG48L2Rpdj4nCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICc8dWw+XG4gIHt7ZWFjaCBkYXRhfX1cbiAgICA8bGk+XG4gICAgICA8YSBocmVmPSJ7eyR2YWx1ZS51cmx9fSIgdGFyZ2V0PSJfYmxhbmsiPlxuICAgICAgICA8aW1nIHNyYz0ie3skdmFsdWUuaWNvdXJsfX0iPlxuICAgICAgICA8c3BhbiBjbGFzcz0ibS1pdGVtLXNpdGVuYW1lIj57eyR2YWx1ZS5zaXRlX25hbWV9fTwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9Im0taXRlbS1wcmljZSI+wqV7eyR2YWx1ZS5wcmljZX19PC9zcGFuPlxuICAgICAgPC9hPlxuICAgIDwvbGk+XG4gIHt7L2VhY2h9fVxuPC91bD5cbjxhIGhyZWY9Int7YWxsTGlua319IiB0YXJnZXQ9Il9ibGFuayIgY2xhc3M9Im0tYWxsLWxpbmsiPlxuICDmn6XnnIvlhajpg6jvvIh7e3N0b3JlU2l6ZX1977yJXG48L2E+JwoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQllLmV4cG9ydHMgPSAnPHA+5ZWG5Z+O5q+U5Lu3PC9wPlxuPHVsPlxuICB7e2VhY2ggZGF0YX19XG4gICAgPGxpPlxuICAgICAgPGEgaHJlZj0ie3skdmFsdWUudXJsfX0iIHRhcmdldD0iX2JsYW5rIj5cbiAgICAgICAgPGltZyBzcmM9Int7JHZhbHVlLmljb3VybH19Ij5cbiAgICAgICAgPHNwYW4gY2xhc3M9Im0taXRlbS1wcmljZTIiPsKle3skdmFsdWUucHJpY2V9fTwvc3Bhbj5cbiAgICAgIDwvYT5cbiAgICA8L2xpPlxuICB7ey9lYWNofX1cbjwvdWw+XG48YSBocmVmPSJ7e2FsbExpbmt9fSIgdGFyZ2V0PSJfYmxhbmsiIGNsYXNzPSJtLWFsbC1saW5rMiI+XG4gIOafpeeci+WFqOmDqO+8iHt7c3RvcmVTaXplfX3vvIlcbjwvYT5cbjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+XG4gIC50cmVuZC1jb20tbWluaSBwe1xuICAgIGhlaWdodDogNDVweDtcbiAgICBsaW5lLWhlaWdodDogNDVweDtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgZm9udC1zaXplOiAxNHB4O1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIGNvbG9yOiAjMzMzIWltcG9ydGFudDtcbiAgfVxuICAudHJlbmQtY29tLW1pbmkge1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBmbG9hdDogcmlnaHQ7XG4gICAgd2lkdGg6IDExM3B4O1xuICB9XG4gIC50cmVuZC1jb20tbWluaSB1bCBsaSB7XG4gICAgaGVpZ2h0OiAyOHB4O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBtYXJnaW4tdG9wOiA0cHg7XG4gIH1cbiAgLnRyZW5kLWNvbS1taW5pIHVsIGxpOmZpcnN0LWNoaWxkIHtcbiAgICBtYXJnaW4tdG9wOiAwcHg7XG4gIH1cbiAgLnRyZW5kLWNvbS1taW5pIHVsIGxpOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWRmMWYxO1xuICB9XG4gIC50cmVuZC1jb20tbWluaSB1bCBsaSBpbWcge1xuICAgIGhlaWdodDogMTZweDtcbiAgICBtYXJnaW4tbGVmdDogMTFweDtcbiAgICBmbG9hdDogbGVmdDtcbiAgICBtYXJnaW4tdG9wOiA2cHg7XG4gIH1cbiAgLnRyZW5kLWNvbS1taW5pIHVsIGxpIHNwYW4ge1xuICAgIGZsb2F0OiByaWdodDtcbiAgICBtYXJnaW4tcmlnaHQ6IDlweDtcbiAgICBsaW5lLWhlaWdodDogMjhweDtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgY29sb3I6ICM5YjliOWI7XG4gIH1cbiAgLm0tYWxsLWxpbmsyIHtcbiAgICBmbG9hdDogcmlnaHQ7XG4gICAgbWFyZ2luLXJpZ2h0OiA1cHg7XG4gICAgbWFyZ2luLXRvcDogMTJweDtcbiAgICBjb2xvcjogIzVlYmVmZiFpbXBvcnRhbnQ7XG4gICAgZm9udC1zaXplOiAxMnB4O1xuICAgIGxpbmUtaGVpZ2h0OiAxMnB4O1xuICB9XG48L3N0eWxlPicKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJdmFyIGk7CgkJKGZ1bmN0aW9uKGEpIHsKCQkJInVzZSBzdHJpY3QiOwoJCQlpID0gZnVuY3Rpb24oKSB7CgkJCQkoInVsZSIgPT09IGEuc2l0ZSB8fCAieWVzbXl3aW5lIiA9PT0gYS5zaXRlKSAmJiAoQXJyYXkucHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlmb3IgKHZhciB0ID0gW10sIG4gPSAwOyBuIDwgdGhpcy5sZW5ndGg7IG4rKykgZSh0aGlzW25dKSAmJiB0LnB1c2godGhpc1tuXSk7CgkJCQkJcmV0dXJuIHQKCQkJCX0pLCAid3N0eCIgPT09IGEuc2l0ZSAmJiAoQXJyYXkucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbihlLCB0KSB7CgkJCQkJdmFyIG47CgkJCQkJaWYgKG51bGwgPT0gdGhpcykgdGhyb3cgbmV3IFR5cGVFcnJvcignInRoaXMiIGlzIG51bGwgb3Igbm90IGRlZmluZWQnKTsKCQkJCQl2YXIgaSA9IE9iamVjdCh0aGlzKSwKCQkJCQkJYSA9IGkubGVuZ3RoID4+PiAwOwoJCQkJCWlmICgwID09PSBhKSByZXR1cm4gLTE7CgkJCQkJdmFyIG8gPSArdCB8fCAwOwoJCQkJCWlmIChNYXRoLmFicyhvKSA9PT0gMSAvIDAgJiYgKG8gPSAwKSwgbyA+PSBhKSByZXR1cm4gLTE7CgkJCQkJZm9yIChuID0gTWF0aC5tYXgobyA+PSAwID8gbyA6IGEgLSBNYXRoLmFicyhvKSwgMCk7IGEgPiBuOykgewoJCQkJCQlpZiAobiBpbiBpICYmIGlbbl0gPT09IGUpIHJldHVybiBuOwoJCQkJCQluKysKCQkJCQl9CgkJCQkJcmV0dXJuIC0xCgkJCQl9KQoJCQl9LmNhbGwodCwgbiwgdCwgZSksICEodm9pZCAwICE9PSBpICYmIChlLmV4cG9ydHMgPSBpKSkKCQl9KS5jYWxsKHQsIG4oMSkpCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCShmdW5jdGlvbih0KSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7CgkJCQkia2VlZGUiID09PSB0LnNpdGUgJiYgImZ1bmN0aW9uIGZvckVhY2goKSB7IFtuYXRpdmUgY29kZV0gfSIgIT09IEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLnRvU3RyaW5nKCkgJiYgKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJCXZhciBuLCBpOwoJCQkJCWlmIChudWxsID09IHRoaXMpIHRocm93IG5ldyBUeXBlRXJyb3IoIiB0aGlzIGlzIG51bGwgb3Igbm90IGRlZmluZWQiKTsKCQkJCQl2YXIgYSA9IE9iamVjdCh0aGlzKSwKCQkJCQkJbyA9IGEubGVuZ3RoID4+PiAwOwoJCQkJCWlmICgiZnVuY3Rpb24iICE9IHR5cGVvZiBlKSB0aHJvdyBuZXcgVHlwZUVycm9yKGUgKyAiIGlzIG5vdCBhIGZ1bmN0aW9uIik7CgkJCQkJZm9yIChhcmd1bWVudHMubGVuZ3RoID4gMSAmJiAobiA9IHQpLCBpID0gMDsgbyA+IGk7KSB7CgkJCQkJCXZhciByOwoJCQkJCQlpIGluIGEgJiYgKHIgPSBhW2ldLCBlLmNhbGwobiwgciwgaSwgYSkpLCBpKysKCQkJCQl9CgkJCQl9KQoJCQl9CgkJfSkuY2FsbCh0LCBuKDEpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQl2YXIgaTsKCQkoZnVuY3Rpb24oYSkgewoJCQkidXNlIHN0cmljdCI7CgkJCWkgPSBmdW5jdGlvbigpIHsKCQkJCXZhciBlID0gbig2KTsKCQkJCSIzNjBidXkiID09PSBhLnNpdGUgJiYgZSgiI3NlcnZpY2UiKS5jc3MoewoJCQkJCSJ6LWluZGV4IjogMAoJCQkJfSksICJuZXdlZ2ciID09PSBhLnNpdGUgJiYgKGUoIi5nb29kc19pbmZvIikuY3NzKHsKCQkJCQlvdmVyZmxvdzogInZpc2libGUiCgkJCQl9KSwgZSgiLmdvb2RzX2luZm8iKS5jc3MoewoJCQkJCW92ZXJmbG93OiAiaW5pdGlhbCIKCQkJCX0pLCBlKCIuZ29vZHNfb3RoZXJpbmZvIikuY3NzKHsKCQkJCQl6SW5kZXg6IDkKCQkJCX0pKSwgInlvdWdvdSIgPT09IGEuc2l0ZSAmJiAoZSgiLmdvb2RzQ29uIikuY3NzKHsKCQkJCQl6SW5kZXg6IDMKCQkJCX0pLCBlKCIuY2VuX3Njcm9sbCIpLmNzcyh7CgkJCQkJInotaW5kZXgiOiAwCgkJCQl9KSksICJ2YW5jbCIgPT09IGEuc2l0ZSAmJiBlKCIuZGFucGluUmlnaHQiKS5jc3MoewoJCQkJCW92ZXJmbG93OiAidmlzaWJsZSIKCQkJCX0pLCAiZ29tZSIgPT09IGEuc2l0ZSAmJiBlKCIuaGlnaGNoYXJ0cy10b29sdGlwIHNwYW4iKS5jc3MoewoJCQkJCSJmbG9hdCI6ICJub25lIgoJCQkJfSksICJzZWNvbyIgPT09IGEuc2l0ZSAmJiAoZSgiLiIgKyBhLmV4dE5hbWUgKyAiLW5hdiAuY29udGVudHMiKS5jc3MoewoJCQkJCXdpZHRoOiAiYXV0byIsCgkJCQkJImJveC1zaGFkb3ciOiAibm9uZSIsCgkJCQkJYmFja2dyb3VuZDogInJnYigyNDcsMjQ3LDI0NykiCgkJCQl9KSwgZSgiLiIgKyBhLmV4dE5hbWUgKyAiLW5hdiAuY29udGVudHMiKS5jc3MoewoJCQkJCXdpZHRoOiAiaW5pdGlhbCIKCQkJCX0pKSwgInhpdSIgPT09IGEuc2l0ZSAmJiBlKCIjcmlnaHRfaW5mbyIpLmNzcyh7CgkJCQkJd2lkdGg6ICJhdXRvIgoJCQkJfSkKCQkJfS5jYWxsKHQsIG4sIHQsIGUpLCAhKHZvaWQgMCAhPT0gaSAmJiAoZS5leHBvcnRzID0gaSkpCgkJfSkuY2FsbCh0LCBuKDEpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCwgaSkgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBhID0gbigxNiksCgkJCQlvID0gZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSAnPGEgaWQ9InJldmlld19idG4iICBocmVmPSJqYXZhc2NyaXB0OiI+PHNwYW4gY2xhc3M9InJldmlld19pY29uIG5ld2ItYmciPjwvc3Bhbj48c3BhbiBjbGFzcz0icmV2aWV3X3RleHQiPuWPo+eikTwvc3Bhbj48L2E+JzsKCQkJCQl0KCIjIiArIGkuZXh0TmFtZSArICItbWFpbi1jb250ZW50cyIpLmFwcGVuZChhLmNvbXBpbGUoZSkoe30pKQoJCQkJfSwKCQkJCXIgPSBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IHZvaWQgMCwKCQkJCQkJbiA9IHZvaWQgMDsKCQkJCQl0KCIjcmV2aWV3X2J0biIpLm9uKCJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7CgkJCQkJCWlmICghZSkgewoJCQkJCQkJdmFyIG4gPSB0KCIucmV2aWV3LWdvb2QiKS5hdHRyKCJkYXRhLWQiKTsKCQkJCQkJCXQoIi4iICsgbikuc2hvdygpCgkJCQkJCX0KCQkJCQkJdmFyIGkgPSB0KHRoaXMpLm9mZnNldCgpLmxlZnQ7CgkJCQkJCXQoIiNyZXZpZXdfZGV0YWlsIikuY3NzKCJsZWZ0IiwgaSArICJweCIpLCB0KCIjcmV2aWV3X2RldGFpbCIpLnNob3coKSwgdCh0aGlzKS5hZGRDbGFzcygibXNlbnRlciIpLCB0KHdpbmRvdykud2lkdGgoKSAtICh0KCIjcmV2aWV3X2RldGFpbCIpLm9mZnNldCgpLmxlZnQgKyB0KCIjcmV2aWV3X2RldGFpbCIpLm91dGVyV2lkdGgoKSArIDIpIDwgMCAmJiB0KCIjcmV2aWV3X2RldGFpbCIpLmNzcygicmlnaHQiLCAiMHB4IikuY3NzKCJsZWZ0IiwgImF1dG8iKQoJCQkJCX0pLCB0KCIjcmV2aWV3X2J0biIpLm9uKCJtb3VzZWxlYXZlIiwgZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gdGhpczsKCQkJCQkJbiA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJCQl0KCIjcmV2aWV3X2RldGFpbCIpLmhpZGUoKSwgdChlKS5yZW1vdmVDbGFzcygibXNlbnRlciIpCgkJCQkJCX0sIDIwMCkKCQkJCQl9KSwgdCgiI3Jldmlld19kZXRhaWwiKS5vbigibW91c2VlbnRlciIsIGZ1bmN0aW9uKCkgewoJCQkJCQljbGVhclRpbWVvdXQobikKCQkJCQl9KSwgdCgiI3Jldmlld19kZXRhaWwiKS5vbigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uKCkgewoJCQkJCQl0KCIjcmV2aWV3X2RldGFpbCIpLmhpZGUoKSwgdCgiI3Jldmlld19idG4iKS5yZW1vdmVDbGFzcygibXNlbnRlciIpCgkJCQkJfSksIHQoIiNyZXZpZXdfZGV0YWlsIC5yZXZpZXctdGFiIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCWUgPSAhMDsKCQkJCQkJdmFyIG4gPSB0KHRoaXMpLmF0dHIoImRhdGEtZCIpOwoJCQkJCQl0KCIjcmV2aWV3X2RldGFpbCAucmV2aWV3LXRhYiIpLnJlbW92ZUNsYXNzKCJzZWxlY3RlZCIpLCB0KHRoaXMpLmFkZENsYXNzKCJzZWxlY3RlZCIpLCB0KCIucmV2aWV3LXJpZ2h0PmRpdiIpLmhpZGUoKSwgdCgiLiIgKyBuKS5zaG93KCkKCQkJCQl9KQoJCQkJfSwKCQkJCXMgPSBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQgPSBpLm5vd19kcF9pZDsKCQkJCQlpZiAoZS5iYWQgJiYgZS5iYWQubGVuZ3RoID4gMCkKCQkJCQkJZm9yICh2YXIgbiA9IDA7IG4gPCBlLmJhZC5sZW5ndGg7IG4rKykgewoJCQkJCQkJdmFyIGEgPSBpLmNfc2VydmVyICsgIi9jcmM2NC9kcCIgKyB0ICsgIi9yZXZpZXdzLz9yd29yZD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGUuYmFkW25dLmxhYmVsKSArICImZXh0PTEmcnR5cGU9MiI7CgkJCQkJCQllLmJhZFtuXS51cmwgPSBhCgkJCQkJCX0KCQkJCQlpZiAoZS5nb29kICYmIGUuZ29vZC5sZW5ndGggPiAwKQoJCQkJCQlmb3IgKHZhciBuID0gMDsgbiA8IGUuZ29vZC5sZW5ndGg7IG4rKykgewoJCQkJCQkJdmFyIGEgPSBpLmNfc2VydmVyICsgIi9jcmM2NC9kcCIgKyB0ICsgIi9yZXZpZXdzLz9yd29yZD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGUuZ29vZFtuXS5sYWJlbCkgKyAiJmV4dD0xJnJ0eXBlPTEiOwoJCQkJCQkJZS5nb29kW25dLnVybCA9IGEKCQkJCQkJfQoJCQkJCXJldHVybiBlCgkJCQl9LAoJCQkJbCA9IGZ1bmN0aW9uKGUpIHsKCQkJCQllLmdvb2Rib3ggPSAicmV2aWV3LXItZ29vZCIsIGUuYmFkYm94ID0gInJldmlldy1yLWJhZCIsIGUuZ29vZCB8fCAoZS5nb29kYm94ID0gInJldmlldy1yLW5vaW5mbyIpLCBlLmJhZCB8fCAoZS5iYWRib3ggPSAicmV2aWV3LXItbm9pbmZvIik7CgkJCQkJdmFyIG8gPSBuKDE1MSk7CgkJCQkJZSA9IHMoZSk7CgkJCQkJdmFyIGwgPSBhLmNvbXBpbGUobykoewoJCQkJCQlkYXRhOiBlLAoJCQkJCQlzX3NlcnZlcjogaS5zX3NlcnZlcgoJCQkJCX0pOwoJCQkJCXQoIiMiICsgaS5leHROYW1lICsgIi1tYWluIikuYXBwZW5kKGwpLCByKCkKCQkJCX07CgkJCWUuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oZSkgewoJCQkJIWUgfHwgIWUucmV2aWV3cyB8fCBlLnJldmlld3MgaW5zdGFuY2VvZiBBcnJheSB8fCAobygpLCBsKGUucmV2aWV3cykpCgkJCX0KCQl9KS5jYWxsKHQsIG4oNiksIG4oMSkpCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICc8ZGl2IGlkPSJyZXZpZXdfZGV0YWlsIiBjbGFzcz0icmV2aWV3LWJveCI+XG4gIDxkaXYgY2xhc3M9InJldmlldy1sZWZ0Ij5cbiAgICA8ZGl2IGNsYXNzPSJyZXZpZXctdGFiIHJldmlldy1nb29kIHNlbGVjdGVkIiBkYXRhLWQ9Int7ZGF0YS5nb29kYm94fX0iPlxuICAgICAgPGVtIGNsYXNzPSJuZXdiLWJnIj48L2VtPlxuICAgICAgPHNwYW4+5aW96K+EPC9zcGFuPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9InJldmlldy10YWIgcmV2aWV3LWJhZCIgZGF0YS1kPSJ7e2RhdGEuYmFkYm94fX0iPlxuICAgICAgPGVtIGNsYXNzPSJuZXdiLWJnIj48L2VtPlxuICAgICAgPHNwYW4+5beu6K+EPC9zcGFuPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbiAgPGRpdiBjbGFzcz0icmV2aWV3LXJpZ2h0Ij5cbiAgICA8ZGl2IGNsYXNzPSJyZXZpZXctci1nb29kIj5cbiAgICAgIHt7ZWFjaCBkYXRhLmdvb2R9fVxuICAgICAgICA8YSBocmVmPSJ7eyR2YWx1ZS51cmx9fSIgdGFyZ2V0PSJfYmxhbmsiPnt7JHZhbHVlLmxhYmVsfX0oe3skdmFsdWUubnVtfX0pPC9hPlxuICAgICAge3svZWFjaH19XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz0icmV2aWV3LXItYmFkIj5cbiAgICAgIHt7ZWFjaCBkYXRhLmJhZH19XG4gICAgICAgIDxhIGhyZWY9Int7JHZhbHVlLnVybH19IiB0YXJnZXQ9Il9ibGFuayI+e3skdmFsdWUubGFiZWx9fSh7eyR2YWx1ZS5udW19fSk8L2E+XG4gICAgICB7ey9lYWNofX1cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPSJyZXZpZXctci1ub2luZm8iPlxuICAgICAgPGVtIGNsYXNzPSJyZXZpZXctYmciPjwvZW0+XG4gICAgICA8c3Bhbj7mmoLml6Dor4Torro8L3NwYW4+XG4gICAgPC9kaXY+XG4gIDwvZGl2PiBcbiAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj5cbiAgICAucmV2aWV3LWJnIHtcbiAgICAgIGJhY2tncm91bmQ6IHVybChcJ3t7c19zZXJ2ZXJ9fS9pbWFnZXMvZXh0ZW5zaW9ucy94YnQvcmV2aWV3LWJnLnBuZ1wnKSBuby1yZXBlYXQ7XG4gICAgfVxuICAgICNyZXZpZXdfYnRuIHtcbiAgICAgIHdpZHRoOiA1OXB4O1xuICAgIH1cbiAgICAjcmV2aWV3X2J0biAucmV2aWV3X2ljb257XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIGhlaWdodDogMjJweDtcbiAgICAgIHdpZHRoOiAyMnB4O1xuICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE3MXB4IC0xOXB4O1xuICAgICAgbWFyZ2luLWxlZnQ6IDBweDtcbiAgICAgIG1hcmdpbi10b3A6IDZweDtcbiAgICAgIG1hcmdpbi1yaWdodDogNnB4O1xuICAgIH1cbiAgICAjcmV2aWV3X2J0bi5tc2VudGVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gICAgICB6LWluZGV4OiA5OTk5OTk5OTk5OTk5OTk5O1xuICAgICAgaGVpZ2h0OiAzOHB4O1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIH1cbiAgICAjcmV2aWV3X2J0biAucmV2aWV3X3RleHQge1xuICAgICAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcbiAgICAgIGNvbG9yOiAjNDk0ZDUwO1xuICAgICAgbGluZS1oZWlnaHQ6IDM1cHg7XG4gICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICB9XG4gICAgI3Jldmlld19kZXRhaWwge1xuICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgdG9wOiAzNXB4O1xuICAgICAgd2lkdGg6IDU3MHB4O1xuICAgICAgaGVpZ2h0OiA4NXB4O1xuICAgICAgei1pbmRleDogOTk5OTk5OTk7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgI2U2ZTZlNjtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgfVxuICAgIC5yZXZpZXctbGVmdCB7XG4gICAgICBmbG9hdDogbGVmdCFpbXBvcnRhbnQ7XG4gICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICB3aWR0aDogODBweDtcbiAgICB9XG4gICAgLnJldmlldy1yaWdodCB7XG4gICAgICBmbG9hdDogbGVmdCFpbXBvcnRhbnQ7ICBcbiAgICAgIHdpZHRoOiA0OTBweDtcbiAgICAgIGhlaWdodDogODVweDtcbiAgICB9XG4gICAgLnJldmlldy10YWIge1xuICAgICAgaGVpZ2h0OiA0MnB4O1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjJmMmYyO1xuICAgICAgbGluZS1oZWlnaHQ6IDQycHg7XG4gICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICBjb2xvcjogIzMzMztcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNlNmU2ZTY7XG4gICAgfVxuICAgIC5yZXZpZXctdGFiIGVtIHtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgaGVpZ2h0OiAxOHB4O1xuICAgICAgd2lkdGg6IDE4cHg7XG4gICAgICBtYXJnaW46IDExcHggOHB4IDAgMTJweDtcbiAgICB9XG4gICAgLnJldmlldy10YWIgc3BhbiB7XG4gICAgICBjb2xvcjogIzI5MmIyYztcbiAgICB9XG4gICAgLnJldmlldy1nb29kIGVtIHtcbiAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IC02NnB4IC0xNzBweDtcbiAgICB9XG4gICAgLnJldmlldy1iYWQgZW0ge1xuICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTg4cHggLTE3MHB4O1xuICAgIH1cbiAgICAucmV2aWV3LXRhYi5zZWxlY3RlZCB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgICAgYm9yZGVyLXJpZ2h0OiBub25lO1xuICAgIH1cbiAgICAucmV2aWV3LWdvb2Qge1xuICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlNmU2ZTY7XG4gICAgfVxuICAgIC5yZXZpZXctci1iYWQge1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG4gICAgLnJldmlldy1yaWdodCAucmV2aWV3LXItYmFkLCAucmV2aWV3LXJpZ2h0IC5yZXZpZXctci1nb29kIHtcbiAgICAgIHBhZGRpbmc6IDJweCAycHggMCAxMHB4O1xuICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgIGhlaWdodDogODBweDtcbiAgICB9XG4gICAgLnJldmlldy1yLWJhZCBhLCAucmV2aWV3LXItZ29vZCBhIHtcbiAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgIGNvbG9yOiAjMzMzO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2Y0ZjRmNDtcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIG1hcmdpbi1yaWdodDogNnB4O1xuICAgICAgbWFyZ2luLXRvcDogMTJweDtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgaGVpZ2h0OiAyMnB4O1xuICAgICAgbGluZS1oZWlnaHQ6IDIycHg7XG4gICAgICBsZXR0ZXItc3BhY2luZzogMXB4O1xuICAgICAgd2lkdGg6IGF1dG87XG4gICAgICBwYWRkaW5nOiAwIDZweDtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmUhaW1wb3J0YW50O1xuICAgIH1cbiAgICAucmV2aWV3LXItZ29vZCBhOmhvdmVyIHtcbiAgICAgIGNvbG9yOiAjZmZmO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2VmODI4MztcbiAgICB9XG4gICAgLnJldmlldy1yLWJhZCBhOmhvdmVyIHtcbiAgICAgIGNvbG9yOiAjZmZmO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2VmYzQzNDtcbiAgICB9XG4gICAgLnJldmlldy1yLW5vaW5mbyB7XG4gICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICB3aWR0aDogMTMwcHg7XG4gICAgICBmbG9hdDogbGVmdCFpbXBvcnRhbnQ7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgbWFyZ2luLWxlZnQ6IDE2OXB4O1xuICAgIH1cbiAgICAucmV2aWV3LXItbm9pbmZvIGVtIHtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgd2lkdGg6IDM5cHg7XG4gICAgICBoZWlnaHQ6IDQzcHg7XG4gICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNTNweCAtMTE3cHg7XG4gICAgICBtYXJnaW4tdG9wOiAyM3B4O1xuICAgICAgbWFyZ2luLWxlZnQ6IDIwcHg7XG4gICAgfVxuICAgIC5yZXZpZXctci1ub2luZm8gc3BhbiB7XG4gICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICBjb2xvcjogI2IyYjJiMjtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gICAgICBtYXJnaW4tdG9wOiAzNXB4O1xuICAgICAgbWFyZ2luLWxlZnQ6IDNweDtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICB9XG4gIDwvc3R5bGU+XG48L2Rpdj4nCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCShmdW5jdGlvbih0LCBpKSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJdmFyIGEsIG8gPSBuKDE2KSwKCQkJCXIgPSBuKDkpLAoJCQkJcyA9IG4oNDApLAoJCQkJbCA9IG4oMjYpLAoJCQkJYyA9IG4oMTMpLAoJCQkJZCA9IHt9OwoJCQlkLnNldHRpbWUgPSAxNTA7CgkJCXZhciBwID0gewoJCQkJCWFtYXpvbjogWyIjcHJpY2VibG9ja19kZWFscHJpY2Ugc3BhbiIsICIjcHJpY2VibG9ja19vdXJwcmljZSBzcGFuIC5idXlpbmdQcmljZSIsICIjcHJpY2VibG9ja19kZWFscHJpY2UiLCAiI3ByaWNlYmxvY2tfc2FsZXByaWNlIiwgIiNwcmljZWJsb2NrX291cnByaWNlIiwgIiNwcmljZV9mZWF0dXJlX2RpdiAuYS1jb2xvci1wcmljZSJdCgkJCQl9LAoJCQkJaCA9IHsKCQkJCQlhbWF6b246IFsiI3ByaWNlQmFkZ2luZ19mZWF0dXJlX2RpdiAuYS1jb2xvci1zZWNvbmRhcnkiLCAiI291cnByaWNlX3NoaXBwaW5nbWVzc2FnZSAuYS1jb2xvci1zZWNvbmRhcnkiXQoJCQkJfSwKCQkJCXUgPSB7CgkJCQkJYW1hem9uOiBbCgkJCQkJCVsiI3JjeC1zdWJzY3JpYmUtc3VibWl0LWJ1dHRvbiIsICJhZnRlciIsICJodC1zcGVjaWFsLWRvbSJdLAoJCQkJCQlbJy5hLWJ1dHRvbi1zdGFjayBzcGFuW2lkXj0ic3VibWl0Il0nLCAiYWZ0ZXIiLCAiaHQtc3BlY2lhbC1kb20iXSwKCQkJCQkJWyIjdG9nZ2xlQnV5Qm94ICNvbmV0aW1lPmRpdi5hLXNlY3Rpb24uYS1zcGFjaW5nLW5vbmUuYS1wYWRkaW5nLW5vbmUiLCAiYXBwZW5kIiwgImh0LXNwZWNpYWwtZG9tIl0sCgkJCQkJCVsiLmEtc3BhY2luZy1zbWFsbC5hLWJ1dHRvbi1wcmltYXJ5IiwgImFmdGVyIiwgImh0LXNwZWNpYWwtZG9tIl0sCgkJCQkJCVsiI3BhcnRpYWxTdGF0ZUJ1eWJveCAuYS1idXR0b24tc3RhY2siLCAiYWZ0ZXIiXSwKCQkJCQkJWyIjT25lQ2xpY2tCb3giLCAiYmVmb3JlIl0sCgkJCQkJCVsiI2dvbGRib3hCdXlCb3giLCAiYXBwZW5kIl0KCQkJCQldLAoJCQkJCSI2cG0iOiBbCgkJCQkJCVsiI3RyYW5zQnRucyIsICJhZnRlciJdLAoJCQkJCQlbIi5fMzB3dFUgLl8zN1k2RCIsICJhZnRlciJdCgkJCQkJXQoJCQkJfSwKCQkJCW0gPSBmdW5jdGlvbihlKSB7CgkJCQkJcmV0dXJuIGUgPyBlID0gZS5pbmRleE9mKCI/IikgPiAtMSA/IGUgKyAiJnBfcj1nb3V3dWRhbmcmcF9rPXBsdWdfIiArIHQuc3R5bGUgKyAiJm91dGVyX3BpZD04NTA3IiA6IGUgKyAiP3Bfcj1nb3V3dWRhbmcmcF9rPXBsdWdfIiArIHQuc3R5bGUgKyAiJm91dGVyX3BpZD04NTA3IiA6IGUKCQkJCX0sCgkJCQlmID0gZnVuY3Rpb24oKSB7CgkJCQkJZm9yICh2YXIgZSA9IDAsIHQgPSAwLCBuID0gMDsgbiA8IHAuYW1hem9uLmxlbmd0aDsgbisrKSB7CgkJCQkJCXZhciBhID0gcC5hbWF6b25bbl07CgkJCQkJCWlmIChpKGEpLmxlbmd0aCA+IDAgJiYgaShhKS5pcygiOnZpc2libGUiKSkgewoJCQkJCQkJZSA9IGkoYSkudGV4dCgpLnJlcGxhY2UoL1vvv6UkwqVccyxdKy9nLCAiIiksIGUuaW5kZXhPZigiLSIpID4gLTEgJiYgKGUgPSBlLnNwbGl0KCItIilbMF0pOwoJCQkJCQkJYnJlYWsKCQkJCQkJfQoJCQkJCX0KCQkJCQlmb3IgKHZhciBuID0gMDsgbiA8IGguYW1hem9uLmxlbmd0aDsgbisrKSB7CgkJCQkJCXZhciBhID0gaC5hbWF6b25bbl07CgkJCQkJCWlmIChpKGEpLmxlbmd0aCA+IDAgJiYgaShhKS5pcygiOnZpc2libGUiKSkgewoJCQkJCQkJdCA9IGkoYSkudGV4dCgpLm1hdGNoKC9bMC05Ll0rLykgJiYgaShhKS50ZXh0KCkubWF0Y2goL1swLTkuXSsvKVsxXTsKCQkJCQkJCWJyZWFrCgkJCQkJCX0KCQkJCQl9CgkJCQkJcmV0dXJuIHQgfHwgKHQgPSAwKSwgZSA9IE51bWJlcihlKSArIE51bWJlcih0KQoJCQkJfSwKCQkJCWcgPSBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IHQuZHAsCgkJCQkJCW4gPSBlLm9sZFByaWNlOwoJCQkJCSJhbWF6b24iID09PSB0LnNpdGUgJiYgKG4gPSBmKCkpLCBuIHx8IChuID0gZS5vbGRQcmljZSksIGUudXJsIHx8IChlLnVybCA9IGxvY2F0aW9uLmhyZWYpLCBlLnNrdSB8fCAoZS5za3UgPSBlLnVybC5tYXRjaCgvKD86ZHB8cHJvZHVjdClcLyhbMC05YS16QS1aXSspLykgJiYgZS51cmwubWF0Y2goLyg/OmRwfHByb2R1Y3QpXC8oWzAtOWEtekEtWl0rKS8pWzFdKTsKCQkJCQl2YXIgaSA9ICgxMDAgKiBOdW1iZXIobikpLnRvRml4ZWQoMCksCgkJCQkJCWEgPSB0LnNlcnZlciArICIvYXBpL2hhaXRhbz9wcmljZT0iICsgaSArICImdXJsX2NyYz0iICsgZS5za3UgKyAiJnVybD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGUudXJsKTsKCQkJCQlkLnJlcXVlc3RVcmwgPSBhLCBkLmp1bXBpbmZvID0gInVybF9jcmM9IiArIGUuc2t1ICsgIiZ1cmw9IiArIGVuY29kZVVSSUNvbXBvbmVudChlLnVybCksIGQuZnN0VGltZSA9IChuZXcgRGF0ZSkuZ2V0VGltZSgpLCByLmdldChhKS5kb25lKGZ1bmN0aW9uKGUpIHsKCQkJCQkJaWYgKGUgJiYgMSA9PT0gZS5kYXRhLnByb2R1Y3Rfc3RhdHVzKSB7CgkJCQkJCQl2YXIgdCA9IGUuZGF0YS5wcm9kdWN0X2RldGFpbDsKCQkJCQkJCXQudXJsID0gbShlLmRhdGEucHJvZHVjdF91cmwpLCB2KHQpCgkJCQkJCX0gZWxzZSBpZiAoIWUgfHwgMiAhPT0gZS5kYXRhLnByb2R1Y3Rfc3RhdHVzICYmIDMgIT09IGUuZGF0YS5wcm9kdWN0X3N0YXR1cykgewoJCQkJCQkJdmFyIGkgPSAiIjsKCQkJCQkJCTQgPT09IGUuZGF0YS5wcm9kdWN0X3N0YXR1cyA/IGkgPSAi5oqx5q2J77yM55Sx5LqO55u45YWz5rOV5b6L5oiW6L2s6L+Q56aB6L+Q55qE5Y6f5Zug77yM6K+l5ZWG5ZOB5peg5rOV5LiA6ZSu5rW35reY44CCIiA6IDUgPT09IGUuZGF0YS5wcm9kdWN0X3N0YXR1cyAmJiAoaSA9ICLmirHmrYnvvIzor6XllYblk4Hlt7LkuIvmnrbvvIzml6Dms5XkuIDplK7mtbfmt5jjgIIiKTsKCQkJCQkJCXZhciB0ID0gewoJCQkJCQkJCWdvb2RzX3ByaWNlOiBzKG4udG9GaXhlZCgyKSksCgkJCQkJCQkJdXJsOiAiamF2YXNjcmlwdDp2b2lkKCk7IiwKCQkJCQkJCQl0bGU6IGksCgkJCQkJCQkJbm9pbmZvOiAhMAoJCQkJCQkJfTsKCQkJCQkJCXYodCkKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXZhciB0ID0gdm9pZCAwOwoJCQkJCQkJZS5kYXRhLnByb2R1Y3RfZGV0YWlsX2VzdGltYXRlID8gKHQgPSBlLmRhdGEucHJvZHVjdF9kZXRhaWxfZXN0aW1hdGUsIHQudXJsID0gYigpKSA6IHQgPSB7CgkJCQkJCQkJZ29vZHNfcHJpY2U6IHMobi50b0ZpeGVkKDIpKSwKCQkJCQkJCQl1cmw6ICJqYXZhc2NyaXB0OnZvaWQoKTsiLAoJCQkJCQkJCXRsZTogIuaKseatie+8jOivpeWVhuWTgeaaguaXtuaXoOazleS4gOmUrua1t+a3mCIsCgkJCQkJCQkJbm9pbmZvOiAhMAoJCQkJCQkJfSwgdih0KQoJCQkJCQl9CgkJCQkJfSkKCQkJCX0sCgkJCQlfID0gZnVuY3Rpb24oZSkgewoJCQkJCXJldHVybiBlLmdvb2RzX29yaWdpbmFsX3ByaWNlID0gTnVtYmVyKChlLmdvb2RzX29yaWdpbmFsX3ByaWNlIC8gMTAwKS50b0ZpeGVkKDIpKSwgZS5nb29kc19wcmljZSA9IE51bWJlcigoZS5nb29kc19wcmljZSAvIDEwMCkudG9GaXhlZCgyKSksIGUub2ZmaWNpYWxfb3JpZ2luYWxfcG9zdGFnZSA9IE51bWJlcigoZS5vZmZpY2lhbF9vcmlnaW5hbF9wb3N0YWdlIC8gMTAwKS50b0ZpeGVkKDIpKSwgZS5vZmZpY2lhbF9wb3N0YWdlID0gTnVtYmVyKChlLm9mZmljaWFsX3Bvc3RhZ2UgLyAxMDApLnRvRml4ZWQoMikpLCBlLnhtX29mZmljaWFsID0gZS5vZmZpY2lhbF9vcmlnaW5hbF9wb3N0YWdlIC0gZS5vZmZpY2lhbF9wb3N0YWdlLCBlLmludGVybmF0aW9uYWxfb3JpZ2luYWxfcG9zdGFnZSA9IE51bWJlcigoZS5pbnRlcm5hdGlvbmFsX29yaWdpbmFsX3Bvc3RhZ2UgLyAxMDApLnRvRml4ZWQoMikpLCBlLmludGVybmF0aW9uYWxfcG9zdGFnZSA9IE51bWJlcigoZS5pbnRlcm5hdGlvbmFsX3Bvc3RhZ2UgLyAxMDApLnRvRml4ZWQoMikpLCBlLnhtX2ludGVybmF0aW9uYWwgPSBlLmludGVybmF0aW9uYWxfb3JpZ2luYWxfcG9zdGFnZSAtIGUuaW50ZXJuYXRpb25hbF9wb3N0YWdlLCBlLnRheF9vcmlnaW5hbF9mZWUgPSBOdW1iZXIoKGUudGF4X29yaWdpbmFsX2ZlZSAvIDEwMCkudG9GaXhlZCgyKSksIGUudGF4X2ZlZSA9IE51bWJlcigoZS50YXhfZmVlIC8gMTAwKS50b0ZpeGVkKDIpKSwgZS54bV9mZWUgPSBlLnRheF9vcmlnaW5hbF9mZWUgLSBlLnRheF9mZWUsIGUucHVyZVByaWNlID0gZS5nb29kc19wcmljZSArIGUub2ZmaWNpYWxfcG9zdGFnZSArIGUuaW50ZXJuYXRpb25hbF9wb3N0YWdlICsgZS50YXhfZmVlLCBlLnB1cmVQcmljZSA9IGUucHVyZVByaWNlLnRvRml4ZWQoMiksIGUuZ29vZHNfcHJpY2UgPSBlLmdvb2RzX3ByaWNlLnRvRml4ZWQoMiksIGUKCQkJCX0sCgkJCQl4ID0gZnVuY3Rpb24oKSB7CgkJCQkJaSgiI3lpamlhbmhhaXRhbyAueWpodC1oZWFkIikub24oIm1vdXNlZW50ZXIiLCBmdW5jdGlvbigpIHsKCQkJCQkJbCgidHJhY2s6eWpodDpkZXRhaWwiKSwgYy5sb2coInRyYWNrOnlqaHQ6ZGV0YWlsIiksIGQuc2hvd2RldGFpbCA9ICEwLCBpKCIjeWlqaWFuaGFpdGFvIC55amh0LWRldGFpbCIpLnNob3coKQoJCQkJCX0pLCBpKCIjeWlqaWFuaGFpdGFvIikub24oIm1vdXNlbGVhdmUiLCBmdW5jdGlvbigpIHsKCQkJCQkJaSgiI3lpamlhbmhhaXRhbyAueWpodC1kZXRhaWwiKS5oaWRlKCkKCQkJCQl9KSwgaSgiI3lpamlhbmhhaXRhbyAueWpodC1oZWFkIC55amh0LXRpdGxlIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gaSh0aGlzKS5hdHRyKCJocmVmIik7CgkJCQkJCWUgJiYgZS5pbmRleE9mKCJoYWl0YW9taWQiKSA+IC0xIHx8IGUgJiYgZS5pbmRleE9mKCJnb3V3dWRhbmciKSA+IC0xICYmIChsKCJjbGljazp5amh0OnRpdGxlIiksIGMubG9nKCJjbGljazp5amh0OnRpdGxlIikpCgkJCQkJfSkKCQkJCX0sCgkJCQl3ID0gZnVuY3Rpb24oZSkgewoJCQkJCWZvciAodmFyIGEgPSB1W3Quc2l0ZV0sIHIgPSB2b2lkIDAsIHMgPSAwOyBzIDwgYS5sZW5ndGg7IHMrKykKCQkJCQkJaWYgKGkoYVtzXVswXSkubGVuZ3RoID4gMCAmJiBpKGFbc11bMF0pLmlzKCI6dmlzaWJsZSIpKSB7CgkJCQkJCQlyID0gYVtzXTsKCQkJCQkJCWJyZWFrCgkJCQkJCX0KCQkJCQl2YXIgbCA9ICIiLAoJCQkJCQljID0gaShyWzBdKS53aWR0aCgpOwoJCQkJCXJbMl0gJiYgYyA+IDIxMCAmJiAobCA9IHJbMl0pOwoJCQkJCXZhciBkID0gbigxNTMpLAoJCQkJCQlwID0gby5jb21waWxlKGQpKHsKCQkJCQkJCWRwOiBlLAoJCQkJCQkJc3Bkb206IGwsCgkJCQkJCQl0bGU6IGUudGxlLAoJCQkJCQkJaW5zZXJ0d2lkdGg6IGMsCgkJCQkJCQlleHROYW1lOiB0LmV4dE5hbWUKCQkJCQkJfSk7CgkJCQkJImJlZm9yZSIgPT09IHJbMV0gPyBpKHJbMF0pLmJlZm9yZShwKSA6ICJhcHBlbmQiID09PSByWzFdID8gaShyWzBdKS5hcHBlbmQocCkgOiAiYWZ0ZXIiID09PSByWzFdICYmIGkoclswXSkuZXEoMCkuYWZ0ZXIocCksIHgoKQoJCQkJfSwKCQkJCXYgPSBmdW5jdGlvbihlKSB7CgkJCQkJZS5ub2luZm8gfHwgKGUgPSBfKGUpKSwgZC5kcGluZm8gPSBlLCB3KGUpOwoJCQkJCXZhciB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJ1eWJveF9mZWF0dXJlX2RpdiIpOwoJCQkJCXQgJiYgdC5hZGRFdmVudExpc3RlbmVyKCJET01TdWJ0cmVlTW9kaWZpZWQiLCBmdW5jdGlvbigpIHsKCQkJCQkJY2xlYXJUaW1lb3V0KGEpLCBhID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJCWkoIiN5aWppYW5oYWl0YW8iKS5sZW5ndGggPiAwICYmIGkoIiN5aWppYW5oYWl0YW8iKS5pcygiOnZpc2libGUiKSB8fCAoaSgiI3lpamlhbmhhaXRhbyIpLnJlbW92ZSgpLCB3KGQuZHBpbmZvKSkKCQkJCQkJfSwgMmUzKQoJCQkJCX0pCgkJCQl9LAoJCQkJYiA9IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gImh0dHA6Ly93d3cuZ3dkYW5nLmNvbS9wcm9tb3Rpb24vaGFpdGFvbWlkPyIgKyBkLmp1bXBpbmZvICsgIiZmX2Q9IiArIHQuZnJvbV9kZXZpY2U7CgkJCQkJcmV0dXJuIGUKCQkJCX07CgkJCWUuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7CgkJCQkid3d3LmFtYXpvbi5kZSIgIT09IGxvY2F0aW9uLmhvc3QgJiYgZygpCgkJCX0KCQl9KS5jYWxsKHQsIG4oMSksIG4oNikpCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICc8ZGl2IGlkPSJ5aWppYW5oYWl0YW8iIGNsYXNzPSJ5amh0LWJveCB7e3NwZG9tfX0iPlxuICAgIDxkaXYgY2xhc3M9InlqaHQtaGVhZCI+XG4gICAgICA8YSBocmVmPSJodHRwOi8vd3d3Lnt7ZXh0TmFtZX19LmNvbSIgdGFyZ2V0PSJfYmxhbmsiIGNsYXNzPSJ5amh0LXNpdGUtaWNvbiI+PC9hPlxuICAgICAgPGEge3tpZiAhZHAubm9pbmZvfX0gaHJlZj0ie3tkcC51cmx9fSIgdGFyZ2V0PSJfYmxhbmsiIHt7L2lmfX0gY2xhc3M9InlqaHQtdGl0bGUge3tpZiBkcC5ub2luZm99fSBub2luZm97ey9pZn19Ij5cbiAgICAgICAgPHNwYW4gY2xhc3M9InRpdGxlLXNwMSI+5LiA6ZSu5rW35reY77yaPC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz0idGl0bGUtc3AyIj7vv6V7e2RwLmdvb2RzX3ByaWNlfX08L3NwYW4+XG4gICAgICA8L2E+XG4gICAgPC9kaXY+XG4gICAge3tpZiBkcC5ub3VybH19XG4gICAgICA8ZGl2IGNsYXNzPSJ5amh0LWRldGFpbCB5amh0LW5vdXJsLWRldGFpbCI+XG4gICAgICAgIDxpbWcgc3JjPSJodHRwOi8vY2RuLnt7ZXh0TmFtZX19LmNvbS9pbWFnZXMvZXh0ZW5zaW9ucy9oYWl0YW8vZG9nX2xvYWRpbmcuZ2lmIj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8c3Bhbj7liLDmiYvku7flrp7ml7borqHnrpfkuK08L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9Imh0LWppbmR1dGlhbyI+MCU8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAge3tlbHNlIGlmICFkcC5ub2luZm99fVxuICAgICAgPGRpdiBjbGFzcz0ieWpodC1kZXRhaWwiPlxuICAgICAgICA8ZGl2IGNsYXNzPSJ5amh0LWl0ZW0iPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPSJ5amh0LWl0ZW0tc3AxIj7lrpjnvZHov5DotLk8L3NwYW4+IO+8mlxuICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAg77+le3tkcC5vZmZpY2lhbF9wb3N0YWdlfX0gXG4gICAgICAgICAgICB7e2lmIGRwLnhtX29mZmljaWFsICE9IDB9fVxuICAgICAgICAgICAgICDvvIhcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImRlbC1saW5lIj57e2RwLnhtX29mZmljaWFsfX08L3NwYW4+IFxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ieWpodC14bSI+6ZmQ5YWNPC9zcGFuPlxuICAgICAgICAgICAgICDvvIlcbiAgICAgICAgICAgIHt7L2lmfX1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPSJ5amh0LWl0ZW0iPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPSJ5amh0LWl0ZW0tc3AxIj7ovazov5DotLk8L3NwYW4+IO+8mlxuICAgICAgICAgIDxzcGFuIGNsYXNzPSJ5amh0LXpodWFueXVuIj7vv6V7e2RwLmludGVybmF0aW9uYWxfcG9zdGFnZX19PC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz0ieWpodC1pdGVtIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz0ieWpodC1pdGVtLXNwMSI+56iO6LS5PC9zcGFuPiDvvJpcbiAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICDvv6V7e2RwLnRheF9mZWV9fVxuICAgICAgICAgIHt7aWYgZHAueG1fZmVlICE9IDB9fVxuICAgICAgICAgICAg77yIPHNwYW4gY2xhc3M9ImRlbC1saW5lIj57e2RwLnhtX2ZlZX19PC9zcGFuPiBcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ5amh0LXhtIj7pmZDlhY08L3NwYW4+77yJXG4gICAgICAgICAge3svaWZ9fVxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9InlqaHQtaXRlbSB5amh0LWl0ZW0tbGFzdCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9InlqaHQtaXRlbS1zcDEiPuWIsOaJi+S7tzwvc3Bhbj4g77yaXG4gICAgICAgICAgPHNwYW4gY2xhc3M9InlqaHQtcHJpY2UiPu+/pSB7e2RwLnB1cmVQcmljZX19PC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIHt7ZWxzZX19XG4gICAgICA8ZGl2IGNsYXNzPSJ5amh0LWRldGFpbCB5amh0LW5vaW5mby1kZXRhaWwiPlxuICAgICAgICB7e3RsZX19XG4gICAgICA8L2Rpdj5cbiAgICB7ey9pZn19XG4gICAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj5cbiAgICAgICN5aWppYW5oYWl0YW8ge1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIHRvcDogLTdweDtcbiAgICAgICAgd2lkdGg6IDIwNnB4O1xuICAgICAgICB6LWluZGV4OiA5OTk5OTk7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gICAgICB9XG4gICAgICAuaHQtc3BlY2lhbC1kb20jeWlqaWFuaGFpdGFvIHtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDBweDtcbiAgICAgICAgd2lkdGg6IHt7aW5zZXJ0d2lkdGgrMn19cHg7XG4gICAgICB9XG4gICAgICAuZ3dkXzZwbSAjeWlqaWFuaGFpdGFvIHtcbiAgICAgICAgbWFyZ2luOiAwcHg7XG4gICAgICAgIHRvcDogMHB4O1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICAgIH1cbiAgICAgICN5aWppYW5oYWl0YW8gKiB7XG4gICAgICAgIGZvbnQtZmFtaWx5OiBcJ01pY3Jvc29mdCBZYWhlaVwnIWltcG9ydGFudDtcbiAgICAgIH1cbiAgICAgIC55amh0LWhlYWQge1xuICAgICAgICBoZWlnaHQ6IDMycHg7XG4gICAgICAgIHdpZHRoOiAyMDZweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDMycHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgYm94LXNpemluZzogY29udGVudC1ib3g7XG4gICAgICB9XG4gICAgICAuZ3dkXzZwbSAueWpodC1oZWFkLCAuaHQtc3BlY2lhbC1kb20gLnlqaHQtaGVhZCB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgfVxuICAgICAgLmd3ZF82cG0gICN5aWppYW5oYWl0YW8gLnlqaHQtdGl0bGUge1xuICAgICAgICB3aWR0aDogMjU2cHg7XG4gICAgICB9XG4gICAgICAuaHQtc3BlY2lhbC1kb20jeWlqaWFuaGFpdGFvIC55amh0LXRpdGxlIHtcbiAgICAgICAgd2lkdGg6IHt7aW5zZXJ0d2lkdGgrMi00MH19cHg7XG4gICAgICB9XG4gICAgICAuZ3dkXzZwbSAueWpodC1kZXRhaWwge1xuICAgICAgICB3aWR0aDogMzAwcHg7XG4gICAgICB9XG4gICAgICAuaHQtc3BlY2lhbC1kb20gLnlqaHQtZGV0YWlsIHtcbiAgICAgICAgd2lkdGg6IHt7aW5zZXJ0d2lkdGgrMn19cHg7XG4gICAgICB9XG4gICAgICAueWpodC1zaXRlLWljb24ge1xuICAgICAgICBiYWNrZ3JvdW5kOiB1cmwoaHR0cDovL3MxLnt7ZXh0TmFtZX19LmNvbS9pbWFnZXMvZXh0ZW5zaW9ucy9oYWl0YW9fc2l0ZWljb24ucG5nKSA4cHggNXB4IG5vLXJlcGVhdDtcbiAgICAgICAgYmFja2dyb3VuZC1zaXplOiAyNHB4IDIycHg7XG4gICAgICAgIGhlaWdodDogMzJweDtcbiAgICAgICAgd2lkdGg6IDQwcHg7XG4gICAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZWJlYmViO1xuICAgICAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiA2cHg7XG4gICAgICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDZweDtcbiAgICAgIH1cbiAgICAgICN5aWppYW5oYWl0YW8gLnlqaHQtdGl0bGUge1xuICAgICAgICBmbG9hdDogbGVmdDtcbiAgICAgICAgd2lkdGg6IDE2NnB4O1xuICAgICAgICBoZWlnaHQ6IDMycHg7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMzZWMwZjA7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgY29sb3I6ICNmZmY7XG4gICAgICAgIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiA2cHg7XG4gICAgICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiA2cHg7XG4gICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICAgIH1cbiAgICAgICN5aWppYW5oYWl0YW8gLnlqaHQtdGl0bGUgLnRpdGxlLXNwMSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgIH1cbiAgICAgICN5aWppYW5oYWl0YW8gLnlqaHQtdGl0bGUgLnRpdGxlLXNwMiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgIH1cbiAgICAgICN5aWppYW5oYWl0YW8gLnlqaHQtdGl0bGUubm9pbmZvIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2U0ZTRlNDtcbiAgICAgICAgY29sb3I6ICM2ZDZkNmQ7XG4gICAgICAgIGN1cnNvcjogZGVmYXVsdDtcbiAgICAgIH1cbiAgICAgIC55amh0LWRldGFpbCB7XG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmY2ZjZmM7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICMxMTkxYzE7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB3aWR0aDogMjA2cHg7XG4gICAgICB9XG4gICAgICAueWpodC1pdGVtIHtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNmMGYwZjA7XG4gICAgICAgIGhlaWdodDogMjhweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDI4cHg7XG4gICAgICAgIHBhZGRpbmctbGVmdDogMTBweDtcbiAgICAgIH1cbiAgICAgIC55amh0LWl0ZW0ueWpodC1pdGVtLWxhc3Qge1xuICAgICAgICBib3JkZXItYm90dG9tOiBub25lO1xuICAgICAgfVxuICAgICAgLnlqaHQtaXRlbS1zcDEge1xuICAgICAgICBmbG9hdDogbGVmdDtcbiAgICAgICAgaGVpZ2h0OiAyOHB4O1xuICAgICAgICB3aWR0aDogNjBweDtcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICB0ZXh0LWFsaWduOiBqdXN0aWZ5O1xuICAgICAgICB0ZXh0LWFsaWduLWxhc3Q6IGp1c3RpZnk7XG4gICAgICB9XG4gICAgICBAbWVkaWEgc2NyZWVuIGFuZCAoLXdlYmtpdC1taW4tZGV2aWNlLXBpeGVsLXJhdGlvOjApe1xuICAgICAgICAueWpodC1pdGVtOmFmdGVye1xuICAgICAgICAgICAgY29udGVudDoiLiI7XG4gICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgICAgICB3aWR0aDoxMDAlO1xuICAgICAgICAgICAgb3ZlcmZsb3c6aGlkZGVuO1xuICAgICAgICAgICAgaGVpZ2h0OjA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC5kZWwtbGluZSB7XG4gICAgICAgIHRleHQtZGVjb3JhdGlvbjogbGluZS10aHJvdWdoO1xuICAgICAgfVxuICAgICAgLnlqaHQteG0ge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjQ5ZDY0O1xuICAgICAgICBjb2xvcjogI2ZmZjtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMnB4O1xuICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgIHdpZHRoOiAyOHB4O1xuICAgICAgICBoZWlnaHQ6IDE1cHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxNXB4O1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICB9XG4gICAgICAueWpodC16aHVhbnl1biB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgIH1cbiAgICAgIC55amh0LXByaWNlIHtcbiAgICAgICAgY29sb3I6ICNmODNjNDk7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgIH1cbiAgICAgIC55amh0LW5vaW5mby1kZXRhaWwge1xuICAgICAgICBwYWRkaW5nOiAxNnB4IDIwcHggMTZweCAyMHB4O1xuICAgICAgfVxuICAgICAgLnlqaHQtbm91cmwtZGV0YWlsIHtcbiAgICAgICAgcGFkZGluZzogMThweCAwIDIxcHggMHB4O1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICB9XG4gICAgICAuaHQtamluZHV0aWFvIHtcbiAgICAgICAgY29sb3I6ICMzZWMwZjA7XG4gICAgICB9XG4gICAgICAuYS1hY2NvcmRpb24gLmEtYm94IHtcbiAgICAgICAgb3ZlcmZsb3c6IHZpc2libGUgIWltcG9ydGFudDtcbiAgICAgIH1cbiAgICAgIC55amh0LWZsdXNoIHtcbiAgICAgICAgY29sb3I6ICNiMTI3MDQ7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cbiAgICA8L3N0eWxlPlxuPC9kaXY+JwoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCwgbikgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBpID0gMCwKCQkJCWEgPSAhMSwKCQkJCW8gPSB7fSwKCQkJCXIgPSBmdW5jdGlvbihlLCBuKSB7CgkJCQkJbiA9IG4gfHwgIiIsIGEgPSAhMDsKCQkJCQl2YXIgaSA9IHQudGpfc2VydmVyICsgIi9kcGluZm8ucGhwP3Blcm1hbmVudF9pZD0iICsgZS5waWQgKyAiJnJlZmVyPSIgKyBlbmNvZGVVUklDb21wb25lbnQoZS5yZWZlclVybCkgKyAiJnByaWNlPSIgKyBlLnByaWNlICsgIiZjbGFzc19pZD0iICsgZS5jbGFzc19pZCArICImYnJhbmRfaWQ9IiArIGUuYnJhbmRfaWQgKyAiJmNvbW1lbnRUYWc9IiArIGVuY29kZVVSSUNvbXBvbmVudChuKSwKCQkJCQkJbyA9IG5ldyBJbWFnZTsKCQkJCQlvLnNyYyA9IGkKCQkJCX0sCgkJCQlzID0gZnVuY3Rpb24oZSkgewoJCQkJCWkrKywgInN0cmluZyIgPT0gdHlwZW9mIGUgPyBvLnN0ciA9IGUgOiBvLm9iaiA9IGUsIDIgIT0gaSB8fCBhIHx8IHIoby5vYmosIG8uc3RyKQoJCQkJfTsKCQkJZS5leHBvcnRzLmxvZ0RwSW5mbyA9IGZ1bmN0aW9uKGUpIHsKCQkJCXZhciBuID0gWyIzNjBidXkiLCAidGFvYmFvIiwgInRtYWxsIl07CgkJCQluLmluZGV4T2YodC5zaXRlKSA+IC0xID8gcyhlKSA6IHIoZSksIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJYSB8fCByKGUpCgkJCQl9LCA4ZTMpCgkJCX0sIGUuZXhwb3J0cy5jb2xsZWN0SmRJbmZvID0gZnVuY3Rpb24oZSkgewoJCQkJdmFyIHQgPSBbXTsKCQkJCWlmIChlKSB7CgkJCQkJZm9yICh2YXIgbiA9IDA7IG4gPCBlLmxlbmd0aDsgbisrKSB0LnB1c2goZVtuXS5uYW1lKTsKCQkJCQlzKHQuam9pbigiXyIpKQoJCQkJfQoJCQl9LCBlLmV4cG9ydHMuY29sbGVjdFRhb2Jhb0luZm8gPSBmdW5jdGlvbigpIHsKCQkJCXZhciBlID0gbigiI3Jldmlld3MgdWwua2ctcmF0ZS13ZC1pbXByZXNzaW9uIGxpIGEiKTsKCQkJCSJ0bWFsbCIgPT0gdC5zaXRlICYmIChlID0gbigiI0pfUmV2aWV3cyAucmF0ZS10YWctaW5uZXIgLnRhZy1wb3NpIGEiKSk7CgkJCQlmb3IgKHZhciBpID0gW10sIGEgPSBlLmxlbmd0aCwgbyA9IDA7IGEgPiBvOyBvKyspIHsKCQkJCQl2YXIgciA9IGUuZXEobykudGV4dCgpLm1hdGNoKC8oLiopXCgvKTsKCQkJCQlyICYmIGkucHVzaChyWzFdLnRyaW0oKSkKCQkJCX0KCQkJCXMoaS5qb2luKCJfIikpCgkJCX0KCQl9KS5jYWxsKHQsIG4oMSksIG4oNikpCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCShmdW5jdGlvbih0LCBpKSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJdmFyIGEgPSBuKDE1NiksCgkJCQlvID0gbig4KSwKCQkJCXIgPSBuKDkpLAoJCQkJcyA9IG4oMTY1KSwKCQkJCWwgPSBuKDEzKSwKCQkJCWMgPSBuKDE4MyksCgkJCQlkID0gbigxOCksCgkJCQlwID0gbigxNiksCgkJCQloID0gdC5mb2xkLAoJCQkJdSA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlpZiAoZSkgewoJCQkJCQl2YXIgbiA9ICc8YSBpZD0iJyArIHQuZXh0QnJhbmQgKyAnX3NlYXJjaGxvd3ByaSIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPiDlvZPliY3pobU8c3Bhbj4nICsgZSArICI8L3NwYW4+5qy+5ZWG5ZOB5aSE5LqO5Y6G5Y+y5pyA5L2O5Lu3PC9hPiI7CgkJCQkJCWkoIiMiICsgdC5leHROYW1lICsgIi1tYWluLWNvbnRlbnRzIikuYXBwZW5kKHAuY29tcGlsZShuKSgpKQoJCQkJCX0KCQkJCX0sCgkJCQltID0gZnVuY3Rpb24oZSkgewoJCQkJCXZhciBhID0gbigxOTkpOwoJCQkJCWkoIiMiICsgdC5leHROYW1lICsgIi1tYWluIikuYXBwZW5kKHAuY29tcGlsZShhKSh7CgkJCQkJCXJlbW86ICLmm7TlpJrlpITkuo7ljoblj7LmnIDkvY7ku7fnmoTlkIznsbvllYblk4EiLAoJCQkJCQlkYXRhOiBlLAoJCQkJCQlleHRCcmFuZDogdC5leHRCcmFuZCwKCQkJCQkJZXh0TmFtZTogdC5leHROYW1lCgkJCQkJfSkpLCB0LmluaXRfaXRlbV9saXN0KCJzZWFyY2hsb3dwcmkiKSwgdC5zZXRfaXRlbV9hcmdzKCJzZWFyY2hsb3dwcmkiKSwgdC5zZXRfcGFnZV9hcmdzKCJzZWFyY2hsb3dwcmkiKSwgdC5sb2FkX2ltYWdlKCJzZWFyY2hsb3dwcmkiLCAwLCB0LnBhZ2Vfc2l6ZSksIGkoIiMiICsgdC5leHRCcmFuZCArICJfc2VhcmNobG93cHJpIikuc2hvdygpLCBmKCkKCQkJCX0sCgkJCQlmID0gZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSB2b2lkIDA7CgkJCQkJaSgiIyIgKyB0LmV4dEJyYW5kICsgIl9zZWFyY2hsb3dwcmkiKS5vbigibW91c2VlbnRlciIsIGZ1bmN0aW9uKCkgewoJCQkJCQlpKCIjIiArIHQuZXh0QnJhbmQgKyAiX3NlYXJjaGxvd3ByaSIpLmFkZENsYXNzKCJtX2hvdmVyIiksIGkoIiMiICsgdC5leHRCcmFuZCArICJfc2VhcmNobG93cHJpX2RldGFpbCIpLnNob3coKSwgbC5sb2coIuWIl+ihqOmhteW3peWFt+adoeWOhuWPsuacgOS9juS7t+aCrOa1ruWxleekuiIpCgkJCQkJfSksIGkoIiMiICsgdC5leHRCcmFuZCArICJfc2VhcmNobG93cHJpIikub24oIm1vdXNlbGVhdmUiLCBmdW5jdGlvbigpIHsKCQkJCQkJZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJCQlpKCIjIiArIHQuZXh0QnJhbmQgKyAiX3NlYXJjaGxvd3ByaV9kZXRhaWwiKS5oaWRlKCksIGkoIiMiICsgdC5leHRCcmFuZCArICJfc2VhcmNobG93cHJpIikucmVtb3ZlQ2xhc3MoIm1faG92ZXIiKQoJCQkJCQl9LCA0MDApCgkJCQkJfSksIGkoIiMiICsgdC5leHRCcmFuZCArICJfc2VhcmNobG93cHJpX2RldGFpbCIpLm9uKCJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7CgkJCQkJCWNsZWFyVGltZW91dChlKQoJCQkJCX0pLCBpKCIjIiArIHQuZXh0QnJhbmQgKyAiX3NlYXJjaGxvd3ByaV9kZXRhaWwiKS5vbigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uKCkgewoJCQkJCQlpKCIjIiArIHQuZXh0QnJhbmQgKyAiX3NlYXJjaGxvd3ByaV9kZXRhaWwiKS5oaWRlKCksIGkoIiMiICsgdC5leHRCcmFuZCArICJfc2VhcmNobG93cHJpIikucmVtb3ZlQ2xhc3MoIm1faG92ZXIiKQoJCQkJCX0pLCBpKCIjIiArIHQuZXh0QnJhbmQgKyAiX3NlYXJjaGxvd3ByaV9kZXRhaWwgbGkiKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQkJbC5sb2coIuWIl+ihqOmhteW3peWFt+adoeWOhuWPsuacgOS9juS7t+eCueWHuyIpCgkJCQkJfSksIGkoIiMiICsgdC5leHRCcmFuZCArICJfc2VhcmNobG93cHJpX2RldGFpbCAubGVmdC1wYWdlIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCXQuY2hhbmdlX3BhZ2UoInNlYXJjaGxvd3ByaSIsIC0xKQoJCQkJCX0pLCBpKCIjIiArIHQuZXh0QnJhbmQgKyAiX3NlYXJjaGxvd3ByaV9kZXRhaWwgLnJpZ2h0LXBhZ2UiKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQkJdC5jaGFuZ2VfcGFnZSgic2VhcmNobG93cHJpIiwgMSkKCQkJCQl9KQoJCQkJfSwKCQkJCWcgPSBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9ICc8dWwgY2xhc3M9IicgKyB0LmV4dEJyYW5kICsgIi1jbG9zZS1tb2R1bGUgIiArIHQuZXh0QnJhbmQgKyAnLWNvbXBhcmUiIGlkPSInICsgdC5leHRCcmFuZCArICctY29tcGFyZSI+JzsKCQkJCQlpKCIjbG93ZXN0X3ByaWNlX2J0biIpLmFmdGVyKHAuY29tcGlsZShlKSgpKQoJCQkJfSwKCQkJCV8gPSBmdW5jdGlvbihlKSB7CgkJCQkJaWYgKGUpIHsKCQkJCQkJdmFyIG4gPSAnPGRpdiBpZD0ibG93ZXN0X3ByaWNlX2J0biIgY2xhc3M9IicgKyB0LmV4dEJyYW5kICsgJy1jbG9zZS1tb2R1bGUgbG93ZXN0X3ByaWNlX2J0biIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPiBcbiAgICAgICAgICAgICAgICA8YSBjbGFzcz0iJyArIHQuZXh0QnJhbmQgKyAnX2ZpcnN0Ij4gXG4gICAgICAgICAgICAgICAgICDlvZPliY3pobU8c3Bhbj4nICsgZSArICI8L3NwYW4+5qy+5ZWG5ZOBXG4gICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDxhPuWkhOS6juWOhuWPsuacgOS9juS7tzwvYT5cbiAgICAgICAgICAgICAgPC9kaXYiOwoJCQkJCQl0Lm5ld19leHRlbnNpb24gPyBpKCIjIiArIHQuZXh0QnJhbmQgKyAiLWh1aSIpLmFmdGVyKHAuY29tcGlsZShuKSgpKSA6IGkoIi4iICsgdC5leHRCcmFuZCArICItZmF2b3ItbW9kdWxlIikuYWZ0ZXIocC5jb21waWxlKG4pKCkpCgkJCQkJfQoJCQkJfSwKCQkJCXggPSBmdW5jdGlvbihlKSB7CgkJCQkJaWYgKDAgIT0gZS5sZW5ndGgpIHsKCQkJCQkJdmFyIGEgPSBlLnNsaWNlKDAsIDUpLAoJCQkJCQkJbyA9IG4oMjAwKTsKCQkJCQkJaSgiIyIgKyB0LmV4dEJyYW5kICsgIi1jb21wYXJlIikuYXBwZW5kKHAuY29tcGlsZShvKSh7CgkJCQkJCQlkYXRhOiBhLAoJCQkJCQkJc19zZXJ2ZXI6IHQuc19zZXJ2ZXIsCgkJCQkJCQlleHRCcmFuZDogdC5leHRCcmFuZCwKCQkJCQkJCWV4dE5hbWU6IHQuZXh0TmFtZSwKCQkJCQkJCWRvbU5hbWU6IHQuZHZhbAoJCQkJCQl9KSksIHcoZS5zbGljZSg1KSksIHYoKSwgaSgiI2xvd2VzdF9wcmljZV9idG4iKS5zaG93KCksIDEgPT0gdC5mb2xkICYmIGkoIi4iICsgdC5leHRCcmFuZCArICItY2xvc2UtbW9kdWxlIikuaGlkZSgpCgkJCQkJfQoJCQkJfSwKCQkJCXcgPSBmdW5jdGlvbihlKSB7CgkJCQkJaWYgKDAgIT0gZS5sZW5ndGgpIHsKCQkJCQkJdmFyIGEgPSBjLmdldFBhZ2VJbmZvKGUpLAoJCQkJCQkJbyA9IG4oMjAxKTsKCQkJCQkJaSgiIyIgKyB0LmV4dEJyYW5kICsgIi1jb21wYXJlIikuYWZ0ZXIocC5jb21waWxlKG8pKHsKCQkJCQkJCQlkYXRhOiBlLAoJCQkJCQkJCXNfc2VydmVyOiB0LnNfc2VydmVyLAoJCQkJCQkJCXBhZ2VJbmZvOiBhLAoJCQkJCQkJCWV4dEJyYW5kOiB0LmV4dEJyYW5kCgkJCQkJCQl9KSksIHQuc2V0UGFnZUFyZ3ModC5leHRCcmFuZCArICItY29tcGFyZS1zZWFyY2hsb3dwcmkiLCBhLnBlclBhZ2VTaXplKSwKCQkJCQkJCXQuYXV0b0ZpeFdpZHRoKCkKCQkJCQl9CgkJCQl9LAoJCQkJdiA9IGZ1bmN0aW9uKCkgewoJCQkJCWkoIiMiICsgdC5leHRCcmFuZCArICItY29tcGFyZSBsaS5zZWFyY2hfaXRlbV9saXN0Iikub24oIm1vdXNlZW50ZXIiLCBmdW5jdGlvbigpIHsKCQkJCQkJaSgiIyIgKyB0LmV4dEJyYW5kICsgIi1jb21wYXJlIGxpLnNlYXJjaF9pdGVtX2xpc3QgLiIgKyB0LmV4dEJyYW5kICsgIi1jb21wYXJlLWl0ZW0iKS5yZW1vdmVDbGFzcyh0LmV4dEJyYW5kICsgIl9mYXZvcl9ob3ZlciIpLCBpKCIuIiArIHQuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbS1kZXRhaWwiKS5oaWRlKCksIGkodGhpcykuZmluZCgiLiIgKyB0LmV4dEJyYW5kICsgIi1jb21wYXJlLWl0ZW0iKS5hZGRDbGFzcyh0LmV4dEJyYW5kICsgIl9mYXZvcl9ob3ZlciIpLCBpKHRoaXMpLmZpbmQoIi4iICsgdC5leHRCcmFuZCArICItY29tcGFyZS1pdGVtLWRldGFpbCIpLnNob3coKQoJCQkJCX0pLCBpKCIjIiArIHQuZXh0QnJhbmQgKyAiLWNvbXBhcmUgbGkuc2VhcmNoX2l0ZW1fbGlzdCIpLm9uKCJtb3VzZWxlYXZlIiwgZnVuY3Rpb24oZSkgewoJCQkJCQlpKCIuIiArIHQuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbS1kZXRhaWwiKS5oaWRlKCksIGkoIiMiICsgdC5leHRCcmFuZCArICItY29tcGFyZSBsaS5zZWFyY2hfaXRlbV9saXN0IC4iICsgdC5leHRCcmFuZCArICItY29tcGFyZS1pdGVtIikucmVtb3ZlQ2xhc3ModC5leHRCcmFuZCArICJfZmF2b3JfaG92ZXIiKQoJCQkJCX0pLCBpKCIuIiArIHQuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbS1kZXRhaWwgYSIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQlsLmxvZygi5YiX6KGo6aG15bel5YW35p2h5Y6G5Y+y5pyA5L2O5Lu354K55Ye7IikKCQkJCQl9KSwgaSgiIyIgKyB0LmV4dEJyYW5kICsgIi1zZWFyY2hsb3dwcmkiKS5vbigibW91c2VlbnRlciIsIGZ1bmN0aW9uKCkgewoJCQkJCQlpKCIuIiArIHQuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbS1kZXRhaWwiKS5oaWRlKCksIGkoIiMiICsgdC5leHRCcmFuZCArICItY29tcGFyZSBsaS5zZWFyY2hfaXRlbV9saXN0IC4iICsgdC5leHRCcmFuZCArICItY29tcGFyZS1pdGVtIikucmVtb3ZlQ2xhc3ModC5leHRCcmFuZCArICJfZmF2b3JfaG92ZXIiKSwgaSh0aGlzKS5maW5kKCIuc2VhcmNobG93cHJpX2J0biIpLmFkZENsYXNzKCJzZWFyY2hsb3dwcmlfYnRuX2hvdmVyIiksIGkodGhpcykuZmluZCgiLnNlYXJjaGxvd3ByaV9idG4iKS5hZGRDbGFzcyh0LmV4dEJyYW5kICsgIi1jb21wYXJlLWl0ZW0taG92ZXIiKSwgbC5sb2coIuWIl+ihqOmhteW3peWFt+adoeWOhuWPsuacgOS9juS7t+aCrOa1ruWxleekuiIpLCBpKHRoaXMpLmZpbmQoIiMiICsgdC5leHRCcmFuZCArICJfc2VhcmNobG93cHJpX2RldGFpbCIpLnNob3coKQoJCQkJCX0pLCBpKCIjIiArIHQuZXh0QnJhbmQgKyAiLXNlYXJjaGxvd3ByaSIpLm9uKCJtb3VzZWxlYXZlIiwgZnVuY3Rpb24oKSB7CgkJCQkJCWkoIi4iICsgdC5leHRCcmFuZCArICItY29tcGFyZS1pdGVtLWRldGFpbCIpLmhpZGUoKSwgaSh0aGlzKS5maW5kKCIuc2VhcmNobG93cHJpX2J0biIpLnJlbW92ZUNsYXNzKCJzZWFyY2hsb3dwcmlfYnRuX2hvdmVyIiksIGkodGhpcykuZmluZCgiLnNlYXJjaGxvd3ByaV9idG4iKS5yZW1vdmVDbGFzcyh0LmV4dEJyYW5kICsgIi1jb21wYXJlLWl0ZW0taG92ZXIiKQoJCQkJCX0pCgkJCQl9LAoJCQkJYiA9IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gdC5kdmFsOwoJCQkJCWkoIiMiICsgdC5leHRCcmFuZCArICItY2xvc2UiKS5jc3MoImJvcmRlci1yYWRpdXMiLCAwKSwgaSgiLiIgKyB0LmV4dEJyYW5kICsgIi1mYXZvci1tb2R1bGUiKS5jc3MoImJvcmRlci1sZWZ0IiwgIjFweCBzb2xpZCAjZWVlIiksIGkoZSkuY3NzKCJib3JkZXItcmFkaXVzIiwgMCksIDEgIT0gdC5mb2xkICYmIGkoZSkud2lkdGgoIjEwMCUiKSwgaSgiIyIgKyB0LmV4dEJyYW5kICsgIl9zZXR0aW5nX2RpdiIpLmNzcygiYm90dG9tIiwgIjM2cHgiKSwgaSgiIyIgKyB0LmV4dEJyYW5kICsgIi1jbG9zZSIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQkxID09IGggPyAoaShlKS53aWR0aCgiMTAwJSIpLCBoID0gMCkgOiAoaShlKS53aWR0aCgiYXV0byIpLCBoID0gMSkKCQkJCQl9KQoJCQkJfSwKCQkJCXkgPSBmdW5jdGlvbihlKSB7CgkJCQkJInRvcCIgPT0gdC5zdHlsZSA/IChhLnRoaXJkQmFyKCksIHMuaW5zZXJ0bm9ybWFsVmlldygpLCBvLmdldChmdW5jdGlvbihlKSB7CgkJCQkJCXUoZS5sZW5ndGgpOwoJCQkJCQl2YXIgdCA9IG8uZ2V0RHBJZHMoKTsKCQkJCQkJdCAmJiBrKHQsIGUsIG0pCgkJCQkJfSksIGEuc2V0X3BhbmVsX2hvdmVyX2V2ZW50KCkpIDogImJvdHRvbSIgPT0gdC5zdHlsZSAmJiAocy5pbnNlcnRub3JtYWxWaWV3X2JvdHRvbSgpLCBvLmdldChmdW5jdGlvbihlKSB7CgkJCQkJCV8oZS5sZW5ndGgpLCBnKCk7CgkJCQkJCXZhciB0ID0gby5nZXREcElkcygpOwoJCQkJCQl0ICYmIGsodCwgZSwgeCkKCQkJCQl9KSwgYigpKSwgcy5iaW5kRXZlbnQoKQoJCQkJfSwKCQkJCWsgPSBmdW5jdGlvbihlLCBuLCBpKSB7CgkJCQkJbiAmJiAwICE9IG4ubGVuZ3RoICYmIGUgJiYgQihlLCBmdW5jdGlvbihlKSB7CgkJCQkJCWZvciAodmFyIGEgPSAwOyBhIDwgbi5sZW5ndGg7IGErKykgewoJCQkJCQkJaWYgKG5bYV0uZGlzY291bnQgPSBNYXRoLnJvdW5kKDEwMCAqIG5bYV0uZGlzY291bnQpIC8gMTAsIG5bYV0ubGFzdF9wcmljZSA9IG5bYV0uaGlnaGVzdCwgZSAmJiBlW25bYV0uZHBfaWRdICYmIGVbblthXS5kcF9pZF0uZGF0YSAmJiBlW25bYV0uZHBfaWRdLmRhdGEubGVuZ3RoID4gMCkgewoJCQkJCQkJCXZhciBvID0geihlW25bYV0uZHBfaWRdLCBuW2FdLnByaWNlKTsKCQkJCQkJCQlvICYmIChuW2FdLm5ld19wcmljZSA9IG8ucHJpY2UsIG5bYV0ucHJpY2VkZXNjID0gby5kZXNjKQoJCQkJCQkJfQoJCQkJCQkJdmFyIHIgPSB7CgkJCQkJCQkJdXJsOiBuW2FdLnVybCwKCQkJCQkJCQlzaXRlX2lkOiBuW2FdLnNpdGVfaWQsCgkJCQkJCQkJZHBfaWQ6IG5bYV0uZHBfaWQsCgkJCQkJCQkJdW5pb246IHQudW5pb24sCgkJCQkJCQkJbW9kOiAiYWxzb3ZpZXciCgkJCQkJCQl9OwoJCQkJCQkJblthXS51cmwgPSBkLmluaXQocikKCQkJCQkJfQoJCQkJCQlpKG4pCgkJCQkJfSkKCQkJCX0sCgkJCQl6ID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJCWZvciAodmFyIG4gPSB7CgkJCQkJCXByaWNlOiB0LAoJCQkJCQlkZXNjOiAiIgoJCQkJCX0sIGkgPSBlLmRhdGEubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pCgkJCQkJCWlmICgxID09IGUuZGF0YVtpXS50eXBlKSB7CgkJCQkJCQl2YXIgYSA9IGUuZGF0YVtpXS5kZXNjLm1hdGNoKC9bMC05Ll0rL2cpOwoJCQkJCQkJaWYgKHBhcnNlRmxvYXQodCkgPj0gcGFyc2VGbG9hdChhWzBdKSkgewoJCQkJCQkJCW4ucHJpY2UgPSBwYXJzZUZsb2F0KHQpIC0gcGFyc2VGbG9hdChhWzFdKSwgbi5kZXNjID0gZS5kYXRhW2ldLmRlc2M7CgkJCQkJCQkJYnJlYWsKCQkJCQkJCX0KCQkJCQkJfSBlbHNlIGlmICgyID09IGUuZGF0YVtpXS50eXBlKSByZXR1cm4gITE7CgkJCQkJcmV0dXJuICIiICE9IG4uZGVzYyA/IG4gOiAhMQoJCQkJfSwKCQkJCUIgPSBmdW5jdGlvbihlLCBuKSB7CgkJCQkJdmFyIGkgPSBlLmpvaW4oIiwiKSwKCQkJCQkJYSA9IHQuc2VydmVyICsgIi9leHRlbnNpb24/YWM9Z2V0UHJvbW8mZHBfaWRzPSIgKyBpOwoJCQkJCXIuZ2V0KGEpLmRvbmUoZnVuY3Rpb24oZSkgewoJCQkJCQluKGUpCgkJCQkJfSkuZmFpbChmdW5jdGlvbigpIHsKCQkJCQkJbigpCgkJCQkJfSkKCQkJCX07CgkJCWUuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oZSkgewoJCQkJeShlKQoJCQl9CgkJfSkuY2FsbCh0LCBuKDEpLCBuKDYpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCwgaSkgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBhID0gbigxNTcpLAoJCQkJbyA9IG4oODcpLAoJCQkJciA9IG4oOTIpLAoJCQkJcyA9IG4oNzcpLAoJCQkJbCA9IG4oMTE5KSwKCQkJCWMgPSBuKDE1OCksCgkJCQlkID0gbigxNjApLAoJCQkJcCA9IG4oMTYyKSwKCQkJCWggPSBuKDExNyksCgkJCQl1ID0gbigxNjMpLAoJCQkJbSA9IG4oMTY0KSwKCQkJCWYgPSBuKDE2NSksCgkJCQlnID0gbigxNiksCgkJCQlfID0gbigxNjYpLAoJCQkJeCA9IG4oMTY4KSwKCQkJCXcgPSBuKDEyMiksCgkJCQl2ID0gbigyNiksCgkJCQliID0gbigxMyksCgkJCQl5ID0gbig5KSwKCQkJCWsgPSB0LmR2YWwsCgkJCQl6ID0gZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSBuKDE2OSk7CgkJCQkJaSgiYm9keSIpLmFwcGVuZChnLmNvbXBpbGUoZSkoewoJCQkJCQlkb21uYW1lOiB0LmR2YWwKCQkJCQl9KSkKCQkJCX07CgkJCWUuZXhwb3J0cy5jbG9zZSA9IGZ1bmN0aW9uKCkgewoJCQkJaWYgKCJtc2llIiAhPSB0LmJyb3dzZXIuYWdlbnQgJiYgdC5jaGVja19hbmltYXRlKCkpIHsKCQkJCQl0cnkgewoJCQkJCQlpKCJib2R5IikuYW5pbWF0ZSh7CgkJCQkJCQkicGFkZGluZy10b3AiOiAiMHB4IgoJCQkJCQl9LCA1MDAsICJzd2luZyIsIGZ1bmN0aW9uKCkgewoJCQkJCQkJaSgiYm9keSIpLmF0dHIoInN0eWxlIiwgIiIpLmNzcygicGFkZGluZy10b3AiLCAwKSwgaShrKS5hdHRyKCJzdHlsZSIsICIiKSwgaSgiIyIgKyB0LmV4dE5hbWUgKyAiLW1haW4iKS5oaWRlKCksIGkoIiMiICsgdC5leHROYW1lICsgIi1taW5pIikuc2hvdygpCgkJCQkJCX0pCgkJCQkJfSBjYXRjaCAoZSkgewoJCQkJCQlpKCJib2R5IikuYXR0cigic3R5bGUiLCAiIikuY3NzKCJtYXJnaW4tdG9wIiwgMCkuY3NzKCJwYWRkaW5nLXRvcCIsIDApLCBpKGspLmF0dHIoInN0eWxlIiwgIiIpLCBpKCIjIiArIHQuZXh0TmFtZSArICItbWFpbiIpLmhpZGUoKSwgaSgiIyIgKyB0LmV4dE5hbWUgKyAiLW1pbmkiKS5zaG93KCkKCQkJCQl9CgkJCQkJaighMSkKCQkJCX0gZWxzZSBpKGspLmF0dHIoInN0eWxlIiwgIiIpLCBpKCIjIiArIHQuZXh0TmFtZSArICItbWFpbiIpLmhpZGUoKSwgaSgiYm9keSIpLmF0dHIoInN0eWxlIiwgIiIpLmNzcygibWFyZ2luLXRvcCIsIDApLmNzcygicGFkZGluZy10b3AiLCAwKSwgaSgiIyIgKyB0LmV4dE5hbWUgKyAiLW1pbmkiKS5zaG93KCksIGooITEpCgkJCX0sIGUuZXhwb3J0cy5mbG9hdF9ib2R5ID0gZnVuY3Rpb24oKSB7CgkJCQl2YXIgZSA9ICIzMnB4IjsKCQkJCWlmICgibXNpZSIgIT0gdC5icm93c2VyLmFnZW50KSB7CgkJCQkJdmFyIG4gPSBpKCJib2R5IikuYXR0cigic3R5bGUiKSB8fCAiIjsKCQkJCQluID0gbi5yZXBsYWNlKC9wYWRkaW5nLXRvcFteOl0qOlteO10qOz8vLCAiIiksIG4gPSBuICsgIjtwYWRkaW5nLXRvcDoiICsgZSArICIgIWltcG9ydGFudDsiLCBuICs9ICJwaGlsaXBzIiA9PSB0LnNpdGUgfHwgImluZWlnbyIgPT0gdC5zaXRlID8gIjtiYWNrZ3JvdW5kLXBvc2l0aW9uOjAgMzJweDsiIDogIiI7CgkJCQkJdHJ5IHsKCQkJCQkJaSgiYm9keSIpLmFuaW1hdGUoewoJCQkJCQkJInBhZGRpbmctdG9wIjogZQoJCQkJCQl9LCA1MDAsICJzd2luZyIsIGZ1bmN0aW9uKCkgewoJCQkJCQkJaSgiYm9keSIpLmF0dHIoInN0eWxlIiwgbikKCQkJCQkJfSkKCQkJCQl9IGNhdGNoIChhKSB7CgkJCQkJCWkoImJvZHkiKS5hdHRyKCJzdHlsZSIsIG4pCgkJCQkJfQoJCQkJfSBlbHNlICJhbWF6b24iICE9IHQuc2l0ZSA/IChuID0gaSgiYm9keSIpLmF0dHIoInN0eWxlIiksIG4gPSBuICsgIiB3aWR0aDoxMDAlO21hcmdpbi10b3A6IiArIGUgKyAiICFpbXBvcnRhbnQ7IiwgaSgiYm9keSIpLmF0dHIoInN0eWxlIiwgbikpIDogKG4gPSBpKCJib2R5IikuYXR0cigic3R5bGUiKSwgbiA9IG4gKyAiO21hcmdpbi10b3A6IiArIGUgKyAiICFpbXBvcnRhbnQ7IiwgaSgiYm9keSIpLmF0dHIoInN0eWxlIiwgbikpCgkJCX07CgkJCXZhciBCID0gZnVuY3Rpb24oKSB7CgkJCQkJaShrKS5lbXB0eSgpLCBpKGspLmF0dHIoInN0eWxlIiwgImRpc3BsYXk6YmxvY2sgIWltcG9ydGFudDt6LWluZGV4Ojk5OTk5OTk5OTkgIWltcG9ydGFudDsiKS5zaG93KCksIDEgIT0gdC5wX2ZvbGQgJiYgZS5leHBvcnRzLmZsb2F0X2JvZHkoKSwgaShrKS5hcHBlbmQoaSgiPGRpdj4iLCB7CgkJCQkJCSJjbGFzcyI6IHQubWJhciArICIgIGJqZGFuZy1tYWluIiwKCQkJCQkJaWQ6IHQuZXh0TmFtZSArICItbWFpbiIsCgkJCQkJCXN0eWxlOiAiZGlzcGxheToiICsgKDEgPT0gdC5wX2ZvbGQgPyAibm9uZSIgOiAiYmxvY2siKQoJCQkJCX0pLmFwcGVuZChpKCI8ZGl2PiIsIHsKCQkJCQkJImNsYXNzIjogdC5leHROYW1lICsgIi1uYXYiLAoJCQkJCQlpZDogdC5leHROYW1lICsgIi1tYWluLW5hdiIsCgkJCQkJCXN0eWxlOiAib3ZlcmZsb3c6IHZpc2libGU7IgoJCQkJCX0pKS5hcHBlbmQoaSgiPGRpdj4iLCB7CgkJCQkJCWlkOiB0LmxvZ29OYW1lLAoJCQkJCQkiY2xhc3MiOiAibG9nbyIKCQkJCQl9KS5hcHBlbmQoaSgiPGE+IiwgewoJCQkJCQkiY2xhc3MiOiAiZ3dkX2JnIgoJCQkJCX0pKSkpLCBpKGspLmFwcGVuZChpKCI8ZGl2PiIsIHsKCQkJCQkJImNsYXNzIjogdC5leHROYW1lICsgIi1taW5pIiwKCQkJCQkJaWQ6IHQuZXh0TmFtZSArICItbWluaSIsCgkJCQkJCXN0eWxlOiAid2lkdGg6IDYwcHg7IGxlZnQ6IDBweDtkaXNwbGF5Om5vbmU7IgoJCQkJCX0pLmFwcGVuZChpKCI8ZGl2PiIsIHsKCQkJCQkJImNsYXNzIjogdC5leHROYW1lICsgIi1uYXYgbWFpbiIsCgkJCQkJCWlkOiB0LmV4dE5hbWUgKyAiLW1haW4tbmF2IgoJCQkJCX0pLmFwcGVuZChpKCI8YT4iLCB7CgkJCQkJCSJjbGFzcyI6IHQuZXh0QnJhbmQgKyAiX2xvZ28gZ3dkX2JnIiwKCQkJCQkJaHJlZjogImh0dHA6Ly93d3cuIiArIHQuZXh0TmFtZSArICIuY29tIiwKCQkJCQkJdGFyZ2V0OiAiX2JsYW5rIgoJCQkJCX0pKS5hcHBlbmQoaSgiPGE+IiwgewoJCQkJCQkiY2xhc3MiOiAidW5mb2xkX3BvaW50ZXIiLAoJCQkJCQlocmVmOiAiamF2YXNjcmlwdDoiLAoJCQkJCQl0aXRsZTogIueCueWHu+WxleW8gCIsCgkJCQkJCWlkOiB0LmV4dEJyYW5kICsgIl9mb2xkX3BvaW50ZXIiCgkJCQkJfSkpKSksIGkoIiMiICsgdC5leHRCcmFuZCArICJfZm9sZF9wb2ludGVyIikuY2xpY2soZnVuY3Rpb24oKSB7CgkJCQkJCWkoIiMiICsgdC5leHROYW1lICsgIi1taW5pIikuaGlkZSgpLCBlLmV4cG9ydHMuZmxvYXRfYm9keSgpLCByLm1haW5iYXJmb2xkKDApLCBqKCEwKSwgaSgiIyIgKyB0LmV4dE5hbWUgKyAiLW1haW4iKS5zaG93KCkKCQkJCQl9KQoJCQkJfSwKCQkJCWogPSBmdW5jdGlvbihlKSB7CgkJCQkJZSA/ICgiZGlhcGVycyIgPT0gdC5zaXRlICYmIGkoIiN1YmVybmF2LXdyYXBwZXIiKS5jc3MoInRvcCIsICIzMnB4IiksICJyb3Nlb25seSIgPT0gdC5zaXRlICYmIGkoImJvZHk+LmhlYWRlciIpLmNzcygidG9wIiwgIjMycHgiKSwgImFwcGxlIiA9PSB0LnNpdGUgJiYgaSgiLmxvY2FsbmF2LXdyYXBwZXIsIC5hc2Utc3RpY2t5IikuYWRkQ2xhc3ModC5leHRCcmFuZCArICJfdG9wIiksICJ5b3UxNjMiID09IHQuc2l0ZSAmJiBpKCIjanMtZnVuY1RhYiIpLmFkZENsYXNzKHQuZXh0QnJhbmQgKyAiX3RvcCIpLCAia2FsdWxpIiA9PSB0LnNpdGUgJiYgaSh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHsKCQkJCQkJImZpeGVkIiA9PSBpKCIubWVudSIpLmNzcygicG9zaXRpb24iKSAmJiBpKCIubWVudSIpLmNzcygidG9wIiwgIjM0cHgiKQoJCQkJCX0pLCAoImp1bWVpZ2xvYmFsIiA9PSB0LnNpdGUgfHwgImZlbmdxdSIgPT0gdC5zaXRlIHx8ICJqdW1laSIgPT0gdC5zaXRlIHx8ICJsZWZlbmciID09IHQuc2l0ZXIgfHwgIndvbWFpIiA9PSB0LnNpdGUgfHwgInRhb2Jhby05NTA5NSIgPT0gdC5zaXRlIHx8ICJ0bWFsbCIgPT0gdC5zaXRlKSAmJiBpKCJib2R5IikuYWRkQ2xhc3MoImd3ZF90b3AiKSwgInpob25naml1IiA9PSB0LnNpdGUgJiYgaSh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHsKCQkJCQkJImZpeGVkIiA9PSBpKCIuY29udF9oZWFkIikuY3NzKCJwb3NpdGlvbiIpID8gaSgiLmNvbnRfaGVhZCIpLmNzcygidG9wIiwgIjM1cHgiKSA6IGkoIi5jb250X2hlYWQiKS5jc3MoInRvcCIsICIwcHgiKSwgImZpeGVkIiA9PSBpKCIudGFiLXQiKS5jc3MoInBvc2l0aW9uIikgPyBpKCIudGFiLXQiKS5jc3MoInRvcCIsICIzNXB4IikgOiBpKCIudGFiLXQiKS5jc3MoInRvcCIsICIwcHgiKQoJCQkJCX0pLCAic2hhbmdwaW4iID09IHQuc2l0ZSAmJiBpKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCkgewoJCQkJCQlpKCIuc3BUYWJzX21lbnVfbmV3X2ZpeGVkIikuY3NzKCJ0b3AiLCAiMzVweCIpCgkJCQkJfSksICIzNjBidXkiID09IHQuc2l0ZSA/IChpKCIjcHJvZHVjdC1kZXRhaWwgLnByb2R1Y3QtZGV0YWlsLW5hdi1maXhlZCIpLmFkZENsYXNzKCJnd2RfdG9wIiksIGkoImh0bWwiKS5hZGRDbGFzcygiZ3dkX3RvcCIpKSA6IGkoImJvZHkiKS5hZGRDbGFzcygiZ3dkX3RvcCIpLCAieWloYW9kaWFuIiA9PSB0LnNpdGUgJiYgaSh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHsKCQkJCQkJaSgiYm9keSIpLmhhc0NsYXNzKCJnd2RfdG9wIikgJiYgaSgiLmFpcl9oaWRlIikuY3NzKHsKCQkJCQkJCXRvcDogIjM1cHgiCgkJCQkJCX0pCgkJCQkJfSksICJ5YW8xMjMiID09IHQuc2l0ZSAmJiBpKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IGkoIi5zdWNrdG9wIikuY3NzKCJ0b3AiKTsKCQkJCQkJIjBweCIgPT0gZSAmJiBpKCJib2R5IikuaGFzQ2xhc3MoImd3ZF90b3AiKSAmJiBpKCIuc3Vja3RvcCIpLmNzcyh7CgkJCQkJCQl0b3A6ICIzNXB4IgoJCQkJCQl9KQoJCQkJCX0pLCAibWVpY2kiID09IHQuc2l0ZSAmJiBpKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCkgewoJCQkJCQkiZml4ZWQiID09IGkoIi5wcm9UYWJfbSIpLmNzcygicG9zaXRpb24iKSAmJiBpKCJib2R5IikuaGFzQ2xhc3MoImd3ZF90b3AiKSAmJiBpKCIucHJvVGFiX20iKS5jc3MoewoJCQkJCQkJdG9wOiAiMzVweCIKCQkJCQkJfSkKCQkJCQl9KSwgImh0YyIgPT0gdC5zaXRlICYmIGkod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKSB7CgkJCQkJCSJmaXhlZCIgPT0gaSgiI3RvcC1iYXIiKS5jc3MoInBvc2l0aW9uIikgJiYgIjBweCIgPT0gaSgiI3RvcC1iYXIiKS5jc3MoInRvcCIpICYmIGkoImJvZHkiKS5oYXNDbGFzcygiZ3dkX3RvcCIpICYmIGkoIiN0b3AtYmFyIikuY3NzKHsKCQkJCQkJCXRvcDogIjM1cHgiCgkJCQkJCX0pCgkJCQkJfSksICJib3FpaSIgPT0gdC5zaXRlICYmIGkoIi50b3BfYXV0byIpLmNzcyh7CgkJCQkJCXBvc2l0aW9uOiAicmVsYXRpdmUiLAoJCQkJCQl0b3A6ICItMzVweCIKCQkJCQl9KSwgInNhc2EiID09IHQuc2l0ZSAmJiBpKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCkgewoJCQkJCQkiZml4ZWQiID09IGkoIiNwcm9kdWN0LXRhZ3MiKS5jc3MoInBvc2l0aW9uIikgJiYgIjBweCIgPT0gaSgiI3Byb2R1Y3QtdGFncyIpLmNzcygidG9wIikgJiYgaSgiYm9keSIpLmhhc0NsYXNzKCJnd2RfdG9wIikgJiYgKGkoIiNwcm9kdWN0LXRhZ3MiKS5hZGRDbGFzcygiZ3dkX3RvcF9pbXBvcnRhbnQiKSwgaSgiI3Byb2R1Y3QtdGFncyIpLmNzcyh7CgkJCQkJCQl0b3A6ICIzNXB4IgoJCQkJCQl9KSkKCQkJCQl9KSwgInZpdm8iID09IHQuc2l0ZSAmJiBpKCIjaGVhZGVyIikuYXR0cigic3R5bGUiLCAidG9wOiAwcHghaW1wb3J0YW50IiksICJzZXBob3JhY3BzIiA9PSB0LnNpdGUgJiYgKGkoIi5nd2RfdG9wIikuY3NzKCJwYWRkaW5nLXRvcCIsICIwIiksIGkoIiN0b3BGaXgiKS5hZGRDbGFzcygiZ3dkX3RvcF9pbXBvcnRhbnQiKSksICJuZXdlZ2ciID09IHQuc2l0ZSAmJiBpKCJib2R5IikuYWRkQ2xhc3MoImd3ZC1uZXdlZ2ciKSkgOiAoImRpYXBlcnMiID09IHQuc2l0ZSAmJiBpKCIjdWJlcm5hdi13cmFwcGVyIikuY3NzKCJ0b3AiLCAiMHB4IiksICJyb3Nlb25seSIgPT0gdC5zaXRlICYmIGkoImJvZHk+LmhlYWRlciIpLmNzcygidG9wIiwgIjBweCIpLCAiYXBwbGUiID09IHQuc2l0ZSAmJiBpKCIubG9jYWxuYXYtd3JhcHBlciwgLmFzZS1zdGlja3kiKS5yZW1vdmVDbGFzcyh0LmV4dEJyYW5kICsgIl90b3AiKSwgInlvdTE2MyIgPT0gdC5zaXRlICYmIGkoIiNqcy1mdW5jVGFiIikucmVtb3ZlQ2xhc3ModC5leHRCcmFuZCArICJfdG9wIiksICIzNjBidXkiID09IHQuc2l0ZSA/IChpKCIjcHJvZHVjdC1kZXRhaWwgLnByb2R1Y3QtZGV0YWlsLW5hdi1maXhlZCIpLnJlbW92ZUNsYXNzKCJnd2RfdG9wIiksIGkoImh0bWwiKS5yZW1vdmVDbGFzcygiZ3dkX3RvcCIpKSA6IGkoImJvZHkiKS5yZW1vdmVDbGFzcygiZ3dkX3RvcCIpKQoJCQkJfSwKCQkJCUMgPSBmdW5jdGlvbihuKSB7CgkJCQkJdmFyIG8gPSB0LnNlcnZlciArICIvYnJ3ZXh0L3NldHRpbmc/ZnJvbT0iICsgdyh0LmZyb21fZGV2aWNlKSArICImYnR5cGU9IiArICh0LmJ0eXBlID8gdC5idHlwZSA6ICIiKTsKCQkJCQlpZiAoaSgiIyIgKyB0LmV4dE5hbWUgKyAiLW1haW4tbmF2IikuYXBwZW5kKGkoIjxkaXY+IiwgewoJCQkJCQkiY2xhc3MiOiAiZmVlZGJhY2stY2xvc2UiLAoJCQkJCQlpZDogdC5leHROYW1lICsgIi1mZWVkLWNsb3NlIgoJCQkJCX0pLmFwcGVuZChpKCI8YT4iLCB7CgkJCQkJCWhyZWY6ICJqYXZhc2NyaXB0OiIsCgkJCQkJCXRhcmdldDogIl9zZWxmIiwKCQkJCQkJImNsYXNzIjogdC5leHRCcmFuZCArICJfY2xvc2UiLAoJCQkJCQl0aXRsZTogIuWFs+mXrei0reeJqeWFmiIKCQkJCQl9KS5hcHBlbmQoaSgnPGVtIGNsYXNzPSJuZXdiLWJnIj48L2VtPicpKS5jbGljayhmdW5jdGlvbigpIHsKCQkJCQkJci5tYWluYmFyZm9sZCgxKSwgZS5leHBvcnRzLmNsb3NlKCksIGEuZml4X3NmYmVzdF9jbG9zZSgpCgkJCQkJfSkpLmFwcGVuZChpKCc8YSBocmVmPSInICsgbyArICciIHRhcmdldD0iX2JsYW5rIiB0aXRsZT0i5Yqf6IO96K6+572uIiBjbGFzcz0idG9wLWJhci1zZXR0aW5nIj5cbiAgICAgICAgICA8ZW0gY2xhc3M9Im5ld2ItYmciPjwvZW0+XG4gICAgICAgICAgPC9hPicpKS5hcHBlbmQoaSgiPGE+IiwgewoJCQkJCQlocmVmOiAiaHR0cDovL3d3dy4iICsgdC5leHROYW1lICsgIi5jb20vYnJ3ZXh0L3N1Z2dlc3Q/cmVmZXI9IiArIGVuY29kZVVSSUNvbXBvbmVudChkb2N1bWVudC5sb2NhdGlvbi5ocmVmKSArICImZnJvbV9kZXZpY2U9IiArIHcodC5mcm9tX2RldmljZSkgKyAiJmJ0eXBlPSIgKyAodC5idHlwZSA/IHQuYnR5cGUgOiAiIiksCgkJCQkJCSJjbGFzcyI6IHQuZXh0TmFtZSArICItc3VnZ2VzdCIsCgkJCQkJCWlkOiB0LmV4dE5hbWUgKyAiLXN1Z2dlc3QiLAoJCQkJCQl0YXJnZXQ6ICJfYmxhbmsiLAoJCQkJCQl0aXRsZTogIuaPkOW7uuiuruaIluWQkOanvemBh+WIsOeahOmXrumimCIKCQkJCQl9KS5hcHBlbmQoaSgnPGVtIGNsYXNzPSJuZXdiLWJnIj48L2VtPjxzcGFuPuWPjemmiDwvc3Bhbj4nKSkpLmFwcGVuZChpKCI8YT4iLCB7CgkJCQkJCWhyZWY6ICJqYXZhc2NyaXB0OiIsCgkJCQkJCSJjbGFzcyI6IHQuZXh0TmFtZSArICItaWNvbiBmYXZvciIsCgkJCQkJCWlkOiB0LmV4dE5hbWUgKyAiLWZhdm9yIiwKCQkJCQkJdGl0bGU6ICIiID09IHQuZW1haWwgPyAi5pS26JeP5bm26I635b6X6ZmN5Lu35o+Q6YaSIiA6ICLmiJHnmoTmlLbol4/lpLkiLAoJCQkJCQl0YXJnZXQ6ICJfc2VsZiIKCQkJCQl9KS5hcHBlbmQoIjxzcGFuIGNsYXNzPSdoYXNDb2xvciBuZXdiLWJnJz48L3NwYW4+PGIgdGl0bGU9J+aUtuiXj+W5tuiOt+W+l+mZjeS7t+aPkOmGkic+5oiR55qE5pS26JeP5aS5PC9iPiIpKSksIG4gJiYgInVuZGVmaW5lZCIgIT0gdHlwZW9mIG4uY29sbGVjdEluZm8gJiYgKHQuY29sbGVjdEluZm8gPSBuLmNvbGxlY3RJbmZvLCB0LnNpdGUgJiYgdC5zaXRlLmluZGV4T2YoInRhb2JhbyIpID49IDApKSB7CgkJCQkJCXZhciBzID0gIiI7CgkJCQkJCXMgPSBpKCIjSl9Qcm9tb0JveD5zdHJvbmciKS50ZXh0KCksICIiID09IHMgJiYgKHMgPSBpKCIjSl9Qcm9tb1ByaWNlIHN0cm9uZyIpLnRleHQoKSwgIiIgIT0gcyAmJiAocyA9IHMuc3Vic3RyKDEpKSksICIiICE9IHMgJiYgKHMuaW5kZXhPZigiIC0iKSA+IDAgJiYgKHMgPSBzLnN1YnN0cigwLCBzLmluZGV4T2YoIiAtIikpKSwgdC5jb2xsZWN0SW5mby5wcmljZSA9IHMpCgkJCQkJfQoJCQkJCXRyeSB7CgkJCQkJCSJ0YW9iYW8iID09IHQuc2l0ZSB8fCAidG1hbGwiID09IHQuc2l0ZSA/IG4gJiYgbi5jb2xsZWN0SW5mby5kcF9pZCAmJiBuLmV4YWN0X2Fyci50YW9iYW9fc2FtZV9pZCAmJiBuLmNvbGxlY3RJbmZvLmRwX2lkID09IG4uZXhhY3RfYXJyLnRhb2Jhb19zYW1lX2lkICYmIG4uY29sbGVjdEluZm8ucHJpY2UgJiYgcGFyc2VJbnQobi5jb2xsZWN0SW5mby5wcmljZSkgPiAwIHx8IGkoIiMiICsgdC5leHROYW1lICsgIi1mYXZvci1kZXRhaWwgLmFkZCIpLnJlbW92ZSgpIDogKCFuIHx8IG4ubm93ICYmICIiID09IG4ubm93Lm5vd19kcF9pZCkgJiYgaSgiIyIgKyB0LmV4dE5hbWUgKyAiLWZhdm9yLWRldGFpbCAuYWRkIikucmVtb3ZlKCkKCQkJCQl9IGNhdGNoIChsKSB7CgkJCQkJCWlmICh0LmRlYnVnKSB0aHJvdyBsCgkJCQkJfQoJCQkJfSwKCQkJCVMgPSBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9ICc8ZGl2IGlkPSInICsgdC5leHROYW1lICsgJy1tYWluLWNvbnRlbnRzIiBjbGFzcz0iYWNjdXJhdGUgY29udGVudHMgIj4gPC9kaXY+JzsKCQkJCQlpKCIjIiArIHQuZXh0TmFtZSArICItbWFpbi1uYXYiKS5hcHBlbmQoZy5jb21waWxlKGUpKCkpCgkJCQl9OwoJCQllLmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKGUpIHsKCQkJCUIoKSwgeigpLCBDKGUpOwoJCQkJdmFyIGEgPSBuKDc0KS5pbml0KCksCgkJCQkJciA9ICEwOwoJCQkJaSgiIyIgKyB0LmV4dE5hbWUgKyAiLW1haW4tbmF2IikuYXBwZW5kKGkoIjxkaXY+IiwgewoJCQkJCWlkOiB0LmV4dE5hbWUgKyAiLWJhci1pY29ucyIsCgkJCQkJImNsYXNzIjogImljb25zIHBvc19yIgoJCQkJfSkuYXBwZW5kKGkoIjxhPiIsIHsKCQkJCQkiY2xhc3MiOiAic2VhcmNoIG5ld2ItYmciLAoJCQkJCWlkOiB0LmV4dE5hbWUgKyAiLXNlYXJjaCIsCgkJCQkJaHJlZjogImphdmFzY3JpcHQ6IiwKCQkJCQl0aXRsZTogciA/ICLljrvmt5jlrp3mib7lrp3otJ0iIDogIuWOu+i0reeJqeWFmuaQnOe0oiIsCgkJCQkJdGFyZ2V0OiAiX2JsYW5rIgoJCQkJfSkuY2xpY2soZnVuY3Rpb24oZSkgewoJCQkJCXZhciBuID0gaSgiIyIgKyB0LmV4dE5hbWUgKyAiLXNlYXJjaC1wcm9kdWN0IikudmFsKCk7CgkJCQkJaWYgKG4gPSBpLnRyaW0obiksIDEgPT0gaSgiIyIgKyB0LmV4dE5hbWUgKyAiLXNlYXJjaC1wcm9kdWN0IikuYXR0cigiZGVmYXVsdCIpKSBpKCIjIiArIHQuZXh0TmFtZSArICItc2VhcmNoLXByb2R1Y3QiKS52YWwoIiIpLCBpKCIjIiArIHQuZXh0TmFtZSArICItc2VhcmNoLXByb2R1Y3QiKS5hdHRyKCJkZWZhdWx0IiwgMCksIGUucHJldmVudERlZmF1bHQoKTsKCQkJCQllbHNlIGlmICgiIiAhPSBuKSB7CgkJCQkJCWlmIChyKSB2YXIgYSA9ICJodHRwOi8vcy50YW9iYW8uY29tL3NlYXJjaD9xPSIgKyBlbmNvZGVVUklDb21wb25lbnQobik7CgkJCQkJCWVsc2UgYSA9ICJodHRwOi8vd3d3LiIgKyB0LmV4dE5hbWUgKyAiLmNvbS9zZWFyY2g/c19wcm9kdWN0PSIgKyBlbmNvZGVVUklDb21wb25lbnQobik7CgkJCQkJCWkodGhpcykuYXR0cigiaHJlZiIsIGEpCgkJCQkJfSBlbHNlIGkoIiMiICsgdC5leHROYW1lICsgIi1zZWFyY2gtcHJvZHVjdCIpLmZvY3VzKCksIGUucHJldmVudERlZmF1bHQoKQoJCQkJfSkpKS5hcHBlbmQoaSgiPGRpdj4iLCB7CgkJCQkJaWQ6IHQuZXh0TmFtZSArICItYmFyLXNlYXJjaCIsCgkJCQkJImNsYXNzIjogdC5leHROYW1lICsgIi1zZWFyY2gtZm9ybSIKCQkJCX0pLmFwcGVuZChpKCI8Zm9ybT4iLCB7CgkJCQkJaWQ6IHQuZXh0TmFtZSArICItc2VhcmNoLWZvcm0iLAoJCQkJCWFjdGlvbjogciA/ICJodHRwOi8vcy50YW9iYW8uY29tL3NlYXJjaCIgOiAiaHR0cDovL3d3dy4iICsgdC5leHROYW1lICsgIi5jb20vc2VhcmNoIiwKCQkJCQltZXRob2Q6ICJnZXQiLAoJCQkJCXRhcmdldDogIl9ibGFuayIKCQkJCX0pLmFwcGVuZChpKCI8dWw+IiwgewoJCQkJCWlkOiAic2VhcmNoX3dlYnNpdGUiLAoJCQkJCSJjbGFzcyI6ICJub3JpZ2h0IgoJCQkJfSkucHJlcGVuZChpKCI8bGk+IiwgewoJCQkJCSJjbGFzcyI6ICJzZWFyY2hfd2Vic2l0ZV9pdGVtX2hpZGRlbiIKCQkJCX0pLmh0bWwoIjxkaXY+PHNwYW4gY2xhc3M9J3dlYnNpdGVfaXRlbSc+5Zu9576OPC9zcGFuPjxzcGFuIGNsYXNzPSdhcnJvdyc+PC9zcGFuPjwvZGl2PiIpKS5wcmVwZW5kKGkoIjxsaT4iLCB7CgkJCQkJImNsYXNzIjogInNlYXJjaF93ZWJzaXRlX2l0ZW1faGlkZGVuIgoJCQkJfSkuaHRtbCgiPGRpdj48c3BhbiBjbGFzcz0nd2Vic2l0ZV9pdGVtJz7kuIDlj7flupc8L3NwYW4+PHNwYW4gY2xhc3M9J2Fycm93Jz48L3NwYW4+PC9kaXY+IikpLnByZXBlbmQoaSgiPGxpPiIsIHsKCQkJCQkiY2xhc3MiOiAic2VhcmNoX3dlYnNpdGVfaXRlbV9oaWRkZW4iCgkJCQl9KS5odG1sKCI8ZGl2PjxzcGFuIGNsYXNzPSd3ZWJzaXRlX2l0ZW0nPuW9k+W9kzwvc3Bhbj48c3BhbiBjbGFzcz0nYXJyb3cnPjwvc3Bhbj48L2Rpdj4iKSkucHJlcGVuZChpKCI8bGk+IiwgewoJCQkJCSJjbGFzcyI6ICJzZWFyY2hfd2Vic2l0ZV9pdGVtX2hpZGRlbiIKCQkJCX0pLmh0bWwoIjxkaXY+PHNwYW4gY2xhc3M9J3dlYnNpdGVfaXRlbSc+5Lqa6ams6YCKPC9zcGFuPjxzcGFuIGNsYXNzPSdhcnJvdyc+PC9zcGFuPjwvZGl2PiIpKS5wcmVwZW5kKGkoIjxsaT4iLCB7CgkJCQkJImNsYXNzIjogInNlYXJjaF93ZWJzaXRlX2l0ZW1faGlkZGVuIgoJCQkJfSkuaHRtbCgiPGRpdj48c3BhbiBjbGFzcz0nd2Vic2l0ZV9pdGVtJz7oi4/lroE8L3NwYW4+PHNwYW4gY2xhc3M9J2Fycm93Jz48L3NwYW4+PC9kaXY+IikpLnByZXBlbmQoaSgiPGxpPiIsIHsKCQkJCQkiY2xhc3MiOiAic2VhcmNoX3dlYnNpdGVfaXRlbV9oaWRkZW4iCgkJCQl9KS5odG1sKCI8ZGl2PjxzcGFuIGNsYXNzPSd3ZWJzaXRlX2l0ZW0nPuS6rOS4nDwvc3Bhbj48c3BhbiBjbGFzcz0nYXJyb3cnPjwvc3Bhbj48L2Rpdj4iKSkucHJlcGVuZChpKCI8bGk+IiwgewoJCQkJCSJjbGFzcyI6ICJzZWFyY2hfd2Vic2l0ZV9pdGVtX2hpZGRlbiIKCQkJCX0pLmh0bWwoIjxkaXY+PHNwYW4gY2xhc3M9J3dlYnNpdGVfaXRlbSc+5ZSv5ZOB5LyaPC9zcGFuPjxzcGFuIGNsYXNzPSdhcnJvdyc+PC9zcGFuPjwvZGl2PiIpKS5wcmVwZW5kKGkoIjxsaT4iLCB7CgkJCQkJImNsYXNzIjogInNlYXJjaF93ZWJzaXRlX2l0ZW1faGlkZGVuIgoJCQkJfSkuaHRtbCgiPGRpdj48c3BhbiBjbGFzcz0nd2Vic2l0ZV9pdGVtJz7otK3nianlhZo8L3NwYW4+PHNwYW4gY2xhc3M9J2Fycm93Jz48L3NwYW4+PC9kaXY+IikpLnByZXBlbmQoaSgiPGxpPiIsIHsKCQkJCQkiY2xhc3MiOiAic2VhcmNoX3dlYnNpdGVfaXRlbV9zaG93IHNlYXJjaF93ZWJzaXRlX2l0ZW1fc2VsZWN0ICIgKyB0LmV4dEJyYW5kICsgIi1zZWFyY2gtYXJyb3ctZG93biAiCgkJCQl9KS5odG1sKCI8ZGl2PjxzcGFuIGNsYXNzPSd3ZWJzaXRlX2l0ZW0nPua3mOWunTwvc3Bhbj48c3BhbiBjbGFzcz0nYXJyb3cnPjwvc3Bhbj48L2Rpdj4iKSkuY3NzKCJib3JkZXItcmlnaHQtY29sb3IiLCAiI2ZmZiIpKS5hcHBlbmQoaSgiPGlucHV0PiIsIHsKCQkJCQlpZDogdC5leHROYW1lICsgIi1zZWFyY2gtcHJvZHVjdCIsCgkJCQkJdHlwZTogInRleHQiLAoJCQkJCW5hbWU6IHIgPyAicSIgOiAic19wcm9kdWN0IiwKCQkJCQl2YWx1ZTogciA/ICLljrvmt5jlrp3mib7lrp3otJ0iIDogIuWOu+i0reeJqeWFmuaQnOe0oiIsCgkJCQkJImRlZmF1bHQiOiAiMSIsCgkJCQkJc3R5bGU6ICJmbG9hdDpsZWZ0OyIsCgkJCQkJZGVmYXVsdF92YWw6IHIgPyAi5Y675reY5a6d5om+5a6d6LSdIiA6ICLljrvotK3nianlhZrmkJzntKIiCgkJCQl9KSkuYXBwZW5kKGkoIjxpbnB1dD4iLCB7CgkJCQkJdHlwZTogImhpZGRlbiIsCgkJCQkJbmFtZTogImZyb20iLAoJCQkJCXZhbHVlOiAiYnJvd3NlciIKCQkJCX0pKSkpLCBpKCIjIiArIHQuZXh0TmFtZSArICItbWFpbi1uYXYiKS5hcHBlbmQoaSgnPGRpdiBpZD0icmlnaHRfaW5mbyIgY2xhc3M9ImNvbnRlbnRzIj48L2Rpdj4nKSksIGkoIiMiICsgdC5leHROYW1lICsgIi1tYWluLW5hdiIpLmFwcGVuZChpKCI8ZGl2PiIsIHsKCQkJCQkiY2xhc3MiOiAiYWNjdXJhdGUiLAoJCQkJCWlkOiB0LmV4dE5hbWUgKyAiLWJhci1jb21wYXJlIgoJCQkJfSkuYXBwZW5kKGkoIjxkaXY+IiwgewoJCQkJCSJjbGFzcyI6ICJjb250ZW50cyIsCgkJCQkJaWQ6IHQuZXh0TmFtZSArICItbWFpbi1jb250ZW50cyIKCQkJCX0pKSksIGkoIiMiICsgdC5leHROYW1lICsgIi1zZWFyY2giKS5vbigiY2xpY2siLCBmdW5jdGlvbihlKSB7CgkJCQkJdigiY2xpY2s6bWFpbjpzZWFyY2giKSwgYi5sb2coIuS4u+W3peWFt+agj+aQnOe0oueCueWHuyIpCgkJCQl9KSwgby5pbml0KGUpLCBpKCIjIiArIHQuZXh0TmFtZSArICItbWFpbi1jb250ZW50cyIpLmFwcGVuZChpKCI8YT4iLCB7CgkJCQkJaHJlZjogImphdmFzY3JpcHQ6IiwKCQkJCQlpZDogdC5leHROYW1lICsgIi10bWFsbC1kcCIsCgkJCQkJdGFyZ2V0OiAiX3NlbGYiLAoJCQkJCXN0eWxlOiAiZGlzcGxheTpub25lIiwKCQkJCQkiY2xhc3MiOiB0LmV4dE5hbWUgKyAiLXRhYiIKCQkJCX0pLmFwcGVuZChpKCI8c3Bhbj4iLCB7CgkJCQkJImNsYXNzIjogInRtYWxsLWljb24gZ3dkX2JnIgoJCQkJfSkpLmFwcGVuZChpKCI8c3Bhbj4iLCB7CgkJCQkJImNsYXNzIjogInRtYWxsX3RleHQiCgkJCQl9KS50ZXh0KCLlpKnnjKsiKSkuYXBwZW5kKGkoIjxzcGFuPiIsIHsKCQkJCQkiY2xhc3MiOiAibG93ZXN0IHRhb2JhbyAiICsgdC5leHRCcmFuZCArICItcHJpY2UiCgkJCQl9KSkpLmFwcGVuZChpKCI8YT4iLCB7CgkJCQkJaHJlZjogImphdmFzY3JpcHQ6IiwKCQkJCQlpZDogdC5leHROYW1lICsgIi10YW9iYW8tZHAiLAoJCQkJCXRhcmdldDogIl9zZWxmIiwKCQkJCQlzdHlsZTogImRpc3BsYXk6bm9uZSIsCgkJCQkJImNsYXNzIjogdC5leHROYW1lICsgIi10YWIiCgkJCQl9KS5hcHBlbmQoaSgiPHNwYW4+IiwgewoJCQkJCSJjbGFzcyI6ICJ0YW9iYW8taWNvbiBnd2RfYmciCgkJCQl9KSkuYXBwZW5kKGkoIjxzcGFuPiIsIHsKCQkJCQkiY2xhc3MiOiAidGFvYmFvX3RleHQiCgkJCQl9KS50ZXh0KCLmt5jlrp0iKSkuYXBwZW5kKGkoIjxzcGFuPiIsIHsKCQkJCQkiY2xhc3MiOiAibG93ZXN0IHRhb2JhbyAiICsgdC5leHRCcmFuZCArICItcHJpY2UiCgkJCQl9KSkpLCBpKCIjIiArIHQuZXh0TmFtZSArICItbWFpbiIpLmFwcGVuZChpKCI8ZGl2PiIsIHsKCQkJCQkiY2xhc3MiOiAicGFuZWwgdGFvYmFvLWNvbXBhcmUiLAoJCQkJCWlkOiB0LmV4dE5hbWUgKyAiLXRtYWxsLWRwLWRldGFpbCIKCQkJCX0pKS5hcHBlbmQoaSgiPGRpdj4iLCB7CgkJCQkJImNsYXNzIjogInBhbmVsIHRhb2Jhby1jb21wYXJlIiwKCQkJCQlpZDogdC5leHROYW1lICsgIi10YW9iYW8tZHAtZGV0YWlsIgoJCQkJfSkpLCBzLmluaXQoZSksIG4oMTcwKS5pbml0KCksIG4oMTczKS5pbml0KCksIGwuaW5pdChlLnNoYXJlX2dvb2QsIGUubm93KSwgbigxNDIpLm1pbmliYXIoKSwgYy5pbml0KGUubm93LCB0LnVuaW9uKSwgZC5hZGRQcm9tbyhkLmdldFByb21vRGF0YShlKSksICJhbWF6b24iID09PSB0LnNpdGUgJiYgbigxNzUpLmluaXQodC5ub3dfZHBfaWQpOwoJCQkJdHJ5IHsKCQkJCQloLmluaXQodC53aGVyZV9idXlfZHBzLCB0Lm5vd19kcF9pZCwgInRvcCIpCgkJCQl9IGNhdGNoIChnKSB7CgkJCQkJaWYgKHQuZGVidWcpIHRocm93IGcKCQkJCX0KCQkJCXRyeSB7CgkJCQkJbigxNzkpLmluaXQoZSkKCQkJCX0gY2F0Y2ggKGcpIHt9CgkJCQkiIiAhPSBlLmV4YWN0X2Fyci5pc2JuICYmICh0LmlzYm4gPSBlLmV4YWN0X2Fyci5pc2JuKSwgcC5zaG93KGUuZXhhY3RfYXJyLmlzYm4sICJ0b3AiKTsKCQkJCXRyeSB7CgkJCQkJdS5yZXBsYWNlUXVhbihlLnF1YW4pCgkJCQl9IGNhdGNoIChnKSB7CgkJCQkJaWYgKHQuZGVidWcpIHRocm93IGcKCQkJCX0KCQkJCXRyeSB7CgkJCQkJbS5pbml0KCJ0b3AiKQoJCQkJfSBjYXRjaCAoZykgewoJCQkJCWlmICh0LmRlYnVnKSB0aHJvdyBnCgkJCQl9CgkJCQlpZiAoImFtYXpvbiIgPT0gdC5zaXRlICYmICh0LndpZHRoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoID4gMCA/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCA6IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGgsIGkoIiMiICsgdC5leHROYW1lICsgIi1tYWluIikuY3NzKCJ3aWR0aCIsIHQud2lkdGgpKSwgdGhpcy5zZXRfcGFuZWxfaG92ZXJfZXZlbnQoKSwgaSgiLnBhbmVsLW5vdGljZSIpLnVuYmluZCgpLCB0LmluaXRfaXRlbV9saXN0KCksIGkod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7CgkJCQkJdC50b3BSZXNpemVUaW1lciAmJiBjbGVhclRpbWVvdXQodC50b3BSZXNpemVUaW1lciksIHQudG9wUmVzaXplVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCQl0LnNldF9pdGVtX2FyZ3MoKSwgdC5zZXRfcGFnZV9hcmdzKCksIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCA+IDAgPyB0LndpZHRoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIDogdC53aWR0aCA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGgsIGkoIiMiICsgdC5leHROYW1lICsgIi1tYWluIikuY3NzKCJ3aWR0aCIsIHQud2lkdGgpLCBpKCIjIiArIHQuZXh0TmFtZSArICItYjJjLWRwLWRldGFpbCAuYWxsLXByb2R1Y3RzIikuY3NzKCJ3aWR0aCIsIHQud2lkdGggLSAzMDIgLSAyICogYS5iMmNUdXJucFcpLCBpKCIjIiArIHQuZXh0TmFtZSArICItYjJjX2Z1enp5LWRwLWRldGFpbCAuYWxsLXByb2R1Y3RzIikuY3NzKCJ3aWR0aCIsIHQud2lkdGggLSAyICogYS50dXJucFcpLCBpKCIjIiArIHQuZXh0TmFtZSArICItdGFvYmFvLWRwLWRldGFpbCAuYWxsLXByb2R1Y3RzIikuY3NzKCJ3aWR0aCIsIHQud2lkdGggLSAyICogYS50dXJucFcpLCBpKCIjIiArIHQuZXh0TmFtZSArICItbWFpbiAucmVjb21tZW5kIC5hbGwtcHJvZHVjdHMiKS5jc3MoIndpZHRoIiwgdC53aWR0aCAtIDIgKiBhLnR1cm5wVyksIHQuZml4V2lkdGgoKQoJCQkJCX0sIDMwMCkKCQkJCX0pLCB0LnNldF9pdGVtX2FyZ3MoKSwgdC5zZXRfcGFnZV9hcmdzKCksICJhbWF6b24iID09IHQuc2l0ZSAmJiAodC53aWR0aCA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGgsIGkoIiMiICsgdC5leHROYW1lICsgIi1tYWluIikuY3NzKCJ3aWR0aCIsIHQud2lkdGgpKSwgdC5sb2FkX2ltYWdlKCJiMmMiLCAwLCB0LnBhZ2Vfc2l6ZV9taW5pKSwgdC5sb2FkX2ltYWdlKCJiMmNfZnV6enkiLCAwLCBhLnNob3dMaXN0TnVtKSwgdC5sb2FkX2ltYWdlKCJhbHNvX2J1eSIsIDAsIHQucGFnZV9zaXplKSwgIiIgIT0gZS5leGFjdF9hcnIuaXNibikgaSgiIyIgKyB0LmV4dE5hbWUgKyAiLXNlYXJjaC1wcm9kdWN0IikudmFsKGUuZXhhY3RfYXJyLmlzYm4pOwoJCQkJZWxzZSBpZiAoIiIgIT0gZS5leGFjdF9hcnIuYnJhbmQgJiYgIiIgIT0gZS5leGFjdF9hcnIudHlwZSkgaSgiIyIgKyB0LmV4dE5hbWUgKyAiLXNlYXJjaC1wcm9kdWN0IikudmFsKGUuZXhhY3RfYXJyLmJyYW5kICsgIiAiICsgZS5leGFjdF9hcnIudHlwZSk7CgkJCQllbHNlIHsKCQkJCQl2YXIgXyA9ICIiICE9IGUuZXhhY3RfYXJyLmtleXdvcmRzID8gZS5leGFjdF9hcnIua2V5d29yZHMgOiBlLmNvbGxlY3RJbmZvLnRpdGxlOwoJCQkJCSIiID09IF8gJiYgKF8gPSBlLm5vdy5jdGl0bGUpLCBfID0gXyB8fCAiIiwgaSgiIyIgKyB0LmV4dE5hbWUgKyAiLXNlYXJjaC1wcm9kdWN0IikudmFsKF8ucmVwbGFjZSgvLC9nLCAiICIpKQoJCQkJfQoJCQkJaSgiIyIgKyB0LmV4dE5hbWUgKyAiLXNlYXJjaC1wcm9kdWN0IikuYXR0cigiZGVmYXVsdCIsIDApLCBpKCIuIiArIHQuZXh0TmFtZSArICItbm90aWNlLWNsb3NlIikuY2xpY2soZnVuY3Rpb24oKSB7CgkJCQkJeS5nZXQodC5zZXJ2ZXIgKyAiL2Jyd2V4dC9wZXJtYW5lbnRfaWQ/dmVyc2lvbj0yJm9wPXNldF9ub3RpY2Umbm90aWNlPSIgKyB0Lm5vdGljZSkuZG9uZShmdW5jdGlvbigpIHsKCQkJCQkJaSgiLnBhbmVsLW5vdGljZSIpLmhpZGUoKQoJCQkJCX0pCgkJCQl9KTsKCQkJCXRyeSB7CgkJCQkJdC5kY21FeHQgfHwgbigxODMpLmluaXQoZS5ub3cpCgkJCQl9IGNhdGNoIChnKSB7fQoJCQkJdHJ5IHsKCQkJCQl0LmRjbUV4dCB8fCBuKDE5MCkuaW5pdCgpCgkJCQl9IGNhdGNoIChnKSB7CgkJCQkJaWYgKHQuZGVidWcpIHRocm93IGcKCQkJCX0KCQkJCXRyeSB7CgkJCQkJZi5pbnNlcnRTZXR0aW5nVmlldyhlKQoJCQkJfSBjYXRjaCAoZykgewoJCQkJCWlmICh0LmRlYnVnKSB0aHJvdyBnCgkJCQl9CgkJCQl0aGlzLmZpeE5hdGl2ZVRvcCgpLCB0LmZpeFdpZHRoKCksIGooITApLCAxID09IHQucF9mb2xkICYmIHRoaXMuY2xvc2UoKQoJCQl9LCBlLmV4cG9ydHMuc2V0X3BhbmVsX2hvdmVyX2V2ZW50ID0gZnVuY3Rpb24oKSB7CgkJCQl2YXIgZSA9IHRoaXMsCgkJCQkJbiA9ICJtb3VzZWVudGVyIiwKCQkJCQlhID0gIm1vdXNlbGVhdmUiOwoJCQkJIm1zaWUiICE9IHQuYnJvd3Nlci5hZ2VudCAmJiAobiA9ICJtb3VzZW92ZXIiLCBhID0gIm1vdXNlb3V0IiksIGkoIiMiICsgdC5leHROYW1lICsgIi10cmVuZCIpLm9uKG4sIGZ1bmN0aW9uKCkgewoJCQkJCXYoImhvdmVyOm1haW46cHJpY2VUcmVuZCIpLCBiLmxvZygi5Li75bel5YW35qCP5Lu35qC86LaL5Yq/6byg5qCH5oKs5rWuIikKCQkJCX0pLCBpKCIjIiArIHQuZXh0TmFtZSArICItYjJjLWRwIikub24obiwgZnVuY3Rpb24oKSB7CgkJCQkJYi5sb2coIuS4u+W3peWFt+agj+avlOS7t+m8oOagh+aCrOa1riIpLCB2KCJob3ZlcjptYWluOmNvbXBhcmUiKQoJCQkJfSksIGkoIiMiICsgdC5leHROYW1lICsgIi10bWFsbC1kcCIpLm9uKG4sIGZ1bmN0aW9uKCkgewoJCQkJCXYoImhvdmVyOm1haW46Y29tcGFyZSIpLCBiLmxvZygi5Li75bel5YW35qCP5aSp54yr5q+U5Lu36byg5qCH5oKs5rWuIikKCQkJCX0pLCBpKCIjIiArIHQuZXh0TmFtZSArICItdGFvYmFvLWRwIikub24obiwgZnVuY3Rpb24oKSB7CgkJCQkJdigiaG92ZXI6bWFpbjpjb21wYXJlIiksIGIubG9nKCLkuLvlt6XlhbfmoI/mt5jlrp3mr5Tku7fpvKDmoIfmgqzmta4iKQoJCQkJfSksIGkoIiMiICsgdC5leHROYW1lICsgIi1iMmMtZHAtZGV0YWlsIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJdigiY2xpY2s6bWFpbjpjb21wYXJlIiksIGIubG9nKCLkuLvlt6XlhbfmoI/mr5Tku7fngrnlh7siKQoJCQkJfSksIGkoIiMiICsgdC5leHROYW1lICsgIi10bWFsbC1kcC1kZXRhaWwiKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQl2KCJjbGljazptYWluOmNvbXBhcmUiKSwgYi5sb2coIuS4u+W3peWFt+agj+WkqeeMq+avlOS7t+eCueWHuyIpCgkJCQl9KSwgaSgiIyIgKyB0LmV4dE5hbWUgKyAiLXRhb2Jhby1kcC1kZXRhaWwiKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQl2KCJjbGljazptYWluOmNvbXBhcmUiKSwgYi5sb2coIuS4u+W3peWFt+agj+a3mOWuneavlOS7t+eCueWHuyIpCgkJCQl9KSwgaSgiIyIgKyB0LmV4dE5hbWUgKyAiLW1haW4gLmFjY3VyYXRlIC4iICsgdC5leHROYW1lICsgIi10YWIiKS5lYWNoKGZ1bmN0aW9uKG8pIHsKCQkJCQlpKHRoaXMpLmJpbmQobiwgZnVuY3Rpb24obikgewoJCQkJCQljbGVhckludGVydmFsKHQudGltZXIyKSwgZS5tb3VzZV9vdmVyX2V2ZW50KGkodGhpcykpCgkJCQkJfSksIGkodGhpcykuYmluZChhLCBmdW5jdGlvbigpIHsKCQkJCQkJY2xlYXJJbnRlcnZhbCh0LnRpbWVyKSwgdC50aW1lcjIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsKCQkJCQkJCXQudGFiX291dCgpLCBpKCIjIiArIHQuZXh0TmFtZSArICItbWFpbiAucGFuZWwiKS5oaWRlKCksIGkoIiMiICsgdC5leHROYW1lICsgIi1tYWluIC5wYW5lbC1taW5pLCAuIiArIHQuZXh0TmFtZSArICItbWluaSAucGFuZWwtbWluaSIpLmhpZGUoKSwgY2xlYXJJbnRlcnZhbCh0LnRpbWVyMikKCQkJCQkJfSwgMzAwKQoJCQkJCX0pLCBpKHRoaXMpLmNsaWNrKGZ1bmN0aW9uKCkgewoJCQkJCQljbGVhckludGVydmFsKHQudGltZXIyKSwgImJsb2NrIiA9PSBpKCIjIiArIGkodGhpcykuYXR0cigiaWQiKSArICItZGV0YWlsIikuY3NzKCJkaXNwbGF5IikgPyAodC50YWJfb3V0KCksIGkoIiMiICsgdC5leHROYW1lICsgIi1tYWluIC5wYW5lbCIpLmhpZGUoKSwgaSgiIyIgKyB0LmV4dE5hbWUgKyAiLW1haW4gLnBhbmVsLW1pbmksIC4iICsgdC5leHROYW1lICsgIi1taW5pIC5wYW5lbC1taW5pIikuaGlkZSgpKSA6IGUubW91c2Vfb3Zlcl9ldmVudChpKHRoaXMpKQoJCQkJCX0pCgkJCQl9KSwgaSgiIyIgKyB0LmV4dE5hbWUgKyAiLW1haW4gLiIgKyB0LmV4dE5hbWUgKyAiLWljb24sIC4iICsgdC5leHROYW1lICsgIi1taW5pIC4iICsgdC5leHROYW1lICsgIi1pY29uIikuZWFjaChmdW5jdGlvbigpIHsKCQkJCQlpKHRoaXMpLmJpbmQoImNsaWNrIiwgZnVuY3Rpb24odCkgewoJCQkJCQl2YXIgbiA9IGkodGhpcykuYXR0cigiaWQiKTsKCQkJCQkJImJsb2NrIiAhPSBpKCIjIiArIG4gKyAiLWRldGFpbCIpLmNzcygiZGlzcGxheSIpID8gZS5tb3VzZV9jbGlja19ldmVudChpKHRoaXMpKSA6IGkoIiMiICsgbiArICItZGV0YWlsIikuY3NzKCJkaXNwbGF5IiwgIm5vbmUiKQoJCQkJCX0pCgkJCQl9KSwgaSgiIyIgKyB0LmV4dE5hbWUgKyAiLW1haW4gLnBhbmVsLCAuIiArIHQuZXh0TmFtZSArICItbWluaSAucGFuZWwiKS5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gaSh0aGlzKS5hdHRyKCJpZCIpOwoJCQkJCWUgPSBlLnN1YnN0cigwLCBlLmxlbmd0aCAtIDcpLCBpKHRoaXMpLmJpbmQobiwgZnVuY3Rpb24oKSB7CgkJCQkJCWNsZWFySW50ZXJ2YWwodC50aW1lcjIpLCB0LnRhYl9pbihpKCIjIiArIGUpKSwgaSh0aGlzKS5zaG93KCkKCQkJCQl9KSwgaSh0aGlzKS5iaW5kKGEsIGZ1bmN0aW9uKCkgewoJCQkJCQljbGVhckludGVydmFsKHQudGltZXIpLCB0LnRpbWVyMiA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkgewoJCQkJCQkJdC50YWJfb3V0KCksIGkoIiMiICsgdC5leHROYW1lICsgIi1tYWluIC5wYW5lbCIpLmhpZGUoKSwgaSgiIyIgKyB0LmV4dE5hbWUgKyAiLW1haW4gLnBhbmVsLW1pbmksIC4iICsgdC5leHROYW1lICsgIi1taW5pIC5wYW5lbC1taW5pIikuaGlkZSgpLCBjbGVhckludGVydmFsKHQudGltZXIyKQoJCQkJCQl9LCAzMDApCgkJCQkJfSkKCQkJCX0pLCBpKCIjIiArIHQuZXh0TmFtZSArICItbWFpbiAucGFuZWwtbWluaSwgLiIgKyB0LmV4dE5hbWUgKyAiLW1pbmkgLnBhbmVsLW1pbmkiKS5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJCWkodGhpcykuYmluZChuLCBmdW5jdGlvbigpIHsKCQkJCQkJY2xlYXJJbnRlcnZhbCh0LnRpbWVyMiksIGkodGhpcykuc2hvdygpCgkJCQkJfSksIGkodGhpcykuYmluZChhLCBmdW5jdGlvbigpIHsKCQkJCQkJY2xlYXJJbnRlcnZhbCh0LnRpbWVyKSwgdC50aW1lcjIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsKCQkJCQkJCXQudGFiX291dCgpLCBpKCIjIiArIHQuZXh0TmFtZSArICItbWFpbiAucGFuZWwiKS5oaWRlKCksIGkoIiMiICsgdC5leHROYW1lICsgIi1tYWluIC5wYW5lbC1taW5pLCAuIiArIHQuZXh0TmFtZSArICItbWluaSAucGFuZWwtbWluaSIpLmhpZGUoKSwgY2xlYXJJbnRlcnZhbCh0LnRpbWVyMikKCQkJCQkJfSwgMzAwKQoJCQkJCX0pCgkJCQl9KQoJCQl9LCBlLmV4cG9ydHMuZml4TmF0aXZlVG9wID0gZnVuY3Rpb24oKSB7CgkJCQlmdW5jdGlvbiBlKGUpIHsKCQkJCQlpKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCkgewoJCQkJCQlmb3IgKHZhciBuID0gMDsgbiA8IGUubGVuZ3RoOyBuKyspICJmaXhlZCIgPT0gaShlW25dKS5jc3MoInBvc2l0aW9uIikgPyAiYmxvY2siID09IGkoIiMiICsgdC5leHROYW1lICsgIi1tYWluIikuY3NzKCJkaXNwbGF5IikgPyBpKGVbbl0pLmNzcygidG9wIiwgMzIpIDogaShlW25dKS5jc3MoInRvcCIsIDApIDogaShlW25dKS5jc3MoInRvcCIsICJhdXRvIikKCQkJCQl9KQoJCQkJfQoJCQkJdmFyIG4gPSB0LnNpdGUsCgkJCQkJYSA9ICIiOwoJCQkJZm9yICh2YXIgbyBpbiB0aGlzLmZpeFRvcFBhdHRlcm4pIG8gPT0gbiAmJiAoYSA9IHRoaXMuZml4VG9wUGF0dGVybltvXSwgZShhKSkKCQkJfSwgZS5leHBvcnRzLmZpeFRvcFBhdHRlcm4gPSB7CgkJCQkiMzYwYnV5IjogWyIjcHJvLWRldGFpbC1oZCJdLAoJCQkJeWloYW9kaWFuOiBbIiNKX2ZpeGVkRGVzIl0sCgkJCQl6b2w6IFsiI2ZpeGVkVGFnTmF2Il0sCgkJCQl2aXBzaG9wOiBbIiNKX2J1eV90b3BiYXIiXSwKCQkJCSI1MWJ1eSI6IFsiI2luZm9fdGl0Il0sCgkJCQlkYW5nZGFuZzogWyIjYWxsX3RhYl9wYW5lbCJdLAoJCQkJZ29tZTogWyIjZml4dGFib3giXSwKCQkJCXRhb2JhbzogWyIjSl9UYWJCYXJXcmFwIl0sCgkJCQlsb2dpdGVjaDogWyJ1bC5wcm9kdWN0LWRldGFpbC10YWItbmF2Il0sCgkJCQlhcHBsZTogWyIjYWMtZ2xvYmFsbmF2Il0KCQkJfSwgZS5leHBvcnRzLnRoaXJkQmFyID0gZnVuY3Rpb24oKSB7CgkJCQlCKCksIHooKSwgQygpLCBTKCksIF8uaW5pdCgpLCB4LmluaXQoKSwgdS5ibGlua1BhZ2UodC5ocmVmKSwgbigxOTEpLmluaXQoKSwgbigxOTQpLmluaXQoKQoJCQl9LCBlLmV4cG9ydHMubW91c2Vfb3Zlcl9ldmVudCA9IGZ1bmN0aW9uKGUpIHsKCQkJCXZhciBuID0gZS5hdHRyKCJpZCIpOwoJCQkJY2xlYXJJbnRlcnZhbCh0LnRpbWVyKSwgdC50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkgewoJCQkJCXQudGFiX291dCgpLCB0LnRhYl9pbihpKCIjIiArIG4pKSwgaSgiIyIgKyB0LmV4dE5hbWUgKyAiLW1haW4gLnBhbmVsIikuaGlkZSgpLCBpKCIjIiArIHQuZXh0TmFtZSArICItbWFpbiAucGFuZWwtbWluaSwgLiIgKyB0LmV4dE5hbWUgKyAiLW1pbmkgLnBhbmVsLW1pbmkiKS5oaWRlKCksIGUuYWRkQ2xhc3MoInRhYm1zX2hvdmVyIiksIGkoIiMiICsgbiArICItZGV0YWlsIikuc2hvdygpLCBjbGVhckludGVydmFsKHQudGltZXIpCgkJCQl9LCAyMDApCgkJCX0sIGUuZXhwb3J0cy5tb3VzZV9jbGlja19ldmVudCA9IGZ1bmN0aW9uKGUpIHsKCQkJCWNsZWFySW50ZXJ2YWwodC50aW1lciksIGNsZWFySW50ZXJ2YWwodC50aW1lcjIpOwoJCQkJdmFyIG4gPSBlLmF0dHIoImlkIik7CgkJCQl0LnRhYl9vdXQoKSwgdC50YWJfaW4oZSksIGkoIiMiICsgdC5leHROYW1lICsgIi1tYWluIC5wYW5lbCIpLmhpZGUoKSwgaSgiIyIgKyB0LmV4dE5hbWUgKyAiLW1haW4gLnBhbmVsLW1pbmksIC4iICsgdC5leHROYW1lICsgIi1taW5pIC5wYW5lbC1taW5pIikuaGlkZSgpLCBpKCIjIiArIG4gKyAiLWRldGFpbCIpLnNob3coKQoJCQl9LCBlLmV4cG9ydHMuZGlzcGxheV9zZWFyY2hfYmFyX3RvcCA9IGZ1bmN0aW9uKGUpIHsKCQkJCXooKSwgXy5pbml0KCksIHguaW5pdCgpCgkJCX0KCQl9KS5jYWxsKHQsIG4oMSksIG4oNikpCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCXZhciBpOwoJCShmdW5jdGlvbihhKSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJaSA9IGZ1bmN0aW9uKCkgewoJCQkJdmFyIGUgPSBuKDYpLAoJCQkJCXQgPSB7fTsKCQkJCXJldHVybiB0LmJpbmRCZ2lmcmFtZSA9IGZ1bmN0aW9uKCkgewoJCQkJCWUuZm4uYmdpZnJhbWUgPSBmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuIHRoaXMKCQkJCQl9LCBlLmZuLmJnSWZyYW1lID0gZS5mbi5iZ2lmcmFtZQoJCQkJfSwgdC5maXhfc2ZiZXN0X3RvcF9iYXIgPSBmdW5jdGlvbih0KSB7CgkJCQkJdmFyIG4gPSB0OwoJCQkJCWlmICgic2ZiZXN0IiA9PSBhLnNpdGUpIHRyeSB7CgkJCQkJCWlmICgibXNpZSIgIT0gYS5icm93c2VyLmFnZW50KSB7CgkJCQkJCQl0cnkgewoJCQkJCQkJCWUoIiNmbG9hdCIpLmFuaW1hdGUoewoJCQkJCQkJCQkicGFkZGluZy10b3AiOiBuCgkJCQkJCQkJfSwgNTAwLCAic3dpbmciKQoJCQkJCQkJfSBjYXRjaCAoaSkgewoJCQkJCQkJCWUoIiNmbG9hdCIpLmNzcygidG9wIiwgbikKCQkJCQkJCX0KCQkJCQkJCW4gPSAiNjhweCIKCQkJCQkJfSBlbHNlIGUoIiNmbG9hdCIpLmNzcygidG9wIiwgbikKCQkJCQl9IGNhdGNoIChpKSB7CgkJCQkJCWlmIChhLmRlYnVnKSB0aHJvdyBpCgkJCQkJfQoJCQkJCXJldHVybiBuCgkJCQl9LCB0LmZpeF9zZmJlc3RfY2xvc2UgPSBmdW5jdGlvbigpIHsKCQkJCQlpZiAoInNmYmVzdCIgPT0gYS5zaXRlKSB0cnkgewoJCQkJCQlpZiAoc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJCWUoIiNmbG9hdCIpLmNzcyh7CgkJCQkJCQkJInBhZGRpbmctdG9wIjogIjBweCIKCQkJCQkJCX0pLCBlKCJib2R5IikuY3NzKCJwYWRkaW5nLXRvcCIsICIzNnB4IikKCQkJCQkJfSwgNTAxKSwgIm1zaWUiID09IGEuYnJvd3Nlci5hZ2VudCkgewoJCQkJCQkJZSgiYm9keSIpLmNzcygicGFkZGluZy10b3AiLCAiMzZweCIpOwoJCQkJCQkJdmFyIHQgPSBhLklFNiA/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgOiAwOwoJCQkJCQkJZSgiI2Zsb2F0IikuY3NzKCJ0b3AiLCB0ICsgInB4IikKCQkJCQkJfQoJCQkJCX0gY2F0Y2ggKG4pIHsKCQkJCQkJaWYgKGEuZGVidWcpIHRocm93IG4KCQkJCQl9CgkJCQl9LCB0CgkJCX0uY2FsbCh0LCBuLCB0LCBlKSwgISh2b2lkIDAgIT09IGkgJiYgKGUuZXhwb3J0cyA9IGkpKQoJCX0pLmNhbGwodCwgbigxKSkKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJdmFyIGk7CgkJKGZ1bmN0aW9uKGEpIHsKCQkJInVzZSBzdHJpY3QiOwoJCQlpID0gZnVuY3Rpb24oKSB7CgkJCQlmdW5jdGlvbiBlKG4pIHsKCQkJCQlmb3IgKHZhciBpID0gYltuXSwgYSA9IDA7IGEgPCBpLmxlbmd0aDsgYSsrKQoJCQkJCQlpZiAoZyhpW2FdKS5pcygiOnZpc2libGUiKSAmJiB0KCkpIHJldHVybiBoID0gbiwgdm9pZCBvKG0pOwoJCQkJCXYrKywgMTAgIT09IHYgJiYgc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJZShuKQoJCQkJCX0sIDFlMykKCQkJCX0KCgkJCQlmdW5jdGlvbiB0KCkgewoJCQkJCXZhciBlID0gITEsCgkJCQkJCXQgPSBhLnNpdGU7CgkJCQkJc3dpdGNoICh0KSB7CgkJCQkJCWNhc2UgIjM2MGJ1eSI6CgkJCQkJCQllID0gITA7CgkJCQkJCQlicmVhazsKCQkJCQkJY2FzZSAiZGFuZ2RhbmciOgoJCQkJCQkJZSA9ICEwOwoJCQkJCQkJYnJlYWs7CgkJCQkJCWNhc2UgInN1bmluZyI6CgkJCQkJCQllID0gZygiI3FyQ29kZSIpLnRleHQoKS5pbmRleE9mKCLmiYvmnLrotK3kubAiKSA+IC0xID8gITAgOiBnKCIjcGhvbmVPcmRlckNvZGUiKS50ZXh0KCkuaW5kZXhPZigi5omL5py65LiT5Lqr5Lu3IikgPiAtMSAmJiBnKCIjcGhvbmVPcmRlckNvZGUiKS5pcygiOnZpc2libGUiKSA/ICEwIDogITE7CgkJCQkJCQlicmVhazsKCQkJCQkJY2FzZSAiNTFidXkiOgoJCQkJCQkJaWYgKGcoIiNzZWFfZGVzYyIpLnRleHQoKS5pbmRleE9mKCLmiYvmnLrkuJPkuqvku7ciKSA+IC0xKSBlID0gITA7CgkJCQkJCQllbHNlIGlmIChnKCIueHByaWNlIC5tLXFyY29kZSAudHh0IGVtIikudGV4dCgpLmluZGV4T2YoIuaJi+acuui0reS5sOecgSIpID4gLTEpIHsKCQkJCQkJCQlpZiAoZygiLnhwcmljZSAubS1xcmNvZGUgLnR4dCBlbSIpLnRleHQoKS5pbmRleE9mKCLvv6UwLjAwIikgPiAtMSkgcmV0dXJuICExOwoJCQkJCQkJCWUgPSAhMAoJCQkJCQkJfSBlbHNlIGUgPSAhMTsKCQkJCQkJCWJyZWFrOwoJCQkJCQljYXNlICJnb21lIjoKCQkJCQkJCSLmiYvmnLrkuJPkuqsiID09IGcoIiNzaG91aml6aHVhbnhpYW5nX2JveCAuaGxfcmVkX2JnIikudGV4dCgpICYmIChlID0gITApOwoJCQkJCQkJYnJlYWs7CgkJCQkJCWNhc2UgInlpaGFvZGlhbiI6CgkJCQkJCQllID0gZygiI3Byb2R1Y3RTdWJOYW1lIikudGV4dCgpLmluZGV4T2YoIuaJi+acuuerr+S4i+WNlSIpID4gLTEgPyAhMCA6ICExCgkJCQkJfQoJCQkJCXJldHVybiBlCgkJCQl9CgoJCQkJZnVuY3Rpb24gaSgpIHsKCQkJCQlmb3IgKHZhciB0IGluIGIpIGEuc2l0ZSA9PT0gdCAmJiBlKHQpOwoJCQkJCXJldHVybiAwID09PSB2ID8gITEgOiB2b2lkIDAKCQkJCX0KCgkJCQlmdW5jdGlvbiBvKGUpIHsKCQkJCQl2YXIgdCA9IGRvY3VtZW50LmxvY2F0aW9uLmhyZWY7CgkJCQkJXy5nZXQoYS5zZXJ2ZXIgKyAiL2V4dGVuc2lvbj9hYz1nb19tb2JpbGUmdXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQodCkpLmRvbmUoZnVuY3Rpb24oZSkgewoJCQkJCQkiIiAhPT0gZS51cmwgJiYgMSA9PT0gZS5zdGF0dXMgJiYgKCJsdXlvdSIgPT0gYS5idHlwZSB8fCAianV6aSIgPT09IGEuZnJvbV9kZXZpY2UgPyAobChlLnVybCksIGMoZS51cmwpKSA6IGooZS51cmwpKQoJCQkJCX0pCgkJCQl9CgoJCQkJZnVuY3Rpb24gcigpIHsKCQkJCQlyZXR1cm4gIjM2MGJ1eSIgPT0gYS5zaXRlID8gITAgOiAiQWN0aXZlWE9iamVjdCIgaW4gd2luZG93ID8gITEgOiAhMAoJCQkJfQoKCQkJCWZ1bmN0aW9uIHMoKSB7CgkJCQkJdmFyIGUgPSAiIjsKCQkJCQlnKCIjYmpkX21fcHJpY2UiKS5vbigibW91c2VlbnRlciIsIGZ1bmN0aW9uKCkgewoJCQkJCQllID0gZyh0aGlzKS5jc3MoImNvbG9yIiksICJzdW5pbmciID09IGEuc2l0ZSB8fCBhLnNpdGUuaW5kZXhPZigic3VuaW5nIikgPiAtMSA/IGcodGhpcykuY3NzKCJjb2xvciIsICIjZmZmIikgOiBnKHRoaXMpLmNzcygiY29sb3IiLCAiIzAwMzM5OSIpCgkJCQkJfSkub24oIm1vdXNlbGVhdmUiLCBmdW5jdGlvbigpIHsKCQkJCQkJZyh0aGlzKS5jc3MoImNvbG9yIiwgZSkKCQkJCQl9KSwgZygiI2JqZF9tX3ByaWNlIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCW4oMjYpKCJjbGljazptb2JpbGVfcHJpY2UiKSwgeC5sb2coIuaJi+acuuS4k+S6q+S7t+eCueWHuyIpCgkJCQkJfSkKCQkJCX0KCgkJCQlmdW5jdGlvbiBsKGUpIHsKCQkJCQlpZiAoZSAmJiAiMzYwYnV5IiA9PSBoKSB7CgkJCQkJCXZhciB0ID0gcCgpLAoJCQkJCQkJaSA9IG4oMTU5KTsKCQkJCQkJZygiI3N1bW1hcnktcHJpY2UgLmRkIikuZXEoMCkuYXBwZW5kKHcuY29tcGlsZShpKSh7CgkJCQkJCQl1cmw6IGQoZSksCgkJCQkJCQlwcmljZTogdCwKCQkJCQkJCW5ld19leHRlbnNpb246IGEubmV3X2V4dGVuc2lvbiwKCQkJCQkJCWV4dEJyYW5kOiBhLmV4dEJyYW5kCgkJCQkJCX0pKSwgZygiIyIgKyBhLmV4dEJyYW5kICsgIl9tb2JpbGVfcHJpY2UiKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQkJCW4oMjYpKCJjbGljazptb2JpbGVfcHJpY2VfMzYwYnV5IiksIHgubG9nKCLmiYvmnLrkuJPkuqvku7fngrnlh7syamQiKQoJCQkJCQl9KQoJCQkJCX0KCQkJCX0KCgkJCQlmdW5jdGlvbiBjKGUpIHsKCQkJCQlpZiAoZSkgewoJCQkJCQl2YXIgdCA9IHAoKSwKCQkJCQkJCW4gPSAi6LSt54mp5YWa5bCG5bim5oKo5YmN5b6A5omL5py654mI6aG16Z2i77yM5Lul5LiT5Lqr5Lu36LSt5Lmw5ZWG5ZOBIjsKCQkJCQkJYS5uZXdfZXh0ZW5zaW9uICYmIChuID0gIiIpOwoJCQkJCQl2YXIgaSwgbyA9IGtbaF07CgkJCQkJCWlmIChnLmlzQXJyYXkoeltoXSkpIHsKCQkJCQkJCWZvciAodmFyIHIgPSAwOyByIDwgeltoXS5sZW5ndGg7IHIrKykKCQkJCQkJCQlpZiAoZyh6W2hdW3JdKS5sZW5ndGggPiAwKSB7CgkJCQkJCQkJCWkgPSB6W2hdW3JdOwoJCQkJCQkJCQlicmVhawoJCQkJCQkJCX0KCQkJCQkJfSBlbHNlIGkgPSB6W2hdOwoJCQkJCQkiZGFuZ2RhbmciID09IGggfHwgInN1bmluZyIgPT0gaCB8fCAiMzYwYnV5IiA9PSBoIHx8ICIzNjBidXlfMSIgPT0gaCA/IGcoaSkuZXEoMCkuYWZ0ZXIody5jb21waWxlKG8pKHsKCQkJCQkJCXVybDogZChlKSwKCQkJCQkJCXByaWNlOiB0LAoJCQkJCQkJdGl0bGU6IG4KCQkJCQkJfSkpIDogZyhpKS5lcSgwKS5iZWZvcmUody5jb21waWxlKG8pKHsKCQkJCQkJCXVybDogZChlKSwKCQkJCQkJCXByaWNlOiB0LAoJCQkJCQkJdGl0bGU6IG4KCQkJCQkJfSkpLCB4LmxvZygi5bGV546w5omL5py65LiT5Lqr5Lu3IiksIHMoKQoJCQkJCX0KCQkJCX0KCgkJCQlmdW5jdGlvbiBkKGUpIHsKCQkJCQl2YXIgdCA9IGEudG9Nb2JpbGVVcmw7CgkJCQkJcmV0dXJuIHQgKyAiL3VuaW9uL2dvP3NpdGVfaWQ9IiArIHUuc2l0ZV9pZCArICImdGFyZ2V0X3VybD0iICsgZSArICImdW5pb249IiArIG0gKyAiJmNvbHVtbj16aHVhbnhpYW5nXyIgKyB1Lm5vd19kcF9pZAoJCQkJfQoKCQkJCWZ1bmN0aW9uIHAoKSB7CgkJCQkJdmFyIGUgPSAiIjsKCQkJCQlpZiAoKCIzNjBidXkiID09IGggfHwgIjM2MGJ1eV8xIiA9PSBoKSAmJiAoZSA9IGcoeVtoXSkudGV4dCgpKSwgImRhbmdkYW5nIiA9PSBoICYmIChlID0gZyh5W2hdKS50ZXh0KCkpLCAieWloYW9kaWFuIiA9PSBoKSB7CgkJCQkJCXZhciB0ID0gZygiI3Byb2R1Y3RTdWJOYW1lIikudGV4dCgpLm1hdGNoKC8oWzAtOS5dKynlhYMvKTsKCQkJCQkJdCAmJiAoZSA9ICLCpSIgKyB0WzFdKQoJCQkJCX0KCQkJCQlpZiAoIjUxYnV5IiA9PSBoKSB7CgkJCQkJCXZhciB0ID0gZygiI3NlYV9kZXNjIikudGV4dCgpLm1hdGNoKC/kuJPkuqvku7coWzAtOS5dKykvKTsKCQkJCQkJaWYgKHQpIGUgPSAiwqUiICsgdFsxXTsKCQkJCQkJZWxzZSB7CgkJCQkJCQl2YXIgbiA9IGEuZHAucHJpY2UsCgkJCQkJCQkJaSA9IGcoIi54cHJpY2UgLm0tcXJjb2RlIC50eHQgZW0iKS50ZXh0KCkubWF0Y2goL1swLTkuXSsvKTsKCQkJCQkJCWkgJiYgKGkgPSBpWzBdLCBuID0gTnVtYmVyKG4pIC0gTnVtYmVyKGkpLCBlID0gIsKlIiArIG4pCgkJCQkJCX0KCQkJCQl9CgkJCQkJaWYgKCJzdW5pbmciID09IGgpIHsKCQkJCQkJdmFyIHQgPSBOdW1iZXIoZygiLnFyY29kZS1tYWluLXByaWNlIGVtIikudGV4dCgpKTsKCQkJCQkJaWYgKCIiICE9IHQpIHsKCQkJCQkJCXZhciBvID0gYS5kcC5wcmljZSwKCQkJCQkJCQllID0gKG8gLSB0KS50b1N0cmluZygpOyAtIDEgPT0gZS5pbmRleE9mKCIuIikgJiYgKGUgPSAiwqUiICsgZSArICIuMDAiKQoJCQkJCQl9IGVsc2UgewoJCQkJCQkJdmFyIHQgPSBnKCIjcGhvbmVPcmRlckNvZGUiKS50ZXh0KCkubWF0Y2goL1swLTkuXSsvKTsKCQkJCQkJCXQgJiYgKHQgPSB0WzBdKSwgdCAmJiAoZSA9ICLCpSIgKyB0KQoJCQkJCQl9CgkJCQkJfQoJCQkJCWlmICgiZ29tZSIgPT0gaCkgewoJCQkJCQl2YXIgciA9IGcoIiNzYXZlbW9uZXkiKS50ZXh0KCkubWF0Y2goL1swLTkuXSsvKTsKCQkJCQkJciAmJiAociA9IE51bWJlcihyWzBdKSB8fCAwKTsKCQkJCQkJdmFyIG8gPSBhLmRwLnByaWNlLAoJCQkJCQkJZSA9IChvIC0gcikudG9TdHJpbmcoKTsgLSAxID09IGUuaW5kZXhPZigiLiIpICYmIChlID0gIsKlIiArIGUgKyAiLjAwIikKCQkJCQl9CgkJCQkJcmV0dXJuIGUubWF0Y2goL1swLTldezV9LykgJiYgKGUgPSBlLnJlcGxhY2UoL1wuWzAtOV0rLywgIiIpKSwgZQoJCQkJfQoJCQkJdmFyIGgsIHUsIG0sIGYgPSB7fSwKCQkJCQlnID0gbig2KSwKCQkJCQlfID0gbig5KSwKCQkJCQl4ID0gbigxMyksCgkJCQkJdyA9IG4oMTYpLAoJCQkJCXYgPSAwLAoJCQkJCWIgPSB7CgkJCQkJCSIzNjBidXkiOiBbIiNwcm9tLW1idXkgLm1vYi1idXkiLCAiI20tcGlyY2UiXSwKCQkJCQkJeWloYW9kaWFuOiBbIiNwcm9kdWN0U3ViTmFtZSJdLAoJCQkJCQlkYW5nZGFuZzogWyIjbW9iaWxlX2V4Y2x1c2l2ZV9wcmljZSJdLAoJCQkJCQlzdW5pbmc6IFsiI3FyQ29kZSIsICIjcGhvbmVPcmRlckNvZGUiXSwKCQkJCQkJZ29tZTogWyIjc2hvdWppemh1YW54aWFuZ19ib3giXSwKCQkJCQkJIjUxYnV5IjogWyIjc2VhX2Rlc2MiXQoJCQkJCX0sCgkJCQkJeSA9IHsKCQkJCQkJIjM2MGJ1eSI6ICIjcHJvbS1tYnV5IC5KLW0tcHJpY2UiLAoJCQkJCQkiMzYwYnV5XzEiOiAiI20tcGlyY2UgLkotbS1wcmljZSIsCgkJCQkJCWRhbmdkYW5nOiAiI21vYmlsZV9wcmljZSIKCQkJCQl9LAoJCQkJCWsgPSB7CgkJCQkJCSIzNjBidXkiOiAnPGEgaWQ9ImJqZF9tX3ByaWNlIiBocmVmPSJ7e3VybH19IiB0YXJnZXQ9Il9ibGFuayIgIHJlbD0ibm9yZWZlcnJlciIgdGl0bGU9Int7dGl0bGV9fSJzdHlsZT0idGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZTtjb2xvcjojMDA1YWEwOyI+5peg6ZyA5omr56CB77yM55S16ISR5LiK5Lmf5Y+v5Lqr5Y+X5omL5py65LyY5oOg5Lu3ITwvYT4nLAoJCQkJCQkiMzYwYnV5XzEiOiAnPGEgaWQ9ImJqZF9tX3ByaWNlIiBocmVmPSJ7e3VybH19IiB0YXJnZXQ9Il9ibGFuayIgIHJlbD0ibm9yZWZlcnJlciIgdGl0bGU9Int7dGl0bGV9fSJzdHlsZT0idGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZTtjb2xvcjojMDA1YWEwOyI+5peg6ZyA5omr56CB77yM55S16ISR5LiK5Lmf5Y+v5Lqr5Y+X5omL5py65LyY5oOg5Lu3ITwvYT4nLAoJCQkJCQl5aWhhb2RpYW46ICc8YSBpZD0iYmpkX21fcHJpY2UiIGhyZWY9Int7dXJsfX0iIHRhcmdldD0iX2JsYW5rIiAgcmVsPSJub3JlZmVycmVyIiB0aXRsZT0ie3t0aXRsZX19InN0eWxlPSJ0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lO2NvbG9yOiMwNmM7YmFja2dyb3VuZC1jb2xvcjogI2ZmZjRmMjtkaXNwbGF5OiBibG9jaztwYWRkaW5nLWxlZnQ6IDEwcHg7aGVpZ2h0OiAyNnB4O2xpbmUtaGVpZ2h0OiAyNnB4O2ZvbnQtc2l6ZTogMTNweDsiPuaJi+acuuS4k+S6q+S7t3t7cHJpY2V9fe+8jOeri+WNs+WJjeW+gOi0reS5sDwvYT4nLAoJCQkJCQlkYW5nZGFuZzogJzxhIGlkPSJiamRfbV9wcmljZSIgaHJlZj0ie3t1cmx9fSIgdGFyZ2V0PSJfYmxhbmsiIHJlbD0ibm9yZWZlcnJlciIgdGl0bGU9Int7dGl0bGV9fSJzdHlsZT0idGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZTtjb2xvcjojMDA1YWEwOyI+5peg6ZyA5omr56CB77yM55S16ISR5LiK5Lmf5Y+v5Lqr5Y+X5omL5py65LyY5oOg5Lu3ITwvYT4nLAoJCQkJCQlzdW5pbmc6ICc8YSBpZD0iYmpkX21fcHJpY2UiIGhyZWY9Int7dXJsfX0iIHRhcmdldD0iX2JsYW5rIiByZWw9Im5vcmVmZXJyZXIiIHRpdGxlPSJ7e3RpdGxlfX0ic3R5bGU9InRleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmU7ZmxvYXQ6cmlnaHQ7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MTVweDt3aWR0aDoxMTBweDtjb2xvcjogIzAwMzM5OTsiPuWJjeW+gOaJi+acuueJiOmhtemdoui0reS5sDwvYT4nLAoJCQkJCQkiNTFidXkiOiAnPGEgaWQ9ImJqZF9tX3ByaWNlIiBocmVmPSJ7e3VybH19IiB0YXJnZXQ9Il9ibGFuayIgcmVsPSJub3JlZmVycmVyIiB0aXRsZT0ie3t0aXRsZX19InN0eWxlPSJ0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lO2NvbG9yOiMwNmM7ZGlzcGxheTogYmxvY2s7aGVpZ2h0OiAyNnB4O2xpbmUtaGVpZ2h0OiAyNnB4O2ZvbnQtc2l6ZTogMTNweDsiPuaJi+acuuS4k+S6q+S7t3t7cHJpY2V9fe+8jOeri+WNs+WJjeW+gOi0reS5sDwvYT4nLAoJCQkJCQlnb21lOiAnPGEgaWQ9ImJqZF9tX3ByaWNlIiBocmVmPSJ7e3VybH19IiB0YXJnZXQ9Il9ibGFuayIgcmVsPSJub3JlZmVycmVyIiB0aXRsZT0ie3t0aXRsZX19InN0eWxlPSJ0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lO2NvbG9yOiMwNmM7ZGlzcGxheTogYmxvY2s7aGVpZ2h0OiAyNnB4O2xpbmUtaGVpZ2h0OiAyNnB4O2ZvbnQtc2l6ZTogMTNweDsiPuaJi+acuuS4k+S6q+S7t3t7cHJpY2V9fe+8jOeri+WNs+WJjeW+gOi0reS5sDwvYT4nCgkJCQkJfSwKCQkJCQl6ID0gewoJCQkJCQkiMzYwYnV5IjogWyIjbS1waXJjZSIsICIuSi1wcm9tLW1idXkiLCAiI3Byb20tb25lIl0sCgkJCQkJCXlpaGFvZGlhbjogIiMiICsgYS5leHRCcmFuZCArICJfcHJvbW9fYWN0aXZlX3lpaGFvZGlhbiIsCgkJCQkJCWRhbmdkYW5nOiAiI21vYmlsZV9leGNsdXNpdmVfcHJpY2UiLAoJCQkJCQlzdW5pbmc6IFsiI3FyQ29kZSAucXJjb2RlLW1haW4taW1nIiwgIi5waC1wcmljZS1xcmNvZGUgLnFyY29kZS1yZWdpb24iXSwKCQkJCQkJIjUxYnV5IjogIiMiICsgYS5leHRCcmFuZCArICJfcHJvbW9fYWN0aXZlXzUxYnV5IiwKCQkJCQkJZ29tZTogIiNzaG91aml6aHVhbnhpYW5nX2JveCIKCQkJCQl9OwoJCQkJZi5pbml0ID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJCW0gPSB0LCB1ID0gZSwgcigpICYmIGkoKQoJCQkJfTsKCQkJCXZhciBCID0gZnVuY3Rpb24oZSkgewoJCQkJCQl2YXIgdCA9IHAoKSwKCQkJCQkJCW4gPSAnPGxpIGNsYXNzPSJtb2JpbGVfcHJpY2UiPlxuICAgICAgICAgICAgICA8c3Bhbj7miYvmnLrkuJPkuqs8L3NwYW4+XG4gICAgICAgICAgICAgIDxhIGhyZWY9IicgKyBlICsgJyIgdGFyZ2V0PSJfYmxhbmsiPicgKyB0ICsgIjwvYT5cbiAgICAgICAgICAgIDwvbGk+IjsKCQkJCQkJZygiI2JkZXh0X21pbmliYXIgLnByb21vLWJveCB1bCIpLnByZXBlbmQoZyhuKSksIGcoIiNiZGV4dF9taW5pYmFyIC5wcm9tby1ib3giKS5zaG93KCksIGcoIi5iZGV4dC10b3B0YWJzIC5iZGV4dC1taW5pLWxvZ28sIC5iZGV4dC1taW5pLWNvbXBhcmUiKS5hZGRDbGFzcygiaGFzUHJvbW8iKQoJCQkJCX0sCgkJCQkJaiA9IGZ1bmN0aW9uKGUpIHsKCQkJCQkJImJhaWR1IiA9PT0gYS5mcm9tX2RldmljZSA/IEIoZSkgOiBDKGUpCgkJCQkJfSwKCQkJCQlDID0gZnVuY3Rpb24oZSkgewoJCQkJCQlpZiAoIjM2MGJ1eSIgIT09IGEuc2l0ZSAmJiAoKCIzNjBidXkiICE9IGEuc2l0ZSB8fCAibWlfbmV3IiA9PSBhLmZyb21fZGV2aWNlKSAmJiAoZSA9IGQoZSkpLCBlKSkgewoJCQkJCQkJdmFyIHQgPSBwKCksCgkJCQkJCQkJbiA9ICc8bGkgY2xhc3M9ImxpXzAiIGRhdGEtdHlwZT0ibW9iIj48YSBocmVmPSInICsgZSArICciIHRpdGxlPSLotK3nianlhZrlsIbluKbmgqjliY3lvoDmiYvmnLrniYjpobXpnaLvvIzku6XkuJPkuqvku7fotK3kubDllYblk4EiIHRhcmdldD0iX2JsYW5rIiBpZD0iJyArIGEuZXh0QnJhbmQgKyAnX21vYmlsZV9wcmljZSIgcmVsPSJub3JlZmVycmVyIj48c3BhbiBjbGFzcz0ibW9iaWxlX3RpdGxlIiA+5LiT5Lqr5Lu36LSt5LmwPC9zcGFuPjxzcGFuIGNsYXNzPSJtb2JpbGVfbnVtIj4nICsgdCArICI8L3NwYW4+Pj48L2E+PC9saT4iOwoJCQkJCQkJZygiLnByb21vX2JveF9sZWZ0IHVsIikucHJlcGVuZChnKG4pKTsKCQkJCQkJCWZvciAodmFyIGkgPSBnKCIucHJvbW9fYm94X2xlZnQgdWwgbGkiKSwgbyA9IGkubGVuZ3RoLCByID0gMDsgbyA+IHI7IHIrKykgaS5lcShyKS5hdHRyKCJjbGFzcyIsICJsaV8iICsgcik7CgkJCQkJCQkzID4gbyA/IChnKCIjIiArIGEuZXh0QnJhbmQgKyAiX3dpc2hsaXN0X2RpdiIpLmFkZENsYXNzKCJvbmVsaW5lIiksIGcoIiMiICsgYS5leHRCcmFuZCArICJfcHJvbW9fYm94Iikuc2hvdygpLCAxID09IG8gJiYgZygiLnByb21vX3NodXhpYW4iKS5oaWRlKCkpIDogZygiIyIgKyBhLmV4dEJyYW5kICsgIl93aXNobGlzdF9kaXYiKS5yZW1vdmVDbGFzcygib25lbGluZSIpLmFkZENsYXNzKCJ0d29saW5lcyIpLCB4LmxvZygi5paw54mI5bWM5YWl5omL5py65LiT5Lqr5Lu35bGV546wIiksIGcoIiMiICsgYS5leHRCcmFuZCArICJfbW9iaWxlX3ByaWNlIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCQkJeC5sb2coIuaWsOeJiOW1jOWFpeaJi+acuuS4k+S6q+S7t+eCueWHuyIpCgkJCQkJCQl9KQoJCQkJCQl9CgkJCQkJfTsKCQkJCXJldHVybiBmCgkJCX0uY2FsbCh0LCBuLCB0LCBlKSwgISh2b2lkIDAgIT09IGkgJiYgKGUuZXhwb3J0cyA9IGkpKQoJCX0pLmNhbGwodCwgbigxKSkKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJZS5leHBvcnRzID0gJzxhIGlkPSJ7e2V4dEJyYW5kfX1fbW9iaWxlX3ByaWNlIiBocmVmPSJ7e3VybH19IiB0YXJnZXQ9Il9ibGFuayIgcmVsPSJub3JlZmVycmVyIiB7e2lmICFuZXdfZXh0ZW5zaW9ufX10aXRsZT0i6LSt54mp5YWa5bCG5bim5oKo5YmN5b6A5omL5py654mI6aG16Z2i77yM5Lul5LiT5Lqr5Lu36LSt5Lmw5ZWG5ZOBXG4iIHt7L2lmfX0+XG4gIDxzcGFuIGNsYXNzPSJ7e2V4dEJyYW5kfX1fbXByaWNlX3RpdGxlIj7ngrnmraTkuJPkuqvku7fotK3kubA8L3NwYW4+XG4gIDxzcGFuIGNsYXNzPSJ7e2V4dEJyYW5kfX1fbXByaWNlX251bSI+e3twcmljZX19PC9zcGFuPlxuICA8c3R5bGUgdHlwZT0idGV4dC9jc3MiPlxuICAgIGEje3tleHRCcmFuZH19X21vYmlsZV9wcmljZSB7XG4gICAgICB3aWR0aDogMTMycHg7XG4gICAgICBkaXNwbGF5OiBpbmxpbmU7XG4gICAgICBtYXJnaW4tbGVmdDogNXB4O1xuICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIH1cbiAgICBzcGFuLnt7ZXh0QnJhbmR9fV9tcHJpY2VfdGl0bGUge1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgd2lkdGg6IDk0cHg7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTY4Y2RmO1xuICAgICAgbGluZS1oZWlnaHQ6IDE2cHg7XG4gICAgICBjb2xvcjogI2ZmZjtcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICB9XG4gICAgc3Bhbi57e2V4dEJyYW5kfX1fbXByaWNlX3RpdGxlOmhvdmVye1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzMwNzFjNjtcbiAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICB9XG4gICAgc3Bhbi57e2V4dEJyYW5kfX1fbXByaWNlX251bSB7XG4gICAgICBjb2xvcjogI2U0MzkzYztcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIG1hcmdpbi1sZWZ0OiA1cHg7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgfVxuICA8L3N0eWxlPlxuPC9hPicKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJdmFyIGk7CgkJKGZ1bmN0aW9uKGEpIHsKCQkJInVzZSBzdHJpY3QiOwoJCQlpID0gZnVuY3Rpb24oKSB7CgkJCQlmdW5jdGlvbiBlKGUpIHsKCQkJCQlpZiAoImx1eW91IiA9PSBhLmJ0eXBlICYmIDAgIT0gYS5zaG93X3Byb21vICYmICgibWF4dGhvbiIgIT09IGEuZnJvbV9kZXZpY2UgfHwgIShsb2NhdGlvbi5ob3N0LmluZGV4T2YoInRhb2JhbyIpID4gLTEgfHwgbG9jYXRpb24uaG9zdC5pbmRleE9mKCJ0bWFsbCIpID4gLTEpKSkgewoJCQkJCQl2YXIgdCA9IGEuc2F2ZV9wcm9tb19sZW4sCgkJCQkJCQluID0gW107CgkJCQkJCWlmIChlLnRvdGFsID4gMCAmJiAzID4gdCkgewoJCQkJCQkJdHJ5IHsKCQkJCQkJCQlmb3IgKHZhciBpID0gZS5wcm9kdWN0cywgciA9IGEuaHJlZi5pbmRleE9mKCJ0bWFsbC5jb20iKSA+PSAwID8gInRtYWxsIiA6IGEuc2l0ZSwgcyA9IG8oIiMiICsgYS5leHRCcmFuZCArICJfcHJvbW9fYnJhbmRfbGF5b3V0XyIgKyByKS5sZW5ndGggPyBvKCIjIiArIGEuZXh0QnJhbmQgKyAiX3Byb21vX2JyYW5kX2xheW91dF8iICsgcikuZW1wdHkoKSA6IG8oIjxkaXY+IiwgewoJCQkJCQkJCQlpZDogYS5leHRCcmFuZCArICJfcHJvbW9fYnJhbmRfbGF5b3V0XyIgKyByLAoJCQkJCQkJCQkiY2xhc3MiOiBhLmV4dEJyYW5kICsgIl9wcm9tb19icmFuZF9sYXlvdXQiCgkJCQkJCQkJfSksIGQgPSAwOyBkIDwgaS5sZW5ndGggJiYgIShkID49IDMgLSB0KTsgZCsrKSB7CgkJCQkJCQkJCW4ucHVzaChpW2RdLnByb21vX2lkKTsKCQkJCQkJCQkJdmFyIHAgPSBvKCI8cD4iLCB7CgkJCQkJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItcHJvbW8tYnJhbmQtcCIsCgkJCQkJCQkJCQkJcHJvbW9pZDogaVtkXS5wcm9tb19pZAoJCQkJCQkJCQkJfSksCgkJCQkJCQkJCQloID0gImJyYW5kIiA9PSBlLl9mcm9tZSA/IGlbZF0uc2l0ZV9uYW1lICsgJyAiJyArIGlbZF0udGl0bGUgKyAnIiAnICsgaVtkXS5rZXl3b3JkcyArICIgIiArIGlbZF0uZW5kX3RpbWUuc3BsaXQoIiAiKVswXSArICLnu5PmnZ8iIDogaVtkXS5hX3RpdGxlOwoJCQkJCQkJCQlwLmFwcGVuZChvKCI8YT4iLCB7CgkJCQkJCQkJCQkiY2xhc3MiOiBhLmV4dEJyYW5kICsgIi1wcm9tby1icmFuZC1jbGljayIsCgkJCQkJCQkJCQlocmVmOiBpW2RdLnVybCwKCQkJCQkJCQkJCXRhcmdldDogIl9ibGFuayIsCgkJCQkJCQkJCQl0aXRsZTogaCwKCQkJCQkJCQkJCXByb21vaWQ6IGlbZF0ucHJvbW9faWQKCQkJCQkJCQkJfSkuYXBwZW5kKG8oIjxzcGFuPiIsIHsKCQkJCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLXNpdGUtbmFtZSIsCgkJCQkJCQkJCQlzdHlsZTogaVtkXS5zaXRlX25hbWUubGVuZ3RoID49IDUgPyAicGFkZGluZy1yaWdodDoxMHB4OyIgOiAiIiwKCQkJCQkJCQkJCXByb21vaWQ6IGlbZF0ucHJvbW9faWQKCQkJCQkJCQkJfSkudGV4dChpW2RdLnNpdGVfbmFtZSkuYXBwZW5kKG8oIjxiPiIsIHsKCQkJCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLXNpdGUtbmFtZS1yaWdodCIKCQkJCQkJCQkJfSkudGV4dCgi77yaIikpKS5hcHBlbmQobygiPHNwYW4+IiwgewoJCQkJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItcHJvbW8ta2V5d29yZHMiLAoJCQkJCQkJCQkJcHJvbW9pZDogaVtkXS5wcm9tb19pZAoJCQkJCQkJCQl9KS50ZXh0KGlbZF0ua2V5d29yZHMpKS5hcHBlbmQobygiPHNwYW4+IiwgewoJCQkJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItcHJvbW8tdGl0bGUiLAoJCQkJCQkJCQkJcHJvbW9pZDogaVtkXS5wcm9tb19pZAoJCQkJCQkJCQl9KS50ZXh0KGlbZF0udGl0bGUpKSksIHMuYXBwZW5kKHApCgkJCQkJCQkJfQoJCQkJCQkJfSBjYXRjaCAodSkgewoJCQkJCQkJCWlmIChhLmRlYnVnKSB0aHJvdyB1CgkJCQkJCQl9CgkJCQkJCQlvKCIuIiArIGEuZXh0QnJhbmQgKyAiLXByb21vLWJyYW5kLXAiKS5vbigiY2xpY2siLCBmdW5jdGlvbihlKSB7CgkJCQkJCQkJcmV0dXJuIGwoImNsaWNrOm1pbmk6cHJvbW86IiArIGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoInByb21vaWQiKSksIGMubG9nKCLltYzlhaXkv4PplIDmtLvliqjngrnlh7siKSwgITAKCQkJCQkJCX0pLCBjLmxvZygi5bWM5YWl5L+D6ZSA5rS75Yqo5bGV546wIiksIGwoInRyYWNrOm1pbmk6cHJvbW86IiArIG4uam9pbigiLCIpKQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoKCQkJCWZ1bmN0aW9uIHQodCwgbikgewoJCQkJCXZhciBvID0gbnVsbDsKCQkJCQl0LnRvdGFsID4gMCA/ICh0Ll9mcm9tZSA9ICJicmFuZCIsIG8gPSB0KSA6IG8gPSBudWxsICE9IG4gPyBuIDogewoJCQkJCQl0b3RhbDogMCwKCQkJCQkJcHJvZHVjdHM6IFtdCgkJCQkJfSwgImx1eW91IiA9PSBhLmJ0eXBlID8gKGUobyksIGkodC5icmFuZF9pZCwgdC5icmFuZCkpIDogMCAhPSBkLmdldCgic2hvd19wcm9tbyIpICYmIG0obyksIHMuYXV0b0FkZEZhdm9yKCkKCQkJCX0KCgkJCQlmdW5jdGlvbiBpKGUsIHQpIHsKCQkJCQllICYmICFhLmRwSXNCb29rICYmIChvKCIjIiArIGEuZXh0QnJhbmQgKyAiLWJyYW5kLXN1YnNjcmliZS1idG4iKS5hdHRyKHsKCQkJCQkJYnJhbmRJZDogZSwKCQkJCQkJYWN0aW9uVHlwZTogMQoJCQkJCX0pLCBvKCIjIiArIGEuZXh0QnJhbmQgKyAiLWJyYW5kLXN1YnNjcmliZS1idG4iKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGkgPSBvKCIjIiArIGEuZXh0QnJhbmQgKyAiLWJyYW5kLXN1YnNjcmliZS1idG4iKSwKCQkJCQkJCXIgPSB7fSwKCQkJCQkJCXMgPSAi5ZOB54mM54m55Y2W5o+Q5YmN55+l6YGTIjsKCQkJCQkJMSA9PSBpLmF0dHIoImFjdGlvblR5cGUiKSA/IChyLmxvYWRNc2cgPSAi5q2j5Zyo5YWz5rOoLi4uIiwgci5hY3Rpb24gPSAiYWRkIikgOiAoci5sb2FkTXNnID0gIuWPlua2iOWFs+azqC4uLiIsIHIuYWN0aW9uID0gImRlbGV0ZSIpOwoJCQkJCQl2YXIgbCA9IGkuZmluZCgiLiIgKyBhLmV4dEJyYW5kICsgIi1icmFuZC1zdWJzY3JpYmUtdGV4dCIpLmVxKDApLAoJCQkJCQkJYyA9IGkuZmluZCgiLiIgKyBhLmV4dEJyYW5kICsgIi1iZyIpLmVxKDApOwoJCQkJCQlsLnRleHQoci5sb2FkTXNnKTsKCQkJCQkJdmFyIGQgPSBuKDkpOwoJCQkJCQlkLmdldChhLmNfc2VydmVyICsgIi9icndleHQvYnJhbmRfc3Vic2NyaWJlP2JyYW5kX2lkPSIgKyBlICsgIiZhY3Rpb249IiArIHIuYWN0aW9uKS5kb25lKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCXZhciBuID0gZSAmJiBlLmNvZGU7CgkJCQkJCQlpZiAoMCA9PSBuKSB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGEuY19zZXJ2ZXIgKyAiL3VzZXIvbG9naW4/ZnJvbV91cmw9IiArIGVuY29kZVVSSUNvbXBvbmVudChhLmhyZWYpOwoJCQkJCQkJZWxzZSBpZiAoMSA9PSBuIHx8IDMgPT0gbikgewoJCQkJCQkJCXZhciBvID0gIiIsCgkJCQkJCQkJCWQgPSAxLAoJCQkJCQkJCQlwID0gYS5leHRCcmFuZCArICItYnJhbmQtc3Vic2NyaWJlLWljb24tYmx1ZSI7CgkJCQkJCQkJImFkZCIgPT0gci5hY3Rpb24gPyAobyA9IDEgPT0gbiA/ICLlhbPms6jmiJDlip8iIDogIuW3suWFs+azqCIsIGQgPSAwLCBwID0gYS5leHRCcmFuZCArICItYnJhbmQtc3Vic2NyaWJlLWljb24tcmVkIiwgcyA9ICLigJwiICsgKHQgPyB0IDogIuivpeWTgeeJjCIpICsgIuKAneeahOeJueWNlua0u+WKqOS8muesrOS4gOaXtumXtOaPkOmGkuS9oCIpIDogImRlbGV0ZSIgPT0gci5hY3Rpb24gJiYgKG8gPSAxID09IG4gPyAi5YWz5rOo5q2k5ZOB54mMIiA6ICLmk43kvZzlpLHotKUiLCBkID0gMSk7CgkJCQkJCQkJdmFyIGg7CgkJCQkJCQkJY2xlYXJUaW1lb3V0KGgpLCBoID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJCQkJaS5hdHRyKCJhY3Rpb25UeXBlIiwgZCksIGwudGV4dChvKSwgYy5hdHRyKCJjbGFzcyIsIGEuZXh0QnJhbmQgKyAiLWJnICIgKyBwKQoJCQkJCQkJCX0sIDUwMCkKCQkJCQkJCX0gZWxzZSBpLmF0dHIoImNsYXNzIiwgYS5leHRCcmFuZCArICItYnJhbmQtc3Vic2NyaWJlIikuYXR0cigiYWN0aW9uVHlwZSIsIDEpLCBsLnRleHQoIuWFs+azqOatpOWTgeeJjCIpOwoJCQkJCQkJaS5hdHRyKCJ0aXRsZSIsIHMpCgkJCQkJCX0pCgkJCQkJfSksIG8oIiMiICsgYS5leHRCcmFuZCArICItYnJhbmQtc3Vic2NyaWJlLWJveCIpLnNob3coKSwgbygiLnN1YnNjcmliZV9zaHV4aWFuIikuc2hvdygpKQoJCQkJfQoJCQkJdmFyIG8gPSBuKDYpLAoJCQkJCXIgPSB7fSwKCQkJCQlzID0gbigxMTkpLAoJCQkJCWwgPSBuKDI2KSwKCQkJCQljID0gbigxMyksCgkJCQkJZCA9IG4oMTcpLAoJCQkJCXAgPSBuKDkpLAoJCQkJCWggPSBuKDE2KSwKCQkJCQl1ID0gZnVuY3Rpb24oKSB7CgkJCQkJCW8oIiMiICsgYS5leHRCcmFuZCArICJfcHJvbW9fYm94Iikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCQljLmxvZygi5bWM5YWl5L+D6ZSA5rS75Yqo54K55Ye7IikKCQkJCQkJfSksIG8oIiMiICsgYS5leHRCcmFuZCArICJfbW9iaWxlX3ByaWNlIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCQljLmxvZygi5omL5py65LiT5Lqr5Lu354K55Ye7IikKCQkJCQkJfSkKCQkJCQl9LAoJCQkJCW0gPSBmdW5jdGlvbihlKSB7CgkJCQkJCWlmICgiMzYwYnV5LXJlIiAhPT0gYS5zaXRlKSB7CgkJCQkJCQlmb3IgKHZhciB0ID0gewoJCQkJCQkJCTE6ICLkv4MiLAoJCQkJCQkJCTI6ICLmipgiLAoJCQkJCQkJCTM6ICLotaAiLAoJCQkJCQkJCTQ6ICLlh48iLAoJCQkJCQkJCTU6ICLotaAiLAoJCQkJCQkJCTY6ICLov5QiCgkJCQkJCQl9LCBpID0gMDsgaSA8IGUucHJvZHVjdHMubGVuZ3RoOyBpKyspIHRbZS5wcm9kdWN0c1tpXS5wcm9tb190eXBlXSA/IGUucHJvZHVjdHNbaV0ucHJvbW9rZXlzID0gdFtlLnByb2R1Y3RzW2ldLnByb21vX3R5cGVdIDogZS5wcm9kdWN0c1tpXS5wcm9tb2tleXMgPSAi5L+DIjsKCQkJCQkJCXZhciByID0gbigxNjEpLAoJCQkJCQkJCXMgPSBlLnByb2R1Y3RzLmxlbmd0aDsKCQkJCQkJCWlmICgwICE9IHMpIHsKCQkJCQkJCQl2YXIgbCA9IG8oIi5wcm9tb19ib3hfbGVmdCB1bCBsaSIpLmxlbmd0aDsKCQkJCQkJCQlsID4gMCAmJiAobygiLnByb21vX3NodXhpYW4iKS5zaG93KCksIHMgKz0gbCk7CgkJCQkJCQkJdmFyIGQgPSBoLmNvbXBpbGUocikoewoJCQkJCQkJCQlkYXRhOiBlLnByb2R1Y3RzLAoJCQkJCQkJCQlzaXplOiBsCgkJCQkJCQkJfSk7CgkJCQkJCQkJbygiIyIgKyBhLmV4dEJyYW5kICsgIl9wcm9tb19ib3ggLnByb21vX2JveF9sZWZ0IHVsIikuYXBwZW5kKGQpLCB1KCksIG8oIiMiICsgYS5leHRCcmFuZCArICJfcHJvbW9fYm94Iikuc2hvdygpLCBjLmxvZygi5bWM5YWl5L+D6ZSA5rS75Yqo5bGV546wIiksIDMgPiBzID8gbygiIyIgKyBhLndpc2hkb20yKS5hZGRDbGFzcygib25lbGluZSIpIDogbygiIyIgKyBhLndpc2hkb20yKS5hZGRDbGFzcygidHdvbGluZXMiKS5yZW1vdmVDbGFzcygib25lbGluZSIpCgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9OwoJCQkJcmV0dXJuIHIuZ2V0UHJvbW9EYXRhID0gZnVuY3Rpb24oZSkgewoJCQkJCXZhciB0ID0gewoJCQkJCQlfZnJvbWU6ICJhY3RpdmUiLAoJCQkJCQl0b3RhbDogMCwKCQkJCQkJcHJvZHVjdHM6IFtdCgkJCQkJfTsKCQkJCQlpZiAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIGUuYjJjLnByb2R1Y3QgJiYgZS5iMmMucHJvZHVjdC5sZW5ndGggPiAwKSB7CgkJCQkJCWZvciAodmFyIG4gPSBlLmIyYy5wcm9kdWN0LCBpID0gMDsgaSA8IG4ubGVuZ3RoOyBpKyspIHsKCQkJCQkJCXZhciBhID0gbltpXS5kcF9pZC5zcGxpdCgiLSIpWzFdOwoJCQkJCQkJaWYgKCgidW5kZWZpbmVkIiA9PSB0eXBlb2YgZS5ub3cuc2l0ZV9pZCB8fCBhICE9IGUubm93LnNpdGVfaWQpICYmIG5baV0ucHJvbW8ubGVuZ3RoID4gMCkKCQkJCQkJCQlmb3IgKHZhciBvID0gbltpXS5wcm9tbywgciA9IDA7IHIgPCBvLmxlbmd0aDsgcisrKSB7CgkJCQkJCQkJCXZhciBzID0gewoJCQkJCQkJCQkJc2l0ZV9uYW1lOiBuW2ldLnNpdGVfbmFtZSwKCQkJCQkJCQkJCXVybDogbltpXS51cmwsCgkJCQkJCQkJCQl0aXRsZTogb1tyXS5kZXNjLAoJCQkJCQkJCQkJZW5kX3RpbWU6ICIiLAoJCQkJCQkJCQkJYnJhbmQ6IG9bcl0uZGVzYy5sZW5ndGggPiAyMSA/IG9bcl0uZGVzYy5zdWJzdHIoMCwgMjApIDogb1tyXS5kZXNjLAoJCQkJCQkJCQkJa2V5d29yZHM6ICLvv6UiICsgbltpXS5wcmljZSwKCQkJCQkJCQkJCWFfdGl0bGU6IG5baV0udGl0bGUKCQkJCQkJCQkJfTsKCQkJCQkJCQkJdC5wcm9kdWN0cy5wdXNoKHMpCgkJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCXQudG90YWwgPSB0LnByb2R1Y3RzLmxlbmd0aAoJCQkJCX0KCQkJCQlyZXR1cm4gdC5wcm9kdWN0cy5sZW5ndGggPiAwID8gdCA6IG51bGwKCQkJCX0sIHIuYWRkUHJvbW8gPSBmdW5jdGlvbihuKSB7CgkJCQkJaWYgKG51bGwgPT0gYS5zYXZlX3Byb21vX2RhdGEpIHsKCQkJCQkJdmFyIGkgPSBhLmRwSXNCb29rLAoJCQkJCQkJciA9IGEuc2F2ZV9kcF9xdWVyeSwKCQkJCQkJCXMgPSAiIiAhPSByLm5vdy5ub3dfZHBfaWQgPyByLm5vdy5ub3dfZHBfaWQgOiByLmV4YWN0X2Fyci50YW9iYW9fc2FtZV9pZCwKCQkJCQkJCWwgPSByLm5vdy5jbGFzc19pZCwKCQkJCQkJCWMgPSBlbmNvZGVVUklDb21wb25lbnQoci5leGFjdF9hcnIuc2JyYW5kKSwKCQkJCQkJCWQgPSBlbmNvZGVVUklDb21wb25lbnQoci5ub3cuY29yZXdvcmQpLAoJCQkJCQkJaCA9IHIuZXhhY3RfYXJyLmJyYW5kX2lkLAoJCQkJCQkJdSA9IHIuZXhhY3RfYXJyLnRhb2Jhb19jbGFzc19pZDsKCQkJCQkJaWYgKG51bGwgPT0gaSB8fCAiIiA9PSBpKSB7CgkJCQkJCQluID0gbnVsbCwgcyA9IHMgfHwgIjAiOwoJCQkJCQkJdmFyIG0gPSAwLAoJCQkJCQkJCWYgPSBhLmNvbGxlY3RJbmZvLnRpdGxlID8gYS5jb2xsZWN0SW5mby50aXRsZSA6IGEuZHAubmFtZTsKCQkJCQkJCXAuZ2V0KGEuc2VydmVyICsgIi9icndleHQvcHJvbW9fYnJhbmQ/cGc9MSZwcz0zMCZvcmRlcj0iICsgbSArICImdGJfY2xhc3M9IiArIHUgKyAiJmNsYXNzX2lkPSIgKyBsICsgIiZkcF9pZD0iICsgcyArICImdGl0bGU9IiArIGVuY29kZVVSSUNvbXBvbmVudChmKSArICImdXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQod2luZG93LmxvY2F0aW9uLmhyZWYpICsgIiZ1bmlvbj0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGEudW5pb24pICsgIiZzYnJhbmQ9IiArIGMgKyAiJmJyYW5kX2lkPSIgKyBoICsgIiZrZXl3b3JkPSIgKyBkKS5kb25lKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQlyZXR1cm4gIWUgfHwgZSAmJiAwID09IGUubGVuZ3RoID8gdm9pZCBvKCIjIiArIGEuZXh0QnJhbmQgKyAiLWJyYW5kLXN1YnNjcmliZS1idG4iKS5oaWRlKCkgOiB2b2lkIHQoZSwgbikKCQkJCQkJCX0pLmZhaWwoZnVuY3Rpb24oKSB7CgkJCQkJCQkJbygiIyIgKyBhLmV4dEJyYW5kICsgIi1icmFuZC1zdWJzY3JpYmUtYnRuIikuaGlkZSgpLCBudWxsICE9IG4gJiYgZShuKQoJCQkJCQkJfSkKCQkJCQkJfQoJCQkJCX0KCQkJCX0sIHIuaW5zZXJ0UHJvbW9TaG93TGlzdCA9IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCA9IHRoaXM7CgkJCQkJaWYgKG51bGwgIT0gZSAmJiBudWxsICE9IGUucHJvbW9zICYmIDAgIT0gZS5wcm9tb3MubGVuZ3RoKSB7CgkJCQkJCW8oIiMiICsgYS5leHROYW1lICsgIi1tYWluIikuYXBwZW5kKG8oIjxkaXY+IiwgewoJCQkJCQkJaWQ6IGEuZXh0QnJhbmQgKyAiX3Byb21vX3Nob3dfbGlzdF9kaXYiLAoJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICJfc21hbGxfdGFiIgoJCQkJCQl9KS5hcHBlbmQobygiPGRpdj4iLCB7CgkJCQkJCQkiY2xhc3MiOiAicG9pbnRlci11cCIKCQkJCQkJfSkuaHRtbCgiPCEtLVtpZiBJRSA2XT7il4Y8IVtlbmRpZl0tLT4iKSkuYXBwZW5kKG8oIjxkaXY+IiwgewoJCQkJCQkJaWQ6IGEuZXh0QnJhbmQgKyAiX3Byb21vX3Nob3dfbGlzdF9jb250ZW50IgoJCQkJCQl9KS5hcHBlbmQobygiPHVsPiIsIHsKCQkJCQkJCWlkOiBhLmV4dEJyYW5kICsgIl9wcm9tb19zaG93X2xpc3RfdWwiLAoJCQkJCQkJc3R5bGU6ICJwYWRkaW5nOjBweDsiCgkJCQkJCX0pKSkpLCBvKCIjIiArIGEuZXh0QnJhbmQgKyAiX3Byb21vX3Nob3dfbGlzdF9kaXYiKS5vbigiY2xpY2siLCBmdW5jdGlvbihlKSB7CgkJCQkJCQlsKCJjbGljazptYWluOmN1eGlhbyIpLCBjLmxvZygi5Li75bel5YW35qCP5L+D6ZSA54K55Ye7IikKCQkJCQkJfSk7CgkJCQkJCWZvciAodmFyIG4gPSAwOyBuIDwgZS5wcm9tb3MubGVuZ3RoICYmIDUgPiBuOyArK24pIG8oIiMiICsgYS5leHRCcmFuZCArICJfcHJvbW9fc2hvd19saXN0X3VsIikuYXBwZW5kKG8oIjxsaT4iLCB7fSkuYXBwZW5kKG8oIjxhPiIsIHsKCQkJCQkJCXRpdGxlOiBlLnByb21vc1tuXS50aXRsZSArICIg5oiq5q2iOiIgKyBlLnByb21vc1tuXS5lbmRfdGltZS5zcGxpdCgiICIpWzBdLAoJCQkJCQkJaHJlZjogZS5wcm9tb3Nbbl0udXJsLAoJCQkJCQkJdGFyZ2V0OiAiX2JsYW5rIgoJCQkJCQl9KS5odG1sKGUucHJvbW9zW25dLnRpdGxlLnJlcGxhY2UoLyhcZCspL2csICI8c3BhbiBjbGFzcz0nIiArIGEuZXh0QnJhbmQgKyAiLXJlZCc+JDE8L3NwYW4+IikpKS5hcHBlbmQobygiPHNwYW4+IiwgewoJCQkJCQkJImNsYXNzIjogInByb21vX3NwYW4iCgkJCQkJCX0pLnRleHQoIuaIquatojoiICsgZS5wcm9tb3Nbbl0uZW5kX3RpbWUubWF0Y2goL1xkezR9LShbMC05LV17NX0pLylbMV0pKSk7CgkJCQkJCW8oIiMiICsgYS5leHRCcmFuZCArICJfcHJvbW9fc2hvd19saXN0X3VsIikuYXBwZW5kKG8oIjxsaT4iLCB7CgkJCQkJCQlzdHlsZTogInRleHQtYWxpZ246IHJpZ2h0O2JvcmRlcjogbm9uZTsiCgkJCQkJCX0pLmFwcGVuZChvKCI8YT4iLCB7CgkJCQkJCQl0aXRsZTogIuafpeeci+WFqOmDqOS/g+mUgCIsCgkJCQkJCQlocmVmOiBlLnVybCwKCQkJCQkJCSJjbGFzcyI6ICJzaG93X2FsbF9wcm9tbyIsCgkJCQkJCQl0YXJnZXQ6ICJfYmxhbmsiCgkJCQkJCX0pLnRleHQoIuafpeeci+WFqOmDqCgiICsgZS5udW0gKyAiKSIpKSksIG8oIiMiICsgYS5leHRCcmFuZCArICJfcHJvbW9fYnRuIikubW91c2VvdmVyKGZ1bmN0aW9uKCkgewoJCQkJCQkJdmFyIGUgPSB0aGlzOwoJCQkJCQkJdC50aW1lcl9zaG93X2RpdiA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJCQkJbygiLiIgKyBhLmV4dEJyYW5kICsgIl9zbWFsbF90YWIiKS5oaWRlKCksIG8oIi5wYW5lbCIpLmhpZGUoKSwgbygiIyIgKyBhLmV4dEJyYW5kICsgIl9wcm9tb19zaG93X2xpc3RfZGl2IikuY3NzKCJsZWZ0IiwgbyhlKS5vZmZzZXQoKS5sZWZ0ICsgInB4Iikuc2hvdygpCgkJCQkJCQl9LCAzMDApLCBjbGVhclRpbWVvdXQodC50aW1lcl9oaWRlX2RpdiksIGwoImhvdmVyOm1haW46Y3V4aWFvIiksIGMubG9nKCLkuLvlt6XlhbfmoI/kv4PplIDpvKDmoIfmgqzmta4iKQoJCQkJCQl9KSwgbygiIyIgKyBhLmV4dEJyYW5kICsgIl9wcm9tb19idG4iKS5tb3VzZW91dChmdW5jdGlvbigpIHsKCQkJCQkJCXQudGltZXJfaGlkZV9kaXYgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCQkJCW8oIiMiICsgYS5leHRCcmFuZCArICJfcHJvbW9fc2hvd19saXN0X2RpdiIpLmhpZGUoKQoJCQkJCQkJfSwgMzAwKSwgY2xlYXJUaW1lb3V0KHQudGltZXJfc2hvd19kaXYpCgkJCQkJCX0pLCBvKCIjIiArIGEuZXh0QnJhbmQgKyAiX3Byb21vX2J0biIpLmNsaWNrKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCXJldHVybiAiYmxvY2siID09IG8oIiMiICsgYS5leHRCcmFuZCArICJfcHJvbW9fc2hvd19saXN0X2RpdiIpLmNzcygiZGlzcGxheSIpID8gbygiIyIgKyBhLmV4dEJyYW5kICsgIl9wcm9tb19zaG93X2xpc3RfZGl2IikuaGlkZSgpIDogKG8oIi4iICsgYS5leHRCcmFuZCArICJfc21hbGxfdGFiIikuaGlkZSgpLCBvKCIucGFuZWwiKS5oaWRlKCksIG8oIiMiICsgYS5leHRCcmFuZCArICJfcHJvbW9fc2hvd19saXN0X2RpdiIpLmNzcygibGVmdCIsIG8odGhpcykub2Zmc2V0KCkubGVmdCArICJweCIpLnNob3coKSksIGUuc3RvcFByb3BhZ2F0aW9uKCksICExCgkJCQkJCX0pLCBvKCIjIiArIGEuZXh0QnJhbmQgKyAiX3Byb21vX3Nob3dfbGlzdF9kaXYiKS5tb3VzZWVudGVyKGZ1bmN0aW9uKCkgewoJCQkJCQkJY2xlYXJUaW1lb3V0KHQudGltZXJfaGlkZV9kaXYpCgkJCQkJCX0pLCBvKCIjIiArIGEuZXh0QnJhbmQgKyAiX3Byb21vX3Nob3dfbGlzdF9kaXYiKS5tb3VzZWxlYXZlKGZ1bmN0aW9uKCkgewoJCQkJCQkJdC50aW1lcl9oaWRlX2RpdiA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJCQkJbygiIyIgKyBhLmV4dEJyYW5kICsgIl9wcm9tb19zaG93X2xpc3RfZGl2IikuaGlkZSgpCgkJCQkJCQl9LCAzMDApCgkJCQkJCX0pLCBvKCIjIiArIGEuZXh0QnJhbmQgKyAiX3Byb21vX3Nob3dfbGlzdF9kaXYiKS5jbGljayhmdW5jdGlvbigpIHsKCQkJCQkJCW8oIi4iICsgYS5leHRCcmFuZCArICJfc21hbGxfdGFiIikuaGlkZSgpCgkJCQkJCX0pCgkJCQkJfQoJCQkJfSwgcgoJCQl9LmNhbGwodCwgbiwgdCwgZSksICEodm9pZCAwICE9PSBpICYmIChlLmV4cG9ydHMgPSBpKSkKCQl9KS5jYWxsKHQsIG4oMSkpCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICd7e2VhY2ggZGF0YX19XG4gIDxsaSBjbGFzcz0ibGlfe3skaW5kZXgrc2l6ZX19Ij5cbiAgICB7e2lmICR2YWx1ZS5wcm9tb2tleXN9fVxuICAgIDxzcGFuPnt7JHZhbHVlLnByb21va2V5c319PC9zcGFuPlxuICAgIHt7L2lmfX1cbiAgICA8YSBocmVmPSJ7eyR2YWx1ZS51cmx9fSIgdGFyZ2V0PSJfYmxhbmsiIHRpdGxlPSJ7eyR2YWx1ZS50aXRsZX19Ij57eyR2YWx1ZS50aXRsZX19PC9hPlxuICA8L2xpPlxue3svZWFjaH19JwoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQl2YXIgaTsKCQkoZnVuY3Rpb24oYSkgewoJCQkidXNlIHN0cmljdCI7CgkJCWkgPSBmdW5jdGlvbigpIHsKCQkJCWZ1bmN0aW9uIGUoZSwgdCkgewoJCQkJCWlmICghKG8oIiNkb3ViYW4tdG9wIikubGVuZ3RoID4gMCB8fCBudWxsID09IGUucmF0aW5nLmF2ZXJhZ2UgfHwgMCA9PSBwYXJzZUludChlLnJhdGluZy5hdmVyYWdlKSkpIHsKCQkJCQkJdmFyIG4gPSBlLnJhdGluZy5hdmVyYWdlOwoJCQkJCQlvKCIjIiArIGEuZXh0TmFtZSArICItbWFpbi1jb250ZW50cyIpLmFwcGVuZChvKCI8YT4iLCB7CgkJCQkJCQlzdHlsZTogImhlaWdodDozMHB4IiwKCQkJCQkJCXRpdGxlOiAi6LGG55Oj6K+E5YiGIiwKCQkJCQkJCWlkOiAiZG91YmFuLXRvcCIsCgkJCQkJCQl0YXJnZXQ6ICJfYmxhbmsiLAoJCQkJCQkJaHJlZjogZS5hbHQgKyAoInJldmlld3M/IiArIGEuZXh0QnJhbmQgKyAiX2lzYm49IikgKyB0CgkJCQkJCX0pLmFwcGVuZChvKCI8c3Bhbj4iLCB7CgkJCQkJCQkiY2xhc3MiOiAiZG91YmFuLWljb24iCgkJCQkJCX0pKS5hcHBlbmQobygiPHNwYW4+IiwgewoJCQkJCQkJc3R5bGU6ICJjb2xvcjojMDA3NjEwIgoJCQkJCQl9KS5hcHBlbmQobiArICLliIYiKSkpCgkJCQkJfQoJCQkJfQoKCQkJCWZ1bmN0aW9uIHQoZSwgdCkgewoJCQkJCWlmICghKG8oIiMiICsgYS5leHRCcmFuZCArICItZG91YmFuIikubGVuZ3RoID4gMCB8fCBudWxsID09IGUucmF0aW5nLmF2ZXJhZ2UgfHwgMCA9PSBwYXJzZUludChlLnJhdGluZy5hdmVyYWdlKSkpIHsKCQkJCQkJdmFyIG4gPSBlLnJhdGluZy5hdmVyYWdlOwoJCQkJCQlvKCIuIiArIGEuZXh0QnJhbmQgKyAiLWZhdm9yLW1vZHVsZSIpLmVxKDApLmFmdGVyKG8oIjxkaXY+IiwgewoJCQkJCQkJaWQ6IGEuZXh0QnJhbmQgKyAiLWRvdWJhbiIsCgkJCQkJCQkiY2xhc3MiOiBhLmV4dEJyYW5kICsgIi1jbG9zZS1tb2R1bGUgIiArIGEuZXh0QnJhbmQgKyAiLWRlc2MgcmUtIiArIGEuZXh0QnJhbmQgKyAiLWRlc2MiCgkJCQkJCX0pLmFwcGVuZChvKCI8YT4iLCB7CgkJCQkJCQlpZDogImdvdG9fZG91YmFuIiwKCQkJCQkJCXRpdGxlOiAi6LGG55Oj6K+E5YiGIiwKCQkJCQkJCXRhcmdldDogIl9ibGFuayIsCgkJCQkJCQlocmVmOiBlLmFsdCArICgicmV2aWV3cz8iICsgYS5leHRCcmFuZCArICJfaXNibj0iKSArIHQKCQkJCQkJfSkuYXBwZW5kKG8oIjxkaXY+IiwgewoJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICJhbmRfZG91YmFuX2ljb25fYm90dG9tIgoJCQkJCQl9KSkuYXBwZW5kKG8oIjxkaXY+IiwgewoJCQkJCQkJImNsYXNzIjogYS5leHROYW1lICsgIl9kb3ViYW5fdGV4dF9ib3R0b20iCgkJCQkJCX0pLmFwcGVuZChuICsgIuWIhiIpKSkpLCBzLnNldEJvdHRvbVZpZXdPZmZzZXQoKSwgbC5zZXRCb3R0b21WaWV3T2Zmc2V0KCkKCQkJCQl9CgkJCQl9CgoJCQkJZnVuY3Rpb24gaShlLCB0KSB7CgkJCQkJaWYgKCEobygiIyIgKyBhLmV4dE5hbWUgKyAiX2RvdWJhbl9kaXYiKS50ZXh0KCkubGVuZ3RoID4gMSB8fCBudWxsID09IGUucmF0aW5nLmF2ZXJhZ2UgfHwgMCA9PSBwYXJzZUludChlLnJhdGluZy5hdmVyYWdlKSkpIHsKCQkJCQkJdmFyIG4gPSBlLnJhdGluZy5hdmVyYWdlLAoJCQkJCQkJaSA9IDE2LAoJCQkJCQkJciA9IDgwLAoJCQkJCQkJcyA9IDE2LAoJCQkJCQkJbCA9IC04MCwKCQkJCQkJCWMgPSAtMTc5LAoJCQkJCQkJZCA9IDAsCgkJCQkJCQlwID0gMCwKCQkJCQkJCWggPSBwYXJzZUZsb2F0KG4pIC8gMiwKCQkJCQkJCXUgPSBwYXJzZUludChoKTsKCQkJCQkJaCAhPSB1ICYmIChoID0gLjI1ID49IGggLSB1ID8gdSA6IGggLSB1ID49IC43NSA/IHUgKyAxIDogdSArIC41KSwgZCA9IHMgKiBwYXJzZUludChoIC0gNSksIHAgPSBwYXJzZUludChoKSA9PSBoID8gbCA6IGM7CgkJCQkJCXZhciBtID0gImhlaWdodDoiICsgaSArICJweDt3aWR0aDoiICsgciArICJweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOiIgKyBkICsgInB4ICIgKyBwICsgInB4O2Zsb2F0OmxlZnQiOwoJCQkJCQlvKCIjIiArIGEuZXh0TmFtZSArICJfZG91YmFuX2RpdiIpLmFkZENsYXNzKGEuZXh0TmFtZSArICJfZG91YmFuIiksIG8oIiMiICsgYS5leHROYW1lICsgIl9kb3ViYW5fZGl2IikuYXBwZW5kKG8oIjxhPiIsIHsKCQkJCQkJCWlkOiBhLmV4dE5hbWUgKyAiX2RvdWJhbl9pbnNlcnRfaWNvbiIsCgkJCQkJCQl0aXRsZTogIuixhueTo+ivhOWIhiIsCgkJCQkJCQl0YXJnZXQ6ICJfYmxhbmsiLAoJCQkJCQkJaHJlZjogZS5hbHQgKyAoInJldmlld3M/IiArIGEuZXh0QnJhbmQgKyAiX2lzYm49IikgKyB0CgkJCQkJCX0pKS5hcHBlbmQobygiPGRpdj4iLCB7CgkJCQkJCQlpZDogYS5leHROYW1lICsgIl9kb3ViYW5faW5zZXJ0X3RleHQiCgkJCQkJCX0pLmFwcGVuZChvKCI8c3Bhbj4iLCB7CgkJCQkJCQkiY2xhc3MiOiBhLmV4dE5hbWUgKyAiX2RvdWJhbl9pbnNlcnRfdGV4dCIKCQkJCQkJfSkuYXBwZW5kKCLor4TliIbvvJoiKSkpLmFwcGVuZChvKCI8ZGl2PiIsIHsKCQkJCQkJCWlkOiBhLmV4dE5hbWUgKyAiX2RvdWJhbl9zdGFyIiwKCQkJCQkJCXN0eWxlOiBtCgkJCQkJCX0pKS5hcHBlbmQobygiPGRpdj4iLCB7CgkJCQkJCQlpZDogYS5leHROYW1lICsgIl9kb3ViYW5fYXZlcmFnZSIKCQkJCQkJfSkuYXBwZW5kKGUucmF0aW5nLmF2ZXJhZ2UgKyAi5YiGIikpLCBvKCIjIiArIGEuZXh0TmFtZSArICJfZG91YmFuX2RpdiIpLnNob3coKQoJCQkJCX0KCQkJCX0KCQkJCXZhciBvID0gbig2KSwKCQkJCQlyID0ge30sCgkJCQkJcyA9IG4oNzUpLAoJCQkJCWwgPSBuKDg3KTsKCQkJCXJldHVybiByLnNob3cgPSBmdW5jdGlvbihvLCByKSB7CgkJCQkJaWYgKG51bGwgIT0gbyAmJiAiIiAhPSBvKSB7CgkJCQkJCXZhciBzID0gbig5KTsKCQkJCQkJcy5nZXRQdXJlKGxvY2F0aW9uLnByb3RvY29sICsgIi8vYXBpLmRvdWJhbi5jb20vdjIvYm9vay9pc2JuLyIgKyBvKS5kb25lKGZ1bmN0aW9uKG4pIHsKCQkJCQkJCSI2MDAwIiAhPSBuLmNvZGUgJiYgKCJ0b3AiID09IHIgJiYgZShuLCBvKSwgImJvdHRvbSIgPT0gciAmJiB0KG4sIG8pLCBpKG4sIG8pLCBhLmZpeFdpZHRoKCkpCgkJCQkJCX0pCgkJCQkJfQoJCQkJfSwgcgoJCQl9LmNhbGwodCwgbiwgdCwgZSksICEodm9pZCAwICE9PSBpICYmIChlLmV4cG9ydHMgPSBpKSkKCQl9KS5jYWxsKHQsIG4oMSkpCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCXZhciBpOwoJCShmdW5jdGlvbihhKSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJaSA9IGZ1bmN0aW9uKCkgewoJCQkJZnVuY3Rpb24gZSgpIHsKCQkJCQl2YXIgZSA9IHRoaXM7CgkJCQkJbygiIyIgKyBhLmV4dEJyYW5kICsgIl9xdWFuX3Nob3dfbGlzdF9kaXYiKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQkJcygiY2xpY2s6bWFpbjpjdXhpYW8iKSwgbC5sb2coIuS4u+W3peWFt+agj+S/g+mUgOeCueWHuyIpCgkJCQkJfSksIG8oIiMiICsgYS5leHRCcmFuZCArICJfcXVhbl9idG4iKS5tb3VzZW92ZXIoZnVuY3Rpb24oKSB7CgkJCQkJCXZhciB0ID0gdGhpczsKCQkJCQkJZS50aW1lcl9zaG93X2RpdiA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJCQlvKCIuIiArIGEuZXh0QnJhbmQgKyAiX3NtYWxsX3RhYiIpLmhpZGUoKSwgbygiLnBhbmVsIikuaGlkZSgpLCBvKCIjIiArIGEuZXh0QnJhbmQgKyAiX3F1YW5fc2hvd19saXN0X2RpdiIpLmNzcygibGVmdCIsIG8odCkub2Zmc2V0KCkubGVmdCArICJweCIpLnNob3coKQoJCQkJCQl9LCAzMDApLCBjbGVhclRpbWVvdXQoZS50aW1lcl9oaWRlX2RpdiksIHMoImhvdmVyOm1haW46cXVhbiIpLCBsLmxvZygi5Li75bel5YW35qCP5LyY5oOg5Yi46byg5qCH5oKs5rWuIikKCQkJCQl9KSwgbygiIyIgKyBhLmV4dEJyYW5kICsgIl9xdWFuX2J0biIpLm1vdXNlb3V0KGZ1bmN0aW9uKCkgewoJCQkJCQllLnRpbWVyX2hpZGVfZGl2ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJCW8oIiMiICsgYS5leHRCcmFuZCArICJfcXVhbl9zaG93X2xpc3RfZGl2IikuaGlkZSgpCgkJCQkJCX0sIDMwMCksIGNsZWFyVGltZW91dChlLnRpbWVyX3Nob3dfZGl2KQoJCQkJCX0pLCBvKCIjIiArIGEuZXh0QnJhbmQgKyAiX3F1YW5fYnRuIikuY2xpY2soZnVuY3Rpb24oZSkgewoJCQkJCQlyZXR1cm4gImJsb2NrIiA9PSBvKCIjIiArIGEuZXh0QnJhbmQgKyAiX3F1YW5fc2hvd19saXN0X2RpdiIpLmNzcygiZGlzcGxheSIpID8gbygiIyIgKyBhLmV4dEJyYW5kICsgIl9xdWFuX3Nob3dfbGlzdF9kaXYiKS5oaWRlKCkgOiAobygiLiIgKyBhLmV4dEJyYW5kICsgIl9zbWFsbF90YWIiKS5oaWRlKCksIG8oIi5wYW5lbCIpLmhpZGUoKSwgbygiIyIgKyBhLmV4dEJyYW5kICsgIl9xdWFuX3Nob3dfbGlzdF9kaXYiKS5jc3MoImxlZnQiLCBvKHRoaXMpLm9mZnNldCgpLmxlZnQgKyAicHgiKS5zaG93KCkpLCBlLnN0b3BQcm9wYWdhdGlvbigpLCAhMQoJCQkJCX0pLCBvKCIjIiArIGEuZXh0QnJhbmQgKyAiX3F1YW5fc2hvd19saXN0X2RpdiIpLm1vdXNlZW50ZXIoZnVuY3Rpb24oKSB7CgkJCQkJCWNsZWFyVGltZW91dChlLnRpbWVyX2hpZGVfZGl2KQoJCQkJCX0pLCBvKCIjIiArIGEuZXh0QnJhbmQgKyAiX3F1YW5fc2hvd19saXN0X2RpdiIpLm1vdXNlbGVhdmUoZnVuY3Rpb24oKSB7CgkJCQkJCWUudGltZXJfaGlkZV9kaXYgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCQkJbygiIyIgKyBhLmV4dEJyYW5kICsgIl9xdWFuX3Nob3dfbGlzdF9kaXYiKS5oaWRlKCkKCQkJCQkJfSwgMzAwKQoJCQkJCX0pLCBvKCIjIiArIGEuZXh0QnJhbmQgKyAiX3F1YW5fc2hvd19saXN0X2RpdiIpLmNsaWNrKGZ1bmN0aW9uKCkgewoJCQkJCQlvKCIuIiArIGEuZXh0QnJhbmQgKyAiX3NtYWxsX3RhYiIpLmhpZGUoKQoJCQkJCX0pCgkJCQl9CgoJCQkJZnVuY3Rpb24gdChlKSB7CgkJCQkJZm9yICh2YXIgdCA9IFtdLCBuID0gMDsgbiA8IGUubGVuZ3RoOyBuKyspIG5ldyBEYXRlKGVbbl0uZSkgPiBuZXcgRGF0ZSAmJiB0LnB1c2goZVtuXSk7CgkJCQkJcmV0dXJuIHQKCQkJCX0KCgkJCQlmdW5jdGlvbiBpKCkgewoJCQkJCW8oIiMiICsgYS5leHROYW1lICsgIi1tYWluIikuYXBwZW5kKG8oIjxkaXY+IiwgewoJCQkJCQlpZDogYS5leHRCcmFuZCArICJfcXVhbl9zaG93X2xpc3RfZGl2IiwKCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICJfc21hbGxfdGFiIgoJCQkJCX0pLmFwcGVuZChvKCI8ZGl2PiIsIHsKCQkJCQkJImNsYXNzIjogInBvaW50ZXItdXAiCgkJCQkJfSkuaHRtbCgiPCEtLVtpZiBJRSA2XT7il4Y8IVtlbmRpZl0tLT4iKSkuYXBwZW5kKG8oIjxkaXY+IiwgewoJCQkJCQlpZDogYS5leHRCcmFuZCArICJfcXVhbl9zaG93X2xpc3RfY29udGVudCIKCQkJCQl9KS5hcHBlbmQobygiPHVsPiIsIHsKCQkJCQkJaWQ6IGEuZXh0QnJhbmQgKyAiX3F1YW5fc2hvd19saXN0X3VsIiwKCQkJCQkJc3R5bGU6ICJwYWRkaW5nOjBweDsiCgkJCQkJfSkpKSksIGUuY2FsbCh7fSkKCQkJCX0KCQkJCXZhciBvID0gbig2KSwKCQkJCQlyID0ge30sCgkJCQkJcyA9IG4oMjYpLAoJCQkJCWwgPSBuKDEzKTsKCQkJCXJldHVybiByLnJlcGxhY2VRdWFuID0gZnVuY3Rpb24oZSkgewoJCQkJCWlmIChlICYmIG8oIiMiICsgYS5leHROYW1lICsgIi1iMmMtZHAiKS5sZW5ndGgpIHsKCQkJCQkJdmFyIHQgPSBvKCIjIiArIGEuZXh0TmFtZSArICItYjJjLWRwLWRldGFpbCB1bC5idXktbGlzdCBsaSIpLAoJCQkJCQkJbiA9IHQubGVuZ3RoIC0gMTsKCQkJCQkJbygiIyIgKyBhLmV4dE5hbWUgKyAiLWIyYy1kcC1kZXRhaWwgdWwuYnV5LWxpc3QgbGkiKS5lcShuKS5wcmVwZW5kKG8oIjxhPiIsIHsKCQkJCQkJCXRhcmdldDogIl9ibGFuayIsCgkJCQkJCQkiY2xhc3MiOiAiYnV5LWxpc3QtcXVhbiIsCgkJCQkJCQlzdHlsZTogImZsb2F0OmxlZnQ7IG1hcmdpbi1sZWZ0OjRweDsiLAoJCQkJCQkJaHJlZjogZS51cmwKCQkJCQkJfSkudGV4dCgi5p+l55yL5LyY5oOg5Yi4KCIgKyBlLm51bSArICIpIikpCgkJCQkJfQoJCQkJfSwgci5pbnNlcnRTaG9wID0gZnVuY3Rpb24oZSkgewoJCQkJCWUucXVhbnMgPSB0KGUucXVhbnMpLCBpKCk7CgkJCQkJZm9yICh2YXIgbiA9IGUucXVhbnMubGVuZ3RoLCByID0gMDsgbiA+IHIgJiYgNSA+IHI7ICsrcikgewoJCQkJCQl2YXIgcyA9IGUucXVhbnNbcl07CgkJCQkJCW8oIiMiICsgYS5leHRCcmFuZCArICJfcXVhbl9zaG93X2xpc3RfdWwiKS5hZGRDbGFzcygic2hvcF9wcm9tb3Rpb25zIikuYXBwZW5kKCc8bGk+PGEgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9Imh0dHA6Ly9mZi53aW4udGFvYmFvLmNvbS9wcm9tb3Rpb24uaHRtP2lkPScgKyBlLnVzZXJfaWQgKyAnIj48ZGl2IGNsYXNzPSInICsgYS5leHRCcmFuZCArICctcXVhbi1sZWZ0Ij7mu6EgPHNwYW4gY2xhc3M9IicgKyBhLmV4dEJyYW5kICsgJy1yZWQiPicgKyBzLm0gKyAnPC9zcGFuPiDlh48gPHNwYW4gY2xhc3M9IicgKyBhLmV4dEJyYW5kICsgJy1yZWQiPicgKyBzLmogKyAnPC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9IicgKyBhLmV4dEJyYW5kICsgJy1xdWFuLXJpZ2h0Ij7mnInmlYjml7bpl7Q6ICcgKyBzLnMgKyAiIH4gIiArIHMuZSArICIgPC9kaXY+PC9hPjwvbGk+IikKCQkJCQl9CgkJCQkJbiAmJiBvKCIjIiArIGEuZXh0QnJhbmQgKyAiX3F1YW5fYnRuIikuYXBwZW5kKCc8c3BhbiBjbGFzcz0iJyArIGEuZXh0QnJhbmQgKyAnLXJlZCI+JyArIG4gKyAiPC9zcGFuPiIpLCBvKCIjIiArIGEuZXh0QnJhbmQgKyAiX3F1YW5fc2hvd19saXN0X3VsIikuYXBwZW5kKG8oIjxsaT4iLCB7CgkJCQkJCXN0eWxlOiAidGV4dC1hbGlnbjogcmlnaHQ7Ym9yZGVyOiBub25lOyIKCQkJCQl9KS5hcHBlbmQobygiPGE+IiwgewoJCQkJCQl0aXRsZTogIuafpeeci+WFqOmDqOS8mOaDoOWIuCIsCgkJCQkJCWhyZWY6ICJodHRwOi8vZmYud2luLnRhb2Jhby5jb20vcHJvbW90aW9uLmh0bT9pZD0iICsgZS51c2VyX2lkLAoJCQkJCQkiY2xhc3MiOiAic2hvd19hbGxfcXVhbiIsCgkJCQkJCXRhcmdldDogIl9ibGFuayIKCQkJCQl9KS50ZXh0KCLmn6XnnIvlhajpg6goIiArIG4gKyAiKSIpKSkKCQkJCX0sIHIuaW5pdF9zaG9wX3Byb21vdGlvbnNfYm90dG9tID0gZnVuY3Rpb24oZSkgewoJCQkJCWUucXVhbnMgPSB0KGUucXVhbnMpLCBlICYmIGUucXVhbnMgJiYgZS5xdWFucy5sZW5ndGggJiYgKGEuY2lyY2xlTm90aWNlKGUpLCBvKCIjIiArIGEuZXh0QnJhbmQgKyAiLXF1YW4iKS5hcHBlbmQobygiPGRpdj4iLCB7CgkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLWRldGFpbCIsCgkJCQkJCXN0eWxlOiAiZGlzcGxheTpub25lIgoJCQkJCX0pLmFwcGVuZChvKCI8cD4iLCB7CgkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbS1kZXRhaWwtdGl0bGUgIiArIGEuZXh0QnJhbmQgKyAiLWhlaWdodC1hdXRvIgoJCQkJCX0pLmFwcGVuZChvKCI8c3Bhbj4iLCB7CgkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLWRldGFpbC10aXRsZS1kZXNjIiwKCQkJCQkJdGV4dDogIuWVhuWfjuS8mOaDoOWIuCIKCQkJCQl9KSkuYXBwZW5kKG8oIjxhPiIsIHsKCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItZ3JleSAiICsgYS5leHRCcmFuZCArICJfc2VlX2FsbCIsCgkJCQkJCWhyZWY6ICJodHRwOi8vZmYud2luLnRhb2Jhby5jb20vcHJvbW90aW9uLmh0bT9pZD0iICsgZS51c2VyX2lkLAoJCQkJCQl0ZXh0OiAi5p+l55yL5YWo6YOoIiwKCQkJCQkJdGFyZ2V0OiAiX2JsYW5rIgoJCQkJCX0pKSkuYXBwZW5kKGZ1bmN0aW9uKCkgewoJCQkJCQlmb3IgKHZhciB0ID0gbygiPHVsPiIsIHsKCQkJCQkJCWlkOiBhLmV4dEJyYW5kICsgIl9xdWFuX2l0ZW1fbGlzdCIsCgkJCQkJCQkiY2xhc3MiOiBhLmV4dEJyYW5kICsgIi1pdGVtLWxpc3Qgc2hvcF9wcm9tb3Rpb25zIgoJCQkJCQl9KSwgbiA9IDA7IG4gPCBlLnF1YW5zLmxlbmd0aCAmJiA1ID4gbjsgbisrKSB0LmFwcGVuZChvKCI8bGk+IiwgewoJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItbGlzdC1pdGVtIiwKCQkJCQkJCXN0eWxlOiAiZGlzcGxheTpibG9jayIKCQkJCQkJfSkuYXBwZW5kKG8oIjxwPiIsIHsKCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLXByb2R1Y3QtdGl0bGUiCgkJCQkJCX0pLmFwcGVuZChvKCI8YT4iLCB7CgkJCQkJCQkiY2xhc3MiOiBhLmV4dEJyYW5kICsgIi1ncmV5ICIgKyBhLmV4dEJyYW5kICsgIi1xdWFuLWJveCIsCgkJCQkJCQl0YXJnZXQ6ICJfYmxhbmsiLAoJCQkJCQkJaHRtbDogJ+a7oSA8c3BhbiBjbGFzcz0iJyArIGEuZXh0QnJhbmQgKyAnLXJlZCI+JyArIGUucXVhbnNbbl0ubSArICc8L3NwYW4+IOWHjyA8c3BhbiBjbGFzcz0iJyArIGEuZXh0QnJhbmQgKyAnLXJlZCI+JyArIGUucXVhbnNbbl0uaiArICI8L3NwYW4+IiwKCQkJCQkJCWhyZWY6ICJodHRwOi8vZmYud2luLnRhb2Jhby5jb20vcHJvbW90aW9uLmh0bT9pZD0iICsgZS51c2VyX2lkCgkJCQkJCX0pKS5hcHBlbmQobygiPHNwYW4+IiwgewoJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItbGlnaHQtZ3JleSIsCgkJCQkJCQlzdHlsZTogImZsb2F0OnJpZ2h0IiwKCQkJCQkJCXRleHQ6ICLmnInmlYjml7bpl7Q6ICIgKyBlLnF1YW5zW25dLnMgKyAiIH4gIiArIGUucXVhbnNbbl0uZQoJCQkJCQl9KSkpKTsKCQkJCQkJcmV0dXJuIHQKCQkJCQl9KSksIG8oIiMiICsgYS5leHRCcmFuZCArICItcXVhbiIpLm1vdXNlZW50ZXIoZnVuY3Rpb24oKSB7CgkJCQkJCW8odGhpcykuZmluZCgiLiIgKyBhLmV4dEJyYW5kICsgIi10YWIiKS5hZGRDbGFzcyhhLmV4dEJyYW5kICsgIi1jb21wYXJlLWl0ZW0taG92ZXIiKS5lbmQoKS5maW5kKCIuIiArIGEuZXh0QnJhbmQgKyAiLWRldGFpbCIpLnNob3coKSwgYS5JRTYgJiYgImFtYXpvbiIgPT0gYS5zaXRlICYmIChvKHRoaXMpLmZpbmQoIi4iICsgYS5leHRCcmFuZCArICItdGFiIikuYWRkQ2xhc3MoYS5leHRCcmFuZCArICItY29tcGFyZS1pdGVtLWhvdmVyIikuZW5kKCkuZmluZCgiLiIgKyBhLmV4dEJyYW5kICsgIi1kZXRhaWwiKS5zaG93KCksIG8oIi4iICsgYS5leHRCcmFuZCArICItZGV0YWlsIikuYWRkQ2xhc3MoImFtYXpvbl9oYWNrIikpLCBzKCJob3ZlcjptYWluOnF1YW4iKSwgbC5sb2coIuS4u+W3peWFt+agj+S8mOaDoOWIuOm8oOagh+aCrOa1riIpCgkJCQkJfSkubW91c2VsZWF2ZShmdW5jdGlvbigpIHsKCQkJCQkJbyh0aGlzKS5maW5kKCIuIiArIGEuZXh0QnJhbmQgKyAiLXRhYiIpLnJlbW92ZUNsYXNzKGEuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbS1ob3ZlciIpLmVuZCgpLmZpbmQoIi4iICsgYS5leHRCcmFuZCArICItZGV0YWlsIikuaGlkZSgpCgkJCQkJfSkpCgkJCQl9LCByLmluaXRfcXVhbl9ib3R0b20gPSBmdW5jdGlvbihlKSB7CgkJCQkJcmV0dXJuIGUgPyAobygiIyIgKyBhLmV4dEJyYW5kICsgIi1xdWFuIikuZmluZCgiLiIgKyBhLmV4dEJyYW5kICsgIi10YWIiKS5hdHRyKCJocmVmIiwgZS51cmwpLCB2b2lkKGUgJiYgZS5xdWFucyAmJiBlLnF1YW5zLmxlbmd0aCAmJiAobygiIyIgKyBhLmV4dEJyYW5kICsgIi1xdWFuIikuYXBwZW5kKG8oIjxkaXY+IiwgewoJCQkJCQkiY2xhc3MiOiBhLmV4dEJyYW5kICsgIi1kZXRhaWwiLAoJCQkJCQlzdHlsZTogImRpc3BsYXk6bm9uZSIKCQkJCQl9KS5hcHBlbmQobygiPHA+IiwgewoJCQkJCQkiY2xhc3MiOiBhLmV4dEJyYW5kICsgIi1jb21wYXJlLWl0ZW0tZGV0YWlsLXRpdGxlICIgKyBhLmV4dEJyYW5kICsgIi1oZWlnaHQtYXV0byIKCQkJCQl9KS5hcHBlbmQobygiPHNwYW4+IiwgewoJCQkJCQkiY2xhc3MiOiBhLmV4dEJyYW5kICsgIi1kZXRhaWwtdGl0bGUtZGVzYyIsCgkJCQkJCXRleHQ6ICLllYbln47kvJjmg6DliLgiCgkJCQkJfSkpLmFwcGVuZChvKCI8YT4iLCB7CgkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLWdyZXkgIiArIGEuZXh0QnJhbmQgKyAiX3NlZV9hbGwiLAoJCQkJCQlocmVmOiBlLnVybCwKCQkJCQkJdGV4dDogIuafpeeci+WFqOmDqCIsCgkJCQkJCXRhcmdldDogIl9ibGFuayIKCQkJCQl9KSkpLmFwcGVuZChmdW5jdGlvbigpIHsKCQkJCQkJZm9yICh2YXIgdCA9IG8oIjx1bD4iLCB7CgkJCQkJCQlpZDogYS5leHRCcmFuZCArICJfcXVhbl9pdGVtX2xpc3QiLAoJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItaXRlbS1saXN0IgoJCQkJCQl9KSwgbiA9IDA7IG4gPCBlLnF1YW5zLmxlbmd0aCAmJiA1ID4gbjsgbisrKSB0LmFwcGVuZChvKCI8bGk+IiwgewoJCQkJCQkJImNsYXNzIjogYS5leHRCcmFuZCArICItbGlzdC1pdGVtIiwKCQkJCQkJCXN0eWxlOiAiZGlzcGxheTpibG9jayIKCQkJCQkJfSkuYXBwZW5kKG8oIjxwPiIsIHsKCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLXByb2R1Y3QtdGl0bGUiCgkJCQkJCX0pLmFwcGVuZChvKCI8YT4iLCB7CgkJCQkJCQkiY2xhc3MiOiBhLmV4dEJyYW5kICsgIi1ncmV5ICIgKyBhLmV4dEJyYW5kICsgIi1xdWFuLWJveCIsCgkJCQkJCQl0YXJnZXQ6ICJfYmxhbmsiLAoJCQkJCQkJdGl0bGU6IGUucXVhbnNbbl0udGl0bGUsCgkJCQkJCQlocmVmOiBlLnF1YW5zW25dLnVybCwKCQkJCQkJCWh0bWw6IGUucXVhbnNbbl0udGl0bGUucmVwbGFjZSgvKFxkKykvZywgIjxzcGFuIGNsYXNzPSciICsgYS5leHRCcmFuZCArICItcmVkJz4kMTwvc3Bhbj4iKQoJCQkJCQl9KSkuYXBwZW5kKG8oIjxzcGFuPiIsIHsKCQkJCQkJCSJjbGFzcyI6IGEuZXh0QnJhbmQgKyAiLWxpZ2h0LWdyZXkiLAoJCQkJCQkJc3R5bGU6ICJmbG9hdDpyaWdodCIsCgkJCQkJCQl0ZXh0OiAi5YmpOiIgKyBlLnF1YW5zW25dLnJlc3QKCQkJCQkJfSkpKSk7CgkJCQkJCXJldHVybiB0CgkJCQkJfSkpLCBvKCIjIiArIGEuZXh0QnJhbmQgKyAiLXF1YW4iKS5tb3VzZWVudGVyKGZ1bmN0aW9uKCkgewoJCQkJCQlvKHRoaXMpLmZpbmQoIi4iICsgYS5leHRCcmFuZCArICItdGFiIikuYWRkQ2xhc3MoYS5leHRCcmFuZCArICItY29tcGFyZS1pdGVtLWhvdmVyIikuZW5kKCkuZmluZCgiLiIgKyBhLmV4dEJyYW5kICsgIi1kZXRhaWwiKS5zaG93KCksIGEuSUU2ICYmICJhbWF6b24iID09IGEuc2l0ZSAmJiAobyh0aGlzKS5maW5kKCIuIiArIGEuZXh0QnJhbmQgKyAiLXRhYiIpLmFkZENsYXNzKGEuZXh0QnJhbmQgKyAiLWNvbXBhcmUtaXRlbS1ob3ZlciIpLmVuZCgpLmZpbmQoIi4iICsgYS5leHRCcmFuZCArICItZGV0YWlsIikuc2hvdygpLCBvKCIuIiArIGEuZXh0QnJhbmQgKyAiLWRldGFpbCIpLmFkZENsYXNzKCJhbWF6b25faGFjayIpKSwgcygiaG92ZXI6bWFpbjpxdWFuIiksIGwubG9nKCLkuLvlt6XlhbfmoI/kvJjmg6DliLjpvKDmoIfmgqzmta4iKQoJCQkJCX0pLm1vdXNlbGVhdmUoZnVuY3Rpb24oKSB7CgkJCQkJCW8odGhpcykuZmluZCgiLiIgKyBhLmV4dEJyYW5kICsgIi10YWIiKS5yZW1vdmVDbGFzcyhhLmV4dEJyYW5kICsgIi1jb21wYXJlLWl0ZW0taG92ZXIiKS5lbmQoKS5maW5kKCIuIiArIGEuZXh0QnJhbmQgKyAiLWRldGFpbCIpLmhpZGUoKQoJCQkJCX0pKSkpIDogdm9pZCBvKCIjIiArIGEuZXh0QnJhbmQgKyAiLXF1YW4iKS5maW5kKCIuIiArIGEuZXh0QnJhbmQgKyAiLXRhYiIpLmF0dHIoImhyZWYiLCAiaHR0cDovL3d3dy4iICsgYS5leHROYW1lICsgIi5jb20vcXVhbi8/ZnJvbT0iICsgYS5mcm9tX2RldmljZSArICImbT1wcm9tb3Rpb24iKQoJCQkJfSwgci5pbnNlcnRRdWFuU2hvd0xpc3QgPSBmdW5jdGlvbihlKSB7CgkJCQkJaWYgKG51bGwgIT0gZSAmJiBudWxsICE9IGUucXVhbnMgJiYgMCAhPSBlLnF1YW5zLmxlbmd0aCkgewoJCQkJCQlpKCk7CgkJCQkJCWZvciAodmFyIHQgPSAwOyB0IDwgZS5xdWFucy5sZW5ndGggJiYgNSA+IHQ7ICsrdCkgbygiIyIgKyBhLmV4dEJyYW5kICsgIl9xdWFuX3Nob3dfbGlzdF91bCIpLmFwcGVuZChvKCI8bGk+Iiwge30pLmFwcGVuZChvKCI8YT4iLCB7CgkJCQkJCQl0aXRsZTogZS5xdWFuc1t0XS50aXRsZSArICIg5YmpOiIgKyBlLnF1YW5zW3RdLnJlc3QgKyAi5bygIiwKCQkJCQkJCWhyZWY6IGUucXVhbnNbdF0udXJsLAoJCQkJCQkJdGFyZ2V0OiAiX2JsYW5rIgoJCQkJCQl9KS5odG1sKGUucXVhbnNbdF0udGl0bGUucmVwbGFjZSgvKFxkKykvZywgIjxzcGFuIGNsYXNzPSciICsgYS5leHRCcmFuZCArICItcmVkJz4kMTwvc3Bhbj4iKSkpLmFwcGVuZChvKCI8c3Bhbj4iLCB7CgkJCQkJCQkiY2xhc3MiOiAicXVhbl9zcGFuIgoJCQkJCQl9KS50ZXh0KCLliak6IiArIGUucXVhbnNbdF0ucmVzdCkpKTsKCQkJCQkJbygiIyIgKyBhLmV4dEJyYW5kICsgIl9xdWFuX3Nob3dfbGlzdF91bCIpLmFwcGVuZChvKCI8bGk+IiwgewoJCQkJCQkJc3R5bGU6ICJ0ZXh0LWFsaWduOiByaWdodDtib3JkZXI6IG5vbmU7IgoJCQkJCQl9KS5hcHBlbmQobygiPGE+IiwgewoJCQkJCQkJdGl0bGU6ICLmn6XnnIvlhajpg6jkvJjmg6DliLgiLAoJCQkJCQkJaHJlZjogZS51cmwsCgkJCQkJCQkiY2xhc3MiOiAic2hvd19hbGxfcXVhbiIsCgkJCQkJCQl0YXJnZXQ6ICJfYmxhbmsiCgkJCQkJCX0pLnRleHQoIuafpeeci+WFqOmDqCgiICsgZS5udW0gKyAiKSIpKSkKCQkJCQl9CgkJCQl9LCByLmJsaW5rUGFnZSA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlpZiAoL2Rvbmd0YWlcLnRhb2Jhb1wuY29tXC9taWNyb3Nob3BcL2Zyb250XC5odG0vLnRlc3QoZSkpIHRyeSB7CgkJCQkJCXZhciB0ID0gMCwKCQkJCQkJCW4gPSBvKCIuZHQtbWFpbi10YWJfcmlnaHRfc2FsZSIpLmVxKDApOwoJCQkJCQluLmNzcygiYm9yZGVyIiwgIjJweCBzb2xpZCByZWQiKSwgbi5ob3ZlcihmdW5jdGlvbigpIHsKCQkJCQkJCWNsZWFySW50ZXJ2YWwoYS50aW1lciksIG4uY3NzKCJib3JkZXItY29sb3IiLCAiI2YxZWZmMCIpCgkJCQkJCX0pLCBhLnRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7CgkJCQkJCQl0KysgJSAyID09IDAgPyBuLmNzcygiYm9yZGVyLWNvbG9yIiwgIiNmMWVmZjAiKSA6IG4uY3NzKCJib3JkZXItY29sb3IiLCAicmVkIikKCQkJCQkJfSwgNTAwKSwgc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJCWNsZWFySW50ZXJ2YWwoYS50aW1lciksIG4uY3NzKCJib3JkZXItY29sb3IiLCAiI2YxZWZmMCIpCgkJCQkJCX0sIDFlNCkKCQkJCQl9IGNhdGNoIChpKSB7CgkJCQkJCWlmIChhLmRlYnVnKSB0aHJvdyBpCgkJCQkJfQoJCQkJfSwgcgoJCQl9LmNhbGwodCwgbiwgdCwgZSksICEodm9pZCAwICE9PSBpICYmIChlLmV4cG9ydHMgPSBpKSkKCQl9KS5jYWxsKHQsIG4oMSkpCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCXZhciBpOwoJCShmdW5jdGlvbihhKSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJaSA9IGZ1bmN0aW9uKCkgewoJCQkJdmFyIGUgPSBuKDYpOwoJCQkJcmV0dXJuIHsKCQkJCQl0eXBlOiAidG9wIiwKCQkJCQljbGVhclRpbWVyOiBudWxsLAoJCQkJCXRhYnM6IHsKCQkJCQkJamluZ2Rvbmc6IHsKCQkJCQkJCXNpdGVfaWQ6IDMsCgkJCQkJCQlwYXR0ZXJuOiAiaHR0cDovL3NlYXJjaC5qZC5jb20vU2VhcmNoP2VuYz11dGYtOCZrZXl3b3JkPSIKCQkJCQkJfSwKCQkJCQkJYW1hem9uOiB7CgkJCQkJCQlzaXRlX2lkOiAxLAoJCQkJCQkJcGF0dGVybjogImh0dHA6Ly93d3cuYW1hem9uLmNuL3M/ZmllbGQta2V5d29yZHM9IgoJCQkJCQl9LAoJCQkJCQlkYW5nZGFuZzogewoJCQkJCQkJc2l0ZV9pZDogMiwKCQkJCQkJCXBhdHRlcm46ICJodHRwOi8vc2VhcmNoYi5kYW5nZGFuZy5jb20vP2tleT0iCgkJCQkJCX0sCgkJCQkJCXN1bmluZzogewoJCQkJCQkJc2l0ZV9pZDogMjUsCgkJCQkJCQlwYXR0ZXJuOiAiaHR0cDovL3NlYXJjaC5zdW5pbmcuY29tL2VtYWxsL3NlYXJjaC5kbz9rZXl3b3JkPSIKCQkJCQkJfSwKCQkJCQkJdGFvYmFvOiB7CgkJCQkJCQlzaXRlX2lkOiA4MywKCQkJCQkJCXBhdHRlcm46ICJodHRwOi8vcy50YW9iYW8uY29tL3NlYXJjaD9xPSIKCQkJCQkJfSwKCQkJCQkJZ29tZTogewoJCQkJCQkJc2l0ZV9pZDogMjgsCgkJCQkJCQlwYXR0ZXJuOiAiaHR0cDovL3d3dy5nb21lLmNvbS5jbi9zZWFyY2g/cXVlc3Rpb249IgoJCQkJCQl9LAoJCQkJCQl5aWhhb2RpYW46IHsKCQkJCQkJCXNpdGVfaWQ6IDMxLAoJCQkJCQkJcGF0dGVybjogImh0dHA6Ly9zZWFyY2gueWhkLmNvbS9zMi9jMC0wL2siCgkJCQkJCX0sCgkJCQkJCXZpcHNob3A6IHsKCQkJCQkJCXNpdGVfaWQ6IDEyOSwKCQkJCQkJCXBhdHRlcm46ICJodHRwOi8vd3d3LiIgKyBhLmV4dE5hbWUgKyAiLmNvbS9zZWFyY2g/Y3JjNjQ9MSZzX3ZpcD0iCgkJCQkJCX0KCQkJCQl9LAoJCQkJCWd3ZEFwaTogImh0dHA6Ly93d3cuIiArIGEuZXh0TmFtZSArICIuY29tL3NlYXJjaD9zX3Byb2R1Y3Q9IiwKCQkJCQlpc0ZvbGRlck9wZW46ICExLAoJCQkJCXNldFR5cGU6IGZ1bmN0aW9uKGUpIHsKCQkJCQkJdGhpcy50eXBlID0gZQoJCQkJCX0sCgkJCQkJc2VuZFNlYXJjaFdheTogZnVuY3Rpb24oZSkgewoJCQkJCQl2YXIgdCA9IHsKCQkJCQkJCQki5Zu9576OIjogImdvbWUiLAoJCQkJCQkJCSLkuIDlj7flupciOiAieWloYW9kaWFuIiwKCQkJCQkJCQki5ZSv5ZOB5LyaIjogInZpcHNob3AiLAoJCQkJCQkJCSLoi4/lroEiOiAic3VuaW5nIiwKCQkJCQkJCQki5Lqs5LicIjogImpkIiwKCQkJCQkJCQki5b2T5b2TIjogImRhbmdkYW5nIiwKCQkJCQkJCQki5Lqa6ams6YCKIjogImFtYXpvbiIsCgkJCQkJCQkJIua3mOWunSI6ICJ0YW9iYW8iLAoJCQkJCQkJCSLotK3nianlhZoiOiAiZ3dkIgoJCQkJCQkJfSwKCQkJCQkJCWkgPSBuKDkpOwoJCQkJCQlpLmdldChhLnNlcnZlciArICIvYnJ3ZXh0L3Blcm1hbmVudF9pZD92ZXJzaW9uPTImb3A9c2V0X3NlYXJjaF93YXkmc2VhcmNoX3dheT0iICsgdFtlXSkKCQkJCQl9LAoJCQkJCXNldFNlYXJjaFdheTogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciB0ID0gewoJCQkJCQkJZ29tZTogIuWbvee+jiIsCgkJCQkJCQl5aWhhb2RpYW46ICLkuIDlj7flupciLAoJCQkJCQkJdmlwc2hvcDogIuWUr+WTgeS8miIsCgkJCQkJCQlzdW5pbmc6ICLoi4/lroEiLAoJCQkJCQkJamQ6ICLkuqzkuJwiLAoJCQkJCQkJZGFuZ2Rhbmc6ICLlvZPlvZMiLAoJCQkJCQkJYW1hem9uOiAi5Lqa6ams6YCKIiwKCQkJCQkJCXRhb2JhbzogIua3mOWunSIsCgkJCQkJCQlnd2Q6ICLotK3nianlhZoiCgkJCQkJCX07CgkJCQkJCWEuc2VhcmNoX3dheSA9IHRbYS5zZWFyY2hfd2F5XSwgInZpcHNob3AiID09IGEuc2l0ZSAmJiAoYS5zZWFyY2hfd2F5ID0gIuWUr+WTgeS8miIpOwoJCQkJCQl2YXIgbiA9IHRoaXMsCgkJCQkJCQlpID0gWyLmt5jlrp0iLCAi6IuP5a6BIiwgIuWUr+WTgeS8miIsICLlvZPlvZMiLCAi5Lqs5LicIiwgIuS6mumprOmAiiIsICLotK3nianlhZoiLCAi5Zu9576OIiwgIuS4gOWPt+W6lyJdOwoJCQkJCQllLmluQXJyYXkoYS5zZWFyY2hfd2F5LCBpKSA+IC0xICYmIGUoIiNzZWFyY2hfd2Vic2l0ZSIpLmNoaWxkcmVuKCJsaSIpLmVhY2goZnVuY3Rpb24oKSB7CgkJCQkJCQlhLnNlYXJjaF93YXkgPT0gZSh0aGlzKS50ZXh0KCkgJiYgKGUoIiNzZWFyY2hfd2Vic2l0ZSIpLmNoaWxkcmVuKCJsaSIpLmVhY2goZnVuY3Rpb24oKSB7CgkJCQkJCQkJZSh0aGlzKS5yZW1vdmVDbGFzcygic2VhcmNoX3dlYnNpdGVfaXRlbV9zZWxlY3QiKSwgZSh0aGlzKS5yZW1vdmVDbGFzcyhhLmV4dEJyYW5kICsgIi1zZWFyY2gtYXJyb3ctdXAiKSwgZSh0aGlzKS5yZW1vdmVDbGFzcyhhLmV4dEJyYW5kICsgIi1zZWFyY2gtYXJyb3ctZG93biIpCgkJCQkJCQl9KSwgZSh0aGlzKS5hZGRDbGFzcygic2VhcmNoX3dlYnNpdGVfaXRlbV9zZWxlY3QiKSwgZSh0aGlzKS5hZGRDbGFzcyhhLmV4dEJyYW5kICsgIi1zZWFyY2gtYXJyb3ctZG93biIpLCBuLmhpZGRlbl9zZWFyY2hfd2Vic2l0ZSgpKQoJCQkJCQl9KQoJCQkJCX0sCgkJCQkJaGlkZGVuX3NlYXJjaF93ZWJzaXRlOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIHQgPSBlKCIjc2VhcmNoX3dlYnNpdGUiKSwKCQkJCQkJCW4gPSB0aGlzOwoJCQkJCQl0LmNoaWxkcmVuKCJsaSIpLmVhY2goZnVuY3Rpb24oKSB7CgkJCQkJCQllKHRoaXMpLnJlbW92ZUNsYXNzKCJzZWFyY2hfd2Vic2l0ZV9pdGVtX3Nob3ciKSwgZSh0aGlzKS5hZGRDbGFzcygic2VhcmNoX3dlYnNpdGVfaXRlbV9oaWRkZW4iKQoJCQkJCQl9KSwgZSgiLnNlYXJjaF93ZWJzaXRlX2l0ZW1fc2VsZWN0IikuZWFjaChmdW5jdGlvbigpIHsKCQkJCQkJCWUodGhpcykucmVtb3ZlQ2xhc3MoInNlYXJjaF93ZWJzaXRlX2l0ZW1faGlkZGVuIiksIGUodGhpcykuYWRkQ2xhc3MoInNlYXJjaF93ZWJzaXRlX2l0ZW1fc2hvdyIpLCAidG9wIiA9PSBuLnR5cGUgJiYgZSgiI3NlYXJjaF93ZWJzaXRlIikucHJlcGVuZChlKHRoaXMpKSwgImJvdHRvbSIgPT0gbi50eXBlICYmIGUoIiNzZWFyY2hfd2Vic2l0ZSIpLmFwcGVuZChlKHRoaXMpKQoJCQkJCQl9KSwgImJvdHRvbSIgPT0gbi50eXBlICYmICh0LmF0dHIoInN0eWxlIiwgInRvcDowcHg7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCAjZmZmIiksIGEuSUU2ICYmIHQuY3NzKCJ0b3AiLCAiMThweCIpKSwgInRvcCIgPT0gbi50eXBlICYmIHQuYXR0cigic3R5bGUiLCAiYm9yZGVyLXJpZ2h0LWNvbG9yOiNmZmY7aGVpZ2h0OjIycHg7IikKCQkJCQl9LAoJCQkJCWJpbmRNb3JzZUVudGVyOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIHQgPSB0aGlzOwoJCQkJCQllKCIjc2VhcmNoX3dlYnNpdGUiKS5jbGljayhmdW5jdGlvbigpIHsKCQkJCQkJCWlmICghdC5pc0ZvbGRlck9wZW4pIHsKCQkJCQkJCQllKHRoaXMpLmNoaWxkcmVuKCJsaSIpLmVhY2goZnVuY3Rpb24oKSB7CgkJCQkJCQkJCWUodGhpcykucmVtb3ZlQ2xhc3MoInNlYXJjaF93ZWJzaXRlX2l0ZW1faGlkZGVuIiksIGUodGhpcykuYWRkQ2xhc3MoInNlYXJjaF93ZWJzaXRlX2l0ZW1fc2hvdyIpCgkJCQkJCQkJfSksICJib3R0b20iID09IHQudHlwZSAmJiAoYS5uZXdfZXh0ZW5zaW9uID8gZSh0aGlzKS5hdHRyKCJzdHlsZSIsICJ0b3A6LTE3NXB4O2JvcmRlci1yaWdodDoxcHggc29saWQgI2NkY2RjZDtoZWlnaHQ6MjAwcHg7IikgOiBlKHRoaXMpLmF0dHIoInN0eWxlIiwgInRvcDotMjAwcHg7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCAjY2RjZGNkO2hlaWdodDoyMjVweDsiKSwgYS5JRTYgJiYgZSh0aGlzKS5jc3MoInRvcCIsICItMTU4cHgiKSksICJ0b3AiID09IHQudHlwZSAmJiBlKHRoaXMpLmF0dHIoInN0eWxlIiwgImJvcmRlci1yaWdodDoxcHggc29saWQgI2NkY2RjZDtoZWlnaHQ6YXV0bzt3aWR0aDo2MXB4O2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDBweDsiKTsKCQkJCQkJCQl2YXIgbiA9IGUoImxpLiIgKyBhLmV4dEJyYW5kICsgIi1zZWFyY2gtYXJyb3ctZG93biBzcGFuIikuZXEoMCk7CgkJCQkJCQkJbi5wYXJlbnQoKS5wYXJlbnQoKS5hZGRDbGFzcyhhLmV4dEJyYW5kICsgIi1zZWFyY2gtYXJyb3ctdXAiKSwgbi5wYXJlbnQoKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyhhLmV4dEJyYW5kICsgIi1zZWFyY2gtYXJyb3ctZG93biIpLCB0LmlzRm9sZGVyT3BlbiA9ICEwCgkJCQkJCQl9CgkJCQkJCX0pCgkJCQkJfSwKCQkJCQliaW5kTW9yc2VMZWF2ZTogZnVuY3Rpb24oKSB7CgkJCQkJCXZhciB0ID0gdGhpczsKCQkJCQkJZSgiI3NlYXJjaF93ZWJzaXRlIikubW91c2VsZWF2ZShmdW5jdGlvbigpIHsKCQkJCQkJCXQuY2xlYXJUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJCQkJdC5oaWRkZW5fc2VhcmNoX3dlYnNpdGUoKTsKCQkJCQkJCQl2YXIgbiA9IGUoImxpLiIgKyBhLmV4dEJyYW5kICsgIi1zZWFyY2gtYXJyb3ctdXAgZGl2IikuZXEoMCk7CgkJCQkJCQkJbi5wYXJlbnQoKS5hZGRDbGFzcyhhLmV4dEJyYW5kICsgIi1zZWFyY2gtYXJyb3ctZG93biIpLCBuLnBhcmVudCgpLnJlbW92ZUNsYXNzKGEuZXh0QnJhbmQgKyAiLXNlYXJjaC1hcnJvdy11cCIpLCB0LmlzRm9sZGVyT3BlbiA9ICExCgkJCQkJCQl9LCA1MDApCgkJCQkJCX0pLCBlKCIjc2VhcmNoX3dlYnNpdGUiKS5tb3VzZWVudGVyKGZ1bmN0aW9uKCkgewoJCQkJCQkJY2xlYXJUaW1lb3V0KHQuY2xlYXJUaW1lcikKCQkJCQkJfSkKCQkJCQl9LAoJCQkJCWJpbmRNb3JzZUNsaWNrOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIHQgPSB0aGlzOwoJCQkJCQllKCIjc2VhcmNoX3dlYnNpdGUgbGkiKS5jbGljayhmdW5jdGlvbihuKSB7CgkJCQkJCQl0LmlzRm9sZGVyT3BlbiAmJiAoZSgiI3NlYXJjaF93ZWJzaXRlIikuY2hpbGRyZW4oImxpIikuZWFjaChmdW5jdGlvbigpIHsKCQkJCQkJCQllKHRoaXMpLnJlbW92ZUNsYXNzKCJzZWFyY2hfd2Vic2l0ZV9pdGVtX3NlbGVjdCIpLCBlKHRoaXMpLnJlbW92ZUNsYXNzKGEuZXh0QnJhbmQgKyAiLXNlYXJjaC1hcnJvdy11cCIpCgkJCQkJCQl9KSwgZSh0aGlzKS5hZGRDbGFzcygic2VhcmNoX3dlYnNpdGVfaXRlbV9zZWxlY3QiKSwgZSh0aGlzKS5hZGRDbGFzcyhhLmV4dEJyYW5kICsgIi1zZWFyY2gtYXJyb3ctZG93biIpLCB0LmhpZGRlbl9zZWFyY2hfd2Vic2l0ZSgpLCB0LnNlbmRTZWFyY2hXYXkoZSh0aGlzKS50ZXh0KCkpLCB0LmlzRm9sZGVyT3BlbiA9ICExLCBuLnN0b3BQcm9wYWdhdGlvbigpKQoJCQkJCQl9KQoJCQkJCX0sCgkJCQkJYmluZFN0YXJ0U2VhcmNoOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIHQgPSB0aGlzLAoJCQkJCQkJbiA9ICIiLAoJCQkJCQkJaSA9ICIiLAoJCQkJCQkJbyA9ICIjIiArIGEuZXh0TmFtZSArICItc2VhcmNoLXByb2R1Y3QiLAoJCQkJCQkJciA9ICIjIiArIGEuZXh0TmFtZSArICItc2VhcmNoIjsKCQkJCQkJImJvdHRvbSIgPT0gdGhpcy50eXBlICYmIChvID0gIi4iICsgYS5leHRCcmFuZCArICItc2VhcmNoLWlucHV0IiwgciA9ICIuIiArIGEuZXh0QnJhbmQgKyAiLXNlYXJjaC1idG4iKSwgZShyKS5iaW5kKCJjbGljayIsIGZ1bmN0aW9uKHIpIHsKCQkJCQkJCXZhciBzID0gZSgiLnNlYXJjaF93ZWJzaXRlX2l0ZW1fc2hvdyIpLnRleHQoKTsKCQkJCQkJCWlmIChzID0gcy50cmltKCksICLkuqzkuJwiID09IHMgJiYgKG4gPSB0LnRhYnMuamluZ2RvbmcucGF0dGVybiwgaSA9IHQudGFicy5qaW5nZG9uZy5zaXRlX2lkKSwgIua3mOWunSIgPT0gcyAmJiAobiA9IHQudGFicy50YW9iYW8ucGF0dGVybiwgaSA9IHQudGFicy50YW9iYW8uc2l0ZV9pZCksICLlvZPlvZMiID09IHMpIHsKCQkJCQkJCQluID0gdC50YWJzLmRhbmdkYW5nLnBhdHRlcm4sIGkgPSB0LnRhYnMuZGFuZ2Rhbmcuc2l0ZV9pZDsKCQkJCQkJCQl2YXIgbCA9IGUobykudmFsKCk7CgkJCQkJCQkJbCA9IGwucmVwbGFjZSgvIC9nLCAiLSIpLCBsLmxlbmd0aCA+IDMwICYmIChsID0gbC5zdWJzdHIoMCwgMzApKSwgZShvKS52YWwobCkKCQkJCQkJCX0KCQkJCQkJCWlmICgi6IuP5a6BIiA9PSBzICYmIChuID0gdC50YWJzLnN1bmluZy5wYXR0ZXJuLCBpID0gdC50YWJzLnN1bmluZy5zaXRlX2lkKSwgIuS6mumprOmAiiIgPT0gcyAmJiAobiA9IHQudGFicy5hbWF6b24ucGF0dGVybiwgaSA9IHQudGFicy5hbWF6b24uc2l0ZV9pZCksICLlm73nvo4iID09IHMgJiYgKG4gPSB0LnRhYnMuZ29tZS5wYXR0ZXJuLCBpID0gdC50YWJzLmdvbWUuc2l0ZV9pZCksICLkuIDlj7flupciID09IHMgJiYgKG4gPSB0LnRhYnMueWloYW9kaWFuLnBhdHRlcm4sIGkgPSB0LnRhYnMueWloYW9kaWFuLnNpdGVfaWQpLCAi5ZSv5ZOB5LyaIiA9PSBzICYmIChuID0gdC50YWJzLnZpcHNob3AucGF0dGVybiwgaSA9IHQudGFicy52aXBzaG9wLnNpdGVfaWQpLCAi6LSt54mp5YWaIiA9PSBzKSBuID0gdC5nd2RBcGksIHdpbmRvdy5vcGVuKG4gKyBlbmNvZGVVUklDb21wb25lbnQoZShvKS52YWwoKSkpOwoJCQkJCQkJZWxzZSBpZiAoIuWUr+WTgeS8miIgPT0gcykgd2luZG93Lm9wZW4obiArIGVuY29kZVVSSUNvbXBvbmVudChlKG8pLnZhbCgpKSArICImanU9SlVVMkpUZzRKVGt4SlVVMkpUazRKVUZHZG1sd2MyaHZjQSIpOwoJCQkJCQkJZWxzZSB7CgkJCQkJCQkJdmFyIGMgPSBhLnVfc2VydmVyMiArICIvdW5pb24vZ28iLAoJCQkJCQkJCQlkID0gYyArICIvP3NfcHJvZHVjdD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGUobykudmFsKCkpICsgIiZ0YXJnZXRfdXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQobiArIGVuY29kZVVSSShlKG8pLnZhbCgpKSkgKyAiJnNpdGVfaWQ9IiArIGk7CgkJCQkJCQkJd2luZG93Lm9wZW4oZCkKCQkJCQkJCX0KCQkJCQkJCXJldHVybiByLnN0b3BQcm9wYWdhdGlvbigpLCAhMQoJCQkJCQl9KQoJCQkJCX0sCgkJCQkJYmluZEZvcm1BY3Rpb246IGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgdCA9ICIjIiArIGEuZXh0TmFtZSArICItc2VhcmNoLXByb2R1Y3QiLAoJCQkJCQkJbiA9ICIjIiArIGEuZXh0TmFtZSArICItc2VhcmNoIjsKCQkJCQkJImJvdHRvbSIgPT0gdGhpcy50eXBlICYmICh0ID0gIi4iICsgYS5leHRCcmFuZCArICItc2VhcmNoLWlucHV0IiwgbiA9ICIuIiArIGEuZXh0QnJhbmQgKyAiLXNlYXJjaC1idG4iKSwgZSh0KS5iaW5kKCJrZXlwcmVzcyIsIGZ1bmN0aW9uKHQpIHsKCQkJCQkJCXJldHVybiAiMTMiID09IHQua2V5Q29kZSA/IChlKG4pLmNsaWNrKCksIHQuc3RvcFByb3BhZ2F0aW9uKCksICExKSA6IHZvaWQgMAoJCQkJCQl9KQoJCQkJCX0sCgkJCQkJaW5pdDogZnVuY3Rpb24oZSkgewoJCQkJCQl0aGlzLnNldFR5cGUoZSksIHRoaXMuc2V0U2VhcmNoV2F5KCksIHRoaXMuYmluZE1vcnNlRW50ZXIoKSwgdGhpcy5iaW5kTW9yc2VMZWF2ZSgpLCB0aGlzLmJpbmRNb3JzZUNsaWNrKCksIHRoaXMuYmluZFN0YXJ0U2VhcmNoKCksIHRoaXMuYmluZEZvcm1BY3Rpb24oKQoJCQkJCX0KCQkJCX0KCQkJfS5jYWxsKHQsIG4sIHQsIGUpLCAhKHZvaWQgMCAhPT0gaSAmJiAoZS5leHBvcnRzID0gaSkpCgkJfSkuY2FsbCh0LCBuKDEpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQl2YXIgaTsKCQkoZnVuY3Rpb24oYSkgewoJCQkidXNlIHN0cmljdCI7CgkJCWkgPSBmdW5jdGlvbigpIHsKCQkJCXZhciBlID0gbig2KSwKCQkJCQl0ID0gbigxMjIpOwoJCQkJcmV0dXJuIGUoImJvZHkiKS5hcHBlbmQoJ1xuPHN0eWxlPlxuICAgICNnd2Rfc2V0dGluZ19jb250ZW50IC5nd2Rfc2V0dGluZ19pdGVtIGEge1xuICAgICAgZm9udC1mYW1pbHk6ICJNaWNyb3NvZnQgWWFoZWkiIWltcG9ydGFudDtcbiAgICB9XG48L3N0eWxlPlxuICAgICcpLCB7CgkJCQkJaGlkZGVuVGltZXI6IG51bGwsCgkJCQkJaW5zZXJ0bm9ybWFsVmlldzogZnVuY3Rpb24oKSB7CgkJCQkJCWUoYS5kdmFsKS5hcHBlbmQoZSgiPGRpdj4iLCB7CgkJCQkJCQlpZDogImd3ZF9zZXR0aW5nX2RpdiIsCgkJCQkJCQlzdHlsZTogImRpc3BsYXk6bm9uZSIKCQkJCQkJfSkuYXBwZW5kKGUoIjxkaXY+IiwgewoJCQkJCQkJImNsYXNzIjogInBvaW50ZXItdXAiCgkJCQkJCX0pLmh0bWwoIjwhLS1baWYgSUUgNl0+4peGPCFbZW5kaWZdLS0+IikpLmFwcGVuZChlKCI8ZGl2PiIsIHsKCQkJCQkJCWlkOiAiZ3dkX3NldHRpbmdfY29udGVudCIKCQkJCQkJfSkuYXBwZW5kKGUoIjxkaXY+IiwgewoJCQkJCQkJImNsYXNzIjogImd3ZF9zZXR0aW5nX2l0ZW0iCgkJCQkJCX0pLmFwcGVuZChlKCI8ZGl2PiIsIHsKCQkJCQkJCSJjbGFzcyI6ICJnd2RzZXR0aW5nX2JnIGd3ZF9mdW5jdGlvbl9zZXR0aW5nIgoJCQkJCQl9KSkuYXBwZW5kKGUoIjxhPiIsIHsKCQkJCQkJCWhyZWY6IGEuc2VydmVyICsgIi9icndleHQvc2V0dGluZz9mcm9tPSIgKyB0KGEuZnJvbV9kZXZpY2UpICsgIiZidHlwZT0iICsgKGEuYnR5cGUgPyBhLmJ0eXBlIDogIiIpLAoJCQkJCQkJdGFyZ2V0OiAiX2JsYW5rIgoJCQkJCQl9KS50ZXh0KCLlip/og73orr7nva4iKSkpLmFwcGVuZChlKCI8ZGl2PiIsIHsKCQkJCQkJCSJjbGFzcyI6ICJnd2Rfc2V0dGluZ19pdGVtIgoJCQkJCQl9KS5hcHBlbmQoZSgiPGRpdj4iLCB7CgkJCQkJCQkiY2xhc3MiOiAiZ3dkc2V0dGluZ19iZyBnd2Rfb3Bpbmlvbl9mZWVkYmFjayIKCQkJCQkJfSkpLmFwcGVuZChlKCI8YT4iLCB7CgkJCQkJCQlocmVmOiBhLmNfc2VydmVyICsgIi9icndleHQvc3VnZ2VzdD9yZWZlcj0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGRvY3VtZW50LmxvY2F0aW9uLmhyZWYpICsgIiZmcm9tX2RldmljZT0iICsgYS5mcm9tX2RldmljZSArICImYnR5cGU9IiArIChhLmJ0eXBlID8gYS5idHlwZSA6ICIiKSwKCQkJCQkJCXRhcmdldDogIl9ibGFuayIKCQkJCQkJfSkudGV4dCgi5oSP6KeB5Y+N6aaIIikpKS5hcHBlbmQoZSgiPGRpdj4iLCB7CgkJCQkJCQkiY2xhc3MiOiAiZ3dkX3NldHRpbmdfaXRlbSIKCQkJCQkJfSkuYXBwZW5kKGUoIjxkaXY+IiwgewoJCQkJCQkJImNsYXNzIjogImd3ZHNldHRpbmdfYmcgZ3dkX3VzZV9oZWxwIgoJCQkJCQl9KSkuYXBwZW5kKGUoIjxhPiIsIHsKCQkJCQkJCWhyZWY6IGEuY19zZXJ2ZXIgKyAiL2FwcC9leHRlbnNpb24/cGFnZT1xdWVzdGlvbiIsCgkJCQkJCQl0YXJnZXQ6ICJfYmxhbmsiCgkJCQkJCX0pLnRleHQoIuS9v+eUqOW4ruWKqSIpKSkuYXBwZW5kKGUoIjxkaXY+IiwgewoJCQkJCQkJImNsYXNzIjogImd3ZF9zZXR0aW5nX2l0ZW0iCgkJCQkJCX0pLmFwcGVuZChlKCI8ZGl2PiIsIHsKCQkJCQkJCSJjbGFzcyI6ICJnd2RzZXR0aW5nX2JnIGd3ZF9ob21lcGFnZSIKCQkJCQkJfSkpLmFwcGVuZChlKCI8YT4iLCB7CgkJCQkJCQlocmVmOiBhLmNfc2VydmVyICsgIi8iLAoJCQkJCQkJdGFyZ2V0OiAiX2JsYW5rIgoJCQkJCQl9KS50ZXh0KCLotK3nianlhZrpppbpobUiKSkpKSkKCQkJCQl9LAoJCQkJCWluc2VydFNldHRpbmdWaWV3OiBmdW5jdGlvbih0KSB7CgkJCQkJCXRoaXMuaW5zZXJ0bm9ybWFsVmlldygpLCBlKCIjZ3dkX3NldHRpbmdfY29udGVudCIpLmFwcGVuZChlKCI8ZGl2PiIsIHsKCQkJCQkJCSJjbGFzcyI6ICJnd2Rfc2V0dGluZ19saW5lIgoJCQkJCQl9KSkuYXBwZW5kKGUoIjxkaXY+IiwgewoJCQkJCQkJImNsYXNzIjogImd3ZF9zZXR0aW5nX2l0ZW0iCgkJCQkJCX0pLmFwcGVuZChlKCI8ZGl2PiIsIHsKCQkJCQkJCSJjbGFzcyI6ICJnd2RzZXR0aW5nX2JnIGd3ZF9zaGFyZV9zaW5hX3dlaWJvIgoJCQkJCQl9KSkuYXBwZW5kKCI8YSB0aXRsZT0n5YiG5Lqr5Yiw5paw5rWq5b6u5Y2aJyB0YXJnZXQ9J19zZWxmJyBhaHJlZj0nIiArIHQuc2hhcmVfZ29vZC5zaW5hICsgIicgb25jbGljaz1cIiIgKyB0LnNoYXJlLndpbiArICJcIiBocmVmPSdqYXZhc2NyaXB0Oic+5YiG5Lqr5Yiw5paw5rWq5b6u5Y2aPC9hPiIpKS5hcHBlbmQoZSgiPGRpdj4iLCB7CgkJCQkJCQkiY2xhc3MiOiAiZ3dkX3NldHRpbmdfaXRlbSIKCQkJCQkJfSkuYXBwZW5kKGUoIjxkaXY+IiwgewoJCQkJCQkJImNsYXNzIjogImd3ZHNldHRpbmdfYmcgZ3dkX3NoYXJlX3FxX3F6b25lIgoJCQkJCQl9KSkuYXBwZW5kKCI8YSB0aXRsZT0n5YiG5Lqr5YiwUVHnqbrpl7QnIHRhcmdldD0nX3NlbGYnIGFocmVmPSciICsgdC5zaGFyZV9nb29kLnF6b25lICsgIicgb25jbGljaz1cIiIgKyB0LnNoYXJlLndpbiArICJcIiBocmVmPSdqYXZhc2NyaXB0Oic+5YiG5Lqr5YiwUVHnqbrpl7Q8L2E+IikpLCB0aGlzLmJpbmRFdmVudCgpCgkJCQkJfSwKCQkJCQlpbnNlcnRub3JtYWxWaWV3X2JvdHRvbTogZnVuY3Rpb24oKSB7CgkJCQkJCWEubmV3X2V4dGVuc2lvbiB8fCBlKGEuZHZhbCkuYXBwZW5kKGUoIjxkaXY+IiwgewoJCQkJCQkJaWQ6ICJnd2Rfc2V0dGluZ19kaXYiLAoJCQkJCQkJc3R5bGU6ICJkaXNwbGF5Om5vbmUiCgkJCQkJCX0pLmFwcGVuZChlKCI8ZGl2PiIsIHsKCQkJCQkJCWlkOiAiZ3dkX3NldHRpbmdfY29udGVudCIKCQkJCQkJfSkuYXBwZW5kKGUoIjxkaXY+IiwgewoJCQkJCQkJImNsYXNzIjogImd3ZF9zZXR0aW5nX2xpbmUiCgkJCQkJCX0pKS5hcHBlbmQoZSgiPGRpdj4iLCB7CgkJCQkJCQkiY2xhc3MiOiAiZ3dkX3NldHRpbmdfaXRlbSIKCQkJCQkJfSkuYXBwZW5kKGUoIjxkaXY+IiwgewoJCQkJCQkJImNsYXNzIjogImd3ZF9zZXR0aW5nX2JnIGd3ZF9ob21lcGFnZSIKCQkJCQkJfSkpLmFwcGVuZChlKCI8YT4iLCB7CgkJCQkJCQlocmVmOiBhLmNfc2VydmVyICsgIi8iLAoJCQkJCQkJdGFyZ2V0OiAiX2JsYW5rIgoJCQkJCQl9KS50ZXh0KCLotK3nianlhZrpppbpobUiKSkpLmFwcGVuZChlKCI8ZGl2PiIsIHsKCQkJCQkJCSJjbGFzcyI6ICJnd2Rfc2V0dGluZ19pdGVtIgoJCQkJCQl9KS5hcHBlbmQoZSgiPGRpdj4iLCB7CgkJCQkJCQkiY2xhc3MiOiAiZ3dkX3NldHRpbmdfYmcgZ3dkX3VzZV9oZWxwIgoJCQkJCQl9KSkuYXBwZW5kKGUoIjxhPiIsIHsKCQkJCQkJCWhyZWY6IGEuY19zZXJ2ZXIgKyAiL2FwcC9leHRlbnNpb24/cGFnZT1xdWVzdGlvbiIsCgkJCQkJCQl0YXJnZXQ6ICJfYmxhbmsiCgkJCQkJCX0pLnRleHQoIuS9v+eUqOW4ruWKqSIpKSkuYXBwZW5kKGUoIjxkaXY+IiwgewoJCQkJCQkJImNsYXNzIjogImd3ZF9zZXR0aW5nX2l0ZW0iCgkJCQkJCX0pLmFwcGVuZChlKCI8ZGl2PiIsIHsKCQkJCQkJCSJjbGFzcyI6ICJnd2Rfc2V0dGluZ19iZyBnd2Rfb3Bpbmlvbl9mZWVkYmFjayIKCQkJCQkJfSkpLmFwcGVuZChlKCI8YT4iLCB7CgkJCQkJCQlocmVmOiBhLmNfc2VydmVyICsgIi9icndleHQvc3VnZ2VzdD9yZWZlcj0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGRvY3VtZW50LmxvY2F0aW9uLmhyZWYpICsgIiZmcm9tX2RldmljZT0iICsgYS5mcm9tX2RldmljZSArICImYnR5cGU9IiArIChhLmJ0eXBlID8gYS5idHlwZSA6ICIiKSwKCQkJCQkJCXRhcmdldDogIl9ibGFuayIKCQkJCQkJfSkudGV4dCgi5oSP6KeB5Y+N6aaIIikpKS5hcHBlbmQoZSgiPGRpdj4iLCB7CgkJCQkJCQkiY2xhc3MiOiAiZ3dkX3NldHRpbmdfaXRlbSIKCQkJCQkJfSkuYXBwZW5kKGUoIjxkaXY+IiwgewoJCQkJCQkJImNsYXNzIjogImd3ZF9zZXR0aW5nX2JnIGd3ZF9mdW5jdGlvbl9zZXR0aW5nIgoJCQkJCQl9KSkuYXBwZW5kKGUoIjxhPiIsIHsKCQkJCQkJCWhyZWY6IGEuc2VydmVyICsgIi9icndleHQvc2V0dGluZz9mcm9tPSIgKyB0KGEuZnJvbV9kZXZpY2UpICsgIiZidHlwZT0iICsgKGEuYnR5cGUgPyBhLmJ0eXBlIDogIiIpLAoJCQkJCQkJdGFyZ2V0OiAiX2JsYW5rIgoJCQkJCQl9KS50ZXh0KCLlip/og73orr7nva4iKSkpKS5hcHBlbmQoZSgiPGRpdj4iLCB7CgkJCQkJCQkiY2xhc3MiOiAiZ3dkX3NldHRpbmdfYmcgcG9pbnRlci1kb3duIgoJCQkJCQl9KSkpCgkJCQkJfSwKCQkJCQlpbnNlcnRTZXR0aW5nVmlld19Cb3R0b206IGZ1bmN0aW9uKHQpIHsKCQkJCQkJdGhpcy5pbnNlcnRub3JtYWxWaWV3X2JvdHRvbSgpLCBlKCIjZ3dkX3NldHRpbmdfY29udGVudCIpLmFwcGVuZChlKCI8ZGl2PiIsIHsKCQkJCQkJCWlkOiAiZ3dkX2Nsb3NlTWFpbmJhciIsCgkJCQkJCQkiY2xhc3MiOiAiZ3dkX3NldHRpbmdfaXRlbSIKCQkJCQkJfSkuYXBwZW5kKGUoIjxkaXY+IiwgewoJCQkJCQkJc3R5bGU6IDEgIT0gYS5wX2ZvbGQgPyAiYmFja2dyb3VuZC1wb3NpdGlvbjogLTU1cHggLTVweDsiIDogImJhY2tncm91bmQtcG9zaXRpb246IC02NnB4IC01cHg7IiwKCQkJCQkJCSJjbGFzcyI6ICJnd2Rfc2V0dGluZ19iZyBnd2RfY2xvc2VhbGwiCgkJCQkJCX0pKS5hcHBlbmQoZSgiPGE+IiwgewoJCQkJCQkJaWQ6ICJnd2RfY2xvc2VhbGwiCgkJCQkJCX0pLnRleHQoMSA9PSBhLnBfZm9sZCA/ICLlsZXlvIDmj5Lku7YiIDogIuaUtui1t+aPkuS7tiIpKSksIGUoIiNnd2Rfc2V0dGluZ19jb250ZW50IikucHJlcGVuZChlKCI8ZGl2PiIsIHsKCQkJCQkJCSJjbGFzcyI6ICJnd2Rfc2V0dGluZ19pdGVtIgoJCQkJCQl9KS5hcHBlbmQoZSgiPGRpdj4iLCB7CgkJCQkJCQkiY2xhc3MiOiAiZ3dkX3NldHRpbmdfYmcgZ3dkX3NoYXJlX3NpbmFfd2VpYm8iCgkJCQkJCX0pKS5hcHBlbmQoIjxhIHRpdGxlPSfliIbkuqvliLDmlrDmtarlvq7ljZonIHRhcmdldD0nX3NlbGYnIGFocmVmPSciICsgdC5zaGFyZV9nb29kLnNpbmEgKyAiJyBvbmNsaWNrPVwiIiArIHQuc2hhcmUud2luICsgIlwiIGhyZWY9J2phdmFzY3JpcHQ6Jz7liIbkuqvliLDmlrDmtarlvq7ljZo8L2E+IikpLnByZXBlbmQoZSgiPGRpdj4iLCB7CgkJCQkJCQkiY2xhc3MiOiAiZ3dkX3NldHRpbmdfaXRlbSIKCQkJCQkJfSkuYXBwZW5kKGUoIjxkaXY+IiwgewoJCQkJCQkJImNsYXNzIjogImd3ZF9zZXR0aW5nX2JnIGd3ZF9zaGFyZV9xcV9xem9uZSIKCQkJCQkJfSkpLmFwcGVuZCgiPGEgdGl0bGU9J+WIhuS6q+WIsFFR56m66Ze0JyB0YXJnZXQ9J19zZWxmJyBhaHJlZj0nIiArIHQuc2hhcmVfZ29vZC5xem9uZSArICInIG9uY2xpY2s9XCIiICsgdC5zaGFyZS53aW4gKyAiXCIgaHJlZj0namF2YXNjcmlwdDonPuWIhuS6q+WIsFFR56m66Ze0PC9hPiIpKSwgdGhpcy5iaW5kRXZlbnQoKQoJCQkJCX0sCgkJCQkJYmluZEV2ZW50OiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIHQgPSB0aGlzOwoJCQkJCQllKCIjZ3dkX3NldHRpbmdfY29udGVudCIpLmRlbGVnYXRlKCIuZ3dkX3NldHRpbmdfaXRlbSIsICJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7CgkJCQkJCQllKHRoaXMpLmFkZENsYXNzKCJnd2Rfc2V0dGluZ19pdGVtX2hvdmVyIikKCQkJCQkJfSksIGUoIiNnd2Rfc2V0dGluZ19jb250ZW50IikuZGVsZWdhdGUoIi5nd2Rfc2V0dGluZ19pdGVtIiwgIm1vdXNlbGVhdmUiLCBmdW5jdGlvbigpIHsKCQkJCQkJCWUodGhpcykucmVtb3ZlQ2xhc3MoImd3ZF9zZXR0aW5nX2l0ZW1faG92ZXIiKQoJCQkJCQl9KSwgZSgiI2d3ZF9zZXR0aW5nX2NvbnRlbnQiKS5kZWxlZ2F0ZSgiYSIsICJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQkJdC5oaWRkZW5TZXR0aW5nRGl2KCkKCQkJCQkJfSksIGEuaGFvMTIzIHx8ICJtYXh0aG9uIiA9PT0gYS5mcm9tX2RldmljZSB8fCAoZSgiIyIgKyBhLmxvZ29OYW1lICsgIiwuZ3dkX2xvZ28sLmd3ZC1sb2dvLC5nd2QtcmUtY2hhbmdlLWxvZ28iKS5iaW5kKCJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7CgkJCQkJCQlhLnNob3dfY2xvc2VNYWluQmFyIHx8IChlKCIjZ3dkX2Nsb3NlTWFpbmJhciIpLmhpZGUoKSwgZSgiI2d3ZF9zZXR0aW5nX2RpdiIpLmFkZENsYXNzKCJjbG9zZV9tYWluYmFyIikpLCBlKCIjZ3dkX3NldHRpbmdfZGl2Iikuc2hvdygpCgkJCQkJCX0pLmJpbmQoIm1vdXNlbGVhdmUiLCBmdW5jdGlvbigpIHsKCQkJCQkJCXQuaGlkZGVuU2V0dGluZ0RpdigpCgkJCQkJCX0pLCBlKCIjZ3dkX3NldHRpbmdfZGl2IikuYmluZCgibW91c2VlbnRlciIsIGZ1bmN0aW9uKCkgewoJCQkJCQkJY2xlYXJUaW1lb3V0KHQuaGlkZGVuVGltZXIpCgkJCQkJCX0pLmJpbmQoIm1vdXNlbGVhdmUiLCBmdW5jdGlvbigpIHsKCQkJCQkJCXQuaGlkZGVuU2V0dGluZ0RpdigpCgkJCQkJCX0pKQoJCQkJCX0sCgkJCQkJaGlkZGVuU2V0dGluZ0RpdjogZnVuY3Rpb24oKSB7CgkJCQkJCXRoaXMuaGlkZGVuVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCQkJZSgiI2d3ZF9zZXR0aW5nX2RpdiIpLmhpZGUoKQoJCQkJCQl9LCAzMDApCgkJCQkJfQoJCQkJfQoJCQl9LmNhbGwodCwgbiwgdCwgZSksICEodm9pZCAwICE9PSBpICYmIChlLmV4cG9ydHMgPSBpKSkKCQl9KS5jYWxsKHQsIG4oMSkpCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCXZhciBpOwoJCShmdW5jdGlvbihhLCBvKSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJaSA9IGZ1bmN0aW9uKCkgewoJCQkJZnVuY3Rpb24gZSgpIHsKCQkJCQlmb3IgKHZhciBlID0gITEsIHQgPSBJLmxlbmd0aCAtIDE7IHQgPj0gMDsgdC0tKQoJCQkJCQlpZiAoZSA9IElbdF0udGVzdChsb2NhdGlvbi5ocmVmKSkgcmV0dXJuIGUKCQkJCX0KCgkJCQlmdW5jdGlvbiB0KGUpIHsKCQkJCQlCKCJib2R5Iikub24oIm1vdXNlb3ZlciIsICJpbWciLCBmdW5jdGlvbihlKSB7CgkJCQkJCXZhciB0ID0gZS50YXJnZXQ7CgkJCQkJCWlmICh0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCJkYXRhLXRpcCIpKSByZXR1cm4gITE7CgkJCQkJCWlmICh0LndpZHRoID4gNTAgJiYgdC5oZWlnaHQgPiA1MCkgewoJCQkJCQkJdmFyIG4gPSB0LnBhcmVudEVsZW1lbnQ7CgkJCQkJCQkiQSIgPT09IG4udGFnTmFtZSAmJiAvXmh0dHBzPzpcL1wvLy50ZXN0KG4uaHJlZikgJiYgQy5pc1Byb2R1Y3RQYWdlKG4uaHJlZikgPyAoZCh0KSwgeSA9IGkodCwgbi5ocmVmKSwgYyhuKSwgcihuKSkgOiAiQSIgPT09IG4ucGFyZW50RWxlbWVudC50YWdOYW1lICYmIC9eaHR0cHM/OlwvXC8vLnRlc3Qobi5wYXJlbnRFbGVtZW50LmhyZWYpICYmIEMuaXNQcm9kdWN0UGFnZShuLnBhcmVudEVsZW1lbnQuaHJlZikgJiYgKG4gPSBuLnBhcmVudEVsZW1lbnQsIGQodCksIHkgPSBpKHQsIG4uaHJlZiksIGMobiksIHIobikpCgkJCQkJCX0KCQkJCQl9KSwgeC5vbigibW91c2VlbnRlciIsIHMpLCB4Lm9uKCJtb3VzZWxlYXZlIiwgZnVuY3Rpb24oKSB7CgkJCQkJCXYgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCQkJdy5oaWRlKCksIGIgPSAhMSwgeC5oaWRlKCkKCQkJCQkJfSwgNjAwKQoJCQkJCX0pLCB3Lm9uKCJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7CgkJCQkJCWNsZWFyVGltZW91dCh2KSwgYiA9ICEwLCB3LnNob3coKQoJCQkJCX0pLCB3Lm9uKCJtb3VzZWxlYXZlIiwgZnVuY3Rpb24oKSB7CgkJCQkJCXYgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCQkJdy5oaWRlKCksIHguaGlkZSgpLCBiID0gITEKCQkJCQkJfSwgNjAwKQoJCQkJCX0pCgkJCQl9CgoJCQkJZnVuY3Rpb24gaShlLCB0KSB7CgkJCQkJaWYgKGEuY3JjNjQpIHJldHVybiB0OwoJCQkJCXN3aXRjaCAoVC5zaXRlTmFtZSkgewoJCQkJCQljYXNlICJzdW5pbmciOgoJCQkJCQkJdmFyIG4gPSBCKGUpLnBhcmVudHMoIi53cmFwIikuZmluZCgiaW5wdXQuaGlkZW5JbmZvIikuYXR0cigiZGF0YXBybyIpLnNwbGl0KCJ8fCIpWzBdOwoJCQkJCQkJdCA9ICJodHRwOi8vd3d3LnN1bmluZy5jb20vZW1hbGwvcHJkXzEwMDUyXzEwMDUxXy03XyIgKyBuICsgIl8uaHRtbCIKCQkJCQl9CgkJCQkJcmV0dXJuIHQKCQkJCX0KCgkJCQlmdW5jdGlvbiByKGUpIHsKCQkJCQl2YXIgdCA9IEIoZSk7CgkJCQkJdC5hdHRyKGEuZXh0QnJhbmQgKyAiX3RpcF9iaW5kIikgfHwgKHQub24oIm1vdXNlbGVhdmUiLCBsKSwgdC5hdHRyKGEuZXh0QnJhbmQgKyAiX3RpcF9iaW5kIiwgMSkpCgkJCQl9CgoJCQkJZnVuY3Rpb24gcygpIHsKCQkJCQljbGVhclRpbWVvdXQodiksIHguc2hvdygpLCBoKCkKCQkJCX0KCgkJCQlmdW5jdGlvbiBsKCkgewoJCQkJCWNsZWFyVGltZW91dCh2KSwgYiA/IHYgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCQl4LmhpZGUoKSwgdy5oaWRlKCksIGIgPSAhMQoJCQkJCX0sIDYwMCkgOiAoeC5oaWRlKCksIHcuaGlkZSgpKQoJCQkJfQoKCQkJCWZ1bmN0aW9uIGMoZSkgewoJCQkJCXguY3NzKCJsZWZ0IiwgRShlKSArIEIoZSkud2lkdGgoKSAvIDIgLSAzNSksIHguY3NzKCJ0b3AiLCBxKGUpKSwgeC5zaG93KCkuY3NzKCJkaXNwbGF5IiwgImlubGluZS1ibG9jayIpCgkJCQl9CgoJCQkJZnVuY3Rpb24gZChlKSB7CgkJCQkJdmFyIHQgPSAiIjsKCQkJCQlzd2l0Y2ggKGEuc2l0ZSkgewoJCQkJCQljYXNlICJ5aWhhb2RpYW4iOgoJCQkJCQkJdmFyIG4gPSBCKGUpLnBhcmVudCgpLmF0dHIoImlkIikuc3BsaXQoIl8iKTsKCQkJCQkJCW4gJiYgKG4gPSBuWzFdKSwgdCA9ICImaWQ9IiArIG4gKyAiLTMxIgoJCQkJCX0KCQkJCQlrID0gdAoJCQkJfQoKCQkJCWZ1bmN0aW9uIHAoZSkgewoJCQkJCWlmICghYS5jdXJyZW5jeSB8fCAhZSkgcmV0dXJuIGU7CgkJCQkJaWYgKGUuc3RvcmUgJiYgZS5zdG9yZS5sZW5ndGggPiAwKQoJCQkJCQlmb3IgKHZhciB0ID0gMDsgdCA8IGUuc3RvcmUubGVuZ3RoOyB0KyspIHsKCQkJCQkJCXZhciBuID0gZS5zdG9yZVt0XTsKCQkJCQkJCW4ucHJpY2UgJiYgbi5wcmljZS5tYXRjaCgvXGQrLykgJiYgKGUuc3RvcmVbdF0ucHJpY2UgPSAiwqUiICsgUyhuLnByaWNlKSkKCQkJCQkJfQoJCQkJCWlmIChlLnRyZW5kICYmIGUudHJlbmQuc3RvcmUubGVuZ3RoID4gMCkgewoJCQkJCQlmb3IgKHZhciBpID0gMDsgaSA8IGUudHJlbmQuc3RvcmVbMF0uZGF0YS5sZW5ndGg7IGkrKykgewoJCQkJCQkJdmFyIG8gPSBlLnRyZW5kLnN0b3JlWzBdLmRhdGFbaV07CgkJCQkJCQllLnRyZW5kLnN0b3JlWzBdLmRhdGFbaV1bMV0gPSBTKG9bMV0pCgkJCQkJCX0KCQkJCQkJZS50cmVuZC5zdG9yZVswXS5taW5fcHJpY2UgPSBTKGUudHJlbmQuc3RvcmVbMF0ubWluX3ByaWNlKSwgZS50cmVuZC5zdG9yZVswXS5tYXhfcHJpY2UgPSBTKGUudHJlbmQuc3RvcmVbMF0ubWF4X3ByaWNlKSwgZS50cmVuZC5zdG9yZVswXS5jdXJyZW50X3ByaWNlID0gUyhlLnRyZW5kLnN0b3JlWzBdLmN1cnJlbnRfcHJpY2UpCgkJCQkJfQoJCQkJCXJldHVybiBlCgkJCQl9CgoJCQkJZnVuY3Rpb24gaCgpIHsKCQkJCQl3Lmh0bWwoJzxpbWcgc3JjPSInICsgYS5zZXJ2ZXIgKyAnL3RlbXBsYXRlL2F1Zy9pbWFnZXMvMDM1LmdpZiIgc3R5bGU9Im1hcmdpbjogNXB4OyIgaWQ9IicgKyBhLmV4dEJyYW5kICsgJ19wcmljZV90aXBfbG9hZGluZyI+JyksIHcuY3NzKCJ3aWR0aCIsIDUwKSwgdy5jc3MoImxlZnQiLCBFKEIoeClbMF0pICsgQih4KS53aWR0aCgpKSwgdy5jc3MoInRvcCIsIHEoQih4KVswXSkpLCBiID0gITAsIHcuc2hvdygpLCBQW3ldID8gdShQW3ldKSA6IEEuZ2V0KGEuc2VydmVyICsgIi9icndleHQvdGlwP2RheXM9MTgwJnNpdGU9IiArIGEuc2l0ZSArICImdXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQoeSkgKyBrKS5kb25lKGZ1bmN0aW9uKGUpIHsKCQkJCQkJcmV0dXJuIGUgPSBwKGUpLCBlICYmIDAgIT09IGUudHJlbmQuc3RvcmUubGVuZ3RoID8gKFBbeV0gPSBlLCB2b2lkIHUoZSkpIDogZygpCgkJCQkJfSkuZmFpbChnKQoJCQkJfQoKCQkJCWZ1bmN0aW9uIHUoZSkgewoJCQkJCWYoZSk7CgkJCQkJdmFyIHQgPSAiIjsKCQkJCQkidG9wLmpkLmNvbSIgPT09IGxvY2F0aW9uLmhvc3QgJiYgKHQgPSAiamR0b3AiKSwgdy5odG1sKGouY29tcGlsZShOKSh7CgkJCQkJCWRhdGE6IGUsCgkJCQkJCW5ld19leHRlbnNpb246IGEubmV3X2V4dGVuc2lvbiwKCQkJCQkJZXh0TmFtZTogYS5leHROYW1lLAoJCQkJCQlleHRCcmFuZDogYS5leHRCcmFuZCwKCQkJCQkJamR0b3A6IHQKCQkJCQl9KSksIHcuY3NzKCJ3aWR0aCIsIDQ1MCksIEIod2luZG93KS53aWR0aCgpIC0gRSh3WzBdKSAtIEIoeCkud2lkdGgoKSA8IDQ1MCAmJiB3LmNzcygibGVmdCIsIEUod1swXSkgLSA0NTAgLSBCKHgpLndpZHRoKCkpLCBfKGUudHJlbmQpLCBtKGUpCgkJCQl9CgoJCQkJZnVuY3Rpb24gbShlKSB7CgkJCQkJQigiIyIgKyBhLmV4dEJyYW5kICsgIl9wcmljZV90aXBfbm90aWZ5X2J0biIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKHQpIHsKCQkJCQkJdC5wcmV2ZW50RGVmYXVsdCgpLCBCKCIjIiArIGEuZXh0QnJhbmQgKyAiX25vdGlmeV9lcnJvciIpLmhpZGUoKSwgQigiIyIgKyBhLmV4dEJyYW5kICsgIl9wcmljZV90aXBfbm90aWZ5X2J0biIpLnRleHQoIuato+WcqOa3u+WKoC4uLi4uLiIpLCBBLmdldChhLmNfc2VydmVyICsgIi9jb2xsZWN0L2FqX2FkZD9kcF9pZD0iICsgZS5kcF9pZCArICImZnJvbT10aXAiKS5kb25lKGZ1bmN0aW9uKGUpIHsKCQkJCQkJCTEwMCA9PSBlLmNvZGUgfHwgZS5jb2RlIDw9IDAgPyB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICJodHRwOi8vd3d3LiIgKyBhLmV4dE5hbWUgKyAiLmNvbS91c2VyL2xvZ2luP2Zyb21fdXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQod2luZG93LmxvY2F0aW9uLmhyZWYpIDogMSA9PSBlLmNvZGUgPyBCKCIjIiArIGEuZXh0QnJhbmQgKyAiX3ByaWNlX3RpcF9ub3RpZnlfYnRuIikudGV4dCgi5bey5re75Yqg5Yiw5pS26JeP5aS5IikuYXR0cigic3R5bGUiLCAiZmxvYXQ6cmlnaHQ7Y29sb3I6I2ZmZjtiYWNrZ3JvdW5kOiMxOEEwRjU7IikgOiAyID09IGUuY29kZSAmJiAi5q2j5Zyo5re75YqgLi4uLi4uIiA9PSBCKCIjIiArIGEuZXh0QnJhbmQgKyAiX3ByaWNlX3RpcF9ub3RpZnlfYnRuIikudGV4dCgpICYmIEIoIiMiICsgYS5leHRCcmFuZCArICJfcHJpY2VfdGlwX25vdGlmeV9idG4iKS50ZXh0KCLkvaDlt7Lnu4/mt7vliqDov4fllaYiKS5hdHRyKCJzdHlsZSIsICJmbG9hdDpyaWdodDtjb2xvcjojZmZmO2JhY2tncm91bmQ6IzE4QTBGNTsiKQoJCQkJCQl9KQoJCQkJCX0pCgkJCQl9CgoJCQkJZnVuY3Rpb24gZihlKSB7CgkJCQkJdmFyIHQgPSBbMSwgMTAzLCAxMDgsIDEyMywgMTI0LCAxMjYsIDEyOSwgMTM0LCAxMzYsIDE0LCAxNDEsIDE1LCAxNjcsIDE2OCwgMTksIDIsIDIxLCAyNSwgMjYsIDI4LCAzLCAzMSwgMzQsIDM1LCA0MSwgNiwgNjYsIDcsIDg2LCA5MywgOV0sCgkJCQkJCW4gPSBlLnN0b3JlOwoJCQkJCWlmIChuKQoJCQkJCQlmb3IgKHZhciBpID0gbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewoJCQkJCQkJbltpXS5pY29uX3VybCA9IG5baV0uaWNvbl91cmwucmVwbGFjZSgiYnJvd3NlciIsICJzMSIpOwoJCQkJCQkJdmFyIG8gPSAvXC8oXGQrKVwuaWNvLy5leGVjKG5baV0uaWNvbl91cmwpOwoJCQkJCQkJbyAmJiAobyA9IG9bMV0sICFhLklFNiAmJiB0LmluZGV4T2YoTnVtYmVyKG8pKSA+IC0xICYmIChuW2ldLmljb25fdXJsID0gbltpXS5pY29uX3VybC5yZXBsYWNlKC9cZCtcLmljby8sIG8gKyAiLnBuZyIpLnJlcGxhY2UoL2Jyb3dzZXJcLi8sICJzMS4iKSkpCgkJCQkJCX0KCQkJCX0KCgkJCQlmdW5jdGlvbiBnKCkgewoJCQkJCXcuaHRtbCgnPGRpdiBzdHlsZT0iY29sb3I6Izc3NyI+5b6I5oqx5q2JIDooIOaaguaXoOavlOS7t+WSjOS7t+agvOWOhuWPsuS/oeaBr+aIkeS7rOS8muWwveW/q+aUtuW9lTwvZGl2PicpLCB3LmNzcygid2lkdGgiLCAxMDApLCB3LnNob3coKQoJCQkJfQoKCQkJCWZ1bmN0aW9uIF8oZSkgewoJCQkJCWZvciAodmFyIHQgPSBCKCIjIiArIGEuZXh0QnJhbmQgKyAiX3ByaWNlX3RpcF90cmVuZCIpLCBuID0gewoJCQkJCQljaGFydDogewoJCQkJCQkJcmVuZGVyVG86IGEuZXh0QnJhbmQgKyAiX3ByaWNlX3RpcF90cmVuZCIsCgkJCQkJCQl0eXBlOiAibGluZSIsCgkJCQkJCQlzcGFjaW5nVG9wOiAwLAoJCQkJCQkJc3BhY2luZ0JvdHRvbTogMCwKCQkJCQkJCXNwYWNpbmdMZWZ0OiAwLAoJCQkJCQkJc3BhY2luZ1JpZ2h0OiAwCgkJCQkJCX0sCgkJCQkJCWNyZWRpdHM6IHsKCQkJCQkJCWVuYWJsZWQ6ICExCgkJCQkJCX0sCgkJCQkJCWNvbG9yczogWyIjMmY3ZWQ4Il0sCgkJCQkJCXRpdGxlOiB7CgkJCQkJCQl0ZXh0OiAi5pyA6L+RMTgw5aSp5Lu35qC85Y6G5Y+yIiwKCQkJCQkJCXN0eWxlOiB7CgkJCQkJCQkJY29sb3I6ICIjMmY3ZWQ4IgoJCQkJCQkJfQoJCQkJCQl9LAoJCQkJCQl4QXhpczogewoJCQkJCQkJdHlwZTogImRhdGV0aW1lIiwKCQkJCQkJCWRhdGVUaW1lTGFiZWxGb3JtYXRzOiB7CgkJCQkJCQkJZGF5OiAiJW0tJWQiLAoJCQkJCQkJCXdlZWs6ICIlbS0lZCIsCgkJCQkJCQkJbW9udGg6ICIlbS0lZCIKCQkJCQkJCX0sCgkJCQkJCQltaW5vckdyaWRMaW5lQ29sb3I6ICIjZGZkZmRmIiwKCQkJCQkJCWxhYmVsczogewoJCQkJCQkJCXg6IC0xMgoJCQkJCQkJfQoJCQkJCQl9LAoJCQkJCQl5QXhpczogewoJCQkJCQkJdGl0bGU6IG51bGwsCgkJCQkJCQlwbG90TGluZXM6IFt7CgkJCQkJCQkJdmFsdWU6IDAsCgkJCQkJCQkJd2lkdGg6IDEsCgkJCQkJCQkJY29sb3I6ICIjODA4MDgwIgoJCQkJCQkJfV0sCgkJCQkJCQlncmlkTGluZUNvbG9yOiAiI2MwZDBlMCIsCgkJCQkJCQltaW5vckdyaWRMaW5lQ29sb3I6ICIjZGZkZmRmIiwKCQkJCQkJCXRpY2tQaXhlbEludGVydmFsOiA1MAoJCQkJCQl9LAoJCQkJCQlwbG90T3B0aW9uczogewoJCQkJCQkJc2VyaWVzOiB7CgkJCQkJCQkJYW5pbWF0aW9uOiAhMSwKCQkJCQkJCQltYXJrZXI6IHsKCQkJCQkJCQkJcmFkaXVzOiAyCgkJCQkJCQkJfSwKCQkJCQkJCQlzZXJpZXM6IHsKCQkJCQkJCQkJZW5hYmxlTW91c2VUcmFja2luZzogITEKCQkJCQkJCQl9LAoJCQkJCQkJCXNoYWRvdzogITEKCQkJCQkJCX0KCQkJCQkJfSwKCQkJCQkJdG9vbHRpcDogewoJCQkJCQkJeERhdGVGb3JtYXQ6ICIlWS0lbS0lZCIKCQkJCQkJfSwKCQkJCQkJbGVnZW5kOiB7CgkJCQkJCQllbmFibGVkOiAhMQoJCQkJCQl9LAoJCQkJCQlzZXJpZXM6IFtdCgkJCQkJfSwgaSA9IGUuc3RvcmUubGVuZ3RoLCByID0gMDsgaSA+IHI7IHIrKykKCQkJCQkJaWYgKG4uc2VyaWVzW3JdID0gewoJCQkJCQkJdmlzaWJsZTogITAsCgkJCQkJCQluYW1lOiBlLnN0b3JlW3JdLm5hbWUsCgkJCQkJCQlwb2ludFN0YXJ0OiBlLnN0b3JlWzBdLmRhdGFbMF1bMF0sCgkJCQkJCQlwb2ludEludGVydmFsOiA4NjRlNSwKCQkJCQkJCWRhdGE6IFtdCgkJCQkJCX0sIGUuc3RvcmVbcl0uZGF0YS5sZW5ndGggPiAwKSB7CgkJCQkJCQl2YXIgcyA9IGUuc3RvcmVbcl0sCgkJCQkJCQkJbCA9IHMuZGF0YS5sZW5ndGgsCgkJCQkJCQkJYyA9IHMuZGF0YTsKCQkJCQkJCTFlMyAqIHMubWluX3N0YW1wID4gcGFyc2VJbnQoRGF0ZS5VVEMoZS5zdGFydFksIGUuc3RhcnRNLCBlLnN0YXJ0RCkpICYmIG4uc2VyaWVzW3JdLmRhdGEucHVzaChudWxsKTsKCQkJCQkJCWZvciAodmFyIGQgPSAwOyBsID4gZDsgZCsrKSB7CgkJCQkJCQkJdmFyIHAgPSBuZXcgQXJyYXkoMik7CgkJCQkJCQkJcFswXSA9IHBhcnNlSW50KGNbZF1bMF0pLCBwWzFdID0gcGFyc2VGbG9hdChjW2RdWzFdKSwgbi5zZXJpZXNbcl0uZGF0YS5wdXNoKHApCgkJCQkJCQl9CgkJCQkJCX0KCQkJCQlCKCIjIiArIG4uY2hhcnQucmVuZGVyVG8pLmxlbmd0aCAmJiBuZXcgby5DaGFydChuKSwgdC5zaG93KCkKCQkJCX0KCQkJCXZhciB4LCB3LCB2LCBiLCB5LCBrLCB6ID0ge30sCgkJCQkJQiA9IG4oNiksCgkJCQkJaiA9IG4oMTYpLAoJCQkJCUMgPSBuKDUpLAoJCQkJCVMgPSBuKDQwKSwKCQkJCQlOID0gbigxNjcpLAoJCQkJCVQgPSBhLnBhZ2VJbmZvLAoJCQkJCVAgPSB7fSwKCQkJCQlJID0gWy90YW9iYW9cLmNvbS8sIC9zaGFuZ3BpblwuY29tL10sCgkJCQkJQSA9IG4oOSksCgkJCQkJcSA9IGZ1bmN0aW9uIE8oZSkgewoJCQkJCQl2YXIgdCA9IGUub2Zmc2V0VG9wOwoJCQkJCQlyZXR1cm4gbnVsbCAhPSBlLm9mZnNldFBhcmVudCAmJiAodCArPSBPKGUub2Zmc2V0UGFyZW50KSksIHQKCQkJCQl9LAoJCQkJCUUgPSBmdW5jdGlvbiBMKGUpIHsKCQkJCQkJdmFyIHQgPSBlLm9mZnNldExlZnQ7CgkJCQkJCXJldHVybiBudWxsICE9IGUub2Zmc2V0UGFyZW50ICYmICh0ICs9IEwoZS5vZmZzZXRQYXJlbnQpKSwgdAoJCQkJCX07CgkJCQlyZXR1cm4gei5pbml0ID0gZnVuY3Rpb24oKSB7CgkJCQkJZSgpIHx8ICgxID09PSBULnR5cGUgJiYgKEIoImJvZHkiKS5hcHBlbmQoJzxhIGlkID0iJyArIGEuZXh0QnJhbmQgKyAnX3ByaWNlX3RpcCIgc3JjPSJqYXZhc2NyaXB0OnZvaWQoMCkiIHRhcmdldD0iX3NlbGYiID48L2E+PGRpdiBpZD0iJyArIGEuZXh0QnJhbmQgKyAnX3ByaWNlX3RpcF9kZXRhaWwiPjwvZGl2PicpLCB4ID0gQigiIyIgKyBhLmV4dEJyYW5kICsgIl9wcmljZV90aXAiKSwgdyA9IEIoIiMiICsgYS5leHRCcmFuZCArICJfcHJpY2VfdGlwX2RldGFpbCIpKSwgdCgpKQoJCQkJfSwgegoJCQl9LmNhbGwodCwgbiwgdCwgZSksICEodm9pZCAwICE9PSBpICYmIChlLmV4cG9ydHMgPSBpKSkKCQl9KS5jYWxsKHQsIG4oMSksIG4oOTQpKQoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQllLmV4cG9ydHMgPSAnPHVsIGlkPSJ7e2V4dEJyYW5kfX1fcHJpY2VfdGlwX3N0b3JlIiBzdHlsZT0iZGlzcGxheTogYmxvY2s7Ij5cbiAgPGxpPjxhIHt7aWYgIW5ld19leHRlbnNpb259fSBocmVmPSJ7e2RhdGEubW9yZV9saW5rfX0iIHRhcmdldD0iX2JsYW5rIiB7ey9pZn19PjxzcGFuIGNsYXNzPSJ0bGViIj7llYblrrbmr5Tku7fvvJo8L3NwYW4+PC9hPjwvbGk+XG4gIHt7ZWFjaCBkYXRhLnN0b3JlfX1cbiAgPGxpPlxuICAgIDxpbWcgc3JjPSJ7eyR2YWx1ZS5pY29uX3VybH19IiBhbHQ9Int7JHZhbHVlLnNpdGVfbmFtZX19IiB0aXRsZT0ie3skdmFsdWUuc2l0ZV9uYW1lfX0iPlxuICAgIDxhIGhyZWY9Int7JHZhbHVlLnVybH19IiB0YXJnZXQ9Il9ibGFuayI+XG4gICAgICA8c3BhbiBhbHQ9Int7JHZhbHVlLnNpdGVfbmFtZX19IiB0aXRsZT0ie3skdmFsdWUuc2l0ZV9uYW1lfX0iIHt7aWYgJGluZGV4ID09IDB9fXN0eWxlPSJjb2xvcjojZDgwMDAxInt7L2lmfX0+e3skdmFsdWUucHJpY2V9fTwvc3Bhbj5cbiAgICA8L2E+XG4gIDwvbGk+XG4gIHt7L2VhY2h9fVxuICB7e2lmICFuZXdfZXh0ZW5zaW9ufX1cbiAgICA8bGk+PGEgaHJlZj0ie3tkYXRhLm1vcmVfbGlua319IiB0YXJnZXQ9Il9ibGFuayI+PHNwYW4gY2xhc3M9InRsZSI+e3tkYXRhLm1vcmVfdGxlfX08L3NwYW4+PC9hPjwvbGk+XG4gIHt7L2lmfX1cbjwvdWw+XG48ZGl2IGlkPSJ7e2V4dEJyYW5kfX1fcHJpY2VfdGlwX3RyZW5kIiBzdHlsZT0id2lkdGg6IDMwMHB4OyBoZWlnaHQ6IDE1MHB4OyI+PC9kaXY+XG48ZGl2IGlkPSJ7e2V4dEJyYW5kfX1fcHJpY2VfdGlwX290aGVyIiBzdHlsZT0iZGlzcGxheTogYmxvY2s7Ij5cbiAgPGRpdiBpZD0ie3tleHRCcmFuZH19X3RpcF9sZWZ0X2luZm8iIHN0eWxlPSJmbG9hdDogbGVmdDsgaGVpZ2h0OiA1MHB4OyB3aWR0aDogOThweDsgbWFyZ2luOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPlxuICAgIDxhIGlkPSJ7e2V4dEJyYW5kfX1fcHJpY2VfdGlwX2xvZ28iIHt7aWYgIW5ld19leHRlbnNpb259fWhyZWY9Imh0dHA6Ly93d3cue3tleHROYW1lfX0uY29tIiB0YXJnZXQ9Il9ibGFuayIge3svaWZ9fSBzdHlsZT0iZGlzcGxheTppbmxpbmU7bWFyZ2luLXRvcDowcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMjM3cHggOHB4OyI+PC9hPlxuICA8L2Rpdj5cbiAgPGRpdiBpZD0ie3tleHRCcmFuZH19X3ByaWNlX3RpcF9ub3RpZnkiIHN0eWxlPSJkaXNwbGF5OiBibG9jazsiPlxuICAgIDxkaXYgaWQ9Int7ZXh0QnJhbmR9fV9wcmljZV90aXBfcmVjb3JkIj4gXG4gICAgICA8c3BhbiBpZD0ie3tleHRCcmFuZH19X21pbiIgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQiPuacgOS9jjoge3tkYXRhLnRyZW5kLnN0b3JlWzBdLm1pbl9wcmljZX195YWDPC9zcGFuPlxuICAgICAgPHNwYW4gaWQ9Int7ZXh0QnJhbmR9fV9tYXgiPuacgOmrmDoge3tkYXRhLnRyZW5kLnN0b3JlWzBdLm1heF9wcmljZX195YWDPC9zcGFuPlxuICAgIDwvZGl2PlxuICAgIHt7aWYgIW5ld19leHRlbnNpb259fVxuICAgICAgPGEgaWQ9Int7ZXh0QnJhbmR9fV9wcmljZV90aXBfbm90aWZ5X2J0biIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIiBzdHlsZT0iZmxvYXQ6cmlnaHQ7IiB0YXJnZXQ9Il9zZWxmIj7mlLbol4/lubbpmY3ku7fmj5DphpI8L2E+XG4gICAgICA8ZGl2IHN0eWxlPSJjbGVhcjpib3RoOyIgaWQ9Int7ZXh0QnJhbmR9fV9tb3JlX2xpbmsiPlxuICAgICAgICB7e2RhdGEuc2l0ZV9uYW1lfX1cbiAgICAgICAge3tlYWNoIGRhdGEubW9yZX19XG4gICAgICAgIDxhIGhyZWY9Int7JHZhbHVlLnVybH19IiB0YXJnZXQ9Il9ibGFuayI+e3skdmFsdWUudGl0bGV9fTwvYT5cbiAgICAgICAge3tpZiAkaW5kZXggKyAxICE9IGRhdGEubW9yZS5sZW5ndGh9feOAgXt7L2lmfX1cbiAgICAgICAge3svZWFjaH19XG4gICAgICA8L2Rpdj5cbiAgICB7ey9pZn19XG4gICAgPGRpdiBzdHlsZT0iY2xlYXI6Ym90aDsiPjwvZGl2PlxuICA8L2Rpdj5cbiAgPGRpdiBzdHlsZT0iY2xlYXI6Ym90aDsiPjwvZGl2PlxuICB7e2lmIGpkdG9wID09PSBcJ2pkdG9wXCd9fVxuICA8c3R5bGUgdHlwZT0idGV4dC9jc3MiPlxuICAgIC5nd2RfMzYwYnV5IHN2ZyBwYXRoIHtcbiAgICAgIGZpbGw6IG5vbmU7XG4gICAgfVxuICA8L3N0eWxlPlxuICB7ey9pZn19XG48L2Rpdj4nOwoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQl2YXIgaTsKCQkoZnVuY3Rpb24oYSkgewoJCQkidXNlIHN0cmljdCI7CgkJCWkgPSBmdW5jdGlvbigpIHsKCQkJCXZhciBlID0gbig2KSwKCQkJCQl0ID0gbig5KTsKCQkJCXJldHVybiB7CgkJCQkJbW9kTmFtZTogYS5leHRCcmFuZCArICJfcHJvZHVjdE1vbml0b3IiLAoJCQkJCXVybDogIiIsCgkJCQkJaW5pdDogZnVuY3Rpb24oKSB7CgkJCQkJCXRoaXMudXJsID0gZG9jdW1lbnQubG9jYXRpb24uaHJlZjsKCQkJCQkJdmFyIGUgPSBhLnRqX3NlcnZlcjsKCQkJCQkJaWYgKGEubmV3X2V4dGVuc2lvbiAmJiAoZSA9IGEuc2VydmVyKSwgdGhpcy5pc01vbml0b3JTaXRlKCkgJiYgdGhpcy51cmwuc2VhcmNoKCJzZWFyY2giKSA+IC0xKSB7CgkJCQkJCQl0aGlzLmJpbmRFdmVudCgpOwoJCQkJCQkJdmFyIG4gPSB0aGlzLmdldGtleXdvcmRzKCk7CgkJCQkJCQlpZiAoIiIgPT0gbi5rZXl3b3JkKSByZXR1cm47CgkJCQkJCQl0LmdldChlICsgIi9rZXl3b3Jkc19sb2c/a2V5d29yZD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KG4ua2V5d29yZCkgKyAiJnNpdGU9IiArIGEuc2l0ZSArICImY2hhcnNldD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KG4uY2hhcnNldHMpKQoJCQkJCQl9CgkJCQkJfSwKCQkJCQlpc01vbml0b3JTaXRlOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSBhLnNpdGU7CgkJCQkJCWZvciAodmFyIHQgaW4gdGhpcy5rZXl3b3Jkc1BhdHRlcm5zKQoJCQkJCQkJaWYgKGUgPT0gdCkgcmV0dXJuICEwOwoJCQkJCQlyZXR1cm4gITEKCQkJCQl9LAoJCQkJCWdldGtleXdvcmRzOiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIHQgPSBhLnNpdGUsCgkJCQkJCQluID0gdGhpcy5rZXl3b3Jkc1BhdHRlcm5zW3RdLAoJCQkJCQkJaSA9ICIiLAoJCQkJCQkJbyA9IHsKCQkJCQkJCQlrZXl3b3JkOiAiIiwKCQkJCQkJCQljaGFyc2V0czogIiIKCQkJCQkJCX0sCgkJCQkJCQlyID0gIiIsCgkJCQkJCQlzID0gIiI7CgkJCQkJCXRyeSB7CgkJCQkJCQlpID0gbmV3IFJlZ0V4cCgiIiArIG4gKyAiKFteJi9dKykiKSwgcyA9IHRoaXMudXJsLm1hdGNoKGkpWzFdCgkJCQkJCX0gY2F0Y2ggKGwpIHsKCQkJCQkJCWlmIChhLmRlYnVnKSB0aHJvdyBsCgkJCQkJCX0KCQkJCQkJaWYgKCIiID09IHMpIHRyeSB7CgkJCQkJCQlpID0gbmV3IFJlZ0V4cCgiIiArIG4gKyAiKFteKC98PyldKykiKSwgcyA9IHRoaXMudXJsLm1hdGNoKGkpWzFdCgkJCQkJCX0gY2F0Y2ggKGwpIHsKCQkJCQkJCWlmIChhLmRlYnVnKSB0aHJvdyBsCgkJCQkJCX0KCQkJCQkJdHJ5IHsKCQkJCQkJCXIgPSBlKCJbaHR0cC1lcXVpdj0nQ29udGVudC1UeXBlJ10iKS5hdHRyKCJjb250ZW50IikubWF0Y2goL2NoYXJzZXQ9KFswLTlhLXpBLVotXSspLylbMV0KCQkJCQkJfSBjYXRjaCAobCkgewoJCQkJCQkJaWYgKGEuZGVidWcpIHRocm93IGwKCQkJCQkJfQoJCQkJCQlpZiAoIXIpIHRyeSB7CgkJCQkJCQlyID0gZSgibWV0YVtjaGFyc2V0XSIpLmF0dHIoImNoYXJzZXQiKQoJCQkJCQl9IGNhdGNoIChsKSB7CgkJCQkJCQlpZiAoYS5kZWJ1ZykgdGhyb3cgbAoJCQkJCQl9CgkJCQkJCXJldHVybiBvLmtleXdvcmQgPSBzLCBvLmNoYXJzZXRzID0gciwgbwoJCQkJCX0sCgkJCQkJYmluZEV2ZW50OiBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIG4gPSB0aGlzLmdldGtleXdvcmRzKCksCgkJCQkJCQlpID0gbi5rZXl3b3JkLAoJCQkJCQkJbyA9IG4uY2hhcnNldHM7CgkJCQkJCWUoImJvZHkiKS5kZWxlZ2F0ZSgiaW1nLCBhcmVhIiwgImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCQl2YXIgbiA9IGUodGhpcykucGFyZW50KCkuYXR0cigiaHJlZiIpOwoJCQkJCQkJdC5nZXQoYS50al9zZXJ2ZXIgKyAiL2xvZz9wZXJtYW5lbnRfaWQ9IiArIGVuY29kZVVSSUNvbXBvbmVudChhLnBfaWQpICsgIiZ1cmw9IiArIGVuY29kZVVSSUNvbXBvbmVudChuKSArICIma2V5d29yZD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGkpICsgIiZjaGFyc2V0PSIgKyBvKQoJCQkJCQl9KQoJCQkJCX0sCgkJCQkJa2V5d29yZHNQYXR0ZXJuczogewoJCQkJCQkiMzYwYnV5IjogImtleXdvcmQ9IiwKCQkJCQkJdGFvYmFvOiAiWz8mXXE9IiwKCQkJCQkJdG1hbGw6ICJbPyZdcT0iLAoJCQkJCQlkYW5nZGFuZzogImtleT0iLAoJCQkJCQlqdW1laTogInNlYXJjaD0iLAoJCQkJCQlnb21lOiAicXVlc3Rpb249IiwKCQkJCQkJeWloYW9kaWFuOiAiL2MuKy9rIiwKCQkJCQkJc3VuaW5nOiAiY29tLyIKCQkJCQl9CgkJCQl9CgkJCX0uY2FsbCh0LCBuLCB0LCBlKSwgISh2b2lkIDAgIT09IGkgJiYgKGUuZXhwb3J0cyA9IGkpKQoJCX0pLmNhbGwodCwgbigxKSkKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJZS5leHBvcnRzID0gIiIKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJKGZ1bmN0aW9uKHQsIGkpIHsKCQkJInVzZSBzdHJpY3QiOwoJCQl2YXIgYSA9IG4oMTYpLAoJCQkJbyA9IG4oOSksCgkJCQlyID0gZnVuY3Rpb24oKSB7CgkJCQkJdCgiI3RvcGZhdm9yX2RldGFpbCIpLm9uKCJjbGljayIsICIuaXRlbV9jbG9zZV9idG4iLCBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGUgPSB0KHRoaXMpLmF0dHIoImRhdGEtaWQiKTsKCQkJCQkJcyhlKQoJCQkJCX0pCgkJCQl9LAoJCQkJcyA9IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgbiA9IGkuY19zZXJ2ZXIgKyAiL2NvbGxlY3QvYWpfZGVsP2RwX2lkPSIgKyBlOwoJCQkJCW8uZ2V0KG4pLmRvbmUoZnVuY3Rpb24obikgewoJCQkJCQkxID09IG4uY29kZSAmJiAoZSA9PSBpLm5vd19kcF9pZCAmJiB0KCIjdG9wZmF2b3JfZGV0YWlsIC50b3BmLWhlYWQgLnNwLWNvbCIpLnRleHQoIuaUtuiXj+WVhuWTgSIpLnJlbW92ZUNsYXNzKCJjb2xsZWN0ZWQiKSwgdCgiI3RvcGZhdm9yX2RldGFpbCAuc3AtZGVsIikuc2hvdygpLmZhZGVPdXQoM2UzKSwgZChjKSkKCQkJCQl9KQoJCQkJfSwKCQkJCWwgPSBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IGkuY29sbGVjdEluZm8sCgkJCQkJCW4gPSBpLmRwOwoJCQkJCWUucHJpY2UgPSBuLm9sZFByaWNlLCBlLnRpdGxlID0gbi5uYW1lIHx8IHQoInRpdGxlIikuaHRtbCgpLCBlLnVybCA9IGUudXJsIHx8IGxvY2F0aW9uLmhyZWYsIGUuaW1nID0gZS5pbWcgfHwgbi5pbWc7CgkJCQkJdmFyIGEgPSBpLmNfc2VydmVyICsgIi9jb2xsZWN0L2FqX2FkZD9kcF9pZD0iICsgZS5kcF9pZCArICImdXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQoZS51cmwpICsgIiZpbWc9IiArIGVuY29kZVVSSUNvbXBvbmVudChlLmltZykgKyAiJnRpdGxlPSIgKyBlbmNvZGVVUklDb21wb25lbnQoZS50aXRsZSkgKyAiJnByaWNlPSIgKyBlLnByaWNlICsgIiZzaXRlX2lkPSIgKyBlLnNpdGVfaWQgKyAiJmNhdF9pZD0iICsgbi5jYXRfaWQ7CgkJCQkJby5nZXQoYSkuZG9uZShmdW5jdGlvbihlKSB7CgkJCQkJCSIxIiA9PT0gZS5jb2RlID8gKGQoYyksIHQoIiN0b3BmYXZvcl9kZXRhaWwgLnRvcGYtaGVhZCAuc3AtY29sIikudGV4dCgi5pS26JeP5oiQ5YqfIikuYWRkQ2xhc3MoImNvbGxlY3RlZCIpKSA6ICIyIiA9PT0gZS5jb2RlICYmIHQoIiN0b3BmYXZvcl9kZXRhaWwgLnRvcGYtaGVhZCAuc3AtY29sIikudGV4dCgi5pS26JeP6L+H5LqGIikuYWRkQ2xhc3MoImNvbGxlY3RlZCIpCgkJCQkJfSkKCQkJCX0sCgkJCQljID0gZnVuY3Rpb24oZSkgewoJCQkJCWZvciAodmFyIG8gPSAwOyBvIDwgZS5wcm9kdWN0cy5sZW5ndGg7IG8rKykgewoJCQkJCQl2YXIgcyA9IGUucHJvZHVjdHNbb10uZHBfaWQuc3BsaXQoIi0iKVsxXTsKCQkJCQkJZS5wcm9kdWN0c1tvXS5zaXRlX2lkID0gcwoJCQkJCX0KCQkJCQl2YXIgbCA9IG4oMTcxKTsKCQkJCQl0KCIjdG9wZmF2b3JfZGV0YWlsIC5mYXZvci1saXN0IikuZW1wdHkoKS5hcHBlbmQoYS5jb21waWxlKGwpKHsKCQkJCQkJZGF0YTogZS5wcm9kdWN0cywKCQkJCQkJc19zZXJ2ZXI6IGkuc19zZXJ2ZXIKCQkJCQl9KSksIHQoIi5zZWUtYWxsLWZhdm9yIGVtIikudGV4dChlLnRvdGFsX2NudCksIHQoIi5zZWUtYWxsLWZhdm9yIikuYXR0cigiaHJlZiIsICIiICsgaS5jX3NlcnZlciArIGUuanVtcF91cmwpLCByKCksIHQoIiN0b3BmYXZvcl9kZXRhaWwiKS5oYXNDbGFzcygiaXNsb2dpbiIpIHx8IHQoIiN0b3BmYXZvcl9kZXRhaWwiKS5hZGRDbGFzcygiaXNsb2dpbiIpCgkJCQl9LAoJCQkJZCA9IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgdCA9IGkuY19zZXJ2ZXIgKyAiL2FwcC9jb2xsZWN0aW9uIjsKCQkJCQlvLmdldCh0KS5kb25lKGZ1bmN0aW9uKHQpIHsKCQkJCQkJZSh0KQoJCQkJCX0pCgkJCQl9LAoJCQkJcCA9IGZ1bmN0aW9uKGUsIG4sIGEpIHsKCQkJCQl0LmFqYXgoewoJCQkJCQl0eXBlOiAicG9zdCIsCgkJCQkJCXVybDogImh0dHBzOi8vd3d3LiIgKyBpLmV4dE5hbWUgKyAiLmNvbS91c2VyL2FqX2xvZ2luIiwKCQkJCQkJeGhyRmllbGRzOiB7CgkJCQkJCQl3aXRoQ3JlZGVudGlhbHM6ICEwCgkJCQkJCX0sCgkJCQkJCWNyb3NzRG9tYWluOiAhMCwKCQkJCQkJZGF0YTogewoJCQkJCQkJZW1haWw6IGUsCgkJCQkJCQlwYXNzd29yZDogbiwKCQkJCQkJCXQ6ICJjaGVjayIsCgkJCQkJCQlob3N0OiBsb2NhdGlvbi5wcm90b2NvbCArICIvLyIgKyBsb2NhdGlvbi5ob3N0CgkJCQkJCX0sCgkJCQkJCXN1Y2Nlc3M6IGZ1bmN0aW9uKGUpIHsKCQkJCQkJCWEoZSkKCQkJCQkJfQoJCQkJCX0pCgkJCQl9LAoJCQkJaCA9IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gdm9pZCAwOwoJCQkJCXQoIiN0b3BmYXZvcl9kZXRhaWwgLnRvcGYtaGVhZCBzcGFuIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCWwoKQoJCQkJCX0pLCB0KCIjdG9wZmF2b3JfZGV0YWlsIC5sb2dpbl9jbGljayIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgZSA9IHQoIiN0b3BmYXZvcl9kZXRhaWwgI3VzZXJuYW1lIikudmFsKCksCgkJCQkJCQluID0gdCgiI3RvcGZhdm9yX2RldGFpbCAjcGFzc3dvcmQiKS52YWwoKTsKCQkJCQkJcmV0dXJuIGUgJiYgbiA/IHZvaWQgcChlLCBuLCBmdW5jdGlvbihuKSB7CgkJCQkJCQkiMSIgPT09IG4gPyAoaS5lbWFpbCA9IGUsIGQoYykpIDogdCgiI3RvcGZhdm9yX2RldGFpbCAubG9naW5fcmVtaW5kIikuc2hvdygpLmZhZGVPdXQoNWUzKQoJCQkJCQl9KSA6IHZvaWQgdCgiI3RvcGZhdm9yX2RldGFpbCAubG9naW5fcmVtaW5kIikuc2hvdygpLmZhZGVPdXQoNWUzKQoJCQkJCX0pLCB0KCIjZ3dkYW5nLWZhdm9yIikub24oIm1vdXNlZW50ZXIiLCBmdW5jdGlvbigpIHsKCQkJCQkJdCgiI3RvcGZhdm9yX2RldGFpbCIpLnNob3coKSwgdCh0aGlzKS5hZGRDbGFzcygibXNIb3ZlciIpCgkJCQkJfSksIHQoIiNnd2RhbmctZmF2b3IiKS5vbigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgbiA9IHRoaXM7CgkJCQkJCWUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCQkJdCgiI3RvcGZhdm9yX2RldGFpbCIpLmhpZGUoKSwgdChuKS5yZW1vdmVDbGFzcygibXNIb3ZlciIpCgkJCQkJCX0sIDEwMCkKCQkJCQl9KSwgdCgiI3RvcGZhdm9yX2RldGFpbCIpLm9uKCJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7CgkJCQkJCWNsZWFyVGltZW91dChlKQoJCQkJCX0pLCB0KCIjdG9wZmF2b3JfZGV0YWlsIikub24oIm1vdXNlbGVhdmUiLCBmdW5jdGlvbigpIHsKCQkJCQkJdCgiI3RvcGZhdm9yX2RldGFpbCIpLmhpZGUoKSwgdCgiI2d3ZGFuZy1mYXZvciIpLnJlbW92ZUNsYXNzKCJtc0hvdmVyIikKCQkJCQl9KQoJCQkJfSwKCQkJCXUgPSBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IHZvaWQgMCwKCQkJCQkJbyA9ICIjZ3dkYW5nLW1haW4iLAoJCQkJCQlyID0gInRvcDozN3B4OyI7CgkJCQkJImJvdHRvbSIgPT09IGkuc3R5bGUgJiYgKG8gPSAiI2JqZF9ib3R0b21fZGV0YWlsIiwgciA9ICJib3R0b206IDYwcHg7Ym94LXNoYWRvdzogMCAwcHggNXB4IDAgcmdiYSgwLDAsMCwwLjMwKTtyaWdodDogNDBweDsiKSwgKCFpLm5vd19kcF9pZCB8fCBpLm5vd19kcF9pZC5tYXRjaCgvXjAtXGQrJC8pKSAmJiAoZSA9ICEwKTsKCQkJCQl2YXIgcyA9IG4oMTcyKTsKCQkJCQl0KG8pLmFwcGVuZChhLmNvbXBpbGUocykoewoJCQkJCQllbWFpbDogaS5lbWFpbCwKCQkJCQkJaGlkZWJ0bjogZSwKCQkJCQkJcGFnZXVybDogZW5jb2RlVVJJQ29tcG9uZW50KGxvY2F0aW9uLmhyZWYpLAoJCQkJCQlzdHlsZTogcgoJCQkJCX0pKSwgaCgpCgkJCQl9OwoJCQllLmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkgewoJCQkJdSgpLCBpLmVtYWlsICYmIGQoYykKCQkJfQoJCX0pLmNhbGwodCwgbig2KSwgbigxKSkKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJZS5leHBvcnRzID0gJ3t7ZWFjaCBkYXRhfX1cbiAgPGxpID5cbiAgICA8YSBjbGFzcz0iaXRlbV9pbWciIGhyZWY9Int7JHZhbHVlLnVybH19IiB0YXJnZXQ9Il9ibGFuayIgdGl0bGU9Int7JHZhbHVlLnRpdGxlfX0iPjxpbWcgaWQ9ImRwX3t7JHZhbHVlLmRwX2lkfX0iICBzcmM9Int7JHZhbHVlLnBpY191cmx9fSI+PC9hPlxuICAgIDxkaXYgY2xhc3M9Iml0ZW1fZGVzYyI+XG4gICAgICA8YSBjbGFzcz0iaXRlbV90aXRsZSIgaHJlZj0ie3skdmFsdWUudXJsfX0iIHRhcmdldD0iX2JsYW5rIiB0aXRsZT0ie3skdmFsdWUudGl0bGV9fSI+e3skdmFsdWUudGl0bGV9fTwvYT5cbiAgICAgIDxhIGNsYXNzPSJvdGhlcl9kZXNjIj5cbiAgICAgICAgPHNwYW4gY2xhc3M9InNpdGVfaWNvbiIgPjxpbWcgc3JjPSJ7e3Nfc2VydmVyfX0vaW1hZ2VzL2Zhdmljb24ve3skdmFsdWUuc2l0ZV9pZH19LmljbyI+PC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz0iaXRlbV9wcmljZSI+wqV7eyR2YWx1ZS5ub3dfcHJpY2V9fTwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9Iml0ZW1fY2xvc2VfYnRuIiBkYXRhLWlkPSJ7eyR2YWx1ZS5kcF9pZH19Ij7liKDpmaQ8L3NwYW4+XG4gICAgICA8L2E+XG4gICAgPC9kaXY+XG4gIDwvbGk+XG57ey9lYWNofX0nCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICc8ZGl2IGlkPSJ0b3BmYXZvcl9kZXRhaWwiIGNsYXNzPSJ7e2lmIGVtYWlsfX1pc2xvZ2lue3svaWZ9fSIgc3R5bGU9Int7c3R5bGV9fSI+IFxuICAgIDxkaXYgY2xhc3M9InRvcGYtaGVhZCI+XG4gICAgICA8ZGl2PuaUtuiXj+W5tumZjeS7t+aPkOmGkjwvZGl2PlxuICAgICAgPHNwYW4gY2xhc3M9InNwLWRlbCI+5Yig6Zmk5oiQ5YqfPC9zcGFuPlxuICAgICAge3tpZiAhaGlkZWJ0bn19XG4gICAgICA8c3BhbiBjbGFzcz0ic3AtY29sIj7mlLbol4/llYblk4E8L3NwYW4+XG4gICAgICB7ey9pZn19XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz0idG9wZi1ib2R5Ij5cbiAgICAgIDxkaXYgY2xhc3M9ImxvZ2luX2RldGFpbCI+XG4gICAgICAgIDxwIGNsYXNzPSJsb2dpbi1yZW1pbmQiPuivt+WFiCDnmbvlvZUg6LSt54mp5YWa77yM5oiW5L2/55So56ys5LiJ5pa56LSm5Y+355m75b2VPC9wPlxuICAgICAgICA8ZGl2IGNsYXNzPSJsb2dpbmluZm8iPlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiICBpZD0idXNlcm5hbWUiIHBsYWNlaG9sZGVyPSLotKblj7ciIGF1dG9jb21wbGV0ZT0ib2ZmIj5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJwYXNzd29yZCIgaWQ9InBhc3N3b3JkIiBwbGFjZWhvbGRlcj0i5a+G56CBIj4gXG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8YSBocmVmPSJodHRwOi8vd3d3Lmd3ZGFuZy5jb20vdXNlci9mb3Jnb3RfcHdkLyIgdGFyZ2V0PSJfYmxhbmsiIGNsYXNzPSJmb3JnZXRfcGFzcyI+5b+Y6K6w5a+G56CBPC9hPlxuICAgICAgICA8c3BhbiBjbGFzcz0ibG9naW5fY2xpY2siPueZu+W9lTwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9ImxvZ2luX3JlbWluZCI+55So5oi35ZCN5oiW5a+G56CB6ZSZ6K+vPC9zcGFuPlxuICAgICAgICA8YSBocmVmPSJodHRwOi8vd3d3Lmd3ZGFuZy5jb20vdXNlci9yZWdpc3RlciIgdGFyZ2V0PSJfYmxhbmsiIGNsYXNzPSJyZWdpc3RlciI+5b+r6YCf5rOo5YaMPC9hPlxuICAgICAgICA8ZGl2IGNsYXNzPSJzbGljZV9kaXYiPiA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz0ib3RoZXJfbG9naW4iPlxuICAgICAgICAgIDxhIGhyZWY9Imh0dHA6Ly93d3cuZ3dkYW5nLmNvbS91c2VyL29hdXRoLz9wbD03Jm9wPWxvZ2luJmZyb21fdXJsPXt7cGFnZXVybH19IiBjbGFzcz0icXFsb2dpbiIgdGFyZ2V0PSJfYmxhbmsiPjwvYT5cbiAgICAgICAgICA8YSBocmVmPSJodHRwOi8vd3d3Lmd3ZGFuZy5jb20vdXNlci9vYXV0aGgvP3BsPTImb3A9bG9naW4mZnJvbV91cmw9e3twYWdldXJsfX0iIGNsYXNzPSJzaW5hbG9naW4iIHRhcmdldD0iX2JsYW5rIj48L2E+XG4gICAgICAgICAgPGEgaHJlZj0iaHR0cHM6Ly9vcGVuLndlaXhpbi5xcS5jb20vY29ubmVjdC9xcmNvbm5lY3Q/YXBwaWQ9d3gzNDAwNmMxNDFmOWRhYTNhJnJlc3BvbnNlX3R5cGU9Y29kZSZzY29wZT1zbnNhcGlfbG9naW4mc3RhdGU9MmNlZDk3MGQ1Yjk3NjgwZTk1NjcwYTQ4ZDExMDI2MTEmcmVkaXJlY3RfdXJpPWh0dHAlM0ElMkYlMkZ3d3cuZ3dkYW5nLmNvbSUyRnVzZXIlMkZ3ZWNoYXRfb2F1dGglMkYlM0ZwbCUzRDklMjZvcCUzRGxvZ2luJTI2ZnJvbV91cmwlM0R7e3BhZ2V1cmx9fSIgY2xhc3M9IndlaXhpbmxvZ2luIiB0YXJnZXQ9Il9ibGFuayI+PC9hPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz0iZmF2b3ItZHAtZGV0YWlsIj5cbiAgICAgICAgPHVsIGNsYXNzPSJmYXZvci1saXN0Ij5cbiAgICAgICAgICBcbiAgICAgICAgPC91bD5cbiAgICAgICAgPGEgY2xhc3M9InNlZS1hbGwtZmF2b3IiIHRhcmdldD0iX2JsYW5rIiBocmVmPSIiPuafpeeci+WFqOmDqCg8ZW0+PC9lbT4pPC9hPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG5cbiAgICA8c3R5bGUgdHlwZT0idGV4dC9jc3MiPlxuICAgICAgI3RvcGZhdm9yX2RldGFpbCB7XG4gICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgcmlnaHQ6IDBweDtcbiAgICAgICAgd2lkdGg6IDI4MHB4O1xuICAgICAgICBoZWlnaHQ6IDM3NnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiAjRkZGRkZGO1xuICAgICAgICBib3gtc2hhZG93OiAwIDJweCA0cHggMCByZ2JhKDAsMCwwLDAuMzApO1xuICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgfVxuICAgICAgI3RvcGZhdm9yX2RldGFpbCAudG9wZi1oZWFkIHtcbiAgICAgICAgaGVpZ2h0OiA0MHB4O1xuICAgICAgICBmbG9hdDogbGVmdDtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICB9XG4gICAgICAjdG9wZmF2b3JfZGV0YWlsIC50b3BmLWJvZHkge1xuICAgICAgICBmbG9hdDogbGVmdDtcbiAgICAgIH1cbiAgICAgIC50b3BmLWhlYWQgKiB7XG4gICAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgfVxuICAgICAgI3RvcGZhdm9yX2RldGFpbCAudG9wZi1oZWFkIGRpdiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDE0cHg7XG4gICAgICAgIG1hcmdpbi10b3A6IDE0cHg7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiAxNHB4O1xuICAgICAgICBjb2xvcjogIzMzMztcbiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICB9XG4gICAgICAjdG9wZmF2b3JfZGV0YWlsIC50b3BmLWhlYWQgc3Bhbi5zcC1jb2wge1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjRjA3ODYwO1xuICAgICAgICBjb2xvcjogI0YwNzg2MDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMjBweDtcbiAgICAgICAgaGVpZ2h0OiAyNHB4O1xuICAgICAgICB3aWR0aDogNjhweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDI0cHg7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB0b3A6IDExcHg7XG4gICAgICAgIHJpZ2h0OiAxNHB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICB9XG4gICAgICAjdG9wZmF2b3JfZGV0YWlsIC50b3BmLWhlYWQgLnNwLWRlbCB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgY29sb3I6ICNGMDc4NjA7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgdG9wOiAxMnB4O1xuICAgICAgICBsZWZ0OiAxMzBweDtcbiAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgIH0gXG4gICAgICAjdG9wZmF2b3JfZGV0YWlsIC50b3BmLWhlYWQgLnNwLWNvbC5jb2xsZWN0ZWQge1xuICAgICAgICBjb2xvcjogI2ZmZjtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI0YwNzg2MDtcbiAgICAgIH1cbiAgICAgICN0b3BmYXZvcl9kZXRhaWwuaXNsb2dpbiAudG9wZi1oZWFkIHNwYW4uc3AtY29sIHtcbiAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgfVxuICAgICAgLnRvcGYtYm9keSB7XG4gICAgICAgIGhlaWdodDogMzM2cHg7XG4gICAgICB9XG4gICAgICAuaXNsb2dpbiAubG9naW5fZGV0YWlsIHtcbiAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgIH1cbiAgICAgIC50b3BmLWJvZHkgcC5sb2dpbi1yZW1pbmQge1xuICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgIGNvbG9yOiAjMzMzO1xuICAgICAgICBtYXJnaW4tbGVmdDogMTRweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEycHg7XG4gICAgICB9XG4gICAgICAubG9naW5fZGV0YWlsIC5sb2dpbmluZm8ge1xuICAgICAgICBtYXJnaW4tdG9wOiAzMHB4O1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIH1cbiAgICAgIC5sb2dpbl9kZXRhaWwgI3Bhc3N3b3JkIHtcbiAgICAgICAgbWFyZ2luLXRvcDogMThweDtcbiAgICAgIH1cbiAgICAgIC5sb2dpbl9kZXRhaWwgLmZvcmdldF9wYXNzIHtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDE5M3B4O1xuICAgICAgICBjb2xvcjogIzVlYmVmZjtcbiAgICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICAgIG1hcmdpbi10b3A6IDIxcHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEycHg7XG4gICAgICB9XG4gICAgICAjdG9wZmF2b3JfZGV0YWlsIC5sb2dpbl9kZXRhaWwgLmxvZ2luaW5mbyBpbnB1dCB7XG4gICAgICAgIHdpZHRoOiAxOTZweDtcbiAgICAgICAgaGVpZ2h0OiAzMHB4O1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIHBhZGRpbmc6IDBweCA2cHggMHB4IDE2cHg7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI0IxQzNDQztcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMTVweDtcbiAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgIH1cbiAgICAgIC5sb2dpbl9kZXRhaWwgLmxvZ2luX2NsaWNrIHtcbiAgICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiAxMDBweDtcbiAgICAgICAgaGVpZ2h0OiAzMHB4O1xuICAgICAgICB3aWR0aDogODBweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBtYXJnaW4tdG9wOiAxNXB4O1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDhiZWYzO1xuICAgICAgICBjb2xvcjogI2ZmZiFpbXBvcnRhbnQ7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAzMHB4O1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMTVweDtcbiAgICAgIH1cbiAgICAgIC5sb2dpbl9kZXRhaWwgLmxvZ2luX3JlbWluZCB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgdG9wOiAxNzJweDtcbiAgICAgICAgbGVmdDogMzdweDtcbiAgICAgICAgaGVpZ2h0OiAyMHB4O1xuICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgIHdpZHRoOiAxMTZweDtcbiAgICAgICAgY29sb3I6ICNFQzQ5NjY7XG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICB9XG4gICAgICAubG9naW5fZGV0YWlsIC5yZWdpc3RlciB7XG4gICAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgaGVpZ2h0OiAxMnB4O1xuICAgICAgICBsaW5lLWhlaWdodDogMTJweDtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBtYXJnaW4tdG9wOiA5cHg7XG4gICAgICAgIGNvbG9yOiAjNDhCRUZFIWltcG9ydGFudDtcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gICAgICB9XG4gICAgICAucmVnaXN0ZXI6aG92ZXIge1xuICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgICAgIGNvbG9yOiAjNDhCRUZFO1xuICAgICAgfVxuICAgICAgLnNsaWNlX2RpdiB7XG4gICAgICAgIGhlaWdodDogMTJweDtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGZsb2F0OiBsZWZ0IWltcG9ydGFudDtcbiAgICAgICAgbWFyZ2luLXRvcDogMjNweDtcbiAgICAgICAgYmFja2dyb3VuZDogdXJsKFwnaHR0cDovL2Nkbi5nd2RhbmcuY29tL2ltYWdlcy9leHRlbnNpb25zL25ld2Jhci9zbGljZV9kaXZfaWNvbi5wbmdcJykgLTVweCAwcHggbm8tcmVwZWF0O1xuICAgICAgfVxuICAgICAgLmxvZ2luX2RldGFpbCAucXFsb2dpbiwgLmxvZ2luX2RldGFpbCAuc2luYWxvZ2luLCAubG9naW5fZGV0YWlsIC53ZWl4aW5sb2dpbiB7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgd2lkdGg6IDMycHg7XG4gICAgICAgIGhlaWdodDogMzJweDtcbiAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcbiAgICAgICAgXG4gICAgICB9XG4gICAgICAubG9naW5fZGV0YWlsIC5xcWxvZ2luIHtcbiAgICAgICAgYmFja2dyb3VuZDogdXJsKCJodHRwOi8vY2RuLmd3ZGFuZy5jb20vaW1hZ2VzL2V4dGVuc2lvbnMvbmV3YmFyL3RvcF9sb2dpbl9xcS5wbmciKSAtM3B4IC0ycHggbm8tcmVwZWF0O1xuICAgICAgICBtYXJnaW4tbGVmdDogNDdweDtcbiAgICAgIH1cbiAgICAgIC5sb2dpbl9kZXRhaWwgLnNpbmFsb2dpbiB7XG4gICAgICAgIGJhY2tncm91bmQ6IHVybChcJ2h0dHA6Ly9jZG4uZ3dkYW5nLmNvbS9pbWFnZXMvZXh0ZW5zaW9ucy9uZXdiYXIvdG9wX2xvZ2luX3NpbmEucG5nXCcpIC0zcHggLTJweCBuby1yZXBlYXQ7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiA0MHB4O1xuICAgICAgfVxuICAgICAgLmxvZ2luX2RldGFpbCAud2VpeGlubG9naW4ge1xuICAgICAgICBiYWNrZ3JvdW5kOiB1cmwoXCdodHRwOi8vY2RuLmd3ZGFuZy5jb20vaW1hZ2VzL2V4dGVuc2lvbnMvbmV3YmFyL3RvcF9sb2dpbl93ZWl4aW4ucG5nXCcpIC0zcHggLTJweCBuby1yZXBlYXQ7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiA0MHB4O1xuICAgICAgfVxuICAgICAgLmxvZ2luX2RldGFpbCAub3RoZXJfbG9naW4ge1xuICAgICAgICBmbG9hdDogbGVmdDtcbiAgICAgICAgaGVpZ2h0OiA1N3B4O1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgIH0gXG4gICAgICAuZmF2b3ItZHAtZGV0YWlsIHtcbiAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgIH1cbiAgICAgIC5pc2xvZ2luIC5mYXZvci1kcC1kZXRhaWwge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgIH1cbiAgICAgICN0b3BmYXZvcl9kZXRhaWwgLmZhdm9yLWxpc3Qge1xuICAgICAgICBoZWlnaHQ6IDI1NnB4O1xuICAgICAgICB3aWR0aDogMjgwcHg7XG4gICAgICAgIG1hcmdpbjogMHB4O1xuICAgICAgICBwYWRkaW5nOiAwcHg7XG4gICAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgfVxuICAgICAgI3RvcGZhdm9yX2RldGFpbCAuZmF2b3ItbGlzdCBsaSB7XG4gICAgICAgIGxpc3Qtc3R5bGU6IG5vbmU7XG4gICAgICAgIGhlaWdodDogNzZweDtcbiAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDE3cHg7XG4gICAgICAgIGZsb2F0OiBub25lO1xuICAgICAgfVxuICAgICAgI3RvcGZhdm9yX2RldGFpbCAuZmF2b3ItbGlzdCBsaTpmaXJzdC1jaGlsZCB7XG4gICAgICAgIG1hcmdpbi10b3A6IDE0cHg7XG4gICAgICB9XG4gICAgICAjdG9wZmF2b3JfZGV0YWlsIC5mYXZvci1saXN0IGxpIC5pdGVtX2ltZyB7XG4gICAgICAgIGhlaWdodDogNzNweDtcbiAgICAgICAgd2lkdGg6IDczcHg7XG4gICAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZWVlO1xuICAgICAgfVxuICAgICAgI3RvcGZhdm9yX2RldGFpbCAuaXRlbV9pbWcgaW1nIHtcbiAgICAgICAgaGVpZ2h0OiA3M3B4O1xuICAgICAgICB3aWR0aDogNzNweDtcbiAgICAgIH1cbiAgICAgICN0b3BmYXZvcl9kZXRhaWwgLml0ZW1fZGVzYyB7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDE0cHg7XG4gICAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgICAtbWFyZ2luLWxlZnQ6IDEwcHg7XG4gICAgICAgIHdpZHRoOiAxNTlweDtcbiAgICAgIH1cbiAgICAgICN0b3BmYXZvcl9kZXRhaWwgYS5pdGVtX3RpdGxlIHtcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICBsaW5lLWhlaWdodDogMTZweDtcbiAgICAgICAgaGVpZ2h0OiAzMnB4O1xuICAgICAgICB3aWR0aDogMTU5cHg7XG4gICAgICAgIGNvbG9yOiAjNGE0YTRhO1xuICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgICB9XG4gICAgICAjdG9wZmF2b3JfZGV0YWlsIGEuaXRlbV90aXRsZTpob3ZlciB7XG4gICAgICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xuICAgICAgfVxuICAgICAgI3RvcGZhdm9yX2RldGFpbCAub3RoZXJfZGVzYywgI3RvcGZhdm9yX2RldGFpbCAuaXRlbV90aXRsZSB7XG4gICAgICAgIGhlaWdodDogMTZweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDE2cHg7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0O1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICBmbG9hdDogbGVmdDtcbiAgICAgIH1cbiAgICAgICN0b3BmYXZvcl9kZXRhaWwgLm90aGVyX2Rlc2Mge1xuICAgICAgICBtYXJnaW4tdG9wOiAyNnB4O1xuICAgICAgICB3aWR0aDogMTYycHg7XG4gICAgICB9XG4gICAgICAjdG9wZmF2b3JfZGV0YWlsIHNwYW4uc2l0ZV9pY29uIHtcbiAgICAgICAgaGVpZ2h0OiAxNnB4O1xuICAgICAgICBsaW5lLWhlaWdodDogMTZweDtcbiAgICAgICAgY3Vyc29yOiB0ZXh0O1xuICAgICAgfVxuICAgICAgI3RvcGZhdm9yX2RldGFpbCAuc2l0ZV9pY29uIGltZyB7XG4gICAgICAgIGhlaWdodDogMTZweDtcbiAgICAgIH1cbiAgICAgICN0b3BmYXZvcl9kZXRhaWwgc3Bhbi5pdGVtX3ByaWNlIHtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDhweDtcbiAgICAgICAgbWFyZ2luLXRvcDogMnB4O1xuICAgICAgICBjb2xvcjogI0QxMDgzMTtcbiAgICAgICAgY3Vyc29yOiB0ZXh0O1xuICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgIGhlaWdodDogMTRweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDE0cHg7XG4gICAgICB9XG4gICAgICAjdG9wZmF2b3JfZGV0YWlsIHNwYW4uaXRlbV9jbG9zZV9idG4ge1xuICAgICAgICBjb2xvcjogIzliOWI5YjtcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICBoZWlnaHQ6IDEycHg7XG4gICAgICAgIHdpZHRoOiAyNXB4O1xuICAgICAgICBmbG9hdDogcmlnaHQ7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDE2cHg7XG4gICAgICAgIGxldHRlci1zcGFjaW5nOiAwO1xuICAgICAgfVxuICAgICAgI3RvcGZhdm9yX2RldGFpbCBzcGFuLml0ZW1fY2xvc2VfYnRuOmhvdmVyIHtcbiAgICAgICAgY29sb3I6ICM3MDcwNzA7XG4gICAgICB9XG4gICAgICAjdG9wZmF2b3JfZGV0YWlsIC5zZWUtYWxsLWZhdm9yIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBib3R0b206IDE3cHg7XG4gICAgICAgIHJpZ2h0OiAxNHB4O1xuICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgIGNvbG9yOiAjOWI5YjliO1xuICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgICB9XG4gICAgICAjdG9wZmF2b3JfZGV0YWlsIC5zZWUtYWxsLWZhdm9yOmhvdmVye1xuICAgICAgICBjb2xvcjogIzVlYmVmZjtcbiAgICAgIH1cbiAgICA8L3N0eWxlPlxuPC9kaXY+JwoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCwgaSkgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBhID0gbigxNiksCgkJCQlvID0gbigyNiksCgkJCQlyID0gZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSBuKDE3NCksCgkJCQkJCXIgPSBhLmNvbXBpbGUoZSkoewoJCQkJCQkJc19zZXJ2ZXI6IHQuc19zZXJ2ZXIKCQkJCQkJfSk7CgkJCQkJaSgiI3JpZ2h0X2luZm8iKS5hcHBlbmQocikuYWRkQ2xhc3MoInZpcGJhciIpLCBpKCIjZ3dkYW5nLXNlYXJjaCIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQlvKCJ2aXBzaG9wOnNlYXJjaF9jbGljayIpCgkJCQkJfSkKCQkJCX07CgkJCWUuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7CgkJCQkidmlwc2hvcCIgPT09IHQuc2l0ZSAmJiByKCkKCQkJfQoJCX0pLmNhbGwodCwgbigxKSwgbig2KSkKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJZS5leHBvcnRzID0gJyA8ZGl2IGlkPSJ2aXBzZWFyY2hfcmVtaW5kIj5cbiAgIDxzcGFuIGNsYXNzPSJ2aXAtcmUtdGxlIj7llK/lk4HkvJrnibnljZY8L3NwYW4+XG4gICA8c3BhbiBjbGFzcz0idmlwLXJlLWljb24iPjwvc3Bhbj5cbiAgIDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+XG4gICAjdmlwc2VhcmNoX3JlbWluZCB7XG4gICAgZmxvYXQ6IHJpZ2h0O1xuICAgfVxuICAgICN2aXBzZWFyY2hfcmVtaW5kIC52aXAtcmUtdGxlIHtcbiAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgIGNvbG9yOiAjZjEwMTgwO1xuICAgICAgbGluZS1oZWlnaHQ6IDM2cHg7XG4gICAgICBtYXJnaW4tcmlnaHQ6IDJweDtcbiAgICB9XG4gICAgI3ZpcHNlYXJjaF9yZW1pbmQgLnZpcC1yZS1pY29uIHtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIG1hcmdpbi1yaWdodDogNnB4O1xuICAgICAgYmFja2dyb3VuZDogdXJsKFwne3tzX3NlcnZlcn19L2ltYWdlcy9leHRlbnNpb25zL25ld2Jhci92aXBfc2VhcmNoX2ljb24ucG5nXCcpIG5vLXJlcGVhdCAwcHggMHB4O1xuICAgICAgaGVpZ2h0OiAyMHB4O1xuICAgICAgd2lkdGg6IDQwcHg7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICB0b3A6IDZweDtcbiAgICB9XG5cbiAgIDwvc3R5bGU+XG4gPC9kaXY+JwoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCwgaSkgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBhID0gbig5KSwKCQkJCW8gPSBuKDQwKSwKCQkJCXIgPSBuKDE2KSwKCQkJCXMgPSBuKDI2KSwKCQkJCWwgPSBuKDE4KSwKCQkJCWMgPSB7CgkJCQkJMTogIuS4reWbvSIsCgkJCQkJMjI4OiAi576O5Zu9IiwKCQkJCQkyMjk6ICLml6XmnKwiLAoJCQkJCTI0NjogIuW+t+WbvSIsCgkJCQkJMjY2OiAi6Iux5Zu9IiwKCQkJCQkzNjU6ICLms5Xlm70iLAoJCQkJCTM2NjogIuWKoOaLv+WkpyIKCQkJCX0sCgkJCQlkID0gewoJCQkJCTIyODogIlVTRCIsCgkJCQkJMjI5OiAiSlBZIiwKCQkJCQkyNDY6ICJFVVIiLAoJCQkJCTI2NjogIkdCUCIsCgkJCQkJMzY1OiAiRVVSIiwKCQkJCQkzNjY6ICJDQUQiCgkJCQl9LAoJCQkJcCA9IHsKCQkJCQkxOiAiwqUiLAoJCQkJCTIyODogIiQiLAoJCQkJCTIyOTogIuWGhiIsCgkJCQkJMjQ2OiAiRVVSIiwKCQkJCQkyNjY6ICLCoyIsCgkJCQkJMzY1OiAiRVVSIiwKCQkJCQkzNjY6ICJDRE4kIgoJCQkJfSwKCQkJCWggPSAiIyIgKyB0LmV4dE5hbWUgKyAiLWFtYXpvbi1kcCIsCgkJCQl1ID0gIiMiICsgdC5leHROYW1lICsgIi1hbWF6b24tZHAtZGV0YWlsIiwKCQkJCW0gPSBmdW5jdGlvbihlLCBuKSB7CgkJCQkJdmFyIGkgPSB0LnNlcnZlciArICIvZXh0ZW5zaW9uP2FjPWFtYXpvbkdsb2JhbCZkcF9pZD0iICsgZTsKCQkJCQlhLmdldChpKS5kb25lKGZ1bmN0aW9uKGUpIHsKCQkJCQkJZSAmJiBlLmxlbmd0aCA+IDAgJiYgbihlKQoJCQkJCX0pCgkJCQl9LAoJCQkJZiA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlmb3IgKHZhciBuID0gMCwgaSA9IGUubGVuZ3RoOyBpID4gbjsgbisrKSB7CgkJCQkJCXZhciBhID0gZVtuXS5kcF9pZC5zcGxpdCgiLSIpWzFdOwoJCQkJCQkiMSIgPT09IGVbbl0ubm93cGFnZSA/IGVbbl0uc2l0ZU5hbWUgPSBjW2FdICsgIuS6mumprOmAiijlvZPliY3llYbln44pIiA6IGVbbl0uc2l0ZU5hbWUgPSBjW2FdICsgIuS6mumprOmAiiI7CgkJCQkJCXZhciByID0gKE51bWJlcihlW25dLnByaSkgLyAxMDApLnRvRml4ZWQoMiksCgkJCQkJCQlzID0gIiI7CgkJCQkJCWlmICgiMSIgIT09IGEpIHsKCQkJCQkJCXZhciBoID0gIiI7CgkJCQkJCQloID0gIjIyOSIgPT09IGEgPyByICsgcFthXSA6IHBbYV0gKyByLCBzID0gbyhyLCBkW2FdKSwgciA9ICLCpSIgKyBzICsgKCIoIiArIGggKyAiKSIpCgkJCQkJCX0gZWxzZSBzID0gciwgciA9ICLCpSIgKyByOwoJCQkJCQl2YXIgdSA9IHsKCQkJCQkJCXNpdGVfaWQ6IGEsCgkJCQkJCQl1cmw6IGVbbl0udXJsLAoJCQkJCQkJbW9kOiAiYW1hem9uX2dsb2JhbCIsCgkJCQkJCQl1bmlvbjogdC51bmlvbi5zcGxpdCgiXyIpWzFdLAoJCQkJCQkJZHBfaWQ6IGVbbl0uZHBfaWQKCQkJCQkJfTsKCQkJCQkJZVtuXS51cmwgPSBsLmluaXQodSksIGVbbl0ucHJpY2UgPSByLCBlW25dLnB1cmVQcmljZSA9IHMKCQkJCQl9CgkJCQkJcmV0dXJuIGUuc29ydChmdW5jdGlvbihlLCB0KSB7CgkJCQkJCXJldHVybiBOdW1iZXIoZS5wdXJlUHJpY2UpIC0gTnVtYmVyKHQucHVyZVByaWNlKQoJCQkJCX0pLCBlCgkJCQl9LAoJCQkJZyA9IGZ1bmN0aW9uKGUpIHsKCQkJCQllID0gZihlKSwgInRvcCIgPT09IHQuc3R5bGUgJiYgdyhlKSwgdihlKSwgYihlKSwgeCgpCgkJCQl9LAoJCQkJXyA9IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gJzxhIGlkPSInICsgdC5leHROYW1lICsgJy1hbWF6b24tZHAiPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJhbWF6b24taWNvbiBnd2RfYmciPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8c3Bhbj4g5Lqa6ams6YCK5rW35aSW6LSt77yaPC9zcGFuPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJnd2QtcHJpY2UgYW1hem9uX2RwIj48L3NwYW4+XG4gICAgICAgICAgICAgIDwvYT4nOwoJCQkJCWkoIiMiICsgdC5leHROYW1lICsgIi1tYWluLWNvbnRlbnRzIikucHJlcGVuZChpKGUpKQoJCQkJfSwKCQkJCXggPSBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IHZvaWQgMDsKCQkJCQlpKGgpLm9uKCJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7CgkJCQkJCWkodSkuYWRkQ2xhc3MoIl9tc2hvdmVyIiksIGkoaCkuYWRkQ2xhc3MoIl9tc2hvdmVyIiksIHMoInRyYWNrOmFtYXpvbl9nbG9iYWw6bXNob3ZlciIpCgkJCQkJfSksIGkoaCkub24oIm1vdXNlbGVhdmUiLCBmdW5jdGlvbigpIHsKCQkJCQkJZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJCQlpKHUpLnJlbW92ZUNsYXNzKCJfbXNob3ZlciIpLCBpKGgpLnJlbW92ZUNsYXNzKCJfbXNob3ZlciIpCgkJCQkJCX0sIDIwMCkKCQkJCQl9KSwgaSh1KS5vbigibW91c2VlbnRlciIsIGZ1bmN0aW9uKCkgewoJCQkJCQljbGVhclRpbWVvdXQoZSksIGkodSkuYWRkQ2xhc3MoIl9tc2hvdmVyIiksIGkoaCkuYWRkQ2xhc3MoIl9tc2hvdmVyIikKCQkJCQl9KSwgaSh1KS5vbigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uKCkgewoJCQkJCQlpKHUpLnJlbW92ZUNsYXNzKCJfbXNob3ZlciIpLCBpKGgpLnJlbW92ZUNsYXNzKCJfbXNob3ZlciIpCgkJCQkJfSksIGkoIiNhbWF6b25fZHAtaXRlbS1saXN0IGxpIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCXMoInRyYWNrOmFtYXpvbl9nbG9iYWw6Y2xpY2siKQoJCQkJCX0pLCBpKCIjYW1hem9uX2dsb2JhbCIpLm9uKCJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gaSgiI2dsb2JhbElubmVyRGV0YWlsIik7CgkJCQkJCWUuaXMoIjp2aXNpYmxlIikgfHwgKGkoIi5jb250ZW50X2RlZmF1bHQiKS5oaWRlKCksIGUuc2hvdygpKQoJCQkJCX0pLCBpKCIjZ2xvYmFsSW5uZXJEZXRhaWwgLmNvbnRlbnRfZGVmYXVsdF9sZWZ0IGEiKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQkJcygidHJhY2s6YW1hem9uX2dsb2JhbF9pbm5lcl9kZXRhaWw6Y2xpY2siKQoJCQkJCX0pCgkJCQl9LAoJCQkJdyA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlpKCIjIiArIHQuZXh0TmFtZSArICItYW1hem9uLWRwIC5hbWF6b25fZHAiKS50ZXh0KGVbMF0ucHJpY2UpLCBpKGgpLmNzcygiZGlzcGxheSIsICJpbmxpbmUtYmxvY2siKTsKCQkJCQl2YXIgYSA9IG4oMTc2KSwKCQkJCQkJbyA9IHIuY29tcGlsZShhKSh7CgkJCQkJCQlkYXRhOiBlLAoJCQkJCQkJZXh0QnJhbmQ6IHQuZXh0QnJhbmQsCgkJCQkJCQlleHROYW1lOiB0LmV4dE5hbWUKCQkJCQkJfSk7CgkJCQkJaSgiIyIgKyB0LmV4dE5hbWUgKyAiLW1haW4iKS5hcHBlbmQobyksIHMoInRyYWNrOmFtYXpvbl9nbG9iYWw6dHJhY2siKQoJCQkJfSwKCQkJCXYgPSBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQgPSBlWzBdOwoJCQkJCWlmICh0KSB7CgkJCQkJCXZhciBhID0gbigxNzcpLAoJCQkJCQkJbyA9IGkoIiNnd2RfaHRfbWFpbiAuaHRfaGVhZCIpOwoJCQkJCQkwICE9PSBvLmxlbmd0aCAmJiAoby5hcHBlbmQoci5jb21waWxlKGEpKHsKCQkJCQkJCWRhdGE6IHQKCQkJCQkJfSkpLCBzKCJ0cmFjazphbWF6b25fZ2xvYmFsX2lubmVyOnRyYWNrIiksIGkoIiNhbWF6b25fZ2xvYmFsIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCQlzKCJ0cmFjazphbWF6b25fZ2xvYmFsX2lubmVyOmNsaWNrIikKCQkJCQkJfSkpCgkJCQkJfQoJCQkJfSwKCQkJCWIgPSBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIHQgPSBuKDE3OCksCgkJCQkJCWEgPSByLmNvbXBpbGUodCkoewoJCQkJCQkJZGF0YTogZVswXQoJCQkJCQl9KTsKCQkJCQlpKCIjZ3dkX2h0X21haW4gLmh0X2NvbnRlbnQiKS5hcHBlbmQoYSkKCQkJCX07CgkJCWUuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oZSkgewoJCQkJbG9jYXRpb24uaG9zdC5pbmRleE9mKCIuY24iKSA+IC0xIHx8ICgidG9wIiA9PT0gdC5zdHlsZSAmJiBfKCksIG0oZSwgZykpCgkJCX0KCQl9KS5jYWxsKHQsIG4oMSksIG4oNikpCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICc8ZGl2IGlkPSJ7e2V4dE5hbWV9fS1hbWF6b24tZHAtZGV0YWlsIiBjbGFzcz0iIHByaWNlX2NvbXBhcmUgYW1hem9uLWRwLWRldGFpbCI+XG4gIDxkaXYgY2xhc3M9InBhbmVsLXdyYXAiPlxuICAgIDxkaXYgY2xhc3M9InBhZ2VzIj5cbiAgICAgIOesrCZuYnNwO1xuICAgICAgPHNwYW4gaWQ9ImFtYXpvbl9kcC1jdXJyZW50LXBhZ2UiIGNsYXNzPSJjdXJyZW50LXBhZ2UiPjE8L3NwYW4+XG4gICAgICAmbmJzcDvpobXvvIzlhbEmbmJzcDtcbiAgICAgIDxzcGFuIGlkPSJhbWF6b25fZHAtcGFnZS1udW0iIGNsYXNzPSJwYWdlLW51bSI+MTwvc3Bhbj5cbiAgICAgICZuYnNwO+mhtVxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9ImxlZnQtcGFnZSBnd2RzZXR0aW5nX2JnIj5cbiAgICAgIDxhIHRpdGxlPSLkuIrkuIDpobUiIHRhcmdldD0iX3NlbGYiIGhyZWY9ImphdmFzY3JpcHQ6Ij48L2E+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz0iYWxsLXByb2R1Y3RzIj5cbiAgICAgIDx1bCBpZD0iYW1hem9uX2RwLWl0ZW0tbGlzdCI+XG4gICAgICAgIHt7ZWFjaCBkYXRhfX1cbiAgICAgICAgICA8bGkgaWQ9ImFtYXpvbl9kcC1wcm9kLWl0ZW0te3skaW5kZXh9fSI+XG4gICAgICAgICAgICA8YSBocmVmPSJ7eyR2YWx1ZS51cmx9fSIgdGFyZ2V0PSJfYmxhbmsiIHRpdGxlPSJ7eyR2YWx1ZS50bGV9fSIgY2xhc3M9InNtYWxsLWltZyI+XG4gICAgICAgICAgICAgIDxpbWcgc3JjPSJ7eyR2YWx1ZS5pbWd9fSI+XG4gICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgPGEgY2xhc3M9Int7ZXh0QnJhbmR9fS1wcmljZSI+e3skdmFsdWUucHJpY2V9fTwvYT5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNpdGVOYW1lIj57eyR2YWx1ZS5zaXRlTmFtZX19PC9zcGFuPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iZmVlcyI+5LiN5ZCM5Y2W5a626L+Q6LS55LiN5ZCMPC9zcGFuPlxuICAgICAgICAgICAgICA8YSBocmVmPSJ7eyR2YWx1ZS51cmx9fSIgdGFyZ2V0PSJfYmxhbmsiIHRpdGxlPSJ7eyR2YWx1ZS50bGV9fSI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9Int7ZXh0QnJhbmR9fV90aXRsZSI+e3skdmFsdWUudGxlfX08L3NwYW4+XG4gICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICA8L2xpPlxuICAgICAgICB7ey9lYWNofX1cbiAgICAgIDwvdWw+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz0icmlnaHQtcGFnZSBnd2RzZXR0aW5nX2JnIj5cbiAgICAgIDxhIHRpdGxlPSLkuIvkuIDpobUiIHRhcmdldD0iX3NlbGYiIGhyZWY9ImphdmFzY3JpcHQ6Ij48L2E+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuICA8ZGl2IGNsYXNzPSJwYW5lbC1zaGFkb3ciPjwvZGl2PlxuICA8c3R5bGUgdHlwZT0idGV4dC9jc3MiPlxuICAgICN7e2V4dE5hbWV9fS1hbWF6b24tZHAtZGV0YWlse1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG4gICAgI3t7ZXh0TmFtZX19LWFtYXpvbi1kcC1kZXRhaWwuX21zaG92ZXIge1xuICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgfVxuICAgICN7e2V4dE5hbWV9fS1hbWF6b24tZHAtZGV0YWlsIC5sZWZ0LXBhZ2V7XG4gICAgICBsZWZ0OiA1cHg7XG4gICAgfVxuICAgICN7e2V4dE5hbWV9fS1hbWF6b24tZHAtZGV0YWlsIC5hbGwtcHJvZHVjdHN7XG4gICAgICBsZWZ0OiAzNXB4O1xuICAgIH1cbiAgICBcbiAgICAje3tleHROYW1lfX0tYW1hem9uLWRwLWRldGFpbCAue3tleHRCcmFuZH19LXByaWNlOmhvdmVyIHtcbiAgICAgIGNvbG9yOiAjRTUyNjAwO1xuICAgICAgY3Vyc29yOiB0ZXh0O1xuICAgIH1cbiAgICAjYW1hem9uX2RwLWl0ZW0tbGlzdCBzcGFuIHtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIH1cbiAgICAjYW1hem9uX2RwLWl0ZW0tbGlzdCBzcGFuLnNpdGVOYW1lIHtcbiAgICAgIGNvbG9yOiAjMzMzO1xuICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgfVxuICAgIC57e2V4dE5hbWV9fS1tYWluIC5wYW5lbC13cmFwIC5hbGwtcHJvZHVjdHMgI2FtYXpvbl9kcC1pdGVtLWxpc3QgbGkgYSBpbWd7XG4gICAgICBtYXgtd2lkdGg6IDkwcHg7XG4gICAgICBtYXgtaGVpZ2h0OiA5MHB4O1xuICAgIH1cbiAgICAue3tleHROYW1lfX0tbWFpbiAucGFuZWwtd3JhcCAuYWxsLXByb2R1Y3RzIHVsIGxpIC5zbWFsbC1pbWd7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgfVxuICAgICNhbWF6b25fZHAtaXRlbS1saXN0IGxpIHtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB9XG4gICAgI2JqZC57e2V4dE5hbWV9fS1tYWluIC5hbGwtcHJvZHVjdHMgdWwgbGkgLmd3ZC1wcmljZSB7XG4gICAgICBjb2xvcjogI0U1MjYwMDtcbiAgICB9XG4gICAgI3t7ZXh0TmFtZX19LWFtYXpvbi1kcC1kZXRhaWwgLnt7ZXh0QnJhbmR9fS1wcmljZSB7XG4gICAgICBoZWlnaHQ6IDIycHg7XG4gICAgICBsaW5lLWhlaWdodDogMjJweDtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgfVxuICA8L3N0eWxlPlxuPC9kaXY+JwoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQllLmV4cG9ydHMgPSAnPGEgaHJlZj0ie3tkYXRhLnVybH19IiB0YXJnZXQ9Il9ibGFuayIgaWQ9ImFtYXpvbl9nbG9iYWwiID5cbiAg5rW35aSW6LSt77yaXG4gIDxzcGFuIGNsYXNzPSJodF9nZXRwcmljZV9udW0gZm9udGZfQXJpYWwiPlxuICAgIHt7ZGF0YS5wcmljZX19XG4gIDwvc3Bhbj5cbiAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj5cbiAgICBkaXYuZ3dkX2hhaXRhbyAuaHRfZ2V0cHJpY2Uge1xuICAgICAgd2lkdGg6IDE2MHB4O1xuICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICB9XG4gICAgZGl2Lmd3ZF9oYWl0YW8gLmh0X2dldHByaWNlIHNwYW4ge1xuICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgIH1cbiAgICAjYW1hem9uX2dsb2JhbCB7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIGhlaWdodDogMzVweDtcbiAgICAgIGxpbmUtaGVpZ2h0OiAzNXB4O1xuICAgICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjZTZlOWViO1xuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgd2lkdGg6IDE2MXB4O1xuICAgICAgY29sb3I6ICM0NTRhNGQ7XG4gICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIH1cbiAgICAjYW1hem9uX2dsb2JhbCBzcGFuIHtcbiAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICB9XG4gICAgI2FtYXpvbl9nbG9iYWw6aG92ZXIge1xuICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgICAgY29sb3I6ICM0NTRhNGQ7XG4gICAgfVxuICA8L3N0eWxlPlxuPC9hPicKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJZS5leHBvcnRzID0gJzxkaXYgY2xhc3M9ImNvbnRlbnRfZGVmYXVsdCIgaWQ9Imdsb2JhbElubmVyRGV0YWlsIj5cbiAgPGRpdiBjbGFzcz0iY29udGVudF9kZWZhdWx0X2xlZnQiPlxuICAgIDxhIGhyZWY9Int7ZGF0YS51cmx9fSIgdGFyZ2V0PSJfYmxhbmsiIGNsYXNzPSJpbm5lci1pbWciPlxuICAgICAgPGltZyBzcmM9Int7ZGF0YS5pbWd9fSI+XG4gICAgPC9hPlxuICAgIDxhIGhyZWY9Int7ZGF0YS51cmx9fSIgdGFyZ2V0PSJfYmxhbmsiIHRpdGxlPSJ7e2RhdGEudGxlfX0iIGNsYXNzPSJpbm5lci10bGUiPnt7ZGF0YS50bGV9fTwvYT5cbiAgICA8YSBocmVmPSJ7e2RhdGEudXJsfX0iIHRhcmdldD0iX2JsYW5rIiBjbGFzcz0iaW5uZXItYnRuIj4g55u06L6+6ZO+5o6lPC9hPlxuICA8L2Rpdj5cbiAgPGRpdiBjbGFzcz0iY29udGVudF9kZWZhdWx0X3JpZ2h0Ij5cbiAgICA8YSBjbGFzcz0icHJvX3R5cGUiPlxuICAgICAgPGVtIGNsYXNzPSJ6aXlpbmciPjwvZW0+XG4gICAgICA8c3BhbiBjbGFzcz0icHJvX3RfdGxlIiA+6Ieq6JClPC9zcGFuPlxuICAgICAgPGRpdiBjbGFzcz0icHJvX3R5cGVfZGV0YWlsIGRpdl9kZXRhaWwiPlxuICAgICAgICDkuprpqazpgIrnm7TmjqXplIDllK5cbiAgICAgIDwvZGl2PlxuICAgIDwvYT5cbiAgICA8YSBjbGFzcz0ibWFpbF90eXBlIiA+XG4gICAgICA8ZW0gY2xhc3M9InpoaXlvdSI+PC9lbT5cbiAgICAgIDxzcGFuID7nm7Tpgq48L3NwYW4+XG4gICAgICA8ZGl2IGNsYXNzPSJtYWlsX3R5cGVfZGV0YWlsIGRpdl9kZXRhaWwiPlxuICAgICAgICDllYblk4HmlK/mjIHnm7Tpgq7kuK3lm70gNy0xMuWkqeWPr+WIsOi+vlxuICAgICAgPC9kaXY+XG4gICAgPC9hPlxuICAgIDxhIGNsYXNzPSJodF90cmFuc2xhdGUgc2FtZS1zdHlsZSI+XG4gICAgICA8ZW0+PC9lbT5cbiAgICAgIDxzcGFuPuWQjOasvjwvc3Bhbj5cbiAgICAgIDxkaXYgY2xhc3M9InNhbWUtc3R5bGVfZGV0YWlsIGRpdl9kZXRhaWwiPlxuICAgICAgICDkuK3kupot5rW35aSW6LSt5ZCM5qy+XG4gICAgICA8L2Rpdj5cbiAgICA8L2E+XG4gICAgPGEgY2xhc3M9InNpemVfaGVscCB2aXBfdGxlIiBocmVmPSJodHRwczovL3d3dy5hbWF6b24uY24vZ3AvcHJpbWUvcGlwZWxpbmUvbGFuZGluZz9pZT1VVEY4JnJlZl89bmF2X3ByaW1lX3RyeV9idG4iIHRhcmdldD0iX2JsYW5rIj5cbiAgICAgIDxlbT48L2VtPlxuICAgICAgPHNwYW4+5Lya5ZGY5YWN6L+Q6LS5PC9zcGFuPlxuICAgICAgPGRpdiBjbGFzcz0ic2l6ZV9kZXRhaWwgdmlwX3RsZV9kZXRhaWwgZGl2X2RldGFpbCI+XG4gICAgICAgIOeCueWHu+eri+S6q+WFjei0ueivleeUqDMw5aSpXG4gICAgICA8L2Rpdj5cbiAgICA8L2E+XG4gIDwvZGl2PlxuPC9kaXY+JwoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCwgaSkgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBhID0gbigxNiksCgkJCQlvID0gbigxODApLAoJCQkJciA9IG4oMTMwKSwKCQkJCXMgPSBuKDkpLAoJCQkJbCA9IG4oNjUpLAoJCQkJYyA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlmb3IgKHZhciB0ID0gMDsgdCA8IGUubGVuZ3RoOyB0KyspIGVbdF0ucHVyZXRsZSA9IGVbdF0udGl0bGUsIGVbdF0udGl0bGUgPSBlW3RdLnRpdGxlLnJlcGxhY2UoL1xiKFswLTkuXSspXGIvZywgIjxlbT4kMTwvZW0+Iik7CgkJCQkJcmV0dXJuIGUKCQkJCX0sCgkJCQlkID0gZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSB2b2lkIDAsCgkJCQkJCW4gPSB0KCIjcHJvbW9fcXVhbl9idG4iKSwKCQkJCQkJYSA9ICIiLAoJCQkJCQlvID0gdCgiI3Byb21vX3F1YW5fZGV0YWlsIik7CgkJCQkJImJvdHRvbSIgPT0gaS5zdHlsZSAmJiAobiA9IHQoIiMiICsgaS5leHRCcmFuZCArICItaHVpIiksIGEgPSBpLmV4dEJyYW5kICsgIi1jb21wYXJlLWl0ZW0taG92ZXIiKSwgbi5vbigibW91c2VlbnRlciIsIGZ1bmN0aW9uKCkgewoJCQkJCQlvLnNob3coKSwgbi5hZGRDbGFzcygibXNIb3ZlciIpLCBuLmZpbmQoImEiKS5hZGRDbGFzcyhhKTsKCQkJCQkJdmFyIGUgPSBuLm9mZnNldCgpLmxlZnQ7CgkJCQkJCW8uY3NzKCJsZWZ0IiwgZSArICJweCIpCgkJCQkJfSksIG4ub24oIm1vdXNlbGVhdmUiLCBmdW5jdGlvbigpIHsKCQkJCQkJZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJCQlvLmhpZGUoKSwgbi5yZW1vdmVDbGFzcygibXNIb3ZlciIpLCBuLmZpbmQoImEiKS5yZW1vdmVDbGFzcyhhKQoJCQkJCQl9LCAxMDApCgkJCQkJfSksIG8ub24oIm1vdXNlZW50ZXIiLCBmdW5jdGlvbigpIHsKCQkJCQkJY2xlYXJUaW1lb3V0KGUpCgkJCQkJfSksIG8ub24oIm1vdXNlbGVhdmUiLCBmdW5jdGlvbigpIHsKCQkJCQkJby5oaWRlKCksIG4ucmVtb3ZlQ2xhc3MoIm1zSG92ZXIiKSwgbi5maW5kKCJhIikucmVtb3ZlQ2xhc3MoYSkKCQkJCQl9KQoJCQkJfSwKCQkJCXAgPSBmdW5jdGlvbihlLCBuLCByKSB7CgkJCQkJciB8fCAociA9IHsKCQkJCQkJc2l0ZV9uYW1lOiBuLnNpdGVfbmFtZQoJCQkJCX0pOwoJCQkJCXZhciBzID0gci5zaXRlX25hbWUgfHwgbi5zaXRlX25hbWUsCgkJCQkJCWwgPSByLnNpdGVfbmFtZSB8fCBuLnNpdGVfbmFtZSwKCQkJCQkJcCA9IG4ucHJvbW90aW9uLnVybCwKCQkJCQkJaCA9IG4ucXVhbiAmJiBuLnF1YW4udXJsOwoJCQkJCW4ucHJvbW90aW9uLnNpdGVfaGFzX3Byb21vIHx8IChzID0gIuWFqOe9keacgOaWsCIpLCAxID09IG4ucHJvbW90aW9uLnByb21vcy5sZW5ndGggJiYgKHAgPSBuLnByb21vdGlvbi5wcm9tb3NbMF0udXJsKSwgbi5xdWFuICYmICFuLnF1YW4uc2l0ZV9oYXNfcXVhbiAmJiAobCA9ICLlhajnvZHmnIDlj5flhbPms6giKSwgdChlKS5hcHBlbmQoYS5jb21waWxlKG8pKHsKCQkJCQkJcHJvbW9fc2l0ZTogcywKCQkJCQkJcXVhbl9zaXRlOiBsLAoJCQkJCQlwcm9tb3M6IGMobi5wcm9tb3Rpb24ucHJvbW9zLnNsaWNlKDAsIDQpKSwKCQkJCQkJcHJvbW9fdXJsOiBwLAoJCQkJCQlxdWFuczogYyhuLnF1YW4gJiYgbi5xdWFuLnF1YW5zLnNsaWNlKDAsIDQpIHx8IFtdKSwKCQkJCQkJcXVhbl91cmw6IGgsCgkJCQkJCXNfc2VydmVyOiBpLnNfc2VydmVyLAoJCQkJCQluZXdfZXh0ZW5zaW9uOiBpLm5ld19leHRlbnNpb24sCgkJCQkJCXN0eWxlOiBpLnN0eWxlCgkJCQkJfSkpLCBkKCkKCQkJCX0sCgkJCQloID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJCSJ0b3AiID09IGkuc3R5bGUgPyBwKCIjIiArIGkuZXh0TmFtZSArICItbWFpbiIsIHQsIGUpIDogImJvdHRvbSIgPT0gaS5zdHlsZSAmJiBwKGkuZHZhbCwgdCwgZSkKCQkJCX0sCgkJCQl1ID0gZnVuY3Rpb24oZSkgewoJCQkJCWlmIChlICYmIDAgIT09IGUucHJvbW8ubGVuZ3RoKSB7CgkJCQkJCXZhciBpID0gMTsKCQkJCQkJMSA9PT0gZS5wcm9tby5sZW5ndGggJiYgKGkgPSAwKTsKCQkJCQkJdmFyIG8gPSBlLnByb21vW2ldLAoJCQkJCQkJciA9IG4oMTgxKTsKCQkJCQkJdCgiLmRldGFpbF9yaWdodCIpLmFwcGVuZChhLmNvbXBpbGUocikoewoJCQkJCQkJaXRlbTogbwoJCQkJCQl9KSksIHQoIi5kZXRhaWxfcmlnaHQiKS5zaG93KCkKCQkJCQl9CgkJCQl9LAoJCQkJbSA9IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gJzxzcGFuIGlkPSJwcm9tb19xdWFuX2J0biI+PGVtPjwvZW0+5L+D6ZSA5LyY5oOg5Yi4PC9zcGFuPic7CgkJCQkJdCgiIyIgKyBpLmV4dE5hbWUgKyAiLXRyZW5kIikubGVuZ3RoID4gMCA/IHQoIiMiICsgaS5leHROYW1lICsgIi10cmVuZCIpLmFmdGVyKHQoZSkpIDogdCgiIyIgKyBpLmV4dE5hbWUgKyAiLW1haW4tY29udGVudHMiKS5hcHBlbmQodChlKSkKCQkJCX0sCgkJCQlmID0gZnVuY3Rpb24oKSB7fSwKCQkJCWcgPSBmdW5jdGlvbigpIHsKCQkJCQkidG9wIiA9PSBpLnN0eWxlID8gbSgpIDogImJvdHRvbSIgPT0gaS5zdHlsZSAmJiBmKCkKCQkJCX0sCgkJCQlfID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJCXZhciBuID0gaS5zZXJ2ZXIgKyAiL2V4dGVuc2lvbj9hYz1wcm9tb3Rpb24mc2l0ZV9pZD0iICsgZS5zaXRlX2lkICsgIiZjbGFzc19pZD0iICsgZS5jbGFzc19pZCArICImc3R5bGU9IiArIGkuc3R5bGU7CgkJCQkJcy5nZXQobikuZG9uZShmdW5jdGlvbihlKSB7CgkJCQkJCWUgJiYgdChlKQoJCQkJCX0pCgkJCQl9LAoJCQkJeCA9IGZ1bmN0aW9uKGUsIGkpIHsKCQkJCQlyLmluaXQoewoJCQkJCQljbGFzc19pZDogZS5jbGFzc19pZCwKCQkJCQkJa2V5d29yZDogZS5rZXl3b3JkCgkJCQkJfSwgZnVuY3Rpb24oZSkgewoJCQkJCQllLnByb21vLmxlbmd0aCA+IDAgJiYgKGUucHJvbW9bMF0ucHVyZXRsZSA9IGUucHJvbW9bMF0udGl0bGUsIGkucHJvbW90aW9uLnByb21vcyA9IGUucHJvbW8uY29uY2F0KGkucHJvbW90aW9uLnByb21vcykpOwoJCQkJCQl2YXIgbyA9IG4oMTgyKTsKCQkJCQkJdCgiLndyYXBwZXIgLmJyZWFkY3J1bWIiKS5lcSgwKS5hZnRlcihhLmNvbXBpbGUobykoewoJCQkJCQkJZGF0YTogaS5wcm9tb3Rpb24ucHJvbW9zLnNsaWNlKDAsIDMpCgkJCQkJCX0pKQoJCQkJCX0pCgkJCQl9OwoJCQllLmV4cG9ydHMucmVuZGVyU2VhcmNoID0gZnVuY3Rpb24oKSB7CgkJCQlpZiAoaS5zaXRlLmluZGV4T2YoInRhb2JhbyIpID4gLTEgfHwgaS5zaXRlLmluZGV4T2YoInRtYWxsIikgPiAtMSB8fCAiMTY4OCIgPT0gaS5zaXRlKSByZXR1cm4gdm9pZCB0KCIjIiArIGkuZXh0QnJhbmQgKyAiLWh1aSIpLmhpZGUoKTsKCQkJCXZhciBlID0gbC5nZXRTaXRlSWQoaS5zaXRlKTsKCQkJCWlmIChlKSB7CgkJCQkJdmFyIG4gPSB7fTsKCQkJCQluLnNpdGVfaWQgPSBlLCBfKG4sIGZ1bmN0aW9uKGUpIHsKCQkJCQkJaChudWxsLCBlKQoJCQkJCX0pCgkJCQl9CgkJCX0sIGUuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oZSkgewoJCQkJaWYgKGkuc2l0ZS5pbmRleE9mKCJ0YW9iYW8iKSA+IC0xIHx8IGkuc2l0ZS5pbmRleE9mKCJ0bWFsbCIpID4gLTEgfHwgIjE2ODgiID09IGkuc2l0ZSkgcmV0dXJuIHZvaWQgdCgiIyIgKyBpLmV4dEJyYW5kICsgIi1odWkiKS5oaWRlKCk7CgkJCQlnKCk7CgkJCQl2YXIgbiA9IGUubm93LmNsYXNzX2lkLAoJCQkJCWEgPSBlLm5vdy5jb3Jld29yZCwKCQkJCQlvID0gZS5ub3cuc2l0ZV9pZDsKCQkJCSIwIiA9PT0gbyAmJiAobyA9IGwuZ2V0U2l0ZUlkKGkuc2l0ZSkpOwoJCQkJdmFyIHMgPSB7fTsKCQkJCXMua2V5d29yZCA9IGEsIHMuc2l0ZV9pZCA9IG8sIHMuY2xhc3NfaWQgPSBlLm5vdy5jbGFzc19pZCwgcy5icmFuZF9pZCA9IGUuZXhhY3RfYXJyLmJyYW5kX2lkLCBfKHMsIGZ1bmN0aW9uKHQpIHsKCQkJCQloKGUubm93LCB0KSwgInpvbCIgPT09IGkuc2l0ZSAmJiB4KHMsIHQpLCByLmluaXQoewoJCQkJCQljbGFzc19pZDogbiwKCQkJCQkJa2V5d29yZDogYQoJCQkJCX0sIHUpCgkJCQl9KQoJCQl9CgkJfSkuY2FsbCh0LCBuKDYpLCBuKDEpKQoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQllLmV4cG9ydHMgPSAnPGRpdiBpZD0icHJvbW9fcXVhbl9kZXRhaWwiIGNsYXNzPSJwcm9tb19xdWFuX2JveCI+XG4gIDxkaXYgY2xhc3M9ImRldGFpbF9sZWZ0Ij5cbiAgICA8ZGl2IGNsYXNzPSJwcm9tb19kaXYiPlxuICAgICAgPGRpdiBjbGFzcz0iZF9oZWFkIj5cbiAgICAgICAgPHNwYW4+e3twcm9tb19zaXRlfX3kv4PplIDmtLvliqg8L3NwYW4+XG4gICAgICAgIHt7aWYgIW5ld19leHRlbnNpb259fVxuICAgICAgICA8YSBocmVmPSJ7e3Byb21vX3VybH19IiB0YXJnZXQ9Il9ibGFuayI+5p+l55yL5YWo6YOoPGVtIGNsYXNzPSJzZWVfYWxsX2ljb24iPjwvZW0+PC9hPlxuICAgICAgICB7ey9pZn19XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9InByb21vX2JvZHkiPlxuICAgICAgICAgIHt7ZWFjaCBwcm9tb3N9fVxuICAgICAgICAgICAgPGEgaHJlZj0ie3skdmFsdWUudXJsfX0iIGNsYXNzPSJwcm9tb19pdGVtIiB0YXJnZXQ9Il9ibGFuayI+XG4gICAgICAgICAgICAgIDxlbSBjbGFzcz0iY2lyY2xlIj48L2VtPlxuICAgICAgICAgICAgICB7eyMkdmFsdWUudGl0bGV9fVxuICAgICAgICAgICAgPC9hPlxuICAgICAgICAgIHt7L2VhY2h9fVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAge3tpZiAhbmV3X2V4dGVuc2lvbn19XG4gICAgPGRpdiBjbGFzcz0icXVhbl9kaXYiPlxuICAgICAgPGRpdiBjbGFzcz0iZF9oZWFkIj5cbiAgICAgICAgPHNwYW4+e3txdWFuX3NpdGV9feS8mOaDoOWIuDwvc3Bhbj5cbiAgICAgICAge3tpZiAhbmV3X2V4dGVuc2lvbn19XG4gICAgICAgIDxhIGhyZWY9Int7cXVhbl91cmx9fSIgdGFyZ2V0PSJfYmxhbmsiPuafpeeci+WFqOmDqDxlbSBjbGFzcz0ic2VlX2FsbF9pY29uIj48L2VtPjwvYT5cbiAgICAgICAge3svaWZ9fVxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPSJxdWFuX2JvZHkiPlxuICAgICAgICB7e2VhY2ggcXVhbnN9fVxuICAgICAgICAgIDxhIGhyZWY9Int7JHZhbHVlLnVybH19IiBjbGFzcz0icXVhbl9pdGVtIiB0YXJnZXQ9Il9ibGFuayI+XG4gICAgICAgICAgICAgIDxlbSBjbGFzcz0iY2lyY2xlIj48L2VtPlxuICAgICAgICAgICAgICB7eyMkdmFsdWUudGl0bGV9fVxuICAgICAgICAgICAgPC9hPlxuICAgICAgICB7ey9lYWNofX1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIHt7L2lmIH19XG4gIDwvZGl2PlxuICA8ZGl2IGNsYXNzPSJkZXRhaWxfcmlnaHQiPjwvZGl2PlxuICA8c3R5bGUgdHlwZT0idGV4dC9jc3MiPlxuICAgICNwcm9tb19xdWFuX2RldGFpbCB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICB0b3A6IDM3cHg7XG4gICAgICBsZWZ0OiAwcHg7XG4gICAgICB3aWR0aDogYXV0bztcbiAgICAgIGhlaWdodDogMjcycHg7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgICBib3gtc2hhZG93OiAxcHggMXB4IDVweCAwcHggI2U2ZTllYjtcbiAgICB9XG4gICAge3tpZiBzdHlsZSA9PSAiYm90dG9tIn19XG4gICAgI3Byb21vX3F1YW5fZGV0YWlsIHtcbiAgICAgIHRvcDogaW5oZXJpdDtcbiAgICAgIGJvdHRvbTogNjBweDtcbiAgICB9XG4gICAge3svaWZ9fVxuICAgICNwcm9tb19xdWFuX2RldGFpbCAuZGV0YWlsX2xlZnQge1xuICAgICAgd2lkdGg6IDYyMXB4O1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjZTZlOWViO1xuICAgICAgcGFkZGluZzogMHB4O1xuICAgICAgaGVpZ2h0OiBhdXRvO1xuICAgIH1cbiAgICAucHJvbW9fcXVhbl9ib3ggLnByb21vX2RpdiwgLnByb21vX3F1YW5fYm94IC5xdWFuX2RpdiB7XG4gICAgICBoZWlnaHQ6IDEzNXB4O1xuICAgIH1cbiAgICAucHJvbW9fcXVhbl9ib3ggLmRfaGVhZCB7XG4gICAgICBoZWlnaHQ6IDM0cHg7XG4gICAgICBsaW5lLWhlaWdodDogMjZweDtcbiAgICAgIGZsb2F0OiBub25lO1xuICAgIH1cbiAgICAjcHJvbW9fcXVhbl9kZXRhaWwgLmRldGFpbF9sZWZ0IC5kX2hlYWQgYSB7XG4gICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICBjb2xvcjogIzdkN2Y4MDtcbiAgICAgIG1hcmdpbi10b3A6IDZweDtcbiAgICB9XG4gICAgI3Byb21vX3F1YW5fZGV0YWlsIC5kZXRhaWxfbGVmdCAuZF9oZWFkIGE6aG92ZXIge1xuICAgICAgY29sb3I6ICM1RUJFRkY7XG4gICAgfVxuICAgIC5wcm9tb19xdWFuX2JveCAuc2VlX2FsbF9pY29uIHtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIGhlaWdodDogMjZweDtcbiAgICAgIHdpZHRoOiAxMnB4O1xuICAgICAgYmFja2dyb3VuZDogdXJsKFwne3tzX3NlcnZlcn19L2ltYWdlcy9leHRlbnNpb25zL2Jhcl9zZWVfYWxsLnBuZ1wnKSBuby1yZXBlYXQgNHB4IDhweDtcbiAgICAgIGZsb2F0OiByaWdodDtcbiAgICAgIG1hcmdpbi1sZWZ0OiAzcHg7XG4gICAgfVxuICAgIC5wcm9tb19xdWFuX2JveCAuZF9oZWFkIHNwYW57XG4gICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgIG1hcmdpbi1sZWZ0OiAxNHB4O1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICBjb2xvcjogIzAwMDtcbiAgICAgIG1hcmdpbi10b3A6IDZweDtcbiAgICB9XG4gICAgLnByb21vX3F1YW5fYm94IC5kX2hlYWQgc3Bhbjpob3ZlciB7XG4gICAgICBjb2xvcjogIzAwMDtcbiAgICB9XG4gICAgLnByb21vX3F1YW5fYm94IC5kX2hlYWQgYSB7XG4gICAgICBmbG9hdDogcmlnaHQ7XG4gICAgICB3aWR0aDogNjRweDtcbiAgICAgIGhlaWdodDogMjZweDtcbiAgICAgIG1hcmdpbi1yaWdodDogMjRweDtcbiAgICB9XG4gICAgLnByb21vX3F1YW5fYm94IC5wcm9tb19kaXYge1xuICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IGRhc2hlZCAjZTZlOWViO1xuICAgIH1cbiAgICAucHJvbW9fcXVhbl9ib3ggLnByb21vX2JvZHkge1xuICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGhlaWdodDogOTZweDtcbiAgICB9XG4gICAgI3Byb21vX3F1YW5fZGV0YWlsIC5wcm9tb19ib2R5IC5wcm9tb19pdGVtLCAjcHJvbW9fcXVhbl9kZXRhaWwgLnF1YW5faXRlbSB7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIGhlaWdodDogMzZweDtcbiAgICAgIHdpZHRoOiAyODBweDtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNWY1O1xuICAgICAgbWFyZ2luLWxlZnQ6IDIxcHg7XG4gICAgICBsaW5lLWhlaWdodDogMzZweDtcbiAgICAgIG1hcmdpbi10b3A6IDdweDtcbiAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIH1cbiAgICAjcHJvbW9fcXVhbl9kZXRhaWwgLnByb21vX2JvZHkgLnByb21vX2l0ZW06aG92ZXIsICNwcm9tb19xdWFuX2RldGFpbCAucXVhbl9pdGVtOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmMDc4NjA7XG4gICAgICBjb2xvcjogI2ZmZjtcbiAgICB9XG4gICAgLnByb21vX3F1YW5fYm94IC5wcm9tb19pdGVtIGVtICwgLnByb21vX3F1YW5fYm94IC5xdWFuX2l0ZW0gZW17XG4gICAgICBjb2xvcjogI2U0MzkzYztcbiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgbWFyZ2luOiAwIDJweDtcbiAgICB9XG4gICAgI3Byb21vX3F1YW5fZGV0YWlsIC5wcm9tb19ib2R5IC5wcm9tb19pdGVtOmhvdmVyIGVtICwgI3Byb21vX3F1YW5fZGV0YWlsIC5xdWFuX2l0ZW06aG92ZXIgZW17XG4gICAgICBjb2xvcjogI2ZmZjtcbiAgICB9XG4gICAgI3Byb21vX3F1YW5fZGV0YWlsIC5wcm9tb19ib2R5IC5wcm9tb19pdGVtOmhvdmVyIC5jaXJjbGUgLCAjcHJvbW9fcXVhbl9kZXRhaWwgLnF1YW5faXRlbTpob3ZlciAuY2lyY2xle1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICB9XG4gICAgLnByb21vX3F1YW5fYm94IC5wcm9tb19ib2R5IC5jaXJjbGUsIC5wcm9tb19xdWFuX2JveCAucXVhbl9pdGVtIC5jaXJjbGV7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIGhlaWdodDogOHB4O1xuICAgICAgd2lkdGg6IDhweDtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmMDc4NjA7XG4gICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICBtYXJnaW4tdG9wOiAxNHB4O1xuICAgICAgbWFyZ2luLWxlZnQ6IDEycHg7XG4gICAgICBtYXJnaW4tcmlnaHQ6IDhweDtcbiAgICB9XG4gICAgLnByb21vX3F1YW5fYm94IC5kZXRhaWxfcmlnaHQge1xuICAgICAgd2lkdGg6IDIwNnB4O1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgICAucXVhbl9ib2R5IHtcbiAgICAgIGhlaWdodDogODBweDtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgIH1cbiAgICAucXVhbl9ib2R5OmFmdGVyIHtcbiAgICAgIGNvbnRlbnQ6ICIiO1xuICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICBjbGVhcjogYm90aDtcbiAgICB9XG4gICAge3tpZiBuZXdfZXh0ZW5zaW9ufX1cbiAgICAgICNwcm9tb19xdWFuX2RldGFpbCBkaXYuZGV0YWlsX2xlZnQge1xuICAgICAgICB3aWR0aDogMzIycHg7XG4gICAgICB9XG4gICAgICAucHJvbW9fcXVhbl9ib3ggLnByb21vX2RpdiwgLnByb21vX3F1YW5fYm94IC5xdWFuX2RpdiB7XG4gICAgICAgIGhlaWdodDogMjUwcHg7XG4gICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgIH1cbiAgICAgIC5wcm9tb19xdWFuX2JveCAucHJvbW9fYm9keSB7XG4gICAgICAgIGhlaWdodDogMjIwcHg7XG4gICAgICB9XG4gICAge3svaWZ9fVxuICA8L3N0eWxlPlxuPC9kaXY+JwoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQllLmV4cG9ydHMgPSAnPGRpdiBpZD0icHJvbW9faXRlbV9hZCI+XG4gIDxhIGNsYXNzPSJpdGVtX2lkX2ltZyIgaHJlZj0ie3tpdGVtLnVybH19IiB0YXJnZXQ9Il9ibGFuayI+XG4gICAgPGltZyBzcmM9Int7aXRlbS5pbWd9fSI+XG4gIDwvYT5cbiAgPGEgaHJlZj0ie3tpdGVtLnVybH19IiBjbGFzcz0iaXRlbV90bGUiIHRhcmdldD0iX2JsYW5rIiB0aXRsZT0ie3tpdGVtLnRpdGxlfX0iPnt7aXRlbS50aXRsZX19PC9hPlxuICA8c3BhbiBjbGFzcz0iaXRlbV9icmFuZCI+e3tpdGVtLmJyYW5kfX08L3NwYW4+XG4gIDxhIGhyZWY9Int7aXRlbS5zdG9yZV91cmx9fSIgY2xhc3M9Iml0ZW1fc2hvcG5hbWUiIHRhcmdldD0iX2JsYW5rIj57e2lmIGl0ZW0ucGxhdGZvcm19fSB7e2l0ZW0ucGxhdGZvcm0gKyAiICJ9fSB7ey9pZn19e3tpdGVtLnN0b3JlX25hbWV9fTwvYT5cbiAgPHNwYW4gIGNsYXNzPSJ0dWlndWFuZ19saW5rIiA+54Ot5Y2WPC9zcGFuPlxuICA8c3R5bGUgdHlwZT0idGV4dC9jc3MiPlxuICAgICNwcm9tb19pdGVtX2FkIHtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIHdpZHRoOiAyMDZweDtcbiAgICAgIGhlaWdodDogMjQ4cHg7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgfVxuICAgICNwcm9tb19pdGVtX2FkPmEsICNwcm9tb19pdGVtX2FkPnNwYW4ge1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgIH1cbiAgICAjcHJvbW9faXRlbV9hZCAuaXRlbV9pZF9pbWcge1xuICAgICAgd2lkdGg6IDEwMHB4O1xuICAgICAgaGVpZ2h0OiAxMDBweDtcbiAgICAgIG1hcmdpbjogMCBhdXRvO1xuICAgICAgbWFyZ2luLXRvcDogMzVweDtcbiAgICB9XG4gICAgI3Byb21vX2l0ZW1fYWQgLml0ZW1faWRfaW1nIGltZyB7XG4gICAgICB3aWR0aDogMTAwcHg7XG4gICAgICBoZWlnaHQ6IDEwMHB4O1xuICAgIH1cbiAgICBkaXYjcHJvbW9faXRlbV9hZCBhLml0ZW1fdGxlIHtcbiAgICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICBjb2xvcjogIzExMTtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICBsaW5lLWhlaWdodDogMTZweDtcbiAgICAgIGhlaWdodDogMzNweDtcbiAgICB9XG4gICAgI3Byb21vX2l0ZW1fYWQgLml0ZW1fYnJhbmQge1xuICAgICAgY29sb3I6ICM2NjY7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGhlaWdodDogMjRweDtcbiAgICAgIGxpbmUtaGVpZ2h0OiAyNHB4O1xuICAgIH1cbiAgICAjcHJvbW9faXRlbV9hZCAuaXRlbV9zaG9wbmFtZSB7XG4gICAgICBjb2xvcjogIzMzMztcbiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIH1cbiAgICBkaXYjcHJvbW9faXRlbV9hZCBzcGFuLnR1aWd1YW5nX2xpbmsge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgY29sb3I6ICNiYmI7XG4gICAgICByaWdodDogMTBweDtcbiAgICAgIHRvcDogMTVweDtcbiAgICB9XG4gIDwvc3R5bGU+XG48L2Rpdj4nOwoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQllLmV4cG9ydHMgPSAnPGRpdiBpZD0iYmpkX3pvbF9wcm9tbyI+XG4gIDxzcGFuIGNsYXNzPSJiamQtcHJvbW8taGVhZCI+XG4gICAgPGVtPjwvZW0+XG4gICAgPHNwYW4+54Ot5Y2WPC9zcGFuPlxuICA8L3NwYW4+XG4gIDxkaXYgY2xhc3M9ImJqZC1wcm9tby1ib3giPlxuICAgIHt7ZWFjaCBkYXRhfX1cbiAgICAgIDxhIGhyZWY9Int7JHZhbHVlLnVybH19IiB0YXJnZXQ9Il9ibGFuayIgdGl0bGU9Int7JHZhbHVlLnB1cmV0bGV9fSI+e3sjJHZhbHVlLnRpdGxlfX08L2E+XG4gICAge3svZWFjaH19XG4gIDwvZGl2PlxuICA8c3R5bGUgdHlwZT0idGV4dC9jc3MiPlxuICAgIC5mZWVkYmFjayB7XG4gICAgICBtYXJnaW4tdG9wOiAtNTBweCFpbXBvcnRhbnQ7XG4gICAgfVxuICA8L3N0eWxlPlxuPC9kaXY+JwoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCwgaSkgewoJCQkidXNlIHN0cmljdCI7CgoJCQlmdW5jdGlvbiBhKGUpIHsKCQkJCXZhciBhID0gImh0dHBzOi8vd3d3Lmd3ZGFuZy5jb20vcHJvbW90aW9uL3ByaWNlP2tleXdvcmQ9IiArIGIua2V5d29yZCArICImZXh0PTEmY2xhc3NfaWQ9IiArIGIuY2xhc3NfaWQsCgkJCQkJbyA9IG4oMTg5KTsKCQkJCXQoIiMiICsgaS5leHROYW1lICsgIi1tYWluIikuYXBwZW5kKF8uY29tcGlsZShvKSh7CgkJCQkJcmVtbzogIuabtOWkmuWkhOS6juWOhuWPsuacgOS9juS7t+eahOWQjOexu+WVhuWTgSIsCgkJCQkJZGF0YTogZS5zbGljZSgwLCAzKSwKCQkJCQlleHROYW1lOiBpLmV4dE5hbWUsCgkJCQkJZXh0QnJhbmQ6IGkuZXh0QnJhbmQsCgkJCQkJc19zZXJ2ZXI6IGkuc19zZXJ2ZXIsCgkJCQkJbG93VXJsOiBhCgkJCQl9KSksIG4oMTI4KS5yZW5kZXJMb3dlc3RBZChmLmNsYXNzX2lkLCBmLmNvcmV3b3JkKSwgdCgiIyIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmkiKS5zaG93KCkKCQkJfQoKCQkJZnVuY3Rpb24gbyhlKSB7CgkJCQl2YXIgYSA9ICJodHRwczovL3d3dy5nd2RhbmcuY29tL3Byb21vdGlvbi9wcmljZT9rZXl3b3JkPSIgKyBiLmtleXdvcmQgKyAiJmV4dD0xJmNsYXNzX2lkPSIgKyBiLmNsYXNzX2lkLAoJCQkJCW8gPSBuKDE4OSk7CgkJCQl0KCIjYmpkX2JvdHRvbV9kZXRhaWwiKS5hcHBlbmQoXy5jb21waWxlKG8pKHsKCQkJCQlyZW1vOiAi5pu05aSa5aSE5LqO5Y6G5Y+y5pyA5L2O5Lu355qE5ZCM57G75ZWG5ZOBIiwKCQkJCQlkYXRhOiBlLnNsaWNlKDAsIDMpLAoJCQkJCWV4dE5hbWU6IGkuZXh0TmFtZSwKCQkJCQlleHRCcmFuZDogaS5leHRCcmFuZCwKCQkJCQlzX3NlcnZlcjogaS5zX3NlcnZlciwKCQkJCQlsb3dVcmw6IGEKCQkJCX0pKSwgdCgiLmNvbS1sb3dwcmkiKS5zaG93KCkKCQkJfQoKCQkJZnVuY3Rpb24gcihlKSB7CgkJCQllLmhpZ2hlc3RfcHJpY2UgPSBlLmxhc3RfcHJpY2UsIGUubGFzdF9wcmljZSA9IGUubGFzdF9wcmljZS50b1N0cmluZygpLnNwbGl0KCIuIilbMF0KCQkJfQoKCQkJZnVuY3Rpb24gcyhlKSB7CgkJCQl2YXIgdCA9IG4oMTgpOwoJCQkJZS5sZW5ndGggPiAzMCAmJiAoZSA9IGUuc2xpY2UoMCwgMzApKTsKCQkJCWZvciAodmFyIGEgPSAwOyBhIDwgZS5sZW5ndGg7IGErKykgewoJCQkJCXIoZVthXSk7CgkJCQkJdmFyIG8gPSB7CgkJCQkJCXNpdGVfaWQ6IGVbYV0uc2l0ZV9pZCwKCQkJCQkJdXJsOiBlW2FdLnVybCwKCQkJCQkJbW9kOiAienVpZGlqaWEiLAoJCQkJCQl1bmlvbjogaS51bmlvbi5zcGxpdCgiXyIpWzFdLAoJCQkJCQlkcF9pZDogZVthXS51cmxfY3JjICsgIi0iICsgZVthXS5zaXRlX2lkCgkJCQkJfTsKCQkJCQllW2FdLnVybCA9IHQuaW5pdChvKQoJCQkJfQoJCQkJcmV0dXJuIGUKCQkJfQoKCQkJZnVuY3Rpb24gbCgpIHsKCQkJCWkuZml4V2lkdGgoKSwgdCgiIyIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmkiKS5vbigibW91c2VlbnRlciIsIGZ1bmN0aW9uKCkgewoJCQkJCXQodGhpcykuYWRkQ2xhc3MoaS5leHRCcmFuZCArICJfbG93cHJpX2hvdmVyIiksIHcoInByb2R1Y3RfcGFnZV9sb3dlc3Rfc2hvdyIpLCB0KCIjIiArIGkuZXh0QnJhbmQgKyAiX2xvd3ByaV9kZXRhaWwiKS5jc3MoImxlZnQiLCB0KCIjIiArIGkuZXh0QnJhbmQgKyAiX2xvd3ByaSIpLm9mZnNldCgpLmxlZnQgKyAicHgiKS5jc3MoInJpZ2h0IiwgImF1dG8iKSwgdCgiIyIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmlfZGV0YWlsIC5hbGwtcHJvZHVjdHMiKS5jc3MoIndpZHRoIiwgeSAtIDgwKSwgdCgiIyIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmlfZGV0YWlsIikuc2hvdygpLCB0KHdpbmRvdykud2lkdGgoKSAtICh0KCIjIiArIGkuZXh0QnJhbmQgKyAiX2xvd3ByaV9kZXRhaWwiKS5vZmZzZXQoKS5sZWZ0ICsgdCgiIyIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmlfZGV0YWlsIikub3V0ZXJXaWR0aCgpICsgMikgPCAwICYmIHQoIiMiICsgaS5leHRCcmFuZCArICJfbG93cHJpX2RldGFpbCIpLmNzcygicmlnaHQiLCAiMHB4IikuY3NzKCJsZWZ0IiwgImF1dG8iKSwgKGkuSUU3IHx8IGkuSUU4KSAmJiB0KHdpbmRvdykud2lkdGgoKSA8IDE1MDAgJiYgdCgiIyIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmlfZGV0YWlsIikuY3NzKCJyaWdodCIsICIwcHgiKS5jc3MoImxlZnQiLCAiYXV0byIpCgkJCQl9KSwgdCgiIyIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmkiKS5vbigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gdGhpczsKCQkJCQlnID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJdChlKS5yZW1vdmVDbGFzcyhpLmV4dEJyYW5kICsgIl9sb3dwcmlfaG92ZXIiKSwgdCgiIyIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmlfZGV0YWlsIikuaGlkZSgpCgkJCQkJfSwgMjAwKQoJCQkJfSksIHQoIiMiICsgaS5leHRCcmFuZCArICJfbG93cHJpX2RldGFpbCIpLm9uKCJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7CgkJCQkJY2xlYXJUaW1lb3V0KGcpCgkJCQl9KSwgdCgiIyIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmlfZGV0YWlsIikub24oIm1vdXNlbGVhdmUiLCBmdW5jdGlvbigpIHsKCQkJCQl0KCIjIiArIGkuZXh0QnJhbmQgKyAiX2xvd3ByaSIpLnJlbW92ZUNsYXNzKGkuZXh0QnJhbmQgKyAiX2xvd3ByaV9ob3ZlciIpLCB0KHRoaXMpLmhpZGUoKQoJCQkJfSksIHQoIiMiICsgaS5leHRCcmFuZCArICJfbG93cHJpX2RldGFpbCIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCXcoInByb2R1Y3RfcGFnZV9sb3dlc3RfY2xpY2siKQoJCQkJfSksIHQoIiMiICsgaS5leHRCcmFuZCArICJfbG93cHJpX2RldGFpbCAubGVmdC1wYWdlIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJaS5jaGFuZ2VfcGFnZSgibG93cHJpIiwgLTEpCgkJCQl9KSwgdCgiIyIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmlfZGV0YWlsIC5yaWdodC1wYWdlIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJaS5jaGFuZ2VfcGFnZSgibG93cHJpIiwgMSkKCQkJCX0pCgkJCX0KCgkJCWZ1bmN0aW9uIGMoKSB7CgkJCQl0KCIuY29tLWxvd3ByaSIpLm9uKCJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7CgkJCQkJY2xlYXJUaW1lb3V0KGcpLCB3KCJwcm9kdWN0X3BhZ2VfbG93ZXN0X3Nob3ciKSwgdCh0aGlzKS5hZGRDbGFzcygibXNob3ZlciIpLCB0KCIjIiArIGkuZXh0QnJhbmQgKyAiX2xvd3ByaV9kZXRhaWwiKS5zaG93KCkKCQkJCX0pLCB0KCIuY29tLWxvd3ByaSIpLm9uKCJtb3VzZWxlYXZlIiwgZnVuY3Rpb24oKSB7CgkJCQkJY2xlYXJUaW1lb3V0KGcpOwoJCQkJCXZhciBlID0gdGhpczsKCQkJCQlnID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJdCgiIyIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmlfZGV0YWlsIikuaGlkZSgpLCB0KGUpLnJlbW92ZUNsYXNzKCJtc2hvdmVyIikKCQkJCQl9LCAyMDApCgkJCQl9KSwgdCgiIyIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmlfZGV0YWlsIikub24oIm1vdXNlZW50ZXIiLCBmdW5jdGlvbigpIHsKCQkJCQljbGVhclRpbWVvdXQoZyksIHQodGhpcykuc2hvdygpCgkJCQl9KSwgdCgiIyIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmlfZGV0YWlsIikub24oIm1vdXNlbGVhdmUiLCBmdW5jdGlvbigpIHsKCQkJCQl0KHRoaXMpLmhpZGUoKSwgdCgiLmNvbS1sb3dwcmkiKS5yZW1vdmVDbGFzcygibXNob3ZlciIpCgkJCQl9KSwgdCgiIyIgKyBpLmV4dEJyYW5kICsgIl9sb3dwcmlfZGV0YWlsIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJdygicHJvZHVjdF9wYWdlX2xvd2VzdF9jbGljayIpCgkJCQl9KQoJCQl9CgoJCQlmdW5jdGlvbiBkKGUpIHsKCQkJCWZvciAodmFyIHQgPSBzKGUuZGF0YSksIG4gPSAwOyBuIDwgdC5sZW5ndGg7IG4rKykgdFtuXS5kaXNjb3VudCA9ICgxMCAqIHRbbl0uZGlzY291bnQpLnRvRml4ZWQoMSk7CgkJCQkidG9wIiA9PSBpLnN0eWxlICYmIChhKHQpLCBsKCkpLCAiYm90dG9tIiA9PSBpLnN0eWxlICYmIChvKHQpLCBjKCkpLCAibHV5b3UiID09PSBpLmJ0eXBlICYmICJobmR4IiAhPT0gaS5mcm9tX2RldmljZSAmJiB2LmluaXQoZiwgZSkKCQkJfQoKCQkJZnVuY3Rpb24gcCgpIHsKCQkJCXZhciBlID0gJzxhIGlkPSInICsgaS5leHRCcmFuZCArICdfbG93cHJpIiA+PHNwYW4gY2xhc3M9Imxvd3ByaV9pY29uIG5ld2ItYmciPjwvc3Bhbj48c3BhbiBjbGFzcz0ibG93cHJpX3RleHQiPuabtOWkmuWQjOexu+S9juS7tzwvc3Bhbj48L2E+JzsKCQkJCXQoIiNyaWdodF9pbmZvIikuYXBwZW5kKF8uY29tcGlsZShlKSh7fSkpCgkJCX0KCgkJCWZ1bmN0aW9uIGgoKSB7CgkJCQkidG9wIiA9PSBpLnN0eWxlICYmIHAoKQoJCQl9CgoJCQlmdW5jdGlvbiB1KGUsIGEsIG8pIHsKCQkJCXZhciByID0gaS5kcC5wcmljZSB8fCAwLAoJCQkJCXMgPSBuKDcxKTsKCQkJCSFyICYmIHMuZ2V0KCJkcF9kYXRhIikgJiYgcy5nZXQoImRwX2RhdGEiKS5ub3cgJiYgKHIgPSBzLmdldCgiZHBfZGF0YSIpLm5vdy5wcmljZSksIHIgfHwgKHIgPSAwKSwgInN1bmluZyIgPT0gaS5zaXRlICYmIHQoIi5tYWlucHJpY2UiKS5lcSgwKS50ZXh0KCkuaW5kZXhPZigiPyIpID4gLTEgJiYgKHIgPSAwKSwgYi5rZXl3b3JkID0gZW5jb2RlVVJJQ29tcG9uZW50KHMuZ2V0KCJkcF9kYXRhIikubm93LmNvcmV3b3JkIHx8ICIiKSwgYi5jbGFzc19pZCA9IGU7CgkJCQl2YXIgbCA9IGkuc2VydmVyICsgIi9leHRlbnNpb24/YWM9cHJpY2VfYjJjX2xvd2VzdCZjbGFzc19pZD0gIiArIGUgKyAiJnNpdGVfaWQ9IiArIGEgKyAiJnByaWNlPSIgKyByICsgIiZrZXl3b3JkPSIgKyBlbmNvZGVVUklDb21wb25lbnQocy5nZXQoImRwX2RhdGEiKS5ub3cuY29yZXdvcmQgfHwgIiIpOwoJCQkJeC5nZXQobCkuZG9uZShmdW5jdGlvbihlKSB7CgkJCQkJZSAmJiAwICE9IGUuZGF0YS5sZW5ndGggPyBvKGUpIDogKHQoIiMiICsgaS5leHRCcmFuZCArICJfbG93cHJpIikucmVtb3ZlKCksICJsdXlvdSIgPT09IGkuYnR5cGUgJiYgImhuZHgiICE9PSBpLmZyb21fZGV2aWNlICYmIHYuaW5pdChmLCBlKSkKCQkJCX0pLmZhaWwoZnVuY3Rpb24oZSkgewoJCQkJCXQoIiMiICsgaS5leHRCcmFuZCArICJfbG93cHJpIikucmVtb3ZlKCksICJsdXlvdSIgPT09IGkuYnR5cGUgJiYgImhuZHgiICE9PSBpLmZyb21fZGV2aWNlICYmIHYuaW5pdChmLCBudWxsKQoJCQkJfSkKCQkJfQoKCQkJZnVuY3Rpb24gbShlKSB7CgkJCQl2YXIgdCA9IDA7CgkJCQlyZXR1cm4gIjAiICE9IGUuc2l0ZV9pZCA/IHQgPSBlLnNpdGVfaWQgOiAiMCIgIT0gZS5ub3dfZHBfaWQgJiYgIiIgIT0gZS5ub3dfZHBfaWQgJiYgKHQgPSBlLm5vd19kcF9pZC5zcGxpdCgiLSIpWzFdKSwgdAoJCQl9CgkJCXZhciBmLCBnLCBfID0gbigxNiksCgkJCQl4ID0gbig5KSwKCQkJCXcgPSBuKDI2KSwKCQkJCXYgPSBuKDE4NCksCgkJCQliID0ge30sCgkJCQl5ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoID4gMCA/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCA6IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGg7CgkJCWUuZXhwb3J0cy5nZXRQYWdlSW5mbyA9IGZ1bmN0aW9uKGUpIHsKCQkJCXZhciB0ID0ge30sCgkJCQkJbiA9IGkuZ2V0Rml4ZWRTaG93UHJvZHVjdE51bSgpLAoJCQkJCWEgPSBlLmxlbmd0aDsKCQkJCXJldHVybiBhID49IG4gPyAodC5wYWdlcyA9ICEwLCB0LnBhZ2V3aWR0aCA9IHkgLSAyKSA6ICh0LnBhZ2VzID0gITEsIHQucGFnZXdpZHRoID0gMjAwICogYSArIDIpLCB0LmRwbnVtID0gYSwgdC5wYWdlbnVtID0gYSAlIG4gPT0gMCA/IHBhcnNlSW50KGEgLyBuKSA6IHBhcnNlSW50KGEgLyBuICsgMSksIHQucGVyUGFnZVNpemUgPSBuLCB0CgkJCX0sIGUuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oZSkgewoJCQkJaWYgKGYgPSBlLCAhaS5hbGlTaXRlICYmICJ2aXBzaG9wIiAhPSBpLnNpdGUpIHsKCQkJCQl2YXIgdCA9IG0oZSk7CgkJCQkJcmV0dXJuIDAgPT0gdCA/IHZvaWQoImx1eW91IiA9PT0gaS5idHlwZSAmJiAiaG5keCIgIT09IGkuZnJvbV9kZXZpY2UgJiYgdi5pbml0KGYsIG51bGwpKSA6IHZvaWQoaS5JRTYgfHwgKGgoKSwgdShlLmNsYXNzX2lkLCB0LCBkKSkpCgkJCQl9CgkJCX0KCQl9KS5jYWxsKHQsIG4oNiksIG4oMSkpCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCShmdW5jdGlvbih0LCBpKSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJdmFyIGEgPSBuKDE4NSksCgkJCQlvID0gbigxOSksCgkJCQlyID0gbigxNCksCgkJCQlzID0gbigxMyksCgkJCQlsID0gbigxODYpLAoJCQkJYyA9IG4oMTYpLAoJCQkJZCA9IG4oMTcpLAoJCQkJcCA9IG4oOSksCgkJCQloID0ge30sCgkJCQl1ID0ge30sCgkJCQltID0gewoJCQkJCSIzNjBidXkiOiB7CgkJCQkJCSIjZml0dGluZy1zdWl0IjogWyIjZml0dGluZy1zdWl0IiwgImJlZm9yZSJdLAoJCQkJCQkiI2ZpdHRpbmdzIjogWyIjZml0dGluZ3MiLCAiYmVmb3JlIl0sCgkJCQkJCSIjc2hvcFJlY1N1aXQiOiBbIiNzaG9wUmVjU3VpdCIsICJiZWZvcmUiXQoJCQkJCX0sCgkJCQkJIjM2MGJ1eS1yZSI6IHsKCQkJCQkJIiNzaW1pbGFyX2dvb2RzIjogWyIjc2ltaWxhcl9nb29kcyIsICJwcmVwZW5kIl0KCQkJCQl9LAoJCQkJCWFtYXpvbjogewoJCQkJCQkiI2J1eXhnZXR5X2ZlYXR1cmVfZGl2IjogWyIjYnV5eGdldHlfZmVhdHVyZV9kaXYiLCAiYmVmb3JlIl0sCgkJCQkJCSIjcmhmLWNvbnRhaW5lciAucmhmLWJvcmRlciI6IFsiI3JoZi1jb250YWluZXIgLnJoZi1ib3JkZXIiLCAiYmVmb3JlIl0sCgkJCQkJCSIjZmFsbGJhY2tzZXNzaW9uLXNpbXMtZmVhdHVyZSI6IFsiI2ZhbGxiYWNrc2Vzc2lvbi1zaW1zLWZlYXR1cmUiLCAiYmVmb3JlIl0KCQkJCQl9LAoJCQkJCSI1MWJ1eSI6IHsKCQkJCQkJIi5ncmlkX2MxIC54dGllaW4iOiBbIi5ncmlkX2MxIC54dGllaW4iLCAiYmVmb3JlIl0KCQkJCQl9LAoJCQkJCXN1bmluZzogewoJCQkJCQkiI2FjY2Vzc29yeUluZm8iOiBbIiNhY2Nlc3NvcnlJbmZvIiwgInByZXBlbmQiXSwKCQkJCQkJIiNsaXN0UHJvQ29udGVudCI6IFsiI2xpc3RQcm9Db250ZW50IiwgInByZXBlbmQiXSwKCQkJCQkJIi53cmFwcGVyIC5wcm9jb24tc2lkZSI6IFsiLndyYXBwZXIgLnByb2Nvbi1zaWRlIiwgImJlZm9yZSJdCgkJCQkJfSwKCQkJCQlkYW5nZGFuZzogewoJCQkJCQkiI21haW5fYmQgLnNob3ciOiBbIiNtYWluX2JkIC5zaG93IiwgImFmdGVyIl0sCgkJCQkJCSIjbWFpbl9iZCAucHJvZHVjdF9tYWluIjogWyIjbWFpbl9iZCAucHJvZHVjdF9tYWluIiwgImFmdGVyIl0KCQkJCQl9LAoJCQkJCWdvbWU6IHsKCQkJCQkJIiNnbS1vdGhlci1pbmZvIjogWyIjZ20tb3RoZXItaW5mbyIsICJwcmVwZW5kIl0KCQkJCQl9LAoJCQkJCXlpaGFvZGlhbjogewoJCQkJCQkiLmZtX2RldGFpbF9vbmUiOiBbIi5mbV9kZXRhaWxfb25lIiwgImFmdGVyIl0KCQkJCQl9LAoJCQkJCWp1bWVpOiB7CgkJCQkJCSIubGF5b3V0XzEwOTAgLmRlYWxfY29udGVudCI6IFsiLmxheW91dF8xMDkwIC5kZWFsX2NvbnRlbnQiLCAiYWZ0ZXIiXSwKCQkJCQkJIi5tYWxsX2RldGFpbF93cmFwIjogWyIubWFsbF9kZXRhaWxfd3JhcCIsICJhcHBlbmQiXQoJCQkJCX0sCgkJCQkJdm1hbGw6IHsKCQkJCQkJIiNncm91cC1hcmVhKy5oci0yMCsubGF5b3V0IjogWyIjZ3JvdXAtYXJlYSsuaHItMjArLmxheW91dCIsICJwcmVwZW5kIl0KCQkJCQl9LAoJCQkJCWZlaW5pdTogewoJCQkJCQkiI3RyYWNrZXJfaXRlbSAucHJvZHVjdC1hYm91dCI6IFsiI3RyYWNrZXJfaXRlbSAucHJvZHVjdC1hYm91dCIsICJiZWZvcmUiXQoJCQkJCX0sCgkJCQkJeW91Z291OiB7CgkJCQkJCSIjZ29vZHNDb250YWluZXIrcCI6IFsiI2dvb2RzQ29udGFpbmVyK3AiLCAiYWZ0ZXIiXQoJCQkJCX0sCgkJCQkJa2FvbGE6IHsKCQkJCQkJIi5QSW5mb1dyYXAiOiBbIi5QSW5mb1dyYXAiLCAiYWZ0ZXIiXQoJCQkJCX0sCgkJCQkJdmlwc2hvcDogewoJCQkJCQkiI0otRlctZGV0YWlsIC5NLWRldGFpbCI6IFsiI0otRlctZGV0YWlsIC5NLWRldGFpbCIsICJiZWZvcmUiXQoJCQkJCX0sCgkJCQkJd29tYWk6IHsKCQkJCQkJIi5kZXRhaWxfbWFpbiI6IFsiLmRldGFpbF9tYWluIiwgInByZXBlbmQiXSwKCQkJCQkJIi5kZXRhaWxlZCI6IFsiLmRldGFpbGVkIiwgImJlZm9yZSJdCgkJCQkJfSwKCQkJCQlqaXV4aWFuOiB7CgkJCQkJCSIuZGV0YWlsLWJveDIiOiBbIi5kZXRhaWwtYm94MiIsICJiZWZvcmUiXQoJCQkJCX0sCgkJCQkJc2Vjb286IHsKCQkJCQkJIiNzaG93QWRkcyI6IFsiI3Nob3dBZGRzIiwgImJlZm9yZSJdCgkJCQkJfSwKCQkJCQl3YmlhbzogewoJCQkJCQkiI2hpc3RvcnlfYnV5IjogWyIjaGlzdG9yeV9idXkiLCAiYmVmb3JlIl0KCQkJCQl9LAoJCQkJCXNmYmVzdDogewoJCQkJCQkiLm1haW4tYm94IjogWyIubWFpbi1ib3giLCAiYmVmb3JlIl0KCQkJCQl9LAoJCQkJCW1peWFiYW9iZWk6IHsKCQkJCQkJIi5wb3Bwcm8gLmJmZF9kaXYiOiBbIi5wb3Bwcm8gLmJmZF9kaXYiLCAiYmVmb3JlIl0KCQkJCQl9LAoJCQkJCWZlbmdxdTogewoJCQkJCQkiI3JlY29tbWVuZCI6IFsiI3JlY29tbWVuZCIsICJiZWZvcmUiXQoJCQkJCX0sCgkJCQkJZWhhaWVyOiB7CgkJCQkJCSIucHJvZHVjdC1kZXRhaWxzLWJveCI6IFsiLnByb2R1Y3QtZGV0YWlscy1ib3giLCAiYmVmb3JlIl0KCQkJCQl9LAoJCQkJCXpvbDogewoJCQkJCQkiI0pfUmVjb21tZW5kZWREaXN0cmlidXRvciI6IFsiI0pfUmVjb21tZW5kZWREaXN0cmlidXRvciIsICJiZWZvcmUiXSwKCQkJCQkJIi5wcm9kdWN0LWRldGFpbC1ib3giOiBbIi5wcm9kdWN0LWRldGFpbC1ib3giLCAiYWZ0ZXIiXQoJCQkJCX0KCQkJCX0sCgkJCQlmID0gZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSBtW3Quc2l0ZV07CgkJCQkJZm9yICh2YXIgbiBpbiBlKQoJCQkJCQlpZiAoaShuKS5sZW5ndGggPiAwKSB7CgkJCQkJCQlpZiAoInByZXBlbmQiID09IGVbbl1bMV0gJiYgIm5vbmUiID09IGkobikuY3NzKCJkaXNwbGF5IikpIGNvbnRpbnVlOwoJCQkJCQkJcmV0dXJuIGVbbl0KCQkJCQkJfQoJCQkJCXJldHVybiAhMQoJCQkJfSwKCQkJCWcgPSBmdW5jdGlvbihlLCB0LCBuKSB7CgkJCQkJc3dpdGNoIChuKSB7CgkJCQkJCWNhc2UgImJlZm9yZSI6CgkJCQkJCQlpKHQpLmJlZm9yZShlKTsKCQkJCQkJCWJyZWFrOwoJCQkJCQljYXNlICJhcHBlbmQiOgoJCQkJCQkJaSh0KS5hcHBlbmQoZSk7CgkJCQkJCQlicmVhazsKCQkJCQkJY2FzZSAiYWZ0ZXIiOgoJCQkJCQkJaSh0KS5hZnRlcihlKTsKCQkJCQkJCWJyZWFrOwoJCQkJCQljYXNlICJwcmVwZW5kIjoKCQkJCQkJCWkodCkucHJlcGVuZChlKQoJCQkJCX0KCQkJCX0sCgkJCQlfID0gZnVuY3Rpb24oZSkgewoJCQkJCXZhciBuID0gaSgiIyIgKyB0LmV4dEJyYW5kICsgIl9pbm5lcl8iICsgZS50eXBlICsgIiAuIiArIHQuZXh0QnJhbmQgKyAiX2lubmVyX2NvbnRlbnQiKS53aWR0aCgpLAoJCQkJCQlhID0gaSgiLmlubmVyX3BhZ2VfbGVmdCIpLndpZHRoKCksCgkJCQkJCW8gPSBuIC0gMiAqIGEgLSA0OwoJCQkJCWkoIiMiICsgdC5leHRCcmFuZCArICJfaW5uZXJfIiArIGUudHlwZSArICIgLmlubmVyX3Byb19saXN0Iikud2lkdGgobyksIHgobywgZSkKCQkJCX0sCgkJCQl4ID0gZnVuY3Rpb24oZSwgbikgewoJCQkJCWUgPSBlIHx8IDA7CgkJCQkJdmFyIGEgPSBuLmRhdGEubGVuZ3RoIHx8IDAsCgkJCQkJCW8gPSBwYXJzZUludChlIC8gMTkyKSwKCQkJCQkJciA9IGEgJSBvID09IDAgPyBhIC8gbyA6IHBhcnNlSW50KGEgLyBvKSArIDE7CgkJCQkJbi50b3RhbCA9IHIsIG4ucGVyID0gbywgbi5jb253ID0gZSwgaSgiIyIgKyB0LmV4dEJyYW5kICsgIl9pbm5lcl8iICsgbi50eXBlICsgIiAudG90YWxfcGFnZSIpLnRleHQociksIDEgPT0gciAmJiBpKCIjIiArIHQuZXh0QnJhbmQgKyAiX2lubmVyXyIgKyBuLnR5cGUgKyAiIC4iICsgdC5leHRCcmFuZCArICJfaW5uZXJfY29udGVudCAudHVybnBhZ2UiKS5jc3MoInZpc2liaWxpdHkiLCAiaGlkZGVuIikKCQkJCX0sCgkJCQl3ID0gZnVuY3Rpb24oZSwgbikgewoJCQkJCXZhciBpID0gZigpOwoJCQkJCWlmIChpICE9PSAhMSAmJiAwICE9IG4ubGVuZ3RoKSB7CgkJCQkJCXUuZGF0YSA9IG4sIHUudHlwZSA9IGU7CgkJCQkJCXZhciBvID0gYy5jb21waWxlKGEpKHsKCQkJCQkJCWRhdGE6IG4sCgkJCQkJCQl0eXBlOiBlLAoJCQkJCQkJbnVtOiBuLmxlbmd0aCwKCQkJCQkJCXNfc2VydmVyOiB0LnNfc2VydmVyLAoJCQkJCQkJbmV3X2V4dGVuc2lvbjogdC5uZXdfZXh0ZW5zaW9uLAoJCQkJCQkJZXh0TmFtZTogdC5leHROYW1lLAoJCQkJCQkJc2V0dGluZzogdC5zZXJ2ZXIgKyAiL2Jyd2V4dC9zZXR0aW5nX2ZlZWRiYWNrP3NldD0xIiwKCQkJCQkJCWV4dEJyYW5kOiB0LmV4dEJyYW5kCgkJCQkJCX0pOwoJCQkJCQlnKG8sIGlbMF0sIGlbMV0pLCBzLmxvZygi5bWM5YWl6aG16Z2i5ZCM57G75Y6G5Y+y5pyA5L2O5Lu35bGV546wIiksIF8odSksIGooMSwgdSksIGIodSkKCQkJCQl9CgkJCQl9LAoJCQkJdiA9IGZ1bmN0aW9uKGUsIG4pIHsKCQkJCQl2YXIgbyA9IGYoKTsKCQkJCQlpZiAobyAhPT0gITEgJiYgMCAhPSBuLmxlbmd0aCkgewoJCQkJCQloLmRhdGEgPSBuLCBoLnR5cGUgPSBlOwoJCQkJCQl2YXIgciA9IGMuY29tcGlsZShhKSh7CgkJCQkJCQlkYXRhOiBuLAoJCQkJCQkJdHlwZTogZSwKCQkJCQkJCW51bTogbi5sZW5ndGgsCgkJCQkJCQlzX3NlcnZlcjogdC5zX3NlcnZlciwKCQkJCQkJCW5ld19leHRlbnNpb246IHQubmV3X2V4dGVuc2lvbiwKCQkJCQkJCWV4dE5hbWU6IHQuZXh0TmFtZSwKCQkJCQkJCWV4dEJyYW5kOiB0LmV4dEJyYW5kCgkJCQkJCX0pOwoJCQkJCQlpKCIuIiArIHQuZXh0QnJhbmQgKyAiX2lubmVyX2xvd3ByaWNlIikubGVuZ3RoID4gMCA/IGkoIi4iICsgdC5leHRCcmFuZCArICJfaW5uZXJfbG93cHJpY2UiKS5iZWZvcmUocikgOiBnKHIsIG9bMF0sIG9bMV0pLCBfKGgpLCBqKDEsIGgpLCBzLmxvZygi5bWM5YWl6aG16Z2i54yc5L2g5Zac5qyi5bGV546wIiksIGIoaCkKCQkJCQl9CgkJCQl9LAoJCQkJYiA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlpKCIjIiArIHQuZXh0QnJhbmQgKyAiX2lubmVyXyIgKyBlLnR5cGUgKyAiIC5pbm5lcl9wYWdlX2xlZnQiKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQkJUygtMSwgZSkKCQkJCQl9KSwgaSgiIyIgKyB0LmV4dEJyYW5kICsgIl9pbm5lcl8iICsgZS50eXBlICsgIiAuaW5uZXJfcGFnZV9yaWdodCIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQlTKDEsIGUpCgkJCQkJfSksIGkoIiMiICsgdC5leHRCcmFuZCArICJfaW5uZXJfbG93IGxpIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCXMubG9nKCLltYzlhaXpobXpnaLlkIznsbvljoblj7LmnIDkvY7ku7fngrnlh7siKQoJCQkJCX0pLCBpKCIjIiArIHQuZXh0QnJhbmQgKyAiX2lubmVyX2Zhdm9yIGxpIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCXMubG9nKCLltYzlhaXpobXpnaLnjJzkvaDllpzmrKLngrnlh7siKQoJCQkJCX0pCgkJCQl9LAoJCQkJeSA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlmb3IgKHZhciB0ID0gMDsgdCA8IGUubGVuZ3RoOyB0KyspIGVbdF0ubmV3ZGlzY291bnQgPSBlW3RdLmRpc2NvdW50LCBlW3RdLmhpZ2hlc3QgPSBlW3RdLmhpZ2hlc3RfcHJpY2U7CgkJCQkJcmV0dXJuIGUKCQkJCX0sCgkJCQlrID0gZnVuY3Rpb24oZSkgewoJCQkJCWZvciAodmFyIHQgPSBlLmxlbmd0aCB8fCAwLCBuID0gMDsgdCA+IG47IG4rKykgewoJCQkJCQl2YXIgaSA9IChOdW1iZXIoZVtuXS5wcmljZSkgLyAxMDApLnRvU3RyaW5nKCk7IC0gMSA9PSBpLmluZGV4T2YoIi4iKSA/IGVbbl0ucHJpY2UgPSBpICsgIi4wMCIgOiBpLm1hdGNoKC9cLlswLTldezJ9LykgPyBlW25dLnByaWNlID0gaSA6IGVbbl0ucHJpY2UgPSBpICsgIjAiCgkJCQkJfQoJCQkJCXJldHVybiBlCgkJCQl9LAoJCQkJeiA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlpZiAoZS5wZXIgJiYgMCAhPSBlLnBlcikgewoJCQkJCQl2YXIgbiA9IGUuY29udyAtIDE5MiAqIGUucGVyLAoJCQkJCQkJYSA9IHBhcnNlSW50KG4gLyA0KTsKCQkJCQkJaSgiIyIgKyB0LmV4dEJyYW5kICsgIl9pbm5lcl8iICsgZS50eXBlICsgJyAuaW5uZXJfcHJvX2xpc3QgbGk6bm90KCIubGlfZmlyc3QiKScpLmNzcygibWFyZ2luLWxlZnQiLCBhICsgMTIgKyAicHgiKQoJCQkJCX0KCQkJCX0sCgkJCQlCID0gZnVuY3Rpb24oZSkgewoJCQkJCWZvciAodmFyIHQgPSAwOyBlID4gdDsgdCsrKSB7CgkJCQkJCXZhciBuID0gaSgiI2d3ZF9pbm5lcl9mYXZvciAuaXRlbV9pbWcgaW1nIikuZXEodCk7CgkJCQkJCWwuY2hlY2tpbWcobi5hdHRyKCJzcmMiKSwgbiwgMTcwKQoJCQkJCX0KCQkJCX0sCgkJCQlqID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJCXZhciBuID0gdC5kYXRhLnNsaWNlKChlIC0gMSkgKiB0LnBlciwgZSAqIHQucGVyKTsKCQkJCQlDKG4sIHQpCgkJCQl9LAoJCQkJQyA9IGZ1bmN0aW9uKGUsIG4pIHsKCQkJCQl2YXIgYSA9IGMuY29tcGlsZShvKSh7CgkJCQkJCWRhdGE6IGUsCgkJCQkJCXNfc2VydmVyOiB0LnNfc2VydmVyCgkJCQkJfSk7CgkJCQkJaSgiIyIgKyB0LmV4dEJyYW5kICsgIl9pbm5lcl8iICsgbi50eXBlICsgIiAuaW5uZXJfcHJvX2xpc3QgLiIgKyB0LmV4dEJyYW5kICsgIl8iICsgbi50eXBlICsgIl9saXN0IikuZW1wdHkoKS5hcHBlbmQoYSksIEIoZS5sZW5ndGgpLCB6KG4pCgkJCQl9LAoJCQkJUyA9IGZ1bmN0aW9uKGUsIG4pIHsKCQkJCQl2YXIgYSA9IE51bWJlcihpKCIjIiArIHQuZXh0QnJhbmQgKyAiX2lubmVyXyIgKyBuLnR5cGUgKyAiIC4iICsgdC5leHRCcmFuZCArICJfaW5uZXJfcGFnZSAuY3VyX3BhZ2UiKS50ZXh0KCkpOwoJCQkJCTEgPT09IGUgPyAoYSA9PSBuLnRvdGFsICYmIChhID0gMCksIGkoIiMiICsgdC5leHRCcmFuZCArICJfaW5uZXJfIiArIG4udHlwZSArICIgLiIgKyB0LmV4dEJyYW5kICsgIl9pbm5lcl9wYWdlIC5jdXJfcGFnZSIpLnRleHQoKythKSwgaihhLCBuKSkgOiAoMSA9PSBhICYmIChhID0gbi50b3RhbCArIDEpLCBpKCIjIiArIHQuZXh0QnJhbmQgKyAiX2lubmVyXyIgKyBuLnR5cGUgKyAiIC4iICsgdC5leHRCcmFuZCArICJfaW5uZXJfcGFnZSAuY3VyX3BhZ2UiKS50ZXh0KC0tYSksIGooYSwgbikpCgkJCQl9LAoJCQkJTiA9IGZ1bmN0aW9uKGUsIG4sIGkpIHsKCQkJCQl2YXIgYSA9IGUuc2l0ZV9pZCwKCQkJCQkJbyA9IGUubm93X2RwX2lkLAoJCQkJCQlyID0gdC5zZXJ2ZXIgKyAiL2Jyd2V4dC9ndWVzc19mYXZvcj9kcF9pZD0iICsgbyArICImZHBfaWRzPSZzaXRlX2lkPSIgKyBhICsgIiZjb2x1bW49YWxzb3ZpZXciOwoJCQkJCXAuZ2V0KHIpLmRvbmUoZnVuY3Rpb24oZSkgewoJCQkJCQlpKCJmYXZvciIsIG4uY29uY2F0KGsoZSkpKQoJCQkJCX0pCgkJCQl9OwoJCQllLmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKGUsIG4pIHsKCQkJCSJzeGR4IiAhPT0gdC5mcm9tX2RldmljZSAmJiAoMCAhPSBkLmdldCgic2hvd19ndWVzc2Zhdm9yIikgJiYgci5nZXREcExvd2VzdChmdW5jdGlvbih0KSB7CgkJCQkJTihlLCB0LCB2KQoJCQkJfSksIDAgIT0gZC5nZXQoInNob3dfbG93cHJpIikgJiYgbiAmJiB3KCJsb3ciLCB5KG4uZGF0YSkpKQoJCQl9LCBlLmV4cG9ydHMuYmRleHQgPSBmdW5jdGlvbihlLCBpKSB7CgkJCQkwICE9IHQuc2hvd19pbm5lcl9sb3cgJiYgKGEgPSBuKDE4NyksIG8gPSBuKDE4OCksIHcoImxvdyIsIHkoaSkpKQoJCQl9CgkJfSkuY2FsbCh0LCBuKDEpLCBuKDYpKQoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQllLmV4cG9ydHMgPSAnPGRpdiBpZD0ie3tleHRCcmFuZH19X2lubmVyX3t7dHlwZX19IiBjbGFzcz0ie3tleHRCcmFuZH19X2lubmVyX2xvd3ByaWNlIj5cbiAgPGRpdiBjbGFzcz0ie3tleHRCcmFuZH19X2lubmVyX2hlYWQiPlxuICAgIDxhIGNsYXNzPSJzaXRlX2ljb24iIHt7aWYgIW5ld19leHRlbnNpb259fSBocmVmPSJodHRwOi8vd3d3Lnt7ZXh0TmFtZX19LmNvbSIgdGFyZ2V0PSJfYmxhbmsiIHRpdGxlPSLotK3nianlhZoiIHt7L2lmfX0+PC9hPlxuICAgIDxzcGFuIGNsYXNzPSJiaWdfdGl0bGUiPlxuICAgICAge3tpZiB0eXBlID09IFwnbG93XCd9fVxuICAgICAgICDljoblj7LmnIDkvY7ku7dcbiAgICAgIHt7ZWxzZX19XG4gICAgICAgIOeMnOS9oOWWnOasolxuICAgICAge3svaWZ9fVxuICAgIDwvc3Bhbj5cbiAgICA8c3BhbiBjbGFzcz0ic21hbGxfdGl0bGUiPlxuICAgICAge3tpZiB0eXBlID09IFwnbG93XCd9fVxuICAgICAgICDov5nkupvlkIznsbvllYblk4HlpITkuo7ljoblj7LmnIDkvY7ku7dcbiAgICAgIHt7ZWxzZX19XG4gICAgICAgIOeci+i/h+acrOWVhuWTgeeahOi/mOeci+S6hlxuICAgICAge3svaWZ9fVxuICAgIDwvc3Bhbj5cblxuICAgIDxhIGNsYXNzPSJ7e2V4dEJyYW5kfX1faW5uZXJfcGFnZSI+XG4gICAgICA8c3BhbiBjbGFzcz0iY3VyX3BhZ2UiPjE8L3NwYW4+XG4gICAgICA8c3Bhbj4vPC9zcGFuPlxuICAgICAgPHNwYW4gY2xhc3M9InRvdGFsX3BhZ2UiPjE8L3NwYW4+XG4gICAgPC9hPlxuICA8L2Rpdj5cbiAgPGRpdiBjbGFzcz0ie3tleHRCcmFuZH19X2lubmVyX2NvbnRlbnQiPlxuICAgIDxhIGNsYXNzPSJpbm5lcl9wYWdlX2xlZnQgdHVybnBhZ2UiPjxlbT48L2VtPjwvYT5cbiAgICA8ZGl2IGNsYXNzPSJpbm5lcl9wcm9fbGlzdCIgPlxuICAgICAgPHVsIGNsYXNzPSJ7e2V4dEJyYW5kfX1fe3t0eXBlfX1fbGlzdCI+XG4gICAgICA8L3VsPlxuICAgIDwvZGl2PlxuICAgIDxhIGNsYXNzPSJpbm5lcl9wYWdlX3JpZ2h0IHR1cm5wYWdlIj48ZW0+PC9lbT48L2E+XG4gIDwvZGl2PlxuICA8c3R5bGUgdHlwZT0idGV4dC9jc3MiPlxuICAgIC57e2V4dEJyYW5kfX1faW5uZXJfbG93cHJpY2Uge1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICBoZWlnaHQ6IDMxOHB4O1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgIH1cbiAgICAue3tleHRCcmFuZH19X2ppdXhpYW4gLnt7ZXh0QnJhbmR9fV9pbm5lcl9sb3dwcmljZSwgLnt7ZXh0QnJhbmR9fV9rYW9sYSAue3tleHRCcmFuZH19X2lubmVyX2xvd3ByaWNle1xuICAgICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICB9XG4gICAgLnt7ZXh0QnJhbmR9fV93YmlhbyAue3tleHRCcmFuZH19X2lubmVyX2xvd3ByaWNlIHtcbiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgfVxuICAgIC57e2V4dEJyYW5kfX1faW5uZXJfY29udGVudCB7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICB9XG4gICAgLnt7ZXh0QnJhbmR9fV9pbm5lcl9oZWFkIHtcbiAgICAgIGhlaWdodDogNTJweDtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB9XG4gICAgLmJpZ190aXRsZSB7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICBtYXJnaW4tdG9wOiAyMXB4O1xuICAgICAgaGVpZ2h0OiAxNnB4O1xuICAgICAgbGluZS1oZWlnaHQ6IDE2cHg7XG4gICAgICBtYXJnaW4tbGVmdDogNTFweDtcbiAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIH1cbiAgICAuc21hbGxfdGl0bGUge1xuICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgbWFyZ2luLWxlZnQ6IDEycHg7XG4gICAgfVxuICAgIGEue3tleHRCcmFuZH19X2lubmVyX3BhZ2Uge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgcmlnaHQ6IDIwcHg7XG4gICAgICB0b3A6IDIwcHg7XG4gICAgfVxuICAgICBhLnt7ZXh0QnJhbmR9fV9pbm5lcl9wYWdlOmhvdmVyIHtcbiAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICB9XG4gICAgLnt7ZXh0QnJhbmR9fV9pbm5lcl9oZWFkIC5zaXRlX2ljb24ge1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgdG9wOiAxOHB4O1xuICAgICAgbGVmdDogMThweDtcbiAgICAgIGhlaWdodDogMjFweDtcbiAgICAgIHdpZHRoOiAyNHB4O1xuICAgICAge3tpZiBuZXdfZXh0ZW5zaW9ufX1cbiAgICAgICAgYmFja2dyb3VuZDogdXJsKFwne3tzX3NlcnZlcn19L2ltYWdlcy9leHRlbnNpb25zL3t7ZXh0QnJhbmR9fV9zaXRlX2ljb24yXzEucG5nXCcpIG5vLXJlcGVhdDtcbiAgICAgIHt7ZWxzZX19XG4gICAgICAgIGJhY2tncm91bmQ6IHVybChcJ3t7c19zZXJ2ZXJ9fS9pbWFnZXMvZXh0ZW5zaW9ucy8xMjExbG9nby5wbmdcJykgbm8tcmVwZWF0O1xuICAgICAge3svaWZ9fVxuICAgICAgXG4gICAgfVxuICAgIC57e2V4dEJyYW5kfX1faW5uZXJfbG93cHJpY2UgKntcbiAgICAgIGZvbnQtZmFtaWx5OiBcJ01pY3Jvc29mdCBZYWhlaVwnO1xuICAgIH1cbiAgICBhLmlubmVyX3BhZ2VfbGVmdCwuaW5uZXJfcGFnZV9yaWdodCB7XG4gICAgICB3aWR0aDogNjJweDtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIGhlaWdodDogMTcwcHg7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgfVxuICAgIGEuaW5uZXJfcGFnZV9sZWZ0IGVtIHtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIGhlaWdodDogMjBweDtcbiAgICAgIHdpZHRoOiAyMHB4O1xuICAgICAgbWFyZ2luLXRvcDogODBweDtcbiAgICAgIG1hcmdpbi1sZWZ0OiAyOHB4O1xuICAgICAgYmFja2dyb3VuZDogdXJsKFwne3tzX3NlcnZlcn19L2ltYWdlcy9leHRlbnNpb25zLzEyMTViYWNrX25vcm1hbC5qcGdcJykgbm8tcmVwZWF0O1xuICAgIH1cbiAgICBhLmlubmVyX3BhZ2VfbGVmdCBlbTpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kOiB1cmwoXCd7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvMTIxNWJhY2tfaG92ZXIuanBnXCcpIG5vLXJlcGVhdDtcbiAgICB9XG4gICAgLmlubmVyX3BhZ2VfcmlnaHQgZW0ge1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgaGVpZ2h0OiAyMHB4O1xuICAgICAgd2lkdGg6IDIwcHg7XG4gICAgICBtYXJnaW4tdG9wOiA4MHB4O1xuICAgICAgbWFyZ2luLWxlZnQ6IDIwcHg7XG4gICAgICBiYWNrZ3JvdW5kOiB1cmwoXCd7e3Nfc2VydmVyfX0vaW1hZ2VzL2V4dGVuc2lvbnMvMTIxNWZvcndhcmRfbm9ybWFsLmpwZ1wnKSBuby1yZXBlYXQ7XG4gICAgfVxuICAgIC5pbm5lcl9wYWdlX3JpZ2h0IGVtOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQ6IHVybChcJ3t7c19zZXJ2ZXJ9fS9pbWFnZXMvZXh0ZW5zaW9ucy8xMjE1Zm9yd2FyZF9ob3Zlci5qcGdcJykgbm8tcmVwZWF0O1xuICAgIH1cbiAgICAuaW5uZXJfcHJvX2xpc3Qge1xuICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgIGhlaWdodDogMjY0cHg7XG4gICAgICB3aWR0aDogMTAwMHB4O1xuICAgIH1cbiAgICAuaW5uZXJfcGFnZV9sZWZ0LCAuaW5uZXJfcHJvX2xpc3Qge1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgfVxuICAgIC57e2V4dEJyYW5kfX1faW5uZXJfbG93cHJpY2UgdWwgbGkge1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICBtYXJnaW4tbGVmdDogMjBweDtcbiAgICAgIGhlaWdodDogMjY0cHg7XG4gICAgICBsaXN0LXN0eWxlOiBub25lO1xuICAgIH1cbiAgICAue3tleHRCcmFuZH19X2lubmVyX2xvd3ByaWNlIHVsIGxpLmxpX2ZpcnN0IHtcbiAgICAgIG1hcmdpbi1sZWZ0OiAwcHg7XG4gICAgfVxuICAgIC57e2V4dEJyYW5kfX1faW5uZXJfbG93cHJpY2UgdWwgbGkgLml0ZW1faW1nIHtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIGhlaWdodDogMTcycHg7XG4gICAgICB3aWR0aDogMTcycHg7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCAjZjFmMWYxO1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICB9XG4gICAgLnt7ZXh0QnJhbmR9fV9pbm5lcl9sb3dwcmljZSBsaSBpbWcge1xuICAgICAgaGVpZ2h0OiAxNzBweDtcbiAgICAgIHdpZHRoOiAxNzBweDtcbiAgICB9XG4gICAgLnt7ZXh0QnJhbmR9fV9pbm5lcl9sb3dwcmljZSBsaSAuc21hbGxfZGVzYyBpbWcge1xuICAgICAgaGVpZ2h0OiAxNnB4O1xuICAgICAgd2lkdGg6IDE2cHg7XG4gICAgICB2ZXJ0aWNhbC1hbGlnbjogaW5oZXJpdDtcbiAgICB9XG4gICAgLnNtYWxsX2Rlc2MgLnNpdGVfaWNvbiB7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICB3aWR0aDogMjFweDtcbiAgICAgIGhlaWdodDogMThweDtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgIH1cbiAgICAue3tleHRCcmFuZH19X2lubmVyX2xvd3ByaWNlIGxpIGEgZW17XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBib3R0b206IDBweDtcbiAgICAgIGxlZnQ6IDBweDtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlYTU0MTI7XG4gICAgICBjb2xvcjogI2ZmZjtcbiAgICAgIHdpZHRoOiA0MnB4O1xuICAgICAgaGVpZ2h0OiAxNXB4O1xuICAgICAgbGluZS1oZWlnaHQ6IDE1cHg7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICBmb250LXN0eWxlOiBub3JtYWw7XG4gICAgfVxuICAgIC5pbm5lcl9kcF9kZXNjIHtcbiAgICAgIHdpZHRoOiAxNzBweDtcbiAgICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgfVxuICAgIC5pbm5lcl9kcF9kZXNjIC5kcF90aXRsZXtcbiAgICAgIGNvbG9yOiAjNTk1NzU3O1xuICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgd2lkdGg6IDE3MHB4O1xuICAgICAgaGVpZ2h0OiAzNnB4O1xuICAgICAgbGluZS1oZWlnaHQ6IDE4cHg7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIH1cbiAgICAuc21hbGxfZGVzYyB7XG4gICAgICBtYXJnaW4tdG9wOiA2cHg7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICBoZWlnaHQ6IDM2cHg7XG4gICAgICB3aWR0aDogMTcwcHg7XG4gICAgICBjdXJzb3I6IHRleHQ7XG4gICAgfVxuICAgIC5zbWFsbF9kZXNjOmhvdmVyIHtcbiAgICAgIGN1cnNvcjogdGV4dDtcbiAgICB9XG4gICAgLnNtYWxsX2Rlc2MgLm5ld19wcmljZSB7XG4gICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICBjb2xvcjogI2Q4MDAwMDtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgIH1cbiAgICAuc21hbGxfZGVzYyAub2xkX3ByaWNlIHtcbiAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgIGNvbG9yOiAjOUZBMEEwO1xuICAgICAgZmxvYXQ6IHJpZ2h0O1xuICAgICAgdGV4dC1kZWNvcmF0aW9uOiBsaW5lLXRocm91Z2g7XG4gICAgfVxuICA8L3N0eWxlPlxuPC9kaXY+JwoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCkgewoJCQkidXNlIHN0cmljdCI7CgkJCWUuZXhwb3J0cy5jaGVja2ltZyA9IGZ1bmN0aW9uKGUsIG4sIGksIGEpIHsKCQkJCXZhciBvID0gInVuZGVmaW5lZCIgPT0gdHlwZW9mIGkgfHwgIiIgPT0gaSB8fCBudWxsID09IGkgPyA5MCA6IGksCgkJCQkJciA9IGUsCgkJCQkJcyA9IG5ldyBJbWFnZTsKCQkJCXQuYnJvd3Nlci5tc2llICYmIHQuYnJvd3Nlci52ZXJzaW9uIDwgMTEgPyBzLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkgewoJCQkJCWlmICgiY29tcGxldGUiID09IHMucmVhZHlTdGF0ZSB8fCAibG9hZGVkIiA9PSBzLnJlYWR5U3RhdGUpIHsKCQkJCQkJaWYgKHMud2lkdGggPiAwICYmIHMuaGVpZ2h0ID4gMCkgewoJCQkJCQkJdmFyIHQgPSBvIC8gcy53aWR0aCA8IG8gLyBzLmhlaWdodCA/IG8gLyBzLndpZHRoIDogbyAvIHMuaGVpZ2h0OwoJCQkJCQkJMSA+PSB0ID8gKG4uY3NzKCJ3aWR0aCIsIHMud2lkdGggKiB0KSwgbi5jc3MoImhlaWdodCIsIHMuaGVpZ2h0ICogdCkpIDogKG4uY3NzKCJ3aWR0aCIsIHMud2lkdGgpLCBuLmNzcygiaGVpZ2h0Iiwgcy5oZWlnaHQpKQoJCQkJCQl9CgkJCQkJCW4uYXR0cigic3JjIiwgZSkKCQkJCQl9CgkJCQl9IDogcy5vbmxvYWQgPSBmdW5jdGlvbigpIHsKCQkJCQlpZiAoMSA9PSBzLmNvbXBsZXRlKSB7CgkJCQkJCWlmIChzLndpZHRoID4gMCAmJiBzLmhlaWdodCA+IDApIHsKCQkJCQkJCXZhciB0ID0gbyAvIHMud2lkdGggPCBvIC8gcy5oZWlnaHQgPyBvIC8gcy53aWR0aCA6IG8gLyBzLmhlaWdodDsKCQkJCQkJCTEgPj0gdCA/IChuLmNzcygid2lkdGgiLCBzLndpZHRoICogdCksIG4uY3NzKCJoZWlnaHQiLCBzLmhlaWdodCAqIHQpKSA6IChuLmNzcygid2lkdGgiLCBzLndpZHRoKSwgbi5jc3MoImhlaWdodCIsIHMuaGVpZ2h0KSkKCQkJCQkJfQoJCQkJCQluLmF0dHIoInNyYyIsIGUpLCBhICYmIGEoKQoJCQkJCX0KCQkJCX0sIHMub25lcnJvciA9IGZ1bmN0aW9uKCkgewoJCQkJCW4uYXR0cigic3JjIiwgdC5zX3NlcnZlciArICIvaW1hZ2VzL2V4dGVuc2lvbnMvZGVmYXVsdF9sb2FkX2ltYWdlLnBuZyIpLmNzcygid2lkdGgiLCA5MCksIG4uYXR0cigiZGF0YS1vcmlnaW5hbCIsIHQuc19zZXJ2ZXIgKyAiL2ltYWdlcy9leHRlbnNpb25zL2RlZmF1bHRfbG9hZF9pbWFnZS5wbmciKQoJCQkJfSwgcy5zcmMgPSByCgkJCX0KCQl9KS5jYWxsKHQsIG4oMSkpCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICc8ZGl2IGlkPSJ7e2V4dEJyYW5kfX1faW5uZXJfe3t0eXBlfX0iIGNsYXNzPSJ7e2V4dEJyYW5kfX1faW5uZXJfbG93cHJpY2UiPlxuICA8ZGl2IGNsYXNzPSJ7e2V4dEJyYW5kfX1faW5uZXJfaGVhZCI+XG4gICAgPGEgY2xhc3M9InNpdGVfaWNvbiBiZGV4dC1iZyIgaHJlZj0iamF2YXNjcmlwdDoiID48L2E+XG4gICAgPHNwYW4gY2xhc3M9ImJpZ190aXRsZSI+XG4gICAgICAgIOWOhuWPsuacgOS9juS7t1xuICAgIDwvc3Bhbj5cbiAgICA8c3BhbiBjbGFzcz0ic21hbGxfdGl0bGUiPlxuICAgICAgICDov5nkupvlkIznsbvllYblk4HlpITkuo7ljoblj7LmnIDkvY7ku7dcbiAgICA8L3NwYW4+XG5cbiAgICA8YSBjbGFzcz0ie3tleHRCcmFuZH19X2lubmVyX3BhZ2UiPlxuICAgICAgPHNwYW4gY2xhc3M9ImN1cl9wYWdlIj4xPC9zcGFuPlxuICAgICAgPHNwYW4+Lzwvc3Bhbj5cbiAgICAgIDxzcGFuIGNsYXNzPSJ0b3RhbF9wYWdlIj4xPC9zcGFuPlxuICAgIDwvYT5cbiAgPC9kaXY+XG4gIDxkaXYgY2xhc3M9Int7ZXh0QnJhbmR9fV9pbm5lcl9jb250ZW50Ij5cbiAgICA8YSBjbGFzcz0iaW5uZXJfcGFnZV9sZWZ0IHR1cm5wYWdlIj48ZW0gY2xhc3M9ImJkZXh0LWJnIj48L2VtPjwvYT5cbiAgICA8ZGl2IGNsYXNzPSJpbm5lcl9wcm9fbGlzdCIgPlxuICAgICAgPHVsIGNsYXNzPSJ7e2V4dEJyYW5kfX1fe3t0eXBlfX1fbGlzdCI+XG4gICAgICA8L3VsPlxuICAgIDwvZGl2PlxuICAgIDxhIGNsYXNzPSJpbm5lcl9wYWdlX3JpZ2h0IHR1cm5wYWdlIj48ZW0gY2xhc3M9ImJkZXh0LWJnIj48L2VtPjwvYT5cbiAgPC9kaXY+XG4gIDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+XG4gICAgLnt7ZXh0QnJhbmR9fV9pbm5lcl9sb3dwcmljZSB7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGhlaWdodDogMzE4cHg7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCAjZDlkOWQ5O1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgfVxuICAgIC57e2V4dEJyYW5kfX1faml1eGlhbiAue3tleHRCcmFuZH19X2lubmVyX2xvd3ByaWNlLCAue3tleHRCcmFuZH19X2thb2xhIC57e2V4dEJyYW5kfX1faW5uZXJfbG93cHJpY2V7XG4gICAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICAgIH1cbiAgICAue3tleHRCcmFuZH19X3diaWFvIC57e2V4dEJyYW5kfX1faW5uZXJfbG93cHJpY2Uge1xuICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICB9XG4gICAgLnt7ZXh0QnJhbmR9fV9pbm5lcl9jb250ZW50IHtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgIH1cbiAgICAue3tleHRCcmFuZH19X2lubmVyX2hlYWQge1xuICAgICAgaGVpZ2h0OiA1MnB4O1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIH1cbiAgICAuYmlnX3RpdGxlIHtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIG1hcmdpbi10b3A6IDIxcHg7XG4gICAgICBoZWlnaHQ6IDE2cHg7XG4gICAgICBsaW5lLWhlaWdodDogMTZweDtcbiAgICAgIG1hcmdpbi1sZWZ0OiA1MXB4O1xuICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICBjb2xvcjogIzQyNTc2NjtcbiAgICB9XG4gICAgLnNtYWxsX3RpdGxlIHtcbiAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgIG1hcmdpbi1sZWZ0OiAxMnB4O1xuICAgICAgY29sb3I6ICNhMGFiYjI7XG4gICAgfVxuICAgIGEue3tleHRCcmFuZH19X2lubmVyX3BhZ2Uge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgcmlnaHQ6IDIwcHg7XG4gICAgICB0b3A6IDIwcHg7XG4gICAgICBjb2xvcjogIzQyNTc2NjtcbiAgICB9XG4gICAgIGEue3tleHRCcmFuZH19X2lubmVyX3BhZ2U6aG92ZXIge1xuICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgIH1cbiAgICAue3tleHRCcmFuZH19X2lubmVyX2hlYWQgLnNpdGVfaWNvbiB7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICB0b3A6IDE4cHg7XG4gICAgICBsZWZ0OiAxOHB4O1xuICAgICAgaGVpZ2h0OiAyM3B4O1xuICAgICAgd2lkdGg6IDIzcHg7XG4gICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwcHggMHB4O1xuICAgIH1cbiAgICAue3tleHRCcmFuZH19X2lubmVyX2xvd3ByaWNlICp7XG4gICAgICBmb250LWZhbWlseTogXCdNaWNyb3NvZnQgWWFoZWlcJztcbiAgICB9XG4gICAgYS5pbm5lcl9wYWdlX2xlZnQsLmlubmVyX3BhZ2VfcmlnaHQge1xuICAgICAgd2lkdGg6IDUwcHg7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICBoZWlnaHQ6IDE3MHB4O1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIH1cbiAgICBhLmlubmVyX3BhZ2VfbGVmdCBlbSB7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICBoZWlnaHQ6IDUwcHg7XG4gICAgICB3aWR0aDogMzBweDtcbiAgICAgIG1hcmdpbi10b3A6IDgwcHg7XG4gICAgICBtYXJnaW4tbGVmdDogMTVweDtcbiAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IC03N3B4IC0xMjdweDtcbiAgICB9XG4gICAgLmlubmVyX3BhZ2VfcmlnaHQgZW0ge1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgaGVpZ2h0OiA1MHB4O1xuICAgICAgd2lkdGg6IDMwcHg7XG4gICAgICBtYXJnaW4tdG9wOiA4MHB4O1xuICAgICAgbWFyZ2luLWxlZnQ6IDhweDtcbiAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IC0xMTVweCAtMTI3cHg7XG4gICAgfVxuICAgIC5pbm5lcl9wcm9fbGlzdCB7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgaGVpZ2h0OiAyNjRweDtcbiAgICAgIHdpZHRoOiAxMDAwcHg7XG4gICAgfVxuICAgIC5pbm5lcl9wYWdlX2xlZnQsIC5pbm5lcl9wcm9fbGlzdCB7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICB9XG4gICAgLnt7ZXh0QnJhbmR9fV9pbm5lcl9sb3dwcmljZSB1bCBsaSB7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIG1hcmdpbi1sZWZ0OiAyMHB4O1xuICAgICAgaGVpZ2h0OiAyNjRweDtcbiAgICAgIGxpc3Qtc3R5bGU6IG5vbmU7XG4gICAgfVxuICAgIC57e2V4dEJyYW5kfX1faW5uZXJfbG93cHJpY2UgdWwgbGkubGlfZmlyc3Qge1xuICAgICAgbWFyZ2luLWxlZnQ6IDBweDtcbiAgICB9XG4gICAgLnt7ZXh0QnJhbmR9fV9pbm5lcl9sb3dwcmljZSB1bCBsaSAuaXRlbV9pbWcge1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgaGVpZ2h0OiAxNzJweDtcbiAgICAgIHdpZHRoOiAxNzJweDtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNmMWYxZjE7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIH1cbiAgICAue3tleHRCcmFuZH19X2lubmVyX2xvd3ByaWNlIGxpIGltZyB7XG4gICAgICBoZWlnaHQ6IGF1dG87XG4gICAgICB3aWR0aDogYXV0bztcbiAgICAgIG1heC1oZWlnaHQ6IDE3MHB4O1xuICAgICAgbWF4LXdpZHRoOiAxNzBweDtcbiAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG4gICAgICBtYXJnaW46IDAgYXV0bztcbiAgICB9XG4gICAgLnt7ZXh0QnJhbmR9fV9pbm5lcl9sb3dwcmljZSBsaSAuc21hbGxfZGVzYyBpbWcge1xuICAgICAgaGVpZ2h0OiAxNnB4O1xuICAgICAgd2lkdGg6IDE2cHg7XG4gICAgICB2ZXJ0aWNhbC1hbGlnbjogaW5oZXJpdDtcbiAgICB9XG4gICAgLnNtYWxsX2Rlc2MgLnNpdGVfaWNvbiB7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICB3aWR0aDogMjFweDtcbiAgICAgIGhlaWdodDogMThweDtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgIH1cbiAgICAue3tleHRCcmFuZH19X2lubmVyX2xvd3ByaWNlIGxpIGEgZW17XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBib3R0b206IDBweDtcbiAgICAgIGxlZnQ6IDBweDtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZjQ1MDA7XG4gICAgICBjb2xvcjogI2ZmZjtcbiAgICAgIHdpZHRoOiA0MnB4O1xuICAgICAgaGVpZ2h0OiAxNnB4O1xuICAgICAgbGluZS1oZWlnaHQ6IDE2cHg7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICBmb250LXN0eWxlOiBub3JtYWw7XG4gICAgfVxuICAgIC5pbm5lcl9kcF9kZXNjIHtcbiAgICAgIHdpZHRoOiAxNzBweDtcbiAgICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgfVxuICAgIC5pbm5lcl9kcF9kZXNjIC5kcF90aXRsZXtcbiAgICAgIGNvbG9yOiAjNDI1NzY2O1xuICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgd2lkdGg6IDE3MHB4O1xuICAgICAgaGVpZ2h0OiAzNnB4O1xuICAgICAgbGluZS1oZWlnaHQ6IDE4cHg7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIH1cbiAgICAuc21hbGxfZGVzYyB7XG4gICAgICBtYXJnaW4tdG9wOiA2cHg7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICBoZWlnaHQ6IDM2cHg7XG4gICAgICB3aWR0aDogMTcwcHg7XG4gICAgICBjdXJzb3I6IHRleHQ7XG4gICAgfVxuICAgIC5zbWFsbF9kZXNjOmhvdmVyIHtcbiAgICAgIGN1cnNvcjogdGV4dDtcbiAgICB9XG4gICAgLnNtYWxsX2Rlc2MgLm5ld19wcmljZSB7XG4gICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICBjb2xvcjogI2U1MjIyMjtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgIH1cbiAgICAuc21hbGxfZGVzYyAub2xkX3ByaWNlIHtcbiAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgIGNvbG9yOiAjYTBhYmIyO1xuICAgICAgZmxvYXQ6IHJpZ2h0O1xuICAgICAgdGV4dC1kZWNvcmF0aW9uOiBsaW5lLXRocm91Z2g7XG4gICAgfVxuICA8L3N0eWxlPlxuPC9kaXY+JwoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQllLmV4cG9ydHMgPSAne3tlYWNoIGRhdGF9fVxuICA8bGkgY2xhc3M9Int7JGluZGV4PT0wP1wnbGlfZmlyc3RcJzpcJ1wnfX0iPlxuICAgIDxhIGNsYXNzPSJpdGVtX2ltZyIgaHJlZj0ie3skdmFsdWUudXJsfX0iIHRpdGxlPSJ7eyR2YWx1ZS50aXRsZX19IiB0YXJnZXQ9Il9ibGFuayI+XG4gICAgICA8aW1nIHNyYz0ie3skdmFsdWUuaW1nX3VybH19Ij5cbiAgICAgIHt7aWYgJHZhbHVlLm5ld2Rpc2NvdW50fX1cbiAgICAgICAgPGVtPnt7JHZhbHVlLm5ld2Rpc2NvdW50fX3mipg8L2VtPlxuICAgICAge3svaWZ9fVxuICAgIDwvYT5cbiAgICA8ZGl2IGNsYXNzPSJpbm5lcl9kcF9kZXNjIj5cbiAgICAgIDxhIGNsYXNzPSJkcF90aXRsZSIgaHJlZj0ie3skdmFsdWUudXJsfX0iIHRpdGxlPSJ7eyR2YWx1ZS50aXRsZX19IiB0YXJnZXQ9Il9ibGFuayI+XG4gICAgICAgIHt7JHZhbHVlLnRpdGxlfX1cbiAgICAgIDwvYT5cbiAgICAgIDxhIGNsYXNzPSJzbWFsbF9kZXNjIj5cbiAgICAgICAgPHNwYW4gY2xhc3M9Im5ld19wcmljZSI+XG4gICAgICAgICAgICDCpXt7JHZhbHVlLnByaWNlfX1cbiAgICAgICAgPC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz0ib2xkX3ByaWNlIiBzdHlsZT0iZGlzcGxheToge3soJHZhbHVlLmhpZ2hlc3QpP1wnaW5saW5lLWJsb2NrXCc6XCdub25lXCd9fSI+wqV7eyR2YWx1ZS5oaWdoZXN0fX08L3NwYW4+XG4gICAgICA8L2E+XG4gICAgPC9kaXY+XG4gIDwvbGk+XG57ey9lYWNofX0nCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICc8ZGl2IGlkPSJ7e2V4dEJyYW5kfX1fbG93cHJpX2RldGFpbCIgY2xhc3M9ImJqZC1wcm9kdWN0LWRldGFpbCI+XG4gIDx1bCBpZD0ibG93cHJpLWl0ZW0tbGlzdCI+XG4gICAge3tlYWNoIGRhdGF9fVxuICAgICAgPGxpIGlkPSJsb3dwcmktcHJvZC1pdGVtLXt7JGluZGV4fX0iPlxuICAgICAgICA8YSBocmVmPSJ7eyR2YWx1ZS51cmx9fSIgdGFyZ2V0PSJfYmxhbmsiIHRpdGxlPSJ7eyR2YWx1ZS50aXRsZX19IiBjbGFzcz0ic21hbGwtaW1nIj5cbiAgICAgICAgICA8aW1nIHNyYz0ie3skdmFsdWUuaW1nX3VybH19Ij5cbiAgICAgICAgPC9hPlxuICAgICAgICAgPGRpdiBjbGFzcz0ic2FsZS1wcmktaW5mbyI+XG4gICAgICAgICAgPGRpdiBjbGFzcz0ic2FsZS1wcmktYm94Ij5cbiAgICAgICAgICAgIDxpbWcgc3JjPSJ7e3Nfc2VydmVyfX0vaW1hZ2VzL2Zhdmljb24ve3skdmFsdWUuc2l0ZV9pZH19LmljbyIgY2xhc3M9InNpdGVfaWNvbl9pbWciPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNhbGUtcHJpY2UiPsKle3skdmFsdWUucHJpY2V9fTwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzYWxlLWRlc2MgbmV3Yi1iZyI+5Yiw5omL5Lu3PC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICBcbiAgICAgICAgIDwvZGl2PlxuICAgICAgICAgPHNwYW4gY2xhc3M9Im9yaWctcHJpLWluZm8iPlxuICAgICAgICAgICA8c3BhbiBjbGFzcz0ibmV3Yi1iZyI+6aG16Z2i5Lu3wqV7eyR2YWx1ZS5sYXN0X3ByaWNlfX08L3NwYW4+XG4gICAgICAgICA8L3NwYW4+XG4gICAgICAgICA8c3BhbiBjbGFzcz0ibG93cHJpLXByb21vIj57eyR2YWx1ZS5wcm9tb319PC9zcGFuPlxuICAgICAgICAgPGEgY2xhc3M9Imxvd3ByaS10bGUiIGhyZWY9Int7JHZhbHVlLnVybH19IiB0aXRsZT0ie3skdmFsdWUudGl0bGV9fSIgdGFyZ2V0PSJfYmxhbmsiPnt7JHZhbHVlLnRpdGxlfX08L2E+XG4gICAgICA8L2xpPlxuICAgIHt7L2VhY2h9fVxuICA8L3VsPlxuICB7e2lmICFhbGlzaXRlfX1cbiAgPGEgaHJlZj0ie3tsb3dVcmx9fSIgaWQ9Imxvd3ByaV9tb3JlbGluayIgdGFyZ2V0PSJfYmxhbmsiPuafpeeci+WFqOmDqD4+PC9hPlxuICB7ey9pZn19XG4gIDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+XG4gICAgLnt7ZXh0TmFtZX19LW1haW4gI3t7ZXh0QnJhbmR9fV9sb3dwcmkue3tleHRCcmFuZH19X2xvd3ByaV9ob3ZlcntcbiAgICAgIGhlaWdodDogMzhweDtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gICAgICBjb2xvcjogIzVlYmVmZjtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIHotaW5kZXg6IDk5OTk5OTk5MTtcbiAgICB9XG4gICAgLmJqZC1wcm9kdWN0LWRldGFpbCB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgICAjZ3dkX2xvd3ByaV9kZXRhaWwge1xuICAgICAgaGVpZ2h0OiAyNjdweDtcbiAgICB9XG4gICAgLmd3ZF96aGlkZW1haV9ob3ZlciB7XG4gICAgICBjb2xvcjogIzVlYmVmZiFpbXBvcnRhbnQ7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgICAgaGVpZ2h0OiAzOHB4IWltcG9ydGFudDtcbiAgICAgIHotaW5kZXg6IDk5OTtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB9XG4gICAgLmxvd3ByaV9pY29ue1xuICAgICAgbWFyZ2luLXJpZ2h0OiAzcHg7XG4gICAgfVxuICAgIC5sb3dwcmlfaWNvbiBpbWcge1xuICAgICAgd2lkdGg6IDIwcHg7XG4gICAgICBtYXJnaW4tdG9wOiAtNHB4O1xuICAgIH1cbiAgICAje3tleHRCcmFuZH19X2xvd3ByaSAubG93cHJpX2ljb257XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIGhlaWdodDogMjJweDtcbiAgICAgIHdpZHRoOiAyMnB4O1xuICAgICAgbWFyZ2luLXRvcDogNnB4O1xuICAgICAgbWFyZ2luLXJpZ2h0OiA2cHg7XG4gICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMThweCAtMTlweDtcbiAgICB9XG4gICAgXG4gICAgI3t7ZXh0QnJhbmR9fV9sb3dwcmlfZGV0YWlsIC5sb3dwcmlfZGVzYyB7XG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgIGhlaWdodDogMTVweDtcbiAgICAgICAgd2lkdGg6IDQ1cHg7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgdG9wOiA3N3B4O1xuICAgICAgICBsZWZ0OiA5M3B4O1xuICAgICAgfVxuICAgICAgI2xvd3ByaS1pdGVtLWxpc3QgbGkge1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICB9XG4gICAgICAje3tleHRCcmFuZH19X2xvd3ByaV9kZXRhaWwgI2xvd3ByaS1pdGVtLWxpc3QgLmxhdGVzdENyZWF0ZSB7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTQwcHggLTExM3B4OztcbiAgICAgIH1cbiAgICAgICN7e2V4dEJyYW5kfX1fbG93cHJpX2RldGFpbCAjbG93cHJpLWl0ZW0tbGlzdCAuaGlnaGVzdF9kaXNjb3VudCB7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTQwcHggLTE0cHg7XG4gICAgICB9XG4gICAgICAjbG93cHJpX21vcmVsaW5rIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgIGJvdHRvbTogOXB4O1xuICAgICAgICByaWdodDogOXB4O1xuICAgICAgICBjb2xvcjogIzliOWI5YjtcbiAgICAgIH1cbiAgICAgICNsb3dwcmlfbW9yZWxpbms6aG92ZXIge1xuICAgICAgICBjb2xvcjogIzVlYmVmZjtcbiAgICAgIH1cbiAgICAgIC5zYWxlLXByaS1ib3gge1xuICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICB9XG4gICAgICAuc2FsZS1wcmktYm94Pioge1xuICAgICAgICBmbG9hdDogbGVmdDtcbiAgICAgIH1cbiAgICAgIC5zaXRlX2ljb25faW1nIHtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiA2cHg7XG4gICAgICB9XG4gICAgICAuYmpkLXByb2R1Y3QtZGV0YWlsIC5zYWxlLXByaWNlIHtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiA5cHg7XG4gICAgICB9XG4gIDwvc3R5bGU+XG48L2Rpdj4nCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCShmdW5jdGlvbih0LCBpKSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJdmFyIGEgPSBuKDkpLAoJCQkJbyA9IG4oMTYpLAoJCQkJciA9IGZ1bmN0aW9uKGUsIG4sIGEpIHsKCQkJCQl2YXIgciA9ICc8YSBzdHlsZT0icGFkZGluZzowO21hcmdpbjowO2xpbmUtaGVpZ2h0OjMycHg7IiBpZD0iemRtX2ltZyIgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9Int7dXJsfX0iIHRpdGxlPSJ7e3RpdGxlfX0iPjxpbWcgc3JjPSJ7e2ltZ319IiBzdHlsZT0iaGVpZ2h0OjM1cHgiPjwvYT4nOwoJCQkJCXQoIiMiICsgaS5leHROYW1lICsgIi1tYWluLWNvbnRlbnRzIikuYXBwZW5kKG8uY29tcGlsZShyKSh7CgkJCQkJCXVybDogbiwKCQkJCQkJaW1nOiBlLAoJCQkJCQl0aXRsZTogYQoJCQkJCX0pKQoJCQkJfSwKCQkJCXMgPSBmdW5jdGlvbihlKSB7CgkJCQkJZS5pbWcgJiYgZS51cmwgJiYgZS50aXRsZSAmJiByKGUuaW1nLCBlLnVybCwgZS50aXRsZSkKCQkJCX0sCgkJCQlsID0gZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSBpLnNlcnZlciArICIvZXh0ZW5zaW9uP2FjPXJlbWluZCZzaXRlPSIgKyBpLnNpdGUgKyAiJmhvc3Q9IiArIGxvY2F0aW9uLmhvc3QgKyAiJmZyb21fZGV2aWNlPSIgKyBpLmZyb21fZGV2aWNlOwoJCQkJCWEuZ2V0KGUpLmRvbmUoZnVuY3Rpb24oZSkgewoJCQkJCQllICYmIGUuaXNzaG93ID09PSAhMCAmJiBzKGUpCgkJCQkJfSkuZmFpbChmdW5jdGlvbigpIHt9KQoJCQkJfTsKCQkJZS5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHsKCQkJCWwoKQoJCQl9CgkJfSkuY2FsbCh0LCBuKDYpLCBuKDEpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCwgaSkgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBhID0gbigxNiksCgkJCQlvID0gbig5KSwKCQkJCXIgPSBuKDEzKSwKCQkJCXMgPSBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIG8gPSBuKDE5Mik7CgkJCQkJdChpLmR2YWwpLmFwcGVuZChhLmNvbXBpbGUobykoewoJCQkJCQlkYXRhOiBlCgkJCQkJfSkpLCByLmxvZygi5bqV6YOo6LWE6K6v5bGV546wIikKCQkJCX0sCgkJCQlsID0gZnVuY3Rpb24oZSkgewoJCQkJCXZhciBvID0gbigxOTMpOwoJCQkJCXQoIiMiICsgaS5leHROYW1lICsgIi1tYWluLWNvbnRlbnRzIikuYXBwZW5kKGEuY29tcGlsZShvKSh7CgkJCQkJCWRhdGE6IGUKCQkJCQl9KSksIHIubG9nKCLpobbpg6jotYTorq/lsZXnjrAiKQoJCQkJfSwKCQkJCWMgPSBmdW5jdGlvbigpIHsKCQkJCQl0KCIjbmV3X2luZm9tYXRpb24gYSIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQlyLmxvZyhpLnN0eWxlICsgIui1hOiur+eCueWHuyIpCgkJCQkJfSkKCQkJCX0sCgkJCQlkID0gZnVuY3Rpb24oZSkgewoJCQkJCSJ0b3AiID09IGkuc3R5bGUgPyBsKGUpIDogImJvdHRvbSIgPT0gaS5zdHlsZSAmJiBzKGUpLCBjKGkuc3R5bGUpCgkJCQl9OwoJCQllLmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkgewoJCQkJaWYgKGkubHV5b3VxaSkgewoJCQkJCXZhciBlID0gaS5zZXJ2ZXIgKyAiL2V4dGVuc2lvbj9hYz1hbm5vdW5jZW1lbnQiOwoJCQkJCW8uZ2V0KGUpLmRvbmUoZnVuY3Rpb24oZSkgewoJCQkJCQllICYmIGUubGVuZ3RoID4gMCAmJiBkKGUpCgkJCQkJfSkKCQkJCX0KCQkJfQoJCX0pLmNhbGwodCwgbig2KSwgbigxKSkKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJZS5leHBvcnRzID0gJzxkaXYgaWQ9Im5ld19pbmZvbWF0aW9uIiBjbGFzcz0iZ3dkLWNsb3NlLW1vZHVsZSI+XG4gIDxzcGFuIGNsYXNzPSJuaV9oZWFkIj5b6LWE6K6vXTwvc3Bhbj5cbiAgPGRpdj5cbiAgICB7e2VhY2ggZGF0YX19XG4gICAgPGEgaHJlZj0ie3skdmFsdWUudXJsfX0iIHRhcmdldD0iX2JsYW5rIiB0aXRsZT0ie3skdmFsdWUudGl0bGV9fSI+4pePJm5ic3A7e3sjJHZhbHVlLnRpdGxlfX08L2E+XG4gICAge3svZWFjaH19XG4gIDwvZGl2PlxuICA8c3R5bGUgdHlwZT0idGV4dC9jc3MiPlxuICAgICNuZXdfaW5mb21hdGlvbiB7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICB9XG4gICAgI25ld19pbmZvbWF0aW9uID4gZGl2IHtcbiAgICAgIHBhZGRpbmc6IDEycHggMHB4O1xuICAgIH1cbiAgICAjbmV3X2luZm9tYXRpb24gLm5pX2hlYWR7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIHdpZHRoOiA4NXB4O1xuICAgICAgaGVpZ2h0OiA2MHB4O1xuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgbGluZS1oZWlnaHQ6IDYwcHg7XG4gICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICBjb2xvcjogIzMzMztcbiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgI2VlZTtcbiAgICB9XG4gICAgI25ld19pbmZvbWF0aW9uIGEge1xuICAgICAgY29sb3I6ICMzMzM7XG4gICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICBsaW5lLWhlaWdodDogMThweDtcbiAgICAgIG1hcmdpbi1sZWZ0OiAxMnB4O1xuICAgICAgbWF4LXdpZHRoOiA0NDJweDtcbiAgICAgIGhlaWdodDogMTZweDtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgfVxuICAgICNuZXdfaW5mb21hdGlvbiBhOmhvdmVyLCAjbmV3X2luZm9tYXRpb24gYTpob3ZlciBzcGFuIHtcbiAgICAgIGNvbG9yOiAjMTc5MGRkICFpbXBvcnRhbnQ7XG4gICAgfVxuICA8L3N0eWxlPlxuPC9kaXY+JwoJfSwKCWZ1bmN0aW9uKGUsIHQpIHsKCQllLmV4cG9ydHMgPSAnPGRpdiBpZD0ibmV3X2luZm9tYXRpb25fdG9wIj5cbiAgPHNwYW4gY2xhc3M9Im5pX2hlYWQiPlvotYTorq9dPC9zcGFuPlxuICB7e2VhY2ggZGF0YX19XG4gICAgPGEgaHJlZj0ie3skdmFsdWUudXJsfX0iIHRhcmdldD0iX2JsYW5rIiB0aXRsZT0ie3skdmFsdWUudGl0bGV9fSI+PGVtPuKXjzwvZW0+Jm5ic3A7e3sjJHZhbHVlLnRpdGxlfX08L2E+XG4gIHt7L2VhY2h9fVxuICA8c3R5bGUgdHlwZT0idGV4dC9jc3MiPlxuICAgICNuZXdfaW5mb21hdGlvbl90b3Age1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgYm9yZGVyLXJpZ2h0OiAxcHggZGFzaGVkICNlZWU7XG4gICAgfVxuICAgICNuZXdfaW5mb21hdGlvbl90b3Agc3BhbiB7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgIGNvbG9yOiAjMzMzO1xuICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICB3aWR0aDogNjBweDtcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIGxpbmUtaGVpZ2h0OiAzNnB4O1xuICAgICAgaGVpZ2h0OiAzNnB4O1xuICAgIH1cbiAgICAjbmV3X2luZm9tYXRpb25fdG9wIGEge1xuICAgICAgY29sb3I6ICM2NjYgO1xuICAgICAgZm9udC1zaXplOiAxMnB4IDtcbiAgICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG4gICAgICBib3JkZXI6IG5vbmU7XG4gICAgfVxuICAgICNuZXdfaW5mb21hdGlvbl90b3AgYSBzcGFuIHtcbiAgICAgIGZsb2F0OiBub25lO1xuICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcbiAgICB9XG4gICAgI25ld19pbmZvbWF0aW9uX3RvcCBhIGVtIHtcbiAgICAgIGNvbG9yOiAjZTUyNjAwO1xuICAgIH1cbiAgICAjbmV3X2luZm9tYXRpb25fdG9wIGE6aG92ZXIsICNuZXdfaW5mb21hdGlvbl90b3AgYTpob3ZlciBlbSwgICNuZXdfaW5mb21hdGlvbl90b3AgYTpob3ZlciBzcGFuIHtcbiAgICAgIGNvbG9yOiAjMTc5MGRkICFpbXBvcnRhbnQ7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBpbmhlcml0O1xuICAgIH1cbiAgPC9zdHlsZT5cbjwvZGl2PicKCX0sCglmdW5jdGlvbihlLCB0LCBuKSB7CgkJKGZ1bmN0aW9uKHQsIGkpIHsKCQkJInVzZSBzdHJpY3QiOwoJCQl2YXIgYSA9IG4oMTk1KSwKCQkJCW8gPSBuKDEwKSwKCQkJCXIgPSBuKDkpLAoJCQkJcyA9IG4oMTYpLAoJCQkJbCA9IG4oMTMpLAoJCQkJYyA9IHsKCQkJCQkiMzYwYnV5IjogMywKCQkJCQlzdW5pbmc6IDI1LAoJCQkJCWdvbWU6IDI4LAoJCQkJCXlpaGFvZGlhbjogMzEsCgkJCQkJZGFuZ2Rhbmc6IDIsCgkJCQkJYW1hem9uOiAxCgkJCQl9LAoJCQkJZCA9IHsKCQkJCQkiMzYwYnV5IjogewoJCQkJCQlkb206ICIjSl9jcnVtYnNCYXIgLmNydW1icy1uYXYgLmNydW1icy1uYXYtbWFpbiIsCgkJCQkJCXBvczogImFwcGVuZCIKCQkJCQl9LAoJCQkJCXN1bmluZzogewoJCQkJCQlkb206ICIjc2VhcmNoLXBhdGgiLAoJCQkJCQlzZWFyY2hkb206ICIjYWR2RmlsdGVyIC5vZmwiLAoJCQkJCQlwb3M6ICJhcHBlbmQiCgkJCQkJfSwKCQkJCQl5aWhhb2RpYW46IHsKCQkJCQkJZG9tOiAiLm1vZF9zZWFyY2hfY3J1bWIgLmNydW1iQ2xpcCIsCgkJCQkJCXBvczogImFwcGVuZCIKCQkJCQl9LAoJCQkJCWRhbmdkYW5nOiB7CgkJCQkJCWRvbTogIiNCIiwKCQkJCQkJc2VhcmNoZG9tOiAiI0pfdGFiIiwKCQkJCQkJcG9zOiAiYXBwZW5kIgoJCQkJCX0sCgkJCQkJZ29tZTogewoJCQkJCQlkb206ICIublNlYXJjaC1jcnVtYi1jYXRlZ29yeS1yZXN1bHRzIiwKCQkJCQkJcG9zOiAiYXBwZW5kIiwKCQkJCQkJc2VhcmNoZG9tOiAiLm5TZWFyY2gtY3J1bWIiCgkJCQkJfSwKCQkJCQlhbWF6b246IHsKCQkJCQkJZG9tOiAiI3MtcmVzdWx0LWNvdW50IiwKCQkJCQkJcG9zOiAiYXBwZW5kIgoJCQkJCX0KCQkJCX0sCgkJCQlwID0gZnVuY3Rpb24oZSwgbiwgaSkgewoJCQkJCXN3aXRjaCAoaSkgewoJCQkJCQljYXNlICJiZWZvcmUiOgoJCQkJCQkJdChuKS5iZWZvcmUoZSk7CgkJCQkJCQlicmVhazsKCQkJCQkJY2FzZSAiYXBwZW5kIjoKCQkJCQkJCXQobikuYXBwZW5kKGUpOwoJCQkJCQkJYnJlYWs7CgkJCQkJCWNhc2UgImFmdGVyIjoKCQkJCQkJCXQobikuYWZ0ZXIoZSkKCQkJCQl9CgkJCQl9LAoJCQkJaCA9IGZ1bmN0aW9uKCkgewoJCQkJCXJldHVybiAic3VuaW5nIiA9PSBpLnNpdGUgJiYgdCgiI2FkdkZpbHRlciIpLmxlbmd0aCA+IDAgJiYgLTEgPT0gZFtpLnNpdGVdLmRvbS5pbmRleE9mKCJhZHZGaWx0ZXIiKSA/ICEwIDogITEKCQkJCX0sCgkJCQl1ID0gZnVuY3Rpb24oZSkgewoJCQkJCSJib3R0b20iID09IGkuc3R5bGUgPyBuKDE5NikoZSkgOiAidG9wIiA9PSBpLnN0eWxlICYmIG0oZSkKCQkJCX0sCgkJCQltID0gZnVuY3Rpb24oZSkgewoJCQkJCXQoIiMiICsgaS5leHROYW1lICsgIi1tYWluLWNvbnRlbnRzIikuYXBwZW5kKHQoIjxhPiIsIHsKCQkJCQkJaHJlZjogZS51cmwsCgkJCQkJCXRhcmdldDogIl9ibGFuayIsCgkJCQkJCSJjbGFzcyI6IGkuZXh0QnJhbmQgKyAiX3Byb21vX3AiLAoJCQkJCQlpZDogaS5leHRCcmFuZCArICJfcHJvbW9fYnRuIiwKCQkJCQkJc3R5bGU6ICJwb3NpdGlvbjpyZWxhdGl2ZTsiCgkJCQkJfSkuYXBwZW5kKHQoIjxzcGFuPiIsIHsKCQkJCQkJImNsYXNzIjogaS5leHRCcmFuZCArICJfYmcgIiArIGkuZXh0QnJhbmQgKyAiX3Byb21vX2ljb24iLAoJCQkJCQlzdHlsZTogIm1hcmdpbi10b3A6LTVweDsiCgkJCQkJfSkpLmFwcGVuZCh0KCI8c3Bhbj4iLCB7CgkJCQkJCSJjbGFzcyI6IGkuZXh0QnJhbmQgKyAiX3Byb21vX3RleHQiCgkJCQkJfSkudGV4dCgi5L+D6ZSAIikpLmFwcGVuZCh0KCI8c3Bhbj4iLCB7CgkJCQkJCSJjbGFzcyI6IGkuZXh0QnJhbmQgKyAiX3JlZCIKCQkJCQl9KS50ZXh0KGUubnVtKSkpLCBuKDE2MCkuaW5zZXJ0UHJvbW9TaG93TGlzdChlKQoJCQkJfSwKCQkJCWYgPSBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIG4gPSAwOwoJCQkJCSIzNjBidXkiID09IGkuc2l0ZSA/IG4gPSAxMDAgOiAieWloYW9kaWFuIiA9PSBpLnNpdGUgPyBuID0gLTEzOCA6ICJkYW5nZGFuZyIgPT0gaS5zaXRlID8gbiA9IGxvY2F0aW9uLmhvc3QuaW5kZXhPZigic2VhcmNoIikgPiAtMSA/IDI3MCA6IDcwIDogImdvbWUiID09IGkuc2l0ZSA/IG4gPSAyMCA6ICJhbWF6b24iID09IGkuc2l0ZSAmJiAobiA9IDE5MCk7CgkJCQkJZm9yICh2YXIgYSA9IHQoZSArICIgPiAqIikubGVuZ3RoLCBvID0gdChlKS53aWR0aCgpLCByID0gMCwgcyA9IDA7IGEgPiBzOyBzKyspICJTQ1JJUFQiICE9IHQoZSArICIgPiAqIikuZXEocylbMF0ubm9kZU5hbWUgJiYgKHIgKz0gdChlICsgIiA+ICoiKS5lcShzKS5vdXRlcldpZHRoKCkpOwoJCQkJCXJldHVybiBvIC0gciAtIG4KCQkJCX0sCgkJCQlnID0gZnVuY3Rpb24oKSB7CgkJCQkJInlpaGFvZGlhbiIgPT0gaS5zaXRlICYmIHQoIi5iamRfc2VhcmNoX3Byb21vIikuYWRkQ2xhc3MoImhhY2t5aGQiKSwgImRhbmdkYW5nIiA9PSBpLnNpdGUgJiYgdCgiLmJqZF9zZWFyY2hfcHJvbW8iKS5hZGRDbGFzcygiaGFja2RhbmdkYW5nIiksICJnb21lIiA9PSBpLnNpdGUgJiYgdCgiLmJqZF9zZWFyY2hfcHJvbW8iKS5hZGRDbGFzcygiaGFja2dvbWUiKSwgImFtYXpvbiIgPT0gaS5zaXRlICYmIHQoIi5iamRfc2VhcmNoX3Byb21vIikuYWRkQ2xhc3MoImhhY2thbWF6b24iKQoJCQkJfSwKCQkJCV8gPSBmdW5jdGlvbigpIHsKCQkJCQlsb2NhdGlvbi5ob3N0LmluZGV4T2YoInNlYXJjaCIpID4gLTEgJiYgdChkW2kuc2l0ZV0uc2VhcmNoZG9tKS5sZW5ndGggPiAwICYmIChkW2kuc2l0ZV0uZG9tID0gZFtpLnNpdGVdLnNlYXJjaGRvbSkKCQkJCX0sCgkJCQl4ID0gZnVuY3Rpb24oZSkgewoJCQkJCV8oKTsKCQkJCQl2YXIgYSA9IGYoZFtpLnNpdGVdLmRvbSk7CgkJCQkJaWYgKCFoKCkgJiYgZFtpLnNpdGVdKSB7CgkJCQkJCXZhciBvID0gbigxOTgpLAoJCQkJCQkJciA9IHMuY29tcGlsZShvKSh7CgkJCQkJCQkJZGF0YTogZQoJCQkJCQkJfSk7CgkJCQkJCXAociwgZFtpLnNpdGVdLmRvbSwgZFtpLnNpdGVdLnBvcyksIGwubG9nKCLliJfooajpobXltYzlhaXkv4PplIDmtLvliqjlsZXnjrAiKSwgdCgiLmJqZF9zZWFyY2hfcHJvbW8iKS53aWR0aChhKSwgZygpLCB3KCkKCQkJCQl9CgkJCQl9LAoJCQkJdyA9IGZ1bmN0aW9uKCkgewoJCQkJCXQoIiNiamRfc2VhcmNoX3Byb21vIGEiKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQkJbC5sb2coIuWIl+ihqOmhteW1jOWFpeS/g+mUgOa0u+WKqOeCueWHuyIpCgkJCQkJfSkKCQkJCX07CgkJCWUuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7CgkJCQl2YXIgZSA9IGNbaS5zaXRlXSwKCQkJCQl0ID0gby5pbml0KDUpOwoJCQkJaWYgKGUgJiYgdCkgewoJCQkJCXZhciBuID0gdC5qb2luKCIsIiksCgkJCQkJCXMgPSBhLmluaXQoKSwKCQkJCQkJbCA9IGkuc2VydmVyICsgIi9leHRlbnNpb24/YWM9cHJvbW9fYnlfY2xhc3Mmc2l0ZV9pZD0iICsgZSArICImZnJvbV9kZXZpY2U9IiArIGkuZnJvbV9kZXZpY2UgKyAiJnVuaW9uPSIgKyBpLnVuaW9uICsgIiZjYXRfaWQ9IiArIGVuY29kZVVSSUNvbXBvbmVudChzLmNhdGVJZCkgKyAiJmNhdF9uYW1lPSIgKyBlbmNvZGVVUklDb21wb25lbnQocy5jYXRlTmFtZSkgKyAiJnVybHM9IiArIGVuY29kZVVSSUNvbXBvbmVudChuKTsKCQkJCQlyLmdldChsKS5kb25lKGZ1bmN0aW9uKGUpIHsKCQkJCQkJZSAmJiBlLm51bSA+IDAgJiYgKHUoZSksIHgoZS5wcm9tb3MpKQoJCQkJCX0pCgkJCQl9CgkJCX0KCQl9KS5jYWxsKHQsIG4oNiksIG4oMSkpCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCShmdW5jdGlvbih0LCBuKSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJdmFyIGkgPSBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9ICIiOwoJCQkJCXN3aXRjaCAodC5zaXRlKSB7CgkJCQkJCWNhc2UgIjM2MGJ1eSI6CgkJCQkJCQlpZiAoImxpc3QuamQuY29tIiA9PT0gbG9jYXRpb24uaG9zdCkgewoJCQkJCQkJCXZhciBpID0gZGVjb2RlVVJJQ29tcG9uZW50KGxvY2F0aW9uLmhyZWYpLm1hdGNoKC9jYXQ9KC4qKSg/OiZ8KS8pOwoJCQkJCQkJCWUgPSBpICYmIGlbMV07CgkJCQkJCQkJYnJlYWsKCQkJCQkJCX0KCQkJCQkJCWlmICgiaXRlbS5qZC5jb20iID09PSBsb2NhdGlvbi5ob3N0KSB7CgkJCQkJCQkJdmFyIGkgPSB3aW5kb3cucGFnZUNvbmZpZyAmJiB3aW5kb3cucGFnZUNvbmZpZy5wcm9kdWN0ICYmIHdpbmRvdy5wYWdlQ29uZmlnLnByb2R1Y3QuY2F0OwoJCQkJCQkJCWkgJiYgaS5qb2luICYmIChlID0gaS5qb2luKCIsIikpOwoJCQkJCQkJCWJyZWFrCgkJCQkJCQl9CgkJCQkJCQlicmVhazsKCQkJCQkJY2FzZSAieWloYW9kaWFuIjoKCQkJCQkJCWlmICgibGlzdC55aGQuY29tIiA9PT0gbG9jYXRpb24uaG9zdCkgewoJCQkJCQkJCXZhciBpID0gbG9jYXRpb24uaHJlZi5tYXRjaCgvbGlzdC55aGQuY29tXC9jKFxkKyktLyk7CgkJCQkJCQkJZSA9IGkgJiYgaVsxXTsKCQkJCQkJCQlicmVhawoJCQkJCQkJfQoJCQkJCQkJaWYgKCJpdGVtLnloZC5jb20iID09PSBsb2NhdGlvbi5ob3N0KSB7CgkJCQkJCQkJZSA9IG4oIiNjYXRlZ29yeUlkIikudmFsKCk7CgkJCQkJCQkJYnJlYWsKCQkJCQkJCX0KCQkJCQkJCWJyZWFrOwoJCQkJCQljYXNlICJkYW5nZGFuZyI6CgkJCQkJCQlpZiAoImNhdGVnb3J5LmRhbmdkYW5nLmNvbSIgPT09IGxvY2F0aW9uLmhvc3QpIHsKCQkJCQkJCQl2YXIgaSA9IGxvY2F0aW9uLmhyZWYubWF0Y2goL2NpZChcZCspLyk7CgkJCQkJCQkJZSA9IGkgJiYgaVsxXTsKCQkJCQkJCQlicmVhawoJCQkJCQkJfQoJCQkJCQkJaWYgKCJwcm9kdWN0LmRhbmdkYW5nLmNvbSIgPT09IGxvY2F0aW9uLmhvc3QpIHsKCQkJCQkJCQllID0gbigiI3BpZF9zcGFuIikuYXR0cigiY2F0ZWdvcnlfaWQiKTsKCQkJCQkJCQlicmVhawoJCQkJCQkJfQoJCQkJCQkJYnJlYWs7CgkJCQkJCWNhc2UgInN1bmluZyI6CgkJCQkJCQlpZiAoImxpc3Quc3VuaW5nLmNvbSIgPT09IGxvY2F0aW9uLmhvc3QpIHsKCQkJCQkJCQl2YXIgaSA9IGxvY2F0aW9uLmhyZWYubWF0Y2goL2xpc3Quc3VuaW5nLmNvbVwvXGQrLShcZCspLS8pOwoJCQkJCQkJCWUgPSBpICYmIGlbMV07CgkJCQkJCQkJYnJlYWsKCQkJCQkJCX0KCQkJCQkJCWlmICgicHJvZHVjdC5zdW5pbmcuY29tIiA9PT0gbG9jYXRpb24uaG9zdCkgewoJCQkJCQkJCWUgPSB3aW5kb3cuc24gJiYgd2luZG93LnNuLmNhdGVnb3J5SWQ7CgkJCQkJCQkJYnJlYWsKCQkJCQkJCX0KCQkJCQkJCWJyZWFrOwoJCQkJCQljYXNlICJnb21lIjoKCQkJCQkJCWlmICgibGlzdC5nb21lLmNvbS5jbiIgPT09IGxvY2F0aW9uLmhvc3QpIHsKCQkJCQkJCQl2YXIgaSA9IGxvY2F0aW9uLmhyZWYubWF0Y2goL2dvbWUuY29tLmNuXC9jYXQoXGQrKS4vKTsKCQkJCQkJCQllID0gaSAmJiBpWzFdOwoJCQkJCQkJCWJyZWFrCgkJCQkJCQl9CgkJCQkJCQlpZiAoIml0ZW0uZ29tZS5jb20uY24iID09PSBsb2NhdGlvbi5ob3N0KSB7CgkJCQkJCQkJdmFyIGkgPSB3aW5kb3cucHJkSW5mbyAmJiB3aW5kb3cucHJkSW5mby5jYXRJZC5yZXBsYWNlKCJjYXQiLCAiIik7CgkJCQkJCQkJZSA9IGkgJiYgaS5yZXBsYWNlKCJjYXQiLCAiIik7CgkJCQkJCQkJYnJlYWsKCQkJCQkJCX0KCQkJCQl9CgkJCQkJcmV0dXJuIGUKCQkJCX0sCgkJCQlhID0gZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGUgPSAiIjsKCQkJCQlpZiAoMSA9PT0gdC5wYWdlSW5mby50eXBlKSB7CgkJCQkJCWZvciAodmFyIGkgPSBbXSwgYSA9IG4ob1t0LnNpdGVdKSwgciA9IGEubGVuZ3RoLCBzID0gMDsgciA+IHM7IHMrKykgaS5wdXNoKGEuZXEocykudGV4dCgpKTsKCQkJCQkJZSA9IGkuam9pbigiIyIpCgkJCQkJfSBlbHNlIGUgPSB0LmRwLmNhdGVOYW1lOwoJCQkJCXJldHVybiBlCgkJCQl9LAoJCQkJbyA9IHsKCQkJCQkiMzYwYnV5IjogIiNKX2NydW1ic0JhciAuY3J1bWJzLW5hdi1pdGVtIC5tZW51LWRyb3AgLnRyaWdnZXIgLmN1cnIiLAoJCQkJCWdvbWU6ICIublNlYXJjaC1jcnVtYiAublNlYXJjaC1jcnVtYi1jYXRlZ29yeSAuY2F0ZWdvcnktbmFtZSIsCgkJCQkJc3VuaW5nOiAiI3NlYXJjaC1wYXRoIC5kaXItbGlzdCAuYnJlYWROYXYgYSwjc2VhcmNoLXBhdGggLmRpci1saXN0IC5icmVhZE5hdiArIHNwYW4ubCIsCgkJCQkJeWloYW9kaWFuOiAiLmNydW1iQ2xpcCAubGlzdENvbiBsaS5jcnVtYl9saXN0IGE6dmlzaWJsZSIsCgkJCQkJZGFuZ2Rhbmc6ICcjQiBhW25hbWU9IkIiXSwgI0Igc3Bhbi5jdXJyZW50JwoJCQkJfTsKCQkJZS5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHsKCQkJCXZhciBlID0gYSgpLAoJCQkJCXQgPSBpKCk7CgkJCQlyZXR1cm4gewoJCQkJCWNhdGVOYW1lOiBlLAoJCQkJCWNhdGVJZDogdAoJCQkJfQoJCQl9CgkJfSkuY2FsbCh0LCBuKDEpLCBuKDYpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCwgaSkgewoJCQkidXNlIHN0cmljdCI7CgkJCWUuZXhwb3J0cyA9IGZ1bmN0aW9uKGUpIHsKCQkJCXZhciBhID0gbigyNiksCgkJCQkJbyA9IG4oMTYpLAoJCQkJCXIgPSBuKDEzKTsKCQkJCWlmICghZSAmJiAhdC5uZXdfZXh0ZW5zaW9uKSByZXR1cm4gdm9pZCBpKCIjIiArIHQuZXh0QnJhbmQgKyAiLWN1IikuZmluZCgiLiIgKyB0LmV4dEJyYW5kICsgIi10YWIiKS5hdHRyKCJocmVmIiwgImh0dHA6Ly93d3cuIiArIHQuZXh0TmFtZSArICIuY29tL3Byb21vdGlvbi9hY3Rpdml0eS8/ZnJvbT1icm93c2VyJm09cHJvbW90aW9uIik7CgkJCQlpZiAodC5uZXdfZXh0ZW5zaW9uIHx8IGkoIiMiICsgdC5leHRCcmFuZCArICItY3UiKS5maW5kKCIuIiArIHQuZXh0QnJhbmQgKyAiLXRhYiIpLmF0dHIoImhyZWYiLCBlLnVybCksIGUgJiYgZS5wcm9tb3MgJiYgZS5wcm9tb3MubGVuZ3RoKSB7CgkJCQkJZS5wcm9tb3MgPSBlLnByb21vcy5zbGljZSgwLCA1KTsKCQkJCQl2YXIgcyA9IG4oMTk3KTsKCQkJCQlpKCIjIiArIHQuZXh0QnJhbmQgKyAiLWN1IikuYXBwZW5kKG8uY29tcGlsZShzKSh7CgkJCQkJCWRhdGE6IGUsCgkJCQkJCW5ld19leHRlbnNpb246IHQubmV3X2V4dGVuc2lvbiwKCQkJCQkJZXh0QnJhbmQ6IHQuZXh0QnJhbmQKCQkJCQl9KSksIGkoIiMiICsgdC5leHRCcmFuZCArICItY3UiKS5tb3VzZWVudGVyKGZ1bmN0aW9uKCkgewoJCQkJCQlpKHRoaXMpLmZpbmQoIi4iICsgdC5leHRCcmFuZCArICItdGFiIikuYWRkQ2xhc3ModC5leHRCcmFuZCArICItY29tcGFyZS1pdGVtLWhvdmVyIikuZW5kKCkuZmluZCgiLiIgKyB0LmV4dEJyYW5kICsgIi1kZXRhaWwiKS5zaG93KCksIGEoImhvdmVyOm1haW46Y3V4aWFvIiksIHIubG9nKCLkuLvlt6XlhbfmoI/kv4PplIDpvKDmoIfmgqzmta4iKQoJCQkJCX0pLm1vdXNlbGVhdmUoZnVuY3Rpb24oKSB7CgkJCQkJCWkodGhpcykuZmluZCgiLiIgKyB0LmV4dEJyYW5kICsgIi10YWIiKS5yZW1vdmVDbGFzcyh0LmV4dEJyYW5kICsgIi1jb21wYXJlLWl0ZW0taG92ZXIiKS5lbmQoKS5maW5kKCIuIiArIHQuZXh0QnJhbmQgKyAiLWRldGFpbCIpLmhpZGUoKQoJCQkJCX0pCgkJCQl9CgkJCX0KCQl9KS5jYWxsKHQsIG4oMSksIG4oNikpCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICc8ZGl2IGNsYXNzPSJ7e2V4dEJyYW5kfX0tZGV0YWlsIiBzdHlsZT0iZGlzcGxheTogbm9uZSI+XG4gIDxwIGNsYXNzPSJ7e2V4dEJyYW5kfX0tY29tcGFyZS1pdGVtLWRldGFpbC10aXRsZSB7e2V4dEJyYW5kfX0taGVpZ2h0LWF1dG8iPlxuICAgIDxzcGFuIGNsYXNzPSJ7e2V4dEJyYW5kfX0tZGV0YWlsLXRpdGxlLWRlc2MiPuacrOWVhuWfjuS/g+mUgOa0u+WKqCh7e2RhdGEubnVtfX0pPC9zcGFuPlxuICAgIHt7aWYgIW5ld19leHRlbnNpb259fVxuICAgIDxhIGhyZWY9Int7ZGF0YS51cmx9fSIgdGFyZ2V0PSJfYmxhbmsiIGNsYXNzPSJ7e2V4dEJyYW5kfX0tZ3JleSB7e2V4dEJyYW5kfX1fc2VlX2FsbCI+5p+l55yL5YWo6YOoPC9hPlxuICAgIHt7L2lmfX1cbiAgPC9wPlxuICA8dWwgaWQ9Int7ZXh0QnJhbmR9fV9wcm9tb19pdGVtX2xpc3QiIGNsYXNzPSJ7e2V4dEJyYW5kfX0taXRlbS1saXN0Ij5cbiAgICB7e2VhY2ggZGF0YS5wcm9tb3N9fVxuICAgICAgPGxpIGNsYXNzPSJ7e2V4dEJyYW5kfX0tbGlzdC1pdGVtIiBzdHlsZT0iZGlzcGxheTogYmxvY2siPlxuICAgICAgICA8cCBjbGFzcz0ie3tleHRCcmFuZH19LXByb2R1Y3QtdGl0bGUiPlxuICAgICAgICAgIDxhIGhyZWY9Int7JHZhbHVlLnVybH19IiBjbGFzcz0ie3tleHRCcmFuZH19LWdyZXkiIHRhcmdldD0iX2JsYW5rIiB0aXRsZT0ie3skdmFsdWUudGl0bGV9fSI+e3skdmFsdWUudGl0bGV9fTwvYT5cbiAgICAgICAgPC9wPlxuICAgICAgPC9saT5cbiAgICB7ey9lYWNofX1cbiAgPC91bD5cbjwvZGl2PicKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJZS5leHBvcnRzID0gJzxkaXYgY2xhc3M9ImJqZF9zZWFyY2hfcHJvbW8iIGlkPSJiamRfc2VhcmNoX3Byb21vIj5cbiAge3tlYWNoIGRhdGF9fVxuICAgIDxhIGhyZWY9Int7JHZhbHVlLnVybH19IiB0YXJnZXQ9Il9ibGFuayIgdGl0bGU9Int7JHZhbHVlLnRpdGxlfX0iPnt7JHZhbHVlLnRpdGxlfX08L2E+XG4gIHt7L2VhY2h9fVxuICA8c3R5bGUgdHlwZT0idGV4dC9jc3MiPlxuICAgIC5iamRfc2VhcmNoX3Byb21vIHtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIGhlaWdodDogMjBweDtcbiAgICAgIGxpbmUtaGVpZ2h0OiAyMHB4O1xuICAgICAgd2lkdGg6IDEwMDBweDtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgfVxuICAgICNiamRfc2VhcmNoX3Byb21vLmhhY2t5aGQge1xuICAgICAgZmxvYXQ6IHJpZ2h0O1xuICAgICAgbWFyZ2luLXRvcDogOHB4O1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgei1pbmRleDogMjI7XG4gICAgfVxuICAgICNiamRfc2VhcmNoX3Byb21vLmhhY2tkYW5nZGFuZywgI2JqZF9zZWFyY2hfcHJvbW8uaGFja2dvbWV7XG4gICAgICB0b3A6IDZweDtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsgICAgXG4gICAgfVxuICAgICNiamRfc2VhcmNoX3Byb21vLmhhY2thbWF6b24ge1xuICAgICAgdG9wOiA1cHg7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7ICAgIFxuICAgIH1cbiAgICAjYmpkX3NlYXJjaF9wcm9tby5oYWNrZGFuZ2RhbmcgYSB7XG4gICAgICBjb2xvcjogIzY2NjtcbiAgICB9XG4gICAgI2JqZF9zZWFyY2hfcHJvbW8gYTpob3ZlciB7XG4gICAgICBjb2xvcjogIzE3OTBkZDtcbiAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICB9XG4gICAgLmJqZF9zZWFyY2hfcHJvbW8gYSB7XG4gICAgICBtYXJnaW4tbGVmdDogMTlweDtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICB9XG4gIDwvc3R5bGU+XG48L2Rpdj4nCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICc8ZGl2IGlkPSJ7e2V4dEJyYW5kfX1fc2VhcmNobG93cHJpX2RldGFpbCIgY2xhc3M9InBhbmVsIHByaWNlX2NvbXBhcmUiPlxuICA8ZGl2IGNsYXNzPSJwYW5lbC13cmFwIj5cbiAgICA8ZGl2IGNsYXNzPSJwYWdlcyI+XG4gICAgICDnrKwmbmJzcDtcbiAgICAgIDxzcGFuIGlkPSJzZWFyY2hsb3dwcmktY3VycmVudC1wYWdlIiBjbGFzcz0iY3VycmVudC1wYWdlIj4xPC9zcGFuPlxuICAgICAgJm5ic3A76aG177yM5YWxJm5ic3A7XG4gICAgICA8c3BhbiBpZD0ic2VhcmNobG93cHJpLXBhZ2UtbnVtIiBjbGFzcz0icGFnZS1udW0iPjE8L3NwYW4+XG4gICAgICAmbmJzcDvpobVcbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPSJsZWZ0LXBhZ2UgZ3dkc2V0dGluZ19iZyI+XG4gICAgICA8YSB0aXRsZT0i5LiK5LiA6aG1IiB0YXJnZXQ9Il9zZWxmIiBocmVmPSJqYXZhc2NyaXB0OiI+PC9hPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9ImFsbC1wcm9kdWN0cyI+XG4gICAgICA8dWwgaWQ9InNlYXJjaGxvd3ByaS1pdGVtLWxpc3QiPlxuICAgICAgICB7e2VhY2ggZGF0YX19XG4gICAgICAgICAgPGxpIGlkPSJzZWFyY2hsb3dwcmktcHJvZC1pdGVtLXt7JGluZGV4fX0iPlxuICAgICAgICAgICAgPGEgaHJlZj0ie3skdmFsdWUudXJsfX0iIHRhcmdldD0iX2JsYW5rIiB0aXRsZT0ie3skdmFsdWUudGl0bGV9fSIgY2xhc3M9InNtYWxsLWltZyI+XG4gICAgICAgICAgICAgIDxpbWcgc3JjPSJ7eyR2YWx1ZS5pbWdfdXJsfX0iPlxuICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICA8YSBjbGFzcz0ie3tleHRCcmFuZH19LXByaWNlIj7CpXt7JHZhbHVlLnByaWNlfX08L2E+XG4gICAgICAgICAgICAgIDxhIGhyZWY9Int7JHZhbHVlLnVybH19IiB0YXJnZXQ9Il9ibGFuayIgY2xhc3M9ImdyYXlfcHJpY2Uge3skdmFsdWUucHJpY2VkZXNjP1wnXCcgOiBcJ190aHJvdWdoXCd9fSIgPlxuICAgICAgICAgICAgICAgIHt7aWYgJHZhbHVlLnByaWNlZGVzY319XG4gICAgICAgICAgICAgICAgICB7eyR2YWx1ZS5wcmljZWRlc2N9fVxuICAgICAgICAgICAgICAgIHt7ZWxzZX19XG4gICAgICAgICAgICAgICAgICB7eyR2YWx1ZS5sYXN0X3ByaWNlfX1cbiAgICAgICAgICAgICAgICB7ey9pZn19XG4gICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgPGEgY2xhc3M9ImdldF9wcmljZSI+XG4gICAgICAgICAgICAgICAge3tpZiAkdmFsdWUubmV3X3ByaWNlfX1cbiAgICAgICAgICAgICAgICAgIOWIsOaJi+S7t8Kle3skdmFsdWUubmV3X3ByaWNlfX1cbiAgICAgICAgICAgICAgICB7ey9pZn19XG4gICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgPGEgaHJlZj0ie3skdmFsdWUudXJsfX0iIHRhcmdldD0iX2JsYW5rIiB0aXRsZT0ie3skdmFsdWUudGl0bGV9fSI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9Int7ZXh0QnJhbmR9fV90aXRsZSI+e3skdmFsdWUudGl0bGV9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgIHt7L2VhY2h9fVxuICAgICAgPC91bD5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPSJyaWdodC1wYWdlIGd3ZHNldHRpbmdfYmciPlxuICAgICAgPGEgdGl0bGU9IuS4i+S4gOmhtSIgdGFyZ2V0PSJfc2VsZiIgaHJlZj0iamF2YXNjcmlwdDoiPjwvYT5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4gIDxkaXYgY2xhc3M9InBhbmVsLXNoYWRvdyI+PC9kaXY+XG4gIDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+XG4gICAgI3t7ZXh0QnJhbmR9fV9zZWFyY2hsb3dwcmkubV9ob3ZlcntcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gICAgICBjb2xvcjogIzE3N0VFNTtcbiAgICB9XG4gICAgI3t7ZXh0QnJhbmR9fV9zZWFyY2hsb3dwcmkge1xuICAgICAgYm9yZGVyLXJpZ2h0OiAxcHggZGFzaGVkICNkZGQ7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICB9XG4gICAgI3t7ZXh0QnJhbmR9fV9zZWFyY2hsb3dwcmkgc3BhbiB7XG4gICAgICBjb2xvcjogI0U1MjYwMDtcbiAgICB9XG4gICAgI3t7ZXh0QnJhbmR9fV9zZWFyY2hsb3dwcmlfZGV0YWlse1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG4gICAgI3t7ZXh0QnJhbmR9fV9zZWFyY2hsb3dwcmlfZGV0YWlsIC5sZWZ0LXBhZ2V7XG4gICAgICBsZWZ0OiA1cHg7XG4gICAgfVxuICAgICN7e2V4dEJyYW5kfX1fc2VhcmNobG93cHJpX2RldGFpbCAuYWxsLXByb2R1Y3Rze1xuICAgICAgbGVmdDogMzVweDtcbiAgICB9XG4gICAgXG4gICAgI3t7ZXh0QnJhbmR9fV9zZWFyY2hsb3dwcmlfZGV0YWlsIC57e2V4dEJyYW5kfX0tcHJpY2U6aG92ZXIsICN7e2V4dEJyYW5kfX1fc2VhcmNobG93cHJpX2RldGFpbCAuZ2V0X3ByaWNlOmhvdmVyIHtcbiAgICAgIGNvbG9yOiAjRTUyNjAwO1xuICAgICAgY3Vyc29yOiB0ZXh0O1xuICAgIH1cbiAgICAue3tleHROYW1lfX0tbWFpbiAucGFuZWwtd3JhcCAuYWxsLXByb2R1Y3RzIHVsIGxpIGEgaW1ne1xuICAgICAgd2lkdGg6IDkwcHg7XG4gICAgfVxuICAgIC57e2V4dE5hbWV9fS1tYWluIC5wYW5lbC13cmFwIC5hbGwtcHJvZHVjdHMgdWwgbGkgLnNtYWxsLWltZ3tcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB9XG4gICAgI3NlYXJjaGxvd3ByaS1pdGVtLWxpc3QgbGkge1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIH1cbiAgICAuYWxsLXByb2R1Y3RzIC5ncmF5X3ByaWNlLCAuYWxsLXByb2R1Y3RzIC5nZXRfcHJpY2Uge1xuICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICB3aWR0aDogMTgwcHg7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgaGVpZ2h0OiAyMHB4O1xuICAgICAgbGluZS1oZWlnaHQ6IDIwcHg7XG4gICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICBmb250LXNpemU6IDEycHg7XG4gICAgfVxuICAgIC5hbGwtcHJvZHVjdHMgLmdyYXlfcHJpY2Uge1xuICAgICAgY29sb3I6ICM5OTkhaW1wb3J0YW50O1xuICAgICAgXG4gICAgfVxuICAgIC5hbGwtcHJvZHVjdHMgLmdyYXlfcHJpY2UuX3Rocm91Z2gge1xuICAgICAgdGV4dC1kZWNvcmF0aW9uOiBsaW5lLXRocm91Z2ghaW1wb3J0YW50O1xuICAgIH1cbiAgICAuYWxsLXByb2R1Y3RzIC5nZXRfcHJpY2Uge1xuICAgICAgY29sb3I6ICNFNTI2MDA7XG4gICAgfVxuICAgIC5hbGwtcHJvZHVjdHMgLmdldF9wcmljZTpob3ZlciB7XG4gICAgICBjb2xvcjogI0U1MjYwMDtcbiAgICB9XG4gIDwvc3R5bGU+XG48L2Rpdj4nCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICd7e2VhY2ggZGF0YX19XG48bGkgY2xhc3M9InNlYXJjaF9pdGVtX2xpc3QgIj5cbiAgPHNwYW4gY2xhc3M9Int7ZXh0QnJhbmR9fS1jb21wYXJlLWl0ZW0iPlxuICAgIDxhIGhyZWY9Int7JHZhbHVlLnVybH19IiB0aXRsZT0ie3skdmFsdWUudGl0bGV9fSIgdGFyZ2V0PSJfYmxhbmsiPlxuICAgICAge3skdmFsdWUudGl0bGV9fVxuICAgIDwvYT5cbiAgPC9zcGFuPlxuICA8ZGl2IGNsYXNzPSJ7e2V4dEJyYW5kfX0tY29tcGFyZS1pdGVtLWRldGFpbCByZS17e2V4dEJyYW5kfX0tY29tcGFyZS1pdGVtLWRldGFpbCB7e2V4dEJyYW5kfX0tY29tcGFyZS1pdGVtLWRldGFpbC1maXhlZCB7e2V4dEJyYW5kfX0tbGlzdC1pdGVtICI+XG4gICAgPGEgY2xhc3M9Int7ZXh0QnJhbmR9fS1waWMiIGhyZWY9Int7JHZhbHVlLnVybH19IiB0YXJnZXQ9Il9ibGFuayIgdGl0bGU9Int7JHZhbHVlLnRpdGxlfX0iPlxuICAgICAgPGltZyBzcmM9Int7JHZhbHVlLmltZ191cmx9fSIgZGF0YS1vcmlnaW5hbD0ie3tzX3NlcnZlcn19L2ltYWdlcy9kcF9kZWZhdWx0LmpwZyIgPlxuICAgIDwvYT5cbiAgICA8YSBjbGFzcz0ie3tleHRCcmFuZH19LXByb2R1Y3QtdGl0bGUiIGhyZWY9Int7JHZhbHVlLnVybH19IiB0YXJnZXQ9Il9ibGFuayIgdGl0bGU9Int7JHZhbHVlLnRpdGxlfX0iPlxuICAgICAge3skdmFsdWUudGl0bGV9fVxuICAgIDwvYT5cbiAgICA8c3BhbiBjbGFzcz0ie3tleHRCcmFuZH19LXByaWNlIiA+XG4gICAgICDCpXt7JHZhbHVlLnByaWNlfX1cbiAgICA8L3NwYW4+XG4gICAgPGEgaHJlZj0ie3skdmFsdWUudXJsfX0iIHRhcmdldD0iX2JsYW5rIiBjbGFzcz0iZ3JheV9wcmljZSB7eyR2YWx1ZS5wcmljZWRlc2M/XCdcJyA6IFwnX3Rocm91Z2hcJ319IiBcbiAgICAgIHRpdGxlPSJcbiAgICAgIHt7aWYgJHZhbHVlLnByaWNlZGVzY319XG4gICAgICAgIOagh+S7t8KlJHt7JHZhbHVlLnByaWNlfX0ge3skdmFsdWUucHJpY2VkZXNjfX1cbiAgICAgIHt7L2lmfX1cbiAgICAgICIgICBcbiAgICA+XG4gICAgICB7e2lmICR2YWx1ZS5wcmljZWRlc2N9fVxuICAgICAgICB7eyR2YWx1ZS5wcmljZWRlc2N9fVxuICAgICAge3tlbHNlfX1cbiAgICAgICAgwqV7eyR2YWx1ZS5sYXN0X3ByaWNlfX1cbiAgICAgIHt7L2lmfX1cbiAgICA8L2E+XG4gICAgPHNwYW4gY2xhc3M9ImdldF9wcmljZSI+XG4gICAgICB7e2lmICR2YWx1ZS5uZXdfcHJpY2V9fVxuICAgICAgICDliLDmiYvku7fCpXt7JHZhbHVlLm5ld19wcmljZX19XG4gICAgICB7ey9pZn19XG4gICAgPC9zcGFuPlxuICA8L2Rpdj5cbjwvbGk+XG57ey9lYWNofX1cbjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+XG4gIHt7ZG9tTmFtZX19IC5sb3dlc3RfcHJpY2VfYnRuIHtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgZmxvYXQ6IGxlZnQ7XG4gICAgd2lkdGg6IDE1MHB4O1xuICAgIGhlaWdodDogNjBweDtcbiAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjZWVlO1xuICB9XG4gIHt7ZG9tTmFtZX19IC57e2V4dEJyYW5kfX1fZmlyc3Qge1xuICAgIG1hcmdpbi10b3A6IDhweDtcbiAgfVxuICB7e2RvbU5hbWV9fSAubG93ZXN0X3ByaWNlX2J0biBhIHtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgICBoZWlnaHQ6IDIycHg7XG4gICAgbGluZS1oZWlnaHQ6IDIycHg7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICBjb2xvcjogIzMzMztcbiAgfVxuICAubG93ZXN0X3ByaWNlX2J0biBhIHNwYW57XG4gICAgY29sb3I6ICNFNTI2MDA7XG4gIH1cbiAgLnt7ZXh0QnJhbmR9fS1jb21wYXJlIGxpIC57e2V4dEJyYW5kfX0tY29tcGFyZS1pdGVtIGF7XG4gICAgd2lkdGg6IDEwMHB4O1xuICAgIGhlaWdodDogNDBweDtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgbGluZS1oZWlnaHQ6IDIwcHg7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgfVxuICB7e2RvbU5hbWV9fSAue3tleHRCcmFuZH19LWNvbXBhcmU+bGl7XG4gICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgI2VlZTtcbiAgfVxuICB7e2RvbU5hbWV9fSAue3tleHRCcmFuZH19LWNvbXBhcmUgbGkgLnt7ZXh0QnJhbmR9fS1jb21wYXJlLWl0ZW0gYXtcbiAgICBjb2xvcjogIzMzMztcbiAgfVxuICAuc2VhcmNoX2l0ZW1fbGlzdCAue3tleHRCcmFuZH19X2Zhdm9yX2hvdmVyIHtcbiAgICB3aWR0aDogMTAwcHg7XG4gICAgcGFkZGluZy1ib3R0b206IDJweDtcbiAgfVxuICAue3tleHRCcmFuZH19X3N1bmluZyAuc2VhcmNoX2l0ZW1fbGlzdCAue3tleHRCcmFuZH19X2Zhdm9yX2hvdmVyIHtcbiAgICBwYWRkaW5nLWJvdHRvbTogN3B4O1xuICB9XG4gIC5zZWFyY2hfaXRlbV9saXN0IC57e2V4dEJyYW5kfX0tY29tcGFyZS1pdGVtLWRldGFpbCB7XG4gICAgd2lkdGg6IDIwMHB4O1xuICAgIGhlaWdodDogMTgwcHg7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgbWFyZ2luLWxlZnQ6IC0zMnB4O1xuICB9XG4gIC5zZWFyY2hfaXRlbV9saXN0IC57e2V4dEJyYW5kfX0tY29tcGFyZS1pdGVtLWRldGFpbCAue3tleHRCcmFuZH19LXBpYyBpbWcge1xuICAgIGhlaWdodDogOTBweDtcbiAgICBoZWlnaHQ6IDkwcHg7XG4gIH1cbiAgLnNlYXJjaF9pdGVtX2xpc3QgLnt7ZXh0QnJhbmR9fS1wcmljZSB7XG4gICAgbGluZS1oZWlnaHQ6IDE0cHg7XG4gIH1cbiAgLmdyYXlfcHJpY2UsIC5nZXRfcHJpY2Uge1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIHdpZHRoOiAyMDBweDtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBoZWlnaHQ6IDE2cHg7XG4gICAgbGluZS1oZWlnaHQ6IDE2cHg7XG4gICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICBmb250LXNpemU6IDEycHg7XG4gIH1cbiAge3tkb21OYW1lfX0gLmdyYXlfcHJpY2Uge1xuICAgIGNvbG9yOiAjOTk5O1xuICB9XG4gIHt7ZG9tTmFtZX19IC5ncmF5X3ByaWNlLl90aHJvdWdoIHtcbiAgICB0ZXh0LWRlY29yYXRpb246IGxpbmUtdGhyb3VnaDtcbiAgfVxuICAuZ2V0X3ByaWNlIHtcbiAgICBjb2xvcjogI0U1MjYwMDtcbiAgfVxuPC9zdHlsZT4nCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICc8dWwgaWQ9Int7ZXh0QnJhbmR9fS1jb21wYXJlLXNlYXJjaGxvd3ByaSJjbGFzcz0ie3tleHRCcmFuZH19LWNsb3NlLW1vZHVsZSB7e2V4dEJyYW5kfX0tZGVzYyB7e2V4dEJyYW5kfX0tY29tcGFyZSI+XG4gIDxsaSAgaWQ9Int7ZXh0QnJhbmR9fS1zZWFyY2hsb3dwcmkiIHBhZ2VzPSJ7e3BhZ2VJbmZvLnBhZ2VzP1wnXCc6XCcxXCd9fSIgbGVuPSJ7e3BhZ2VJbmZvLnBhZ2VzP1wnXCc6cGFnZUluZm8uZHBudW19fSI+XG4gICAgPGEgY2xhc3M9InNlYXJjaGxvd3ByaV9idG4iPlxuICAgICAgPHNwYW4gY2xhc3M9Imxvd19wcmlfaW9jbiI+Li4uPC9zcGFuPlxuICAgIDwvYT5cbiAgICA8ZGl2IGlkPSJ7e2V4dEJyYW5kfX1fc2VhcmNobG93cHJpX2RldGFpbCIgY2xhc3M9Int7ZXh0QnJhbmR9fS1jb21wYXJlLWl0ZW0tZGV0YWlsIHJlLXt7ZXh0QnJhbmR9fS1jb21wYXJlLWl0ZW0tZGV0YWlsIHt7ZXh0QnJhbmR9fS1jb21wYXJlLWl0ZW0tZGV0YWlsLWZpeGVkIiBzdHlsZT0id2lkdGg6e3twYWdlSW5mby5wYWdld2lkdGh9fXB4Ij5cbiAgICAgIDxwIGNsYXNzPSJ7e2V4dEJyYW5kfX0tY29tcGFyZS1pdGVtLWRldGFpbC10aXRsZSB7e2V4dEJyYW5kfX0taGVpZ2h0LWF1dG8ge3tleHRCcmFuZH19LWNvbXBhcmUtaXRlbS1kZXRhaWwtdGl0bGUtZml4ZWQiPlxuICAgICAgICA8c3BhbiBjbGFzcz0ie3tleHRCcmFuZH19LWNvbXBhcmUtaXRlbS1kZXRhaWwtdGl0bGUtZGVzYyI+5b2T5YmN6aG15aSE5LqO5Y6G5Y+y5pyA5L2O5Lu355qE5ZWG5ZOBPC9zcGFuPlxuICAgICAgPC9wPlxuICAgICAgPGRpdiBjbGFzcz0ie3tleHRCcmFuZH19LWNvbXBhcmUtcHJldi1wYWdlIHt7ZXh0QnJhbmR9fS1sZWZ0IiBzdHlsZT0iZGlzcGxheTp7e3BhZ2VJbmZvLnBhZ2VzP1wnYmxvY2tcJzpcJ25vbmVcJ319Ij5cbiAgICAgICAgPGRpdiBjbGFzcz0ie3tleHRCcmFuZH19LWJnIHBhZ2UtYXJyb3ciPjwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8dWwgY2xhc3M9Int7ZXh0QnJhbmR9fS1pdGVtLWxpc3QiPlxuICAgICAgICB7e2VhY2ggZGF0YX19XG4gICAgICAgICAgPGxpIGNsYXNzPSJ7e2V4dEJyYW5kfX0tbGlzdC1pdGVtICIgc3R5bGU9ImRpc3BsYXk6e3skaW5kZXg+PXBhZ2VJbmZvLnBlclBhZ2VTaXplP1wnbm9uZVwnOlwnYmxvY2tcJ319Ij5cbiAgICAgICAgICAgIDxhIGNsYXNzPSJ7e2V4dEJyYW5kfX0tcGljIiBocmVmPSJ7eyR2YWx1ZS51cmx9fSIgdGFyZ2V0PSJfYmxhbmsiIHRpdGxlPSJ7eyR2YWx1ZS50aXRsZX19Ij5cbiAgICAgICAgICAgICAgPGltZyBzcmM9Int7c19zZXJ2ZXJ9fS9pbWFnZXMvZHBfZGVmYXVsdC5qcGciIGRhdGEtb3JpZ2luYWw9Int7JHZhbHVlLmltZ191cmx9fSIgPlxuICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgPGEgY2xhc3M9Int7ZXh0QnJhbmR9fS1wcm9kdWN0LXRpdGxlIiBocmVmPSJ7eyR2YWx1ZS51cmx9fSIgdGFyZ2V0PSJfYmxhbmsiIHRpdGxlPSJ7eyR2YWx1ZS50aXRsZX19Ij5cbiAgICAgICAgICAgICAge3skdmFsdWUudGl0bGV9fVxuICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9Int7ZXh0QnJhbmR9fS1wcmljZSIgPlxuICAgICAgICAgICAgICDCpXt7JHZhbHVlLnByaWNlfX1cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDxhIGhyZWY9Int7JHZhbHVlLnVybH19IiB0YXJnZXQ9Il9ibGFuayIgY2xhc3M9ImdyYXlfcHJpY2Uge3skdmFsdWUucHJpY2VkZXNjP1wnXCcgOiBcJ190aHJvdWdoXCd9fSIgXG4gICAgICAgICAgICAgIHRpdGxlPSJcbiAgICAgICAgICAgICAge3tpZiAkdmFsdWUucHJpY2VkZXNjfX1cbiAgICAgICAgICAgICAgICB7eyR2YWx1ZS5wcmljZWRlc2N9fVxuICAgICAgICAgICAgICB7ey9pZn19XG4gICAgICAgICAgICAgICIgICBcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge3tpZiAkdmFsdWUucHJpY2VkZXNjfX1cbiAgICAgICAgICAgICAgICB7eyR2YWx1ZS5wcmljZWRlc2N9fVxuICAgICAgICAgICAgICB7e2Vsc2V9fVxuICAgICAgICAgICAgICAgIMKle3skdmFsdWUubGFzdF9wcmljZX19XG4gICAgICAgICAgICAgIHt7L2lmfX1cbiAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJnZXRfcHJpY2UiPlxuICAgICAgICAgICAgICB7e2lmICR2YWx1ZS5uZXdfcHJpY2V9fVxuICAgICAgICAgICAgICAgIOWIsOaJi+S7t8Kle3skdmFsdWUubmV3X3ByaWNlfX1cbiAgICAgICAgICAgICAge3svaWZ9fVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgIHt7L2VhY2h9fVxuICAgICAgPC91bD5cbiAgICAgIDxkaXYgY2xhc3M9Int7ZXh0QnJhbmR9fS1jb21wYXJlLW5leHQtcGFnZSB7e2V4dEJyYW5kfX0tcmlnaHQiIHN0eWxlPSJkaXNwbGF5Ont7cGFnZUluZm8ucGFnZXM/XCdibG9ja1wnOlwnbm9uZVwnfX0iPlxuICAgICAgICA8ZGl2IGNsYXNzPSJ7e2V4dEJyYW5kfX0tYmcgcGFnZS1hcnJvdyI+PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9Int7ZXh0QnJhbmR9fS1iMmMtUGFnZVZpZXcge3tleHRCcmFuZH19LWIyYy1QYWdlVmlldy1maXhlZCIgc3R5bGU9ImRpc3BsYXk6e3twYWdlSW5mby5wYWdlcz9cJ2Jsb2NrXCc6XCdub25lXCd9fSI+XG4gICAgICAgIDxwIGNsYXNzPSJ7e2V4dEJyYW5kfX0tY29tcGFyZS1pdGVtLWRldGFpbC10aXRsZSIgc3R5bGU9ImhlaWdodDphdXRvOyI+XG4gICAgICAgICAgPHNwYW4gc3R5bGU9ImZsb2F0Om5vbmU7cGFkZGluZy1sZWZ0OjEwcHg7IiBjbGFzcz0ie3tleHRCcmFuZH19LWNvbXBhcmUtaXRlbS1kZXRhaWwtcGFnZXMiPlxuICAgICAgICAgICAgPGVtIGlkPSJwYWdlLW5vdy1zZWFyY2hsb3dwcmkiIGNsYXNzPSJwYWdlLW5vdyI+XG4gICAgICAgICAgICAgIDFcbiAgICAgICAgICAgIDwvZW0+XG4gICAgICAgICAgICAvXG4gICAgICAgICAgICA8ZW0gaWQ9InBhZ2UtdG90YWwtc2VhcmNobG93cHJpIiBjbGFzcz0icGFnZS10b3RhbCI+XG4gICAgICAgICAgICAgIHt7cGFnZUluZm8ucGFnZW51bX19XG4gICAgICAgICAgICA8L2VtPlxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPC9wPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj5cbiAgICAgICN7e2V4dEJyYW5kfX0tY29tcGFyZS1zZWFyY2hsb3dwcml7XG4gICAgICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgI2VlZTtcbiAgICAgIH1cbiAgICAgICN7e2V4dEJyYW5kfX0tY29tcGFyZS1zZWFyY2hsb3dwcmk+bGkge1xuICAgICAgICBoZWlnaHQ6IDYwcHg7XG4gICAgICB9XG4gICAgICAje3tleHRCcmFuZH19LWNvbXBhcmUtc2VhcmNobG93cHJpIC57e2V4dEJyYW5kfX0tcHJpY2Uge1xuICAgICAgICBsaW5lLWhlaWdodDogMTRweDtcbiAgICAgIH1cbiAgICAgIC5zZWFyY2hsb3dwcmlfYnRue1xuICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgIGhlaWdodDogMzdweDtcbiAgICAgICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjZmZmO1xuICAgICAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjZmZmO1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgYmFja2dyb3VuZDogI2ZmZjtcbiAgICAgICAgbWFyZ2luLXRvcDogMTVweDtcbiAgICAgICAgd2lkdGg6IDMzcHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cbiAgICAgICN7e2V4dEJyYW5kfX0tY29tcGFyZS1zZWFyY2hsb3dwcmkgLnNlYXJjaGxvd3ByaV9idG5faG92ZXIge1xuICAgICAgICBtYXJnaW4tdG9wOiAtMXB4O1xuICAgICAgICBib3JkZXItYm90dG9tOiA0cHggc29saWQgIzE3OTBkZDtcbiAgICAgICAgcGFkZGluZy1ib3R0b206IDdweDtcbiAgICAgIH1cbiAgICAgICN7e2V4dEJyYW5kfX1fc2VhcmNobG93cHJpX2RldGFpbHtcbiAgICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgfVxuICAgICAgI3t7ZXh0QnJhbmR9fV9zZWFyY2hsb3dwcmlfZGV0YWlsIGltZ3tcbiAgICAgICAgd2lkdGg6IDkwcHg7XG4gICAgICB9XG4gICAgICAje3tleHRCcmFuZH19X3NlYXJjaGxvd3ByaV9kZXRhaWwgLnt7ZXh0QnJhbmR9fS1waWN7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIH1cbiAgICAgICN7e2V4dEJyYW5kfX1fc2VhcmNobG93cHJpX2RldGFpbCAue3tleHRCcmFuZH19LXBpYz5zcGFue1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxNnB4O1xuICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlYTU1MTQ7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgYm90dG9tOiAwICFpbXBvcnRhbnQ7XG4gICAgICAgIHRvcDogNzRweCAhaW1wb3J0YW50O1xuICAgICAgICBsZWZ0OiAwICFpbXBvcnRhbnQ7XG4gICAgICAgIHJpZ2h0OiA0OHB4ICFpbXBvcnRhbnQ7XG4gICAgICB9XG4gICAgICAje3tleHRCcmFuZH19X3NlYXJjaGxvd3ByaV9kZXRhaWwgLnt7ZXh0QnJhbmR9fS1jb21wYXJlLWl0ZW0tZGV0YWlsLXRpdGxlLCAje3tleHRCcmFuZH19X3NlYXJjaGxvd3ByaV9kZXRhaWwgLnt7ZXh0QnJhbmR9fS1iMmMtUGFnZVZpZXcge1xuICAgICAgICBib3R0b206IDI0MXB4O1xuICAgICAgfVxuICAgICAgI3t7ZXh0QnJhbmR9fV9zZWFyY2hsb3dwcmlfZGV0YWlsIC57e2V4dEJyYW5kfX0tY29tcGFyZS1uZXh0LXBhZ2V7XG4gICAgICAgIHRvcDogMHB4O1xuICAgICAgfVxuICAgICAgLmxvd19wcmlfaW9jbntcbiAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICBoZWlnaHQ6IDI1cHg7XG4gICAgICAgIHdpZHRoOiAyNXB4O1xuICAgICAgICBsaW5lLWhlaWdodDogMjVweDtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBtYXJnaW4tdG9wOiA1cHg7XG4gICAgICB9XG4gICAgICAuc2VhcmNobG93cHJpX2J0bl9ob3ZlciAubG93X3ByaV9pb2Nue1xuICAgICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgICB9XG4gICAgICAje3tleHRCcmFuZH19LWNvbXBhcmUtc2VhcmNobG93cHJpIC57e2V4dEJyYW5kfX0tcHJpY2Ugc3BhbiB7XG4gICAgICAgIGNvbG9yOiAjOTk5O1xuICAgICAgICB0ZXh0LWRlY29yYXRpb246IGxpbmUtdGhyb3VnaDtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG4gICAgICB9XG4gICAgICAje3tleHRCcmFuZH19X3NlYXJjaGxvd3ByaV9kZXRhaWwgLnNlYXJjaGxvd3ByaV9kZXNjIHtcbiAgICAgICAgYmFja2dyb3VuZDogdXJsKFwne3tzX3NlcnZlcn19L2ltYWdlcy9zZWFyY2hsb3dwcmlfZGVzYy5wbmdcJyk7XG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgIGhlaWdodDogMTVweDtcbiAgICAgICAgd2lkdGg6IDQ1cHg7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgdG9wOiA3N3B4O1xuICAgICAgICBsZWZ0OiAxMDFweDtcbiAgICAgIH1cbiAgICAgICN7e2V4dEJyYW5kfX1fc2VhcmNobG93cHJpX2RldGFpbCAue3tleHRCcmFuZH19LWl0ZW0tbGlzdCAubGF0ZXN0Q3JlYXRlIHtcbiAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDBweCAtMTEzcHg7O1xuICAgICAgfVxuICAgICAgI3t7ZXh0QnJhbmR9fV9zZWFyY2hsb3dwcmlfZGV0YWlsIC57e2V4dEJyYW5kfX0taXRlbS1saXN0IC5oaWdoZXN0X2Rpc2NvdW50IHtcbiAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDBweCAtMTRweDtcbiAgICAgIH1cbiAgICA8L3N0eWxlPlxuICA8L2xpPlxuPC91bD4nCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCShmdW5jdGlvbih0LCBpKSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJdmFyIGEgPSBuKDIwMyksCgkJCQlvID0gbigxNiksCgkJCQlyID0gMCwKCQkJCXMgPSBuKDE4KSwKCQkJCWwgPSBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9ICc8YSBpZD0iJyArIHQuZXh0QnJhbmQgKyAnX2hpc3RvcnkiIGNsYXNzPSInICsgdC5leHRCcmFuZCArICctY2xvc2UtbW9kdWxlIj4gPHNwYW4+PGVtPjwvZW0+5rWP6KeI5Y6G5Y+yPC9zcGFuPjwvYT4nLAoJCQkJCQluID0gaSgiLiIgKyB0LmV4dEJyYW5kICsgIl9vcHRpb25fc2V0dGluZyIpOwoJCQkJCXQubmV3X2V4dGVuc2lvbiAmJiAobiA9IGkoIi5mZWVkYmFja19idG4iKSksIG4uYWZ0ZXIoby5jb21waWxlKGUpKCkpCgkJCQl9LAoJCQkJYyA9IGZ1bmN0aW9uKCkgewoJCQkJCWkoIiMiICsgdC5leHROYW1lICsgIi1mZWVkLWNsb3NlIikuYWRkQ2xhc3MoIl9uZXdiYXIxIiksIGkoIiMiICsgdC5leHROYW1lICsgIi1tYWluIikuYWRkQ2xhc3MoIl9uZXdiYXIyIikKCQkJCX0sCgkJCQlkID0gZnVuY3Rpb24oKSB7CgkJCQkJYygpOwoJCQkJCXZhciBlID0gJzxhIGlkPSInICsgdC5leHRCcmFuZCArICdfaGlzdG9yeSI+IDxlbSBjbGFzcz0ibmV3Yi1iZyI+PC9lbT48c3Bhbj7mtY/op4jljoblj7I8L3NwYW4+PC9hPic7CgkJCQkJaSgiIyIgKyB0LmV4dE5hbWUgKyAiLWZlZWQtY2xvc2UiKS5hZnRlcihvLmNvbXBpbGUoZSkoKSksIHQuZml4V2lkdGgoKQoJCQkJfSwKCQkJCXAgPSBmdW5jdGlvbigpIHsKCQkJCQkidG9wIiA9PSB0LnN0eWxlID8gZCgpIDogImJvdHRvbSIgPT0gdC5zdHlsZSAmJiBsKCkKCQkJCX0sCgkJCQloID0gZnVuY3Rpb24oZSwgYSwgcykgewoJCQkJCXZhciBsID0gbigyMDQpOwoJCQkJCWkoZSkuYXBwZW5kKG8uY29tcGlsZShsKSh7CgkJCQkJCWRhdGE6IGEsCgkJCQkJCXNfc2VydmVyOiB0LnNfc2VydmVyLAoJCQkJCQloaXNfc2l6ZTogciwKCQkJCQkJZXh0TmFtZTogdC5leHROYW1lCgkJCQkJfSkpCgkJCQl9LAoJCQkJdSA9IGZ1bmN0aW9uKGUsIG4pIHsKCQkJCQkidG9wIiA9PSB0LnN0eWxlID8gaChpKCIjIiArIHQuZXh0TmFtZSArICItbWFpbiIpLCBlLCBuKSA6ICJib3R0b20iID09IHQuc3R5bGUgJiYgKGgoIiNiamRfYm90dG9tX2RldGFpbCIsIGUsIG4pLCB0LmF1dG9GaXhXaWR0aCgpKQoJCQkJfSwKCQkJCW0gPSBmdW5jdGlvbigpIHsKCQkJCQlyZXR1cm4gciA+PSA0ID8gMzQzIDogNzUgKiByICsgMTQgKiAociAtIDEpICsgMQoJCQkJfSwKCQkJCWYgPSBmdW5jdGlvbihlKSB7CgkJCQkJZm9yICh2YXIgbiA9IFtdLCBpID0gMDsgaSA8IGUubGVuZ3RoOyBpKyspCgkJCQkJCWlmIChlW2ldLnVybCkgewoJCQkJCQkJdmFyIGEgPSB7CgkJCQkJCQkJc2l0ZV9pZDogZVtpXS5zaXRlX2lkLAoJCQkJCQkJCXVybDogZVtpXS51cmwsCgkJCQkJCQkJbW9kOiAiaGlzdG9yeSIsCgkJCQkJCQkJdW5pb246IHQudW5pb24uc3BsaXQoIl8iKVsxXSwKCQkJCQkJCQlkcF9pZDogZVtpXS5kcF9pZAoJCQkJCQkJfTsKCQkJCQkJCWVbaV0udXJsID0gcy5pbml0KGEpLCBuLnB1c2goZVtpXSkKCQkJCQkJfQoJCQkJCXJldHVybiBuCgkJCQl9LAoJCQkJZyA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlpZiAoZSAmJiAwICE9IGUubGVuZ3RoKSB7CgkJCQkJCWUgPSBmKGUuc2xpY2UoMCwgMTApKSwgciA9IGUubGVuZ3RoOwoJCQkJCQl2YXIgdCA9IG0oKTsKCQkJCQkJcCgpLCB1KGUsIHQpLCBfKHIpCgkJCQkJfQoJCQkJfSwKCQkJCV8gPSBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIG4gPSB2b2lkIDAsCgkJCQkJCWEgPSB2b2lkIDA7CgkJCQkJaSgiIyIgKyB0LmV4dEJyYW5kICsgIl9oaXN0b3J5Iikub24oIm1vdXNlZW50ZXIiLCBmdW5jdGlvbigpIHsKCQkJCQkJYSB8fCB0LmxvYWRJbWFnZShpKCIjaGlzdG9yeV9kZXRhaWwgbGkgLml0ZW1faW1nIiksIDAsIGUsIDcwKSwgaSgiIyIgKyB0LmV4dEJyYW5kICsgIl9oaXN0b3J5IikuYWRkQ2xhc3MoImhpc3RvcnlfaG92ZXIiKSwgaSgiI2hpc3RvcnlfZGV0YWlsIikuc2hvdygpCgkJCQkJfSksIGkoIiMiICsgdC5leHRCcmFuZCArICJfaGlzdG9yeSIpLm9uKCJtb3VzZWxlYXZlIiwgZnVuY3Rpb24oKSB7CgkJCQkJCW4gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCQkJaSgiIyIgKyB0LmV4dEJyYW5kICsgIl9oaXN0b3J5IikucmVtb3ZlQ2xhc3MoImhpc3RvcnlfaG92ZXIiKSwgaSgiI2hpc3RvcnlfZGV0YWlsIikuaGlkZSgpCgkJCQkJCX0sIDIwMCkKCQkJCQl9KSwgaSgiI2hpc3RvcnlfZGV0YWlsIikub24oIm1vdXNlZW50ZXIiLCBmdW5jdGlvbigpIHsKCQkJCQkJY2xlYXJUaW1lb3V0KG4pCgkJCQkJfSksIGkoIiNoaXN0b3J5X2RldGFpbCIpLm9uKCJtb3VzZWxlYXZlIiwgZnVuY3Rpb24oKSB7CgkJCQkJCWkoIiMiICsgdC5leHRCcmFuZCArICJfaGlzdG9yeSIpLnJlbW92ZUNsYXNzKCJoaXN0b3J5X2hvdmVyIiksIGkoIiNoaXN0b3J5X2RldGFpbCIpLmhpZGUoKQoJCQkJCX0pLCBpKCIjaGlzdG9yeV9kZXRhaWwgLml0ZW1fY2xvc2VfYnRuIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gaSh0aGlzKS5hdHRyKCJkYXRhLWlkIik7CgkJCQkJCXItLSwgYihpKHRoaXMpLnBhcmVudHMoImxpIiksIGUpCgkJCQkJfSksIGkoIiNoaXN0b3J5X2RldGFpbCAuY2xlYXJfaGlzIikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCXcoKQoJCQkJCX0pCgkJCQl9LAoJCQkJeCA9IGZ1bmN0aW9uKCkgewoJCQkJCWEuZ2V0KGcpCgkJCQl9LAoJCQkJdyA9IGZ1bmN0aW9uKCkgewoJCQkJCWEuZGVsQWxsKGZ1bmN0aW9uKCkgewoJCQkJCQlpKCIuaGlzdG9yeV9kZXRhaWwgLmhpc3RvcnlfY29udGVudCB1bCIpLmVtcHR5KCksIGkoIi5oaXN0b3J5X2RldGFpbCAuaGlzdG9yeV9jb250ZW50IikuYWRkQ2xhc3MoIm5vLWhpcy1jb250ZW50IiksIGkoIi5oaXN0b3J5X2RldGFpbCAuaGlzdG9yeV9jb250ZW50IikuaGVpZ2h0KDc2KSwgaSgiLmNsZWFyX2hpcyIpLmhpZGUoKQoJCQkJCX0pCgkJCQl9LAoJCQkJdiA9IGZ1bmN0aW9uKCkgewoJCQkJCSJ0YW9iYW8iICE9IHQuc2l0ZSAmJiAidG1hbGwiICE9IHQuc2l0ZSAmJiBhLmFkZCh0Lm5vd19kcF9pZCkKCQkJCX0sCgkJCQliID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJCXZhciBuID0gbSgpOwoJCQkJCWEuZGVsKHQsIGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gaShlKS5yZW1vdmUoKSwgMzQzICE9IG4gPyAwID09PSByID8gKGkoIi5oaXN0b3J5X2RldGFpbCAuaGlzdG9yeV9jb250ZW50IikuYWRkQ2xhc3MoIm5vLWhpcy1jb250ZW50IiksIHZvaWQgaSgiLmNsZWFyX2hpcyIpLmhpZGUoKSkgOiB2b2lkIGkoIi5oaXN0b3J5X2RldGFpbCAuaGlzdG9yeV9jb250ZW50IikuaGVpZ2h0KG4pIDogdm9pZCAwCgkJCQkJfSkKCQkJCX07CgkJCWUuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7CgkJCQl4KCksIHYoKQoJCQl9CgkJfSkuY2FsbCh0LCBuKDEpLCBuKDYpKQoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQl2YXIgaTsKCQkoZnVuY3Rpb24oYSkgewoJCQkidXNlIHN0cmljdCI7CgkJCWkgPSBmdW5jdGlvbigpIHsKCQkJCXZhciBlLCB0LCBpLCBvID0ge30sCgkJCQkJciA9IG4oOSksCgkJCQkJcyA9IG4oMTIpOwoJCQkJby5nZXQgPSBmdW5jdGlvbihuKSB7CgkJCQkJci5nZXQoYS5zZXJ2ZXIgKyAiL2Jyd2V4dC9oaXN0b3J5P29wPWdldCIpLmRvbmUoZnVuY3Rpb24oYSkgewoJCQkJCQlhID0gcyhhLnJlc3VsdCksIGEgPSBsKGEpLCBlID0gYSwgbiAmJiBuKGEpLCBpICYmICF0ICYmIChpKGEpLCB0ID0gITApCgkJCQkJfSkKCQkJCX07CgkJCQl2YXIgbCA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlmb3IgKHZhciB0ID0gW10sIG4gPSAwOyBuIDwgZS5sZW5ndGg7IG4rKykgewoJCQkJCQl2YXIgaSA9IE51bWJlcihlW25dLnByaWNlKTsKCQkJCQkJZVtuXS51cmwgJiYgZVtuXS50aXRsZSAmJiBpICYmIGkgPiAwICYmIHQucHVzaChlW25dKQoJCQkJCX0KCQkJCQlyZXR1cm4gdAoJCQkJfTsKCQkJCXJldHVybiBvLmFkZCA9IGZ1bmN0aW9uKGUsIHQpIHsKCQkJCQlyLmdldChhLnNlcnZlciArICIvYnJ3ZXh0L2hpc3Rvcnk/b3A9YWRkJmRwX2lkPSIgKyBlKS5kb25lKGZ1bmN0aW9uKGUpIHsKCQkJCQkJdCAmJiB0KGUpCgkJCQkJfSkKCQkJCX0sIG8uZGVsQWxsID0gZnVuY3Rpb24oZSkgewoJCQkJCXIuZ2V0KGEuc2VydmVyICsgIi9icndleHQvaGlzdG9yeT9vcD1kZWxBbGwiKS5kb25lKGZ1bmN0aW9uKHQpIHsKCQkJCQkJZSgpCgkJCQkJfSkKCQkJCX0sIG8uZGVsID0gZnVuY3Rpb24oZSwgdCkgewoJCQkJCXIuZ2V0KGEuc2VydmVyICsgIi9icndleHQvaGlzdG9yeT9vcD1kZWwmZHBfaWQ9IiArIGUpLmRvbmUoZnVuY3Rpb24oZSkgewoJCQkJCQl0ICYmIHQoKQoJCQkJCX0pCgkJCQl9LCBvLmdldFNpemUgPSBmdW5jdGlvbihuKSB7CgkJCQkJZSA/IChuKGUpLCB0ID0gITApIDogaSA9IG4sIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQkJCXQgfHwgKGkobnVsbCksIHQgPSAhMCkKCQkJCQl9LCAxNGUzKQoJCQkJfSwgbwoJCQl9LmNhbGwodCwgbiwgdCwgZSksICEodm9pZCAwICE9PSBpICYmIChlLmV4cG9ydHMgPSBpKSkKCQl9KS5jYWxsKHQsIG4oMSkpCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICc8ZGl2IGlkPSJoaXN0b3J5X2RldGFpbCIgY2xhc3M9Imhpc3RvcnlfZGV0YWlsIj5cbiAgPGRpdiBjbGFzcz0iaGlzdG9yeV9oZWFkIj5cbiAgICA8c3BhbiBjbGFzcz0iaGlzdG9yeV9oZWFkX3RsZSI+5rWP6KeI5Y6G5Y+yPC9zcGFuPlxuICAgIHt7aWYgaGlzX3NpemUgIT0gMH19XG4gICAgPHNwYW4gY2xhc3M9ImNsZWFyX2hpcyI+5riF56m65Y6G5Y+yPC9zcGFuPlxuICAgIHt7L2lmfX1cbiAgPC9kaXY+XG4gIDxkaXYgY2xhc3M9Imhpc3RvcnlfY29udGVudCBoaXNfc2l6ZV97e2hpc19zaXplfX0iPlxuICAgIDx1bD5cbiAgICAgIHt7ZWFjaCBkYXRhfX1cbiAgICAgIDxsaSA+XG4gICAgICAgIDxhIGNsYXNzPSJpdGVtX2ltZyIgaHJlZj0ie3skdmFsdWUudXJsfX0iIHRhcmdldD0iX2JsYW5rIiB0aXRsZT0ie3skdmFsdWUudGl0bGV9fSI+PGltZyBzcmM9Imh0dHA6Ly9zMS5nd2RhbmcuY29tL2ltYWdlcy9leHRlbnNpb25zL25ld2Jhci8xMjAuZ2lmIiBkYXRhLW9yaWdpbmFsPSJ7eyR2YWx1ZS5pbWdfdXJsfX0iPjwvYT5cbiAgICAgICAgPGRpdiBjbGFzcz0iaXRlbV9kZXNjIj5cbiAgICAgICAgICA8YSBjbGFzcz0iaXRlbV90aXRsZSIgaHJlZj0ie3skdmFsdWUudXJsfX0iIHRhcmdldD0iX2JsYW5rIiB0aXRsZT0ie3skdmFsdWUudGl0bGV9fSI+e3skdmFsdWUudGl0bGV9fTwvYT5cbiAgICAgICAgICA8YSBjbGFzcz0ib3RoZXJfZGVzYyI+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz0ic2l0ZV9pY29uIiB0aXRsZT0ie3skdmFsdWUuc2l0ZV9uYW1lfX0iPjxpbWcgc3JjPSJ7e3Nfc2VydmVyfX0vaW1hZ2VzL2Zhdmljb24ve3skdmFsdWUuc2l0ZV9pZH19LmljbyI+PC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9Iml0ZW1fcHJpY2UiPsKle3skdmFsdWUucHJpY2V9fTwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJpdGVtX2Nsb3NlX2J0biIgZGF0YS1pZD0ie3skdmFsdWUuZHBfaWR9fSI+5Yig6ZmkPC9zcGFuPlxuICAgICAgICAgIDwvYT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2xpPlxuICAgICAge3svZWFjaH19XG4gICAgPC91bD5cbiAgICA8ZGl2IGNsYXNzPSJuby1oaXN0b3J5Ij7mmoLml6DmtY/op4jljoblj7I8L2Rpdj5cbiAgPC9kaXY+XG4gIDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+XG4gICAgI2hpc3RvcnlfZGV0YWlsIHtcbiAgICAgIHdpZHRoOiAyODhweDtcbiAgICAgIG1pbi1oZWlnaHQ6IDE0MHB4O1xuICAgICAgbWF4LWhlaWdodDogNDA1cHg7XG4gICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkO1xuICAgIH1cbiAgICAuaGlzdG9yeV9oZWFkIHtcbiAgICAgIGhlaWdodDogNTBweDtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIH1cbiAgICAubm8taGlzdG9yeSB7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGhlaWdodDogNzBweDtcbiAgICAgIGxpbmUtaGVpZ2h0OiA3MHB4O1xuICAgICAgY29sb3I6ICMzMjMzMzM7XG4gICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgICAuaGlzdG9yeV9oZWFkIHNwYW4ge1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIH1cbiAgICAjaGlzdG9yeV9kZXRhaWwgLmhpc3RvcnlfaGVhZF90bGUge1xuICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgY29sb3I6ICMzMjMzMzM7XG4gICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgIHRvcDogMTJweDtcbiAgICAgIGxlZnQ6IDE1cHg7XG4gICAgfVxuICAgICNoaXN0b3J5X2RldGFpbCAuY2xlYXJfaGlzIHtcbiAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgIGNvbG9yOiAjOGE4YzhkO1xuICAgICAgdG9wOiAxMnB4O1xuICAgICAgcmlnaHQ6IDE5cHg7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgfVxuICAgICNoaXN0b3J5X2RldGFpbCAuY2xlYXJfaGlzOmhvdmVyIHtcbiAgICAgIGNvbG9yOiAjNzA3MDcwO1xuICAgIH1cbiAgICAjaGlzdG9yeV9kZXRhaWwgLmhpc3RvcnlfY29udGVudCB7XG4gICAgICBtYXJnaW46IDBweCAwcHggMTdweCAwO1xuICAgICAgd2lkdGg6IDI3MnB4O1xuICAgICAgbWFyZ2luLWxlZnQ6IDE2cHg7XG4gICAgICBoZWlnaHQ6IDMzNHB4O1xuICAgICAgb3ZlcmZsb3cteTogc2Nyb2xsO1xuICAgIH1cbiAgICAjaGlzdG9yeV9kZXRhaWwgLmhpc3RvcnlfY29udGVudC5oaXNfc2l6ZV8wLCAjaGlzdG9yeV9kZXRhaWwgLmhpc3RvcnlfY29udGVudC5oaXNfc2l6ZV8xIHtcbiAgICAgIGhlaWdodDogNzZweDtcbiAgICB9XG4gICAgI2hpc3RvcnlfZGV0YWlsIC5oaXN0b3J5X2NvbnRlbnQuaGlzX3NpemVfMCwgI2hpc3RvcnlfZGV0YWlsIC5oaXN0b3J5X2NvbnRlbnQubm8taGlzLWNvbnRlbnQge1xuICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICB9XG4gICAgI2hpc3RvcnlfZGV0YWlsIC5oaXN0b3J5X2NvbnRlbnQuaGlzX3NpemVfMiB7XG4gICAgICBoZWlnaHQ6IDE2NXB4O1xuICAgIH1cbiAgICAjaGlzdG9yeV9kZXRhaWwgLmhpc3RvcnlfY29udGVudC5oaXNfc2l6ZV8zIHtcbiAgICAgIGhlaWdodDogMjU0cHg7XG4gICAgfVxuICAgICNoaXN0b3J5X2RldGFpbCAuaGlzdG9yeV9jb250ZW50Lmhpc19zaXplXzAgLm5vLWhpc3RvcnksICNoaXN0b3J5X2RldGFpbCAuaGlzdG9yeV9jb250ZW50Lm5vLWhpcy1jb250ZW50IC5uby1oaXN0b3J5IHtcbiAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIH1cbiAgICAjaGlzdG9yeV9kZXRhaWwgdWwge1xuICAgICAgbWFyZ2luOiAwcHg7XG4gICAgICBwYWRkaW5nOiAwcHg7XG4gICAgfVxuICAgICNoaXN0b3J5X2RldGFpbCB1bCBsaXtcbiAgICAgIGxpc3Qtc3R5bGU6IG5vbmU7XG4gICAgICBoZWlnaHQ6IDcycHg7XG4gICAgICBtYXJnaW4tdG9wOiAxNXB4O1xuICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgIGZsb2F0OiBub25lO1xuICAgIH1cbiAgICAjaGlzdG9yeV9kZXRhaWwgdWwgbGk6Zmlyc3QtY2hpbGR7XG4gICAgICBtYXJnaW4tdG9wOiAwcHg7XG4gICAgfVxuICAgICNoaXN0b3J5X2RldGFpbCAuaXRlbV9pbWcge1xuICAgICAgaGVpZ2h0OiA3MHB4O1xuICAgICAgd2lkdGg6IDcwcHg7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlZWU7XG4gICAgICBsaW5lLWhlaWdodDogNzBweDtcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICB9XG4gICAgI2hpc3RvcnlfZGV0YWlsIC5pdGVtX2Rlc2Mge1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgbWFyZ2luLWxlZnQ6IDE0cHg7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIC1tYXJnaW4tbGVmdDogMTBweDtcbiAgICAgIHdpZHRoOiAxNTlweDtcbiAgICB9XG4gICAgI2hpc3RvcnlfZGV0YWlsIGEuaXRlbV90aXRsZSwgI2hpc3RvcnlfZGV0YWlsIGEub3RoZXJfZGVzYyB7XG4gICAgICBoZWlnaHQ6IDE2cHg7XG4gICAgICB3aWR0aDogMTU5cHg7XG4gICAgICBsaW5lLWhlaWdodDogMTZweDtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgfVxuICAgICNoaXN0b3J5X2RldGFpbCBhLm90aGVyX2Rlc2Mge1xuICAgICAgbWFyZ2luLXRvcDogMjRweDtcbiAgICAgIHdpZHRoOiAxNjVweDtcbiAgICB9XG4gICAgI2hpc3RvcnlfZGV0YWlsIGEuaXRlbV90aXRsZXtcbiAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgIGxpbmUtaGVpZ2h0OiAxNnB4O1xuICAgICAgaGVpZ2h0OiAzMnB4O1xuICAgICAgd2lkdGg6IDE1OXB4O1xuICAgICAgY29sb3I6ICM0YTRhNGE7XG4gICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgfVxuICAgICNoaXN0b3J5X2RldGFpbCBhLml0ZW1fdGl0bGU6aG92ZXJ7XG4gICAgICBjb2xvcjogIzRhNGE0YTtcbiAgICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xuICAgIH1cbiAgICAub3RoZXJfZGVzYzphZnRlciB7XG4gICAgICBjb250ZW50OiAiIjtcbiAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgY2xlYXI6IGJvdGg7XG4gICAgfVxuICAgIC5vdGhlcl9kZXNjIHNwYW4ge1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgfVxuICAgIHNwYW4uaXRlbV9wcmljZSB7XG4gICAgICBtYXJnaW4tbGVmdDogOHB4O1xuICAgICAgbWFyZ2luLXRvcDogMnB4O1xuICAgICAgY29sb3I6ICNEMTA4MzE7XG4gICAgICBjdXJzb3I6IHRleHQ7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICBoZWlnaHQ6IDE0cHg7XG4gICAgICBsaW5lLWhlaWdodDogMTRweDtcbiAgICB9XG4gICAgI2hpc3RvcnlfZGV0YWlsIHNwYW4uaXRlbV9wcmljZTpob3ZlciB7XG4gICAgICBjb2xvcjogI0QxMDgzMTtcbiAgICAgIGN1cnNvcjogdGV4dDtcbiAgICB9XG4gICAgLml0ZW1faW1nIGltZyB7XG4gICAgICBtYXgtaGVpZ2h0OiA3MHB4O1xuICAgICAgbWF4LXdpZHRoOiA3MHB4O1xuICAgIH1cbiAgICAjaGlzdG9yeV9kZXRhaWwgc3Bhbi5zaXRlX2ljb24ge1xuICAgICAgaGVpZ2h0OiAxNnB4O1xuICAgICAgbGluZS1oZWlnaHQ6IDE2cHg7XG4gICAgICBjdXJzb3I6IHRleHQ7XG4gICAgfVxuICAgIFxuICAgIHNwYW4uaXRlbV9jbG9zZV9idG4ge1xuICAgICAgY29sb3I6ICM5YjliOWI7XG4gICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICBoZWlnaHQ6IDEycHg7XG4gICAgICB3aWR0aDogMjVweDtcbiAgICAgIGZsb2F0OiByaWdodDtcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIGxpbmUtaGVpZ2h0OiAxN3B4O1xuICAgIH1cbiAgICBzcGFuLml0ZW1fY2xvc2VfYnRuOmhvdmVyIHtcbiAgICAgIGNvbG9yOiAjNzA3MDcwIWltcG9ydGFudDtcbiAgICB9XG4gICAgXG4gICAgXG4gIDwvc3R5bGU+XG48L2Rpdj4nCgl9LAoJZnVuY3Rpb24oZSwgdCwgbikgewoJCShmdW5jdGlvbih0LCBpKSB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJdmFyIGEgPSBuKDkyKSwKCQkJCW8gPSBuKDc1KSwKCQkJCXIgPSBuKDExOSksCgkJCQlzID0gbigxNjApLAoJCQkJbCA9IG4oMTE3KSwKCQkJCWMgPSBuKDE2NiksCgkJCQlkID0gbigxNjgpLAoJCQkJcCA9IG4oMTYpLAoJCQkJaCA9IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gIiI7CgkJCQkJIjEiID09PSB0LnBfZm9sZCAmJiAoZSA9ICJiLWhpZGRlbiIpOwoJCQkJCXZhciBhID0gbigyMDYpOwoJCQkJCWkoImJvZHkiKS5hcHBlbmQocC5jb21waWxlKGEpKHsKCQkJCQkJaGlkZW1vZDogZQoJCQkJCX0pKQoJCQkJfSwKCQkJCXUgPSBmdW5jdGlvbigpIHsKCQkJCQlpKCIjZ3dkYW5nLXRyZW5kIikub24oIm1vdXNlZW50ZXIiLCBmdW5jdGlvbigpIHsKCQkJCQkJaSgiI2d3ZGFuZy10cmVuZC1kZXRhaWwiKS5zaG93KCksIGkodGhpcykuYWRkQ2xhc3MoIm1zaG92ZXIiKQoJCQkJCX0pLCBpKCIjZ3dkYW5nLXRyZW5kLCAjZ3dkYW5nLXRyZW5kLWRldGFpbCIpLm9uKCJtb3VzZWxlYXZlIiwgZnVuY3Rpb24oKSB7CgkJCQkJCWkoIiNnd2RhbmctdHJlbmQtZGV0YWlsIikuaGlkZSgpLCBpKHRoaXMpLnJlbW92ZUNsYXNzKCJtc2hvdmVyIikKCQkJCQl9KSwgaSgiLm5idC1jbG9zZS1idG4iKS5vbigiY2xpY2siLCBmdW5jdGlvbigpIHsKCQkJCQkJIjEiICE9PSB0LnBfZm9sZCA/IChpKCIuY2xvc2UtbW9kdWxlIikuYWRkQ2xhc3MoImItaGlkZGVuIiksIGkodGhpcykuYWRkQ2xhc3MoImItaGlkZGVuIiksIGkoIiNiamRfYm90dG9tX2RldGFpbCIpLmNzcygid2lkdGgiLCAiODZweCIpLCB0LnBfZm9sZCA9ICIxIikgOiAoaSgiLmNsb3NlLW1vZHVsZSIpLnJlbW92ZUNsYXNzKCJiLWhpZGRlbiIpLCBpKHRoaXMpLnJlbW92ZUNsYXNzKCJiLWhpZGRlbiIpLCBpKCIjYmpkX2JvdHRvbV9kZXRhaWwiKS5jc3MoIndpZHRoIiwgIjEwMCUiKSwgdC5wX2ZvbGQgPSAiMCIpLCBhLm1haW5iYXJmb2xkKHQucF9mb2xkKQoJCQkJCX0pCgkJCQl9OwoJCQllLmV4cG9ydHMuaW5pdDIgPSBmdW5jdGlvbihlKSB7CgkJCQl0LklFNiAmJiAiY2NiIiA9PSB0LnNpdGUgfHwgKGgoKSwgbigyMDcpLmluaXQoZSksIG4oMTgzKS5pbml0KGUubm93KSwgbigyMDkpLmluaXQoKSwgbigxMjUpLmluaXQoZS5ub3cuc2l0ZV9pZCksIG4oODQpLmluaXQoZSksIG4oMTcwKS5pbml0KCksIG4oMjExKS5pbml0KCksIHUoKSwgbC5pbml0KHQud2hlcmVfYnV5X2RwcywgdC5ub3dfZHBfaWQsICJib3R0b20iKSwgby5pbml0KGUsICJib3R0b20iKSwgci5pbml0KGUuc2hhcmVfZ29vZCwgZS5ub3cpLCBzLmFkZFByb21vKHMuZ2V0UHJvbW9EYXRhKGUpKSkKCQkJfSwgZS5leHBvcnRzLnJlbmRlclNlYXJjaCA9IGZ1bmN0aW9uKCkgewoJCQkJYy5pbml0KCksIGQuaW5pdCgpCgkJCX0KCQl9KS5jYWxsKHQsIG4oMSksIG4oNikpCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICc8ZGl2IGlkPSJiamRfYm90dG9tX2RldGFpbCIgY2xhc3M9Int7aGlkZW1vZH19Ij5cbiAgPGEgaHJlZj0iIiBpZD0iYmpkX2xvZ28iIHRhcmdldD0iX2JsYW5rIiB0aXRsZT0i6LSt54mp5YWaIj5cbiAgICA8c3BhbiBjbGFzcz0ibmJ0LWJnIj48L3NwYW4+XG4gIDwvYT5cbiAgPGRpdiBjbGFzcz0ibGVmdC1jb21wYXJlIGNsb3NlLW1vZHVsZSB7e2hpZGVtb2R9fSI+XG4gICAgPHNwYW4gY2xhc3M9ImNvbS1sb3dwcmkiPlxuICAgICAgPGVtIGNsYXNzPSJuYnQtYmciPjwvZW0+XG4gICAgPC9zcGFuPlxuICAgIDxzcGFuIGNsYXNzPSJjb20temRtIj5cbiAgICAgIDxlbSBjbGFzcz0ibmJ0LWJnIj48L2VtPlxuICAgIDwvc3Bhbj5cbiAgICA8c3BhbiBjbGFzcz0iY29tLWh5bSI+XG4gICAgICA8ZW0gY2xhc3M9Im5idC1iZyI+PC9lbT5cbiAgICA8L3NwYW4+XG4gIDwvZGl2PlxuICA8ZGl2IGNsYXNzPSJuYnQtYWRpbmZvIGNsb3NlLW1vZHVsZSB7e2hpZGVtb2R9fSI+PC9kaXY+XG4gIDxkaXYgY2xhc3M9Im5idC1jbG9zZS1idG4ge3toaWRlbW9kfX0iPlxuICAgIDxzcGFuIGNsYXNzPSJuYnQtYmciPjwvc3Bhbj5cbiAgPC9kaXY+XG4gIDxkaXYgY2xhc3M9InJpZ2h0LWluZm8gY2xvc2UtbW9kdWxlIHt7aGlkZW1vZH19Ij5cbiAgICA8ZGl2IGNsYXNzPSJwcmljZS10cmVuZC1idG4iIGlkPSJnd2RhbmctdHJlbmQiPlxuICAgICAgPGRpdiBjbGFzcz0idHJlbmQtYm94LWRldiI+XG4gICAgICAgIDxlbSBjbGFzcz0ic2V0dGluZy1iZyI+PC9lbT5cbiAgICAgICAgPHNwYW4+5Lu35qC85LiL6ZmNPC9zcGFuPlxuICAgICAgPC9kaXY+XG4gICAgICBcbiAgICAgIDxkaXYgaWQ9Imd3ZGFuZy10cmVuZC1kZXRhaWwiIGNsYXNzPSJnd2QtdHJlbmQtZGV0YWlsIj48L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPSJzZWFyY2gtbW9kIj48L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPSJiamQtaGlzdG9yeS1idG4gcmluZm8tYnRuIiBpZD0iZ3dkX2hpc3RvcnkiPlxuICAgICAgPHNwYW4gY2xhc3M9Im5idC1iZyI+PC9zcGFuPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9ImJqZC1mYXZvci1idG4gcmluZm8tYnRuIiBpZD0iZ3dkYW5nLWZhdm9yIj5cbiAgICAgIDxzcGFuIGNsYXNzPSJuYnQtYmciPjwvc3Bhbj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4gIDxkaXYgY2xhc3M9Im1haW4tY29tcGFyZSBjbG9zZS1tb2R1bGUge3toaWRlbW9kfX0iPlxuICAgIDxzcGFuIGNsYXNzPSJuYnQtYmcgbWJhci10dXJucGFnZSB0bGVmdCI+PC9zcGFuPlxuICAgIDxkaXYgY2xhc3M9ImNvbXBhcmUtYm94Ij5cbiAgICAgIDx1bCBjbGFzcz0iY29tcGFyZS1saXN0Ij5cbiAgICAgICAgXG4gICAgICA8L3VsPlxuICAgIDwvZGl2PlxuICAgIDxzcGFuIGNsYXNzPSJuYnQtYmcgbWJhci10dXJucGFnZSB0cmlnaHQiPjwvc3Bhbj5cbiAgPC9kaXY+XG4gIDxkaXYgPjwvZGl2PlxuPC9kaXY+JwoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCwgaSkgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBhID0gbigxNiksCgkJCQlvID0gewoJCQkJCSLkuqzkuJwiOiB7CgkJCQkJCXNpdGVfaWQ6IDMsCgkJCQkJCXBhdHRlcm46ICJodHRwOi8vc2VhcmNoLmpkLmNvbS9TZWFyY2g/ZW5jPXV0Zi04JmtleXdvcmQ9IgoJCQkJCX0sCgkJCQkJIuS6mumprOmAiiI6IHsKCQkJCQkJc2l0ZV9pZDogMSwKCQkJCQkJcGF0dGVybjogImh0dHA6Ly93d3cuYW1hem9uLmNuL3M/ZmllbGQta2V5d29yZHM9IgoJCQkJCX0sCgkJCQkJIuW9k+W9kyI6IHsKCQkJCQkJc2l0ZV9pZDogMiwKCQkJCQkJcGF0dGVybjogImh0dHA6Ly9zZWFyY2hiLmRhbmdkYW5nLmNvbS8/a2V5PSIKCQkJCQl9LAoJCQkJCSLoi4/lroEiOiB7CgkJCQkJCXNpdGVfaWQ6IDI1LAoJCQkJCQlwYXR0ZXJuOiAiaHR0cDovL3NlYXJjaC5zdW5pbmcuY29tL2VtYWxsL3NlYXJjaC5kbz9rZXl3b3JkPSIKCQkJCQl9LAoJCQkJCSLmt5jlrp0iOiB7CgkJCQkJCXNpdGVfaWQ6IDgzLAoJCQkJCQlwYXR0ZXJuOiAiaHR0cDovL3MudGFvYmFvLmNvbS9zZWFyY2g/cT0iCgkJCQkJfSwKCQkJCQki5Zu9576OIjogewoJCQkJCQlzaXRlX2lkOiAyOCwKCQkJCQkJcGF0dGVybjogImh0dHA6Ly93d3cuZ29tZS5jb20uY24vc2VhcmNoP3F1ZXN0aW9uPSIKCQkJCQl9LAoJCQkJCSLkuIDlj7flupciOiB7CgkJCQkJCXNpdGVfaWQ6IDMxLAoJCQkJCQlwYXR0ZXJuOiAiaHR0cDovL3NlYXJjaC55aGQuY29tL3MyL2MwLTAvayIKCQkJCQl9LAoJCQkJCSLllK/lk4HkvJoiOiB7CgkJCQkJCXNpdGVfaWQ6IDEyOSwKCQkJCQkJcGF0dGVybjogImh0dHA6Ly93d3cuIiArIHQuZXh0TmFtZSArICIuY29tL3NlYXJjaD9jcmM2ND0xJnNfdmlwPSIKCQkJCQl9LAoJCQkJCSLotK3nianlhZoiOiB7CgkJCQkJCXBhdHRlcm46ICJodHRwOi8vd3d3LiIgKyB0LmV4dE5hbWUgKyAiLmNvbS9zZWFyY2g/c19wcm9kdWN0PSIsCgkJCQkJCXNpdGVfaWQ6IDAKCQkJCQl9CgkJCQl9LAoJCQkJciA9IGZ1bmN0aW9uKGUpIHsKCQkJCQl2YXIgbiA9ICIiLAoJCQkJCQlhID0gb1tlXS5wYXR0ZXJuLAoJCQkJCQlyID0gb1tlXS5zaXRlX2lkLAoJCQkJCQlzID0gaSgiLnNlYXJjaC1pbnB1dCIpLnZhbCgpOwoJCQkJCXJldHVybiBuID0gIui0reeJqeWFmiIgPT09IGUgfHwgIuWUr+WTgeS8miIgPT09IGUgPyBhICsgZW5jb2RlVVJJQ29tcG9uZW50KHMpIDogdC51X3NlcnZlcjIgKyAiL3VuaW9uL2dvLz9zX3Byb2R1Y3Q9IiArIGVuY29kZVVSSUNvbXBvbmVudChzKSArICImdGFyZ2V0X3VybD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGEgKyBlbmNvZGVVUkkocykpICsgIiZzaXRlX2lkPSIgKyByLCBpKCIuc2VhcmNoLXN1Ym1pdCIpLmF0dHIoImhyZWYiLCBuKSwgbgoJCQkJfSwKCQkJCXMgPSBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IHZvaWQgMCwKCQkJCQkJdCA9IHZvaWQgMDsKCQkJCQlpKCIuc2VhcmNoLXRsZSIpLm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJCQkJCQl0ID8gKGkoIi5iamQtc2VhcmNoLWxpc3QiKS5oaWRlKCksIGkoIi5zZWFyY2gtdGxlIGVtIikucmVtb3ZlQ2xhc3MoImVtdXAiKSwgaSgiLnNlYXJjaC10bGUiKS5yZW1vdmVDbGFzcygic2VhcmNoLXNlbGVjdCIpLCB0ID0gITEpIDogKHQgPSAhMCwgaSgiLmJqZC1zZWFyY2gtbGlzdCIpLnNob3coKSwgaSgiLnNlYXJjaC10bGUiKS5hZGRDbGFzcygic2VhcmNoLXNlbGVjdCIpLCBpKCIuc2VhcmNoLXRsZSBlbSIpLmFkZENsYXNzKCJlbXVwIikpCgkJCQkJfSksIGkoIi5iamQtc2VhcmNoLWxpc3QiKS5vbigiY2xpY2siLCBmdW5jdGlvbihlKSB7CgkJCQkJCXZhciBuID0gaShlLnRhcmdldCkudGV4dCgpLAoJCQkJCQkJYSA9IGkoIi5zZWFyY2gtdGxlIHNwYW4iKSwKCQkJCQkJCW8gPSBhLnRleHQoKTsKCQkJCQkJYS50ZXh0KG4pLCBpKCIuYmpkLXNlYXJjaC1saXN0IikuaGlkZSgpLmFwcGVuZChpKCI8c3Bhbj4iICsgbyArICI8L3NwYW4+IikpLCBpKCIuc2VhcmNoLXRsZSIpLnJlbW92ZUNsYXNzKCJzZWFyY2gtc2VsZWN0IiksIGkoIi5zZWFyY2gtdGxlIGVtIikucmVtb3ZlQ2xhc3MoImVtdXAiKSwgdCA9ICExLCBpKGUudGFyZ2V0KS5yZW1vdmUoKQoJCQkJCX0pLCBpKCIuc2VhcmNoLXRsZSwgLmJqZC1zZWFyY2gtbGlzdCIpLm9uKCJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7CgkJCQkJCWNsZWFyVGltZW91dChlKQoJCQkJCX0pLm9uKCJtb3VzZWxlYXZlIiwgZnVuY3Rpb24oKSB7CgkJCQkJCWUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCQkJdCA9ICExLCBpKCIuYmpkLXNlYXJjaC1saXN0IikuaGlkZSgpLCBpKCIuc2VhcmNoLXRsZSBlbSIpLnJlbW92ZUNsYXNzKCJlbXVwIiksIGkoIi5zZWFyY2gtdGxlIikucmVtb3ZlQ2xhc3MoInNlYXJjaC1zZWxlY3QiKQoJCQkJCQl9LCAzMDApCgkJCQkJfSksIGkoIi5zZWFyY2gtc3VibWl0Iikub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBlID0gaSgiLnNlYXJjaC10bGUgc3BhbiIpLnRleHQoKTsKCQkJCQkJcihlKSwgc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJCWkoIi5zZWFyY2gtc3VibWl0IikuYXR0cigiaHJlZiIsIG51bGwpCgkJCQkJCX0sIDIwMCkKCQkJCQl9KSwgaSgiLnNlYXJjaC10bGUiKS5vbigibW91c2VlbnRlciIsIGZ1bmN0aW9uKCkgewoJCQkJCQljbGVhclRpbWVvdXQoZSkKCQkJCQl9KQoJCQkJfSwKCQkJCWwgPSBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIG8gPSBlLmV4YWN0X2Fyci5rZXl3b3Jkcy5yZXBsYWNlKC8sL2csICIgIik7CgkJCQkJInZpcHNob3AiID09PSB0LnNpdGUgJiYgKG8gPSBlLm5vdy5jb3Jld29yZCk7CgkJCQkJdmFyIHIgPSBuKDIwOCk7CgkJCQkJaSgiLnNlYXJjaC1tb2QiKS5hcHBlbmQoYS5jb21waWxlKHIpKHsKCQkJCQkJa2V5d29yZDogbwoJCQkJCX0pKSwgcygpCgkJCQl9OwoJCQllLmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKGUpIHsKCQkJCSJib3R0b20iID09PSB0LnN0eWxlICYmIGwoZSkKCQkJfQoJCX0pLmNhbGwodCwgbigxKSwgbig2KSkKCX0sCglmdW5jdGlvbihlLCB0KSB7CgkJZS5leHBvcnRzID0gJzxkaXYgY2xhc3M9InNlYXJjaC10bGUiPlxuICA8c3Bhbj7otK3nianlhZo8L3NwYW4+XG4gIDxlbSBjbGFzcz0ibmJ0LWJnIj48L2VtPlxuPC9kaXY+XG48aW5wdXQgY2xhc3M9InNlYXJjaC1pbnB1dCIgdmFsdWU9Int7a2V5d29yZH19Ij5cbjxhIGhyZWY9IiIgY2xhc3M9InNlYXJjaC1zdWJtaXQgbmJ0LWJnIiB0YXJnZXQ9Il9ibGFuayI+PC9hPlxuPGRpdiBjbGFzcz0iYmpkLXNlYXJjaC1saXN0Ij5cbiAgPHNwYW4+5reY5a6dPC9zcGFuPlxuICA8c3Bhbj7llK/lk4HkvJo8L3NwYW4+XG4gIDxzcGFuPuS6rOS4nDwvc3Bhbj5cbiAgPHNwYW4+6IuP5a6BPC9zcGFuPlxuICA8c3Bhbj7kuprpqazpgIo8L3NwYW4+XG4gIDxzcGFuPuW9k+W9kzwvc3Bhbj5cbiAgPHNwYW4+5LiA5Y+35bqXPC9zcGFuPlxuICA8c3Bhbj7lm73nvo48L3NwYW4+XG4gIDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+XG4gICAgLnNlYXJjaC10bGUge1xuICAgICAgYmFja2dyb3VuZDogI2ZmZjtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjZGNkY2Q7XG4gICAgICB3aWR0aDogNjBweDtcbiAgICAgIGhlaWdodDogMjJweDtcbiAgICAgIGJvcmRlci1yaWdodDogbm9uZTtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDE4cHg7XG4gICAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAxOHB4O1xuICAgICAgbGluZS1oZWlnaHQ6IDIycHg7XG4gICAgfVxuICAgIC5zZWFyY2gtdGxlLnNlYXJjaC1zZWxlY3Qge1xuICAgICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMHB4O1xuICAgIH1cbiAgICAuc2VhcmNoLXRsZSBzcGFuIHtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgd2lkdGg6IDQwcHg7XG4gICAgICBoZWlnaHQ6IDIycHg7XG4gICAgICBtYXJnaW4tbGVmdDogNXB4O1xuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgdGV4dC1hbGlnbjoganVzdGlmeTtcbiAgICAgIC13ZWJraXQtdGV4dC1hbGlnbi1sYXN0Omp1c3RpZnk7XG4gICAgfVxuICAgIC5zZWFyY2gtdGxlIGVtIHtcbiAgICAgIGZsb2F0OiByaWdodDtcbiAgICAgIGhlaWdodDogNnB4O1xuICAgICAgd2lkdGg6IDlweDtcbiAgICAgIG1hcmdpbi10b3A6IDhweDtcbiAgICAgIG1hcmdpbi1yaWdodDogM3B4O1xuICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTEzMnB4IC0xMDJweDtcbiAgICB9XG4gICAgLnNlYXJjaC10bGUgZW0uZW11cCB7XG4gICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTc3cHggLTEwMnB4O1xuICAgIH1cbiAgICAuYmpkLXNlYXJjaC1saXN0IHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIGhlaWdodDogMTYwcHg7XG4gICAgICB3aWR0aDogNjBweDtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICBib3R0b206IDU5cHg7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RjZGNkYztcbiAgICAgIGJvcmRlci1ib3R0b206IG5vbmU7XG4gICAgfVxuICAgIC5nd2RfYW1hem9uIC5iamQtc2VhcmNoLWxpc3Qge1xuICAgICAgYm90dG9tOiA1N3B4O1xuICAgIH1cbiAgICAuYmpkLXNlYXJjaC1saXN0IHNwYW4ge1xuICAgICAgd2lkdGg6IDQwcHg7XG4gICAgICBtYXJnaW4tbGVmdDogNXB4O1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICBoZWlnaHQ6IDIwcHg7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB0ZXh0LWFsaWduOiBqdXN0aWZ5O1xuICAgICAgLXdlYmtpdC10ZXh0LWFsaWduLWxhc3Q6anVzdGlmeTtcbiAgICB9XG4gICAgLmJqZC1zZWFyY2gtbGlzdCBzcGFuOmhvdmVyIHtcbiAgICAgIGNvbG9yOiAjNWViZWZmO1xuICAgIH1cbiAgICBAbWVkaWEgc2NyZWVuIGFuZCAoLXdlYmtpdC1taW4tZGV2aWNlLXBpeGVsLXJhdGlvOjApe1xuICAgICAgLmJqZC1zZWFyY2gtbGlzdCBzcGFuOmFmdGVyLCAuc2VhcmNoLXRsZSBzcGFuOmFmdGVye1xuICAgICAgICAgIGNvbnRlbnQ6Ii4iO1xuICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgICB3aWR0aDoxMDAlO1xuICAgICAgICAgIG92ZXJmbG93OmhpZGRlbjtcbiAgICAgICAgICBoZWlnaHQ6MDtcbiAgICAgIH1cbiAgICB9XG4gICAgLnNlYXJjaC1pbnB1dCB7XG4gICAgICB3aWR0aDogMTkycHg7XG4gICAgICBtYXJnaW46IDA7XG4gICAgICBoZWlnaHQ6IDIycHg7XG4gICAgICBwYWRkaW5nOiAwIDAgMCA1cHg7XG4gICAgICBsaW5lLWhlaWdodDogMjRweDtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjZGNkY2Q7XG4gICAgICBib3JkZXItbGVmdDogbm9uZTtcbiAgICAgIG91dGxpbmU6IDA7XG4gICAgICBjb2xvcjogIzk5OTtcbiAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgIGZvbnQtZmFtaWx5OiBcJ01pY3Jvc29mdCBZYUhlaVwnLHRhaG9tYSxhcmlhbCxTaW1TdW47XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgIH1cbiAgICBhLnNlYXJjaC1zdWJtaXQge1xuICAgICAgd2lkdGg6IDMwcHg7XG4gICAgICBoZWlnaHQ6IDI0cHg7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTQ0cHggLTk0cHg7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzc5MEUxO1xuICAgICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDE4cHg7XG4gICAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogMThweDtcbiAgICB9XG4gIDwvc3R5bGU+XG48L2Rpdj4nOwoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCwgaSkgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBhID0gbigxNiksCgkJCQlvID0gbig5KSwKCQkJCXIgPSBuKDI2KSwKCQkJCXMgPSBmdW5jdGlvbihlKSB7CgkJCQkJdC5hbGlTaXRlICYmIChlID0gImphdmFzY3JpcHQ6Iik7CgkJCQkJdmFyIG4gPSAnPGEgaWQ9IicgKyB0LmV4dEJyYW5kICsgJ19oYW95bSIgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9IicgKyBlICsgJyIgdGl0bGU9IueCueWHu+afpeeci+WFqOmDqOWAvOW+l+S5sOWVhuWTgSI+PHNwYW4gY2xhc3M9Imhhb3ltX2ljb24gbmV3Yi1iZyI+PC9zcGFuPjxzcGFuIGNsYXNzPSJoYW95bV90ZXh0Ij7poobliLhoxIFv576K5q+bPC9zcGFuPjwvYT4nOwoJCQkJCWkoIiNyaWdodF9pbmZvIikuYXBwZW5kKGEuY29tcGlsZShuKSh7fSkpCgkJCQl9LAoJCQkJbCA9IGZ1bmN0aW9uKCkgewoJCQkJCWkoIiNoYW95bV9kZXRhaWwgLmh5bS1pbWctYm94IGltZyIpLmVhY2goZnVuY3Rpb24oZSwgdCkgewoJCQkJCQlpKHQpLmF0dHIoInNyYyIsIGkodCkuYXR0cigiZGF0YS1zcmMiKSkKCQkJCQl9KQoJCQkJfSwKCQkJCWMgPSBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IGkoIiNnd2RfaGFveW0sIC5jb20taHltIiksCgkJCQkJCW4gPSBpKCIjaGFveW1fZGV0YWlsIiksCgkJCQkJCWEgPSAibW91c2VlbnRlciIsCgkJCQkJCW8gPSAibW91c2VsZWF2ZSIsCgkJCQkJCXMgPSB2b2lkIDAsCgkJCQkJCWMgPSB2b2lkIDA7CgkJCQkJZS5vbihhLCBmdW5jdGlvbigpIHsKCQkJCQkJcyB8fCAocyA9ICEwLCBsKCkpOwoJCQkJCQl2YXIgYSA9IGUub2Zmc2V0KCkubGVmdCwKCQkJCQkJCW8gPSBpKHdpbmRvdykud2lkdGgoKTsKCQkJCQkJZS5hZGRDbGFzcygibXNob3ZlciIpLCAidG9wIiA9PT0gdC5zdHlsZSAmJiBuLmNzcygibGVmdCIsIGEgKyAicHgiKS5jc3MoInJpZ2h0IiwgImF1dG8iKSwgImJvdHRvbSIgPT09IHQuc3R5bGUgJiYgbi5jc3MoImxlZnQiLCBhIC0gMiArICJweCIpLCBuLnNob3coKSwgbyAtIChuLm9mZnNldCgpLmxlZnQgKyBuLm91dGVyV2lkdGgoKSArIDIpIDwgMCAmJiAidG9wIiA9PT0gdC5zdHlsZSAmJiBuLmNzcygicmlnaHQiLCAiMHB4IikuY3NzKCJsZWZ0IiwgImF1dG8iKSwgcigiaGFveW06c2hvdyIpCgkJCQkJfSksIGUub24obywgZnVuY3Rpb24oKSB7CgkJCQkJCWMgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCQkJbi5oaWRlKCksIGUucmVtb3ZlQ2xhc3MoIm1zaG92ZXIiKQoJCQkJCQl9LCAyMDApCgkJCQkJfSksIG4ub24oYSwgZnVuY3Rpb24oKSB7CgkJCQkJCWNsZWFyVGltZW91dChjKQoJCQkJCX0pLCBuLm9uKG8sIGZ1bmN0aW9uKCkgewoJCQkJCQluLmhpZGUoKSwgZS5yZW1vdmVDbGFzcygibXNob3ZlciIpCgkJCQkJfSkKCQkJCX0sCgkJCQlkID0gZnVuY3Rpb24oZSkgewoJCQkJCWlmICghZSkgcmV0dXJuIGU7CgkJCQkJZm9yICh2YXIgbiA9IDA7IG4gPCBlLmxlbmd0aDsgbisrKSB0LmFsaVNpdGUgJiYgKGVbbl0uY291cG9uVXJsID0gZVtuXS5jb3Vwb25VcmwucmVwbGFjZSgid3d3Lmd3ZGFuZyIsICJ0Yi5nd2RhbmciKSwgZVtuXS51cmwgPSBlW25dLnVybC5yZXBsYWNlKCJ3d3cuZ3dkYW5nIiwgInRiLmd3ZGFuZyIpKSwgZVtuXS5pbWdVcmwgPSBlW25dLmltZ1VybC5yZXBsYWNlKC9qcGdfOTB4OTAvLCAianBnXzEwMHgxMDAiKTsKCQkJCQlyZXR1cm4gZQoJCQkJfSwKCQkJCXAgPSBmdW5jdGlvbihlKSB7CgkJCQkJdmFyIG8gPSAiI2d3ZGFuZy1tYWluIjsKCQkJCQkiYm90dG9tIiA9PT0gdC5zdHlsZSAmJiAobyA9ICIjYmpkX2JvdHRvbV9kZXRhaWwiKSwgZS5kYXRhID0gZChlLmRhdGEpLCAidG9wIiA9PT0gdC5zdHlsZSAmJiBzKGUubGlua1VybCk7CgkJCQkJdmFyIHIgPSBuKDIxMCksCgkJCQkJCWwgPSBhLmNvbXBpbGUocikoewoJCQkJCQkJZGF0YTogZS5kYXRhLAoJCQkJCQkJcGFnZXVybDogZS5saW5rVXJsLAoJCQkJCQkJc19zZXJ2ZXI6IHQuc19zZXJ2ZXIsCgkJCQkJCQlhbGlzaXRlOiB0LmFsaVNpdGUKCQkJCQkJfSk7CgkJCQkJaShvKS5hcHBlbmQobCksICJib3R0b20iID09PSB0LnN0eWxlICYmIGkoIi5jb20taHltIikuc2hvdygpLCBjKCkKCQkJCX0sCgkJCQloID0gZnVuY3Rpb24oZSkgewoJCQkJCXZhciBuID0gdC5zYXZlX2RwX3F1ZXJ5LAoJCQkJCQlpID0gdC5zZXJ2ZXIgKyAiL2V4dGVuc2lvbi9nZXRDb3Vwb25UYW8/a2V5d29yZD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KG4ubm93LmNvcmV3b3JkKSArICImY2xhc3NfaWQ9IiArIG4ubm93LmNsYXNzX2lkICsgIiZicmFuZD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KG4uZXhhY3RfYXJyLnNicmFuZCkgKyAiJnNpZ2VfaWQ9IiArIG4ubm93LnNpdGVfaWQ7CgkJCQkJby5nZXQoaSkuZG9uZShmdW5jdGlvbih0KSB7CgkJCQkJCXQgJiYgdC5kYXRhICYmIHQuZGF0YS5sZW5ndGggPiAwICYmIGUodCkKCQkJCQl9KQoJCQkJfTsKCQkJZS5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHsKCQkJCXQuYWxpU2l0ZSB8fCBoKHApCgkJCX0KCQl9KS5jYWxsKHQsIG4oMSksIG4oNikpCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICc8ZGl2IGlkPSJoYW95bV9kZXRhaWwiIGNsYXNzPSJoYW95bV9kZXRhaWwiIHN0eWxlPSJ7e3N0eWxlfX0iPlxuICA8dWw+XG4gICAge3tlYWNoIGRhdGF9fVxuICAgIDxsaT5cbiAgICAgIDxhIGhyZWY9Int7JHZhbHVlLnVybH19IiB0YXJnZXQ9Il9ibGFuayIgY2xhc3M9Imh5bS1pbWctYm94Ij5cbiAgICAgICAgPGltZyBzcmM9Int7c19zZXJ2ZXJ9fS90ZW1wbGF0ZS9hdWcvaW1hZ2VzL25ldy8xMjAuZ2lmIiBkYXRhLXNyYz0ie3skdmFsdWUuaW1nVXJsfX0iPlxuICAgICAgPC9hPlxuICAgICAgPGRpdiBjbGFzcz0icHJpLWluZm8iPlxuICAgICAgICA8aW1nIHNyYz0ie3skdmFsdWUuc2ljb259fSI+XG4gICAgICAgIDxzcGFuIGNsYXNzPSJoeW0tc3AxIj7poobliLjlkI48L3NwYW4+XG4gICAgICAgIDxzcGFuIGNsYXNzPSJoeW0tc3AyIj48ZW0+77+lPC9lbT57eyR2YWx1ZS5jdXJyZW50UHJpY2V9fTwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9Imh5bS1zcDMiPu+/pXt7JHZhbHVlLm9yaWdpblByaWNlfX08L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxhIGhyZWY9Int7JHZhbHVlLmNvdXBvblVybH19IiB0YXJnZXQ9Il9ibGFuayIgY2xhc3M9ImNvdXBvbmJ0biBuZXdiLWJnIj5cbiAgICAgICAge3skdmFsdWUuY291cG9uSW5mb319XG4gICAgICA8L2E+XG4gICAgICA8cD5cbiAgICAgICAgPGEgaHJlZj0ie3skdmFsdWUudXJsfX0iIHRhcmdldD0iX2JsYW5rIiBjbGFzcz0iaHltLXRsZSI+XG4gICAgICAgICAge3skdmFsdWUudGl0bGV9fVxuICAgICAgICA8L2E+XG4gICAgICA8L3A+XG4gICAgPC9saT5cbiAgICB7ey9lYWNofX1cbiAgPC91bD5cbiAge3tpZiAhYWxpc2l0ZX19XG4gIDxhIGhyZWY9Int7cGFnZXVybH19IiB0YXJnZXQ9Il9ibGFuayIgY2xhc3M9Imh5bV9tb3JlbGluayI+5p+l55yL5YWo6YOoPj48L2E+XG4gIHt7L2lmfX1cbiAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj5cbiAgICAuaGFveW1fZGV0YWlsIHtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgfVxuICAgICNnd2RfaGFveW0gLmhhb3ltX2ljb24ge1xuICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE0NXB4IC0xOXB4O1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICB3aWR0aDogMjJweDtcbiAgICAgIGhlaWdodDogMjJweDtcbiAgICAgIG1hcmdpbi10b3A6IDZweDtcbiAgICAgIG1hcmdpbi1yaWdodDogNnB4O1xuICAgIH1cbiAgICAjZ3dkX2hhb3ltLm1zaG92ZXIge1xuICAgICAgY29sb3I6ICM1ZWJlZmY7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgICAgaGVpZ2h0OiAzOHB4O1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgei1pbmRleDogOTk7XG4gICAgfVxuICAgIFxuICA8L3N0eWxlPlxuPC9kaXY+JwoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCwgaSkgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBhID0gbigxNiksCgkJCQlvID0gbigxMjIpLAoJCQkJciA9IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gdm9pZCAwOwoJCQkJCXQoIiNiamRfbG9nbyIpLm9uKCJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7CgkJCQkJCXQoIiNuYnRfc2V0dGluZyIpLnNob3coKQoJCQkJCX0pLCB0KCIjYmpkX2xvZ28iKS5vbigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uKCkgewoJCQkJCQllID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJCXQoIiNuYnRfc2V0dGluZyIpLmhpZGUoKQoJCQkJCQl9LCAyMDApCgkJCQkJfSksIHQoIiNuYnRfc2V0dGluZyIpLm9uKCJtb3VzZWVudGVyIiwgZnVuY3Rpb24oKSB7CgkJCQkJCWNsZWFyVGltZW91dChlKQoJCQkJCX0pLCB0KCIjbmJ0X3NldHRpbmciKS5vbigibW91c2VsZWF2ZSIsIGZ1bmN0aW9uKCkgewoJCQkJCQl0KCIjbmJ0X3NldHRpbmciKS5oaWRlKCkKCQkJCQl9KQoJCQkJfSwKCQkJCXMgPSBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZSA9IGRvY3VtZW50LmxvY2F0aW9uLmhyZWYsCgkJCQkJCXMgPSBpLmJ0eXBlID8gaS5idHlwZSA6ICIiLAoJCQkJCQlsID0gbigyMTIpOwoJCQkJCXQoIiNiamRfYm90dG9tX2RldGFpbCIpLmFwcGVuZChhLmNvbXBpbGUobCkoewoJCQkJCQltYWluc2V0OiBpLnNlcnZlciArICIvYnJ3ZXh0L3NldHRpbmc/ZnJvbT0iICsgbyhpLmZyb21fZGV2aWNlKSArICImYnR5cGU9IiArIHMsCgkJCQkJCWZlZWRiYWNrOiBpLmNfc2VydmVyICsgIicvYnJ3ZXh0L3N1Z2dlc3Q/cmVmZXI9JyIgKyBlbmNvZGVVUklDb21wb25lbnQoZSkgKyAiJmZyb21fZGV2aWNlPSIgKyBpLmZyb21fZGV2aWNlICsgIiZidHlwZT0iICsgcywKCQkJCQkJaGVscDogaS5jX3NlcnZlciArICIvYXBwL2V4dGVuc2lvbj9wYWdlPXF1ZXN0aW9uIiwKCQkJCQkJd2VicGFnZTogaS5jX3NlcnZlciArICIvIgoJCQkJCX0pKSwgcigpCgkJCQl9OwoJCQllLmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkgewoJCQkJcygpCgkJCX0KCQl9KS5jYWxsKHQsIG4oNiksIG4oMSkpCgl9LAoJZnVuY3Rpb24oZSwgdCkgewoJCWUuZXhwb3J0cyA9ICc8ZGl2IGlkPSJuYnRfc2V0dGluZyI+IFxuICA8YSBjbGFzcz0ic2V0dGluZy1pdGVtIG1haW4tc2V0dGluZyIgaHJlZj0ie3ttYWluc2V0fX0iIHRhcmdldD0iX2JsYW5rIj5cbiAgICA8ZW0gY2xhc3M9Im5idC1iZyI+PC9lbT5cbiAgICA8c3Bhbj7lip/og73orr7nva48L3NwYW4+XG4gIDwvYT5cbiAgPGEgY2xhc3M9InNldHRpbmctaXRlbSBuYnQtZmVlZGJhY2siIGhyZWY9Int7ZmVlZGJhY2t9fSIgdGFyZ2V0PSJfYmxhbmsiPlxuICAgIDxlbSBjbGFzcz0ibmJ0LWJnIj48L2VtPlxuICAgIDxzcGFuPuaEj+ingeWPjemmiDwvc3Bhbj5cbiAgPC9hPlxuICA8YSBjbGFzcz0ic2V0dGluZy1pdGVtIG5idC1oZWxwIiBocmVmPSJ7e2hlbHB9fSIgdGFyZ2V0PSJfYmxhbmsiPlxuICAgIDxlbSBjbGFzcz0ibmJ0LWJnIj48L2VtPlxuICAgIDxzcGFuPuS9v+eUqOW4ruWKqTwvc3Bhbj5cbiAgPC9hPlxuICA8YSBjbGFzcz0ic2V0dGluZy1pdGVtIG5idC13ZWJwYWdlIiBocmVmPSJ7e3dlYnBhZ2V9fSIgdGFyZ2V0PSJfYmxhbmsiPlxuICAgIDxlbSBjbGFzcz0ibmJ0LWJnIj48L2VtPlxuICAgIDxzcGFuPui0reeJqeWFmummlumhtTwvc3Bhbj5cbiAgPC9hPlxuPC9kaXY+JwoJfSwKCWZ1bmN0aW9uKGUsIHQsIG4pIHsKCQkoZnVuY3Rpb24odCwgaSkgewoJCQkidXNlIHN0cmljdCI7CgkJCXZhciBhID0gbigyMDMpLAoJCQkJbyA9IHsKCQkJCQl5b3V5dTogIjQwNiIsCgkJCQkJamQ6ICIzIiwKCQkJCQl2aXZvOiAiMzgwIgoJCQkJfSwKCQkJCXIgPSBmdW5jdGlvbihlLCBuKSB7CgkJCQkJdmFyIGkgPSBvW25dOwoJCQkJCXJldHVybiB0LnNwZWNpYWxVbmlvbiArICI/c2l0ZV9pZD0iICsgaSArICImdGFyZ2V0X3VybD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGUpICsgIiZ1bmlvbj0xMDk4MTY0JmNvbHVtbj1mZHMiCgkJCQl9LAoJCQkJcyA9IGZ1bmN0aW9uKCkgewoJCQkJCWZvciAodmFyIGUgPSBpKCIucHJvZHVjdC1iMmMtcHJpY2UtYm94IGEiKSwgdCA9IGUubGVuZ3RoLCBuID0gMDsgdCA+IG47IG4rKykgewoJCQkJCQl2YXIgYSA9IGUuZXEobikuYXR0cigiaHJlZiIpOwoJCQkJCQlhLm1hdGNoKC9eKD86aHR0cHxodHRwcylcOlwvXC9cdytcLnlvdXl1XC5jb20vKSA/IGUuZXEobikuYXR0cigiaHJlZiIsIHIoYSwgInlvdXl1IikpIDogYS5tYXRjaCgvXig/Omh0dHB8aHR0cHMpXDpcL1wvdW5pb25cLmNsaWNrXC5qZFwuY29tLykgPyAoYSA9IGEubWF0Y2goLyZ0bz0oLiopLylbMV0sIGUuZXEobikuYXR0cigiaHJlZiIsIHIoYSwgImpkIikpKSA6IGEubWF0Y2goL14oPzpodHRwfGh0dHBzKVw6XC9cL3Nob3BcLnZpdm9cLmNvbVwuY24vKSAmJiAoYSA9IGEucmVwbGFjZSgiP3NvdXJjZT12aXZvX3pvbCIsICIiKSwgZS5lcShuKS5hdHRyKCJocmVmIiwgcihhLCAidml2byIpKSkKCQkJCQl9CgkJCQl9LAoJCQkJbCA9IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBlID0gaSgiLnByb2R1Y3QtYjJjLXByaWNlLWJveCAuYjJjLWpkIiksCgkJCQkJCXQgPSBlLmVxKDApLmF0dHIoImhyZWYiKSB8fCAiIiwKCQkJCQkJbiA9IHQubWF0Y2goL3RvPSg/Omh0dHB8aHR0cHMpOlwvXC9pdGVtXC5qZFwuY29tXC8oXGQrKVwuaHRtbC8pOwoJCQkJCWlmIChuKSB7CgkJCQkJCXZhciBvID0gblsxXSArICItMyI7CgkJCQkJCWEuYWRkKG8pCgkJCQkJfQoJCQkJfTsKCQkJZS5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHsKCQkJCSJuamNrIiA9PT0gdC5mcm9tX2RldmljZSAmJiAiem9sIiA9PT0gdC5zaXRlICYmIHMoKSwgInpvbCIgPT09IHQuc2l0ZSAmJiBsKCkKCQkJfQoJCX0pLmNhbGwodCwgbigxKSwgbig2KSkKCX0KXSk7"},{"name":"","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":["*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1512981251979},"enabled":true,"position":3,"file_url":"https://greasyfork.org/scripts/2185-%E7%82%BA%E4%BB%80%E9%BA%BC%E4%BD%A0%E5%80%91%E5%B0%B1%E6%98%AF%E4%B8%8D%E8%83%BD%E5%8A%A0%E5%80%8B%E7%A9%BA%E6%A0%BC%E5%91%A2/code/%E7%82%BA%E4%BB%80%E9%BA%BC%E4%BD%A0%E5%80%91%E5%B0%B1%E6%98%AF%E4%B8%8D%E8%83%BD%E5%8A%A0%E5%80%8B%E7%A9%BA%E6%A0%BC%E5%91%A2%EF%BC%9F.user.js","uuid":"1b09c190-b99f-4e0f-b1dd-7a459943f088","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDngrrku4DpurzkvaDlgJHlsLHmmK/kuI3og73liqDlgIvnqbrmoLzlkaLvvJ8KLy8gQG5hbWVzcGFjZSAgICBodHRwOi8vdmludGEud3MvCi8vIEBkZXNjcmlwdGlvbiAg6Ieq5YuV5Zyo57ay6aCB5Lit5omA5pyJ55qE5Lit5paH5ZKM5Y2K5b2i55qE6Iux5paH44CB5pW45a2X44CB56ym6Jmf5LmL6ZaT5o+S5YWl56m655m944CC77yI5pSk5omL77yJ5rKS6L6m5rOV77yM6JmV5aWz5bqn6YO95pyJ5by36L+r55eH44CCCi8vIEB2ZXJzaW9uICAgICAgMi41LjYKLy8gQGluY2x1ZGUgICAgICAqCi8vCi8vIEBhdXRob3IgICAgICAgVmludGEKLy8gQGhvbWVwYWdlICAgICBodHRwczovL2dpdGh1Yi5jb20vdmludGEvcGFyYW5vaWQtYXV0by1zcGFjaW5nCi8vIEBjb250cmlidXRvciAgaHR0cHM6Ly9naXRodWIuY29tL3ZpbnRhL3BhcmFub2lkLWF1dG8tc3BhY2luZy9ncmFwaHMvY29udHJpYnV0b3JzCi8vIEBsaWNlbnNlICAgICAgVGhlIE1JVCBMaWNlbnNlIChNSVQpOyBodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUCi8vID09L1VzZXJTY3JpcHQ9PQoKdmFyIGlzX3NwYWNpbmcgPSBmYWxzZTsKCiFmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtmb3IodmFyIGI9YS5wYXJlbnROb2RlO2ImJmIubm9kZU5hbWUmJi0xPT09Yi5ub2RlTmFtZS5zZWFyY2goL14oaHRtbHxoZWFkfGJvZHl8I2RvY3VtZW50KSQvaSk7KXtpZigidHJ1ZSI9PT1iLmdldEF0dHJpYnV0ZSgiY29udGVudGVkaXRhYmxlIil8fCJ0cnVlIj09PWIuZ2V0QXR0cmlidXRlKCJnX2VkaXRhYmxlIil8fGIubm9kZU5hbWUuc2VhcmNoKGcpPj0wKXJldHVybiEwO2I9Yi5wYXJlbnROb2RlfXJldHVybiExfWZ1bmN0aW9uIGMoYSxiKXtmb3IodmFyIGM9YS5jaGlsZE5vZGVzLGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXTtpZig4IT09ZS5ub2RlVHlwZSYmZS50ZXh0Q29udGVudClyZXR1cm4gZT09PWJ9fWZ1bmN0aW9uIGQoYSxiKXtmb3IodmFyIGM9YS5jaGlsZE5vZGVzLGQ9Yy5sZW5ndGgtMTtkPi0xO2QtLSl7dmFyIGU9Y1tkXTtpZig4IT09ZS5ub2RlVHlwZSYmZS50ZXh0Q29udGVudClyZXR1cm4gZT09PWJ9fWZ1bmN0aW9uIGUoYSl7dmFyIGIsYz1hO3JldHVybiBhPWEucmVwbGFjZSgvKFtcdTJlODAtXHUyZWZmXHUyZjAwLVx1MmZkZlx1MzA0MC1cdTMwOWZcdTMwYTAtXHUzMGZmXHUzMTAwLVx1MzEyZlx1MzIwMC1cdTMyZmZcdTM0MDAtXHU0ZGJmXHU0ZTAwLVx1OWZmZlx1ZjkwMC1cdWZhZmZdKShbIl0pL2dpLCIkMSAkMiIpLGE9YS5yZXBsYWNlKC8oWyJdKShbXHUyZTgwLVx1MmVmZlx1MmYwMC1cdTJmZGZcdTMwNDAtXHUzMDlmXHUzMGEwLVx1MzBmZlx1MzEwMC1cdTMxMmZcdTMyMDAtXHUzMmZmXHUzNDAwLVx1NGRiZlx1NGUwMC1cdTlmZmZcdWY5MDAtXHVmYWZmXSkvZ2ksIiQxICQyIiksYT1hLnJlcGxhY2UoLyhbIidcKFxbXHs8XHUyMDFjXSspKFxzKikoLis/KShccyopKFsiJ1wpXF1cfT5cdTIwMWRdKykvZ2ksIiQxJDMkNSIpLGE9YS5yZXBsYWNlKC8oW1x1MmU4MC1cdTJlZmZcdTJmMDAtXHUyZmRmXHUzMDQwLVx1MzA5Zlx1MzBhMC1cdTMwZmZcdTMxMDAtXHUzMTJmXHUzMjAwLVx1MzJmZlx1MzQwMC1cdTRkYmZcdTRlMDAtXHU5ZmZmXHVmOTAwLVx1ZmFmZl0pKCApKCcpKFthLXpdKS9naSwiJDEkMyQ0IiksYT1hLnJlcGxhY2UoLyhbXHUyZTgwLVx1MmVmZlx1MmYwMC1cdTJmZGZcdTMwNDAtXHUzMDlmXHUzMGEwLVx1MzBmZlx1MzEwMC1cdTMxMmZcdTMyMDAtXHUzMmZmXHUzNDAwLVx1NGRiZlx1NGUwMC1cdTlmZmZcdWY5MDAtXHVmYWZmXSkoIyhcUyspKS9naSwiJDEgJDIiKSxhPWEucmVwbGFjZSgvKChcUyspIykoW1x1MmU4MC1cdTJlZmZcdTJmMDAtXHUyZmRmXHUzMDQwLVx1MzA5Zlx1MzBhMC1cdTMwZmZcdTMxMDAtXHUzMTJmXHUzMjAwLVx1MzJmZlx1MzQwMC1cdTRkYmZcdTRlMDAtXHU5ZmZmXHVmOTAwLVx1ZmFmZl0pL2dpLCIkMSAkMyIpLGE9YS5yZXBsYWNlKC8oW1x1MmU4MC1cdTJlZmZcdTJmMDAtXHUyZmRmXHUzMDQwLVx1MzA5Zlx1MzBhMC1cdTMwZmZcdTMxMDAtXHUzMTJmXHUzMjAwLVx1MzJmZlx1MzQwMC1cdTRkYmZcdTRlMDAtXHU5ZmZmXHVmOTAwLVx1ZmFmZl0pKFtcK1wtXCpcLz0mXFx8PD5dKShbYS16MC05XSkvZ2ksIiQxICQyICQzIiksYT1hLnJlcGxhY2UoLyhbYS16MC05XSkoW1wrXC1cKlwvPSZcXHw8Pl0pKFtcdTJlODAtXHUyZWZmXHUyZjAwLVx1MmZkZlx1MzA0MC1cdTMwOWZcdTMwYTAtXHUzMGZmXHUzMTAwLVx1MzEyZlx1MzIwMC1cdTMyZmZcdTM0MDAtXHU0ZGJmXHU0ZTAwLVx1OWZmZlx1ZjkwMC1cdWZhZmZdKS9naSwiJDEgJDIgJDMiKSxjPWEsYj1jLnJlcGxhY2UoLyhbXHUyZTgwLVx1MmVmZlx1MmYwMC1cdTJmZGZcdTMwNDAtXHUzMDlmXHUzMGEwLVx1MzBmZlx1MzEwMC1cdTMxMmZcdTMyMDAtXHUzMmZmXHUzNDAwLVx1NGRiZlx1NGUwMC1cdTlmZmZcdWY5MDAtXHVmYWZmXSkoW1woXFtcezxcdTIwMWNdKyguKj8pW1wpXF1cfT5cdTIwMWRdKykoW1x1MmU4MC1cdTJlZmZcdTJmMDAtXHUyZmRmXHUzMDQwLVx1MzA5Zlx1MzBhMC1cdTMwZmZcdTMxMDAtXHUzMTJmXHUzMjAwLVx1MzJmZlx1MzQwMC1cdTRkYmZcdTRlMDAtXHU5ZmZmXHVmOTAwLVx1ZmFmZl0pL2dpLCIkMSAkMiAkNCIpLGE9YixjPT09YiYmKGE9YS5yZXBsYWNlKC8oW1x1MmU4MC1cdTJlZmZcdTJmMDAtXHUyZmRmXHUzMDQwLVx1MzA5Zlx1MzBhMC1cdTMwZmZcdTMxMDAtXHUzMTJmXHUzMjAwLVx1MzJmZlx1MzQwMC1cdTRkYmZcdTRlMDAtXHU5ZmZmXHVmOTAwLVx1ZmFmZl0pKFtcKFxbXHs8XHUyMDFjPl0pL2dpLCIkMSAkMiIpLGE9YS5yZXBsYWNlKC8oW1wpXF1cfT5cdTIwMWQ8XSkoW1x1MmU4MC1cdTJlZmZcdTJmMDAtXHUyZmRmXHUzMDQwLVx1MzA5Zlx1MzBhMC1cdTMwZmZcdTMxMDAtXHUzMTJmXHUzMjAwLVx1MzJmZlx1MzQwMC1cdTRkYmZcdTRlMDAtXHU5ZmZmXHVmOTAwLVx1ZmFmZl0pL2dpLCIkMSAkMiIpKSxhPWEucmVwbGFjZSgvKFtcKFxbXHs8XHUyMDFjXSspKFxzKikoLis/KShccyopKFtcKVxdXH0+XHUyMDFkXSspL2dpLCIkMSQzJDUiKSxhPWEucmVwbGFjZSgvKFtcdTJlODAtXHUyZWZmXHUyZjAwLVx1MmZkZlx1MzA0MC1cdTMwOWZcdTMwYTAtXHUzMGZmXHUzMTAwLVx1MzEyZlx1MzIwMC1cdTMyZmZcdTM0MDAtXHU0ZGJmXHU0ZTAwLVx1OWZmZlx1ZjkwMC1cdWZhZmZdKShbfiE7OixcLlw/XHUyMDI2XSkoW2EtejAtOV0pL2dpLCIkMSQyICQzIiksYT1hLnJlcGxhY2UoLyhbXHUyZTgwLVx1MmVmZlx1MmYwMC1cdTJmZGZcdTMwNDAtXHUzMDlmXHUzMGEwLVx1MzBmZlx1MzEwMC1cdTMxMmZcdTMyMDAtXHUzMmZmXHUzNDAwLVx1NGRiZlx1NGUwMC1cdTlmZmZcdWY5MDAtXHVmYWZmXSkoW2EtejAtOWBcJCVcXiZcKlwtPVwrXFxcfC9AXHUwMGExLVx1MDBmZlx1MjAyMlx1MjAyN1x1MjE1MC1cdTIxOGZdKS9naSwiJDEgJDIiKSxhPWEucmVwbGFjZSgvKFthLXowLTlgflwkJVxeJlwqXC09XCtcXFx8LyE7OixcLlw/XHUwMGExLVx1MDBmZlx1MjAyMlx1MjAyNlx1MjAyN1x1MjE1MC1cdTIxOGZdKShbXHUyZTgwLVx1MmVmZlx1MmYwMC1cdTJmZGZcdTMwNDAtXHUzMDlmXHUzMGEwLVx1MzBmZlx1MzEwMC1cdTMxMmZcdTMyMDAtXHUzMmZmXHUzNDAwLVx1NGRiZlx1NGUwMC1cdTlmZmZcdWY5MDAtXHVmYWZmXSkvZ2ksIiQxICQyIil9ZnVuY3Rpb24gZihhLGYpe2Y9Znx8ZG9jdW1lbnQ7Zm9yKHZhciBrLGw9ITEsbT1kb2N1bWVudC5ldmFsdWF0ZShhLGYsbnVsbCxYUGF0aFJlc3VsdC5PUkRFUkVEX05PREVfU05BUFNIT1RfVFlQRSxudWxsKSxuPW0uc25hcHNob3RMZW5ndGgsbz1uLTE7bz4tMTstLW8pe3ZhciBwPW0uc25hcHNob3RJdGVtKG8pO2lmKGIocCkpaz1wO2Vsc2V7dmFyIHE9ZShwLmRhdGEpO2lmKHAuZGF0YSE9PXEmJihsPSEwLHAuZGF0YT1xKSxrKXtpZihwLm5leHRTaWJsaW5nJiZwLm5leHRTaWJsaW5nLm5vZGVOYW1lLnNlYXJjaChpKT49MCl7az1wO2NvbnRpbnVlfXZhciByPXAuZGF0YS50b1N0cmluZygpLnN1YnN0cigtMSkray5kYXRhLnRvU3RyaW5nKCkuc3Vic3RyKDAsMSkscz1lKHIpO2lmKHIhPT1zKXtsPSEwO2Zvcih2YXIgdD1rO3QucGFyZW50Tm9kZSYmLTE9PT10Lm5vZGVOYW1lLnNlYXJjaChoKSYmYyh0LnBhcmVudE5vZGUsdCk7KXQ9dC5wYXJlbnROb2RlO2Zvcih2YXIgdT1wO3UucGFyZW50Tm9kZSYmLTE9PT11Lm5vZGVOYW1lLnNlYXJjaChoKSYmZCh1LnBhcmVudE5vZGUsdSk7KXU9dS5wYXJlbnROb2RlO2lmKHUubmV4dFNpYmxpbmcmJnUubmV4dFNpYmxpbmcubm9kZU5hbWUuc2VhcmNoKGkpPj0wKXtrPXA7Y29udGludWV9aWYoLTE9PT11Lm5vZGVOYW1lLnNlYXJjaChqKSlpZigtMT09PXQubm9kZU5hbWUuc2VhcmNoKGgpKS0xPT09dC5ub2RlTmFtZS5zZWFyY2goZykmJi0xPT09dC5ub2RlTmFtZS5zZWFyY2goaikmJihrLnByZXZpb3VzU2libGluZz8tMT09PWsucHJldmlvdXNTaWJsaW5nLm5vZGVOYW1lLnNlYXJjaChpKSYmKGsuZGF0YT0iICIray5kYXRhKTpiKGspfHwoay5kYXRhPSIgIitrLmRhdGEpKTtlbHNlIGlmKC0xPT09dS5ub2RlTmFtZS5zZWFyY2goaCkpcC5kYXRhPXAuZGF0YSsiICI7ZWxzZXt2YXIgdj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJwYW5ndSIpO3YuaW5uZXJIVE1MPSIgIix0LnByZXZpb3VzU2libGluZz8tMT09PXQucHJldmlvdXNTaWJsaW5nLm5vZGVOYW1lLnNlYXJjaChpKSYmdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh2LHQpOnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodix0KSx2LnByZXZpb3VzRWxlbWVudFNpYmxpbmd8fHYucGFyZW50Tm9kZSYmdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHYpfX19az1wfX1yZXR1cm4gbH12YXIgZz0vXihjb2RlfHByZXx0ZXh0YXJlYSkkL2ksaD0vXihhfGRlbHxwcmV8c3xzdHJpa2V8dSkkL2ksaT0vXihicnxocnxpfGltZ3xwYW5ndSkkL2ksaj0vXihkaXZ8aDF8aDJ8aDN8aDR8aDV8aDZ8cCkkL2k7YS50ZXh0X3NwYWNpbmc9ZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSl9LGEucGFnZV90aXRsZV9zcGFjaW5nPWZ1bmN0aW9uKCl7dmFyIGE9Ii9odG1sL2hlYWQvdGl0bGUvdGV4dCgpIixiPWYoYSk7cmV0dXJuIGJ9LGEucGFnZV9zcGFjaW5nPWZ1bmN0aW9uKCl7dmFyIGI9YS5wYWdlX3RpdGxlX3NwYWNpbmcoKSxjPSIvaHRtbC9ib2R5Ly8qL3RleHQoKVtub3JtYWxpemUtc3BhY2UoLildIjtbInNjcmlwdCIsInN0eWxlIiwidGV4dGFyZWEiXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2MrPSdbdHJhbnNsYXRlKG5hbWUoLi4pLCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiIsImFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6IikhPSInK2ErJyJdJ30pO3ZhciBkPWYoYyk7cmV0dXJuIGJ8fGR9LGEubm9kZV9zcGFjaW5nPWZ1bmN0aW9uKGEpe3ZhciBiPSIuLy8qL3RleHQoKVtub3JtYWxpemUtc3BhY2UoLildIjtbInNjcmlwdCIsInN0eWxlIiwidGV4dGFyZWEiXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2IrPSdbdHJhbnNsYXRlKG5hbWUoLi4pLCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiIsImFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6IikhPSInK2ErJyJdJ30pO3ZhciBjPWYoYixhKTtyZXR1cm4gY30sYS5lbGVtZW50X3NwYWNpbmc9ZnVuY3Rpb24oYSl7dmFyIGI7aWYoMD09PWEuaW5kZXhPZigiIyIpKXt2YXIgYz1hLnNsaWNlKDEpO2I9J2lkKCInK2MrJyIpLy90ZXh0KCknfWVsc2UgaWYoMD09PWEuaW5kZXhPZigiLiIpKXt2YXIgZD1hLnNsaWNlKDEpO2I9Jy8vKltjb250YWlucyhjb25jYXQoIiAiLCBub3JtYWxpemUtc3BhY2UoQGNsYXNzKSwgIiAiKSwgIicrZCsnIildLy90ZXh0KCknfWVsc2V7dmFyIGU9YTtiPSIvLyIrZSsiLy90ZXh0KCkifXZhciBnPWYoYik7cmV0dXJuIGd9fSh3aW5kb3cucGFuZ3U9d2luZG93LnBhbmd1fHx7fSk7CgpmdW5jdGlvbiBnb19zcGFjaW5nKCkgewogICAgaXNfc3BhY2luZyA9IHRydWU7CiAgICBwYW5ndS5wYWdlX3NwYWNpbmcoKTsKICAgIGlzX3NwYWNpbmcgPSBmYWxzZTsKfQoKZ29fc3BhY2luZygpOwoKZnVuY3Rpb24gaW5zZXJ0ZWRfZ29fc3BhY2luZyhub2RlKSB7CiAgICBpc19zcGFjaW5nID0gdHJ1ZTsKICAgIHBhbmd1Lm5vZGVfc3BhY2luZyhub2RlKTsKICAgIGlzX3NwYWNpbmcgPSBmYWxzZTsKfQoKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NTm9kZUluc2VydGVkJywgZnVuY3Rpb24oZSkgewogICAgaWYgKCFpc19zcGFjaW5nKSB7CiAgICAgICAgaW5zZXJ0ZWRfZ29fc3BhY2luZyhlLnRhcmdldCk7CiAgICB9Cn0sIGZhbHNlKTsK"},{"name":"Bypass Wait, Code & Login on Websites","options":{"awareOfChrome":true,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_prototypes":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":["http://localhost.cuwcl4c/*","http://jixunmoe.github.io/*","http://123564.com/*","http://m.123564.com/*","http://5xfile.com/*","http://www.5xfile.com/*","http://yun.baidu.com/*","http://pan.baidu.com/*","http://howfile.com/*","http://*.howfile.com/*","http://jkpan.cc/*","http://*.jkpan.cc/*","http://namipan.cc/*","http://*.namipan.cc/*","http://10pan.cc/*","http://*.10pan.cc/*","http://66yp.cc/*","http://*.66yp.cc/*","http://123wzwp.com/*","http://*.123wzwp.com/*","http://hiyp.cc/*","http://*.hiyp.cc/*","http://jkpan.cc/*","http://*.jkpan.cc/*","http://webhd.xuite.net/*","http://sync.hamicloud.net/*","http://www.yimuhe.com/*","http://douban.fm/*","https://douban.fm/*","http://moe.fm/*","http://music.163.com/*","https://music.163.com/*","http://www.1ting.com/*","http://www.23356.com/*","http://www.app-echo.com/*","http://web.kugou.com/*","https://jixunmoe.github.io/cuwcl4c/config/"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"CUWCL4C":"s{\"version\":1,\"bDiaplayLog\":true,\"bUseCustomRules\":false,\"dAria_auth\":0,\"dAria_port\":6800,\"dUriType\":0,\"sAria_dir\":\"D:\\\\Download\\\\\",\"sAria_host\":\"127.0.0.1\",\"sAria_pass\":\"\",\"sAria_user\":\"\",\"sCustomRule\":\"\"}"},"ts":1512981251987},"enabled":true,"position":4,"file_url":"https://greasyfork.org/scripts/2600-%E8%B7%B3%E8%BF%87%E7%BD%91%E7%AB%99%E7%AD%89%E5%BE%85-%E9%AA%8C%E8%AF%81%E7%A0%81%E5%8F%8A%E7%99%BB%E5%BD%95/code/%E8%B7%B3%E8%BF%87%E7%BD%91%E7%AB%99%E7%AD%89%E5%BE%85%E3%80%81%E9%AA%8C%E8%AF%81%E7%A0%81%E5%8F%8A%E7%99%BB%E5%BD%95.user.js","uuid":"b11f85fc-9f3f-43c3-b1b6-3671fe3d4695","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQGdyYW50ICAgICAgICAgIHVuc2FmZVdpbmRvdwovLyBAZ3JhbnQgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QKLy8gQGdyYW50ICAgICAgICAgIEdNX29wZW5JblRhYgovLyBAZ3JhbnQgICAgICAgICAgR01fcmVnaXN0ZXJNZW51Q29tbWFuZAovLyBAZ3JhbnQgICAgICAgICAgR01fZ2V0VmFsdWUKLy8gQGdyYW50ICAgICAgICAgIEdNX3NldFZhbHVlCi8vIEBncmFudCAgICAgICAgICBHTV9nZXRSZXNvdXJjZVRleHQKLy8gQGdyYW50ICAgICAgICAgIEdNX2luZm8KCi8vIEBydW4tYXQgICAgICAgICBkb2N1bWVudC1zdGFydAovLyBAbmFtZTplbiAgICAgICAgQnlwYXNzIFdhaXQsIENvZGUgJiBMb2dpbiBvbiBXZWJzaXRlcwovLyBAbmFtZSAgICAgICAgICAg6Lez6L+H572R56uZ562J5b6F44CB6aqM6K+B56CB5Y+K55m75b2VCi8vIEBuYW1lOnpoLUNOICAgICDot7Pov4fnvZHnq5nnrYnlvoXjgIHpqozor4HnoIHlj4rnmbvlvZUKLy8gQG5hbWU6emgtVFcgICAgIOe5numBjuermem7nuetieW+heOAgeitmOWIpeeivOWPiueZu+mMhAoKLy8gQGRlc2NyaXB0aW9uICAgICAgIOenu+mZpOWQhOexu+e9keermemqjOivgeeggeOAgeeZu+W9leOAgeWAkuiuoeaXtuWPiuabtOWkmiEKLy8gQGRlc2NyaXB0aW9uOnpoLUNOIOenu+mZpOWQhOexu+e9keermemqjOivgeeggeOAgeeZu+W9leOAgeWAkuiuoeaXtuWPiuabtOWkmiEKLy8gQGRlc2NyaXB0aW9uOnpoLVRXIOenu+mZpOWQhOmhnuermem7nuitmOWIpeeivOOAgeeZu+mMhOOAgeWAkuioiOaZguWPiuabtOWkmiEKLy8gQGRlc2NyaXB0aW9uOmVuICAgIFJlbW92ZSB2ZXJpZnkgY29kZSwgbG9naW4gcmVxdWlyZW1lbnQsIGNvdW50aW5nIGRvd24uLi4gYW5kIG1vcmUhCgoKLy8gQGNvcHlyaWdodCAgICAgIDIwMTQrLCBZdWxlaSwgTW9kIGJ5IEppeHVuLgovLy8vICAgICAgICAgICAgICAgQmFzZWQgb24gW0NyYWNrIFVybCBXYWl0IENvZGUgTG9naW5dIEJ5IFl1bGVpCgovLyDpgb/lhY0gU291cmNlIE1hcCDmlofku7bmib7kuI3liLDnmoTplJnor68KLy8gQHJlcXVpcmUgICAgICAgIGh0dHBzOi8vY2RuLmJvb3Rjc3MuY29tL2pxdWVyeS8yLjEuNC9qcXVlcnkuanMKLy8gQHJlcXVpcmUgICAgICAgIGh0dHBzOi8vY2RuLmJvb3Rjc3MuY29tL3VuZGVyc2NvcmUuanMvMS44LjMvdW5kZXJzY29yZS5qcwoKLy8vIENyeXB0b0pTIOebuOWFs+W6kwovLyBAcmVxdWlyZSAgICAgICAgaHR0cHM6Ly9jZG4uYm9vdGNzcy5jb20vY3J5cHRvLWpzLzMuMS4yL2NvbXBvbmVudHMvY29yZS1taW4uanMKLy8gQHJlcXVpcmUgICAgICAgIGh0dHBzOi8vY2RuLmJvb3Rjc3MuY29tL2NyeXB0by1qcy8zLjEuMi9jb21wb25lbnRzL2VuYy1iYXNlNjQtbWluLmpzCi8vIEByZXF1aXJlICAgICAgICBodHRwczovL2Nkbi5ib290Y3NzLmNvbS9jcnlwdG8tanMvMy4xLjIvY29tcG9uZW50cy9tZDUtbWluLmpzCi8vIEByZXF1aXJlICAgICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3NjcmlwdHMvNjY5Ni9jb2RlL0NyeXB0b0pTLUJ5dGVBcnJheS5qcwoKLy8vIOmdnuWQjOatpeaemuS4vgovLyBAcmVxdWlyZSAgICAgICAgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzM1ODgtaW50ZXJ2YWwtbG9vcGVyL2NvZGUvSW50ZXJ2YWwtTG9vcGVyLmpzCgovLy8g5YW85a65IEdNIDEueCwgMi54Ci8vIEByZXF1aXJlICAgICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3NjcmlwdHMvMjU5OS9jb2RlL2dtMi1wb3J0LXYxMDQuanMKCi8vLyBBcmlhMiBSUEMKLy8gQHJlcXVpcmUgICAgICAgIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvc2NyaXB0cy81NjcyL2NvZGUvQXJpYTItUlBDLWJ1aWxkLTEwLmpzCgovLyBWdWVKcywgbm90IGFsd2F5cyB1c2VkLgovLyBAcmVzb3VyY2UgICAgICAgVnVlSnMgaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvdnVlLzEuMC4yNi92dWUubWluLmpzCgovLyBAYXV0aG9yICAgICAgICAgSml4dW4uTW9lPFllbGxvdyBZb3NoaT4KLy8gQG5hbWVzcGFjZSAgICAgIGh0dHA6Ly9qaXh1bi5vcmcvCi8vIEB2ZXJzaW9uICAgICAgICA0LjAuNzIwCgovLyDlsJ3or5Xkvb/nlKjohJrmnKznlJ/miJDljLnphY3op4TliJkKLy8gLy8vLyAgICAgICAgICAgICAgIFtJbmNsdWRlIFJ1bGVzXQoKLy8gQGluY2x1ZGUgaHR0cDovL2xvY2FsaG9zdC5jdXdjbDRjLyoKLy8gQGluY2x1ZGUgaHR0cDovL2ppeHVubW9lLmdpdGh1Yi5pby8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8xMjM1NjQuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL20uMTIzNTY0LmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly81eGZpbGUuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL3d3dy41eGZpbGUuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL3l1bi5iYWlkdS5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vcGFuLmJhaWR1LmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly9ob3dmaWxlLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8qLmhvd2ZpbGUuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL2prcGFuLmNjLyoKLy8gQGluY2x1ZGUgaHR0cDovLyouamtwYW4uY2MvKgovLyBAaW5jbHVkZSBodHRwOi8vbmFtaXBhbi5jYy8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8qLm5hbWlwYW4uY2MvKgovLyBAaW5jbHVkZSBodHRwOi8vMTBwYW4uY2MvKgovLyBAaW5jbHVkZSBodHRwOi8vKi4xMHBhbi5jYy8qCi8vIEBpbmNsdWRlIGh0dHA6Ly82NnlwLmNjLyoKLy8gQGluY2x1ZGUgaHR0cDovLyouNjZ5cC5jYy8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8xMjN3endwLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8qLjEyM3d6d3AuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL2hpeXAuY2MvKgovLyBAaW5jbHVkZSBodHRwOi8vKi5oaXlwLmNjLyoKLy8gQGluY2x1ZGUgaHR0cDovL2prcGFuLmNjLyoKLy8gQGluY2x1ZGUgaHR0cDovLyouamtwYW4uY2MvKgovLyBAaW5jbHVkZSBodHRwOi8vd2ViaGQueHVpdGUubmV0LyoKLy8gQGluY2x1ZGUgaHR0cDovL3N5bmMuaGFtaWNsb3VkLm5ldC8qCi8vIEBpbmNsdWRlIGh0dHA6Ly93d3cueWltdWhlLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly9kb3ViYW4uZm0vKgovLyBAaW5jbHVkZSBodHRwczovL2RvdWJhbi5mbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly9tb2UuZm0vKgovLyBAaW5jbHVkZSBodHRwOi8vbXVzaWMuMTYzLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHBzOi8vbXVzaWMuMTYzLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly93d3cuMXRpbmcuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL3d3dy4yMzM1Ni5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vd3d3LmFwcC1lY2hvLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly93ZWIua3Vnb3UuY29tLyoKLy8gQGluY2x1ZGUgaHR0cHM6Ly9qaXh1bm1vZS5naXRodWIuaW8vY3V3Y2w0Yy9jb25maWcvCgovLyBHTV94bWxIdHRwUmVxdWVzdCDov5znq6/mnI3liqHlmajliJfooagKLy8gQGNvbm5lY3QgZG93bi5sZXBhbi5jYwovLyBAY29ubmVjdCBtdXNpYy5iYWlkdS5jb20KLy8gQGNvbm5lY3QgeWlueXVleXVuLmJhaWR1LmNvbQovLyBAY29ubmVjdCBtZWRpYS5zdG9yZS5rdWdvdS5jb20KLy8gQGNvbm5lY3QgdHJhY2tlcmNkbi5rdWdvdS5jb20KLy8gQGNvbm5lY3QgeWlueXVldGFpLmNvbQovLyBAY29ubmVjdCBpdHd1c3VuLmNvbQovLyBAY29ubmVjdCBzZWxmCgovLyDlkYror4kgVGFtcGVyTW9ua2V5IOi/meS4quiEmuacrOS4jemcgOimgei9rOaNogovLyBAbm9jb21wYXQgQ2hyb21lCgovLyA9PS9Vc2VyU2NyaXB0PT0KdmFyIGRlZmluZSA9IChmdW5jdGlvbiAoKSB7CiAgICB2YXIgX21vZHVsZXMgPSB7fTsKICAgIHJldHVybiBkZWZpbmU7CiAgICBmdW5jdGlvbiBkZWZpbmUobW9kdWxlLCByZXF1aXJlcywgY2FsbGJhY2spIHsKICAgICAgICB2YXIgX3RoaXNfbW9kdWxlID0gewogICAgICAgICAgICBleHBvcnRzOiB7fQogICAgICAgIH07CiAgICAgICAgdmFyIHBhcmFtcyA9IHJlcXVpcmVzLm1hcCgobW9kdWxlKSA9PiB7CiAgICAgICAgICAgIGlmIChtb2R1bGUgPT0gJ2V4cG9ydHMnKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXNfbW9kdWxlLmV4cG9ydHM7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAobW9kdWxlID09ICdyZXF1aXJlJykgewogICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVpcmU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJlcXVpcmUobW9kdWxlKTsKICAgICAgICB9KTsKICAgICAgICBjYWxsYmFjay5hcHBseSh0aGlzLCBwYXJhbXMpOwogICAgICAgIF9tb2R1bGVzW21vZHVsZV0gPSBfdGhpc19tb2R1bGUuZXhwb3J0czsKICAgIH0KICAgIGZ1bmN0aW9uIHJlcXVpcmUobW9kdWxlKSB7CiAgICAgICAgcmV0dXJuIF9tb2R1bGVzW21vZHVsZV07CiAgICB9Cn0pKCk7CmRlZmluZSgiaGVscGVyL1NjcmlwdCIsIFsicmVxdWlyZSIsICJleHBvcnRzIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgdmFyIFNjcmlwdDsKICAgIChmdW5jdGlvbiAoU2NyaXB0KSB7CiAgICAgICAgU2NyaXB0Lk5hbWUgPSAiQ1VXQ0w0QyI7CiAgICAgICAgU2NyaXB0LkhvbWUgPSAiaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy96aC1DTi9zY3JpcHRzLzI2MDAiOwogICAgICAgIFNjcmlwdC5Db25maWcgPSAiaHR0cHM6Ly9qaXh1bm1vZS5naXRodWIuaW8vY3V3Y2w0Yy9jb25maWcvIjsKICAgICAgICBTY3JpcHQuRmVlZGJhY2sgPSAiaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9mb3J1bS9wb3N0L2Rpc2N1c3Npb24/RGlzY3Vzc2lvbi9TY3JpcHRJRD0yNjAwIjsKICAgICAgICBmdW5jdGlvbiBMaXN0ZW5FdmVudChsaXN0ZW5lcikgewogICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFNjcmlwdC5OYW1lLCAoZSkgPT4gewogICAgICAgICAgICAgICAgdmFyIGluZm87CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGUuZGV0YWlsID09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgaW5mbyA9IEpTT04ucGFyc2UoZS5kZXRhaWwpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaW5mbyA9IGUuZGV0YWlsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbGlzdGVuZXIoaW5mbyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBTY3JpcHQuTGlzdGVuRXZlbnQgPSBMaXN0ZW5FdmVudDsKICAgICAgICBmdW5jdGlvbiBGaXJlRXZlbnQobmFtZSwgZGF0YSkgewogICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChuYW1lLCB7CiAgICAgICAgICAgICAgICBkZXRhaWw6IEpTT04uc3RyaW5naWZ5KGRhdGEpCiAgICAgICAgICAgIH0pKTsKICAgICAgICB9CiAgICAgICAgU2NyaXB0LkZpcmVFdmVudCA9IEZpcmVFdmVudDsKICAgICAgICBmdW5jdGlvbiBSZWdpc3RlclN0b3JhZ2VFdmVudChrZXksIGxpc3RlbmVyKSB7CiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgKGUpID0+IHsKICAgICAgICAgICAgICAgIGlmIChlLmtleSA9PSBrZXkpIHsKICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcihrZXkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgU2NyaXB0LlJlZ2lzdGVyU3RvcmFnZUV2ZW50ID0gUmVnaXN0ZXJTdG9yYWdlRXZlbnQ7CiAgICB9KShTY3JpcHQgPSBleHBvcnRzLlNjcmlwdCB8fCAoZXhwb3J0cy5TY3JpcHQgPSB7fSkpOwp9KTsKZGVmaW5lKCJoZWxwZXIvQ29uc3RhbnRzIiwgWyJyZXF1aXJlIiwgImV4cG9ydHMiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgICAvLyDluLjmlbAKICAgIGV4cG9ydHMuaXNGcmFtZSA9IF9pc0ZyYW1lKCk7CiAgICBleHBvcnRzLnZlcnNpb24gPSBHTV9pbmZvLnNjcmlwdC52ZXJzaW9uOwogICAgZXhwb3J0cy5jdXJyZW50VXJsID0gbG9jYXRpb24uaHJlZi5zcGxpdCgnIycpWzBdOwogICAgZXhwb3J0cy5sb3dlckhvc3QgPSBsb2NhdGlvbi5ob3N0bmFtZS50b0xvd2VyQ2FzZSgpOwogICAgZXhwb3J0cy50b3BIb3N0ID0gZXhwb3J0cy5sb3dlckhvc3QubWF0Y2goL1x3K1wuP1x3Kz8kLylbMF07CiAgICBleHBvcnRzLnRvcEhvc3RNYXNrID0gYC4ke2V4cG9ydHMudG9wSG9zdH1gOwogICAgZXhwb3J0cy5kb3dubG9hZEljb25DbGFzcyA9ICdqeF9kbCc7CiAgICBleHBvcnRzLmRvd25sb2FkSWNvblNlbGVjdG9yID0gJy5qeF9kbCc7CiAgICBmdW5jdGlvbiBfaXNGcmFtZSgpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gdW5zYWZlV2luZG93LnRvcCAhPT0gdW5zYWZlV2luZG93LnNlbGY7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgIH0KfSk7CmRlZmluZSgiaGVscGVyL0xvZ2dlciIsIFsicmVxdWlyZSIsICJleHBvcnRzIiwgImhlbHBlci9TY3JpcHQiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIFNjcmlwdF8xKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgZnVuY3Rpb24gRG9Mb2cocHJlZml4LCBtZXRob2QsIGFyZ3MpIHsKICAgICAgICBpZiAoYXJncy5sZW5ndGggPCAxKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgaWYgKHR5cGVvZiBhcmdzWzBdID09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIGFyZ3NbMF0gPSBgWyR7U2NyaXB0XzEuU2NyaXB0Lk5hbWV9XVske3ByZWZpeH1dICR7YXJnc1swXX1gOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgYXJncy5zcGxpY2UoMCwgMCwgYFske1NjcmlwdF8xLlNjcmlwdC5OYW1lfV1bJHtwcmVmaXh9XSAke2FyZ3NbMF19YCk7CiAgICAgICAgfQogICAgICAgIGNvbnNvbGVbbWV0aG9kXS5hcHBseShjb25zb2xlLCBhcmdzKTsKICAgIH0KICAgIGZ1bmN0aW9uIFdyYXBMb2cocHJlZml4LCBtZXRob2QpIHsKICAgICAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHsKICAgICAgICAgICAgcmV0dXJuIERvTG9nKHByZWZpeCwgbWV0aG9kLCBhcmdzKTsKICAgICAgICB9OwogICAgfQogICAgZnVuY3Rpb24gRG9Ob3RoaW5nKCkgeyB9CiAgICBleHBvcnRzLmxvZyA9IERvTm90aGluZzsKICAgIGV4cG9ydHMuaW5mbyA9IERvTm90aGluZzsKICAgIGV4cG9ydHMuZXJyb3IgPSBEb05vdGhpbmc7CiAgICBleHBvcnRzLndhcm4gPSBEb05vdGhpbmc7CiAgICBmdW5jdGlvbiBFbmFibGVMb2dzKCkgewogICAgICAgIGV4cG9ydHMubG9nID0gV3JhcExvZygn5pel5b+XJywgJ2xvZycpOwogICAgICAgIGV4cG9ydHMuaW5mbyA9IFdyYXBMb2coJ+S/oeaBrycsICdpbmZvJyk7CiAgICAgICAgZXhwb3J0cy5lcnJvciA9IFdyYXBMb2coJ+mUmeivrycsICdlcnJvcicpOwogICAgICAgIGV4cG9ydHMud2FybiA9IFdyYXBMb2coJ+itpuWRiicsICd3YXJuJyk7CiAgICB9CiAgICBleHBvcnRzLkVuYWJsZUxvZ3MgPSBFbmFibGVMb2dzOwp9KTsKZGVmaW5lKCJoZWxwZXIvU2NyaXB0Q29uZmlnIiwgWyJyZXF1aXJlIiwgImV4cG9ydHMiLCAiaGVscGVyL1NjcmlwdCIsICJoZWxwZXIvTG9nZ2VyIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBTY3JpcHRfMiwgTG9nZ2VyXzEpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgICB2YXIgVXJpVHlwZTsKICAgIChmdW5jdGlvbiAoVXJpVHlwZSkgewogICAgICAgIFVyaVR5cGVbVXJpVHlwZVsiTm9ybWFsVXJsIl0gPSAwXSA9ICJOb3JtYWxVcmwiOwogICAgICAgIC8qKiBAZGVwcmVjYXRlZCB1c2Ugb3RoZXJzIGluc3RlYWQuICovCiAgICAgICAgVXJpVHlwZVtVcmlUeXBlWyJDdXN0b20iXSA9IDFdID0gIkN1c3RvbSI7CiAgICAgICAgVXJpVHlwZVtVcmlUeXBlWyJBcmlhIl0gPSAyXSA9ICJBcmlhIjsKICAgIH0pKFVyaVR5cGUgPSBleHBvcnRzLlVyaVR5cGUgfHwgKGV4cG9ydHMuVXJpVHlwZSA9IHt9KSk7CiAgICBmdW5jdGlvbiBSZWFkQ29uZmlnKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKEdNX2dldFZhbHVlKFNjcmlwdF8yLlNjcmlwdC5OYW1lLCAiIikpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZXgpIHsKICAgICAgICAgICAgcmV0dXJuIHsgdmVyc2lvbjogMCB9OwogICAgICAgIH0KICAgIH0KICAgIGV4cG9ydHMuQ29uZmlnID0gJC5leHRlbmQoewogICAgICAgIHZlcnNpb246IDEsCiAgICAgICAgYkRpYXBsYXlMb2c6IHRydWUsCiAgICAgICAgYlllbGxvd0Vhc2VJbnRlcm5hdGlvbmFsOiBmYWxzZSwKICAgICAgICBiWWVsbG93RWFzZVVzZU9sZEFwaTogZmFsc2UsCiAgICAgICAgYlllbGxvd0Vhc2VVc2VUaHJpZE9uRmFpbDogZmFsc2UsCiAgICAgICAgYlVzZUN1c3RvbVJ1bGVzOiBmYWxzZSwKICAgICAgICBkQXJpYV9hdXRoOiBBcmlhMi5BVVRILm5vQXV0aCwKICAgICAgICBkQXJpYV9wb3J0OiA2ODAwLAogICAgICAgIGRVcmlUeXBlOiBVcmlUeXBlLk5vcm1hbFVybCwKICAgICAgICBzQXJpYV9kaXI6ICJEOlxcRG93bmxvYWRcXCIsCiAgICAgICAgc0FyaWFfaG9zdDogIjEyNy4wLjAuMSIsCiAgICAgICAgc0FyaWFfcGFzczogIiIsCiAgICAgICAgc0FyaWFfdXNlcjogIiIsCiAgICAgICAgc0N1c3RvbVJ1bGU6ICIiCiAgICB9LCBSZWFkQ29uZmlnKCkpOwogICAgLy8g5Y2H57qnCiAgICBjb25zdCBfX2xhdGVzdF92ZXJzaW9uID0gMTsKICAgIGlmIChleHBvcnRzLkNvbmZpZy52ZXJzaW9uICE9IF9fbGF0ZXN0X3ZlcnNpb24pIHsKICAgICAgICBzd2l0Y2ggKGV4cG9ydHMuQ29uZmlnLnZlcnNpb24pIHsKICAgICAgICAgICAgY2FzZSB1bmRlZmluZWQ6CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIExvZ2dlcl8xLmluZm8oJ+WNh+e6pyB2MCDphY3nva7mlofku7YuLi4nKTsKICAgICAgICAgICAgICAgIGV4cG9ydHMuQ29uZmlnLnZlcnNpb24gPSAxOwogICAgICAgICAgICAgICAgZXhwb3J0cy5Db25maWcuYlllbGxvd0Vhc2VJbnRlcm5hdGlvbmFsID0gZXhwb3J0cy5Db25maWcuYkludGVybmF0aW9uYWw7CiAgICAgICAgICAgICAgICBleHBvcnRzLkNvbmZpZy5iWWVsbG93RWFzZVVzZU9sZEFwaSA9IGV4cG9ydHMuQ29uZmlnLmJQcm94eUluc3RhbGxlZDsKICAgICAgICAgICAgICAgIGV4cG9ydHMuQ29uZmlnLmJZZWxsb3dFYXNlVXNlVGhyaWRPbkZhaWwgPSBleHBvcnRzLkNvbmZpZy5iVXNlVGhyaWRPbkZhaWw7CiAgICAgICAgICAgICAgICBkZWxldGUgZXhwb3J0cy5Db25maWcuYkludGVybmF0aW9uYWw7CiAgICAgICAgICAgICAgICBkZWxldGUgZXhwb3J0cy5Db25maWcuYlVzZVRocmlkT25GYWlsOwogICAgICAgICAgICAgICAgZGVsZXRlIGV4cG9ydHMuQ29uZmlnLmJQcm94eUluc3RhbGxlZDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgR01fc2V0VmFsdWUoU2NyaXB0XzIuU2NyaXB0Lk5hbWUsIEpTT04uc3RyaW5naWZ5KGV4cG9ydHMuQ29uZmlnKSk7CiAgICB9CiAgICBpZiAoZXhwb3J0cy5Db25maWcuYkRpYXBsYXlMb2cpCiAgICAgICAgTG9nZ2VyXzEuRW5hYmxlTG9ncygpOwp9KTsKZGVmaW5lKCJoZWxwZXIvRXh0ZW5zaW9uIiwgWyJyZXF1aXJlIiwgImV4cG9ydHMiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgICBmdW5jdGlvbiBCZWdpbldpdGgoc3RyLCB3aGF0KSB7CiAgICAgICAgcmV0dXJuIHN0ci5pbmRleE9mKHdoYXQpID09PSAwOwogICAgfQogICAgZXhwb3J0cy5CZWdpbldpdGggPSBCZWdpbldpdGg7CiAgICBmdW5jdGlvbiBFbmRXaXRoKHN0ciwgd2hhdCkgewogICAgICAgIHJldHVybiBzdHIuc2xpY2UoLXdoYXQubGVuZ3RoKSA9PSB3aGF0OwogICAgfQogICAgZXhwb3J0cy5FbmRXaXRoID0gRW5kV2l0aDsKICAgIGZ1bmN0aW9uIENvbnRhaW5zKHN0ciwgd2hhdCkgewogICAgICAgIHJldHVybiBzdHIuaW5kZXhPZih3aGF0KSAhPSAtMTsKICAgIH0KICAgIGV4cG9ydHMuQ29udGFpbnMgPSBDb250YWluczsKICAgIGZ1bmN0aW9uIEdldEZpcnN0S2V5KG9iaikgewogICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopWzBdOwogICAgfQogICAgZXhwb3J0cy5HZXRGaXJzdEtleSA9IEdldEZpcnN0S2V5OwogICAgZnVuY3Rpb24gR2V0Rmlyc3RWYWx1ZShvYmopIHsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gb2JqW0dldEZpcnN0S2V5KG9iaildOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZXgpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgfQogICAgZXhwb3J0cy5HZXRGaXJzdFZhbHVlID0gR2V0Rmlyc3RWYWx1ZTsKICAgIC8qKgogICAgICog5LuO6ZO+5o6l6I635Y+W5paH5Lu25ZCO57yA5ZCN44CCCiAgICAgKiDljIXmi6wgYC5gIOWtl+espu+8jOWmgiBgLnRzYAogICAgICovCiAgICBmdW5jdGlvbiBHZXRFeHRlbnNpb25Gcm9tVXJsKHVybCkgewogICAgICAgIHZhciBtID0gdXJsLm1hdGNoKC8uK1wvKD86W14uXSsoXC4uKz8pKSg/Olw/fCQpLyk7CiAgICAgICAgcmV0dXJuIG0gPyBtWzFdIDogbnVsbDsKICAgIH0KICAgIGV4cG9ydHMuR2V0RXh0ZW5zaW9uRnJvbVVybCA9IEdldEV4dGVuc2lvbkZyb21Vcmw7CiAgICAvLyBGaXNoZXItWWF0ZXMgU2h1ZmZsZSBieSBjb21tdW5pdHkgd2lraSg/KQogICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNjI3NDM5OAogICAgZnVuY3Rpb24gU2h1ZmZsZShhcnJheSkgewogICAgICAgIHZhciBjb3VudGVyID0gYXJyYXkubGVuZ3RoOwogICAgICAgIHZhciB0ZW1wLCBpbmRleDsKICAgICAgICAvLyBXaGlsZSB0aGVyZSBhcmUgZWxlbWVudHMgaW4gdGhlIGFycmF5CiAgICAgICAgd2hpbGUgKGNvdW50ZXIgPiAwKSB7CiAgICAgICAgICAgIC8vIFBpY2sgYSByYW5kb20gaW5kZXgKICAgICAgICAgICAgaW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb3VudGVyKTsKICAgICAgICAgICAgLy8gRGVjcmVhc2UgY291bnRlciBieSAxCiAgICAgICAgICAgIGNvdW50ZXItLTsKICAgICAgICAgICAgLy8gQW5kIHN3YXAgdGhlIGxhc3QgZWxlbWVudCB3aXRoIGl0CiAgICAgICAgICAgIHRlbXAgPSBhcnJheVtjb3VudGVyXTsKICAgICAgICAgICAgYXJyYXlbY291bnRlcl0gPSBhcnJheVtpbmRleF07CiAgICAgICAgICAgIGFycmF5W2luZGV4XSA9IHRlbXA7CiAgICAgICAgfQogICAgICAgIHJldHVybiBhcnJheTsKICAgIH0KICAgIGV4cG9ydHMuU2h1ZmZsZSA9IFNodWZmbGU7Cn0pOwovLy8gPHJlZmVyZW5jZSBwYXRoPSIuLi90eXBpbmdzL2dsb2JhbHMvanF1ZXJ5L2luZGV4LmQudHMiIC8+CmRlZmluZSgiaGVscGVyL1F1ZXJ5U3RyaW5nIiwgWyJyZXF1aXJlIiwgImV4cG9ydHMiLCAiaGVscGVyL0V4dGVuc2lvbiJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgRXh0ZW5zaW9uXzEpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgICBmdW5jdGlvbiBHZXRGbGFzaFZhcnMoZWwpIHsKICAgICAgICBpZiAoIWVsKQogICAgICAgICAgICByZXR1cm4ge307CiAgICAgICAgdmFyIGVsZSA9ICgnanF1ZXJ5JyBpbiBlbCA/IGVsWzBdIDogZWwpOwogICAgICAgIGlmIChlbGUuZ2V0QXR0cmlidXRlKCd0eXBlJykgIT0gJ2ZsYXNoJykKICAgICAgICAgICAgcmV0dXJuIHt9OwogICAgICAgIHZhciBmbGFzaFZhcnMgPSB7fTsKICAgICAgICB2YXIgc2l6ZSA9IGVsZS5jaGlsZE5vZGVzLmxlbmd0aDsKICAgICAgICB2YXIgZmxhc2hPYmplY3Q7CiAgICAgICAgZm9yIChsZXQgaSA9IHNpemU7IGktLTspIHsKICAgICAgICAgICAgaWYgKGVsZS5jaGlsZE5vZGVzW2ldLm5hbWUgPT0gJ2ZsYXNodmFycycpIHsKICAgICAgICAgICAgICAgIGZsYXNoT2JqZWN0ID0gZWxlLmNoaWxkTm9kZXNbaV07CiAgICAgICAgICAgICAgICBmbGFzaE9iamVjdC52YWx1ZS5yZXBsYWNlKC8mYW1wOy9nLCAnJicpCiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyhbXHNcU10rPyk9KFtcc1xTXSs/KSgmfCQpL2csIChuLCBrZXksIHZhbHVlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgLy8g5Yip55So5q2j5YiZ55qE5om56YeP5pu/5o2i5Yqf6IO95oqT5Y+W5pWw5o2uCiAgICAgICAgICAgICAgICAgICAgZmxhc2hWYXJzW2tleV0gPSBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIGZsYXNoVmFyczsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4ge307CiAgICB9CiAgICBleHBvcnRzLkdldEZsYXNoVmFycyA9IEdldEZsYXNoVmFyczsKICAgIGZ1bmN0aW9uIFBhcnNlKHF1ZXJ5KSB7CiAgICAgICAgdmFyIHVybFBhcmFtczsKICAgICAgICBpZiAoRXh0ZW5zaW9uXzEuQ29udGFpbnMocXVlcnksICc/JykpIHsKICAgICAgICAgICAgdXJsUGFyYW1zID0gcXVlcnkuc2xpY2UocXVlcnkuaW5kZXhPZignPycpICsgMSkuc3BsaXQoJyYnKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHVybFBhcmFtcyA9IHF1ZXJ5LnNwbGl0KCcmJyk7CiAgICAgICAgfQogICAgICAgIHZhciByZXQgPSB7fTsKICAgICAgICB2YXIgcXVlcnlTdHI7CiAgICAgICAgdmFyIHBvc0VxdWFsOwogICAgICAgIGZvciAodmFyIGkgPSB1cmxQYXJhbXMubGVuZ3RoOyBpLS07KSB7CiAgICAgICAgICAgIHF1ZXJ5U3RyID0gdXJsUGFyYW1zW2ldLnRvU3RyaW5nKCk7CiAgICAgICAgICAgIHBvc0VxdWFsID0gcXVlcnlTdHIuaW5kZXhPZignPScpOwogICAgICAgICAgICBpZiAocG9zRXF1YWwgPT0gLTEpCiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgcmV0W2RlY29kZVVSSUNvbXBvbmVudChxdWVyeVN0ci5zbGljZSgwLCBwb3NFcXVhbCkpXSA9CiAgICAgICAgICAgICAgICBkZWNvZGVVUklDb21wb25lbnQocXVlcnlTdHIuc2xpY2UocG9zRXF1YWwgKyAxKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXQ7CiAgICB9CiAgICBleHBvcnRzLlBhcnNlID0gUGFyc2U7Cn0pOwpkZWZpbmUoImhlbHBlci9TdHlsZVNoZWV0IiwgWyJyZXF1aXJlIiwgImV4cG9ydHMiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgICBjbGFzcyBTdHlsZVNoZWV0IHsKICAgICAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgICAgICAgdGhpcy5zdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICAgICAgICAgIHRoaXMuQXBwbHkoKTsKICAgICAgICB9CiAgICAgICAgQWRkKC4uLnN0eWxlVGV4dCkgewogICAgICAgICAgICB0aGlzLnN0eWxlLnRleHRDb250ZW50ICs9ICdcbicgKyBzdHlsZVRleHQuam9pbignXG4nKTsKICAgICAgICB9CiAgICAgICAgSGlkZShzZWxlY3RvciwgLi4uc2VsZWN0b3JzKSB7CiAgICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2Ygc2VsZWN0b3IpIHsKICAgICAgICAgICAgICAgIHNlbGVjdG9ycy5zcGxpY2UoMCwgMCwgc2VsZWN0b3IpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgc2VsZWN0b3JzID0gc2VsZWN0b3I7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIHN0eWxlVGV4dCA9IGAke3NlbGVjdG9ycy5qb2luKCcsICcpfSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudCB9YDsKICAgICAgICAgICAgdGhpcy5BZGQoc3R5bGVUZXh0KTsKICAgICAgICB9CiAgICAgICAgU2hvdyhzZWxlY3RvciwgLi4uc2VsZWN0b3JzKSB7CiAgICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2Ygc2VsZWN0b3IpIHsKICAgICAgICAgICAgICAgIHNlbGVjdG9ycy5zcGxpY2UoMCwgMCwgc2VsZWN0b3IpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgc2VsZWN0b3JzID0gc2VsZWN0b3I7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIHN0eWxlVGV4dCA9IGAke3NlbGVjdG9ycy5qb2luKCcsICcpfSB7IGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQgfWA7CiAgICAgICAgICAgIHRoaXMuQWRkKHN0eWxlVGV4dCk7CiAgICAgICAgfQogICAgICAgIEhpZGVGcmFtZXMoKSB7CiAgICAgICAgICAgIHRoaXMuSGlkZSgnZnJhbWUsIGlmcmFtZSwgZnJhbWVzZXQnKTsKICAgICAgICB9CiAgICAgICAgQXBwbHkoYm9keSA9IHRydWUpIHsKICAgICAgICAgICAgaWYgKGJvZHkgJiYgZG9jdW1lbnQuYm9keSkgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLnN0eWxlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQodGhpcy5zdHlsZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICBleHBvcnRzLlN0eWxlU2hlZXQgPSBTdHlsZVNoZWV0Owp9KTsKZGVmaW5lKCJoZWxwZXIvRG93bmxvYWRlciIsIFsicmVxdWlyZSIsICJleHBvcnRzIiwgImhlbHBlci9TY3JpcHQiLCAiaGVscGVyL1NjcmlwdENvbmZpZyIsICJoZWxwZXIvRXh0ZW5zaW9uIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBTY3JpcHRfMywgU2NyaXB0Q29uZmlnXzEsIEV4dGVuc2lvbl8yKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgLy8vIDxyZWZlcmVuY2UgcGF0aD0iLi4vdHlwaW5ncy9Vc2Vyc2NyaXB0LmQudHMiIC8+CiAgICAvLy8gPHJlZmVyZW5jZSBwYXRoPSIuLi90eXBpbmdzL0dNX0FyaWEyUlBDLmQudHMiIC8+CiAgICAvLy8gPHJlZmVyZW5jZSBwYXRoPSIuLi90eXBpbmdzL2dsb2JhbHMvanF1ZXJ5L2luZGV4LmQudHMiIC8+CiAgICB2YXIgY29uZmlnID0gU2NyaXB0Q29uZmlnXzEuQ29uZmlnOwogICAgY2xhc3MgRG93bmxvYWRlciB7CiAgICAgICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgICAgIHRoaXMuX2NhcHR1cmVkID0gZmFsc2U7CiAgICAgICAgICAgIC8vIFRPRE86ID8/CiAgICAgICAgfQogICAgICAgIEdlbmVyYXRlVXJsUGFydCh1cmwsIGZpbGVuYW1lLCByZWYpIHsKICAgICAgICAgICAgcmV0dXJuIGAke3VybH18JHt0aGlzLkdldFJlZmVycmVyVXJsKGZpbGVuYW1lKX18JHt0aGlzLkdldFJlZmVycmVyVXJsKHJlZil9YDsKICAgICAgICB9CiAgICAgICAgR2V0UmVmZXJyZXJVcmwodXJsKSB7CiAgICAgICAgICAgIHJldHVybiBTdHJpbmcodXJsIHx8IGxvY2F0aW9uLmhyZWYpLnJlcGxhY2UoLyMuKi8sICcnKTsKICAgICAgICB9CiAgICAgICAgTm9ybWFsaXNlRmlsZW5hbWUoZmlsZW5hbWUpIHsKICAgICAgICAgICAgcmV0dXJuIFN0cmluZyhmaWxlbmFtZSkucmVwbGFjZSgvWyciXC9cXDp8XS9nLCAnXycpOwogICAgICAgIH0KICAgICAgICBHZW5lcmF0ZVVyaSh1cmwsIGZpbGVuYW1lLCByZWYpIHsKICAgICAgICAgICAgc3dpdGNoIChjb25maWcuZFVyaVR5cGUpIHsKICAgICAgICAgICAgICAgIGNhc2UgU2NyaXB0Q29uZmlnXzEuVXJpVHlwZS5DdXN0b206CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBjdXdjbDRjOi8vfDF8JHt0aGlzLkdlbmVyYXRlVXJsUGFydCh1cmwsIGZpbGVuYW1lLCByZWYpfWA7CiAgICAgICAgICAgICAgICBjYXNlIFNjcmlwdENvbmZpZ18xLlVyaVR5cGUuQXJpYToKICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2NhcHR1cmVkKQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkNhcHR1cmVBcmlhKCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBhcmlhMjovL3wke3RoaXMuR2VuZXJhdGVVcmxQYXJ0KHVybCwgZmlsZW5hbWUsIHJlZil9YDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdXJsOwogICAgICAgIH0KICAgICAgICBDYXB0dXJlQXJpYShlbCkgewogICAgICAgICAgICB0aGlzLl9jYXB0dXJlZCA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuU2V0dXBBcmlhKGZhbHNlKTsKICAgICAgICAgICAgaWYgKCFlbCkKICAgICAgICAgICAgICAgIGVsID0gZG9jdW1lbnQuYm9keTsKICAgICAgICAgICAgJChlbCkuY2xpY2soKGUpID0+IHsKICAgICAgICAgICAgICAgIHZhciBlbCA9IGUudGFyZ2V0OwogICAgICAgICAgICAgICAgdmFyICRlbCA9ICQoZWwpOwogICAgICAgICAgICAgICAgdmFyIGxpbmtFbCA9ICgkZWwuaXMoJ2EnKSA/IGVsIDogJGVsLnBhcmVudHMoJ2EnKVswXSk7CiAgICAgICAgICAgICAgICBpZiAobGlua0VsICYmIGxpbmtFbC50YWdOYW1lID09ICdBJyAmJiBFeHRlbnNpb25fMi5CZWdpbldpdGgobGlua0VsLmhyZWYsICdhcmlhMjovL3wnKSkgewogICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIHZhciBsaW5rID0gbGlua0VsLmhyZWYuc3BsaXQoJ3wnKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLkFkZFRvQXJpYShsaW5rWzFdLCBkZWNvZGVVUklDb21wb25lbnQobGlua1syXSksIGxpbmtbM10sIGxpbmtFbC5jbGFzc0xpc3QuY29udGFpbnMoJ2FyaWEtY29va2llJykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgQWRkVG9BcmlhKHVybCwgZmlsZW5hbWUsIHJlZmVyZXIsIGNvb2tpZSwgaGVhZGVycykgewogICAgICAgICAgICB2YXIgYXJpYVBhcmFtID0gewogICAgICAgICAgICAgICAgb3V0OiBmaWxlbmFtZSwKICAgICAgICAgICAgICAgIHJlZmVyZXI6IHJlZmVyZXIgfHwgbG9jYXRpb24uaHJlZiwKICAgICAgICAgICAgICAgIGRpcjogY29uZmlnLnNBcmlhX2RpciwKICAgICAgICAgICAgICAgICd1c2VyLWFnZW50JzogbmF2aWdhdG9yLnVzZXJBZ2VudCwKICAgICAgICAgICAgICAgIGhlYWRlcjogaGVhZGVycyB8fCBbXQogICAgICAgICAgICB9OwogICAgICAgICAgICBpZiAoY29va2llID09PSB0cnVlKQogICAgICAgICAgICAgICAgY29va2llID0gZG9jdW1lbnQuY29va2llOwogICAgICAgICAgICBpZiAoY29va2llKQogICAgICAgICAgICAgICAgYXJpYVBhcmFtLmhlYWRlci5wdXNoKCdDb29raWU6ICcgKyBjb29raWUpOwogICAgICAgICAgICB0aGlzLmFyaWEuYWRkVXJpKFt1cmxdLCBhcmlhUGFyYW0sIChyKSA9PiB7IH0sIChiLCByKSA9PiB7CiAgICAgICAgICAgICAgICB2YXIgc0Vycm9yTXNnOwogICAgICAgICAgICAgICAgaWYgKHIuZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICBzRXJyb3JNc2cgPSBg6ZSZ6K+v5Luj56CBICR7ci5lcnJvci5jb2RlfTogJHtyLmVycm9yLm1lc3NhZ2V9YDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHNFcnJvck1zZyA9ICLkuI4gQXJpYTIg5ZCO5Y+w6YCa5L+h5aSx6LSlLCDmnI3liqHmnKrlvIDlkK8/IjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGFsZXJ0KGBbJHtTY3JpcHRfMy5TY3JpcHQuTmFtZX1dIOaPkOS6pOS7u+WKoeWPkeeUn+mUmeivryEKCiR7c0Vycm9yTXNnfWApOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgU2V0dXBBcmlhKGZvcmNlU2V0dXApIHsKICAgICAgICAgICAgaWYgKGZvcmNlU2V0dXAgfHwgIXRoaXMuYXJpYSkgewogICAgICAgICAgICAgICAgdGhpcy5hcmlhID0gbmV3IEFyaWEyKHsKICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGNvbmZpZy5kQXJpYV9hdXRoLAogICAgICAgICAgICAgICAgICAgICAgICB1c2VyOiBjb25maWcuc0FyaWFfdXNlciwKICAgICAgICAgICAgICAgICAgICAgICAgcGFzczogY29uZmlnLnNBcmlhX3Bhc3MKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGhvc3Q6IGNvbmZpZy5zQXJpYV9ob3N0LAogICAgICAgICAgICAgICAgICAgIHBvcnQ6IGNvbmZpZy5kQXJpYV9wb3J0CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBBZGREb3dubG9hZCh1cmwsIGZpbGUpIHsKICAgICAgICAgICAgaWYgKGNvbmZpZy5kVXJpVHlwZSA9PSBTY3JpcHRDb25maWdfMS5VcmlUeXBlLkFyaWEpIHsKICAgICAgICAgICAgICAgIHRoaXMuQWRkVG9BcmlhKHVybCwgZmlsZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBHTV9vcGVuSW5UYWIodGhpcy5HZW5lcmF0ZVVyaSh1cmwsIGZpbGUpLCB0cnVlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIGV4cG9ydHMuRG93bmxvYWRlciA9IERvd25sb2FkZXI7Cn0pOwpkZWZpbmUoIlNpdGVSdWxlIiwgWyJyZXF1aXJlIiwgImV4cG9ydHMiLCAiaGVscGVyL0NvbnN0YW50cyIsICJoZWxwZXIvRXh0ZW5zaW9uIiwgImhlbHBlci9TdHlsZVNoZWV0IiwgImhlbHBlci9Mb2dnZXIiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIENvbnN0YW50c18xLCBFeHRlbnNpb25fMywgU3R5bGVTaGVldF8xLCBMb2dnZXJfMikgewogICAgInVzZSBzdHJpY3QiOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKICAgIC8vLyA8cmVmZXJlbmNlIHBhdGg9Ii4uL3R5cGluZ3MvZ2xvYmFscy9qcXVlcnkvaW5kZXguZC50cyIgLz4KICAgIGV4cG9ydHMuU2l0ZXMgPSBbXTsKICAgIGZ1bmN0aW9uIEFkZChzaXRlUnVsZSkgewogICAgICAgIHNpdGVSdWxlLl9zdHlsZUFwcGxpZWQgPSBmYWxzZTsKICAgICAgICBleHBvcnRzLlNpdGVzLnB1c2goc2l0ZVJ1bGUpOwogICAgfQogICAgZXhwb3J0cy5BZGQgPSBBZGQ7CiAgICBmdW5jdGlvbiBDaGVja1BhdGgocGF0aCwgcnVsZSkgewogICAgICAgIGlmICgkLmlzQXJyYXkocnVsZSkpIHsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IHJ1bGUubGVuZ3RoOyBpLS07KSB7CiAgICAgICAgICAgICAgICBpZiAoQ2hlY2tQYXRoKHBhdGgsIHJ1bGVbaV0pKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBpZiAoJC5pc0Z1bmN0aW9uKHJ1bGUpKSB7CiAgICAgICAgICAgIHJldHVybiBydWxlKHBhdGgpOwogICAgICAgIH0KICAgICAgICBpZiAodHlwZW9mIHJ1bGUgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIHJldHVybiBFeHRlbnNpb25fMy5CZWdpbldpdGgocGF0aCwgcnVsZSk7CiAgICAgICAgfQogICAgICAgIGlmIChydWxlIGluc3RhbmNlb2YgUmVnRXhwKSB7CiAgICAgICAgICAgIHJldHVybiBydWxlLnRlc3QocGF0aCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGV4cG9ydHMuQ2hlY2tQYXRoID0gQ2hlY2tQYXRoOwogICAgZnVuY3Rpb24gQ2hlY2soc2l0ZSwgZXZlbnQpIHsKICAgICAgICBpZiAoc2l0ZS5zdWJNb2R1bGUpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBpZiAodHlwZW9mIHNpdGUuaG9zdCA9PSAnc3RyaW5nJykgewogICAgICAgICAgICBzaXRlLmhvc3QgPSBbc2l0ZS5ob3N0XTsKICAgICAgICB9CiAgICAgICAgdmFyIGhvc3RzID0gc2l0ZS5ob3N0Lm1hcCgoaG9zdCkgPT4gewogICAgICAgICAgICByZXR1cm4gaG9zdC50b0xvd2VyQ2FzZSgpOwogICAgICAgIH0pOwogICAgICAgIGlmICghRXh0ZW5zaW9uXzMuQ29udGFpbnMoaG9zdHMsIENvbnN0YW50c18xLmxvd2VySG9zdCkpIHsKICAgICAgICAgICAgaWYgKHNpdGUubm9TdWJIb3N0KQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB2YXIgbWF0Y2hlZCA9IGZhbHNlOwogICAgICAgICAgICBmb3IgKHZhciBpID0gaG9zdHMubGVuZ3RoOyBpLS07KSB7CiAgICAgICAgICAgICAgICBpZiAoRXh0ZW5zaW9uXzMuRW5kV2l0aChgLiR7aG9zdHNbaV19YCwgQ29uc3RhbnRzXzEudG9wSG9zdE1hc2spKSB7CiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFtYXRjaGVkKQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBpZiAoc2l0ZS5wYXRoKSB7CiAgICAgICAgICAgIHJldHVybiBDaGVja1BhdGgobG9jYXRpb24ucGF0aG5hbWUsIHNpdGUucGF0aCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgZXhwb3J0cy5DaGVjayA9IENoZWNrOwogICAgZnVuY3Rpb24gR2V0KGlkKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IGV4cG9ydHMuU2l0ZXMubGVuZ3RoOyBpLS07KSB7CiAgICAgICAgICAgIGlmIChleHBvcnRzLlNpdGVzW2ldLmlkID09IGlkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5TaXRlc1tpXTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIGV4cG9ydHMuR2V0ID0gR2V0OwogICAgZnVuY3Rpb24gRXhlY3V0ZShpZCwgZXZlbnQpIHsKICAgICAgICBzd2l0Y2ggKGV2ZW50LnRvTG93ZXJDYXNlKCkpIHsKICAgICAgICAgICAgY2FzZSAnc3RhcnQnOgogICAgICAgICAgICAgICAgR2V0KGlkKS5vblN0YXJ0KCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnYm9keSc6CiAgICAgICAgICAgICAgICBHZXQoaWQpLm9uQm9keSgpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgfQogICAgZXhwb3J0cy5FeGVjdXRlID0gRXhlY3V0ZTsKICAgIGZ1bmN0aW9uIEZpcmVFdmVudChldmVudCkgewogICAgICAgIGZvciAodmFyIGkgPSBleHBvcnRzLlNpdGVzLmxlbmd0aDsgaS0tOykgewogICAgICAgICAgICB2YXIgcnVsZSA9IGV4cG9ydHMuU2l0ZXNbaV07CiAgICAgICAgICAgIGlmIChDb25zdGFudHNfMS5pc0ZyYW1lICYmICFydWxlLnJ1bkluRnJhbWUpCiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgaWYgKENoZWNrKHJ1bGUsIGV2ZW50KSkgewogICAgICAgICAgICAgICAgUnVuKHJ1bGUsIGV2ZW50KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIGV4cG9ydHMuRmlyZUV2ZW50ID0gRmlyZUV2ZW50OwogICAgZnVuY3Rpb24gUnVuKHNpdGUsIGV2ZW50TmFtZSkgewogICAgICAgIHZhciBldmVudDsKICAgICAgICBzd2l0Y2ggKGV2ZW50TmFtZS50b0xvd2VyQ2FzZSgpKSB7CiAgICAgICAgICAgIGNhc2UgJ3N0YXJ0JzoKICAgICAgICAgICAgICAgIGV2ZW50ID0gc2l0ZS5vblN0YXJ0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ2JvZHknOgogICAgICAgICAgICAgICAgZXZlbnQgPSBzaXRlLm9uQm9keTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgTG9nZ2VyXzIuZXJyb3IoYOaXoOaViOeahOS6i+S7tiAke2V2ZW50TmFtZX1gKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKCFzaXRlLl9zdHlsZUFwcGxpZWQpIHsKICAgICAgICAgICAgc2l0ZS5fc3R5bGVBcHBsaWVkID0gdHJ1ZTsKICAgICAgICAgICAgc2l0ZS5zdHlsZSA9IG5ldyBTdHlsZVNoZWV0XzEuU3R5bGVTaGVldCgpOwogICAgICAgICAgICBpZiAoc2l0ZS5oaWRlKSB7CiAgICAgICAgICAgICAgICBzaXRlLnN0eWxlLkhpZGUoc2l0ZS5oaWRlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc2l0ZS5zaG93KSB7CiAgICAgICAgICAgICAgICBzaXRlLnN0eWxlLlNob3coc2l0ZS5zaG93KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc2l0ZS5jc3MpIHsKICAgICAgICAgICAgICAgIHNpdGUuc3R5bGUuQWRkKHNpdGUuY3NzKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc2l0ZS5kbF9pY29uKSB7CiAgICAgICAgICAgICAgICBzaXRlLnN0eWxlLkFkZChgCiAgICAgICAgICAgIApAZm9udC1mYWNlIHsKCWZvbnQtZmFtaWx5OiBjY2M7CglzcmM6IHVybChodHRwczovL2Nkbi5ib290Y3NzLmNvbS9mb250LWF3ZXNvbWUvNC4yLjAvZm9udHMvZm9udGF3ZXNvbWUtd2ViZm9udC53b2ZmKSBmb3JtYXQoJ3dvZmYnKTsKCWZvbnQtd2VpZ2h0OiBub3JtYWw7Cglmb250LXN0eWxlOiBub3JtYWw7Cn0KCiR7Q29uc3RhbnRzXzEuZG93bmxvYWRJY29uU2VsZWN0b3J9OjpiZWZvcmUgewoJZm9udC1mYW1pbHk6IGNjYzsKCWNvbnRlbnQ6ICJcXGYwMTkiOwoJcGFkZGluZy1yaWdodDogLjVlbTsKfQoKLmp4X2hpZGUgewoJZGlzcGxheTogbm9uZTsKfQoKICAgICAgICAgICAgYCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2l0ZS5zdHlsZS5BcHBseSh0cnVlKTsKICAgICAgICBpZiAoIWV2ZW50KQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgTG9nZ2VyXzIuaW5mbyhg5omn6KGM6KeE5YiZOiAke3NpdGUuaWR9IOS6jiAke3NpdGUubmFtZX0gW+S6i+S7tjogJHtldmVudE5hbWV9XWApOwogICAgICAgIGV2ZW50LmNhbGwodGhpcyk7CiAgICB9CiAgICBleHBvcnRzLlJ1biA9IFJ1bjsKfSk7CmRlZmluZSgic2l0ZS9BQS5Db25maWciLCBbInJlcXVpcmUiLCAiZXhwb3J0cyIsICJoZWxwZXIvQ29uc3RhbnRzIiwgImhlbHBlci9TY3JpcHRDb25maWciLCAiaGVscGVyL1NjcmlwdCIsICJoZWxwZXIvRG93bmxvYWRlciJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgQ29uc3RhbnRzXzIsIFNjcmlwdENvbmZpZ18yLCBTY3JpcHRfNCwgRG93bmxvYWRlcl8xKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgdmFyIHJ1bGUgPSB7CiAgICAgICAgYmQ6IG51bGwsCiAgICAgICAgaWQ6ICdpbnRlcm5hbC5jb25maWcnLAogICAgICAgIG5hbWU6ICfohJrmnKzphY3nva7pobXpnaInLAogICAgICAgIHN1Yk1vZHVsZTogZmFsc2UsCiAgICAgICAgaW5jbHVkZVN1Ykhvc3Q6IGZhbHNlLAogICAgICAgIGhvc3Q6IFsnbG9jYWxob3N0LmN1d2NsNGMnLCAnaml4dW5tb2UuZ2l0aHViLmlvJ10sCiAgICAgICAgcGF0aDogWycvY29uZmlnLycsICcvY3V3Y2w0Yy9jb25maWcnXSwKICAgICAgICBvblN0YXJ0OiAoKSA9PiB7CiAgICAgICAgICAgIHVuc2FmZVdpbmRvdy5yU2NyaXB0VmVyc2lvbiA9IENvbnN0YW50c18yLnZlcnNpb247CiAgICAgICAgICAgIHVuc2FmZVdpbmRvdy5yU2NyaXB0Q29uZmlnID0gSlNPTi5zdHJpbmdpZnkoU2NyaXB0Q29uZmlnXzIuQ29uZmlnKTsKICAgICAgICAgICAgdmFyIF9jID0gY29uZmlybTsKICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignU2F2ZUNvbmZpZycsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHZhciBjb25maWcgPSBKU09OLnN0cmluZ2lmeShKU09OLnBhcnNlKGUuZGV0YWlsKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfop6PmnpDorr7lrprlgLzlh7rplJkhJyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKF9jKGDnoa7lrprlgqjlrZjorr7lrproh7MgJHtTY3JpcHRfNC5TY3JpcHQuTmFtZX0/YCkpCiAgICAgICAgICAgICAgICAgICAgR01fc2V0VmFsdWUoU2NyaXB0XzQuU2NyaXB0Lk5hbWUsIGNvbmZpZyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgb25Cb2R5OiAoKSA9PiB7CiAgICAgICAgICAgIHJ1bGUuYmQgPSBuZXcgRG93bmxvYWRlcl8xLkRvd25sb2FkZXIoKTsKICAgICAgICAgICAgcnVsZS5iZC5DYXB0dXJlQXJpYSgpOwogICAgICAgIH0KICAgIH07CiAgICBleHBvcnRzLlJ1bGVzID0gW3J1bGVdOwp9KTsKZGVmaW5lKCJoZWxwZXIvV2FpdCIsIFsicmVxdWlyZSIsICJleHBvcnRzIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgLy8vIDxyZWZlcmVuY2UgcGF0aD0iLi4vdHlwaW5ncy9nbG9iYWxzL2pxdWVyeS9pbmRleC5kLnRzIiAvPgogICAgZnVuY3Rpb24gV2FpdFVudGlsKGNoZWNrLCBjYiwgblRpbWVvdXQgPSAxMDAwMCwgbkludGVydmFsID0gMTUwKSB7CiAgICAgICAgaWYgKCdzdHJpbmcnID09IHR5cGVvZiBjaGVjaykgewogICAgICAgICAgICBjaGVjayA9IGNoZWNrLnNwbGl0KCcuJyk7CiAgICAgICAgfQogICAgICAgIHZhciBpc1JlYWR5OwogICAgICAgIGlmICgkLmlzQXJyYXkoY2hlY2spKSB7CiAgICAgICAgICAgIGlzUmVhZHkgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICB2YXIgciA9IHVuc2FmZVdpbmRvdzsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hlY2subGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICByID0gcltjaGVja1tpXV07CiAgICAgICAgICAgICAgICAgICAgaWYgKCFyKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGlzUmVhZHkgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBjaGVjaygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgIGlmICghaXNSZWFkeSgpKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7CiAgICAgICAgICAgIGNiLmNhbGwodGhpcyk7CiAgICAgICAgfSwgbkludGVydmFsKTsKICAgICAgICBpZiAoblRpbWVvdXQgIT09IHRydWUpIHsKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTsKICAgICAgICAgICAgfSwgblRpbWVvdXQpOwogICAgICAgIH0KICAgIH0KICAgIGV4cG9ydHMuV2FpdFVudGlsID0gV2FpdFVudGlsOwp9KTsKZGVmaW5lKCJoZWxwZXIvUmVkaXJlY3QiLCBbInJlcXVpcmUiLCAiZXhwb3J0cyIsICJoZWxwZXIvV2FpdCIsICJoZWxwZXIvRXh0ZW5zaW9uIiwgImhlbHBlci9Mb2dnZXIiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIFdhaXRfMSwgRXh0ZW5zaW9uXzQsIExvZ2dlcl8zKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgLy8vIDxyZWZlcmVuY2UgcGF0aD0iLi4vdHlwaW5ncy9nbG9iYWxzL2pxdWVyeS9pbmRleC5kLnRzIiAvPgogICAgLyoqCiAgICAgKiDot7PovazlkI7kv53nlZnlvZPliY3pobXpnaLkvZzkuLogcmVmZXJyZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIFJlZGlyZWN0VG8odXJsKSB7CiAgICAgICAgTG9nZ2VyXzMuaW5mbyhg5YeG5aSH6Lez6L2sICR7dXJsfS4uLmApOwogICAgICAgIHZhciBsaW5rID0gJCgnPGE+JykKICAgICAgICAgICAgLmF0dHIoJ2hyZWYnLCB1cmwpCiAgICAgICAgICAgIC50ZXh0KGDmraPlnKjot7PovawgWyR7dXJsfV0sIOivt+eojeWQji4uIGApCiAgICAgICAgICAgIC5wcmVwZW5kVG8oZG9jdW1lbnQuYm9keSkKICAgICAgICAgICAgLmNzcyh7IGZvbnRTaXplOiAxMiwgY29sb3I6ICdpbmhlcml0JyB9KTsKICAgICAgICBsaW5rWzBdLmNsaWNrKCk7CiAgICB9CiAgICBleHBvcnRzLlJlZGlyZWN0VG8gPSBSZWRpcmVjdFRvOwogICAgLyoqCiAgICAgKiBwaHBEaXNrIOmAmueUqOi3s+i9rOaWh+S7tuS4i+i9vemhtemdouWHveaVsAogICAgICoKICAgICAqIOi/lOWbniB0cnVlIOS7o+ihqOaIkOWKnwogICAgICog5ZCm5YiZ5Luj6KGo5om+5LiN5Yiw6KeE5YiZ44CCCiAgICAgKi8KICAgIGZ1bmN0aW9uIHBocGRpc2tBdXRvUmVkaXJlY3QoY2FsbGJhY2spIHsKICAgICAgICBpZiAoIWNhbGxiYWNrKSB7CiAgICAgICAgICAgIGNhbGxiYWNrID0gZG9jdW1lbnQuYm9keSA/IFJlZGlyZWN0VG8gOiAodXJsKSA9PiB7CiAgICAgICAgICAgICAgICBXYWl0XzEuV2FpdFVudGlsKCdkb2N1bWVudC5ib2R5JywgKCkgPT4gewogICAgICAgICAgICAgICAgICAgIFJlZGlyZWN0VG8odXJsKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICB2YXIgckNoZWNrUGF0aCA9IC9cLyhmaWxlKT8oZmlsZXx2aWV3KShbXC8uXC1fXS4qKS87CiAgICAgICAgaWYgKHJDaGVja1BhdGgudGVzdChsb2NhdGlvbi5wYXRobmFtZSkpIHsKICAgICAgICAgICAgY2FsbGJhY2sobG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZShyQ2hlY2tQYXRoLCAnLyQxZG93biQzJykpOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChFeHRlbnNpb25fNC5CZWdpbldpdGgobG9jYXRpb24ucGF0aG5hbWUsICcvdmlld2ZpbGUnKSkgewogICAgICAgICAgICBjYWxsYmFjayhsb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKCcvdmlld2ZpbGUnLCAnL2Rvd25sb2FkJykpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIGV4cG9ydHMucGhwZGlza0F1dG9SZWRpcmVjdCA9IHBocGRpc2tBdXRvUmVkaXJlY3Q7Cn0pOwpkZWZpbmUoInNpdGUvZGwuMTIzNTY0IiwgWyJyZXF1aXJlIiwgImV4cG9ydHMiLCAiaGVscGVyL0V4dGVuc2lvbiIsICJoZWxwZXIvUmVkaXJlY3QiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIEV4dGVuc2lvbl81LCBSZWRpcmVjdF8xKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgLy8vIDxyZWZlcmVuY2UgcGF0aD0iLi4vdHlwaW5ncy9nbG9iYWxzL2pxdWVyeS9pbmRleC5kLnRzIiAvPgogICAgdmFyIHJ1bGUgPSB7CiAgICAgICAgaWQ6ICdkbC4xMjM1NjQnLAogICAgICAgIG5hbWU6ICcxMjM1NjQg572R55uYJywKICAgICAgICBob3N0OiBbJzEyMzU2NC5jb20nLCAnbS4xMjM1NjQuY29tJ10sCiAgICAgICAgaW5jbHVkZVN1Ykhvc3Q6IGZhbHNlLAogICAgICAgIHN1Yk1vZHVsZTogZmFsc2UsCiAgICAgICAgaGlkZTogJyN5em0nLAogICAgICAgIHNob3c6ICcjZG93bmxvYWQnLAogICAgICAgIGNzczogYAouYWQxLCAuYWQ0ewogICAgaGVpZ2h0OiA5OTlweCAhaW1wb3J0YW50OwogICAgd2lkdGg6ICAwcHggICAhaW1wb3J0YW50Owp9CiAgICBgLAogICAgICAgIG9uU3RhcnQ6ICgpID0+IHsKICAgICAgICAgICAgdW5zYWZlV2luZG93LmtpbGxwYW5hZHMgPSAxOwogICAgICAgIH0sCiAgICAgICAgb25Cb2R5OiAoKSA9PiB7CiAgICAgICAgICAgIC8vIOaWh+S7tuesrOS4gOmhtQogICAgICAgICAgICB2YXIgdXJsID0gJCgnLmNhb2N1byAuanViYW8nKS5uZXh0KCkuZmluZCgnYScpLmF0dHIoJ2hyZWYnKTsKICAgICAgICAgICAgaWYgKHVybCkgewogICAgICAgICAgICAgICAgUmVkaXJlY3RfMS5SZWRpcmVjdFRvKHVybCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoRXh0ZW5zaW9uXzUuQ29udGFpbnMobG9jYXRpb24ucGF0aG5hbWUsICcvZG93bnBhbmVsLmFzcCcpKSB7CiAgICAgICAgICAgICAgICAvLyDnrKzkuInpobUgLSDmnIDnu4jkuIvovb3lnLDlnYDlsZXnpLoKICAgICAgICAgICAgICAgIHVybCA9ICQoImRpdiA+IGFbaHJlZio9Jy9kb3duLmFzcCddIikuYXR0cignaHJlZicpOwogICAgICAgICAgICAgICAgUmVkaXJlY3RfMS5SZWRpcmVjdFRvKHVybCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAvLyDnrKzkuozpobU6IOWhq+WGmemqjOivgeeggQogICAgICAgICAgICAgICAgJCgnI2Rvd25sb2FkID4gYScpLmNsaWNrKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgZXhwb3J0cy5SdWxlcyA9IFtydWxlXTsKfSk7CmRlZmluZSgic2l0ZS9kbC41eGZpbGUiLCBbInJlcXVpcmUiLCAiZXhwb3J0cyJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cykgewogICAgInVzZSBzdHJpY3QiOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKICAgIHZhciBydWxlID0gewogICAgICAgIGlkOiAnZGwuNXhmaWxlJywKICAgICAgICBuYW1lOiAn5LqU5pif572R55uYJywKICAgICAgICBob3N0OiBbJzV4ZmlsZS5jb20nLCAnd3d3LjV4ZmlsZS5jb20nXSwKICAgICAgICBpbmNsdWRlU3ViSG9zdDogZmFsc2UsCiAgICAgICAgc3ViTW9kdWxlOiBmYWxzZSwKICAgICAgICBvblN0YXJ0OiAoKSA9PiB7CiAgICAgICAgICAgIC8vIFRPRE86IOWQr+WKqOS6i+S7tgogICAgICAgIH0sCiAgICAgICAgb25Cb2R5OiAoKSA9PiB7CiAgICAgICAgICAgIC8vIFRPRE86IOmhtemdouS6i+S7tgogICAgICAgIH0KICAgIH07CiAgICBleHBvcnRzLlJ1bGVzID0gW3J1bGVdOwp9KTsKZGVmaW5lKCJzaXRlL2RsLmJhaWR1IiwgWyJyZXF1aXJlIiwgImV4cG9ydHMiLCAiaGVscGVyL1dhaXQiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIFdhaXRfMikgewogICAgInVzZSBzdHJpY3QiOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKICAgIHZhciBydWxlID0gewogICAgICAgIGlkOiAnZGwuYmFpZHUnLAogICAgICAgIG5hbWU6ICfnmb7luqbnm5jlhY3kuIvovb3nrqHlrrYnLAogICAgICAgIGhvc3Q6IFsneXVuLmJhaWR1LmNvbScsICdwYW4uYmFpZHUuY29tJ10sCiAgICAgICAgaW5jbHVkZVN1Ykhvc3Q6IGZhbHNlLAogICAgICAgIHN1Yk1vZHVsZTogZmFsc2UsCiAgICAgICAgb25TdGFydDogKCkgPT4gewogICAgICAgIH0sCiAgICAgICAgb25Cb2R5OiAoKSA9PiB7CiAgICAgICAgICAgIFdhaXRfMi5XYWl0VW50aWwoJ3JlcXVpcmUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB1bnNhZmVFeGVjKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcmVxdWlyZSA9IHdpbmRvdy5yZXF1aXJlOwogICAgICAgICAgICAgICAgICAgIHZhciBzZXJ2aWNlID0gcmVxdWlyZSgnZGlzay1zeXN0ZW06d2lkZ2V0L3BsdWdpbi9kb3dubG9hZC91dGlsL2Rvd25sb2FkQ29tbW9uVXRpbC5qcycpOwogICAgICAgICAgICAgICAgICAgIHNlcnZpY2UuaXNQbGF0Zm9ybVdpbmRvd3MgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBmYWxzZTsgfTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9OwogICAgZXhwb3J0cy5SdWxlcyA9IFtydWxlXTsKfSk7CmRlZmluZSgic2l0ZS9kbC5ob3dmaWxlIiwgWyJyZXF1aXJlIiwgImV4cG9ydHMiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgICAvLy8gPHJlZmVyZW5jZSBwYXRoPSIuLi90eXBpbmdzL2dsb2JhbHMvanF1ZXJ5L2luZGV4LmQudHMiIC8+CiAgICB2YXIgcnVsZSA9IHsKICAgICAgICBpZDogJ2RsLmhvd2ZpbGUnLAogICAgICAgIG5hbWU6ICflpb3nm5ggW2hvd2ZpbGUuY29tXScsCiAgICAgICAgaG9zdDogJ2hvd2ZpbGUuY29tJywKICAgICAgICBpbmNsdWRlU3ViSG9zdDogdHJ1ZSwKICAgICAgICBzdWJNb2R1bGU6IGZhbHNlLAogICAgICAgIGNzczogYAojZmxvYXRkaXYgewogICAgdG9wOiAxNTBweDsKICAgIHotaW5kZXg6IDk5OTk5OwogICAgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsKfQogICAgYCwKICAgICAgICBvblN0YXJ0OiAoKSA9PiB7CiAgICAgICAgfSwKICAgICAgICBvbkJvZHk6ICgpID0+IHsKICAgICAgICB9CiAgICB9OwogICAgZXhwb3J0cy5SdWxlcyA9IFtydWxlXTsKfSk7CmRlZmluZSgic2l0ZS9kbC5qa3BhbiIsIFsicmVxdWlyZSIsICJleHBvcnRzIiwgImhlbHBlci9FeHRlbnNpb24iLCAiaGVscGVyL1JlZGlyZWN0Il0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBFeHRlbnNpb25fNiwgUmVkaXJlY3RfMikgewogICAgInVzZSBzdHJpY3QiOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKICAgIC8vLyA8cmVmZXJlbmNlIHBhdGg9Ii4uL3R5cGluZ3MvZ2xvYmFscy9qcXVlcnkvaW5kZXguZC50cyIgLz4KICAgIC8vIOmtlOaUuSBwaHBkaXNrCiAgICB2YXIgamtwYW5SdWxlID0gewogICAgICAgIGlkOiAnZGwucGhwZGlzay5qa3BhbicsCiAgICAgICAgbmFtZTogJ0pLUEFOIOinhOWImSBbcGhwRGlza10nLAogICAgICAgIGhvc3Q6IFsnamtwYW4uY2MnXSwKICAgICAgICBpbmNsdWRlU3ViSG9zdDogdHJ1ZSwKICAgICAgICBzdWJNb2R1bGU6IGZhbHNlLAogICAgICAgIG9uU3RhcnQ6ICgpID0+IHsKICAgICAgICAgICAgdmFyIGN0eCA9IHVuc2FmZVdpbmRvdzsKICAgICAgICAgICAgY3R4LmtpbGxhZHMgPSAxOwogICAgICAgICAgICB2YXIgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogICAgICAgICAgICBzLmlkID0gJ2FkYmxvY2tUZXN0ZXInOwogICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHMpOwogICAgICAgIH0sCiAgICAgICAgb25Cb2R5OiAoKSA9PiB7CiAgICAgICAgICAgIHZhciBjdHggPSB1bnNhZmVXaW5kb3c7CiAgICAgICAgICAgIHZhciBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIHMuaWQgPSAnYjEnOwogICAgICAgICAgICBzLnN0eWxlLmNzc1RleHQgPSAnaGVpZ2h0OjUwMHB4O3Bvc2l0aW9uOmZpeGVkO2xlZnQ6LTUwMHB4JzsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzKTsKICAgICAgICAgICAgaWYgKEV4dGVuc2lvbl82LkJlZ2luV2l0aChsb2NhdGlvbi5wYXRobmFtZSwgJy9kb3duMi0nKSkgewogICAgICAgICAgICAgICAgbGV0IGhhbmRsZXIgPSBjdHguaGFuZGxlclBvcHVwOwogICAgICAgICAgICAgICAgY3R4LmhhbmRsZXJQb3B1cCA9IHVuc2FmZURlZmluZUZ1bmN0aW9uKCdoYW5kbGVyUG9wdXAnLCBmdW5jdGlvbiAoY2FwdGNoYU9iaikgewogICAgICAgICAgICAgICAgICAgIGhhbmRsZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FwdGNoYU9iai5zaG93KCk7CiAgICAgICAgICAgICAgICAgICAgfSwgNzUwKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKEV4dGVuc2lvbl82LkJlZ2luV2l0aChsb2NhdGlvbi5wYXRobmFtZSwgJy9maWxlLScpKSB7CiAgICAgICAgICAgICAgICBSZWRpcmVjdF8yLlJlZGlyZWN0VG8obG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgnZmlsZScsICdkb3duMicpKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CiAgICBleHBvcnRzLlJ1bGVzID0gW2prcGFuUnVsZV07Cn0pOwpkZWZpbmUoInNpdGUvZGwubmFtaXBhbi5jYyIsIFsicmVxdWlyZSIsICJleHBvcnRzIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgdmFyIHJ1bGUgPSB7CiAgICAgICAgaWQ6ICdkbC5uYW1pcGFuJywKICAgICAgICBuYW1lOiAn57qz57Gz55uYLmNjIFvljp8gODfnm5gg5bqU6K+lXScsCiAgICAgICAgaG9zdDogJ25hbWlwYW4uY2MnLAogICAgICAgIHBhdGg6IFsnL2ZpbGUvJywgJy9kb3duLnBocCddLAogICAgICAgIGluY2x1ZGVTdWJIb3N0OiB0cnVlLAogICAgICAgIHN1Yk1vZHVsZTogZmFsc2UsCiAgICAgICAgaGlkZTogJyNib3gnLAogICAgICAgIGNzczogYApib2R5LCBib2R5ID4gLmdnYW8gewogICAgaGVpZ2h0OiBpbml0aWFsOwp9CiAgICBgLAogICAgICAgIG9uU3RhcnQ6ICgpID0+IHsKICAgICAgICB9LAogICAgICAgIG9uQm9keTogKCkgPT4gewogICAgICAgICAgICAvLyDkuIvovb3mjInpkq46ICNkb3duZ28KICAgICAgICAgICAgdmFyIG0gPSBsb2NhdGlvbi5wYXRobmFtZS5tYXRjaCgvXGQrLyk7CiAgICAgICAgICAgIHZhciBkbEJ0biA9ICQoJyNkb3duZ28nKTsKICAgICAgICAgICAgaWYgKGRsQnRuLmxlbmd0aCA+IDAgJiYgbSkgewogICAgICAgICAgICAgICAgdmFyIGZyYW1lID0gJCgnPGlmcmFtZT4nKTsKICAgICAgICAgICAgICAgIHZhciBub3RlID0gJCgnPHA+Jyk7CiAgICAgICAgICAgICAgICBub3RlLnRleHQoJ+azqOaEjzog6ZyA6KaB55m75b2V5omN6IO95LiL6L2944CCJykuY3NzKCdjb2xvcicsICdyZWQnKTsKICAgICAgICAgICAgICAgIGZyYW1lLmF0dHIoewogICAgICAgICAgICAgICAgICAgIHNyYzogYC9kb3duLnBocD9maWxlX2lkPSR7bVswXX1gLAogICAgICAgICAgICAgICAgfSkuY3NzKHsKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAndGFibGUnLAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjogMCwKICAgICAgICAgICAgICAgICAgICBib3JkZXJCb3R0b206ICcxcHggc29saWQgI2NjYycsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJywKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDcwCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGRsQnRuLmJlZm9yZShmcmFtZSk7CiAgICAgICAgICAgICAgICBmcmFtZS5hZnRlcihub3RlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CiAgICBleHBvcnRzLlJ1bGVzID0gW3J1bGVdOwp9KTsKZGVmaW5lKCJzaXRlL2RsLnBocGRpc2siLCBbInJlcXVpcmUiLCAiZXhwb3J0cyIsICJoZWxwZXIvRXh0ZW5zaW9uIiwgImhlbHBlci9XYWl0IiwgImhlbHBlci9SZWRpcmVjdCIsICJoZWxwZXIvU2NyaXB0Il0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBFeHRlbnNpb25fNywgV2FpdF8zLCBSZWRpcmVjdF8zLCBTY3JpcHRfNSkgewogICAgInVzZSBzdHJpY3QiOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKICAgIC8vLyA8cmVmZXJlbmNlIHBhdGg9Ii4uL3R5cGluZ3MvZ2xvYmFscy9qcXVlcnkvaW5kZXguZC50cyIgLz4KICAgIHZhciBwaHBkaXNrQSA9IHsKICAgICAgICBpZDogJ3BocGRpc2suYScsCiAgICAgICAgbmFtZTogJ1BIUERpc2sgQSDnsbvnvZHotZrnvZHnm5gnLAogICAgICAgIGhvc3Q6IFtdLAogICAgICAgIGhpZGU6ICcjY29kZV9ib3gsICNkb3duX2JveDIsICNjb2RlZnJtLCAuYWQsIFtjbGFzc149ImJhbm5lciJdJywKICAgICAgICBzaG93OiAnI2Rvd25fYm94JywKICAgICAgICBpbmNsdWRlU3ViSG9zdDogdHJ1ZSwKICAgICAgICBzdWJNb2R1bGU6IGZhbHNlLAogICAgICAgIG9uU3RhcnQ6ICgpID0+IHsKICAgICAgICAgICAgbGV0IGYgPSAoKSA9PiB7IH07CiAgICAgICAgICAgIHVuc2FmZURlZmluZUZ1bmN0aW9uKCdvcGVuJywgZik7CiAgICAgICAgfSwKICAgICAgICBvbkJvZHk6ICgpID0+IHsKICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgICBXYWl0XzMuV2FpdFVudGlsKCdkb3duX2ZpbGVfbGluaycsICgpID0+IHsKICAgICAgICAgICAgICAgIHZhciBjdHggPSB1bnNhZmVXaW5kb3c7CiAgICAgICAgICAgICAgICAvLyDpgb/lhY3lnLDlnYDooqvopobnm5YKICAgICAgICAgICAgICAgIGN0eC51cGRhdGVfc2VjID0gbnVsbDsKICAgICAgICAgICAgICAgIC8vIOW8uuWItuaYvuekuuWcsOWdgAogICAgICAgICAgICAgICAgY3R4LmRvd25fZmlsZV9saW5rKCk7CiAgICAgICAgICAgICAgICAvLyDlvLrliLbmmL7npLrkuIvovb3lnLDlnYAKICAgICAgICAgICAgICAgIGlmIChjdHguc2hvd19kb3duX3VybCkKICAgICAgICAgICAgICAgICAgICBjdHguc2hvd19kb3duX3VybCgnZG93bl9hMScpOwogICAgICAgICAgICAgICAgdmFyIGp1bXBVcmwgPSAkKCcjZG93bl9saW5rJykuZmluZCgnYScpLmF0dHIoJ2hyZWYnKTsKICAgICAgICAgICAgICAgIC8vIOeEtuWQjui3s+i/h+WOuwogICAgICAgICAgICAgICAgaWYgKGp1bXBVcmwpIHsKICAgICAgICAgICAgICAgICAgICBSZWRpcmVjdF8zLlJlZGlyZWN0VG8oanVtcFVybCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBhbGVydChgWyR7U2NyaXB0XzUuU2NyaXB0Lk5hbWV9XTog5bqU55SoICR7c2VsZi5uYW1lfSDlpLHotKU6XG7mib7kuI3liLDot7PovazlnLDlnYAuYCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH07CiAgICB2YXIgcGhwZGlza1ogPSB7CiAgICAgICAgaWQ6ICdwaHBkaXNrLnonLAogICAgICAgIG5hbWU6ICfpgJrnlKggcGhwRGlzay56IOe9keebmOinhOWImScsCiAgICAgICAgLy8g6KeE5YiZOiDnm7TmjqXot7PovawgL2ZpbGUteHh4IC0+IC9kb3duLXh4eAogICAgICAgIC8vICAgICAgIOW5tumakOiXjyBkb3duX2JveDIsIOaYvuekuiBkb3duX2JveAogICAgICAgIGhvc3Q6IFsKICAgICAgICAgICAgJzEwcGFuLmNjJywgJzY2eXAuY2MnLCAnMTIzd3p3cC5jb20nLCAnaGl5cC5jYycKICAgICAgICBdLAogICAgICAgIGhpZGU6IGAuRG93bnBhZ2Vib3gsIC50YWxrX3Nob3csIC5iYW5uZXJfMiwgLndfMzA1LCAuYWQsCgkJICAgI3Zjb2RlLCAjdHVpLCAuZGNvZGUsICNkb3duX2JveDIsICNkbF90aXBzLCAubmFsLAoJCSAgIC5zY2Jhcl9ob3RfdGQsICNpbmNvZGVgLAogICAgICAgIHNob3c6ICcjZG93bl9ib3gsICNkbF9hZGRyJywKICAgICAgICBpbmNsdWRlU3ViSG9zdDogdHJ1ZSwKICAgICAgICBzdWJNb2R1bGU6IGZhbHNlLAogICAgICAgIG9uU3RhcnQ6ICgpID0+IHsKICAgICAgICAgICAgbGV0IGYgPSAoKSA9PiB7IH07CiAgICAgICAgICAgIHVuc2FmZURlZmluZUZ1bmN0aW9uKCdhbGVydCcsIGYpOwogICAgICAgICAgICB1bnNhZmVEZWZpbmVGdW5jdGlvbignZG93bl9wcm9jZXNzJywgZik7CiAgICAgICAgICAgIFJlZGlyZWN0XzMucGhwZGlza0F1dG9SZWRpcmVjdChudWxsKTsKICAgICAgICB9LAogICAgICAgIG9uQm9keTogKCkgPT4gewogICAgICAgICAgICAvKiBmaXggZm9yIDEyM3d6d3AuY29tICovCiAgICAgICAgICAgIGxldCBmID0gKCkgPT4geyB9OwogICAgICAgICAgICB1bnNhZmVEZWZpbmVGdW5jdGlvbignZG93bl9wcm9jZXNzMicsIGYpOwogICAgICAgICAgICAkKGRvY3VtZW50LmJvZHkpLm9uKCdjbGljaycsICdhJywgZSA9PiB7CiAgICAgICAgICAgICAgICB2YXIgJGRsID0gJChlLmN1cnJlbnRUYXJnZXQpOwogICAgICAgICAgICAgICAgbGV0IHVybCA9ICRkbC5kYXRhKCd1cmwnKTsKICAgICAgICAgICAgICAgIGlmICh1cmwubGVuZ3RoID4gJGRsLmF0dHIoJ2hyZWYnKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAkZGwuYXR0cignaHJlZicsIHVybCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH07CiAgICB2YXIgamtwYW5SdWxlID0gewogICAgICAgIGlkOiAnamtwYW4ucGhwZGlzaycsCiAgICAgICAgbmFtZTogJ0pLUEFOIOinhOWImSBbcGhwRGlza10nLAogICAgICAgIGhvc3Q6IFsnamtwYW4uY2MnXSwKICAgICAgICBpbmNsdWRlU3ViSG9zdDogdHJ1ZSwKICAgICAgICBzdWJNb2R1bGU6IGZhbHNlLAogICAgICAgIG9uU3RhcnQ6ICgpID0+IHsKICAgICAgICAgICAgdmFyIGN0eCA9IHVuc2FmZVdpbmRvdzsKICAgICAgICAgICAgY3R4LmtpbGxhZHMgPSAxOwogICAgICAgICAgICB2YXIgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogICAgICAgICAgICBzLmlkID0gJ2FkYmxvY2tUZXN0ZXInOwogICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHMpOwogICAgICAgIH0sCiAgICAgICAgb25Cb2R5OiAoKSA9PiB7CiAgICAgICAgICAgIHZhciBjdHggPSB1bnNhZmVXaW5kb3c7CiAgICAgICAgICAgIHZhciBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIHMuaWQgPSAnYjEnOwogICAgICAgICAgICBzLnN0eWxlLmNzc1RleHQgPSAnaGVpZ2h0OjUwMHB4O3Bvc2l0aW9uOmZpeGVkO2xlZnQ6LTUwMHB4JzsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzKTsKICAgICAgICAgICAgaWYgKEV4dGVuc2lvbl83LkJlZ2luV2l0aChsb2NhdGlvbi5wYXRobmFtZSwgJy9kb3duMi0nKSkgewogICAgICAgICAgICAgICAgbGV0IGhhbmRsZXIgPSBjdHguaGFuZGxlclBvcHVwOwogICAgICAgICAgICAgICAgY3R4LmhhbmRsZXJQb3B1cCA9IHVuc2FmZURlZmluZUZ1bmN0aW9uKCdoYW5kbGVyUG9wdXAnLCBmdW5jdGlvbiAoY2FwdGNoYU9iaikgewogICAgICAgICAgICAgICAgICAgIGhhbmRsZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FwdGNoYU9iai5zaG93KCk7CiAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKEV4dGVuc2lvbl83LkJlZ2luV2l0aChsb2NhdGlvbi5wYXRobmFtZSwgJy9maWxlLScpKSB7CiAgICAgICAgICAgICAgICBSZWRpcmVjdF8zLlJlZGlyZWN0VG8obG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgnZmlsZScsICdkb3duMicpKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CiAgICBleHBvcnRzLlJ1bGVzID0gW3BocGRpc2tBLCBwaHBkaXNrWiwgamtwYW5SdWxlXTsKfSk7CmRlZmluZSgic2l0ZS9kbC54dWl0ZSIsIFsicmVxdWlyZSIsICJleHBvcnRzIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgLy8vIDxyZWZlcmVuY2UgcGF0aD0iLi4vdHlwaW5ncy9nbG9iYWxzL2pxdWVyeS9pbmRleC5kLnRzIiAvPgogICAgdmFyIHJ1bGUgPSB7CiAgICAgICAgaWQ6ICdkbC5oYW1pLWNsb3VkJywKICAgICAgICBuYW1lOiAnSGFtaSsg5YCL5Lq66ZuyJywKICAgICAgICBob3N0OiBbJ3dlYmhkLnh1aXRlLm5ldCcsICdzeW5jLmhhbWljbG91ZC5uZXQnXSwKICAgICAgICBwYXRoOiAnL19vb3BzLycsCiAgICAgICAgaW5jbHVkZVN1Ykhvc3Q6IGZhbHNlLAogICAgICAgIHN1Yk1vZHVsZTogZmFsc2UsCiAgICAgICAgb25TdGFydDogKCkgPT4gewogICAgICAgIH0sCiAgICAgICAgb25Cb2R5OiAoKSA9PiB7CiAgICAgICAgICAgICQoJyNzaGFyZS1kb3dubG9hZC1mdW5jLXN1Ym1pdCcpLmNsaWNrKCk7CiAgICAgICAgICAgIHVuc2FmZUV4ZWMoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgJChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgJCgnI2dsb2JhbCcpLmRhdGEoJ3RpbWUnLCA5KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9OwogICAgZXhwb3J0cy5SdWxlcyA9IFtydWxlXTsKfSk7CmRlZmluZSgic2l0ZS9kbC55aW11aGUiLCBbInJlcXVpcmUiLCAiZXhwb3J0cyIsICJoZWxwZXIvRXh0ZW5zaW9uIiwgImhlbHBlci9SZWRpcmVjdCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgRXh0ZW5zaW9uXzgsIFJlZGlyZWN0XzQpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgICAvLy8gPHJlZmVyZW5jZSBwYXRoPSIuLi90eXBpbmdzL2dsb2JhbHMvanF1ZXJ5L2luZGV4LmQudHMiIC8+CiAgICB2YXIgcnVsZSA9IHsKICAgICAgICBpZDogJ2RsLnlpbXVoZScsCiAgICAgICAgbmFtZTogJ+S4gOacqOemvicsCiAgICAgICAgaG9zdDogJ3d3dy55aW11aGUuY29tJywKICAgICAgICBoaWRlOiAnI2xvYWRpbmcsIC5nZ2FvLCAua3VhbicsCiAgICAgICAgc2hvdzogJyN5em0nLAogICAgICAgIGluY2x1ZGVTdWJIb3N0OiBmYWxzZSwKICAgICAgICBzdWJNb2R1bGU6IGZhbHNlLAogICAgICAgIHJ1bkluRnJhbWU6IHRydWUsCiAgICAgICAgb25TdGFydDogKCkgPT4gewogICAgICAgICAgICBSZWRpcmVjdF80LnBocGRpc2tBdXRvUmVkaXJlY3QobnVsbCk7CiAgICAgICAgfSwKICAgICAgICBvbkJvZHk6ICgpID0+IHsKICAgICAgICAgICAgaWYgKEV4dGVuc2lvbl84LkJlZ2luV2l0aChsb2NhdGlvbi5wYXRobmFtZSwgJy9uX2RkLnBocCcpKSB7CiAgICAgICAgICAgICAgICBSZWRpcmVjdF80LlJlZGlyZWN0VG8oJCgnI2Rvd25zJykuYXR0cignaHJlZicpKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgZGxDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG93bmxvYWQnKTsKICAgICAgICAgICAgaWYgKCFkbENvbnRhaW5lcikKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgLy8g5b2T5LiL6L295qGG55qEIHN0eWxlIOWxnuaAp+iiq+abtOaUueWQjiwg5qih5ouf5LiL6L295oyJ6ZKu5Y2V5Ye7LgogICAgICAgICAgICB2YXIgbW8gPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAkKCdhJywgZGxDb250YWluZXIpWzFdLmNsaWNrKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBtby5vYnNlcnZlKGRsQ29udGFpbmVyLCB7IGF0dHJpYnV0ZXM6IHRydWUgfSk7CiAgICAgICAgfQogICAgfTsKICAgIGV4cG9ydHMuUnVsZXMgPSBbcnVsZV07Cn0pOwpkZWZpbmUoInNpdGUvZm0uZG91YmFuIiwgWyJyZXF1aXJlIiwgImV4cG9ydHMiLCAiaGVscGVyL0xvZ2dlciIsICJoZWxwZXIvV2FpdCIsICJoZWxwZXIvRG93bmxvYWRlciJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgTG9nZ2VyXzQsIFdhaXRfNCwgRG93bmxvYWRlcl8yKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgdmFyIHJ1bGUgPSB7CiAgICAgICAgaWQ6ICdmbS5kb3ViYW4nLAogICAgICAgIHNzbDogdHJ1ZSwKICAgICAgICBuYW1lOiAn6LGG55Oj55S15Y+w5LiL6L296Kej5p6QJywKICAgICAgICBob3N0OiAnZG91YmFuLmZtJywKICAgICAgICBpbmNsdWRlU3ViSG9zdDogZmFsc2UsCiAgICAgICAgc3ViTW9kdWxlOiBmYWxzZSwKICAgICAgICBjc3M6IGAKYSNqeF9kb3ViYW5fZGwgewoJYmFja2dyb3VuZDogIzlERDZDNTsKCXBhZGRpbmc6IDNweCA1cHg7Cgljb2xvcjogI2ZmZgp9CgphI2p4X2RvdWJhbl9kbDpob3ZlciB7CgltYXJnaW4tbGVmdDogNXB4OwoJcGFkZGluZy1sZWZ0OiAxMHB4OwoJYmFja2dyb3VuZDogI0JBRTJENjsKfQoKZGl2I2p4X2RvdWJhbl9kbF93cmFwIHsKCWZsb2F0OiByaWdodDsKCW1hcmdpbi10b3A6IC0yMzBweDsKCW1hcmdpbi1yaWdodDogLTMycHg7Cglmb250LXdlaWdodDogYm9sZDsKCWZvbnQtZmFtaWx5OiAnTWljcm9zb2Z0IEpIZW5nSGVpIFVJJywgJ+W+rui9r+mbhem7kScsIHNlcmlmLXNhbnM7Cn0KICAgIGAsCiAgICAgICAgYmQ6IG51bGwsCiAgICAgICAgb25TdGFydDogKCkgPT4gewogICAgICAgICAgICBydWxlLmJkID0gbmV3IERvd25sb2FkZXJfMi5Eb3dubG9hZGVyKCk7CiAgICAgICAgICAgIHJ1bGUuYmQuQ2FwdHVyZUFyaWEoKTsKICAgICAgICB9LAogICAgICAgIG9uQm9keTogKCkgPT4gewogICAgICAgICAgICB2YXIgbGlua0Rvd25sb2FkID0gJCgnPGE+Jyk7CiAgICAgICAgICAgIGxpbmtEb3dubG9hZC5jc3MoJ3RyYW5zaXRpb24nLCAnYWxsIC4ycycpCiAgICAgICAgICAgICAgICAuYXR0cigndGFyZ2V0JywgJ19ibGFuaycpCiAgICAgICAgICAgICAgICAuYXR0cignaWQnLCAnanhfZG91YmFuX2RsJykKICAgICAgICAgICAgICAgIC50ZXh0KCfkuIvovb0nKTsKICAgICAgICAgICAgJCgnPGRpdj4nKQogICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ2p4X2RvdWJhbl9kbF93cmFwJykKICAgICAgICAgICAgICAgIC5hcHBlbmQobGlua0Rvd25sb2FkKQogICAgICAgICAgICAgICAgLmluc2VydEFmdGVyKCcucGxheWVyLXdyYXAnKTsKICAgICAgICAgICAgTG9nZ2VyXzQuaW5mbygn562J5b6F6LGG55Oj55S15Y+w5Yqg6L29IC4uJyk7CiAgICAgICAgICAgIFdhaXRfNC5XYWl0VW50aWwoJ2V4dFN0YXR1c0hhbmRsZXInLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBMb2dnZXJfNC5pbmZvKCfnu5HlrprosYbnk6PnlLXlj7Dlh73mlbAgLi4nKTsKICAgICAgICAgICAgICAgIHVuc2FmZU92ZXJ3cml0ZUZ1bmN0aW9uU2FmZVByb3h5KHsKICAgICAgICAgICAgICAgICAgICBleHRTdGF0dXNIYW5kbGVyOiBmdW5jdGlvbiAoanNvblNvbmdPYmopIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV2ZW50ID0gSlNPTi5wYXJzZShqc29uU29uZ09iaik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnc3RhcnQnID09IGV2ZW50LnR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzb25nID0gZXZlbnQuc29uZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlID0gc29uZy50aXRsZSArIHNvbmcudXJsLnNsaWNlKC00KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtEb3dubG9hZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdocmVmJywgcnVsZS5iZC5HZW5lcmF0ZVVyaShzb25nLnVybCwgZmlsZSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RpdGxlJywgYOS4i+i9vTogJHtzb25nLnRpdGxlfWApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9nZ2VyXzQuaW5mbyhgJHtzb25nLnRpdGxlfSA9PiAke3NvbmcudXJsfWApOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvclVuc2FmZVN1Y2Nlc3MoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIExvZ2dlcl80LmluZm8oJ+WHveaVsOe7keWumuWujOavlSwgRW5qb3l+Jyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH07CiAgICBleHBvcnRzLlJ1bGVzID0gW3J1bGVdOwp9KTsKZGVmaW5lKCJzaXRlL2ZtLm1vZSIsIFsicmVxdWlyZSIsICJleHBvcnRzIiwgImhlbHBlci9Eb3dubG9hZGVyIiwgImhlbHBlci9TY3JpcHQiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIERvd25sb2FkZXJfMywgU2NyaXB0XzYpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgICB2YXIgcnVsZSA9IHsKICAgICAgICBpZDogJ2ZtLm1vZScsCiAgICAgICAgc3NsOiBmYWxzZSwKICAgICAgICBuYW1lOiAn6JCM5ZCm55S15Y+wJywKICAgICAgICBob3N0OiAnbW9lLmZtJywKICAgICAgICBpbmNsdWRlU3ViSG9zdDogZmFsc2UsCiAgICAgICAgc3ViTW9kdWxlOiBmYWxzZSwKICAgICAgICBjc3M6IGAKCmEuaml4dW4tZGwgewogICAgd2lkdGg6IDI2cHggIWltcG9ydGFudDsKICAgIGJhY2tncm91bmQtcG9zaXRpb246IC0xOXB4IC05NnB4ICFpbXBvcnRhbnQ7CiAgICB0cmFuc2Zvcm06IHJvdGF0ZSg5MGRlZyk7Cn0KCiAgICBgLAogICAgICAgIGJkOiBudWxsLAogICAgICAgIG9uU3RhcnQ6ICgpID0+IHsKICAgICAgICAgICAgcnVsZS5iZCA9IG5ldyBEb3dubG9hZGVyXzMuRG93bmxvYWRlcigpOwogICAgICAgICAgICBydWxlLmJkLkNhcHR1cmVBcmlhKCk7CiAgICAgICAgfSwKICAgICAgICBvbkJvZHk6ICgpID0+IHsKICAgICAgICAgICAgdW5zYWZlV2luZG93LmlzX2xvZ2luID0gdHJ1ZTsKICAgICAgICAgICAgdmFyIGRsTGluayA9ICQoJzxhPicpOwogICAgICAgICAgICBkbExpbmsKICAgICAgICAgICAgICAgIC5hZGRDbGFzcygncGxheWVyLWJ1dHRvbiBsZWZ0IGppeHVuLWRsJykKICAgICAgICAgICAgICAgIC5pbnNlcnRBZnRlcignZGl2LnBsYXllci1idXR0b24uYnV0dG9uLXZvbHVtZScpOwogICAgICAgICAgICBTY3JpcHRfNi5TY3JpcHQuTGlzdGVuRXZlbnQoKGNsaXApID0+IHsKICAgICAgICAgICAgICAgIGRsTGluawogICAgICAgICAgICAgICAgICAgIC5hdHRyKCdocmVmJywgcnVsZS5iZC5HZW5lcmF0ZVVyaShjbGlwLnVybCwgYCR7Y2xpcC5zdWJfdGl0bGV9Lm1wM2ApKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCd0aXRsZScsIGDkuIvovb06ICR7Y2xpcC5zdWJfdGl0bGV9YCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB1bnNhZmVFeGVjKChzY3JpcHROYW1lKSA9PiB7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBub3RpZnlVcGRhdGUoY2xpcCkgewogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KHNjcmlwdE5hbWUsIHsgZGV0YWlsOiBKU09OLnN0cmluZ2lmeShjbGlwKSB9KSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBkZWZpbmUoJ3BsdWdpbi9qaXh1bicsIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKCdbQ1VXQ0w0Q10g5byA5aeL5rOo5YWlIC4uLicpOwogICAgICAgICAgICAgICAgICAgIHZhciBsaXN0ZW4gPSByZXF1aXJlKCcvcHVibGljL2pzL2ZtL3BhZ2UvbGlzdGVuLmpzJyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXllciA9IHJlcXVpcmUoJ3BsYXllci9wbGF5ZXInKTsKICAgICAgICAgICAgICAgICAgICB2YXIgX2luaXRQbGF5ZXIgPSBwbGF5ZXIuaW5pdFBsYXllcjsKICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuaW5pdFBsYXllciA9IGZ1bmN0aW9uIChjbGlwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmeVVwZGF0ZShjbGlwKTsKICAgICAgICAgICAgICAgICAgICAgICAgX2luaXRQbGF5ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnW0NVV0NMNENdIOazqOWFpee7k+adnyAuLi4nKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgLy8g6KaB5rGC6L295YWl5aSW5oyC5qih57uECiAgICAgICAgICAgICAgICBzZWFqcy51c2UoJ3BsdWdpbi9qaXh1bicpOwogICAgICAgICAgICB9LCBTY3JpcHRfNi5TY3JpcHQuTmFtZSk7CiAgICAgICAgfQogICAgfTsKICAgIGV4cG9ydHMuUnVsZXMgPSBbcnVsZV07Cn0pOwpkZWZpbmUoInNpdGUvbXVzaWMuMTYzIiwgWyJyZXF1aXJlIiwgImV4cG9ydHMiLCAiaGVscGVyL0xvZ2dlciIsICJoZWxwZXIvQ29uc3RhbnRzIiwgImhlbHBlci9XYWl0IiwgImhlbHBlci9Eb3dubG9hZGVyIiwgImhlbHBlci9TY3JpcHQiLCAiaGVscGVyL1NjcmlwdENvbmZpZyIsICJoZWxwZXIvUXVlcnlTdHJpbmciLCAiaGVscGVyL0V4dGVuc2lvbiJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgTG9nZ2VyXzUsIENvbnN0YW50c18zLCBXYWl0XzUsIERvd25sb2FkZXJfNCwgU2NyaXB0XzcsIFNjcmlwdENvbmZpZ18zLCBxcywgRXh0ZW5zaW9uXzkpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgICBjb25zdCBfX01QM19CTEFOSyA9ICdodHRwczovL2ppeHVubW9lLmdpdGh1Yi5pby9jdXdjbDRjL2JsYW5rLm1wMyc7CiAgICB2YXIgcnVsZSA9IHsKICAgICAgICBpZDogJ211c2ljLjE2MycsCiAgICAgICAgc3NsOiB0cnVlLAogICAgICAgIG5hbWU6ICfpu4TmmJPkupHpn7PkuZAnLAogICAgICAgIGhvc3Q6ICdtdXNpYy4xNjMuY29tJywKICAgICAgICBpbmNsdWRlU3ViSG9zdDogZmFsc2UsCiAgICAgICAgc3ViTW9kdWxlOiBmYWxzZSwKICAgICAgICBydW5JbkZyYW1lOiB0cnVlLAogICAgICAgIGRsX2ljb246IHRydWUsCiAgICAgICAgY3NzOiBgCgoubS1wYmFyLCAubS1wYmFyIC5iYXJiZyB7CiAgICB3aWR0aDogY2FsYyggNDU1cHggLSAyLjVlbSApOwp9CgoubS1wbGF5YmFyIC5wbGF5IHsKICAgIHdpZHRoOiBjYWxjKCA1NzBweCAtIDIuNWVtICk7Cn0KCi5tLXBsYXliYXIgLm9wZXIgewogICAgd2lkdGg6IGluaXRpYWw7Cn0KCi5qeF9kbDpob3ZlciB7CiAgICBjb2xvcjogd2hpdGU7Cn0KCi8qIOW6lemDqOWNleabsuS4i+i9vSAqLwoubS1wbGF5YmFyIC5vcGVyIC5qeF9idG4gewogICAgdGV4dC1pbmRlbnQ6IDA7CiAgICBmb250LXNpemU6IDEuNWVtOwogICAgbWFyZ2luOiAxM3B4IDJweCAwIDA7CiAgICBmbG9hdDogbGVmdDsKICAgIGNvbG9yOiAjY2NjOwogICAgdGV4dC1zaGFkb3c6IDFweCAxcHggMnB4IGJsYWNrLCAwIDAgMWVtIGJsYWNrLCAwIDAgMC4yZW0gI2FhYTsKICAgIGxpbmUtaGVpZ2h0OiAxLjZlbTsKICAgIGZvbnQtc2l6ZTogMS4yZW07Cn0KCi5tLXBsYXliYXIgLm9wZXIgLmp4X2RsOjpiZWZvcmUgewogICAgcGFkZGluZy1yaWdodDogLjI1ZW07Cn0KCi5qeF9idG46aG92ZXIgewogICAgY29sb3I6IHdoaXRlOwp9CgovKiDmkq3mlL7liJfooajkuIvovb0gKi8KLm0tcGxheWJhciAubGlzdGhkYyAuanhfZGwuYWRkYWxsIHsKICAgIGxlZnQ6IDMwNnB4OwogICAgbGluZS1oZWlnaHQ6IDFlbTsKICAgIC8qIOWkmuS4gOS4qiBweCwg5a+56b2Q5paH5a2XICovCiAgICB0b3A6IDEzcHg7Cn0KCi5tLXBsYXliYXIgLmxpc3RoZGMgLmxpbmUuanhfZGxfbGluZSB7CiAgICBsZWZ0OiAzODVweDsKfQoKICAgIGAsCiAgICAgICAgaW5zdGFuY2U6IG51bGwsCiAgICAgICAgb25TdGFydDogKCkgPT4gewogICAgICAgICAgICBydWxlLmluc3RhbmNlID0gbmV3IFllbGxvd0Vhc2UoKTsKICAgICAgICB9LAogICAgICAgIG9uQm9keTogKCkgPT4gewogICAgICAgICAgICBydWxlLmluc3RhbmNlLkJvZHlFdmVudCgpOwogICAgICAgIH0KICAgIH07CiAgICBleHBvcnRzLlJ1bGVzID0gW3J1bGVdOwogICAgY2xhc3MgWWVsbG93RWFzZSB7CiAgICAgICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgICAgIHRoaXMuX3JlbG9hZENhY2hlID0gdHJ1ZTsKICAgICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5fX0hJREVfQkFOTkVSKSB7CiAgICAgICAgICAgICAgICBydWxlLnN0eWxlLkhpZGUoJyNpbmRleC1iYW5uZXInKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoU2NyaXB0Q29uZmlnXzMuQ29uZmlnLmJZZWxsb3dFYXNlSW50ZXJuYXRpb25hbCkKICAgICAgICAgICAgICAgIEdlbmVyYXRlQ2RuTGlzdCh0aGlzKTsKICAgICAgICAgICAgdGhpcy5fZG93bmxvYWRlciA9IG5ldyBEb3dubG9hZGVyXzQuRG93bmxvYWRlcigpOwogICAgICAgICAgICB1bnNhZmVFeGVjKCgpID0+IHsKICAgICAgICAgICAgICAgIHZhciBmYWtlUGxhdEZvcm0gPSBuYXZpZ2F0b3IucGxhdGZvcm0gKyAiLS1GYWtlLW1hYyI7CiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmF2aWdhdG9yLCAicGxhdGZvcm0iLCB7CiAgICAgICAgICAgICAgICAgICAgZ2V0OiAoKSA9PiB7IHJldHVybiBmYWtlUGxhdEZvcm07IH0sCiAgICAgICAgICAgICAgICAgICAgc2V0OiAoKSA9PiB7IH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgQm9keUV2ZW50KCkgewogICAgICAgICAgICBXYWl0XzUuV2FpdFVudGlsKCdubS54JywgKCkgPT4gewogICAgICAgICAgICAgICAgLy8g5Lik5Liq54mI5p2D5o+Q56S6LCDkuIDkuKrmnYPpmZDmj5DnpLouCiAgICAgICAgICAgICAgICB2YXIgZm5CeXBhc3NDcjEgPSB0aGlzLlNlYXJjaCh1bnNhZmVXaW5kb3cubmVqLmUsICduZWouZScsICcuZGF0YXNldDtpZicpOwogICAgICAgICAgICAgICAgdmFyIGZuQnlwYXNzQ3IyID0gdGhpcy5TZWFyY2godW5zYWZlV2luZG93Lm5tLngsICdubS54JywgJy5jb3B5cmlnaHRJZD09Jyk7CiAgICAgICAgICAgICAgICB2YXIgZm5CeXBhc3NDcjMgPSB0aGlzLlNlYXJjaCh1bnNhZmVXaW5kb3cubm0ueCwgJ25tLngnLCAnLnByaXZpbGVnZTtpZicpOwogICAgICAgICAgICAgICAgdW5zYWZlRXhlYygoZm5CeXBhc3NDcjEsIGZuQnlwYXNzQ3IyLCBmbkJ5cGFzc0NyMykgPT4gewogICAgICAgICAgICAgICAgICAgIHZhciBfZm5CeXBhc3NDcjEgPSB3aW5kb3cubmVqLmVbZm5CeXBhc3NDcjFdOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5uZWouZVtmbkJ5cGFzc0NyMV0gPSBmdW5jdGlvbiAoeiwgbmFtZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZSA9PSAnY29weXJpZ2h0JyB8fCBuYW1lID09ICdyZXNDb3B5cmlnaHQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2ZuQnlwYXNzQ3IxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cubm0ueFtmbkJ5cGFzc0NyMl0gPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5ubS54W2ZuQnlwYXNzQ3IzXSA9IChzb25nKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNvbmcuc3RhdHVzID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNvbmcucHJpdmlsZWdlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb25nLnByaXZpbGVnZS5wbCA9IDMyMDAwMDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSwgZm5CeXBhc3NDcjEsIGZuQnlwYXNzQ3IyLCBmbkJ5cGFzc0NyMyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAoQ29uc3RhbnRzXzMuaXNGcmFtZSkgewogICAgICAgICAgICAgICAgdGhpcy5GcmFtZVBhZ2UoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuUGxheWVyUGFnZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIFNlYXJjaChiYXNlLCBkaXNwbGF5QmFzZSwga2V5d29yZCwgc3VwcHJlc3NMb2cgPSBmYWxzZSkgewogICAgICAgICAgICBmb3IgKGxldCBpdGVtTmFtZSBpbiBiYXNlKSB7CiAgICAgICAgICAgICAgICBpZiAoYmFzZS5oYXNPd25Qcm9wZXJ0eShpdGVtTmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgZm4gPSBiYXNlW2l0ZW1OYW1lXTsKICAgICAgICAgICAgICAgICAgICBpZiAoZm4gJiYgdHlwZW9mIGZuID09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZuU3RyID0gU3RyaW5nKGZuKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFRlc3RTdHJpbmcoZm5TdHIsIGtleXdvcmQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN1cHByZXNzTG9nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2dlcl81LmluZm8oYOWumuS9jeafpeaJviAlYyR7a2V5d29yZH0lYyDmiJDlip86ICVjJHtkaXNwbGF5QmFzZX0uJHtpdGVtTmFtZX1gLCAnY29sb3I6IGRhcmt2aW9sZXQnLCAncmVzZXQnLCAnY29sb3I6IGdyZWVuJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbU5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFzdXBwcmVzc0xvZykKICAgICAgICAgICAgICAgIExvZ2dlcl81LmVycm9yKGDlrprkvY3mn6Xmib7lrZDlh73mlbAgJHtrZXl3b3JkfSDkuo4gJHtkaXNwbGF5QmFzZX0g5aSx6LSlLCDor7fogZTns7vkvZzogIXkv67lpI0hYCk7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgICBTZWFyY2hTdWJQcm90b3R5cGUoYmFzZSwgZGlzcGxheUJhc2UsIGtleXdvcmQsIHN1cHByZXNzTG9nID0gZmFsc2UpIHsKICAgICAgICAgICAgZm9yIChsZXQgaXRlbU5hbWUgaW4gYmFzZSkgewogICAgICAgICAgICAgICAgaWYgKGJhc2UuaGFzT3duUHJvcGVydHkoaXRlbU5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0Jhc2UgPSBiYXNlW2l0ZW1OYW1lXTsKICAgICAgICAgICAgICAgICAgICAvLyDmo4Dmn6XnjrDlnKjnmoTov5nkuKrmmK/kuI3mmK/lrZDnsbsKICAgICAgICAgICAgICAgICAgICBpZiAobmV3QmFzZSAmJiBuZXdCYXNlLnByb3RvdHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBpbmZvKGDmn6Xmib4gJWMke2Rpc3BsYXlCYXNlfS4ke2l0ZW1OYW1lfS5wcm90b3R5cGUlYyAuLi5gLCAnY29sb3I6bGlnaHRncmF5JywgJ3Jlc2V0Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByID0gdGhpcy5TZWFyY2gobmV3QmFzZS5wcm90b3R5cGUsIGRpc3BsYXlCYXNlLCBrZXl3b3JkLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdXBwcmVzc0xvZykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2dnZXJfNS5pbmZvKGDlrprkvY3mn6Xmib4gJWMke2tleXdvcmR9JWMg5oiQ5YqfOiAlYyR7ZGlzcGxheUJhc2V9LiR7aXRlbU5hbWV9Ojoke3J9YCwgJ2NvbG9yOiBkYXJrdmlvbGV0JywgJ3Jlc2V0JywgJ2NvbG9yOiBncmVlbicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtpdGVtTmFtZSwgJ3Byb3RvdHlwZScsIHJdOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghc3VwcHJlc3NMb2cpCiAgICAgICAgICAgICAgICBMb2dnZXJfNS5lcnJvcihg5a6a5L2N5p+l5om+5a2Q57G75Ye95pWwICR7a2V5d29yZH0g5LqOICR7ZGlzcGxheUJhc2V9IOWksei0pSwg6K+36IGU57O75L2c6ICF5L+u5aSNIWApOwogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgICAgUGxheWVyUGFnZSgpIHsKICAgICAgICAgICAgdGhpcy5fYnRuRG93bmxvYWQgPSAkKCc8YT4nKTsKICAgICAgICAgICAgdGhpcy5fYnRuRG93bmxvYWQKICAgICAgICAgICAgICAgIC5hdHRyKCd0aXRsZScsICfmkq3mlL7pn7PkuZDvvIzljbPliLvop6PmnpDjgIInKQogICAgICAgICAgICAgICAgLmNsaWNrKChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKQogICAgICAgICAgICAgICAgLmFkZENsYXNzKENvbnN0YW50c18zLmRvd25sb2FkSWNvbkNsYXNzKQogICAgICAgICAgICAgICAgLmFkZENsYXNzKCdqeF9idG4nKQogICAgICAgICAgICAgICAgLmFwcGVuZFRvKCcubS1wbGF5YmFyIC5vcGVyJyk7CiAgICAgICAgICAgIC8vIFRPRE86IOWKoOWFpeatjOWNleS4i+i9veaMiemSrgogICAgICAgICAgICB0aGlzLl9idG5Eb3dubG9hZEFsbCA9ICQoJzxhPicpOwogICAgICAgICAgICB0aGlzLl9idG5Eb3dubG9hZEFsbAogICAgICAgICAgICAgICAgLmFkZENsYXNzKCdhZGRhbGwnKQogICAgICAgICAgICAgICAgLnRleHQoJ+WFqOmDqOS4i+i9vScpCiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoQ29uc3RhbnRzXzMuZG93bmxvYWRJY29uQ2xhc3MpCiAgICAgICAgICAgICAgICAuY2xpY2soKCkgPT4gdGhpcy5Eb3dubG9hZEFsbCgpKTsKICAgICAgICAgICAgaWYgKFNjcmlwdENvbmZpZ18zLkNvbmZpZy5kVXJpVHlwZSA9PSBTY3JpcHRDb25maWdfMy5VcmlUeXBlLkFyaWEpIHsKICAgICAgICAgICAgICAgIHRoaXMuX2Rvd25sb2FkZXIuQ2FwdHVyZUFyaWEodGhpcy5fYnRuRG93bmxvYWQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgLy8gVE9ETzog6ZqQ6JeP5q2M5Y2V5LiL6L295oyJ6ZKuCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGxvY2F0aW9uLnBhdGhuYW1lID09ICcvZGVtby9mbScpIHsKICAgICAgICAgICAgICAgIHRoaXMuSG9va1JhZGlvUGxheWVyKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLkhvb2tOb3JtYWxQbGF5ZXIoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBEb3dubG9hZEFsbCgpIHsKICAgICAgICAgICAgLy8gVE9ETzog5LiL6L295omA5pyJ5puy55uuCiAgICAgICAgfQogICAgICAgIEhvb2tOb3JtYWxQbGF5ZXIoKSB7CiAgICAgICAgICAgIFdhaXRfNS5XYWl0VW50aWwoKCkgPT4gewogICAgICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5saXN0aGRjID4gLmFkZGFsbCcpICE9IG51bGw7CiAgICAgICAgICAgIH0sICgpID0+IHsKICAgICAgICAgICAgICAgIHZhciBkbExpbmUgPSAkKCc8YT4nKTsKICAgICAgICAgICAgICAgIGRsTGluZQogICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnbGluZSBqeF9kbF9saW5lJykKICAgICAgICAgICAgICAgICAgICAuaGlkZSgpOwogICAgICAgICAgICAgICAgdGhpcy5fYnRuRG93bmxvYWRBbGwKICAgICAgICAgICAgICAgICAgICAuaW5zZXJ0QmVmb3JlKCcubS1wbGF5YmFyIC5saXN0aGRjIC5hZGRhbGwnKQogICAgICAgICAgICAgICAgICAgIC5hZnRlcihkbExpbmUpCiAgICAgICAgICAgICAgICAgICAgLmhpZGUoKTsKICAgICAgICAgICAgfSwgdHJ1ZSwgNTAwKTsKICAgICAgICAgICAgZnVuY3Rpb24gbmV4dFNvbmcoKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubnh0JykuY2xpY2soKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBXYWl0XzUuV2FpdFVudGlsKCduZWouaicsICgpID0+IHsKICAgICAgICAgICAgICAgIHZhciBmbkFqYXggPSB0aGlzLlNlYXJjaCh1bnNhZmVXaW5kb3cubmVqLmosICJuZWouaiIsICcucmVwbGFjZSgiYXBpIiwid2VhcGknKTsKICAgICAgICAgICAgICAgIHZhciBmbkdldFNvbmdSYXcgPSB0aGlzLlNlYXJjaFN1YlByb3RvdHlwZSh1bnNhZmVXaW5kb3cubm0udywgJ25tLncnLCAvcmV0dXJuIHRoaXNcLlx3K1xbdGhpc1wuXHcrXF0vKTsKICAgICAgICAgICAgICAgIHZhciBjbHNQbGF5ZXIgPSBmbkdldFNvbmdSYXdbMF07CiAgICAgICAgICAgICAgICB2YXIgZm5HZXRTb25nID0gZm5HZXRTb25nUmF3WzJdOwogICAgICAgICAgICAgICAgaWYgKFNjcmlwdENvbmZpZ18zLkNvbmZpZy5iWWVsbG93RWFzZUludGVybmF0aW9uYWwpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9idG5DaGFuZ2VDZG4gPSAkKCc8YT4nKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9idG5DaGFuZ2VDZG4KICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCdqeF9idG4ganhfY2RuJykKICAgICAgICAgICAgICAgICAgICAgICAgLmNsaWNrKCgpID0+IHRoaXMuTmV4dENkbigpKQogICAgICAgICAgICAgICAgICAgICAgICAuaW5zZXJ0QWZ0ZXIodGhpcy5fYnRuRG93bmxvYWQpCiAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0KCfmjaInKTsKICAgICAgICAgICAgICAgICAgICB2YXIgY2RuID0gR01fZ2V0VmFsdWUoJ193c19jZG5fbWVkaWEnLCBudWxsKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIWNkbikgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLk5leHRDZG4oKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NkbiA9IGNkbjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLy8vLy8g5a6J6KOF5L+u5pS55ZCO55qEIOWPluW+l+absuebruS/oeaBryDlh73mlbDlvIDlp4sKICAgICAgICAgICAgICAgIHZhciBjYWxsRXZlbnRGbiA9IEdlbmVyYXRlVmFsaWROYW1lKCk7CiAgICAgICAgICAgICAgICBleHBvcnRGdW5jdGlvbigoc29uZykgPT4gewogICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShzb25nKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9zb25nID0gewogICAgICAgICAgICAgICAgICAgICAgICBhcnRpc3RzOiBkYXRhLmFydGlzdHMubWFwKChhcnRpc3QpID0+IGFydGlzdC5uYW1lKS5qb2luKCfjgIEnKSwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZGF0YS5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICB1cmw6IG51bGwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIExvZ2dlcl81LmluZm8oYOaNleaNieWIsOmfs+S5kOWIh+aNojogJHt0aGlzLl9zb25nLm5hbWV9YCk7CiAgICAgICAgICAgICAgICB9LCB1bnNhZmVXaW5kb3csIHsKICAgICAgICAgICAgICAgICAgICBkZWZpbmVBczogY2FsbEV2ZW50Rm4KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdW5zYWZlRXhlYygoY2FsbEV2ZW50Rm4sIGNsc1BsYXllciwgZm5HZXRTb25nKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF9nZXRTb25nQmFja3VwID0gd2luZG93Lm5tLndbY2xzUGxheWVyXS5wcm90b3R5cGVbZm5HZXRTb25nXTsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cubm0ud1tjbHNQbGF5ZXJdLnByb3RvdHlwZVtmbkdldFNvbmddID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IF9nZXRTb25nQmFja3VwLmNhbGwodGhpcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvd1tjYWxsRXZlbnRGbl0oSlNPTi5zdHJpbmdpZnkocikpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9LCBjYWxsRXZlbnRGbiwgY2xzUGxheWVyLCBmbkdldFNvbmcpOwogICAgICAgICAgICAgICAgLy8vLy8vIOWuieijheS/ruaUueWQjueahCDlj5blvpfmm7Lnm67kv6Hmga8g5Ye95pWw57uT5p2fCiAgICAgICAgICAgICAgICAvLy8vLy8g5a6J6KOF5L+u5pS55ZCO55qEIEFqYXgg5Ye95pWw5byA5aeLCiAgICAgICAgICAgICAgICB2YXIgYWpheFBhdGNoRm4gPSBHZW5lcmF0ZVZhbGlkTmFtZSgpOwogICAgICAgICAgICAgICAgdGhpcy5fYWpheEJhY2t1cCA9IHVuc2FmZVdpbmRvdy5uZWoualtmbkFqYXhdOwogICAgICAgICAgICAgICAgaWYgKFNjcmlwdENvbmZpZ18zLkNvbmZpZy5iWWVsbG93RWFzZVVzZU9sZEFwaSB8fCBTY3JpcHRDb25maWdfMy5Db25maWcuYlllbGxvd0Vhc2VJbnRlcm5hdGlvbmFsKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IGhvb2tlZEFqYXggPSAoU2NyaXB0Q29uZmlnXzMuQ29uZmlnLmJZZWxsb3dFYXNlVXNlT2xkQXBpID8gdGhpcy5BamF4UGF0Y2hlZE9sZEFwaSA6IHRoaXMuQWpheFBhdGNoZWRJbnRlcm5hdGlvbmFsKTsKICAgICAgICAgICAgICAgICAgICBleHBvcnRGdW5jdGlvbihob29rZWRBamF4LmJpbmQodGhpcyksIHVuc2FmZVdpbmRvdywgewogICAgICAgICAgICAgICAgICAgICAgICBkZWZpbmVBczogYWpheFBhdGNoRm4KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB1bnNhZmVFeGVjKChhamF4UGF0Y2hGbiwgZm5BamF4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhamF4UGF0Y2hlZCA9IHdpbmRvd1thamF4UGF0Y2hGbl07CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhamF4T3JpZ2luYWwgPSB3aW5kb3cubmVqLmpbZm5BamF4XTsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm5lai5qW2ZuQWpheF0gPSBDdXN0b21BamF4OwogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBDdXN0b21BamF4KHVybCwgcGFyYW1zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmluZm8oYHVybDogJHt1cmx9YCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoJ2xvZy8nKSAhPSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMub25sb2FkKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IDIwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcGFyYW1zLmhlYWRlcnMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLmhlYWRlcnMgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfb25sb2FkID0gcGFyYW1zLm9ubG9hZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBhcmFtcy5fb25sb2FkID0gcGFyYW1zLm9ubG9hZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcy5vbmxvYWQgPSAoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcy5vbmxvYWQgPSBfb25sb2FkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJhbXMuX29ubG9hZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMuX29ubG9hZChkYXRhLCBfb25sb2FkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcy5vbmxvYWQoZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFqYXhQYXRjaGVkKHVybCwgcGFyYW1zKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIGFqYXhQYXRjaEZuLCBmbkFqYXgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8vLy8vIOWuieijheS/ruaUueWQjueahCBBamF4IOWHveaVsOe7k+adnwogICAgICAgICAgICAgICAgLy8vIOaMgumSqeS4i+S4gOmmluWIh+aNouS6i+S7tiwg5by65Yi26YeN5paw6K+75Y+W5b2T5YmN5puy55uu5Zyw5Z2A44CCCiAgICAgICAgICAgICAgICB2YXIgZm5OZXh0U29uZyA9IHRoaXMuU2VhcmNoKHVuc2FmZVdpbmRvdy5ubS53W2Nsc1BsYXllcl0ucHJvdG90eXBlLCBgbm0udy4ke2Nsc1BsYXllcn0ucHJvdG90eXBlYCwgJygrMSksInVpIiknKTsKICAgICAgICAgICAgICAgIHVuc2FmZUV4ZWMoKGNsc1BsYXllciwgZm5OZXh0U29uZykgPT4gewogICAgICAgICAgICAgICAgICAgIHZhciBvbGROZXh0U29uZyA9IHdpbmRvdy5ubS53W2Nsc1BsYXllcl0ucHJvdG90eXBlW2ZuTmV4dFNvbmddOwogICAgICAgICAgICAgICAgICAgIHZhciByZWxvYWRTb25nID0gZXZhbCgnKCcgKyBvbGROZXh0U29uZy50b1N0cmluZygpLnJlcGxhY2UoJzEnLCAnMCcpICsgJyknKTsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cubm0ud1tjbHNQbGF5ZXJdLnByb3RvdHlwZVtmbk5leHRTb25nXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm5tLndbY2xzUGxheWVyXS5wcm90b3R5cGVbZm5OZXh0U29uZ10gPSBvbGROZXh0U29uZzsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlbG9hZFNvbmcuY2FsbCh0aGlzKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ueHQnKS5jbGljaygpOwogICAgICAgICAgICAgICAgfSwgY2xzUGxheWVyLCBmbk5leHRTb25nKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIEFqYXhQYXRjaGVkT2xkQXBpKHVybCwgcGFyYW1zKSB7CiAgICAgICAgICAgIGlmICh1cmwgIT0gJy9hcGkvc29uZy9lbmhhbmNlL3BsYXllci91cmwnKSB7CiAgICAgICAgICAgICAgICB0aGlzLl9hamF4QmFja3VwKHVybCwgcGFyYW1zKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB1cmwgPSAnL2FwaS92My9zb25nL2RldGFpbCc7CiAgICAgICAgICAgIGxldCBxdWVyeSA9IHBhcmFtcy5xdWVyeTsKICAgICAgICAgICAgaWYgKHF1ZXJ5LmJyKQogICAgICAgICAgICAgICAgZGVsZXRlIHF1ZXJ5LmJyOwogICAgICAgICAgICB2YXIgX2lkcyA9IEpTT04ucGFyc2UocXVlcnkuaWRzKTsKICAgICAgICAgICAgdmFyIHJlcXVlc3RJZHMgPSBbXTsKICAgICAgICAgICAgdGhpcy5Mb2FkQ2FjaGUoKTsKICAgICAgICAgICAgdmFyIHNvbmdzID0gX2lkcy5tYXAoKGlkKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoaWQgaW4gdGhpcy5fc29uZ0NhY2hlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NvbmdDYWNoZVtpZF07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXF1ZXN0SWRzLnB1c2goaWQpOwogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0pLmZpbHRlcigoc29uZykgPT4gewogICAgICAgICAgICAgICAgcmV0dXJuIHNvbmc7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAocmVxdWVzdElkcy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgIExvZ2dlcl81LmluZm8oYOS7jue8k+WtmOivu+WPluabsuebruS/oeaBr+OAgmApOwogICAgICAgICAgICAgICAgbGV0IHJlcGx5ID0gU29uZ3NUb1VybFJlcGx5KHNvbmdzKTsKICAgICAgICAgICAgICAgIHRoaXMuTm90aWZ5VXJsQ2hhbmdlKHJlcGx5LmRhdGFbMF0udXJsKTsKICAgICAgICAgICAgICAgIHBhcmFtcy5vbmxvYWQocmVwbHkpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIExvZ2dlcl81LmluZm8oJ+ivt+axguacjeWKoeWZqOiOt+WPluS/oeaBrzogJW8nLCByZXF1ZXN0SWRzKTsKICAgICAgICAgICAgcGFyYW1zLnF1ZXJ5ID0gewogICAgICAgICAgICAgICAgaWRzOiByZXF1ZXN0SWRzCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHBhcmFtcy5fb25sb2FkID0gZXhwb3J0RnVuY3Rpb24oKGRhdGEsIF9vbmxvYWQpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuTG9hZENhY2hlKGZhbHNlKTsKICAgICAgICAgICAgICAgIGRhdGEuc29uZ3MuZm9yRWFjaCgoc29uZykgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuX3NvbmdDYWNoZVtzb25nLmlkXSA9IHNvbmc7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMuU2F2ZUNhY2hlKCk7CiAgICAgICAgICAgICAgICBsZXQgcmVwbHkgPSBTb25nc1RvVXJsUmVwbHkoX2lkcy5tYXAoKGlkKSA9PiB0aGlzLl9zb25nQ2FjaGVbaWRdKSk7CiAgICAgICAgICAgICAgICB0aGlzLk5vdGlmeVVybENoYW5nZShyZXBseS5kYXRhWzBdLnVybCk7CiAgICAgICAgICAgICAgICBfb25sb2FkKHJlcGx5KTsKICAgICAgICAgICAgfSwgdW5zYWZlV2luZG93KTsKICAgICAgICAgICAgdGhpcy5fYWpheEJhY2t1cCh1cmwsIHBhcmFtcyk7CiAgICAgICAgfQogICAgICAgIExvYWRDYWNoZShmb3JjZSA9IGZhbHNlKSB7CiAgICAgICAgICAgIGlmIChmb3JjZSB8fCB0aGlzLl9yZWxvYWRDYWNoZSkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9zb25nQ2FjaGUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5fX3RyYWNrX3F1ZXVlX2NhY2hlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9zb25nQ2FjaGUgPSB7fTsKICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UuX190cmFja19xdWV1ZV9jYWNoZSA9ICd7fSc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5fcmVsb2FkQ2FjaGUgPSBmYWxzZTsKICAgICAgICB9CiAgICAgICAgU2F2ZUNhY2hlKCkgewogICAgICAgICAgICBsb2NhbFN0b3JhZ2UuX190cmFja19xdWV1ZV9jYWNoZSA9IEpTT04uc3RyaW5naWZ5KHRoaXMuX3NvbmdDYWNoZSk7CiAgICAgICAgfQogICAgICAgIEFqYXhQYXRjaGVkSW50ZXJuYXRpb25hbCh1cmwsIHBhcmFtcywgdHJ5X2JyKSB7CiAgICAgICAgICAgIGlmICh1cmwgIT0gJy9hcGkvc29uZy9lbmhhbmNlL3BsYXllci91cmwnKSB7CiAgICAgICAgICAgICAgICB0aGlzLl9hamF4QmFja3VwKHVybCwgcGFyYW1zKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSAnb3M9dXdwJzsKICAgICAgICAgICAgbGV0IGlwID0gdGhpcy5faXBzLnNoaWZ0KCk7CiAgICAgICAgICAgIHRoaXMuX2lwcy5wdXNoKGlwKTsKICAgICAgICAgICAgcGFyYW1zLmhlYWRlcnNbJ1gtUmVhbC1JUCddID0gaXA7CiAgICAgICAgICAgIHZhciBpZCA9IEpTT04ucGFyc2UocGFyYW1zLnF1ZXJ5LmlkcylbMF07CiAgICAgICAgICAgIHBhcmFtcy5fb25sb2FkID0gZXhwb3J0RnVuY3Rpb24oKGRhdGEsIF9vbmxvYWQpID0+IHsKICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGFbMF0udXJsKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHVybCA9IHRoaXMuSW5qZWN0Q2RuKGRhdGEuZGF0YVswXS51cmwpOwogICAgICAgICAgICAgICAgICAgIF9vbmxvYWQoVXJsVG9Tb25nVXJsUmVwbHkoaWQsIHVybCkpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuTm90aWZ5VXJsQ2hhbmdlKHVybCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChTY3JpcHRDb25maWdfMy5Db25maWcuYlllbGxvd0Vhc2VVc2VUaHJpZE9uRmFpbCAmJiAhdHJ5X2JyKSB7CiAgICAgICAgICAgICAgICAgICAgTXVzaWNTcHkuR2V0KGlkLCAoZXJyLCB1cmwpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9nZ2VyXzUuZXJyb3IoZXJyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2RuX3VybCA9IHRoaXMuSW5qZWN0Q2RuKHVybCk7CiAgICAgICAgICAgICAgICAgICAgICAgIF9vbmxvYWQoVXJsVG9Tb25nVXJsUmVwbHkoaWQsIGNkbl91cmwpKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5Ob3RpZnlVcmxDaGFuZ2UoY2RuX3VybCk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICA7CiAgICAgICAgICAgIH0sIHVuc2FmZVdpbmRvdyk7CiAgICAgICAgICAgIHRoaXMuX2FqYXhCYWNrdXAodXJsLCBwYXJhbXMpOwogICAgICAgIH0KICAgICAgICBOb3RpZnlVcmxDaGFuZ2UodXJsKSB7CiAgICAgICAgICAgIHRoaXMuX3NvbmcudXJsID0gdXJsOwogICAgICAgICAgICB0aGlzLk9uU29uZ0NoYW5nZSgpOwogICAgICAgIH0KICAgICAgICBPblNvbmdDaGFuZ2UoKSB7CiAgICAgICAgICAgIHRoaXMuX2J0bkRvd25sb2FkLmF0dHIoewogICAgICAgICAgICAgICAgaHJlZjogdGhpcy5fZG93bmxvYWRlci5HZW5lcmF0ZVVyaSh0aGlzLl9zb25nLnVybCwgYCR7dGhpcy5fc29uZy5uYW1lfSBbJHt0aGlzLl9zb25nLmFydGlzdHN9XS5tcDNgKSwKICAgICAgICAgICAgICAgIHRpdGxlOiBg5LiL6L29OiAke3RoaXMuX3NvbmcubmFtZX1gCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBJbmplY3RDZG4odXJsKSB7CiAgICAgICAgICAgIHZhciByID0gdXJsLnJlcGxhY2UoLyhtMTBcLm11c2ljXC4xMjZcLm5ldCkvLCBgJHt0aGlzLl9jZG59LyQxYCk7CiAgICAgICAgICAgIExvZ2dlcl81LmluZm8oYOaSreaUvumfs+S5kCAoJHtyfSlgKTsKICAgICAgICAgICAgcmV0dXJuIHI7CiAgICAgICAgfQogICAgICAgIE5leHRDZG4oKSB7CiAgICAgICAgICAgIGlmICghdGhpcy5fY2RucykKICAgICAgICAgICAgICAgIEdlbmVyYXRlQ2RuTGlzdCh0aGlzKTsKICAgICAgICAgICAgdmFyIGlwID0gdGhpcy5fY2Rucy5zaGlmdCgpOwogICAgICAgICAgICB0aGlzLl9jZG5zLnB1c2goaXApOwogICAgICAgICAgICB0aGlzLk5vdGlmeUNkbihpcCk7CiAgICAgICAgfQogICAgICAgIE5vdGlmeUNkbihpcCkgewogICAgICAgICAgICBpZiAodGhpcy5fYnRuQ2hhbmdlQ2RuKQogICAgICAgICAgICAgICAgdGhpcy5fYnRuQ2hhbmdlQ2RuLmF0dHIoJ3RpdGxlJywgYOabtOaNoiBDRE4gW+W9k+WJjTogJHtpcH1dYCk7CiAgICAgICAgICAgIExvZ2dlcl81LmluZm8oYOS9v+eUqCBDRE46ICR7aXB9YCk7CiAgICAgICAgICAgIHRoaXMuX2NkbiA9IGlwOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uud3NfY2RuX21lZGlhID0gaXA7CiAgICAgICAgICAgIEdNX3NldFZhbHVlKCJfd3NfY2RuX21lZGlhIiwgaXApOwogICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChTY3JpcHRfNy5TY3JpcHQuTmFtZSArICctY2RuJywgewogICAgICAgICAgICAgICAgZGV0YWlsOiBpcAogICAgICAgICAgICB9KSk7CiAgICAgICAgfQogICAgICAgIEhvb2tSYWRpb1BsYXllcigpIHsKICAgICAgICB9CiAgICAgICAgRnJhbWVQYWdlKCkgewogICAgICAgICAgICBzd2l0Y2ggKGxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KCcvJylbMV0pIHsKICAgICAgICAgICAgICAgIGNhc2UgJ212JzoKICAgICAgICAgICAgICAgICAgICB0aGlzLk1vdmllUGFnZSgpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAnb3V0Y2hhaW4nOgogICAgICAgICAgICAgICAgICAgIHRoaXMuT3V0Y2hhaW5QYWdlKCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICdzb25nJzoKICAgICAgICAgICAgICAgICAgICB0aGlzLlNpbmdsZVBhZ2UoKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ2FsYnVtJzogLy8g5LiT6L6RCiAgICAgICAgICAgICAgICBjYXNlICdhcnRpc3QnOiAvLyDoibrmnK/lrrYKICAgICAgICAgICAgICAgIGNhc2UgJ3BsYXlsaXN0JzogLy8g5pKt5pS+5YiX6KGoCiAgICAgICAgICAgICAgICBjYXNlICdkaXNjb3Zlcic6CiAgICAgICAgICAgICAgICAgICAgdGhpcy5FbmFibGVJdGVtcygpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIE1vdmllUGFnZSgpIHsKICAgICAgICAgICAgdmFyICRmbGFzaEJveCA9ICQoJyNmbGFzaF9ib3gnKTsKICAgICAgICAgICAgaWYgKCRmbGFzaEJveC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICB2YXIgaHRtbCA9ICRmbGFzaEJveC5odG1sKCk7CiAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gcXMuUGFyc2UoaHRtbC5tYXRjaCgvZmxhc2h2YXJzPSIoW1xzXFNdKz8pIi8pWzFdLnJlcGxhY2UoLyZhbXA7L2csICcmJykpOwogICAgICAgICAgICAgICAgdmFyIHF1YWxpdGllcyA9IHsKICAgICAgICAgICAgICAgICAgICBodXJsOiAn6auY5riFJywKICAgICAgICAgICAgICAgICAgICBtdXJsOiAn5qCH5riFJywKICAgICAgICAgICAgICAgICAgICBsdXJsOiAn5rij55S76LSoJwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZhciAkZGxIb2xkZXIgPSAkKCc8cD4nKS5jc3MoewogICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbjogJ3JpZ2h0JwogICAgICAgICAgICAgICAgfSkudGV4dCgnTVYg5LiL6L29OiAnKS5pbnNlcnRBZnRlcigkZmxhc2hCb3gpOwogICAgICAgICAgICAgICAgT2JqZWN0LmtleXMocXVhbGl0aWVzKS5mb3JFYWNoKChxdWFsaXR5SWQpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAocGFyYW1zW3F1YWxpdHlJZF0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRkbCA9ICQoJzxhPicpLmF0dHIoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogdGhpcy5fZG93bmxvYWRlci5HZW5lcmF0ZVVyaShwYXJhbXNbcXVhbGl0eUlkXSwgYCR7cGFyYW1zLnRyYWNrTmFtZX1bJHtxdWFsaXRpZXNbcXVhbGl0eUlkXX1dLm1wNGApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGDkuIvovb0gJHtwYXJhbXMudHJhY2tOYW1lfSDnmoQgJHtxdWFsaXRpZXNbcXVhbGl0eUlkXX0gTXZgCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLnByb3AoJ2Rvd25sb2FkJywgdHJ1ZSkudGV4dChxdWFsaXRpZXNbcXVhbGl0eUlkXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOS/ruatoyAxNjMg6Ieq5bex55qE6Lez6L2sLgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9kb3dubG9hZGVyLkNhcHR1cmVBcmlhKCRkbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICRkbEhvbGRlci5hcHBlbmQoJGRsKTsKICAgICAgICAgICAgICAgICAgICAgICAgJGRsSG9sZGVyLmFwcGVuZCgnIHwgJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAkZGxIb2xkZXIuYXBwZW5kKGDmj5Dkvps6ICR7U2NyaXB0XzcuU2NyaXB0Lk5hbWV9ICR7Q29uc3RhbnRzXzMudmVyc2lvbn1gKTsKICAgICAgICAgICAgICAgIGlmIChTY3JpcHRDb25maWdfMy5Db25maWcuYlllbGxvd0Vhc2VJbnRlcm5hdGlvbmFsKSB7CiAgICAgICAgICAgICAgICAgICAgJGZsYXNoQm94Lmh0bWwoaHRtbC5yZXBsYWNlKC9yZXN0cmljdD10cnVlL2csICdyZXN0cmljdD0nKSk7CiAgICAgICAgICAgICAgICAgICAgLy8g6Ieq5Yqo5YWz6Zet5by55Ye655qE5o+Q56S65qGGCiAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd6Y2xzJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbFswXS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnbW91c2Vkb3duJykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCAxMDApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIE91dGNoYWluUGFnZSgpIHsKICAgICAgICAgICAgLy8gVE9ETzog5aSW6ZO+6aG16Z2iCiAgICAgICAgfQogICAgICAgIFNpbmdsZVBhZ2UoKSB7CiAgICAgICAgICAgIHZhciB0aW1lciA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgICAgICB2YXIgcGxheUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3UtYnRuaS1hZGRwbHknKTsKICAgICAgICAgICAgICAgIGlmIChwbGF5QnV0dG9uLmxlbmd0aCA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGltZXIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSBpdCBzaG91bGQgYmUgYSBkaXNhYmxlZCBidXR0b24uCiAgICAgICAgICAgICAgICB2YXIgcGxheUJ1dHRvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd1LWJ0bmktcGxheS1kaXMnKTsKICAgICAgICAgICAgICAgIGlmIChwbGF5QnV0dG9ucy5sZW5ndGggPT0gMSkgewogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRpbWVyKTsKICAgICAgICAgICAgICAgICAgICB2YXIgc29uZ0lkID0gJCgnI2NvbnRlbnQtb3BlcmF0aW9uJykuZGF0YSgncmlkJyk7CiAgICAgICAgICAgICAgICAgICAgcGxheUJ1dHRvbnNbMF0ub3V0ZXJIVE1MID0gYAo8YSBkYXRhLXJlcy1hY3Rpb249InBsYXkiIGRhdGEtcmVzLWlkPSIke3NvbmdJZH0iIGRhdGEtcmVzLXR5cGU9IjE4IiBocmVmPSJqYXZhc2NyaXB0OjsiCiAgY2xhc3M9InUtYnRuMiB1LWJ0bjItMiB1LWJ0bmktYWRkcGx5IGYtZmwiIGhpZGVmb2N1cz0idHJ1ZSIgdGl0bGU9IuaSreaUviI+CiAgICA8aT48ZW0gY2xhc3M9InBseSI+PC9lbT7mkq3mlL48L2k+CjwvYT4KCjxhIGRhdGEtcmVzLWFjdGlvbj0iYWRkdG8iIGRhdGEtcmVzLWlkPSIke3NvbmdJZH0iIGRhdGEtcmVzLXR5cGU9IjE4IiBocmVmPSJqYXZhc2NyaXB0OjsiCiAgY2xhc3M9InUtYnRuaSB1LWJ0bmktYWRkIiBoaWRlZm9jdXM9InRydWUiIHRpdGxlPSLmt7vliqDliLDmkq3mlL7liJfooagiPgo8L2E+CiAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICB9CiAgICAgICAgRW5hYmxlSXRlbXMoKSB7CiAgICAgICAgICAgIHZhciB0aW1lciA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgICAgICB2YXIgZGlzYmxlZEl0ZW1zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnanMtZGlzJyk7CiAgICAgICAgICAgICAgICBpZiAoZGlzYmxlZEl0ZW1zLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRpbWVyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGlzYmxlZEl0ZW1zLmxlbmd0aDspIHsKICAgICAgICAgICAgICAgICAgICBkaXNibGVkSXRlbXNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnanMtZGlzJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIFRlc3RTdHJpbmcoc3JjLCBuZWVkbGUpIHsKICAgICAgICBpZiAodHlwZW9mIG5lZWRsZSA9PSAnc3RyaW5nJykgewogICAgICAgICAgICByZXR1cm4gRXh0ZW5zaW9uXzkuQ29udGFpbnMoc3JjLCBuZWVkbGUpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIG5lZWRsZS50ZXN0KHNyYyk7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gR2VuZXJhdGVDZG5MaXN0KGN0eCkgewogICAgICAgIHZhciBjZG5zID0gWwogICAgICAgICAgICAvLyDnlLXkv6EKICAgICAgICAgICAgIjEyNS45MC4yMDYuMzIiLAogICAgICAgICAgICAiMjIyLjE4Ni4xMzIuMTAzIiwKICAgICAgICAgICAgIjExNy4yMy42Ljg5IiwKICAgICAgICAgICAgIjExOS4xNDUuMjA3LjE3IiwKICAgICAgICAgICAgIjE4MC45Ny4xODAuNzEiLAogICAgICAgICAgICAiMTE2LjU1LjIzNi45MyIsCiAgICAgICAgICAgICIyMTguNzYuMTA1LjQyIiwKICAgICAgICAgICAgIjEyNS42NC4yMzIuMTUiLAogICAgICAgICAgICAiMTE1LjIzMS44Ny4zNyIsCiAgICAgICAgICAgICI1OC4yMjEuNzguNjgiLAogICAgICAgICAgICAiMjIwLjExMi4xOTUuMTQ4IiwKICAgICAgICAgICAgIjIxOC42NC45NC42NyIsCiAgICAgICAgICAgICIzNi40Mi4zMi43NiIsCiAgICAgICAgICAgICI2MS4xMzYuMjExLjE2IiwKICAgICAgICAgICAgIjIxOC42NC45NC42OCIsCiAgICAgICAgICAgICIyMTkuMTM4LjIxLjcxIiwKICAgICAgICAgICAgIjQ5Ljc5LjIzMi41OCIsCiAgICAgICAgICAgICIxMjIuMjI4LjI0LjMwIiwKICAgICAgICAgICAgIjE4Mi4xMDYuMTk0Ljg1IiwKICAgICAgICAgICAgIjIxOC41OS4xODYuOTgiLAogICAgICAgICAgICAiNjEuMTU4LjEzMy4yMSIsCiAgICAgICAgICAgICIxMTcuMjcuMjQxLjIwIiwKICAgICAgICAgICAgIjU4LjUxLjE1MC4xMzMiLAogICAgICAgICAgICAiMjE4LjI5LjQ5LjEzMiIsCiAgICAgICAgICAgICI2MC4yMTUuMTI1Ljc2IiwKICAgICAgICAgICAgIjE4My42MS4yMi4xNyIsCiAgICAgICAgICAgICIxODMuMTM0LjE0LjI2IiwKICAgICAgICAgICAgIjU4LjIyMC42LjE0MiIsCiAgICAgICAgICAgICIxMTUuMjMxLjE1OC40NCIsCiAgICAgICAgICAgICI2MS4xNjQuMjQxLjEwNSIsCiAgICAgICAgICAgICIxMjUuNDYuMjIuMTI0IiwKICAgICAgICAgICAgIjIyMi4yOC4xNTIuMTM5IiwKICAgICAgICAgICAgIjEyNC4xNjUuMjE2LjI0NCIsCiAgICAgICAgICAgICIyMTguNjAuMTA2LjExNSIsCiAgICAgICAgICAgICIyMDIuMTA3Ljg1LjgxIiwKICAgICAgICAgICAgIjYxLjE3OS4xMDcuMTE2IiwKICAgICAgICAgICAgIjE3NS40My4yMC42OSIsCiAgICAgICAgICAgICIyMjAuMTk0LjIwMy44NiIsCiAgICAgICAgICAgICI2MS4xNjAuMjA5LjI3IiwKICAgICAgICAgICAgIjEyMC4yMDkuMTQxLjc5IiwKICAgICAgICAgICAgIjEyMC4yMDkuMTQyLjEzOCIsCiAgICAgICAgICAgICIyMTkuMTM4LjIxLjcyIiwKICAgICAgICAgICAgIjU4LjIxNi4yMS4xMzIiLAogICAgICAgICAgICAnMTQuMjE1LjIyOC4xMCcsCiAgICAgICAgICAgICcyMTguODcuMTExLjgzJywKICAgICAgICAgICAgLy8g5YyX5Lqs55S15L+hCiAgICAgICAgICAgICcyMDMuMTMwLjU5LjgnLAogICAgICAgICAgICAnMjAzLjEzMC41OS4xMCcsCiAgICAgICAgICAgICcyMDMuMTMwLjU5LjExJywKICAgICAgICAgICAgJzIwMy4xMzAuNTkuMTInCiAgICAgICAgXTsKICAgICAgICBjdHguX2NkbnMgPSBFeHRlbnNpb25fOS5TaHVmZmxlKGNkbnMpOwogICAgICAgIHZhciBpcHMgPSBbCiAgICAgICAgICAgICcxMDYuMTIwLjE2Ny42NycsICcxMTEuMjA2LjYxLjEzMScsICcxMTEuMjA2LjYxLjEzMScsICcxMTEuMTMuNjYuMjI2JywKICAgICAgICAgICAgJzEwNi4xMjAuMTY3LjY3JywgJzEyNS44OC4xOTAuNTYnLCAnMjIyLjczLjE0NC4xOTUnLCAnMjIwLjE4MS41Ny4yMzInLAogICAgICAgICAgICAnMTgwLjE0OS4xMzEuMjQ3JywgJzE4MC4xNDkuMTMzLjE2NycsICcxMTIuMzQuMTExLjEyMScsICc2MS4xMzUuMTg1LjI0JwogICAgICAgIF07CiAgICAgICAgY3R4Ll9pcHMgPSBFeHRlbnNpb25fOS5TaHVmZmxlKGlwcyk7CiAgICB9CiAgICBmdW5jdGlvbiBHZW5lcmF0ZVZhbGlkTmFtZSgpIHsKICAgICAgICByZXR1cm4gYCR7U2NyaXB0XzcuU2NyaXB0Lk5hbWV9X18ke0RhdGUubm93KCl9JHtNYXRoLnJhbmRvbSgpfWA7CiAgICB9CiAgICBmdW5jdGlvbiBHZXRFbmhhbmNlZERhdGEoaWQsIHVybCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGlkOiBpZCwKICAgICAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgICAgIGJyOiAxOTIwMDAsCiAgICAgICAgICAgIHNpemU6IDEyMDAwMCwKICAgICAgICAgICAgbWQ1OiAnMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgICAgICAgICBjb2RlOiAyMDAsCiAgICAgICAgICAgIGV4cGk6IDEyMDAsCiAgICAgICAgICAgIHR5cGU6ICdtcDMnLAogICAgICAgICAgICBnYWluOiAwLAogICAgICAgICAgICBmZWU6IDAsCiAgICAgICAgICAgIHVmOiBudWxsLAogICAgICAgICAgICBwYXllZDogMCwKICAgICAgICAgICAgY2FuRXh0ZW5kOiBmYWxzZQogICAgICAgIH07CiAgICB9CiAgICBmdW5jdGlvbiBTb25nc1RvVXJsUmVwbHkoc29uZ3MpIHsKICAgICAgICB2YXIgcmVwbHkgPSB7CiAgICAgICAgICAgIGNvZGU6IDIwMCwKICAgICAgICAgICAgZGF0YTogc29uZ3MubWFwKChzb25nKSA9PiB7CiAgICAgICAgICAgICAgICByZXR1cm4gR2V0RW5oYW5jZWREYXRhKHNvbmcuaWQsIEdlbmVyYXRlVXJsRnJvbVNvbmcoc29uZykpOwogICAgICAgICAgICB9KQogICAgICAgIH07CiAgICAgICAgcmV0dXJuIGNsb25lSW50byhyZXBseSwgdW5zYWZlV2luZG93LCB7CiAgICAgICAgICAgIGNsb25lRnVuY3Rpb25zOiBmYWxzZSwKICAgICAgICAgICAgd3JhcFJlZmxlY3RvcnM6IHRydWUKICAgICAgICB9KTsKICAgIH0KICAgIGZ1bmN0aW9uIFVybFRvU29uZ1VybFJlcGx5KGlkLCB1cmwpIHsKICAgICAgICB2YXIgcmVwbHkgPSB7CiAgICAgICAgICAgIGNvZGU6IDIwMCwKICAgICAgICAgICAgZGF0YTogW0dldEVuaGFuY2VkRGF0YShpZCwgdXJsKV0KICAgICAgICB9OwogICAgICAgIHJldHVybiBjbG9uZUludG8ocmVwbHksIHVuc2FmZVdpbmRvdywgewogICAgICAgICAgICBjbG9uZUZ1bmN0aW9uczogZmFsc2UsCiAgICAgICAgICAgIHdyYXBSZWZsZWN0b3JzOiB0cnVlCiAgICAgICAgfSk7CiAgICB9CiAgICBmdW5jdGlvbiBHZW5lcmF0ZVVybEZyb21Tb25nKHNvbmcpIHsKICAgICAgICB2YXIgZGZzSWQ7CiAgICAgICAgdmFyIHEgPSAoc29uZy5oIHx8IHNvbmcubSB8fCBzb25nLmwgfHwgc29uZy5hKTsKICAgICAgICBpZiAoIXEpIHsKICAgICAgICAgICAgTG9nZ2VyXzUuZXJyb3IoYOatjOabsiAke3NvbmcubmFtZX0g5bey57uP5LiL5p6277yM6I635Y+W5Zyw5Z2A5aSx6LSlIWApOwogICAgICAgICAgICByZXR1cm4gX19NUDNfQkxBTks7CiAgICAgICAgfQogICAgICAgIGRmc0lkID0gcS5maWQ7CiAgICAgICAgdmFyIHJhbmRTZXJ2ZXIgPSB+fihNYXRoLnJhbmRvbSgpICogMikgKyAxOwogICAgICAgIHZhciBpcFByZWZpeCA9ICcnOwogICAgICAgIGlmIChTY3JpcHRDb25maWdfMy5Db25maWcuYlllbGxvd0Vhc2VJbnRlcm5hdGlvbmFsKSB7CiAgICAgICAgICAgIGlmIChTY3JpcHRDb25maWdfMy5Db25maWcuYlllbGxvd0Vhc2VVc2VPbGRBcGkpIHsKICAgICAgICAgICAgICAgIGlwUHJlZml4ID0gJzEyNy4wLjAuMTo0MDAzLyc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBUT0RPOiDov5nkupsgSXAg5pyJ55So5ZibPwogICAgICAgICAgICAgICAgaXBQcmVmaXggPSBydWxlLmluc3RhbmNlLl9jZG47CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdmFyIGRmc0hhc2ggPSBEb0Rmc0hhc2goZGZzSWQpOwogICAgICAgIHJldHVybiBgaHR0cDovLyR7aXBQcmVmaXh9bSR7cmFuZFNlcnZlcn0ubXVzaWMuMTI2Lm5ldC8ke2Rmc0hhc2h9LyR7ZGZzSWR9Lm1wM2A7CiAgICB9CiAgICBmdW5jdGlvbiBzdHJUb0tleUNvZGVzKHN0cikgewogICAgICAgIHJldHVybiBTdHJpbmcoc3RyKS5zcGxpdCgnJykubWFwKChjaCkgPT4gY2guY2hhckNvZGVBdCgwKSk7CiAgICB9CiAgICBjb25zdCBrZXlzID0gWwogICAgICAgIDUxLCAxMDMsIDExMSwgNTYsIDM4LCAzNiwKICAgICAgICA1NiwgNDIsIDUxLCA0MiwgNTEsIDEwNCwKICAgICAgICA0OCwgMTA3LCA0MCwgNTAsIDQxLCA1MAogICAgXTsKICAgIGZ1bmN0aW9uIERvRGZzSGFzaChkZnNpZCkgewogICAgICAgIHZhciBmaWRzID0gc3RyVG9LZXlDb2RlcyhkZnNpZCkubWFwKGZ1bmN0aW9uIChmaWQsIGkpIHsKICAgICAgICAgICAgcmV0dXJuIChmaWQgXiBrZXlzW2kgJSBrZXlzLmxlbmd0aF0pICYgMHhGRjsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gQ3J5cHRvSlMuTUQ1KENyeXB0b0pTLmxpYi5CeXRlQXJyYXkoZmlkcykpCiAgICAgICAgICAgIC50b1N0cmluZyhDcnlwdG9KUy5lbmMuQmFzZTY0KQogICAgICAgICAgICAucmVwbGFjZSgvXC8vZywgIl8iKQogICAgICAgICAgICAucmVwbGFjZSgvXCsvZywgIi0iKTsKICAgIH0KICAgIHZhciBNdXNpY1NweTsKICAgIChmdW5jdGlvbiAoTXVzaWNTcHkpIHsKICAgICAgICB2YXIgX3JlYWR5ID0gZmFsc2U7CiAgICAgICAgdmFyIF9yZWxvYWRDYWNoZSA9IHRydWU7CiAgICAgICAgdmFyIF9jYWNoZSA9IHt9OwogICAgICAgIGZ1bmN0aW9uIEluaXQoKSB7CiAgICAgICAgICAgIF9yZWFkeSA9IHRydWU7CiAgICAgICAgICAgIFNjcmlwdF83LlNjcmlwdC5SZWdpc3RlclN0b3JhZ2VFdmVudCgnX01VU0lDX1NQWScsICgpID0+IHsKICAgICAgICAgICAgICAgIF9yZWxvYWRDYWNoZSA9IHRydWU7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBSZWxvYWRDYWNoZSgpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBSZWxvYWRDYWNoZShmb3JjZSA9IGZhbHNlKSB7CiAgICAgICAgICAgIGlmIChmb3JjZSB8fCBfcmVsb2FkQ2FjaGUpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgX2NhY2hlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuX01VU0lDX1NQWSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZXgpIHsKICAgICAgICAgICAgICAgICAgICBfY2FjaGUgPSB7fTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBfcmVsb2FkQ2FjaGUgPSBmYWxzZTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gUmVhZENhY2hlKGlkKSB7CiAgICAgICAgICAgIGlmIChfcmVsb2FkQ2FjaGUpCiAgICAgICAgICAgICAgICBSZWxvYWRDYWNoZSgpOwogICAgICAgICAgICByZXR1cm4gX2NhY2hlW2lkXTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gU2F2ZUNhY2hlKCkgewogICAgICAgICAgICBsb2NhbFN0b3JhZ2UuX01VU0lDX1NQWSA9IEpTT04uc3RyaW5naWZ5KF9jYWNoZSk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIEdldChpZCwgY2FsbGJhY2spIHsKICAgICAgICAgICAgaWYgKCFfcmVhZHkpCiAgICAgICAgICAgICAgICBJbml0KCk7CiAgICAgICAgICAgIExvZ2dlcl81LmluZm8oYOesrOS4gOatpTog5pCc57Si5puy55uuICgke2lkfSlgKTsKICAgICAgICAgICAgdmFyIGNhY2hlU29uZyA9IFJlYWRDYWNoZShpZCk7CiAgICAgICAgICAgIGlmIChjYWNoZVNvbmcpIHsKICAgICAgICAgICAgICAgIExvZ2dlcl81LmluZm8oYOivu+iHque8k+WtmCwg6K+35rGC6Kej5p6Q55yf5a6e5Zyw5Z2A44CCYCk7CiAgICAgICAgICAgICAgICBQYXJzZVJlYWxBZGRyZXNzKGNhY2hlU29uZywgY2FsbGJhY2spOwogICAgICAgICAgICAgICAgLy8gY2FsbGJhY2sobnVsbCwgY2FjaGVTb25nLnVybCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICAgICAgbWV0aG9kOiAiR0VUIiwKICAgICAgICAgICAgICAgIHVybDogYGh0dHA6Ly9hcGkuaXR3dXN1bi5jb20vbXVzaWMvc2VhcmNoL3d5LzE/Zm9ybWF0PWpzb24mc2lnbj1hNWNjMGE4Nzk3NTM5ZDNhMWE0ZjdhZWNhNWI2OTViOSZrZXl3b3JkPSR7aWR9YCwKICAgICAgICAgICAgICAgIG9ubG9hZDogKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGE7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2UucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+aXoOaViOeahOabsuebruaQnOe0oue7k+aenOOAgicpKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgc29uZyA9IGRhdGEKICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigoc29uZykgPT4gc29uZy5UeXBlID09ICd3eScgJiYgc29uZy5Tb25nSWQgPT0gaWQpCiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3AoKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIXNvbmcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfmib7kuI3liLDmm7Lnm67kv6Hmga/jgIInKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IHNvbmcuU3FVcmwgfHwgc29uZy5IcVVybCB8fCBzb25nLkxxVXJsOwogICAgICAgICAgICAgICAgICAgIHZhciBzb25nT2JqID0gewogICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBEYXRlLm5vdygpLAogICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgICAgICAgICAgICAgcmVhbF90aW1lOiAwLAogICAgICAgICAgICAgICAgICAgICAgICByZWFsX3VybDogbnVsbAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgX2NhY2hlW2lkXSA9IHNvbmdPYmo7CiAgICAgICAgICAgICAgICAgICAgU2F2ZUNhY2hlKCk7CiAgICAgICAgICAgICAgICAgICAgTG9nZ2VyXzUuaW5mbyhg5oiQ5Yqf5Y+W5b6X5Zyw5Z2ALCDor7fmsYLop6PmnpDnnJ/lrp7lnLDlnYDjgIJgKTsKICAgICAgICAgICAgICAgICAgICBQYXJzZVJlYWxBZGRyZXNzKHNvbmdPYmosIGNhbGxiYWNrKTsKICAgICAgICAgICAgICAgICAgICAvLyBjYWxsYmFjayhudWxsLCB1cmwpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9uZXJyb3I6ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+e9kee7nOmUmeivryAo5pCc57Si5puy55uuKScpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIE11c2ljU3B5LkdldCA9IEdldDsKICAgICAgICAvLyDlm5vlsI/ml7blkI7ov4fmnJ8KICAgICAgICAvLyAxMDAwICogNjAgKiA2MCAqNCA9PSAxNDQwMDAwMAogICAgICAgIGZ1bmN0aW9uIFBhcnNlUmVhbEFkZHJlc3MoY2FjaGVTb25nLCBjYWxsYmFjaykgewogICAgICAgICAgICBMb2dnZXJfNS5pbmZvKGDnrKzkuozmraU6IOino+aekOecn+WunuWcsOWdgCAoJHtjYWNoZVNvbmcudXJsfSlgKTsKICAgICAgICAgICAgaWYgKERhdGUubm93KCkgLSBjYWNoZVNvbmcucmVhbF90aW1lIDwgMTQ0MDAwMDApIHsKICAgICAgICAgICAgICAgIExvZ2dlcl81LmluZm8oYOivu+iHque8k+WtmO+8jOe7k+adn+ivu+WPluOAgmApOwogICAgICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgY2FjaGVTb25nLnJlYWxfdXJsKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgICAgICAgICAgdXJsOiBjYWNoZVNvbmcudXJsLAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgIFJhbmdlOiAnYnl0ZXM9MC0yJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9ubG9hZDogKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY2FjaGVTb25nLnJlYWxfdXJsID0gcmVzcG9uc2UuZmluYWxVcmw7CiAgICAgICAgICAgICAgICAgICAgY2FjaGVTb25nLnJlYWxfdGltZSA9IERhdGUubm93KCk7CiAgICAgICAgICAgICAgICAgICAgU2F2ZUNhY2hlKCk7CiAgICAgICAgICAgICAgICAgICAgTG9nZ2VyXzUuaW5mbyhg6Kej5p6Q57uT5p2fOiAke2NhY2hlU29uZy5yZWFsX3VybH1gKTsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCByZXNwb25zZS5maW5hbFVybCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb25lcnJvcjogKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign572R57uc6ZSZ6K+vICjop6PmnpDnnJ/lrp7lnLDlnYDml7YpJyksIG51bGwpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9KShNdXNpY1NweSB8fCAoTXVzaWNTcHkgPSB7fSkpOwp9KTsKZGVmaW5lKCJzaXRlL211c2ljLjF0aW5nIiwgWyJyZXF1aXJlIiwgImV4cG9ydHMiLCAiaGVscGVyL1dhaXQiLCAiaGVscGVyL0Rvd25sb2FkZXIiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIFdhaXRfNiwgRG93bmxvYWRlcl81KSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgdmFyIHJ1bGUgPSB7CiAgICAgICAgaWQ6ICdtdXNpYy4xdGluZycsCiAgICAgICAgc3NsOiBmYWxzZSwKICAgICAgICBuYW1lOiAn5LiA5ZCs6Z+z5LmQJywKICAgICAgICBob3N0OiAnd3d3LjF0aW5nLmNvbScsCiAgICAgICAgaW5jbHVkZVN1Ykhvc3Q6IGZhbHNlLAogICAgICAgIHN1Yk1vZHVsZTogZmFsc2UsCiAgICAgICAgY3NzOiBgYCwKICAgICAgICBiZDogbnVsbCwKICAgICAgICBfZGw6IG51bGwsCiAgICAgICAgb25TdGFydDogKCkgPT4gewogICAgICAgICAgICBydWxlLmJkID0gbmV3IERvd25sb2FkZXJfNS5Eb3dubG9hZGVyKCk7CiAgICAgICAgfSwKICAgICAgICBvbkJvZHk6ICgpID0+IHsKICAgICAgICAgICAgcnVsZS5fZGwgPSAkKCcuc29uZ2FjdCA+IC5kb3duJyk7CiAgICAgICAgICAgIHJ1bGUuX2RsCiAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cignb25jbGljaycpCiAgICAgICAgICAgICAgICAuYXR0cigndGFyZ2V0JywgJ19ibGFuaycpOwogICAgICAgICAgICBydWxlLmJkLkNhcHR1cmVBcmlhKHJ1bGUuX2RsKTsKICAgICAgICAgICAgV2FpdF82LldhaXRVbnRpbCgneWl0aW5nLnBsYXllci5ob29rJywgKCkgPT4gewogICAgICAgICAgICAgICAgdW5zYWZlV2luZG93LnlpdGluZy5wbGF5ZXIuaG9vaygncGxheScsIGV4cG9ydEZ1bmN0aW9uKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICBydWxlLlVwZGF0ZVNvbmcoKTsKICAgICAgICAgICAgICAgIH0sIHVuc2FmZVdpbmRvdykpOwogICAgICAgICAgICAgICAgcnVsZS5VcGRhdGVTb25nKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgVXBkYXRlU29uZzogKCkgPT4gewogICAgICAgICAgICB2YXIgbmFtZSA9IHVuc2FmZVdpbmRvdy55aXRpbmcucGxheWVyLmdldCgnc29uZy1uYW1lJyk7CiAgICAgICAgICAgIHZhciBzaW5nZXIgPSB1bnNhZmVXaW5kb3cueWl0aW5nLnBsYXllci5nZXQoJ3Npbmdlci1uYW1lJyk7CiAgICAgICAgICAgIHZhciBsaW5rID0gdW5zYWZlV2luZG93LnlpdGluZy5wbGF5ZXIuaG9zdCArIHVuc2FmZVdpbmRvdy55aXRpbmcucGxheWVyLmdldCgnc29uZy1tZWRpYScpOwogICAgICAgICAgICBydWxlLl9kbC5hdHRyKHsKICAgICAgICAgICAgICAgIGhyZWY6IHJ1bGUuYmQuR2VuZXJhdGVVcmkobGluaywgYCR7bmFtZX0gWyR7c2luZ2VyfV0ubXAzYCksCiAgICAgICAgICAgICAgICB0aXRsZTogYOeCueaIkeS4i+i9vTogJHtuYW1lfWAKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfTsKICAgIGV4cG9ydHMuUnVsZXMgPSBbcnVsZV07Cn0pOwpkZWZpbmUoImhvb2tlci9qUGxheWVyIiwgWyJyZXF1aXJlIiwgImV4cG9ydHMiLCAiaGVscGVyL0xvZ2dlciIsICJoZWxwZXIvV2FpdCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgTG9nZ2VyXzYsIFdhaXRfNykgewogICAgInVzZSBzdHJpY3QiOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKICAgIC8vLyA8cmVmZXJlbmNlIHBhdGg9Ii4uL3R5cGluZ3MvZ2xvYmFscy9qcXVlcnkvaW5kZXguZC50cyIgLz4KICAgIGZ1bmN0aW9uIFBhdGNoKGNhbGxiYWNrLCBuYW1lc3BhY2UgPSAialBsYXllciIpIHsKICAgICAgICBMb2dnZXJfNi5pbmZvKCfnrYnlvoUgalBsYXllciDlsLHnu6ogLi4nKTsKICAgICAgICBXYWl0XzcuV2FpdFVudGlsKGAkLiR7bmFtZXNwYWNlfS5wcm90b3R5cGUuc2V0TWVkaWFgLCAoKSA9PiB7CiAgICAgICAgICAgIExvZ2dlcl82LmluZm8oJ+W8gOWni+e7keWumuWHveaVsCAuLicpOwogICAgICAgICAgICB1bnNhZmVPdmVyd3JpdGVGdW5jdGlvblNhZmVQcm94eSh7CiAgICAgICAgICAgICAgICBzZXRNZWRpYTogKG5ld01lZGlhKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgTG9nZ2VyXzYuaW5mbygn5q2M5puy5pWw5o2uOiAnLCBuZXdNZWRpYSk7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3TWVkaWEpOwogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvclVuc2FmZVN1Y2Nlc3MoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgdW5zYWZlV2luZG93LiRbbmFtZXNwYWNlXS5wcm90b3R5cGUsIGAuJC4ke25hbWVzcGFjZX0ucHJvdG90eXBlYCk7CiAgICAgICAgfSk7CiAgICB9CiAgICBleHBvcnRzLlBhdGNoID0gUGF0Y2g7Cn0pOwpkZWZpbmUoInNpdGUvbXVzaWMuNTYiLCBbInJlcXVpcmUiLCAiZXhwb3J0cyIsICJoZWxwZXIvRG93bmxvYWRlciIsICJoZWxwZXIvU2NyaXB0IiwgImhlbHBlci9FeHRlbnNpb24iLCAiaG9va2VyL2pQbGF5ZXIiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIERvd25sb2FkZXJfNiwgU2NyaXB0XzgsIEV4dGVuc2lvbl8xMCwgalBsYXllcikgewogICAgInVzZSBzdHJpY3QiOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKICAgIHZhciBydWxlID0gewogICAgICAgIGlkOiAnbXVzaWMuNTYnLAogICAgICAgIHNzbDogZmFsc2UsCiAgICAgICAgbmFtZTogJzU2IOmfs+S5kOe9kScsCiAgICAgICAgaG9zdDogJ3d3dy4yMzM1Ni5jb20nLAogICAgICAgIHBhdGg6IFsnL3BsdXMvcGxheWVyLmFzaHgnLCAnL3RpbmcvJywgJy9tdXNpYy8nXSwKICAgICAgICBpbmNsdWRlU3ViSG9zdDogZmFsc2UsCiAgICAgICAgc3ViTW9kdWxlOiBmYWxzZSwKICAgICAgICBoaWRlOiAnLnBsYXllci1ib3R0b20tZ2csIC5ub2NvcHlyaWdodCcsCiAgICAgICAgYmQ6IG51bGwsCiAgICAgICAgb25TdGFydDogKCkgPT4gewogICAgICAgICAgICBydWxlLmJkID0gbmV3IERvd25sb2FkZXJfNi5Eb3dubG9hZGVyKCk7CiAgICAgICAgfSwKICAgICAgICBvbkJvZHk6ICgpID0+IHsKICAgICAgICAgICAgalBsYXllci5QYXRjaCgobWVkaWEpID0+IHsKICAgICAgICAgICAgICAgIHZhciBhZGRyID0gbWVkaWEubXAzIHx8IG1lZGlhLm00YTsKICAgICAgICAgICAgICAgICQoJy5wbGF5LWluZm8tb3RoZXJvcHQgPiBhOmxhc3QnKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCdocmVmJywgcnVsZS5iZC5HZW5lcmF0ZVVyaShhZGRyLCBtZWRpYS5zb25nbmFtZSArIGFkZHIuc2xpY2UoLTQpKSkKICAgICAgICAgICAgICAgICAgICAuYXR0cigndGl0bGUnLCBg5LiL6L29OiAke21lZGlhLnNvbmduYW1lfSAo5q2M5omLOiAke21lZGlhLnNpbmdlcm5hbWV9KWApCiAgICAgICAgICAgICAgICAgICAgLmZpbmQoJ3NwYW4nKS50ZXh0KGDkuIvovb0gKCR7U2NyaXB0XzguU2NyaXB0Lk5hbWV9KWApOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdmFyIG5lZWRfcGxheSA9IGZhbHNlOwogICAgICAgICAgICB1bnNhZmVXaW5kb3cuc3BsYXllci5zb25nX2RhdGFbMF0uZm9yRWFjaCgoc29uZykgPT4gewogICAgICAgICAgICAgICAgaWYgKHNvbmcuZGVsZmxhZyB8fCBzb25nLmRlbGZsYWcgIT0gMCkgewogICAgICAgICAgICAgICAgICAgIG5lZWRfcGxheSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgc29uZy5kZWxmbGFnID0gMDsKICAgICAgICAgICAgICAgICAgICBpZiAoRXh0ZW5zaW9uXzEwLkJlZ2luV2l0aChzb25nLnVybCwgJy9kZWwnKSkgewogICAgICAgICAgICAgICAgICAgICAgICBzb25nLnVybCA9IHNvbmcudXJsLnJlcGxhY2UoJy9kZWwnLCAnJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKG5lZWRfcGxheSkgewogICAgICAgICAgICAgICAgdW5zYWZlV2luZG93LiQoJyNwbGF5JykuY2xpY2soKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CiAgICBleHBvcnRzLlJ1bGVzID0gW3J1bGVdOwp9KTsKZGVmaW5lKCJzaXRlL211c2ljLmVjaG8iLCBbInJlcXVpcmUiLCAiZXhwb3J0cyIsICJoZWxwZXIvTG9nZ2VyIiwgImhlbHBlci9XYWl0IiwgImhlbHBlci9Eb3dubG9hZGVyIiwgImhlbHBlci9FeHRlbnNpb24iXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIExvZ2dlcl83LCBXYWl0XzgsIERvd25sb2FkZXJfNywgRXh0ZW5zaW9uXzExKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgdmFyIHJ1bGUgPSB7CiAgICAgICAgaWQ6ICdtdXNpYy5lY2hvJywKICAgICAgICBzc2w6IGZhbHNlLAogICAgICAgIG5hbWU6ICdFY2hvIOWbnuWjsOmfs+S5kCcsCiAgICAgICAgaG9zdDogJ3d3dy5hcHAtZWNoby5jb20nLAogICAgICAgIHBhdGg6ICcvc291bmQvJywKICAgICAgICBpbmNsdWRlU3ViSG9zdDogZmFsc2UsCiAgICAgICAgc3ViTW9kdWxlOiBmYWxzZSwKICAgICAgICBoaWRlOiAnJywKICAgICAgICBiZDogbnVsbCwKICAgICAgICBkbExpbms6IG51bGwsCiAgICAgICAgb25TdGFydCgpIHsKICAgICAgICAgICAgcnVsZS5iZCA9IG5ldyBEb3dubG9hZGVyXzcuRG93bmxvYWRlcigpOwogICAgICAgIH0sCiAgICAgICAgb25Cb2R5KCkgewogICAgICAgICAgICBpZiAoRXh0ZW5zaW9uXzExLkJlZ2luV2l0aChsb2NhdGlvbi5wYXRobmFtZSwgJy9zb3VuZC8nKSkgewogICAgICAgICAgICAgICAgcnVsZS5TaW5nbGVQYWdlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIFNpbmdsZVBhZ2UoKSB7CiAgICAgICAgICAgIC8vIOWNleabsumhtemdogogICAgICAgICAgICAvLyBodHRwOi8vd3d3LmFwcC1lY2hvLmNvbS9zb3VuZC9pbmZvLW1vYmlsZT9zb3VuZF9pZD0ke2lkfQogICAgICAgICAgICB2YXIgaWQgPSBsb2NhdGlvbi5wYXRobmFtZS5tYXRjaCgvXGQrLyk7CiAgICAgICAgICAgIGlmICghaWQpIHsKICAgICAgICAgICAgICAgIExvZ2dlcl83LmVycm9yKCfojrflj5bmm7Lnm64gSUQg5aSx6LSlIScpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIOaPkuWFpeS4i+i9vei/nuaOpXgKICAgICAgICAgICAgdmFyIHNtYWxsVGV4dCA9ICQoJzxzbWFsbD4nKTsKICAgICAgICAgICAgdmFyIHVybERsID0gJCgnPGE+Jyk7CiAgICAgICAgICAgICQoJy5zaW5nbGUtdGl0bGUgPiBoMScpLmFwcGVuZChzbWFsbFRleHQpOwogICAgICAgICAgICBzbWFsbFRleHQuYXBwZW5kKHVybERsKTsKICAgICAgICAgICAgcnVsZS5kbExpbmsgPSB1cmxEbDsKICAgICAgICAgICAgdXJsRGwudGV4dCgn5LiL6L29JykKICAgICAgICAgICAgICAgIC5hdHRyKCd0aXRsZScsICfmraPlnKjop6PmnpAuLi4nKQogICAgICAgICAgICAgICAgLmNzcygnbWFyZ2luLWxlZnQnLCAnMWVtJyk7CiAgICAgICAgICAgIHZhciBmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpOwogICAgICAgICAgICBmcmFtZS5zcmMgPSAnYWJvdXQ6YmxhbmsnOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZyYW1lKTsKICAgICAgICAgICAgdW5zYWZlV2luZG93Lm9uZXJyb3IgPSBudWxsOwogICAgICAgICAgICB2YXIgcmVxID0gewogICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICAgICAgICAgIHVybDogYC9zb3VuZC9pbmZvLW1vYmlsZT9zb3VuZF9pZD0ke2lkfWAsCiAgICAgICAgICAgICAgICBvbmxvYWQ6IChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkKHJlc3BvbnNlLnJlc3BvbnNlVGV4dCkKICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcignc2NyaXB0JykKICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigoaSwgZWwpID0+IEV4dGVuc2lvbl8xMS5Db250YWlucyhlbC50ZXh0Q29udGVudCwgJ3BsYXlfc291cmNlKCcpKTsKICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBMb2dnZXJfNy5lcnJvcign5pCc57Si5LiN5Yiw5pyJ5pWI55qE5puy55uu5Luj56CB44CCJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgLy8g5a+85Ye65oiR5Lus55qE5Ye95pWwCiAgICAgICAgICAgICAgICAgICAgdmFyIHduZCA9IGZyYW1lLmNvbnRlbnRXaW5kb3c7CiAgICAgICAgICAgICAgICAgICAgZXhwb3J0RnVuY3Rpb24oKGlkLCB0eXBlLCB1cmwsIHVuaykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBXYWl0XzguV2FpdFVudGlsKCdwYWdlX3NvdW5kX29iaicsICgpID0+IHJ1bGUuVXBkYXRlVXJsKHVybCwgdW5zYWZlV2luZG93LnBhZ2Vfc291bmRfb2JqLm5hbWUpKTsKICAgICAgICAgICAgICAgICAgICB9LCB3bmQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGVmaW5lQXM6ICdwbGF5X3NvdXJjZScKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAvLyDmiafooYzmjZXmjYnliLDnmoTlhYPntKAKICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IHduZC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKICAgICAgICAgICAgICAgICAgICBzLnRleHRDb250ZW50ID0gdGFyZ2V0LnRleHQoKTsKICAgICAgICAgICAgICAgICAgICB3bmQuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgJ1VzZXItQWdlbnQnOiAnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDUuMS4xOyBOZXh1cyA2IEJ1aWxkL0xZWjI4RSkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzQ4LjAuMjU2NC4yMyBNb2JpbGUgU2FmYXJpLzUzNy4zNicKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QocmVxKTsKICAgICAgICB9LAogICAgICAgIFVwZGF0ZVVybCh1cmwsIG5hbWUpIHsKICAgICAgICAgICAgbGV0IHMgPSBFeHRlbnNpb25fMTEuQ29udGFpbnModXJsLCAnPycpID8gJyYnIDogJz8nOwogICAgICAgICAgICBsZXQgX3VybCA9IGAke3VybH0ke3N9YXR0bmFtZT0ke2VuY29kZVVSSUNvbXBvbmVudChuYW1lKX0ke0V4dGVuc2lvbl8xMS5HZXRFeHRlbnNpb25Gcm9tVXJsKHVybCl9YDsKICAgICAgICAgICAgcnVsZS5kbExpbmsKICAgICAgICAgICAgICAgIC5hdHRyKCdocmVmJywgcnVsZS5iZC5HZW5lcmF0ZVVyaSh1cmwsIG5hbWUgKyBFeHRlbnNpb25fMTEuR2V0RXh0ZW5zaW9uRnJvbVVybCh1cmwpKSkKICAgICAgICAgICAgICAgIC5hdHRyKCd0aXRsZScsIGDkuIvovb06ICR7bmFtZX1gKTsKICAgICAgICAgICAgLy8gaW5mbyhg5o2V5o2J5Yiw5LiL6L295Zyw5Z2AOiAke3VybH1gKTsKICAgICAgICB9CiAgICB9OwogICAgZXhwb3J0cy5SdWxlcyA9IFtydWxlXTsKfSk7CmRlZmluZSgic2l0ZS9tdXNpYy5rdWdvdSIsIFsicmVxdWlyZSIsICJleHBvcnRzIiwgImhlbHBlci9Mb2dnZXIiLCAiaGVscGVyL0Rvd25sb2FkZXIiLCAiaGVscGVyL1NjcmlwdENvbmZpZyIsICJoZWxwZXIvRXh0ZW5zaW9uIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBMb2dnZXJfOCwgRG93bmxvYWRlcl84LCBTY3JpcHRDb25maWdfNCwgRXh0ZW5zaW9uXzEyKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgY29uc3QgS3Vnb3VEb3dubG9hZEZyb250ID0gJ2h0dHBzOi8vaml4dW5tb2UuZ2l0aHViLmlvL2N1d2NsNGMva3Vnb3UtZGwnOwogICAgdmFyIGFwcCA9IG51bGw7CiAgICB2YXIgcnVsZSA9IHsKICAgICAgICBpZDogJ211c2ljLmt1Z291JywKICAgICAgICBzc2w6IGZhbHNlLAogICAgICAgIG5hbWU6ICfphbfni5fpn7PkuZAnLAogICAgICAgIGhvc3Q6ICd3ZWIua3Vnb3UuY29tJywKICAgICAgICBpbmNsdWRlU3ViSG9zdDogZmFsc2UsCiAgICAgICAgc3ViTW9kdWxlOiBmYWxzZSwKICAgICAgICBoaWRlOiAnI2FkdiwgLmp4LWhpZGUnLAogICAgICAgIGNzczogYAouZGlhbG9nLXNoYWRvdyB7CglkaXNwbGF5OiBmbGV4OwoJanVzdGlmeS1jb250ZW50OiBjZW50ZXI7CglhbGlnbi1pdGVtczogY2VudGVyOwoJcG9zaXRpb246IGZpeGVkOwoJbGVmdDogMDsKCXRvcDogMDsKCWhlaWdodDogMTAwJTsKCXdpZHRoOiAxMDAlOwoJYmFja2dyb3VuZDogcmdiYSgwLDAsMCwuMyk7Cgl6LWluZGV4OiAxMDA7Cn0KCi5kaWFsb2ctY29udGFpbmVyIHsKCW1pbi13aWR0aDogY2FsYyg3NjhweCArIDJlbSk7CgltaW4taGVpZ2h0OiAyMGVtOwoJcGFkZGluZzogMWVtOwoJYmFja2dyb3VuZDogI2ZmZjsKCWJveC1zaGFkb3c6IDJweCAycHggMnB4ICM2NjY7Cglib3JkZXI6IDFweCBzb2xpZCByZ2JhKDYsNiw2LC4zKTsKCXBvc2l0aW9uOiByZWxhdGl2ZTsKCXBhZGRpbmctdG9wOiAyLjVlbTsKfQoKLmRpYWxvZy10aXRsZS1iYXIgewoJcG9zaXRpb246IGFic29sdXRlOwoJbGVmdDogMDsKCXRvcDogMDsKCXBhZGRpbmc6IC40ZW07Cgl3aWR0aDogY2FsYygxMDAlIC0gLjhlbSk7Cglib3JkZXItYm90dG9tOiAxcHggc29saWQgd2hpdGU7CgliYWNrZ3JvdW5kOiAjMDBBN0YyOwoJY29sb3I6IHdoaXRlOwp9CgouZGlhbG9nLXRpdGxlLWJ0bnMgewoJZmxvYXQ6IHJpZ2h0Owp9CgouZGlhbG9nLXRpdGxlLWJ0bnMgPiAuZGlhbG9nLWJhci1idG4gewoJd2lkdGg6IDFlbTsKCWhlaWdodDogMWVtOwoJYm9yZGVyOiAxcHggc29saWQgd2hpdGU7Cgl0ZXh0LWFsaWduOiBjZW50ZXI7CglsaW5lLWhlaWdodDogMS4yOwoJcGFkZGluZzogMCAuNWVtOwoJbWFyZ2luLWxlZnQ6IC41ZW07CgljdXJzb3I6IHBvaW50ZXI7Cn0KCi5kaWFsb2ctY29udGVudCBpZnJhbWUgewoJaGVpZ2h0OiAzMGVtOwoJd2lkdGg6IDEwMCU7Cn0KYCwKICAgICAgICBiZDogbnVsbCwKICAgICAgICBvblN0YXJ0KCkgewogICAgICAgICAgICBydWxlLmJkID0gbmV3IERvd25sb2FkZXJfOC5Eb3dubG9hZGVyKCk7CiAgICAgICAgfSwKICAgICAgICBvbkJvZHkoKSB7CiAgICAgICAgICAgIC8vIOeBq+eLkOeLuOacieWFvOWuuemXrumimCwg5b6F5L+uCiAgICAgICAgICAgIGlmICghRXh0ZW5zaW9uXzEyLkNvbnRhaW5zKG5hdmlnYXRvci51c2VyQWdlbnQsICdGaXJlZm94JykpCiAgICAgICAgICAgICAgICBydWxlLkJ1aWxkRGlhbG9nKCk7CiAgICAgICAgfSwKICAgICAgICBCdWlsZERpYWxvZygpIHsKICAgICAgICAgICAgbGV0IGRvd25sb2FkZXIgPSAkKGA8ZGl2IGlkPSJqaXh1bi1kbCI+Cgk8ZGl2IGNsYXNzPSJkaWFsb2ctc2hhZG93IiB2LWJpbmQ6Y2xhc3M9InsgJ2p4LWhpZGUnOiBoaWRlV2luZG93IH0iPgoJCTxkaXYgY2xhc3M9ImRpYWxvZy1jb250YWluZXIiPgoJCQk8ZGl2IGNsYXNzPSJkaWFsb2ctdGl0bGUtYmFyIj4KCQkJCeS4i+i9veeql+WPowoKCQkJCTxkaXYgY2xhc3M9ImRpYWxvZy10aXRsZS1idG5zIj4KCQkJCQk8c3BhbiBjbGFzcz0iZGlhbG9nLWJhci1idG4iIHYtb246Y2xpY2s9InRvZ2dsZUZyYW1lIj7nrqE8L3NwYW4+CgkJCQkJPHNwYW4gY2xhc3M9ImRpYWxvZy1iYXItYnRuIiB2LW9uOmNsaWNrPSJoaWRlIj7lhbM8L3NwYW4+CgkJCQk8L2Rpdj4KCQkJPC9kaXY+CgoJCQk8ZGl2IGNsYXNzPSJkaWFsb2ctY29udGVudCI+CgkJCQk8ZGl2IHYtYmluZDpjbGFzcz0ieyAnangtaGlkZSc6IGhpZGVNc2cgfSI+e3sgbXNnIH19PC9kaXY+CgkJCQk8aWZyYW1lIHYtZWw6ZnJhbWUtZGwtZGlhbG9nIHYtYmluZDpjbGFzcz0ieyAnangtaGlkZSc6IG1vZGUgIT0gMSB9IiBzcmM9IiR7S3Vnb3VEb3dubG9hZEZyb250fSI+PC9pZnJhbWU+CgkJCQk8aWZyYW1lIHYtZWw6ZnJhbWUtZGwtbWFuYWdlciB2LWJpbmQ6Y2xhc3M9InsgJ2p4LWhpZGUnOiBtb2RlICE9IDIgfSIgIHNyYz0iJHtLdWdvdURvd25sb2FkRnJvbnR9L2RsLmh0bWwiPjwvaWZyYW1lPgoJCQk8L2Rpdj4KCQk8L2Rpdj4KCTwvZGl2Pgo8L2Rpdj5gKTsKICAgICAgICAgICAgZG93bmxvYWRlci5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTsKICAgICAgICAgICAgLy8gUmVxdWlyZSBWdWVKUyBmcm9tIHJlc291cmNlLgogICAgICAgICAgICBsZXQgdnVlTG9hZGVyID0gbmV3IEZ1bmN0aW9uKCd3aW5kb3cnLCBHTV9nZXRSZXNvdXJjZVRleHQoJ1Z1ZUpzJykgKyAnXG47IHJldHVybiB3aW5kb3cuVnVlOycpOwogICAgICAgICAgICBsZXQgVnVlID0gdnVlTG9hZGVyKHVuc2FmZVdpbmRvdyk7CiAgICAgICAgICAgIGFwcCA9IG5ldyBWdWUoewogICAgICAgICAgICAgICAgZWw6IGRvd25sb2FkZXJbMF0sCiAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgbXNnOiAn5q2j5Zyo6I635Y+W55u45YWz5pWw5o2uLi4uJywKICAgICAgICAgICAgICAgICAgICBoaWRlTXNnOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBtb2RlOiAwLAogICAgICAgICAgICAgICAgICAgIGhpZGVXaW5kb3c6IGZhbHNlCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbWV0aG9kczogewogICAgICAgICAgICAgICAgICAgIGluaXQoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5oaWRlV2luZG93ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHRvZ2dsZUZyYW1lKCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXBwLm1vZGUgPT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLm1vZGUgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLm1vZGUgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBoaWRlKCkgewogICAgICAgICAgICAgICAgICAgICAgICBhcHAuaGlkZVdpbmRvdyA9ICFhcHAuaGlkZVdpbmRvdzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBhcHAuaW5pdCgpOwogICAgICAgICAgICB2YXIgYWN0aW9uRGxEaWFsb2cgPSBbJ3NldCcsICdjbGVhciddOwogICAgICAgICAgICB2YXIgYWN0aW9uRGxNYW5hZ2VyID0gWydhZGQnXTsKICAgICAgICAgICAgZnVuY3Rpb24gcG9zdChhY3Rpb24sIGRhdGEpIHsKICAgICAgICAgICAgICAgIHZhciBmcmFtZSA9IGFjdGlvbkRsRGlhbG9nLmluZGV4T2YoYWN0aW9uKSAhPSAtMSA/IGFwcC4kZWxzLmZyYW1lRGxEaWFsb2cgOiBhcHAuJGVscy5mcmFtZURsTWFuYWdlcjsKICAgICAgICAgICAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb24sCiAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGZyYW1lLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkobXNnKSwgJyonKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyDojrflj5bpn7PotKjkv6Hmga8KICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlRG93bmxvYWQoc29uZ3MpIHsKICAgICAgICAgICAgICAgIHBvc3QoJ2NsZWFyJyk7CiAgICAgICAgICAgICAgICBhcHAuaGlkZU1zZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgYXBwLm1vZGUgPSAwOyAvLyBoaWRlVGhlbQogICAgICAgICAgICAgICAgYXBwLmhpZGVXaW5kb3cgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHZhciByZXNvdXJjZSA9IEpTT04ucGFyc2Uoc29uZ3MpLm1hcCgoc29uZykgPT4gKHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYXVkaW8nLAogICAgICAgICAgICAgICAgICAgIGlkOiAwLAogICAgICAgICAgICAgICAgICAgIGhhc2g6IHNvbmcuSGFzaAogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgdmFyIHBheWxvYWQgPSB7CiAgICAgICAgICAgICAgICAgICAgInVzZXJpZCI6IDAsCiAgICAgICAgICAgICAgICAgICAgInRva2VuIjogIiIsCiAgICAgICAgICAgICAgICAgICAgInZpcCI6IDEsCiAgICAgICAgICAgICAgICAgICAgImJlaGF2aW9yIjogImRvd25sb2FkIiwKICAgICAgICAgICAgICAgICAgICAicmVsYXRlIjogMSwKICAgICAgICAgICAgICAgICAgICAicmVzb3VyY2UiOiByZXNvdXJjZSwKICAgICAgICAgICAgICAgICAgICAiYXBwaWQiOiAxMDAxLAogICAgICAgICAgICAgICAgICAgICJjbGllbnR2ZXIiOiAiODAzMSIsCiAgICAgICAgICAgICAgICAgICAgInNvdXJjZSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgIm1vZHVsZSI6ICIxIiwKICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiMCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJpZCI6IDAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICAgICAgICAgIHVybDogImh0dHA6Ly9tZWRpYS5zdG9yZS5rdWdvdS5jb20vdjEvZ2V0X3Jlc19wcml2aWxlZ2UiLAogICAgICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpLAogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICBwb3N0KCdzZXQnLCBKU09OLnBhcnNlKHJlc3BvbnNlLnJlc3BvbnNlVGV4dCkpOwogICAgICAgICAgICAgICAgICAgICAgICBhcHAuaGlkZU1zZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5tb2RlID0gMTsgLy8g5bGV546w5LiL6L29566h55CG55WM6Z2iCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBvbmVycm9yOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfmjqXlj6Pojrflj5blpLHotKUsIOivt+eojeWQjumHjeivlSEnKTsKICAgICAgICAgICAgICAgICAgICAgICAgYXBwLmhpZGVXaW5kb3cgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBsb29wZXIgPSBuZXcgSW50ZXJ2YWxMb29wKFtdLCBwcm9jX2hhc2gsIDUwMCk7CiAgICAgICAgICAgIGxvb3Blci5sb29wKCk7CiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwgb25NZXNzYWdlLCBmYWxzZSk7CiAgICAgICAgICAgIGZ1bmN0aW9uIG9uTWVzc2FnZShlKSB7CiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoZS5kYXRhKTsKICAgICAgICAgICAgICAgIGlmIChkYXRhLmFjdGlvbiA9PSAnY2FuY2VsJykgewogICAgICAgICAgICAgICAgICAgIGFwcC5oaWRlV2luZG93ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEuYWN0aW9uID09ICdkb3dubG9hZCcpIHsKICAgICAgICAgICAgICAgICAgICBhcHAubW9kZSA9IDI7CiAgICAgICAgICAgICAgICAgICAgbG9vcGVyLmFkZC5hcHBseShsb29wZXIsIGRhdGEuZGF0YSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBMb2dnZXJfOC5lcnJvcignVW5kZWZpbmVkIGFjdGlvbjogJyArIGRhdGEuYWN0aW9uKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVfZGwoc29uZykgewogICAgICAgICAgICAgICAgdmFyIGZpbGUgPSBzb25nLmZpbGVOYW1lICsgJy4nICsgc29uZy5leHROYW1lOwogICAgICAgICAgICAgICAgdmFyIHVybCA9IHNvbmcudXJsOwogICAgICAgICAgICAgICAgcG9zdCgnYWRkJywgc29uZyk7CiAgICAgICAgICAgICAgICBpZiAoU2NyaXB0Q29uZmlnXzQuQ29uZmlnLmRVcmlUeXBlID09IFNjcmlwdENvbmZpZ180LlVyaVR5cGUuQXJpYSkgewogICAgICAgICAgICAgICAgICAgIHJ1bGUuYmQuQWRkRG93bmxvYWQodXJsLCBmaWxlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBwcm9jX2hhc2gobmV4dCwgaGFzaCkgewogICAgICAgICAgICAgICAgaGFzaCA9IGhhc2gudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgIHZhciBrZXkgPSBDcnlwdG9KUy5NRDUoaGFzaCArICdrZ2Nsb3VkJykudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICAgICAgICAgIHVybDogJ2h0dHA6Ly90cmFja2VyY2RuLmt1Z291LmNvbS9pLz9jbWQ9NCZoYXNoPScgKyBoYXNoICsgJyZrZXk9JyArIGtleSArICcmcGlkPTEmZm9yY2VEb3duPTAmdmlwPTEnLAogICAgICAgICAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzb25nID0gSlNPTi5wYXJzZShyZXNwb25zZS5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVfZGwoc29uZyk7CiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIG9uZXJyb3I6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgTG9nZ2VyXzguZXJyb3IoJ0Vycm9yIHdoaWxlIGZldGNoaW5nIGRhdGEgZm9yICVzJywgaGFzaCk7CiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvKiDlr7zlh7rlh73mlbAgKi8KICAgICAgICAgICAgZXhwb3J0RnVuY3Rpb24oaGFuZGxlRG93bmxvYWQsIHVuc2FmZVdpbmRvdywgewogICAgICAgICAgICAgICAgZGVmaW5lQXM6ICJkbF9qaXh1biIKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHVuc2FmZUV4ZWMoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgd2luZG93LmRvd25Mb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5kbF9qaXh1bi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9OwogICAgZXhwb3J0cy5SdWxlcyA9IFtydWxlXTsKfSk7CmRlZmluZSgiUnVsZXMiLCBbInJlcXVpcmUiLCAiZXhwb3J0cyIsICJTaXRlUnVsZSIsICJzaXRlL0FBLkNvbmZpZyIsICJzaXRlL2RsLjEyMzU2NCIsICJzaXRlL2RsLjV4ZmlsZSIsICJzaXRlL2RsLmJhaWR1IiwgInNpdGUvZGwuaG93ZmlsZSIsICJzaXRlL2RsLmprcGFuIiwgInNpdGUvZGwubmFtaXBhbi5jYyIsICJzaXRlL2RsLnBocGRpc2siLCAic2l0ZS9kbC54dWl0ZSIsICJzaXRlL2RsLnlpbXVoZSIsICJzaXRlL2ZtLmRvdWJhbiIsICJzaXRlL2ZtLm1vZSIsICJzaXRlL211c2ljLjE2MyIsICJzaXRlL211c2ljLjF0aW5nIiwgInNpdGUvbXVzaWMuNTYiLCAic2l0ZS9tdXNpYy5lY2hvIiwgInNpdGUvbXVzaWMua3Vnb3UiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIFNpdGVSdWxlXzEsIGEsIGIsIGMsIGQsIGUsIGYsIGcsIGgsIGksIGosIGssIGwsIG0sIG4sIG8sIHAsIHEpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgICBhLlJ1bGVzLmZvckVhY2goU2l0ZVJ1bGVfMS5BZGQpOwogICAgYi5SdWxlcy5mb3JFYWNoKFNpdGVSdWxlXzEuQWRkKTsKICAgIGMuUnVsZXMuZm9yRWFjaChTaXRlUnVsZV8xLkFkZCk7CiAgICBkLlJ1bGVzLmZvckVhY2goU2l0ZVJ1bGVfMS5BZGQpOwogICAgZS5SdWxlcy5mb3JFYWNoKFNpdGVSdWxlXzEuQWRkKTsKICAgIGYuUnVsZXMuZm9yRWFjaChTaXRlUnVsZV8xLkFkZCk7CiAgICBnLlJ1bGVzLmZvckVhY2goU2l0ZVJ1bGVfMS5BZGQpOwogICAgaC5SdWxlcy5mb3JFYWNoKFNpdGVSdWxlXzEuQWRkKTsKICAgIGkuUnVsZXMuZm9yRWFjaChTaXRlUnVsZV8xLkFkZCk7CiAgICBqLlJ1bGVzLmZvckVhY2goU2l0ZVJ1bGVfMS5BZGQpOwogICAgay5SdWxlcy5mb3JFYWNoKFNpdGVSdWxlXzEuQWRkKTsKICAgIGwuUnVsZXMuZm9yRWFjaChTaXRlUnVsZV8xLkFkZCk7CiAgICBtLlJ1bGVzLmZvckVhY2goU2l0ZVJ1bGVfMS5BZGQpOwogICAgbi5SdWxlcy5mb3JFYWNoKFNpdGVSdWxlXzEuQWRkKTsKICAgIG8uUnVsZXMuZm9yRWFjaChTaXRlUnVsZV8xLkFkZCk7CiAgICBwLlJ1bGVzLmZvckVhY2goU2l0ZVJ1bGVfMS5BZGQpOwogICAgcS5SdWxlcy5mb3JFYWNoKFNpdGVSdWxlXzEuQWRkKTsKfSk7CmRlZmluZSgiRW50cnlQb2ludCIsIFsicmVxdWlyZSIsICJleHBvcnRzIiwgImhlbHBlci9TY3JpcHQiLCAiaGVscGVyL0NvbnN0YW50cyIsICJoZWxwZXIvU2NyaXB0Q29uZmlnIiwgImhlbHBlci9RdWVyeVN0cmluZyIsICJoZWxwZXIvTG9nZ2VyIiwgIlNpdGVSdWxlIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBTY3JpcHRfOSwgQ29uc3RhbnRzXzQsIFNjcmlwdENvbmZpZ181LCBRdWVyeVN0cmluZ18xLCBMb2dnZXJfOSwgU2l0ZVJ1bGVfMikgewogICAgInVzZSBzdHJpY3QiOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKICAgIHZhciAkX0dFVCA9IFF1ZXJ5U3RyaW5nXzEuUGFyc2UoQ29uc3RhbnRzXzQuY3VycmVudFVybCk7CiAgICBpZiAoU2NyaXB0Q29uZmlnXzUuQ29uZmlnLmJVc2VDdXN0b21SdWxlcykgewogICAgICAgIHZhciBjdXN0b21SdWxlcyA9IFtdOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGN1c3RvbVJ1bGVzID0gZXZhbChgWyR7U2NyaXB0Q29uZmlnXzUuQ29uZmlnLnNDdXN0b21SdWxlfV1gKTsKICAgICAgICAgICAgY3VzdG9tUnVsZXMuZm9yRWFjaCgocnVsZSkgPT4gewogICAgICAgICAgICAgICAgU2l0ZVJ1bGVfMi5TaXRlcy5wdXNoKHJ1bGUpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGV4KSB7CiAgICAgICAgICAgIExvZ2dlcl85LmVycm9yKGDop6PmnpDoh6rlrprkuYnop4TliJnlj5HnlJ/plJnor686ICR7ZXgubWVzc2FnZX1gKTsKICAgICAgICB9CiAgICB9CiAgICBHTV9yZWdpc3Rlck1lbnVDb21tYW5kKGDphY3nva4gJHtTY3JpcHRfOS5TY3JpcHQuTmFtZX1gLCAoKSA9PiB7CiAgICAgICAgR01fb3BlbkluVGFiKFNjcmlwdF85LlNjcmlwdC5Db25maWcsIGZhbHNlKTsKICAgIH0pOwogICAgU2l0ZVJ1bGVfMi5GaXJlRXZlbnQoJ3N0YXJ0Jyk7CiAgICAkKCgpID0+IHsKICAgICAgICBTaXRlUnVsZV8yLkZpcmVFdmVudCgnYm9keScpOwogICAgfSk7Cn0pOwo="},{"name":"Anti-Adblock Killer | Reek","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":true,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":["http://*/*","https://*/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"nextchecklist":"s1605165979642","nextcheckupdate":"s1605684379983"},"ts":1512981251993},"enabled":true,"position":5,"file_url":"https://raw.githubusercontent.com/reek/anti-adblock-killer/master/anti-adblock-killer.user.js","uuid":"ec693dec-33cc-4a51-8a5d-0325972c723e","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgQW50aS1BZGJsb2NrIEtpbGxlciB8IFJlZWsKLy8gQG5hbWVzcGFjZSBodHRwczovL3VzZXJzY3JpcHRzLm9yZy9zY3JpcHRzL3Nob3cvMTU1ODQwCi8vIEBkZXNjcmlwdGlvbiBIZWxwcyB5b3Uga2VlcCB5b3VyIEFkLUJsb2NrZXIgYWN0aXZlLCB3aGVuIHlvdSB2aXNpdCBhIHdlYnNpdGUgYW5kIGl0IGFza3MgeW91IHRvIGRpc2FibGUuCi8vIEBhdXRob3IgUmVlayB8IHJlZWtzaXRlLmNvbQovLyBAdmVyc2lvbiAxMC4wCi8vIEBlbmNvZGluZyB1dGYtOAovLyBAbGljZW5zZSBodHRwczovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktc2EvNC4wLwovLyBAaWNvbiBodHRwczovL3Jhdy5naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9tYXN0ZXIvYW50aS1hZGJsb2NrLWtpbGxlci1pY29uLnBuZwovLyBAaG9tZXBhZ2UgaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci8KLy8gQHR3aXR0ZXJVUkwgaHR0cHM6Ly90d2l0dGVyLmNvbS9hbnRpYWRia2lsbGVyCi8vIEBjb250YWN0VVJMIGh0dHBzOi8vcmVlay5naXRodWIuaW8vYW50aS1hZGJsb2NrLWtpbGxlci8jY29udGFjdAovLyBAc3VwcG9ydFVSTCBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3VlcwovLyBAY29udHJpYnV0aW9uVVJMIGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIjZG9uYXRlCi8vIEB1cGRhdGVVUkwgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9tYXN0ZXIvYW50aS1hZGJsb2NrLWtpbGxlci51c2VyLmpzCi8vIEBkb3dubG9hZFVSTCBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL21hc3Rlci9hbnRpLWFkYmxvY2sta2lsbGVyLnVzZXIuanMKLy8gQGluY2x1ZGUgaHR0cDovLyovKgovLyBAaW5jbHVkZSBodHRwczovLyovKgovLyBAZ3JhbnQgdW5zYWZlV2luZG93Ci8vIEBncmFudCBHTV9hZGRTdHlsZQovLyBAZ3JhbnQgR01fZ2V0VmFsdWUKLy8gQGdyYW50IEdNX3NldFZhbHVlCi8vIEBncmFudCBHTV94bWxodHRwUmVxdWVzdAovLyBAZ3JhbnQgR01fcmVnaXN0ZXJNZW51Q29tbWFuZAovLyBAZ3JhbnQgR01fZGVsZXRlVmFsdWUKLy8gQGdyYW50IEdNX2xpc3RWYWx1ZXMKLy8gQGdyYW50IEdNX2dldFJlc291cmNlVGV4dAovLyBAZ3JhbnQgR01fZ2V0UmVzb3VyY2VVUkwKLy8gQGdyYW50IEdNX2xvZwovLyBAZ3JhbnQgR01fb3BlbkluVGFiCi8vIEBncmFudCBHTV9zZXRDbGlwYm9hcmQKLy8gQGdyYW50IEdNX2luZm8KLy8gQGdyYW50IEdNX2dldE1ldGFkYXRhCi8vIEBydW4tYXQgZG9jdW1lbnQtc3RhcnQKLy8gQGNvbm5lY3QgKgovLyA9PS9Vc2VyU2NyaXB0PT0KLypqc2hpbnQgZXZpbDp0cnVlIG5ld2NhcDpmYWxzZSovCi8qZ2xvYmFsIHVuc2FmZVdpbmRvdywgR01fYWRkU3R5bGUsIEdNX2dldFZhbHVlLCBHTV9zZXRWYWx1ZSwgR01feG1saHR0cFJlcXVlc3QsIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQsIEdNX2RlbGV0ZVZhbHVlLCBHTV9saXN0VmFsdWVzLCBHTV9nZXRSZXNvdXJjZVRleHQsIEdNX2dldFJlc291cmNlVVJMLCBHTV9sb2csIEdNX29wZW5JblRhYiwgR01fc2V0Q2xpcGJvYXJkLCBHTV9pbmZvLCBHTV9nZXRNZXRhZGF0YSwgJCwgZG9jdW1lbnQsIGNvbnNvbGUsIGxvY2F0aW9uLCBzZXRJbnRlcnZhbCwgc2V0VGltZW91dCwgY2xlYXJJbnRlcnZhbCovCi8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICBUaGFua3MKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgogIERvbm9yczogTS4gSG93YXJkLCBTaHVuam91LCBDaGFybWluZSwgS2llcmVrOTMsIEcuIEJhcm5hcmQsIEguIFlvdW5nLCBTZWluaG9yOSwgSW1HbG9kYXIsIEl2YW5vc2V2aXRjaCwgSG9tZURpcG8sIFIuIE1hcnRpbiwgRHJGaVosIFRpcHB5LCBCLiBSb2huZXIsIFAuIEtvemljYSwgTS4gUGF0ZWwsIFc0cmVsbCwgVHNjaGVja29mZiwgQWRCbG9jayBQb2xza2EsIEFWRU5JUiBJTlRFUk5FVCwgY29vbE5BTywgQmVuLCBKLiBQYXJrLCBDLiBZb3VuZywgSi4gQm91LCBNLiBDYW5vLCBKLiBKdW5nLCBBLiBTb25pbm8sIEouIExpdHRlbiwgTS4gU2NocnVtcGYsIEcuIFBlcGUsIEEuIFRydWZhbm92LCBSLiBQYWxtZXIsIEouIFJhdXRpYWluZW4sIFMuIEJseXN0b25lLCBNLiBTaWx2ZWlyYSwgSy4gTWFjQXJ0aHVyLCBNLiBJdmFub3YsIEEuIFNjaG1pZHQsIEEuIFdhYWdlLCBGLiBUaXNtZXIsIFMuIEVobmVydCwgSi4gQ29ycHVzLCBKLiBEbHVob3MsIE1ha2xlbWVueiwgU3Ryb2JlbGl4LCBNb2RlbGxwaWxvdC5FVSwgRS4gQmVuZWRldHRpLCBWLiBWZW5kaXR0aSwgU2hha29zLCBBLiBFbGlhc29uLCBBLiBTYWxvcmFudGEsIFMuIEdlaWdlciwgQS4gT3R0ZXJsb28sIE0uIENvcHBlbiwgUy4gRmlzY2hlciwgSC4gQmVja2VyLCBELiBBY2tlcm1hbiwgUy4gUGl0c2NoLCBLLiBQZXJ0Y2hlY2ssIFMuIEFiZWwsIEsuIE8nQ29ubm9yLCBCLiBPYnJpZW4sIFMuIFZvZ2xlciwgUy4gR29lYmwsIEEuIEJpYXIsIFMuIFNjb3R0LCBCYXNzbW9iaWxlLm9yZywgUy4gR3Jvw59lLCBNLiBQZW90LCBSLiBDaGFuIEJhbGFtLCBMLiBCb25kLUtlbm5lZHksIFIuIEVtb25kLCBBLiBQYXZsb3YsIFcuIFRyYWNleSwgQS4gU2VyZ2V5LCBSLiBMw7NwZXogTMOzcGV6LCBSLiBSZWRkeSBLYXNpcmVkZHksIEEuIE1vdWplZXIsIE0uIEJldHosIE0uIExlZsOodnJlLCBSLiBNY0N1cmR5LCBMUiBHZWVrcywgTS4gQmVhdXJlZ2FyZCwgQ2FzcGVyVGVjaCBMdGQsIE0uIER1ZGFzLCBTLiBTY2hhcmYsIFMuIFByb2tob3JvdiwgSy4gUGFwYWxpYXMsIEouIFdvam5vd3NraSwgQi4gQ3VydGlzLCBELiBMYXdyZW5jZSwgRC4gSGUsIE4uIEtlbHNhbGwsIElkb2dld2FsbGV0LCBKLiBTcGF1bGRpbmcsIFMuIExhZm9uLCBNYXQsIEguIFJvYmVydHMsIEMuIEhlZGx1bmQsIEouIEhhd2tpbnMsIEouIEFuZGVyc2VuLCBNLiBCam9ya3N0ZW4sIEIuIFdvbGZlIElJSSwgVC4gWW9jb20sIMWgLiBJbnRhcywgUy4gTW9lbmljaCwgSi4gQ2hhbmcsIEMuIE11bmssIEEuIE5hcnV0YSwg0JEuINCc0LjRhdCw0LjQuywgSi4gQmVueiwgRi4gU2xvb3QsIEouIENyZWVkLCBNLiBHaWxsYW0sIEMuIExlaWNodCwgQS4gR25hbmEsIFMuIFN1bmRhcmFtLCBBLiBLb2xsZXIsIE0uIEtvdGxhciwgUy4gQWJlbCwgVC4gRmxhbmFnYW4sIE0uIEFyZHVpbmksIFAuIFN0YWNraG91c2UsIEIuIE9saXZlciwgTS4gSm9obnNvbiwgUi4gTWFubmVydCwgRS4gU2lvcmRpYQoKICBDb2xsYWJvcmF0b3JzOiBJbmZpbml0eUNvZGluZywgQ291Y2h5LCBEaW5kb2csIEZsb3hmbG9iLCBVIEJsZXNzLCBXYXRpbGluLCBAcHJkb25haHVlLCBIb3NoaWUsIDNsZjNuTGkzZCwgQWxleG8sIENyaXRzLCBOb25hbWUxMjAsIENydDMyLCBKaXh1bk1vZSwgQXRob3JjaXMsIEtpbGxlcmJhZGdlciwgU01lZDc5LCBBbGV4YW5kZXIyNTUsIEFub25zdWJtaXR0ZXIsIFJhcG9yTG9McHJvLCBNYXluYWswMCwgUm9ib3RleCwgVmluY3R1eCwgQmxhaHgsIE1hamtpSVQsIEY0eiwgQW5nZWxzbCwgTWlraGFlbGssIE1hcmVrLCBIYW1zdGVyYmFja2UsIEdvcmhpbGwsIEhhY2tlcjk5OSwgeHhjcml0aWN4eCwgU2tyNHRjaEdyM2F6eU1vbmtpQmFsbGxsbGxaenp6LCBHaXdheXVtZSwgTXJTaGVybG9ja0hvbG1lcywgeERhcmtBUkcsIE5vYWhwNzgsIE1hcHgtCgogIFVzZXJzOiBUaGFuayB5b3UgdG8gYWxsIHRob3NlIHdobyB1c2UgQW50aSBBZGJsb2NrIEtpbGxlciwgd2hvIHJlcG9ydCBwcm9ibGVtcywgd2hvIHdyaXRlIHRoZSByZXZpZXcsIHdoaWNoIGFkZCB0byB0aGVpciBmYXZvcml0ZXMsIG1ha2luZyBkb25hdGlvbnMsIHdoaWNoIHN1cHBvcnQgdGhlIHByb2plY3QgYW5kIGhlbHAgaW4gaXRzIGRldmVsb3BtZW50IG9yIHByb21vdGUuCgo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgTWlycm9ycwo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgogIEdpdGh1YjogaHR0cDovL3Rpbnl1cmwuY29tL21jcmEzZG4KICBHcmVhc3lmb3JrOiBodHRwOi8vdGlueXVybC5jb20vcGJiZG5oNgogIE9wZW51c2VyanM6IGh0dHA6Ly90aW55dXJsLmNvbS9ubnFqZTMyCiAgTW9ua2V5R3V0czogaHR0cDovL3Rpbnl1cmwuY29tL2thNWZjcW0KICBVc2Vyc2NyaXB0czogaHR0cDovL3Rpbnl1cmwuY29tL3E4eGNlamwKCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICBEb2N1bWVudGF0aW9uCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCiAgR3JlYXNlbW9ua2V5OiBodHRwOi8vdGlueXVybC5jb20veWVlZm5qNQogIFNjcmlwdGlzaDogaHR0cDovL3Rpbnl1cmwuY29tL2NuZDlua2QKICBUYW1wZXJtb25rZXk6IGh0dHA6Ly90aW55dXJsLmNvbS9wZHl0ZmRlCiAgVmlvbGVudG1vbmtleTogaHR0cDovL3Rpbnl1cmwuY29tL24zNHduNmoKICBOaW5qYUtpdDogaHR0cDovL3Rpbnl1cmwuY29tL3Bra205dWcKCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICBTY3JpcHQKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8KCihmdW5jdGlvbiAod2luZG93KSB7CiAgInVzZSBzdHJpY3QiOwogIAogIHZhciBBYWsgPSB7CiAgICBuYW1lIDogJ0FudGktQWRibG9jayBLaWxsZXInLAogICAgdmVyc2lvbiA6ICcxMC4wJywKICAgIHNjcmlwdGlkIDogJ2dKV0VwMHZCJywKICAgIGhvbWVVUkwgOiAnaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci8nLAogICAgY2hhbmdlbG9nVVJMIDogJ2h0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIjY2hhbmdlbG9nJywKICAgIGRvbmF0ZVVSTCA6ICdodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyI2RvbmF0ZScsCiAgICBmZWF0dXJlc1VSTCA6ICdodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyI2ZlYXR1cmVzJywKICAgIHJlcG9ydFVSTCA6ICdodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL3dpa2kvUmVwb3J0LUd1aWRlJywKICAgIGNvbnRhY3RVUkwgOiAnaHR0cHM6Ly9yZWVrLmdpdGh1Yi5pby9hbnRpLWFkYmxvY2sta2lsbGVyLyNjb250YWN0JywKICAgIHNldHRpbmdzVVJMIDogJ2h0dHBzOi8vcmVlay5naXRodWIuaW8vYW50aS1hZGJsb2NrLWtpbGxlci8jc2V0dGluZ3MnLAogICAgdHdpdHRlclVSTCA6ICdodHRwczovL3R3aXR0ZXIuY29tL2FudGlhZGJraWxsZXInLAogICAgZG93bmxvYWRVUkwgOiAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9tYXN0ZXIvYW50aS1hZGJsb2NrLWtpbGxlci51c2VyLmpzJywKICAgIHN1YnNjcmliZVVSTCA6ICdodHRwczovL3JlZWsuZ2l0aHViLmlvL2FudGktYWRibG9jay1raWxsZXIvI2ZpbHRlcmxpc3QnLAogICAgbGlzdFVSTCA6ICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL21hc3Rlci9hbnRpLWFkYmxvY2sta2lsbGVyLWZpbHRlcnMudHh0IiwKICAgIG5hdGl2ZVVSTCA6ICdodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL3dpa2kvTmF0aXZlLU1vZGUnLAogICAgaWNvblVSTCA6ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL21hc3Rlci9hbnRpLWFkYmxvY2sta2lsbGVyLWljb24ucG5nJywKICAgIGltZ0JhaXQgOiAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFDQUFBQUFnQ0FRQUFBRFpjN0ovQUFBQUdrbEVRVlI0Mm1OZzBHQVlCYU5nRkl5Q1VUQUtSc0VvUUFZQVROOEFLWU5aL3g0QUFBQUFTVVZPUks1Q1lJST0nLAogICAgaW5pdGlhbGl6ZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgQWFrLnJlZ2lzdGVyU2V0dGluZ3MoKTsgLy8gcmVnaXN0ZXJpbmcgeW91ciBzZXR0aW5ncy4KICAgICAgQWFrLnJlZ2lzdGVyQ29uc29sZSgpOyAvLyByZWdpc3RlcmluZyBjdXN0b216ZWQgY29uc29sZS4KICAgICAgQWFrLnJlZ2lzdGVyQ29tbWFuZHMoKTsgLy8gYWRkIGNvbW1hbmRzIHRvIG1lbnUKICAgICAgQWFrLmNoZWNrVXBkYXRlKHRydWUpOyAvLyBjaGVjayBpZiBBYWtTY3JpcHQgaXMgdXAgdG8gZGF0ZS4KICAgICAgQWFrLmNoZWNrTGlzdCgpOyAvLyBjaGVjayBpZiBBYWtMaXN0IGlzIGVuYWJsZWQuCiAgICAgIEFhay5ibG9ja0RldGVjdCgpOyAvLyBkZXRlY3QgYW5kIGtpbGwgYW50aS1hZGJsb2Nrcy4KICAgIH0sCiAgICBhYWJzIDoge30sCiAgICBvcHRzIDoge30sCiAgICBvcHRpb25zIDogewogICAgICBhdXRvUGxheSA6IHsKICAgICAgICBncm91cCA6ICdnZW5lcmFsJywKICAgICAgICB0eXBlIDogJ2NoZWNrYm94JywKICAgICAgICB2YWx1ZSA6IGZhbHNlLAogICAgICAgIGxhYmVsIDogJ1BsYXkgdmlkZW8gYXV0b21hdGljYWxseS4gKicsCiAgICAgICAgaW5mbyA6ICcnCiAgICAgIH0sCiAgICAgIHZpZGVvSEQgOiB7CiAgICAgICAgZ3JvdXAgOiAnZ2VuZXJhbCcsCiAgICAgICAgdHlwZSA6ICdjaGVja2JveCcsCiAgICAgICAgdmFsdWUgOiBmYWxzZSwKICAgICAgICBsYWJlbCA6ICdQbGF5IHZpZGVvIGluIEhEIHF1YWxpdHkuICoqJywKICAgICAgICBpbmZvIDogJycKICAgICAgfSwKICAgICAgZm9yY2VWTEMgOiB7CiAgICAgICAgZ3JvdXAgOiAnZ2VuZXJhbCcsCiAgICAgICAgdHlwZSA6ICdjaGVja2JveCcsCiAgICAgICAgdmFsdWUgOiBmYWxzZSwKICAgICAgICBsYWJlbCA6ICdQbGF5IHZpZGVvIHdpdGggVkxDIHBsdWdpbi4gKicsCiAgICAgICAgaW5mbyA6ICcnCiAgICAgIH0sCiAgICAgIGNoZWNrTGlzdCA6IHsKICAgICAgICBncm91cCA6ICdnZW5lcmFsJywKICAgICAgICB0eXBlIDogJ2NoZWNrYm94JywKICAgICAgICB2YWx1ZSA6IHRydWUsCiAgICAgICAgbGFiZWwgOiAnQ2hlY2sgQWFrTGlzdCBzdWJzY3JpcHRpb24uJywKICAgICAgICBpbmZvIDogJycKICAgICAgfSwKICAgICAgY2hlY2tVcGRhdGUgOiB7CiAgICAgICAgZ3JvdXAgOiAnZ2VuZXJhbCcsCiAgICAgICAgdHlwZSA6ICdjaGVja2JveCcsCiAgICAgICAgdmFsdWUgOiB0cnVlLAogICAgICAgIGxhYmVsIDogJ0NoZWNrIG5ld2VyIEFha1NjcmlwdCB2ZXJzaW9uLicsCiAgICAgICAgaW5mbyA6ICcnCiAgICAgIH0sCiAgICAgIGRlYnVnIDogewogICAgICAgIGdyb3VwIDogJ2RlYnVnJywKICAgICAgICB0eXBlIDogJ2NoZWNrYm94JywKICAgICAgICB2YWx1ZSA6IGZhbHNlLAogICAgICAgIGxhYmVsIDogJ0VuYWJsZSBMb2dzLicsCiAgICAgICAgaW5mbyA6ICcnCiAgICAgIH0sCiAgICAgIGxvZ0luc2VydGVkTm9kZXMgOiB7CiAgICAgICAgZ3JvdXAgOiAnZGVidWcnLAogICAgICAgIHR5cGUgOiAnY2hlY2tib3gnLAogICAgICAgIHZhbHVlIDogZmFsc2UsCiAgICAgICAgbGFiZWwgOiAnTG9nIGluc2VydGVkIG5vZGVzLicsCiAgICAgICAgaW5mbyA6ICcnCiAgICAgIH0sCiAgICAgIGxvZ1JlbW92ZWROb2RlcyA6IHsKICAgICAgICBncm91cCA6ICdkZWJ1ZycsCiAgICAgICAgdHlwZSA6ICdjaGVja2JveCcsCiAgICAgICAgdmFsdWUgOiBmYWxzZSwKICAgICAgICBsYWJlbCA6ICdMb2cgcmVtb3ZlZCBub2Rlcy4nLAogICAgICAgIGluZm8gOiAnJwogICAgICB9LAogICAgICBsb2dFeGNsdWRlZCA6IHsKICAgICAgICBncm91cCA6ICdkZWJ1ZycsCiAgICAgICAgdHlwZSA6ICdjaGVja2JveCcsCiAgICAgICAgdmFsdWUgOiBmYWxzZSwKICAgICAgICBsYWJlbCA6ICdMb2cgZXhjbHVkZXMgZG9tYWlucy4nLAogICAgICAgIGluZm8gOiAnJwogICAgICB9LAogICAgICBsb2dYaHIgOiB7CiAgICAgICAgZ3JvdXAgOiAnZGVidWcnLAogICAgICAgIHR5cGUgOiAnY2hlY2tib3gnLAogICAgICAgIHZhbHVlIDogZmFsc2UsCiAgICAgICAgbGFiZWwgOiAnTG9nIEhUVFAgcmVxdWVzdHMnLAogICAgICAgIGluZm8gOiAnJwogICAgICB9LAogICAgICBsb2dQbGF5ZXIgOiB7CiAgICAgICAgZ3JvdXAgOiAnZGVidWcnLAogICAgICAgIHR5cGUgOiAnY2hlY2tib3gnLAogICAgICAgIHZhbHVlIDogZmFsc2UsCiAgICAgICAgbGFiZWwgOiAnTG9nIHBsYXllciBpbnN0YW5jZXMuJywKICAgICAgICBpbmZvIDogJycKICAgICAgfSwKICAgICAgbG9nSW50ZXJjZXB0ZWRTY3JpcHRzIDogewogICAgICAgIGdyb3VwIDogJ2RlYnVnJywKICAgICAgICB0eXBlIDogJ2NoZWNrYm94JywKICAgICAgICB2YWx1ZSA6IGZhbHNlLAogICAgICAgIGxhYmVsIDogJ0xvZyBpbnRlcmNlcHRlZCBzY3JpcHRzLicsCiAgICAgICAgaW5mbyA6ICcnCiAgICAgIH0sCiAgICAgIGxvZ0RldGVjdGVkIDogewogICAgICAgIGdyb3VwIDogJ2RlYnVnJywKICAgICAgICB0eXBlIDogJ2NoZWNrYm94JywKICAgICAgICB2YWx1ZSA6IGZhbHNlLAogICAgICAgIGxhYmVsIDogJ0xvZyBkZXRlY3RlZCBhbnRpLWFkYmxvY2tzLicsCiAgICAgICAgaW5mbyA6ICcnCiAgICAgIH0KICAgIH0sCiAgICByZWdpc3RlclNldHRpbmdzIDogZnVuY3Rpb24gKCkgewogICAgICBmb3IgKHZhciBvcHROYW1lIGluIEFhay5vcHRpb25zKSB7CiAgICAgICAgaWYgKEFhay5vcHRpb25zLmhhc093blByb3BlcnR5KG9wdE5hbWUpKQogICAgICAgICAgQWFrLm9wdHNbb3B0TmFtZV0gPSBBYWsuZ2V0VmFsdWUob3B0TmFtZSkgIT09IG51bGwgPyBBYWsuZ2V0VmFsdWUob3B0TmFtZSkgOiBBYWsub3B0aW9uc1tvcHROYW1lXS52YWx1ZTsKICAgICAgfQogICAgfSwKICAgIGNvbW1hbmRzIDogW3sKICAgICAgICBjYXB0aW9uIDogJ0hvbWVwYWdlJywKICAgICAgICBleGVjdXRlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmdvKEFhay5ob21lVVJMKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBjYXB0aW9uIDogJ1NldHRpbmdzJywKICAgICAgICBleGVjdXRlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmdvKEFhay5zZXR0aW5nc1VSTCk7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAgY2FwdGlvbiA6ICdVcGRhdGUnLAogICAgICAgIGV4ZWN1dGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuY2hlY2tVcGRhdGUoKTsKICAgICAgICB9CiAgICAgIH0KICAgIF0sCiAgICBhZGRDb21tYW5kcyA6IGZ1bmN0aW9uIChjbWQpIHsKICAgICAgaWYgKEFhay51c2VHTSAmJiBBYWsuaXNUb3BmcmFtZSAmJiB0eXBlb2YgR01fcmVnaXN0ZXJNZW51Q29tbWFuZCAhPSAndW5kZWZpbmVkJykgewogICAgICAgIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQoW0Fhay5uYW1lLCBBYWsuZ2V0VmVyc2lvbigpLCBjbWQuY2FwdGlvbl0uam9pbignICcpLCBjbWQuZXhlY3V0ZSk7CiAgICAgIH0KICAgIH0sCiAgICByZWdpc3RlckNvbW1hbmRzIDogZnVuY3Rpb24gKCkgewogICAgICBBYWsucmVhZHkoZnVuY3Rpb24gKCkgewogICAgICAgIC8vIFNjcmlwdGlzaAogICAgICAgIC8vIG5vdGU6IE5vIG1lbnUgY29tbWFuZCBpcyBjcmVhdGVkIHdoZW4gdGhlIHVzZXIgc2NyaXB0IGlzIHJ1biBpbiBhIGlmcmFtZSB3aW5kb3cuCiAgICAgICAgLy8gZG9jOiBodHRwOi8vdGlueXVybC5jb20va3Z2djd5dAogICAgICAgIEFhay5jb21tYW5kcy5mb3JFYWNoKGZ1bmN0aW9uIChjbWQpIHsKICAgICAgICAgIEFhay5hZGRDb21tYW5kcyhjbWQpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICByZWdpc3RlckNvbnNvbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMubG9nID0gQWFrLm9wdHMuZGVidWcgPyBjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpIDogZnVuY3Rpb24gKCkge307CiAgICAgIHRoaXMuaW5mbyA9IEFhay5vcHRzLmRlYnVnID8gY29uc29sZS5pbmZvLmJpbmQoY29uc29sZSkgOiBmdW5jdGlvbiAoKSB7fTsKICAgICAgdGhpcy5lcnJvciA9IEFhay5vcHRzLmRlYnVnID8gY29uc29sZS5lcnJvci5iaW5kKGNvbnNvbGUpIDogZnVuY3Rpb24gKCkge307CiAgICAgIHRoaXMud2FybiA9IEFhay5vcHRzLmRlYnVnID8gY29uc29sZS53YXJuLmJpbmQoY29uc29sZSkgOiBmdW5jdGlvbiAoKSB7fTsKICAgIH0sCiAgICBpc1RvcGZyYW1lIDogKHdpbmRvdy5wYXJlbnQgPT0gd2luZG93LnNlbGYpLAogICAgdXcgOiB0eXBlb2YgdW5zYWZlV2luZG93ICE9ICd1bmRlZmluZWQnID8gdW5zYWZlV2luZG93IDogd2luZG93LAogICAgdXNlR00gOiB0eXBlb2YgR01fZ2V0VmFsdWUgIT0gJ3VuZGVmaW5lZCcsCiAgICBhcGlHTSA6IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKEFhay5pc1RvcGZyYW1lKSB7CiAgICAgICAgLy8gR00gQVBJIC0gaHR0cDovL3Rpbnl1cmwuY29tL3llZWZuajUKICAgICAgICByZXR1cm4gewogICAgICAgICAgR01feG1saHR0cFJlcXVlc3QgOiB0eXBlb2YgR01feG1saHR0cFJlcXVlc3QgIT0gJ3VuZGVmaW5lZCcsCiAgICAgICAgICBHTV9zZXRWYWx1ZSA6IHR5cGVvZiBHTV9zZXRWYWx1ZSAhPSAndW5kZWZpbmVkJywKICAgICAgICAgIEdNX2dldFZhbHVlIDogdHlwZW9mIEdNX2dldFZhbHVlICE9ICd1bmRlZmluZWQnLAogICAgICAgICAgR01fYWRkU3R5bGUgOiB0eXBlb2YgR01fYWRkU3R5bGUgIT0gJ3VuZGVmaW5lZCcsCiAgICAgICAgICBHTV9yZWdpc3Rlck1lbnVDb21tYW5kIDogdHlwZW9mIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQgIT0gJ3VuZGVmaW5lZCcsCiAgICAgICAgICBHTV9pbmZvIDogdHlwZW9mIEdNX2luZm8gIT0gJ3VuZGVmaW5lZCcsCiAgICAgICAgICBHTV9nZXRNZXRhZGF0YSA6IHR5cGVvZiBHTV9nZXRNZXRhZGF0YSAhPSAndW5kZWZpbmVkJywKICAgICAgICAgIEdNX2RlbGV0ZVZhbHVlIDogdHlwZW9mIEdNX2RlbGV0ZVZhbHVlICE9ICd1bmRlZmluZWQnLAogICAgICAgICAgR01fbGlzdFZhbHVlcyA6IHR5cGVvZiBHTV9saXN0VmFsdWVzICE9ICd1bmRlZmluZWQnLAogICAgICAgICAgR01fZ2V0UmVzb3VyY2VUZXh0IDogdHlwZW9mIEdNX2dldFJlc291cmNlVGV4dCAhPSAndW5kZWZpbmVkJywKICAgICAgICAgIEdNX2dldFJlc291cmNlVVJMIDogdHlwZW9mIEdNX2dldFJlc291cmNlVVJMICE9ICd1bmRlZmluZWQnLAogICAgICAgICAgR01fbG9nIDogdHlwZW9mIEdNX2xvZyAhPSAndW5kZWZpbmVkJywKICAgICAgICAgIEdNX29wZW5JblRhYiA6IHR5cGVvZiBHTV9vcGVuSW5UYWIgIT0gJ3VuZGVmaW5lZCcsCiAgICAgICAgICBHTV9zZXRDbGlwYm9hcmQgOiB0eXBlb2YgR01fc2V0Q2xpcGJvYXJkICE9ICd1bmRlZmluZWQnCiAgICAgICAgfTsKICAgICAgfQogICAgfSwKICAgIGdvIDogZnVuY3Rpb24gKHVybCkgewogICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybDsKICAgIH0sCiAgICByZWZyZXNoIDogZnVuY3Rpb24gKCkgewogICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmOwogICAgfSwKICAgIHJlbG9hZCA6IGZ1bmN0aW9uICgpIHsKICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCh0cnVlKTsKICAgIH0sCiAgICBjb250YWlucyA6IGZ1bmN0aW9uIChzdHJpbmcsIHNlYXJjaCkgewogICAgICByZXR1cm4gc3RyaW5nLmluZGV4T2Yoc2VhcmNoKSAhPSAtMTsKICAgIH0sCiAgICBnZXRCcm93c2VyIDogZnVuY3Rpb24gKCkgewogICAgICB2YXIgdWEgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDsKICAgICAgaWYgKEFhay5jb250YWlucyh1YSwgJ0ZpcmVmb3gnKSkgewogICAgICAgIHJldHVybiAiRmlyZWZveCI7CiAgICAgIH0gZWxzZSBpZiAoQWFrLmNvbnRhaW5zKHVhLCAnU2xlaXBuaXInKSkgewogICAgICAgIHJldHVybiAiU2xlaXBuaXIiOyAvLyBNb2JpbGUKICAgICAgfSBlbHNlIGlmIChBYWsuY29udGFpbnModWEsICdVQ0Jyb3dzZXInKSkgewogICAgICAgIHJldHVybiAiVUNCcm93c2VyIjsgLy8gTW9iaWxlCiAgICAgIH0gZWxzZSBpZiAoQWFrLmNvbnRhaW5zKHVhLCAnRG9sZmluJykpIHsKICAgICAgICByZXR1cm4gIkRvbHBoaW4iOyAvLyBNb2JpbGUKICAgICAgfSBlbHNlIGlmIChBYWsuY29udGFpbnModWEsICdNU0lFJykpIHsKICAgICAgICByZXR1cm4gIkludGVybmV0RXhwbG9yZXIiOwogICAgICB9IGVsc2UgaWYgKEFhay5jb250YWlucyh1YSwgJ01pZG9yaScpKSB7CiAgICAgICAgcmV0dXJuICJNaWRvcmkiOwogICAgICB9IGVsc2UgaWYgKEFhay5jb250YWlucyh1YSwgJ09wZXJhJykgfHwgQWFrLmNvbnRhaW5zKHVhLCAnT1BSJykpIHsKICAgICAgICByZXR1cm4gIk9wZXJhIjsKICAgICAgfSBlbHNlIGlmIChBYWsuY29udGFpbnModWEsICdDaHJvbWUnKSkgewogICAgICAgIHJldHVybiAiQ2hyb21lIjsKICAgICAgfSBlbHNlIGlmIChBYWsuY29udGFpbnModWEsICdTYWZhcmknKSkgewogICAgICAgIHJldHVybiAiU2FmYXJpIjsKICAgICAgfSBlbHNlIGlmIChBYWsuY29udGFpbnModWEsICdLb25xdWVyb3InKSkgewogICAgICAgIHJldHVybiAiS29ucXVlcm9yIjsKICAgICAgfSBlbHNlIGlmIChBYWsuY29udGFpbnModWEsICdQYWxlTW9vbicpKSB7CiAgICAgICAgcmV0dXJuICJQYWxlTW9vbiI7IC8vIGZvcmsgZmlyZWZveAogICAgICB9IGVsc2UgaWYgKEFhay5jb250YWlucyh1YSwgJ0N5YmVyZm94JykpIHsKICAgICAgICByZXR1cm4gIkN5YmVyZm94IjsgLy8gZm9yayBmaXJlZm94CiAgICAgIH0gZWxzZSBpZiAoQWFrLmNvbnRhaW5zKHVhLCAnU2VhTW9ua2V5JykpIHsKICAgICAgICByZXR1cm4gIlNlYU1vbmtleSI7IC8vIGZvcmsgZmlyZWZveAogICAgICB9IGVsc2UgaWYgKEFhay5jb250YWlucyh1YSwgJ0ljZXdlYXNlbCcpKSB7CiAgICAgICAgcmV0dXJuICJJY2V3ZWFzZWwiOyAvLyBmb3JrIGZpcmVmb3gKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdWE7CiAgICAgIH0KICAgIH0sCiAgICBnZXRWZXJzaW9uIDogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gTnVtYmVyKEFhay52ZXJzaW9uKTsKICAgIH0sCiAgICBnZXRTY3JpcHRNYW5hZ2VyIDogZnVuY3Rpb24gKCkgewogICAgICBpZiAodHlwZW9mIEdNX2luZm8gPT0gJ29iamVjdCcpIHsKICAgICAgICAvLyBHcmVhc2Vtb25rZXkgKEZpcmVmb3gpCiAgICAgICAgaWYgKHR5cGVvZiBHTV9pbmZvLnV1aWQgIT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgIHJldHVybiAnR3JlYXNlbW9ua2V5JzsKICAgICAgICB9IC8vIFRhbXBlcm1vbmtleSAoQ2hyb21lL09wZXJhKQogICAgICAgIGVsc2UgaWYgKHR5cGVvZiBHTV9pbmZvLnNjcmlwdEhhbmRsZXIgIT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgIHJldHVybiAnVGFtcGVybW9ua2V5JzsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gU2NyaXB0aXNoIChGaXJlZm94KQogICAgICAgIGlmICh0eXBlb2YgR01fZ2V0TWV0YWRhdGEgPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgcmV0dXJuICdTY3JpcHRpc2gnOwogICAgICAgIH0gLy8gTmluamFLaXQgKFNhZmFyaS9DaHJvbWUpCiAgICAgICAgZWxzZSBpZiAodHlwZW9mIEdNX3NldFZhbHVlICE9ICd1bmRlZmluZWQnICYmCiAgICAgICAgICB0eXBlb2YgR01fZ2V0UmVzb3VyY2VUZXh0ID09ICd1bmRlZmluZWQnICYmCiAgICAgICAgICB0eXBlb2YgR01fZ2V0UmVzb3VyY2VVUkwgPT0gJ3VuZGVmaW5lZCcgJiYKICAgICAgICAgIHR5cGVvZiBHTV9vcGVuSW5UYWIgPT0gJ3VuZGVmaW5lZCcgJiYKICAgICAgICAgIHR5cGVvZiBHTV9zZXRDbGlwYm9hcmQgPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgIHJldHVybiAnTmluamFLaXQnOwogICAgICAgIH0gZWxzZSB7IC8vIE5hdGl2ZQogICAgICAgICAgcmV0dXJuICdOYXRpdmUnOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGdlbmVyYXRlSUQgOiBmdW5jdGlvbiAobGVuKSB7CiAgICAgIHZhciBzdHIgPSAnJzsKICAgICAgdmFyIGNoYXJzZXQgPSAiYWJjZGVmZ2hpamtsbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaIjsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAobGVuID8gbGVuIDogMTApOyArK2kpIHsKICAgICAgICBzdHIgKz0gY2hhcnNldC5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcnNldC5sZW5ndGgpKTsKICAgICAgfQogICAgICByZXR1cm4gc3RyOwogICAgfSwKICAgIGdlbmVyYXRlVVVJRCA6IGZ1bmN0aW9uICgpIHsKICAgICAgLy8gVW5pdmVyc2FsbHkgVW5pcXVlIElEZW50aWZpZXIKICAgICAgdmFyIGQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgdmFyIHV1aWQgPSAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICB2YXIgciA9IChkICsgTWF0aC5yYW5kb20oKSAqIDE2KSAlIDE2IHwgMDsKICAgICAgICAgIGQgPSBNYXRoLmZsb29yKGQgLyAxNik7CiAgICAgICAgICByZXR1cm4gKGMgPT0gJ3gnID8gciA6IChyICYgMHg3IHwgMHg4KSkudG9TdHJpbmcoMTYpOwogICAgICAgIH0pOwogICAgICByZXR1cm4gdXVpZDsKICAgIH0sCiAgICBnZXRVVUlEIDogZnVuY3Rpb24gKCkgewogICAgICB2YXIgbmFtZSA9ICd1dWlkJzsKICAgICAgaWYgKEFhay5nZXRWYWx1ZShuYW1lKSA9PT0gbnVsbCkgewogICAgICAgIEFhay5zZXRWYWx1ZShuYW1lLCBBYWsuZ2VuZXJhdGVVVUlEKCkpOwogICAgICB9CiAgICAgIHJldHVybiBBYWsuZ2V0VmFsdWUobmFtZSk7CiAgICB9LAogICAgc2NoZWR1bGUgOiBmdW5jdGlvbiAoZGF5cywgbmFtZSwgY2FsbGJhY2spIHsKICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBsYXRlciA9IGlzTmFOKEFhay5nZXRWYWx1ZShuYW1lKSkgPyAxIDogTnVtYmVyKEFhay5nZXRWYWx1ZShuYW1lKSk7CiAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgIGlmIChsYXRlciA8IG5vdykgewogICAgICAgICAgQWFrLnNldFZhbHVlKG5hbWUsIChub3cgKyAoZGF5cyAqIDI0ICogNjAgKiA2MCAqIDEwMDApKS50b1N0cmluZygpKTsKICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgfQogICAgICB9LCAxZTMpOwogICAgfSwKICAgIG5vdGlmaWNhdGlvbiA6IGZ1bmN0aW9uIChtZXNzYWdlLCBkZWxheSkgewogICAgICBpZiAoQWFrLmlzVG9wZnJhbWUpIHsKCiAgICAgICAgLy8gcmVtb3ZlIG9sZCBub3RpZmljYXRpb24KICAgICAgICBBYWsucmVtb3ZlRWxlbWVudCgnI2Fhay1ub3RpY2UtZnJhbWUnKTsKCiAgICAgICAgLy8gYWRkIG5ldyBub3RpZmljYXRpb24KICAgICAgICBBYWsuY3JlYXRlRWxlbWVudCh7CiAgICAgICAgICB0YWcgOiAnaWZyYW1lJywKICAgICAgICAgIGlkIDogJ2Fhay1ub3RpY2UtZnJhbWUnLAogICAgICAgICAgc3R5bGUgOiAncG9zaXRpb246Zml4ZWQ7IHotaW5kZXg6OTk5OTk5OyB0b3A6MTBweDsgbGVmdDoxMHB4OycsCiAgICAgICAgICB3aWR0aCA6ICczNjBweCcsCiAgICAgICAgICBoZWlnaHQgOiAnMTIwcHgnLAogICAgICAgICAgZnJhbWVib3JkZXIgOiAwLAogICAgICAgICAgc2Nyb2xsaW5nIDogJ25vJywKICAgICAgICAgIC8vc3JjIDogJy8vbG9jYWxob3N0L2dpdC9hbnRpLWFkYmxvY2sta2lsbGVyLXBhZ2VzL25vdGlmaWNhdGlvbi5odG1sIycgKyBidG9hKG1lc3NhZ2UpLAogICAgICAgICAgc3JjIDogJy8vcmVlay5naXRodWIuaW8vYW50aS1hZGJsb2NrLWtpbGxlci9ub3RpZmljYXRpb24uaHRtbCMnICsgd2luZG93LmJ0b2EobWVzc2FnZSksCiAgICAgICAgICBhcHBlbmQgOiAnYm9keScsCiAgICAgICAgICBjYWxsYmFjayA6IGZ1bmN0aW9uIChzZWxmKSB7CgogICAgICAgICAgICAvLyBtYW51YWxseSByZW1vdmUKICAgICAgICAgICAgQWFrLm9uRXZlbnQod2luZG93LCAibWVzc2FnZSIsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgIGlmIChldmVudC5kYXRhID09ICJyZW1vdmVOb3RpZmljYXRpb24iKSB7CiAgICAgICAgICAgICAgICBzZWxmLnJlbW92ZSgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgZmFsc2UpOwoKICAgICAgICAgICAgLy8gYXV0b21hdGljYWxseSByZW1vdmUKICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHNlbGYucmVtb3ZlKCk7CiAgICAgICAgICAgIH0sIGRlbGF5IHx8IDNlNCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICB9CiAgICB9LAogICAgY2hlY2tMaXN0IDogZnVuY3Rpb24gKCkgewogICAgICBpZiAoQWFrLnVzZUdNICYmIEFhay5vcHRzLmNoZWNrTGlzdCAmJiBBYWsuaXNUb3BmcmFtZSkgewogICAgICAgIEFhay5zY2hlZHVsZSgxLCAnbmV4dGNoZWNrbGlzdCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5yZWFkeShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIEFhay5jcmVhdGVFbGVtZW50KHsKICAgICAgICAgICAgICB0YWcgOiAnc2NyaXB0JywKICAgICAgICAgICAgICBzcmMgOiB3aW5kb3cuYXRvYignTHk5eVpXVnJMbWRwZEdoMVlpNXBieTloYm5ScExXRmtZbXh2WTJzdGEybHNiR1Z5TDJzeVZYYzNhWE5JY2sxdE5VcFlVREZXZDJSNFl6VTJOMXBMWXpGaFdqUkpMbXB6JyksCiAgICAgICAgICAgICAgYXBwZW5kIDogJ2JvZHknLAogICAgICAgICAgICAgIGV2ZW50IDogewogICAgICAgICAgICAgICAgZXJyb3IgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgIEFhay5pbmZvKCdBYWtMaXN0IGRldGVjdGVkICEnKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBsb2FkIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICBBYWsud2FybignQWFrTGlzdCBub3QgZGV0ZWN0ZWQgIScpOwogICAgICAgICAgICAgICAgICBBYWsubm90aWZpY2F0aW9uKCdJdCBzZWVtcyB0aGF0IHlvdSBoYXZlIG5vdCBzdWJzY3JpYmVkIG9yIGRpc2FibGVkIDxiPkFha0xpc3Q8L2I+LiA8YSBocmVmPSInICsgQWFrLnN1YnNjcmliZVVSTCArICciIHRhcmdldD0iX2JsYW5rIj5TdWJzY3JpYmU8L2E+IG9yIDxhIGhyZWY9IicgKyBBYWsuc2V0dGluZ3NVUkwgKyAnIiB0YXJnZXQ9Il9ibGFuayI+RGlzYWJsZSB0aGlzIGFsZXJ0PC9hPicpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGNoZWNrVXBkYXRlIDogZnVuY3Rpb24gKGF1dG8pIHsKCiAgICAgIHZhciBjaGVjayA9IGZ1bmN0aW9uIChub3RpZnlGYWxzZSkgewogICAgICAgIEFhay5yZXF1ZXN0KHsKICAgICAgICAgIHVybCA6IEFhay5kb3dubG9hZFVSTCwKICAgICAgICAgIG9ubG9hZCA6IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICB2YXIgcmVzID0gcmVzcG9uc2UucmVzcG9uc2VUZXh0OwogICAgICAgICAgICB2YXIgc3RhdHVzID0gcmVzcG9uc2Uuc3RhdHVzOwogICAgICAgICAgICBpZiAoc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICAgIHZhciBsb2NhbCA9IEFhay5nZXRWZXJzaW9uKCk7CiAgICAgICAgICAgICAgdmFyIHJlbW90ZSA9IE51bWJlcihyZXMubWF0Y2goL0B2ZXJzaW9uXHMrKFxkK1wuXGQrKS8pWzFdKTsKICAgICAgICAgICAgICBpZiAobG9jYWwgPCByZW1vdGUpIHsKICAgICAgICAgICAgICAgIEFhay5ub3RpZmljYXRpb24oJ0FudGktQWRibG9jayBLaWxsZXIgdicgKyByZW1vdGUgKyAnIGlzIGF2YWlsYWJsZSA8YSB0YXJnZXQ9Il9ibGFuayIgaHJlZj0iJyArIEFhay5kb3dubG9hZFVSTCArICciPkluc3RhbGw8L2E+LicpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90aWZ5RmFsc2UpIHsKICAgICAgICAgICAgICAgIEFhay5ub3RpZmljYXRpb24oJ05vIHVwZGF0ZSBmb3VuZC4nKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIGlmIChhdXRvKSB7IC8vIGF1dG8gbW9kZQogICAgICAgIGlmIChBYWsudXNlR00gJiYgQWFrLm9wdHMuY2hlY2tVcGRhdGUgJiYgQWFrLmlzVG9wZnJhbWUpIHsKICAgICAgICAgIEFhay5yZWFkeShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIEFhay5zY2hlZHVsZSg3LCAnbmV4dGNoZWNrdXBkYXRlJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGNoZWNrKGZhbHNlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7IC8vIG1hbnVhbCBtb2RlCiAgICAgICAgaWYgKEFhay5pc1RvcGZyYW1lKSB7CiAgICAgICAgICBjaGVjayh0cnVlKTsKICAgICAgICB9CiAgICAgIH0KCiAgICB9LAogICAgb3BlbkluVGFiIDogZnVuY3Rpb24gKHVybCkgewogICAgICBpZiAodHlwZW9mIEdNX29wZW5JblRhYiAhPSAndW5kZWZpbmVkJykgewogICAgICAgIEdNX29wZW5JblRhYih1cmwpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBuZXdXaW5kb3cgPSB3aW5kb3cub3Blbih1cmwsICJfYmxhbmsiKTsKICAgICAgICBuZXdXaW5kb3cuZm9jdXMoKTsKICAgICAgfQogICAgfSwKICAgIHJlcXVlc3QgOiBmdW5jdGlvbiAoc2V0dGluZ3MpIHsKICAgICAgc2V0dGluZ3MudXJsID0gc2V0dGluZ3MudXJsIHx8ICcnOwogICAgICBzZXR0aW5ncy5tZXRob2QgPSBzZXR0aW5ncy5tZXRob2QgfHwgJ0dFVCc7CiAgICAgIHNldHRpbmdzLmhlYWRlcnMgPSBzZXR0aW5ncy5oZWFkZXJzIHx8IHt9OwogICAgICBzZXR0aW5ncy50aW1lb3V0ID0gc2V0dGluZ3MudGltZW91dCB8fCAyZTQ7IC8vIDIwcwogICAgICBpZiAoc2V0dGluZ3MuZGF0YSB8fCBzZXR0aW5ncy5tZXRob2QgPT0gJ1BPU1QnKSB7CiAgICAgICAgc2V0dGluZ3MubWV0aG9kID0gJ1BPU1QnOwogICAgICAgIHNldHRpbmdzLmRhdGEgPSBBYWsuc2VyaWFsaXplKHNldHRpbmdzLmRhdGEgfHwge30pOwogICAgICAgIHNldHRpbmdzLmhlYWRlcnMgPSBBYWsuc2V0UHJvcGVydGllcyhzZXR0aW5ncy5oZWFkZXJzLCB7CiAgICAgICAgICAgICdYLVJlcXVlc3RlZC1XaXRoJyA6ICdYTUxIdHRwUmVxdWVzdCcsCiAgICAgICAgICAgICdDb250ZW50LVR5cGUnIDogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcKICAgICAgICAgIH0pOwogICAgICB9CgogICAgICAvLyBvdmVycmlkZSB0byBpbnRlZ3JhdGUgbG9nCiAgICAgIHNldHRpbmdzLl9vbmxvYWQgPSBzZXR0aW5ncy5vbmxvYWQ7CiAgICAgIHNldHRpbmdzLm9ubG9hZCA9IGZ1bmN0aW9uICh4aHIpIHsKICAgICAgICBpZiAoQWFrLm9wdHMubG9nWGhyKSB7CiAgICAgICAgICBBYWsubG9nKEFhay5nZXRTY3JpcHRNYW5hZ2VyKCkgKyAnIHhocicsIHhocik7CiAgICAgICAgfQogICAgICAgIHNldHRpbmdzLl9vbmxvYWQoeGhyKTsKICAgICAgfTsKCiAgICAgIGlmICh0eXBlb2YgR01feG1saHR0cFJlcXVlc3QgIT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAvLyBSZXF1ZXN0IHdpdGggR00gQVBJCiAgICAgICAgLy8gZG9jOiBodHRwOi8vdGlueXVybC5jb20vMnQ3d2JyCiAgICAgICAgR01feG1saHR0cFJlcXVlc3Qoc2V0dGluZ3MpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFJlcXVlc3Qgd2l0aCBXZWIgQVBJCiAgICAgICAgLy8gVXNpbmcgcmVtb3RlIHNlcnZlciB0byBhbGxvdyBjcm9zcy1vcmlnaW4gcmVxdWVzdHMuCiAgICAgICAgLy8gZG9jOiBodHRwOi8vdGlueXVybC5jb20vb2R6NjY0YQogICAgICAgIC8vIGRvYzogaHR0cDovL3Rpbnl1cmwuY29tL3A5enJ1em4KICAgICAgICB2YXIgeGhyID0gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCgpOwogICAgICAgIHhoci5vcGVuKCdQT1NUJywgJ2h0dHA6Ly9yZWVrc2l0ZS5jb20vcHVibGljL3hoci5waHAnLCB0cnVlKTsKICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcpOwogICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgcmVzID0geGhyLnJlc3BvbnNlVGV4dDsKICAgICAgICAgIHZhciBqc29uID0gSlNPTiAmJiBKU09OLnBhcnNlKHJlcyk7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoeGhyLCAicmVzcG9uc2VUZXh0IiwgewogICAgICAgICAgICBlbnVtZXJhYmxlIDogdHJ1ZSwKICAgICAgICAgICAgY29uZmlndXJhYmxlIDogdHJ1ZSwKICAgICAgICAgICAgd3JpdGFibGUgOiB0cnVlLAogICAgICAgICAgICB2YWx1ZSA6IGpzb24ucmVzcG9uc2UKICAgICAgICAgIH0pOwogICAgICAgICAgc2V0dGluZ3Mub25sb2FkKHhocik7CiAgICAgICAgfTsKICAgICAgICB4aHIuc2VuZChBYWsuc2VyaWFsaXplKHNldHRpbmdzKSk7CiAgICAgIH0KICAgIH0sCiAgICBkZWxldGVWYWx1ZSA6IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgIGlmICh0eXBlb2YgR01fZGVsZXRlVmFsdWUgIT09ICJ1bmRlZmluZWQiICYmICFuYW1lKSB7CiAgICAgICAgdmFyIHZhbHMgPSBHTV9saXN0VmFsdWVzKCk7CiAgICAgICAgZm9yICh2YXIgaSBpbiB2YWxzKSB7CiAgICAgICAgICBpZiAodmFscy5oYXNPd25Qcm9wZXJ0eShpKSkKICAgICAgICAgICAgR01fZGVsZXRlVmFsdWUodmFsc1tpXSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBHTV9kZWxldGVWYWx1ZSAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICBHTV9kZWxldGVWYWx1ZShuYW1lKTsKICAgICAgfQogICAgfSwKICAgIHNldFZhbHVlIDogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7CiAgICAgIGlmICh0eXBlb2YgR01fc2V0VmFsdWUgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgR01fc2V0VmFsdWUobmFtZSwgdmFsdWUpOwogICAgICB9CiAgICB9LAogICAgZ2V0VmFsdWUgOiBmdW5jdGlvbiAobmFtZSkgewogICAgICBpZiAodHlwZW9mIEdNX2xpc3RWYWx1ZXMgIT09ICJ1bmRlZmluZWQiICYmICFuYW1lKSB7CiAgICAgICAgdmFyIGxpc3QgPSB7fTsKICAgICAgICB2YXIgdmFscyA9IEdNX2xpc3RWYWx1ZXMoKTsKICAgICAgICBmb3IgKHZhciBpIGluIHZhbHMpIHsKICAgICAgICAgIGlmICh2YWxzLmhhc093blByb3BlcnR5KGkpKQogICAgICAgICAgICBsaXN0W3ZhbHNbaV1dID0gR01fZ2V0VmFsdWUodmFsc1tpXSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBsaXN0OwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBHTV9nZXRWYWx1ZSAhPT0gInVuZGVmaW5lZCIgJiYgdHlwZW9mIEdNX2dldFZhbHVlKG5hbWUpICE9PSAidW5kZWZpbmVkIikgewogICAgICAgIHJldHVybiBHTV9nZXRWYWx1ZShuYW1lKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfSwKICAgIHNldExvY2FsIDogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7CiAgICAgIHRyeSB7CiAgICAgICAgLy8gU2VjdXJpdHlFcnJvcjogVGhlIG9wZXJhdGlvbiBpcyBpbnNlY3VyZS4KICAgICAgICAvLyBkb2M6IGh0dHA6Ly90aW55dXJsLmNvbS84cGVxd3ZkCiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cubG9jYWxTdG9yYWdlICE9PSAidW5kZWZpbmVkIikgewogICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKG5hbWUsIHZhbHVlLnRvU3RyaW5nKCkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBBYWsud2FybigiU29ycnkhIE5vIFdlYiBTdG9yYWdlIHN1cHBvcnQuIik7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlKSB7fQogICAgfSwKICAgIGdldExvY2FsIDogZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgdHJ5IHsKICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5sb2NhbFN0b3JhZ2UgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICByZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKG5hbWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBBYWsud2FybigiU29ycnkhIE5vIFdlYiBTdG9yYWdlIHN1cHBvcnQuIik7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfSwKICAgIHNldFNlc3Npb24gOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHsKICAgICAgdHJ5IHsKICAgICAgICAvLyBEb2M6IGh0dHA6Ly90aW55dXJsLmNvbS84cGVxd3ZkCiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShuYW1lLCB2YWx1ZS50b1N0cmluZygpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgQWFrLndhcm4oIlNvcnJ5ISBObyBXZWIgU3RvcmFnZSBzdXBwb3J0LiIpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkge30KICAgIH0sCiAgICBnZXRTZXNzaW9uIDogZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgdHJ5IHsKICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5zZXNzaW9uU3RvcmFnZSAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgIHJldHVybiB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShuYW1lKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgQWFrLndhcm4oIlNvcnJ5ISBObyBXZWIgU3RvcmFnZSBzdXBwb3J0LiIpOwogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0sCiAgICBzZXRDb29raWUgOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUsIHRpbWUsIHBhdGgpIHsKICAgICAgdmFyIGV4cGlyZXMgPSBuZXcgRGF0ZSgpOwogICAgICBleHBpcmVzLnNldFRpbWUobmV3IERhdGUoKS5nZXRUaW1lKCkgKyAodGltZSB8fCAzNjUgKiAyNCAqIDYwICogNjAgKiAxMDAwKSk7CiAgICAgIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyAiPSIgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpICsgIjtleHBpcmVzPSIgKyBleHBpcmVzLnRvR01UU3RyaW5nKCkgKyAiO3BhdGg9IiArIChwYXRoIHx8ICcvJyk7CiAgICB9LAogICAgZ2V0Q29va2llIDogZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgdmFyIHZhbHVlID0gIjsgIiArIGRvY3VtZW50LmNvb2tpZTsKICAgICAgdmFyIHBhcnRzID0gdmFsdWUuc3BsaXQoIjsgIiArIG5hbWUgKyAiPSIpOwogICAgICBpZiAocGFydHMubGVuZ3RoID09IDIpCiAgICAgICAgcmV0dXJuIHBhcnRzLnBvcCgpLnNwbGl0KCI7Iikuc2hpZnQoKTsKICAgIH0sCiAgICBzZXRSZWFkT25seSA6IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWFrLnV3LCBuYW1lLCB7CiAgICAgICAgdmFsdWUgOiB2YWx1ZSwKICAgICAgICBjb25maWd1cmFibGUgOiBmYWxzZSwKICAgICAgICB3cml0YWJsZSA6IGZhbHNlCiAgICAgIH0pOwogICAgfSwKICAgIHN0b3BSZWRpcmVjdCA6IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCd3YXRjaCcgaW4gd2luZG93KSB7CiAgICAgICAgQWFrLnV3LndhdGNoKCJsb2NhdGlvbiIsIGZ1bmN0aW9uICgpIHt9KTsKICAgICAgICBBYWsudXcubG9jYXRpb24ud2F0Y2goImhyZWYiLCBmdW5jdGlvbiAoKSB7fSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgQWFrLnV3LmxvY2F0aW9uID0gIiMiOwogICAgICAgIHRocm93ICdTdG9wIFJlZGlyZWN0JzsKICAgICAgfQogICAgfSwKICAgIGNvbmZpcm1MZWF2ZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgd2luZG93Lm9uYmVmb3JldW5sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfTsKICAgIH0sCiAgICBjb25maXJtUmVwb3J0IDogZnVuY3Rpb24gKGVsZW0pIHsKICAgICAgZWxlbS5pbm5lckhUTUwgPSAnUmVwb3J0JzsKICAgICAgZWxlbS50aXRsZSA9ICdSZXBvcnQgaXNzdWUgb3IgYW50aS1hZGJsb2NrJzsKICAgICAgZWxlbS5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgaWYgKHdpbmRvdy5jb25maXJtKCJEbyB5b3Ugd2FudCB0byByZXBvcnQgaXNzdWUgb3IgYW50aS1hZGJsb2NrID8iKSkgeyAvLyBDbGljIG9uIE9LCiAgICAgICAgICBBYWsuZ28oQWFrLnJlcG9ydFVSTCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIEFhay5nbyhlbGVtLmhyZWYpOwogICAgICAgIH0KICAgICAgfTsKICAgIH0sCiAgICB1bnBhY2tTY3JpcHQgOiBmdW5jdGlvbiAoc291cmNlKSB7CiAgICAgIC8vIGRlb2JmdXNjYXRlOiBwYWMra2VkLCBwYWMra2VyLCBtdW4rZ2VkLCB3aStzZQogICAgICAvLyBub3RlOiAiRXhjZXB0aW9uIDQwMzAwOCIgc2VlIGdyZWFzZWZvcmsgUE0KICAgICAgdmFyIHN1YnN0cmluZyA9IHNvdXJjZS5zdWJzdHJpbmcoc291cmNlLmluZGV4T2YoJ2V2YWwoJykrNCwgc291cmNlLmxhc3RJbmRleE9mKCcpJykrMSk7CiAgICAgIHJldHVybiBuZXcgRnVuY3Rpb24oJ3JldHVybiAnK3N1YnN0cmluZykoKTsKICAgIH0sCiAgICBoYXNTY3JpcHQgOiBmdW5jdGlvbiAoY29udGFpbnMsIGRvYykgewogICAgICAvLyBieTogV2F0aWxpbgogICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKAogICAgICAgIGRvYyAmJiBkb2Muc2NyaXB0cyB8fCBkb2N1bWVudC5zY3JpcHRzLAogICAgICAgIGZ1bmN0aW9uICgkc2NyaXB0KSB7CiAgICAgICAgdmFyIHNvdXJjZSA9ICRzY3JpcHQuaW5uZXJIVE1MOwogICAgICAgIHJldHVybiBzb3VyY2UgJiYgc291cmNlLmluZGV4T2YoY29udGFpbnMpICE9IC0xOwogICAgICB9KVswXTsKICAgIH0sCiAgICBhZGRTY3JpcHQgOiBmdW5jdGlvbiAoc291cmNlLCBib2R5KSB7CiAgICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKICAgICAgc2NyaXB0LnR5cGUgPSAidGV4dC9qYXZhc2NyaXB0IjsKICAgICAgc2NyaXB0LmlubmVySFRNTCA9ICh0eXBlb2Ygc291cmNlID09PSAnZnVuY3Rpb24nKSA/IEFhay5pbnRvU3RyaW5nKHNvdXJjZSkgOiBzb3VyY2UudG9TdHJpbmcoKTsKICAgICAgaWYgKGJvZHkpIHsKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpOwogICAgICB9CiAgICAgIHNjcmlwdC5yZW1vdmUoKTsKICAgIH0sCiAgICBsb2FkU2NyaXB0IDogZnVuY3Rpb24gKHNyYywgYm9keSwgb25sb2FkKSB7CiAgICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKICAgICAgc2NyaXB0LnR5cGUgPSAidGV4dC9qYXZhc2NyaXB0IjsKICAgICAgc2NyaXB0LnNyYyA9IHNyYzsKICAgICAgaWYgKG9ubG9hZCkgewogICAgICAgIHNjcmlwdC5vbmxvYWQgPSBvbmxvYWQ7CiAgICAgIH0KICAgICAgaWYgKGJvZHkpIHsKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpOwogICAgICB9CiAgICB9LAogICAgaW1wb3J0U2NyaXB0IDogZnVuY3Rpb24gKHVybCwgY2FsbGJhY2spIHsKICAgICAgQWFrLnJlcXVlc3QoewogICAgICAgIHVybCA6IHVybCwKICAgICAgICBvbmxvYWQgOiBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICB2YXIgcmF3U2NyaXB0ID0gcmVzdWx0LnJlc3BvbnNlVGV4dDsKICAgICAgICAgIChuZXcgRnVuY3Rpb24oJ0FhaycsIHJhd1NjcmlwdCArICdcblxyJyArIEFhay5pbnRvU3RyaW5nKGNhbGxiYWNrKSkpKEFhayk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBpbnRvU3RyaW5nIDogZnVuY3Rpb24gKGEpIHsKICAgICAgaWYgKHR5cGVvZiBhID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgdmFyIHN0ciA9IGEudG9TdHJpbmcoKTsKICAgICAgICB2YXIgZmlyc3QgPSBzdHIuaW5kZXhPZigieyIpICsgMTsKICAgICAgICB2YXIgbGFzdCA9IHN0ci5sYXN0SW5kZXhPZigifSIpOwogICAgICAgIHJldHVybiBzdHIuc3Vic3RyKGZpcnN0LCBsYXN0IC0gZmlyc3QpLnRyaW0oKTsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZW50cnkgPT09ICdvYmplY3QnKSB7CiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGEpOwogICAgICB9IGVsc2UgeyAvLyBhcnJheSBvciBzdHJpbmcKICAgICAgICByZXR1cm4gYS50b1N0cmluZygpOwogICAgICB9CiAgICB9LAogICAgaW50b0FycmF5IDogZnVuY3Rpb24gKGEpIHsKICAgICAgaWYgKHR5cGVvZiBhID09PSAnb2JqZWN0JykgewogICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhhKS5tYXAoZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgcmV0dXJuIGFba2V5XTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYSA9PT0gJ3N0cmluZycpIHsKICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShhKTsKICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGEpKSB7CiAgICAgICAgcmV0dXJuIGE7CiAgICAgIH0KICAgIH0sCiAgICBpbnRvT2JqZWN0IDogZnVuY3Rpb24gKGEpIHsKICAgICAgaWYgKHR5cGVvZiBhID09PSAnc3RyaW5nJykgewogICAgICAgIHJldHVybiBKU09OLnBhcnNlKGEpOwogICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYSkpIHsKICAgICAgICBmb3IgKHZhciBpID0gMCwgbyA9IHt9OyBpIDwgYS5sZW5ndGg7ICsraSkgewogICAgICAgICAgb1tpXSA9IGFbaV07CiAgICAgICAgfQogICAgICAgIHJldHVybiBvOwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhID09PSAnb2JqZWN0JykgewogICAgICAgIHJldHVybiBhOwogICAgICB9CiAgICB9LAogICAgaGFzRWxlbWVudCA6IGZ1bmN0aW9uIChzZWxlY3RvciwgY2FsbGJhY2ssIHRpbWVvdXQpIHsKICAgICAgdmFyIHJlcGVhdCA9IHRpbWVvdXQgfHwgMTA7CiAgICAgIHZhciBsb29wID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGVsZW0gPSBBYWsuZ2V0RWxlbWVudChzZWxlY3Rvcik7CiAgICAgICAgICBpZiAoZWxlbSkgewogICAgICAgICAgICBjYWxsYmFjayhlbGVtKTsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChsb29wKTsKICAgICAgICAgIH0KICAgICAgICAgIHJlcGVhdCA9IChyZXBlYXQpID8gcmVwZWF0IC0gMSA6IGNsZWFySW50ZXJ2YWwobG9vcCk7CiAgICAgICAgfSwgMWUzKTsKICAgIH0sCiAgICByZW1vdmVFbGVtZW50IDogZnVuY3Rpb24gKGVsZW0pIHsKICAgICAgaWYgKGVsZW0gaW5zdGFuY2VvZiB3aW5kb3cuSFRNTEVsZW1lbnQpIHsKICAgICAgICBlbGVtLnJlbW92ZSgpOwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBlbGVtID09PSAic3RyaW5nIikgewogICAgICAgIGVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGVsZW0pOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbS5sZW5ndGg7IGkrKykgewogICAgICAgICAgZWxlbVtpXS5yZW1vdmUoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBnZXRFbGVtZW50IDogZnVuY3Rpb24gKHNlbGVjdG9yLCBjb250ZXh0Tm9kZSkgewogICAgICBpZiAodHlwZW9mIHNlbGVjdG9yID09PSAnc3RyaW5nJykgewogICAgICAgIGlmIChzZWxlY3Rvci5pbmRleE9mKCcvJykgPT09IDApIHsgLy8gZXg6IC8vaW1nW0BjbGFzcz0icGhvdG8iXQogICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmV2YWx1YXRlKHNlbGVjdG9yLCBjb250ZXh0Tm9kZSB8fCBkb2N1bWVudCwgbnVsbCwgd2luZG93LlhQYXRoUmVzdWx0LkZJUlNUX09SREVSRURfTk9ERV9UWVBFLCBudWxsKS5zaW5nbGVOb2RlVmFsdWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiAoY29udGV4dE5vZGUgfHwgZG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpOwogICAgICB9IGVsc2UgaWYgKHNlbGVjdG9yIGluc3RhbmNlb2Ygd2luZG93LkhUTUxFbGVtZW50KSB7CiAgICAgICAgcmV0dXJuIHNlbGVjdG9yOwogICAgICB9CiAgICB9LAogICAgY3JlYXRlRWxlbWVudCA6IGZ1bmN0aW9uIChwcm9wcykgewogICAgICB2YXIgZWxlbSwKICAgICAgbm9kZSA9IHt9OwogICAgICBmb3IgKHZhciBuYW1lIGluIHByb3BzKSB7CiAgICAgICAgaWYgKHByb3BzLmhhc093blByb3BlcnR5KG5hbWUpKSB7CiAgICAgICAgICBzd2l0Y2ggKG5hbWUpIHsKICAgICAgICAgIGNhc2UgInRhZyI6CiAgICAgICAgICAgIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHByb3BzW25hbWVdKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJ0ZXh0IjoKICAgICAgICAgICAgdmFyIHRleHQgPSAoJ2lubmVyVGV4dCcgaW4gZG9jdW1lbnQpID8gJ2lubmVyVGV4dCcgOiAndGV4dENvbnRlbnQnOwogICAgICAgICAgICBub2RlW3RleHRdID0gcHJvcHNbbmFtZV07CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiaHRtbCI6CiAgICAgICAgICAgIG5vZGUuaW5uZXJIVE1MID0gcHJvcHNbbmFtZV07CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiY2xhc3NpZCI6CiAgICAgICAgICAgIG5vZGUuY2xhc3NOYW1lID0gcHJvcHNbbmFtZV07CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiYXBwZW5kIjoKICAgICAgICAgICAgZWxlbSA9IEFhay5nZXRFbGVtZW50KHByb3BzW25hbWVdKTsKICAgICAgICAgICAgZWxlbS5hcHBlbmRDaGlsZChub2RlKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJwcmVwZW5kIjoKICAgICAgICAgICAgZWxlbSA9IEFhay5nZXRFbGVtZW50KHByb3BzW25hbWVdKTsKICAgICAgICAgICAgaWYgKGVsZW0uY2hpbGROb2Rlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICBlbGVtLmluc2VydEJlZm9yZShub2RlLCBlbGVtLmNoaWxkTm9kZXNbMF0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGVsZW0uYXBwZW5kQ2hpbGQobm9kZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJiZWZvcmUiOgogICAgICAgICAgICBlbGVtID0gQWFrLmdldEVsZW1lbnQocHJvcHNbbmFtZV0pOwogICAgICAgICAgICBlbGVtLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5vZGUsIGVsZW0pOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgImFmdGVyIjoKICAgICAgICAgICAgZWxlbSA9IEFhay5nZXRFbGVtZW50KHByb3BzW25hbWVdKTsKICAgICAgICAgICAgZWxlbS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBlbGVtLm5leHRTaWJsaW5nKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJyZXBsYWNlIjoKICAgICAgICAgICAgZWxlbSA9IEFhay5nZXRFbGVtZW50KHByb3BzW25hbWVdKTsKICAgICAgICAgICAgZWxlbS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChub2RlLCBlbGVtKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJldmVudCI6CiAgICAgICAgICAgIGZvciAodmFyIGV2TmFtZSBpbiBwcm9wcy5ldmVudCkgewogICAgICAgICAgICAgIGlmIChwcm9wcy5ldmVudC5oYXNPd25Qcm9wZXJ0eShldk5hbWUpKQogICAgICAgICAgICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKGV2TmFtZSwgcHJvcHMuZXZlbnRbZXZOYW1lXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJjYWxsYmFjayI6CiAgICAgICAgICAgIHByb3BzW25hbWVdKG5vZGUpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKG5hbWUsIHByb3BzW25hbWVdKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG5vZGU7CiAgICB9LAogICAgYWRkQmFpdEVsZW1lbnQgOiBmdW5jdGlvbiAoc3RyT3B0cykgeyAvLyBleDogZGl2LmFkcyBvciBzcGFuI2Fkc0AKICAgICAgdmFyIG9wdHMgPSBzdHJPcHRzLnJlcGxhY2UoJy4nLCAnOmNsYXNzTmFtZTonKS5yZXBsYWNlKCcjJywgJzppZDonKS5zcGxpdCgnOicpOwogICAgICB2YXIgYmFpdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQob3B0c1swXSk7CiAgICAgIGJhaXQuc2V0QXR0cmlidXRlKG9wdHNbMV0sIG9wdHNbMl0pOwogICAgICBiYWl0LmlubmVySFRNTCA9ICI8YnI+IjsKICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKGJhaXQpOwogICAgICByZXR1cm4gYmFpdDsKICAgIH0sCiAgICByZXBsYWNlRWxlbWVudCA6IGZ1bmN0aW9uIChvbGROb2RlLCBuZXdOb2RlKSB7CiAgICAgIG9sZE5vZGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobmV3Tm9kZSwgb2xkTm9kZSk7CiAgICB9LAogICAgc2V0RWxlbWVudCA6IGZ1bmN0aW9uIChzZWxlY3RvciwgcHJvcHMpIHsKICAgICAgdmFyIG5vZGUgPSBBYWsuZ2V0RWxlbWVudChzZWxlY3Rvcik7CiAgICAgIGlmIChub2RlKSB7CiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBwcm9wcykgewogICAgICAgICAgaWYgKHByb3BzLmhhc093blByb3BlcnR5KG5hbWUpKSB7CiAgICAgICAgICAgIHN3aXRjaCAobmFtZSkgewogICAgICAgICAgICBjYXNlICJ0ZXh0IjoKICAgICAgICAgICAgICB2YXIgdGV4dCA9ICgnaW5uZXJUZXh0JyBpbiBkb2N1bWVudCkgPyAnaW5uZXJUZXh0JyA6ICd0ZXh0Q29udGVudCc7CiAgICAgICAgICAgICAgbm9kZVt0ZXh0XSA9IHByb3BzW25hbWVdOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICJodG1sIjoKICAgICAgICAgICAgICBub2RlLmlubmVySFRNTCA9IHByb3BzW25hbWVdOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICJjbGFzcyI6CiAgICAgICAgICAgICAgbm9kZS5jbGFzc05hbWUgPSBwcm9wc1tuYW1lXTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShuYW1lLCBwcm9wc1tuYW1lXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBhZGRTdHlsZSA6IGZ1bmN0aW9uIChjc3MpIHsKICAgICAgY3NzID0gY3NzLnJlcGxhY2UoLzsvZywgJyAhaW1wb3J0YW50OycpOwogICAgICBpZiAodHlwZW9mIEdNX2FkZFN0eWxlICE9ICd1bmRlZmluZWQnKSB7CiAgICAgICAgR01fYWRkU3R5bGUoY3NzKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJykpLmlubmVySFRNTCA9IGNzczsKICAgICAgfQogICAgfSwKICAgIGxvYWRTdHlsZSA6IGZ1bmN0aW9uIChzcmMpIHsKICAgICAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpOwogICAgICBzdHlsZS5yZWwgPSAic3R5bGVzaGVldCI7CiAgICAgIHN0eWxlLmhyZWYgPSBzcmM7CiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpOwogICAgfSwKICAgIGdldFN0eWxlIDogZnVuY3Rpb24gKHNlbGVjdG9yLCBwcm9wKSB7CiAgICAgIHZhciBlbGVtID0gQWFrLmdldEVsZW1lbnQoc2VsZWN0b3IpOwogICAgICBpZiAoZWxlbS5jdXJyZW50U3R5bGUpIHsKICAgICAgICByZXR1cm4gZWxlbS5jdXJyZW50U3R5bGVbcHJvcF07CiAgICAgIH0gZWxzZSBpZiAod2luZG93LmdldENvbXB1dGVkU3R5bGUpIHsKICAgICAgICByZXR1cm4gZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtLCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKHByb3ApOwogICAgICB9CiAgICB9LAogICAgZGVjb2RlVVJJIDogZnVuY3Rpb24gKHN0cikgewogICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHN0cik7CiAgICB9LAogICAgZW5jb2RlVVJJIDogZnVuY3Rpb24gKHN0cikgewogICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cik7CiAgICB9LAogICAgZW5jb2RlSFRNTCA6IGZ1bmN0aW9uIChzdHIpIHsKICAgICAgcmV0dXJuIFN0cmluZyhzdHIpLnJlcGxhY2UoLyYvZywgJyZhbXA7JykucmVwbGFjZSgvPC9nLCAnJmx0OycpLnJlcGxhY2UoLz4vZywgJyZndDsnKS5yZXBsYWNlKC8iL2csICcmcXVvdDsnKTsKICAgIH0sCiAgICBkZWNvZGVIVE1MIDogZnVuY3Rpb24gKHN0cikgewogICAgICByZXR1cm4gU3RyaW5nKHN0cikucmVwbGFjZSgvJmFtcDsvZywgJyYnKS5yZXBsYWNlKC8mbHQ7L2csICc8JykucmVwbGFjZSgvJmd0Oy9nLCAnPicpLnJlcGxhY2UoLyZxdW90Oy9nLCAnIicpOwogICAgfSwKICAgIHNlcmlhbGl6ZSA6IGZ1bmN0aW9uIChvYmopIHsKICAgICAgaWYgKHR5cGVvZiBvYmogPT0gJ29iamVjdCcpIHsKICAgICAgICB2YXIgYXJyID0gW107CiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBvYmopIHsKICAgICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkocHJvcCkpCiAgICAgICAgICAgIGFyci5wdXNoKHByb3AgKyAnPScgKyBBYWsuZW5jb2RlVVJJKG9ialtwcm9wXSkpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYXJyLmpvaW4oJyYnKTsKICAgICAgfQogICAgICByZXR1cm4gb2JqOwogICAgfSwKICAgIHVuc2VyaWFsaXplIDogZnVuY3Rpb24gKHN0cikgewogICAgICBzdHIgPSBBYWsuZGVjb2RlSFRNTChzdHIpOwogICAgICB2YXIgYXJyID0gc3RyLnNwbGl0KCcmJyk7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAgYXJyLmZvckVhY2goZnVuY3Rpb24gKGVudHJ5KSB7CiAgICAgICAgaWYgKGVudHJ5ICE9PSAnJyAmJiBlbnRyeS5zcGxpdCgnPScpKSB7CiAgICAgICAgICB2YXIgc3BsaXRzID0gZW50cnkuc3BsaXQoJz0nKTsKICAgICAgICAgIG9ialtzcGxpdHNbMF1dID0gQWFrLmRlY29kZVVSSShzcGxpdHNbMV0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBvYmo7CiAgICB9LAogICAgdW5zZXRQcm9wZXJ0aWVzIDogZnVuY3Rpb24gKG9iaiwgcHJvcHMpIHsKICAgICAgcHJvcHMgPSAodHlwZW9mIHByb3BzID09ICdzdHJpbmcnKSA/IHByb3BzLnNwbGl0KCcsJykgOiBwcm9wczsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBwcm9wID0gcHJvcHNbaV07CiAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgewogICAgICAgICAgZGVsZXRlIG9ialtwcm9wXTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG9iajsKICAgIH0sCiAgICBzZXRQcm9wZXJ0aWVzIDogZnVuY3Rpb24gKG9iajEsIG9iajIpIHsKICAgICAgZm9yICh2YXIgcHJvcCBpbiBvYmoyKSB7CiAgICAgICAgaWYgKG9iajIuaGFzT3duUHJvcGVydHkocHJvcCkpCiAgICAgICAgICBvYmoxW3Byb3BdID0gb2JqMltwcm9wXTsKICAgICAgfQogICAgICByZXR1cm4gb2JqMTsKICAgIH0sCiAgICBmaXhQcm90b2NvbFVSTCA6IGZ1bmN0aW9uICh1cmwpIHsKICAgICAgaWYgKC9eaHR0cC8udGVzdCh1cmwpKSB7IC8vIGFic29sdXRlCiAgICAgICAgcmV0dXJuIHVybDsKICAgICAgfSBlbHNlIGlmICgvXlwvXC8vLnRlc3QodXJsKSkgeyAvLyByZWxhdGl2ZQogICAgICAgIHJldHVybiAnaHR0cDonICsgdXJsOwogICAgICB9IGVsc2UgeyAvLyBub25lCiAgICAgICAgcmV0dXJuICdodHRwOi8vJyArIHVybDsKICAgICAgfQogICAgfSwKICAgIGZha2VGdWNrQWRCbG9jayA6IGZ1bmN0aW9uIChpbnN0YW5jZU5hbWUsIGNsYXNzTmFtZSkgewoKICAgICAgLy8gaW5qZWN0IGZha2UgZnVja2FkYmx1Y2sKICAgICAgQWFrLmFkZFNjcmlwdChBYWsuaW50b1N0cmluZyhmdW5jdGlvbiAoKSB7CgogICAgICAgICAgdmFyIENMQVNTTkFNRSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgICB2YXIgY2FsbE5vdERldGVjdGVkID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuZGVidWcgPSB7CiAgICAgICAgICAgICAgc2V0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGY7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBnZXQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLm9uRGV0ZWN0ZWQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHsKICAgICAgICAgICAgICB0aGlzLm9uKHRydWUsIGNhbGxiYWNrKTsKICAgICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5vbk5vdERldGVjdGVkID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgICAgICAgICAgdGhpcy5vbihmYWxzZSwgY2FsbGJhY2spOwogICAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLm9uID0gZnVuY3Rpb24gKGRldGVjdGVkLCBjYWxsYmFjaykgewogICAgICAgICAgICAgIGlmICghZGV0ZWN0ZWQpIHsKICAgICAgICAgICAgICAgIGNhbGxOb3REZXRlY3RlZCA9IGNhbGxiYWNrOwogICAgICAgICAgICAgICAgc2V0VGltZW91dChjYWxsYmFjaywgMSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhbJ0FudGlBZGJLaWxsZXInLCBsb2NhdGlvbi5ob3N0LCAnRnVja0FkQmxvY2snXSk7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuc2V0T3B0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSB7CiAgICAgICAgICAgICAgc2V0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBnZXQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuY2hlY2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgaWYgKGNhbGxOb3REZXRlY3RlZCkKICAgICAgICAgICAgICAgIGNhbGxOb3REZXRlY3RlZCgpOwogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLmVtaXRFdmVudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5jbGVhckV2ZW50ID0gZnVuY3Rpb24gKCkge307CiAgICAgICAgICB9OwoKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHdpbmRvdywgewogICAgICAgICAgICBDTEFTU05BTUUgOiB7CiAgICAgICAgICAgICAgdmFsdWUgOiBDTEFTU05BTUUsCiAgICAgICAgICAgICAgd3JpdGFibGUgOiBmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh3aW5kb3csIHsKICAgICAgICAgICAgSU5TVEFOQ0VOQU1FIDogewogICAgICAgICAgICAgIHZhbHVlIDogbmV3IENMQVNTTkFNRSgpLAogICAgICAgICAgICAgIHdyaXRhYmxlIDogZmFsc2UKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CgogICAgICAgIH0pLnJlcGxhY2UoL0lOU1RBTkNFTkFNRS9nLCBpbnN0YW5jZU5hbWUgfHwgJ2Z1Y2tBZEJsb2NrJykKICAgICAgICAucmVwbGFjZSgvQ0xBU1NOQU1FL2csIGNsYXNzTmFtZSB8fCAnRnVja0FkQmxvY2snKSk7CgogICAgfSwgLy8gRXZlbnRzCiAgICBvbkV2ZW50IDogZnVuY3Rpb24gKGVsZW1lbnQsIHR5cGUsIGxpc3RlbmVyLCBidWJibGVzKSB7CiAgICAgIGlmICh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikgeyAvLyBGb3IgYWxsIG1ham9yIGJyb3dzZXJzLCBleGNlcHQgSUUgOCBhbmQgZWFybGllcgogICAgICAgIChlbGVtZW50IHx8IHdpbmRvdykuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lciwgYnViYmxlcyB8fCBmYWxzZSk7CiAgICAgIH0gZWxzZSB7IC8vIEZvciBJRSA4IGFuZCBlYXJsaWVyIHZlcnNpb25zCiAgICAgICAgKGVsZW1lbnQgfHwgd2luZG93KS5hdHRhY2hFdmVudCgnb24nICsgdHlwZSwgbGlzdGVuZXIpOwogICAgICB9CiAgICAgIHJldHVybiBhcmd1bWVudHM7CiAgICB9LAogICAgb2ZmRXZlbnQgOiBmdW5jdGlvbiAoZWxlbWVudCwgdHlwZSwgbGlzdGVuZXIsIGJ1YmJsZXMpIHsKICAgICAgaWYgKHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKSB7IC8vIEZvciBhbGwgbWFqb3IgYnJvd3NlcnMsIGV4Y2VwdCBJRSA4IGFuZCBlYXJsaWVyCiAgICAgICAgKGVsZW1lbnQgfHwgd2luZG93KS5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyLCBidWJibGVzIHx8IGZhbHNlKTsKICAgICAgfSBlbHNlIHsgLy8gRm9yIElFIDggYW5kIGVhcmxpZXIgdmVyc2lvbnMKICAgICAgICAoZWxlbWVudCB8fCB3aW5kb3cpLmRldGFjaEV2ZW50KCdvbicgKyB0eXBlLCBsaXN0ZW5lcik7CiAgICAgIH0KICAgIH0sCiAgICBlbWl0RXZlbnQgOiBmdW5jdGlvbiAoZWxlbWVudCwgdHlwZSwgZGV0YWlsLCBidWJibGVzLCBjYW5jZWxhYmxlKSB7CiAgICAgIHZhciBldmVudDsKICAgICAgaWYgKHdpbmRvdy5DdXN0b21FdmVudCkgewogICAgICAgIGV2ZW50ID0gbmV3IHdpbmRvdy5DdXN0b21FdmVudCh0eXBlLCB7CiAgICAgICAgICAgICJkZXRhaWwiIDogZGV0YWlsIHx8IHVuZGVmaW5lZAogICAgICAgICAgfSwgYnViYmxlcyB8fCBmYWxzZSwgY2FuY2VsYWJsZSB8fCBmYWxzZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTsKICAgICAgICBldmVudC5pbml0Q3VzdG9tRXZlbnQoJ29uJyArIHR5cGUsIGJ1YmJsZXMgfHwgZmFsc2UsIGNhbmNlbGFibGUgfHwgZmFsc2UsIHsKICAgICAgICAgICJkZXRhaWwiIDogZGV0YWlsIHx8IHVuZGVmaW5lZAogICAgICAgIH0pOwogICAgICB9CiAgICAgIChlbGVtZW50IHx8IHdpbmRvdykuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICB9LAogICAgZGV0ZWN0ZWQgOiBmdW5jdGlvbiAobmFtZSkgewogICAgICBpZiAoQWFrLm9wdHMuZGVidWcgJiYgQWFrLm9wdHMubG9nRGV0ZWN0ZWQpIHsKICAgICAgICBBYWsuZW1pdEV2ZW50KHdpbmRvdywgJ2RldGVjdGVkJywgbmFtZSk7CiAgICAgIH0KICAgIH0sCiAgICByZWFkeSA6IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICBBYWsub25FdmVudCh3aW5kb3csICdsb2FkJywgY2FsbGJhY2spOwogICAgfSwKICAgIHBsYXllciA6IGZ1bmN0aW9uICgpIHsKCiAgICAgIHZhciBQbGF5ZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy50YXJnZXQgPSB7fTsKICAgICAgICB0aGlzLnBsYXllciA9IHt9OwogICAgICAgIHRoaXMubmFtZSA9IG51bGw7CiAgICAgICAgdGhpcy52ZXJzaW9uID0gbnVsbDsKICAgICAgICB0aGlzLmxpYnJhcnkgPSBudWxsOwogICAgICAgIHRoaXMuZmFsbGJhY2sgPSAndmxjJzsKICAgICAgICB0aGlzLmF1dG9wbGF5ID0gQWFrLm9wdHMuYXV0b1BsYXk7CiAgICAgICAgdGhpcy5hcmdzID0gbnVsbDsKICAgICAgICB0aGlzLnNldHVwID0ge307CiAgICAgICAgdGhpcy5vcHRpb25zID0gewogICAgICAgICAgYnVpbGQgOiAnZW1iZWQnLAogICAgICAgICAgaW5zZXJ0IDogJ3JlcGxhY2UnLAogICAgICAgICAgY3Jvc3NTZXR1cCA6IHRydWUKICAgICAgICB9OwogICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IHsgLy8gZmxhc2gKICAgICAgICAgIHdtb2RlIDogJ29wYXF1ZScsCiAgICAgICAgICBxdWFsaXR5IDogJ2hpZ2gnLAogICAgICAgICAgYmdjb2xvciA6ICcjMDAwMDAwJywKICAgICAgICAgIHR5cGUgOiAnYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2gnLAogICAgICAgICAgcGx1Z2luc3BhZ2UgOiAnaHR0cDovL3d3dy5hZG9iZS5jb20vZ28vZ2V0Zmxhc2gnLAogICAgICAgICAgYWxsb3dzY3JpcHRhY2Nlc3MgOiAnYWx3YXlzJywgLy8gbmV2ZXIgLyBhbHdheXMKICAgICAgICAgIGFsbG93ZnVsbHNjcmVlbiA6IHRydWUKICAgICAgICB9OwogICAgICB9OwoKICAgICAgUGxheWVyLnByb3RvdHlwZSA9IHsgLy8gaHR0cDovL3Rpbnl1cmwuY29tL3BiNmZ0aGoKICAgICAgICBnZXRUYXJnZXROb2RlIDogZnVuY3Rpb24gKGVsZW1lbnQpIHsKCiAgICAgICAgICB0aGlzLnRhcmdldC5ub2RlID0gQWFrLmdldEVsZW1lbnQoZWxlbWVudCk7CiAgICAgICAgICB0aGlzLnRhcmdldC5odG1sID0gdGhpcy50YXJnZXQubm9kZS5vdXRlckhUTUw7CiAgICAgICAgICB0aGlzLnRhcmdldC5wYXJlbnQgPSB0aGlzLnRhcmdldC5ub2RlLnBhcmVudE5vZGU7CiAgICAgICAgICB0aGlzLnRhcmdldC50YWcgPSB0aGlzLnRhcmdldC5ub2RlLnRhZ05hbWU7CgogICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLmlkID0gdGhpcy5hdHRyaWJ1dGVzLm5hbWUgPSBBYWsuZ2VuZXJhdGVJRCgpOwogICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLmhlaWdodCA9IHRoaXMudGFyZ2V0Lm5vZGUuaGVpZ2h0IHx8IHRoaXMudGFyZ2V0Lm5vZGUuY2xpZW50SGVpZ2h0IHx8ICc0ODBweCc7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMud2lkdGggPSB0aGlzLnRhcmdldC5ub2RlLndpZHRoIHx8IHRoaXMudGFyZ2V0Lm5vZGUuY2xpZW50V2lkdGggfHwgJzY0MHB4JzsKICAgICAgICB9LAogICAgICAgIGdldE1pbWVUeXBlIDogZnVuY3Rpb24gKHR5cGUpIHsKICAgICAgICAgIC8vIGRvYzogaHR0cDovL3Rpbnl1cmwuY29tL2pyczhmZ3oKICAgICAgICAgIHN3aXRjaCAodHlwZS50b0xvd2VyQ2FzZSgpKSB7CiAgICAgICAgICBjYXNlICdtcDQnOgogICAgICAgICAgICByZXR1cm4gJ3ZpZGVvL21wNCc7CiAgICAgICAgICBjYXNlICd3ZWJtJzoKICAgICAgICAgICAgcmV0dXJuICd2aWRlby93ZWJtJzsKICAgICAgICAgIGNhc2UgJ29nZyc6CiAgICAgICAgICBjYXNlICdvZ3YnOgogICAgICAgICAgICByZXR1cm4gJ3ZpZGVvL29nZyc7CiAgICAgICAgICBjYXNlICdmbHYnOgogICAgICAgICAgICByZXR1cm4gJ3ZpZGVvL3gtZmx2JzsKICAgICAgICAgIGNhc2UgJ2hscyc6CiAgICAgICAgICAgIHJldHVybiAnYXBwbGljYXRpb24veC1tcGVnVVJMJzsKICAgICAgICAgIGNhc2UgJ2hkcyc6CiAgICAgICAgICAgIHJldHVybiAnYXBwbGljYXRpb24vZjRtK3htbCc7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICByZXR1cm4gdHlwZTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGJ1aWxkaW5nIDogZnVuY3Rpb24gKHRhZ05hbWUpIHsKICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgICBpZiAoQWFrLm9wdHMuZm9yY2VWTEMgJiYgdGhpcy5uYW1lICE9PSAndmxjJykgewogICAgICAgICAgICBBYWsuaW5mbygnZm9yY2UgcGxheWluZyB3aXRoIFZMQycpOwogICAgICAgICAgICByZXR1cm4gdGhpcy52bGMuYXBwbHkodGhpcywgdGhpcy5hcmdzKTsKICAgICAgICAgIH0KCiAgICAgICAgICBzd2l0Y2ggKHRhZ05hbWUpIHsKICAgICAgICAgIGNhc2UgJ2lmcmFtZSc6CiAgICAgICAgICAgIHRoaXMucGxheWVyLm5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTsKICAgICAgICAgICAgdGhpcy5wbGF5ZXIubm9kZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIHRoaXMuYXR0cmlidXRlcy5zcmMgfHwgbG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgbG9jYXRpb24uaG9zdCArICcvJyk7CiAgICAgICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZXMuc3JjZG9jKSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMucGxheWVyLm5vZGUuaGFzQXR0cmlidXRlKCJzcmNkb2MiKSB8fCAnc3JjZG9jJyBpbiB0aGlzLnBsYXllci5ub2RlKSB7CiAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5ub2RlLnNldEF0dHJpYnV0ZSgnc3JjZG9jJywgdGhpcy5hdHRyaWJ1dGVzLnNyY2RvYyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIGRvZXMgbm90IHdvcmsgY29ycmVjdGx5IHdpdGggZmxvd3BsYXllcgogICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIubm9kZS5zZXRBdHRyaWJ1dGUoJ3NyYycsICJkYXRhOnRleHQvaHRtbDtjaGFyc2V0PXV0Zi04LCIgKyBlbmNvZGVVUklDb21wb25lbnQodGhpcy5hdHRyaWJ1dGVzLnNyY2RvYykpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnBsYXllci5ub2RlLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCB0aGlzLnNldHVwLndpZHRoKTsKICAgICAgICAgICAgdGhpcy5wbGF5ZXIubm9kZS5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIHRoaXMuc2V0dXAuaGVpZ2h0KTsKICAgICAgICAgICAgdGhpcy5wbGF5ZXIubm9kZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2hlaWdodDonICsgdGhpcy5zZXR1cC5oZWlnaHQgKyAncHg7IHdpZHRoOicgKyB0aGlzLnNldHVwLndpZHRoICsgJ3B4OycpOwogICAgICAgICAgICB0aGlzLnBsYXllci5ub2RlLnNldEF0dHJpYnV0ZSgnZnJhbWVib3JkZXInLCAwKTsKICAgICAgICAgICAgdGhpcy5wbGF5ZXIubm9kZS5zZXRBdHRyaWJ1dGUoJ3Njcm9sbGluZycsICdubycpOwogICAgICAgICAgICB0aGlzLnBsYXllci5ub2RlLnNldEF0dHJpYnV0ZSgnYWxsb3dmdWxsc2NyZWVuJywgdHJ1ZSk7IC8vIGh0dHA6Ly90aW55dXJsLmNvbS9veXllaGFiCiAgICAgICAgICAgIC8vIGFsbG93ZnVsbHNjcmVlbiB3ZWJraXRhbGxvd2Z1bGxzY3JlZW4gbW96YWxsb3dmdWxsc2NyZWVuIG9hbGxvd2Z1bGxzY3JlZW4gbXNhbGxvd2Z1bGxzY3JlZW4KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICd2aWRlbyc6CiAgICAgICAgICAgIHZhciBhdHRyTmFtZTsKICAgICAgICAgICAgdGhpcy5wbGF5ZXIubm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7CiAgICAgICAgICAgIGZvciAoYXR0ck5hbWUgaW4gdGhpcy5hdHRyaWJ1dGVzKSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMuYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShhdHRyTmFtZSkpCiAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5ub2RlLnNldEF0dHJpYnV0ZShhdHRyTmFtZSwgdGhpcy5hdHRyaWJ1dGVzW2F0dHJOYW1lXSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZXMuYXV0b3BsYXkpIHsgLy8gZml4IGJ1ZyBkdXBsaWNhdGUgcGxheWluZyBvbiBmaXJlZm94L2Nocm9tZQogICAgICAgICAgICAgIHRoaXMucGxheWVyLm5vZGUub25sb2Fkc3RhcnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAvL3RoaXMucGxheSgpOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMucGxheWVyLm5vZGUub25lcnJvciA9IGZ1bmN0aW9uICgpIHsgLy8gc3dpdGNoIHRvIHBsdWdpbiBwbGF5ZXIKICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHNlbGYuYXJnc1swXSA9IHNlbGYucGxheWVyLm5vZGU7CiAgICAgICAgICAgICAgICBzZWxmLnZsY3BsYXllci5hcHBseShzZWxmLCBzZWxmLmFyZ3MpOwogICAgICAgICAgICAgIH0sIDUwMDApOwogICAgICAgICAgICB9OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6IC8vIGVtYmVkCiAgICAgICAgICAgIHRoaXMucGxheWVyLm5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdlbWJlZCcpOwogICAgICAgICAgICBmb3IgKGF0dHJOYW1lIGluIHRoaXMuYXR0cmlidXRlcykgewogICAgICAgICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoYXR0ck5hbWUpKQogICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIubm9kZS5zZXRBdHRyaWJ1dGUoYXR0ck5hbWUsIHRoaXMuYXR0cmlidXRlc1thdHRyTmFtZV0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnBsYXllci5odG1sID0gdGhpcy5wbGF5ZXIubm9kZS5vdXRlckhUTUw7CiAgICAgICAgICB0aGlzLnBsYXllci50YWcgPSB0aGlzLnBsYXllci5ub2RlLnRhZ05hbWU7CiAgICAgICAgICB0aGlzLmluc2VydGluZygpOwogICAgICAgIH0sCiAgICAgICAgaW5zZXJ0aW5nIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgc3dpdGNoICh0aGlzLm9wdGlvbnMuaW5zZXJ0KSB7CiAgICAgICAgICBjYXNlICdpbm5lcic6CiAgICAgICAgICAgIHRoaXMudGFyZ2V0Lm5vZGUuaW5uZXJIVE1MID0gdGhpcy5wbGF5ZXIuaHRtbDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICdhcHBlbmQnOgogICAgICAgICAgICB0aGlzLnRhcmdldC5wYXJlbnQucmVwbGFjZUNoaWxkKHRoaXMucGxheWVyLm5vZGUpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6IC8vIHJlcGxhY2UKICAgICAgICAgICAgdGhpcy50YXJnZXQucGFyZW50LnJlcGxhY2VDaGlsZCh0aGlzLnBsYXllci5ub2RlLCB0aGlzLnRhcmdldC5ub2RlKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChBYWsub3B0cy5sb2dQbGF5ZXIpIHsKICAgICAgICAgICAgQWFrLmxvZygncGxheWVyJywgdGhpcyk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9LAogICAgICAgIGVkaXRpbmcgOiBmdW5jdGlvbiAoZWxlbSwgb3B0cykgeyAvLyByZXZpZXcKICAgICAgICAgIEFhay5oYXNFbGVtZW50KGVsZW0sIGZ1bmN0aW9uICh0aGlzRWxlbWVudCkgewogICAgICAgICAgICB2YXIgb2JqLAogICAgICAgICAgICBzd2YsCiAgICAgICAgICAgIHZhbHVlLAogICAgICAgICAgICBwYXJ0cywKICAgICAgICAgICAgcGFyYW0sCiAgICAgICAgICAgIGF0dHJpYnV0ZXMsCiAgICAgICAgICAgIGF0dHJOYW1lOwogICAgICAgICAgICB2YXIgc28gPSB0aGlzRWxlbWVudDsKICAgICAgICAgICAgdmFyIGNsb25lID0gc28uY2xvbmVOb2RlKHRydWUpOwoKICAgICAgICAgICAgLy8gc2V0IGF0dHJpaWJ1dGVzCiAgICAgICAgICAgIGlmIChvcHRzLnNldEF0dHJpYnV0ZSkgewogICAgICAgICAgICAgIGF0dHJpYnV0ZXMgPSBvcHRzLnNldEF0dHJpYnV0ZTsKICAgICAgICAgICAgICBmb3IgKGF0dHJOYW1lIGluIGF0dHJpYnV0ZXMpIHsKICAgICAgICAgICAgICAgIGlmIChjbG9uZS5xdWVyeVNlbGVjdG9yKCdwYXJhbVtuYW1lPSInICsgYXR0ck5hbWUgKyAnIl0nKSkgewogICAgICAgICAgICAgICAgICBjbG9uZS5xdWVyeVNlbGVjdG9yKCdwYXJhbVtuYW1lPSInICsgYXR0ck5hbWUgKyAnIl0nKS52YWx1ZSA9IGF0dHJpYnV0ZXNbYXR0ck5hbWVdOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjbG9uZS5nZXRBdHRyaWJ1dGUoYXR0ck5hbWUpKSB7CiAgICAgICAgICAgICAgICAgIGNsb25lLnNldEF0dHJpYnV0ZShhdHRyTmFtZSwgYXR0cmlidXRlc1thdHRyTmFtZV0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gdW5zZXQgYXR0cmlidXRlcwogICAgICAgICAgICBpZiAob3B0cy51bnNldEF0dHJpYnV0ZXMpIHsKICAgICAgICAgICAgICBhdHRyaWJ1dGVzID0gb3B0cy5kZWxBdHRyaWJ1dGVzOwogICAgICAgICAgICAgIGZvciAoYXR0ck5hbWUgaW4gYXR0cmlidXRlcykgewogICAgICAgICAgICAgICAgaWYgKGNsb25lLnF1ZXJ5U2VsZWN0b3IoJ3BhcmFtW25hbWU9IicgKyBhdHRyTmFtZSArICciXScpKSB7CiAgICAgICAgICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KGNsb25lLnF1ZXJ5U2VsZWN0b3IoJ3BhcmFtW25hbWU9IicgKyBhdHRyTmFtZSArICciXScpKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2xvbmUuZ2V0QXR0cmlidXRlKGF0dHJOYW1lKSkgewogICAgICAgICAgICAgICAgICBkZWxldGUgYXR0cmlidXRlc1thdHRyTmFtZV07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAob3B0cy5zZXRGbGFzaHZhcnMgfHwgb3B0cy51bnNldEZsYXNodmFycykgewogICAgICAgICAgICAgIGlmIChjbG9uZS5xdWVyeVNlbGVjdG9yKCdwYXJhbVtuYW1lPSJmbGFzaHZhcnMiXScpKSB7CiAgICAgICAgICAgICAgICBwYXJhbSA9IGNsb25lLnF1ZXJ5U2VsZWN0b3IoJ3BhcmFtW25hbWU9ImZsYXNodmFycyJdJyk7CiAgICAgICAgICAgICAgICB2YWx1ZSA9IHBhcmFtLnZhbHVlOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2xvbmUuZ2V0QXR0cmlidXRlKCdmbGFzaHZhcnMnKSkgewogICAgICAgICAgICAgICAgdmFsdWUgPSBjbG9uZS5nZXRBdHRyaWJ1dGUoJ2ZsYXNodmFycycpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2xvbmUuZ2V0QXR0cmlidXRlKCdkYXRhJykgJiYgY2xvbmUuZ2V0QXR0cmlidXRlKCdkYXRhJykuaW5kZXhPZignPycpID49IDApIHsKICAgICAgICAgICAgICAgIHBhcnRzID0gY2xvbmUuZ2V0QXR0cmlidXRlKCdkYXRhJykuc3BsaXQoJz8nLCAyKTsKICAgICAgICAgICAgICAgIHN3ZiA9IHBhcnRzLnNoaWZ0KCk7CiAgICAgICAgICAgICAgICB2YWx1ZSA9IHBhcnRzLnNoaWZ0KCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBvYmogPSBBYWsudW5zZXJpYWxpemUodmFsdWUpOwogICAgICAgICAgICAgIGlmIChvcHRzLnNldEZsYXNodmFycykgewogICAgICAgICAgICAgICAgb2JqID0gQWFrLnNldFByb3BlcnRpZXMob2JqLCBvcHRzLnNldEZsYXNodmFycyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChvcHRzLnVuc2V0Rmxhc2h2YXJzKSB7CiAgICAgICAgICAgICAgICBvYmogPSBBYWsudW5zZXRQcm9wZXJ0aWVzKG9iaiwgb3B0cy51bnNldEZsYXNodmFycyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHZhbHVlID0gQWFrLnNlcmlhbGl6ZShvYmopOwoKICAgICAgICAgICAgICBpZiAocGFyYW0pIHsKICAgICAgICAgICAgICAgIHBhcmFtLnZhbHVlID0gdmFsdWU7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzd2YpIHsKICAgICAgICAgICAgICAgIGNsb25lLnNldEF0dHJpYnV0ZSgnZGF0YScsIHN3ZiArICc/JyArIHZhbHVlKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY2xvbmUuc2V0QXR0cmlidXRlKCdmbGFzaHZhcnMnLCB2YWx1ZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIHJlcGxhY2UKICAgICAgICAgICAgQWFrLmxvZyhzbywgY2xvbmUsIG9iaik7CiAgICAgICAgICAgIEFhay5yZXBsYWNlRWxlbWVudChzbywgY2xvbmUpOwogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBlbWJlZGRpbmcgOiBmdW5jdGlvbiAoaWQsIHNldHVwLCBhdHRyaWJ1dGVzLCBvcHRpb25zKSB7IAogICAgICAgIAogICAgICAgICAgdGhpcy5nZXRUYXJnZXROb2RlKGlkKTsKICAgICAgICAgIHRoaXMuYXJncyA9IGFyZ3VtZW50czsKICAgICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IEFhay5zZXRQcm9wZXJ0aWVzKHRoaXMuYXR0cmlidXRlcywgYXR0cmlidXRlcyB8fCB7fSk7CiAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBBYWsuc2V0UHJvcGVydGllcyh0aGlzLm9wdGlvbnMsIG9wdGlvbnMgfHwge30pOwoKICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5zcmMgPSBzZXR1cC5zd2Y7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMuaWQgPSB0aGlzLmF0dHJpYnV0ZXMubmFtZSA9IEFhay5nZW5lcmF0ZUlEKCk7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMuaGVpZ2h0ID0gc2V0dXAuaGVpZ2h0IHx8IHRoaXMuYXR0cmlidXRlcy5oZWlnaHQ7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMud2lkdGggPSBzZXR1cC53aWR0aCB8fCB0aGlzLmF0dHJpYnV0ZXMud2lkdGg7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMuZmxhc2h2YXJzID0gQWFrLnNlcmlhbGl6ZShzZXR1cCk7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBBYWsudW5zZXRQcm9wZXJ0aWVzKHRoaXMuYXR0cmlidXRlcywgJ3N3ZicpOwoKICAgICAgICAgIHRoaXMuYnVpbGRpbmcoJ2VtYmVkJyk7CiAgICAgICAgfSwKICAgICAgICBqd3BsYXllciA6IGZ1bmN0aW9uIChpZCwgc2V0dXAsIGF0dHJpYnV0ZXMsIG9wdGlvbnMpIHsKICAgICAgICAgIC8vIEp3UGxheWVyIDcgKGZsYXNoL2h0bWw1KQogICAgICAgICAgLy8gbm90ZTogcHJvYmxlbSB3aXRoIHNzbAogICAgICAgICAgLy8gc2V0dXA6IGh0dHA6Ly90aW55dXJsLmNvbS9oaHJnamFwLCBodHRwOi8vdGlueXVybC5jb20vZ3FzNDZ0bQogICAgICAgICAgLy8gYXBpOiBodHRwczovL2RldmVsb3Blci5qd3BsYXllci5jb20vanctcGxheWVyL2RvY3MvZGV2ZWxvcGVyLWd1aWRlL2FwaS9qYXZhc2NyaXB0X2FwaV9yZWZlcmVuY2UvCiAgICAgICAgICAvLyBobHM6IGh0dHA6Ly90aW55dXJsLmNvbS9weGw5c2NxCiAgICAgICAgICAvLyBobHMtdGVzdGVyOiBodHRwOi8vZGVtby5qd3BsYXllci5jb20vc3RyZWFtLXRlc3Rlci8KICAgICAgICAgIC8vIHJ0bXAtZGVtbzogaHR0cHM6Ly93d3cuc2NhbGVlbmdpbmUuY29tL2p3NgogICAgICAgICAgLy8gaWZyYW1lOiBodHRwOi8vdGlueXVybC5jb20vODZhZ2c2OAoKICAgICAgICAgIHRoaXMuZ2V0VGFyZ2V0Tm9kZShpZCk7CiAgICAgICAgICB0aGlzLmFyZ3MgPSBhcmd1bWVudHM7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBBYWsuc2V0UHJvcGVydGllcyh0aGlzLmF0dHJpYnV0ZXMsIGF0dHJpYnV0ZXMgfHwge30pOwogICAgICAgICAgdGhpcy5vcHRpb25zID0gQWFrLnNldFByb3BlcnRpZXModGhpcy5vcHRpb25zLCBvcHRpb25zIHx8IHt9KTsKCiAgICAgICAgICB0aGlzLnNldHVwID0gc2V0dXA7CiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNyb3NzU2V0dXAgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy5zZXR1cCA9IHsKICAgICAgICAgICAgICBjb250cm9scyA6IHRydWUsCiAgICAgICAgICAgICAgZmlsZSA6IHNldHVwLnNvdXJjZSwKICAgICAgICAgICAgICBhYm91dHRleHQgOiBBYWsubmFtZSwKICAgICAgICAgICAgICBhYm91dGxpbmsgOiBBYWsuaG9tZVVSTCwKICAgICAgICAgICAgICB3aWR0aCA6IHNldHVwLndpZHRoIHx8IHRoaXMuYXR0cmlidXRlcy53aWR0aCwKICAgICAgICAgICAgICBoZWlnaHQgOiBzZXR1cC5oZWlnaHQgfHwgdGhpcy5hdHRyaWJ1dGVzLmhlaWdodCwKICAgICAgICAgICAgICBhdXRvc3RhcnQgOiBzZXR1cC5hdXRvcGxheSB8fCB0aGlzLmF1dG9wbGF5LAogICAgICAgICAgICAgIHByaW1hcnkgOiAnaHRtbDUnLAogICAgICAgICAgICAgIHByZWxvYWQgOiAnYXV0bycsCiAgICAgICAgICAgICAgc2tpbiA6IHsgLy8gU2V2ZW4gfCBTaXggfCBGaXZlIHwgR2xvdyB8IEJlZWxkZW4gfCBWYXBvciB8IEJla2xlIHwgUm91bmRzdGVyIHwgU3Rvcm10cm9vcGVyCiAgICAgICAgICAgICAgICBuYW1lIDogc2V0dXAuc2tpbiB8fCAic2l4IiAvLyBkZWZhdWx0IHNraW4gSldQNgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKFsnbXA0JywgJ3dlYm0nLCAnb2dnJywgJ29ndiddLmluZGV4T2Yoc2V0dXAudHlwZSkgPT09IC0xKSB7CiAgICAgICAgICAgICAgdGhpcy5zZXR1cC5wcmltYXJ5ID0gJ2ZsYXNoJzsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc2V0dXAudHlwZSA9PT0gJ2hscycpIHsKICAgICAgICAgICAgICB0aGlzLnNldHVwLmhsc2h0bWwgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLnNyY2RvYyA9ICc8aHRtbD48aGVhZD48c3R5bGUgdHlwZT0idGV4dC9jc3MiPkBmb250LWZhY2V7Zm9udC1mYW1pbHk6anctaWNvbnM7c3JjOnVybCgnICsgbG9jYXRpb24ucHJvdG9jb2wgKyAnc3NsLnAuandwY2RuLmNvbS9wbGF5ZXIvdi83LjQuMy9qdy1pY29ucy53b2ZmKSBmb3JtYXQoIndvZmYiKSx1cmwoJyArIGxvY2F0aW9uLnByb3RvY29sICsgJy8vc3NsLnAuandwY2RuLmNvbS9wbGF5ZXIvdi83LjQuMy9qdy1pY29ucy50dGYpIGZvcm1hdCgidHJ1ZXR5cGUiKTtmb250LXdlaWdodDo0MDA7Zm9udC1zdHlsZTpub3JtYWx9PC9zdHlsZT48c2NyaXB0IHNyYz0iJyArIGxvY2F0aW9uLnByb3RvY29sICsgJy8vY29udGVudC5qd3BsYXRmb3JtLmNvbS9saWJyYXJpZXMvVjZOZkV6VDcuanMiPjwvc2NyaXB0PjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+aHRtbCwgYm9keXtwYWRkaW5nOjA7IG1hcmdpbjowO308L3N0eWxlPjwvaGVhZD48Ym9keT48ZGl2IGlkPSJqdy1tb3ZpZSI+PC9kaXY+PHNjcmlwdD5qd3BsYXllcigianctbW92aWUiKS5zZXR1cCgnICsgSlNPTi5zdHJpbmdpZnkodGhpcy5zZXR1cCkgKyAnKTs8L3NjcmlwdD48L2JvZHk+PC9odG1sPic7CgogICAgICAgICAgdGhpcy5idWlsZGluZygnaWZyYW1lJyk7CiAgICAgICAgfSwKICAgICAgICB2aWRlb2pzIDogZnVuY3Rpb24gKGlkLCBzZXR1cCwgYXR0cmlidXRlcywgb3B0aW9ucykgeyAKICAgICAgICAgIC8vIFZpZGVvSnMgNSAoZmxhc2gvaHRtbDUpCiAgICAgICAgICAvLyBzZXR1cDogaHR0cDovL3Rpbnl1cmwuY29tL3BjZ3gyb2IKICAgICAgICAgIC8vIHBsYXliYWNrOiBodHRwOi8vdGlueXVybC5jb20vbnNjenRtbQogICAgICAgICAgLy8gZGVtbzogaHR0cDovL2pzZmlkZGxlLm5ldC9OOFpzNS8xOC8KICAgICAgICAgIC8vIHBsdWdpbnM6IGh0dHBzOi8vZ2l0aHViLmNvbS92aWRlb2pzL3ZpZGVvLmpzL3dpa2kvUGx1Z2lucwoKICAgICAgICAgIHRoaXMuZ2V0VGFyZ2V0Tm9kZShpZCk7CiAgICAgICAgICB0aGlzLmFyZ3MgPSBhcmd1bWVudHM7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBBYWsuc2V0UHJvcGVydGllcyh0aGlzLmF0dHJpYnV0ZXMsIGF0dHJpYnV0ZXMgfHwge30pOwogICAgICAgICAgdGhpcy5vcHRpb25zID0gQWFrLnNldFByb3BlcnRpZXModGhpcy5vcHRpb25zLCBvcHRpb25zIHx8IHt9KTsKCiAgICAgICAgICB0aGlzLnNldHVwID0gc2V0dXA7CiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNyb3NzU2V0dXAgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy5zZXR1cCA9IHsKICAgICAgICAgICAgICBjb250cm9scyA6IHRydWUsCiAgICAgICAgICAgICAgcHJlbG9hZCA6ICdhdXRvJywKICAgICAgICAgICAgICB3aWR0aCA6IHNldHVwLndpZHRoIHx8IHRoaXMuYXR0cmlidXRlcy53aWR0aCwKICAgICAgICAgICAgICBoZWlnaHQgOiBzZXR1cC5oZWlnaHQgfHwgdGhpcy5hdHRyaWJ1dGVzLmhlaWdodCwKICAgICAgICAgICAgICB0ZWNoT3JkZXIgOiBbImh0bWw1IiwgImZsYXNoIl0sCiAgICAgICAgICAgICAgYXV0b3BsYXkgOiBzZXR1cC5hdXRvcGxheSB8fCB0aGlzLmF1dG9wbGF5LAogICAgICAgICAgICAgIHNvdXJjZXMgOiBbewogICAgICAgICAgICAgICAgICB0eXBlIDogdGhpcy5nZXRNaW1lVHlwZShzZXR1cC50eXBlKSwKICAgICAgICAgICAgICAgICAgc3JjIDogc2V0dXAuc291cmNlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgXQogICAgICAgICAgICB9OwogICAgICAgICAgICAvKiBkb24ndCB3b3JrIAogICAgICAgICAgICBpZiAoc2V0dXAudHlwZSA9PT0gJ2hscycpIHsKICAgICAgICAgICAgICB0ZWNoT3JkZXIgOiBbImZsYXNoIiwgImh0bWw1Il0sCiAgICAgICAgICAgICAgdGhpcy5zZXR1cC5mbGFzaCA9IHsKICAgICAgICAgICAgICAgIC8vc3dmIDogIi8vcmVla3NpdGUuY29tL3B1YmxpYy9zd2YvdmlkZW9qcy1mbGFzaGxzLnN3ZiIKICAgICAgICAgICAgICAgIHN3ZiA6ICdodHRwOi8vd3d3LmZsYXNobHMub3JnL3ZpZGVvanMvdmlkZW8tanMuc3dmJwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgKi8KICAgICAgICAgIH0KCiAgICAgICAgICAvLyAKICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5zcmNkb2MgPSAnPGh0bWw+PGhlYWQ+PGxpbmsgaHJlZj0iJyArIGxvY2F0aW9uLnByb3RvY29sICsgJy8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL3ZpZGVvLmpzLzUuMTAuNS9hbHQvdmlkZW8tanMtY2RuLm1pbi5jc3MiIHJlbD0ic3R5bGVzaGVldCI+PHNjcmlwdCBzcmM9IicgKyBsb2NhdGlvbi5wcm90b2NvbCArICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy92aWRlby5qcy81LjEwLjUvdmlkZW8ubWluLmpzIj48L3NjcmlwdD48c2NyaXB0IHNyYz0iJyArIGxvY2F0aW9uLnByb3RvY29sICsgJy8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL3ZpZGVvanMtY29udHJpYi1obHMvMy4xLjAvdmlkZW9qcy1jb250cmliLWhscy5taW4uanMiPjwvc2NyaXB0PjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+aHRtbCwgYm9keXtwYWRkaW5nOjA7IG1hcmdpbjowO30udmpzLWRlZmF1bHQtc2tpbntjb2xvcjojZWVlfS52anMtZGVmYXVsdC1za2luIC52anMtcGxheS1wcm9ncmVzcywudmpzLWRlZmF1bHQtc2tpbiAudmpzLXZvbHVtZS1sZXZlbHtiYWNrZ3JvdW5kLWNvbG9yOiNlZWV9LnZqcy1kZWZhdWx0LXNraW4gLnZqcy1iaWctcGxheS1idXR0b24sLnZqcy1kZWZhdWx0LXNraW4gLnZqcy1jb250cm9sLWJhcntiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsLjIpfS52anMtZGVmYXVsdC1za2luIC52anMtc2xpZGVye2JhY2tncm91bmQ6cmdiYSgwLDAsMCwuMyl9PC9zdHlsZT48L2hlYWQ+PGJvZHk+PHZpZGVvIGlkPSJ2anMtbW92aWUiIGNsYXNzPSJ2aWRlby1qcyB2anMtZGVmYXVsdC1za2luIHZqcy1iaWctcGxheS1jZW50ZXJlZCI+PC92aWRlbz48c2NyaXB0PnZpZGVvanMoInZqcy1tb3ZpZSIsICcgKyBKU09OLnN0cmluZ2lmeSh0aGlzLnNldHVwKSArICcpPC9zY3JpcHQ+PC9ib2R5PjwvaHRtbD4nOwoKICAgICAgICAgIHRoaXMuYnVpbGRpbmcoJ2lmcmFtZScpOwogICAgICAgIH0sCiAgICAgICAgZmxvd3BsYXllciA6IGZ1bmN0aW9uIChpZCwgc2V0dXAsIGF0dHJpYnV0ZXMsIG9wdGlvbnMpIHsKICAgICAgICAgIC8vIEZsb3dQbGF5ZXIgNiAoZmxhc2gpCiAgICAgICAgICAvLyBub3RlOiBwcm9ibGVtIHdpdGggZmxhc2hwbGF5ZXIKICAgICAgICAgIC8vIHN1cHBvcnQ6IG1wNCwgZmx2LCBmNHYsIG00diwgbW92CiAgICAgICAgICAvLyBzZXR1cDogaHR0cHM6Ly9mbG93cGxheWVyLm9yZy9kb2NzL3NldHVwLmh0bWwKICAgICAgICAgIC8vIGFwaTogaHR0cHM6Ly9mbG93cGxheWVyLm9yZy9kb2NzL2FwaS5odG1sCiAgICAgICAgICAvLyBkZW1vOiBodHRwOi8vZGVtb3MuZmxvd3BsYXllci5vcmcvYmFzaWNzL2pzLXNldHVwLWF1dG9wbGF5Lmh0bWwKICAgICAgICAgIC8vIGhkczogaHR0cHM6Ly9mbG93cGxheWVyLmVsZWN0cm90ZXF1ZS5vcmcvaHR0cHN0cmVhbWluZy1oZHMvZnA2CiAgICAgICAgICAvLyBobHM6IGh0dHA6Ly9kZW1vcy5mbG93cGxheWVyLm9yZy9hcGkvaGxzanMuaHRtbAogICAgICAgICAgLy8gZmx2OiBodHRwOi8vZGVtb3MuZmxvd3BsYXllci5vcmcvYmFzaWNzL2Zsdi5odG1sCgogICAgICAgICAgdGhpcy5nZXRUYXJnZXROb2RlKGlkKTsKICAgICAgICAgIHRoaXMuYXJncyA9IGFyZ3VtZW50czsKICAgICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IEFhay5zZXRQcm9wZXJ0aWVzKHRoaXMuYXR0cmlidXRlcywgYXR0cmlidXRlcyB8fCB7fSk7CiAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBBYWsuc2V0UHJvcGVydGllcyh0aGlzLm9wdGlvbnMsIG9wdGlvbnMgfHwge30pOwoKICAgICAgICAgIHRoaXMuc2V0dXAgPSBzZXR1cDsKICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY3Jvc3NTZXR1cCA9PT0gdHJ1ZSkgewogICAgICAgICAgICB0aGlzLnNldHVwID0gewogICAgICAgICAgICAgIHdpZHRoIDogc2V0dXAud2lkdGggfHwgdGhpcy5hdHRyaWJ1dGVzLndpZHRoLAogICAgICAgICAgICAgIGhlaWdodCA6IHNldHVwLmhlaWdodCB8fCB0aGlzLmF0dHJpYnV0ZXMuaGVpZ2h0LAogICAgICAgICAgICAgIGF1dG9wbGF5IDogc2V0dXAuYXV0b3BsYXkgfHwgdGhpcy5hdXRvcGxheSwKICAgICAgICAgICAgICBwcmVsb2FkIDogJ2F1dG8nCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGlmIChzZXR1cC50eXBlID09PSAnaGxzJykgewogICAgICAgICAgICAgIHRoaXMuc2V0dXAuc3dmID0gbG9jYXRpb24ucHJvdG9jb2wgKyAnLy9yZWxlYXNlcy5mbG93cGxheWVyLm9yZy82LjAuNS9mbG93cGxheWVyaGxzLnN3Zic7CiAgICAgICAgICAgICAgdGhpcy5zZXR1cC5lbmdpbmUgPSAnaGxzanMnOwogICAgICAgICAgICB9IGVsc2UgaWYgKFsnbXA0JywgJ3dlYm0nLCAnb2dnJywgJ29ndiddLmluZGV4T2Yoc2V0dXAudHlwZSkgPT09IC0xKSB7CiAgICAgICAgICAgICAgdGhpcy5zZXR1cC5zd2YgPSBsb2NhdGlvbi5wcm90b2NvbCArICcvL3JlbGVhc2VzLmZsb3dwbGF5ZXIub3JnLzYuMC41L2Zsb3dwbGF5ZXIuc3dmJzsKICAgICAgICAgICAgICB0aGlzLnNldHVwLmVuZ2luZSA9ICdmbGFzaCc7CiAgICAgICAgICAgICAgdGhpcy5zZXR1cC50eXBlID0gJ3ZpZGVvL2ZsYXNoJzsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnNldHVwLmNsaXAgPSB7CiAgICAgICAgICAgICAgc291cmNlcyA6IFt7CiAgICAgICAgICAgICAgICAgIHR5cGUgOiB0aGlzLmdldE1pbWVUeXBlKHRoaXMuc2V0dXAudHlwZSB8fCBzZXR1cC50eXBlKSwKICAgICAgICAgICAgICAgICAgc3JjIDogc2V0dXAuc291cmNlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgXQogICAgICAgICAgICB9OwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5zcmNkb2MgPSAnPGh0bWw+PGhlYWQ+PGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSInICsgbG9jYXRpb24ucHJvdG9jb2wgKyAnLy9yZWxlYXNlcy5mbG93cGxheWVyLm9yZy82LjAuNS9za2luL2Z1bmN0aW9uYWwuY3NzIj48L3NjcmlwdD48c2NyaXB0IHNyYz0iJyArIGxvY2F0aW9uLnByb3RvY29sICsgJy8vY29kZS5qcXVlcnkuY29tL2pxdWVyeS0xLjExLjIubWluLmpzIj48L3NjcmlwdD48c2NyaXB0IHNyYz0iJyArIGxvY2F0aW9uLnByb3RvY29sICsgJy8vcmVsZWFzZXMuZmxvd3BsYXllci5vcmcvNi4wLjUvZmxvd3BsYXllci5taW4uanMiPjwvc2NyaXB0PjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+aHRtbCwgYm9keXtwYWRkaW5nOjA7IG1hcmdpbjowO308L3N0eWxlPjwvaGVhZD48Ym9keT48ZGl2IGlkPSJmcC1tb3ZpZSI+PC9kaXY+PHNjcmlwdD5mbG93cGxheWVyKCIjZnAtbW92aWUiLCAnICsgSlNPTi5zdHJpbmdpZnkodGhpcy5zZXR1cCkgKyAnKTs8L3NjcmlwdD48L2JvZHk+PC9odG1sPic7CgogICAgICAgICAgdGhpcy5idWlsZGluZygnaWZyYW1lJyk7CiAgICAgICAgfSwKICAgICAgICBncmluZHBsYXllciA6IGZ1bmN0aW9uIChpZCwgc2V0dXAsIGF0dHJpYnV0ZXMsIG9wdGlvbnMpIHsKICAgICAgICAgIC8vIEdyaW5kUGxheWVyIDEgKGZsYXNoKQogICAgICAgICAgLy8gc2V0dXA6IGh0dHA6Ly9vc21maGxzLmt1dHUucnUvZG9jcy9ncmluZC8KICAgICAgICAgIC8vIHN1cHBvcnQ6IGhscywgcnRtcAoKICAgICAgICAgIHRoaXMuZ2V0VGFyZ2V0Tm9kZShpZCk7CiAgICAgICAgICB0aGlzLmFyZ3MgPSBhcmd1bWVudHM7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBBYWsuc2V0UHJvcGVydGllcyh0aGlzLmF0dHJpYnV0ZXMsIGF0dHJpYnV0ZXMgfHwge30pOwogICAgICAgICAgdGhpcy5vcHRpb25zID0gQWFrLnNldFByb3BlcnRpZXModGhpcy5vcHRpb25zLCBvcHRpb25zIHx8IHt9KTsKCiAgICAgICAgICB0aGlzLnNldHVwID0gc2V0dXA7CiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNyb3NzU2V0dXAgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy5zZXR1cCA9IHsKICAgICAgICAgICAgICBzcmMgOiBzZXR1cC5zb3VyY2UsCiAgICAgICAgICAgICAgc3RyZWFtVHlwZSA6ICJsaXZlIiwKICAgICAgICAgICAgICBzY2FsZU1vZGUgOiAibGV0dGVyYm94IiwKICAgICAgICAgICAgICBhdXRvUGxheSA6IHNldHVwLmF1dG9wbGF5IHx8IHRoaXMuYXV0b3BsYXkKICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKHNldHVwLnR5cGUgPT09ICdobHMnKSB7CiAgICAgICAgICAgICAgdGhpcy5zZXR1cC5wbHVnaW5faGxzID0gIi8vcmVla3NpdGUuY29tL3B1YmxpYy9zd2YvZmxhc2hsc09TTUYuc3dmIjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc2V0dXAucHJveHkgPT09IHRydWUpIHsKICAgICAgICAgICAgICB0aGlzLnNldHVwLnNyYyA9ICcvL3d3dy5kaWFuc2hpYm8uY29tL2ZldGNoLnBocC8nICsgc2V0dXAuc291cmNlLnN1YnN0cmluZyhzZXR1cC5zb3VyY2UuaW5kZXhPZignLy8nKSArIDIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLnNyYyA9IHNldHVwLnN3ZiB8fCB0aGlzLmF0dHJpYnV0ZXMuc3JjIHx8ICIvL3JlZWtzaXRlLmNvbS9wdWJsaWMvc3dmL0dyaW5kUGxheWVyLnN3ZiI7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMuaGVpZ2h0ID0gc2V0dXAuaGVpZ2h0IHx8IHRoaXMuYXR0cmlidXRlcy5oZWlnaHQ7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMud2lkdGggPSBzZXR1cC53aWR0aCB8fCB0aGlzLmF0dHJpYnV0ZXMud2lkdGg7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMuZmxhc2h2YXJzID0gQWFrLnNlcmlhbGl6ZSh0aGlzLnNldHVwKTsKCiAgICAgICAgICB0aGlzLmJ1aWxkaW5nKCdlbWJlZCcpOwogICAgICAgIH0sCiAgICAgICAgdmxjIDogZnVuY3Rpb24gKGlkLCBzZXR1cCwgYXR0cmlidXRlcywgb3B0aW9ucykgewogICAgICAgICAgLy8gVkxDIFdlYiBQbHVnaW4gKHBsdWdpbikKICAgICAgICAgIC8vIGRvYzogaHR0cDovL3Rpbnl1cmwuY29tL29tbHpwMzkKICAgICAgICAgIC8vIHBsdWdpbnM6IGFib3V0OnBsdWdpbnMKICAgICAgICAgIC8vIGNocm9tZTovL2ZsYWdzLyNlbmFibGUtbnBhcGkKICAgICAgICAgIC8vIGh0dHBzOi8vd3d3LmNocm9taXVtLm9yZy9kZXZlbG9wZXJzL25wYXBpLWRlcHJlY2F0aW9uCiAgICAgICAgICAvLyBJbiBTZXB0ZW1iZXIgMjAxNSAoQ2hyb21lIDQ1KSB3ZSB3aWxsIHJlbW92ZSB0aGUgb3ZlcnJpZGUgYW5kIE5QQVBJIHN1cHBvcnQgd2lsbCBiZSBwZXJtYW5lbnRseSByZW1vdmVkIGZyb20gQ2hyb21lLiBJbnN0YWxsZWQgZXh0ZW5zaW9ucyB0aGF0IHJlcXVpcmUgTlBBUEkgcGx1Z2lucyB3aWxsIG5vIGxvbmdlciBiZSBhYmxlIHRvIGxvYWQgdGhvc2UgcGx1Z2lucy4KCiAgICAgICAgICB0aGlzLm5hbWUgPSAndmxjJzsKICAgICAgICAgIHRoaXMuZ2V0VGFyZ2V0Tm9kZShpZCk7CiAgICAgICAgICB0aGlzLmFyZ3MgPSBhcmd1bWVudHM7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBBYWsuc2V0UHJvcGVydGllcyh0aGlzLmF0dHJpYnV0ZXMsIGF0dHJpYnV0ZXMgfHwge30pOwogICAgICAgICAgdGhpcy5vcHRpb25zID0gQWFrLnNldFByb3BlcnRpZXModGhpcy5vcHRpb25zLCBvcHRpb25zIHx8IHt9KTsKCiAgICAgICAgICB0aGlzLnNldHVwID0gc2V0dXA7CiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNyb3NzU2V0dXAgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLnNyYyA9IHNldHVwLnNvdXJjZTsKICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLmhlaWdodCA9IHNldHVwLmhlaWdodCB8fCB0aGlzLmF0dHJpYnV0ZXMuaGVpZ2h0OwogICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMud2lkdGggPSBzZXR1cC53aWR0aCB8fCB0aGlzLmF0dHJpYnV0ZXMud2lkdGg7CiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5jb250cm9scyA9IHRydWU7CiAgICAgICAgICAgIGlmIChzZXR1cC5hdXRvcGxheSB8fCB0aGlzLmF1dG9wbGF5KSB7CiAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLmF1dG9wbGF5ID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy50eXBlID0gImFwcGxpY2F0aW9uL3gtdmxjLXBsdWdpbiI7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMucGx1Z2luc3BhZ2UgPSAiaHR0cDovL3d3dy52aWRlb2xhbi5vcmciOwogICAgICAgICAgdGhpcy5idWlsZGluZygnZW1iZWQnKTsKICAgICAgICB9LAogICAgICAgIGh0bWw1IDogZnVuY3Rpb24gKGlkLCBzZXR1cCwgYXR0cmlidXRlcywgb3B0aW9ucykgeyAKICAgICAgICAgIC8vIFZpZGVvIFRhZyAoaHRtbDUpCiAgICAgICAgICAvLyBiYXNpY3M6IGh0dHBzOi8vaHRtbDVyb2Nrcy5jb20vZW4vdHV0b3JpYWxzL3ZpZGVvL2Jhc2ljcy8KICAgICAgICAgIC8vIHRhZzogaHR0cDovL3d3dy53M3NjaG9vbHMuY29tL3RhZ3MvdGFnX3ZpZGVvLmFzcAogICAgICAgICAgLy8gc3VwcG9ydDogbXA0LCB3ZWJtLCBvZ2cKICAgICAgICAgIC8vIHRlc3Q6IGh0dHA6Ly93d3cucXVpcmtzbW9kZS5vcmcvaHRtbDUvdGVzdHMvdmlkZW8uaHRtbAoKICAgICAgICAgIHRoaXMub3B0aW9ucyA9IEFhay5zZXRQcm9wZXJ0aWVzKHRoaXMub3B0aW9ucywgb3B0aW9ucyB8fCB7fSk7CgogICAgICAgICAgdGhpcy5nZXRUYXJnZXROb2RlKGlkKTsKICAgICAgICAgIHRoaXMuYXJncyA9IGFyZ3VtZW50czsKICAgICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IEFhay5zZXRQcm9wZXJ0aWVzKHt9LCBzZXR1cCB8fCB7fSk7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMuc3JjID0gc2V0dXAuc291cmNlOwogICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLmlkID0gdGhpcy5hdHRyaWJ1dGVzLm5hbWUgPSBBYWsuZ2VuZXJhdGVJRCgpOwogICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLmhlaWdodCA9IHRoaXMuYXR0cmlidXRlcy5oZWlnaHQgfHwgdGhpcy50YXJnZXQubm9kZS5jbGllbnRIZWlnaHQgfHwgIjEwMCUiOwogICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLndpZHRoID0gdGhpcy5hdHRyaWJ1dGVzLndpZHRoIHx8IHRoaXMudGFyZ2V0Lm5vZGUuY2xpZW50V2lkdGggfHwgIjEwMCUiOwogICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLnR5cGUgPSB0aGlzLmdldE1pbWVUeXBlKHRoaXMuYXR0cmlidXRlcy50eXBlKTsKICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5jb250cm9scyA9ICdjb250cm9scyc7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMucHJlbG9hZCA9ICdub25lJzsKICAgICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZXMuYXV0b3BsYXkgfHwgdGhpcy5hdXRvcGxheSkgewogICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMuYXV0b3BsYXkgPSAnYXV0b3BsYXknOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLnN0eWxlID0gJ2Rpc3BsYXk6IGJsb2NrOyBtYXJnaW46MCBhdXRvOyc7CiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBBYWsudW5zZXRQcm9wZXJ0aWVzKHRoaXMuYXR0cmlidXRlcywgJ3NvdXJjZScpOwoKICAgICAgICAgIHRoaXMuYnVpbGRpbmcoJ3ZpZGVvJyk7CiAgICAgICAgfQogICAgICB9OwogICAgICAKICAgICAgcmV0dXJuIG5ldyBQbGF5ZXIoKTsKICAgIH0sCiAgICBydWxlcyA6IHsKICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgLy8gQW50aS1BZGJsb2NrIEtpbGxlcgogICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICBzZXR0aW5ncyA6IHsKICAgICAgICBob3N0IDogWydsb2NhbGhvc3QnLCAncmVlay5naXRodWIuaW8nLCAncmVla3NpdGUuY29tJ10sCiAgICAgICAgb25FbmQgOiBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgaWYgKC9cL2FudGktYWRibG9jay1raWxsZXIoLXBhZ2VzKT9cLyQvLnRlc3QobG9jYXRpb24ucGF0aG5hbWUpKSB7CiAgICAgICAgICAgIHZhciBzZXR0aW5nc0JveCA9IEFhay5nZXRFbGVtZW50KCcjYWFrLXNldHRpbmdzLWJveCcpOwogICAgICAgICAgICB2YXIgc2V0dGluZ3NOb3RpY2UgPSBBYWsuZ2V0RWxlbWVudCgnI2Fhay1zZXR0aW5ncy1ub3RpY2UnKTsKCiAgICAgICAgICAgIGlmICghQWFrLnVzZUdNKSB7CiAgICAgICAgICAgICAgc2V0dGluZ3NOb3RpY2UucXVlcnlTZWxlY3RvcignZGl2JykuaW5uZXJIVE1MID0gJ0luIG5hdGl2ZSBtb2RlLCB5b3UgbXVzdCBlZGl0IHRoZSBvcHRpb25zIG1hbnVhbGx5OiA8YSBocmVmPSInICsgQWFrLm5hdGl2ZVVSTCArICciPlNlZTwvYT4nOwogICAgICAgICAgICB9IGVsc2UgaWYgKHNldHRpbmdzQm94ICYmIHNldHRpbmdzTm90aWNlKSB7CiAgICAgICAgICAgICAgc2V0dGluZ3NOb3RpY2Uuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICBzZXR0aW5nc0JveC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgICBBYWsuaW5mbygnR00gc3RvcmFnZTonLCBBYWsuZ2V0VmFsdWUoKSk7CiAgICAgICAgICAgICAgQWFrLmluZm8oJ0dNIG9wdGlvbnM6JywgQWFrLm9wdHMpOwogICAgICAgICAgICAgIEFhay5pbmZvKCdHTSBhcGk6JywgQWFrLnVzZUdNICYmIEFhay5hcGlHTSgpKTsKCiAgICAgICAgICAgICAgLy8gdXNlciBjb25maWcKICAgICAgICAgICAgICBBYWsuY3JlYXRlRWxlbWVudCh7CiAgICAgICAgICAgICAgICB0YWcgOiAnZGl2JywKICAgICAgICAgICAgICAgIGh0bWwgOiAnVmVyc2lvbjogJyArIEFhay5nZXRWZXJzaW9uKCkgKyAnIDxicj5BYWtTY3JpcHQ6IHRydWUgPGJyPkFha0xpc3Q6ICcgKyAoIUFhay5nZXRFbGVtZW50KCcjazJVdzdpc0hyTW01SlhQMVZ3ZHhjNTY3WktjMWFaNEknKSkgKyAnIDxicj5Ccm93c2VyOiAnICsgQWFrLmdldEJyb3dzZXIoKSArICcgPGJyPlNjcmlwdE1hbmFnZXI6ICcgKyBBYWsuZ2V0U2NyaXB0TWFuYWdlcigpLAogICAgICAgICAgICAgICAgYXBwZW5kIDogJyNhYWstc2V0dGluZ3MtY29uZmlnJwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAvLyBjcmVhdGUgb3B0aW9ucyAKICAgICAgICAgICAgICBmb3IgKHZhciBvcHROYW1lIGluIEFhay5vcHRpb25zKSB7CiAgICAgICAgICAgICAgICBpZiAoQWFrLm9wdGlvbnMuaGFzT3duUHJvcGVydHkob3B0TmFtZSkpIHsKICAgICAgICAgICAgICAgICAgdmFyIG9wdCA9IEFhay5vcHRpb25zW29wdE5hbWVdOwogICAgICAgICAgICAgICAgICB2YXIgY2hlY2tlZCA9IEFhay5vcHRzW29wdE5hbWVdID09PSB0cnVlID8gImNoZWNrZWQiIDogJyc7CiAgICAgICAgICAgICAgICAgIEFhay5jcmVhdGVFbGVtZW50KHsKICAgICAgICAgICAgICAgICAgICB0YWcgOiAnZGl2JywKICAgICAgICAgICAgICAgICAgICBodG1sIDogJzxpbnB1dCBpZD0iJyArIG9wdE5hbWUgKyAnIiBjbGFzcz0iY3NzLWNoZWNrYm94IiAnICsgY2hlY2tlZCArICcgdHlwZT0iJyArIG9wdC50eXBlICsgJyIvPjxsYWJlbCBmb3I9IicgKyBvcHROYW1lICsgJyIgdGl0bGU9IicgKyBvcHQuaW5mbyArICciIGNsYXNzPSJjc3MtbGFiZWwiPicgKyBvcHQubGFiZWwgKyAnPC9sYWJlbD4nLAogICAgICAgICAgICAgICAgICAgIGFwcGVuZCA6ICcjYWFrLXNldHRpbmdzLScgKyBvcHQuZ3JvdXAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAvLyBzYXZlIG9wdGlvbnMgCiAgICAgICAgICAgICAgQWFrLm9uRXZlbnQoQWFrLmdldEVsZW1lbnQoIiNhYWstc2V0dGluZ3Mtc2F2ZSIpLCAiY2xpY2siLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgZWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY3NzLWNoZWNrYm94Jyk7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgIHZhciBlbGVtID0gZWxlbXNbaV07CiAgICAgICAgICAgICAgICAgIGlmIChlbGVtLmNoZWNrZWQpIHsKICAgICAgICAgICAgICAgICAgICBBYWsuc2V0VmFsdWUoZWxlbS5pZCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgQWFrLnNldFZhbHVlKGVsZW0uaWQsIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KCdTYXZlZCAhJyk7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIC8vIENsZWFyIEdNIHN0b3JhZ2UKICAgICAgICAgICAgICBBYWsuYWRkQ29tbWFuZHMoewogICAgICAgICAgICAgICAgY2FwdGlvbiA6ICdDbGVhciBHTSBzdG9yYWdlJywKICAgICAgICAgICAgICAgIGV4ZWN1dGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIEFhay5kZWxldGVWYWx1ZSgpOwogICAgICAgICAgICAgICAgICB3aW5kb3cuYWxlcnQoJ0NsZWFyZWQgIScpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICB1c2Vyc2NyaXB0c19kb21haW5zIDogeyAvLyBSZWRpcmVjdCB0byBHaXRodWIKICAgICAgICBob3N0IDogWyd1c2Vyc2NyaXB0cy5vcmcnLCAndXNlcnNjcmlwdHMub3JnOjgwODAnLCAndXNlcnNjcmlwdHMtbWlycm9yLm9yZyddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoLzE1NTg0MCQvLnRlc3QobG9jYXRpb24ucGF0aG5hbWUpKSB7CiAgICAgICAgICAgIEFhay5nbyhBYWsuaG9tZVVSTCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICBvcGVudXNlcmpzX29yZyA6IHsKICAgICAgICBob3N0IDogWydvcGVudXNlcmpzLm9yZyddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBlbGVtZW50ID0gQWFrLmdldEVsZW1lbnQoJ2FbaHJlZiQ9Ii9pc3N1ZXMiXScpOwogICAgICAgICAgaWYgKC9BbnRpLUFkYmxvY2tfS2lsbGVyX1JlZWsvLnRlc3QobG9jYXRpb24ucGF0aG5hbWUpICYmIGVsZW1lbnQpIHsKICAgICAgICAgICAgQWFrLmNvbmZpcm1SZXBvcnQoZWxlbWVudCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICBncmVhc3lmb3JrX29yZyA6IHsKICAgICAgICBob3N0IDogWydncmVhc3lmb3JrLm9yZyddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBlbGVtZW50ID0gQWFrLmdldEVsZW1lbnQoJ2FbaHJlZiQ9Ii9mZWVkYmFjayJdJyk7CiAgICAgICAgICBpZiAoLy1hbnRpLWFkYmxvY2sta2lsbGVyLXJlZWsvLnRlc3QobG9jYXRpb24ucGF0aG5hbWUpICYmIGVsZW1lbnQpIHsKICAgICAgICAgICAgQWFrLmNvbmZpcm1SZXBvcnQoZWxlbWVudCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICBtb25rZXlndXRzX2NvbSA6IHsKICAgICAgICBob3N0IDogWydtb25rZXlndXRzLmNvbSddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBlbGVtZW50ID0gQWFrLmdldEVsZW1lbnQoJ2FbaHJlZio9ImNvZGUucGhwP25hdj1mb3J1bSJdJyk7CiAgICAgICAgICBpZiAoL21vbmtleWd1dHMuY29tXC9jb2RlLnBocFw/aWQ9MzUxLy50ZXN0KGxvY2F0aW9uLmhyZWYpICYmIGVsZW1lbnQpIHsKICAgICAgICAgICAgQWFrLmNvbmZpcm1SZXBvcnQoZWxlbWVudCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAvLyBTcGVjaWZpYwogICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICBibG9nc3BvdCA6IHsKICAgICAgICAvLyBObyBDb3VudHJ5IFJlZGlyZWN0IChOQ1IpCiAgICAgICAgLy8gUHJldmVudCBCbG9nZ2VyIGZyb20gUmVkaXJlY3RpbmcgdG8gQ291bnRyeS1TcGVjaWZpYyBEb21haW5zCiAgICAgICAgLy8gZG9jOiBodHRwOi8vdGlueXVybC5jb20vN3JtMzRqbwogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dyZWFzeWZvcmsub3JnL2ZyL2ZvcnVtL2Rpc2N1c3Npb24vNTk1MwogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy80OTAKICAgICAgICAvLyB0ZXN0OiBodHRwOi8vdGlueXVybC5jb20vbm9tY3hrYwogICAgICAgIGhvc3QgOiBbJy5ibG9nc3BvdC4nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKEFhay5pc1RvcGZyYW1lKSB7IC8vIGZpeCByZWRpcmV0aW9uIGxvb3AKICAgICAgICAgICAgdmFyIGJsb2cgPSBsb2NhdGlvbi5ob3N0LnJlcGxhY2UoJ3d3dy4nLCAnJykuc3BsaXQoIi4iKTsKICAgICAgICAgICAgaWYgKGJsb2dbYmxvZy5sZW5ndGggLSAxXSAhPSAiY29tIikgewogICAgICAgICAgICAgIHZhciBwYXRoID0gbG9jYXRpb24uaHJlZi5zcGxpdCgiLyIpLnNsaWNlKDMpLmpvaW4oJy8nKTsKICAgICAgICAgICAgICBBYWsuZ28oImh0dHA6Ly8iICsgYmxvZ1swXSArICIuYmxvZ3Nwb3QuY29tL25jci8iICsgcGF0aCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIGJsb2dzcG90X2tub3dsZXQzMzg5IDogewogICAgICAgIC8vIG5vdGU6IGFsc28gYWRkZWQgYWJwIHJ1bGUKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvODMKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vQTNtQ1hRNWkKICAgICAgICBob3N0IDogWydrbm93bGV0MzM4OS5ibG9nc3BvdC4nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnNldExvY2FsKCdub2FkJywgZmFsc2UpOwogICAgICAgICAgQWFrLmFkZFN0eWxlKCIjZ0FkcyB7IGhlaWdodDogMTdweDsgfSAjZ0FkMiB7IGhlaWdodDogMTdweDsgfSIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgdXB0b2JveF91cHRvc3RyZWFtIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8zNTEKICAgICAgICBob3N0IDogWyd1cHRvYm94LmNvbScsICd1cHRvc3RyZWFtLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyBPbGQgc29sdXRpb24gW2RlcHJlY2F0ZWRdCiAgICAgICAgICB2YXIgaWQgPSBsb2NhdGlvbi5wYXRobmFtZS5tYXRjaCgvWzAtOWEtel17MTJ9Lyk7CiAgICAgICAgICBpZiAoaWQgIT09IG51bGwpIHsKICAgICAgICAgICAgQWFrLmFkZFN0eWxlKCIjIiArIGlkWzBdICsgIiB7IGhlaWdodDogMTJweDsgfSIpOwogICAgICAgICAgfQogICAgICAgICAgLy8gTmV3IDEyLjA1LjIwMTQKICAgICAgICAgIC8vICsgYWJwIHJ1bGUgKGFsdGVybmF0aXZlIHNvbHV0aW9uKQogICAgICAgICAgQWFrLmFkZFN0eWxlKCIjYWRibG9ja3RyYXAgeyBoZWlnaHQ6IDEycHg7IH0iKTsKICAgICAgICB9LAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIHJlbW92ZSBhZHMKICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KCcqW3NyY149Imh0dHA6Ly9hZHMudXB0b2JveC5jb20vIl0sKltocmVmXj0iaHR0cDovL2Fkcy51cHRvYm94LmNvbS8iXScpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgYW5pc3Vic2lhX2NvbSA6IHsKICAgICAgICBob3N0IDogWydhbmlzdWJzaWEuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vICsgYWJwIHJ1bGUgI0AjLmFkc2FudGlsb2sKICAgICAgICAgIEFhay5hZGRTdHlsZSgiLmFkc2FudGlsb2sgeyBoZWlnaHQ6IDVweDsgfSIpOwogICAgICAgIH0sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3LmpBbnRpQmxvY2sgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICAgIEFhay51dy5DZWtCbG9rID0gZnVuY3Rpb24gKCkge307CiAgICAgICAgfQogICAgICB9LAogICAgICBmcmVlZ2FtZXNlcnZlcmhvc3RfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xNTEyCiAgICAgICAgaG9zdCA6IFsnZnJlZWdhbWVzZXJ2ZXJob3N0LmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIiNmYWIxMyB7IGhlaWdodDogMTFweDsgfSIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZWxhaG1hZF9jb20gOiB7CiAgICAgICAgaG9zdCA6IFsnZWxhaG1hZC5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCIjYWRibG9jayB7IGhlaWdodDogMXB4OyB9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICBtcnR6Y21wM19uZXQgOiB7CiAgICAgICAgaG9zdCA6IFsnbXJ0emNtcDMubmV0J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiLnJ0bV9hZCB7IGhlaWdodDogMXB4OyB9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICBoZWlnaHRfbXlUZXN0QWQgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEyNDEKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvOTgzCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzI5MQogICAgICAgIGhvc3QgOiBbJ2JrbmltZS5jb20nLCAnZ280dXAuY29tJywgJ2RlYnJpZG8uY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiLm15VGVzdEFkIHsgaGVpZ2h0OiAxcHg7IH0iKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlYnJpZGZhc3RfbmV0d29yayA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9lbi9mb3J1bS9kaXNjdXNzaW9uLzk0MDYKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9lbi9mb3J1bS9kaXNjdXNzaW9uLzcwMTMKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTI3MgogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy83NjkKICAgICAgICBob3N0IDogWydkZWJyaWRmYXN0LmNvbScsICdnZXRkZWJyaWQuY29tJywgJ2RlYnJpZC51cycsICdsZWVjaGVyLnVzJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiLm15VGVzdEFkLCAubXkyNEFkLCAubmFiaWwgeyBoZWlnaHQ6IDFweDsgfSIpOwogICAgICAgIH0sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NpbXBsZUFkJykuaW5uZXJIVE1MID0gJzxwIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij5kZWJyaWRmYXN0LmNvbTwvcD4nOwogICAgICAgIH0KICAgICAgfSwKICAgICAgYmdfZ2xlZGFpX3R2IDogewogICAgICAgIGhvc3QgOiBbJ2JnLWdsZWRhaS50diddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIi5teUFkIHsgaGVpZ2h0OiAxcHg7IH0iKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHRoZXBjc3B5X2NvbSA6IHsgLy8gaHR0cDovL3RoZXBjc3B5LmNvbS9yZWFkL2hvd190b19ibG9ja19hZGJsb2NrLwogICAgICAgIGhvc3QgOiBbJ3RoZXBjc3B5LmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIi5teVRlc3RBZCB7IGhlaWdodDogMXB4OyB9Iik7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIi5ibG9ja2VkIHsgZGlzcGxheTogbm9uZTsgfSIpOwogICAgICAgIH0sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJy5ibG9ja2VkJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICB2Z19lMjRfbm8gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzI5MgogICAgICAgIGhvc3QgOiBbJ3ZnLm5vJywgJ2UyNC5ubyddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyBBZGQgdGhpcyBydWxlLCBiZWNhdXNlIEVhc3lMaXN0IGFsbG93IGFsbCBoaWRkZW4gZWxlbWVudHMuCiAgICAgICAgICBBYWsuYWRkU3R5bGUoIi5hZCB7IGRpc3BsYXk6IG5vbmU7IH0iKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGF1dG9tb2JpbGVfc3BvcnRpdmVfY29tIDogewogICAgICAgIGhvc3QgOiBbJ2F1dG9tb2JpbGUtc3BvcnRpdmUuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiLm15VGVzdEFkIHsgaGVpZ2h0OiA1MXB4OyBkaXNwbGF5OiBub25lOyB9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICBzbnN3X3VzIDogewogICAgICAgIGhvc3QgOiBbJ3Nuc3cudXMnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCIjYWRfMSB7IGhlaWdodDogMXB4OyB9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICB1cmxjaGVja2VyX25ldCA6IHsKICAgICAgICBob3N0IDogWyd1cmxjaGVja2VyLm5ldCddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIiNhZGNoZWNrZXIgeyBoZWlnaHQ6IDIwcHg7IH0iKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHNraXBsaW1pdGVfdHYgOiB7CiAgICAgICAgaG9zdCA6IFsnc2tpcGxpbWl0ZS50diddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoImRpdi5hZGR0aGlzX25hdGl2ZV90b29sYm94ICsgZGl2W2lkXSB7IGhlaWdodDogMTJweDsgfSIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZmlsZWNvcmVfY29fbnogOiB7CiAgICAgICAgaG9zdCA6IFsnZmlsZWNvcmUuY28ubnonXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCIuYWRzZW5zZSB7IGhlaWdodDogNXB4OyB9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICB0aG9tYXNfbl9ydXRoX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTExMQogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS9mdTd2a1VBMQogICAgICAgIGhvc3QgOiBbJ3Rob21hcy1uLXJ1dGguY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiLkdvb2dsZSB7IGhlaWdodDogNXB4OyB9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICBpbnRlcmZhbnNfb3JnIDogewogICAgICAgIC8vIHRlc3Q6IGh0dHA6Ly93d3cuaW50ZXJmYW5zLm9yZy9mb3J1bS8KICAgICAgICBob3N0IDogWydpbnRlcmZhbnMub3JnJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiLmFkX2dsb2JhbF9oZWFkZXIgeyBoZWlnaHQ6IDFweDsgZGlzcGxheTogbm9uZTsgfSIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgbWF4ZGVicmlkZXVyX2NvbSA6IHsKICAgICAgICBob3N0IDogWydtYXhkZWJyaWRldXIuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiLmNsZWFyICsgZGl2W2lkXSB7IGhlaWdodDogMTJweDsgfSIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgdG9wem9uZV9pdCA6IHsKICAgICAgICBob3N0IDogWyd0b3B6b25lLmx0J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiLmZvcnVtQWQgeyBoZWlnaHQ6IDFweDsgZGlzcGxheTogbm9uZTsgfSIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgbmFuYTEwX2NvX2lsIDogewogICAgICAgIGhvc3QgOiBbJy5uYW5hMTAuJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiI2FkdmVydC10cmFja2VyIHsgaGVpZ2h0OiAxcHg7IH0iKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHBsZWpfdHYgOiB7CiAgICAgICAgaG9zdCA6IFsncGxlai50diddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIi5hZHZlcnRfYm94IHsgaGVpZ2h0OiAxcHg7IH0iKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG1hbmdhbWludF9jb20gOiB7CiAgICAgICAgLy8gbm90ZTogYWRkZWQgcnVsZSB0byBhbGxvdyAiLmFkNzI4IgogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dyZWFzeWZvcmsub3JnL2lkL2ZvcnVtL2Rpc2N1c3Npb24vODUyNAogICAgICAgIGhvc3QgOiBbJ21hbmdhbWludC5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCIuYWQ3MjggeyBoZWlnaHQ6IDMxcHg7IH0iKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlYnJpZGV1cnN0cmVhbV9mciA6IHsKICAgICAgICBob3N0IDogWydkZWJyaWRldXJzdHJlYW0uZnInXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCIjY29udGVudCBkaXZbaWRdW2FsaWduPWNlbnRlcl0geyBoZWlnaHQ6IDEycHg7IH0iKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHByZWVtbGlua3NfY29tIDogewogICAgICAgIGhvc3QgOiBbJ3ByZWVtbGlua3MuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiI2RpdmFkcyB7IGhlaWdodDogMXB4OyB9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICBoZW50YWlfdG8gOiB7CiAgICAgICAgaG9zdCA6IFsnaGVudGFpLnRvJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiI2hlbnRhaXRvMTIzIHsgaGVpZ2h0OiAxMXB4OyB9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICBwcm90b3R1cmtfY29tIDogewogICAgICAgIGhvc3QgOiBbJ3Byb3RvdHVyay5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCIjcmVrbGFtIHsgaGVpZ2h0OiAxcHg7IH0iKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG11ZmFfZGUgOiB7CiAgICAgICAgaG9zdCA6IFsnbXVmYS5kZSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIiNsZWFkZXJib2FyZCB7IGhlaWdodDogNXB4OyB9Iik7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIiNsYXJnZS1yZWN0YW5nbGUgeyBoZWlnaHQ6IDVweDsgfSIpOwogICAgICAgICAgQWFrLmFkZFN0eWxlKCIjYWQtaGVhZGVyLTQ2OHg2MCB7IGhlaWdodDogNXB4OyB9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICB3YXRjaGFyYWJfY29tIDogewogICAgICAgIGhvc3QgOiBbJ3dhdGNoYXJhYi5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gKyBhZHAgcnVsZSB3YXRjaGFyYWIuY29tI0AjI2FkYmxvY2sKICAgICAgICAgIEFhay5hZGRTdHlsZSgiI2FkYmxvY2sgeyBoZWlnaHQ6IDVweDsgfSIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZnJlZWRvbWlwX2NvbSA6IHsKICAgICAgICBob3N0IDogWydmcmVlZG9tLWlwLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIi5wdWJfdmVydGljYWwgaW5zLCAucHViX3ZlcnRpY2FsIGRpdiB7IGhlaWdodDogMTFweDsgfSIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgd2FrYW5pbV90diA6IHsKICAgICAgICBob3N0IDogWyd3YWthbmltLnR2J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiI2RldGVjdG9yIHsgZGlzcGxheTogbm9uZTsgfSIpOwogICAgICAgICAgQWFrLmFkZFN0eWxlKCIjbm9wdWIgeyBkaXNwbGF5OiBibG9jazsgfSIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgc2ltcGx5X2RlYnJpZF9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzMzMgogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS9iN01BWVhzNAogICAgICAgIGhvc3QgOiBbJ3NpbXBseS1kZWJyaWQuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay51dy5hZHNieWdvb2dsZSA9IHt9OwogICAgICAgICAgQWFrLnV3LmFkc2J5Z29vZ2xlLmxvYWRlZCA9IHRydWU7CiAgICAgICAgfQogICAgICB9LAogICAgICBtYW5nYTlfY29tIDogewogICAgICAgIGhvc3QgOiBbJ21hbmdhOS5jb20nLCAnbWFuZ2FiZWUuY28nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCIuYWRibG9jayB7IGhlaWdodDogMzFweDsgfSIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgb25lbWFuZ2EyX2NvbSA6IHsKICAgICAgICBob3N0IDogWydvbmVtYW5nYTIuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiLmFmc19hZHMgeyBoZWlnaHQ6IDVweDsgfSIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgbWFuZ2FiaXJkX2NvbSA6IHsKICAgICAgICBob3N0IDogWydtYW5nYWJpcmQuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiLmFmc19hZHMgeyBoZWlnaHQ6IDVweDsgfSIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAga29kaWxpdmVfZXUgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzE1MjgKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vWnh2WEtxdGMKICAgICAgICBob3N0IDogWydrb2RpbGl2ZS5ldSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIi5BZCB7IGhlaWdodDogNXB4OyB9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICBiYWNraW5fbmV0IDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPWJhY2tpbi5uZXQKICAgICAgICBob3N0IDogWydiYWNraW4ubmV0J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiI2RpdmFkIHsgaGVpZ2h0OiAzMXB4OyB9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICBtb2JpbGVfdHJhY2tlcl9mcmVlX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTA4MgogICAgICAgIGhvc3QgOiBbJ21vYmlsZS10cmFja2VyLWZyZWUuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiI215QWRzIHsgaGVpZ2h0OiAxcHg7IH0iKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHdvcmt1cGxvYWRfY29tIDogewogICAgICAgIC8vIG5vdGU6IG9iZnVzY2F0ZWQKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTMzNAogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMjkwCiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL0NQemQyU3d4CiAgICAgICAgaG9zdCA6IFsnd29ya3VwbG9hZC5jb20nXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiLmFkQmxvY2ssIC5hZHNieWdvb2dsZSwgI3NhZCB7IGhlaWdodDogMTFweDsgfSIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgdG9kYXlfaW4gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9aW50b2RheS5pbgogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPWJ1c2luZXNzdG9kYXkuaW4KICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vZ3o1MzlHN20KICAgICAgICBob3N0IDogWyJpbnRvZGF5LmluIiwgImJ1c2luZXNzdG9kYXkuaW4iXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24oKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoJyNhZGJvY2tlcl9hbHQgeyBkaXNwbGF5OiBub25lOyB9Jyk7CiAgICAgICAgICBBYWsudXcub3BlblBvcHVwID0gZnVuY3Rpb24oKXt9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgamNfbXBfY29tIDogewogICAgICAgIC8vIGJ5OiBHaXdheXVtZQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xNTk3CiAgICAgICAgaG9zdCA6IFsiamMtbXAuY29tIl0sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCcuYWRzZW5zZSB7d2lkdGg6IDFweDsgaGVpZ2h0OiAxcHg7IHZpc2liaWxpdHk6IGhpZGRlbjsgZGlzcGxheTogYmxvY2s7IHBvc2l0aW9uOiBhYnNvbHV0ZTt9Jyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBtYXJpYWdlX2ZyYW5jb19tYXJvY2Fpbl9uZXQgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9bWFyaWFnZS1mcmFuY28tbWFyb2NhaW4ubmV0CiAgICAgICAgaG9zdCA6IFsibWFyaWFnZS1mcmFuY28tbWFyb2NhaW4ubmV0Il0sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCcjbXlfYWRfZGl2IHtoZWlnaHQ6IDFweDt9Jyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBoYXBweV9oYWNrX3J1IDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPWhhcHB5LWhhY2sucnUKICAgICAgICBob3N0IDogWydoYXBweS1oYWNrLnJ1J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiI2Jsb2NrYmxvY2tGNCB7dmlzaWJpbGl0eTppbnZpc2libGU7ZGlzcGxheTpub25lO30gI2Jsb2NrYmxvY2tGNCB0ZCB7dmlzaWJpbGl0eTppbnZpc2libGU7ZGlzcGxheTpub25lO30gI2Jsb2NrYmxvY2tGNCB0ZCBwIHt2aXNpYmlsaXR5OmludmlzaWJsZTtkaXNwbGF5Om5vbmU7fSAjYmxvY2tibG9ja0QzIHt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTpibG9jazt9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICBmb3JiZXNfY29tIDogewogICAgICAgIC8vIGJ5OiBHaXdheXVtZQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy84NjUKICAgICAgICBob3N0IDogWydmb3JiZXMuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZignL3dlbGNvbWUnKSA+IC0xKSB7CiAgICAgICAgICAgIEFhay5zZXRDb29raWUoJ3dlbGNvbWVBZCcsICd0cnVlJywgODY0MDAwMDAsICcvJyk7CiAgICAgICAgICAgIEFhay5zZXRDb29raWUoJ2RhaWx5V2VsY29tZUNvb2tpZScsICd0cnVlJywgODY0MDAwMDAsICcvJyk7CiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IEFhay5nZXRDb29raWUoJ3RvVXJsJykgfHwgJ2h0dHA6Ly93d3cuZm9yYmVzLmNvbS8nOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgYmFpdF9hZHNieWdvb2dsZSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNTQ3CiAgICAgICAgaG9zdCA6IFsnYml0Y29pbmFsaWVucy5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZEJhaXRFbGVtZW50KCdpbnMuYWRzYnlnb29nbGUnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGJhaXRfdGVzdGVyIDogewogICAgICAgIGhvc3QgOiBbJ29zb2FyY2FkZS5jb20nLCAnZDNicmlkNHkwdS5pbmZvJywgJ2ZpbGVpY2UubmV0JywgJ25vc3RlYW0ucm8nLCAnb3BlbnJ1bm5lci5jb20nLCAnZWFzeWJpbGxldHMuY29tJywgJ3Nwb3guZnInLCAneW92b3lhZ2VzLmNvbScsICd0djMuY28ubnonLCAnZnJlZWFsbG11c2ljLmluZm8nLCAncHV0bG9ja2VyLmNvbScsICdzb2Nrc2hhcmUuY29tJywgJ2RyYW1hcGFzc2lvbi5jb20nLCAneW9vY2xpY2suY29tJywgJ29ubGluZS51YSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkQmFpdEVsZW1lbnQoJ2RpdiN0ZXN0ZXInKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGJhaXRfYWRkIDogewogICAgICAgIGhvc3QgOiBbJ2ZpbGVjb20ubmV0JywgJ3Vwc2hhcmUub3JnJywgJ3NraXBweWZpbGUuY29tJywgJ213ZmlsZXMubmV0JywgJ3VwLWZsb3cub3JnJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2I2FkZCcpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgYmFpdF9hZHBidGVzdCA6IHsKICAgICAgICBob3N0IDogWydsZWFndWVzZWNyZXRhcnkuY29tJywgJ3Rla25vZ29kcy5jb20nLCAnaGVsbHNtZWRpYS5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZEJhaXRFbGVtZW50KCdkaXYjYWRwYnRlc3QnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGJhaXRfYWR0ZXN0ZXIgOiB7CiAgICAgICAgaG9zdCA6IFsnZnJlZXNwb3J0c2JldC5jb20nLCAnc3BvcnRzcGxheXMuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2I2FkLXRlc3RlcicpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgdGdvX3R2X2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMzAzCiAgICAgICAgaG9zdCA6IFsndGdvLXR2LmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIiNhZGIsICNiYW5uZXJhZDEsIC5sb2FkX3N0cmVhbSB7IGRpc3BsYXk6IG5vbmU7IH0iKTsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2I3Rlc3RlcicpOwogICAgICAgIH0sCiAgICAgICAgb25FbmQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcudGhyZXNob2xkID0gMTAwMDsKICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KCcuY2hhdF9mcmFtZScpOyAvLyBidWcgcmVsb2FkIGlmcmFtZQogICAgICAgIH0KICAgICAgfSwKICAgICAgZnJlZWdhbWVob3N0aW5nX25sIDogewogICAgICAgIGhvc3QgOiBbJ2ZyZWVnYW1laG9zdGluZy5ubCddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkQmFpdEVsZW1lbnQoJ2RpdiNhZHRlc3QnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHRoZXdlYXRoZXJzcGFjZV9jb20gOiB7CiAgICAgICAgaG9zdCA6IFsndGhld2VhdGhlcnNwYWNlLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkQmFpdEVsZW1lbnQoJ2RpdiNhYi1ibC1hZHZlcnRpc2VtZW50Jyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBjbGVvZGVza3RvcF9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzcxMQogICAgICAgIGhvc3QgOiBbJ2NsZW9kZXNrdG9wLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkQmFpdEVsZW1lbnQoJ2RpdiNteVRlc3RBZCcpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgaW1hZ2VyYWlkZXJfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy84MjYKICAgICAgICBob3N0IDogWydpbWFnZXJhaWRlci5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZEJhaXRFbGVtZW50KCdkaXYjbXlHQ29udGFpbmVyJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICB2b2ljaV9mciA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9mci9mb3J1bS9kaXNjdXNzaW9uLzEwMDkzCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzgyNgogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS96RVZRSFRpRAogICAgICAgIGhvc3QgOiBbJ3ZvaWNpLmZyJywgJ3Byb2dyYW1tZS10di5uZXQnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZEJhaXRFbGVtZW50KCdkaXYjc2FzX3NjcmlwdDInKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG1pbF9pbmsgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzE2NTIKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vNDc0Tlp6UEoKICAgICAgICBob3N0IDogWydtaWwuaW5rJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2I2Fkc19kaXYnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGN1YmV1cGxvYWRfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dyZWFzeWZvcmsub3JnL2VuL2ZvcnVtL2Rpc2N1c3Npb24vNTkxOQogICAgICAgIGhvc3QgOiBbJ2N1YmV1cGxvYWQuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5jcmVhdGVFbGVtZW50KHsKICAgICAgICAgICAgdGFnIDogJ2lmcmFtZScsCiAgICAgICAgICAgIG5hbWUgOiAnaWZyYW1lJywKICAgICAgICAgICAgc3JjIDogJ2Fib3V0OmJsYW5rJywKICAgICAgICAgICAgc3R5bGUgOiAnZGlzcGxheTpub25lOycsCiAgICAgICAgICAgIGFwcGVuZCA6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBzdHJlYW00ZnJlZV9ldSA6IHsKICAgICAgICBob3N0IDogWydzdHJlYW00ZnJlZS5ldSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyArYWJwIGFsdCBzb2x1dGlvbgogICAgICAgICAgQWFrLmFkZEJhaXRFbGVtZW50KCdkaXYjanBheWRheScpOwogICAgICAgICAgQWFrLnV3LmpwYXlkYXlfYWxlcnQgPSAxOwogICAgICAgIH0KICAgICAgfSwKICAgICAgXzNkbmV3c19ydSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9ydS9mb3J1bS9kaXNjdXNzaW9uLzU3NTAKICAgICAgICBob3N0IDogWyczZG5ld3MucnUnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnNldENvb2tpZSgnYWRibG9ja3dhcm4nLCAxKTsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiI2VhckFkcyB7IHdpZHRoOiA0MDFweDsgfSIpOwogICAgICAgICAgQWFrLmFkZEJhaXRFbGVtZW50KCdkaXYjZWFyQWRzJyk7CiAgICAgICAgICBBYWsudXcuX19BVF9kZXRlY3RlZCA9IHRydWU7CiAgICAgICAgfQogICAgICB9LAogICAgICBfM2RzdGhlbV9lcyA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT0zZHN0aGVtCiAgICAgICAgaG9zdCA6IFsnM2RzdGhlbS5lcyddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvL0Fhay5hZGRTY3JpcHQoZnVuY3Rpb24gKCkge30pOwogICAgICAgIH0sCiAgICAgICAgb25CZWZvcmVTY3JpcHQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgLyoKICAgICAgICAgIHJldHVybiBbewogICAgICAgICAgICAgIGNvbnRhaW5zIDogJ21haW4uanMnLAogICAgICAgICAgICAgIGV4dGVybmFsIDogdHJ1ZSwKICAgICAgICAgICAgICBvdmVycmlkZSA6ICcvL3Bhc3RlYmluLmNvbS9yYXcvMnlHUlBoUlonCiAgICAgICAgICAgIH0KICAgICAgICAgIF07CiAgICAgICAgKi8KICAgICAgICB9CiAgICAgIH0sCiAgICAgIF84bXVzZXNfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPThtdXNlcwogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dyZWFzeWZvcmsub3JnL2ZvcnVtL2Rpc2N1c3Npb24vODUxNQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dyZWFzeWZvcmsub3JnL2VuL2ZvcnVtL2Rpc2N1c3Npb24vNjQwNwogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS9iTU5EeGVjcwogICAgICAgIGhvc3QgOiBbJzhtdXNlcy5jb20nXSwKICAgICAgICBvbkJlZm9yZVNjcmlwdCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBbewogICAgICAgICAgICAgIGNvbnRhaW5zIDogInR5cGVvZiBleG8iLAogICAgICAgICAgICAgIGV4dGVybmFsIDogZmFsc2UsCiAgICAgICAgICAgICAgcmVtb3ZlIDogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgICBdOwogICAgICAgIH0KICAgICAgfSwKICAgICAgaGFwcHl0cmlwc19jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9aGFwcHl0cmlwcwogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS9FV1NFYm52dgogICAgICAgIGhvc3QgOiBbJ2hhcHB5dHJpcHMuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5zZXRSZWFkT25seSgnY2FuUnVuJywgdHJ1ZSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBsZ19maXJtd2FyZV9yb21fY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPWxnLWZpcm13YXJlLXJvbS5jb20KICAgICAgICBob3N0IDogWydsZy1maXJtd2FyZS1yb20uY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5zZXRSZWFkT25seSgna2lsbGFkcycsIHRydWUpOwogICAgICAgIH0KICAgICAgfSwgICAgICAKICAgICAgbWlkX2RheV9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9bWlkLWRheS5jb20KICAgICAgICBob3N0IDogWydtaWQtZGF5LmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuc2V0UmVhZE9ubHkoJ2NhblJ1bicsIHRydWUpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgYmFkdHZfbmV0d29yayA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT1iYWR0di5pdAogICAgICAgIGhvc3QgOiBbJ2JhZHR2Lml0JywgJ2JhZHRhc3RlLml0JywgJ2JhZGdhbWVzLml0JywgJ2JhZGNvbWljcy5pdCddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuc2V0Q29va2llKCdhZEJsb2NrQ2hlY2tlZCcsICdkaXNhdHRpdm8nKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGluZGVwZW5kZW50X2NvX3VrIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPWluZGVwZW5kZW50LmNvLnVrCiAgICAgICAgaG9zdCA6IFsnaW5kZXBlbmRlbnQuY28udWsnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnNldENvb2tpZSgnYWRibG9ja19kZXRlY3RlZCcsICdpZ25vcmVkJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBlc21hc19jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9ZXNtYXMuY29tCiAgICAgICAgaG9zdCA6IFsnZXNtYXMuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5zZXRSZWFkT25seSgnb3BlbmVkX2FkYmJsb2NrJywgZmFsc2UpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgcGlub3kxdHZfbmV0d29yayA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT1waW5veTF0dgogICAgICAgIGhvc3QgOiBbJ3Bpbm95MXR2LiddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuc2V0UmVhZE9ubHkoJ2FsbG93YWRzJywgMSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBld2FsbHN0cmVldGVyX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT1ld2FsbHN0cmVldGVyLmNvbQogICAgICAgIGhvc3QgOiBbJ2V3YWxsc3RyZWV0ZXIuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5zZXRSZWFkT25seSgnT0FTX3JkbCcsIDEpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgYnVzaW5lc3Nfc3RhbmRhcmRfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPWJ1c2luZXNzLXN0YW5kYXJkLmNvbQogICAgICAgIGhvc3QgOiBbJ2J1c2luZXNzLXN0YW5kYXJkLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuc2V0UmVhZE9ubHkoJ2Fkc0xvYWRlZCcsIDEpOwogICAgICAgICAgQWFrLnNldENvb2tpZSgnX3B3JywgJ3QnKTsgICAgICAgICAgCiAgICAgICAgfQogICAgICB9LAogICAgICBleHByZXNzX25ldHdvcmsgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9ZmluYW5jaWFsZXhwcmVzcy5jb20KICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT1pbmRpYW5leHByZXNzLmNvbQogICAgICAgIGhvc3QgOiBbJ2ZpbmFuY2lhbGV4cHJlc3MuY29tJywgJ2luZGlhbmV4cHJlc3MuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5zZXRSZWFkT25seSgnUnVuQWRzJywgMSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBpbmRpYXRpbWVzX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT1pbmRpYXRpbWVzCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9bWFsYXlhbGFtLnNhbWF5YW0uY29tCiAgICAgICAgLy8gdGVzdDogaHR0cDovL3Rpbnl1cmwuY29tL3p4dXN2eWYsIAogICAgICAgIGhvc3QgOiBbJ2luZGlhdGltZXMuY29tJywgJ3NhbWF5YW0uY29tJywgJ2JhbmdhbG9yZW1pcnJvci5jb20nXSwKICAgICAgICBvbkJlZm9yZVNjcmlwdCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBbewogICAgICAgICAgICAgIGNvbnRhaW5zIDogJ1xcXFx4NjFcXFxceDY0XFxcXHg2MicsCiAgICAgICAgICAgICAgZXh0ZXJuYWwgOiBmYWxzZSwKICAgICAgICAgICAgICByZW1vdmUgOiB0cnVlCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBjb250YWlucyA6ICdmdW5jdGlvbiBpbml0QmxvY2snLAogICAgICAgICAgICAgIGV4dGVybmFsIDogZmFsc2UsCiAgICAgICAgICAgICAgcmVtb3ZlIDogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgICBdOwogICAgICAgIH0KICAgICAgfSwKICAgICAgdGhlY2hpdmVfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xNDUzCiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL1RkcFB5cmJiCiAgICAgICAgaG9zdCA6IFsndGhlY2hpdmUuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTY3JpcHQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh3aW5kb3csIHsKICAgICAgICAgICAgICBzdGVwaGFuZURldGVjdG9yIDogewogICAgICAgICAgICAgICAgdmFsdWUgOiB7CiAgICAgICAgICAgICAgICAgIGhvb2sgOiBmdW5jdGlvbiAoY2IpIHsKICAgICAgICAgICAgICAgICAgICBjYihmYWxzZSk7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGluaXQgOiBmdW5jdGlvbiAoKSB7fSwKICAgICAgICAgICAgICAgICAgYnJvYWRjYXN0UmVzdWx0IDogZnVuY3Rpb24gKCkge30KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB3cml0YWJsZSA6IGZhbHNlCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgcmljaG9ucmFpbHNfY29tIDogewogICAgICAgIC8vIGJ5OiBHaXdheXVtZQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xNDQ3CiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL0V3ZndnOEJHCiAgICAgICAgaG9zdCA6IFsncmljaG9ucmFpbHMuY29tJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFNjcmlwdChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBhZHNCeUdvb2dsZUh0bWwgPSAnIjxpbnMraWQ9ImFzd2lmdF8wX2V4cGFuZCIrc3R5bGU9ImRpc3BsYXk6aW5saW5lLXRhYmxlO2JvcmRlcjpub25lO2hlaWdodDo5MHB4O21hcmdpbjowO3BhZGRpbmc6MDtwb3NpdGlvbjpyZWxhdGl2ZTt2aXNpYmlsaXR5OnZpc2libGU7d2lkdGg6NzUwcHg7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudCI+PGlucytpZD0iYXN3aWZ0XzBfYW5jaG9yIitzdHlsZT0iZGlzcGxheTpibG9jaztib3JkZXI6bm9uZTtoZWlnaHQ6OTBweDttYXJnaW46MDtwYWRkaW5nOjA7cG9zaXRpb246cmVsYXRpdmU7dmlzaWJpbGl0eTp2aXNpYmxlO3dpZHRoOjc1MHB4O2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQiPjxpZnJhbWUrbWFyZ2lud2lkdGg9IjAiK21hcmdpbmhlaWdodD0iMCIrdnNwYWNlPSIwIitoc3BhY2U9IjAiK2FsbG93dHJhbnNwYXJlbmN5PSJ0cnVlIitzY3JvbGxpbmc9Im5vIithbGxvd2Z1bGxzY3JlZW49InRydWUiK29ubG9hZD0idmFyK2k9dGhpcy5pZCxzPXdpbmRvdy5nb29nbGVfaWZyYW1lX29uY29weSxIPXMmYW1wOyZhbXA7cy5oYW5kbGVycyxoPUgmYW1wOyZhbXA7SFtpXSx3PXRoaXMuY29udGVudFdpbmRvdyxkO3RyeXtkPXcuZG9jdW1lbnR9Y2F0Y2goZSl7fWlmKGgmYW1wOyZhbXA7ZCZhbXA7JmFtcDsoIWQuYm9keXx8IWQuYm9keS5maXJzdENoaWxkKSl7aWYoaC5jYWxsKXtzZXRUaW1lb3V0KGgsMCl9ZWxzZStpZihoLm1hdGNoKXt0cnl7aD1zLnVwZChoLGkpfWNhdGNoKGUpe313LmxvY2F0aW9uLnJlcGxhY2UoaCl9fSIraWQ9ImFzd2lmdF8wIituYW1lPSJhc3dpZnRfMCIrc3R5bGU9ImxlZnQ6MDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDsiK3dpZHRoPSI3NTAiK2ZyYW1lYm9yZGVyPSIwIitoZWlnaHQ9IjkwIj48L2lmcmFtZT48L2lucz48L2lucz4iJzsKICAgICAgICAgICAgJC5hamF4KHsKICAgICAgICAgICAgICB1cmwgOiAkKCIuYXJ0aWNsZS1jb250ZW50IikuZGF0YSgidXJsIiksCiAgICAgICAgICAgICAgZGF0YVR5cGUgOiAic2NyaXB0IiwKICAgICAgICAgICAgICBtZXRob2QgOiAicG9zdCIsCiAgICAgICAgICAgICAgZGF0YSA6IHsKICAgICAgICAgICAgICAgIGh0bWwgOiBhZHNCeUdvb2dsZUh0bWwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHN1Y2Nlc3MgOiBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICB2YXIgZXhlYyA9IHJlc3VsdC5yZXBsYWNlKCIkKCcuYXJ0aWNsZS1jb250ZW50JykiLCAiJCgnLmFydGljbGUtY29udGVudC0yJykiKTsKICAgICAgICAgICAgICAgIG5ldyBGdW5jdGlvbihleGVjKSgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICQoIi5hcnRpY2xlLWNvbnRlbnQiKS5hZnRlcignPGRpdiBjbGFzcz0iYXJ0aWNsZS1jb250ZW50LTIiPjwvZGl2PicpLnJlbW92ZSgpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBybXByZXB1c2JfY29tIDogewogICAgICAgIGhvc3QgOiBbJ3JtcHJlcHVzYi5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnNldENvb2tpZSgnam90X3ZpZXdlcicsIDMpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgbmVvZHJpdmVfY28gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEwMDEKICAgICAgICBob3N0IDogWyduZW9kcml2ZS5jbyddLAogICAgICAgIG9uQWx3YXlzIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gUHJldmVudCBwb3B1bmRlcgogICAgICAgICAgQWFrLnNldENvb2tpZSgnS2lmUG9wQ250JywgMSwgbnVsbCwgJy9lbWJlZC8nKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGhlbnRhaWhhdmVuX29yZyA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL2dvcmhpbGwvdUJsb2NrL2lzc3Vlcy8xMzQwCiAgICAgICAgaG9zdCA6IFsnaGVudGFpaGF2ZW4ub3JnJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyBQcmV2ZW50IHBvcHVuZGVyCiAgICAgICAgICBBYWsuc2V0Q29va2llKCdoaF9wcG5kcjEnLCAxKTsKICAgICAgICAgIEFhay5zZXRDb29raWUoJ2hoX3BwbmRyMicsIDEpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgcHJpbWVzaGFyZV90diA6IHsKICAgICAgICBob3N0IDogWydwcmltZXNoYXJlLnR2J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2I2FkYmxvY2snKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlYnJpZG5ldF9hbmRfbGl2ZWRlYnJpZCA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT1kZWJyaWRuZXQKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT1saXZlZGVicmlkCiAgICAgICAgaG9zdCA6IFsnZGVicmlkbmV0LmNvbScsICdsaXZlZGVicmlkLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIi5teVRlc3RBZDIgeyBoZWlnaHQ6IDVweDsgfSIpOwogICAgICAgICAgQWFrLmFkZEJhaXRFbGVtZW50KCdkaXYubXlUZXN0QWQyJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBibHVlc2F0b3NoaV9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzg3MwogICAgICAgIGhvc3QgOiBbJ2JsdWVzYXRvc2hpLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIiN0ZXN0IHsgaGVpZ2h0OiAyODBweDsgfSIpOwogICAgICAgICAgQWFrLmFkZEJhaXRFbGVtZW50KCdkaXYjdGVzdCcpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgcmF6ZXJjcnlwdF9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzg3MAogICAgICAgIGhvc3QgOiBbJ3JhemVyY3J5cHQuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiI3Rlc3QgeyBoZWlnaHQ6IDI1MHB4OyB9Iik7CiAgICAgICAgICBBYWsuYWRkQmFpdEVsZW1lbnQoJ2RpdiN0ZXN0Jyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBzYXRvc2hpZW1waXJlX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvODcyCiAgICAgICAgaG9zdCA6IFsnc2F0b3NoaWVtcGlyZS5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCIjdGVzdCB7IGhlaWdodDogMjUwcHg7IH0iKTsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2I3Rlc3QnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG9uZWFkZmF1Y2V0X2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvODcxCiAgICAgICAgaG9zdCA6IFsnb25lYWRmYXVjZXQuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiI3Rlc3QgeyBoZWlnaHQ6IDI1MHB4OyB9Iik7CiAgICAgICAgICBBYWsuYWRkQmFpdEVsZW1lbnQoJ2RpdiN0ZXN0Jyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBqa2FuaW1lX25ldCA6IHsKICAgICAgICBob3N0IDogWydqa2FuaW1lLm5ldCddLAogICAgICAgIC8vIEBAfHxqa2FuaW1lLm5ldC9hc3NldHMvanMvYWR2ZXJ0aXNlbWVudDIuanMKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZEJhaXRFbGVtZW50KCdkaXYjcmVjbycpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgXzcyMHBta3ZfY29tIDogewogICAgICAgIGhvc3QgOiBbJzcyMHBta3YuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2I2FkdmVydCcpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgcGFpZHZlcnRzX2NvbSA6IHsKICAgICAgICBob3N0IDogWydwYWlkdmVydHMuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2LmFmc19hZHMnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGl0YWxpYXR2X29yZyA6IHsKICAgICAgICBob3N0IDogWydpdGFsaWF0di5vcmcnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZEJhaXRFbGVtZW50KCdkaXYjZmFiMTMnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGNocmlzc21vb3ZlX2NvbSA6IHsKICAgICAgICBob3N0IDogWydjaHJpc3Ntb292ZS5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy9BYWsuYWRkQmFpdEVsZW1lbnQoJ2RpdiNhZHNlcnZlcicpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZXZlbnRodWJzX2NvbSA6IHsKICAgICAgICBob3N0IDogWydldmVudGh1YnMuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2I2JsYWh5YmxhY2kxJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBzdXBlcmFuaW1lc19jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEyOTUKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vRkRQQUtqVFEKICAgICAgICBob3N0IDogWydzdXBlcmFuaW1lcy5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZEJhaXRFbGVtZW50KCdkaXYjYmFubmVyTG9qYScpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZm9ydW1fcGFjX3JvbV9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzI0MwogICAgICAgIGhvc3QgOiBbJ2ZvcnVtLnBhYy1yb20uY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2LmJhbm5lcl9hZHMnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGxpdHZfdHYgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEyOTkKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vemNkZHZUdUMKICAgICAgICBob3N0IDogWydsaXR2LnR2J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2LnBsYXllcl9tYXNrJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBsZXZlbGRvd25fZnIgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzU5NQogICAgICAgIGhvc3QgOiBbJ2xldmVsZG93bi5mciddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkQmFpdEVsZW1lbnQoJ2RpdiNhZGJsb2NrJyk7CiAgICAgICAgICBBYWsuYWRkQmFpdEVsZW1lbnQoJ2RpdiNhZGJsb2NrdGVzdCcpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZ2xvYmVzbG90X2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvOTI0CiAgICAgICAgaG9zdCA6IFsnZ2xvYmVzbG90LmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkQmFpdEVsZW1lbnQoJ2RpdiNhZGQnKTsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2I2FkZDEnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGFudGVubmVzcG9ydF9jb20gOiB7CiAgICAgICAgaG9zdCA6IFsnYW50ZW5uZXNwb3J0LmNvbScsICdzZXJ2ZXJoZC5ldSddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsgLy8gZm9yIGFudGVubmVzcG9ydAogICAgICAgICAgLy8gUmVtb3ZlIFB1YgogICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoIiNwdWIgLnB1YmNsb3NlIik7CiAgICAgICAgICAvLyBSZWRpcmVjdCB0byBQbGF5ZXIKICAgICAgICAgIEFhay5zZXRFbGVtZW50KCcjcHViIC5lbWJlZCBpZnJhbWUnLCB7CiAgICAgICAgICAgIHNyYyA6ICcvZW1iZWQvZW1iZWQucGhwJwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBkaXNhYmxlQWxlcnRib3ggOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvZW4vZm9ydW0vZGlzY3Vzc2lvbi84NjExCiAgICAgICAgaG9zdCA6IFsnZHJpdmVhcmFiaWEuY29tJywgJ3B1dGxvY2tlci5jb20nLCAnZG9hdG9vbHNpdGEuYWx0ZXJ2aXN0YS5vcmcnLCAnc29ja3NoYXJlLmNvbScsICdmcmVlLW1vdmllLWhvbWUuY29tJywgJ3BjLm9ubGluZTE0My5jb20nLCAna29vb3JhLmNvbScsICdzdHIzYW10di5jby5ucicsICdzdHIzYW10di5hbHRlcnZpc3RhLm9yZycsICdzdHIzYW0uYWx0ZXJ2aXN0YS5vcmcnLCAnZmlsZWNvbS5uZXQnLCAncGlwb2Nhcy50dicsICdnZW5lcmF0dXByZW1pdW0uYml6JywgJ21lZ2EtZGVicmlkLmV1JywgJ3ByZW1pdW1zdDByZS5ibG9nc3BvdC5jb20nLCAnZGwtcHJvdGVjdC5jb20nLCAnbmV3c2lubGV2ZWxzLmNvbScsICd2aXByYWNpbmcuYml6JywgJ2J1c2luZXNzdG9kYXkuaW4nXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay51dy5hbGVydCA9IGZ1bmN0aW9uICgpIHt9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgZ2VuZXJhdHVwcmVtaXVtX2JpeiA6IHsKICAgICAgICBob3N0IDogWydnZW5lcmF0dXByZW1pdW0uYml6J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIERpc2FibGUgQ29uZmlybSBCb3gKICAgICAgICAgIC8vQWFrLnV3LmNvbmZpcm0gPSBmdW5jdGlvbiAoKXt9OwogICAgICAgICAgQWFrLnNldENvb2tpZSgnZ2VuZXJhJywgZmFsc2UpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgbmV3c3RhdGVzbWFuX2NvbSA6IHsKICAgICAgICBob3N0IDogWyduZXdzdGF0ZXNtYW4uY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5zZXRDb29raWUoJ2RvbmF0aW9uUG9wdXAnLCAnaGlkZScpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgYWRzd2l6el9jb20gOiB7CiAgICAgICAgLy8gYnk6IFNrcjR0Y2hHcjNhenlNb25raUJhbGxsbGxsWnp6egogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy84MDkKICAgICAgICBob3N0IDogWyd5ZXMuZm0nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFNjcmlwdChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHdpbmRvdy5jb21fYWRzd2l6el9zeW5jaHJvX2luaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZGVyc3RhbmRhcmRfYXQgOiB7CiAgICAgICAgLy8gYnk6IEFsZXhhbmRlcjI1NQogICAgICAgIC8vIHBhdGNoOiBodHRwOi8vcGFzdGViaW4uY29tL3Jhdy5waHA/aT1yN1E0RHJmQgogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPWRlcnN0YW5kYXJkCiAgICAgICAgaG9zdCA6IFsnZGVyc3RhbmRhcmQuYXQnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewoKICAgICAgICAgIHZhciBtYWtlSVNPVGltZXN0YW1wVVRDID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgcGFkID0gZnVuY3Rpb24gKGFtb3VudCwgd2lkdGgpIHsKICAgICAgICAgICAgICB2YXIgcGFkZGluZyA9ICIiOwogICAgICAgICAgICAgIHdoaWxlIChwYWRkaW5nLmxlbmd0aCA8IHdpZHRoIC0gMSAmJiBhbW91bnQgPCBNYXRoLnBvdygxMCwgd2lkdGggLSBwYWRkaW5nLmxlbmd0aCAtIDEpKSB7CiAgICAgICAgICAgICAgICBwYWRkaW5nICs9ICIwIjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIHBhZGRpbmcgKyBhbW91bnQudG9TdHJpbmcoKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgcmV0dXJuIFtwYWQoZGF0ZS5nZXRVVENGdWxsWWVhcigpLCA0KSwgIi0iLAogICAgICAgICAgICAgIHBhZChkYXRlLmdldFVUQ01vbnRoKCkgKyAxLCAyKSwgIi0iLAogICAgICAgICAgICAgIHBhZChkYXRlLmdldFVUQ0RhdGUoKSwgMiksICJUIiwKICAgICAgICAgICAgICBwYWQoZGF0ZS5nZXRVVENIb3VycygpLCAyKSwgIjoiLAogICAgICAgICAgICAgIHBhZChkYXRlLmdldFVUQ01pbnV0ZXMoKSwgMiksICI6IiwKICAgICAgICAgICAgICBwYWQoZGF0ZS5nZXRVVENTZWNvbmRzKCksIDIpXS5qb2luKCk7CiAgICAgICAgICB9OwoKICAgICAgICAgIGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOyAnKS5mb3JFYWNoKGZ1bmN0aW9uIChjb29raWUpIHsKICAgICAgICAgICAgLy8gRmluZCBtYWluIHN0b3JhZ2UgY29va2llCiAgICAgICAgICAgIGlmIChjb29raWUuc3Vic3RyKDAsIDYpID09ICJNR1VJRD0iKSB7CiAgICAgICAgICAgICAgLy8gRGVjb21wb3NlIGluZm9ybWF0aW9uIGZyb20gbWFpbiBzdG9yYWdlIGNvb2tpZQogICAgICAgICAgICAgIHZhciB2YWx1ZXMgPSB7fTsKICAgICAgICAgICAgICBjb29raWUuc3Vic3RyKDYpLnNwbGl0KCImIikuZm9yRWFjaChmdW5jdGlvbiAoYXNzaWdubWVudCkgewogICAgICAgICAgICAgICAgdmFyIHBvcyA9IGFzc2lnbm1lbnQuaW5kZXhPZignPScpOwogICAgICAgICAgICAgICAgaWYgKHBvcyA+IC0xKSB7CiAgICAgICAgICAgICAgICAgIHZhbHVlc1thc3NpZ25tZW50LnN1YnN0cigwLCBwb3MpXSA9IGFzc2lnbm1lbnQuc3Vic3RyKHBvcyArIDEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAvLyBVcGRhdGUgImZpcnN0IHZpZXdlZCIgdGltZXN0YW1wCiAgICAgICAgICAgICAgdmFsdWVzLlRpbWVzdGFtcCA9IG1ha2VJU09UaW1lc3RhbXBVVEMoKTsKCiAgICAgICAgICAgICAgLy8gUmVjb21wb3NlIGluZm9ybWF0aW9uIGluIG1haW4gc3RvcmFnZSBjb29raWUKICAgICAgICAgICAgICBjb29raWUgPSAiTUdVSUQ9IjsKICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWVzKSB7CiAgICAgICAgICAgICAgICBpZiAodmFsdWVzLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgICAgICAgICAgICAgY29va2llICs9IGtleSArICI9IiArIHZhbHVlc1trZXldICsgIiYiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjb29raWUgPSBjb29raWUuc3Vic3RyKDAsIChjb29raWUubGVuZ3RoIC0gMSkpOwoKICAgICAgICAgICAgICAvLyBVcGRhdGUgY29va2llCiAgICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gY29va2llOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHRla19kb21haW5zIDogewogICAgICAgIC8vIGJ5OiBSZWVrLCBBbGV4YW5kZXIyNTUKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNzg4CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzUxMgogICAgICAgIGhvc3QgOiBbJ3Rlay5ubycsICdnYW1lci5ubycsICd0ZWtub2ZpbC5ubycsICdpbnNpZGV0ZWxlY29tLm5vJywgJ3ByaXNndWlkZS5ubycsICdkaXNrdXNqb24ubm8nLCAndGVrbm9qb2JiLm5vJywgJ2FrYW0ubm8nLCAnaGFyZHdhcmUubm8nLCAnYW1vYmlsLm5vJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewoKICAgICAgICAgIC8qCiAgICAgICAgICB2YXIgYWRfZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKTsKICAgICAgICAgIGFkX2ZyYW1lLm5hbWUgPSAiX2ZyYW1lIjsKICAgICAgICAgIGFkX2ZyYW1lLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGFkX2ZyYW1lKTsKICAgICAgICAgIGFkX2ZyYW1lLmNvbnRlbnRXaW5kb3cud3JhcHBlZEpTT2JqZWN0LmluRklGID0gdHJ1ZTsKICAgICAgICAgICAqLwoKICAgICAgICAgIC8vIGZpeCAyNy4xMS4yMDE1CiAgICAgICAgICBBYWsuY3JlYXRlRWxlbWVudCh7CiAgICAgICAgICAgIHRhZyA6ICdkaXYnLAogICAgICAgICAgICBpZCA6ICdnb29nbGVfYWRzX2lmcmFtZV8nLAogICAgICAgICAgICBodG1sIDogJzxwPjwvcD4nLAogICAgICAgICAgICBhcHBlbmQgOiAnYm9keScKICAgICAgICAgIH0pOwoKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHBsYW5ldGF0dm9ubGluZWhkX25ldHdvcmsgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzE0NjcKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTU5CiAgICAgICAgaG9zdCA6IFsncGxhbmV0YXR2b25saW5laGQuYmxvZ3Nwb3QuJywgJ3BsYW5ldGF0dm9ubGluZWhkLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoJy5hZHNhbnRpbG9rIHsgaGVpZ2h0OiAxcHg7IH0nKTsKICAgICAgICAgIC8vQWFrLnV3LmpRQW50aUFkc0Jsb2NrID0gZnVuY3Rpb24gKCl7fTsgLy8gZG9uJ3Qgd29yawogICAgICAgIH0KICAgICAgfSwKICAgICAgYmV0YV9zcGVlZHRlc3RfbmV0IDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy82MjgKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNTYyCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzQ4NAogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlMi5vcmcvNTN5bWdoWDEKICAgICAgICBob3N0IDogWydiZXRhLnNwZWVkdGVzdC5uZXQnXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay51dy5hZHNPb2tsYUNvbVJlYWNoYWJsZSA9IHRydWU7CiAgICAgICAgICBBYWsudXcuc2NyaXB0c0xvYWRlZCA9IGZ1bmN0aW9uICgpIHt9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgYmluYnVja3NfY29tIDogewogICAgICAgIC8vIGJ5OiBBbGV4YW5kZXIyNTUKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNTQ1CiAgICAgICAgaG9zdCA6IFsnYmluYnVja3MuY29tJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3LnRlc3RKdWljeVBheSA9IHRydWU7CiAgICAgICAgICBBYWsudXcudGVzdFNlbnNlUGF5ID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHdoaXNreXByaWNlc19kb21haW5zIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMjg0CiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL0VwcjV0UkVMCiAgICAgICAgaG9zdCA6IFsnd2hpc2t5cHJpanplbi5jb20nLCAnd2hpc2t5cHJpY2VzLmNvLnVrJywgJ3doaXNreXByZWlzZS5jb20nLCAnd2hpc2t5cHJpeC5mciddLAogICAgICAgIG9uQWx3YXlzIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3Lk9BX3Nob3cgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSwKICAgICAgbmljb2Jsb2dfb3JnIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMTg0CiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL01OSHBMczJWCiAgICAgICAgaG9zdCA6IFsnbmljb2Jsb2cub3JnJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNyYycpOwogICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdjbGFzcycpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZGlfc2UgOiB7CiAgICAgICAgLy8gbm90ZTogYWRkIHRoaXMgcnVsZSBmb3IgY2hyb21lIHVzZXIKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTMxOQogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS85YkRQUXpNWAogICAgICAgIGhvc3QgOiBbJ2RpLnNlJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJyNoZWFkZXJfb3ZlcmxheScpOwogICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJyNtZXNzYWdlX21vZGFsJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBtZWdvZ29fbmV0IDogewogICAgICAgIC8vIGlzc3VlOiBQTQogICAgICAgIC8vIHNvdXJjZTE6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vY2NIUWczaG4KICAgICAgICAvLyBzb3VyY2UyOiBodHRwOi8vcGFzdGViaW4uY29tL2drMHZFUUhOCiAgICAgICAgLy8gbm90ZTogdHdvIGFkYmxvY2sgY2hlY2sKICAgICAgICBob3N0IDogWydtZWdvZ28ubmV0J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYWsudXcsICJhZEJsb2NrIiwgewogICAgICAgICAgICBlbnVtZXJhYmxlIDogdHJ1ZSwKICAgICAgICAgICAgd3JpdGFibGUgOiBmYWxzZSwKICAgICAgICAgICAgdmFsdWUgOiBmYWxzZQogICAgICAgICAgfSk7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWFrLnV3LCAic2hvd0FkQmxvY2tNZXNzYWdlIiwgewogICAgICAgICAgICBlbnVtZXJhYmxlIDogdHJ1ZSwKICAgICAgICAgICAgd3JpdGFibGUgOiBmYWxzZSwKICAgICAgICAgICAgdmFsdWUgOiBmdW5jdGlvbiAoKSB7fQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBsaWJlcnRhZGRpZ2l0YWxfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xNjQyCiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tLzZGenAwdnJFCiAgICAgICAgaG9zdCA6IFsnbGliZXJ0YWRkaWdpdGFsLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWFrLnV3LCAiYWRfYWxyZWFkeV9wbGF5ZWQiLCB7CiAgICAgICAgICAgIGVudW1lcmFibGUgOiB0cnVlLAogICAgICAgICAgICB3cml0YWJsZSA6IGZhbHNlLAogICAgICAgICAgICB2YWx1ZSA6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFhay51dywgInB1ZWRlTW9zdHJhckFkcyIsIHsKICAgICAgICAgICAgZW51bWVyYWJsZSA6IHRydWUsCiAgICAgICAgICAgIHdyaXRhYmxlIDogZmFsc2UsCiAgICAgICAgICAgIHZhbHVlIDogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LCAgICAgCiAgICAgIGZvbGhhX3VvbF9jb21fYnIgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEzOTYKICAgICAgICAvLyBzb3VyY2U6IGYoICggdHlwZW9mIHBheXdhbGxfYWNjZXNzID09ICJ1bmRlZmluZWQiIHx8IHBheXdhbGxfYWNjZXNzICE9IHRydWUgKSAmJiAoIHR5cGVvZiBmb2xoYV9hZHMgPT0gInVuZGVmaW5lZCIgfHwgZm9saGFfYWRzICE9IHRydWUgKSApIHsKICAgICAgICBob3N0IDogWydmb2xoYS51b2wuY29tLmJyJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYWsudXcsICJwYXl3YWxsX2FjY2VzcyIsIHsKICAgICAgICAgICAgZW51bWVyYWJsZSA6IHRydWUsCiAgICAgICAgICAgIHdyaXRhYmxlIDogZmFsc2UsCiAgICAgICAgICAgIHZhbHVlIDogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWFrLnV3LCAiZm9saGFfYWRzIiwgewogICAgICAgICAgICBlbnVtZXJhYmxlIDogdHJ1ZSwKICAgICAgICAgICAgd3JpdGFibGUgOiBmYWxzZSwKICAgICAgICAgICAgdmFsdWUgOiB0cnVlCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGdhbWVyX2NvbV90dyA6IHsKICAgICAgICAvLyBieTogbW1pczEwMDAKICAgICAgICAvLyB1c2Vyc2NyaXB0OiBodHRwczovL2dyZWFzeWZvcmsub3JnL2VuL3NjcmlwdHMvMTY1MjUKICAgICAgICAvLyBpc3N1ZTogOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy85NzUKICAgICAgICBob3N0IDogWydnYW1lci5jb20udHcnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFhay51dywgJ0FudGlBZCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZSA6IHRydWUsCiAgICAgICAgICAgIHdyaXRhYmxlIDogZmFsc2UsCiAgICAgICAgICAgIHZhbHVlIDogbnVsbAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBhcm1vcmdhbWVzX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvODQ1CiAgICAgICAgaG9zdCA6IFsnYXJtb3JnYW1lcy5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFhay51dywgJ2dhX2RldGVjdCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZSA6IHRydWUsCiAgICAgICAgICAgIHdyaXRhYmxlIDogZmFsc2UsCiAgICAgICAgICAgIHZhbHVlIDogbnVsbAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBtYW5nYWhvc3RfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy85NTcKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNTU4CiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL0dycGJKRU5BCiAgICAgICAgaG9zdCA6IFsnbWFuZ2Fob3N0LmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWFrLnV3LCAidGVzdERpc3BsYXkiLCB7CiAgICAgICAgICAgIGVudW1lcmFibGUgOiB0cnVlLAogICAgICAgICAgICB3cml0YWJsZSA6IGZhbHNlLAogICAgICAgICAgICB2YWx1ZSA6IGZhbHNlCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHZpZGVvd29vZF90diA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTMzOQogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3ZpZGVvd29vZC50di9idWlsZC9hc3NldHMvanMvcGVtYmVkLTk3YTY0MGY2MjUuanMKICAgICAgICBob3N0IDogWyd2aWRlb3dvb2QudHYnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3Lm9wZW4gPSBmdW5jdGlvbiAoKSB7fTsgLy8gcHJldmVudCBwb3B1cAogICAgICAgICAgQWFrLnV3LmNvbmZpZyA9IHt9OwogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFhay51dy5jb25maWcsICJhZGJfcmVtaW5kIiwgewogICAgICAgICAgICBlbnVtZXJhYmxlIDogdHJ1ZSwKICAgICAgICAgICAgd3JpdGFibGUgOiBmYWxzZSwKICAgICAgICAgICAgdmFsdWUgOiBmYWxzZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBpbmZvam9ic19jb21fYnIgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEzMzkKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vTFBnNjA5M1UKICAgICAgICAvLyByZWRpcmVjdDogaHR0cDovL3d3dy5pbmZvam9icy5jb20uYnIvbm9wdWJsaWNpdHkuYXNweAogICAgICAgIGhvc3QgOiBbJ2luZm9qb2JzLmNvbS5iciddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU2NyaXB0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHdlYlVJID0gd2ViVUkgfHwge307CiAgICAgICAgICAgIHdlYlVJLlV0aWxzID0gd2ViVUkuVXRpbHMgfHwge307CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3ZWJVSS5VdGlscywgIlN0b3BBZEJsb2NrIiwgewogICAgICAgICAgICAgIGVudW1lcmFibGUgOiB0cnVlLAogICAgICAgICAgICAgIHdyaXRhYmxlIDogZmFsc2UsCiAgICAgICAgICAgICAgdmFsdWUgOiBmdW5jdGlvbiAoKSB7fQogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGNsb3Vkd2ViY29weV9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzcxNAogICAgICAgIGhvc3QgOiBbJ2Nsb3Vkd2ViY29weS5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIHNldFRpbWVvdXRDbG9uZSA9IEFhay51dy5zZXRUaW1lb3V0OwogICAgICAgICAgQWFrLnV3LnNldFRpbWVvdXQgPSBudWxsOwogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIEFhay51dy5zZXRUaW1lb3V0ID0gc2V0VGltZW91dENsb25lOwogICAgICAgICAgfSwgNTAwMCk7CiAgICAgICAgfQogICAgICB9LAogICAgICBuYXJraXZlX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNTY5CiAgICAgICAgaG9zdCA6IFsnbmFya2l2ZS5jb20nXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay51dy5hZGJsb2NrX3N0YXR1cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHByZWdlbl9uZXQgOiB7CiAgICAgICAgaG9zdCA6IFsncHJlZ2VuLm5ldCddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyBza2lwIHBhZ2UgaW5mbwogICAgICAgICAgQWFrLnNldENvb2tpZSgncGduJywgMSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBwaHlzX29yZyA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNzY4CiAgICAgICAgaG9zdCA6IFsncGh5cy5vcmcnXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay51dy5jaGtBQiA9IGZ1bmN0aW9uICgpIHt9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgb252YXNvcnRpcl9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9b252YXNvcnRpci5jb20KICAgICAgICBob3N0IDogWydvbnZhc29ydGlyLmNvbSddLAogICAgICAgIG9uQWx3YXlzIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gK2FicCBydWxlIGFsdCBzb2x1dGlvbgogICAgICAgICAgQWFrLnV3LkplQmxvcXVlID0gZnVuY3Rpb24gKCkge307CiAgICAgICAgfQogICAgICB9LAogICAgICBmdWxsaGR6ZXZraV9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9ZnVsbGhkemV2a2kuY29tCiAgICAgICAgaG9zdCA6IFsnZnVsbGhkemV2a2kuY29tJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyArYWJwIHJ1bGUgYWx0IHNvbHV0aW9uCiAgICAgICAgICBBYWsudXcuY2hlY2sgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHZpbGxlX2lkZWFsZV9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzI1OAogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS8xNm1ubWVNYwogICAgICAgIGhvc3QgOiBbJ3ZpbGxlLWlkZWFsZS5jb20nXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vICthYnAgcnVsZSBhbHQgc29sdXRpb24KICAgICAgICAgIEFhay51dy5leGVjc3AgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG5vdHJlX3BsYW5ldGVfaW5mbyA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMjU4CiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL3FyUzZRR0dFCiAgICAgICAgaG9zdCA6IFsnbm90cmUtcGxhbmV0ZS5pbmZvJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyArYWJwIHJ1bGUgYWx0IHNvbHV0aW9uCiAgICAgICAgICBBYWsudXcucHVicG9wID0gZnVuY3Rpb24gKCkge307CiAgICAgICAgfQogICAgICB9LAogICAgICBhcGttaXJyb3JfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8zNzgKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMjI0CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzc4CiAgICAgICAgaG9zdCA6IFsnYXBrbWlycm9yLmNvbSddLAogICAgICAgIG9uQWx3YXlzIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3LmRvQ2hlY2sgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG10bGJsb2dfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy85NDgKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9mb3J1bS9kaXNjdXNzaW9uLzc3NTMKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vQkZyRFBNNmIKICAgICAgICBob3N0IDogWydtdGxibG9nLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWFrLnV3LCAncHVhYnMnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGUgOiB0cnVlLAogICAgICAgICAgICB2YWx1ZSA6IGZ1bmN0aW9uICgpIHt9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGFuaXptX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZToKICAgICAgICBob3N0IDogWydhbml6bS5jb20nXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay51dy5zdG9wQWRCbG9jayA9IHt9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgZGlhcmlvaW5mb3JtYWNpb25fY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xNTUwCiAgICAgICAgaG9zdCA6IFsnZGlhcmlvaW5mb3JtYWNpb24uY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYWsudXcsICdwcl9va3ZhbGlkYScsIHsKICAgICAgICAgICAgZW51bWVyYWJsZSA6IHRydWUsCiAgICAgICAgICAgIHZhbHVlIDogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBjbmJldGFfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMzAxCiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL3ZYTkN6dHd4CiAgICAgICAgaG9zdCA6IFsnY25iZXRhLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWFrLnV3LCAnSkInLCB7CiAgICAgICAgICAgIGVudW1lcmFibGUgOiB0cnVlLAogICAgICAgICAgICB2YWx1ZSA6IGZ1bmN0aW9uICgpIHt9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHRoZW1hcmtlcl9oYWFyZXR6IDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMjkyCiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL20wOGRrRFQ0CiAgICAgICAgaG9zdCA6IFsndGhlbWFya2VyLmNvbScsICdoYWFyZXR6LmNvLmlsJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYWsudXcsICdBZEJsb2NrVXRpbCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZSA6IHRydWUsCiAgICAgICAgICAgIHZhbHVlIDoge30KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgcGlwb2Nhc190diA6IHsKICAgICAgICAvLyBpc3N1ZToKICAgICAgICBob3N0IDogWydwaXBvY2FzLnR2J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIEFsc28gYWRkZWQgaW4gZGlzYWJsZUFsZXJ0Ym94CiAgICAgICAgICAvLyBObyBwb3B1cAogICAgICAgICAgQWFrLnNldENvb2tpZSgncG9wdXBfdXNlcl9sb2dpbicsICd5ZXMnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIF8xNW1pbl9sdCA6IHsKICAgICAgICAvLyBub3RlOiByZWd1bGFyeSB1cGRhdGUgc2NyaXB0CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9MTVtaW4uaXQKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vWVdmM0hUcXIKICAgICAgICAvLyB0ZXN0OiBodHRwOi8vdGlueXVybC5jb20vaDZjNDMzNgogICAgICAgIGhvc3QgOiBbJzE1bWluLmx0J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYWsudXcsICdST1VURScsIHsKICAgICAgICAgICAgZW51bWVyYWJsZSA6IHRydWUsCiAgICAgICAgICAgIHdyaXRhYmxlIDogZmFsc2UsCiAgICAgICAgICAgIHZhbHVlIDogJ19iZV9yZWtsYW1vcycKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgc2MyY2FzdHNfY29tIDogewogICAgICAgIC8vIGJ5OiBHaXdheXVtZQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xNTk5CiAgICAgICAgaG9zdCA6IFsnc2MyY2FzdHMuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uKCkgewogICAgICAgICAgQWFrLmFkZFNjcmlwdChmdW5jdGlvbigpIHsKICAgICAgICAgICAgd2luZG93Ll9nYXEgPSB7IHB1c2g6ZnVuY3Rpb24oKSB7fSB9OwogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAic2hvd2RpYWxvZyIsIHsKICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7fSwKICAgICAgICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLAogICAgICAgICAgICAgIHdyaXRhYmxlOiBmYWxzZQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgInNob3dQb3B1cDIiLCB7CiAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkge30sCiAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSwKICAgICAgICAgICAgICB3cml0YWJsZTogZmFsc2UKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHZndW5ldHdvcmtfY29tIDogewogICAgICAgIC8vIGlzc3VlOgogICAgICAgIGhvc3QgOiBbJ3ZndW5ldHdvcmsuY29tJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnNldENvb2tpZSgnc3RvcEl0JywgMSk7CiAgICAgICAgICB2YXIgY2xvc2UgPSBBYWsuZ2V0RWxlbWVudCgnI3NvbWVfYWRfYmxvY2tfa2V5X2Nsb3NlJyk7CiAgICAgICAgICBpZiAoY2xvc2UpIHsKICAgICAgICAgICAgY2xvc2UuY2xpY2soKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIGxpbmtjcnlwdF93cyA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMjg2CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvcHVsbC82NwogICAgICAgIGhvc3QgOiBbJ2xpbmtjcnlwdC53cyddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5zZXRFbGVtZW50KCcjYWRfY29udCcsIHsKICAgICAgICAgICAgaWQgOiAnJywKICAgICAgICAgICAgc3R5bGUgOiAnZGlzcGxheTpibG9jazsnCiAgICAgICAgICB9KTsKICAgICAgICAgIEFhay5zZXRFbGVtZW50KCcjY29udGFpbmVyX2NoZWNrJywgewogICAgICAgICAgICBzdHlsZSA6ICdkaXNwbGF5Om5vbmU7JwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBldmVudG9zcHB2X21lIDogewogICAgICAgIC8vIGlzc3VlOiAKICAgICAgICBob3N0IDogWydldmVudG9zcHB2Lm1lJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJyNuZjM3Jyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBib2xvcl90b2xpX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNTUyCiAgICAgICAgaG9zdCA6IFsnYm9sb3ItdG9saS5jb20nXSwKICAgICAgICBvbkVuZCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBhZHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdiYW5uZXInKTsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBhZCA9IGFkc1tpXTsKICAgICAgICAgICAgYWQuaW5uZXJIVE1MID0gJzxicj4nOwogICAgICAgICAgICBhZC5zdHlsZS5oZWlnaHQgPSAnMXB4JzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIHZpdm9fc3ggOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzI4MAogICAgICAgIGhvc3QgOiBbJ3Zpdm8uc3gnXSwKICAgICAgICBvbkVuZCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBhbGVydCA9IEFhay5nZXRFbGVtZW50KCcjYWxlcnQtdGhyb3R0bGUnKTsKICAgICAgICAgIGlmIChhbGVydCkgewogICAgICAgICAgICBBYWsucmVtb3ZlRWxlbWVudChhbGVydCk7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgYnV0dG9uID0gQWFrLmdldEVsZW1lbnQoJ2J1dHRvbiNhY2Nlc3MnKTsKICAgICAgICAgIGlmIChidXR0b24pIHsKICAgICAgICAgICAgYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTsKICAgICAgICAgICAgYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTsKICAgICAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9ICdDb250aW51ZSB0byB2aWRlbyc7CiAgICAgICAgICB9CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGlucHV0ID0gQWFrLmdldEVsZW1lbnQoJ2lucHV0W25hbWU9InRocm90dGxlIl0nKTsKICAgICAgICAgICAgaWYgKGlucHV0KSB7CiAgICAgICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoaW5wdXQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGx1eHlhZF9jb20gOiB7IC8vIHNraXAgcmVkaXJlY3QgbXlhbmltZXMubGkKICAgICAgICAvLyBpc3N1ZToKICAgICAgICBob3N0IDogWydsdXh5YWQuY29tJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKCcvSW5mb3JtYXRpb24ucGhwJyA9PSBsb2NhdGlvbi5wYXRobmFtZSkgewogICAgICAgICAgICB2YXIgaHJlZiA9IGxvY2F0aW9uLmhyZWY7CiAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSBocmVmLnN1YnN0cihocmVmLmluZGV4T2YoJ3VybD0nKSArIDQsIGhyZWYubGVuZ3RoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIG1ycGlyYWN5X2RvbWFpbnMgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzE0MDUKICAgICAgICBob3N0IDogWydtcnBpcmFjeS54eXonLCAnbXJwaXJhY3kuY2x1YiddLAogICAgICAgIG9uQmVmb3JlU2NyaXB0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFt7CiAgICAgICAgICAgICAgY29udGFpbnMgOiAnRGVzYXRpdmEgbyBBZEJsb2NrIHBhcmEgY29udGludWFyJywKICAgICAgICAgICAgICBleHRlcm5hbCA6IGZhbHNlLAogICAgICAgICAgICAgIHJlbW92ZSA6IHRydWUKICAgICAgICAgICAgfQogICAgICAgICAgXTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRicGxhbmV0X25ldCA6IHsKICAgICAgICAvLyBpc3N1ZTogUE0KICAgICAgICBob3N0IDogWydkYnBsYW5ldC5uZXQnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnNldENvb2tpZSgnbmV3bm9Nb3JlQWRzTm93JywgMSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBhaWRlbXVfZnIgOiB7CiAgICAgICAgLy8gaXNzdWU6CiAgICAgICAgaG9zdCA6IFsnYWlkZW11LmZyJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5zZXRDb29raWUoJ2FkYmxvY2tQb3B1cCcsIHRydWUpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZWFtaV9pbiA6IHsKICAgICAgICAvLyBpc3N1ZToKICAgICAgICBob3N0IDogWydlYW1pLmluJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuc2V0Q29va2llKCdhZF9sb2NrZWQnLCAxKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGJpZ2Rvd25sb2FkZXJfY29tIDogewogICAgICAgIC8vIGlzc3VlOgogICAgICAgIGhvc3QgOiBbJ2JpZ2Rvd25sb2FkZXIuY29tJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJyNhbnRpX2FkYmxvY2snKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGZyZWVza2llcl9jb20gOiB7CiAgICAgICAgLy8gYnk6IEdvcmhpbGwKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNjM5CiAgICAgICAgLy8gbm90ZTogYWxzbyBhZGRlZCBsaXN0IHJ1bGUKICAgICAgICBob3N0IDogWydmcmVlc2tpZXIuY29tJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImFkYi1ub3QtZW5hYmxlZCIpOwogICAgICAgICAgaWYgKGVsICE9PSBudWxsKSB7CiAgICAgICAgICAgIGVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCJkaXNwbGF5Iik7CiAgICAgICAgICB9CiAgICAgICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ2aWRlb0NvbnRhaW5lciIpOwogICAgICAgICAgaWYgKGVsICE9PSBudWxsKSB7CiAgICAgICAgICAgIGVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCJkaXNwbGF5Iik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICBnYW1ldHJhaWxlcnNfY29tIDogewogICAgICAgIC8vIGlzc3VlOgogICAgICAgIGhvc3QgOiBbJ2dhbWV0cmFpbGVycy5jb20nXSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsucmVtb3ZlRWxlbWVudCgnI2FkX2Jsb2NraW5nJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBzY2FuX29uZXBpZWNlX25hcnV0b19teCA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNTgyCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzI3OQogICAgICAgIGhvc3QgOiBbJ3NjYW4tbXguY29tJywgJ29uZXBpZWNlLW14Lm5ldCcsICduYXJ1dG8tbXgubmV0J10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuYWRfYmxvY2tfdGVzdCA9IGZ1bmN0aW9uICgpIHt9OwogICAgICAgIH0sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnNldEVsZW1lbnQoJyN5b3AnLCB7CiAgICAgICAgICAgIGlkIDogJycKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgLy8gQml0Y29pbnMKICAgICAgYml0Y29pbmtlcl9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzIzMAogICAgICAgIGhvc3QgOiBbJ2JpdGNvaW5rZXIuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay51dy5jbGFpbSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9OwogICAgICAgIH0sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJyNFMzNGQ0NjWDJmVycpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgbW9vbmRvZ2VfY29faW4gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzM4NAogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8yMzIKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMjMzCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzIzNgogICAgICAgIGhvc3QgOiBbJ21vb25kb2dlLmNvLmluJywgJ21vb25saXRlY28uaW4nLCAnbW9vbmJpdC5jby5pbicsICdiaXRjb2luemVicmEuY29tJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJyNBQiwgI0U0NDJEdiwgI2VDQzVoJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBiaXRjb2luZXJfbmV0IDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8zNDkKICAgICAgICBob3N0IDogWydiaXRjb2luZXIubmV0JywgJ2xpdGVjb2luZXIubmV0J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2I3Rlc3RlcicpOwogICAgICAgICAgQWFrLmFkZEJhaXRFbGVtZW50KCdkaXYjYWQtdG9wJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBiaXRjb2luc19ueF90YyA6IHsKICAgICAgICAvLyBpc3N1ZToKICAgICAgICBob3N0IDogWydmcmVlYml0Y29pbnMubngudGMnLCAnZ2V0Yml0Y29pbnMubngudGMnXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay51dy5hZF9ibG9ja190ZXN0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgZnJlZWNvaW5zNF9tZSA6IHsKICAgICAgICAvLyBpc3N1ZToKICAgICAgICBob3N0IDogWydmcmVlY29pbnM0Lm1lJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuY2hlY2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9LAogICAgICB0b3JyZW50X3R2X3J1IDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy81MzcKICAgICAgICBob3N0IDogWyd0b3JyZW50LXR2LnJ1J10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuY19Pb19BZHZlcnRfU2hvd24gPSB0cnVlOwogICAgICAgIH0KICAgICAgfSwKICAgICAgY3d0dl9jb20gOiB7CiAgICAgICAgLy8gYnk6IEthbGJhc2l0CiAgICAgICAgLy8gcHVsbDogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9wdWxsLzc2MwogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8zNDAKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNzYyCiAgICAgICAgaG9zdCA6IFsnY3d0di5jb20nXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay51dy5DV1RWSXNBZEJsb2NraW5nID0gdW5kZWZpbmVkOwogICAgICAgIH0KICAgICAgfSwKICAgICAgYmlsZF9kZSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT1iaWxkCiAgICAgICAgaG9zdCA6IFsnYmlsZC5kZSddLAogICAgICAgIG9uQmVmb3JlU2NyaXB0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFt7CiAgICAgICAgICAgICAgY29udGFpbnMgOiAnaHR0cDovL3d3dy5iaWxkLmRlL3dhL2xsL2JpbGQtZGUvdW5hbmdlbWVsZGV0LTQyOTI1NTE2LmJpbGQuaHRtbCcsCiAgICAgICAgICAgICAgZXh0ZXJuYWwgOiBmYWxzZSwKICAgICAgICAgICAgICByZXBsYWNlIDogWydqYXZhc2NyaXB0JywgJ3ZvaWQoMCk7J10uam9pbignOicpCiAgICAgICAgICAgIH0KICAgICAgICAgIF07CiAgICAgICAgfQogICAgICB9LAogICAgICBpbm5fY29faWwgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzUzMgogICAgICAgIGhvc3QgOiBbJ2lubi5jby5pbCddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU2NyaXB0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIFRSQyA9IHt9OwogICAgICAgICAgICBUUkMuYmxvY2tlciA9IHsKICAgICAgICAgICAgICBzdGF0ZXMgOiB7CiAgICAgICAgICAgICAgICBBQlBfREVURUNUSU9OX0RJU0FCTEVEIDogLTIsCiAgICAgICAgICAgICAgICBBQlBfTk9UX0RFVEVDVEVEIDogMCwKICAgICAgICAgICAgICAgIEFCUF9ERVRFQ1RFRCA6IDEKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGNyZWF0ZUJsb2NrRGV0ZWN0aW9uRGl2IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgaXNCbG9ja0RldGVjdGVkT25EaXYgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGlzQmxvY2tEZXRlY3RlZE9uQ2xhc3NOYW1lcyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZ2V0QmxvY2tlZFN0YXRlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBiaGFza2FyX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT1iaGFza2FyCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9ZGl2eWFiaGFza2FyLmNvLmluCiAgICAgICAgaG9zdCA6IFsnYmhhc2thci5jb20nLCAnZGl2eWFiaGFza2FyLmNvLmluJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcub3BlblBvcFVwRm9yQnJlYWtQYWdlID0gZnVuY3Rpb24gKCkge307CiAgICAgICAgICBBYWsudXcuY2FuQUJQID0gdHJ1ZTsKICAgICAgICAgIEFhay51dy5jYW5SdW5BZHMgPSB0cnVlOwogICAgICAgICAgQWFrLnV3LmNhbkNoZWNrQWRzID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHR1cmthbmltZV90diA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNDQ2CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEzOQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dyZWFzeWZvcmsub3JnL3RyL2ZvcnVtL2Rpc2N1c3Npb24vNDI4Mi8KICAgICAgICBob3N0IDogWyd0dXJrYW5pbWUudHYnXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay51dy5hZGJsb2NrYmxvY2sgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICAgIEFhay51dy5CbG9rS29udHJvbCA9IHt9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgd3RmYml0X2NoIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy80MDcKICAgICAgICBob3N0IDogWyd3dGZiaXQuY2gnXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay51dy53cml0ZUhUTUxhc0pTID0gZnVuY3Rpb24gKCkge307CiAgICAgICAgfQogICAgICB9LAogICAgICBhcmFuenVsbGFfaXQgOiB7CiAgICAgICAgLy8gYnk6IFJvYm90ZXgKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT1hcmFuenVsbGEuaXQKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20veU1NNllneFcKICAgICAgICBob3N0IDogWydhcmFuenVsbGEuaXQnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24oKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoJyNhYnQxICsgU1RZTEUgKyBkaXZbaWRdW2NsYXNzXSB7ZGlzcGxheTpub25lO30nKTsKICAgICAgICB9LAogICAgICAgIG9uQmVmb3JlU2NyaXB0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFt7CiAgICAgICAgICAgICAgY29udGFpbnMgOiAnbmF2aWdhdG9yLnVzZXJBZ2VudHx8bmF2aWdhdG9yLnZlbmRvcnx8d2luZG93Lm9wZXJhJywKICAgICAgICAgICAgICBleHRlcm5hbCA6IGZhbHNlLAogICAgICAgICAgICAgIHJlbW92ZSA6IHRydWUKICAgICAgICAgICAgfQogICAgICAgICAgXTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG5kdHZfY29tIDogewogICAgICAgIC8vIG5vdGU6IGNhblJ1bkFkcyBpbnZlcnRlZCB2YWx1ZQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPW5kdHYuY29tCiAgICAgICAgLy8gdGVzdDogaHR0cDovL3Rpbnl1cmwuY29tL2hjZm5jZHYKICAgICAgICBob3N0IDogWyduZHR2LmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuc2V0UmVhZE9ubHkoJ19fX3BfX3AnLCAxKTsKICAgICAgICAgIEFhay5zZXRSZWFkT25seSgnZ2V0Tm9Ub3BMYXRlc3ROZXdzJywgZnVuY3Rpb24gKCkge30pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgbGVzZWNob3NfZnIgOiB7CiAgICAgICAgLy8gUmVlaywgR2l3YXl1bWUKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT1sZXNlY2hvcy5mcgogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS9DTU04V0dMagogICAgICAgIGhvc3QgOiBbJ2xlc2VjaG9zLmZyJywgJ2xlc2VjaG9zLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbigpIHsKICAgICAgICAgIEFhay5hZGRTY3JpcHQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICJjaGVja0FkQmxvY2siLCB7CiAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkge30sCiAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSwKICAgICAgICAgICAgICB3cml0YWJsZTogZmFsc2UKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIG9uQWx3YXlzIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3LmNhbGxfQWQgPSAxOwogICAgICAgICAgQWFrLnV3LnBheXdhbGxfYWRibG9ja19hcnRpY2xlID0gZnVuY3Rpb24gKCkge307CiAgICAgICAgfQogICAgICB9LAogICAgICBiaXR2aXNpdHNfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8yNjYKICAgICAgICBob3N0IDogWydiaXR2aXNpdHMuY29tJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuYmxvY2tBZGJsb2NrVXNlciA9IGZ1bmN0aW9uICgpIHt9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgZXhyYXBpZGxlZWNoX2luZm8gOiB7CiAgICAgICAgLy8gYnk6IEFsZXhhbmRlcjI1NSwgUmVlaywgR2l3YXl1bWUKICAgICAgICAvLyBwYXRjaDogaHR0cDovL3Bhc3RlYmluLmNvbS9RNjY0ZGlRMgogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPWV4cmFwaWRsZWVjaAogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS81ZTI3c3lqQQogICAgICAgIGhvc3QgOiBbJ2V4cmFwaWRsZWVjaC5pbmZvJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICB2YXIgdG9tb3Jyb3cgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgdG9tb3Jyb3cuc2V0RGF0ZSh0b21vcnJvdy5nZXREYXRlKCkgKyAxKTsKCiAgICAgICAgICAvLyBwcmV2ZW50IHBvcHVwCiAgICAgICAgICBBYWsuc2V0Q29va2llKCdwb3BjYXNocHVDYXAnLCAxKTsKICAgICAgICAgIEFhay5zZXRDb29raWUoJ3BvcGNhc2hwdScsIDEpOwogICAgICAgICAgQWFrLnNldENvb2tpZSgnbm9wb3BhdGFsbCcsIHRvbW9ycm93LmdldFRpbWUoKS50b1N0cmluZygpKTsKICAgICAgICAgIEFhay5zZXRDb29raWUoJ25vYWR2dGRheScsIDApOwogICAgICAgICAgLy9BYWsuc2V0Q29va2llKCdidl9EU0tza2Rja19zMWQnLCAnYnZEU0tza2Rja3MxZCcpOwoKICAgICAgICAgIC8vIGhpZGUgbm90aWNlCiAgICAgICAgICBBYWsuYWRkU3R5bGUoJ2Rpdi5hbGVydC5hbGVydC1kYW5nZXIubGVhZCB7b3BhY2l0eTowO30nKTsKICAgICAgICAgIAogICAgICAgICAgLy8gcHJldmVudCByZWRpcmVjdCB0byB2ZXJpZnkgcGFnZQogICAgICAgICAgQWFrLnNldFJlYWRPbmx5KCdiZHZibnJfcGlkJywgW10pOwogICAgICAgICAgQWFrLnNldFJlYWRPbmx5KCdQb3BBZHMnLCAxKTsKCiAgICAgICAgICBBYWsuYWRkU2NyaXB0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAvLyBwcmV2ZW50IHBvcHVwCiAgICAgICAgICAgICAgd2luZG93Lm9wZW4gPSBmdW5jdGlvbiAoKSB7fTsKCiAgICAgICAgICAgICAgLy8gcHJldmVudCByZWRpcmVjdCB0byB2ZXJpZnkgcGFnZQogICAgICAgICAgICAgIHZhciBmcmFtZTEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTsKICAgICAgICAgICAgICBmcmFtZTEuc3JjID0gJ2h0dHA6Ly9iZGZybS5iaWR2ZXJ0aXNlci5jb20vQmlkVmVydGlzZXIuZGJtP3BpZD0zODM4NjUmYmlkPTE3Mzc0MTgmUkQ9JzsKICAgICAgICAgICAgICBmcmFtZTEuaWQgPSAnYmR2aSc7CiAgICAgICAgICAgICAgZnJhbWUxLnN0eWxlID0gJ2Rpc3BsYXk6bm9uZSc7CiAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKGZyYW1lMSk7CiAgICAgICAgICAgIH0pKCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHZpcGxlYWd1ZV9kb21haW5zIDogewogICAgICAgIC8vIG5vdGU6IGFsc28ga2lsbGVkIGJ5IEFha0xpc3QKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT12aXBib3gKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT12aXBsZWFndWUKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vTkVSVnpIelMKICAgICAgICBob3N0IDogWyJ2aXBsZWFndWUuaXMiLCAidmlwbGVhZ3VlLndzIiwgInZpcGxlYWd1ZS50diIsICJ2aXBsZWFndWUuc2UiLCAidmlwbGVhZ3VlLnR2IiwgInZpcGxlYWd1ZS5tZSIsICJ2aXBsZWFndWUubW9iaSIsICJ2aXBsZWFndWUuY28iLCAidmlwbGVhZ3VlLnN4IiwgInZpcGxlYWd1ZS5jaCIsICJ2aXBib3gudHYiLCAidmlwYm94LmNvIiwgInZpcGJveC5iaXoiLCAidmlwYm94LnN4IiwgInZpcGJveC5ldSIsICJ2aXBib3guc28iLCAidmlwYm94Lm51IiwgInZpcGJveHNhLmNvIiwgInN0cmlrZW91dC5jbyIsICJzdHJpa2VvdXQubWUiLCAiaG9tZXJ1bi5yZSIsICJ2aXBib3h0di5jbyIsICJ2aXBhcHAubWUiXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3LmlFeGlzdCA9IHRydWU7CiAgICAgICAgICBBYWsuc2V0Q29va2llKCd4Y2xzdmlwJywgMSk7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIi52aXBfMDUyeDAwMyB7IGhlaWdodDogMjUwcHg7IH0iKTsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiLnZpcF8wOXg4MjcgeyBoZWlnaHQ6IDI2cHg7IH0iKTsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiI292ZXJsYXkgeyBkaXNwbGF5OiBub25lOyB9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICB6b29tdHZfbWUgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9em9vbXR2Lm1lCiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL200ekFYR2N3CiAgICAgICAgaG9zdCA6IFsnem9vbXR2Lm1lJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuaWF4cEVuYWJsZWQgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSwKICAgICAgdmdfbm8gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzI5MgogICAgICAgIC8vICthYnAgcnVsZQogICAgICAgIGhvc3QgOiBbJ3ZnLm5vJywgJ2UyNC5ubyddLAogICAgICAgIG9uQWx3YXlzIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3Ll9fQUJfXyA9IGZ1bmN0aW9uICgpIHt9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgcG9ybnZlX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvOTQ3CiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tLzdUUFBrcTEyCiAgICAgICAgaG9zdCA6IFsncG9ybnZlLmNvbSddLAogICAgICAgIG9uQWx3YXlzIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3LmFkeGp3dXBkYXRlID0gMTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGxvbF9tb2FfdHcgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzExMTQKICAgICAgICBob3N0IDogWydsb2wubW9hLnR3J10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFNjcmlwdChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBNb2FPYmogPSBNb2FPYmogfHwge307CiAgICAgICAgICAgIE1vYU9iai5hZCA9IE1vYU9iai5hZCB8fCB7fTsJCQkKICAgICAgICAgICAgTW9hT2JqLmFkLmhhc0FkYmxvY2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9OwogICAgICAgICAgICBNb2FPYmouYWQuY2hlY2tBQlAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9OwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBtdWx0aXVwX29yZyA6IHsKICAgICAgICAvLyBieTogV2F0aWxpbgogICAgICAgIC8vIG5vdGU6IGFsdGVybmF0aXZlIHNvbHV0aW9uCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9bXVsdGl1cC5vcmcKICAgICAgICBob3N0IDogWydtdWx0aXVwLm9yZyddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuc2V0Q29va2llKCd2aXNpdCcsIDEpOyAvLyBwcmV2ZW50IHBvcHVwCiAgICAgICAgICBBYWsuc2V0UmVhZE9ubHkoJ2hpJywgZnVuY3Rpb24gKCkge30pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZGFpbHliaXRjb2luc19vcmcgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEwNwogICAgICAgIGhvc3QgOiBbJ2RhaWx5Yml0Y29pbnMub3JnJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJy5hZC1pbWcnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGtvemFjemVrX3plYmVya2EgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzQxNAogICAgICAgIGhvc3QgOiBbJ2tvemFjemVrLnBsJywgJ3plYmVya2EucGwnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnNldENvb2tpZSgnYWJsYycsIDEpOwogICAgICAgICAgQWFrLnNldENvb2tpZSgnY29va2llX3BvbGljeScsIDEpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgc3Bhbmt3aXJlX3NpdGVzIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy84ODcKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vVEZCMWR0Z2IKICAgICAgICBob3N0IDogWydzcGFua3dpcmUuY29tJywgJ2tlZXptb3ZpZXMuY29tJywgJ2V4dHJlbWV0dWJlLmNvbScsICdtb2Zvc2V4LmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuc2V0Q29va2llKCJhYkNsb3NlZCIsICJ0cnVlIik7CiAgICAgICAgICBBYWsuc2V0Q29va2llKCJoaWRlX2FkX21zZyIsICIxIik7CiAgICAgICAgfQogICAgICB9LAogICAgICB5b3Vwb3JuX25ldHdvcmsgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzg4NwogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS9URkIxZHRnYgogICAgICAgIGhvc3QgOiBbJ3lvdXBvcm4uY29tJywgJ3lvdXBvcm5nYXkuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5zZXRDb29raWUoImFkYmxvY2tfbWVzc2FnZSIsICJjbG9zZWQiKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGNpdGF0aW9ubWFjaGluZV9uZXQgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9Y2l0YXRpb25tYWNoaW5lLm5ldAogICAgICAgIGhvc3QgOiBbJ2NpdGF0aW9ubWFjaGluZS5uZXQnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnNldENvb2tpZSgic2JtX2NtX2NpdGF0aW9ucyIsIDApOwogICAgICAgIH0KICAgICAgfSwgICAgICAKICAgICAgcHNhcmlwc19jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzE1MwogICAgICAgIGhvc3QgOiBbJ3BzYXJpcHMuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRCYWl0RWxlbWVudCgnZGl2I2FkdmVydCcpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZXh0cmF0b3JyZW50X2RvbWFpbnMgOiB7CiAgICAgICAgaG9zdCA6IFsnZXh0cmF0b3JyZW50LmNjJywgJ2V4dHJhdG9ycmVudC5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gcHJldmVudCBwb3B1cAogICAgICAgICAgLy8gc291cmNlIGFyZSBvYmZ1c2NhdGVkIGluIGV4dGVybmFsIGpzCiAgICAgICAgICBBYWsuc2V0Q29va2llKCdwcHVfZGVsYXknLCAxKTsKICAgICAgICAgIEFhay5zZXRDb29raWUoJ3BwdV9tYWluJywgMSk7CiAgICAgICAgICBBYWsuc2V0Q29va2llKCdwcHVfc3ViJywgMSk7CiAgICAgICAgICBBYWsuc2V0Q29va2llKCdwcHVfc2hvd19vbicsIDEpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgdG55X2N6IDogewogICAgICAgIGhvc3QgOiBbJ3RueS5jeicsICdwYXN0ZWQuY28nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gcHJldmVudCBwb3B1cAogICAgICAgICAgQWFrLnNldENvb2tpZSgnX18ucG9wdW5kZXJDYXAnLCAxKTsKICAgICAgICAgIEFhay5zZXRDb29raWUoJ19fLnBvcHVuZGVyJywgMSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBjbHViZWRvaGFyZHdhcmVfY29tX2JyIDogeyAvLyB0d28gYW50aWFkYmxvY2sKICAgICAgICBob3N0IDogWydjbHViZWRvaGFyZHdhcmUuY29tLmJyJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmIChBYWsuY29udGFpbnMobG9jYXRpb24uaG9zdCwgJ2ZvcnVtJykpIHsKICAgICAgICAgICAgLy8gU29sdXRpb24gMQogICAgICAgICAgICBBYWsuYWRkU3R5bGUoIiNiYW5uZXIsIHNjcmlwdCB7IGhlaWdodDogNTFweDsgfSIpOwogICAgICAgICAgICBBYWsuYWRkQmFpdEVsZW1lbnQoJ2RpdiNiYW5uZXInKTsKICAgICAgICAgIH0gZWxzZSB7IC8vIFdlYnNpdGUKICAgICAgICAgICAgLy8gU29sdXRpb24gMQogICAgICAgICAgICBBYWsuYWRkQmFpdEVsZW1lbnQoJ2Rpdi5iYW5uZXJfdG9wbycpOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKEFhay5jb250YWlucyhsb2NhdGlvbi5ob3N0LCAnZm9ydW0nKSkgewogICAgICAgICAgICAvLyBTb2x1dGlvbiAyCiAgICAgICAgICAgIEFhay51dy5hZGRCbG9ja2luZy5oaWRlKCk7CiAgICAgICAgICAgIEFhay51dy5hZGRCbG9ja2luZy5raWxsKCk7CiAgICAgICAgICB9IGVsc2UgeyAvLyBXZWJzaXRlCiAgICAgICAgICAgIC8vIFNvbHV0aW9uIDIKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5pZCA9ICcnOwogICAgICAgICAgICBBYWsucmVtb3ZlRWxlbWVudCgnLmFkYmxvY2snKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlYnJhc3RhZ2lfY29tIDogewogICAgICAgIGhvc3QgOiBbJ2RlYnJhc3RhZ2kuY29tJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJyNzdHAtbWFpbicpOwogICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJyNzdHAtYmcnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRkbGZyZW5jaF9vcmcgOiB7CiAgICAgICAgaG9zdCA6IFsnZGRsZnJlbmNoLm9yZyddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIEZpeCBidWcgZGlzcGxheSBjb250ZW50CiAgICAgICAgICBBYWsuc2V0RWxlbWVudCgnI2RsZS1jb250ZW50IC5kLWNvbnRlbnQnLCB7CiAgICAgICAgICAgICdjbGFzcycgOiAnJwogICAgICAgICAgfSk7CiAgICAgICAgICBBYWsuc2V0RWxlbWVudCgnI2NvbnRlbnQnLCB7CiAgICAgICAgICAgICdpZCcgOiAnJwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBtZWdhZGVicmlkX2V1IDogewogICAgICAgIGhvc3QgOiBbJ21lZ2EtZGVicmlkLmV1J10sCiAgICAgICAgb25FbmQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyBBY3RpdmF0ZSBidXR0b24gZGVicmlkCiAgICAgICAgICBBYWsuc2V0RWxlbWVudCgnLnJlYWxidXR0b24nLCB7CiAgICAgICAgICAgICdvbmNsaWNrJyA6ICcnLAogICAgICAgICAgICAndHlwZScgOiAnc3VibWl0JwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBzbGlkZXBsYXllcl9kb21haW5zIDogewogICAgICAgIC8vIGJ5OiBBbGV4YW5kZXIyNTUKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTMzMwogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy81MTUKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMjk2CiAgICAgICAgLy8gZGVtbzogaHR0cDovL3NsaWRlcGxheWVyLmZyL3NsaWRlLzEzMDQwMjYvIwogICAgICAgIGhvc3QgOiBbJ3NsaWRlcGxheWVyLionXSwKICAgICAgICBvbkVuZCA6IGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICAvLyBEaXNhYmxlIGFudGktYWRibG9ja2VyCiAgICAgICAgICBBYWsudXcuZm9yY2VfcmVtb3ZlX2FkcyA9IHRydWU7CgogICAgICAgICAgLy8gQ2lyY3VtdmVudCAic2hhcmUgdG8gZG93bmxvYWQiIHJ1bGUKICAgICAgICAgIEFhay5hZGRTY3JpcHQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgc2xpZGVfaWQgPSB3aW5kb3cuZ2V0X2N1cnJlbnRfc2xpZGVfaWQoKTsKICAgICAgICAgICAgdmFyIHNsaWRlX3NydiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwbGF5ZXJfZnJhbWUiKS5zcmMuc3BsaXQoIi8iKVszXTsKICAgICAgICAgICAgdmFyIHRpbWUgPSA4NjQwMCArIE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApOwogICAgICAgICAgICB2YXIgc2VjcmV0ID0gZW5jb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5zdHJ0cih3aW5kb3cuTUQ1LmJhc2U2NCgic2VjcmV0X3ByZXZlZCBzbGlkZXBsYXllciBuZXZlciBzb2x2ZWQgIiArIHRpbWUgKyBzbGlkZV9pZCArICIucHB0IiksICIrLyIsICItICIpKTsKCiAgICAgICAgICAgIHZhciB1cmwgPSAiaHR0cDovL3BsYXllci5zbGlkZXBsYXllci5vcmcvZG93bmxvYWQvIiArIHNsaWRlX3NydiArICIvIiArIHNsaWRlX2lkICsgIi8iICsgc2VjcmV0ICsgIi8iICsgdGltZSArICIvIiArIHNsaWRlX2lkICsgIi5wcHQiOwogICAgICAgICAgICB2YXIgbGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJhLmRvd25sb2FkX2xpbmsiKTsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5rcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIC8qIFJlbW92ZSBvcmlnaW5hbCAic2hhcmUgdG8gZG93bmxvYWQiIHBvcHVwIGV2ZW50IGxpc3RlbmVyICovCiAgICAgICAgICAgICAgdmFyIGV2ZW50cyA9ICQuX2RhdGEobGlua3NbaV0pLmV2ZW50cy5jbGljazsKICAgICAgICAgICAgICBldmVudHMuc3BsaWNlKDAsIGV2ZW50cy5sZW5ndGgpOwoKICAgICAgICAgICAgICAvKiBTZXQgbm9ybWFsIGxpbmsgaHJlZiBpbnN0ZWFkICovCiAgICAgICAgICAgICAgbGlua3NbaV0uaHJlZiA9IHVybDsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CgogICAgICAgIH0KICAgICAgfSwKICAgICAgYm9rZXBzcG90X2NvbSA6IHsKICAgICAgICBob3N0IDogWydib2tlcHNwb3QuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIEhpZGUgRGlzY2xhaW1lcgogICAgICAgICAgQWFrLnNldENvb2tpZSgnaGlkZURpYWxvZycsICdoaWRlJyk7CiAgICAgICAgfSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyBSZW1vdmUgRGlzYWJsZSBBZEJsb2NrCiAgICAgICAgICBBYWsucmVtb3ZlRWxlbWVudCgnI3R1cGlrbGFuJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBwaWNsb2FkX2NvbSA6IHsKICAgICAgICBob3N0IDogWydwaWNsb2FkLm9yZyddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuc2V0Q29va2llKCdwbF9hZGJsb2NrZXInLCBmYWxzZSk7CiAgICAgICAgfSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuYWRzX2xvYWRlZCA9IHRydWU7CiAgICAgICAgICBBYWsudXcuaW1hZ2VBZHMgPSBmYWxzZTsKICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KCdkaXZbb25jb250ZXh0bWVudT0icmV0dXJuIGZhbHNlOyJdJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBmcmVlemVkb3dubG9hZF9jb20gOiB7CiAgICAgICAgaG9zdCA6IFsnZnJlZXplZG93bmxvYWQuY29tJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKC9mcmVlemVkb3dubG9hZC5jb21cL2Rvd25sb2FkXC8vLnRlc3QobG9jYXRpb24uaHJlZikpIHsKICAgICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJ2JvZHkgPiBkaXZbaWRdJyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICBtb25uc3V0b2dhdHlhX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogUE0KICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vMUx3NjBoNmsKICAgICAgICBob3N0IDogWydtb25uc3V0b2dhdHlhLmNvbSddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgiI3NpdGUtYm94IHtkaXNwbGF5OmJsb2NrO30iKTsKICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KCcjZm9yLWFkLWJsb2NrZXInKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHJhcGlkOF9jb20gOiB7CiAgICAgICAgaG9zdCA6IFsncmFwaWQ4LmNvbSddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KCdkaXYuYmFja2sgKyAjYmxjb2tNemcnKTsKICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KCdkaXYuYmFja2snKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHR1cmtkb3duX2NvbSA6IHsKICAgICAgICBob3N0IDogWyd0dXJrZG93bi5jb20nXSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyByZW1vdmUgZmFjZWJvb2sgYm94CiAgICAgICAgICBBYWsucmVtb3ZlRWxlbWVudCgnI2R1eXVydScpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZmlsbW92aXppamFfZG9tYWlucyA6IHsKICAgICAgICBob3N0IDogWydmaWxtb3ZpemlqYS5tZScsICdmaWxtb3ZpemlqYS5jb20nLCAnZmlsbW92aXppamEuaW4nLCAnZmlsbW92aXppamEubmV0J10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLyoKICAgICAgICAgIHZhciBkID0gbmV3IERhdGUoKTsKICAgICAgICAgIHZhciB3ZWVrZGF5ID0gWyJTdW5kYXkiLCAiTW9uZGF5IiwgIlR1ZXNkYXkiLCAiV2VkbmVzZGF5IiwgIlRodXJzZGF5IiwgIkZyaWRheSIsICJTYXR1cmRheSJdOwogICAgICAgICAgdmFyIG4gPSB3ZWVrZGF5W2QuZ2V0RGF5KCldOwogICAgICAgICAgQWFrLnNldEVsZW1lbnQoJyMnICsgbiwgewogICAgICAgICAgaHRtbCA6ICcnCiAgICAgICAgICB9KTsKICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KCcjJyArIG4pOwogICAgICAgICAgICovCiAgICAgICAgfQogICAgICB9LAogICAgICBoYWNraW50b3NoX3pvbmUgOiB7CiAgICAgICAgLy8gYnk6IEFsZXhhbmRlcjI1NQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPWhhY2tpbnRvc2guem9uZQogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlMi5vcmcvRG5COU9qNGYKICAgICAgICBob3N0IDogWydoYWNraW50b3NoLnpvbmUnXSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgdmFyIGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdOwogICAgICAgICAgLy8gRmFrZSBHb29nbGUgYWQgZnJhbWUgY29udGVudAogICAgICAgICAgdmFyIGFkMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucyIpOwogICAgICAgICAgYWQxLmNsYXNzTmFtZSA9ICJhZHNieWdvb2dsZSI7CiAgICAgICAgICBhZDEuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIkFBSyIpKTsKICAgICAgICAgIGhlYWQuaW5zZXJ0QmVmb3JlKGFkMSwgaGVhZC5jaGlsZE5vZGVzWzBdKTsKCiAgICAgICAgICAvKgogICAgICAgICAgLy8gRmFrZSBDbGVhbk15TWFjIGFkIGZyYW1lIHNpemUKICAgICAgICAgIHZhciBhZDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgIGFkMi5pZCAgPSAibnljdWhldmdxaSI7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYWQyLndyYXBwZWRKU09iamVjdCwgJ2NsaWVudEhlaWdodCcsIHt2YWx1ZTogMX0pOwogICAgICAgICAgaGVhZC5pbnNlcnRCZWZvcmUoYWQyLCBoZWFkLmNoaWxkTm9kZXNbMF0pOwogICAgICAgICAgICovCgogICAgICAgICAgdmFyIGVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFkc2Vuc2VncmV5Jyk7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7CiAgICAgICAgICAgIG5vZGUuc3JjID0gQWFrLmltZ0JhaXQ7CiAgICAgICAgICAgIGVsZW1zW2ldLmFwcGVuZENoaWxkKG5vZGUpOwogICAgICAgICAgfQoKICAgICAgICB9LAogICAgICAgIG9uQmVmb3JlU2NyaXB0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFt7CiAgICAgICAgICAgICAgY29udGFpbnMgOiAnZGlzYWJsZSBBREJsb2NrIGNvbXBsZXRlbHknLAogICAgICAgICAgICAgIGV4dGVybmFsIDogZmFsc2UsCiAgICAgICAgICAgICAgcmVtb3ZlIDogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgICBdOwogICAgICAgIH0KICAgICAgfSwKICAgICAgcHJpdmF0ZWluc3RhX2NvbSA6IHsKICAgICAgICBob3N0IDogWydwcml2YXRlaW5zdGEuY29tJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gKyBhYnAgcnVsZQogICAgICAgICAgQWFrLnV3LmRvbnRfc2Nyb2xsID0gZmFsc2U7CiAgICAgICAgICBBYWsucmVtb3ZlRWxlbWVudCgiI292ZXJsYXlfZGl2Iik7CiAgICAgICAgICBBYWsucmVtb3ZlRWxlbWVudCgiI292ZXJsYXlfbWFpbl9kaXYiKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHJpc2lrb2dlc3VuZGhlaXRfZGUgOiB7CiAgICAgICAgaG9zdCA6IFsncmlzaWtvLWdlc3VuZGhlaXQuZGUnXSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgd2luZG93LnN0b3AoKTsKICAgICAgICAgIH0sIDUwMDApOwogICAgICAgIH0KICAgICAgfSwKICAgICAgb25lcGxheWxpc3RfZXVfcG4gOiB7CiAgICAgICAgaG9zdCA6IFsnb25lcGxheWxpc3QuZXUucG4nXSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyBraWxsIHBvcHVuZGVyCiAgICAgICAgICBBYWsudXcubWFrZVBvcHVuZGVyID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9LAogICAgICBvbm1lZGFfZGUgOiB7CiAgICAgICAgLy8gbm90ZTogc2NyaXB0IG9iZnVzY2F0ZWQgbGluZSAxMTEwCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvZm9ydW0vZGlzY3Vzc2lvbi84NTc2CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEwNjcKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vcWY0NmJOM3oKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vUndIeUYwTkwKICAgICAgICBob3N0IDogWydvbm1lZGEuZGUnXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay51dy4kQURQID0gdHJ1ZTsKICAgICAgICAgIEFhay51dy5zYXNfY2FsbEFkID0gZnVuY3Rpb24gKCkge307CiAgICAgICAgICBBYWsudXcuc2FzX2NhbGxBZHMgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHR1cmJvZGVicmlkZXVyX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNTk5CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzU2MwogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy81MjYKICAgICAgICBob3N0IDogWyd0dXJib2RlYnJpZGV1ci5jb20nXSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuY3JlYXRlRWxlbWVudCh7CiAgICAgICAgICAgIHRhZyA6ICdkaXYnLAogICAgICAgICAgICBpZCA6ICdwdWJkaXJlY3RlJywKICAgICAgICAgICAgaHRtbCA6ICc8aW1nICBzcmM9IicgKyBBYWsuaW1nQmFpdCArICciLz48YSAgaHJlZj0iIyI+Jm5ic3A7PC9hPicsCiAgICAgICAgICAgIGFwcGVuZCA6ICdib2R5JwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICByb2NrZmlsZV9ldSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTI1NgogICAgICAgIGhvc3QgOiBbJ3JvY2tmaWxlLmV1J10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmNyZWF0ZUVsZW1lbnQoewogICAgICAgICAgICB0YWcgOiAnaWZyYW1lJywKICAgICAgICAgICAgc3JjIDogJ2Fib3V0OmJsYW5rJywKICAgICAgICAgICAgc3R5bGUgOiAndmlzaWJpbGl0eTpoaWRkZW47JywKICAgICAgICAgICAgYXBwZW5kIDogJ2JvZHknCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGxpbmtidWNrc19hbnRpYWRibG9jayA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvOTMyCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzQ2OQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8yNzcKICAgICAgICAvLyB2MzogaHR0cDovL3Bhc3RlYmluLmNvbS8wZ2g4TE1HSAogICAgICAgIC8vIG5vdGU6IG5vIHNvbHV0aW9uLCBhbnRpLWFkYmxvY2sgZGlmZmljdWx0IHRvIGJ5cGFzcyAtLT4gaHR0cDovL3Bhc3RlYmluLmNvbS8xTlJxN1d2WgogICAgICAgIGhvc3QgOiBbJ2xpbmtidWNrcy5jb20nLCAnbWluaXVybHMuY28nLCAncGljYnVja3MuY29tJywgJ3BpY3R1cmVzZXRjLm5ldCcsICdwbGFjZXBpY3R1cmVzLmNvbScsICdwb29udG93bi5uZXQnLCAncXFjLmNvJywgJ3F2dm8uY29tJywgJ3JlYWxmaWxlcy5uZXQnLCAncnFxLmNvJywgJ3NlcmlvdXNkZWFscy5uZXQnLCAnc2VyaW91c2ZpbGVzLmNvbScsICdzZXJpb3VzdXJscy5jb20nLCAnc2V4cGFsYWNlLmdzJywgJ3RoZXNlYmxvZ3MuY29tJywgJ3RoZXNlZmlsZXMuY29tJywgJ3RoZXNlZm9ydW1zLmNvbScsICd0aG9zZWdhbGxlcmllcy5jb20nLCAndGlueWJ1Y2tzLm5ldCcsICd0aW55bGlua3MuY28nLCAndG5hYnVja3MuY29tJywgJ3R1YmV2aXJhbC5jb20nLCAndWJlcnBpY3ouY29tJywgJ3ViZXJ2aWR6LmNvbScsICd1YnVja3MubmV0JywgJ3VnYWxsZXJpZXMubmV0JywgJ3VsdHJhZmlsZXMubmV0JywgJ3VybGJlYXQubmV0JywgJ3VybHB1bHNlLm5ldCcsICd3aGFja3l2aWR6LmNvbScsICd5b3VmYXAubWUnLCAneXl2LmNvJywgJ3p4eG8ubmV0JywgJ3pmZi5jbycsICdsaW5rYnVja3NkbnMuY28nLCAnbWluaXVybHMuY29tJywgJ2R5by5ncycsICdnb25ldmlyYWwuY29tJywgJ2VhZnlmc3VoLm5ldCcsICdzYXNvbnRud2MubmV0J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIGRvIG5vdGhpbmcuLi4KICAgICAgICB9CiAgICAgIH0sCiAgICAgIGxpbmtidWNrc192aXNpdHNjcmlwdCA6IHsKICAgICAgICAvLyBpc3N1ZToKICAgICAgICBob3N0IDogWydyZWZlcmVuY2VtZWdhLmNvbScsICdmcGFiZC5jb20nLCAnY3JhY2thY2MuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIFNraXAgdmlzaXRTY3JpcHQgd2hlbiBzaXRlIHVzZSBDbG91ZEZsYXJlIFJvY2tldCBTY3JpcHQKICAgICAgICAgIEFhay5zZXRDb29raWUoJ19sYkdhdGVQYXNzZWQnLCB0cnVlKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGxpbmtfdGwgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9bGluay50bAogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dyZWFzeWZvcmsub3JnL2ZyL2ZvcnVtL2Rpc2N1c3Npb24vODQzNwogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS8xTWtDbm1MNwogICAgICAgIGhvc3QgOiBbJ2xpbmsudGwnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCcuYWRibG9jayB7IGhlaWdodDoxcHg7IH0nKTsKICAgICAgICAgIEFhay51dy5hZGJsb2NrZXIgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHdzdHJlYW1fdmlkZW8gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEzODIKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vRWlBUlZRWHQKICAgICAgICBob3N0IDogWyd3c3RyZWFtLnZpZGVvJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTdHlsZSgnI2FkaXYgeyBoZWlnaHQ6NHB4OyB9Jyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBfNHNoYXJlZF9jb20gOiB7CiAgICAgICAgaG9zdCA6IFsnNHNoYXJlZC5jb20nXSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyBIaWRlICJEaXNhYmxlIEFkQmxvZGsiIG1lc3NhZ2VzCiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuY2xhc3NMaXN0LnJlbW92ZSgianNCbG9ja0RldGVjdCIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgcHJvX2RvbWFpbnMgOiB7CiAgICAgICAgaG9zdCA6IFsncHJvLXppay53cycsICdwcm8tdGVjdC53cycsICdwcm8tZGRsLndzJywgJ3Byby1zcG9ydC53cyddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuc2V0Q29va2llKCd2aXNpdGVkZicsIHRydWUpOwogICAgICAgICAgQWFrLnNldENvb2tpZSgndmlzaXRlZGgnLCB0cnVlKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGNvbXB0b2lyaGFyZHdhcmVfY29tIDogewogICAgICAgIGhvc3QgOiBbJ2NvbXB0b2lyLWhhcmR3YXJlLmNvbSddLAogICAgICAgIG9uQWx3YXlzIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3LmFkYmxvY2sgPSAnbm9uJzsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGJha2Vyc2ZpZWxkX2NvbSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNjU3CiAgICAgICAgLy8gbm90ZTogYWxzbyBzb2x1dGlvbiB0byBBYWtMaXN0CiAgICAgICAgaG9zdCA6IFsnYmFrZXJzZmllbGQuY29tJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuQURfU0xPVF9SRU5ERVJFRCA9IHRydWU7CiAgICAgICAgfQogICAgICB9LAogICAgICBla3N0cmFibGFkZXRfZGsgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9ZWtzdHJhYmxhZGV0CiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL1IwMjlYcENyCiAgICAgICAgaG9zdCA6IFsnZWtzdHJhYmxhZGV0LmRrJywgJ2ViLmRrJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuQURURUNIID0ge307CiAgICAgICAgfQogICAgICB9LAogICAgICBwY2dhbWVzX2Rvd25sb2FkX25ldCA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTQ1MQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dyZWFzeWZvcmsub3JnL2ZvcnVtL2Rpc2N1c3Npb24vOTMyOAogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS9FQlZaZzNWQgogICAgICAgIGhvc3QgOiBbJ3BjZ2FtZXMtZG93bmxvYWQubmV0J10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuc2V0Q29va2llKCdub0FkYmxvY2tOaWNlTWVzc2FnZScsIDEpOwogICAgICAgICAgQWFrLnV3Lm1nQ2FuTG9hZDMwNTQ3ID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGxhY2hhaW5lbWV0ZW9fY29tIDogewogICAgICAgIC8vIG5vdGU6IGFsc28ga2lsbGVkIGJ5IEFha0xpc3QKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNTkwCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzI0NQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8yMTUKICAgICAgICBob3N0IDogWydsYWNoYWluZW1ldGVvLmNvbSddLAogICAgICAgIG9uQWx3YXlzIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3LmpzX2xvYWRlZCA9IHRydWU7CiAgICAgICAgfQogICAgICB9LAogICAgICBtYWM0ZXZlcl9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzk5NwogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS9SUW5DRVlLNgogICAgICAgIGhvc3QgOiBbJ21hYzRldmVyLmNvbSddLAogICAgICAgIG9uQWx3YXlzIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3LmNvcXVpbm91ID0gZnVuY3Rpb24gKCkge307CiAgICAgICAgfQogICAgICB9LAogICAgICBfNTI3OGJic19jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9NTI3OGJicy5jb20KICAgICAgICBob3N0IDogWyc1Mjc4YmJzLmNvbSddLAogICAgICAgIG9uQWx3YXlzIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3Lm15YWFicGZ1bjEyID0gZnVuY3Rpb24gKCkge307CiAgICAgICAgfQogICAgICB9LAogICAgICB0aGVzaW1zcmVzb3VyY2VfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPXRoZXNpbXNyZXNvdXJjZS5jb20KICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vREU5cmJqeFkKICAgICAgICBob3N0IDogWyd0aGVzaW1zcmVzb3VyY2UuY29tJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuZ2Fkc2l6ZSA9IHRydWU7CiAgICAgICAgICBBYWsudXcuaUhhdmVMb2FkZWRBZHMgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSwKICAgICAgeWVsbG93YnJpZGdlX2NvbSA6IHsKICAgICAgICBob3N0IDogWyd5ZWxsb3dicmlkZ2UuY29tJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuZmluYWxpemVQYWdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgZ2FtZV9kZWJhdGVfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMzY2CiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL1V6c2lYMEZLCiAgICAgICAgaG9zdCA6IFsnZ2FtZS1kZWJhdGUuY29tJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuYWRfYmxvY2tfdGVzdCA9IGZ1bmN0aW9uICgpIHt9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgYWRzY2VuZG1lZGlhIDogewogICAgICAgIGhvc3QgOiBbJ2Fkc2NlbmRtZWRpYS5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gYWRzY2VuZG1lZGlhIC0gaHR0cHM6Ly93d3cuYWRzY2VuZG1lZGlhLmNvbS8KICAgICAgICAgIHZhciByZWYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJykuaHJlZiA9IGRvY3VtZW50LnJlZmVycmVyOwogICAgICAgICAgdmFyIGhvc3QgPSBsb2NhdGlvbi5ob3N0OwogICAgICAgICAgdmFyIHBhdGggPSBsb2NhdGlvbi5wYXRobmFtZTsKICAgICAgICAgIGlmIChBYWsuY29udGFpbnMocGF0aCwgJy93aWRnZXRfYWRibG9jay5waHAnKSAmJiAhQWFrLmNvbnRhaW5zKHJlZi5ob3N0LCBob3N0KSkgewogICAgICAgICAgICAvLyBBdXRvIHJlcG9ydAogICAgICAgICAgICBBYWsuZGV0ZWN0ZWQoJ0Fkc2NlbmRtZWRpYScsIHJlZi5ob3N0LCBob3N0KTsKICAgICAgICAgICAgLy8gTm90aWZpY2F0aW9uCiAgICAgICAgICAgIEFhay5ub3RpZmljYXRpb24oJ1lvdSBtdXN0IHN1YnNjcmliZSB0byA8Yj5BYWtMaXN0IChBbnRpLUFkYmxvY2sgS2lsbGVyICk8L2I+IDxhIGhyZWY9IicgKyBBYWsuc3Vic2NyaWJlVVJMICsgJyIgdGFyZ2V0PSJfYmxhbmsiPlN1YnNjcmliZTwvYT4nKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIGFkd29ya21lZGlhIDogewogICAgICAgIGhvc3QgOiBbJ2Fkd29ya21lZGlhLmNvbScsICdsb3h0ay5jb20nLCAnY29udGVudGxvY2tpbmduZXR3b3Jrcy5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gQWRXb3JrTWVkaWEgLSBodHRwczovL3d3dy5hZHdvcmttZWRpYS5jb20vCiAgICAgICAgICB2YXIgcmVmID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpLmhyZWYgPSBkb2N1bWVudC5yZWZlcnJlcjsKICAgICAgICAgIHZhciBob3N0ID0gbG9jYXRpb24uaG9zdDsKICAgICAgICAgIHZhciBwYXRoID0gbG9jYXRpb24ucGF0aG5hbWU7CiAgICAgICAgICBpZiAoQWFrLmNvbnRhaW5zKHBhdGgsICcvaGVscC9yZW1vdmVBQi5waHAnKSAmJiAhQWFrLmNvbnRhaW5zKHJlZi5ob3N0LCBob3N0KSkgewogICAgICAgICAgICAvLyBBdXRvIHJlcG9ydAogICAgICAgICAgICBBYWsuaW5mbygnQWR3b3JrbWVkaWEnLCByZWYuaG9zdCwgaG9zdCk7CiAgICAgICAgICAgIC8vIE5vdGlmaWNhdGlvbgogICAgICAgICAgICBBYWsubm90aWZpY2F0aW9uKCdZb3UgbXVzdCBzdWJzY3JpYmUgdG8gPGI+QWFrTGlzdCAoQW50aS1BZGJsb2NrIEtpbGxlciApPC9iPiA8YSBocmVmPSInICsgQWFrLnN1YnNjcmliZVVSTCArICciIHRhcmdldD0iX2JsYW5rIj5TdWJzY3JpYmU8L2E+Jyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAvLyBQbGF5ZXJzCiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgIGtpc3NhbmltZV9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzQ1MQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8zODEKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMzAyCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzI1NwogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xNzgKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTk2CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzU2CiAgICAgICAgaG9zdCA6IFsna2lzc2FuaW1lLmNvbScsICdraXNzYW5pbWUudG8nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gTWFza2luZyBhZHMKICAgICAgICAgIEFhay5hZGRTdHlsZSgnaWZyYW1lW2lkXj0iYWRzSWZybWUiXSwgLmRpdkNsb3NlQnV0IHsgZGlzcGxheTpub25lOyB9Jyk7CiAgICAgICAgICAvLyBTb2x1dGlvbiAxCiAgICAgICAgICBBYWsudXcuRG9EZXRlY3QyID0gbnVsbDsKICAgICAgICB9LAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICAvLyBTb2x1dGlvbiAxIGFicCBydWxlCiAgICAgICAgICAvLyBAQHx8a2lzc2FuaW1lLmNvbV4kZWxlbWhpZGUKCiAgICAgICAgICB2YXIgZGl2Q29udGVudFZpZGVvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RpdkNvbnRlbnRWaWRlbycpOwoKICAgICAgICAgIC8vIFNvbHV0aW9uIDIKICAgICAgICAgIGlmIChBYWsudXcuRG9EZXRlY3QyKSB7CiAgICAgICAgICAgIEFhay51dy5Eb0RldGVjdDIgPSBudWxsOwogICAgICAgICAgICBBYWsudXcuQ2hlY2tBZEltYWdlID0gbnVsbDsKICAgICAgICAgICAgQWFrLmluZm8oJ1NvbHV0aW9uIDInKTsKICAgICAgICAgIH0gLy9Tb2x1dGlvbiAzCiAgICAgICAgICBlbHNlIGlmIChkaXZDb250ZW50VmlkZW8pIHsKCiAgICAgICAgICAgIHZhciBkaXZEb3dubG9hZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkaXZEb3dubG9hZCcpLmNsb25lTm9kZSh0cnVlKTsKCiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGRpdkNvbnRlbnRWaWRlby5pbm5lckhUTUwgPSAnJzsKICAgICAgICAgICAgICBBYWsudXcuRG9IaWRlRmFrZSgpOwogICAgICAgICAgICAgIGRpdkNvbnRlbnRWaWRlby5hcHBlbmRDaGlsZChkaXZEb3dubG9hZCk7CiAgICAgICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJ2lmcmFtZVtpZF49ImFkc0lmcm1lIl0sIC5kaXZDbG9zZUJ1dCcpOwogICAgICAgICAgICAgIEFhay5pbmZvKCdTb2x1dGlvbiAzJyk7CiAgICAgICAgICAgIH0sIDU1MDApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgS2lzc2NhcnRvb25fbWUgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzQ4OAogICAgICAgIGhvc3QgOiBbJ2tpc3NjYXJ0b29uLm1lJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcueGFabEUgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICB9LAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KCdpZnJhbWVbaWRePSJhZHNJZnJtZSJdJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBvcGVubG9hZF9kb21haW5zIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPW9wZW5sb2FkCiAgICAgICAgaG9zdCA6IFsnb3BlbmxvYWQuY28nLCAnb3BlbmxvYWQuaW8nLCAnb3BlbmxvYWQudHYnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3LmFkYmxvY2sgPSBmYWxzZTsKICAgICAgICAgIEFhay51dy5hZGJsb2NrMiA9IGZhbHNlOwogICAgICAgICAgQWFrLnV3LnBvcEFkc0xvYWRlZCA9IHRydWU7CiAgICAgICAgICAvLyBoaWRlIGZha2UgcGxheSBidXR0b24gdXNlZCB0byBvcGVuIHBvcHVuZGVyCiAgICAgICAgICAvL0Fhay5hZGRTdHlsZSgnI3ZpZGVvb3ZlcmxheSB7IGRpc3BsYXk6bm9uZTsgfScpCiAgICAgICAgfQogICAgICB9LAogICAgICB5b3V3YXRjaF9vcmcgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9eW91d2F0Y2gKICAgICAgICAvLyB0ZXN0OiBodHRwOi8veW91d2F0Y2gub3JnL2VtYmVkLTU5cDdpM2Nka3NlMC00NTN4MzIwLmh0bWwKICAgICAgICAvLyB0ZXN0OiBodHRwOi8veW91d2F0Y2gub3JnLzU5cDdpM2Nka3NlMAogICAgICAgIGhvc3QgOiBbJ3lvdXdhdGNoLm9yZycsICdjaG91aGFhLmluZm8nLCAnYWh6YWhnNm9oYi5jb20nLCAnYWh6YWhnNm9oYi5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gc2tpcCBhbnRpLWFkYmxvY2sKICAgICAgICAgIEFhay51dy5hZHNTaG93UG9wdXAxID0gMTsKICAgICAgICB9LAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIHJlbm92ZSBhZHMgKyBmYWtlIHBsYXkgYnV0dG9uCiAgICAgICAgICBBYWsucmVtb3ZlRWxlbWVudCgnI3BsYXllcl9pbWosICNwbGF5ZXJfaW1qICsgZGl2W2lkXScpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZXhhc2hhcmVfY29tIDogewogICAgICAgIC8vIGJ5OiBXYXRpbGluCiAgICAgICAgLy8gcHVsbDogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9wdWxsLzUxOQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPWV4YXNoYXJlLmNvbQogICAgICAgIC8vIHRlc3Q6ICBodHRwOi8vZXhhc2hhcmUuY29tL2dhbHcyZ2Uya3pzdgogICAgICAgIGhvc3QgOiBbJ2V4YXNoYXJlLmNvbScsICdjaGVmdGkuaW5mbycsICdib2plbTNhLmluZm8nLCAnYWppaGV6by5pbmZvJywgJ3lhaG1haWIzYWkuY29tJywgJ3lhaG1haWIzYWkuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIHNraXAgYW50aS1hZGJsb2NrCiAgICAgICAgICBBYWsudXcuYWRzU2hvd1BvcHVwMSA9IDE7CiAgICAgICAgfSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyByZW5vdmUgYWRzICsgZmFrZSBwbGF5IGJ1dHRvbgogICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJyNwbGF5ZXJfZ2F6LCAjcGxheWVyX2dheiArIGRpdltpZF0nKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGFuMW1lX3NlIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xOTAKICAgICAgICBob3N0IDogWydhbjFtZS5zZSddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBBYWsudXcuaXNCbG9ja0FkczIgPSBmYWxzZTsKICAgICAgICAgIH0sIDEwMDAwKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGhxcV90diA6IHsgLy8gcHV0bG9ja2VyLmlzCiAgICAgICAgaG9zdCA6IFsnaHFxLnR2J10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gKyBhYnAgcnVsZQogICAgICAgICAgLy8gaHR0cDovL2hxcS50di9wbGF5ZXIvZW1iZWRfcGxheWVyLnBocD92aWQ9UjNER0hHM0dLWFg3JmF1dG9wbGF5PW5vCiAgICAgICAgICBpZiAoJy9wbGF5ZXIvZW1iZWRfcGxheWVyLnBocCcgPT0gbG9jYXRpb24ucGF0aG5hbWUpIHsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtpZF49ImZvcm0tIl0nKS5zdWJtaXQoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIC8vIFBvbGFuZAogICAgICB3cF9kb21haW5zIDogewogICAgICAgIC8vIE5vdGU6IGRpc2FibGUgRWFzeVByaXZhY3kKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvOTU2CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzkwNQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8zMDAKICAgICAgICBob3N0IDogWydiaXp0b2sucGwnLCAnd3AudHYnLCAnd3AucGwnLCAnc3BvcnRvd2VmYWt0eS5wbCcsICdrYWZldGVyaWEudHYnLCAna2FmZXRlcmlhLnBsJywgJy53cnp1dGEucGwnLCAncHVkZWxlay50dicsICdrb21lZGlvd28ucGwnLCAnc2ZvcmEucGwnLCAnYXV0b2tyYXRhLnBsJywgJ3Nwb3J0ZmFuLnBsJywgJ3dhd2Fsb3ZlLnBsJywgJ2hvdG1vbmV5LnBsJywgJ2FsZXNlcmlhbGUucGwnLCAnYmFib2wucGwnLCAnc25vYmthLnBsJywgJ25vY290eS5wbCcsICdtb25leS5wbCcsICdhYmN6ZHJvd2llLnBsJywgJ2dhZHpldG9tYW5pYS5wbCcsICdhdXRva3VsdC5wbCcsICdrb21vcmtvbWFuaWEucGwnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gcHJldmVudCBwb3B1cCBhbnRpLWFkYmxvY2sgZnJvbSBhYmN6ZHJvd2llLnBsCiAgICAgICAgICBBYWsuc2V0Q29va2llKCdBQkNBQkMnLCB0cnVlKTsKICAgICAgICB9LAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIAogICAgICAgICAgQWFrLmhhc0VsZW1lbnQoJy53cC1wbGF5ZXInLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAKICAgICAgICAgICAgdmFyIHJlcGxhY2VQbGF5ZXJXUCA9IGZ1bmN0aW9uIChtaWQsIHBsYXllcikgewogICAgICAgICAgICAgIC8qIFJlcXVlc3QKICAgICAgICAgICAgICBodHRwOi8vZ2V0LndwLnR2Lz9taWQ9MTY2MTA1NgogICAgICAgICAgICAgIGh0dHA6Ly93cC50di9wbGF5ZXIvbWlkLDE2NjEwNTYsZW1iZWQuanNvbgogICAgICAgICAgICAgIGh0dHA6Ly9nZXQud3AudHYvP2Y9Mjg5NjQ2Mi4xNDI2MzI5MDU2OTA0Lmwud2VibSZybmQ9MQogICAgICAgICAgICAgIGh0dHBzOi8vd3AudHYvcGxheWVyL21pZCwxNzQ3MTE3LGVtYmVkLmpzb24KICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICBBYWsucmVxdWVzdCh7CiAgICAgICAgICAgICAgICB1cmwgOiAnaHR0cDovL3dwLnR2L3BsYXllci9taWQsJyArIG1pZCArICcsZW1iZWQuanNvbicsCiAgICAgICAgICAgICAgICBvbmxvYWQgOiBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgIHZhciByZXMgPSByZXN1bHQucmVzcG9uc2VUZXh0OwogICAgICAgICAgICAgICAgICB2YXIgb2JqID0gSlNPTi5wYXJzZShyZXMpOwogICAgICAgICAgICAgICAgICBBYWsubG9nKG9iaik7CgogICAgICAgICAgICAgICAgICB2YXIgUGxheWVyID0gbmV3IEFhay5wbGF5ZXIoKTsKICAgICAgICAgICAgICAgICAgUGxheWVyLnZpZGVvanMocGxheWVyLCB7CiAgICAgICAgICAgICAgICAgICAgc291cmNlIDogQWFrLmZpeFByb3RvY29sVVJMKG9iai5jbGlwLnVybFsxXS51cmwpLCAvLyBIRAogICAgICAgICAgICAgICAgICAgIHR5cGUgOiAnbXA0JywKICAgICAgICAgICAgICAgICAgICBhdXRvcGxheSA6IGZhbHNlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdmFyIHJlcGxhY2VQbGF5ZXJXcnp1dGEgPSBmdW5jdGlvbiAoa2V5LCBjaGFubmVsLCBlbGVtKSB7CiAgICAgICAgICAgICAgQWFrLnJlcXVlc3QoewogICAgICAgICAgICAgICAgLy8gaHR0cDovL3d3dy53cnp1dGEucGwvbnBwL2VtYmVkL3dvbG5hcG9sc2thMi8wSTBIUTJtdXRKYwogICAgICAgICAgICAgICAgdXJsIDogJ2h0dHA6Ly93d3cud3J6dXRhLnBsL25wcC9lbWJlZC8nICsgY2hhbm5lbCArICcvJyArIGtleSwKICAgICAgICAgICAgICAgIG9ubG9hZCA6IGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgdmFyIHJlcyA9IHJlc3VsdC5yZXNwb25zZVRleHQ7CiAgICAgICAgICAgICAgICAgIHZhciBvYmogPSBKU09OLnBhcnNlKHJlcyk7CiAgICAgICAgICAgICAgICAgIEFhay5sb2cob2JqKTsKCiAgICAgICAgICAgICAgICAgIHZhciBQbGF5ZXIgPSBuZXcgQWFrLnBsYXllcigpOwogICAgICAgICAgICAgICAgICBQbGF5ZXIudmlkZW9qcyhlbGVtLCB7CiAgICAgICAgICAgICAgICAgICAgc291cmNlIDogQWFrLmZpeFByb3RvY29sVVJMKG9iai51cmxbMF0udXJsKSwgLy9IRAogICAgICAgICAgICAgICAgICAgIHR5cGUgOiAnbXA0JywKICAgICAgICAgICAgICAgICAgICBhdXRvcGxheSA6IGZhbHNlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8gVXNpbmcgYW4gZXh0ZXJuYWwgZmxhc2ggcGxheWVyIGlzIGltcG9zc2libGUgYmVjYXVzZSBwcm90ZWN0ZWQgYnkgY3Jvc3Nkb21haW4ueG1sCiAgICAgICAgICAgIHZhciBwbGF5ZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLndwLXBsYXllcicpOyAvLyAgI1BsYXllcjAsICNQbGF5ZXIxLCAjbWFpblBsYXllcgogICAgICAgICAgICBpZiAocGxheWVycy5sZW5ndGgpIHsKICAgICAgICAgICAgICAvLyBmaXhidWcgZ21feGhyIGxvb3AgcmVxdWVzdCAtIGh0dHA6Ly90aW55dXJsLmNvbS9wcWE5aHRxCiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwbGF5ZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICB2YXIgbWlkID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciBwbGF5ZXIgPSBwbGF5ZXJzW2ldOwogICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IHBsYXllci5wYXJlbnROb2RlOwogICAgICAgICAgICAgICAgdmFyIHNjcmlwdCA9IHBsYXllci5wcmV2aW91c1NpYmxpbmc7CiAgICAgICAgICAgICAgICB2YXIgdGl0bGUgPSBwbGF5ZXIucXVlcnlTZWxlY3RvcignLnRpdGxlQ29udCBhLnRpdGxlJyk7CiAgICAgICAgICAgICAgICB2YXIgZW1iZWR2aWRlb3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzY3JpcHRbc3JjKj0iL2VtYmVkX3ZpZGVvLmpzIl0nKTsKICAgICAgICAgICAgICAgIEFhay5sb2cocGxheWVyLCBwYXJlbnQsIHNjcmlwdCwgdGl0bGUpOwoKICAgICAgICAgICAgICAgIGlmIChlbWJlZHZpZGVvcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgLy8gcHVkZWxlay53cnp1dGEucGw6IGh0dHA6Ly90aW55dXJsLmNvbS9sOGpvNXYyCiAgICAgICAgICAgICAgICAgIC8vIHB1ZGVsZWsudHY6IGh0dHA6Ly90aW55dXJsLmNvbS9rbHl6aDZyLCBodHRwOi8vdGlueXVybC5jb20vejdmcjg5dgogICAgICAgICAgICAgICAgICAvLyBwdWRlbGVrLnR2ICh0cmlwbGUpOiBodHRwOi8vdGlueXVybC5jb20vbjliMjdvMgogICAgICAgICAgICAgICAgICAvLyBmaWxtLndwLnBsOiBodHRwOi8vdGlueXVybC5jb20vcTdrNWJ4cAogICAgICAgICAgICAgICAgICB2YXIgZW1iZWR2aWRlbyA9IGVtYmVkdmlkZW9zW2ldOwogICAgICAgICAgICAgICAgICB2YXIga2V5ID0gL2tleT0oXHcrKS8uZXhlYyhlbWJlZHZpZGVvLnNyYylbMV07CiAgICAgICAgICAgICAgICAgIHZhciBjaGFubmVsID0gL2xvZ2luPShcdyspLy5leGVjKGVtYmVkdmlkZW8uc3JjKVsxXTsKICAgICAgICAgICAgICAgICAgdmFyIGF1dG9zdGFydCA9IC9hdXRvcGxheS8udGVzdChlbWJlZHZpZGVvLnNyYyk7CiAgICAgICAgICAgICAgICAgIHJlcGxhY2VQbGF5ZXJXcnp1dGEoa2V5LCBjaGFubmVsLCBwbGF5ZXIsIGF1dG9zdGFydCk7CiAgICAgICAgICAgICAgICAgIEFhay5sb2coJ2VtYmVkX3ZpZGVvLmpzJyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRpdGxlICYmIC9taWQvLnRlc3QodGl0bGUuaHJlZikpIHsKICAgICAgICAgICAgICAgICAgLy8gc3BvcnRvd2VmYWt0eS5wbDogaHR0cDovL3Rpbnl1cmwuY29tL2w2emFiY3gKICAgICAgICAgICAgICAgICAgbWlkID0gdGl0bGUuaHJlZi5tYXRjaCgvbWlkWz0sXShbMC05XSspLyk7CiAgICAgICAgICAgICAgICAgIEFhay5sb2coJ3RpdGxlLmhyZWYnKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyZW50LmlkKSB7CiAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnQuZGF0YXNldC51cmwpIHsKICAgICAgICAgICAgICAgICAgICAvLyB3cC50djogaHR0cDovL3Rpbnl1cmwuY29tL3B6ZGUyOXQKICAgICAgICAgICAgICAgICAgICBtaWQgPSBwYXJlbnQuZGF0YXNldC51cmwubWF0Y2goL21pZFs9LF0oWzAtOV0rKS8pOwogICAgICAgICAgICAgICAgICAgIEFhay5sb2coJ3BhcmVudC5kYXRhc2V0LnVybCcpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnQucHJldmlvdXNTaWJsaW5nLmlubmVySFRNTCkgewogICAgICAgICAgICAgICAgICAgICAgLy8gd2lhZG9tb3NjaS53cC5wbDogaHR0cDovL3Rpbnl1cmwuY29tL2dxdHQ5Y2EKICAgICAgICAgICAgICAgICAgICAgIG1pZCA9IHBhcmVudC5wcmV2aW91c1NpYmxpbmcuaW5uZXJIVE1MLm1hdGNoKC9taWRbPSxdKFswLTldKykvKTsKICAgICAgICAgICAgICAgICAgICAgIEFhay5sb2coJ3NjcmlwdC5pbmxpbmUuaW5uZXJIVE1MJyk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIC8vIGthZmV0ZXJpYS50djogaHR0cDovL3Rpbnl1cmwuY29tL25vZnA1OGEKICAgICAgICAgICAgICAgICAgICAgIC8vIGFiY3pkcm93aWUucGw6IGh0dHA6Ly90aW55dXJsLmNvbS9oeDZzNWV0CiAgICAgICAgICAgICAgICAgICAgICBtaWQgPSBwYXJlbnQuaW5uZXJIVE1MLm1hdGNoKC9taWRbPSxdKFswLTldKykvKTsKICAgICAgICAgICAgICAgICAgICAgIEFhay5sb2coJ3BhcmVudC5pbm5lckhUTUwnKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2NyaXB0ICYmIHNjcmlwdC50YWdOYW1lID09ICdTQ1JJUFQnKSB7CiAgICAgICAgICAgICAgICAgIC8vIGZpbG0ud3AucGw6IGh0dHA6Ly90aW55dXJsLmNvbS9taDlvbmZ3CiAgICAgICAgICAgICAgICAgIC8vIHB1ZGVsZWsudHYgKGRvdWJsZSk6IGh0dHA6Ly90aW55dXJsLmNvbS9sZWZ2d3R4CiAgICAgICAgICAgICAgICAgIG1pZCA9IHNjcmlwdC5pbm5lckhUTUwubWF0Y2goL21pZFs9LF0oWzAtOV0rKS8pOwogICAgICAgICAgICAgICAgICBBYWsubG9nKCdzY3JpcHQuc3JjLmlubmVySFRNTCcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKG1pZCAhPT0gbnVsbCAmJiBtaWQubGVuZ3RoID09IDIpIHsKICAgICAgICAgICAgICAgICAgcmVwbGFjZVBsYXllcldQKG1pZFsxXSwgcGxheWVyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgbW9qZV9maWxteV9uZXR3b3JrOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEwMTAKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vN0cyUkJucXEKICAgICAgICBob3N0IDogWydtb2plLWZpbG15LnRrJywgJ21vamUtZmlsbXkubGl2ZSddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBzZWFyY2h2YWx1ZSA9IFsndmFyIHBsYXllckluc3RhbmNlJywgJ30pOyddOwogICAgICAgICAgdmFyIHNjcmlwdCA9IEFhay5oYXNTY3JpcHQoc2VhcmNodmFsdWVbMF0pOwoKICAgICAgICAgIGlmIChzY3JpcHQpIHsKICAgICAgICAgICAgdmFyIHNvdXJjZSA9IHNjcmlwdC5pbm5lckhUTUw7CiAgICAgICAgICAgIHZhciBzdHIgPSBzb3VyY2Uuc3Vic3RyaW5nKHNvdXJjZS5sYXN0SW5kZXhPZihzZWFyY2h2YWx1ZVswXSksIHNvdXJjZS5sYXN0SW5kZXhPZihzZWFyY2h2YWx1ZVsxXSkgKyBzZWFyY2h2YWx1ZVsxXS5sZW5ndGgpOwogICAgICAgICAgICBBYWsuYWRkU2NyaXB0KHN0cik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICB0dm5fcGwgOiB7CiAgICAgICAgLy8gYnk6IFJlZWssIE1hcmVrCiAgICAgICAgLy8gc29sdXRpb246IGh0dHA6Ly90aW55dXJsLmNvbS9vaGJ2ejRyLCBodHRwOi8vdGlueXVybC5jb20vanE4czQ2MgogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPXR2bi5wbAogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPXR2bjI0LnBsCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9cGxheWVyLnBsCiAgICAgICAgLy8gdGVzdDogaHR0cDovL3Rpbnl1cmwuY29tL282ZDloNjYsIGh0dHA6Ly90aW55dXJsLmNvbS96NzdtNHpoCiAgICAgICAgaG9zdCA6IFsndHZuLnBsJywgJ3R2bjI0LnBsJywgJ3BsYXllci5wbCddLAogICAgICAgIG9uRW5kIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmhhc0VsZW1lbnQoJ2hlYWRlci5kZXRhaWxJbWFnZScsIGZ1bmN0aW9uICh0aGlzRWxlbWVudCkgewogICAgICAgICAgICBpZiAoQWFrLmdldENvb2tpZSgnY291bnRyeV9jb2RlJykgJiYgQWFrLmdldFNlc3Npb24oJ2dlbmVyYXRlVG9rZW4nKSkgewogICAgICAgICAgICAgICAgdmFyIHBhcnRzID0gZG9jdW1lbnQubG9jYXRpb24uaHJlZi5zcGxpdCgvWy4sXS8pOwogICAgICAgICAgICAgICAgdmFyIGlkID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMl07CiAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gewogICAgICAgICAgICAgICAgICBwbGF0Zm9ybSA6ICJNb2JpbGUiLAogICAgICAgICAgICAgICAgICB0ZXJtaW5hbCA6ICJBbmRyb2lkIiwKICAgICAgICAgICAgICAgICAgZm9ybWF0IDogImpzb24iLAogICAgICAgICAgICAgICAgICB2IDogIjIuMCIsCiAgICAgICAgICAgICAgICAgIGF1dGhLZXkgOiAiYjRiYzk3MTg0MGRlNjNkMTA1YjMxNjY0MDNhYTFiZWEiLAogICAgICAgICAgICAgICAgICB0eXBlIDogImVwaXNvZGUiLAogICAgICAgICAgICAgICAgICBpZCA6IGlkLAogICAgICAgICAgICAgICAgICBzb3J0IDogIm5ld2VzdCIsCiAgICAgICAgICAgICAgICAgIG0gOiAiZ2V0SXRlbSIsCiAgICAgICAgICAgICAgICAgIGRldmljZVNjcmVlbkhlaWdodCA6IDE2MDAsCiAgICAgICAgICAgICAgICAgIGRldmljZVNjcmVlbldpZHRoIDogMjU2MAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZhciBhcGkgPSAnaHR0cHM6Ly9hcGkudHZucGxheWVyLnBsL2FwaS8/JyArIEFhay5zZXJpYWxpemUocGFyYW1zKTsKICAgICAgICAgICAgICAgIHZhciBwcm94eSA9ICdodHRwOi8vd3d3LnByb3h5LnhtYy5wbC9pbmRleC5waHA/aGw9M2U1JnE9JzsJCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIEdldCB2aWRlb1VybAogICAgICAgICAgICAgICAgQWFrLnJlcXVlc3QoewogICAgICAgICAgICAgICAgICB1cmwgOiBBYWsuZ2V0Q29va2llKCdjb3VudHJ5X2NvZGUnKSAhPSAnUEwnID8gcHJveHkgKyBBYWsuZW5jb2RlVVJJKGFwaSkgOiBhcGksCiAgICAgICAgICAgICAgICAgIGhlYWRlcnMgOiB7CiAgICAgICAgICAgICAgICAgICAgIlVzZXItQWdlbnQiIDogIk1vemlsbGEvNS4wIChMaW51eDsgVTsgQW5kcm9pZCA0LjI7IGVuLXVzOyBOZXh1cyAxMCBCdWlsZC9KVlAxNUkpIEFwcGxlV2ViS2l0LzUzNC4zMCAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIFNhZmFyaS81MzQuMzAiCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9ubG9hZCA6IGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcmVzID0gcmVzdWx0LnJlc3BvbnNlVGV4dDsKICAgICAgICAgICAgICAgICAgICBBYWsubG9nKHJlcyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBKU09OLnBhcnNlKHJlcyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHZpZGVvVXJsID0gby5pdGVtLnZpZGVvcy5tYWluLnZpZGVvX2NvbnRlbnRbTnVtYmVyKEFhay5vcHRzLnZpZGVvSEQpXS51cmw7CiAgICAgICAgICAgICAgICAgICAgdmFyIGdlbmVyYXRlVG9rZW4gPSBuZXcgRnVuY3Rpb24oJ3ZpZGVvVXJsJywgQWFrLmdldFNlc3Npb24oJ2dlbmVyYXRlVG9rZW4nKSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHZpZGVvVXJsV2l0aFNlZWQgPSBnZW5lcmF0ZVRva2VuKHZpZGVvVXJsKTsKICAgICAgICAgICAgICAgICAgICB2YXIgUGxheWVyID0gbmV3IEFhay5wbGF5ZXIoKTsKICAgICAgICAgICAgICAgICAgICBQbGF5ZXIudmlkZW9qcyh0aGlzRWxlbWVudCwgewogICAgICAgICAgICAgICAgICAgICAgc291cmNlIDogdmlkZW9VcmxXaXRoU2VlZCwKICAgICAgICAgICAgICAgICAgICAgIHR5cGUgOiAnbXA0JywKICAgICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5OiBmYWxzZQogICAgICAgICAgICAgICAgICAgIH0sIHt9LCB7aW5zZXJ0Oidpbm5lcid9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgQWFrLnJlcXVlc3QoeyAvLyBnZXQgYW5kIHN0b3JlIGdlbmVyYXRlVG9rZW4gZnVuY3Rpb24KICAgICAgICAgICAgICAgIHVybCA6ICdodHRwOi8vcGFzdGViaW4uY29tL3Jhdy9EOXFNNERSMycsCiAgICAgICAgICAgICAgICBvbmxvYWQgOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgdmFyIHJlcyA9IHJlc3BvbnNlLnJlc3BvbnNlVGV4dDsKICAgICAgICAgICAgICAgICAgQWFrLnNldFNlc3Npb24oJ2dlbmVyYXRlVG9rZW4nLCByZXMpOwogICAgICAgICAgICAgICAgICBBYWsucmVxdWVzdCh7IC8vIGdldCB1c2VyIGlwCiAgICAgICAgICAgICAgICAgICAgdXJsIDogJ2h0dHA6Ly9pcC1hcGkuY29tL2pzb24nLAogICAgICAgICAgICAgICAgICAgIG9ubG9hZCA6IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcyA9IHJlc3BvbnNlLnJlc3BvbnNlVGV4dDsKICAgICAgICAgICAgICAgICAgICAgIHZhciBqc29uID0gSlNPTi5wYXJzZShyZXMpOwogICAgICAgICAgICAgICAgICAgICAgQWFrLnNldENvb2tpZSgnY291bnRyeV9jb2RlJywganNvbi5jb3VudHJ5Q29kZSk7CiAgICAgICAgICAgICAgICAgICAgICBBYWsucmVmcmVzaCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgaXBsYV90diA6IHsKICAgICAgICAvLyBieTogTWFyZWsKICAgICAgICAvLyBzb2x1dGlvbjogaHR0cDovL3Rpbnl1cmwuY29tL3B0YjR5YmcKICAgICAgICAvLyBpc3N1ZS4gaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNTIyCiAgICAgICAgLy8gdGVzdDogaHR0cDovL3Rpbnl1cmwuY29tL2h6N2dweHgKICAgICAgICBob3N0IDogWydpcGxhLnR2J10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCcuaHRtbDUtcGxheWVyLXdyYXBwZXIgeyBkaXNwbGF5Om5vbmU7IH0nKTsgLy8gY2hyb21lL29wZXJhCiAgICAgICAgICB2YXIgb2xkUGxheWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmh0bWw1LXBsYXllci13cmFwcGVyLCAjdm9kLXBsYXllcicpOwogICAgICAgICAgQWFrLnJlcXVlc3QoewogICAgICAgICAgICB1cmwgOiAnL1ZPRC9wbGF5LWluLWlwbGEvJyArIGxvY2F0aW9uLmhyZWYubWF0Y2goL1wvdm9kLShcZCspLylbMV0sCiAgICAgICAgICAgIG9ubG9hZCA6IGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICB2YXIgdmlkZW9VUkw7CiAgICAgICAgICAgICAgdmFyIHJlcyA9IHJlc3VsdC5yZXNwb25zZVRleHQ7CiAgICAgICAgICAgICAgdmFyIGlkbiA9IHJlcy5tYXRjaCgvaXBsYTpcL1wvcGxheXZvZC0xXHwoW2EtejAtOV0rKS8pWzFdOwogICAgICAgICAgICAgIEFhay5sb2coaWRuKTsKICAgICAgICAgICAgICBBYWsucmVxdWVzdCh7CiAgICAgICAgICAgICAgICB1cmwgOiAnaHR0cDovL2dldG1lZGlhLnJlZGVmaW5lLnBsL3ZvZHMvZ2V0X3ZvZC8/Y3BpZD0xJnVhPW1pcGxhLzIzJm1lZGlhX2lkPScgKyBpZG4sCiAgICAgICAgICAgICAgICBvbmxvYWQgOiBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgIHZhciByZXMgPSByZXN1bHQucmVzcG9uc2VUZXh0OwogICAgICAgICAgICAgICAgICB2YXIgbyA9IEpTT04ucGFyc2UocmVzKTsKICAgICAgICAgICAgICAgICAgQWFrLmxvZyhvKTsKICAgICAgICAgICAgICAgICAgaWYgKG8udm9kLnZpZGVvX2hkKSB7CiAgICAgICAgICAgICAgICAgICAgdmlkZW9VUkwgPSBvLnZvZC52aWRlb19oZDsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvLnZvZC52aWRlbykgewogICAgICAgICAgICAgICAgICAgIHZpZGVvVVJMID0gby52b2QudmlkZW87CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdmlkZW9VUkwgPSBvLnZvZC5jb3BpZXNbMF0udXJsOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICB2YXIgUGxheWVyID0gbmV3IEFhay5wbGF5ZXIoKTsKICAgICAgICAgICAgICAgICAgUGxheWVyLnZpZGVvanMob2xkUGxheWVyLCB7CiAgICAgICAgICAgICAgICAgICAgc291cmNlIDogdmlkZW9VUkwsCiAgICAgICAgICAgICAgICAgICAgdHlwZSA6ICdtcDQnLAogICAgICAgICAgICAgICAgICAgIHdpZHRoIDogODIwLAogICAgICAgICAgICAgICAgICAgIGhlaWdodCA6IDQ1MCwKICAgICAgICAgICAgICAgICAgICBhdXRvcGxheSA6IGZhbHNlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGtvc2NpYW5fbmV0IDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy85MTQKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20veUdTUEJScWUKICAgICAgICBob3N0IDogWydrb3NjaWFuLm5ldCddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBlbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5iYW4nKTsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgZWxlbXNbaV0ucmVtb3ZlKCk7CiAgICAgICAgICAgIC8vZWxlbXNbaV0uaW5uZXJIVE1MID0gJzxicj4nOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgLy8gRnJhbmNlCiAgICAgIHBsYXl0dl9mciA6IHsgLy8gcmVzZWFyY2ggc29sdXRpb24KICAgICAgICBob3N0IDogWydwbGF5LnR2JywgJ3BsYXl0di5mciddLAogICAgICAgIG9uQWx3YXlzIDogZnVuY3Rpb24gKCkge30sCiAgICAgICAgb25FbmQgOiBmdW5jdGlvbiAoKSB7fQogICAgICB9LAogICAgICBybWNzcG9ydGJmbXR2X2NvbSA6IHsgLy8gd2VicmFkaW8KICAgICAgICBob3N0IDogWydybWNzcG9ydC5iZm10di5jb20nXSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgdmFyIGZsYXNodmFycyA9IHsKICAgICAgICAgICAgdXJsUmFkaW8gOiAiaHR0cDovL21wM2xnNC50ZGYtY2RuLmNvbS8xMDE2MC9ybWMubXAzIiwKICAgICAgICAgICAgbm9tIDogImxpdmUiLAogICAgICAgICAgICBjYXRlZ29yaWUgOiAibGl2ZSIsCiAgICAgICAgICAgIHVybFNtYXJ0IDogIiIgLy8gc2V0IGVtcHR5IHRvIHJlbW92ZSBhdWRpbyBhZAogICAgICAgICAgfTsKICAgICAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgICAgIHdtb2RlIDogInRyYW5zcGFyZW50IgogICAgICAgICAgfTsKCiAgICAgICAgICBBYWsudXcuc3dmb2JqZWN0LmVtYmVkU1dGKCIvc3dmL1JNQ0xJVkUuc3dmIiwgImxpdmVwbGF5ZXIiLCAiNzAiLCAiOTAiLCAiMTAuMC4wIiwgIiIsIGZsYXNodmFycywgcGFyYW1zKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGVjbHlwc2lhX2NvbSA6IHsKICAgICAgICBob3N0IDogWydlY2x5cHNpYS5jb20nXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIFNvbHV0aW9uIDEKICAgICAgICAgIC8vIGFicCBydWxlcwoKICAgICAgICAgIC8vIFNvbHV0aW9uIDIKICAgICAgICAgIEFhay51dy5pc0FCQWN0aXZhdGVkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9OyAvLyBLaWxsIGFudGlhZGJsb2NrCiAgICAgICAgICBBYWsudXcucmVmcmVzaF9pZnJhbWUgPSBmdW5jdGlvbiAoKSB7fTsgLy8gU3RvcCBhZHMgdG8gYmUgbG9hZGVkCiAgICAgICAgfSwKICAgICAgICBvbkVuZCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIFNvbHV0aW9uIDMKICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2W2lkXj0id2VidHZfaWZyYW1lXyJdJyk7CiAgICAgICAgICBpZiAoZWxlbWVudCAhPT0gbnVsbCkgewogICAgICAgICAgICB2YXIgdmlkZW9JZCA9IGVsZW1lbnQuaWQuc3BsaXQoJ18nKVsyXTsKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSAnPGlmcmFtZSBmcmFtZWJvcmRlcj0iMCIgd2lkdGg9IjgxMiIgaGVpZ2h0PSI1MDAiIHNyYz0iaHR0cDovL3d3dy5kYWlseW1vdGlvbi5jb20vZW1iZWQvdmlkZW8vJyArIHZpZGVvSWQgKyAnP2xvZ289MCZhdXRvUGxheT0xJmF1dG9NdXRlPTAiPjwvaWZyYW1lPic7CiAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgbTZ3ZWJfZnIgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzQ2MQogICAgICAgIC8vIHRlc3Q6IGh0dHA6Ly90aW55dXJsLmNvbS9wdG4ydnJsCiAgICAgICAgaG9zdCA6IFsnbTZ3ZWIuZnInXSwKICAgICAgICBvbkVuZCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBwbGF5ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdvYmplY3RbaWQkPSJfZmxhc2hfYXBpIl0nKTsKICAgICAgICAgIHZhciBzY3JpcHQgPSBBYWsuaGFzU2NyaXB0KCdNNi5QbGF5ZXIuY29uZmlnJyk7CgogICAgICAgICAgaWYgKHBsYXllciAhPT0gbnVsbCAmJiBzY3JpcHQgIT09IG51bGwpIHsKICAgICAgICAgICAgdmFyIGZvdW5kID0gc2NyaXB0LmlubmVySFRNTC5tYXRjaCgvTTYuUGxheWVyLmNvbmZpZyA9IChcey4rXH0pOy8pOwogICAgICAgICAgICB2YXIgY29uZmlnID0gSlNPTi5wYXJzZShmb3VuZC5wb3AoKSk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBSZXBsYWNlIHBsYXllcgogICAgICAgICAgICB2YXIgUGxheWVyID0gbmV3IEFhay5wbGF5ZXIoKTsKICAgICAgICAgICAgUGxheWVyLnZpZGVvanMocGxheWVyLnBhcmVudE5vZGUsIHsKICAgICAgICAgICAgICBzb3VyY2UgOiBjb25maWcuc291cmNlc1sxXS5zcmMsCiAgICAgICAgICAgICAgdHlwZSA6ICdtcDQnLAogICAgICAgICAgICAgIGF1dG9wbGF5IDogZmFsc2UKICAgICAgICAgICAgfSk7CgogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgZ2FtaW5ncm9vbV90diA6IHsKICAgICAgICBob3N0IDogWydnYW1pbmdyb29tLnR2J10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuYWRibG9ja19kZXRlY3QgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICAgIEFhay51dy5HUl9hZGJsb2NrX2hpZGVfdmlkZW8gPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICAgIEFhay51dy5hZGJsb2NrX3ZpZGVvX21zZ19zdGFydCA9IGZ1bmN0aW9uICgpIHt9OwogICAgICAgICAgQWFrLnV3LmFkYmxvY2tfdmlkZW9fbXNnX3N0b3AgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICAgIEFhay51dy5kaXNhYmxlX2NoYXQgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIC8vIEdlcm1hbnkKICAgICAgbm93X2RvbWFpbnMgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzMzNgogICAgICAgIC8vIHRlc3Q6IGh0dHA6Ly90aW55dXJsLmNvbS9wZWVvYm91CiAgICAgICAgLy8gdGVzdDogaHR0cDovL2pzYmluLmNvbS92dWNvYmVqb2ZvCiAgICAgICAgaG9zdCA6IFsndm94bm93LmRlJywgJ3J0bC1ub3cucnRsLmRlJywgJ3J0bDJub3cucnRsMi5kZScsICduLXR2bm93LmRlJywgJ3N1cGVycnRsbm93LmRlJywgJ3J0bG5pdHJvbm93LmRlJywgJ25vd3R2LmRlJ10sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLyoKICAgICAgICAgIHZhciBQbGF5ZXIgPSBuZXcgQWFrLnBsYXllcigpOwogICAgICAgICAgUGxheWVyLmVkaXRpbmcoJyN2aWRlb3BsYXllcicsIHsKICAgICAgICAgIHVuc2V0Rmxhc2h2YXJzIDogJ2FiY2hlY2tfZW5hYmxlZCxhZGNhbGwsYWRjbGFzc2VzLGFkY29uZmlnLGFkbWV0YSxhZHNsb2csYWdvZixhbWEsYW5nZWJvdCxhcyxhc3BhcnRzLGJyZWFrYWQsY29ubmVjdGlvbmNoZWNrLGNzbG9nLGRldixkaW1tZXIsZXJyb3Jsb2csZmVlZGJhY2ssZm1zaWRlbnQsZ3R2LGhpZ2hsaWdodHMsaXZ3LGl2d19wbGF5LGpzLGpzX2V2ZW50X2Z1bmN0aW9uLGxvZ28sbG9nb19iYXNld2lkdGgsbG9nb3BvcyxuaWVsc2VuLG9yZCxvc21mLHN2bSx0aWxlLHZpZGVvcGxhemEsdmlkZW9wbGF6YV9iYXNlX3VybCx2aWRlb3BsYXphX3NoYXJlLHZpZGVvcGxhemFfdGFnLHZwRW52aXJvbm1lbnRVUkwseGwnCiAgICAgICAgICB9KTsKICAgICAgICAgICAqLwogICAgICAgIH0KICAgICAgfSwKICAgICAgcnRsX2RlIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xNTQxCiAgICAgICAgLy8gdGVzdDogaHR0cDovL3Rpbnl1cmwuY29tL2g3Y2N2cXEKICAgICAgICBob3N0IDogWydydGwuZGUnXSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdkaXZbZGF0YS13aWRnZXQ9InZpZGVvIl0nKSkubWFwKGZ1bmN0aW9uICh2aWRlbykgewogICAgICAgICAgICB2YXIgY2ZnID0gQWFrLmludG9PYmplY3QodmlkZW8uZGF0YXNldC5wbGF5ZXJMYXllckNmZyk7CiAgICAgICAgICAgIHZhciBmaWxlID0gY2ZnLnZpZGVvaW5mby5tcDR1cmw7CiAgICAgICAgICAgIEFhay5sb2codmlkZW8sIGNmZywgZmlsZSk7CgogICAgICAgICAgICAvLyBSZXBsYWNlIHBsYXllcgogICAgICAgICAgICB2YXIgUGxheWVyID0gbmV3IEFhay5wbGF5ZXIoKTsKICAgICAgICAgICAgUGxheWVyLnZpZGVvanModmlkZW8sIHsKICAgICAgICAgICAgICBzb3VyY2UgOiBmaWxlLAogICAgICAgICAgICAgIHR5cGUgOiAnbXA0JywKICAgICAgICAgICAgICBhdXRvcGxheSA6IGZhbHNlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBteXNwYXNzX2RlIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy83NgogICAgICAgIC8vIHRlc3Q6IGh0dHA6Ly90aW55dXJsLmNvbS9sdG85cHlkCiAgICAgICAgaG9zdCA6IFsnbXlzcGFzcy5kZSddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciB2aWRlb2lkID0gbG9jYXRpb24ucGF0aG5hbWUubWF0Y2goL1wvKFxkKylcLyQvKTsKCiAgICAgICAgICBpZiAodmlkZW9pZCAhPT0gbnVsbCkgewogICAgICAgICAgICBBYWsucmVxdWVzdCh7CiAgICAgICAgICAgICAgdXJsIDogJ2h0dHA6Ly93d3cubXlzcGFzcy5kZS9teXNwYXNzL2luY2x1ZGVzL2FwcHMvdmlkZW8vZ2V0dmlkZW9tZXRhZGF0YXhtbC5waHA/aWQ9JyArIHZpZGVvaWRbMV0sCiAgICAgICAgICAgICAgb25sb2FkIDogZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgICAgICAgdmFyIHJlcyA9IHJlc3VsdC5yZXNwb25zZVRleHQ7CiAgICAgICAgICAgICAgICBBYWsubG9nKHJlcyk7CgogICAgICAgICAgICAgICAgLy8gR2V0IHZpZGVvCiAgICAgICAgICAgICAgICB2YXIgcGFyc2VyID0gbmV3IHdpbmRvdy5ET01QYXJzZXIoKTsKICAgICAgICAgICAgICAgIHZhciBkb20gPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKHJlcywgImFwcGxpY2F0aW9uL3htbCIpOwogICAgICAgICAgICAgICAgdmFyIGZpbGUgPSBkb20uZ2V0RWxlbWVudHNCeVRhZ05hbWUoInVybF9mbHYiKS5pdGVtKDApLnRleHRDb250ZW50OwoKICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBlbGVtZW50cwogICAgICAgICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJ2Rpdi5sb2FkaW5nR2lmJyk7CgogICAgICAgICAgICAgICAgLy8gUmVwbGFjZSBwbGF5ZXIKICAgICAgICAgICAgICAgIHZhciBQbGF5ZXIgPSBuZXcgQWFrLnBsYXllcigpOwogICAgICAgICAgICAgICAgUGxheWVyLnZpZGVvanMoJyNwbGF5ZXInLCB7CiAgICAgICAgICAgICAgICAgIHNvdXJjZSA6IGZpbGUsCiAgICAgICAgICAgICAgICAgIHR5cGUgOiAnbXA0JywKICAgICAgICAgICAgICAgICAgYXV0b3BsYXkgOiBmYWxzZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICAvLyBOZWRlcmxhbmQKICAgICAgcnRseGxfbmwgOiB7CiAgICAgICAgLy8gdGVzdDogaHR0cDovL3Rpbnl1cmwuY29tL2wyemt2M2QKICAgICAgICBob3N0IDogWydydGx4bC5ubCcsICdydGxuaWV1d3MubmwnXSwKICAgICAgICBvbkVuZCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBQbGF5ZXIgPSBuZXcgQWFrLnBsYXllcigpOwogICAgICAgICAgUGxheWVyLmVkaXRpbmcoJyNfcnRsb3NtZjAnLCB7CiAgICAgICAgICAgIHNldEZsYXNodmFycyA6IHsKICAgICAgICAgICAgICBhZGJsb2NrIDogZmFsc2UKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICAvLyBOb3J3YXkKICAgICAgdmd0dl9uZXR3b3JrIDogewogICAgICAgIC8vIG5vdGU6IHNraXAgdmlkZW8gYWRzICsgYW50aS1hZGJsb2NrCiAgICAgICAgLy8gandwbGF5ZXI6IGh0dHA6Ly90aW55dXJsLmNvbS96eXY3OWhnCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzE0MDIKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMzY3CiAgICAgICAgLy8gdGVzdDogaHR0cDovL3Rpbnl1cmwuY29tL253cDg1dCwgaHR0cDovL3Rpbnl1cmwuY29tL253cDg1dAogICAgICAgIGhvc3QgOiBbJ3ZndHYubm8nLCAndmcubm8nXSwKICAgICAgICBvbkVuZCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBvbGRIYXNoID0gbnVsbDsKICAgICAgICAgIHZhciB2aWRlb0lkID0gbnVsbDsKICAgICAgICAgIHZhciB2aWRlb0lkUmVnZXggPSAvI1whXC92aWRlb1wvKFxkKylcLy87CgogICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIGxvY2F0aW9uIGhhc2ggY2hhbmdlcwogICAgICAgICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgcGxheWVyID0gQWFrLmdldEVsZW1lbnQoJy52aWRlby1wbGF5ZXInKTsKCiAgICAgICAgICAgIGlmIChwbGF5ZXIgJiYgbG9jYXRpb24uaGFzaCAhPSBvbGRIYXNoICYmIHZpZGVvSWRSZWdleC50ZXN0KGxvY2F0aW9uLmhhc2gpKSB7CiAgICAgICAgICAgICAgb2xkSGFzaCA9IGxvY2F0aW9uLmhhc2g7CiAgICAgICAgICAgICAgdmlkZW9JZCA9IG9sZEhhc2gubWF0Y2godmlkZW9JZFJlZ2V4KVsxXTsKLyoKICAgICAgICAgICAgICB2YXIgaGxzdXJsID0gJ2h0dHBzOi8vc3Zwc2VjdXJlaGR2b2QtdmguYWthbWFpaGQubmV0L2kvMjAxNi8wMy8yMDE2MDMxMl81NmU0MjFmODZhZjQ1X3ZnMDEvLDEyODBfNzIwXzM1MDAsOTYwXzU0MF8xNTAwLDY0MF8zNjBfODAwLDQ4MF8yNzBfNTAwLC5tcDQuY3NtaWwvbWFzdGVyLm0zdTgnOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBsYXllcikKCiAgICAgICAgICAgICAgLy8gZG9uJ3Qgd29yayB3aXRoIGNocm9tZQogICAgICAgICAgICAgIC8vIHBsYXllci5pbm5lckhUTUwgPSAnPGRpdiBpZD0ibm9BZFBsYXllciI+VGhpcyB0ZXh0IHdpbGwgYmUgcmVwbGFjZWQgd2l0aCBhIHBsYXllci48L2Rpdj4nOwoKCiAgICAgICAgICAgICAgLy8gY2FuJ3QgbG9hZCBtM3U4IDQwMzIgc3RhdHVzIGNvZGUKICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHVuc2FmZVdpbmRvdy5qd3BsYXllcikKCiAgICAgICAgICAgICAgQWFrLnJlcXVlc3QoewogICAgICAgICAgICAgICAgdXJsIDogJ2h0dHA6Ly9zdnAudmcubm8vc3ZwL2FwaS92MS92Z3R2L2Fzc2V0cy8nICsgdmlkZW9JZCArICc/YWRkaXRpb25hbD1zZXR0aW5nc3xjaGFwdGVyc3xjdWVQb2ludHN8ZXh0ZXJuYWxJZHxiYXJyZWxzfGV4dGVybmFsQ2F0ZWdvcnlJZHxuZXh0QXNzZXQmYXBwTmFtZT12Z3R2LXdlYnNpdGUnLAogICAgICAgICAgICAgICAgb25sb2FkIDogZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgICAgICAgICB2YXIgcmVzID0gcmVzdWx0LnJlc3BvbnNlVGV4dDsKICAgICAgICAgICAgICAgICAgdmFyIG9iaiA9IEpTT04ucGFyc2UocmVzKTsKICAgICAgICAgICAgICAgICAgQWFrLmxvZyhvYmopOwoKICAgICAgICAgICAgICAgICAgLy8gcmVwbGFjZSBwbGF5ZXIKICAgICAgICAgICAgICAgICAgdmFyIFBsYXllciA9IG5ldyBBYWsucGxheWVyKCk7CiAgICAgICAgICAgICAgICAgIFBsYXllci52bGMocGxheWVyLCB7CiAgICAgICAgICAgICAgICAgICAgc291cmNlIDogb2JqLnN0cmVhbVVybHMuaGxzLCAvLyBtM3U4CiAgICAgICAgICAgICAgICAgICAgdHlwZSA6ICdobHMnLAogICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5IDogZmFsc2UKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwge30sIHsKICAgICAgICAgICAgICAgIGluc2VydCA6ICdpbm5lcicKICAgICAgICAgICAgICB9KTsKKi8KICAgICAgICAgICAgfQogICAgICAgICAgfSwgMWUzKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG10Z19yYWRpbyA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTQ5NQogICAgICAgIGhvc3QgOiBbJ3BsYXkucmFkaW8xLnNlJywgJ3BsYXkuYmFuZGl0LnNlJywgJ3BsYXkubHVnbmFmYXZvcml0ZXIuY29tJywgJ3BsYXkucml4Zm0uc2UnXSwKICAgICAgICBvbkVuZCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTY3JpcHQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB3aW5kb3cucGxheWVyX2xvYWRfbGl2ZSh3aW5kb3cuc3RyZWFtX2lkKTsKICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRwbGF5X25ldHdvcmsgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzE0NjMKICAgICAgICBob3N0IDogWydkcGxheS5jb20nLCAnZHBsYXkuZGsnLCAnZHBsYXkuc2UnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpICsgMzY1KTsKICAgICAgICAgIHZhciB0aW1lc3RhbXAgPSBkYXRlLmdldFRpbWUoKS50b1N0cmluZygpOwogICAgICAgICAgdmFyIHZhbHVlID0gSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICJub3RpZmljYXRpb25TdWJtaXNzaW9uIiA6ICJzdWJtaXR0ZWQiLAogICAgICAgICAgICAgICJyZXBvcnRpbmdFeHBpcnkiIDogdGltZXN0YW1wLAogICAgICAgICAgICAgICJub3RpZmljYXRpb25FeHBpcnkiIDogdGltZXN0YW1wCiAgICAgICAgICAgIH0pOwogICAgICAgICAgQWFrLnNldENvb2tpZSgnZHNjLWFkYmxvY2snLCB2YWx1ZSk7CiAgICAgICAgfQogICAgICB9LAogICAgICB2aWFzYXRfdHYgOiB7CiAgICAgICAgLy8gbm90ZTogc2tpcCB2aWRlbyBhZHMgKyBhbnRpLWFkYmxvY2sKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT10djNwbGF5CiAgICAgICAgLyogdGVzdDogaHR0cDovL3d3dy50djNwbGF5Lm5vL3Byb2dyYW1tZXIvcmVkbmluZ3Nza295dGEgaGRzL2hscwogICAgICAgICAgICAgICAgICAgaHR0cDovL3d3dy50djNwbGF5LmRrL3Byb2dyYW1tZXIvbGluc2Utb2ctZGlkZGUtZWtzdHJhIGhkcy9obHMKICAgICAgICAgICAgICAgICAgIGh0dHA6Ly93d3cudHYzcGxheS5zZS9wcm9ncmFtL2dsYW1vdXJhbWEgaGRzL2hscwogICAgICAgICAgICAgICAgICAgaHR0cDovL3d3dy50djZwbGF5LnNlL3Byb2dyYW0vOTktc2FrZXItbWFuLW1hc3RlLWdvcmEtaW5uYW4tbWFuLWRvciBoZHMvaGxzCiAgICAgICAgICAgICAgICAgICBodHRwOi8vd3d3LnR2OHBsYXkuc2UvcHJvZ3JhbS9lZnRlcmx5c3QtLTEgaGRzL2hscwogICAgICAgICAgICAgICAgICAgaHR0cDovL3d3dy50djEwcGxheS5zZS9wcm9ncmFtL2dhcnBlbnMtZXVyb3BhIGhkcy9obHMKICAgICAgICAgICAgICAgICAgIGh0dHA6Ly90dnBsYXkuc2thdGllcy5sdi9wYXJyYWlkZXMvdHYzLXppbmFzIGhkcy9obHMKICAgICAgICAgICAgICAgICAgIGh0dHA6Ly9wbGF5LnR2My5sdC9wcm9ncmFtb3MvYmVhdG9zLXZpcnR1dmUgcnRtcC9obHMKICAgICAgICAgICAgICAgICAgIGh0dHA6Ly90djNwbGF5LnR2My5lZS9zaXN1L3B1aGFwYWV2LXNlcG9nYSBydG1wL2hscyAqLwogICAgICAgIGhvc3QgOiBbJ3R2M3BsYXkubm8nLCAndHYzcGxheS5kaycsICd0djNwbGF5LnNlJywgJ3R2NnBsYXkuc2UnLCAndHY4cGxheS5zZScsICd0djEwcGxheS5zZScsICd0dnBsYXkuc2thdGllcy5sdicsICdwbGF5LnR2My5sdCcsICd0djNwbGF5LnR2My5lZSddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5oYXNFbGVtZW50KCcjdmlkZW8tcGxheWVyJywgZnVuY3Rpb24gKHRoaXNFbGVtZW50KSB7CiAgICAgICAgICAgIHRoaXNFbGVtZW50LmlkID0gJyc7CiAgICAgICAgICAgIC8vdmFyIHZpZGVvSWQgPSBsb2NhdGlvbi5wYXRobmFtZS5zcGxpdCgnLycpLnBvcCgpOwogICAgICAgICAgICB2YXIgdmlkZW9JZCA9IHRoaXNFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS12aWRlby1pZCcpOwogICAgICAgICAgICBBYWsubG9nKHRoaXNFbGVtZW50LCB2aWRlb0lkKTsKCiAgICAgICAgICAgIC8vIGdldCB2aWRlbyBzb3VyY2VzCiAgICAgICAgICAgIEFhay5yZXF1ZXN0KHsKICAgICAgICAgICAgICB1cmwgOiAnaHR0cDovL3BsYXlhcGkubXRneC50di92My92aWRlb3Mvc3RyZWFtLycgKyB2aWRlb0lkLAogICAgICAgICAgICAgIG9ubG9hZCA6IGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgIHZhciByZXMgPSByZXN1bHQucmVzcG9uc2VUZXh0OwogICAgICAgICAgICAgICAgdmFyIG9iaiA9IEpTT04ucGFyc2UocmVzKTsKICAgICAgICAgICAgICAgIEFhay5sb2cob2JqKTsKCiAgICAgICAgICAgICAgICAvKiBJbm5ob2xkZXQgZHUgcHLDuHZlciDDpSBzZSBlciBrdW4gdGlsZ2plbmdlbGlnIGZvciBicnVrZXJlIGkgTm9yZ2UKICAgICAgICAgICAgICAgIFByb2dyYW1tZXQgZXIgYmxva2VyZXQgZm9yIHZpc25pbmcgZnJhIGRlbm5lIGdlb2dyYWZpc2tlIHBvc2l0aW9uLgogICAgICAgICAgICAgICAgUHJvZ3JhbcSFIGdhbGl0ZSBtYXR5dGkgdGlrIGp1bmdkYW1pZXNpIGnFoSBMaWV0dXZvcyBpbnRlcm5ldG8gdGlla8SXasWzIHRpbmtsxbMgKi8KICAgICAgICAgICAgICAgIGlmIChvYmoubXNnKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzRWxlbWVudC5pbm5lckhUTUwgPSBvYmoubXNnOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChsb2NhdGlvbi5ob3N0ID09PSAndHYzcGxheS50djMuZWUnKSB7CiAgICAgICAgICAgICAgICAgIHZhciBQbGF5ZXIgPSBuZXcgQWFrLnBsYXllcigpOwogICAgICAgICAgICAgICAgICBQbGF5ZXIuZ3JpbmRwbGF5ZXIodGhpc0VsZW1lbnQsIHsKICAgICAgICAgICAgICAgICAgICBzb3VyY2UgOiBvYmouc3RyZWFtcy5tZWRpdW0sCiAgICAgICAgICAgICAgICAgICAgdHlwZSA6ICdydG1wL21wNCcsCiAgICAgICAgICAgICAgICAgICAgYXV0b3BsYXkgOiB0cnVlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIHZpZGVvIHRhZyBmb3IgbmV3IHBsYXllcgogICAgICAgICAgICAgICAgICBBYWsuY3JlYXRlRWxlbWVudCh7CiAgICAgICAgICAgICAgICAgICAgdGFnIDogJ3ZpZGVvJywKICAgICAgICAgICAgICAgICAgICBpZCA6ICdub0FkUGxheWVyJywKICAgICAgICAgICAgICAgICAgICBjbGFzc2lkIDogJ3ZpZGVvLWpzIHZqcy1kZWZhdWx0LXNraW4nLAogICAgICAgICAgICAgICAgICAgIHdpZHRoIDogdGhpc0VsZW1lbnQuY2xpZW50V2lkdGggfHwgNzMwLAogICAgICAgICAgICAgICAgICAgIGhlaWdodCA6IHRoaXNFbGVtZW50LmNsaWVudEhlaWdodCB8fCA0MTAsCiAgICAgICAgICAgICAgICAgICAgcHJlbG9hZCA6ICdhdXRvJywKICAgICAgICAgICAgICAgICAgICBjb250cm9scyA6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgYXV0b3BsYXkgOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIHJlcGxhY2UgOiB0aGlzRWxlbWVudAogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIC8vIHBhcnNlIHNvdXJjZXMKICAgICAgICAgICAgICAgICAgdmFyIHNyY0FycmF5ID0gW107CiAgICAgICAgICAgICAgICAgIGlmIChvYmouc3RyZWFtcy5oaWdoICYmIG9iai5zdHJlYW1zLmhpZ2ggIT09ICcnKSB7CiAgICAgICAgICAgICAgICAgICAgc3JjQXJyYXkucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICB0eXBlIDogInZpZGVvL21wNCIsIC8vIG1wNAogICAgICAgICAgICAgICAgICAgICAgc3JjIDogb2JqLnN0cmVhbXMuaGlnaAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9ICBpZiAob2JqLnN0cmVhbXMuaGxzICYmIG9iai5zdHJlYW1zLmhscyAhPT0gJycpIHsKICAgICAgICAgICAgICAgICAgICBzcmNBcnJheS5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgIHR5cGUgOiAiYXBwbGljYXRpb24veC1tcGVnVVJMIiwgLy8gbTN1OAogICAgICAgICAgICAgICAgICAgICAgc3JjIDogb2JqLnN0cmVhbXMuaGxzCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0gIGlmIChvYmouc3RyZWFtcy5tZWRpdW0gJiYgb2JqLnN0cmVhbXMubWVkaXVtICE9PSAnJykgewogICAgICAgICAgICAgICAgICAgIHZhciB0eXBlID0gb2JqLnN0cmVhbXMubWVkaXVtLmluZGV4T2YoJ3J0bXAnKSA9PT0gMCA/ICdydG1wL21wNCcgOiAnYXBwbGljYXRpb24vZjRtK3htbCc7CiAgICAgICAgICAgICAgICAgICAgc3JjQXJyYXkucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICB0eXBlIDogdHlwZSwKICAgICAgICAgICAgICAgICAgICAgIHNyYyA6IG9iai5zdHJlYW1zLm1lZGl1bQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIEFhay5sb2coc3JjQXJyYXksIEpTT04uc3RyaW5naWZ5KHNyY0FycmF5KSk7CiAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXplIG5ldyBwbGF5ZXIKICAgICAgICAgICAgICAgICAgQWFrLmFkZFNjcmlwdChBYWsuaW50b1N0cmluZyhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBvblZqc1JlYWR5KCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93LnZpZGVvanMgIT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVmpzUmVhZHkoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnZpZGVvanMoIm5vQWRQbGF5ZXIiKS5zcmMoL19TT1VSQ0VTXy8pOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBvblZqc1JlYWR5KCk7CiAgICAgICAgICAgICAgICAgICAgICB9KSgpOwogICAgICAgICAgICAgICAgICAgIH0pLnJlcGxhY2UoIi9fU09VUkNFU18vIiwgSlNPTi5zdHJpbmdpZnkoc3JjQXJyYXkpKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgLy8gUnVzc2lhCiAgICAgIHJ1dHViZV9ydSA6IHsgLy8gcmVzZWFyY2ggc29sdXRpb24KICAgICAgICAvKiB0ZXN0OiBodHRwOi8vcnV0dWJlLnJ1L3ZpZGVvL2JkNWY2MDQ3NjU3ZjBiZGNiZmJiMGVkYWQyYmI3YzYxLyAqLwogICAgICAgIGhvc3QgOiBbJ3J1dHViZS5ydSddLAogICAgICAgIG9uRW5kIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmhhc0VsZW1lbnQoJyNydXR1YmVQbGF5ZXJIb2xkZXInLCBmdW5jdGlvbiAoKSB7ICAgICAgICAgICAgLy9kbUZ5SUc5d2RITWdQU0JCWVdzdVoyVjBSV3hsYldWdWRDZ2lJMjl3ZEdsdmJuTWlLVHNOQ2lBZ0lDQWdJQ0FnSUNBZ0lIWmhjaUJ2SUQwZ1FXRnJMbWx1ZEc5UFltcGxZM1FvYjNCMGN5NWtZWFJoYzJWMExuWmhiSFZsS1RzTkNpQWdJQ0FnSUNBZ0lDQWdJSFpoY2lCdE0zVTRWWEpzSUQwZ2J5NTJhV1JsYjE5aVlXeGhibU5sY2k1dE0zVTRPdzBLSUNBZ0lDQWdJQ0FnSUNBZ1kyOXVjMjlzWlM1c2IyY29iVE4xT0ZWeWJDazdEUW9OQ2lBZ0lDQWdJQ0FnSUNBZ0lIWmhjaUJRYkdGNVpYSWdQU0J1WlhjZ1FXRnJMbkJzWVhsbGNpZ3BPdzBLSUNBZ0lDQWdJQ0FnSUNBZ1VHeGhlV1Z5TG5acFpHVnZhbk1vSnlOeWRYUjFZbVZRYkdGNVpYSkliMnhrWlhJbkxDQjdEUW9nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdjMjkxY21ObElEb2diVE4xT0ZWeWJDd05DaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQjBlWEJsSURvZ0oyaHNjeWNzRFFvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnTHk5d2NtOTRlVG9nZEhKMVpTd05DaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQmhkWFJ2Y0d4aGVTQTZJSFJ5ZFdVTkNpQWdJQ0FnSUNBZ0lDQWdJQ0FnZlRzZ0tUcz0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgLy8gSXRhbHkKICAgICAgcmFpX3R2IDogeyAvLyByZXNlYXJjaCBzb2x1dGlvbgogICAgICAgIGhvc3QgOiBbJ3JhaS50diddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7fSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7fQogICAgICB9LAogICAgICAvLyBUViBTdHJlYW0KICAgICAgYmxvY2tfc3RyZWFtc190diA6IHsKICAgICAgICAvLyBub3RlOiByZWRpcmVjdCB0byBodHRwOi8vYmxvY2suc3RyZWFtcy50di8KICAgICAgICBob3N0IDogWydmaXJzdHJvdy5jbycsICdmaXJzdHJvd3MucnUnLCAnZmlyc3Ryb3dzLnR2JywgJ2ZpcnN0cm93cy5vcmcnLCAnZmlyc3Ryb3dzLmNvJywgJ2ZpcnN0cm93cy5iaXonLCAnZmlyc3Ryb3d1cy5ldScsICdmaXJzdHJvdzF1cy5ldScsICdmaXJzdHNyb3dzcG9ydHMuZXUnLCAnZmlyc3Ryb3dzcG9ydGVzLnR2JywgJ2ZpcnN0cm93c3BvcnRlcy5jb20nLCAnanVzdGZpcnN0cm93c3BvcnRzLmNvbScsICdoYWhhc3BvcnQubWUnLCAnd2l6aXdpZy5ydScsICd3aXppd2lnLnN4JywgJ3dpeml3aWcudG8nLCAnd2l6aXdpZy50dicsICdteXAycC5iaXonLCAnbXlwMnAudHYnLCAnbXlwMnAubGEnLCAnbXlwMnAuZWMnLCAnbXlwMnAuZXUnLCAnbXlwMnAuc3gnLCAnbXlwMnAud3MnLCAnbXlwMnAuY29tJywgJ2F0ZGhlLnJ1JywgJ2F0ZGhlLnNlJywgJ2F0ZGhlLmJ6JywgJ2F0ZGhlLnRvcCcsICdhdGRoZS50bycsICdhdGRoZS5tZScsICdhdGRoZS5teCcsICcgYXRkaGUubGknLCAnYXRkaGUuYWwnXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5zZXRDb29raWUoImFkYiIsIDEpOyAvLyBwcmV2ZW50IGFudGktYWRibG9jawogICAgICAgICAgQWFrLnV3Lm9wZW4gPSBmdW5jdGlvbiAoKSB7fTsgLy8gcHJldmVudCBwb3B1cAogICAgICAgICAgQWFrLmFkZFN0eWxlKCIjYmFubmVySW5DZW50ZXIsICNoaWRkZW5CYW5uZXJDYW52YXMgeyBkaXNwbGF5OiBub25lOyB9Iik7IC8vIGhpZGUgYWRzCiAgICAgICAgfQogICAgICB9LAogICAgICBidXppbmFfeHl6IDogewogICAgICAgIC8vIG5vdGU6IGRpc2FibGUgcmVmY29udHJvbCwgdXNlZCBieSBmaXJzdHJvd3Nwb3J0cwogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMjY4CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEyNDMKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvODg5CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvZm9ydW0vZGlzY3Vzc2lvbi84OTc1CiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tLzhWVHJrdlM5CiAgICAgICAgaG9zdCA6IFsnYnV6aW5hLnh5eicsICdmYXJtZXQuaW5mbycsICdyaW1sYWRpLmNvbScsICdraXRvcmVsby5jb20nLCAnb21uaXBvbGEuY29tJywgJ3Bvcm9zaW4uY28udWsnLCAncmltbGVuby5jb20nLCAnc2ltcGxlNGFsbHMuY29tJywgJ2Fyc29wby5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCIjYWRzZnJhbWUgeyBoZWlnaHQ6IDE1MXB4OyB9Iik7CiAgICAgICAgfSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoL2J1emluYS54eXovLnRlc3QobG9jYXRpb24uaG9zdCkpIHsgLy8ga2VlcHMgc2FtZSBob3N0IHN0cmVhbQogICAgICAgICAgICBBYWsuaGFzRWxlbWVudCgnaWZyYW1lW3NyYyo9Ii5waHA/aGFzaD0iXScsIGZ1bmN0aW9uICh0aGlzRWxlbWVudCkgewogICAgICAgICAgICAgIC8vIGh0dHA6Ly9hcnNvcG8uY29tL3cyLnBocD9oYXNoPXBhbmRhNTgKICAgICAgICAgICAgICAvLyBodHRwOi8vd3d3LmJ1emluYS54eXovbmFuYTF2MS5waHA/b250aGV0b3AKICAgICAgICAgICAgICB2YXIgcGFydHMgPSB0aGlzRWxlbWVudC5zcmMuc3BsaXQoJy8nKTsKICAgICAgICAgICAgICBwYXJ0c1syXSA9IEFhay5ydWxlcy5idXppbmFfeHl6Lmhvc3QucG9wKCk7CiAgICAgICAgICAgICAgQWFrLmxvZyh0aGlzRWxlbWVudCwgcGFydHMpOwogICAgICAgICAgICAgIHRoaXNFbGVtZW50LnNyYyA9IHBhcnRzLmpvaW4oJy8nKTsKCiAgICAgICAgICAgICAgICAvKglkbUZ5SUc4Z1BTQjdDZ2tKQ1NBZ0lDQWljR3hoZVd4cGMzUWlJRG9nVzNzS0NRa0pJQ0FnSUNBZ0lDQWljSEp2ZG1sa1pYSWlJRG9nSW5KMGJYQWlMQW9KQ1FrZ0lDQWdJQ0FnSUNKMWNtd2lJRG9nSW5CaGJtUmhNVDlsSlRORU1UUTJOVEEzTURNeU5pVXlObk4wSlRORVVISjBTRmw1ZGtKNlpEbGFaRGRvUkY5bVVraFVaekV4TVRFek1DSUtDUWtKSUNBZ0lDQWdmUW9KQ1FrZ0lDQWdYU3dLQ1FrSklDQWdJQ0p3YkhWbmFXNXpJaUE2SUhzS0NRa0pJQ0FnSUNBZ0luSjBiWEFpSURvZ2V3b0pDUWtnSUNBZ0lDQWdJQ0oxY213aUlEb2dJbVpzYjNkd2JHRjVaWEl1Y25SdGNDMHpMakl1TVRFdWMzZG1JaXdnQ2drSkNRa0pMeThpZFhKc0lqb2dJbWgwZEhBNkx5OXlaV3hsWVhObGN5NW1iRzkzY0d4aGVXVnlMbTl5Wnk5emQyWXZabXh2ZDNCc1lYbGxjaTV5ZEcxd0xUTXVNaTR4TVM1emQyWWlMQW9KQ1FrZ0lDQWdJQ0FnSUNKdVpYUkRiMjV1WldOMGFXOXVWWEpzSWlBNklDSnlkRzF3T2k4dk1UZzFMamd5TGpJeE5TNDBOVG96TlRjNUwzWnZaQzhpQ2drSkNTQWdJQ0FnSUgwc0Nna0pDU0FnSUNBZ0lDSmpiMjUwY205c2N5SWdPaUI3Q2drSkNRa2dJQ0FnSW5WeWJDSTZJQ0pvZEhSd09pOHZjbVZzWldGelpYTXVabXh2ZDNCc1lYbGxjaTV2Y21jdmMzZG1MMlpzYjNkd2JHRjVaWEl1WTI5dWRISnZiSE10TXk0eUxqRTJMbk4zWmlJc0lDOHZJR0ZrWkdWa0lHSmxZMkYxYzJVZ2JXbHpjMmx1WndvSkNRa2dJQ0FnSUNBZ0lDSndiR0Y1SWlBNklHWmhiSE5sTEFvSkNRa2dJQ0FnSUNBZ0lDSnpZM0oxWW1KbGNpSWdPaUJtWVd4elpRb0pDUWtnSUNBZ0lDQjlDZ2tKQ1NBZ0lDQjlMQW9KQ1FrZ0lDQWdJbkJzWVhsbGNrbGtJaUE2SUNKd2JHRjVaWElpTEFvSkNRa2dJQ0FnSW1Oc2FYQWlJRG9nZXdvSkNRa2dJQ0FnSUNBaWRYSnNJaUE2SUNKd1lXNWtZVEUvWlNVelJERTBOalV3TnpBek1qWWxNalp6ZENVelJGQnlkRWhaZVhaQ2VtUTVXbVEzYUVSZlpsSklWR2N4TVRFeE16QWlDZ2tKQ1NBZ0lDQjlDZ2tKQ1NBZ2ZRb0tDUWtKSUNCMllYSWdibVYzVlhKc0lEMGdjR0Z5ZEhNdWMyeHBZMlVvTUN3Z015a3VhbTlwYmlnbkx5Y3BJQ3NnSnk5bWJHOTNjR3hoZVdWeUxUTXVNaTR4Tmk1emQyWS9ZMjl1Wm1sblBTY2dLeUJsYzJOaGNHVW9TbE5QVGk1emRISnBibWRwWm5rb2J5a3BPd29KQ1FrZ0lDOHZkbUZ5SUc1bGQxVnliQ0E5SUNkb2RIUndPaTh2Y21Wc1pXRnpaWE11Wm14dmQzQnNZWGxsY2k1dmNtY3ZjM2RtTDJac2IzZHdiR0Y1WlhJdE15NHlMakUyTG5OM1pqOWpiMjVtYVdjOUp5QXJJR1Z6WTJGd1pTaEtVMDlPTG5OMGNtbHVaMmxtZVNodktTazdDZ2tKQ1NBZ1kyOXVjMjlzWlM1c2IyY29ibVYzVlhKc0tUc0tDUWtKSUNCMGFHbHpSV3hsYldWdWRDNXpjbU1nUFNCdVpYZFZjbXc3CiAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7IC8vIHNraXAgYW50aS1hZGJsb2NrCiAgICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KCcjYWRzZnJhbWUnKTsKICAgICAgICAgICAgQWFrLmdldEVsZW1lbnQoJyNyZW1vdmUtb3ZlcicpLmNsaWNrKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICBhbGxteXZpZGVvc19uZXQgOiB7CiAgICAgICAgLy8gbm90ZTogb2JmdXNjYXRlZAogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8yNzQKICAgICAgICBob3N0IDogWydhbGxteXZpZGVvcy5uZXQnLCAnYW12dHYubmV0J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIHNraXAgZmFrZSBwbGF5IGJ1dHRvbgogICAgICAgICAgQWFrLnNldENvb2tpZSgnX2ZhdmJ0MzMnLCAxKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGlsaXZlX2RvbWFpbnMgOiB7CiAgICAgICAgaG9zdCA6IFsnaWxpdmUudG8nLCAnc3RyZWFtbGl2ZS50byddLAogICAgICAgIG9uRW5kIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKC9eXC9lbWJlZHBsYXllci5waHAvaS50ZXN0KGxvY2F0aW9uLnBhdGhuYW1lKSkgewogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAvLyBTa2lwIHRpbWVyCiAgICAgICAgICAgICAgQWFrLnV3LnJlbW92ZU92ZXJsYXlIVE1MKCk7CiAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgbWljYXN0X3R2IDogewogICAgICAgIGhvc3QgOiBbJ21pY2FzdC50diddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyBwcmV2ZW50IHBvcHVuZGVyCiAgICAgICAgICBBYWsuc2V0Q29va2llKCd2aWRfbWFpbicsIHRydWUpOwogICAgICAgICAgQWFrLnNldENvb2tpZSgndmlkX3N1YicsIHRydWUpOwogICAgICAgICAgLy8gcmVtb3ZlIG92ZXJsYXkKICAgICAgICAgIEFhay5hZGRTY3JpcHQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICB3aW5kb3cub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGlmICh3aW5kb3cucmVtb3ZlT3ZlcmxheUhUTUwpCiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlT3ZlcmxheUhUTUwoKTsKICAgICAgICAgICAgfTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgcHhzdHJlYW1fdHYgOiB7CiAgICAgICAgaG9zdCA6IFsncHhzdHJlYW0udHYnXSwKICAgICAgICBvbkVuZCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmICgvXlwvZW1iZWRyb3V0ZXIucGhwLy50ZXN0KGxvY2F0aW9uLnBhdGhuYW1lKSkgewogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAvLyBTa2lwIHRpbWVyIGFuZCBjbG9zZSBhZHMKICAgICAgICAgICAgICBBYWsudXcuY2xvc2VBZCgpOwogICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIHNhd2xpdmVfdHYgOiB7CiAgICAgICAgaG9zdCA6IFsnc2F3bGl2ZS50diddLAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmICgvXlwvZW1iZWRcL3dhdGNoXC8vaS50ZXN0KGxvY2F0aW9uLnBhdGhuYW1lKSkgewogICAgICAgICAgICAvLyBTa2lwIHRpbWVyIGFuZCBjbG9zZSBhZHMKICAgICAgICAgICAgQWFrLnV3LmRpc3BsYXkgPSBmYWxzZTsKICAgICAgICAgICAgQWFrLnV3LmNsb3NlTXlBZCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgZ29vZGNhc3RfY28gOiB7CiAgICAgICAgaG9zdCA6IFsnZ29vZGNhc3QuY28nXSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoL15cL3N0cmVhbS5waHAvLnRlc3QobG9jYXRpb24ucGF0aG5hbWUpKSB7CiAgICAgICAgICAgIC8vIHJlbW92ZSBhZHMgYWxsb3dlZCBieSBlYXN5bGlzdAogICAgICAgICAgICBBYWsudXcuJCgiLmFkdmVydGlzZW1lbnQiKS5oaWRlKCk7CiAgICAgICAgICAgIEFhay51dy4kKCcuYWRza3kgaWZyYW1lJykuYXR0cigic3JjIiwgImFib3V0OmJsYW5rIik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICBzaG93c3BvcnRfdHZfY29tIDogewogICAgICAgIGhvc3QgOiBbJ3Nob3dzcG9ydC10di5jb20nXSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoL15cL2NoLnBocC8udGVzdChsb2NhdGlvbi5wYXRobmFtZSkpIHsKICAgICAgICAgICAgLy8gcmVtb3ZlIGFkcyBhbGxvd2VkIGJ5IGVhc3lsaXN0CiAgICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KCcjYWR2ZXJ0aXNlbWVudCwgLmFkdmVydGlzZW1lbnQnKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIHNoYXJlY2FzdF90byA6IHsKICAgICAgICBob3N0IDogWydzaGFyZWNhc3QudG8nXSwKICAgICAgICBvbklkbGUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoL15cL2VtYmVkLnBocC8udGVzdChsb2NhdGlvbi5wYXRobmFtZSkpIHsKCiAgICAgICAgICAgIC8vIERpc2FibGUgcG9wdW5kZXJzCiAgICAgICAgICAgIHZhciBpbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIEFhay5zZXRDb29raWUoJ3ZpZF9tYWluJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICBBYWsuc2V0Q29va2llKCd2aWRfc3ViJywgMik7CiAgICAgICAgICAgICAgICBBYWsuc2V0Q29va2llKCd2aWRfZGVsYXknLCB0cnVlKTsKICAgICAgICAgICAgICB9LCAxMDApOwoKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7CiAgICAgICAgICAgIH0sIDUwMDApOwoKICAgICAgICAgICAgLy8gUmVtb3ZlIHRyYW5zcGFyZW50IG92ZXJsYXkKICAgICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJyN0YWJsZTEnKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIHZpZGVvbWVnYV90diA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT12aWRlb21lZ2EKICAgICAgICBob3N0IDogWyd2aWRlb21lZ2EudHYnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKC9eXC92aWV3LnBocC8udGVzdChsb2NhdGlvbi5wYXRobmFtZSkpIHsKICAgICAgICAgICAgLy8gcHJldmVudCBwb3B1bmRlcgogICAgICAgICAgICBBYWsuc2V0Q29va2llKCd2aWRfbWFpbnB1JywgdHJ1ZSk7CiAgICAgICAgICAgIEFhay5zZXRDb29raWUoJ3ZpZF9zdWJwdScsIHRydWUpOwogICAgICAgICAgICBBYWsuc2V0Q29va2llKCd2aWRfZGVsYXknLCB0cnVlKTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIG9uRW5kIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8ga2lsbCBhYmMKICAgICAgICAgIC8vIGZpeCBidWcgb24gZmlyZWZveDogVGhlIHZpZGVvIGNvdWxkIG5vdCBiZSBsb2FkZWQsIGVpdGhlciBiZWNhdXNlIHRoZSBzZXJ2ZXIgb3IgbmV0d29yayBmYWlsZWQgb3IgYmVjYXVzZSB0aGUgZm9ybWF0IGlzIG5vdCBzdXBwb3J0ZWQuCiAgICAgICAgICB2YXIgc2NyaXB0ID0gQWFrLmhhc1NjcmlwdCgnUGxlYXNlIGRpc2FibGUgQWRCbG9jayBQbHVnaW4gdG8gd2F0Y2ggdGhlIHZpZGVvJyk7CiAgICAgICAgICBpZiAoc2NyaXB0KSB7CiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBzY3JpcHQuaW5uZXJIVE1MOwogICAgICAgICAgICB2YXIgc3Vic3RyaW5nID0gc291cmNlLnN1YnN0cmluZyhzb3VyY2UubGFzdEluZGV4T2YoJ2V2YWwoJyksIHNvdXJjZS5sYXN0SW5kZXhPZignKScpICsgMSk7CiAgICAgICAgICAgIHZhciBkZW9iZnVzY2F0ZWQgPSBBYWsudW5wYWNrU2NyaXB0KHN1YnN0cmluZyk7CiAgICAgICAgICAgIHZhciBuZXdTY3JpcHQgPSAnaWYoJytkZW9iZnVzY2F0ZWQuc3Vic3RyaW5nKGRlb2JmdXNjYXRlZC5pbmRleE9mKCd0cnVlJykpOwogICAgICAgICAgICBBYWsuYWRkU2NyaXB0KG5ld1NjcmlwdCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICBmbG93cGxheWVyX2FudGlhZGJsb2NrIDogewogICAgICAgIGhvc3QgOiBbJ3ZpZGVvZnVuLm1lJywgJ3ZpZGVvYnVnLm5ldCcsICd2aWRlbzQ0Lm5ldCcsICdwbGF5NDQubmV0JywgJ2J5em9vLm9yZycsICdwbGF5YmIubWUnLCAndmlkZW93aW5nLm1lJywgJ3ZpZGVvem9vLm1lJywgJ2Vhc3l2aWRlby5tZScsICdwbGF5cGFuZGEubmV0J10sCiAgICAgICAgb25FbmQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgCiAgICAgICAgICAvKgogICAgICAgICAgaHR0cDovL3d3dy5hbmltZXRvb24udHYvYmxhY2stbGFnb29uLWVwaXNvZGUtMQogICAgICAgICAgaHR0cDovL3ZpZGVvd2luZy5tZS9lbWJlZD93PTcxOCZoPTQzOCZ2aWRlbz1vbmdvaW5nL3l1LWdpLW9oX2FyYy12Xy1fNTMubXA0CiAgICAgICAgICBodHRwOi8vcGxheWJiLm1lL2VtYmVkLnBocD93PTcxOCZoPTQzOCZ2aWQ9YXQvbncveXUtZ2ktb2hfYXJjLXZfLV81My5tcDQKICAgICAgICAgIGh0dHA6Ly92aWRlb3pvby5tZS9lbWJlZC5waHA/dz03MTgmaD00MzgmdmlkPWF0L253L3l1LWdpLW9oX2FyYy12Xy1fNTMubXA0CiAgICAgICAgICBodHRwOi8vd3d3LmVhc3l2aWRlby5tZS9nb2dvLz93PTcxOCZoPTQzOCZmaWxlPXl1LWdpLW9oX2FyYy12Xy1fNTMubXA0JnN2PTEKICAgICAgICAgIGh0dHA6Ly9wbGF5cGFuZGEubmV0L2VtYmVkLnBocD93PTcxOCZoPTQzOCZ2aWQ9YXQvbncveXUtZ2ktb2hfYXJjLXZfLV81My5tcDQKICAgICAgICAgICAqLwoKICAgICAgICAgIC8vIGFsbG93IGZ1bGxzY3JlZW4gd2hlbiBhYnAgaXMgZW5hYmxlZCBhbmQgcmVtb3ZlIGFkIGxheWVyCiAgICAgICAgICAvLyBhZHMgYmxvY2tlZCBieSBhYnAgcnVsZQogICAgICAgICAgaWYgKC9eXC8oZW1iZWR8Z29nb3xncGx1cykvLnRlc3QobG9jYXRpb24ucGF0aG5hbWUpKSB7CiAgICAgICAgICAgIHZhciBQbGF5ZXIgPSBuZXcgQWFrLnBsYXllcigpOwogICAgICAgICAgICBQbGF5ZXIuZWRpdGluZygnI2Zsb3dwbGF5ZXJfYXBpJywgewogICAgICAgICAgICAgIHNldEF0dHJpYnV0ZXMgOiB7CiAgICAgICAgICAgICAgICBhbGxvd2Z1bGxzY3JlZW4gOiB0cnVlCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIHIzeiA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXM/cT1sYWJlbDpSM1oKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vQzE1OWtldm4KICAgICAgICBob3N0IDogWydjaXR5YW0uY29tJywgJ2NvbXB1dGVyd29ybGR1ay5jb20nLCAndGVjaHdvcmxkLmNvbScsICd2My5jby51ayddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvKiBkb24ndCB3b3JrIHdpdGggY2hyb21lCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWFrLnV3LCAnX3IzeicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZSA6IHRydWUsCiAgICAgICAgICAgIHdyaXRhYmxlIDogZmFsc2UsCiAgICAgICAgICAgIHZhbHVlIDoge30KICAgICAgICAgIH0pOwogICAgICAgICAgKi8KICAgICAgICB9LAogICAgICAgIG9uSWRsZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay51dy4kKCIjcjN6LXdhaXQiKS5yZW1vdmUoKTsKICAgICAgICAgIEFhay51dy4kKCIucjN6LWhpZGUiKS5yZW1vdmVDbGFzcygicjN6LWhpZGUiKTsKICAgICAgICAgIEFhay51dy5fcjN6ID0gbnVsbDsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGdvb2dsZV9qb2JydW5uZXIgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvZW4vZm9ydW0vbWVzc2FnZXMvNDA1CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEzNDMKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTM0MgogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy84MzEKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTI3NAogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMjYyCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzU2MQogICAgICAgIGhvc3QgOiBbJ25leHQtZXBpc29kZS5uZXQnLCAna2luZ21ha2VyLm5ld3MnLCAnZ2FtZXNwb3dlcml0YS5jb20nLCAndG9kYXlpZG9sLmNvbScsICdyZWNlaXZlLWEtc21zLmNvbScsICd3YWtldXBjYWxsbWUuY29tJywgJ3JpbmdteWNlbGxwaG9uZS5jb20nLCAnZmFxbW96aWxsYS5vcmcnLCAndGhlbWVteXBjLmNvbSddLAogICAgICAgIG9uQWx3YXlzIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLnV3Lmdvb2dsZV9qb2JydW5uZXIgPSB7fTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIC8vIGZ1Y2thZGJvY2sgY3VzdG9taXplZAogICAgICBmYWJfZGF3bl9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzE3NDcKICAgICAgICBob3N0IDogWydkYXduLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuZmFrZUZ1Y2tBZEJsb2NrKCdkZXRlY3RBZEJsb2NrJywgJ0RldGVjdEFkQmxvY2snKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGZhYl9zcG9ydHNfZnIgOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEyMTcKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vU3BFTjVkdVMKICAgICAgICBob3N0IDogWydzcG9ydHMuZnInXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmZha2VGdWNrQWRCbG9jaygnZmFiSW5zdGFuY2UnLCAnRmFiSW5zdGFuY2UnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGZhYl9ldXJvcGUxX2ZyIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMTg4CiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL1VMZTF2elFSCiAgICAgICAgaG9zdCA6IFsnZXVyb3BlMS5mciddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuZmFrZUZ1Y2tBZEJsb2NrKCdmYWJJbnN0YW5jZScsICdGYWJJbnN0YW5jZScpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZmFiX25ld3lvcmtlcl9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzExNzcKICAgICAgICBob3N0IDogWyduZXd5b3JrZXIuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5mYWtlRnVja0FkQmxvY2soJ3NuaWZmQWRCbG9jaycsICdTbmlmZkFkQmxvY2snKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGZhYl93aXJlZF9jb20gOiB7CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEwNjEKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9mci9mb3J1bS9kaXNjdXNzaW9uLzgyMzUKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vUHExNHY0RkMKICAgICAgICBob3N0IDogWyd3aXJlZC5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmZha2VGdWNrQWRCbG9jaygnc25pZmZBZEJsb2NrJywgJ1NuaWZmQWRCbG9jaycpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZmFiX21hbmdhc3Byb2plY3RfZG9tYWlucyA6IHsKICAgICAgICAvLyBub3RlOiBmdWNrYWRibG9jayB3aXRoIGN1c3RvbSBpbnN0YW5jZSBuYW1lCiAgICAgICAgLy8gbm90ZTogYWxzbyBhZGRlZCBhYnAgcnVsZQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMTI3CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvZnIvZm9ydW0vZGlzY3Vzc2lvbi80MTMyCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzg1OAogICAgICAgIC8vIHNvdXJjZTogaHR0cHM6Ly9tYW5nYXMuemx4LmNvbS5ici9tYW5nYXpvcmRfbGliL2pzL2xpYi9jb250cm9sbGVycy9MZWl0b3IvTGVpdG9yLm1pbi5qcwogICAgICAgIGhvc3QgOiBbJ21hbmdhc3Byb2plY3QuY29tLmJyJywgJ21hbmdhc3Byb2plY3QubmV0LmJyJywgJ21hbmdhcy56bHguY29tLmJyJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5mYWtlRnVja0FkQmxvY2soJ21hbmdhc0xlaXRvclNsaWRlcicsIEFhay5nZW5lcmF0ZUlEKCkpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZmFiX3FuaW1hdGVfY29tIDogewogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy83MzkKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNzA1CiAgICAgICAgLy8gbm90ZTogZnVja2FkYmxvY2sgY3VzdG9taXplZAogICAgICAgIGhvc3QgOiBbJ3FuaW1hdGUuY29tJ10sCiAgICAgICAgb25BbHdheXMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuYWRCbG9ja0RldGVjdGVkID0gZnVuY3Rpb24gKCkge307CiAgICAgICAgfQogICAgICB9LAogICAgICBmYWJfZXVyb3RyYW5zcG9ydF9kZSA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvODU4CiAgICAgICAgLy8gbm90ZTogZnVja2FkYmxvY2sgd2l0aCBjdXN0b20gaW5zdGFuY2UgbmFtZQogICAgICAgIGhvc3QgOiBbJ2V1cm90cmFuc3BvcnQuZGUnXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmZha2VGdWNrQWRCbG9jaygnYW50aUFkQmxvY2snLCBBYWsuZ2VuZXJhdGVJRCgpKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGZhYl9jYWRldGVjdCA6IHsKICAgICAgICAvLyBieTogU2tyNHRjaEdyM2F6eU1vbmtpQmFsbGxsbGxaenp6CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzc4NAogICAgICAgIC8vIG5vdGU6IGZ1Y2thZGJsb2NrIHdpdGggY3VzdG9tIGluc3RhbmNlIG5hbWUKICAgICAgICBob3N0IDogWyd0emV0emUuaXQnLCAnYmVwcGVncmlsbG8uaXQnLCAnbGEtY29zYS5pdCddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuZmFrZUZ1Y2tBZEJsb2NrKCdjYWRldGVjdCcsICdDQURldGVjdCcpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZmFiX2FnYXJfZ2FtZSA6IHsKICAgICAgICAvLyBub3RlOiBmdWNrYWRibG9jayB3aXRoIGN1c3RvbSBpbnN0YW5jZSBuYW1lCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEyNTcKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTEzNQogICAgICAgIGhvc3QgOiBbJ2FnYXJpby5zeCcsICdhZ2FyYWJpLmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuZmFrZUZ1Y2tBZEJsb2NrKCdhZ2FyaW9fU1hfYWRzJywgQWFrLmdlbmVyYXRlSUQoKSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBmYWJfZmlsZXNwYWNlX2NvbSA6IHsKICAgICAgICAvLyBub3RlOiBmdWNrYWRibG9jayB3aXRoIGN1c3RvbSBpbnN0YW5jZSBuYW1lCiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL1lBUzBBczg3CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzEwMzcKICAgICAgICBob3N0IDogWydmaWxlc3BhY2UuY29tJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5mYWtlRnVja0FkQmxvY2soJ2ZBQicsIEFhay5nZW5lcmF0ZUlEKCkpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZmFiX3RvcHNlcmlhbHlfc2sgOiB7CiAgICAgICAgLy8gbm90ZTogZnVja2FkYmxvY2sgd2l0aCBjdXN0b20gaW5zdGFuY2UgbmFtZQogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS80MnRVUTlhVgogICAgICAgIGhvc3QgOiBbJ3RvcHNlcmlhbHkuc2snXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmZha2VGdWNrQWRCbG9jaygnc3JhdE5hVmFzJywgQWFrLmdlbmVyYXRlSUQoKSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBmYWJfY3VzdG9taXplZCA6IHsKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTQ1NQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xNjU3CiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL040MmE1QmpFCiAgICAgICAgaG9zdCA6IFsnZXBpY3VyaW91cy5jb20nLCAnZGVza3RvcHNvbHV0aW9uLm9yZycsICdpbmRpYXRpbWVzLmNvbScsICdoaW5kdXN0YW50aW1lcy5jb20nLCAnaGFwcHl0cmlwcy5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIEFhay5hZGRTY3JpcHQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHZhciBfc2V0QXR0cmlidXRlID0gd2luZG93LkVsZW1lbnQucHJvdG90eXBlLnNldEF0dHJpYnV0ZTsKICAgICAgICAgICAgICB3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUuc2V0QXR0cmlidXRlID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7CiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PSAnY2xhc3MnICYmIHZhbHVlLmluZGV4T2YoJ3RleHRfYWRzJykgIT0gLTEpIHsKICAgICAgICAgICAgICAgICAgdmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKHRoaXMsICdmYWIgaW50ZXJjZXB0ZWQgOi0pJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBfc2V0QXR0cmlidXRlLmNhbGwodGhpcywgbmFtZSwgdmFsdWUpOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0pKCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGQzeHQzZXJfYW50aWFkYmxvY2sgOiB7CiAgICAgICAgLy8gc2l0ZTogaHR0cDovL2QzeHQzci5jb20vYW50aS1hZGJsb2NrCiAgICAgICAgLy8gY2FzZTogaHR0cDovL3Nwb3J0LXNob3cuZnIvanMvYWR2ZXJ0aXNlbWVudC1BZEJsb2NrLmpzCiAgICAgICAgLy8gY2FzZTogaHR0cDovL3d3dy4yc2l0ZS5tZS9hZHZlcnRpc2VtZW50LUFkQmxvY2suanMKICAgICAgICBob3N0IDogWydzcG9ydC1zaG93LmZyJywgJ3ZpcGZsYXNoLm5ldCcsICcyc2l0ZS5tZSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsuYWRkU3R5bGUoIiNibG9ja2Jsb2NrQSB7dmlzaWJpbGl0eTppbnZpc2libGU7ZGlzcGxheTpub25lO30gI2Jsb2NrYmxvY2tBIHRkIHt2aXNpYmlsaXR5OmludmlzaWJsZTtkaXNwbGF5Om5vbmU7fSAjYmxvY2tibG9ja0EgdGQgcCB7dmlzaWJpbGl0eTppbnZpc2libGU7ZGlzcGxheTpub25lO30gI2Jsb2NrYmxvY2tCIHt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTpibG9jazt9Iik7CiAgICAgICAgfQogICAgICB9LAogICAgICBhZGJsb2NrX25vdGlmeSA6IHsKICAgICAgICAvLyBieTogU2tyNHRjaEdyM2F6eU1vbmtpQmFsbGxsbGxaenp6CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzE3NjYKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTM5MgogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMDM5CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzU5MgogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy84MTMKICAgICAgICBob3N0IDogWydnYW1ldHJhbnNmZXJzLmNvbScsICd3aW5hbmRtYWMuY29tJywgJ2ZyZWUtc3RlYW0tZ2l2ZWF3YXlzLmNvbScsICdjYW5hbHdwLmNvbScsICdhbHBoYWhpc3RvcnkuY29tJywgJ25vcmRwcmVzc2UuYmUnLCAnc29zcGMubmFtZScsICdiYWJvby5jb20uYnInXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5zZXRDb29raWUoJ2FuQ29va2llJywgdHJ1ZSk7CiAgICAgICAgICBBYWsudXcuYW5PcHRpb25zID0ge307CiAgICAgICAgfQogICAgICB9LAogICAgICBsdXR0ZV9hZGJsb2NrIDogewogICAgICAgIC8vIHNpdGU6IGh0dHA6Ly9sdXR0ZWFkYmxvY2suYmxvZ3Nwb3QuY29tLzIwMTQvMTEvbGUtc2NyaXB0Lmh0bWwKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvOTM4CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzU4MAogICAgICAgIGhvc3QgOiBbJ2xld2VidHZib3VxdWV0ZnJhbmNvcGhvbmUub3ZlcmJsb2cuY29tJywgJ3dlYnR2LmJsb2d1ZXouY29tJywgJ2xhdGVsZWdyYXR1aXRlLmJsb2dzcG90LmNvbScsICd0b3RhbGRlYnJpZC5vcmcnLCAnMzcuMTg3LjE3My4yMDUnLCAndHZncmF0dWl0ZS5ibG9nc3BvdC5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZEJhaXRFbGVtZW50KCdkaXYjbXlfYWRfZGl2Jyk7CiAgICAgICAgICBBYWsudXcuamFiYmFodWQgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGFudGlibG9jayA6IHsKICAgICAgICAvLyBzaXRlOiBhbnRpYmxvY2sub3JnCiAgICAgICAgLy8gbm90ZTogY3VzdG9taXplZAogICAgICAgIC8vIGlzc3VlOiAKICAgICAgICBob3N0IDogWydteWJhbmsucGwnLCAncmFwaWRncmFiLnBsJ10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTY3JpcHQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHZhciBfYWRkRXZlbnRMaXN0ZW5lciA9IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyOwogICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKSB7CiAgICAgICAgICAgICAgICBpZiAobGlzdGVuZXIudG9TdHJpbmcoKS5pbmRleE9mKCcubmV4dEZ1bmN0aW9uKCl9JykgPiAtMSkgewogICAgICAgICAgICAgICAgICBsaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oWydBbnRpQWRiS2lsbGVyJywgbG9jYXRpb24uaG9zdCwgJ0FudGlCbG9ja3tjdXN0b21pemVkfSddKTsKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF9hZGRFdmVudExpc3RlbmVyLmNhbGwodGhpcywgdHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0pKCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGJsb2NrYWRibG9jayA6IHsKICAgICAgICAvLyBzaXRlOiBibG9ja2FkYmxvY2suY29tCiAgICAgICAgLy8gbm90ZTogcmFuZG9tIGluc3RhbmNlIG5hbWUKICAgICAgICAvLyBzb3VyY2U6IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL1dhdGlsaW4vYWY3NWUwYTJlODJhMmVmYjM4NGJkZTljN2I0MWRlYzgKICAgICAgICAvLyBpc3N1ZXM6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzP3E9bGFiZWw6QmxvY2tBZEJsb2NrCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvZm9ydW0vZGlzY3Vzc2lvbi84MjczCiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvZm9ydW0vZGlzY3Vzc2lvbi83NjI1CiAgICAgICAgaG9zdCA6IFsnYmxvY2thZGJsb2NrLmNvbScsICdsaW5rZHJvcC5uZXQnLCAncmV2Y2xvdWRzLmNvbScsICdsZXBvcm5vLm9yZycsICd1cGxvYWRzaHViLmNvbScsICdkYXNvbG8ub3JnJywgJ2Z1bGxzdHVmZi5uZXQnLCAnemV1c25ld3MuaXQnLCAnY2hlbWlub3RzLm5ldCcsICdsb2xzeS50dicsICdhbmltZXMtbWFuZ2FzLWRkbC5jb20nLCAnbm90aWNpYXNhdXRvbW90aXZhcy5jb20uYnInLCAnZGFya3N0YXJzLm9yZycsICdjb3JlcGFja3MuY29tJywgJ25hdHVyYWxiZC5jb20nLCAnY29vbHNvZnQuYWx0ZXJ2aXN0YS5vcmcnLCAnb3BlbmxvYWQudXMnLCAnY2RhLW9ubGluZS5wbCcsICd1cmJhbnBsYW5ldC5vcmcnLCAnbWFtYWhkLmNvbScsICdzYWRlZW1wYy5jb20nLCAnYXZtb28uY29tJywgJ3RoYWlsYW5kZS1mci5jb20nLCAnYnRhaWEuY29tJywgJ3R1c29mdC5vcmcnLCAnaGlzc2UubmV0JywgJ2V1cm9wZXVwLmNvbScsICducmouZnInLCAnc3Juay5jbycsICdhbmltbWV4LmNvJywgJ3NvY2tldGxvb3AuY29tJywgJ2NyYWNraGV4LmNvbScsICdyZXZlYWxlZHRyaWNrczR1LmNvbScsICdwaXp6YW1ha2luZy5jb20nLCAnY29tcHV0ZXJ3b3JtLm5ldCcsICd5b3VybGlmZXVwZGF0ZWQubmV0J10sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIEFhay5hZGRTY3JpcHQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAvLyB2YXJpYW50IDEKICAgICAgICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB2YXIgX3NldFRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dDsKICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dCA9IGZ1bmN0aW9uIChmbiwgZGVsYXkpIHsKICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGZuLnRvU3RyaW5nKCkpCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGZuID09PSAnc3RyaW5nJyAmJiBmbi5pbmRleE9mKCdiYWJfZWxlbWVudGlkJykgPiAtMSkgewogICAgICAgICAgICAgICAgICBmbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oWydBbnRpQWRiS2lsbGVyJywgbG9jYXRpb24uaG9zdCwgJ0Jsb2NrQWRCbG9jayddKTsKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF9zZXRUaW1lb3V0LmNhbGwodGhpcywgZm4sIGRlbGF5KTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KSgpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBncHRfc3AgOiB7CiAgICAgICAgLy8gYnk6IFJlZWssIEdpd2F5dW1lCiAgICAgICAgLy8gbm90ZTogd2hlbiBhZGJsb2NrIGRldGVjdGVkIGluamVjdCBuZXcgYWRzLCByZWRpcmVjdCB0byBodHRwOi8vdGlueXVybC5jb20venEyejVvNgogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xNjM2CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzE1OTYKICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvMTI5NwogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMTQ0CiAgICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzE1NDIKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vOEFqaXRmYjIKICAgICAgICBob3N0IDogWydtYXJrZXR3YXRjaC5jb20nLCAnZGVhZGxpbmUuY29tJywgJ3R3ZWFrdG93bi5jb20nLCAnbnlwb3N0LmNvbScsICdyZWFsZ20uY29tJywgJ25hc2RhcS5jb20nXSwKICAgICAgICBvblN0YXJ0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgQWFrLmFkZFN0eWxlKCIuY29udGFpbmVyLS1iYW5uZXJBZCwgLmNvbC0tYWQgeyBkaXNwbGF5OiBub25lOyB9Iik7CiAgICAgICAgICBBYWsuYWRkU2NyaXB0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAvLyBHaXdheXVtZSAKICAgICAgICAgICAgICB3aW5kb3cuX3NwXyA9IHdpbmRvdy5fc3BfIHx8IHt9OwogICAgICAgICAgICAgIHdpbmRvdy5fc3BfLmNvbmZpZyA9IHdpbmRvdy5fc3BfLmNvbmZpZyB8fCB7fTsKICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93Ll9zcF8uY29uZmlnLCAiY29udGVudF9jb250cm9sX2NhbGxiYWNrIiwgewogICAgICAgICAgICAgICAgdmFsdWUgOiBmdW5jdGlvbiAoKSB7fSwKICAgICAgICAgICAgICAgIHdyaXRhYmxlIDogZmFsc2UsCiAgICAgICAgICAgICAgICBjb25maWd1cmFibGUgOiBmYWxzZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIC8vIFJlZWsKICAgICAgICAgICAgICB2YXIgX2FkZEV2ZW50TGlzdGVuZXIgPSB3aW5kb3cuRXZlbnRUYXJnZXQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXI7CiAgICAgICAgICAgICAgd2luZG93LkV2ZW50VGFyZ2V0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKSB7CiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnc3AuYmxvY2tpbmcnKSB7CiAgICAgICAgICAgICAgICAgIGxpc3RlbmVyID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhbJ0FudGlBZGJLaWxsZXInLCBsb2NhdGlvbi5ob3N0LCAnR1BUe3NwLWJsb2NraW5nfSddKTsKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF9hZGRFdmVudExpc3RlbmVyLmNhbGwodGhpcywgdHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0pKCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGtydXhfYXNsIDogewogICAgICAgIC8vIG5vdGU6IHdoZW4gYWRibG9jayBkZXRlY3RlZCBpbmplY3QgbmV3IGFkcwogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS8wSEQ3Tjg0aQogICAgICAgIGhvc3QgOiBbJ2NvbW1lbnRjYW1hcmNoZS5uZXQnLCAnam91cm5hbGRlc2ZlbW1lcy5jb20nLCAnbGludGVybmF1dGUuY29tJ10sCiAgICAgICAgb25CZWZvcmVTY3JpcHQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gW3sKICAgICAgICAgICAgICBkZXRlY3RlZCA6ICdLcnV4e2FzbH0nLAogICAgICAgICAgICAgIGNvbnRhaW5zIDogJ0FzbC5wcm90b3R5cGUuaW5qZWN0JywKICAgICAgICAgICAgICBleHRlcm5hbCA6IGZhbHNlLAogICAgICAgICAgICAgIHJlbW92ZSA6IHRydWUKICAgICAgICAgICAgfQogICAgICAgICAgXTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGtydXhfYWRwIDogewogICAgICAgIC8vIG5vdGU6IHdoZW4gYWRibG9jayBkZXRlY3RlZCBpbmplY3QgbmV3IGFkcwogICAgICAgIC8vIHNvdXJjZTogCiAgICAgICAgaG9zdCA6IFsnZm91cmNoZXR0ZS1ldC1iaWtpbmkuZnInLCAnbWV0ZW9jaXR5LmNvbSddLAogICAgICAgIG9uU3RhcnQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBBYWsudXcuYWRQcm90ZWN0ID0gMTsKICAgICAgICB9CiAgICAgIH0sCSAKICAgICAgcGhvZW5peF9nb3lhdmVsYWIgOiB7CiAgICAgICAgLy8gbm90ZTogd2hlbiBhZGJsb2NrIGRldGVjdGVkIGluamVjdCBuZXcgYWRzCiAgICAgICAgLy8gbm90ZTogc2NyaXB0IGFudGktYWRibG9jayBvYmZ1c2NhdGVkLAogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8KICAgICAgICAvLyBkb2M6IGh0dHA6Ly90aW55dXJsLmNvbS9nbDNnaHEyCiAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL2hzQW1kU3VmCiAgICAgICAgaG9zdCA6IFsnZGVtby1waG9lbml4LmNvbScsICdkcHN0cmVhbS5uZXQnLCAnZ3VtLWd1bS1zdHJlYW1pbmcuY29tJywgJ2pldS5pbmZvJywgJ3NvZm9vdC5jb20nLCAnZ2FhcmEtZnIuY29tJywgJ2dheXR1YmUuY29tJywgJ3R1eGJvYXJkLmNvbScsICd4c3RvcnktZnIuY29tJywgJ2hlbnRhaWZyLm5ldCcsICdmaWxtc3RyZWFtaW5nLWhkLmNvbScsICdmaWxtdmYubmV0JywgJ2hlbnRhaWhhdmVuLm9yZycsICduYXJ1dG9zaGlwcHVkZW52Zi5jb20nLCAndGhlYmFkYnV6ei5jb20nLCAnbWFuZ2EtbmV3cy5jb20nLCAnamV1LnZpZGVvJywgJ21hbmdhcy1mci5jb20nXSwKICAgICAgICBvbkFsd2F5cyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vQWFrLnV3Ll9fJGRjID0gZnVuY3Rpb24gKCkge307CiAgICAgICAgICBBYWsuYWRkU3R5bGUoJ2JvZHkge3Zpc2liaWxpdHk6IHZpc2libGU7fScpOwogICAgICAgIH0sCiAgICAgICAgb25CZWZvcmVTY3JpcHQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gW3sgCiAgICAgICAgICAgICAgZGV0ZWN0ZWQgOiAnUGhvZW5peEdveWF2ZWxhYicsCiAgICAgICAgICAgICAgY29udGFpbnMgOiAnUEhFTlYnLAogICAgICAgICAgICAgIGV4dGVybmFsIDogZmFsc2UsCiAgICAgICAgICAgICAgcmVtb3ZlOiB0cnVlCiAgICAgICAgICAgIH0KICAgICAgICAgIF07CiAgICAgICAgfQogICAgICB9LAogICAgICBhZF9kZWZlbmRfdWFicCA6IHsKICAgICAgICAvLyBub3RlOiB3aGVuIGFkYmxvY2sgZGV0ZWN0ZWQgaW5qZWN0IG5ldyBhZHMKICAgICAgICAvLyBzb3VyY2U6IGh0dHA6Ly9wYXN0ZWJpbi5jb20vY0ZRQ3A4MFcKICAgICAgICBob3N0IDogWyd0dnNwaWVsZmlsbS5kZScsICdmaW5hbnplbi5jaCddLAogICAgICAgIG9uQmVmb3JlU2NyaXB0IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFt7CiAgICAgICAgICAgICAgZGV0ZWN0ZWQgOiAnQWREZWZlbmR7VUFCUEluamVjdH0nLAogICAgICAgICAgICAgIGNvbnRhaW5zIDogJ1VBQlBJbmplY3QnLAogICAgICAgICAgICAgIGV4dGVybmFsIDogZmFsc2UsCiAgICAgICAgICAgICAgcmVtb3ZlIDogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgICBdOwogICAgICAgIH0KICAgICAgfSwKICAgICAgYWRfZGVmZW5kX3VhYiA6IHsKICAgICAgICAvLyBub3RlOiB3aGVuIGFkYmxvY2sgZGV0ZWN0ZWQgaW5qZWN0IG5ldyBhZHMKICAgICAgICAvLyB1c2Vyc2NyaXB0OiBodHRwczovL29wZW51c2VyanMub3JnL3NjcmlwdHMvc2Nod2FyenRlZS9BZERlZmVuZF9LbGF0c2NoZQogICAgICAgIC8vIHVzZXJzY3JpcHQ6IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2Fub255bW91cy9hOWI5OTU2YmFmMWQ1OWExMDdjNQogICAgICAgIC8vIHNvdXJjZTogaHR0cDovL3Bhc3RlYmluLmNvbS8xVnlXMHU5bSwgaHR0cDovL3Bhc3RlYmluLmNvbS9BWnFoUnhXVQogICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPWxhYmVsOkFkRGVmZW5kCiAgICAgICAgLy8gcHVsbDogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9wdWxsLzQ2NwogICAgICAgIGhvc3QgOiBbJ3dhdGNoZ2VuZXJhdGlvbi5mcicsICd0dXJiby5mcicsICcyNG1hdGlucy5mcicsICdmb290MDEuY29tJywgJ2NsdWJpYy5jb20nLCAnbWFjZy5jbycsICdiZWdlZWsuZnInLCAnaWdlbi5mcicsICdnYW1lc3Rhci5kZScsICdmb2N1cy5kZScsICdzdGVybi5kZScsICdzYXQxLicsICdwcm9zaWViZW4uJywgJ2thYmVsZWlucy4nLCAnc2F0MWdvbGQuJywgJ3NpeHguJywgJ3Byb3NpZWJlbm1heHguJywgJ2ZlbS5jb20nLCAndGhlLXZvaWNlLW9mLWdlcm1hbnkuJywgJ3dldHRlci5jb20nLCAnd2V0dGVyb25saW5lLmRlJywgJ3Bjd2VsdC5kZScsICdib2Vyc2Utb25saW5lLmRlJywgJ3Nwb3J0YXV0by5kZScsICdhdXRvLW1vdG9yLXVuZC1zcG9ydC5kZScsICdtb3Rvci1rbGFzc2lrLmRlJywgJzR3aGVlbGZ1bi5kZScsICdhdXRvc3RyYXNzZW52ZXJrZWhyLmRlJywgJ2x1c3RpY2guZGUnLCAnc3BveC5jb20nLCAnc2h6LmRlJywgJ3RyYW5zZmVybWFya3QuZGUnLCAncnAtb25saW5lLmRlJywgJ21vdG9ycmFkb25saW5lLmRlJywgJzIwbWluLmNoJywgJ21haW4tc3BpdHplLmRlJywgJ3dvcm1zZXItemVpdHVuZy5kZScsICdsYW1wZXJ0aGVpbWVyLXplaXR1bmcuZGUnLCAnd2llc2JkZW5lci10YWdibGF0dC5kZScsICdidWVyc3RhZWR0ZXItemVpdHVuZy5kZScsICd3aWVzYmRlbmVyLWt1cmllci5kZScsICdyaGVpbi1tYWluLXByZXNzZS5kZScsICdhbGxnZW1laW5lLXplaXR1bmcuZGUnLCAnYXJpdmEuZGUnLCAnc3BpZWdlbC5kZScsICdicmlnaXR0ZS5kZScsICdkc2hpbmkubmV0JywgJ2dhbGEuZGUnLCAnZ2FtZXByby5kZScsICdnYW1vbmEuZGUnLCAncG5uLmRlJywgJ3Byb21vYmlsLmRlJywgJ3Nwb3J0YWwuZGUnLCAnd2ViZmFpbC5jb20nLCAnY29tcHV0ZXJiaWxkLmRlJywgJ2ZpbmFuemVuLm5ldCcsICdjb211bmlvLmRlJywgJ21lZGlzaXRlLmZyJ10sCiAgICAgICAgb25CZWZvcmVTY3JpcHQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gW3sKICAgICAgICAgICAgICBkZXRlY3RlZCA6ICdBZERlZmVuZHt1YWJJbmplY3R9JywKICAgICAgICAgICAgICBjb250YWlucyA6ICd1YWJJbmplY3QnLAogICAgICAgICAgICAgIGV4dGVybmFsIDogZmFsc2UsCiAgICAgICAgICAgICAgcmVtb3ZlIDogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgICBdOwogICAgICAgIH0KICAgICAgfSwKICAgICAgLyogc29sdmVkIGJ5IEFha0xJc3QKICAgICAgdGlzb29taV9pbmRpcmVrdCA6IHsKICAgICAgLy8gaW5saW5lOiBodHRwOi8vcGFzdGViaW4uY29tL25wbVhUVUh3CiAgICAgIC8vIGV4dGVybmFsOiBodHRwOi8vcGFzdGViaW4uY29tL2h2V25DdUR3CiAgICAgIGhvc3QgOiBbJ2VuZXJneS5kZScsICdnZXR2aWRzLmRlJywgJ2dld2luZGUtbm9ybWVuLmRlJywgJ3BvZGNhc3QuZGUnLCAnc3BpZWxlc3BpZWxlbjI0LmRlJywgJ2RpYWxvLmRlJ10sCiAgICAgIG9uQmVmb3JlU2NyaXB0IDogZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDsKICAgICAgdmFyIHRleHQgPSB0YXJnZXQudGV4dDsKICAgICAgaWYgKEFhay5jb250YWlucyh0ZXh0LCAnbj0iYWJjZGVmZ2hpamtsbSIscj0ibm9wcXJzdHV2d3h5eiIsaT0iMDEyMzQ1Njc4OSI7dmFyIHM9dD09MD9pOnQ9PTE/bicpKSB7CiAgICAgIEFhay5zdG9wU2NyaXB0KGUpOwogICAgICBBYWsubG9nKCdUaXNvb21pIEluZGlyZWt0Jyk7CiAgICAgIH0KICAgICAgfQogICAgICB9LAogICAgICAgKi8KICAgICAgLyogc29sdmVkIGJ5IEFha0xJc3QKICAgICAgdGlzb29taV9kaXJla3QgOiB7CiAgICAgIC8vIGlubGluZTogaHR0cDovL3Bhc3RlYmluLmNvbS8ydnEzOEpYWQogICAgICBob3N0IDogWydhdXRvemVpdHVuZy5kZScsICdmb3JtZWwxLmRlJywgJ2ZyZW1kd29ydC5kZScsICdpbnNpZGUtaGFuZHkuZGUnLCAnbW90b3JzcG9ydC10b3RhbC5jb20nLCAnYXVzc2Vud2lydHNjaGFmdHNsdXBlLmRlJywgJ2Rvbm5lcndldHRlci5kZScsICd3aW50b3RhbC5kZSddLAogICAgICBvbkJlZm9yZVNjcmlwdCA6IGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7CiAgICAgIHZhciB0ZXh0ID0gdGFyZ2V0LnRleHQ7CiAgICAgIGlmIChBYWsuY29udGFpbnModGV4dCwgJ2Z1bmN0aW9uIGRldGVjdCgpJykpIHsKICAgICAgQWFrLnN0b3BTY3JpcHQoZSk7CiAgICAgIEFhay5sb2coJ1Rpc29vbWkgRGlyZWt0Jyk7CiAgICAgIH0KICAgICAgfQogICAgICB9LAogICAgICAgKi8KICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgLy8gR2VuZXJpYwogICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICBnZW5lcmljIDogewogICAgICAgIGhvc3QgOiBbJy4qPyddLAogICAgICAgIG9uUmVtb3ZlIDogZnVuY3Rpb24gKHJlbW92ZWROb2RlKSB7CiAgICAgICAgICBpZiAoQWFrLm9wdHMucmVtb3ZlZCkgewogICAgICAgICAgICBpZiAocmVtb3ZlZE5vZGUuc3JjIHx8CiAgICAgICAgICAgICAgcmVtb3ZlZE5vZGUuaWQgfHwKICAgICAgICAgICAgICByZW1vdmVkTm9kZS5jbGFzc05hbWUgJiYKICAgICAgICAgICAgICAhL15maXJlYnVnLy50ZXN0KHJlbW92ZWROb2RlLmNsYXNzTmFtZSkpIHsKICAgICAgICAgICAgICAvLyBOb2RlIHJlbW92ZWQKICAgICAgICAgICAgICBBYWsubG9nKHJlbW92ZWROb2RlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgb25TdGFydCA6IGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICAvLyBGdWNrQWRCbG9jayAmIEJsb2NrQWRCbG9jayB2MyBhbmQgdjQKICAgICAgICAgIC8vIHNpdGU6IGh0dHA6Ly93d3cuc2l0ZXh3LmZyL2Z1Y2thZGJsb2NrLwogICAgICAgICAgLy8gcmVwbzogaHR0cHM6Ly9naXRodWIuY29tL3NpdGV4dy9GdWNrQWRCbG9jawogICAgICAgICAgLy8gcmVwbzogaHR0cHM6Ly9naXRodWIuY29tL3NpdGV4dy9CbG9ja0FkQmxvY2sKICAgICAgICAgIC8vIG5vdGU6IHdoZW4gZnVja2FkYmxvY2suanMgb3IgYmxvY2thZGJsb2NrLmpzIGlzIGJsb2NrZWQKICAgICAgICAgIC8vIGRlbW8gdjM6IGh0dHA6Ly9zaC5zdC92b3ZIRQogICAgICAgICAgLy8gZGVtbyB2NDogaHR0cDovL2FsLmx5L3FCYlhICiAgICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvODg4CiAgICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvODI0CiAgICAgICAgICBBYWsuZmFrZUZ1Y2tBZEJsb2NrKCdmdWNrQWRCbG9jaycsICdGdWNrQWRCbG9jaycpOwogICAgICAgICAgQWFrLmZha2VGdWNrQWRCbG9jaygnYmxvY2tBZEJsb2NrJywgJ0Jsb2NrQWRCbG9jaycpOwoKICAgICAgICAgIC8vIGNhblJ1bkFkcwogICAgICAgICAgLy8gcmVwbzogaHR0cHM6Ly9naXRodWIuY29tL01hdHRoZXdHcm9zcy9DYW5SdW5BZHMKICAgICAgICAgIC8vIG5vdGU6IHVzZSBleHRlcm5hbGwgc2NyaXB0ICIvanMvYWRzLmpzIiAtPiB2YXIgY2FuUnVuQWRzID0gdHJ1ZTsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYWsudXcsICdjYW5SdW5BZHMnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGUgOiB0cnVlLAogICAgICAgICAgICB3cml0YWJsZSA6IGZhbHNlLAogICAgICAgICAgICB2YWx1ZSA6IHRydWUKICAgICAgICAgIH0pOwoKICAgICAgICAgIC8vIGNhblNob3dBZHMKICAgICAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMTk3CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWFrLnV3LCAnY2FuU2hvd0FkcycsIHsKICAgICAgICAgICAgZW51bWVyYWJsZSA6IHRydWUsCiAgICAgICAgICAgIHdyaXRhYmxlIDogZmFsc2UsCiAgICAgICAgICAgIHZhbHVlIDogdHJ1ZQogICAgICAgICAgfSk7CgogICAgICAgICAgLy8gQWRibG9ja2VyIERldGVjdGluZyBTY3JpcHRzOiBNZXRob2QgMgogICAgICAgICAgLy8gZ2lzdDogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vaXJhemFzeWVkLzNkMjQ3ZDNkMTIxZTc4MWEzODcyCiAgICAgICAgICAvLyBub3RlOiB1c2UgZXh0ZXJuYWxsIHNjcmlwdCAiL2pzL2Fkcy5qcyIgLT4gaXNBZEJsb2NrQWN0aXZlID0gZmFsc2U7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWFrLnV3LCAnaXNBZEJsb2NrQWN0aXZlJywgewogICAgICAgICAgICBlbnVtZXJhYmxlIDogdHJ1ZSwKICAgICAgICAgICAgd3JpdGFibGUgOiBmYWxzZSwKICAgICAgICAgICAgdmFsdWUgOiBmYWxzZQogICAgICAgICAgfSk7CgogICAgICAgICAgLyoKICAgICAgICAgIHdpbmRvdy5pSGF2ZUxvYWRlZEFkcyA9IHRydWU7CiAgICAgICAgICB2YXIgbmljZUFkc0NoZWNrPXRydWU7CiAgICAgICAgICBhZGJsb2NrID0gZmFsc2UKICAgICAgICAgIGlzX2Jsb2NrZXIgPSBmYWxzZTsKICAgICAgICAgICAqLwogICAgICAgIH0sCiAgICAgICAgb25JZGxlIDogZnVuY3Rpb24gKCkgewoKICAgICAgICAgIC8vIEFkQmxvY2sgRGV0ZWN0b3IgKFhlbkZvcm8gUmVsbGVjdCkKICAgICAgICAgIC8vIHNpdGU6IGh0dHA6Ly90aW55dXJsLmNvbS9wYTI4eGRuCiAgICAgICAgICAvLyBjbG9uZUludG86IGh0dHA6Ly90aW55dXJsLmNvbS9rNnFwaG1lCiAgICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvODA1CiAgICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvODA0CiAgICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvNTkxCiAgICAgICAgICBpZiAoQWFrLnV3LlhlbkZvcm8gJiYgdHlwZW9mIEFhay51dy5YZW5Gb3JvLnJlbGxlY3QgPT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgQWFrLnV3LlhlbkZvcm8ucmVsbGVjdCA9IHsKICAgICAgICAgICAgICBBZEJsb2NrRGV0ZWN0b3IgOiB7CiAgICAgICAgICAgICAgICBzdGFydCA6IGZ1bmN0aW9uICgpIHt9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICBBYWsuZGV0ZWN0ZWQoJ0FkQmxvY2sgRGV0ZWN0b3IgKFhlbkZvcm8gUmVsbGVjdCknKTsKICAgICAgICAgIH0KCiAgICAgICAgICAvKgogICAgICAgICAgLy8gQWR1bmJsb2NrIC0gaHR0cDovL2FkdW5ibG9jay5jb20vCiAgICAgICAgICBpZiAoQWFrLmdldENvb2tpZSgnYWRibG9jaycpID09IDEpIHsKICAgICAgICAgIEFhay5zZXRDb29raWUoJ2FkYmxvY2snLCAwKTsKICAgICAgICAgIEFhay5zZXRDb29raWUoJ2Jhcl9jbG9zZWQnLCAxKTsKICAgICAgICAgIH0KICAgICAgICAgICAqLwoKICAgICAgICAgIC8vIEFkYmxvY2sgQmxvY2tlcgogICAgICAgICAgLy8gaHR0cHM6Ly93b3JkcHJlc3Mub3JnL3BsdWdpbnMvYWRkYmxvY2tibG9ja2VyLwogICAgICAgICAgLy8gaHR0cDovL3Rpbnl1cmwuY29tL25zd242ZnoKICAgICAgICAgIC8vIGh0dHA6Ly9wYXN0ZWJpbi5jb20vZDY1enIzN20KICAgICAgICAgIC8qIGNhbiBjYXVzZSBhIGJ1ZwogICAgICAgICAgdmFyIGFkcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2Fmc19hZHMnKTsKICAgICAgICAgIHZhciBhZCA9IGFkcy5sZW5ndGggJiYgYWRzW2Fkcy5sZW5ndGggLSAxXTsKICAgICAgICAgIGlmIChhZCAmJiBhZC5pbm5lckhUTUwubGVuZ3RoID09PSAwIHx8IGFkLmNsaWVudEhlaWdodCA9PT0gMCkgewogICAgICAgICAgQWFrLmFkZFNjcmlwdChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBnZXRFbGVtZW50c0J5Q2xhc3NOYW1lTmF0aXZlID0gSFRNTERvY3VtZW50LnByb3RvdHlwZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lOwogICAgICAgICAgSFRNTERvY3VtZW50LnByb3RvdHlwZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lID0gZnVuY3Rpb24gKGNsYXNzTmFtZSkgewogICAgICAgICAgaWYgKGNsYXNzTmFtZSA9PSAnYWZzX2FkcycpIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbyhbJ0FudGlBZGJLaWxsZXInLCBsb2NhdGlvbi5ob3N0LCAnQWRibG9ja0Jsb2NrZXInLCBjbGFzc05hbWVdKTsKICAgICAgICAgIHZhciB1bmlxaWQgPSBEYXRlLm5vdygpOwogICAgICAgICAgdmFyIGJhaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgIGJhaXQuaW5uZXJIVE1MID0gJzxicj4nOwogICAgICAgICAgYmFpdC5jbGFzc05hbWUgPSB1bmlxaWQ7CiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGJhaXQpOwogICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUodW5pcWlkKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBnZXRFbGVtZW50c0J5Q2xhc3NOYW1lTmF0aXZlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9OwogICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICAgKi8KCiAgICAgICAgICAvLyBBZGJ1ZGR5CiAgICAgICAgICBpZiAodHlwZW9mIEFhay51dy5jbG9zZUFkYnVkZHkgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgQWFrLnV3LmNsb3NlQWRidWRkeSgpOwogICAgICAgICAgICBBYWsuZGV0ZWN0ZWQoJ0FkYnVkZHknKTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBBZEJsb2NrIEFsZXJ0ZXIgKFdQKQogICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3dwLXBsdWdpbnMvYWRibG9jay1hbGVydGVyCiAgICAgICAgICAvLwogICAgICAgICAgaWYgKEFhay5nZXRFbGVtZW50KCdkaXYuYWRiX292ZXJsYXkgPiBkaXYuYWRiX21vZGFsX2ltZycpKSB7CiAgICAgICAgICAgIC8vIFJlbW92ZSBBbGVydCArIEFsbG93IFNjcm9sbAogICAgICAgICAgICBBYWsucmVtb3ZlRWxlbWVudCgnZGl2LmFkYl9vdmVybGF5Jyk7CiAgICAgICAgICAgIEFhay5hZGRTdHlsZSgnaHRtbCxib2R5IHtoZWlnaHQ6YXV0bzsgb3ZlcmZsb3c6IGF1dG87fScpOwogICAgICAgICAgICBBYWsuZGV0ZWN0ZWQoJ0FkQmxvY2tBbGVydGVyJyk7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gVW5rbm93IEFudGkgQWRCbG9jayBzeXN0ZW0KICAgICAgICAgIGlmIChBYWsuZ2V0RWxlbWVudCgnI2Jsb2NrZGl2JykgJiYgQWFrLmNvbnRhaW5zKEFhay5nZXRFbGVtZW50KCcjYmxvY2tkaXYnKS5pbm5lckhUTUwsICdkaXNhYmxlIGFkIGJsb2NraW5nIG9yIHVzZSBhbm90aGVyIGJyb3dzZXIgd2l0aG91dCBhbnkgYWRibG9ja2VyIHdoZW4geW91IHZpc2l0JykpIHsKICAgICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoJyNibG9ja2RpdicpOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIEFudGlibG9jay5vcmcgdjIKICAgICAgICAgIC8vIG5vdGU6IGRldGVjdCBhbmQgc3RvcmUgYmxvY2sgaWQKICAgICAgICAgIC8vIGRlbW86IGh0dHA6Ly90aW55dXJsLmNvbS9uaHlocHprCiAgICAgICAgICB2YXIgc3R5bGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc3R5bGUnKTsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBzdHlsZSA9IHN0eWxlc1tpXTsKICAgICAgICAgICAgdmFyIGNzc1J1bGVzID0gc3R5bGUuc2hlZXQuY3NzUnVsZXM7CiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY3NzUnVsZXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICB2YXIgY3NzUnVsZSA9IGNzc1J1bGVzW2pdOwogICAgICAgICAgICAgIHZhciBjc3NUZXh0ID0gY3NzUnVsZS5jc3NUZXh0OwogICAgICAgICAgICAgIHZhciBwYXR0ZXJuID0gL14jKFthLXowLTldezQsMTB9KSB+IFwqIFx7IGRpc3BsYXk6IG5vbmU7IFx9LzsKICAgICAgICAgICAgICBpZiAocGF0dGVybi50ZXN0KGNzc1RleHQpKSB7CiAgICAgICAgICAgICAgICB2YXIgaWQgPSBwYXR0ZXJuLmV4ZWMoY3NzVGV4dClbMV07CiAgICAgICAgICAgICAgICBpZiAoQWFrLmhhc1NjcmlwdCgidy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywiICsgaWQgKyAiLGZhbHNlKSIpKSB7CiAgICAgICAgICAgICAgICAgIEFhay5hYWJzLmFibzIgPSBpZDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHdpbiA9IEFhay51dzsKICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gd2luKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgaWYgKCEvXndlYmtpdC8udGVzdChwcm9wKSAmJiAvXlthLXowLTldezQsMTJ9JC9pLnRlc3QocHJvcCkgJiYgcHJvcCAhPT0gJ2RvY3VtZW50JyAmJiAod2luW3Byb3BdaW5zdGFuY2VvZiBIVE1MRG9jdW1lbnQpID09PSBmYWxzZSAmJiB3aW4uaGFzT3duUHJvcGVydHkocHJvcCkgJiYgdHlwZW9mIHdpbltwcm9wXSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgIHZhciBtZXRob2QgPSB3aW5bcHJvcF07CgogICAgICAgICAgICAgICAgLy8gQW50aWJsb2NrLm9yZyB2MyAmIEJldHRlclN0b3BBZGJsb2NrCiAgICAgICAgICAgICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvODMzCiAgICAgICAgICAgICAgICBpZiAobWV0aG9kLmRlZmVyRXhlY3V0aW9uICYmCiAgICAgICAgICAgICAgICAgIG1ldGhvZC5kaXNwbGF5TWVzc2FnZSAmJgogICAgICAgICAgICAgICAgICBtZXRob2QuZ2V0RWxlbWVudEJ5ICYmCiAgICAgICAgICAgICAgICAgIG1ldGhvZC5nZXRTdHlsZSAmJgogICAgICAgICAgICAgICAgICBtZXRob2QuaW5zZXJ0ICYmCiAgICAgICAgICAgICAgICAgIG1ldGhvZC5uZXh0RnVuY3Rpb24pIHsKICAgICAgICAgICAgICAgICAgaWYgKG1ldGhvZC50b2dnbGUpIHsKICAgICAgICAgICAgICAgICAgICBBYWsuYWFicy5ic2EgPSBwcm9wOwogICAgICAgICAgICAgICAgICAgIEFhay5kZXRlY3RlZCgnQmV0dGVyU3RvcEFkYmxvY2t7ZG9tfScpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIEFhay5hYWJzLmFibzMgPSBwcm9wOwogICAgICAgICAgICAgICAgICAgIEFhay5kZXRlY3RlZCgnQW50aWJsb2NrM3tkb219Jyk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgd2luW3Byb3BdID0gbnVsbDsgLy8ga2lsbCBpbnN0YW5jZQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIEJsb2NrQWRCbG9jawogICAgICAgICAgICAgICAgLy8gc2l0ZTogYmxvY2thZGJsb2NrLmNvbQogICAgICAgICAgICAgICAgLy8gbm90ZTogcmFuZG9tIGluc3RhbmNlIG5hbWUKICAgICAgICAgICAgICAgIC8vIHNvdXJjZTogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vV2F0aWxpbi9hZjc1ZTBhMmU4MmEyZWZiMzg0YmRlOWM3YjQxZGVjOAogICAgICAgICAgICAgICAgLy8gaXNzdWVzOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcz9xPWxhYmVsJTNBQmxvY2tBZEJsb2NrCiAgICAgICAgICAgICAgICBpZiAobWV0aG9kLmJhYikgeyAvLyB2YXJpYW50IDEKICAgICAgICAgICAgICAgICAgQWFrLmRldGVjdGVkKCdCbG9ja0FkQmxvY2t7ZG9tOnZhcmlhbnQxfScpOwogICAgICAgICAgICAgICAgICB3aW5bcHJvcF0gPSBudWxsOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChPYmplY3Qua2V5cyhtZXRob2QpLmxlbmd0aCA9PT0gMyAmJiBPYmplY3Qua2V5cyhtZXRob2QpLm1hcChmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICAgICAgICAgICAgICB9KS5qb2luKCkubGVuZ3RoID09PSAzMikgeyAvLyB2YXJpYW50IDIKICAgICAgICAgICAgICAgICAgQWFrLmRldGVjdGVkKCdCbG9ja0FkQmxvY2t7ZG9tOnZhcmlhbnQyfScpOwogICAgICAgICAgICAgICAgICB3aW5bcHJvcF0gPSBudWxsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2Vycm9yJywgcHJvcCkKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIC8vIEFudGktQWRibG9ja2VycwogICAgICAgICAgdmFyIGFhYnMgPSB7CiAgICAgICAgICAgIC8vIFBsdWdpbnMgV29yZFByZXNzCiAgICAgICAgICAgIE5vQWRCbG9jayA6ICcoL3BsdWdpbnMvbm8tYWRibG9jay98L2Jsb2NrQmxvY2svYmxvY2tCbG9jay5qcXVlcnkuanMpJywKICAgICAgICAgICAgQmV0dGVyU3RvcEFkYmxvY2sgOiAnKC9wbHVnaW5zL2JldHRlci1zdG9wLWFkYmxvY2svfGJzYS1zY3JpcHQtZG9jdHlwZS5qc3xic2Etc2NyaXB0LW5vLWRvY3R5cGUuanMpJywKICAgICAgICAgICAgQWRCbG9ja0Jsb2NrZXIgOiAnL3BsdWdpbnMvd29yZHByZXNzLWFkYmxvY2stYmxvY2tlci8nLAogICAgICAgICAgICBBbnRpQmxvY2tCdWtzc2FBeW1hbiA6ICcvcGx1Z2lucy9hbnRpLWJsb2NrLycsCiAgICAgICAgICAgIEJsb2NrQWx5emVyIDogJy9wbHVnaW5zL2Jsb2NrYWx5emVyLWFkYmxvY2stY291bnRlci8nLAogICAgICAgICAgICBBZEJsb2NraW5nRGV0ZWN0b3IgOiAnL3BsdWdpbnMvYWQtYmxvY2tpbmctZGV0ZWN0b3IvJywKICAgICAgICAgICAgLy8gUGx1Z2lucyBXZWJzaXRlCiAgICAgICAgICAgIEFkd29ya21lZGlhIDogJyhhZHdvcmttZWRpYXxsb3h0a3xjb250ZW50bG9ja2luZ25ldHdvcmtzKS5jb20vZ0xvYWRlci5waHAnLAogICAgICAgICAgICBBZHNjZW5kbWVkaWEgOiAnYWRzY2VuZG1lZGlhLmNvbS9nd2pzLnBocCcsCiAgICAgICAgICAgIEZ1Y2tBZEJsb2NrIDogJygvZnVja2FkYmxvY2suanN8L2Jsb2NrYWRibG9jay5qcyknLAogICAgICAgICAgICBqUXVlcnlBZEJsb2NrIDogJy9qcXVlcnkuYWRibG9jay5qcycsCiAgICAgICAgICAgIGpRdWVyeUFkYmxvY2tEZXRlY3RvciA6ICcvanF1ZXJ5LmFkYmxvY2stZGV0ZWN0b3IuanMnLAogICAgICAgICAgICBBZEJsb2NrQWR2ZXJ0aXNlbWVudCA6ICcvYWR2ZXJ0aXNlbWVudC5qcycsCiAgICAgICAgICAgIEFkQmxvY2tBZHZlcnQgOiAnL2FkdmVydC5qcycsCiAgICAgICAgICAgIEFkQmxvY2tBZHZDdXN0b20gOiAnL2FkdmVydGlzZW1lbnQoLispLmpzJywKICAgICAgICAgICAgQWRCbG9ja0FkZnJhbWUgOiAnL2FkZnJhbWUuanMnLAogICAgICAgICAgICBBbnRpQWRCdXN0ZXIgOiAnL2FudGktYWQtYnVzdGVyLmpzJywKICAgICAgICAgICAgUlRLQW50aUFkYmxvY2sgOiAnL2Jsb2NrY2FrZS5qcycsCiAgICAgICAgICAgIEFkYmxvY2tEZXRlY3RvciA6ICcvQWRibG9ja0RldGVjdG9yL2hhbmRsZXIubWluLmpzJywKICAgICAgICAgICAgalF1ZXJ5QW50aUFkc0Jsb2NrIDogJy9qcXVlcnkuYW50aWFkc2Jsb2NrLmpzJywKICAgICAgICAgICAgQWRidWRkeSA6ICcvanMvYWRidWRkeS5taW4uanMnLAogICAgICAgICAgICBBbnRpQURzQmxvY2tlciA6ICcvYWFkYi9zY3JpcHQuanMnCiAgICAgICAgICB9OwoKICAgICAgICAgIHZhciBzY3JpcHRzID0gZG9jdW1lbnQuc2NyaXB0czsKICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc2NyaXB0cy5sZW5ndGg7IHkrKykgewogICAgICAgICAgICB2YXIgc2NyaXB0ID0gc2NyaXB0c1t5XTsKICAgICAgICAgICAgaWYgKHNjcmlwdC5zcmMpIHsKICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gYWFicykgewogICAgICAgICAgICAgICAgaWYgKG5ldyBSZWdFeHAoYWFic1trZXldLCAnaScpLnRlc3Qoc2NyaXB0LnNyYykpIHsKICAgICAgICAgICAgICAgICAgQWFrLmRldGVjdGVkKFtrZXksIHNjcmlwdC5zcmNdKTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgIH0sCiAgICAgICAgb25JbnNlcnQgOiBmdW5jdGlvbiAoaW5zZXJ0ZWROb2RlKSB7CgogICAgICAgICAgLy8gQWxsIE5vZGVzCiAgICAgICAgICBpZiAoQWFrLm9wdHMuaW5zZXJ0ZWQpIHsKICAgICAgICAgICAgaWYgKGluc2VydGVkTm9kZS5zcmMgfHwKICAgICAgICAgICAgICBpbnNlcnRlZE5vZGUuaWQgfHwKICAgICAgICAgICAgICBpbnNlcnRlZE5vZGUuY2xhc3NOYW1lICYmCiAgICAgICAgICAgICAgIS9maXJlYnVnLy50ZXN0KGluc2VydGVkTm9kZS5pbm5lckhUTUwpKSB7CiAgICAgICAgICAgICAgLy8gTm9kZSBpbnNlcnRlZAogICAgICAgICAgICAgIEFhay5sb2coaW5zZXJ0ZWROb2RlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIC8vIE5vLUFkYmxvY2sgLSBodHRwOi8vd3d3Lm5vLWFkYmxvY2suY29tLwogICAgICAgICAgaWYgKGluc2VydGVkTm9kZS5pZCAmJgogICAgICAgICAgICBpbnNlcnRlZE5vZGUuaWQubGVuZ3RoID09IDQgJiYKICAgICAgICAgICAgL15bYS16MC05XXs0fSQvLnRlc3QoaW5zZXJ0ZWROb2RlLmlkKSAmJgogICAgICAgICAgICBpbnNlcnRlZE5vZGUubm9kZU5hbWUgPT0gJ0RJVicgJiYKICAgICAgICAgICAgaW5zZXJ0ZWROb2RlLmZpcnN0Q2hpbGQgJiYKICAgICAgICAgICAgaW5zZXJ0ZWROb2RlLmZpcnN0Q2hpbGQuaWQgJiYKICAgICAgICAgICAgaW5zZXJ0ZWROb2RlLmZpcnN0Q2hpbGQuaWQgPT0gaW5zZXJ0ZWROb2RlLmlkICYmCiAgICAgICAgICAgIEFhay5jb250YWlucyhpbnNlcnRlZE5vZGUuaW5uZXJIVE1MLCAnbm8tYWRibG9jay5jb20nKSkgewogICAgICAgICAgICAvLyBSZW1vdmUKICAgICAgICAgICAgQWFrLmRldGVjdGVkKCdOby1BZGJsb2NrJywgZmFsc2UsIGxvY2F0aW9uLmhyZWYpOwogICAgICAgICAgICBBYWsucmVtb3ZlRWxlbWVudChpbnNlcnRlZE5vZGUpOwogICAgICAgICAgICAvL0Fhay5sb2coaW5zZXJ0ZWROb2RlKTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBTdG9wQWRibG9jayAtIGh0dHA6Ly9zdG9wYWRibG9jay5vcmcvZG93bmxvYWRzLwogICAgICAgICAgaWYgKGluc2VydGVkTm9kZS5pZCAmJgogICAgICAgICAgICBpbnNlcnRlZE5vZGUuaWQubGVuZ3RoID09IDcgJiYKICAgICAgICAgICAgL15hW2EtejAtOV17Nn0kLy50ZXN0KGluc2VydGVkTm9kZS5pZCkgJiYKICAgICAgICAgICAgaW5zZXJ0ZWROb2RlLm5vZGVOYW1lID09ICdESVYnICYmCiAgICAgICAgICAgIGluc2VydGVkTm9kZS5wYXJlbnROb2RlICYmCiAgICAgICAgICAgIGluc2VydGVkTm9kZS5wYXJlbnROb2RlLmlkICYmCiAgICAgICAgICAgIGluc2VydGVkTm9kZS5wYXJlbnROb2RlLmlkID09IGluc2VydGVkTm9kZS5pZCArICcyJyAmJgogICAgICAgICAgICBBYWsuY29udGFpbnMoaW5zZXJ0ZWROb2RlLmlubmVySFRNTCwgJ3N0b3BhZGJsb2NrLm9yZycpKSB7CiAgICAgICAgICAgIC8vIFJlbW92ZQogICAgICAgICAgICBBYWsuZGV0ZWN0ZWQoJ1N0b3BBZEJsb2NrJywgZmFsc2UsIGxvY2F0aW9uLmhyZWYpOwogICAgICAgICAgICBBYWsucmVtb3ZlRWxlbWVudChpbnNlcnRlZE5vZGUpOwogICAgICAgICAgICAvL0Fhay5sb2coaW5zZXJ0ZWROb2RlKTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBBbnRpQWRibG9jayAoUGFja2VyKQogICAgICAgICAgdmFyIHJlSWZyYW1lSWQgPSAvXih6ZHx3ZCkkLzsKICAgICAgICAgIHZhciByZUltZ0lkID0gL14oeGR8Z2QpJC87CiAgICAgICAgICB2YXIgcmVJbWdTcmMgPSAvXC9hZHNcL2Jhbm5lci5qcGcvOwogICAgICAgICAgdmFyIHJlSWZyYW1lU3JjID0gLyhcL2FkaGFuZGxlclwvfFwvYWRpbWFnZXNcL3xhZC5odG1sKS87CgogICAgICAgICAgLy8gQ29tbXVucwogICAgICAgICAgaWYgKGluc2VydGVkTm9kZS5pZCAmJgogICAgICAgICAgICByZUltZ0lkLnRlc3QoaW5zZXJ0ZWROb2RlLmlkKSAmJgogICAgICAgICAgICBpbnNlcnRlZE5vZGUubm9kZU5hbWUgPT0gJ0lNRycgJiYKICAgICAgICAgICAgcmVJbWdTcmMudGVzdChpbnNlcnRlZE5vZGUuc3JjKSB8fAogICAgICAgICAgICBpbnNlcnRlZE5vZGUuaWQgJiYKICAgICAgICAgICAgcmVJZnJhbWVJZC50ZXN0KGluc2VydGVkTm9kZS5pZCkgJiYKICAgICAgICAgICAgaW5zZXJ0ZWROb2RlLm5vZGVOYW1lID09ICdJRlJBTUUnICYmCiAgICAgICAgICAgIHJlSWZyYW1lU3JjLnRlc3QoaW5zZXJ0ZWROb2RlLnNyYykpIHsKCiAgICAgICAgICAgIC8vIFZhcmlhbnQgMQogICAgICAgICAgICBpZiAoaW5zZXJ0ZWROb2RlLmlkID09ICd4ZCcpIHsKICAgICAgICAgICAgICBBYWsuZGV0ZWN0ZWQoJ0FudGlBZGJsb2NrUGFja2VyWmR4ZCcsIGZhbHNlLCBsb2NhdGlvbi5ocmVmKTsKICAgICAgICAgICAgfSAvLyBWYXJpYW50IDIKICAgICAgICAgICAgZWxzZSBpZiAoaW5zZXJ0ZWROb2RlLmlkID09ICdnZCcpIHsKICAgICAgICAgICAgICBBYWsuZGV0ZWN0ZWQoJ0FudGlBZGJsb2NrUGFja2VyV2RnZCcsIGZhbHNlLCBsb2NhdGlvbi5ocmVmKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBSZW1vdmUKICAgICAgICAgICAgLy9BYWsubG9nKGluc2VydGVkTm9kZSk7CiAgICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KGluc2VydGVkTm9kZSk7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gQWR1bmJsb2NrIC0gaHR0cDovL2FkdW5ibG9jay5jb20vCiAgICAgICAgICB2YXIgcmVJZCA9IC9eW2Etel17OH0kLzsKICAgICAgICAgIHZhciByZUNsYXNzID0gL15bYS16XXs4fSBbYS16XXs4fS87CiAgICAgICAgICB2YXIgcmVCZyA9IC9eW2Etel17OH0tYmckLzsKICAgICAgICAgIHZhciByZU1lc3NhZ2UgPSAvSWwgc2VtYmxlcmFpdCBxdWUgdm91cyB1dGlsaXNpZXogdW4gYmxvcXVldXIgZGUgcHVibGljaXTDqSAhLzsKCiAgICAgICAgICAvLyBDb21tdW5zCiAgICAgICAgICBpZiAodHlwZW9mIEFhay51dy52dGZhYiAhPSAndW5kZWZpbmVkJyAmJgogICAgICAgICAgICB0eXBlb2YgQWFrLnV3LmFkYmxvY2tfYW50aWIgIT0gJ3VuZGVmaW5lZCcgJiYKICAgICAgICAgICAgaW5zZXJ0ZWROb2RlLnBhcmVudE5vZGUgJiYKICAgICAgICAgICAgaW5zZXJ0ZWROb2RlLnBhcmVudE5vZGUubm9kZU5hbWUgPT0gJ0JPRFknICYmCiAgICAgICAgICAgIGluc2VydGVkTm9kZS5pZCAmJgogICAgICAgICAgICByZUlkLnRlc3QoaW5zZXJ0ZWROb2RlLmlkKSAmJgogICAgICAgICAgICBpbnNlcnRlZE5vZGUubm9kZU5hbWUgPT0gJ0RJVicgJiYKICAgICAgICAgICAgaW5zZXJ0ZWROb2RlLm5leHRTaWJsaW5nICYmCiAgICAgICAgICAgIGluc2VydGVkTm9kZS5uZXh0U2libGluZy5jbGFzc05hbWUgJiYKICAgICAgICAgICAgaW5zZXJ0ZWROb2RlLm5leHRTaWJsaW5nLm5vZGVOYW1lID09ICdESVYnKSB7CgogICAgICAgICAgICAvLyBGdWxsIFNjcmVlbiBNZXNzYWdlIChQcmVtaXVtKQogICAgICAgICAgICAvLyA8ZGl2IGlkPSJsZnloc3ZkcSIgY2xhc3M9InR2d25vcWRmIHN2b25leHJrIiBzdHlsZT0idG9wOiAxMDBweDsgb3BhY2l0eTogMTsgdmlzaWJpbGl0eTogdmlzaWJsZTsiPgogICAgICAgICAgICAvLyA8ZGl2IGNsYXNzPSJ0dndub3FkZi1iZyIgc3R5bGU9ImRpc3BsYXk6IGJsb2NrOyI+PC9kaXY+CiAgICAgICAgICAgIGlmIChpbnNlcnRlZE5vZGUuY2xhc3NOYW1lICYmCiAgICAgICAgICAgICAgcmVDbGFzcy50ZXN0KGluc2VydGVkTm9kZS5jbGFzc05hbWUpICYmCiAgICAgICAgICAgICAgcmVCZy50ZXN0KGluc2VydGVkTm9kZS5uZXh0U2libGluZy5jbGFzc05hbWUpICYmCiAgICAgICAgICAgICAgaW5zZXJ0ZWROb2RlLm5leHRTaWJsaW5nLnN0eWxlICYmCiAgICAgICAgICAgICAgaW5zZXJ0ZWROb2RlLm5leHRTaWJsaW5nLnN0eWxlLmRpc3BsYXkgIT0gJ25vbmUnKSB7CgogICAgICAgICAgICAgIC8vIFJlbW92ZSBNZXNzYWdlCiAgICAgICAgICAgICAgQWFrLmRldGVjdGVkKCJBZFVuQmxvY2tQcmVtaXVtIik7CiAgICAgICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoaW5zZXJ0ZWROb2RlLm5leHRTaWJsaW5nKTsgLy8gb3ZlcmxheQogICAgICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KGluc2VydGVkTm9kZSk7IC8vIGJveAogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIFRvcCBiYXIgTWVzc2FnZSAoRnJlZSkKICAgICAgICAgICAgLy8gPGRpdiBpZD0idml4bWdybHkiPgogICAgICAgICAgICAvLyA8ZGl2IGlkPSJtZm5oYWl5eCIgY2xhc3M9Imxrcm52Ynl0Ij4KICAgICAgICAgICAgZWxzZSBpZiAoaW5zZXJ0ZWROb2RlLm5leHRTaWJsaW5nLmlkICYmCiAgICAgICAgICAgICAgcmVJZC50ZXN0KGluc2VydGVkTm9kZS5uZXh0U2libGluZy5pZCkgJiYKICAgICAgICAgICAgICByZU1lc3NhZ2UudGVzdChpbnNlcnRlZE5vZGUuaW5uZXJIVE1MKSkgewoKICAgICAgICAgICAgICAvLyBSZW1vdmUgTWVzc2FnZQogICAgICAgICAgICAgIEFhay5kZXRlY3RlZCgiQWRVbkJsb2NrRnJlZSIpOwogICAgICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KGluc2VydGVkTm9kZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICAvLyBBbnRpYmxvY2sgLSBodHRwOi8vYW50aWJsb2NrLm9yZy8KICAgICAgICAgIHZhciByZU1zZ0lkID0gL15bYS16MC05XXs0LDEwfSQvaTsKICAgICAgICAgIHZhciByZVRhZzEgPSAvXihkaXZ8c3BhbnxifGl8Zm9udHxzdHJvbmd8Y2VudGVyKSQvaTsKICAgICAgICAgIHZhciByZVRhZzIgPSAvXihhfGJ8aXxzfHV8cXxwfHN0cm9uZ3xjZW50ZXIpJC9pOwogICAgICAgICAgdmFyIHJlV29yZHMxID0gL2FkIGJsb2NrZXJ8YWQgYmxvY2t8YWQtYmxvY2t8YWRibG9ja2VyfGFkLWJsb2NrZXJ8YWRibG9ja3xibG9xdWV1cnxibG9xdWVhZG9yfFdlcmJlYmxvY2tlcnxhZGJsb2NrZXJ0fCYjMTU3MDsmIzE1ODM7JiMxNTc2OyYjMTYwNDsmIzE2MDg7JiMxNjAzOyAmIzE1NzY7JiMxNjA0OyYjMTU4Nzt80LHQu9C+0LrQuNGA0L7QstGJ0LjQutC+0LwvaTsKICAgICAgICAgIHZhciByZVdvcmRzMiA9IC9rYXBhdHxkaXNhYmxlfGTDqXNhY3RpdmV6fGTDqXNhY3RpdmVyfGRlc2FjdGl2ZXp8ZGVzYWN0aXZlcnxkZXNhdGl2ZXxkZXNhY3RpdmFyfGRlc2FjdGl2ZXxkZXNhY3RpdmF8ZGVha3RpdmllcmV8ZGlzYWJpbGl0YXJlfCYjOTQ1OyYjOTYwOyYjOTQ5OyYjOTU3OyYjOTQ5OyYjOTYxOyYjOTQ3OyYjOTU5OyYjOTYwOyYjOTU5OyYjOTQzOyYjOTUxOyYjOTYzOyYjOTUxO3wmIzEwNzk7JiMxMDcyOyYjMTA4NzsmIzEwODg7JiMxMDc3OyYjMTA5NzsmIzEwNzI7JiMxMDkwOyYjMTEwMDt8w6FsbMOtdHNkIGxlfHB1YmxpY2l0w6lzfNGA0LXQutC70LDQvNC1fHZlcmhpbmRlcnR8YWR2ZXJ0fGthcGF0xLFuxLF6L2k7CgogICAgICAgICAgLy8gQW50aWJsb2NrLm9yZyAoYWxsIHZlcnNpb24pCiAgICAgICAgICBpZiAoaW5zZXJ0ZWROb2RlLnBhcmVudE5vZGUgJiYKICAgICAgICAgICAgaW5zZXJ0ZWROb2RlLmlkICYmCiAgICAgICAgICAgIGluc2VydGVkTm9kZS5zdHlsZSAmJgogICAgICAgICAgICBpbnNlcnRlZE5vZGUuY2hpbGROb2Rlcy5sZW5ndGggJiYKICAgICAgICAgICAgaW5zZXJ0ZWROb2RlLmZpcnN0Q2hpbGQgJiYKICAgICAgICAgICAgIWluc2VydGVkTm9kZS5maXJzdENoaWxkLmlkICYmCiAgICAgICAgICAgICFpbnNlcnRlZE5vZGUuZmlyc3RDaGlsZC5jbGFzc05hbWUgJiYKICAgICAgICAgICAgcmVNc2dJZC50ZXN0KGluc2VydGVkTm9kZS5pZCkgJiYKICAgICAgICAgICAgcmVUYWcxLnRlc3QoaW5zZXJ0ZWROb2RlLm5vZGVOYW1lKSAmJgogICAgICAgICAgICByZVRhZzIudGVzdChpbnNlcnRlZE5vZGUuZmlyc3RDaGlsZC5ub2RlTmFtZSkpIHsKICAgICAgICAgICAgLy9BYWsubG9nKGluc2VydGVkTm9kZSk7CgogICAgICAgICAgICAvLyBLaWxsIGF1ZGlvIG1lc3NhZ2UKICAgICAgICAgICAgdmFyIGF1ZGlvID0gaW5zZXJ0ZWROb2RlLnF1ZXJ5U2VsZWN0b3IoImF1ZGlvW2xvb3BdIik7CiAgICAgICAgICAgIGlmIChhdWRpbykgewogICAgICAgICAgICAgIGF1ZGlvLnBhdXNlKCk7CiAgICAgICAgICAgICAgQWFrLmRldGVjdGVkKCdBbnRpYmxvY2t7YXVkaW99Jyk7CiAgICAgICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoYXVkaW8pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIEFudGlibG9jay5vcmcgdjIKICAgICAgICAgICAgLy8gZGVtbzogaHR0cDovL3Rpbnl1cmwuY29tL2gzbXd0YTQKICAgICAgICAgICAgZWxzZSBpZiAoKEFhay5hYWJzLmFibzIgJiYgaW5zZXJ0ZWROb2RlLmlkID09IEFhay5hYWJzLmFibzIpIHx8CiAgICAgICAgICAgICAgKGluc2VydGVkTm9kZS5maXJzdENoaWxkLmhhc0NoaWxkTm9kZXMoKSAmJiByZVdvcmRzMS50ZXN0KGluc2VydGVkTm9kZS5maXJzdENoaWxkLmlubmVySFRNTCkgJiYgcmVXb3JkczIudGVzdChpbnNlcnRlZE5vZGUuZmlyc3RDaGlsZC5pbm5lckhUTUwpKSkgewogICAgICAgICAgICAgIEFhay5kZXRlY3RlZCgnQW50aWJsb2NrMntpbnNlcnR9Jyk7CiAgICAgICAgICAgICAgQWFrLnJlbW92ZUVsZW1lbnQoaW5zZXJ0ZWROb2RlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBBbnRpYmxvY2sub3JnIHYzCiAgICAgICAgICAgIC8vIGRlbW86IGh0dHA6Ly90aW55dXJsLmNvbS9xZWNmYTd3CiAgICAgICAgICAgIC8vIGNhc2U6IGh0dHA6Ly90aW55dXJsLmNvbS96YnJscjNhIC8qIGZvcmsgKi8KICAgICAgICAgICAgZWxzZSBpZiAoKEFhay5hYWJzLmFibzMgJiYgaW5zZXJ0ZWROb2RlLmlkID09IEFhay5hYWJzLmFibzMpIHx8CiAgICAgICAgICAgICAgKGluc2VydGVkTm9kZS5maXJzdENoaWxkLmhhc0NoaWxkTm9kZXMoKSAmJiBpbnNlcnRlZE5vZGUuZmlyc3RDaGlsZC5maXJzdENoaWxkLm5vZGVOYW1lID09ICdJTUcnICYmIC9eZGF0YTppbWFnZVwvcG5nO2Jhc2U2NC8udGVzdChpbnNlcnRlZE5vZGUuZmlyc3RDaGlsZC5maXJzdENoaWxkLnNyYykpKSB7CiAgICAgICAgICAgICAgQWFrLnV3W0Fhay5hYWJzLmFibzNdID0gbnVsbDsKICAgICAgICAgICAgICBBYWsuZGV0ZWN0ZWQoJ0FudGlibG9jazN7aW5zZXJ0fScpOwogICAgICAgICAgICAgIEFhay5yZW1vdmVFbGVtZW50KGluc2VydGVkTm9kZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gQmV0dGVyU3RvcEFkYmxvY2sKICAgICAgICAgICAgLy8gZGVtbzogaHR0cDovL3Rpbnl1cmwuY29tL2pzOXphdDQKICAgICAgICAgICAgLy8gc291cmNlOiBodHRwOi8vcGFzdGViaW4uY29tL1lpbWtydEtCCiAgICAgICAgICAgIC8vIGlzc3VlOiBodHRwOi8vdGlueXVybC5jb20vemV0Z2J0eAogICAgICAgICAgICBlbHNlIGlmIChBYWsuYWFicy5ic2EgJiYgaW5zZXJ0ZWROb2RlLmlkID09IEFhay5hYWJzLmJzYSkgewogICAgICAgICAgICAgIEFhay51d1tBYWsuYWFicy5ic2FdID0gbnVsbDsKICAgICAgICAgICAgICBBYWsuZGV0ZWN0ZWQoJ0JldHRlclN0b3BBZGJsb2Nre2luc2VydH0nKTsKICAgICAgICAgICAgICBBYWsucmVtb3ZlRWxlbWVudChpbnNlcnRlZE5vZGUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vICBNYW55IGZhbHNlIHBvc2l0aXZlCiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIC8vQWFrLnJlbW92ZUVsZW1lbnQoaW5zZXJ0ZWROb2RlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGJsb2NrRGV0ZWN0IDogZnVuY3Rpb24gKCkgewoKICAgICAgLy8gRXhjbHVkZSBkb21haW5zCiAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xNDY2CiAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy8xMjYzCiAgICAgIC8vIGlzc3VlOiBodHRwczovL2dyZWFzeWZvcmsub3JnL2VuL2ZvcnVtL2Rpc2N1c3Npb24vODQyMi8KICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzk4NgogICAgICAvLyBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlZWsvYW50aS1hZGJsb2NrLWtpbGxlci9pc3N1ZXMvODU3CiAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy82MTcKICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvZnIvZm9ydW0vZGlzY3Vzc2lvbi81NDI2CiAgICAgIC8vIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVlay9hbnRpLWFkYmxvY2sta2lsbGVyL2lzc3Vlcy80MTkKICAgICAgLy8gaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWVrL2FudGktYWRibG9jay1raWxsZXIvaXNzdWVzLzM3NwogICAgICB2YXIgZXhjbHVkZXMgPSBbIjM2MC5jbiIsICJhbWF6b24uIiwgImFwcGxlLmNvbSIsICJhc2suY29tIiwgImJhaWR1LmNvbSIsICJiaW5nLmNvbSIsICJidWZmZXJhcHAuY29tIiwgImNoYXRhbmdvLmNvbSIsICJjaHJvbWVhY3Rpb25zLmNvbSIsICJlYXN5aW5wbGF5Lm5ldCIsICJlYmF5LmNvbSIsICJmYWNlYm9vay5jb20iLCAiZmxhdHRyLmNvbSIsICJmbGlja3IuY29tIiwgImdoYWNrcy5uZXQiLCAiZ29vZ2xlLiIsICJpbWRiLmNvbSIsICJpbWdib3guY29tIiwgImltZ3VyLmNvbSIsICJpbnN0YWdyYW0uY29tIiwgImpzYmluLmNvbSIsICJqc2ZpZGRsZS5uZXQiLCAibGlua2VkaW4uY29tIiwgImxpdmUuY29tIiwgIm1haWwucnUiLCAibWljcm9zb2Z0LmNvbSIsICJtc24uY29tIiwgInBheXBhbC5jb20iLCAicGludGVyZXN0LmNvbSIsICJwcmVsb2FkZXJzLm5ldCIsICJxcS5jb20iLCAicmVkZGl0LmNvbSIsICJzdGFja292ZXJmbG93LmNvbSIsICJ0YW1wZXJtb25rZXkubmV0IiwgInR3aXR0ZXIuY29tIiwgInZpbWVvLmNvbSIsICJ3aWtpcGVkaWEub3JnIiwgInczc2Nob29scy5jb20iLCAieWFob28uIiwgInlhbmRleC5ydSIsICJ5b3V0dS5iZSIsICJ5b3V0dWJlLmNvbSIsICJ4ZW12dHYubmV0IiwgInZvZC5wbCIsICJhZ2FyLmlvIiwgInBhbmRvb24uaW5mbyIsICJmc2Yub3JnIiwgImFkYmxvY2twbHVzLm9yZyIsICJwbG5rci5jbyIsICJleGFjdHRhcmdldC5jb20iLCAiZG9sbGRpdmluZS5jb20iLCAicG9wbWVjaC5ydSIsICJjYWxtLmNvbSJdOwogICAgICB2YXIgaG9zdCA9IGxvY2F0aW9uLmhvc3Q7CiAgICAgIHZhciBleGNsdWRlZCA9IGZhbHNlOwogICAgICBleGNsdWRlcy5mb3JFYWNoKGZ1bmN0aW9uIChleGNsdWRlKSB7CiAgICAgICAgaWYgKG5ldyBSZWdFeHAoZXhjbHVkZSkudGVzdChob3N0KSkgewogICAgICAgICAgZXhjbHVkZWQgPSB0cnVlOwogICAgICAgICAgaWYgKEFhay5vcHRzLmxvZ0V4Y2x1ZGVkKSB7CiAgICAgICAgICAgIEFhay53YXJuKCdFeGNsdWRlZCcpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICAvLyBJbmNsdWRlIGRvbWFpbnMKICAgICAgLy8gSXNFdmVudHVwcG9ydGVkOiBodHRwOi8vdGlueXVybC5jb20vb2VlejhjNwogICAgICBpZiAoIWV4Y2x1ZGVkKSB7CgogICAgICAgIHZhciBoYW5kbGVyRXZlbnRzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIHJ1bGUgPSBBYWsucnVsZXNbbmFtZV07CgogICAgICAgICAgcnVsZS5ob3N0LmZvckVhY2goZnVuY3Rpb24gKGhvc3QpIHsKICAgICAgICAgICAgLy8gQ2hlY2sgaG9zdAogICAgICAgICAgICBpZiAobmV3IFJlZ0V4cChob3N0KS50ZXN0KGxvY2F0aW9uLmhvc3QpKSB7CgogICAgICAgICAgICAgIC8vIE5hdGl2ZSBtb2RlCiAgICAgICAgICAgICAgaWYgKCFBYWsudXNlR00gJiYgQWFrLmlzVG9wZnJhbWUpIHsKICAgICAgICAgICAgICAgIEFhay53YXJuKCdSdW4gbmF0aXZlbHkuJyk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAvLyBMb2cgcnVsZSB1c2VkCiAgICAgICAgICAgICAgaWYgKHJ1bGUuaG9zdFswXSAhPSAnLio/JykgewogICAgICAgICAgICAgICAgQWFrLmRldGVjdGVkKCdydWxlJywgcnVsZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIAogICAgICAgICAgICAgIC8vIEJlZm9yZSBET00gbG9hZAogICAgICAgICAgICAgIGlmIChydWxlLm9uU3RhcnQpIHsKICAgICAgICAgICAgICAgIHJ1bGUub25TdGFydCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyBPbiBhbGwgc3RhdGVtZW50cwogICAgICAgICAgICAgIGlmIChydWxlLm9uQWx3YXlzKSB7CiAgICAgICAgICAgICAgICBydWxlLm9uQWx3YXlzKCk7IC8vIHN0YXJ0CiAgICAgICAgICAgICAgICBBYWsub25FdmVudCh3aW5kb3csICdET01Db250ZW50TG9hZGVkJywgcnVsZS5vbkFsd2F5cyk7IC8vIGlkbGUKICAgICAgICAgICAgICAgIEFhay5vbkV2ZW50KHdpbmRvdywgJ2xvYWQnLCBydWxlLm9uQWx3YXlzKTsgLy8gZW5kCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIC8vIEJlZm9yZSBTY3JpcHQgRXhlY3V0ZWQKICAgICAgICAgICAgICBpZiAocnVsZS5vbkJlZm9yZVNjcmlwdCkgewoKICAgICAgICAgICAgICAgIC8vIG9wdGlvbnM6IGNvbnRhaW5zLCBzZWFyY2gsIHJlcGxhY2UsIG92ZXJyaWRlLCByZW1vdmUsIGV4dGVybmFsCiAgICAgICAgICAgICAgICB2YXIgb3B0aW9uc0JlZm9yZVNjcmlwdCA9IHJ1bGUub25CZWZvcmVTY3JpcHQoKTsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc0JlZm9yZVNjcmlwdCA9PSAib2JqZWN0IikgewoKICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZXJCZWZvcmVTY3JpcHQgPSBmdW5jdGlvbiAoZSwgb3B0aW9ucykgewogICAgICAgICAgICAgICAgICAgIHZhciBpc0V2ZW50ID0gZSBpbnN0YW5jZW9mIHdpbmRvdy5FdmVudDsKICAgICAgICAgICAgICAgICAgICB2YXIgdGhpc1NjcmlwdCA9IChlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQpIHx8IGU7CgogICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAobykgeyAvLyBoYXNBdHRyaWJ1dGUKICAgICAgICAgICAgICAgICAgICAgIHZhciBzcmMgPSBvLmV4dGVybmFsID8gJ3NyYycgOiAnaW5uZXJIVE1MJzsKICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWFyY2ggPSBuZXcgUmVnRXhwKG8uY29udGFpbnMsIG8uZmxhZ3MgfHwgJycpOwoKICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzU2NyaXB0W3NyY10gJiYgdGhpc1NjcmlwdFtzcmNdLmxlbmd0aCAmJiBzZWFyY2gudGVzdCh0aGlzU2NyaXB0W3NyY10pKSB7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBTdG9wIHNjcmlwdCBleGVjdXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIG5ldyBzY3JpcHQKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IHRoaXNTY3JpcHQucGFyZW50Tm9kZTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1NjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVwbGFjZSBhIHBhcnQgb2YgdGhlIHNjcmlwdAogICAgICAgICAgICAgICAgICAgICAgICBpZiAoby5yZXBsYWNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2NyaXB0W3NyY10gPSB0aGlzU2NyaXB0W3NyY10ucmVwbGFjZShzZWFyY2gsIG8ucmVwbGFjZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LnJlcGxhY2VDaGlsZChuZXdTY3JpcHQsIHRoaXNTY3JpcHQpOwogICAgICAgICAgICAgICAgICAgICAgICB9IC8vIE92ZXJyaWRlIHNjcmlwdAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvLm92ZXJyaWRlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2NyaXB0W3NyY10gPSBvLm92ZXJyaWRlOwogICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQobmV3U2NyaXB0LCB0aGlzU2NyaXB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSAvLyBSZW1vdmUgc2NyaXB0CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG8ucmVtb3ZlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKHRoaXNTY3JpcHQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZiAoby5kZXRlY3RlZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIEFhay5kZXRlY3RlZChvLmRldGVjdGVkKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQkJCQkJCQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFhay5vcHRzLmxvZ0ludGVyY2VwdGVkU2NyaXB0cykgewogICAgICAgICAgICAgICAgICAgICAgICAgIEFhay5sb2coc3JjLCBvLCB0aGlzU2NyaXB0LCBuZXdTY3JpcHQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAvLyBCcm93c2VyIHN1cHBvcnRpbmcgZXZlbnQgYmVmb3Jlc2NyaXB0ZXhlY3V0ZQogICAgICAgICAgICAgICAgICBpZiAoJ29uYmVmb3Jlc2NyaXB0ZXhlY3V0ZScgaW4gZG9jdW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICBBYWsub25FdmVudCh3aW5kb3csICdiZWZvcmVzY3JpcHRleGVjdXRlJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXJCZWZvcmVTY3JpcHQoZSwgb3B0aW9uc0JlZm9yZVNjcmlwdCk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIEJyb3dzZXIgbm90IHN1cHBvdGluZyBiZWZvcmVzY3JpcHRleGVjdXRlCgogICAgICAgICAgICAgICAgICAgIHZhciBsb2FkRG9jdW1lbnQgPSBmdW5jdGlvbiAob3B0aW9uc0JlZm9yZVNjcmlwdCkgewogICAgICAgICAgICAgICAgICAgICAgLy9pZiAoZG9jdW1lbnQucmVmZXJyZXIgPT09ICcnKQogICAgICAgICAgICAgICAgICAgICAgLy9yZXR1cm47CgogICAgICAgICAgICAgICAgICAgICAgQWFrLndhcm4oJ29uYmVmb3Jlc2NyaXB0LWNvbXBhdGlibGUnKTsKCiAgICAgICAgICAgICAgICAgICAgICAvLyBTdG9wIGxvYWRpbmcKICAgICAgICAgICAgICAgICAgICAgIEFhay5hZGRTY3JpcHQoJ3dpbmRvdy5zdG9wKCk7Jyk7IC8vIGNocm9tZS9vcGVyYQogICAgICAgICAgICAgICAgICAgICAgLy9BYWsuYWRkU2NyaXB0KCdkb2N1bWVudC5vcGVuKCk7Jyk7IC8vIGZpcmVmb3gKCiAgICAgICAgICAgICAgICAgICAgICAvLyBHZXQgY29udGVudAogICAgICAgICAgICAgICAgICAgICAgQWFrLnJlcXVlc3QoewogICAgICAgICAgICAgICAgICAgICAgICB1cmwgOiBsb2NhdGlvbi5ocmVmLAogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzIDogewogICAgICAgICAgICAgICAgICAgICAgICAgICJSZWZlcmVyIiA6IGRvY3VtZW50LnJlZmVycmVyCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIG9ubG9hZCA6IGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaHRtbCA9IHJlc3VsdC5yZXNwb25zZVRleHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnNlciA9IG5ldyB3aW5kb3cuRE9NUGFyc2VyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRvYyA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcoaHRtbCwgInRleHQvaHRtbCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzY3JpcHRzID0gZG9jLnNjcmlwdHM7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2NyaXB0cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRoaXNTY3JpcHQgPSBzY3JpcHRzW2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlckJlZm9yZVNjcmlwdCh0aGlzU2NyaXB0LCBvcHRpb25zQmVmb3JlU2NyaXB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgdG8gc3RyaW5nCiAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQub3V0ZXJIVE1MOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXcml0ZSBuZXcgY29udGVudCB0byBIVE1MIGRvY3VtZW50OgogICAgICAgICAgICAgICAgICAgICAgICAgIEFhay5hZGRTY3JpcHQoJ2RvY3VtZW50Lm9wZW4oKTsgZG9jdW1lbnQud3JpdGUodW5lc2NhcGUoIicgKyB3aW5kb3cuZXNjYXBlKGh0bWwpICsgJyIpKTsgZG9jdW1lbnQuY2xvc2UoKTsnKTsgLy8gY2hyb21lL29wZXJhCiAgICAgICAgICAgICAgICAgICAgICAgICAgLy9BYWsuYWRkU2NyaXB0KCdkb2N1bWVudC53cml0ZSh1bmVzY2FwZSgiJyArIGVzY2FwZShodG1sKSArICciKSk7IGRvY3VtZW50LmNsb3NlKCk7Jyk7IC8vIGZpcmVmb3gKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBsb2FkRG9jdW1lbnQob3B0aW9uc0JlZm9yZVNjcmlwdCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IC8vIEFmdGVyIFNjcmlwdCBFeGVjdXRlZAogICAgICAgICAgICAgIGlmIChydWxlLm9uQWZ0ZXJTY3JpcHQpIHsKICAgICAgICAgICAgICAgIGlmICgnb25hZnRlcnNjcmlwdGV4ZWN1dGUnIGluIGRvY3VtZW50KSB7IC8vIE1vemlsbGEgRmlyZWZveAogICAgICAgICAgICAgICAgICBBYWsub25FdmVudCh3aW5kb3csICdhZnRlcnNjcmlwdGV4ZWN1dGUnLCBydWxlLm9uQWZ0ZXJTY3JpcHQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyBXaGVuIERPTSBMb2FkCiAgICAgICAgICAgICAgaWYgKHJ1bGUub25JZGxlKSB7CiAgICAgICAgICAgICAgICBpZiAoIUFhay51c2VHTSkgeyAvLyBOYXRpdmUgbW9kZQogICAgICAgICAgICAgICAgICBydWxlLm9uSWRsZSgpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgLy9BYWsub25FdmVudCh3aW5kb3csICdET01Db250ZW50TG9hZGVkJywgcnVsZS5vbklkbGUpOwogICAgICAgICAgICAgICAgICBBYWsub25FdmVudCh3aW5kb3csICdET01Db250ZW50TG9hZGVkJywgcnVsZS5vbklkbGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyBXaGVuIFdpbmRvdyBMb2FkCiAgICAgICAgICAgICAgaWYgKHJ1bGUub25FbmQpIHsKICAgICAgICAgICAgICAgIGlmICghQWFrLnVzZUdNKSB7IC8vIE5hdGl2ZSBtb2RlCiAgICAgICAgICAgICAgICAgIHJ1bGUub25FbmQoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIEFhay5vbkV2ZW50KHdpbmRvdywgJ2xvYWQnLCBydWxlLm9uRW5kKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gV2hlbiBET00gQXR0ck1vZGlmaWVkCiAgICAgICAgICAgICAgaWYgKHJ1bGUub25BdHRyTW9kaWZpZWQpIHsKICAgICAgICAgICAgICAgIEFhay5vbkV2ZW50KHdpbmRvdywgJ0RPTUF0dHJNb2RpZmllZCcsIHJ1bGUub25BdHRyTW9kaWZpZWQsIGZhbHNlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gV2hlbiBET00gU3VidHJlZU1vZGlmaWVkCiAgICAgICAgICAgICAgaWYgKHJ1bGUub25TdWJ0cmVlTW9kaWZpZWQpIHsKICAgICAgICAgICAgICAgIEFhay5vbkV2ZW50KHdpbmRvdywgJ0RPTVN1YnRyZWVNb2RpZmllZCcsIHJ1bGUub25TdWJ0cmVlTW9kaWZpZWQsIGZhbHNlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gV2hlbiBET00gRWxlbWVudHMgYXJlIEluc2VydGVkIGluIERvY3VtZW50CiAgICAgICAgICAgICAgaWYgKHJ1bGUub25JbnNlcnQpIHsKCiAgICAgICAgICAgICAgICAvLyBNdXRhdGlvbiBPYnNlcnZlcgogICAgICAgICAgICAgICAgLy8gZG9jOiBodHRwOi8vdGlueXVybC5jb20vbXh4emVlNAogICAgICAgICAgICAgICAgLy8gc3VwcG9ydDogaHR0cDovL3Rpbnl1cmwuY29tL25lcG43dnkKICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIgIT0gJ3VuZGVmaW5lZCcgfHwKICAgICAgICAgICAgICAgICAgdHlwZW9mIFdlYktpdE11dGF0aW9uT2JzZXJ2ZXIgIT0gJ3VuZGVmaW5lZCcpIHsKCiAgICAgICAgICAgICAgICAgIC8vIE11dGF0aW9uIE9ic2VydmVyCiAgICAgICAgICAgICAgICAgIHZhciBNdXRhdGlvbk9ic2VydmVyMSA9IHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyIHx8IHdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyOwoKICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGFuIG9ic2VydmVyIGluc3RhbmNlCiAgICAgICAgICAgICAgICAgIHZhciBvYnMxID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIxKGZ1bmN0aW9uIChtdXRhdGlvbnMpIHsKICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGNhbiBzYWZlbHkgdXNlIGBmb3JFYWNoYCBiZWNhdXNlIHdlIGFscmVhZHkgdXNlIG11dGF0aW9uCiAgICAgICAgICAgICAgICAgICAgICAvLyBvYnNlcnZlcnMgdGhhdCBhcmUgbW9yZSByZWNlbnQgdGhhbiBgZm9yRWFjaGAuIChzb3VyY2U6IE1ETikKICAgICAgICAgICAgICAgICAgICAgIG11dGF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChtdXRhdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSB3YW50IG9ubHkgYWRkZWQgbm9kZXMKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uLmFkZGVkTm9kZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChtdXRhdGlvbi5hZGRlZE5vZGVzLCBmdW5jdGlvbiAoYWRkZWROb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQWFrLm9wdHMubG9nSW5zZXJ0ZWROb2RlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBYWsubG9nKGFkZGVkTm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlLm9uSW5zZXJ0KGFkZGVkTm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAvLyBPYnNlcnZlcgogICAgICAgICAgICAgICAgICBvYnMxLm9ic2VydmUoZG9jdW1lbnQsIHsKICAgICAgICAgICAgICAgICAgICBjaGlsZExpc3QgOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIHN1YnRyZWUgOiB0cnVlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gTXV0YXRpb24gRXZlbnRzIChBbHRlcm5hdGl2ZSBTb2x1dGlvbikKICAgICAgICAgICAgICAgIC8vIGRvYzogaHR0cDovL3Rpbnl1cmwuY29tL29wOTVyZnkKICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICBBYWsub25FdmVudCh3aW5kb3csICJET01Ob2RlSW5zZXJ0ZWQiLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChBYWsub3B0cy5sb2dJbnNlcnRlZE5vZGVzKSB7CiAgICAgICAgICAgICAgICAgICAgICBBYWsubG9nKGUudGFyZ2V0KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcnVsZS5vbkluc2VydChlLnRhcmdldCk7CiAgICAgICAgICAgICAgICAgIH0sIGZhbHNlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gV2hlbiBET00gRWxlbWVudHMgYXJlIFJlbW92ZWQgaW4gRG9jdW1lbnQKICAgICAgICAgICAgICBpZiAocnVsZS5vblJlbW92ZSkgewoKICAgICAgICAgICAgICAgIC8vIE11dGF0aW9uIE9ic2VydmVyCiAgICAgICAgICAgICAgICAvLyBkb2M6IGh0dHA6Ly90aW55dXJsLmNvbS9teHh6ZWU0CiAgICAgICAgICAgICAgICAvLyBzdXBwb3J0OiBodHRwOi8vdGlueXVybC5jb20vbmVwbjd2eQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cuTXV0YXRpb25PYnNlcnZlciAhPSAndW5kZWZpbmVkJyB8fAogICAgICAgICAgICAgICAgICB0eXBlb2YgV2ViS2l0TXV0YXRpb25PYnNlcnZlciAhPSAndW5kZWZpbmVkJykgewoKICAgICAgICAgICAgICAgICAgLy8gTXV0YXRpb24gT2JzZXJ2ZXIKICAgICAgICAgICAgICAgICAgdmFyIE11dGF0aW9uT2JzZXJ2ZXIyID0gd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIgfHwgd2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7CgogICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYW4gb2JzZXJ2ZXIgaW5zdGFuY2UKICAgICAgICAgICAgICAgICAgdmFyIG9iczIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcjIoZnVuY3Rpb24gKG11dGF0aW9ucykgewogICAgICAgICAgICAgICAgICAgICAgLy8gV2UgY2FuIHNhZmVseSB1c2UgYGZvckVhY2hgIGJlY2F1c2Ugd2UgYWxyZWFkeSB1c2UgbXV0YXRpb24KICAgICAgICAgICAgICAgICAgICAgIC8vIG9ic2VydmVycyB0aGF0IGFyZSBtb3JlIHJlY2VudCB0aGFuIGBmb3JFYWNoYC4gKHNvdXJjZTogTUROKQogICAgICAgICAgICAgICAgICAgICAgbXV0YXRpb25zLmZvckVhY2goZnVuY3Rpb24gKG11dGF0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIHdhbnQgb25seSByZW1vdmVkIG5vZGVzCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtdXRhdGlvbi5yZW1vdmVkTm9kZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChtdXRhdGlvbi5yZW1vdmVkTm9kZXMsIGZ1bmN0aW9uIChyZW1vdmVkTm9kZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFhay5vcHRzLmxvZ1JlbW92ZWROb2RlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBYWsubG9nKHJlbW92ZWROb2RlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGUub25SZW1vdmUocmVtb3ZlZE5vZGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgLy8gT2JzZXJ2ZXIKICAgICAgICAgICAgICAgICAgb2JzMi5vYnNlcnZlKGRvY3VtZW50LCB7CiAgICAgICAgICAgICAgICAgICAgY2hpbGRMaXN0IDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBzdWJ0cmVlIDogdHJ1ZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIE11dGF0aW9uIEV2ZW50cyAoQWx0ZXJuYXRpdmUgU29sdXRpb24pCiAgICAgICAgICAgICAgICAvLyBkb2M6IGh0dHA6Ly90aW55dXJsLmNvbS9vcDk1cmZ5CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgQWFrLm9uRXZlbnQod2luZG93LCAiRE9NTm9kZVJlbW92ZWQiLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChBYWsub3B0cy5sb2dSZW1vdmVkTm9kZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIEFhay5sb2coZS50YXJnZXQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBydWxlLm9uUmVtb3ZlKGUudGFyZ2V0KTsKICAgICAgICAgICAgICAgICAgfSwgZmFsc2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAKICAgICAgICAgICAgICAvLyBBYWsgRXZlbnRzCiAgICAgICAgICAgICAgQWFrLm9uRXZlbnQod2luZG93LCAnZGV0ZWN0ZWQnLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgQWFrLmluZm8oWydBbnRpQWRiS2lsbGVyJywgQWFrLmlzVG9wZnJhbWUgPyAndG9wZnJhbWUnIDogJ3N1YmZyYW1lJywgbG9jYXRpb24uaG9zdCwgZS5kZXRhaWxdKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgLy8gQXBwbHkgcnVsZXMKICAgICAgICBmb3IgKHZhciBuYW1lIGluIEFhay5ydWxlcykgewogICAgICAgICAgaWYgKEFhay5ydWxlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgewogICAgICAgICAgICBoYW5kbGVyRXZlbnRzKEFhaywgbmFtZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgQWFrLmluaXRpYWxpemUoKTsKCn0pKHdpbmRvdyk7"},{"name":"iZhihu","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":["http://www.zhihu.com/*","https://www.zhihu.com/*"],"orig_matches":["http://www.zhihu.com/*","https://www.zhihu.com/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1512981252000},"enabled":true,"position":6,"file_url":"https://greasyfork.org/scripts/350-izhihu/code/iZhihu.user.js","uuid":"a3402b39-10fd-40e9-9ee5-c72302d817c7","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBpWmhpaHUKLy8gQG5hbWVzcGFjZSAgICBodHRwczovL2dpdGh1Yi5jb20vdW5vZ3ovaXpoaWh1Ci8vIEB2ZXJzaW9uICAgICAgMi4xMy4zCi8vIEBkZXNjcmlwdGlvbiAg55+l5LmO5o+S5Lu2Ci8vIEBtYXRjaCAgICAgICAgaHR0cDovL3d3dy56aGlodS5jb20vKgovLyBAaW5jbHVkZSAgICAgIGh0dHA6Ly93d3cuemhpaHUuY29tLyoKLy8gQG1hdGNoICAgICAgICBodHRwczovL3d3dy56aGlodS5jb20vKgovLyBAaW5jbHVkZSAgICAgIGh0dHBzOi8vd3d3LnpoaWh1LmNvbS8qCi8vIEByZXF1aXJlICAgICAgaHR0cDovL2Nkbi5zdGF0aWNmaWxlLm9yZy9qcXVlcnkvMS44LjIvanF1ZXJ5Lm1pbi5qcwovLyBAcmVxdWlyZSAgICAgIGh0dHA6Ly9jZG4uc3RhdGljZmlsZS5vcmcvaUNoZWNrLzEuMC4xL2ljaGVjay5taW4uanMKLy8gQHJlc291cmNlICAgICBqcVVJX0NTUyBodHRwOi8vY2RuLnN0YXRpY2ZpbGUub3JnL2lDaGVjay8xLjAuMS9za2lucy9zcXVhcmUvYmx1ZS5jc3MKLy8gQHJlc291cmNlICAgICB1aS1iZ19pY2hlY2stc2tpbl9zcXVhcmVfYmx1ZSBodHRwOi8vY2RuLnN0YXRpY2ZpbGUub3JnL2lDaGVjay8xLjAuMS9za2lucy9zcXVhcmUvYmx1ZS5wbmcKLy8gQHJlc291cmNlICAgICB1aS1iZ19pY2hlY2stc2tpbl9zcXVhcmVfYmx1ZTJ4IGh0dHA6Ly9jZG4uc3RhdGljZmlsZS5vcmcvaUNoZWNrLzEuMC4xL3NraW5zL3NxdWFyZS9ibHVlQDJ4LnBuZwovLyBAcmVxdWlyZSAgICAgIGh0dHA6Ly9jZG4uc3RhdGljZmlsZS5vcmcvanF1ZXJ5dWkvMS4xMC40L2pxdWVyeS11aS5taW4uanMKLy8gQHJlcXVpcmUgICAgICBodHRwOi8vY2RuLnN0YXRpY2ZpbGUub3JnL3B1cmwvMi4zLjEvcHVybC5taW4uanMKLy8gQHJlcXVpcmUgICAgICBodHRwOi8vY2RuLnN0YXRpY2ZpbGUub3JnL3VuZGVyc2NvcmUuanMvMS42LjAvdW5kZXJzY29yZS1taW4uanMKLy8gQGdyYW50ICAgICAgICBHTV94bWxIdHRwUmVxdWVzdAovLyBAZ3JhbnQgICAgICAgIEdNX2FkZFN0eWxlCi8vIEBncmFudCAgICAgICAgR01fZ2V0UmVzb3VyY2VUZXh0Ci8vIEBncmFudCAgICAgICAgR01fZ2V0UmVzb3VyY2VVUkwKLy8gQGljb24gICAgICAgICBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vdW5vZ3ovaXpoaWh1L2RldmVsb3AvbWlzYy94cGktY29uZmlnL2ljb242NC5wbmcKLy8gQGNvcHlyaWdodCAgICAyMDE1KywgQOmSouebhemDreWtkCBA5YiY5YuHIEDloqjno4oKLy8gPT0vVXNlclNjcmlwdD09Cgp2YXIganFVSV9Dc3NTcmMgPSBHTV9nZXRSZXNvdXJjZVRleHQoImpxVUlfQ1NTIikKR01fYWRkU3R5bGUgKGpxVUlfQ3NzU3JjLnJlcGxhY2UoJ3VybChibHVlJywgJ3VybChodHRwOi8vY2RuLnN0YXRpY2ZpbGUub3JnL2lDaGVjay8xLjAuMS9za2lucy9zcXVhcmUvYmx1ZScpKTsKCnZhciB2ZXJzaW9uPScyLjEzLjMnOwp2YXIgdXBkYXRlRGF0ZT0nMjAxNi00LTI1JzsKCmlmICggdHlwZW9mIHVuc2FmZVdpbmRvdyA9PT0gInVuZGVmaW5lZCIpIHsKICAgIHVuc2FmZVdpbmRvdyAgICA9ICggZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBkdW1teUVsZW0gICA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTsKICAgICAgICBkdW1teUVsZW0ub25jbGljaz1mdW5jdGlvbigpe3JldHVybiB3aW5kb3c7fTsKICAgICAgICByZXR1cm4gZHVtbXlFbGVtLm9uY2xpY2sgKCk7CiAgICB9ICkgKCk7Cn0KCi8v5Li75YWl5Y+jCi8vJChmdW5jdGlvbiBtYWluKCl7CgoKLyoqCiAqIEBjbGFzcyBVdGlscyDovoXliqnnsbsKICovCmZ1bmN0aW9uIHV0aWxzKCl7Cn07Cgp2YXIgY2ZnRGVmYXVsdCA9IHsKICAgICdjb21tZW50X3NpZGViYXInOiB0cnVlCiAgLCAnYW5zd2VyX29yZGVyQnlUaW1lJzogZmFsc2UKICAsICdBdXRob3JMaXN0JzpmYWxzZQogICwgJ1Nob3dDb21tZW50Jzp0cnVlCiAgLCAnSG9tZUxheW91dCc6ZmFsc2UKICAsICdRdWlja0Zhdm8nOnRydWUKICAsICdRdWlja0Zhdm9QaW5uZWQnOnt9CiAgLCAnQXV0aG9yUmVhcic6ZmFsc2UKICAsICdIb21lTm90aSc6ZmFsc2UKICAsICdRdWlja0Jsb2NrJzpmYWxzZQogICwgJ05vdGk3Jzp0cnVlCiAgLCAnSG9tZUZlZWRzQ29sdW1ucyc6ZmFsc2UKICAsICdSaWdodENvbW1lbnRfQXV0b1Njcm9sbFBhZ2VXaGVuQ2xvc2luZyc6dHJ1ZQogICwgJ1RvcE5hdkF1dG9Gb2xkJzpmYWxzZQp9OwogIAovKioKICog6K+75Y+W6YWN572uCiAqLwp1dGlscy5nZXRDZmcgPSBmdW5jdGlvbihrZXkpewogIGlmKCFrZXkpcmV0dXJuIGZhbHNlOwogIHZhciBjZmcgPSAkLmV4dGVuZChjZmdEZWZhdWx0LCB0aGlzLmdldFZhbHVlKCdpemhpaHUnLGNmZ0RlZmF1bHQpKTsKICByZXR1cm4ga2V5ID8gY2ZnW2tleV0gOiBjZmc7Cn07Cgp1dGlscy5zZXRDZmcgPSBmdW5jdGlvbihrZXksdmFsdWUpewogIGlmKCFrZXkpcmV0dXJuOwogIHZhciBjZmcgPSAkLmV4dGVuZChjZmdEZWZhdWx0LCB0aGlzLmdldFZhbHVlKCdpemhpaHUnLGNmZ0RlZmF1bHQpKTsKICBjZmdba2V5XT12YWx1ZTsKICB0aGlzLnNldFZhbHVlKCdpemhpaHUnLGNmZyk7Cn07CgovKioKICog6K+75Y+W5a2Y5YKoCiAqLwp1dGlscy5nZXRWYWx1ZSA9IGZ1bmN0aW9uKGtleSwgZGVmYXVsdFZhbHVlKXsKICAgIHZhciB2PXVuc2FmZVdpbmRvdy5sb2NhbFN0b3JhZ2Vba2V5XTsKICAgIGlmKHYpCiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2Uodik7CiAgICBlbHNlCiAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTsKfTsKCi8qKgogKiDlhpnlhaXlrZjlgqgKICovCnV0aWxzLnNldFZhbHVlID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSl7CiAgdW5zYWZlV2luZG93LmxvY2FsU3RvcmFnZVtrZXldID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpOwp9OwoKLyoqCiAqIOWIoOmZpOWtmOWCqAogKi8KdXRpbHMuZGVsZXRlVmFsdWUgPSBmdW5jdGlvbihrZXkpewogIHJldHVybiBkZWxldGUgdW5zYWZlV2luZG93LmxvY2FsU3RvcmFnZVtrZXldOwp9OwoKdXRpbHMudHJhbnNmZXJPbGRDZmc9ZnVuY3Rpb24oKXsKICAgIHZhciBvbGRIb21lTGF5b3V0ID0gdW5zYWZlV2luZG93LmxvY2FsU3RvcmFnZVsnaXpoX0hvbWVMYXlvdXQnXQogICAgICAsIG9sZEF1dGhvckxpc3QgPSB1bnNhZmVXaW5kb3cubG9jYWxTdG9yYWdlWydpemhfQXV0aG9yTGlzdCddCiAgICAgICwgb2xkU2hvd0NvbW1lbnQgPSB1bnNhZmVXaW5kb3cubG9jYWxTdG9yYWdlWydpemhfU2hvd0NvbW1lbnQnXQogICAgICAsIG9sZFF1aWNrRmF2byA9IHVuc2FmZVdpbmRvdy5sb2NhbFN0b3JhZ2VbJ2l6aF9RdWlja0Zhdm8nXQogICAgICAsIG9sZEF1dGhvclJlYXIgPSB1bnNhZmVXaW5kb3cubG9jYWxTdG9yYWdlWydpemhfQXV0aG9yUmVhciddCiAgICAgICwgb2xkSG9tZU5vdGkgPSB1bnNhZmVXaW5kb3cubG9jYWxTdG9yYWdlWydpemhfSG9tZU5vdGknXQogICAgOwogICAgaWYob2xkSG9tZUxheW91dCl7CiAgICAgICAgaXpoSG9tZUxheW91dD1vbGRIb21lTGF5b3V0OwogICAgICAgIHVuc2FmZVdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnaXpoX0hvbWVMYXlvdXQnKTsKICAgICAgICB0aGlzLnNldENmZygnSG9tZUxheW91dCcsaXpoSG9tZUxheW91dCk7CiAgICB9CiAgICBpZihvbGRBdXRob3JMaXN0KXsKICAgICAgICBpemhBdXRob3JMaXN0PW9sZEF1dGhvckxpc3Q7CiAgICAgICAgdW5zYWZlV2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdpemhfQXV0aG9yTGlzdCcpOwogICAgICAgIHRoaXMuc2V0Q2ZnKCdBdXRob3JMaXN0JyxpemhBdXRob3JMaXN0KTsKICAgIH0KICAgIGlmKG9sZFNob3dDb21tZW50KXsKICAgICAgICBpemhSaWdodENvbW1lbnQ9b2xkU2hvd0NvbW1lbnQ7CiAgICAgICAgdW5zYWZlV2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdpemhfU2hvd0NvbW1lbnQnKTsKICAgICAgICB0aGlzLnNldENmZygnU2hvd0NvbW1lbnQnLGl6aFJpZ2h0Q29tbWVudCk7CiAgICB9CiAgICBpZihvbGRRdWlja0Zhdm8pewogICAgICAgIGl6aFF1aWNrRmF2bz1vbGRRdWlja0Zhdm87CiAgICAgICAgdW5zYWZlV2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdpemhfUXVpY2tGYXZvJyk7CiAgICAgICAgdGhpcy5zZXRDZmcoJ1F1aWNrRmF2bycsaXpoUXVpY2tGYXZvKTsKICAgIH0KICAgIGlmKG9sZEF1dGhvclJlYXIpewogICAgICAgIGl6aEF1dGhvclJlYXI9b2xkQXV0aG9yUmVhcjsKICAgICAgICB1bnNhZmVXaW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2l6aF9BdXRob3JSZWFyJyk7CiAgICAgICAgdGhpcy5zZXRDZmcoJ0F1dGhvclJlYXInLGl6aEF1dGhvclJlYXIpOwogICAgfQogICAgaWYob2xkSG9tZU5vdGkpewogICAgICAgIGl6aEhvbWVOb3RpPW9sZEhvbWVOb3RpOwogICAgICAgIHVuc2FmZVdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnaXpoX0hvbWVOb3RpJyk7CiAgICAgICAgdGhpcy5zZXRDZmcoJ0hvbWVOb3RpJyxpemhIb21lTm90aSk7CiAgICB9Cgp9OwoKCi8qKgogKiBAbWV0aG9kIGZvcm1hdFN0cgogKgogKiDmoLzlvI/ljJblrZfnrKbkuLLmqKHniYgs5pSv5oyBMuenjeagvOW8jzoKICoKICogICAgIGZvcm1hdFN0cigiaSBjYW4gc3BlYWsge2xhbmd1YWdlfSBzaW5jZSBpIHdhcyB7YWdlfSIse2xhbmd1YWdlOidqYXZhc2NyaXB0JyxhZ2U6MTB9KTsKICogICAgIGZvcm1hdFN0cigiaSBjYW4gc3BlYWsgezB9IHNpbmNlIGkgd2FzIHsxfSIsJ2phdmFzY3JpcHQnLDEwKTsKICoKICog5aaC5p6c5LiN5biM5pyb6KKr6L2s5LmJLOWImeeUqOS4pOS4quaLrOWPtyzlpoI6IGBmb3JtYXRTdHIoImkgY2FuIHNwZWFrIHswfSBzaW5jZSBpIHdhcyB7ezF9IiwnamF2YXNjcmlwdCcsMTApO2AKICoKICovCnV0aWxzLmZvcm1hdFN0ciA9IGZ1bmN0aW9uKHRwbCxvYmopewogIG9iaiA9IHR5cGVvZiBvYmogPT09ICdvYmplY3QnID8gb2JqIDogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsKICByZXR1cm4gdHBsLnJlcGxhY2UoL1x7XHt8XH1cfXxceyhcdyspXH0vZywgZnVuY3Rpb24gKG0sIG4pewogICAgaWYgKG0gPT0gInt7IikgeyByZXR1cm4gInsiOyB9CiAgICBpZiAobSA9PSAifX0iKSB7IHJldHVybiAifSI7IH0KICAgIHJldHVybiBvYmpbbl07CiAgfSk7Cn07Cgp1dGlscy5nZXRQYXJhbUluUXVlcnk9ZnVuY3Rpb24ocXVlcnlTdHIscGFyYW1OYW1lKXsKICAgIHZhciBwYXJhbT1wYXJhbU5hbWUrJz0nCiAgICAgICwgc3RhcnQ9cXVlcnlTdHIuaW5kZXhPZihwYXJhbSkrcGFyYW0ubGVuZ3RoCiAgICAgICwgZW5kPXF1ZXJ5U3RyLmluZGV4T2YoJyYnLHN0YXJ0KTsKICAgIHJldHVybiBlbmQ8c3RhcnQ/cXVlcnlTdHIuc3Vic3RyaW5nKHN0YXJ0KTpxdWVyeVN0ci5zdWJzdHJpbmcoc3RhcnQsZW5kKTsKfTsKCnV0aWxzLm9ic2VydmVET01BdHRyTW9kaWZpZWQgPSAoZnVuY3Rpb24oKXsKICAgIHZhciBNdXRhdGlvbk9ic2VydmVyID0gd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIgfHwgd2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXIsCiAgICAgICAgZXZlbnRMaXN0ZW5lclN1cHBvcnRlZCA9IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyOwoKICAgIHJldHVybiBmdW5jdGlvbihvYmosIGNhbGxiYWNrKXsKICAgICAgICBpZiggTXV0YXRpb25PYnNlcnZlciApewogICAgICAgICAgICAvLyBkZWZpbmUgYSBuZXcgb2JzZXJ2ZXIKICAgICAgICAgICAgdmFyIG9icyA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKG11dGF0aW9ucywgb2JzZXJ2ZXIpewogICAgICAgICAgICAgICAgaWYoIG11dGF0aW9uc1swXS50eXBlID09ICdhdHRyaWJ1dGVzJyApCiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobXV0YXRpb25zWzBdKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIG9icy5vYnNlcnZlKCBvYmosIHsgYXR0cmlidXRlczp0cnVlIH0pOwogICAgICAgIH1lbHNlIGlmKCBldmVudExpc3RlbmVyU3VwcG9ydGVkICl7CiAgICAgICAgICAgIG9iai5hZGRFdmVudExpc3RlbmVyKCdET01BdHRyTW9kaWZpZWQnLCBjYWxsYmFjaywgZmFsc2UpOwogICAgICAgIH0KICAgIH0KfSkoKTsKCnV0aWxzLm9ic2VydmVET01Ob2RlQWRkZWQgPSAoZnVuY3Rpb24oKXsKICAgIHZhciBNdXRhdGlvbk9ic2VydmVyID0gd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIgfHwgd2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXIsCiAgICAgICAgZXZlbnRMaXN0ZW5lclN1cHBvcnRlZCA9IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyOwoKICAgIHJldHVybiBmdW5jdGlvbihvYmosIGNhbGxiYWNrKXsKICAgICAgICBpZiggTXV0YXRpb25PYnNlcnZlciApewogICAgICAgICAgICAvLyBkZWZpbmUgYSBuZXcgb2JzZXJ2ZXIKICAgICAgICAgICAgdmFyIG9icyA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKG11dGF0aW9ucywgb2JzZXJ2ZXIpewogICAgICAgICAgICAgICAgbXV0YXRpb25zLmZvckVhY2goZnVuY3Rpb24obXV0YXRpb24pIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhtdXRhdGlvbik7CiAgICAgICAgICAgICAgICAgIH0pOyAgICAKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIG9icy5vYnNlcnZlKCBvYmosIHsgY2hpbGRMaXN0OnRydWUgfSk7CiAgICAgICAgfWVsc2UgaWYoIGV2ZW50TGlzdGVuZXJTdXBwb3J0ZWQgKXsKICAgICAgICAgICAgb2JqLmFkZEV2ZW50TGlzdGVuZXIoJ0RPTU5vZGVJbnNlcnRlZCcsIGNhbGxiYWNrLCBmYWxzZSk7CiAgICAgICAgfQogICAgfQp9KSgpOwoKdXRpbHMuUmVnZXhTcmNQaWMgPSAvc3JjPSJbXHNcU10rPy5qcGciL2cKCi8vY29uc29sZS5sb2coKG5ldyBEYXRlKCkpLmdldFRpbWUoKSk7Cgp2YXIgJCA9IHdpbmRvdy4kOwp2YXIgXyA9IHRoaXMuXzsKdmFyIHB1cmwgPSB3aW5kb3cucHVybHx8JC51cmw7CgovL+S9v+eUqENhc3BlckpT55qE5qih5ouf55So5oi35pON5L2c77yaIGh0dHA6Ly9jYXNwZXJqcy5vcmcvYXBpLmh0bWwjY2xpZW50LXV0aWxzCi8vdmFyIGNsaWVudCA9IHdpbmRvdy5jcmVhdGUoKTsKCnZhciB1cmwgPSBwdXJsKCk7CnZhciBwYWdlID0gdXJsLnNlZ21lbnQoMSk7Cgp2YXIgcGFnZUlzPXt9CiAgLCAkd2luPSQod2luZG93KQogICwgX2RvYz13aW5kb3cuZG9jdW1lbnQKICAsICRib2R5PSQoX2RvYy5ib2R5KQogICwgX3BhdGg9d2luZG93LmZyYW1lRWxlbWVudD93aW5kb3cuZnJhbWVFbGVtZW50LnNyYy5yZXBsYWNlKC9odHRwcz86XC9cL3d3dy56aGlodS5jb20vLCcnKTp1cmwuZGF0YS5hdHRyWydwYXRoJ10KICAsIGNzcz0nJwogICwgJGg9JCgnaGVhZCcpCiAgLCAkcz0kKCc8c3R5bGU+JywgeyAndHlwZSc6ICd0ZXh0L2NzcycgfSkKICAsIGlQYXRoQW5zd2Vycz1fcGF0aC5pbmRleE9mKCcvYW5zd2VycycpCiAgLCBpUGF0aENvbGxlY3Rpb249X3BhdGguaW5kZXhPZignL2NvbGxlY3Rpb24nKQo7CnBhZ2VJcy5Ib21lPScvJz09X3BhdGg7CnBhZ2VJcy5BbnN3ZXI9MDxfcGF0aC5pbmRleE9mKCcvYW5zd2VyLycpOwpwYWdlSXMuUXVlc3Rpb249IXBhZ2VJcy5BbnN3ZXImJjA9PV9wYXRoLmluZGV4T2YoJy9xdWVzdGlvbi8nKTsKcGFnZUlzLkFuc3dlcnM9MDxpUGF0aEFuc3dlcnMmJl9wYXRoLnN1YnN0cihpUGF0aEFuc3dlcnMpPT0nL2Fuc3dlcnMnOwpwYWdlSXMuQ29sbGVjdGlvbj0wPT1pUGF0aENvbGxlY3Rpb247CnBhZ2VJcy5EZWJ1dHM9MD09X3BhdGguaW5kZXhPZignL2RlYnV0cy8nKTsKcGFnZUlzLk15Q29sbGVjdGlvbj0wPT1fcGF0aC5pbmRleE9mKCcvY29sbGVjdGlvbnMvbWluZScpOwpwYWdlSXMuU2V0dGluZ3NGaWx0ZXI9MD09X3BhdGguaW5kZXhPZignL3NldHRpbmdzL2ZpbHRlcicpCgp2YXIgaT0wCiAgLCAkdXNlcj0kKCcuenUtdG9wLW5hdi11c2VyaW5mbycpLy91c2VyX2F2YXRlcgogICwgej0kdXNlci5sZW5ndGg/JHVzZXIuYXR0cignaHJlZicpOicnCiAgLCAkYmFubmVyPSQoZG9jdW1lbnQuYm9keSkuY2hpbGRyZW4oKS5maXJzdCgpCiAgLCAkbWFpbj0kKCdbcm9sZT1tYWluXScpLy9tYWluCiAgLCBjc3NfQXV0aG9yTGlzdEl0ZW1BPSdwYWRkaW5nOjAgMTBweCAwIDA7JwogICwgY3NzX0F1dGhvckxpc3RJdGVtQV9uYW1lPSdwYWRkaW5nOjAgNXB4OycKOwoKd2luZG93LmlaaGlodSA9IHsKICAgICR3aW46JHdpbgogICwgJGJvZHk6JGJvZHkKICAsICRtYWluOiRtYWluCiAgLCBjb25maWc6JC5leHRlbmQoY2ZnRGVmYXVsdCwgdXRpbHMuZ2V0VmFsdWUoJ2l6aGlodScsY2ZnRGVmYXVsdCkpCn07Cgp2YXIgaXpoSG9tZUxheW91dCA9IHdpbmRvdy5pWmhpaHUuY29uZmlnWydIb21lTGF5b3V0J10KICAsIGl6aEF1dGhvckxpc3QgPSB3aW5kb3cuaVpoaWh1LmNvbmZpZ1snQXV0aG9yTGlzdCddCiAgLCBpemhSaWdodENvbW1lbnQgPSB3aW5kb3cuaVpoaWh1LmNvbmZpZ1snU2hvd0NvbW1lbnQnXQogICwgaXpoUXVpY2tGYXZvID0gd2luZG93LmlaaGlodS5jb25maWdbJ1F1aWNrRmF2byddCiAgLCBpemhBdXRob3JSZWFyID0gd2luZG93LmlaaGlodS5jb25maWdbJ0F1dGhvclJlYXInXQogICwgaXpoSG9tZU5vdGkgPSB3aW5kb3cuaVpoaWh1LmNvbmZpZ1snSG9tZU5vdGknXQogICwgaXpoUXVpY2tCbG9jayA9IHdpbmRvdy5pWmhpaHUuY29uZmlnWydRdWlja0Jsb2NrJ10KICAsIGl6aFRvcE5hdkF1dG9Gb2xkID0gd2luZG93LmlaaGlodS5jb25maWdbJ1RvcE5hdkF1dG9Gb2xkJ10KOwoKdXRpbHMudHJhbnNmZXJPbGRDZmcoKTsKCiRib2R5LmF0dHIoewogICAgJ2l6aEhvbWVMYXlvdXQnIDogaXpoSG9tZUxheW91dD8nMSc6JycKICAsICdpemhBdXRob3JMaXN0JyA6IGl6aEF1dGhvckxpc3Q/JzEnOicnCiAgLCAnaXpoUmlnaHRDb21tZW50JyA6IGl6aFJpZ2h0Q29tbWVudD8nMSc6JycKICAsICdpemhRdWlja0Zhdm8nIDogaXpoUXVpY2tGYXZvPycxJzonJwogICwgJ2l6aEF1dGhvclJlYXInIDogaXpoQXV0aG9yUmVhcj8nMSc6JycKICAsICdpemhIb21lTm90aScgOiBpemhIb21lTm90aT8nMSc6JycKICAsICdpemhRdWlja0Jsb2NrJyA6IGl6aFF1aWNrQmxvY2s/JzEnOicnCiAgLCAnaXpoVG9wTmF2QXV0b0ZvbGQnIDogaXpoVG9wTmF2QXV0b0ZvbGQ/JzEnOicnCn0pOwoKdmFyIF9RdWlja0Jsb2NrID0gbmV3IFF1aWNrQmxvY2sod2luZG93LmlaaGlodSkKICAsIF9RdWlja0Zhdm8gPSBuZXcgUXVpY2tGYXZvKHdpbmRvdy5pWmhpaHUpCiAgLCBfQ29tbWVudCA9IG5ldyBDb21tZW50KHdpbmRvdy5pWmhpaHUpCiAgLCBfTm90aTcgPSBuZXcgTm90aTcod2luZG93LmlaaGlodSkKICAsIF9BbnN3ZXIgPSBuZXcgQW5zd2VyKHdpbmRvdy5pWmhpaHUpCiAgLCBfU2VhcmNoaW5nTGlzdCA9IG5ldyBTZWFyY2hpbmdMaXN0KHdpbmRvdy5pWmhpaHUpCiAgLCBfVG9wTmF2ID0gbmV3IFRvcE5hdih3aW5kb3cuaVpoaWh1KQo7Cgpjc3MrPVsnLnRfc2hvd2ZyYW1le3BhZGRpbmc6MTBweCAxMHB4IDEwcHggMTBweDtiYWNrZ3JvdW5kOiNmMGYwZjA7Ym9yZGVyOjFweCBzb2xpZCAjZmZmO2JveC1zaGFkb3c6MnB4IDVweCAxNXB4ICMzMzM7Ym9yZGVyLXJhZGl1czoxMHB4Oy1tb3otYm94LXNoYWRvdzoycHggNXB4IDE1cHggIzMzMzstbW96LWJvcmRlci1yYWRpdXM6MTBweDstd2Via2l0LWJveC1zaGFkb3c6MnB4IDVweCAxNXB4ICMzMzM7LXdlYmtpdC1ib3JkZXItcmFkaXVzOjEwcHh9I2laaGlodV9ydGpkZGl2e3dpZHRoOjY1MHB4O2hlaWdodDo0MzdweH0jaVpoaWh1X3NldGRpdnt3aWR0aDo2MDBweDtoZWlnaHQyOjI5NXB4fS50X3NldGRpdntwYWRkaW5nLWJvdHRvbToxMHB4O2JhY2tncm91bmQ6I2ZjZmNmYzt3aWR0aDoxMDAlO2hlaWdodDoxMDAlfS50X3NldF90Yntmb250LWZhbWlseToiTHVjaWRhIFNhbnMgVW5pY29kZSIsIkx1Y2lkYSBHcmFuZGUiLFNhbnMtU2VyaWYgIWltcG9ydGFudDtmb250LXNpemU6MTJweCAhaW1wb3J0YW50O3RleHQtc2hhZG93Om5vbmUgIWltcG9ydGFudDtib3JkZXItY29sbGFwc2U6Y29sbGFwc2UgIWltcG9ydGFudDttYXJnaW46MCAhaW1wb3J0YW50O2xpbmUtaGVpZ2h0OjEyMCV9LnRfc2V0X3RiIHRoZWFkIHRke2JhY2tncm91bmQ6IzAwODBjMDtjb2xvcjojZmZmO2JvcmRlcjpub25lICFpbXBvcnRhbnQ7cGFkZGluZzo0cHggOHB4IDRweCAhaW1wb3J0YW50O2JvcmRlci1yYWRpdXMtdG9wbGVmdDoxMHB4O2JvcmRlci1yYWRpdXMtdG9wcmlnaHQ6MTBweDstbW96LWJvcmRlci1yYWRpdXMtdG9wbGVmdDoxMHB4Oy1tb3otYm9yZGVyLXJhZGl1cy10b3ByaWdodDoxMHB4Oy13ZWJraXQtYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czoxMHB4Oy13ZWJraXQtYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6MTBweH0udF9zZXRfdGIgdGgsLnRfc2V0X3RiIHRke3BhZGRpbmc6OHB4O2JhY2tncm91bmQ6I2U4ZWRmZjtib3JkZXI6bm9uZSAhaW1wb3J0YW50O2JvcmRlci10b3A6MnB4IHNvbGlkICNmY2ZjZmMgIWltcG9ydGFudDtjb2xvcjojNjY5O2xpbmUtaGVpZ2h0OjEuMWVtICFpbXBvcnRhbnR9LnRfc2V0X3RiIHRkIGlucHV0LC50X3NldF90YiB0ZCB0ZXh0YXJlYXtmb250LXNpemU6MTJweCAhaW1wb3J0YW50O3BhZGRpbmc6MCAhaW1wb3J0YW50fS50X3NldF90YiB0Ym9keSB0cjpob3ZlciB0aCwudF9zZXRfdGIgdGJvZHkgdHI6aG92ZXIgdGR7YmFja2dyb3VuZDojZDBkYWZkfS50X3NldF90YiB0Zm9vdCB0ZHtib3JkZXItcmFkaXVzLWJvdHRvbWxlZnQ6MTBweDtib3JkZXItcmFkaXVzLWJvdHRvbXJpZ2h0OjEwcHg7LW1vei1ib3JkZXItcmFkaXVzLWJvdHRvbWxlZnQ6MTBweDstbW96LWJvcmRlci1yYWRpdXMtYm90dG9tcmlnaHQ6MTBweDstd2Via2l0LWJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6MTBweDstd2Via2l0LWJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOjEwcHh9LnRfc2V0X2Z0e2ZvbnQtZmFtaWx5OkFyaWFsLHNhbnMtc2VyaWYs54C577+977+9ICFpbXBvcnRhbnQ7Zm9udC1zaXplOjEycHggIWltcG9ydGFudDtmb250LXdlaWdodDpib2xkICFpbXBvcnRhbnQ7dGV4dC1zaGFkb3c6bm9uZSAhaW1wb3J0YW50O21hcmdpbi10b3A6MTVweCAhaW1wb3J0YW50fS50X3NldF9mdCBhe3RleHQtZGVjb3JhdGlvbjpub25lO2NvbG9yOiMwMDB9LnRfc2V0YnRue2JvcmRlcjoxcHggc29saWQgYmxhY2s7cGFkZGluZzoycHg7Y3Vyc29yOnBvaW50ZXI7YmFja2dyb3VuZDojZmZmO2NvbG9yOiMwMDgwYzB9LnRfc2V0ZnRidG4gc3BhbntwYWRkaW5nOjJweCAxMHB4IDJweCAxMHB4ICFpbXBvcnRhbnR9LnRfcnRqZGJ0bntiYWNrZ3JvdW5kOiMwMDgwYzAgIWltcG9ydGFudDtjb2xvcjojZmZmICFpbXBvcnRhbnR9LnRfcnRqZHR4dHBvc3twYWRkaW5nLXRvcDo1cHh9I2laaGlodV9ydGhpbnR7Zm9udC1mYW1pbHk6QXJpYWwsc2Fucy1zZXJpZizngLnvv73vv70gIWltcG9ydGFudDtmb250LXNpemU6MTZweCAhaW1wb3J0YW50O2ZvbnQtd2VpZ2h0OmJvbGQ7cGFkZGluZzo1cHggMTBweCA1cHggMTBweDtwb3NpdGlvbjpmaXhlZDt0b3A6MjBweDtib3JkZXItcmFkaXVzOjVweDstbW96LWJvcmRlci1yYWRpdXM6NXB4Oy13ZWJraXQtYm9yZGVyLXJhZGl1czo1cHg7ZGlzcGxheTppbmxpbmUtYmxvY2s7b3BhY2l0eTowLjd9LnRfcnRoaW50X257Y29sb3I6I2ZmZiAhaW1wb3J0YW50O2JhY2tncm91bmQ6IzAwMCAhaW1wb3J0YW50fS50X3J0aGludF9me2JhY2tncm91bmQ6Izg4MDAwMCAhaW1wb3J0YW50O2NvbG9yOiNmZmZmZGQgIWltcG9ydGFudH0udF91cGJ0bntiYWNrZ3JvdW5kOiMwMDgwYzAgIWltcG9ydGFudDtjb2xvcjojZmZmICFpbXBvcnRhbnR9LnRfdXBpbmZve2hlaWdodDoxMjBweCAhaW1wb3J0YW50O3ZlcnRpY2FsLWFsaWduOnRleHQtdG9wICFpbXBvcnRhbnR9I2l6aF91cGRhdGVkaXYgdGh7Ym9yZGVyLXJpZ2h0OjJweCBzb2xpZCAjZmNmY2ZjICFpbXBvcnRhbnR9I2l6aF91cGRhdGVkaXYgdGZvb3QgdGR7Ym9yZGVyOm5vbmUgIWltcG9ydGFudDtib3JkZXItdG9wOjJweCBzb2xpZCAjZmNmY2ZjICFpbXBvcnRhbnQ7Zm9udC1mYW1pbHk6QXJpYWwsc2Fucy1zZXJpZizngLnvv73vv70gIWltcG9ydGFudDtmb250LXNpemU6MTJweCAhaW1wb3J0YW50O2ZvbnQtc3R5bGU6bm9ybWFsICFpbXBvcnRhbnQ7dGV4dC1zaGFkb3c6bm9uZSAhaW1wb3J0YW50fS50X3R4dHNob3d7dGV4dC1hbGlnbjpjZW50ZXI7YmFja2dyb3VuZDojMDA4MGMwO2NvbG9yOiNmMGYwZjA7dXNlci1zZWxlY3Q6bm9uZTstbW96LXVzZXItc2VsZWN0Om5vbmV9LnRfZnJzaG93e2ZvbnQtc2l6ZToxLjJlbTtwb3NpdGlvbjpmaXhlZDt6LWluZGV4Ojk5OTk5O3RvcDo0NXB4O3dpZHRoOjIwMHB4O29wYWNpdHk6MC45O2N1cnNvcjpwb2ludGVyfS50X3Rib3h7cGFkZGluZzoxMHB4O3Bvc2l0aW9uOnJlbGF0aXZlO2JvcmRlcjoxcHggc29saWQgI2YwZjBmMDtsaW5lLWhlaWdodDoyMHB4OypoZWlnaHQ6MSU7d2lkdGg6MjAwcHg7LW1vei1ib3gtc2hhZG93OjJweCA1cHggMTVweCAjMzMzOy1tb3otYm9yZGVyLXJhZGl1czo3cHg7LXdlYmtpdC1ib3gtc2hhZG93OjJweCA1cHggMTVweCAjMzMzOy13ZWJraXQtYm9yZGVyLXJhZGl1czo3cHh9LnRfdGJveCBze3Bvc2l0aW9uOmFic29sdXRlO3RvcDotMjBweDtsZWZ0OjE2MHB4O2Rpc3BsYXk6YmxvY2s7aGVpZ2h0OjA7d2lkdGg6MDtmb250LXNpemU6MDtsaW5lLWhlaWdodDowO2JvcmRlci1jb2xvcjp0cmFuc3BhcmVudCB0cmFuc3BhcmVudCAjZjBmMGYwIHRyYW5zcGFyZW50O2JvcmRlci1zdHlsZTpkYXNoZWQgZGFzaGVkIHNvbGlkIGRhc2hlZDtib3JkZXItd2lkdGg6MTBweH0udF90Ym94IGl7cG9zaXRpb246YWJzb2x1dGU7dG9wOi05cHg7bGVmdDotMTBweDtkaXNwbGF5OmJsb2NrO2hlaWdodDowO3dpZHRoOjA7Zm9udC1zaXplOjA7bGluZS1oZWlnaHQ6MDtib3JkZXItY29sb3I6dHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgIzAwODBjMCB0cmFuc3BhcmVudDtib3JkZXItc3R5bGU6ZGFzaGVkIGRhc2hlZCBzb2xpZCBkYXNoZWQ7Ym9yZGVyLXdpZHRoOjEwcHh9QG1lZGlhIHNjcmVlbiBhbmQgKC13ZWJraXQtbWluLWRldmljZS1waXhlbC1yYXRpbzowKXsjaVpoaWh1X3J0amRkaXZ7aGVpZ2h0OjQxN3B4fSNpWmhpaHVfc2V0ZGl2e2hlaWdodDI6Mjk1cHh9I2l6aF91cGRhdGVkaXZ7aGVpZ2h0OjMxNXB4fX0nCiAgICAgLCcnXS5qb2luKCdcbicpOwppZihwYWdlSXMuUXVlc3Rpb24mJml6aEF1dGhvckxpc3QpewogICAgY3NzKz1bJ2Rpdi51bm97cG9zaXRpb246YWJzb2x1dGU7bGVmdDowO2JvcmRlcjoxcHggc29saWQgIzA3NzFDMTtib3JkZXItcmlnaHQtd2lkdGg6MDtib3JkZXItdG9wLXJpZ2h0LXJhZGl1czo2cHh9JwogICAgICAgICAsJ2Rpdi51bm8gLmZyYW1le292ZXJmbG93LXg6aGlkZGVuO292ZXJmbG93LXk6YXV0bztkaXJlY3Rpb246cnRsfScKICAgICAgICAgLCdkaXYudW5vIHNwYW4ubWVULGRpdi51bm8gc3Bhbi5tZUIsZGl2LnVubyB1bC5wcCBsaSBzcGFuLm1le3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjA7ZGlzcGxheTpibG9jaztoZWlnaHQ6MXB4O3dpZHRoOjFweDtsaW5lLWhlaWdodDoxcHg7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudDtib3JkZXItc3R5bGU6c29saWQ7Ym9yZGVyLWNvbG9yOnRyYW5zcGFyZW50O30nCiAgICAgICAgICwnZGl2LnVubyBzcGFuLm1lVHtib3JkZXItd2lkdGg6NnB4IDRweDtib3JkZXItdG9wLXdpZHRoOjBweDtib3JkZXItYm90dG9tLWNvbG9yOiNmZmY7fScKICAgICAgICAgLCdkaXYudW5vIHNwYW4ubWVCe2JvcmRlci13aWR0aDo2cHggNHB4O2JvcmRlci1ib3R0b20td2lkdGg6MHB4O2JvcmRlci10b3AtY29sb3I6I2ZmZjttYXJnaW4tdG9wOi03cHg7fScKICAgICAgICAgLCdkaXYudW5vIHVse2JhY2tncm91bmQtY29sb3I6IzA3NzFDMTtwYWRkaW5nOjA7bWFyZ2luOjA7ZGlyZWN0aW9uOmx0cn0nCiAgICAgICAgICwnZGl2LnVubyB1bCBsaXtkaXNwbGF5OmJsb2NrO2xpc3Qtc3R5bGUtdHlwZTpub25lO21hcmdpbjowO3BhZGRpbmc6MDt3aGl0ZS1zcGFjZTpub3dyYXA7fScKICAgICAgICAgLCdkaXYudW5vIHVsIGxpIGF7ZGlzcGxheTpibG9jazt9ZGl2LnVubyBsaSBhLnNlbHt0ZXh0LWRlY29yYXRpb246bm9uZTt9JwogICAgICAgICAsJ2Rpdi51bm8gdWwgbGkgYXsnK2Nzc19BdXRob3JMaXN0SXRlbUErJ30nCiAgICAgICAgICwnZGl2LnVubyB1bC5wcCBsaSBzcGFuLm1le3Bvc2l0aW9uOnN0YXRpYzttYXJnaW46NnB4IC04cHg7Ym9yZGVyLXdpZHRoOjRweCA2cHg7Ym9yZGVyLXJpZ2h0LWNvbG9yOiNmZmY7ZmxvYXQ6cmlnaHQ7fScKICAgICAgICAgLCdkaXYudW5vIGxpIGEgc3Bhbi5uYW1le3RleHQtYWxpZ246cmlnaHQ7ZGlzcGxheTpibG9jazsnK2Nzc19BdXRob3JMaXN0SXRlbUFfbmFtZSsnYmFja2dyb3VuZC1jb2xvcjojZmZmO31kaXYudW5vIGxpIGEuc2VsIHNwYW4ubmFtZXtjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzA3NzFDMTt9JwogICAgICAgICAsJ2Rpdi51bm8gbGkgYSBzcGFuLm5hbWUubm9uYW1le2NvbG9yOiMwMDA7fScKICAgICAgICAgLCdkaXYudW5vIGxpIGEgc3Bhbi5uYW1lLmNvbGxhcHNlZHtjb2xvcjojOTk5OTk5O30nCiAgICAgICAgICwnZGl2LnVubyBsaSBhIHNwYW4ubmFtZS5mcmllbmR7Zm9udC1zdHlsZTppdGFsaWM7fScKICAgICAgICAgLCdkaXYudW5vIGxpIHNwYW4uaHB7YmFja2dyb3VuZC1jb2xvcjojOTk5OTk5O3Bvc2l0aW9uOnJlbGF0aXZlO2Zsb2F0OnJpZ2h0O21hcmdpbi10b3A6LTJweDtsaW5lLWhlaWdodDoycHg7aGVpZ2h0OjJweDt9JwogICAgICAgICAsJ2Rpdi51bm8gdGFibGUucGx1c3tmbG9hdDpyaWdodDttYXJnaW46N3B4IC05cHg7aGVpZ2h0OjdweDtib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7Ym9yZGVyLXN0eWxlOmhpZGRlbjt9ZGl2LnVubyB0YWJsZS5wbHVzIHRke2JvcmRlcjoxcHggc29saWQgI2ZmZjt3aWR0aDoxcHg7aGVpZ2h0OjFweDt9JwogICAgICAgICAsJ2Rpdi51bm8gYS5zZWwgdGFibGUucGx1c3t9ZGl2LnVubyBhLnNlbCB0YWJsZS5wbHVzIHRke30nCiAgICAgICAgICwnZGl2LnVubyBsaSBhIHNwYW4uZnVuY3t0ZXh0LWFsaWduOmNlbnRlcjt9JwogICAgICAgICAsJ2Rpdi5pemgtYW5zd2VyLXByZXZpZXd7cG9zaXRpb246Zml4ZWQ7bWFyZ2luLXRvcDoxcHg7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JvcmRlcjoxcHggc29saWQgIzA3NzFDMTtib3JkZXItdG9wLXdpZHRoOjIycHg7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6NnB4O2JveC1zaGFkb3c6NXB4IDVweCA1cHggIzc3Nzt9JwogICAgICAgICAsJ2Rpdi5pemgtYW5zd2VyLXByZXZpZXcgLnptLWVkaXRhYmxlLWNvbnRlbnR7dG9wOjA7Ym90dG9tOjA7bGVmdDowO3JpZ2h0OjA7b3ZlcmZsb3cteTphdXRvO3BhZGRpbmc6MTBweDt9JwogICAgICAgICAsJ2Rpdi5pemgtYW5zd2VyLXByZXZpZXcgaW1nLnptLWxpc3QtYXZhdGFye3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjEwcHg7dG9wOi0zNXB4O2JvcmRlcjoxcHggc29saWQgIzA3NzFDMTtib3JkZXItcmFkaXVzOjZweDt9JwogICAgICAgICAsJ2Rpdi5pemgtYW5zd2VyLXByZXZpZXcgc3Bhbi5jb21tZW50e3Bvc2l0aW9uOmFic29sdXRlO3RvcDotMThweDtsaW5lLWhlaWdodDoxOHB4O2JvcmRlci10b3AtcmlnaHQtcmFkaXVzOjNweDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7cGFkZGluZzowIDVweDt9JwogICAgICAgICAsJyddLmpvaW4oJ1xuJyk7Cn0KY3NzKz1bJy56LWljb24taXpoLWZvbGR7YmFja2dyb3VuZC1wb3NpdGlvbjotMTczcHggLTEwN3B4O3dpZHRoOjE1cHg7aGVpZ2h0OjE1cHg7fScKICAgICAsJyddLmpvaW4oJ1xuJyk7CmNzcys9WycudF9zZXRfdGJ7Zm9udC1mYW1pbHk6Ikx1Y2lkYSBTYW5zIFVuaWNvZGUiLCJMdWNpZGEgR3JhbmRlIixTYW5zLVNlcmlmICFpbXBvcnRhbnQ7Zm9udC1zaXplOjEycHggIWltcG9ydGFudDt0ZXh0LXNoYWRvdzpub25lICFpbXBvcnRhbnQ7Ym9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlICFpbXBvcnRhbnQ7bWFyZ2luOjAgIWltcG9ydGFudDtsaW5lLWhlaWdodDoxMjAlfScKICAgICAsJy50X3NldF90YiB0aGVhZCB0ZHtiYWNrZ3JvdW5kOiMwMDgwYzA7Y29sb3I6I2ZmZjtib3JkZXI6bm9uZSAhaW1wb3J0YW50O3BhZGRpbmc6NHB4IDhweCA0cHggIWltcG9ydGFudDtib3JkZXItdG9wLWxlZnQtcmFkaXVzOjZweDtib3JkZXItdG9wLXJpZ2h0LXJhZGl1czo2cHh9JwogICAgICwnLnRfc2V0X3RiIHRoLC50X3NldF90YiB0ZHtwYWRkaW5nOjhweDtiYWNrZ3JvdW5kOiNlN2YzZjk7Ym9yZGVyOm5vbmUgIWltcG9ydGFudDtib3JkZXItdG9wOjJweCBzb2xpZCAjZmNmY2ZjICFpbXBvcnRhbnQ7Y29sb3I6IzY2OTtsaW5lLWhlaWdodDoxLjFlbSAhaW1wb3J0YW50fScKICAgICAsJy50X3NldF90YiB0ZCBpbnB1dCwudF9zZXRfdGIgdGQgdGV4dGFyZWF7Zm9udC1zaXplOjEycHggIWltcG9ydGFudDtwYWRkaW5nOjAgIWltcG9ydGFudH0nCiAgICAgLCcudF9zZXRfdGIgdGJvZHkgdHI6aG92ZXIgdGgsLnRfc2V0X3RiIHRib2R5IHRyOmhvdmVyIHRke2JhY2tncm91bmQ6I2QwZGFmZH0nCiAgICAgLCcudF9zZXRfdGIgdGZvb3QgdGR7Ym9yZGVyLXJhZGl1cy1ib3R0b21sZWZ0OjEwcHg7Ym9yZGVyLXJhZGl1cy1ib3R0b21yaWdodDoxMHB4Oy1tb3otYm9yZGVyLXJhZGl1cy1ib3R0b21sZWZ0OjEwcHg7LW1vei1ib3JkZXItcmFkaXVzLWJvdHRvbXJpZ2h0OjEwcHg7LXdlYmtpdC1ib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOjEwcHg7LXdlYmtpdC1ib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czoxMHB4fScKICAgICAsJy50X3NldF90YiB0ZHt3aGl0ZS1zcGFjZTpub3dyYXA7fScKICAgICAsJy50X3NldF90YiB0ZCAuaWNvbi1oZWxwe2Zsb2F0OnJpZ2h0O30nCiAgICAgLCcnXS5qb2luKCdcbicpOwpjc3MrPVsnLml6aF9ib3hTaGFkb3d7Ym94LXNoYWRvdzogNXB4IDVweCAzcHggMHB4ICM5OTkgIWltcG9ydGFudDt9JwogICAgICwnI3poLXF1ZXN0aW9uLW1ldGEtd3JhcC5pemhfbm9Cb3JkZXJ7Ym9yZGVyLWJvdHRvbS1jb2xvcjp0cmFuc3BhcmVudCAhaW1wb3J0YW50O30nCiAgICAgLCcjemgtcXVlc3Rpb24tZmlsdGVyLXdyYXAuaXpoX25vQm9yZGVye2JvcmRlci10b3AtY29sb3I6dHJhbnNwYXJlbnQgIWltcG9ydGFudDt9JwogICAgICwnYS5pemgtYnV0dG9uLm9ue2NvbG9yOiMyMjU1OTk7dGV4dC1zaGFkb3c6MCAwIDFweCAjMjI1NTk5O30nCiAgICAgLCdhLml6aC1idXR0b24gLnpnLWljb257b3BhY2l0eTowLjU7fScKICAgICAsJ2EuaXpoLWJ1dHRvbi5vbiAuemctaWNvbntvcGFjaXR5OjE7fScKICAgICAsJ2EuaXpoLWJ1dHRvbi5vZmZ7Y29sb3I6I2VlZTt9JwogICAgICwnYS5pemgtYnV0dG9uLm9mZiAuemctaWNvbntvcGFjaXR5OjAuMjt9JwogICAgICwnLml6aC1mZWVkcy1maWx0ZXJ7fScKICAgICAsJy5pemgtZmVlZHMtZmlsdGVyIC5pemgtZmVlZHMtZmlsdGVyLW9wdGlvbntvcGFjaXR5OjAuNTtjb2xvcjojOTk5OTk5O3BhZGRpbmctbGVmdDo1cHg7dGV4dC1kZWNvcmF0aW9uOm5vbmU7Y3Vyc29yOnBvaW50ZXI7fScKICAgICAsJy5pemgtZmVlZHMtZmlsdGVyIC5pemgtZmVlZHMtZmlsdGVyLW9wdGlvbiBpe2JhY2tncm91bmQtcG9zaXRpb246LTE4M3B4IC00cHg7fScKICAgICAsJy5pemgtZmVlZHMtZmlsdGVyIC5pemgtZmVlZHMtZmlsdGVyLW9wdGlvbi5vbntvcGFjaXR5OjE7Y29sb3I6IzIyNTU5OTt9JwogICAgICwnLml6aC1mZWVkcy1maWx0ZXIgLml6aC1mZWVkcy1maWx0ZXItb3B0aW9uLm9uIGl7YmFja2dyb3VuZC1wb3NpdGlvbjotMTgzcHggLTI0cHg7fScKICAgICAsJyddLmpvaW4oJ1xuJyk7CmlmKGl6aEhvbWVMYXlvdXQpewogICAgY3NzICs9ICBbJyN6aC1xdWVzdGlvbi1saXN0IHsgcGFkZGluZy1sZWZ0OjMwcHghaW1wb3J0YW50IH0nCiAgICAgICAgICAgICwnI3poLW1haW4tZmVlZC1mcmVzaC1idXR0b24geyBtYXJnaW4tbGVmdDotMzBweCFpbXBvcnRhbnQgfScKICAgICAgICAgICAgLCcuZmVlZC1pdGVtIHsnCiAgICAgICAgICAgICwnICAgIGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNFRUUhaW1wb3J0YW50OycKICAgICAgICAgICAgLCcgICAgbWFyZ2luLXRvcDotMXB4IWltcG9ydGFudCcKICAgICAgICAgICAgLCd9JwogICAgICAgICAgICAsJy5mZWVkLWl0ZW0gLmF2YXRhciB7IGRpc3BsYXk6bm9uZSFpbXBvcnRhbnQgfScKICAgICAgICAgICAgLCcnCiAgICAgICAgICAgICwnLmZlZWQtbWFpbiwuZmVlZC1pdGVtLmNvbWJpbmUgeyBtYXJnaW4tbGVmdDowIWltcG9ydGFudCB9JwogICAgICAgICAgICAsJy5mZWVkLWl0ZW0tcSB7IG1hcmdpbi1sZWZ0Oi0zMHB4IWltcG9ydGFudDtwYWRkaW5nLWxlZnQ6MCFpbXBvcnRhbnQgfScKICAgICAgICAgICAgLCcnCiAgICAgICAgICAgICx3aW5kb3cuaVpoaWh1LkNvbW1lbnQuUmlnaHRDb21tZW50ID8gJycgOiAnLmZlZWQtaXRlbS1hIC56bS1jb21tZW50LWJveCB7IG1heC13aWR0aDo2MDJweCFpbXBvcnRhbnQgfScKICAgICAgICAgICAgLHdpbmRvdy5pWmhpaHUuQ29tbWVudC5SaWdodENvbW1lbnQgPyAnJyA6ICcuZmVlZC1pdGVtLXEgLnptLWNvbW1lbnQtYm94IHsgbWF4LXdpZHRoOjYzMnB4IWltcG9ydGFudDsgd2lkdGg6NjMycHghaW1wb3J0YW50IH0nCiAgICAgICAgICAgICwnJwogICAgICAgICAgICAsJy56bS10YWctZWRpdG9yLCcKICAgICAgICAgICAgLCcjemgtcXVlc3Rpb24tdGl0bGUsJwogICAgICAgICAgICAsJyN6aC1xdWVzdGlvbi1kZXRhaWwsJwogICAgICAgICAgICAsJyN6aC1xdWVzdGlvbi1tZXRhLXdyYXAsJwogICAgICAgICAgICAsJy56aC1hbnN3ZXJzLXRpdGxlLCcKICAgICAgICAgICAgLCcjemgtcXVlc3Rpb24tZmlsdGVyLXdyYXAgeycKICAgICAgICAgICAgLCcgICAgbWFyZ2luLWxlZnQ6LTMycHghaW1wb3J0YW50JwogICAgICAgICAgICAsJ30nCiAgICAgICAgICAgICwnJwogICAgICAgICAgICAsJyN6aC1xdWVzdGlvbi1sb2ctcGFnZS13cmFwIC56bS10YWctZWRpdG9yLCcKICAgICAgICAgICAgLCcjemgtcXVlc3Rpb24tbG9nLXBhZ2Utd3JhcCAjemgtcXVlc3Rpb24tdGl0bGUgeycKICAgICAgICAgICAgLCcgICAgbWFyZ2luLWxlZnQ6MCAhaW1wb3J0YW50JwogICAgICAgICAgICAsJ30nCiAgICAgICAgICAgICwnJwogICAgICAgICAgICAsJy56aC1hbnN3ZXJzLXRpdGxlLCcKICAgICAgICAgICAgLCcjemgtcXVlc3Rpb24tZmlsdGVyLXdyYXAgeycKICAgICAgICAgICAgLCcgICAgYm9yZGVyLWJvdHRvbToxcHggc29saWQgI0VFRSFpbXBvcnRhbnQ7JwogICAgICAgICAgICAsJyAgICB6LWluZGV4OjEwMDAhaW1wb3J0YW50JwogICAgICAgICAgICAsJ30nCiAgICAgICAgICAgICwnJwogICAgICAgICAgICAsJyN6aC1xdWVzdGlvbi1tZXRhLXdyYXAgeycKICAgICAgICAgICAgLCcgICAgbWFyZ2luLWJvdHRvbTowIWltcG9ydGFudDsnCiAgICAgICAgICAgICwnICAgIHBhZGRpbmctYm90dG9tOjEwcHghaW1wb3J0YW50OycKICAgICAgICAgICAgLCcgICAgYm9yZGVyLWJvdHRvbToxcHggc29saWQgI0VFRSFpbXBvcnRhbnQnCiAgICAgICAgICAgICwnfScKICAgICAgICAgICAgLCcnCiAgICAgICAgICAgICwnI3poLXF1ZXN0aW9uLWFuc3dlci13cmFwIHsgbWFyZ2luLXRvcDotMXB4IWltcG9ydGFudCB9JwogICAgICAgICAgICAsJycKICAgICAgICAgICAgLCcjemgtcXVlc3Rpb24tY29sbGFwc2VkLXdyYXAsI3poLXF1ZXN0aW9uLWFuc3dlci13cmFwIHsgYm9yZGVyOm5vbmUhaW1wb3J0YW50IH0nCiAgICAgICAgICAgICwnLnp1LXF1ZXN0aW9uLWNvbGxhcC10aXRsZSB7IGJvcmRlci10b3A6MXB4IHNvbGlkICNFRUUhaW1wb3J0YW50IH0nCiAgICAgICAgICAgICwnI3poLXF1ZXN0aW9uLWNvbGxhcHNlZC13cmFwPmRpdjpsYXN0LWNoaWxkLC56bS1pdGVtLWFuc3dlcjpsYXN0LWNoaWxkIHsgYm9yZGVyLWJvdHRvbToxcHggc29saWQgI0VFRSFpbXBvcnRhbnQgfScKICAgICAgICAgICAgLCcnCiAgICAgICAgICAgICwnLnp1LWF1dG9oaWRlLCcKICAgICAgICAgICAgLCcuem0tY29tbWVudC1vcC1saW5rLCcKICAgICAgICAgICAgLCcuem0tc2lkZS10cmVuZC1kZWwsJwogICAgICAgICAgICAsJy51bnBpbiB7JwogICAgICAgICAgICAsJyAgICB2aXNpYmlsaXR5OnZpc2libGUhaW1wb3J0YW50OycKICAgICAgICAgICAgLCcgICAgb3BhY2l0eTowOycKICAgICAgICAgICAgLCd9JwogICAgICAgICAgICAsJy5mZWVkLWl0ZW06aG92ZXIgLnp1LWF1dG9oaWRlLCcKICAgICAgICAgICAgLCcuem0taXRlbS1hbnN3ZXIgLnp1LWF1dG9oaWRlLCcKICAgICAgICAgICAgLCcuem0taXRlbS1jb21tZW50OmhvdmVyIC56bS1jb21tZW50LW9wLWxpbmssJwogICAgICAgICAgICAsJy56bS1zaWRlLXRyZW5kLXJvdzpob3ZlciAuem0tc2lkZS10cmVuZC1kZWwsJwogICAgICAgICAgICAsJy56bS1zaWRlLW5hdi1saTpob3ZlciAudW5waW4geycKICAgICAgICAgICAgLCcgICAgb3BhY2l0eToxOycKICAgICAgICAgICAgLCd9JwogICAgICAgICAgICAsJy56bS1pdGVtLXZvdGUtY291bnQ6aG92ZXIsLnptLXZvdGViYXIgYnV0dG9uOmhvdmVyeycKICAgICAgICAgICAgLCcgICAgYmFja2dyb3VuZDojYTZjZTU2IWltcG9ydGFudDsnCiAgICAgICAgICAgICwnICAgIGNvbG9yOiMzRTVFMDAgIWltcG9ydGFudCcKICAgICAgICAgICAgLCd9JwogICAgICAgICAgICAsJycKICAgICAgICAgICAgLCdhLGE6aG92ZXIsJwogICAgICAgICAgICAsJ2ksJwogICAgICAgICAgICAsJy56dS1hdXRvaGlkZSwnCiAgICAgICAgICAgICwnLnptLXZvdGViYXIgYnV0dG9uLCcKICAgICAgICAgICAgLCcuem0taXRlbS1jb21tZW50OmhvdmVyIC56bS1jb21tZW50LW9wLWxpbmssJwogICAgICAgICAgICAsJy56bS1jb21tZW50LW9wLWxpbmssJwogICAgICAgICAgICAsJy56bS1zaWRlLXRyZW5kLXJvdzpob3ZlciAuem0tc2lkZS10cmVuZC1kZWwsJwogICAgICAgICAgICAsJy56bS1zaWRlLXRyZW5kLWRlbCwnCiAgICAgICAgICAgICwnLnptLXNpZGUtbmF2LWxpLCcKICAgICAgICAgICAgLCcuenUtbWFpbi1mZWVkLWZyZXNoLWJ1dHRvbiwnCiAgICAgICAgICAgICwnLnpnLWljb24sJwogICAgICAgICAgICAsJy56bS1zaWRlLW5hdi1saTpob3ZlciAuemctaWNvbiwnCiAgICAgICAgICAgICwnLnptLXNpZGUtbmF2LWxpOmhvdmVyIGksJwogICAgICAgICAgICAsJy51bnBpbiwnCiAgICAgICAgICAgICwnLnptLXNpZGUtbmF2LWxpOmhvdmVyIC51bnBpbiB7JwogICAgICAgICAgICAsJyAgICAtbW96LXRyYW5zaXRpb246Y29sb3IgLjJzIGxpbmVhcixvcGFjaXR5IC4xNXMgbGluZWFyLGJhY2tncm91bmQtY29sb3IgLjJzIGxpbmVhcixiYWNrZ3JvdW5kLXBvc2l0aW9uIC4ycyBsaW5lYXIgLjFzOycKICAgICAgICAgICAgLCcgICAgLXdlYmtpdC10cmFuc2l0aW9uOmNvbG9yIC4ycyBsaW5lYXIsb3BhY2l0eSAuMTVzIGxpbmVhcixiYWNrZ3JvdW5kLWNvbG9yIC4ycyBsaW5lYXIsYmFja2dyb3VuZC1wb3NpdGlvbiAuMnMgbGluZWFyIC4xczsnCiAgICAgICAgICAgICwnICAgIHRyYW5zaXRpb246Y29sb3IgLjJzIGxpbmVhcixvcGFjaXR5IC4xNXMgbGluZWFyLGJhY2tncm91bmQtY29sb3IgLjJzIGxpbmVhcixiYWNrZ3JvdW5kLXBvc2l0aW9uIC4ycyBsaW5lYXIgLjFzOycKICAgICAgICAgICAgLCd9JwogICAgICAgICAgICAsJycKICAgICAgICAgICAgLCdoM3sgbGluZS1oZWlnaHQ6MjVweCB9JwogICAgICAgICAgICAsJy56dS1mb290ZXItaW5uZXIge3BhZGRpbmc6MTVweCAwIWltcG9ydGFudH0nCiAgICAgICAgICAgICwnLnptLXNpZGUtcGlubmVkLXRvcGljcyAuem0tc2lkZS1uYXYtbGl7ZmxvYXQ6bGVmdDtwYWRkaW5nLXJpZ2h0OjMwcHghaW1wb3J0YW50fScKICAgICAgICAgICAgLCcuem0tc2lkZS1saXN0LWNvbnRlbnR7Y2xlYXI6Ym90aH0nCiAgICAgICAgICAgICwnLnVucGlueyBkaXNwbGF5OmlubGluZS1ibG9jayFpbXBvcnRhbnQgfScKICAgICAgICAgICAsJyddLmpvaW4oJ1xuJyk7Cn0KCnZhciBjc3NfY29tbWVudD0nJzsKaWYocGFnZUlzLkhvbWV8fHBhZ2VJcy5RdWVzdGlvbnx8cGFnZUlzLkFuc3dlcil7CiAgICBjc3NfY29tbWVudCA9IHdpbmRvdy5pWmhpaHUuQ29tbWVudC5jc3M7Cn0KCmNzcyArPSB3aW5kb3cuaVpoaWh1LkFuc3dlci5jc3M7CgppZih3aW5kb3cuaVpoaWh1LlF1aWNrRmF2byl7CiAgICBjc3MgKz0gd2luZG93LmlaaGlodS5RdWlja0Zhdm8uY3NzOwp9CmlmKHdpbmRvdy5pWmhpaHUuUXVpY2tCbG9jayl7CiAgICBjc3MgKz0gd2luZG93LmlaaGlodS5RdWlja0Jsb2NrLmNzczsKfQppZih3aW5kb3cuaVpoaWh1Lk5vdGk3KXsKICAgIGNzcyArPSB3aW5kb3cuaVpoaWh1Lk5vdGk3LmNzczsKICAgIHdpbmRvdy5pWmhpaHUuTm90aTcuZW5oYW5jZSgpOwp9CnZhciBoZWFkcyA9IF9kb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKTsKaWYgKGhlYWRzLmxlbmd0aCA+IDApIHsKICAgIHZhciBub2RlID0gX2RvYy5jcmVhdGVFbGVtZW50KCJzdHlsZSIpOwogICAgbm9kZS50eXBlID0gInRleHQvY3NzIjsKICAgIG5vZGUuaWQgPSAiaXpoQ1NTX21haW4iOwogICAgbm9kZS5hcHBlbmRDaGlsZChfZG9jLmNyZWF0ZVRleHROb2RlKGNzcykpOwogICAgaGVhZHNbMF0uYXBwZW5kQ2hpbGQobm9kZSk7IAogICAgaWYoY3NzX2NvbW1lbnQhPScnKXsKICAgICAgICBub2RlID0gX2RvYy5jcmVhdGVFbGVtZW50KCJzdHlsZSIpCiAgICAgICAgbm9kZS50eXBlID0gInRleHQvY3NzIjsKICAgICAgICBub2RlLmlkID0gIml6aENTU19jb21tZW50IjsKICAgICAgICBub2RlLmFwcGVuZENoaWxkKF9kb2MuY3JlYXRlVGV4dE5vZGUoY3NzX2NvbW1lbnQpKTsKICAgICAgICBoZWFkc1swXS5hcHBlbmRDaGlsZChub2RlKTsKICAgIH0KfQoKaWYoISQoJy5tb2RhbC1kaWFsb2ctYmcnKS5sZW5ndGgpewogICAgJGJvZHkuYXBwZW5kKAogICAgICAgICQoJzxkaXYnLCB7IGlkOiAnaXpoLWRsZy1iZycsICdjbGFzcyc6ICdtb2RhbC1kaWFsb2ctYmcnIH0pLmNzcyh7CiAgICAgICAgICAgICd6LWluZGV4JzogOTUKICAgICAgICAgICwgJ29wYWNpdHknOiAwLjUKICAgICAgICAgICwgJ3Bvc2l0aW9uJzogJ2ZpeGVkJwogICAgICAgICAgLCAndG9wJzogMAogICAgICAgICAgLCAnYm90dG9tJzogMAogICAgICAgICAgLCAnbGVmdCc6IDAKICAgICAgICAgICwgJ3JpZ2h0JzogMAogICAgICAgICAgLCAnZGlzcGxheSc6ICdub25lJwogICAgICAgIH0pCiAgICApOwp9Cgp3aW5kb3cuaVpoaWh1LmdldEl0ZW09ZnVuY3Rpb24oJGMpewogICAgdmFyICRpdGVtPSQobnVsbCk7CiAgICBpZigkYyAmJiAkYy5sZW5ndGgpeyAKICAgICAgICB2YXIgJGl0ZW1NZXRhPSRjLmNsb3Nlc3QoJy56bS1pdGVtLW1ldGEnKTsKICAgICAgICBpZiAoJGl0ZW1NZXRhLmlzKCcuZmVlZC1tZXRhJykgfHwgJGl0ZW1NZXRhLnBhcmVudCgpLmlzKCcuZmVlZC1tZXRhJykpewogICAgICAgICAgICAkaXRlbT0kYy5jbG9zZXN0KCcuZmVlZC1pdGVtJyk7CiAgICAgICAgICAgICRpdGVtLmF0dHIoJ2RhdGEtYWlkJywgJGl0ZW0uY2hpbGRyZW4oJ21ldGFbaXRlbXByb3A9YW5zd2VyLWlkXScpLmF0dHIoJ2NvbnRlbnQnKSkKICAgICAgICB9ZWxzZSBpZigkaXRlbU1ldGEuaXMoJy5hbnN3ZXItYWN0aW9ucycpKXsKICAgICAgICAgICAgJGl0ZW09JGMuY2xvc2VzdCgnLnptLWl0ZW0tYW5zd2VyLC5mZWVkLWl0ZW0nKTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgJGl0ZW09JGl0ZW1NZXRhLnByZXYoKTsKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gJGl0ZW07Cn07Cgp1dGlscy5vYnNlcnZlRE9NTm9kZUFkZGVkKGRvY3VtZW50LmJvZHksZnVuY3Rpb24oZXZlbnQpewoJaWYoaXpoVG9wTmF2QXV0b0ZvbGQpewoJCXdpbmRvdy5pWmhpaHUuVG9wTmF2Lm9uTm9kZUFkZGVkKGV2ZW50KQoJfQp9KQovKioKICogQGNsYXNzIEFuc3dlcgogKi8KZnVuY3Rpb24gQW5zd2VyKGlaaGlodSkgewogICAgaWYgKCB0eXBlb2YgaVpoaWh1ID09PSAndW5kZWZpbmVkJyB8fCAhaVpoaWh1KSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICBpWmhpaHUuQW5zd2VyID0gdGhpczsKCiAgICB0aGlzLl9lPW51bGw7CiAgICB0aGlzLnBwV2lkdGg9MDsKICAgIHRoaXMucHBIZWlnaHQ9NDAwOwoKICAgIHRoaXMuY3NzID0gCiAgICAgICAgWycuem0tdm90ZWJhciAuaXpoLWJ1dHRvbi5mb2xke21hcmdpbjo1cHggMHB4IDBweDtkaXNwbGF5OmJsb2NrO2NvbG9yOiM2OThFQkY7aGVpZ2h0OjI0cHg7bGluZS1oZWlnaHQ6MjRweDt3aWR0aDozOHB4O2JvcmRlci1yYWRpdXM6M3B4O2JvcmRlcjowcHggbm9uZTtjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kOm5vbmUgcmVwZWF0IHNjcm9sbCAwJSAwJSAjRUZGNkZBO2ZvbnQtd2VpZ2h0OmZvbnQtd2VpZ2h0O3Bvc2l0aW9uOnJlbGF0aXZlO30nCiAgICAgICAgLCcnXS5qb2luKCdcbicpOwoKICAJdGhpcy5wcm9jZXNzQW5zd2VyPWZ1bmN0aW9uKCRhLCRwcCxiQXV0aG9yUmVhcixiQXV0aG9yTGlzdCl7CiAgICAgICAgaWYoISRhfHwhJGEubGVuZ3RoKXJldHVybjsKICAgICAgICBpZigkYS5hdHRyKCdpemhfcHJvY2Vzc2VkJyk9PScxJylyZXR1cm47CiAgICAgICAgdmFyIHNlbENvbGxhcHNlPScubWV0YS1pdGVtW25hbWU9Y29sbGFwc2VdJwogICAgICAgICAgLCAkbWV0YT0kYS5maW5kKCcuem0taXRlbS1tZXRhJykKICAgICAgICAgICwgJGF1dGhvcj0kYS5maW5kKCcuem0taXRlbS1hbnN3ZXItYXV0aG9yLWluZm8nKQogICAgICAgICAgLCAkZmF2bz0kYS5maW5kKCcubWV0YS1pdGVtW25hbWU9ZmF2b10nKQogICAgICAgICAgLCAkdm90ZT0kYS5maW5kKCcuem0tdm90ZWJhcicpCiAgICAgICAgOwogICAgICAgIGlmKGlaaGlodS5RdWlja0Jsb2NrKXsKICAgICAgICAgICAgLy8gUmVnaW9uOiDlv6vpgJ/lsY/olL0KICAgICAgICAgICAgaVpoaWh1LlF1aWNrQmxvY2suYWRkUXVpY2tCbG9jaygkYSkKCiAgICAgICAgICAgIC8vIFJlZ2lvbiBlbmQKICAgICAgICB9CiAgICAgICAgaWYoJGF1dGhvci5sZW5ndGgpey8vcmVsb2NhdGVQZXJzb25JbmZvCiAgICAgICAgICAgIGlmKGJBdXRob3JSZWFyKXsKICAgICAgICAgICAgICAgICRhdXRob3IuY3NzKHsKICAgICAgICAgICAgICAgICAgICAndGV4dEFsaWduJzoncmlnaHQnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGlmKCRhLmlzKCcuZmVlZC1pdGVtJykpewogICAgICAgICAgICAgICAgICAgICRhLmZpbmQoJy5lbnRyeS1ib2R5IC56bS1pdGVtLWFuc3dlci1kZXRhaWwgLnptLWl0ZW0tcmljaC10ZXh0JykKICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkYXV0aG9yLmhpZGUoKSkuYmluZCgnRE9NTm9kZUluc2VydGVkJyxmdW5jdGlvbihldmVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGM9JChldmVudC50YXJnZXQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGMuaXMoJy56bS1lZGl0YWJsZS1jb250ZW50JykpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY2hpbGRyZW4oJy56bS1pdGVtLWFuc3dlci1hdXRob3ItaW5mbycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbnNlcnRCZWZvcmUoJGMuY2hpbGRyZW4oJy5hbnN3ZXItZGF0ZS1saW5rLXdyYXAnKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNzcyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncG9zaXRpb24nOidhYnNvbHV0ZScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsICdyaWdodCc6MAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5zaG93KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgJGF1dGhvci5pbnNlcnRCZWZvcmUoJG1ldGEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgICRhdXRob3I9JGF1dGhvci5jaGlsZHJlbigpLmVxKDEpOwogICAgICAgICAgICBpZiAoJHBwICYmIGJBdXRob3JMaXN0KXsKICAgICAgICAgICAgICAgIC8vIFJlZ2lvbjog5Zue562U55uu5b2V6aG5CiAgICAgICAgICAgICAgICB2YXIgY29sbGFwc2VkPSRhLmF0dHIoJ2RhdGEtY29sbGFwc2VkJyk9PScxJwogICAgICAgICAgICAgICAgICAsICRwcGxhPSQoJzxhPicsewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjonI2Fuc3dlci0nKyRhLmF0dHIoJ2RhdGEtYWlkJykKICAgICAgICAgICAgICAgICAgICAgICAgICAsIHRhcmdldDonX3NlbGYnCiAgICAgICAgICAgICAgICAgICAgICAgICAgLCBzdHlsZTpjc3NfQXV0aG9yTGlzdEl0ZW1BCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICwgJHBwbD0kKCc8bGk+JykuYXBwZW5kKCRwcGxhKQogICAgICAgICAgICAgICAgICAsICR1bm89aVpoaWh1LiR1bm9BbnN3ZXJzCiAgICAgICAgICAgICAgICBpZihjb2xsYXBzZWQpewogICAgICAgICAgICAgICAgICAgICRwcGwuYXBwZW5kVG8oJHBwKQogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgJHBwbC5pbnNlcnRCZWZvcmUoJHVuby4kZW5kT2ZMYXN0QSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKCRhLmF0dHIoJ2RhdGEtaXNvd25lcicpPT0nMScpewogICAgICAgICAgICAgICAgICAgIGlaaGlodS5BbnN3ZXIuX2U9JGEuZ2V0KDApOwogICAgICAgICAgICAgICAgICAgICRwcGxhLmFwcGVuZCgkKCc8c3Bhbj4nLCB7ICdjbGFzcyc6ICdtZScgfSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIG5hbWVDU1M9J25hbWUnOwogICAgICAgICAgICAgICAgaWYoJGEuYXR0cignZGF0YS1pc2ZyaWVuZCcpPT0nMScpewogICAgICAgICAgICAgICAgICAgIG5hbWVDU1MrPScgZnJpZW5kJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKGNvbGxhcHNlZCl7CiAgICAgICAgICAgICAgICAgICAgbmFtZUNTUys9JyBjb2xsYXBzZWQnCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZighJGF1dGhvci5sZW5ndGgpewogICAgICAgICAgICAgICAgICAgIG5hbWVDU1MrPScgbm9uYW1lJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICQoJzxzcGFuPicsewogICAgICAgICAgICAgICAgICAgICdjbGFzcyc6bmFtZUNTUwogICAgICAgICAgICAgICAgICAsIHN0eWxlOmNzc19BdXRob3JMaXN0SXRlbUFfbmFtZQogICAgICAgICAgICAgICAgfSkudGV4dCghJGF1dGhvci5sZW5ndGg/J+WMv+WQjeeUqOaItyc6JGF1dGhvci50ZXh0KCkpLmFwcGVuZFRvKCRwcGxhKTsKICAgICAgICAgICAgICAgIGlmICgkcHBsLndpZHRoKCk+aVpoaWh1LkFuc3dlci5wcFdpZHRoKQogICAgICAgICAgICAgICAgICAgIGlaaGlodS5BbnN3ZXIucHBXaWR0aD0kcHBsLndpZHRoKCk7CiAgICAgICAgICAgICAgICAvLyBSZWdpb24gZW5kCiAgICAgICAgICAgICAgICAvLyBSZWdpb246IOWbnuetlOevh+W5heaMh+ekugogICAgICAgICAgICAgICAgdmFyIG5IUD1NYXRoLmNlaWwoJCgnLnptLWVkaXRhYmxlLWNvbnRlbnQnLCRhKS50ZXh0KCkubGVuZ3RoLzEwMCk7CiAgICAgICAgICAgICAgICAkKCc8c3Bhbj4nLHsKICAgICAgICAgICAgICAgICAgICAnY2xhc3MnOidocCcKICAgICAgICAgICAgICAgIH0pLmNzcyh7J3dpZHRoJzpuSFAqMTAsJ21hcmdpbi1sZWZ0JzotbkhQKjEwfSkuYXBwZW5kVG8oJHBwbGEpOwogICAgICAgICAgICAgICAgLy8gUmVnaW9uIGVuZAogICAgICAgICAgICAgICAgJHBwbGEubW91c2VvdmVyKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgdmFyICRmcm09JCh0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlKQogICAgICAgICAgICAgICAgICAgICAgLCAkdW5vPWlaaGlodS4kdW5vQW5zd2VycwogICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ3NlbCcpOwogICAgICAgICAgICAgICAgICAgIGlmKGlaaGlodS5BbnN3ZXIuX2UpewogICAgICAgICAgICAgICAgICAgICAgICAkdW5vLmNoaWxkcmVuKCcubWVUJykuY3NzKCdkaXNwbGF5JywwPmlaaGlodS5BbnN3ZXIuX2Uub2Zmc2V0VG9wLSRmcm0uc2Nyb2xsVG9wKCk/Jyc6J25vbmUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgJHVuby5jaGlsZHJlbignLm1lQicpLmNzcygnZGlzcGxheScsJGZybS5oZWlnaHQoKTxpWmhpaHUuQW5zd2VyLl9lLm9mZnNldFRvcC0kZnJtLnNjcm9sbFRvcCgpK2laaGlodS5BbnN3ZXIuX2Uub2Zmc2V0SGVpZ2h0PycnOidub25lJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIC8vIFJlZ2lvbjog5Zue562U6aKE6KeICiAgICAgICAgICAgICAgICAgICAgdmFyIG5hbT0kKCdzcGFuLm5hbWUnLHRoaXMpOwogICAgICAgICAgICAgICAgICAgIGlmKCFuYW0ubGVuZ3RoKXJldHVybjsKICAgICAgICAgICAgICAgICAgICB2YXIgYWlkPSQodGhpcykuYXR0cignaHJlZicpLnJlcGxhY2UoJyNhbnN3ZXItJywnJykKICAgICAgICAgICAgICAgICAgICAgICwgcHJ2PSR1bm8ubmV4dCgnLml6aC1hbnN3ZXItcHJldmlldycpCiAgICAgICAgICAgICAgICAgICAgICAsIHRvcD0kKHRoaXMpLnBvc2l0aW9uKCkudG9wKyR1bm8ucG9zaXRpb24oKS50b3AKICAgICAgICAgICAgICAgICAgICAgICwgc2VsPScuem0taXRlbS1hbnN3ZXJbZGF0YS1haWQ9JythaWQrJ10gPiAuem0taXRlbS1yaWNoLXRleHQnCiAgICAgICAgICAgICAgICAgICAgICAsIGN0eD1uYW0uaXMoJy5jb2xsYXBzZWQnKT8nI3poLXF1ZXN0aW9uLWNvbGxhcHNlZC13cmFwJzonI3poLXF1ZXN0aW9uLWFuc3dlci13cmFwJwogICAgICAgICAgICAgICAgICAgICAgLCBkaXY9JChzZWwsY3R4KQogICAgICAgICAgICAgICAgICAgICAgLCBjbXQ9JCgnLnptLWl0ZW0tbWV0YSA+IC56dS1xdWVzdGlvbi1hbnN3ZXItbWV0YS1jb21tZW50JyxkaXYucGFyZW50KCkpCiAgICAgICAgICAgICAgICAgICAgOwogICAgICAgICAgICAgICAgICAgIGlmKCFwcnYubGVuZ3RoKXsKICAgICAgICAgICAgICAgICAgICAgICAgcHJ2PSQoJzxkaXY+Jyx7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzpkaXYuY2xhc3MKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ2l6aC1hbnN3ZXItcHJldmlldycpLndpZHRoKGRpdi53aWR0aCgpKzIyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1vdXNlb3ZlcihmdW5jdGlvbigpeyR1bm8ubW91c2VvdmVyKCk7JCgnbGkgYVtocmVmPSMnKyQodGhpcykuYXR0cignZGF0YS1haWQnKSsnXScsJHVubykuYWRkQ2xhc3MoJ3NlbCcpOyQodGhpcykuc2hvdygpO30pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubW91c2VvdXQoZnVuY3Rpb24oKXskdW5vLm1vdXNlb3V0KCk7JCgnbGkgYVtocmVmPSMnKyQodGhpcykuYXR0cignZGF0YS1haWQnKSsnXScsJHVubykucmVtb3ZlQ2xhc3MoJ3NlbCcpOyQodGhpcykuaGlkZSgpO30pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2xpY2soZnVuY3Rpb24oKXskKCdsaSBhW2hyZWY9IycrJCh0aGlzKS5hdHRyKCdkYXRhLWFpZCcpKyddJywkdW5vKVswXS5jbGljaygpO30pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5zZXJ0QWZ0ZXIoJHVubykKICAgICAgICAgICAgICAgICAgICAgICAgOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZihwcnYuYXR0cignZGF0YS1haWQnKSE9YWlkKXsKICAgICAgICAgICAgICAgICAgICAgICAgcHJ2LmF0dHIoJ2RhdGEtYWlkJyxhaWQpLmVtcHR5KCkuYXBwZW5kKGRpdi5jbG9uZSgpLmNoaWxkcmVuKCkpLmZpbmQoJ2EnKS5hdHRyKCdvbmNsaWNrJywncmV0dXJuIGZhbHNlOycpOwogICAgICAgICAgICAgICAgICAgICAgICBpZigkKCdzcGFuLm1lJyx0aGlzKS5sZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcnYuZmluZCgnYS56dS1lZGl0LWJ1dHRvbicpLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZighbmFtLmhhc0NsYXNzKCdub25hbWUnKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJ2ltZy56bS1saXN0LWF2YXRhcicsZGl2LnBhcmVudCgpKS5jbG9uZSgpLmFwcGVuZFRvKHBydik7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0PWNtdC50ZXh0KCksaT10LmluZGV4T2YoJ+adoeivhOiuuicpOwogICAgICAgICAgICAgICAgICAgICAgICBpZihjbXQubGVuZ3RoJiZpPjApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCc8c3Bhbj4nLHsnY2xhc3MnOidjb21tZW50J30pLnRleHQodC5zdWJzdHJpbmcoMCxpKSkucHJlcGVuZChjbXQuY2hpbGRyZW4oJ2knKS5jbG9uZSgpKS5hcHBlbmRUbyhwcnYpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgdGg9ZGl2LmhlaWdodCgpKzMzCiAgICAgICAgICAgICAgICAgICAgICAsIG1heFRvcD0kdW5vLnBvc2l0aW9uKCkudG9wKzEyCiAgICAgICAgICAgICAgICAgICAgICAsIGNvbnRlbnRQb3NpdGlvbj0nJzsKICAgICAgICAgICAgICAgICAgICBpZihtYXhUb3ArdGg8JHdpbi5oZWlnaHQoKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRvcCt0aDwkd2luLmhlaWdodCgpKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBydi5jc3Moeyd0b3AnOnRvcD5tYXhUb3A/dG9wOm1heFRvcCwnYm90dG9tJzonJ30pOwogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBydi5jc3Moeyd0b3AnOicnLCdib3R0b20nOjB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBwcnYuY3NzKHsndG9wJzptYXhUb3AsJ2JvdHRvbSc6MH0pOwogICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50UG9zaXRpb249J2Fic29sdXRlJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcHJ2LmNzcyh7J2xlZnQnOiR1bm8ud2lkdGgoKX0pLnNob3coKS5jaGlsZHJlbigpLmZpcnN0KCkuY3NzKCdwb3NpdGlvbicsY29udGVudFBvc2l0aW9uKTsKICAgICAgICAgICAgICAgICAgICAvLyBSZWdpb24gZW5kCiAgICAgICAgICAgICAgICB9KS5tb3VzZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ3NlbCcpOwogICAgICAgICAgICAgICAgICAgIHZhciAkdW5vPSQodGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlKTsKICAgICAgICAgICAgICAgICAgICAkdW5vLm5leHQoKS5oaWRlKCk7CiAgICAgICAgICAgICAgICB9KS5jbGljayhmdW5jdGlvbigpeyQodGhpcykubW91c2VvdXQoKTsKICAgICAgICAgICAgICAgIGlaaGlodS4kdW5vQW5zd2Vycy5jc3MoJ2xlZnQnLDktaVpoaWh1LiR1bm9BbnN3ZXJzLndpZHRoKCkpO30pOwogICAgICAgICAgICAgICAgaWYoaVpoaWh1LkFuc3dlci5fZT09JGEuZ2V0KDApKXsKICAgICAgICAgICAgICAgICAgICBpWmhpaHUuQW5zd2VyLl9lPSRwcGxhLmdldCgwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYoaVpoaWh1LlF1aWNrRmF2bykKICAgICAgICAgICAgaVpoaWh1LlF1aWNrRmF2by5hZGRRdWlja0Zhdm8oJGZhdm8sJGEpOwoKICAgICAgICAkbWV0YS5iaW5kKCdET01Ob2RlSW5zZXJ0ZWQnLGZ1bmN0aW9uKGV2ZW50KXsKICAgICAgICAgICAgaVpoaWh1LkNvbW1lbnQucHJvY2Vzc0NvbW1lbnQoJChldmVudC50YXJnZXQpKTsKICAgICAgICB9KTsKICAgICAgICAKICAgICAgICBpWmhpaHUuQ29tbWVudC5wcm9jZXNzQ29tbWVudEJ1dHRvbigkYSk7CgogICAgICAgIHZhciAkY209JCgnLnptLWNvbW1lbnQtYm94JywkYSk7CiAgICAgICAgaWYoJGNtLmxlbmd0aCAmJiAkY20uaXMoJzp2aXNpYmxlJykpewogICAgICAgIAl2YXIgZm9jdXNOYW1lID0gaVpoaWh1LkNvbW1lbnQuc2Nyb2xsRm9jdXNDb21tZW50T25QYWdlTG9hZCgkY20pOwogICAgCiAgICAgICAgICAgIGlaaGlodS5Db21tZW50Lm1ldGFTY3JvbGxUb1ZpZXdCb3R0b20oJGNtLmNsb3Nlc3QoJy56bS1pdGVtLW1ldGEnKSxmdW5jdGlvbigpewogICAgICAgICAgICAgICAgaVpoaWh1LkNvbW1lbnQucHJvY2Vzc0NvbW1lbnQoJGNtLCBmb2N1c05hbWUpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgJGEuYXR0cignaXpoX3Byb2Nlc3NlZCcsJzEnKTsKICAgIH07CgogICAgcmV0dXJuIHRoaXM7Cn0KCi8qKgogKiBAY2xhc3MgQ29tbWVudAogKi8KZnVuY3Rpb24gQ29tbWVudChpWmhpaHUpIHsKICAgIGlmICggdHlwZW9mIGlaaGlodSA9PT0gJ3VuZGVmaW5lZCcgfHwgIWlaaGlodSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgaVpoaWh1LkNvbW1lbnQgPSB0aGlzOwoKICAgIHZhciBjc3NfY29tbWVudD17CiAgICAgICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzonI2ZmZicKICAgICAgICAgICwgJ291dGxpbmUnOidub25lJwogICAgICAgICAgLCAnei1pbmRleCc6Jzk5OTknCiAgICAgICAgICAsICdib3JkZXItcmFkaXVzJzonMCA2cHggMCAwJwogICAgICAgICAgLCAncG9zaXRpb24nOidhYnNvbHV0ZScKICAgICAgICAgICwgJ3Zpc2liaWxpdHknOidoaWRkZW4nCiAgICAgICAgICAsICd0b3AnOi03MAogICAgICAgIH0KICAgIDsKICAgIHRoaXMuUmlnaHRDb21tZW50ID0gaVpoaWh1LmNvbmZpZ1snU2hvd0NvbW1lbnQnXTsKICAgIHRoaXMuQXV0b1Njcm9sbFBhZ2VXaGVuQ2xvc2luZyA9IGlaaGlodS5jb25maWdbJ1JpZ2h0Q29tbWVudF9BdXRvU2Nyb2xsUGFnZVdoZW5DbG9zaW5nJ107CiAgICBpZiAoIXRoaXMuUmlnaHRDb21tZW50KXsKICAgICAgICB0aGlzLmNzcyA9IAogICAgICAgICAgICBbJy56bS1jb21tZW50LWJveC5lbXB0eSAuaXpoLWJ1dHRvbi1jY3tkaXNwbGF5Om5vbmU7fScKICAgICAgICAgICAgLCcnXS5qb2luKCdcbicpOwogICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNzcyA9IAogICAgICAgICAgICBbJy5tZW50aW9uLXBvcHVwe3otaW5kZXg6MTAwMDAgIWltcG9ydGFudDt9JwogICAgICAgICAgICAsJy56bS1pdGVtLW1ldGEgLm1ldGEtaXRlbS50b2dnbGUtY29tbWVudHtkaXNwbGF5OmJsb2NrO2Zsb2F0OnJpZ2h0O21hcmdpbi1sZWZ0OjdweCAhaW1wb3J0YW50O30nCiAgICAgICAgICAgICwnLnptLWNvbW1lbnQtYm94e3Bvc2l0aW9uOmFic29sdXRlO21hcmdpbi10b3A6MDt9JwogICAgICAgICAgICAsJy56bS1jb21tZW50LWJveCAuaWNvbi1zcGlrZXtkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9JwogICAgICAgICAgICAsJy56bS1jb21tZW50LWJveCA+IC56bS1jb21tZW50LWJveC1mdHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjA7cmlnaHQ6MDt9JwogICAgICAgICAgICAsJy56bS1jb21tZW50LWJveC5lbXB0eXtwYWRkaW5nLXRvcDoxMHB4ICFpbXBvcnRhbnQ7fScKICAgICAgICAgICAgLCcuem0tY29tbWVudC1ib3ggPiAuem0tY29tbWVudC1mb3Jte21hcmdpbjoxNXB4ICFpbXBvcnRhbnQ7fScKICAgICAgICAgICAgLCcuem0tY29tbWVudC1ib3guZW1wdHkgPiAuem0tY29tbWVudC1mb3Jte2JvdHRvbToyNXB4O30nCiAgICAgICAgICAgICwnLnptLWNvbW1lbnQtYm94ID4gLnptLWNvbW1lbnQtZm9ybSAuem0tY29tbWVudC1lZGl0YWJsZXtwb3NpdGlvbjphYnNvbHV0ZTtib3R0b206NjBweDt0b3A6MDtsZWZ0OjA7cmlnaHQ6MDtvdmVyZmxvdzphdXRvO30nCiAgICAgICAgICAgICwnLnptLWNvbW1lbnQtYm94LmVtcHR5ID4gLnptLWNvbW1lbnQtZm9ybSAuem0tY29tbWVudC1lZGl0YWJsZXtib3R0b206MjVweDt9JwogICAgICAgICAgICAsJy56bS1jb21tZW50LWJveCA+IC56bS1jb21tZW50LWZvcm0gLnptLWNvbW1hbmR7cG9zaXRpb246YWJzb2x1dGU7bGVmdDowO3JpZ2h0OjA7Ym90dG9tOjQwcHg7fScKICAgICAgICAgICAgLCcuem0tY29tbWVudC1ib3guZW1wdHkgPiAuem0tY29tbWVudC1mb3JtIC56bS1jb21tYW5ke2JvdHRvbToxMHB4O30nCiAgICAgICAgICAgICwnLnptLWNvbW1lbnQtYm94IFtjbGFzc149aXpoLWJ1dHRvbnMtY21de3Bvc2l0aW9uOmFic29sdXRlO3RvcDo3MHB4O30nCiAgICAgICAgICAgICwnLnptLWNvbW1lbnQtYm94LmVtcHR5IFtjbGFzc149aXpoLWJ1dHRvbnMtY21de3RvcDphdXRvO2JvdHRvbTozMHB4O3otaW5kZXg6MTA7fScKICAgICAgICAgICAgLCcuem0tY29tbWVudC1ib3ggLml6aC1idXR0b25zLWNtLUx7bGVmdDowO30nCiAgICAgICAgICAgICwnLnptLWNvbW1lbnQtYm94IC5pemgtYnV0dG9ucy1jbS1MID4gYXttYXJnaW4tcmlnaHQ6N3B4O30nCiAgICAgICAgICAgICwnLnptLWNvbW1lbnQtYm94IC5pemgtYnV0dG9ucy1jbS1Se3JpZ2h0OjFlbTt9JwogICAgICAgICAgICAsJy56bS1jb21tZW50LWJveCAuaXpoLWJ1dHRvbnMtY20tUiA+IGF7bWFyZ2luLWxlZnQ6N3B4O30nCiAgICAgICAgICAgICwnLnptLWNvbW1lbnQtYm94IGEuaXpoLWJ1dHRvbi5vbntjb2xvcjojMjI1NTk5O3RleHQtc2hhZG93OjAgMCAxcHggIzIyNTU5OTt9JwogICAgICAgICAgICAsJy56bS1jb21tZW50LWJveCBhLml6aC1idXR0b24gLnpnLWljb257b3BhY2l0eTowLjU7fScKICAgICAgICAgICAgLCcuem0tY29tbWVudC1ib3ggYS5pemgtYnV0dG9uLm9uIC56Zy1pY29ue29wYWNpdHk6MTt9JwogICAgICAgICAgICAsJy56bS1jb21tZW50LWJveCBhLml6aC1idXR0b24ub2Zme2NvbG9yOiNlZWU7fScKICAgICAgICAgICAgLCcuem0tY29tbWVudC1ib3ggYS5pemgtYnV0dG9uLm9mZiAuemctaWNvbntvcGFjaXR5OjAuMjt9JwogICAgICAgICAgICAvLywnLnptLWNvbW1lbnQtYm94LmVtcHR5IFtjbGFzc149aXpoLWJ1dHRvbnMtY21de3RvcDphdXRvO2JvdHRvbTo3cHg7fScKICAgICAgICAgICAgLCcuem0tY29tbWVudC1ib3guZW1wdHkgLnptLWNvbW1lbnQtbGlzdHt2aXNpYmlsaXR5OmhpZGRlbjt9JwogICAgICAgICAgICAsJy56bS1jb21tZW50LWJveCAuem0tY29tbWVudC1saXN0IC56bS1pdGVtLWNvbW1lbnRbaXpoX2hpbGlnaHRde2JhY2tncm91bmQtY29sb3I6cmdiKDI1NSwyNTUsMTYwKTt9JwogICAgICAgICAgICAsJy56bS1jb21tZW50LWJveCAuaXpoLWJ1dHRvbi5vbiAuemctaWNvbi1jb21tZW50LWxpa2V7YmFja2dyb3VuZC1wb3NpdGlvbjotMjIycHggLTc5cHg7fScKICAgICAgICAgICAgLCcuem0tY29tbWVudC1ib3ggLml6aC1idXR0b24gLnotaWNvbi1mb2xke2hlaWdodDo2cHg7fScKICAgICAgICAgICAgLCcnXS5qb2luKCdcbicpOwogICAgICAgIHRoaXMub25XaW5Mb2FkPWZ1bmN0aW9uKCl7CiAgICAgICAgICAgIHZhciBpWmhpaHU9d2luZG93LmlaaGlodTsKICAgICAgICAgICAgaVpoaWh1LiR3aW4uc2Nyb2xsKGZ1bmN0aW9uKGV2ZW50KXsKICAgICAgICAgICAgICAgIGlmKGlaaGlodS5Db21tZW50Lk9wZW5pbmcmJiFpWmhpaHUuQ29tbWVudC5QYWdlTm90U2Nyb2xsKXsKICAgICAgICAgICAgICAgICAgICB2YXIgYW5pbWF0ZT10cnVlOwogICAgICAgICAgICAgICAgICAgIGlaaGlodS5Db21tZW50LmJveCgkKGlaaGlodS5Db21tZW50Lk9wZW5pbmcpLHRydWUsYW5pbWF0ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIAogICAgICAgICAgICBpWmhpaHUuJHdpbi5yZXNpemUoZnVuY3Rpb24oZXZlbnQpewogICAgICAgICAgICAgICAgaWYoaVpoaWh1LkNvbW1lbnQuT3BlbmluZyl7CiAgICAgICAgICAgICAgICAgICAgdmFyICRjbT0kKGlaaGlodS5Db21tZW50Lk9wZW5pbmcpOwogICAgICAgICAgICAgICAgICAgIGlaaGlodS5Db21tZW50Lk9wZW5pbmcgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIGlaaGlodS5Db21tZW50LmNsb3NlKG51bGwsJGNtKTsKICAgICAgICAgICAgICAgICAgICBpWmhpaHUuQ29tbWVudC5vcGVuKG51bGwsJGNtKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmKGlaaGlodS5TY3JvbGxUb3ApewogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A9aVpoaWh1LlNjcm9sbFRvcDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0aGlzLm9uV2luTG9hZCgpCiAgICB9CiAgICB0aGlzLnByb2Nlc3NDb21tZW50QnV0dG9uID0gZnVuY3Rpb24oJGEpewogICAgICAgIGlmKGlaaGlodS5Db21tZW50LlJpZ2h0Q29tbWVudCl7CiAgICAgICAgICAgIHZhciAkYmM9JGEuZmluZCgnLm1ldGEtaXRlbS50b2dnbGUtY29tbWVudCcpOwogICAgICAgICAgICAkYmMucHJlcGVuZFRvKCRiYy5wYXJlbnQoKSk7CiAgICAgICAgfQogICAgfTsKICAgIHRoaXMuc2Nyb2xsRm9jdXNDb21tZW50T25QYWdlTG9hZCA9IGZ1bmN0aW9uKCRjbSl7CiAgICAgICAgaWYoIWlaaGlodS5Db21tZW50LlJpZ2h0Q29tbWVudClyZXR1cm47CiAgICAgICAgdmFyIGZvY3VzTmFtZT11cmwuZGF0YS5hdHRyLmZyYWdtZW50OwogICAgICAgIGlmKCFmb2N1c05hbWV8fGZvY3VzTmFtZT09JycpcmV0dXJuOwogICAgCWlmKHdpbmRvdy5pWmhpaHU0Q1JYKXsKICAgICAgICAgICAgdmFyICRpY20yQz0kY20uZmluZCgnLnptLWNvbW1lbnQtbGlzdCAuem0taXRlbS1jb21tZW50IGEuemctYW5jaG9yLWhpZGRlbltuYW1lPSInK2ZvY3VzTmFtZSsnIl0nKS5wYXJlbnQoKQogICAgICAgICAgICAgICwgb2Zmc2V0VG9wPSRpY20yQy5sZW5ndGg/JGljbTJDLm9mZnNldCgpLnRvcDowCiAgICAgICAgICAgIDtpZihvZmZzZXRUb3Ape2RvY3VtZW50LmJvZHkuc2Nyb2xsVG9wPW9mZnNldFRvcDt9CiAgICAJfQogICAgICAgIHJldHVybiBmb2N1c05hbWU7CiAgICB9OwogICAgCiAgICB0aGlzLm1ldGFTY3JvbGxUb1ZpZXdCb3R0b20gPSBmdW5jdGlvbigkaXRlbU1ldGEsZnVuY0FmdGVyU2Nyb2xsLGFsd2F5cyxhbmltYXRlKXsKICAgICAgICBpZighaVpoaWh1LkNvbW1lbnQuUmlnaHRDb21tZW50IHx8ICFpWmhpaHUuQ29tbWVudC5BdXRvU2Nyb2xsUGFnZVdoZW5DbG9zaW5nKXsKICAgICAgICAgICAgaWYoZnVuY0FmdGVyU2Nyb2xsKXtmdW5jQWZ0ZXJTY3JvbGwoKTt9CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYodHlwZW9mIGFsd2F5cyA9PT0gJ3VuZGVmaW5lZCcpYWx3YXlzPXRydWU7Ly9pZiBmYWxzZSwgc2Nyb2xsaW5nIG9ubHkgd2hlbiB0aGUgLnptLWl0ZW0tbWV0YSBvdXQgb2YgdmlzaWJsZSByYW5nZQogICAgICAgIGlmKHR5cGVvZiBhbmltYXRlID09PSAndW5kZWZpbmVkJylhbmltYXRlPWZhbHNlOy8vaWYgZmFsc2UsIHNjcm9sbGluZyBpbnN0YW50bHkKICAgICAgICBpZihhbHdheXMpJGl0ZW1NZXRhLmNoaWxkcmVuKCcuem0tY29tbWVudC1ib3gnKS5jc3MoJ3Bvc2l0aW9uJywnZml4ZWQnKTsKICAgICAgICB2YXIgd2luSGVpZ2h0PWlaaGlodS4kd2luLmhlaWdodCgpCiAgICAgICAgICAsIHNjcm9sbE9iaj13aW5kb3cuaVpoaWh1NENSWD9kb2N1bWVudC5ib2R5OmRvY3VtZW50LmRvY3VtZW50RWxlbWVudAogICAgICAgICAgLCBzY3JvbGxUb3BOb3c9c2Nyb2xsT2JqLnNjcm9sbFRvcAogICAgICAgICAgLCBuYXZIZWlnaHQ9aVpoaWh1LiRib2R5LmNoaWxkcmVuKCkuZmlyc3QoKS5oZWlnaHQoKQogICAgICAgICAgLCBiYXI9JCgnLnp1LWdsb2JhbC1ub3RpZnkuenUtZ2xvYmFsLW5vdGlmeS1pbmZvOnZpc2libGUnKQogICAgICAgICAgLCBiYXJIZWlnaHQ9IWJhci5sZW5ndGg/MDpiYXIub3V0ZXJIZWlnaHQoKQogICAgICAgICAgLCBiYXNlVG9wPSgoYmFySGVpZ2h0JiZiYXIuY3NzKCdwb3NpdGlvbicpPT0nZml4ZWQnKT9iYXJIZWlnaHQ6KHNjcm9sbFRvcE5vdz5iYXJIZWlnaHQ/MDpiYXJIZWlnaHQtc2Nyb2xsVG9wTm93KSkrbmF2SGVpZ2h0CiAgICAgICAgICAsIG1heEhlaWdodD13aW5IZWlnaHQtYmFzZVRvcAogICAgICAgICAgLCBtZXRhSGVpZ2h0PSRpdGVtTWV0YS5pbm5lckhlaWdodCgpCiAgICAgICAgICAsIG9mZnNldFRvcD0kaXRlbU1ldGEub2Zmc2V0KCkudG9wCiAgICAgICAgICAsIG9mZnNldEJvdHRvbT1vZmZzZXRUb3ArbWV0YUhlaWdodAogICAgICAgICAgLCAkaXRlbT1pWmhpaHUuZ2V0SXRlbSgkaXRlbU1ldGEpCiAgICAgICAgICAsIGl0ZW1IZWlnaHQ9JGl0ZW0uaW5uZXJIZWlnaHQoKQogICAgICAgICAgLCBvZmZzZXRUb3BBPSRpdGVtLm9mZnNldCgpLnRvcAogICAgICAgICAgLCBvZmZzZXRCb3R0b21BPW9mZnNldFRvcEEraXRlbUhlaWdodAogICAgICAgICAgLCBzY3JvbGxUb3BFbmQ9aXRlbUhlaWdodD5tYXhIZWlnaHQ/b2Zmc2V0Qm90dG9tLXdpbkhlaWdodDoob2Zmc2V0VG9wQTw9c2Nyb2xsVG9wTm93P29mZnNldFRvcEEtYmFzZVRvcDpvZmZzZXRCb3R0b20td2luSGVpZ2h0KQogICAgICAgIDsKICAgICAgICBpZighYWx3YXlzKXsKICAgICAgICAgICAgYWx3YXlzPW9mZnNldFRvcDxzY3JvbGxUb3BOb3crYmFzZVRvcHx8b2Zmc2V0Qm90dG9tPnNjcm9sbFRvcE5vdyt3aW5IZWlnaHQtYmFzZVRvcDsKICAgICAgICB9CiAgICAgICAgaWYoYWx3YXlzKXsKICAgICAgICAgICAgaVpoaWh1LlNjcm9sbFRvcD1zY3JvbGxUb3BFbmQ7CiAgICAgICAgICAgIGlmKGFuaW1hdGUpewogICAgICAgICAgICAgICAgJChzY3JvbGxPYmopLmFuaW1hdGUoeydzY3JvbGxUb3AnOnNjcm9sbFRvcEVuZH0sZnVuY0FmdGVyU2Nyb2xsKTsKICAgICAgICAJfWVsc2V7CiAgICAgICAgICAgICAgICAkKHNjcm9sbE9iaikuc2Nyb2xsVG9wKHNjcm9sbFRvcEVuZCk7CiAgICAgICAgICAgICAgICBpZihmdW5jQWZ0ZXJTY3JvbGwpe2Z1bmNBZnRlclNjcm9sbCgpO30KICAgICAgICAJfQogICAgICAgIH1lbHNlewogICAgICAgICAgICBpZihmdW5jQWZ0ZXJTY3JvbGwpe2Z1bmNBZnRlclNjcm9sbCgpO30KICAgICAgICB9CiAgICB9OwogICAgdGhpcy5ib3ggPSBmdW5jdGlvbigkY20sa2VlcFNpemUsYW5pbWF0ZSl7aWYoISRjbXx8ISRjbS5sZW5ndGgpcmV0dXJuOwogICAgICAgICRjbS5zdG9wKCk7CiAgICAgICAgaWYodHlwZW9mIGtlZXBTaXplID09PSAndW5kZWZpbmVkJylrZWVwU2l6ZT1mYWxzZTsKICAgICAgICBpZih0eXBlb2YgYW5pbWF0ZSA9PT0gJ3VuZGVmaW5lZCcpYW5pbWF0ZT1mYWxzZTsKICAgICAgICB2YXIgd2luSGVpZ2h0PWlaaGlodS4kd2luLmhlaWdodCgpCiAgICAgICAgICAsIHRoPWtlZXBTaXplP3BhcnNlSW50KCRjbS5hdHRyKCdpemhfY21IZWlnaHQnKSk6MAogICAgICAgICAgLCBzY3JvbGxUb3A9KGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wKT9kb2N1bWVudC5ib2R5LnNjcm9sbFRvcDpkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wCiAgICAgICAgICAsIG5hdkhlaWdodD1pWmhpaHUuJGJvZHkuY2hpbGRyZW4oKS5maXJzdCgpLmhlaWdodCgpCiAgICAgICAgICAsIGJhcj0kKCcuenUtZ2xvYmFsLW5vdGlmeS56dS1nbG9iYWwtbm90aWZ5LWluZm86dmlzaWJsZScpCiAgICAgICAgICAsIGJhckhlaWdodD0hYmFyLmxlbmd0aD8wOmJhci5vdXRlckhlaWdodCgpCiAgICAgICAgICAsIGJhc2VUb3A9KChiYXJIZWlnaHQmJmJhci5jc3MoJ3Bvc2l0aW9uJyk9PSdmaXhlZCcpP2JhckhlaWdodDooc2Nyb2xsVG9wPmJhckhlaWdodD8wOmJhckhlaWdodC1zY3JvbGxUb3ApKStuYXZIZWlnaHQKICAgICAgICAgICwgbWluSGVpZ2h0PTExMgogICAgICAgICAgLCBtYXhIZWlnaHQ9d2luSGVpZ2h0LWJhc2VUb3AtMzUKICAgICAgICAgICwgdG9vU21hbGw9bWF4SGVpZ2h0PG1pbkhlaWdodAogICAgICAgICAgLCAkbWV0YT0kY20uY2xvc2VzdCgnLnptLWl0ZW0tbWV0YScpCiAgICAgICAgICAsIG1ldGFIZWlnaHQ9MiokbWV0YS5oZWlnaHQoKS0kbWV0YS5pbm5lckhlaWdodCgpCiAgICAgICAgICAsIG9mZnNldFRvcD1zY3JvbGxUb3AtJG1ldGEub2Zmc2V0KCkudG9wCiAgICAgICAgICAsIG9mZnNldEJvdHRvbT0tb2Zmc2V0VG9wLXdpbkhlaWdodAogICAgICAgIDtpZih0b29TbWFsbCltYXhIZWlnaHQ9bWluSGVpZ2h0OwogICAgICAgIGlmKCF0aHx8aXNOYU4odGgpKXsKICAgICAgICAgICAgdmFyICR0PSRjbS5jbG9uZSgpLmNzcyh7J3Bvc2l0aW9uJzonYWJzb2x1dGUnLCd6LWluZGV4JzonLTEnfSkuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSkuc2hvdygpCiAgICAgICAgICAgICAgLCAkbD0kdC5jaGlsZHJlbignLnptLWNvbW1lbnQtbGlzdCcpCiAgICAgICAgICAgIDsKICAgICAgICAgICAgaWYoISRjbS5pcygnLmVtcHR5JykmJiRsLmNoaWxkcmVuKCkubGVuZ3RoPjApJGwuY3NzKHsncG9zaXRpb24nOidhYnNvbHV0ZScsJ2hlaWdodCc6JycsJ3RvcCc6JycsJ2JvdHRvbSc6Jyd9KTsKICAgICAgICAgICAgdGg9JGwuaGVpZ2h0KCk7CiAgICAgICAgICAgIHRoKz10aD09MD9taW5IZWlnaHQ6MTAwOwogICAgICAgICAgICAkdC5yZW1vdmUoKTskdD1udWxsOy8vY29uc29sZS5sb2codGgpOwogICAgICAgICAgICAkY20uY3NzKCdoZWlnaHQnLHRoPD1taW5IZWlnaHQ/bWluSGVpZ2h0Oih0aDxtYXhIZWlnaHQ/dGgtMTAwOm1heEhlaWdodC04MCkpOwogICAgICAgIH0KICAgICAgICB2YXIgdGFyZ2V0PXt9LG90aGVyPXsnaGVpZ2h0JzonJ307CiAgICAgICAgJGNtLmF0dHIoJ2l6aF9jbUhlaWdodCcsdGgpLmNzcyh7J2Rpc3BsYXknOicnLCd2aXNpYmlsaXR5JzondmlzaWJsZScsJ3Bvc2l0aW9uJzonYWJzb2x1dGUnfSk7CiAgICAgICAgaWYodGg8PW1heEhlaWdodCl7CiAgICAgICAgICAgIHZhciB0b3A9LW9mZnNldFRvcC03MCxmaXhIZWlnaHQ9KHRoPD1taW5IZWlnaHQ/LTE6Nyk7CiAgICAgICAgICAgIGlmKCF0b29TbWFsbCYmdG9wK3RoPndpbkhlaWdodCl7CiAgICAgICAgICAgICAgICB0YXJnZXQ9eyd0b3AnOi1vZmZzZXRCb3R0b20tdGgtbWV0YUhlaWdodCtmaXhIZWlnaHQsJ2JvdHRvbSc6b2Zmc2V0Qm90dG9tfTsKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBvZmZzZXRUb3ArPSgoIXRvb1NtYWxsKSYmdG9wPmJhc2VUb3A/dG9wOmJhc2VUb3ApOwogICAgICAgICAgICAgICAgdGFyZ2V0PXsndG9wJzpvZmZzZXRUb3AsJ2JvdHRvbSc6LW9mZnNldFRvcC10aC1tZXRhSGVpZ2h0K2ZpeEhlaWdodH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJGNtLmZpbHRlcignLmVtcHR5JykuZmluZCgnLnptLWNvbW1lbnQtZm9ybSAuem0tY29tbWVudC1lZGl0YWJsZScpLmNzcyh7J2JvdHRvbSc6Jyd9KTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgdGFyZ2V0PXsndG9wJzpvZmZzZXRUb3ArYmFzZVRvcCwnYm90dG9tJzpvZmZzZXRCb3R0b219OwogICAgICAgICAgICAkY20uZmlsdGVyKCcuZW1wdHknKS5maW5kKCcuem0tY29tbWVudC1mb3JtIC56bS1jb21tZW50LWVkaXRhYmxlJykuY3NzKHsnYm90dG9tJzonMjBweCd9KTsKICAgICAgICB9CiAgICAgICAgaWYoYW5pbWF0ZSl7CiAgICAgICAgICAgICRjbS5hbmltYXRlKHRhcmdldCxmdW5jdGlvbigpeyRjbS5jc3Mob3RoZXIpO30pOwogICAgICAgIH1lbHNlewogICAgICAgICAgICAkY20uY3NzKCQuZXh0ZW5kKHRhcmdldCxvdGhlcikpOwogICAgICAgIH0KICAgICAgICAkY207CiAgICB9OwogICAgdGhpcy5vcGVuID0gZnVuY3Rpb24oJGFjLCRjbSxpY21Gb2N1cyl7Ly8gaWYgJGFjIGlzIG51bGwsIGp1c3QgcmUtc2l6aW5nIGFuZCByZS1sb2NhdGluZyBjb21tZW50LWJveAogICAgICAgIHZhciBub0NvbW1lbnRPcGVuaW5nID0gaVpoaWh1LkNvbW1lbnQuT3BlbmluZyA9PSBudWxsOwogICAgICAgIGlaaGlodS5Db21tZW50Lk9wZW5pbmcgPSAkY20uYXR0cignaXpoLW9wZW5pbmcnLCcxJykuY3NzKHsnZGlzcGxheSc6J25vbmUnfSkuZ2V0KDApOwogICAgICAgICQoJy56bS1jb21tZW50LWJveDp2aXNpYmxlOm5vdChbaXpoLW9wZW5pbmc9MV0pJykKICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24oaSxlKXsKICAgICAgICAgICAgICAgICQoZSkuY3NzKCd2aXNpYmlsaXR5JywnaGlkZGVuJykuY2xvc2VzdCgnLnptLWl0ZW0tbWV0YScpLmZpbmQoJy50b2dnbGUtY29tbWVudCcpWzBdLmNsaWNrKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIHZhciB3aW5XaWR0aD1pWmhpaHUuJHdpbi53aWR0aCgpCiAgICAgICAgICAsIG1jTGVmdD1pWmhpaHUuJG1haW4ub2Zmc2V0KCkubGVmdAogICAgICAgICAgLCAkY3Q9JGNtLmNsb3Nlc3QoJy56dS1tYWluLWNvbnRlbnQtaW5uZXInKQogICAgICAgICAgLCBjdE1hcmdpbkw9cGFyc2VJbnQoJGN0LmNzcygnbWFyZ2luLWxlZnQnKSkKICAgICAgICAgICwgY3RXaWR0aD0kY3Qud2lkdGgoKStjdE1hcmdpbkwKICAgICAgICAgICwgY3RMZWZ0PSRjdC5vZmZzZXQoKS5sZWZ0LWN0TWFyZ2luTAogICAgICAgICAgLCAkbWV0YT0kY20uY2xvc2VzdCgnLnptLWl0ZW0tbWV0YScpCiAgICAgICAgICAsIG10V2lkdGg9JG1ldGEuaW5uZXJXaWR0aCgpCiAgICAgICAgICAsIG1pbldpZHRoPWlaaGlodS4kbWFpbi53aWR0aCgpLWN0V2lkdGgKICAgICAgICAgICwgY21XaWR0aD1tdFdpZHRoCiAgICAgICAgICAsIG1heFdpZHRoPXdpbldpZHRoLWN0V2lkdGgKICAgICAgICAgICwgbz1mdW5jdGlvbigpewogICAgICAgICAgICAgICAgJGNtLmF0dHIoJ29wZW5lZCcsJzEnKTsKICAgICAgICAJCWlmKCEkYWMpewogICAgICAgICAgICAgICAgICAgIGlaaGlodS5Db21tZW50LmJveCgkY20pOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAJCX0KICAgICAgICAgICAgICAgIHZhciBjdXJyVG9wPV9kb2MuYm9keS5zY3JvbGxUb3AKICAgICAgICAgICAgICAgICAgLCAkbj0kYWMubmV4dCgpLCRuPSRuLmxlbmd0aD8kbjokYWMucGFyZW50KCkubmV4dCgpCiAgICAgICAgICAgICAgICAgICwgdD0kYWMub2Zmc2V0KCkudG9wLWlaaGlodS4kbWFpbi5vZmZzZXQoKS50b3AKICAgICAgICAgICAgICAgICAgLCBiPSRhYy5vZmZzZXQoKS50b3AtaVpoaWh1LiRtYWluLm9mZnNldCgpLnRvcAogICAgICAgICAgICAgICAgICAsIHc9JGFjLndpZHRoKCkKICAgICAgICAgICAgICAgICAgLCBpbkFuc3dlcj0kYWMuaXMoJy56bS1pdGVtLWFuc3dlcicpCiAgICAgICAgICAgICAgICAgICwgaW5RdWVzdGlvbj0kYWMuaXMoJyN6aC1xdWVzdGlvbi1kZXRhaWwnKQogICAgICAgICAgICAgICAgICAsICRxdWVzdGlvbk1ldGE9JCgnI3poLXF1ZXN0aW9uLW1ldGEtd3JhcCcpLy9xdWVzdGlvbl9tZXRhCiAgICAgICAgICAgICAgICAgICwgaD1pblF1ZXN0aW9uPyRxdWVzdGlvbk1ldGEub2Zmc2V0KCkudG9wKyRxdWVzdGlvbk1ldGEuaGVpZ2h0KCkrcGFyc2VJbnQoJHF1ZXN0aW9uTWV0YS5jc3MoJ3BhZGRpbmctYm90dG9tJykpLWlaaGlodS4kbWFpbi5vZmZzZXQoKS50b3AKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDokYWMuaGVpZ2h0KCkrcGFyc2VJbnQoJGFjLmNzcygncGFkZGluZy1ib3R0b20nKSkrcGFyc2VJbnQoJG4uY3NzKCdwYWRkaW5nLXRvcCcpKQogICAgICAgICAgICAgICAgOwogICAgICAgICAgICAgICAgaWYoISRhYy5maW5kKCcuaXpoX3RhcGVfYSwuaXpoX3RhcGVfYicpLmxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAkYWMKICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8ZGl2PicsIHsgJ2NsYXNzJzogJ2l6aF90YXBlX2EnIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzxkaXY+JywgeyAnY2xhc3MnOiAnaXpoX3RhcGVfYicgfSkpCiAgICAgICAgICAgICAgICBpZighJGNtKSRjbT0kYWMuZmluZCgnLnptLWNvbW1lbnQtYm94Jyk7CiAgICAgICAgICAgICAgICBpZigkY20ubGVuZ3RoKXsKICAgICAgICAgICAgICAgICAgICBpZighJGNtLmF0dHIoJ3RhYmluZGV4JykpewogICAgICAgICAgICAgICAgICAgICAgICAkY20uYXR0cigndGFiaW5kZXgnLCctMScpLmZvY3VzKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKGluUXVlc3Rpb24pewogICAgICAgICAgICAgICAgICAgICAgICAkKCcjaXpoX1F1ZXN0aW9uU2hhZG93JykuY3NzKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnOmgKICAgICAgICAgICAgICAgICAgICAgICAgICAsICdtYXJnaW4tYm90dG9tJzotaAogICAgICAgICAgICAgICAgICAgICAgICB9KS5zaG93KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICRxdWVzdGlvbk1ldGEubmV4dCgnOnZpc2libGUnKS5hbmRTZWxmKCkuYWRkQ2xhc3MoJ2l6aF9ub0JvcmRlcicpOwogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAkYWMuYWRkQ2xhc3MoJ2l6aF9ib3hTaGFkb3cnKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgJGFjLmZpbmQoJy5pemhfdGFwZV9hJykuY3NzKHsKICAgICAgICAgICAgICAgICAgICAgICAgJ3Bvc2l0aW9uJzonYWJzb2x1dGUnCiAgICAgICAgICAgICAgICAgICAgICAsICd3aWR0aCc6MQogICAgICAgICAgICAgICAgICAgICAgLCAnaGVpZ2h0JzpoCiAgICAgICAgICAgICAgICAgICAgICAsICd0b3AnOjAKICAgICAgICAgICAgICAgICAgICAgICwgJ21hcmdpbi1sZWZ0Jzp3LTEKICAgICAgICAgICAgICAgICAgICAgICwgJ3otaW5kZXgnOicxMDAwMCcKICAgICAgICAgICAgICAgICAgICAgICwgJ2JhY2tncm91bmQtY29sb3InOicjZmZmJwogICAgICAgICAgICAgICAgICAgIH0pLnNob3coKTsKICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpWmhpaHUuQ29tbWVudC5ib3goCiAgICAgICAgICAgICAgICAgICAgICAgICRjbS5jc3MoeydsZWZ0JzptdFdpZHRoLTF9KS5hdHRyKCdpemhfaW5RdWVzdGlvbicsaW5RdWVzdGlvbj8nMSc6JzAnKS5yZW1vdmVBdHRyKCdpemgtb3BlbmluZycpCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAkKCcubWVudGlvbi1wb3B1cCcpLmF0dHIoJ2RhdGEtYWlkJywkYWMuYXR0cignZGF0YS1haWQnKSk7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAkYWMuZmluZCgnLnp1LXF1ZXN0aW9uLWFuc3dlci1tZXRhLWNvbW1lbnQnKVswXS5jbGljaygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJGFjLmZpbmQoJy5pemhfdGFwZV9iJykuY3NzKHsKICAgICAgICAgICAgICAgICAgICAncG9zaXRpb24nOidhYnNvbHV0ZScKICAgICAgICAgICAgICAgICAgLCAnd2lkdGgnOjEKICAgICAgICAgICAgICAgICAgLCAnaGVpZ2h0JzpoCiAgICAgICAgICAgICAgICAgICwgJ3RvcCc6MAogICAgICAgICAgICAgICAgICAsICdtYXJnaW4tbGVmdCc6dwogICAgICAgICAgICAgICAgICAsICd6LWluZGV4JzonOTk5OCcKICAgICAgICAgICAgICAgICAgLCAnYmFja2dyb3VuZC1jb2xvcic6JyNlZWUnCiAgICAgICAgICAgICAgICB9KS5zaG93KCk7CiAgICAgICAgICAgICAgICAvLyRhYy5jc3MoJ2JvcmRlci1jb2xvcicsJyM5OTk5OTknKTsKICAgICAgICAgICAgICAgIC8vJG4uY3NzKCdib3JkZXItY29sb3InLCcjOTk5OTk5Jyk7CiAgICAgICAgICAgICAgICAkKCcuemgtYmFja3RvdG9wJykuY3NzKCd2aXNpYmlsaXR5JywnaGlkZGVuJyk7CiAgICAgICAgICAgICAgICBpWmhpaHUuJGJvZHkuc2Nyb2xsVG9wKGN1cnJUb3ApOwogICAgICAgICAgICAgICAgaWYoaWNtRm9jdXMpewogICAgICAgICAgICAgICAgICAgIHZhciAkaWNtPSQoaWNtRm9jdXMpLmF0dHIoJ2l6aF9oaWxpZ2h0JywnMScpCiAgICAgICAgICAgICAgICAgICAgICAsICRsaXN0PSRpY20uY2xvc2VzdCgnLnptLWNvbW1lbnQtbGlzdCcpOwogICAgICAgICAgICAgICAgICAgICRsaXN0LnNjcm9sbFRvcChpY21Gb2N1cy5vZmZzZXRUb3AtJGxpc3QuZ2V0KDApLm9mZnNldFRvcCk7CiAgICAgICAgICAgICAgICAgICAgaVpoaWh1LkNvbW1lbnQuSGlMaWdodEl0ZW09aWNtRm9jdXM7CiAgICAgICAgICAgICAgICAgICAgaVpoaWh1LkNvbW1lbnQuSGlMaWdodENvbG9yPSdyZ2IoMjU1LDI1NSwxNjApJzsKICAgICAgICAgICAgICAgICAgICAkaWNtLmNsaWNrKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpWmhpaHU9d2luZG93LmlaaGlodTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaVpoaWh1JiZpWmhpaHUuQ29tbWVudC5IaUxpZ2h0SXRlbSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGlaaGlodS5Db21tZW50LkhpTGlnaHRJdGVtKS5yZW1vdmVBdHRyKCdpemhfaGlsaWdodCcpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgIGlmKG1heFdpZHRoPjU0OSltYXhXaWR0aD01NDk7CiAgICAgICAgaWYoY21XaWR0aD5tYXhXaWR0aCkKICAgICAgICAgICAgY21XaWR0aD1tYXhXaWR0aDsKICAgICAgICBpZihjbVdpZHRoPG1pbldpZHRoKQogICAgICAgICAgICBjbVdpZHRoPW1pbldpZHRoOwogICAgICAgICRjbS5hZGRDbGFzcygnaXpoX2JveFNoYWRvdycpLmNzcygkLmV4dGVuZChjc3NfY29tbWVudCx7J3dpZHRoJzpjbVdpZHRoLTl9KSk7CiAgICAgICAgLy9pZighJGNtLmlzKCcuZW1wdHknKSkKICAgICAgICAgICAgJGNtLmNzcyh7J3BhZGRpbmcnOicxMDBweCAwcHggMHB4IDdweCd9KTsKICAgICAgICAkKCdpLnptLWNvbW1lbnQtYnViYmxlJywkY20pLmhpZGUoKTsKICAgICAgICBpZihub0NvbW1lbnRPcGVuaW5nKXsKICAgICAgICAgICAgdmFyIGNtV2lkdGhPdmVyPWNtV2lkdGgtd2luV2lkdGgKICAgICAgICAgICAgICAsIHNoaWZ0TGVmdD1jbVdpZHRoT3ZlcitjdFdpZHRoK2N0TGVmdAogICAgICAgICAgICA7CiAgICAgICAgICAgIGlmKHNoaWZ0TGVmdD4wKXsKICAgICAgICAgICAgICAgIGlmKHNoaWZ0TGVmdD5jdExlZnQpe3NoaWZ0TGVmdD1tY0xlZnQ7fQogICAgICAgICAgICAgICAgZWxzZSBpZihjbVdpZHRoT3Zlcj4wKXtzaGlmdExlZnQtPWNtV2lkdGhPdmVyO30KICAgICAgICAgICAgfQogICAgICAgICAgICBpZihzaGlmdExlZnQ8MCl7c2hpZnRMZWZ0PTA7fQogICAgICAgICAgICBpZihzaGlmdExlZnQgJiYgJGFjKXsKICAgICAgICAgICAgICAgICRjdC5jc3Moeydwb3NpdGlvbic6J3JlbGF0aXZlJywnbGVmdCc6MH0pLmFuaW1hdGUoe2xlZnQ6LXNoaWZ0TGVmdH0sbyk7CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgJGN0LmNzcyh7J3Bvc2l0aW9uJzoncmVsYXRpdmUnLCdsZWZ0Jzotc2hpZnRMZWZ0fSk7CiAgICAgICAgICAgICAgICBvKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgbygpOwogICAgICAgIH0JCiAgICB9OwogICAgdGhpcy5jbG9zZSA9IGZ1bmN0aW9uKCRhYywkY20pewogICAgICAgIGlmKCEkY20pJGNtPSRhYy5maW5kKCcuem0tY29tbWVudC1ib3gnKTsKICAgICAgICB2YXIgJGN0PSRjbS5jbG9zZXN0KCcuenUtbWFpbi1jb250ZW50LWlubmVyJyk7CiAgICAgICAgdmFyIG89ZnVuY3Rpb24oKXsKICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ3Bvc2l0aW9uJywnJyk7CiAgICAgICAgICAgIGlmKCEkYWMpcmV0dXJuOwogICAgICAgICAgICB2YXIgJG49JGFjLm5leHQoKQogICAgICAgICAgICAgICwgJG49JG4ubGVuZ3RoPyRuOiRhYy5wYXJlbnQoKS5uZXh0KCkKICAgICAgICAgICAgICAsIGluUXVlc3Rpb249JGFjLmlzKCcjemgtcXVlc3Rpb24tZGV0YWlsJyk7CiAgICAgICAgICAgIGlmKCEkYWMpe3JldHVybjt9CiAgICAgICAgICAgIGlmKGluUXVlc3Rpb24pewogICAgICAgICAgICAgICAgJCgnI2l6aF9RdWVzdGlvblNoYWRvdycpLmhpZGUoKTsKICAgICAgICAgICAgICAgICQoJyN6aC1xdWVzdGlvbi1tZXRhLXdyYXAnKS5uZXh0KCc6dmlzaWJsZScpLmFuZFNlbGYoKS5yZW1vdmVDbGFzcygnaXpoX25vQm9yZGVyJyk7CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgJGFjLnJlbW92ZUNsYXNzKCdpemhfYm94U2hhZG93Jyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8kYWMuY3NzKCdib3JkZXItY29sb3InLCcjREREREREJyk7CiAgICAgICAgICAgIC8vJG4uY3NzKCdib3JkZXItY29sb3InLCcjREREREREJyk7CiAgICAgICAgICAgICQoJy5pemhfdGFwZV9hOnZpc2libGUsLml6aF90YXBlX2I6dmlzaWJsZScpLmhpZGUoKTsKICAgICAgICAgICAgJCgnLnpoLWJhY2t0b3RvcCcpLmNzcygndmlzaWJpbGl0eScsJ3Zpc2libGUnKTsKICAgICAgICB9OwoKICAgICAgICBpZihpWmhpaHUuQ29tbWVudC5PcGVuaW5nID09ICRjbS5nZXQoMCkpewogICAgICAgICAgICBpWmhpaHUuQ29tbWVudC5PcGVuaW5nID0gbnVsbDsKICAgICAgICAgICAgJGN0LmFuaW1hdGUoe2xlZnQ6MH0sbyk7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGlmKCEkYWMpeyRjdC5jc3Moe2xlZnQ6MH0pO30KICAgICAgICAgICAgbygpOwogICAgICAgIH0KICAgICAgICAKICAgIH07CiAgICB0aGlzLnByb2Nlc3NDb21tZW50ID0gZnVuY3Rpb24oJGNtLGZvY3VzTmFtZSl7CiAgICAgICAgdmFyIGxvYWRpbmc9ZmFsc2U7CiAgICAgICAgaWYoJGNtLmlzKCcuem0tY29tbWVudC1zcGlubmVyJykpewogICAgICAgICAgICAkY209JGNtLmNsb3Nlc3QoJy56bS1jb21tZW50LWJveCcpOwogICAgICAgICAgICBsb2FkaW5nPXRydWU7CiAgICAgICAgfQogICAgICAgIGlmKCEkY20uaXMoJy56bS1jb21tZW50LWJveCcpKXJldHVybjsKICAgICAgICB2YXIgJGl0ZW09aVpoaWh1LmdldEl0ZW0oJGNtKTsKICAgICAgICBpZihpWmhpaHUuQ29tbWVudC5SaWdodENvbW1lbnQmJmxvYWRpbmcpewogICAgICAgICAgICB2YXIgY21MZWZ0PSRpdGVtLndpZHRoKCktMTsKICAgICAgICAgICAgJGNtLmNzcyh7J2xlZnQnOmNtTGVmdCwnd2lkdGgnOjIxNiwnei1pbmRleCc6JzEwMDAwJ30pOwogICAgICAgIH0KICAgICAgICBpZigkY20uZmlsdGVyKCcuem0tY29tbWVudC1ib3gnKS5oYXMoJy56bS1jb21tZW50LWxpc3QnKS5sZW5ndGgpewovKiBDb2xsZWN0aW9ucyBmb3IgY29tbWVudAogICAgICAgICAgICAkY20uZmluZCgnLnptLWNvbW1lbnQtZWRpdGFibGUnKS5iaW5kKCdET01Ob2RlSW5zZXJ0ZWQnLGZ1bmN0aW9uKGV2ZW50KXsKICAgICAgICAgICAgICAgIHZhciAkYz0kKGV2ZW50LnRhcmdldCksJGNtPSRjLmNsb3Nlc3QoJy56bS1jb21tZW50LWJveCcpOwogICAgICAgICAgICAgICAgaWYoJGMuaXMoJ2EubWVtYmVyX21lbnRpb24nKSl7CiAgICAgICAgICAgICAgICAgICAgaWYoJGNtLmNoaWxkcmVuKCcuaXpoX2NvbGxlY3Rpb25zJykubGVuZ3RoPD0wKXsKICAgICAgICAgICAgICAgICAgICAgICAgJCgnPGRpdiBjbGFzcz0iaXpoX2NvbGxlY3Rpb25zIj5sb2FkaW5nLi4uPC9kaXY+JykuYmluZCgnbW91c2VvdmVyJyxmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5zaG93KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmJpbmQoJ21vdXNlb3V0JyxmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5oaWRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmFwcGVuZFRvKCRjbSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICRjLmJpbmQoJ21vdXNlb3ZlcicsZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRjZT0kKHRoaXMpLmNsb3Nlc3QoJy56bS1jb21tZW50LWVkaXRhYmxlJyksJGNtPSQodGhpcykuY2xvc2VzdCgnLnptLWNvbW1lbnQtYm94Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICRjbS5jaGlsZHJlbignLml6aF9jb2xsZWN0aW9ucycpLmNzcyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYm90dG9tJzokKHRoaXMpLmhlaWdodCgpLSQodGhpcykucG9zaXRpb24oKS50b3AtMQogICAgICAgICAgICAgICAgICAgICAgICAgICwgJ2xlZnQnOiQodGhpcykucG9zaXRpb24oKS5sZWZ0CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLnNob3coKTsKICAgICAgICAgICAgICAgICAgICAgICAgJC5wb3N0KCdodHRwOi8vd3d3LnpoaWh1LmNvbScrJCh0aGlzKS5hdHRyKCdocmVmJykrJy9jb2xsZWN0aW9ucycKICAgICAgICAgICAgICAgICAgICAgICAgICAsICQucGFyYW0oe194c3JmOiQoJ2lucHV0W25hbWU9X3hzcmZdJykudmFsKCl9KQogICAgICAgICAgICAgICAgICAgICAgICAgICwgZnVuY3Rpb24ocmVzdWx0LHN0YXR1cyx4aHIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAkYy5iaW5kKCdtb3VzZW91dCcsZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRjZT0kKHRoaXMpLmNsb3Nlc3QoJy56bS1jb21tZW50LWVkaXRhYmxlJyksJGNtPSQodGhpcykuY2xvc2VzdCgnLnptLWNvbW1lbnQtYm94Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICRjbS5jaGlsZHJlbignLml6aF9jb2xsZWN0aW9ucycpLmhpZGUoKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiovCiAgICAgICAgICAgIGlmKGlaaGlodS5Db21tZW50LlJpZ2h0Q29tbWVudCl7CiAgICAgICAgICAgICAgICAkY20uY2xvc2VzdCgnLnptLWl0ZW0tbWV0YScpLmZpbmQoJy50b2dnbGUtY29tbWVudCcpLmNsaWNrKGZ1bmN0aW9uKGV2ZW50KXsKICAgICAgICAgICAgICAgICAgICB2YXIgJG9wZW5lZEJ5PSQodGhpcykKICAgICAgICAgICAgICAgICAgICAgICwgJGFjPSRvcGVuZWRCeS5jbG9zZXN0KCcuem0taXRlbS1tZXRhJykKICAgICAgICAgICAgICAgICAgICAgICwgJGNtPSgkYWMucGFyZW50KCkuaXMoJy56bS1pdGVtLW1ldGEuZmVlZC1tZXRhJyk/JGFjLnBhcmVudCgpOiRhYykuZmluZCgnLnptLWNvbW1lbnQtYm94JykuY3NzKCd2aXNpYmlsaXR5JywnaGlkZGVuJykKICAgICAgICAgICAgICAgICAgICA7CiAgICAgICAgICAgICAgICAgICAgaWYoJGNtLmxlbmd0aCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkaXRlbT1pWmhpaHUuZ2V0SXRlbSgkY20pOwogICAgICAgICAgICAgICAgICAgICAgICBpZigkY20uaXMoJzpoaWRkZW4nKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpWmhpaHUuQ29tbWVudC5vcGVuKCRpdGVtLCRjbSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaVpoaWh1LkNvbW1lbnQuY2xvc2UoJGl0ZW0sJGNtKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vaWYoJGNtLmlzKCcuZW1wdHknKSkgcmV0dXJuOwogICAgICAgICAgICB2YXIgJGxpc3Q9JGNtLmZpbmQoJy56bS1jb21tZW50LWxpc3QnKTsKICAgICAgICAgICAgJGxpc3QuYmluZCgnRE9NTm9kZUluc2VydGVkJyxmdW5jdGlvbihldmVudCl7CiAgICAgICAgICAgIC8vdXRpbHMub2JzZXJ2ZURPTU5vZGVBZGRlZCgkbGlzdFswXSxmdW5jdGlvbihldmVudCl7CiAgICAgICAgICAgIAkvKmlmKCFldmVudC5hZGRlZE5vZGVzKXJldHVybjsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdOb2RlcyAnK2V2ZW50LmFkZGVkTm9kZXMubGVuZ3RoKycgaW5zZXJ0ZWQnKTsKICAgICAgICAgICAgCWZvcih2YXIgaT0wO2k8ZXZlbnQuYWRkZWROb2Rlcy5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgCQl2YXIgJGljbT0kKGV2ZW50LmFkZGVkTm9kZXNbaV0pOwogICAgICAgICAgICAgICAgfSovCiAgICAgICAgICAgICAgICB2YXIgJGljbT0kKGV2ZW50LnRhcmdldCkuZmlsdGVyKCcuem0taXRlbS1jb21tZW50LC56bS1jb21tZW50LWZvcm0nKTsKICAgICAgICAgICAgICAgIGlmKCEkaWNtLmxlbmd0aClyZXR1cm47CiAgICAgICAgICAgICAgICB2YXIgJGxpc3Q9JCh0aGlzKQogICAgICAgICAgICAgICAgICAsICRjbT0kbGlzdC5jbG9zZXN0KCcuem0tY29tbWVudC1ib3g6dmlzaWJsZScpOwogICAgICAgICAgICAgICAgaWYoJGljbS5pcygnLnptLWl0ZW0tY29tbWVudCcpKXsKICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCRpY20pOwogICAgICAgICAgICAgICAgICAgIGlmKGlaaGlodS5RdWlja0Jsb2NrKXsKICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnQWRkaW5nIFF1aWNrQmxvY2snKTsKICAgICAgICAgICAgICAgICAgICAgICAgaVpoaWh1LlF1aWNrQmxvY2suYWRkUXVpY2tCbG9ja0luT25lQ29tbWVudCgkaWNtKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYoaVpoaWh1LkNvbW1lbnQuUmlnaHRDb21tZW50KXsKICAgICAgICAgICAgICAgICAgICAgICAgJGxpc3QuY3NzKCdoZWlnaHQnLCcxMDAlJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICRpY20uc2hvdygpLmJpbmQoJ0RPTU5vZGVSZW1vdmVkJyxmdW5jdGlvbihldmVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGljbT0kKGV2ZW50LnRhcmdldCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighJGljbS5pcygnLnptLWl0ZW0tY29tbWVudCcpKXJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkbGlzdD0kaWNtLmhpZGUoKS5jbG9zZXN0KCcuem0tY29tbWVudC1saXN0JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCAkY209JGxpc3QuY2xvc2VzdCgnLnptLWNvbW1lbnQtYm94OnZpc2libGUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRjbS5sZW5ndGgpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ1JlZnJlc2hpbmcgY29tbWVudCBsaXN0Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGxpc3QuY2hpbGRyZW4oKS5sZW5ndGg9PTEpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuaXpoLXF1aWNrLWJsb2NrLXN3aXRjaCcsJGNtKS5hZGQoJy5pemgtYnV0dG9ucy1jbS1SJywkY20pLmhpZGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaVpoaWh1LkNvbW1lbnQuYm94KCRjbSxmYWxzZSxmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRjbS5sZW5ndGgpewogICAgICAgICAgICAJICAgICAgICAgICAgdmFyIGNvdW50Tm93PSRsaXN0LmNoaWxkcmVuKCkubGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgIAkgICwgY291bnRBbGw9cGFyc2VJbnQoJGNtLmF0dHIoJ2RhdGEtY291bnQnKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBjb3VudFJlc3Q9Y291bnRBbGwtY291bnROb3cKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBub3RBbGw9JCh0aGlzKS5oYXMoJy5sb2FkLW1vcmUnKS5sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgCTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCghbm90QWxsKSYmY291bnRSZXN0PjEpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgCXJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ1JlZnJlc2hpbmcgY29tbWVudCBsaXN0Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuaXpoLXF1aWNrLWJsb2NrLXN3aXRjaCcsJGNtKS5hZGQoJy5pemgtYnV0dG9ucy1jbS1SJywkY20pLnNob3coKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlaaGlodS5Db21tZW50LmJveCgkY20sZmFsc2UsZmFsc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobm90QWxsfHxjb3VudFJlc3Q8MCkkbGlzdC5zY3JvbGxUb3AoJGljbS5nZXQoMCkub2Zmc2V0VG9wKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH1lbHNlIGlmKCRpY20uaXMoJy56bS1jb21tZW50LWZvcm0nKSl7CiAgICAgICAgICAgICAgICAgICAgaWYoaVpoaWh1LkNvbW1lbnQuUmlnaHRDb21tZW50KXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGNtLmxlbmd0aCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHJjbT0kaWNtOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGljbT0kcmNtLmNsb3Nlc3QoJy56bS1pdGVtLWNvbW1lbnQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyY20uZmluZCgnYS56bS1jb21tZW50LWNsb3NlLnptLWNvbW1hbmQtY2FuY2VsJykuY2xpY2soZnVuY3Rpb24oZXZlbnQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkcmNtPSQodGhpcykuY2xvc2VzdCgnLnptLWNvbW1lbnQtZm9ybScpLmhpZGUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCAkY209JHJjbS5jbG9zZXN0KCcuem0tY29tbWVudC1ib3g6dmlzaWJsZScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRjbS5sZW5ndGgpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpWmhpaHUuQ29tbWVudC5ib3goJGNtLGZhbHNlLGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyY20ucGFyZW50KCkuZmluZCgnYS5yZXBseS56bS1jb21tZW50LW9wLWxpbmsnKS5jbGljayhmdW5jdGlvbihldmVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRyY209JCh0aGlzKS5jbG9zZXN0KCcuem0tY29tbWVudC1jb250ZW50LXdyYXAnKS5jaGlsZHJlbignLnptLWNvbW1lbnQtZm9ybScpLnRvZ2dsZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsICRpY209JCh0aGlzKS5jbG9zZXN0KCcuem0taXRlbS1jb21tZW50JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgJGxpc3Q9JGljbS5jbG9zZXN0KCcuem0tY29tbWVudC1saXN0JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgJGNtPSRsaXN0LmNsb3Nlc3QoJy56bS1jb21tZW50LWJveDp2aXNpYmxlJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGNtLmxlbmd0aCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlaaGlodS5Db21tZW50LmJveCgkY20sZmFsc2UsZmFsc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkcmNtLmlzKCc6dmlzaWJsZScpKSRsaXN0LnNjcm9sbFRvcCgkaWNtLmdldCgwKS5vZmZzZXRUb3AtJGxpc3QuZ2V0KDApLm9mZnNldFRvcCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyY20udG9nZ2xlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpWmhpaHUuQ29tbWVudC5ib3goJGNtLGZhbHNlLGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRsaXN0LnNjcm9sbFRvcCgkaWNtLmdldCgwKS5vZmZzZXRUb3AtJGxpc3QuZ2V0KDApLm9mZnNldFRvcCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgY21DbG9zZT1mdW5jdGlvbihldmVudCxhbHNvU2Nyb2xsVG9WaWV3Qm90dG9tKXsKICAgICAgICAgICAgICAgICAgICB2YXIgJGNtPSQodGhpcykuY2xvc2VzdCgnLnptLWNvbW1lbnQtYm94Jyk7CiAgICAgICAgICAgICAgICAJCWlmKCQodGhpcykuaXMoJ1tuYW1lPWNsb3NlZm9ybV0nKSYmKCEkY20uaXMoJy5lbXB0eScpKSlyZXR1cm47CiAgICAgICAgICAgICAgICAgICAgdmFyICRpdGVtPWlaaGlodS5nZXRJdGVtKCRjbSkvLy5hdHRyKCd0YWJpbmRleCcsJy0xJykuZm9jdXMoKS5yZW1vdmVBdHRyKCd0YWJpbmRleCcpCiAgICAgICAgICAgICAgICAgICAgICAsICRpdGVtTWV0YT0kY20uY2xvc2VzdCgnLnptLWl0ZW0tbWV0YScpCiAgICAgICAgICAgICAgICAgICAgICAsIGFsc29TY3JvbGw9dGhpcy5nZXRBdHRyaWJ1dGUoJ2l6aC1hbHNvU2Nyb2xsVG9WaWV3Qm90dG9tJyl8fCcnCiAgICAgICAgICAgICAgICAgICAgICAsIHNjcm9sbFRvcD0oZG9jdW1lbnQuYm9keS5zY3JvbGxUb3ApP2RvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AKICAgICAgICAgICAgICAgICAgICA7CiAgICAgICAgICAgICAgICAgICAgaWYoYWxzb1Njcm9sbCE9PScxJyl7CiAgICAgICAgICAgICAgICAgICAgICAgICRpdGVtTWV0YS5maW5kKCcudG9nZ2xlLWNvbW1lbnQnKVswXS5jbGljaygpOwogICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcD1zY3JvbGxUb3A7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wPXNjcm9sbFRvcDsKICAgICAgICAgICAgICAgICAgICAgICAgfSwxMDApOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlaaGlodS5Db21tZW50Lm1ldGFTY3JvbGxUb1ZpZXdCb3R0b20oJGl0ZW1NZXRhLGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICRpdGVtTWV0YS5maW5kKCcudG9nZ2xlLWNvbW1lbnQnKVswXS5jbGljaygpOwogICAgICAgICAgICAgICAgICAgIH0sZmFsc2UsdHJ1ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLCAkYnRuQ0M9JCgnPGE+Jyx7CiAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzonenUtcXVlc3Rpb24tYW5zd2VyLW1ldGEtY29tbWVudCBpemgtYnV0dG9uLWNjJwogICAgICAgICAgICAgICAgICAsIGhyZWY6J2phdmFzY3JpcHQ6dm9pZCgwKTsnCiAgICAgICAgICAgICAgICAgICwgY2xpY2s6Y21DbG9zZQogICAgICAgICAgICAgICAgICAsICdkYXRhLXRpcCc6J3MkdCTmlLbotbfor4Torrrlubbot7Povazoh7PmiYDlsZ7lm57nrZQnCiAgICAgICAgICAgICAgICB9KS50ZXh0KCfmlLbotbcnKQogICAgICAgICAgICAgICwgJGJ1dHRvbnNMPSQoJzxkaXY+Jyx7CiAgICAgICAgICAgICAgICAJJ2NsYXNzJzonaXpoLWJ1dHRvbnMtY20tTCcKICAgICAgICAgICAgICAgIH0pLnByZXBlbmRUbygkY20pCiAgICAgICAgICAgICAgLCAkYnV0dG9uc1I9JCgnPGRpdj4nLHsKICAgICAgICAgICAgICAgIAknY2xhc3MnOidpemgtYnV0dG9ucy1jbS1SJwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgOwogICAgICAgICAgICBpZihpWmhpaHUuQ29tbWVudC5SaWdodENvbW1lbnQpewogICAgICAgICAgICAgICAgJGNtLmNoaWxkcmVuKCcuem0tY29tbWVudC1mb3JtJykuZmluZCgnW25hbWU9Y2xvc2Vmb3JtXScpLmNsaWNrKGNtQ2xvc2UpOwogICAgICAgICAgICAgICAgJGJ0bkNDLmNsb25lKHRydWUpLmNzcyh7CiAgICAgICAgICAgICAgICAgICAgJ2JhY2tncm91bmQtaW1hZ2UnOiAndXJsKCIvc3RhdGljL2ltZy9zcHJpdGVzLTEuOS4yLnBuZyIpJwogICAgICAgICAgICAgICAgICAsICdiYWNrZ3JvdW5kLXBvc2l0aW9uJzogJy0yNjFweCAtNjJweCcKICAgICAgICAgICAgICAgICAgLCAnYmFja2dyb3VuZC1yZXBlYXQnOiAnbm8tcmVwZWF0JwogICAgICAgICAgICAgICAgICAsICdkaXNwbGF5JzogJ2lubGluZS1ibG9jaycKICAgICAgICAgICAgICAgICAgLCAnd2lkdGgnOiAxNQogICAgICAgICAgICAgICAgICAsICdoZWlnaHQnOiAxNQogICAgICAgICAgICAgICAgICAsICdwb3NpdGlvbic6ICdhYnNvbHV0ZScKICAgICAgICAgICAgICAgICAgLCAnbGVmdCc6IDAKICAgICAgICAgICAgICAgICAgLCAndG9wJzogMAogICAgICAgICAgICAgICAgICAsICd6LWluZGV4JzogJzEwMDAwJwogICAgICAgICAgICAgICAgfSkuYXR0cignZGF0YS10aXAnLCdzJGwk5pS26LW36K+E6K66JykudGV4dCgnJykucHJlcGVuZFRvKCRjbSkKICAgICAgICAgICAgICAgICRidXR0b25zUi5wcmVwZW5kVG8oJGNtKTsKICAgICAgICAgICAgICAgIGlmKCRsaXN0LmNoaWxkcmVuKCkubGVuZ3RoPT0wKXsKICAgICAgICAgICAgICAgICAgICAkYnV0dG9uc1IuaGlkZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJGJ0bkNDLmNzcyh7CiAgICAgICAgICAgICAgICAgICAgJ2Zsb2F0JzonbGVmdCcKICAgICAgICAgICAgICAgICAgLCAnbWFyZ2luLWxlZnQnOjcKICAgICAgICAgICAgICAgIH0pLmF0dHIoJ2l6aC1hbHNvU2Nyb2xsVG9WaWV3Qm90dG9tJywnMScpLnByZXBlbmQoJzxpIGNsYXNzPSJ6LWljb24taXpoLWZvbGQiLz4nKS5wcmVwZW5kVG8oJGJ1dHRvbnNMKTsKICAgICAgICAgICAgICAgICQoJzxhPicsewogICAgICAgICAgICAgICAgICAgICdjbGFzcyc6J2l6aC1idXR0b24gaXpoLWJhY2stdG9wJwogICAgICAgICAgICAgICAgICAsICdkYXRhLXRpcCc6J3MkbCTov5Tlm57pobbpg6gnCiAgICAgICAgICAgICAgICAgICwgaHJlZjonamF2YXNjcmlwdDp2b2lkKDApOycKICAgICAgICAgICAgICAgICAgLCBjbGljazpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMucGFyZW50Tm9kZSkubmV4dEFsbCgnLnptLWNvbW1lbnQtbGlzdCcpLnNjcm9sbFRvcCgwKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KS5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgJCgnPGk+JywgeyAnY2xhc3MnOiAnemctaWNvbiB6LWljb24tZm9sZCcgfSkKICAgICAgICAgICAgICAgICkuYWRkKAogICAgICAgICAgICAgICAgICAgICQoJzxhPicsewogICAgICAgICAgICAgICAgICAgICAgICAnY2xhc3MnOidpemgtYnV0dG9uIGl6aC1zaG93LWdvb2QnCiAgICAgICAgICAgICAgICAgICAgICAsICdkYXRhLXRpcCc6J3MkbCTkurrmsJTlppnor4QnCiAgICAgICAgICAgICAgICAgICAgICAsIGhyZWY6J2phdmFzY3JpcHQ6dm9pZCgwKTsnCiAgICAgICAgICAgICAgICAgICAgICAsIGNsaWNrOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkZT0kKHRoaXMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCAkYz0kZS5jbG9zZXN0KCcuem0tY29tbWVudC1ib3gnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgJGw9JGMuZmluZCgnLnptLWNvbW1lbnQtbGlzdCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCAkbj0kbC5maW5kKCcuem0taXRlbS1jb21tZW50JykuaGFzKCdzcGFuLmxpa2UtbnVtLm5pbCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGUuaGFzQ2xhc3MoJ29uJykpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGUuYXR0cignc2Nyb2xsVG9wX3Nob3dnb29kJywkbFswXS5zY3JvbGxUb3ApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJG4uc2hvdygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaVpoaWh1LkNvbW1lbnQuYm94KCRjLGZhbHNlLGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlLnJlbW92ZUNsYXNzKCdvbicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNjcm9sbFRvcCA9IHBhcnNlSW50KCRlLmF0dHIoJ3Njcm9sbFRvcCcpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFpc05hTihzY3JvbGxUb3ApKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRsLnNjcm9sbFRvcChzY3JvbGxUb3ApOwogICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlLmF0dHIoJ3Njcm9sbFRvcCcsJGxbMF0uc2Nyb2xsVG9wKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRuLmhpZGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlaaGlodS5Db21tZW50LmJveCgkYyxmYWxzZSxmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZS5hZGRDbGFzcygnb24nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSBwYXJzZUludCgkZS5hdHRyKCdzY3JvbGxUb3Bfc2hvd2dvb2QnKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighaXNOYU4oc2Nyb2xsVG9wKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbC5zY3JvbGxUb3Aoc2Nyb2xsVG9wKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgICAgICAkKCc8aT4nLCB7ICdjbGFzcyc6ICd6Zy1pY29uIHpnLWljb24tY29tbWVudC1saWtlJyB9KQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkuY3NzKHsKICAgICAgICAgICAgICAgICAgICAnZmxvYXQnOidyaWdodCcKICAgICAgICAgICAgICAgIH0pLmFwcGVuZFRvKCRidXR0b25zUik7CgogICAgICAgICAgICAgICAgaVpoaWh1LkNvbW1lbnQuUGFnZU5vdFNjcm9sbCA9IHRydWU7CiAgICAgICAgICAgICAgICAkbGlzdC5zY3JvbGwoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICB2YXIgJGU9JCh0aGlzKQogICAgICAgICAgICAgICAgICAgICAgLCAkYj0kZS5jbG9zZXN0KCcuem0tY29tbWVudC1ib3gnKS5maW5kKCcuaXpoLWJhY2stdG9wJykKICAgICAgICAgICAgICAgICAgICA7CiAgICAgICAgICAgICAgICAgICAgaWYoJGUuaGVpZ2h0KCkgPCB0aGlzLnNjcm9sbFRvcCl7CiAgICAgICAgICAgICAgICAgICAgICAgICRiLnJlbW92ZUNsYXNzKCdvZmYnKTsKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgJGIuYWRkQ2xhc3MoJ29mZicpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLnNjcm9sbCgpOwogICAgICAgICAgICAgICAgaVpoaWh1LkNvbW1lbnQuUGFnZU5vdFNjcm9sbCA9IGZhbHNlOwoKICAgICAgICAgICAgICAgIHZhciBpY21Gb2N1cz1udWxsOwogICAgICAgICAgICAgICAgICAgICRsaXN0LmNzcyh7CiAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnOiRjbS5pcygnLmVtcHR5Jyk/Jyc6JzEwMCUnCiAgICAgICAgICAgICAgICAgICAgICAsICdvdmVyZmxvdyc6J2F1dG8nCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAkbGlzdC5jaGlsZHJlbignLnptLWl0ZW0tY29tbWVudCcpLmVhY2goZnVuY3Rpb24oaSxlKXsKICAgICAgICAgICAgICAgICAgICB2YXIgJGljbT0kKGUpOwogICAgICAgICAgICAgICAgICAgICRpY20uYmluZCgnRE9NTm9kZVJlbW92ZWQnLGZ1bmN0aW9uKGV2ZW50KXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRpY209JChldmVudC50YXJnZXQpOwogICAgICAgICAgICAgICAgICAgICAgICBpZighJGljbS5pcygnLnptLWl0ZW0tY29tbWVudCcpKXJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRjbT0kaWNtLmhpZGUoKS5jbG9zZXN0KCcuem0tY29tbWVudC1ib3g6dmlzaWJsZScpOwogICAgICAgICAgICAgICAgICAgICAgICBpZigkY20ubGVuZ3RoKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCQodGhpcykuY2xvc2VzdCgnLnptLWNvbW1lbnQtbGlzdCcpLmNoaWxkcmVuKCkubGVuZ3RoPT0xKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuaXpoLXF1aWNrLWJsb2NrLXN3aXRjaCcsJGNtKS5hZGQoJy5pemgtYnV0dG9ucy1jbS1SJywkY20pLmhpZGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlaaGlodS5Db21tZW50LmJveCgkY20sZmFsc2UsZmFsc2UpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgJGljbS5maW5kKCdzcGFuLmxpa2UtbnVtJykuZWFjaChmdW5jdGlvbihpLGUpewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGlwPWUuZ2V0QXR0cmlidXRlKCdkYXRhLXRpcCcpLnJlcGxhY2UoJ3MkciQnLCdzJGwkJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRpcCE9JycpZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGlwJyx0aXApOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGlmICghaWNtRm9jdXMmJmZvY3VzTmFtZSYmZm9jdXNOYW1lIT0nJwogICAgICAgICAgICAgICAgICAgICAgICAmJiAkaWNtLmNoaWxkcmVuKCdhLnpnLWFuY2hvci1oaWRkZW5bbmFtZT0iJytmb2N1c05hbWUrJyJdJykubGVuZ3RoKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWNtRm9jdXM9JGljbS5nZXQoMCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBpWmhpaHUuQ29tbWVudC5vcGVuKCRpdGVtLCRjbSxpY21Gb2N1cyk7CiAgICAgICAgICAgICAgICB1dGlscy5vYnNlcnZlRE9NTm9kZUFkZGVkKCRjbS5jaGlsZHJlbignLnptLWNvbW1lbnQtZm9ybScpLmNoaWxkcmVuKCcuem0tY29tbWVudC1lZGl0YWJsZScpWzBdLGZ1bmN0aW9uKGV2ZW50KXsKICAgICAgICAgICAgICAgICAgICB2YXIgJGU9JChldmVudC50YXJnZXQpCiAgICAgICAgICAgICAgICAgICAgICAsICRmPSRlLmNsb3Nlc3QoJy56bS1jb21tZW50LWZvcm0nKQogICAgICAgICAgICAgICAgICAgICAgLCAkbD0kZi5wcmV2KCcuem0tY29tbWVudC1saXN0JykKICAgICAgICAgICAgICAgICAgICAgICwgJGM9JGYuY2xvc2VzdCgnLnptLWNvbW1lbnQtYm94W29wZW5lZD0xXScpCiAgICAgICAgICAgICAgICAgICAgICAsIGNoPSRjLmhlaWdodCgpCiAgICAgICAgICAgICAgICAgICAgICAsIHdpbkhlaWdodD1pWmhpaHUuJHdpbi5oZWlnaHQoKQogICAgICAgICAgICAgICAgICAgICAgLCBzY3JvbGxUb3A9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCtkb2N1bWVudC5ib2R5LnNjcm9sbFRvcAogICAgICAgICAgICAgICAgICAgICAgLCBuYXZIZWlnaHQ9aVpoaWh1LiRib2R5LmNoaWxkcmVuKCkuZmlyc3QoKS5oZWlnaHQoKQogICAgICAgICAgICAgICAgICAgICAgLCBiYXI9JCgnLnp1LWdsb2JhbC1ub3RpZnkuenUtZ2xvYmFsLW5vdGlmeS1pbmZvOnZpc2libGUnKQogICAgICAgICAgICAgICAgICAgICAgLCBiYXJIZWlnaHQ9IWJhci5sZW5ndGg/MDpiYXIub3V0ZXJIZWlnaHQoKQogICAgICAgICAgICAgICAgICAgICAgLCBiYXNlVG9wPSgoYmFySGVpZ2h0JiZiYXIuY3NzKCdwb3NpdGlvbicpPT0nZml4ZWQnKT9iYXJIZWlnaHQ6KHNjcm9sbFRvcD5iYXJIZWlnaHQ/MDpiYXJIZWlnaHQtc2Nyb2xsVG9wKSkrbmF2SGVpZ2h0CiAgICAgICAgICAgICAgICAgICAgICAsIG1pbkhlaWdodD0xMTIKICAgICAgICAgICAgICAgICAgICAgICwgbWF4SGVpZ2h0PXdpbkhlaWdodC1iYXNlVG9wLTM1CiAgICAgICAgICAgICAgICAgICAgOwogICAgICAgICAgICAgICAgICAgIGlmKCEkYy5sZW5ndGgpcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGlmKCEkYy5pcygnLmVtcHR5JykmJiRsLmNoaWxkcmVuKCkubGVuZ3RoPjApewogICAgICAgICAgICAgICAgICAgICAgICBsaD0kbC5oZWlnaHQoKTsKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgbGg9MDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyICR0PSRlLmNsb25lKCkuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSkKICAgICAgICAgICAgICAgICAgICAJICAgIC5jc3Moeydwb3NpdGlvbic6J2Fic29sdXRlJywnei1pbmRleCc6Jy0xJywnd2lkdGgnOiRlLndpZHRoKCksJ21pbi1oZWlnaHQnOjIyfSkKICAgICAgICAgICAgICAgICAgICAgICwgZWg9JHQuaGVpZ2h0KCkKICAgICAgICAgICAgICAgICAgICAgICwgaD1NYXRoLm1heChlaCxsaCkrKGxoPT0wPzkwOjEwMCkKICAgICAgICAgICAgICAgICAgICA7CiAgICAgICAgICAgICAgICAgICAgJHQucmVtb3ZlKCk7JHQ9bnVsbDsKICAgICAgICAgICAgICAgICAgICBpZihpc05hTihjaCl8fGNoIT1oKXsKICAgICAgICAgICAgICAgICAgICAgICAgJGMuYXR0cignaXpoX2NtSGVpZ2h0JyxoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaVpoaWh1LkNvbW1lbnQuYm94KCRjLHRydWUsZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZighJGYuaXMoJy5leHBhbmRlZCcpJiZldmVudC5hZGRlZE5vZGVzLmxlbmd0aCl7CiAgICAgICAgICAgICAgICAgICAgICAgICRmLmNzcyh7J2hlaWdodCc6JycsJ2JvdHRvbSc6Jyd9KTsKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgZWgrPTMwOwogICAgICAgICAgICAgICAgICAgICAgICAkZi5jc3MobGg9PTB8fGVoPmNoP3snaGVpZ2h0JzonJywnYm90dG9tJzoyNX06eydoZWlnaHQnOmVoLCdib3R0b20nOicnfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgJGJ0bkNDLnByZXBlbmQoJzxpIGNsYXNzPSJ6LWljb24tZm9sZCIvPicpCiAgICAgICAgICAgICAgICAuY3NzKHsKICAgICAgICAgICAgICAgICAgICAncG9zaXRpb24nOidhYnNvbHV0ZScKICAgICAgICAgICAgICAgICAgLCAnY3Vyc29yJzoncG9pbnRlcicKICAgICAgICAgICAgICAgICAgLCAnbWFyZ2luLWxlZnQnOi0xCiAgICAgICAgICAgICAgICAgICwgJ2xlZnQnOjAKICAgICAgICAgICAgICAgICAgLCAnYmFja2dyb3VuZC1jb2xvcic6JyNmYmZiZmInCiAgICAgICAgICAgICAgICAgICwgJ3BhZGRpbmcnOicycHggNXB4JwogICAgICAgICAgICAgICAgICAsICdib3R0b20nOi0yMgogICAgICAgICAgICAgICAgICAsICdib3JkZXInOicxcHggc29saWQgI2RkZCcKICAgICAgICAgICAgICAgICAgLCAnYm9yZGVyLXJhZGl1cyc6JzRweCcKICAgICAgICAgICAgICAgIH0pLmluc2VydEJlZm9yZSgkY20uZmluZCgnLnptLWNvbW1lbnQtYm94LWZ0JykpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKGlaaGlodS5RdWlja0Jsb2NrKXsKICAgICAgICAgICAgICAgIGlaaGlodS5RdWlja0Jsb2NrLmFkZFF1aWNrQmxvY2tJbkNvbW1lbnRMaXN0KCRidXR0b25zTCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwoKICAgIHJldHVybiB0aGlzOwp9CgovKioKICogQGNsYXNzIE5vdGk3CiAqLwpmdW5jdGlvbiBOb3RpNyhpWmhpaHUpIHsKICAgIGlmICggdHlwZW9mIGlaaGlodSA9PT0gJ3VuZGVmaW5lZCcgfHwgIWlaaGlodSB8fCAhaVpoaWh1LmNvbmZpZ1snTm90aTcnXSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgaVpoaWh1Lk5vdGk3ID0gdGhpczsKICAgIAogICAgdGhpcy4kbm90aTcgPSAkKCcjemgtdG9wLW5hdi1saXZlLW5ldycpOwogICAgdGhpcy4kZnJhbWUgPSAkKCcuem0tbm90aTctZnJhbWUnLHRoaXMuJG5vdGk3KTsKICAgIHRoaXMuJGNvbnRlbnQgPSAkKCcuem0tbm90aTctY29udGVudC1ib2R5Jyx0aGlzLiRub3RpNyk7CiAgICB0aGlzLiRmb290ZXIgPSAkKCcuem0tbm90aTctcG9wdXAtZm9vdGVyJyx0aGlzLiRub3RpNyk7CiAgICB0aGlzLiR0YWIgPSAkKCcuem0tbm90aTctcG9wdXAtdGFiLWNvbnRhaW5lcicsJyN6aC10b3AtbmF2LWxpdmUtbmV3LWlubmVyJyk7CgogICAgdGhpcy5jc3MgPSAKICAgICAgICBbJyN6aC10b3AtbmF2LWxpdmUtbmV3IC56bS1ub3RpNy1wb3B1cC1mb290ZXIgYVt1bnJlYWRvbmx5PSIxIl17Y29sb3I6IzIyNTU5OSAhaW1wb3J0YW50O3RleHQtc2hhZG93OjAgMCAxcHggIzIyNTU5OTt9JwogICAgICAgICwnJ10uam9pbignXG4nKTsKICAgIHRoaXMuZW5oYW5jZSA9IGZ1bmN0aW9uKCl7CiAgICAgICAgaVpoaWh1Lk5vdGk3LiR0YWIuZmluZCgnLnptLW5vdGk3LXBvcHVwLXRhYi1pdGVtJykuZWFjaChmdW5jdGlvbihpLGUpewogICAgICAgICAgICB1dGlscy5vYnNlcnZlRE9NQXR0ck1vZGlmaWVkKGUsZnVuY3Rpb24oZXZlbnQpewogICAgICAgICAgICAgICAgdmFyICRlPSQoZXZlbnQudGFyZ2V0KTsKICAgICAgICAgICAgICAgIGlmKCRlLmlzKCcuem0tbm90aTctcG9wdXAtdGFiLWl0ZW0uY3VycmVudCcpKXsKICAgICAgICAgICAgICAgIAl2YXIgY3VycmVudENsYXNzPSRlLmF0dHIoJ2NsYXNzJykKICAgICAgICAgICAgICAgIAkgICwgJGJGaWx0ZXJSZWFkPSQoJy5pemgtZmlsdGVyLXJlYWQnLGlaaGlodS5Ob3RpNy4kZm9vdGVyKTsKICAgICAgICAgICAgICAgIAlpZihjdXJyZW50Q2xhc3MhPSRiRmlsdGVyUmVhZC5hdHRyKCdjdXJyZW50Q2xhc3MnKSl7CiAgICAgICAgICAgICAgICAJICAgICRiRmlsdGVyUmVhZC5hdHRyKHsndW5yZWFkT25seSc6JycsJ2N1cnJlbnRDbGFzcyc6Y3VycmVudENsYXNzfSk7CiAgICAgICAgICAgICAgICAJfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBpWmhpaHUuTm90aTcuJGZvb3Rlci5hcHBlbmQoCiAgICAgICAgICAgICQoJzxhPicsewogICAgICAgICAgICAgICAgJ2NsYXNzJzonaXpoLWZpbHRlci1yZWFkJwogICAgICAgICAgICAgICwgaHJlZjonamF2YXNjcmlwdDp2b2lkKDApOycKICAgICAgICAgICAgICAsICd1bnJlYWRPbmx5JzonJwogICAgICAgICAgICAgICwgY2xpY2s6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICB2YXIgdW5yZWFkT25seT10aGlzLmdldEF0dHJpYnV0ZSgndW5yZWFkT25seScpPT0nMScKICAgICAgICAgICAgICAgICAgICAgICwgJGNvbnRlbnRWaXNpYmxlPWlaaGlodS5Ob3RpNy4kY29udGVudC5maWx0ZXIoJzp2aXNpYmxlJykKICAgICAgICAgICAgICAgICAgICAgICwgJHNjcm9sbGVyPSRjb250ZW50VmlzaWJsZS5jbG9zZXN0KCcuemgtc2Nyb2xsZXItaW5uZXInKQogICAgICAgICAgICAgICAgICAgICAgLCAkaXRlbXM9JGNvbnRlbnRWaXNpYmxlLmZpbmQoJy56bS1ub3RpNy1jb250ZW50LWl0ZW0nKQogICAgICAgICAgICAgICAgICAgIDsKICAgICAgICAgICAgICAgICAgICB1bnJlYWRPbmx5PSF1bnJlYWRPbmx5OwogICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCd1bnJlYWRPbmx5Jyx1bnJlYWRPbmx5PycxJzonJyk7CiAgICAgICAgICAgICAgICAgICAgaWYodW5yZWFkT25seSl7CiAgICAgICAgICAgICAgICAgICAgICAgICRzY3JvbGxlci5hdHRyKCdzY3JvbGxUb3AnLCRzY3JvbGxlclswXS5zY3JvbGxUb3ApOwogICAgICAgICAgICAgICAgICAgICAgICAkaXRlbXMubm90KCcudW5yZWFkJykuaGlkZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gcGFyc2VJbnQoJHNjcm9sbGVyLmF0dHIoJ3Njcm9sbFRvcF91bnJlYWQnKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFpc05hTihzY3JvbGxUb3ApKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjcm9sbGVyLnNjcm9sbFRvcChzY3JvbGxUb3ApOwogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAkc2Nyb2xsZXIuYXR0cignc2Nyb2xsVG9wX3VucmVhZCcsJHNjcm9sbGVyWzBdLnNjcm9sbFRvcCk7CiAgICAgICAgICAgICAgICAgICAgICAgICRpdGVtcy5ub3QoJy51bnJlYWQnKS5zaG93KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSBwYXJzZUludCgkc2Nyb2xsZXIuYXR0cignc2Nyb2xsVG9wJykpOwogICAgICAgICAgICAgICAgICAgICAgICBpZighaXNOYU4oc2Nyb2xsVG9wKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY3JvbGxlci5zY3JvbGxUb3Aoc2Nyb2xsVG9wKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgCiAgICAgICAgICAgIH0pLnRleHQoJ+makOiXj+W3suivuycpCiAgICAgICAgKTsKICAgIH07CgogICAgcmV0dXJuIHRoaXM7Cn0KCi8qKgogKiBAY2xhc3MgUXVpY2tCbG9jawogKi8KZnVuY3Rpb24gUXVpY2tCbG9jayhpWmhpaHUpIHsKICAgIGlmICggdHlwZW9mIGlaaGlodSA9PT0gJ3VuZGVmaW5lZCcgfHwgIWlaaGlodSB8fCAhaVpoaWh1LmNvbmZpZ1snUXVpY2tCbG9jayddKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICBpWmhpaHUuUXVpY2tCbG9jayA9IHRoaXM7CiAgICAKLyoKICAgIHZhciBjc3NfUXVpY2tCbG9jayA9IHsKICAgICAgICAgICAgJ2JhY2tncm91bmQtcG9zaXRpb24nOictMTQ2cHggLTIwMnB4JwogICAgICAgICAgLCAnd2lkdGgnOjE2CiAgICAgICAgICAsICdoZWlnaHQnOjE2CiAgICAgIAl9CiAgICA7CiovCiAgICB0aGlzLlBlbmRpbmcgPSB7VXNlcnM6JywnLENvdW50OjB9OwogICAgdGhpcy5CbG9ja2luZyA9IHtVc2VyczonLCcsQ291bnQ6MH07CiAgICB0aGlzLlVuZm9sbG93ZWQgPSB7VXNlcnM6JywnLENvdW50OjB9OwogICAgdGhpcy5SZWZvbGxvd2VkID0ge1VzZXJzOicsJyxDb3VudDowfTsKICAgIHRoaXMuVXNlcnMyQiA9IFtdCiAgICB0aGlzLlVzZXJzMkJCUSA9IFtdCiAgICB0aGlzLmNzcyA9IAogICAgICAgIFsnLml6aF9ibG9ja0NhcnR7YmFja2dyb3VuZC1jb2xvcjojMDc3MUMxO3Bvc2l0aW9uOmZpeGVkO3JpZ2h0OjA7ei1pbmRleDo5O3BhZGRpbmc6MCAzMHB4IDAgNjBweDtib3JkZXI6MXB4IHNvbGlkICMwNzcxQzE7Ym9yZGVyLWxlZnQtd2lkdGg6MTBweDtib3JkZXItdG9wLWxlZnQtcmFkaXVzOjZweDt9JwogICAgICAgICwnLml6aF9ibG9ja0NhcnQgLmRve2NvbG9yOiNmZmY7dGV4dC1hbGlnbjpjZW50ZXI7ZGlzcGxheTpibG9jazttYXJnaW46MnB4O21pbi13aWR0aDo4MHB4O3dpZHRoOjEwMCU7aGVpZ2h0OjIwcHg7fScKICAgICAgICAsJy5pemhfYmxvY2tDYXJ0LnBlbmRpbmcgLmRvOmFmdGVye3RleHQtZGVjb3JhdGlvbjpibGluaztjb2xvcjpyZWQ7fScKICAgICAgICAsJy5pemhfYmxvY2tDYXJ0IC5kbzphZnRlcntwb3NpdGlvbjpyZWxhdGl2ZTtjb250ZW50OmF0dHIoaXpoX251bTJCKTt9JwogICAgICAgICwnLml6aF9ibG9ja0NhcnQgLmRvIC5idXR0b257Y29sb3I6I2ZmZjt9JwogICAgICAgICwnLml6aF9ibG9ja0NhcnQgLmZyYW1le292ZXJmbG93LXk6YXV0bztvdmVyZmxvdy14OmhpZGRlbjtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MjVweDtib3R0b206MDtsZWZ0OjA7cmlnaHQ6MDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7cGFkZGluZy10b3A6NXB4O30nCiAgICAgICAgLCcuaXpoX2Jsb2NrQ2FydCAubGlzdHtkaXNwbGF5OmJsb2NrO21hcmdpbjoycHg7d2lkdGg6MTAwJTtwYWRkaW5nLXJpZ2h0OjVweDt9JwogICAgICAgICwnLml6aF9ibG9ja0NhcnQgLmxpc3QgLnJlbHtib3JkZXItd2lkdGg6MCAycHg7Ym9yZGVyLXN0eWxlOnNvbGlkO2JvcmRlci1jb2xvcjojZmZmO3dpZHRoOjI0cHg7aGVpZ2h0OjE4cHg7fScKICAgICAgICAsJy5pemhfYmxvY2tDYXJ0IC5saXN0LmlfZm8gLnJlbHtib3JkZXItbGVmdC1jb2xvcjojMjU5O2JhY2tncm91bmQtcG9zaXRpb246LTEyMHB4IC0xODRweDt9JwogICAgICAgICwnLml6aF9ibG9ja0NhcnQgLmxpc3QuZm9faSAucmVse2JvcmRlci1yaWdodC1jb2xvcjojMjU5O2JhY2tncm91bmQtcG9zaXRpb246LTEyMHB4IC0xNjRweDt9JwogICAgICAgICwnLml6aF9ibG9ja0NhcnQgLmxpc3QuaV9mby5mb19pIC5yZWx7YmFja2dyb3VuZC1wb3NpdGlvbjotNzhweCAtMjAwcHg7fScKICAgICAgICAsJy5pemhfYmxvY2tDYXJ0IC51c2VyMkJ7ZGlzcGxheTpibG9jazttYXJnaW46MnB4IDA7cGFkZGluZzowIDQwcHggMCA2MHB4O30nCiAgICAgICAgLCcuaXpoX2Jsb2NrQ2FydCAudXNlcjJCIGkuemctaWNvbntkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjA7bWFyZ2luLXRvcDo1cHg7fScKICAgICAgICAsJy5pemhfYmxvY2tDYXJ0IC51c2VyMkIgLm5hbWV7ZGlzcGxheTpibG9jaztjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzAwMDt3aGl0ZS1zcGFjZTpub3dyYXA7cGFkZGluZzoycHggNXB4O2JvcmRlci1yYWRpdXM6M3B4O30nCiAgICAgICAgLCcuaXpoX2Jsb2NrQ2FydCAubGlzdCAudXNlcjJCLnVuZm8gLm5hbWV7YmFja2dyb3VuZC1jb2xvcjojZjAwO30nCiAgICAgICAgLCcuaXpoX2Jsb2NrQ2FydCAudXNlcjJCIC5kZWx7ZGlzcGxheTpibG9jaztwb3NpdGlvbjphYnNvbHV0ZTttYXJnaW4tbGVmdDotNC41ZW07fScKICAgICAgICAsJy5pemhfYmxvY2tDYXJ0IC51c2VyMkIgaS5zYXl7ZGlzcGxheTpibG9jaztwb3NpdGlvbjphYnNvbHV0ZTttYXJnaW4tbGVmdDotNDRweDtib3JkZXItcmFkaXVzOjZweCA2cHggMCA2cHg7Ym9yZGVyOjFweCBzb2xpZCAjOTk5O3BhZGRpbmc6MCA1cHggMCAzcHg7fScKICAgICAgICAsJy5pemhfYmxvY2tDYXJ0IC51c2VyMkIgaS5zYXlfMXtkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOmFic29sdXRlO21hcmdpbi1sZWZ0Oi0xMHB4O2hlaWdodDo2cHg7YmFja2dyb3VuZC1jb2xvcjojZmZmO3dpZHRoOjZweDttYXJnaW4tdG9wOjE3cHg7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgIzk5OTt9JwogICAgICAgICwnLml6aF9ibG9ja0NhcnQgLnVzZXIyQiBpLnNheV8ye2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246YWJzb2x1dGU7bWFyZ2luLWxlZnQ6LTlweDtoZWlnaHQ6NnB4O2JhY2tncm91bmQtY29sb3I6I2ZmZjt3aWR0aDo2cHg7bWFyZ2luLXRvcDoxN3B4O2JvcmRlci1yYWRpdXM6MCAwIDAgNnB4O2JvcmRlcjoxcHggc29saWQgIzk5OTtib3JkZXItd2lkdGg6MCAwIDFweCAxcHh9JwogICAgICAgICwnLml6aC1xdWljay1ibG9ja3twb3NpdGlvbjphYnNvbHV0ZTt0ZXh0LWFsaWduOmNlbnRlcjt3aWR0aDo0ZW07bWFyZ2luLXRvcDoxLjVlbTt3aGl0ZS1zcGFjZTpub3dyYXA7fScKICAgICAgICAsJy5pemgtcXVpY2stYmxvY2sgW2NsYXNzXj1pemgtcXVpY2stYmxvY2tde3Bvc2l0aW9uOmFic29sdXRlO2Rpc3BsYXk6YmxvY2s7d2hpdGUtc3BhY2U6bm93cmFwO30nCiAgICAgICAgLCcuaXpoLXF1aWNrLWJsb2NrOmFmdGVye2NvbnRlbnQ6YXR0cihpemhfbnVtMkIpO21hcmdpbi10b3A6MWVtO2Rpc3BsYXk6YmxvY2s7fScKICAgICAgICAsJy56bS1jb21tZW50LWhkIC5pemgtcXVpY2stYmxvY2stcGVuZHtwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjA7dG9wOjQwcHg7fScKICAgICAgICAsJycKICAgICAgICBdLmpvaW4oJ1xuJyk7CiAgICB0aGlzLnVuYmxvY2tBbGwgPSBmdW5jdGlvbigpewogICAgICAgICQoJy5ibG9ja2VkLXVzZXJzID4gLml0ZW0tY2FyZCcpLmVhY2goZnVuY3Rpb24oaSxlKXsKICAgICAgICAgICAgdmFyIHVpZD0kKGUpLmF0dHIoJ2RhdGEtaWQnKTsKICAgICAgICAgICAgJC5wb3N0KCcvc2V0dGluZ3MvdW5ibG9ja3VzZXInLCQucGFyYW0oewogICAgICAgICAgICAgICAgX3hzcmY6JCgnaW5wdXRbbmFtZT1feHNyZl0nKS52YWwoKQogICAgICAgICAgICAgICwgdWlkOnVpZAogICAgICAgICAgICB9KSxmdW5jdGlvbihyKXsKICAgICAgICAgICAgCS8vY29uc29sZS5sb2cocik7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwoJICB9OwoJICB0aGlzLmRvVW5mb2xsb3cgPSBmdW5jdGlvbigpewogICAgICAgIHZhciAkZSA9IGlaaGlodS5RdWlja0Jsb2NrLlVzZXJzMkJCUS5zaGlmdCgpCiAgICAgICAgaWYodHlwZW9mICRlID09PSAndW5kZWZpbmVkJykgcmV0dXJuCgogICAgICAgIHZhciB1aWQ9JGUuYXR0cigndWlkJyk7CiAgICAgICAgJC5wb3N0KCcvbm9kZS9NZW1iZXJGb2xsb3dCYXNlVjInCiAgICAgICAgICAsICQucGFyYW0oewogICAgICAgICAgICAgICAgbWV0aG9kOid1bmZvbGxvd19tZW1iZXInCiAgICAgICAgICAgICAgLCBwYXJhbXM6SlNPTi5zdHJpbmdpZnkoeydoYXNoX2lkJzp1aWR9KQogICAgICAgICAgICAgICwgX3hzcmY6JCgnaW5wdXRbbmFtZT1feHNyZl0nKS52YWwoKQogICAgICAgICAgICAgIH0pCiAgICAgICAgICAsIGZ1bmN0aW9uKHIpewogICAgICAgICAgICAgICAgICB2YXIgcXVlcnk9ZGVjb2RlVVJJQ29tcG9uZW50KHRoaXMuZGF0YSkKICAgICAgICAgICAgICAgICAgICAsIHBhcmFtcz11dGlscy5nZXRQYXJhbUluUXVlcnkocXVlcnksJ3BhcmFtcycpCiAgICAgICAgICAgICAgICAgIDsKICAgICAgICAgICAgICAgICAgZXZhbCgncGFyYW1zPScrcGFyYW1zKTsKICAgICAgICAgICAgICAgICAgdmFyIGJpZD0nZmItJytwYXJhbXMuaGFzaF9pZAogICAgICAgICAgICAgICAgICAgICwgd2hvPWJpZCsnLCcKICAgICAgICAgICAgICAgICAgICAsIHVuZm9sbG93ZWQ9aVpoaWh1LlF1aWNrQmxvY2suVW5mb2xsb3dlZAogICAgICAgICAgICAgICAgICAgICwgcmVmb2xsb3dlZD1pWmhpaHUuUXVpY2tCbG9jay5SZWZvbGxvd2VkCiAgICAgICAgICAgICAgICAgICAgLCAkY2FydERJVj0kKCcjaXpoX2Jsb2NrQ2FydCcpCiAgICAgICAgICAgICAgICAgICAgLCAkdXNlcj0kY2FydERJVi5maW5kKCcudXNlcjJCW3VpZD0nK3BhcmFtcy5oYXNoX2lkKyddJykKICAgICAgICAgICAgICAgICAgICAsICRsaXN0PSR1c2VyLmNsb3Nlc3QoJy5saXN0JykKICAgICAgICAgICAgICAgICAgOwogICAgICAgICAgICAgICAgICAkdXNlci5wcmVwZW5kVG8oJGxpc3QubmV4dCgpLm5leHQoKSk7CiAgICAgICAgICAgICAgICAgIGlmKHVuZm9sbG93ZWQuVXNlcnMuaW5kZXhPZignLCcrd2hvKTwwKQogICAgICAgICAgICAgICAgICAgICAgdW5mb2xsb3dlZC5Vc2VycyArPSB3aG87CiAgICAgICAgICAgICAgICAgIGlmKHJlZm9sbG93ZWQuVXNlcnMuaW5kZXhPZignLCcrd2hvKT49MCkKICAgICAgICAgICAgICAgICAgICAgIHJlZm9sbG93ZWQuVXNlcnMgPSByZWZvbGxvd2VkLnJlcGxhY2UoJywnK3dobywnLCcpOwogICAgICAgICAgICB9CiAgICAgICAgKS5hbHdheXMoZnVuY3Rpb24oZGF0YSwgdGV4dFN0YXR1cywganFYSFIpewogICAgICAgICAgICBpWmhpaHUuUXVpY2tCbG9jay5kb1VuZm9sbG93KCkKICAgICAgICB9KTsKCSAgfTsKICAgIHRoaXMuZG9RdWlja0Jsb2NrID0gZnVuY3Rpb24oKXsKICAgICAgICB2YXIgJGUgPSBpWmhpaHUuUXVpY2tCbG9jay5Vc2VyczJCQlEuc2hpZnQoKQogICAgICAgIGlmKHR5cGVvZiAkZSA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybgoKICAgICAgICB2YXIgYmxvY2tpbmcgPSBpWmhpaHUuUXVpY2tCbG9jay5CbG9ja2luZwogICAgICAgICAgLCBocmVmID0gJGUuYXR0cignaHJlZicpCiAgICAgICAgICAsIHdobyA9IGhyZWYuc3BsaXQoJy8nKS5wb3AoKSsnLCcKICAgICAgICA7CiAgICAgICAgaWYodHlwZW9mIGJsb2NraW5nID09PSAndW5kZWZpbmVkJyB8fCAhYmxvY2tpbmcpewogICAgICAgICAgICBibG9ja2luZyA9IGlaaGlodS5RdWlja0Jsb2NrLkJsb2NraW5nID0geyBVc2VyczonLCcsIENvdW50OjAgfTsKICAgICAgICB9ZWxzZSBpZihibG9ja2luZy5Vc2Vycy5pbmRleE9mKCcsJyt3aG8pID49IDApewogICAgICAgICAgICByZXR1cm47IC8vIEFscmVhZHkgYmxvY2tpbmcKICAgICAgICB9CiAgICAgICAgdmFyICRjYXJ0RElWPSQoJyNpemhfYmxvY2tDYXJ0Jyk7CiAgICAgICAgJGNhcnRESVYuYWRkQ2xhc3MoJ2Jsb2NraW5nJyk7CiAgICAgICAgYmxvY2tpbmcuVXNlcnMgKz0gd2hvOwogICAgICAgIGJsb2NraW5nLkNvdW50ICsrOwogICAgICAgICQucG9zdChocmVmKycvYmxvY2snLCQucGFyYW0oewogICAgICAgICAgICBhY3Rpb246J2FkZCcKICAgICAgICAgICwgX3hzcmY6JCgnaW5wdXRbbmFtZT1feHNyZl0nKS52YWwoKSAKICAgICAgICB9KSxmdW5jdGlvbihyKXsKICAgICAgICAgICAgdmFyIGhyZWY9dGhpcy51cmwucmVwbGFjZSgnL2Jsb2NrJywnJykKICAgICAgICAgICAgICAsIHVzZXJJRD1ocmVmLnNwbGl0KCcvJykucG9wKCkKICAgICAgICAgICAgICAsIHdobz0nLCcrdXNlcklEKycsJwogICAgICAgICAgICAgICwgYmxvY2tpbmc9aVpoaWh1LlF1aWNrQmxvY2suQmxvY2tpbmcKICAgICAgICAgICAgOwoKICAgICAgICAgICAgaWYoMD09LS1ibG9ja2luZy5Db3VudCkkY2FydERJVi5yZW1vdmVDbGFzcygncGVuZGluZycpOwogICAgCiAgICAgICAgICAgIGlmKGJsb2NraW5nLlVzZXJzLmluZGV4T2Yod2hvKSA8IDApCiAgICAgICAgICAgICAgICByZXR1cm47IC8vIE5vIHRoaXMgdXNlciBpbiBwZW5kaW5nCiAgICAgICAgICAgICAgCiAgICAgICAgICAgIGJsb2NraW5nLlVzZXJzID0gYmxvY2tpbmcuVXNlcnMucmVwbGFjZSh3aG8sJywnKTsKICAgICAgICAgICAgJCgnI2l6aF9ibG9ja0NhcnQgLnVzZXIyQltocmVmPSInK2hyZWYrJyJdJykuZmluZCgnLmRlbCcpWzBdLmNsaWNrKCk7CiAgICAgICAgICAgICQoJ2FbaHJlZiQ9IicraHJlZisnIl0nKS5jc3MoJ3RleHQtZGVjb3JhdGlvbicsJ2xpbmUtdGhyb3VnaCcpOwogICAgICAgIH0pLmFsd2F5cyhmdW5jdGlvbihkYXRhLCB0ZXh0U3RhdHVzLCBqcVhIUil7CiAgICAgICAgICAgIGlaaGlodS5RdWlja0Jsb2NrLmRvUXVpY2tCbG9jaygpCiAgICAgICAgfSk7CiAgCX07CiAgICB0aGlzLnJlc2l6ZUJsb2NrQ2FydCA9IGZ1bmN0aW9uKCRjYXJ0RElWKXsKICAgICAgICBmdW5jdGlvbiBwYXJzZUNzc1B4KCRpdGVtLCBuYW1lKSB7CiAgICAgICAgICAgIHZhciBtID0gJGl0ZW0uY3NzKG5hbWUpOwogICAgICAgICAgICBpZiAobSAhPSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KG0ucmVwbGFjZSgncHgnLCcnKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICAgIHZhciAkdXNlckRJViA9ICRjYXJ0RElWLmZpbmQoJy5saXN0IC51c2VyMkInKTsKICAgICAgICB2YXIgJHRpdGxlQm94ID0gJCgnI2l6aF9ibG9ja0NhcnQgLmRvJyk7CiAgICAgICAgdmFyIGggPSBwYXJzZUNzc1B4KCRjYXJ0RElWLmZpbmQoJ2Rpdi5mcmFtZScpLCdwYWRkaW5nVG9wJykgCiAgICAgICAgICAgICAgICArICgkdXNlckRJVi5oZWlnaHQoKSArIHBhcnNlQ3NzUHgoJHVzZXJESVYsJ21hcmdpblRvcCcpKSAqICR1c2VyRElWLmxlbmd0aCAKICAgICAgICAgICAgICAgICsgJHRpdGxlQm94LmhlaWdodCgpCiAgICAgICAgICAgICAgICArIHBhcnNlQ3NzUHgoJHRpdGxlQm94LCAnbWFyZ2luVG9wJykKICAgICAgICAgICAgICAgICsgcGFyc2VDc3NQeCgkdGl0bGVCb3gsICdtYXJnaW5Cb3R0b20nKTsKICAgICAgICAKICAgICAgICBpZihoK2laaGlodS4kbWFpbi5vZmZzZXQoKS50b3A8aVpoaWh1LiR3aW4uaGVpZ2h0KCkpewogICAgICAgICAgICAkY2FydERJVi5jc3MoeydoZWlnaHQnOmgsJ2JvdHRvbSc6Jyd9KTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgJGNhcnRESVYuY3NzKHsnaGVpZ2h0JzonJywnYm90dG9tJzowfSk7CiAgICAgICAgfQogICAgfTsKICAgIHRoaXMuZ2V0Q2FydERJVj1mdW5jdGlvbigpewogICAgICAgIHZhciAkY2FydERJVj0kKCcjaXpoX2Jsb2NrQ2FydCcpOwogICAgICAgIGlmKCEkY2FydERJVi5sZW5ndGgpewogICAgICAgICAgICAkY2FydERJVj0kKCc8ZGl2PicsIHsgaWQ6ICdpemhfYmxvY2tDYXJ0JywgJ2NsYXNzJzogJ2l6aF9ibG9ja0NhcnQnIH0pLmNzcyh7CiAgICAgICAgICAgICAgICAndG9wJzppWmhpaHUuJG1haW4ub2Zmc2V0KCkudG9wCiAgICAgICAgICAgIH0pLmFwcGVuZCgKICAgICAgICAgICAgICAgICQoJzxkaXY+Jyx7CiAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzonZG8nCiAgICAgICAgICAgICAgICAgICwgJ2l6aF9udW0yQic6MAogICAgICAgICAgICAgICAgICAsICd0aXRsZSc6J+S4i+S4uuOAjOWAmeWuoeOAjeWIl+ihqFxu54K55Ye75bem5LiK6KeS5Y+v5pS26LW3L+WxleW8gFxu5pWw5a2X5Li65Lq654qv5oC75pWw77yI57qi6Imy6KGo56S65LuN5pyJ5Lq654qv5q2j5b6F5YWl5YiX77yJJwogICAgICAgICAgICAgICAgfSkuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgICQoJzxhPicsewogICAgICAgICAgICAgICAgICAgICAgICAnY2xhc3MnOididXR0b24gZGVsQWxsJwogICAgICAgICAgICAgICAgICAgICAgLCBocmVmOidqYXZhc2NyaXB0OnZvaWQoMCk7JwogICAgICAgICAgICAgICAgICAgICAgLCB0aXRsZTon5riF56m644CM5YCZ5a6h44CN5YiX6KGoJwogICAgICAgICAgICAgICAgICAgICAgLCBjbGljazpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkY2FydERJVj0kKCcjaXpoX2Jsb2NrQ2FydCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICRjYXJ0RElWLmNzcygnYm90dG9tJywnJykuZmluZCgnLmxpc3QnKS5lbXB0eSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcy5wYXJlbnROb2RlKS5hdHRyKCdpemhfbnVtMkInLCcwJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgJGNhcnRESVYuY3NzKCdoZWlnaHQnLCcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLnRleHQoJ+Wkp+i1picpLmNzcyh7CiAgICAgICAgICAgICAgICAgICAgICAgICdkaXNwbGF5JzonYmxvY2snCiAgICAgICAgICAgICAgICAgICAgICAsICdwb3NpdGlvbic6J2Fic29sdXRlJwogICAgICAgICAgICAgICAgICAgICAgLCAnbGVmdCc6MjQKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgKS5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgJCgnPGlucHV0PicsewogICAgICAgICAgICAgICAgICAgICAgICAnY2xhc3MnOid1bmZvJwogICAgICAgICAgICAgICAgICAgICAgLCBocmVmOidqYXZhc2NyaXB0OnZvaWQoMCk7JwogICAgICAgICAgICAgICAgICAgICAgLCB0eXBlOidjaGVja2JveCcKICAgICAgICAgICAgICAgICAgICAgICwgdGl0bGU6J+mAieS4reWQju+8jOWwhuaIkeWFs+azqOS5i+S6uuagh+WHuu+8jOaUueS7peaUvumAkO+8iOWPlua2iOWFs+azqO+8ieiuuuWkhCcKICAgICAgICAgICAgICAgICAgICAgICwgY2xpY2s6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGNhcnRESVY9JCh0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgJHVzZXJzPSQoJy5mcmFtZSAubGlzdC5pX2ZvIC51c2VyMkInLCRjYXJ0RElWKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLCAkYWN0aW9uPSQoJy5hY3Rpb24nLHRoaXMucGFyZW50Tm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5jaGVja2VkKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHVzZXJzLmFkZENsYXNzKCd1bmZvJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRhY3Rpb24udGV4dCgn5pS+6YCQJykuY3NzKCdwYWRkaW5nJywnMCAyZW0gMCAwJykuYXR0cigndGl0bGUnLCflr7nliJfooajlhoXmiJHlhbPms6jkuYvkurrlj5bmtojlhbPms6gnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHVzZXJzLnJlbW92ZUNsYXNzKCd1bmZvJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRhY3Rpb24udGV4dCgn5pS255uRJykuY3NzKCdwYWRkaW5nJywnMCAwIDAgMmVtJykuYXR0cigndGl0bGUnLCflsIbkuIvliJfkurrniq/pgJDkuIDliqDlhaXpu5HlkI3ljZUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkuY3NzKHsKICAgICAgICAgICAgICAgICAgICAgICAgJ2Rpc3BsYXknOidibG9jaycKICAgICAgICAgICAgICAgICAgICAgICwgJ2Zsb2F0JzonbGVmdCcKICAgICAgICAgICAgICAgICAgICAgICwgJ2hlaWdodCc6MjIKICAgICAgICAgICAgICAgICAgICAgICwgJ2xpbmUtaGVpZ2h0JzoyMgogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICApLmFwcGVuZCgKICAgICAgICAgICAgICAgICAgICAkKCc8c3Bhbj4nLHsKICAgICAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzonJwogICAgICAgICAgICAgICAgICAgICAgLCBocmVmOidqYXZhc2NyaXB0OnZvaWQoMCk7JwogICAgICAgICAgICAgICAgICAgICAgLCB0aXRsZTon6YCJ5Lit5ZCO77yM5bCG5oiR5YWz5rOo55qE5Lq65qCH5Ye677yM5YeG5aSH44CM5Y+W5raI5YWz5rOo44CNJwogICAgICAgICAgICAgICAgICAgIH0pLnRleHQoJ+S7jui9uycpLmNzcyh7CiAgICAgICAgICAgICAgICAgICAgICAgICdkaXNwbGF5JzonYmxvY2snCiAgICAgICAgICAgICAgICAgICAgICAsICdmbG9hdCc6J2xlZnQnCiAgICAgICAgICAgICAgICAgICAgICAsICdtYXJnaW4tcmlnaHQnOjIwCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICkuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgICQoJzxhPicsewogICAgICAgICAgICAgICAgICAgICAgICAnY2xhc3MnOididXR0b24gYWN0aW9uJwogICAgICAgICAgICAgICAgICAgICAgLCBocmVmOidqYXZhc2NyaXB0OnZvaWQoMCk7JwogICAgICAgICAgICAgICAgICAgICAgLCB0aXRsZTon5bCG5LiL5YiX5Lq654qv6YCQ5LiA5Yqg5YWl6buR5ZCN5Y2VJwogICAgICAgICAgICAgICAgICAgICAgLCBjbGljazpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRjYXJ0RElWPSQodGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJCgnLnVuZm8nLHRoaXMucGFyZW50Tm9kZSkuaXMoJzpjaGVja2VkJykpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5saXN0LmlfZm8gLnVzZXIyQicsJGNhcnRESVYpLmVhY2goZnVuY3Rpb24oaSxlKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaVpoaWh1LlF1aWNrQmxvY2suVXNlcnMyQkJRLnB1c2goJChlKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpWmhpaHUuUXVpY2tCbG9jay5kb1VuZm9sbG93KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcubGlzdCAudXNlcjJCJywkY2FydERJVikuZWFjaChmdW5jdGlvbihpLGUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpWmhpaHUuUXVpY2tCbG9jay5Vc2VyczJCQlEucHVzaCgkKGUpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlaaGlodS5RdWlja0Jsb2NrLmRvUXVpY2tCbG9jaygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkudGV4dCgn5pS255uRJykuY3NzKHsKICAgICAgICAgICAgICAgICAgICAgICAgJ2Rpc3BsYXknOidibG9jaycKICAgICAgICAgICAgICAgICAgICAgICwgJ2Zsb2F0JzoncmlnaHQnCiAgICAgICAgICAgICAgICAgICAgICAsICdtYXJnaW4tbGVmdCc6MjAKICAgICAgICAgICAgICAgICAgICAgICwgJ21hcmdpbi1yaWdodCc6LTEwCiAgICAgICAgICAgICAgICAgICAgICAsICdwYWRkaW5nJzonMCAwIDAgMmVtJwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICApLmFwcGVuZCgKICAgICAgICAgICAgICAgICAgICAkKCc8YT4nLHsKICAgICAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzonemctaWNvbiB6Zy1pY29uLWRvdWJsZS1hcnJvdycKICAgICAgICAgICAgICAgICAgICAgICwgaHJlZjonamF2YXNjcmlwdDp2b2lkKDApOycKICAgICAgICAgICAgICAgICAgICAgICwgY2xpY2s6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGNhcnRESVY9JCgnI2l6aF9ibG9ja0NhcnQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkY2FydERJVi5hdHRyKCdtaW5pJykhPScxJyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjYXJ0RElWLmZpbmQoJy5mcmFtZScpLmhpZGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGNhcnRESVYuY3NzKHsnaGVpZ2h0JzonJywnYm90dG9tJzonJ30pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY2FydERJVi5hdHRyKCdtaW5pJywnMScpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY2FydERJVi5maW5kKCcuZnJhbWUnKS5zaG93KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlaaGlodS5RdWlja0Jsb2NrLnJlc2l6ZUJsb2NrQ2FydCgkY2FydERJVik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjYXJ0RElWLmF0dHIoJ21pbmknLCcwJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLmNzcyh7CiAgICAgICAgICAgICAgICAgICAgICAgICdwb3NpdGlvbic6J2Fic29sdXRlJwogICAgICAgICAgICAgICAgICAgICAgLCAnbGVmdCc6MAogICAgICAgICAgICAgICAgICAgICAgLCAndG9wJzo1CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgKS5hcHBlbmQoCiAgICAgICAgICAgICAgICAkKCc8ZGl2PicseydjbGFzcyc6J2ZyYW1lJ30KICAgICAgICAgICAgICAgICkuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgICQoJzxkaXY+Jyx7CiAgICAgICAgICAgICAgICAgICAgICAgICdjbGFzcyc6J2xpc3QgaV9mbyBmb19pJwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICApLmFwcGVuZCgKICAgICAgICAgICAgICAgICAgICAkKCc8ZGl2PicsewogICAgICAgICAgICAgICAgICAgICAgICAnY2xhc3MnOidsaXN0IGlfZm8nCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICkuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgICQoJzxkaXY+Jyx7CiAgICAgICAgICAgICAgICAgICAgICAgICdjbGFzcyc6J2xpc3QgZm9faScKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgKS5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgJCgnPGRpdj4nLHsKICAgICAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzonbGlzdCcKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApLmFwcGVuZFRvKGlaaGlodS4kYm9keSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJGNhcnRESVYKICAgIH0KICAgIHRoaXMuaW4yQmxvY2tDYXJ0ID0gZnVuY3Rpb24odXJsLHJldHJpZWRDb3VudCl7CiAgICAgICAgdmFyICRlID0gaVpoaWh1LlF1aWNrQmxvY2suVXNlcnMyQi5zaGlmdCgpIHx8IG51bGwKICAgICAgICAgICwgJGNhcnRESVYgPSBpWmhpaHUuUXVpY2tCbG9jay5nZXRDYXJ0RElWKCkKCiAgICAgICAgJGNhcnRESVYuYWRkQ2xhc3MoJ3BlbmRpbmcnKTsKICAgICAgICBpZih0eXBlb2YgcmV0cmllZENvdW50ID09ICd1bmRlZmluZWQnKQogICAgICAgICAgICByZXRyaWVkQ291bnQgPSAwCgogICAgICAgIC8vY29uc29sZS5sb2cocmV0cmllZENvdW50KQogICAgICAgIGlmICghJGUgfHwgJGUubGVuZ3RoID09PSAwKXsKICAgICAgICAgICAgaWYoKHVybHx8JycpPT0nJyl7CiAgICAgICAgICAgICAgICAkY2FydERJVi5yZW1vdmVDbGFzcygncGVuZGluZycpCiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgJC5hamF4KFsnJyx1cmxdLmpvaW4oJycpLHsKICAgICAgICAgICAgICAgICAgICB0eXBlOidHRVQnCiAgICAgICAgICAgICAgICAgICwgbWF4UmV0cnlDb3VudDogMwogICAgICAgICAgICAgICAgfSkuZG9uZShmdW5jdGlvbihkYXRhLCB0ZXh0U3RhdHVzLCBqcVhIUil7CiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGRhdGEucGF5bG9hZCxmdW5jdGlvbihpLGUpewogICAgICAgICAgICAgICAgICAgICAgICBpWmhpaHUuUXVpY2tCbG9jay5hZGRVc2VyMkIoZSkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIGlaaGlodS5RdWlja0Jsb2NrLmluMkJsb2NrQ2FydChkYXRhLnBhZ2luZy5uZXh0KQogICAgICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbihkYXRhLHRleHRTdGF0dXMsalhIUil7CiAgICAgICAgICAgICAgICAgICAgaWYgKCsrcmV0cmllZENvdW50IDwgdGhpcy5tYXhSZXRyeUNvdW50KXsKICAgICAgICAgICAgICAgICAgICAgICAgaVpoaWh1LlF1aWNrQmxvY2suaW4yQmxvY2tDYXJ0KHVybCxyZXRyaWVkQ291bnQpCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICRjYXJ0RElWLnJlbW92ZUNsYXNzKCdwZW5kaW5nJykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybgogICAgICAgIH0KCiAgICAgICAgdmFyIGhyZWYgPSAkZS5hdHRyKCdocmVmJykKICAgICAgICAgICwgdXNlcm5hbWUgPSBocmVmLnNwbGl0KCcvJykucG9wKCkKICAgICAgICAgICwgd2hvID0gdXNlcm5hbWUrJywnCiAgICAgICAgOwoKICAgICAgICBpZigkY2FydERJVi5maW5kKCcudXNlcjJCW2hyZWY9IicraHJlZisnIl0nKS5sZW5ndGgpewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICAkLmFqYXgoJy9ub2RlL01lbWJlclByb2ZpbGVDYXJkVjI/JyskLnBhcmFtKHtwYXJhbXM6SlNPTi5zdHJpbmdpZnkoeyd1cmxfdG9rZW4nOnVzZXJuYW1lfSl9KSwgewogICAgICAgICAgICB0eXBlOiAnR0VUJwogICAgICAgICAgLCB1c2VyMkI6ICRlCiAgICAgICAgICAsIG1heFJldHJ5Q291bnQ6IDMKICAgICAgICB9KS5kb25lKGZ1bmN0aW9uKGRhdGEsIHRleHRTdGF0dXMsIGpxWEhSKXsKICAgICAgICAgICAgaVpoaWh1LlF1aWNrQmxvY2suYWRkVXNlcjJCKGRhdGEpCiAgICAgICAgICAgIGlaaGlodS5RdWlja0Jsb2NrLmluMkJsb2NrQ2FydCh1cmwpCiAgICAgICAgfSkuZmFpbChmdW5jdGlvbihkYXRhLHRleHRTdGF0dXMsalhIUil7CiAgICAgICAgICAgIGlmICgrK3JldHJpZWRDb3VudCA8IHRoaXMubWF4UmV0cnlDb3VudCl7CiAgICAgICAgICAgICAgICBpWmhpaHUuUXVpY2tCbG9jay5Vc2VyczJCLnVuc2hpZnQodGhpcy51c2VyMkIpCiAgICAgICAgICAgICAgICBpWmhpaHUuUXVpY2tCbG9jay5pbjJCbG9ja0NhcnQodXJsLHJldHJpZWRDb3VudCkKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIH0KICAgICAgICB9KS5hbHdheXMoZnVuY3Rpb24oZGF0YSx0ZXh0U3RhdHVzLGpYSFIpewogICAgICAgICAgICAkKCcjaXpoX2Jsb2NrQ2FydCcpLnJlbW92ZUNsYXNzKCdwZW5kaW5nJyk7CiAgICAgICAgfSk7CiAgICB9OwogICAgdGhpcy5hZGRVc2VyMkI9ZnVuY3Rpb24oZGF0YSl7CiAgICAgICAgaWYgKGRhdGEgPT09ICcnKSByZXR1cm4KICAgICAgICB2YXIgJGh0bWw9JChkYXRhLnJlcGxhY2UodXRpbHMuUmVnZXhTcmNQaWMsICcnKSkKICAgICAgICAgICwgaXNaSFBDPSRodG1sLmlzKCcuemgtcHJvZmlsZS1jYXJkJykKICAgICAgICAgICwgJGF2YXRhckxpbms9aXNaSFBDPyRodG1sLmZpbmQoJy5hdmF0YXItbGluazpmaXJzdCcpOiRodG1sLmZpbmQoJy56bS1pdGVtLWxpbmstYXZhdGFyOmZpcnN0JykKICAgICAgICAgICwgaHJlZj0kYXZhdGFyTGluay5hdHRyKCdocmVmJykKICAgICAgICBpZigoaHJlZnx8JycpPT0nJylyZXR1cm4KCiAgICAgICAgdmFyIHVzZXJJRD1ocmVmLnN1YnN0cig4KQogICAgICAgICAgLCB1c2VyTmFtZT1pc1pIUEM/JGF2YXRhckxpbmsudGV4dCgpOiRhdmF0YXJMaW5rLmF0dHIoJ3RpdGxlJykKICAgICAgICAgICwgJGJ0bkZvbGxvdz0kaHRtbC5maW5kKCdidXR0b25bZGF0YS1mb2xsb3ddJykKICAgICAgICAgICwgaGFzaElEPSEkYnRuRm9sbG93Lmxlbmd0aD8nJzokYnRuRm9sbG93LmF0dHIoJ2RhdGEtaWQnKQogICAgICAgICAgLCBmXz0kYnRuRm9sbG93Lmxlbmd0aCYmJGJ0bkZvbGxvdy5pcygnLnpnLWJ0bi11bmZvbGxvdycpCiAgICAgICAgICAsIF9mPSRidG5Gb2xsb3cubGVuZ3RoJiYkYnRuRm9sbG93LmlzKCdbZGF0YS1mb2xsb3dtZT0xXScpCiAgICAgICAgICAsIGNzc0Y9X2Z8fGZfPyd6Zy1pY29uIHJlbCAnOicnCiAgICAgICAgICAsICRjYXJ0RElWPWlaaGlodS5RdWlja0Jsb2NrLmdldENhcnRESVYoKQogICAgICAgICAgLCAkY2FydD0kY2FydERJVi5maW5kKCcubGlzdCcpCiAgICAgICAgICAsIHdobz0nLCcrdXNlcklEKycsJwogICAgICAgIDsKCiAgICAgICAgaWYoaGFzaElEPT0nJyl7CiAgICAgICAgICAgIHJldHVybjsgLy8gVXNlciBibG9ja2VkIG9yIHlvdSBibG9ja2VkCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmKCRjYXJ0RElWLmZpbmQoJy5saXN0IC51c2VyMkJbaHJlZj0iJytocmVmKyciXScpLmxlbmd0aCl7CiAgICAgICAgICAgIHJldHVybjsgLy8gVXNlciBhbHJlYWR5IGluIGJsb2NrIGxpc3QKICAgICAgICB9CgogICAgICAgIHZhciAkdXNlcjJCPSQoJzxkaXY+Jyx7CiAgICAgICAgICAgICAgICAnY2xhc3MnOid1c2VyMkInKyhmXyYmJGNhcnRESVYuZmluZCgnLmRvIC51bmZvOmNoZWNrZWQnKS5sZW5ndGg/JyB1bmZvJzonJykKICAgICAgICAgICAgICAsICdocmVmJzpocmVmCiAgICAgICAgICAgICAgLCAndWlkJzpoYXNoSUQKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmFwcGVuZCgKICAgICAgICAgICAgICAgICQoJzxhPicsewogICAgICAgICAgICAgICAgICAgICdjbGFzcyc6J2J1dHRvbiBkZWwnCiAgICAgICAgICAgICAgICAgICwgaHJlZjonamF2YXNjcmlwdDp2b2lkKDApOycKICAgICAgICAgICAgICAgICAgLCBjbGljazpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHVzZXI9JCh0aGlzKS5jbG9zZXN0KCcudXNlcjJCJykKICAgICAgICAgICAgICAgICAgICAgICAgICAsICRjYXJ0RElWPSQoJyNpemhfYmxvY2tDYXJ0JykKICAgICAgICAgICAgICAgICAgICAgICAgOwogICAgICAgICAgICAgICAgICAgICAgICAkdXNlci5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG51bTJCPSRjYXJ0RElWLmZpbmQoJy5saXN0IC51c2VyMkInKS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgICRjYXJ0RElWLmNoaWxkcmVuKCcuZG8nKS5hdHRyKCdpemhfbnVtMkInLG51bTJCPT0wPycwJzpudW0yQj45OTk/JzFrKyc6bnVtMkIpOwogICAgICAgICAgICAgICAgICAgICAgICBpZihudW0yQikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlaaGlodS5RdWlja0Jsb2NrLnJlc2l6ZUJsb2NrQ2FydCgkY2FydERJVik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjYXJ0RElWLmNzcygnaGVpZ2h0JywnJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkudGV4dCgn6LWmJykKICAgICAgICAgICAgKS5hcHBlbmQoCiAgICAgICAgICAgICAgICAkKCc8aT4nLHsKICAgICAgICAgICAgICAgICAgICAnY2xhc3MnOidzYXknCiAgICAgICAgICAgICAgICAgICwgJ2RhdGEtdGlwJzoncCR0JCcrdXNlcklECiAgICAgICAgICAgICAgICB9KS50ZXh0KCflhqTmnoknKQogICAgICAgICAgICApLmFwcGVuZCgkKCc8aT4nLHsnY2xhc3MnOidzYXlfMSd9KQogICAgICAgICAgICApLmFwcGVuZCgkKCc8aT4nLHsnY2xhc3MnOidzYXlfMid9KQogICAgICAgICAgICApLmFwcGVuZCgkKCc8aT4nLHsnY2xhc3MnOmNzc0Z9KQogICAgICAgICAgICApLmFwcGVuZCgKICAgICAgICAgICAgICAgICQoJzxhPicsewogICAgICAgICAgICAgICAgICAgICdjbGFzcyc6J25hbWUnCiAgICAgICAgICAgICAgICAgICwgaHJlZjpocmVmCiAgICAgICAgICAgICAgICAgICwgdGFyZ2V0OidfYmxhbmsnCiAgICAgICAgICAgICAgICB9KS50ZXh0KHVzZXJOYW1lKQogICAgICAgICAgICApLnNob3coKQogICAgICAgIDsKICAgICAgICBpZihmXyYmX2YpewogICAgICAgICAgICAkY2FydC5lcSgwKS5hcHBlbmQoJHVzZXIyQik7CiAgICAgICAgfWVsc2UgaWYoZl8pewogICAgICAgICAgICAkY2FydC5lcSgxKS5hcHBlbmQoJHVzZXIyQik7CiAgICAgICAgfWVsc2UgaWYoX2YpewogICAgICAgICAgICAkY2FydC5lcSgyKS5hcHBlbmQoJHVzZXIyQik7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICRjYXJ0LmVxKDMpLmFwcGVuZCgkdXNlcjJCKTsKICAgICAgICB9CiAgICAgICAgdmFyIG51bTJCPSRjYXJ0RElWLmZpbmQoJy5saXN0IC51c2VyMkInKS5sZW5ndGg7CiAgICAgICAgJGNhcnRESVYuY2hpbGRyZW4oJy5kbycpLmF0dHIoJ2l6aF9udW0yQicsbnVtMkI9PTA/JzAnOm51bTJCPjk5OTk/JzEwaysnOm51bTJCKTsKICAgICAgICBpWmhpaHUuUXVpY2tCbG9jay5yZXNpemVCbG9ja0NhcnQoJGNhcnRESVYpOwogICAgfQogICAgdGhpcy5hZGRRdWlja0Jsb2NrID0gZnVuY3Rpb24oJGEpewogICAgICAgIHZhciAkdm90ZUluZm89JCgnLnptLWl0ZW0tdm90ZS1pbmZvJywkYSkKICAgICAgICBpZigkdm90ZUluZm8ubGVuZ3RoKXsKICAgICAgICAgICAgdmFyICR2b3RlcnM9JHZvdGVJbmZvLmNoaWxkcmVuKCcudm90ZXJzJykKICAgICAgICAgICAgaWYoJHZvdGVycy5sZW5ndGgpewogICAgICAgICAgICAgICAgdmFyIHM9WyfvvIwnLCR2b3RlSW5mby5hdHRyKCdkYXRhLXZvdGVjb3VudCcpLCfkuKrkuZ/kuI3og73lv43vvIzmnpzmlq3mkpUnXS5qb2luKCcnKQogICAgICAgICAgICAgICAgICAsIGFpZD0kYS5hdHRyKCdkYXRhLWFpZCcpfHwkYS5jaGlsZHJlbignW2l0ZW1wcm9wPSJaUmVhY3RvciJdJykuYXR0cignZGF0YS1pZCcpCiAgICAgICAgICAgICAgICAgICwgdXJsPVsnLycsJGEuYXR0cignZGF0YS10eXBlJyk9PSdwJz8ncG9zdCc6J2Fuc3dlcicsJy8nLGFpZCwnL3ZvdGVyc19wcm9maWxlJ10uam9pbignJykKICAgICAgICAgICAgICAgICQoJzxhPicse2hyZWY6J2phdmFzY3JpcHQ6OycsJ2NsYXNzJzondGV4dCd9KS50ZXh0KHMpLmJpbmQoJ2NsaWNrJyxmdW5jdGlvbihldmVudCl7CiAgICAgICAgICAgICAgICAgICAgdmFyICR0PSRhLmZpbmQoJy5hdXRob3ItaW5mbyA+IGEubmFtZSwuem0taXRlbS1hbnN3ZXItYXV0aG9yLWluZm8gPiBhLmF1dGhvci1saW5rJykKICAgICAgICAgICAgICAgICAgICBpZigkdCYmJHQubGVuZ3RoKXsKICAgICAgICAgICAgICAgICAgICAgICAgaVpoaWh1LlF1aWNrQmxvY2suVXNlcnMyQi5wdXNoKCR0KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpWmhpaHUuUXVpY2tCbG9jay5pbjJCbG9ja0NhcnQodXJsKQogICAgICAgICAgICAgICAgfSkuYXBwZW5kVG8oJHZvdGVJbmZvKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKICAgIHRoaXMuYWRkUXVpY2tCbG9ja0luT25lQ29tbWVudCA9IGZ1bmN0aW9uKCRjbUl0ZW0pewogICAgICAgIHZhciAkd2hlcmU9JCgnLnptLWNvbW1lbnQtaGQnLCRjbUl0ZW0pOwogICAgICAgIGlmKCR3aGVyZS5maW5kKCcuaXpoLXF1aWNrLWJsb2NrLXBlbmQnKS5sZW5ndGgpcmV0dXJuOwogICAgICAgICQoJzxhPicsewogICAgICAgICAgICAnY2xhc3MnOidpemgtcXVpY2stYmxvY2stcGVuZCBpemgtYnV0dG9uJwogICAgICAgICAgLCBocmVmOidqYXZhc2NyaXB0OnZvaWQoMCk7JwogICAgICAgICAgLCAnZGF0YS10aXAnOidzJGwk5bCG5q2k5Lq65YiX5YWl5YCZ5a6h5ZCN5Y2V5Lul5b6F5pS255uRJwogICAgICAgIH0pLnRleHQoJ+WAmeWuoScpLmNsaWNrKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIHZhciAkZSA9ICQodGhpcykubmV4dCgpCiAgICAgICAgICAgIGlaaGlodS5RdWlja0Jsb2NrLlVzZXJzMkIucHVzaCgkZSkKICAgICAgICAgICAgaVpoaWh1LlF1aWNrQmxvY2suaW4yQmxvY2tDYXJ0KCk7CiAgICAgICAgfSkucHJlcGVuZFRvKCR3aGVyZSkuaGlkZSgpOwogICAgfTsKICAgIHRoaXMuYWRkUXVpY2tCbG9ja0luQ29tbWVudExpc3QgPSBmdW5jdGlvbigkd2hlcmUpewogICAgICAgIC8vIFJlZ2lvbjog5b+r6YCf5bGP6JS9CiAgICAgICAgdmFyICRjbT0kd2hlcmUuaXMoJy56bS1jb21tZW50LWJveCcpPyR3aGVyZTokd2hlcmUuY2xvc2VzdCgnLnptLWNvbW1lbnQtYm94JykKICAgICAgICAgICwgJHU9JCgnLnptLWl0ZW0tY29tbWVudCcsJGNtKQogICAgICAgIDsKICAgICAgICAkdS5lYWNoKGZ1bmN0aW9uKGksZSl7CiAgICAgICAgICAgIGlaaGlodS5RdWlja0Jsb2NrLmFkZFF1aWNrQmxvY2tJbk9uZUNvbW1lbnQoJChlKSk7CiAgICAgICAgfSk7CiAgICAgICAgdmFyICRidG5RdWlja0Jsb2NrPSQoJzxhPicsewogICAgICAgICAgICAgICAgJ2NsYXNzJzonaXpoLXF1aWNrLWJsb2NrLXN3aXRjaCBpemgtYnV0dG9uJwogICAgICAgICAgICAgICwgaHJlZjonamF2YXNjcmlwdDp2b2lkKDApOycKICAgICAgICAgICAgICAsICdkYXRhLXRpcCc6J3MkdCTlvIDlp4vku47or4TorrrogIXkuK3pgInmi6nlsY/olL3lr7nosaEnCiAgICAgICAgICAgIH0pLnRleHQoJ+W/q+mAn+Wxj+iUvScpLmNzcyh7J21hcmdpbi1sZWZ0Jzo3fSkucHJlcGVuZFRvKCR3aGVyZSkuY2xpY2soZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIGlmKHRoaXMuZ2V0QXR0cmlidXRlKCdvbicpPT0nMScpewogICAgICAgICAgICAgICAgICAgICQoJy56bS1jb21tZW50LWhkIC5pemgtcXVpY2stYmxvY2stcGVuZCcpLmhpZGUoKTsKICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoeydkYXRhLXRpcCc6J3MkdCTlvIDlp4vku47or4TorrrogIXkuK3pgInmi6nlsY/olL3lr7nosaEnLCdvbic6JzAnfSkucmVtb3ZlQ2xhc3MoJ29uJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgICAgICQoJy56bS1jb21tZW50LWhkIC5pemgtcXVpY2stYmxvY2stcGVuZCcpLnNob3coKTsKICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoeydkYXRhLXRpcCc6J3MkdCTnu5PmnZ/ku47or4TorrrogIXkuK3pgInmi6nlsY/olL3lr7nosaEnLCdvbic6JzEnfSkuYWRkQ2xhc3MoJ29uJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgOwogICAgICAgIGlmKCRjbS5pcygnLmVtcHR5JykpewogICAgICAgICAgICAkYnRuUXVpY2tCbG9jay5oaWRlKCk7CiAgICAgICAgfQogICAgICAgIC8vIFJlZ2lvbiBlbmQKICAgIH07CiAgICAKICAgIGlaaGlodS4kYm9keS5iaW5kKCdET01Ob2RlSW5zZXJ0ZWQnLGZ1bmN0aW9uKGV2ZW50KXsKICAgICAgICAkKGV2ZW50LnRhcmdldCkuZmlsdGVyKCcjemgtdG9vbHRpcCcpLmJpbmQoJ0RPTU5vZGVJbnNlcnRlZCcsZnVuY3Rpb24oZXZlbnQpewogICAgICAgICAgICB2YXIgJGE9JChldmVudC50YXJnZXQpLmZpbHRlcignI3poLXRvb2x0aXAtcGVvcGxlJykuZmluZCgnYVtuYW1lPWZvY3VzXScpCiAgICAgICAgICAgICAgLCBiaWQ9JGEuYXR0cignaWQnKQogICAgICAgICAgICAgICwgd2hvPScsJytiaWQrJywnCiAgICAgICAgICAgIDsKICAgICAgICAgICAgaWYoJGEuaXMoJy56Zy1idG4tdW5mb2xsb3cnKSYmaVpoaWh1LlF1aWNrQmxvY2suVW5mb2xsb3dlZC5Vc2Vycy5pbmRleE9mKHdobyk+PTApewogICAgICAgICAgICAgICAgJGEudGV4dCgn5YWz5rOoJykucmVtb3ZlQ2xhc3MoJ3pnLWJ0bi11bmZvbGxvdycpLmFkZENsYXNzKCd6Zy1idG4tZm9sbG93Jyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYoJGEuaXMoJy56Zy1idG4tZm9sbG93JykmJmlaaGlodS5RdWlja0Jsb2NrLlJlZm9sbG93ZWQuVXNlcnMuaW5kZXhPZih3aG8pPj0wKXsKICAgICAgICAgICAgICAgICRhLnRleHQoJ+WPlua2iOWFs+azqCcpLnJlbW92ZUNsYXNzKCd6Zy1idG4tZm9sbG93JykuYWRkQ2xhc3MoJ3pnLWJ0bi11bmZvbGxvdycpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9KTsKICAgIHJldHVybiB0aGlzOwp9CgovKioKICogQGNsYXNzIFF1aWNrRmF2bwogKi8KZnVuY3Rpb24gUXVpY2tGYXZvKGlaaGlodSkgewogICAgaWYgKCB0eXBlb2YgaVpoaWh1ID09PSAndW5kZWZpbmVkJyB8fCAhaVpoaWh1IHx8ICFpWmhpaHUuY29uZmlnWydRdWlja0Zhdm8nXSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgaVpoaWh1LlF1aWNrRmF2byA9IHRoaXM7CiAgICAKICAgIHRoaXMuRGVmYXVsdENvdW50ID0gNDsKICAgIHRoaXMuUGlubmVkTGlzdCA9IGlaaGlodS5jb25maWdbJ1F1aWNrRmF2b1Bpbm5lZCddOwogICAgdGhpcy5jc3MgPSAKICAgICAgICBbJy5pemgtUGluNFF1aWNrRmF2b3twYWRkaW5nOjNweCA1cHggMDtmbG9hdDpyaWdodDtkaXNwbGF5OmJsb2NrO21hcmdpbi10b3A6NHB4O21hcmdpbi1yaWdodDoyZW07bGluZS1oZWlnaHQ6MS4yNTt9JwogICAgICAgICwnLml6aC1QaW40UXVpY2tGYXZvIC56bS1pdGVtLXRvcC1idG57dmlzaWJpbGl0eTp2aXNpYmxlO21hcmdpbjowIDRweDtmbG9hdDpyaWdodDt9JwogICAgICAgICwnZGl2Lml6aF9mYXZ7cG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDo5OTk5O2Rpc3BsYXk6bm9uZTtib3JkZXI6MXB4IHNvbGlkICM5OTk5OTk7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JvcmRlci1yYWRpdXM6NXB4IDVweCA1cHggMDttYXJnaW4tbGVmdDotMXB4O30nCiAgICAgICAgLCdkaXYuaXpoX2ZhdiAudGl0bGV7cGFkZGluZzowIDVweDtiYWNrZ3JvdW5kLWNvbG9yOiMwODc0YzQ7Y29sb3I6I2ZmZjtmb250LXdlaWdodDpib2xkO2ZvbnQtc2l6ZToxNXB4O3RleHQtYWxpZ246Y2VudGVyO2JvcmRlci1yYWRpdXM6M3B4IDNweCAwIDA7fScKICAgICAgICAsJ2Rpdi5pemhfZmF2IGEuZmF2e2Rpc3BsYXk6YmxvY2s7Y2xlYXI6Ym90aDtmbG9hdDtsZWZ0O3BhZGRpbmc6MCAzNnB4IDAgMjRweDtsaW5lLWhlaWdodDoyO30nCiAgICAgICAgLCdkaXYuaXpoX2ZhdiBhLmZhdiBpe3Bvc2l0aW9uOmFic29sdXRlO21hcmdpbi10b3A6MC41ZW07fScKICAgICAgICAsJ2Rpdi5pemhfZmF2IGEuZmF2IGkuc3Bpbm5lci1ncmF5e2xlZnQ6MDt9JwogICAgICAgICwnZGl2Lml6aF9mYXYgYS5mYXYgaS56LWljb24tY29sbGVjdHtsZWZ0OjEwcHg7dmlzaWJpbGl0eTpoaWRkZW47YmFja2dyb3VuZC1wb3NpdGlvbjotNTZweCAtMzZweDt9JwogICAgICAgICwnZGl2Lml6aF9mYXYgYS5mYXYuc2VsZWN0ZWQgaS56LWljb24tY29sbGVjdHt2aXNpYmlsaXR5OnZpc2libGU7fScKICAgICAgICAsJ2Rpdi5pemhfZmF2IGEuZmF2OmhvdmVye3RleHQtZGVjb3JhdGlvbjpub25lfScKICAgICAgICAsJ2Rpdi5pemhfZmF2IGEuZmF2IHNwYW57ZmxvYXQ6cmlnaHQ7ZGlzcGxheTpibG9jazttYXJnaW4tcmlnaHQ6LTMycHh9JwogICAgICAgICwnLm1ldGEtaXRlbS5vbntwb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4OjEwMDAwO2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3JkZXI6MXB4IHNvbGlkICM5OTk5OTk7Ym9yZGVyLXRvcC1jb2xvcjojZmZmO21hcmdpbjotMXB4IC04cHggLTFweCAtMXB4O3BhZGRpbmc6MCA3cHg7Ym9yZGVyLXJhZGl1czoycHggMnB4IDNweCAzcHg7fScKICAgICAgICAsJyddLmpvaW4oJ1xuJyk7CiAgICB0aGlzLmFkZFF1aWNrRmF2byA9IGZ1bmN0aW9uKCR2LCRhKXsKICAgICAgICBpZigkdi5sZW5ndGgpewogICAgICAgICAgICBpZigkYS5jaGlsZHJlbignLml6aF9mYXYnKS5sZW5ndGg8PTApewogICAgICAgICAgICAgICAgJCgnPGRpdj4nLCB7ICdjbGFzcyc6ICdpemhfZmF2JyB9KQogICAgICAgICAgICAgICAgCS5hcHBlbmQoJCgnPGk+JywgeyAnY2xhc3MnOiAnc3Bpbm5lci1ncmF5JyB9KSkKICAgICAgICAgICAgICAgIAkuYXBwZW5kKCcmbmJzcDvliqDovb3kuK0uLi4mbmJzcDsnKQogICAgICAgICAgICAgICAgCS5iaW5kKCdtb3VzZW92ZXInLCBmdW5jdGlvbigpewoJICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnNob3coKS5wYXJlbnQoKS5maW5kKCcubWV0YS1pdGVtW25hbWU9ZmF2b10nKS5hZGRDbGFzcygnb24nKTsKICAgICAgICAgICAgICAgIAl9KQogICAgICAgICAgICAgICAgCS5iaW5kKCdtb3VzZW91dCcsIGZ1bmN0aW9uKCl7CgkgICAgICAgICAgICAgICAgICAgICQodGhpcykuaGlkZSgpLnBhcmVudCgpLmZpbmQoJy5tZXRhLWl0ZW1bbmFtZT1mYXZvXScpLnJlbW92ZUNsYXNzKCdvbicpOwoJICAgICAgICAgICAgICAgIH0pCgkgICAgICAgICAgICAuYXBwZW5kVG8oJGEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgICR2LmJpbmQoJ21vdXNlZW50ZXInLGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICB2YXIgJGE9aVpoaWh1LmdldEl0ZW0oJCh0aGlzKSkKICAgICAgICAgICAgICAgICAgLCAkbT0kKHRoaXMpLmFkZENsYXNzKCdvbicpLmNsb3Nlc3QoJy56bS1pdGVtLW1ldGEnKQogICAgICAgICAgICAgICAgICAsIGFpZD0kYS5hdHRyKCdkYXRhLWFpZCcpCiAgICAgICAgICAgICAgICAgICwgJG9wPSQodGhpcykub2Zmc2V0UGFyZW50KCkKICAgICAgICAgICAgICAgICAgLCBib3R0b20xPXBhcnNlSW50KCRvcC5jc3MoJ21hcmdpbi1ib3R0b20nKSkKICAgICAgICAgICAgICAgICAgLCBib3R0b20yPXBhcnNlSW50KCRhLmNzcygncGFkZGluZy1ib3R0b20nKSkKICAgICAgICAgICAgICAgICAgLCBwb3M9JCh0aGlzKS5wb3NpdGlvbigpCiAgICAgICAgICAgICAgICA7CiAgICAgICAgICAgICAgICAkYS5jaGlsZHJlbignLml6aF9mYXYnKS5jc3MoewogICAgICAgICAgICAgICAgICAgICdib3R0b20nOihpc05hTihib3R0b20xKT8wOmJvdHRvbTEpKyhpc05hTihib3R0b20yKT8wOmJvdHRvbTIpKyRvcC5oZWlnaHQoKS1wb3MudG9wCiAgICAgICAgICAgICAgICAgICwgJ2xlZnQnOnBvcy5sZWZ0KyRtLnBvc2l0aW9uKCkubGVmdAogICAgICAgICAgICAgICAgfSkuc2hvdygpOwogICAgICAgICAgICAgICAgJC5nZXRKU09OKCcvY29sbGVjdGlvbnMvanNvbicsJC5wYXJhbSh7YW5zd2VyX2lkOmFpZH0pLGZ1bmN0aW9uKHJlc3VsdCxzdGF0dXMseGhyKXsKICAgICAgICAgICAgICAgICAgICB2YXIgYWlkPXRoaXMudXJsLnN1YnN0cih0aGlzLnVybC5pbmRleE9mKCdhbnN3ZXJfaWQ9JykrMTApCiAgICAgICAgICAgICAgICAgICAgICAsIHNlbD1wYWdlSXMuUXVlc3Rpb24/Jy56bS1pdGVtLWFuc3dlcicKICAgICAgICAgICAgICAgICAgICAgICAgICAgOnBhZ2VJcy5Ib21lPycuZmVlZC1pdGVtJwogICAgICAgICAgICAgICAgICAgICAgICAgICA6cGFnZUlzLkFuc3dlcj8nLnptLWl0ZW0tYW5zd2VyJwogICAgICAgICAgICAgICAgICAgICAgICAgICA6JycKICAgICAgICAgICAgICAgICAgICAgICwgJGE9JChzZWwrJ1tkYXRhLWFpZD0nK2FpZCsnXScpCiAgICAgICAgICAgICAgICAgICAgICAsICR2PSRhLmNoaWxkcmVuKCcuaXpoX2ZhdicpLmVtcHR5KCkuYXBwZW5kKCQoJzxkaXY+Jyx7J2NsYXNzJzondGl0bGUnLHRpdGxlOifku6XkuIvkuLrmnIDov5HpgInmi6nnmoTmlLbol4/lpLknfSkuYXBwZW5kKCflv6vpgJ/mlLbol48nKSkKICAgICAgICAgICAgICAgICAgICA7CiAgICAgICAgICAgICAgICAgICAgaWYoJyc9PXNlbClyZXR1cm47CiAgICAgICAgICAgICAgICAgICAgdmFyIGZhdkFsbD1yZXN1bHQubXNnWzBdCiAgICAgICAgICAgICAgICAgICAgICAsIGZhdlNlbD1yZXN1bHQubXNnWzFdCiAgICAgICAgICAgICAgICAgICAgICAsIG51bT1pWmhpaHUuUXVpY2tGYXZvLkRlZmF1bHRDb3VudAogICAgICAgICAgICAgICAgICAgICAgLCBmYXY9bmV3IEFycmF5KCkKICAgICAgICAgICAgICAgICAgICAgICwgZmF2Tm9ybWFsPW5ldyBBcnJheSgpCiAgICAgICAgICAgICAgICAgICAgOwogICAgICAgICAgICAgICAgICAgICQuZWFjaChmYXZBbGwsZnVuY3Rpb24oaSxlKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZJRD1lWzBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgLCBwaW5uZWQ9aVpoaWh1LlF1aWNrRmF2by5QaW5uZWRMaXN0W2ZJRF0KICAgICAgICAgICAgICAgICAgICAgICAgOwogICAgICAgICAgICAgICAgICAgICAgICBpZihwaW5uZWQpewogICAgICAgICAgICAgICAgICAgICAgICAgIGZhdi5wdXNoKGUpOwogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICBmYXZOb3JtYWwucHVzaChlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIG51bSAtPSBmYXYubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgIGlmKG51bSA+IDApewogICAgICAgICAgICAgICAgICAgICAgICBmYXY9ZmF2LmNvbmNhdChmYXZOb3JtYWwuc2xpY2UoMCxudW0pKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZmF2Tm9ybWFsLmxlbmd0aD0wOwogICAgICAgICAgICAgICAgICAgIHdoaWxlKGZhdi5sZW5ndGgpewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZT1mYXYuc2hpZnQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICwgZklEPWVbMF0KICAgICAgICAgICAgICAgICAgICAgICAgICAsIGZOYW1lPWVbMV0KICAgICAgICAgICAgICAgICAgICAgICAgOwogICAgICAgICAgICAgICAgICAgICAgICBmYXZOb3JtYWxbZklEXT1mTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRmPSQoJzxhLz4nLHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY2xhc3MnOidmYXYnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgaHJlZjonamF2YXNjcmlwdDo7JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGFpZDphaWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBmaWQ6ZklECiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS50ZXh0KGZOYW1lKS5jbGljayhmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1PScvY29sbGVjdGlvbi8nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsICRmPSQodGhpcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgJGk9JGYuY2hpbGRyZW4oJzpmaXJzdCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpLmhhc0NsYXNzKCdzcGlubmVyLWdyYXknKSlyZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSs9JGYuaGFzQ2xhc3MoJ3NlbGVjdGVkJyk/J3JlbW92ZSc6J2FkZCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGkuYXR0cignY2xhc3MnLCdzcGlubmVyLWdyYXknKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLnBvc3QodSwkLnBhcmFtKHtfeHNyZjokKCdpbnB1dFtuYW1lPV94c3JmXScpLnZhbCgpLGFuc3dlcl9pZDokKHRoaXMpLmF0dHIoJ2FpZCcpLGZhdmxpc3RfaWQ6JCh0aGlzKS5hdHRyKCdmaWQnKX0pLGZ1bmN0aW9uKHJlc3VsdCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY3Q9dGhpcy51cmwuc3Vic3RyaW5nKHRoaXMudXJsLmxhc3RJbmRleE9mKCcvJykrMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGZpZD11dGlscy5nZXRQYXJhbUluUXVlcnkodGhpcy5kYXRhLCdmYXZsaXN0X2lkJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGFpZD11dGlscy5nZXRQYXJhbUluUXVlcnkodGhpcy5kYXRhLCdhbnN3ZXJfaWQnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgc2VsPXBhZ2VJcy5RdWVzdGlvbj8nLnptLWl0ZW0tYW5zd2VyJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOnBhZ2VJcy5Ib21lPycuZmVlZC1pdGVtJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOicnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCAkdmk9Jyc9PXNlbD9udWxsOiQoc2VsKydbZGF0YS1haWQ9JythaWQrJ10gLml6aF9mYXYgYVtmaWQ9JytmaWQrJ10nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgaW5jPTA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCcnPT1zZWwpcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihhY3Q9PSdyZW1vdmUnJiZyZXN1bHQubXNnPT0nT0snKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR2aS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluYz0tMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoYWN0PT0nYWRkJyYmcmVzdWx0Lm1zZy5sZW5ndGgpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHZpLmFkZENsYXNzKCdzZWxlY3RlZCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jPTE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaW5jIT0wKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR2aS5jaGlsZHJlbignc3BhbicpLnRleHQocGFyc2VJbnQoJHZpLmNoaWxkcmVuKCdzcGFuJykudGV4dCgpKStpbmMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR2aS5jaGlsZHJlbignOmZpcnN0JykuYXR0cignY2xhc3MnLCd6LWljb24tY29sbGVjdCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkucHJlcGVuZCgkKCc8aS8+Jyx7J2NsYXNzJzonei1pY29uLWNvbGxlY3QnfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHNwYW4vPicpLnRleHQoZVszXSkpOwogICAgICAgICAgICAgICAgICAgICAgICAkZi5hcHBlbmRUbygkdi8qLmNoaWxkcmVuKHBpbm5lZD8nLnBpbm5lZCc6Jy5ub3JtYWwnKSovKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICQuZWFjaChmYXZTZWwsZnVuY3Rpb24oaSxlKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoZmF2Tm9ybWFsW2VdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHYuZmluZCgnYS5mYXZbZmlkPScrZSsnXScpLmFkZENsYXNzKCdzZWxlY3RlZCcpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAkdi5iaW5kKCdtb3VzZWxlYXZlJyxmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdmFyICRhPWlaaGlodS5nZXRJdGVtKCQodGhpcykucmVtb3ZlQ2xhc3MoJ29uJykpOwogICAgICAgICAgICAgICAgJGEuY2hpbGRyZW4oJy5pemhfZmF2JykuaGlkZSgpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9OwoKICAgIGlaaGlodS4kYm9keS5iaW5kKCdET01Ob2RlSW5zZXJ0ZWQnLGZ1bmN0aW9uKGV2ZW50KXsKCQl2YXIgJGU9JChldmVudC50YXJnZXQpOwoJCWlmKCRlLmlzKCcubW9kYWwtZGlhbG9nJykpewoJCQkkZS5iaW5kKCdET01Ob2RlSW5zZXJ0ZWQnLGZ1bmN0aW9uKGV2ZW50KXsKCQkJCXZhciAkZT0kKGV2ZW50LnRhcmdldCkKICAgICAgICAgICAgICAgICAgLCAkZmF2TGlzdD0kZS5maW5kKCcuem0tZmF2by1saXN0LWNvbnRlbnQnKQogICAgICAgICAgICAgICAgOwoJCQkJaWYoJGZhdkxpc3QubGVuZ3RoKXsKCQkJCQl2YXIgJGZhdkl0ZW1zPSRmYXZMaXN0LmNoaWxkcmVuKCcuem0tZmF2by1saXN0LWl0ZW0tbGlua1tkYXRhLWxpZF0nKQogICAgICAgICAgICAgICAgICAgICAgLCBmdW5jUGluPWZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBpbm5lZD1lLmNoZWNrZWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCAkZT0kKGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgJGY9JGUuY2xvc2VzdCgnLnptLWZhdm8tbGlzdC1pdGVtLWxpbmsnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgO2lmKCEkZi5sZW5ndGgpcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpZD0kZS5hdHRyKCdsaWQnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsICRjaGVja3M9JGUuY2xvc2VzdCgnLnptLWZhdm8tbGlzdC1jb250ZW50JykuZmluZCgnLml6aC1QaW40UXVpY2tGYXZvIC50X2pjaGtib3gnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHRpbWU9NTAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBjc3NTdGFydD17cG9zaXRpb246J3JlbGF0aXZlJywnYmFja2dyb3VuZC1jb2xvcic6JyMwODc0QzQnLCd6LWluZGV4JzonMTAwJ30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBjc3NFbmQ9e3Bvc2l0aW9uOicnLCdiYWNrZ3JvdW5kLWNvbG9yJzonJywnei1pbmRleCc6Jyd9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgZnVuY1JvbGxVcD1mdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGI9JGUuY2xvc2VzdCgnLnptLWZhdm8tbGlzdC1pdGVtLWxpbmsnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgJGE9JGIucHJldigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoISRhLmxlbmd0aHx8KCRhLmhhc0NsYXNzKCdwaW5uZWQnKSYmcGFyc2VJbnQoJGEuYXR0cignZGF0YS1saWQnKSk8cGFyc2VJbnQoJGIuYXR0cignZGF0YS1saWQnKSkpKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYi5hbmltYXRlKHtib3R0b206JGEub3V0ZXJIZWlnaHQoKX0sewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246dGltZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgc3RlcDpmdW5jdGlvbihub3cpeyRiLmNzcyhjc3NTdGFydCk7fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgY29tcGxldGU6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYi5jc3MoJC5leHRlbmQoe2JvdHRvbTowfSxjc3NFbmQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYi5pbnNlcnRCZWZvcmUoJGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmNSb2xsVXAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGZ1bmNSb2xsRG93bj1mdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGE9JGUuY2xvc2VzdCgnLnptLWZhdm8tbGlzdC1pdGVtLWxpbmsnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgJGI9JGEubmV4dCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoISRiLmxlbmd0aHx8KCEkYi5oYXNDbGFzcygncGlubmVkJykmJnBhcnNlSW50KCRiLmF0dHIoJ2luZGV4JykpPnBhcnNlSW50KCRhLmF0dHIoJ2luZGV4JykpKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGEuYW5pbWF0ZSh7dG9wOiRiLm91dGVySGVpZ2h0KCl9LHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOnRpbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHN0ZXA6ZnVuY3Rpb24obm93KXskYS5jc3MoY3NzU3RhcnQpO30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGNvbXBsZXRlOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGEuY3NzKCQuZXh0ZW5kKHt0b3A6MH0sY3NzRW5kKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGEuaW5zZXJ0QWZ0ZXIoJGIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmNSb2xsRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihwaW5uZWQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRmLmFkZENsYXNzKCdwaW5uZWQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jUm9sbFVwKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZi5yZW1vdmVDbGFzcygncGlubmVkJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY1JvbGxEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpWmhpaHUuUXVpY2tGYXZvLlBpbm5lZExpc3RbbGlkXT1waW5uZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5zZXRDZmcoJ1F1aWNrRmF2b1Bpbm5lZCcsaVpoaWh1LlF1aWNrRmF2by5QaW5uZWRMaXN0KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIDsKCQkJCQkkZmF2SXRlbXMuZWFjaChmdW5jdGlvbihpLGUpewoJCQkJCQl2YXIgbGlkPWUuZ2V0QXR0cmlidXRlKCdkYXRhLWxpZCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgLCAkcGluPSQoJzxhLz4nLHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmOidqYXZhc2NyaXB0OnZvaWQoMCk7JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsICdjbGFzcyc6J2l6aC1QaW40UXVpY2tGYXZvJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsICdsaWQnOmxpZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsICdkYXRhLXRpcCc6J3MkYiTkv53mjIHlnKjjgIzlv6vpgJ/mlLbol4/jgI3oj5zljZXpobbpg6jmmL7npLonCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5hcHBlbmQoJCgnPHNwYW4vPicpLmFwcGVuZCgn572u6aG2JykuYWRkKCc8aS8+Jyx7J2NsYXNzJzonem0taXRlbS10b3AtYnRuJ30pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kVG8oJCgnLnpnLWdyYXknLGUpKS5hdHRyKCdpbmRleCcsaSkKICAgICAgICAgICAgICAgICAgICAgICAgOwogICAgICAgICAgICAgICAgICAgICAgICBlLnNldEF0dHJpYnV0ZSgnaW5kZXgnLGkpOwogICAgICAgICAgICAgICAgICAgICAgICAkcGluLmJpbmQoJ2NsaWNrJyxmdW5jdGlvbihldmVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWQ9IXRoaXMuY2hlY2tlZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmNQaW4odGhpcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmNoZWNrZWQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY2hpbGRyZW4oJ3NwYW4nKS50ZXh0KCflj5bmtojnva7pobYnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCdpJykuYWRkQ2xhc3MoJ3ptLWl0ZW0tdG9wLWJ0bi1jYW5jZWwnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY2hpbGRyZW4oJ3NwYW4nKS50ZXh0KCfnva7pobYnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCdpJykucmVtb3ZlQ2xhc3MoJ3ptLWl0ZW0tdG9wLWJ0bi1jYW5jZWwnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGV2ZW50LnByZXZlbnREZWZhdWx0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKGV2ZW50LnN0b3BQcm9wYWdhdGlvbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5jYW5jZWxCdWJibGU9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfSlbMF0uY2hlY2tlZD1mYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaVpoaWh1LlF1aWNrRmF2by5QaW5uZWRMaXN0W2xpZF0pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBpbi5jbGljaygpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgkJCQkJfSk7CgkJCQl9CgkJCX0pOwoJCX0KCX0pOwoKICAgIHJldHVybiB0aGlzOwp9CgovKioKICogQGNsYXNzIFNlYXJjaGluZ0xpc3QKICovCmZ1bmN0aW9uIFNlYXJjaGluZ0xpc3QoaVpoaWh1KSB7CiAgICBpZiAoIHR5cGVvZiBpWmhpaHUgPT09ICd1bmRlZmluZWQnIHx8ICFpWmhpaHUpIHsKICAgICAgICByZXR1cm4gbnVsbAogICAgfQogICAgaVpoaWh1LlNlYXJjaGluZ0xpc3QgPSB0aGlzCiAgICAKICAgIHRoaXMuJHRvcFNlYXJjaCA9ICQoJyN6aC10b3Atc2VhcmNoLWZvcm0nKQogICAgdGhpcy4kdG9wU2VhcmNoSW5wdXQgPSAkKCcjemgtdG9wLXNlYXJjaC1mb3JtID4gaW5wdXQjcScpCiAgICBpZiAoIXRoaXMuJHRvcFNlYXJjaC5sZW5ndGgpIHJldHVybgoKICAgIHRoaXMuU2VhcmNoRW5naW5lT3V0c2lkZUxpc3QgPSB7CiAgICAgICAgJ2dvb2dsZSc6IHtpY29uOidodHRwczovL3d3dy5nb29nbGUuY29tL2Zhdmljb24uaWNvJyx1cmw6J2h0dHBzOi8vd3d3Lmdvb2dsZS5jb20vP3E9c2l0ZTp6aGlodS5jb20lMjB7MH0jcT1zaXRlOnpoaWh1LmNvbSt7MH0nfQogICAgICAsICdiYWlkdSc6IHtpY29uOidodHRwOi8vd3d3LmJhaWR1LmNvbS9mYXZpY29uLmljbycsdXJsOidodHRwOi8vd3d3LmJhaWR1LmNvbS9zP3dkPXNpdGU6emhpaHUuY29tJTIwezB9J30KICAgIH0KCiAgICB1dGlscy5vYnNlcnZlRE9NTm9kZUFkZGVkKHRoaXMuJHRvcFNlYXJjaFswXSxmdW5jdGlvbihldmVudCl7CiAgICAgICAgdmFyIF9hID0gZXZlbnQuYWRkZWROb2RlcyB8fCBbXQogICAgICAgIGlmICghX2EubGVuZ3RoKSByZXR1cm4KICAgICAgICB1dGlscy5vYnNlcnZlRE9NTm9kZUFkZGVkKF9hWzBdLGZ1bmN0aW9uKGV2ZW50KXtjb25zb2xlLmxvZyhpWmhpaHUuY29uZmlnWydTZWFyY2hFbmdpbmVPdXRzaWRlJ10pCiAgICAgICAgICAgIHZhciBfYSA9IGV2ZW50LmFkZGVkTm9kZXMgfHwgW251bGxdCiAgICAgICAgICAgICAgLCAkaXRlbSA9ICQoX2FbMF0pCiAgICAgICAgICAgICAgLCBzZW9LZXkgPSBpWmhpaHUuY29uZmlnWydTZWFyY2hFbmdpbmVPdXRzaWRlJ10gfHwgJ2JhaWR1JwogICAgICAgICAgICAgICwgc2VvID0gaVpoaWh1LlNlYXJjaGluZ0xpc3QuU2VhcmNoRW5naW5lT3V0c2lkZUxpc3Rbc2VvS2V5XSB8fCB7aWNvbjonJyx1cmw6Jyd9CiAgICAgICAgICAgICAgLCBzdHJTZWFyY2hVcmwgPSBzZW8udXJsLnJlcGxhY2UoL1x7MFx9L2csIGZ1bmN0aW9uKCl7cmV0dXJuIGlaaGlodS5TZWFyY2hpbmdMaXN0LiR0b3BTZWFyY2hJbnB1dC52YWwoKX0pCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHNlb0tleSkKICAgICAgICAgICAgaWYgKCRpdGVtLmlzKCcuYWMtcm93W3JvbGU9b3B0aW9uXScpKXsKICAgICAgICAgICAgICAgIHZhciAkYSA9ICRpdGVtLmNoaWxkcmVuKCdhJykKICAgICAgICAgICAgICAgICAgLCBocmVmID0gJGEuYXR0cignaHJlZicpCiAgICAgICAgICAgICAgICAgICwgY3NzID0gJ2Zsb2F0OnJpZ2h0O2JhY2tncm91bmQtcG9zaXRpb246LTI4NHB4IC0ycHg7JwogICAgICAgICAgICAgICAgICAsICRhTmV3ID0gJCgnPGE+Jywge2NsYXNzOid6Zy1pY29uJyxzdHlsZTpjc3MsaHJlZjpocmVmLHRhcmdldDonX2JsYW5rJyxjbGljazpmdW5jdGlvbihldmVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpCiAgICAgICAgICAgICAgICAgICAgfX0pCiAgICAgICAgICAgICAgICBpZiAoaHJlZi5pbmRleE9mKCcvc2VhcmNoPycpID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgJGFOZXcuY3NzKHttYXJnaW5Ub3A6JzAuNWVtJ30pCiAgICAgICAgICAgICAgICAgICAgJGl0ZW0uYXBwZW5kKCQoJzxhPicsIHtjbGFzczonaWNvbicsc3R5bGU6J21hcmdpbi10b3A6MC41ZW07ZmxvYXQ6bGVmdCcsaHJlZjpzdHJTZWFyY2hVcmwsdGFyZ2V0OidfYmxhbmsnLGNsaWNrOmZ1bmN0aW9uKGV2ZW50KXsKICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCkKICAgICAgICAgICAgICAgICAgICB9fSkuYXBwZW5kKCQoJzxpbWc+Jywge2JvcmRlcjowLHNyYzpzZW8uaWNvbix3aWR0aDoxNixoZWlnaHQ6MTZ9KSkpCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhyZWYuaW5kZXhPZignL3F1ZXN0aW9uLycpIDwgMCkgewogICAgICAgICAgICAgICAgICAgICRhTmV3LmNzcyh7bWFyZ2luVG9wOictMS41ZW0nfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICRpdGVtLmFwcGVuZCgkYU5ldykKICAgICAgICAgICAgfQogICAgICAgIH0pCiAgICB9KQoKICAgIHJldHVybiB0aGlzCn0KCi8qKgogKiBAY2xhc3MgVG9wTmF2CiAqLwpmdW5jdGlvbiBUb3BOYXYoaVpoaWh1KSB7CiAgICBpZiAoIHR5cGVvZiBpWmhpaHUgPT09ICd1bmRlZmluZWQnIHx8ICFpWmhpaHUgfHwgIWlaaGlodS5jb25maWdbJ1RvcE5hdkF1dG9Gb2xkJ10pIHsKICAgICAgICByZXR1cm4gbnVsbAogICAgfQogICAgaVpoaWh1LlRvcE5hdiA9IHRoaXMKICAgIAogICAgdGhpcy4kdG9wTmF2ID0gJCgnYm9keSA+IC56dS10b3A6Zmlyc3QnKQogICAgICAgIC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24oZXZlbnQpewogICAgICAgICAgICB0aGlzLnN0eWxlLnRvcCA9ICcwJwogICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZSgnaXpoLW1vdXNlb3ZlcicsICcxJykKICAgICAgICAgICAgJCgnI2l6aENTU19Ob3RpTnVtJykucmVtb3ZlKCkKICAgICAgICB9KQogICAgICAgIC5vbignbW91c2VvdXQnLCBmdW5jdGlvbihldmVudCl7CiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdpemgtbW91c2VvdmVyJywgJzAnKQogICAgICAgICAgICBpWmhpaHUuVG9wTmF2LmZ1bmNGb2xkKCkKICAgICAgICB9KQogICAgaWYgKCF0aGlzLiR0b3BOYXYubGVuZ3RoKSByZXR1cm4KCiAgICB0aGlzLnRvcE5hdkhlaWdodCA9IHRoaXMuJHRvcE5hdi5oZWlnaHQoKSAtIDUKCiAgICB0aGlzLmZ1bmNGb2xkID0gZnVuY3Rpb24oZXZlbnQpewogICAgICAgIHZhciBzY3JvbGxUb3AgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wIHx8IDAKICAgICAgICAgICwgX3NlbGYgPSBpWmhpaHUuVG9wTmF2CiAgICAgICAgICAsIGlzTW91c2VPdmVyID0gJzEnID09PSAoX3NlbGYuJHRvcE5hdi5hdHRyKCdpemgtbW91c2VvdmVyJykgfHwgJycpCiAgICAgICAgICAsICRoZWFkID0gJCgnaGVhZDpmaXJzdCcpCiAgICAgICAgICAsICRjc3NOb3RpTnVtID0gJCgnI2l6aENTU19Ob3RpTnVtJykKICAgICAgICAgICwgJGZsb2F0aW5nQmFyID0gJCgnYm9keSA+IC5nb29nLXNjcm9sbGZsb2F0ZXItZmxvYXRpbmcnKQogICAgICAgIGlmIChzY3JvbGxUb3AgPT09IDApIHsKICAgICAgICAgICAgX3NlbGYuJHRvcE5hdi5jc3Moe3RvcDowfSkKICAgICAgICB9IGVsc2UgaWYgKCFpc01vdXNlT3ZlcikgewogICAgICAgICAgICBpZiAoc2Nyb2xsVG9wIDwgX3NlbGYudG9wTmF2SGVpZ2h0KSB7CiAgICAgICAgICAgICAgICBfc2VsZi4kdG9wTmF2LmNzcyh7dG9wOi1zY3JvbGxUb3B9KQogICAgICAgICAgICAgICAgJGZsb2F0aW5nQmFyLmNzcyh7bWFyZ2luVG9wOi1zY3JvbGxUb3B9KQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgX3NlbGYuJHRvcE5hdi5jc3Moe3RvcDotX3NlbGYudG9wTmF2SGVpZ2h0fSkKICAgICAgICAgICAgICAgICRmbG9hdGluZ0Jhci5jc3Moe21hcmdpblRvcDotX3NlbGYudG9wTmF2SGVpZ2h0fSkKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc2Nyb2xsVG9wID4gMjApIHsKICAgICAgICAgICAgICAgIGlmICghJGNzc05vdGlOdW0ubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgJCgnPHN0eWxlPicsIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdpemhDU1NfTm90aU51bScKICAgICAgICAgICAgICAgICAgICAgICwgdHlwZTogJ3RleHQvY3NzJwogICAgICAgICAgICAgICAgICAgIH0pLmFwcGVuZFRvKCdoZWFkOmZpcnN0JykudGV4dCgnI3poLXRvcC1uYXYtY291bnQsI3poLXRvcC1uYXYtbmV3LXBte3Bvc2l0aW9uOmFic29sdXRlO3RvcDo0MHB4O2JvcmRlci1yYWRpdXM6MCAhaW1wb3J0YW50fS50b3AtbmF2LXByb2ZpbGUgLnp1LXRvcC1uYXYtdXNlcmluZm97b3ZlcmZsb3c6dmlzaWJsZSAhaW1wb3J0YW50fScpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAkY3NzTm90aU51bS5yZW1vdmUoKQogICAgfQoKICAgIGlaaGlodS4kd2luLnNjcm9sbCh0aGlzLmZ1bmNGb2xkKQoKICAgIHRoaXMub25Ob2RlQWRkZWQgPSBmdW5jdGlvbihldmVudCl7CiAgICAgICAgaVpoaWh1LlRvcE5hdi5mdW5jRm9sZCgpCiAgICAgICAgJC5lYWNoKGV2ZW50LnJlbW92ZWROb2RlcywgZnVuY3Rpb24oaSwgZSl7CiAgICAgICAgICAgIHZhciAkZmxvYXRpbmdCYXIgPSAkKGUpLmZpbHRlcignLmdvb2ctc2Nyb2xsZmxvYXRlcicpLmNzcyh7bWFyZ2luVG9wOicnfSkKICAgICAgICB9KQogICAgfQoKICAgIHJldHVybiB0aGlzCn0KCmFsbExpbmtzID0gZnVuY3Rpb24oX25hbWUsIF9saXN0U2VsLCBfbGlzdE5hbWUpIHsKICAgIHRoaXMubmFtZSA9IF9uYW1lCiAgICB0aGlzLmxpc3RTZWwgPSBfbGlzdFNlbAogICAgdGhpcy5saXN0TmFtZSA9IF9saXN0TmFtZQogICAgdGhpcy5kbGdJRCA9ICdpemgtZGxnLScgKyBfbmFtZQogICAgdGhpcy4kZGxnID0gbnVsbAogICAgdmFyIF9pbml0aWFsVGl0bGUgPSBfbGlzdE5hbWUgKyAn5Zyw5Z2A5riF5Y2VJwogICAgICAsIF9yZXN1bHQgPSBuZXcgQXJyYXkoKQogICAgICAsIF9sb2FkVGltZXMgPSAwCgogICAgLy/liIbmnpDlhoXlrrkKICAgIHZhciBwcm9jZXNzTm9kZSA9IGZ1bmN0aW9uKGNvbnRlbnQsJGRsZyl7CiAgICAgIHZhciAkcUN1cnJlbnQgPSBudWxsOwogICAgICAkKCcuem0taXRlbS1hbnN3ZXInLCBjb250ZW50KS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBpdGVtKXsKICAgICAgICB2YXIgJGEgPSAkKGl0ZW0pCiAgICAgICAgICAsICRxID0gJGEuY2xvc2VzdCgiLnptLWl0ZW0iKS5jaGlsZHJlbigiaDIiKS5jaGlsZHJlbigiYSIpCiAgICAgICAgOwogICAgICAgIGlmKCRxLmxlbmd0aCl7CiAgICAgICAgICAkcUN1cnJlbnQ9JHE7CiAgICAgICAgfWVsc2UgaWYoJHFDdXJyZW50KXsKICAgICAgICAgICRxPSRxQ3VycmVudDsKICAgICAgICB9ZWxzZXsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdmFyIGhyZWZRdWVzdGlvbiA9IHVybC5kYXRhLmF0dHJbImJhc2UiXSArICRxLmF0dHIoImhyZWYiKS5yZXBsYWNlKHVybC5kYXRhLmF0dHJbImJhc2UiXSwnJyk7CiAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgICAgdGl0bGU6ICRxLnRleHQoKSwKICAgICAgICAgICAgLy9xdWVzdGlvblVybDogaHJlZlF1ZXN0aW9uLAogICAgICAgICAgICBhbnN3ZXJVcmw6IGhyZWZRdWVzdGlvbiArICgkYS5wYXJlbnQoKS5pcygiLnptLWl0ZW0tZmF2IikgPyAiL2Fuc3dlci8iICsgJGEuYXR0cigiZGF0YS1hdG9rZW4iKSA6ICIiKSwKICAgICAgICAgICAgYW5zd2VyQXV0aG9yOiAkYS5maW5kKCcuem0taXRlbS1hbnN3ZXItYXV0aG9yLXdyYXAgYVtocmVmXj0iL3Blb3BsZSJdJykudGV4dCgpLnRyaW0oKSwKICAgICAgICAgICAgc3VtbWFyeTogJGEuZmluZCgiLnptLWl0ZW0tYW5zd2VyLXN1bW1hcnkiKS5jaGlsZHJlbigpLnJlbW92ZSgpLmVuZCgpLnRleHQoKSwKICAgICAgICAgICAgY29udGVudDogJGEuZmluZCgiLnptLWVkaXRhYmxlLWNvbnRlbnQiKS5odG1sKCkKICAgICAgICB9OwogICAgICAgIF9yZXN1bHQucHVzaChvYmopOwogICAgICAgIHZhciBzdHJUaXRsZSA9IHV0aWxzLmZvcm1hdFN0cignKiDjgIp7dGl0bGV944CLJiMxMzsqIHthbnN3ZXJBdXRob3J977yaJiMxMzsqIHtzdW1tYXJ5fScsIG9iaikKICAgICAgICAgICwgc3RyVVJMID0gdXRpbHMuZm9ybWF0U3RyKCd7YW5zd2VyVXJsfScsIG9iaikKICAgICAgICAgICwgJGxpID0gJCgnPGxpPicpLmFwcGVuZCgkKCc8YT4nLCB7IGhyZWY6IHN0clVSTCwgdGl0bGU6IHN0clRpdGxlIH0pLnRleHQoc3RyVVJMKSkuY3NzKHsgJ2xpc3Qtc3R5bGUtdHlwZSc6ICdub25lJyB9KQogICAgICAgICQoJy5pemhpaHUtY29sbGVjdGlvbi1saW5rcycsJGRsZykuYXBwZW5kKCRsaSk7CiAgICAgICAgdmFyIGNvdW50PV9yZXN1bHQubGVuZ3RoOwogICAgICAgICQoJy5pemhpaHUtY29sbGVjdGlvbi1pbmZvJywkZGxnKS50ZXh0KCfvvIjliqrlipvliqDovb3kuK0uLi7lt7LlvpfliLDorrDlvZUgJyArIGNvdW50ICsgJyDmnaHvvIknKTsKICAgICAgfSk7CiAgICB9OwogICAgICAgIAogICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbihwYWdlV2FudCxwYWdlTm93LCRkbGcpewogICAgICBpZiAoIXBhZ2VOb3cpcGFnZU5vdz0xOwogICAgICBpZigkZGxnLmlzKCc6aGlkZGVuJykpewogICAgICAgIHZhciBjb3VudD1fcmVzdWx0Lmxlbmd0aDsKICAgICAgICAkKCcuaXpoaWh1LWNvbGxlY3Rpb24taW5mbycsJGRsZykudGV4dCgn77yI5Yqg6L296KKr57uI5q2iLi4u5bey5b6X5Yiw6K6w5b2VICcgKyBjb3VudCArICcg5p2h77yJJyk7CiAgICAgICAgJCgnI3poLWdsb2JhbC1zcGlubmVyJykuaGlkZSgpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICAKICAgICAgaWYocGFnZVdhbnQ9PTEpewogICAgICAgICQoJy5pemhpaHUtY29sbGVjdGlvbi1saW5rcycsJGRsZykuZW1wdHkoKTsKICAgICAgICAkKCcjemgtZ2xvYmFsLXNwaW5uZXInKS5zaG93KCk7CiAgICAgICAgX3Jlc3VsdC5sZW5ndGg9MDsKICAgICAgICBfbG9hZFRpbWVzKys7CiAgICAgICAgJCgnLml6aGlodS1jb2xsZWN0aW9uLWluZm8nLCRkbGcpLnRleHQoJycpOwogICAgICB9CiAgICAgIHZhciAkcGFnZXI9JChfbGlzdFNlbCkucGFyZW50KCkuZmluZCgnLnptLWludml0ZS1wYWdlcicpCiAgICAgICAgLCAkbGFzdFBhZ2U9JHBhZ2VyLmNoaWxkcmVuKCdzcGFuJykubGFzdCgpLnByZXYoKQogICAgICAgICwgdG90YWxDb3VudD0kcGFnZXIubGVuZ3RoPT0wPzE6TnVtYmVyKCRsYXN0UGFnZS50ZXh0KCkpCiAgICAgIDsKICAgICAgaWYocGFnZVdhbnQ+dG90YWxDb3VudCl7CiAgICAgICAgJCgnLml6aGlodS1jb2xsZWN0aW9uLWluZm8nLCRkbGcpLnRleHQoJ++8iOWKoOi9veWujOaIkO+8jOWFseW+l+WIsOiusOW9lSAnICsgX3Jlc3VsdC5sZW5ndGggKyAnIOadoe+8iScpOwogICAgICAgICQoJyN6aC1nbG9iYWwtc3Bpbm5lcicpLmhpZGUoKTsKICAgICAgICAkKCcuc2VsQWxsJywkZGxnKS5jbGljaygpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHBhZ2VOZXh0PXBhZ2VXYW50KzE7CiAgICAgIGlmKHBhZ2VXYW50PT1wYWdlTm93KXsKICAgICAgICBwcm9jZXNzTm9kZSgkKF9saXN0U2VsKS5odG1sKCksJGRsZyk7CiAgICAgICAgaGFuZGxlcihwYWdlTmV4dCxwYWdlTm93LCRkbGcpCiAgICAgIH1lbHNlewogICAgICAgIHZhciBfdXJsPXVybC5kYXRhLmF0dHJbJ2Jhc2UnXSt1cmwuZGF0YS5hdHRyWydwYXRoJ10rJz9wYWdlPScrcGFnZVdhbnQ7CiAgICAgICAgJC5hamF4KF91cmwse3R5cGU6J2dldCcsY29udGV4dDp7bG9hZFRpbWVzOl9sb2FkVGltZXN9fSkuZG9uZShmdW5jdGlvbihyZXN1bHQpewogICAgICAgICAgaWYodGhpcy5sb2FkVGltZXMhPV9sb2FkVGltZXMpcmV0dXJuOwogICAgICAgICAgcHJvY2Vzc05vZGUocmVzdWx0LCRkbGcpOwogICAgICAgICAgaGFuZGxlcihwYWdlTmV4dCxwYWdlTm93LCRkbGcpCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH07CgogICAgLy/liJ3lp4vljJblvLnlh7rmoYYKICAgIHRoaXMuaW5pdERpYWxvZyA9IGZ1bmN0aW9uKCl7CiAgICAgICAgdGhpcy4kZGxnPSQoJyMnK3RoaXMuZGxnSUQpOwogICAgICAgIHZhciByZXRWYWw9MDx0aGlzLiRkbGcubGVuZ3RoOwogICAgICAgIGlmKCFyZXRWYWwpewogICAgICAgICAgICB0aGlzLiRkbGcgPSAkKCc8ZGl2PicsIHsgaWQ6IHRoaXMuZGxnSUQsICdjbGFzcyc6ICdtb2RhbC1kaWFsb2cgYWxsTGlua3MnLCB0YWJpbmRleDogJzAnLCBzdHlsZTogJ2Rpc3BsYXk6IG5vbmU7d2lkdGg6NTAwcHgnLCBuYW1lOiBfbmFtZSwgJ2xpc3RTZWwnOiBfbGlzdFNlbCB9KQogICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8ZGl2PicsIHsgJ2NsYXNzJzogJ21vZGFsLWRpYWxvZy10aXRsZSBtb2RhbC1kaWFsb2ctdGl0bGUtZHJhZ2dhYmxlJyB9KQogICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHNwYW4+JywgeyAnY2xhc3MnOiAnbW9kYWwtZGlhbG9nLXRpdGxlLXRleHQnIH0pLnRleHQoX2luaXRpYWxUaXRsZSkpCiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8c3Bhbj4nLCB7ICdjbGFzcyc6ICdtb2RhbC1kaWFsb2ctdGl0bGUtdGV4dCBpemhpaHUtY29sbGVjdGlvbi1pbmZvJyB9KSkKICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzxzcGFuPicsIHsKICAgICAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzogJ21vZGFsLWRpYWxvZy10aXRsZS1jbG9zZScKICAgICAgICAgICAgICAgICAgICAgICwgY2xpY2s6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3poLWdsb2JhbC1zcGlubmVyJykuaGlkZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcubW9kYWwtZGlhbG9nLWJnJykuaGlkZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5tb2RhbC1kaWFsb2cnKS5oaWRlKCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8ZGl2PicsIHsgJ2NsYXNzJzogJ21vZGFsLWRpYWxvZy1jb250ZW50JyB9KQogICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPGRpdj4nKQogICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzxkaXY+JywgeyAnY2xhc3MnOiAnemctc2VjdGlvbicgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPGRpdj4nLCB7ICdjbGFzcyc6ICdpemhpaHUtY29sbGVjdGlvbi1saW5rcyB6Zy1mb3JtLXRleHQtaW5wdXQnLCB0YWJJbmRleDogJy0xJywgc3R5bGU6ICdoZWlnaHQ6MzAwcHg7b3ZlcmZsb3cteTpzY3JvbGw7b3V0bGluZTpub25lOycgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzxmb3JtPicsIHsgYWN0aW9uOiAnaHR0cDovL2lsb3ZlemhpaHUuZHVhcHAuY29tL3NhdmVNZS5weScsIG1ldGhvZDogJ3Bvc3QnLCB0YXJnZXQ6ICdfYmxhbmsnLCBzdHlsZTogJ2Rpc3BsYXk6bm9uZScgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZXh0YXJlYT4nLCB7IHN0eWxlOiAid2lkdGg6IDEwMCU7IiwgbmFtZTogImxpbmtzIiwgJ2NsYXNzJzogIml6aGlodS1jb2xsZWN0aW9uLWxpbmtzLXBvc3QiIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPGlucHV0PicsIHsgbmFtZTogJ3RpdGxlJyB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzxkaXY+JywgeyAnY2xhc3MnOiAnem0tY29tbWFuZCcgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPGRpdj4nLCB7ICdjbGFzcyc6ICd6Zy1sZWZ0JyB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPGE+JywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY2xhc3MnOiAnemctYnRuLWJsdWUgcmVsb2FkJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBocmVmOiAnamF2YXNjcmlwdDp2b2lkKDApOycKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgY2xpY2s6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRkID0gJCh0aGlzKS5jbG9zZXN0KCcubW9kYWwtZGlhbG9nJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXIoMSwgTnVtYmVyKHVybC5kYXRhLnBhcmFtLnF1ZXJ5WydwYWdlJ10pLCAkZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRleHQoJ+mHjeaWsOiOt+WPlicpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8YT4nLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzogJ3pnLWJ0bi1ibHVlIHNhdmUnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgaHJlZjogJ2phdmFzY3JpcHQ6dm9pZCgwKTsnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgY2xpY2s6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGRsZyA9ICQodGhpcykuY2xvc2VzdCgnLm1vZGFsLWRpYWxvZy1jb250ZW50JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsICRsaW5rcyA9ICRkbGcuZmluZCgnLml6aGlodS1jb2xsZWN0aW9uLWxpbmtzJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsICRsaW5rc1Bvc3QgPSAkZGxnLmZpbmQoJy5pemhpaHUtY29sbGVjdGlvbi1saW5rcy1wb3N0JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsICRsaW5rc1RpdGxlID0gJGxpbmtzUG9zdC5uZXh0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsICRmb3JtID0gJGxpbmtzUG9zdC5wYXJlbnQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgbGlua3MgPSAnJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRsaW5rcy5maW5kKCdsaSBhJykuZWFjaChmdW5jdGlvbihpLCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rcyArPSBlLmdldEF0dHJpYnV0ZSgnaHJlZicpICsgJ1xuJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbGlua3NQb3N0LnZhbChsaW5rcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGxpbmtzVGl0bGUudmFsKCQoJyN6aC1mYXYtaGVhZC10aXRsZSwuem0tcHJvZmlsZS1oZWFkZXItbWFpbiAudGl0bGUtc2VjdGlvbiBhLm5hbWUnKS50ZXh0KCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRmb3JtLnN1Ym1pdCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkudGV4dCgn5L+d5a2YJykpCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICApLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpCiAgICAgICAgICAgICAgICAuZHJhZ2dhYmxlKHsgaGFuZGxlOiAnLm1vZGFsLWRpYWxvZy10aXRsZS1kcmFnZ2FibGUnIH0pCgogICAgICAgICAgICBpZih0aGlzLiRkbGcubGVuZ3RoKQogICAgICAgICAgICAgICAgcmV0VmFsID0gdHJ1ZQoKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJldFZhbAogICAgfQoKICAgIHRoaXMuc3RhcnQgPSBmdW5jdGlvbigkZCkgewogICAgICAgIGlmICgkKCcjemgtZ2xvYmFsLXNwaW5uZXI6dmlzaWJsZScpLmxlbmd0aCkgcmV0dXJuCiAgICAgICAgaWYgKCEkZCkgJGQgPSB0aGlzLiRkbGcKICAgICAgICBpZiAoISRkKSByZXR1cm4KICAgICAgICBpZiAoISQoJy5pemhpaHUtY29sbGVjdGlvbi1saW5rcycsICRkKS5jaGlsZHJlbigpLmxlbmd0aCkgewogICAgICAgICAgICBoYW5kbGVyKDEsIE51bWJlcih1cmwuZGF0YS5wYXJhbS5xdWVyeVsncGFnZSddKSwgJGQpCiAgICAgICAgfQogICAgfQoKfQoKLyoqCiAqIOWbnuetlOmhtQogKi8KCiAgaWYocGFnZUlzLkFuc3dlcil7Cgp2YXIgJGxibFF1ZXN0aW9uTWV0YT0kKCcjemgtcXVlc3Rpb24tbWV0YS13cmFwJykvL3F1ZXN0aW9uX21ldGEKOwoKICAgIHZhciAkcXVlc3Rpb25XcmFwPSQoJyN6aC1xdWVzdGlvbi1tZXRhLXdyYXAnKTsKICAgICRxdWVzdGlvbldyYXAuY2hpbGRyZW4oJy5wYW5lbC1jb250YWluZXInKS5iaW5kKCdET01Ob2RlSW5zZXJ0ZWQnLGZ1bmN0aW9uKGV2ZW50KXsKICAgICAgICB3aW5kb3cuaVpoaWh1LkNvbW1lbnQucHJvY2Vzc0NvbW1lbnQoJChldmVudC50YXJnZXQpKTsKICAgIH0pOwogICAgaWYod2luZG93LmlaaGlodS5Db21tZW50LlJpZ2h0Q29tbWVudCl7CiAgICAgICAgLy8kcXVlc3Rpb25XcmFwLmNoaWxkcmVuKCcubWV0YS1pdGVtW25hbWU9YWRkY29tbWVudF0nKS5wcmVwZW5kVG8oJHF1ZXN0aW9uV3JhcCk7CiAgICAgICAgd2luZG93LmlaaGlodS5Db21tZW50LnByb2Nlc3NDb21tZW50QnV0dG9uKCRxdWVzdGlvbldyYXApOwogICAgICAgIGlmKCEkKCcjaXpoX1F1ZXN0aW9uU2hhZG93JykubGVuZ3RoKXsKICAgICAgICAgICAgJCgnPGRpdj4nLHsnY2xhc3MnOidpemhfYm94U2hhZG93JyxpZDonaXpoX1F1ZXN0aW9uU2hhZG93J30pLmNzcyh7CiAgICAgICAgICAgICAgICAnei1pbmRleCc6ICctMScKICAgICAgICAgICAgICAsICdwb3NpdGlvbic6ICdyZWxhdGl2ZScKICAgICAgICAgICAgICAsICd0b3AnOiAtMjUKICAgICAgICAgICAgICAsICdtYXJnaW4tbGVmdCc6IC0zMgogICAgICAgICAgICB9KS5wcmVwZW5kVG8oJ2JvZHk+Lnp1LW1haW46Zmlyc3QnKS5oaWRlKCk7CiAgICAgICAgfSAgIAogICAgfQoKICAgIC8vcHJvY2VzcyBlYWNoIGFuc3dlcgogICAgdmFyICRsaXN0QW5zd2Vycz0kKCcuem0taXRlbS1hbnN3ZXIsLmZlZWQtaXRlbScsJyN6aC1xdWVzdGlvbi1hbnN3ZXItd3JhcCcpOwogICAgaWYoJGxpc3RBbnN3ZXJzJiYkbGlzdEFuc3dlcnMubGVuZ3RoKXsKICAgICAgICAkbGlzdEFuc3dlcnMuZWFjaChmdW5jdGlvbihpLGUpewogICAgICAgICAgICB3aW5kb3cuaVpoaWh1LkFuc3dlci5wcm9jZXNzQW5zd2VyKCQoZSksbnVsbAogICAgICAgICAgICAgICwgaXpoQXV0aG9yUmVhcgogICAgICAgICAgICAgICwgZmFsc2UpOwogICAgICAgIH0pOwogICAgfQoKICAgICQoJyN6aC1xdWVzdGlvbi1hbnN3ZXItd3JhcCcpLmJpbmQoJ0RPTU5vZGVJbnNlcnRlZCcsZnVuY3Rpb24oZXZlbnQpewogICAgICAgIHZhciAkbmE9JChldmVudC50YXJnZXQpLmZpbHRlcignLnptLWl0ZW0tYW5zd2VyJyk7CiAgICAgICAgaWYoJG5hLmxlbmd0aCl7CiAgICAgICAgICAgIHdpbmRvdy5pWmhpaHUuQW5zd2VyLnByb2Nlc3NBbnN3ZXIoJG5hLG51bGwKICAgICAgICAgICAgICAgICwgaXpoQXV0aG9yUmVhcgogICAgICAgICAgICAgICAgLCBmYWxzZSk7CiAgICAgICAgfQogICAgfSk7CgogICAgdmFyICRjbT0kKCcuem0tY29tbWVudC1ib3gnLCRxdWVzdGlvbldyYXApOwogICAgaWYoJGNtLmxlbmd0aCAmJiAkY20uaXMoJzp2aXNpYmxlJykpewogICAgCXZhciBmb2N1c05hbWUgPSBpWmhpaHUuQ29tbWVudC5zY3JvbGxGb2N1c0NvbW1lbnRPblBhZ2VMb2FkKCRjbSk7CgogICAgCWlaaGlodS5Db21tZW50Lm1ldGFTY3JvbGxUb1ZpZXdCb3R0b20oJGNtLmNsb3Nlc3QoJy56bS1pdGVtLW1ldGEnKSxmdW5jdGlvbigpewogICAgICAgICAgICBpWmhpaHUuQ29tbWVudC5wcm9jZXNzQ29tbWVudCgkY20sIGZvY3VzTmFtZSk7CiAgICAgICAgfSk7CiAgICB9CiAgfQoKLyoqCiAqIOaUtuiXj+mhtQogKi8KICBpZihwYWdlSXMuQ29sbGVjdGlvbil7CiAgICAvL+a3u+WKoOaMiemSrgogICAgJCgnI3poLWxpc3QtbWV0YS13cmFwJykKICAgICAgLmFwcGVuZCgkKCc8c3Bhbj4nLCB7ICdjbGFzcyc6ICd6Zy1idWxsJyB9KS50ZXh0KCfigKInKSkKICAgICAgLmFwcGVuZCgkKCc8YT4nLCB7IGhyZWY6ICdqYXZhc2NyaXB0OjsnLCBpZDogJ2dldEFsbExpbmtzJyB9KS50ZXh0KCflnLDlnYDmuIXljZUnKSk7CgogICAgdmFyIGJ0biA9ICQoJyNnZXRBbGxMaW5rcycpOwogICAgdmFyIHJlc3VsdCA9IFtdOwogICAgICAgIAogICAgLy/ms6jlhozngrnlh7vkuovku7YKICAgIGJ0bi5jbGljayhmdW5jdGlvbigpewogICAgICB2YXIgYWxsTGlua3NDb2xsZWN0aW9uPW5ldyBhbGxMaW5rcygnQ29sbGVjdGlvbnMnLCcjemgtbGlzdC1hbnN3ZXItd3JhcCcsJ+aUtuiXj+WkueWGheWuuScpOwoJICBpZighYWxsTGlua3NDb2xsZWN0aW9uLmluaXREaWFsb2coKSlyZXR1cm47CiAgICAgICQoJy5tb2RhbC1kaWFsb2ctYmcnKS5zaG93KCk7CiAgICAgIHZhciB5ID0gKCR3aW4uaGVpZ2h0KCkgLSBhbGxMaW5rc0NvbGxlY3Rpb24uJGRsZy53aWR0aCgpKSAvIDIKICAgICAgICAsIHggPSAoJHdpbi53aWR0aCgpIC0gYWxsTGlua3NDb2xsZWN0aW9uLiRkbGcud2lkdGgoKSkgLyAyCiAgICAgIDsKICAgICAgYWxsTGlua3NDb2xsZWN0aW9uLiRkbGcuY3NzKHsndG9wJzogeSwgJ2xlZnQnOiB4fSkuZmFkZUluKCdzbG93Jyk7CiAgICAgIGFsbExpbmtzQ29sbGVjdGlvbi5zdGFydCgpOwogICAgfSk7CiAgfQogIGlmKHBhZ2VJcy5BbnN3ZXJzKXsKICAgIC8v5re75Yqg5oyJ6ZKuCiAgICAkKCcuem0tcHJvZmlsZS1zZWN0aW9uLW5hbWUnKQogICAgICAuYXBwZW5kKCQoJzxzcGFuPicsIHsgJ2NsYXNzJzogJ3pnLWJ1bGwnIH0pLnRleHQoJ+KAoicpKQogICAgICAuYXBwZW5kKCQoJzxhPicsIHsgaHJlZjogJ2phdmFzY3JpcHQ6OycsIGlkOiAnZ2V0QWxsTGlua3MnIH0pLnRleHQoJ+WcsOWdgOa4heWNlScpKTsKCiAgICB2YXIgYnRuID0gJCgnI2dldEFsbExpbmtzJyk7CiAgICB2YXIgcmVzdWx0ID0gW107CiAgICAgICAgCiAgICAvL+azqOWGjOeCueWHu+S6i+S7tgogICAgYnRuLmNsaWNrKGZ1bmN0aW9uKCl7CiAgICAgIHZhciBhbGxMaW5rc0Fuc3dlcnM9bmV3IGFsbExpbmtzKCdBbnN3ZXJzJywnI3poLXByb2ZpbGUtYW5zd2VyLWxpc3QnLCfnlKjmiLflm57nrZQnKTsKCSAgaWYoIWFsbExpbmtzQW5zd2Vycy5pbml0RGlhbG9nKCkpcmV0dXJuOwogICAgICAkKCcubW9kYWwtZGlhbG9nLWJnJykuc2hvdygpOwogICAgICB2YXIgeSA9ICgkd2luLmhlaWdodCgpIC0gYWxsTGlua3NBbnN3ZXJzLiRkbGcud2lkdGgoKSkgLyAyCiAgICAgICAgLCB4ID0gKCR3aW4ud2lkdGgoKSAtIGFsbExpbmtzQW5zd2Vycy4kZGxnLndpZHRoKCkpIC8gMgogICAgICA7CiAgICAgIGFsbExpbmtzQW5zd2Vycy4kZGxnLmNzcyh7J3RvcCc6IHksICdsZWZ0JzogeH0pLmZhZGVJbignc2xvdycpOwogICAgICBhbGxMaW5rc0Fuc3dlcnMuc3RhcnQoKTsKICAgIH0pOwogIH0KCiAgaWYocGFnZUlzLk15Q29sbGVjdGlvbiYmd2luZG93LmlaaGlodS5RdWlja0Zhdm8pewogICAgdmFyICRmYXZJdGVtcz0kKCcjemgtZmF2bGlzdHMtd3JhcCcpLmNoaWxkcmVuKCcuem0taXRlbScpOwogICAgJGZhdkl0ZW1zLmVhY2goZnVuY3Rpb24oaSxlKXsKICAgIH0pOwogIH0KCi8qCiAqIOmmlumhtQogKi8KICAgIHZhciAkdG9wc3Rvcnk9JCgnI2lzLXRvcHN0b3J5MicpCiAgICAgICwgaXNUb3BTdG9yeT0kdG9wc3RvcnkmJiR0b3BzdG9yeS5sZW5ndGgKICAgICAgLCBwcm9wRmVlZFR5cGU9J2RhdGEtdHlwZScvLzonZGF0YS1mZWVkdHlwZScKICAgICAgLCAkbGJsSG9tZVRpdGxlPSQoJyN6aC1ob21lLWxpc3QtdGl0bGUnKS8vYWN0aXZpdHlfY2FwdGlvbgogICAgICAsICRidG5OZXdBY3Rpdml0eT0kKCcjemgtbWFpbi1mZWVkLWZyZXNoLWJ1dHRvbicpLy9uZXdfYWN0aXZpdHkKICAgICAgLCAkZmVlZExpc3Q9JCgnLnpoLWdlbmVyYWwtbGlzdCcpLy9mZWVkX2xpc3QKICAgICAgLCAkdG9wTGlua0hvbWU9JCgnI3poLXRvcC1saW5rLWhvbWUnKQogICAgICAsICRmaWx0ZXI9Ly9pc1RvcFN0b3J5PwogICAgICAgICAgICAkKCc8c3Bhbj4nLCB7ICdjbGFzcyc6J2l6aC1mZWVkcy1maWx0ZXInIH0pCiAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzxhPicsIHsgJ2NsYXNzJzogJ2l6aC1idXR0b24gaXpoLWZlZWRzLWZpbHRlci1vcHRpb24nLCAnc2hvd0ZlZWRzJzogJ3EnIH0pCiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8aT4nLCB7ICdjbGFzcyc6ICd6Zy1pY29uJyB9KSkKICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCfpl67popgnKQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8YT4nLCB7ICdjbGFzcyc6ICdpemgtYnV0dG9uIGl6aC1mZWVkcy1maWx0ZXItb3B0aW9uJywgJ3Nob3dGZWVkcyc6ICdhJyB9KQogICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPGk+JywgeyAnY2xhc3MnOiAnemctaWNvbicgfSkpCiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgn5Zue562UJykKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPGE+JywgeyAnY2xhc3MnOiAnaXpoLWJ1dHRvbiBpemgtZmVlZHMtZmlsdGVyLW9wdGlvbicsICdzaG93RmVlZHMnOiAncCxyJywgJ2RhdGEtdGlwJzogJ3MkdCTkuJPmoI/jgIHlnIbmoYwnIH0pCiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8aT4nLCB7ICdjbGFzcyc6ICd6Zy1pY29uJyB9KSkKICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCflhbbku5YnKQogICAgICAgICAgICAgICAgKQogICAgICAsICRmaWx0ZXJJbmZvPSQoJzxhPicseydjbGFzcyc6J2l6aC1mZWVkcy1maWx0ZXItaW5mbyBub3RoaW5nJyxocmVmOidqYXZhc2NyaXB0OnZvaWQoMCk7J30pLm9uKCdjbGljaycsZnVuY3Rpb24oKXskZmlsdGVyLnRyaWdnZXIoJGZpbHRlci5pcygnOmhpZGRlbicpfHwkZmlsdGVyLmF0dHIoJ2RvaW5nJyk9PSdoaWRlJz8nc2hvdyc6J2hpZGUnKTt9KQogICAgICAsIFNob3dGZWVkcz1mdW5jdGlvbih0eXBlLGVuYWJsZSl7CiAgICAgICAgICAgIHZhciBpZD0iaXpoQ1NTX0ZpbHRlckZlZWRfIit0eXBlCiAgICAgICAgICAgICAgLCBuZD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkKICAgICAgICAgICAgOwogICAgICAgICAgICBpZihlbmFibGUpewogICAgICAgICAgICAgICAgaWYobmQpbmQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChuZCk7CiAgICAgICAgICAgIH1lbHNlIGlmKGhlYWRzLmxlbmd0aCl7CiAgICAgICAgICAgICAgICBpZighbmQpewogICAgICAgICAgICAgICAgICAgIG5kPV9kb2MuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsKICAgICAgICAgICAgICAgICAgICBuZC50eXBlPSd0ZXh0L2Nzcyc7CiAgICAgICAgICAgICAgICAgICAgbmQuaWQ9aWQ7CiAgICAgICAgICAgICAgICAgICAgbmQuYXBwZW5kQ2hpbGQoX2RvYy5jcmVhdGVUZXh0Tm9kZSgnLmZlZWQtaXRlbVsnK3Byb3BGZWVkVHlwZSsnXj0iJyt0eXBlKyciXXtkaXNwbGF5Om5vbmV9JykpOwogICAgICAgICAgICAgICAgICAgIGhlYWRzWzBdLmFwcGVuZENoaWxkKG5kKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8ve1JPVU5EVEFCTEVfQUREX1JFTEFURUQ6ICJyb3VuZHRhYmxlIixBUlRJQ0xFX1ZPVEVfVVA6ICJwb3N0X3ZvdGUiLEFSVElDTEVfQ1JFQVRFOiAicG9zdF9jcmVhdGUiLFJFQ09NTUVOREVEOiAiZmVlZF9yZWNvbW1lbmRlZCIsUVVFU1RJT05fRk9MTE9XOiAiZmVlZF9xdWVzdGlvbl9mb2xsb3ciLFFVRVNUSU9OX0NSRUFURTogImZlZWRfcXVlc3Rpb24iLEFOU1dFUl9WT1RFX1VQOiAiZmVlZF9hbnN3ZXJfdm90ZSIsQU5TV0VSX0NSRUFURTogImZlZWRfYW5zd2VyX2Fuc3dlciJ9OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAsIHJlZnJlc2hGaWx0ZXJJbmZvPWZ1bmN0aW9uKCl7CiAgICAgICAgICAgIHZhciBjb3VudD0kZmVlZExpc3QuY2hpbGRyZW4oJy5mZWVkLWl0ZW06aGlkZGVuJykubGVuZ3RoCiAgICAgICAgICAgICAgLCBpbmZvPScgPui/h+a7pOmAiemhuTwnCiAgICAgICAgICAgIDsKICAgICAgICAgICAgaWYoY291bnQpewogICAgICAgICAgICAgICAgaW5mbz0n77yIJytjb3VudCsn5p2h5Yqo5oCB6KKr6ZqQ6JeP77yJJzsKICAgICAgICAgICAgICAgICRmaWx0ZXJJbmZvLnJlbW92ZUNsYXNzKCdub3RoaW5nJykuY3NzKHtkaXNwbGF5OicnfSk7CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgJGZpbHRlckluZm8uYWRkQ2xhc3MoJ25vdGhpbmcnKTsKICAgICAgICAgICAgfSAgIAogICAgICAgICAgICAkZmlsdGVySW5mby50ZXh0KGluZm8pOwogICAgICAgIH0KICAgICAgLCBmZWVkc0NvbHVtbnM9ZnVuY3Rpb24oKXsgLy8gSW1wbGVtZW50ZWQgYnkgbW9ybGV5LCBtb2RpZmllZCBieSB1bm9negogICAgICAgICAgICAvL+WKqOaAgeeahOexu+WeiwogICAgICAgICAgICB2YXIgZmVlZFR5cGVzID0gLy9pc1RvcFN0b3J5PwogICAgICAgICAgICAgICAgW3sKICAgICAgICAgICAgICAgICBpbmRleDogMCwKICAgICAgICAgICAgICAgICBuYW1lOiAn5YWo6YOoJywKICAgICAgICAgICAgICAgICBjb2RlTmFtZTogJycKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICBpbmRleDogMSwKICAgICAgICAgICAgICAgICBuYW1lOiAn6Zeu6aKYJywKICAgICAgICAgICAgICAgICBjb2RlTmFtZTogJ3EnCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgaW5kZXg6IDIsCiAgICAgICAgICAgICAgICAgbmFtZTogJ+WbnuetlCcsCiAgICAgICAgICAgICAgICAgY29kZU5hbWU6ICdhJwogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgIGluZGV4OiAzLAogICAgICAgICAgICAgICAgIG5hbWU6ICfkuJPmoI8nLAogICAgICAgICAgICAgICAgIGNvZGVOYW1lOiAncCcKICAgICAgICAgICAgICAgIH1dOwogICAgICAgICAgICAKICAgICAgICAgICAgLy/oh6rlrprkuYkgQ1NTIOWIsCBoZWFkCiAgICAgICAgICAgIHZhciBzdHlsZXMgPSBbXTsKICAgICAgICAgICAgCiAgICAgICAgICAgIHN0eWxlcy5wdXNoKCcuemEtZmlsdGVye2Rpc3BsYXk6IGlubGluZS1ibG9jazttYXJnaW4tcmlnaHQ6MTBweDtjdXJzb3I6cG9pbnRlcjtjb2xvcjojOTk5O30nKTsKICAgICAgICAgICAgc3R5bGVzLnB1c2goJy56YS1maWx0ZXIuYWN0aXZle2NvbG9yOiMyNTk7fScpOwogICAgICAgICAgICBzdHlsZXMucHVzaCgnLnphLWZpbHRlcj4uemctbnVtLmhpZGV7ZGlzcGxheTpub25lO30nKTsKICAgICAgICAgICAgCiAgICAgICAgICAgICQoJzxzdHlsZS8+JykudGV4dChzdHlsZXMuam9pbignJykpLmFwcGVuZFRvKCdoZWFkJyk7CiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgJHpoSG9tZUxpc3RUaXRsZSA9ICRsYmxIb21lVGl0bGU7CiAgICAgICAgICAgIAogICAgICAgICAgICAvL+agueaNruexu+Wei+a3u+WKoOi/h+a7pOaMiemSriDliLAgI3poLWhvbWUtbGlzdC10aXRsZQogICAgICAgICAgICB2YXIgZmlsdGVyQnRucyA9IFtdCiAgICAgICAgICAgICAgLCBpID0gZmVlZFR5cGVzLmxlbmd0aDsKICAgICAgICAgICAgCiAgICAgICAgICAgIHdoaWxlIChpLS0pIHsKICAgICAgICAgICAgIGZpbHRlckJ0bnMucHVzaCgKICAgICAgICAgICAgICAgICAkKCc8c3Bhbj4nKS5hZGRDbGFzcygnemEtZmlsdGVyJykKICAgICAgICAgICAgICAgICAuYXR0cigndHlwZUluZGV4JywgZmVlZFR5cGVzW2ldLmluZGV4KQogICAgICAgICAgICAgICAgIC50ZXh0KGZlZWRUeXBlc1tpXS5uYW1lKQogICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHNwYW4+JywgeyAnY2xhc3MnOiAnemctbnVtJyB9KS5hZGRDbGFzcygnaGlkZScpKQogICAgICAgICAgICAgICAgIC5vbignY2xpY2snLCB0b2dnbGVGZWVkVHlwZSkKICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGZpbHRlckJ0bnMucmV2ZXJzZSgpOwogICAgICAgICAgICBmaWx0ZXJCdG5zWzBdLmFkZENsYXNzKCdhY3RpdmUnKTsKCiAgICAgICAgICAgICR6aEhvbWVMaXN0VGl0bGUuY29udGVudHMoKS5maWx0ZXIoZnVuY3Rpb24oaSxlKXsKICAgICAgICAgICAgICAgIHJldHVybiAoZSE9bnVsbCYmKGUubm9kZVZhbHVlfHwnJykuaW5kZXhPZign5pyA5paw5Yqo5oCBJyk+PTApCiAgICAgICAgICAgIH0pLnJlbW92ZSgpCiAgICAgICAgICAgICR6aEhvbWVMaXN0VGl0bGUuZmluZCgnaScpLmVxKDApLmFmdGVyKGZpbHRlckJ0bnMpLnJlbW92ZSgpOwogICAgICAgICAgICAKICAgICAgICAgICAgdmFyICR0YXJnZXRaZXJvID0gZmlsdGVyQnRuc1swXS5maW5kKCcuemctbnVtJykKICAgICAgICAgICAgICAsIGN1cmZlZWRUeXBlQ29kZU5hbWUgPSAnJwogICAgICAgICAgICAKICAgICAgICAgICAgZnVuY3Rpb24gdHlwZU1hdGNoKCRlbGVtKSB7CiAgICAgICAgICAgICBpZiAoY3VyZmVlZFR5cGVDb2RlTmFtZSA9PSAnJykgewogICAgICAgICAgICAgICAgICRlbGVtLnNob3coKTsKICAgICAgICAgICAgIH0gZWxzZSBpZiAoMCA8PSAkZWxlbS5hdHRyKHByb3BGZWVkVHlwZSkuaW5kZXhPZihjdXJmZWVkVHlwZUNvZGVOYW1lKSkgewogICAgICAgICAgICAgICAgICRlbGVtLnNob3coKTsKICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgJGVsZW0uaGlkZSgpOwogICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAvL+aMiemSruS6i+S7tgogICAgICAgICAgICBmdW5jdGlvbiB0b2dnbGVGZWVkVHlwZSgpIHsKICAgICAgICAgICAgIHZhciAkY2xpY2tlZCA9ICQodGhpcyk7CiAgICAgICAgICAgICAkY2xpY2tlZE51bSA9ICRjbGlja2VkLmZpbmQoJy56Zy1udW0nKTsKICAgICAgICAgICAgIC8vIOS6pOS6kuaViOaenAogICAgICAgICAgICAgZmlsdGVyQnRucy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICAgICAgICAgICBpdGVtLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsKICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAKICAgICAgICAgICAgICRjbGlja2VkLmFkZENsYXNzKCdhY3RpdmUnKTsKICAgICAgICAgICAgCiAgICAgICAgICAgICBpZiAoJGNsaWNrZWQuYXR0cigndHlwZUluZGV4JykgPT0gMCkgewogICAgICAgICAgICAgICAgICQoJy56Zy1udW0nLCAnLnphLWZpbHRlcicpLnRleHQoJycpLmFkZENsYXNzKCdoaWRlJyk7CiAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgIHZhciB0b3RhbFVucmVhZCA9IChwYXJzZUludCgkdGFyZ2V0WmVyby50ZXh0KCkpIHx8IDApIC0gKHBhcnNlSW50KCRjbGlja2VkTnVtLnRleHQoKSkgfHwgMCk7CiAgICAgICAgICAgICAgICAgaWYgKHRvdGFsVW5yZWFkICE9IDApIHsKICAgICAgICAgICAgICAgICAgICAgJHRhcmdldFplcm8udGV4dCh0b3RhbFVucmVhZCk7CiAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgJHRhcmdldFplcm8udGV4dCgnJykuYWRkQ2xhc3MoJ2hpZGUnKTsKICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICRjbGlja2VkTnVtLnRleHQoJycpLmFkZENsYXNzKCdoaWRlJyk7CiAgICAgICAgICAgICB9CiAgICAgICAgICAgICBjdXJmZWVkVHlwZUNvZGVOYW1lID0gZmVlZFR5cGVzWyRjbGlja2VkLmF0dHIoJ3R5cGVJbmRleCcpXS5jb2RlTmFtZTsKICAgICAgICAgICAgIC8vIOS/oeaBr+a1gei/h+a7pAogICAgICAgICAgICAgJCgnLmZlZWQtaXRlbScpLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgdHlwZU1hdGNoKCQodGhpcykpOwogICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFR5cGVJbmRleEJ5Q29kZU5hbWUoY29kZU5hbWUpIHsKICAgICAgICAgICAgIHZhciBpID0gZmVlZFR5cGVzLmxlbmd0aDsKICAgICAgICAgICAgIHdoaWxlIChpLS0pIHsKICAgICAgICAgICAgICAgICBpZiAoY29kZU5hbWUgPT0gZmVlZFR5cGVzW2ldLmNvZGVOYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpOwogICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBNdXRhdGlvbk9ic2VydmVyID0gd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIgfHwgd2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7CiAgICAgICAgICAgIAogICAgICAgICAgICAvL+ebkeWQrOaOqOmAgQogICAgICAgICAgICB2YXIgaGFzTmV3RmVlZCA9IGZhbHNlOwogICAgICAgICAgICAvL2NyZWF0ZSBhbiBvYnNlcnZlciBpbnN0YW5jZQogICAgICAgICAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihtdXRhdGlvbnMpIHsKICAgICAgICAgICAgIGlmICggISEgcGFyc2VJbnQoJGJ0bk5ld0FjdGl2aXR5LnRleHQoKSkpIHsKICAgICAgICAgICAgICAgICBtdXRhdGlvbnMuZm9yRWFjaChmdW5jdGlvbihtdXRhdGlvbikgewogICAgICAgICAgICAgICAgICAgICBpZiAobXV0YXRpb24udHlwZSA9PT0gJ2NoaWxkTGlzdCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIYXMgTmV3IEZlZWQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOacieaWsOaOqOmAgeWImeinpuWPkeS5iwogICAgICAgICAgICAgICAgICAgICAgICAgaGFzTmV3RmVlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAkYnRuTmV3QWN0aXZpdHkudGV4dCgnJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAkLndoZW4oJGJ0bk5ld0FjdGl2aXR5WzBdLmNsaWNrKCkpLmRvbmUoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzTmV3RmVlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAKICAgICAgICAgICAgLy9wYXNzIGluIHRoZSB0YXJnZXQgbm9kZSwgYXMgd2VsbCBhcyB0aGUgb2JzZXJ2ZXIgb3B0aW9ucwogICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKAogICAgICAgICAgICAgJGJ0bk5ld0FjdGl2aXR5WzBdLCB7CiAgICAgICAgICAgICAgICAgY2hpbGRMaXN0OiB0cnVlCiAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8v55uR5ZCs5o+S5YWlCiAgICAgICAgICAgICRmZWVkTGlzdC5vbigiRE9NTm9kZUluc2VydGVkIiwgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgdmFyICRzZWxmID0gJChlLnRhcmdldCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAgaWYgKCRzZWxmLmhhc0NsYXNzKCdmZWVkLWl0ZW0nKSkgewogICAgICAgICAgICAgICAgIGlmIChoYXNOZXdGZWVkKSB7CiAgICAgICAgICAgICAgICAgICAgICRzZWxmLmhpZGUoKTsKICAgICAgICAgICAgICAgICAgICAgdmFyICR0YXJnZXQgPSBmaWx0ZXJCdG5zW2dldFR5cGVJbmRleEJ5Q29kZU5hbWUoJHNlbGYuYXR0cihwcm9wRmVlZFR5cGUpKV0uZmluZCgnLnpnLW51bScpOwogICAgICAgICAgICAgICAgICAgICAkdGFyZ2V0LnRleHQoKHBhcnNlSW50KCR0YXJnZXQudGV4dCgpKSB8fCAwKSArIDEpLnJlbW92ZUNsYXNzKCdoaWRlJyk7CiAgICAgICAgICAgICAgICAgICAgICR0YXJnZXRaZXJvLnRleHQoKHBhcnNlSW50KCR0YXJnZXRaZXJvLnRleHQoKSkgfHwgMCkgKyAxKS5yZW1vdmVDbGFzcygnaGlkZScpOwogICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgIHR5cGVNYXRjaCgkc2VsZik7CiAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAsIGhvbWVGZWVkcz1mdW5jdGlvbihpemhIb21lRmVlZHNDb2x1bW5zKXsKICAgICAgICAgICAgaWYgKGl6aEhvbWVGZWVkc0NvbHVtbnMpewogICAgICAgICAgICAgICAgZmVlZHNDb2x1bW5zKCk7CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgJGZpbHRlci5jaGlsZHJlbignLml6aC1mZWVkcy1maWx0ZXItb3B0aW9uJykuYWRkQ2xhc3MoJ29uJykuY2xpY2soZnVuY3Rpb24oZXZlbnQpewogICAgICAgICAgICAgICAgICAgIHZhciBpPTAKICAgICAgICAgICAgICAgICAgICAgICwgJGU9JCh0aGlzKQogICAgICAgICAgICAgICAgICAgICAgLCBmcz0kZS5hdHRyKCdzaG93RmVlZHMnKQogICAgICAgICAgICAgICAgICAgICAgLCBmYT1mcy5zcGxpdCgnLCcpCiAgICAgICAgICAgICAgICAgICAgOwogICAgICAgICAgICAgICAgICAgICQoJy5pemgtZmVlZHMtZmlsdGVyLW9wdGlvbltzaG93RmVlZHM9IicrZnMrJyJdJykudG9nZ2xlQ2xhc3MoJ29uJyk7CiAgICAgICAgICAgICAgICAgICAgZm9yKDtpPGZhLmxlbmd0aDtpKyspewogICAgICAgICAgICAgICAgICAgICAgICBTaG93RmVlZHMoZmFbaV0sJGUuaXMoJy5vbicpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmVmcmVzaEZpbHRlckluZm8oKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaWYoJHRvcExpbmtIb21lLmxlbmd0aCl7CiAgICAgICAgICAgICAgICAgICAgdmFyICRmaWx0ZXIyPSQoJzxkaXY+JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jc3Moe3Bvc2l0aW9uOidhYnNvbHV0ZScsYm9yZGVyOicxcHggc29saWQgIzc3NycsYmFja2dyb3VuZENvbG9yOicjZmZmJ30pLmhpZGUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkZmlsdGVyLmNsb25lKHRydWUsdHJ1ZSkuY3NzKHtkaXNwbGF5OidibG9jayd9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbignc2hvdycsZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGU9JCh0aGlzKS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGUuaXMoJzpoaWRkZW4nKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGUuY3NzKHtkaXNwbGF5OicnLG9wYWNpdHk6MH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGUuYW5pbWF0ZSh7b3BhY2l0eToxfSwnc2xvdycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbignaGlkZScsZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGU9JCh0aGlzKS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGUuZmFkZU91dCgnc2xvdycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICA7CiAgICAgICAgICAgICAgICAgICAgJHRvcExpbmtIb21lLmFmdGVyKCRmaWx0ZXIyKS5wYXJlbnQoKQogICAgICAgICAgICAgICAgICAgICAgICAub24oJ21vdXNlZW50ZXInLGZ1bmN0aW9uKGV2ZW50KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkZT0kKHRoaXMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgJGY9JGUuY2hpbGRyZW4oKS5sYXN0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRmLnRyaWdnZXIoJ3Nob3cnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRmaWx0ZXJJbmZvLmZpbHRlcignLm5vdGhpbmcnKS5oaWRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIC5vbignbW91c2VsZWF2ZScsZnVuY3Rpb24oZXZlbnQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRlPSQodGhpcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCAkZj0kZS5jaGlsZHJlbigpLmxhc3QoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGYudHJpZ2dlcignaGlkZScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGZpbHRlckluZm8uZmlsdGVyKCcubm90aGluZycpLmhpZGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZigkbGJsSG9tZVRpdGxlLmxlbmd0aCl7CiAgICAgICAgICAgICAgICAgICAgJGZpbHRlckluZm8uY3NzKHsKICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTonbm9uZScKICAgICAgICAgICAgICAgICAgICAgICwgdGV4dERlY29yYXRpb246J25vbmUnCiAgICAgICAgICAgICAgICAgICAgICAsIGN1cnNvcjoncG9pbnRlcicKICAgICAgICAgICAgICAgICAgICB9KS5pbnNlcnRCZWZvcmUoaXNUb3BTdG9yeT8kdG9wc3Rvcnk6JCgnI2ZlZWQtdmVyJykpOwogICAgICAgICAgICAgICAgICAgICRsYmxIb21lVGl0bGUuY3NzKHtvdmVyZmxvdzonaGlkZGVuJ30pCiAgICAgICAgICAgICAgICAgICAgICAgIC5wcmVwZW5kKCRmaWx0ZXIpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vLmNoaWxkcmVuKCdpOmZpcnN0JykKICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdtb3VzZWVudGVyJyxmdW5jdGlvbihldmVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGU9JCh0aGlzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsICRmPSRlLmNoaWxkcmVuKCcuaXpoLWZlZWRzLWZpbHRlci1pbmZvLm5vdGhpbmcnKS5zdG9wKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRmLmlzKCc6aGlkZGVuJykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGYuY3NzKHtkaXNwbGF5OicnLG9wYWNpdHk6MH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZi5hbmltYXRlKHtvcGFjaXR5OjF9LCdmYXN0Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIC5vbignbW91c2VsZWF2ZScsZnVuY3Rpb24oZXZlbnQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRlPSQodGhpcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCAkZj0kZS5jaGlsZHJlbignLml6aC1mZWVkcy1maWx0ZXItaW5mby5ub3RoaW5nJykuc3RvcCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZi5mYWRlT3V0KCdmYXN0Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgOwogICAgICAgICAgICAgICAgICAgICRmaWx0ZXIuY3NzKHttYXJnaW5MZWZ0Oi0kZmlsdGVyLndpZHRoKCksZGlzcGxheTonbm9uZSd9KQogICAgICAgICAgICAgICAgICAgICAgICAub24oJ3Nob3cnLGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGU9JCh0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRlLmF0dHIoJ2RvaW5nJyk9PT0nc2hvdycpcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGUuYXR0cignZG9pbmcnLCdzaG93Jykuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGUuaXMoJzpoaWRkZW4nKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZS5jc3Moe2Rpc3BsYXk6Jyd9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGUuYW5pbWF0ZSh7bWFyZ2luTGVmdDowfSwnc2xvdycsZnVuY3Rpb24oKXskKHRoaXMpLmNzcygnZGlzcGxheScsJycpLnJlbW92ZUF0dHIoJ2RvaW5nJyk7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIC5vbignaGlkZScsZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkZT0kKHRoaXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGUuYXR0cignZG9pbmcnKT09PSdoaWRlJylyZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZS5hdHRyKCdkb2luZycsJ2hpZGUnKS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZS5hbmltYXRlKHttYXJnaW5MZWZ0Oi0kZmlsdGVyLndpZHRoKCl9LCdzbG93JyxmdW5jdGlvbigpeyQodGhpcykuY3NzKCdkaXNwbGF5Jywnbm9uZScpLnJlbW92ZUF0dHIoJ2RvaW5nJyk7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIC5vbignbW91c2VlbnRlcicsZnVuY3Rpb24oZXZlbnQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRlPSQodGhpcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlLnRyaWdnZXIoJ3Nob3cnKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdtb3VzZWxlYXZlJyxmdW5jdGlvbihldmVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGU9JCh0aGlzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGUudHJpZ2dlcignaGlkZScpOwogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIDsKICAgICAgICAgICAgICAgICAgICByZWZyZXNoRmlsdGVySW5mbygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgOwogICAgaWYocGFnZUlzLkhvbWV8fHBhZ2VJcy5EZWJ1dHMpewogICAgICAgICRmZWVkTGlzdC5maW5kKCcuZmVlZC1pdGVtJykuZWFjaChmdW5jdGlvbihpLGUpewogICAgICAgICAgICB3aW5kb3cuaVpoaWh1LkFuc3dlci5wcm9jZXNzQW5zd2VyKCQoZSksbnVsbAogICAgICAgICAgICAgICwgaXpoQXV0aG9yUmVhcgogICAgICAgICAgICAgICwgaXpoQXV0aG9yTGlzdAogICAgICAgICAgICApOwogICAgICAgIH0pOwogICAgICAgICRmZWVkTGlzdC5iaW5kKCdET01Ob2RlSW5zZXJ0ZWQnLGZ1bmN0aW9uKGV2ZW50KXsKICAgICAgICAgICAgdmFyICRpdGVtPSQoZXZlbnQudGFyZ2V0KTsKICAgICAgICAgICAgaWYoJGl0ZW0uaXMoJy5mZWVkLWl0ZW0nKSl7CiAgICAgICAgICAgICAgICB3aW5kb3cuaVpoaWh1LkFuc3dlci5wcm9jZXNzQW5zd2VyKCRpdGVtLG51bGwKICAgICAgICAgICAgICAgICAgLCAkYm9keS5hdHRyKCdpemhBdXRob3JSZWFyJyk9PScxJwogICAgICAgICAgICAgICAgICAsICRib2R5LmF0dHIoJ2l6aEF1dGhvckxpc3QnKT09JzEnCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgcmVmcmVzaEZpbHRlckluZm8oKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfQoKICAgIGlmIChwYWdlSXMuSG9tZSl7CiAgICAJdmFyIGJIb21lRmVlZHNDb2x1bW5zPXdpbmRvdy5pWmhpaHUuY29uZmlnWydIb21lRmVlZHNDb2x1bW5zJ10KICAgICAgICBpZiAoaXpoSG9tZU5vdGkmJiFiSG9tZUZlZWRzQ29sdW1ucwogICAgICAgICAmJiAkbGJsSG9tZVRpdGxlLmxlbmd0aAogICAgICAgICAmJiAkYnRuTmV3QWN0aXZpdHkubGVuZ3RoCiAgICAgICAgKXsKICAgICAgICAgICAgJGxibEhvbWVUaXRsZS5jc3MoewogICAgICAgICAgICAgICAgJ2Zsb2F0JzonbGVmdCcKICAgICAgICAgICAgICAsICdtYXJnaW4tYm90dG9tJzonMnB4JwogICAgICAgICAgICAgICwgJ2xpbmUtaGVpZ2h0JzonMzJweCcKICAgICAgICAgICAgICAsICd3aWR0aCc6JzEwMCUnCiAgICAgICAgICAgICAgfSkubmV4dCgpLmNzcygnY2xlYXInLCdib3RoJyk7CiAgICAgICAgICAgICRidG5OZXdBY3Rpdml0eS5jc3MoewogICAgICAgICAgICAgICAgJ2Zsb2F0JzoncmlnaHQnCiAgICAgICAgICAgICAgLCAnbWFyZ2luJzonMCcKICAgICAgICAgICAgICAsICdsaW5lLWhlaWdodCc6JzIycHgnCiAgICAgICAgICAgIH0pLmFwcGVuZFRvKCRsYmxIb21lVGl0bGUpOwogICAgICAgIH0KICAgICAgICBob21lRmVlZHMoYkhvbWVGZWVkc0NvbHVtbnMpOwogICAgfQoKCi8qKgogKiDpl67popjpobUKICovCgogIGlmKHBhZ2VJcy5RdWVzdGlvbil7CgogICAgdmFyICRsYmxRdWVzdGlvbk1ldGE9JCgnI3poLXF1ZXN0aW9uLW1ldGEtd3JhcCcpLy9xdWVzdGlvbl9tZXRhCiAgICAgICwgJGxpc3RBbnN3ZXJzPSQoJyN6aC1xdWVzdGlvbi1hbnN3ZXItd3JhcCwjemgtcXVlc3Rpb24tY29sbGFwc2VkLXdyYXAnKS5jaGlsZHJlbigpLy8kKCcuem0taXRlbS1hbnN3ZXInLCcjemgtc2luZ2xlLXF1ZXN0aW9uJykKICAgICAgLCBudW1BbnN3ZXJzQ291bnQ9JGxpc3RBbnN3ZXJzLmxlbmd0aAogICAgICAsICRidG5Db2xsYXBzZWRTd2l0Y2hlcj0kKCcjemgtcXVlc3Rpb24tY29sbGFwc2VkLXN3aXRjaGVyJykKICAgICAgLCBudW1Db2xsYXBzZWRDb3VudD0hJGJ0bkNvbGxhcHNlZFN3aXRjaGVyLmxlbmd0aHx8JGJ0bkNvbGxhcHNlZFN3aXRjaGVyLmlzKCc6aGlkZGVuJyk/MDpwYXJzZUludCgkKCcjemgtcXVlc3Rpb24tY29sbGFwc2VkLW51bScpLnRleHQoKSkKICAgICAgLCBudW1BbnN3ZXJzQ291bnRUb3RhbD1udW1BbnN3ZXJzQ291bnQrbnVtQ29sbGFwc2VkQ291bnQKICAgICAgLCAkcmVwbHk9JCgnI3poLXF1ZXN0aW9uLWFuc3dlci1mb3JtLXdyYXAnKS8vcmVwbHlfZm9ybQogICAgOwogICAgaWYoJGxibFF1ZXN0aW9uTWV0YS5sZW5ndGgpewogICAgICAgIHZhciBzPW5ldyBBcnJheSgpCiAgICAgICAgICAsICRhPSQoJzxhPicpCiAgICAgICAgICAsICRjPSQoJzxzcGFuPicseydjbGFzcyc6J3pnLWJ1bGwnfSkudGV4dCgn4oCiJykKICAgICAgICAgICwgJHA9JGxibFF1ZXN0aW9uTWV0YS5jaGlsZHJlbignLnptLW1ldGEtcGFuZWwnKS5jaGlsZHJlbignYS5tZXRhLWl0ZW06bGFzdCcpCiAgICAgICAgICAsICRtPSQoJy56dS1hbnN3ZXItZm9ybS1kaXNhYmxlZC13cmFwOnZpc2libGUgPiBhJywnI3poLXF1ZXN0aW9uLWFuc3dlci1mb3JtLXdyYXAnKQogICAgICAgIDsKICAgICAgICBpZigkbS5sZW5ndGgpewogICAgICAgICAgICBzLnB1c2goJG0uYXR0cignaHJlZicpKTsKICAgICAgICAgICAgJGEudGV4dCgn5oiR55qE5Zue562UJyk7CiAgICAgICAgfWVsc2UgaWYoJHJlcGx5Lmxlbmd0aCl7CiAgICAgICAgICAgIHZhciBpZD0nbmV3X2Fuc3dlcicKICAgICAgICAgICAgICAsICRiPSQoJzxhPicse25hbWU6aWR9KS5iZWZvcmUoJHJlcGx5LmNoaWxkcmVuKCkuZmlyc3QoKSk7CiAgICAgICAgICAgIHMucHVzaCgnI2RyYWZ0Jyk7CiAgICAgICAgICAgICRhLnRleHQoJ+aIkeimgeWbnuetlCcpOwogICAgICAgIH0KICAgICAgICAkYy5pbnNlcnRBZnRlcigkcCk7CiAgICAgICAgJGEuYXR0cignaHJlZicscy5qb2luKCcnKSkuYXR0cigndGFyZ2V0JywnX3NlbGYnKQogICAgICAgICAgICAuaW5zZXJ0QWZ0ZXIoJGMpOwogICAgfQogICAgaWYgKGl6aEF1dGhvckxpc3QmJgogICAgICAgIG51bUFuc3dlcnNDb3VudFRvdGFsPjEwMCYmCiAgICAgICAgY29uZmlybSgn6L+Z5Liq6Zeu6aKY55qE5Zue562U5pWw6L6D5aSa77yM5piv5ZCm5pqC5pe25YWz6Zet44CMaVpoaWh1IOWbnuetlOebruW9leOAje+8nycpKXsKICAgICAgICAvLyQoJyNpemhDU1NfY29tbWVudCcpLnJlbW92ZSgpOwogICAgICAgIC8vcmV0dXJuOwogICAgICAgIGl6aEF1dGhvckxpc3Q9ZmFsc2U7CiAgICAgICAgJGJvZHkuYXR0cignaXpoQXV0aG9yTGlzdCcsJzAnKTsKICAgIH0KICAgIC8vY29uc29sZS5sb2coKG5ldyBEYXRlKCkpLmdldFRpbWUoKSk7CiAgICAKICAgIHZhciAkbGJsQW5zd2Vyc0NvdW50PSQoJyN6aC1xdWVzdGlvbi1hbnN3ZXItbnVtJykvL2Fuc3dlcnNfY291bnQKICAgICAgLCAkdW5vPSQoJzxkaXY+Jyx7J2NsYXNzJzondW5vJyxzdHlsZTonZmxvYXQ6bGVmdCd9KS8vaXpoX0F1dGhvcnNMaXN0CiAgICAgICwgJHBwVD0kKCc8c3Bhbj4nLHsnY2xhc3MnOidtZVQnLHN0eWxlOidkaXNwbGF5Om5vbmUnfSkvL2l6aF9BdXRob3JzTGlzdF9Ub3BTZWxmSW5kaWNhdG9yCiAgICAgICwgJGZybT0kKCc8ZGl2PicseydjbGFzcyc6J2ZyYW1lJ30pLy9pemhfQXV0aG9yc0xpc3RfZnJhbWUKICAgICAgLCAkcHBCPSQoJzxzcGFuPicseydjbGFzcyc6J21lQicsc3R5bGU6J2Rpc3BsYXk6bm9uZSd9KS8vaXpoX0F1dGhvcnNMaXN0X0JvdHRvbVNlbGZJbmRpY2F0b3IKICAgICAgLCAkcHA9JCgnPHVsPicseydjbGFzcyc6J3BwJ30pLy9pemhfQXV0aG9yc0xpc3RfVUwKICAgICAgLCAkcHBJPSQoJzxkaXY+JykKICAgIAogICAgOwoKICAgIHdpbmRvdy5pWmhpaHUuJHVub0Fuc3dlcnMgPSAkdW5vCi8qCiAgICAvL+etlOahiOaMieaXtumXtOaOkuW6jwogICAgaWYodXRpbHMuZ2V0Q2ZnKCdhbnN3ZXJfb3JkZXJCeVRpbWUnKSl7CiAgICAgIGNsaWVudC5jbGljaygnLnpoLWFuc3dlcnMtZmlsdGVyLXBvcHVwIGRpdltkYXRhLWtleT1hZGRlZF90aW1lXScpOwogICAgfQoqLyAgICAKICAgIHZhciAkcXVlc3Rpb25XcmFwPSQoJyN6aC1xdWVzdGlvbi1tZXRhLXdyYXAnKTsKICAgICRxdWVzdGlvbldyYXAuY2hpbGRyZW4oJy5wYW5lbC1jb250YWluZXInKS5iaW5kKCdET01Ob2RlSW5zZXJ0ZWQnLGZ1bmN0aW9uKGV2ZW50KXsKICAgICAgICB3aW5kb3cuaVpoaWh1LkNvbW1lbnQucHJvY2Vzc0NvbW1lbnQoJChldmVudC50YXJnZXQpKTsKICAgIH0pOwogICAgaWYod2luZG93LmlaaGlodS5Db21tZW50LlJpZ2h0Q29tbWVudCl7CiAgICAgICAgLy8kcXVlc3Rpb25XcmFwLmNoaWxkcmVuKCcubWV0YS1pdGVtW25hbWU9YWRkY29tbWVudF0nKS5wcmVwZW5kVG8oJHF1ZXN0aW9uV3JhcCk7CiAgICAgICAgd2luZG93LmlaaGlodS5Db21tZW50LnByb2Nlc3NDb21tZW50QnV0dG9uKCRxdWVzdGlvbldyYXApOwogICAgICAgIGlmKCEkKCcjaXpoX1F1ZXN0aW9uU2hhZG93JykubGVuZ3RoKXsKICAgICAgICAgICAgJCgnPGRpdj4nLHsnY2xhc3MnOidpemhfYm94U2hhZG93JyxpZDonaXpoX1F1ZXN0aW9uU2hhZG93J30pLmNzcyh7CiAgICAgICAgICAgICAgICAnei1pbmRleCc6ICctMScKICAgICAgICAgICAgICAsICdwb3NpdGlvbic6ICdyZWxhdGl2ZScKICAgICAgICAgICAgICAsICd0b3AnOiAtMjUKICAgICAgICAgICAgICAsICdtYXJnaW4tbGVmdCc6IC0zMgogICAgICAgICAgICB9KS5wcmVwZW5kVG8oJ2JvZHk+Lnp1LW1haW46Zmlyc3QnKS5oaWRlKCk7CiAgICAgICAgfSAgIAogICAgfQoKICAgIC8vcHJvY2VzcyBlYWNoIGFuc3dlcgogICAgaWYoJGxpc3RBbnN3ZXJzJiYkbGlzdEFuc3dlcnMubGVuZ3RoKXsKICAgICAgICBpZihpemhBdXRob3JMaXN0KXsKICAgICAgICAgICAgJHVuby5hcHBlbmRUbygkYmFubmVyKTsKICAgICAgICAgICAgJHBwVC5hcHBlbmRUbygkdW5vKTsKICAgICAgICAgICAgJGZybS5hcHBlbmRUbygkdW5vKTsKICAgICAgICAgICAgJHBwLmFwcGVuZFRvKCRmcm0pOwogICAgICAgICAgICAkcHBCLmFwcGVuZFRvKCR1bm8pOwogICAgICAgICAgICAvL3Vuby5hcHBlbmRDaGlsZChwcEkpOwogICAgICAgICAgICAkdW5vLiRlbmRPZkxhc3RBPSQoJzxsaT4nKS5hZGRDbGFzcygnZW5kT2ZMYXN0QScpLmFwcGVuZFRvKCRwcCkKICAgICAgICB9CiAgICAgICAgJGxpc3RBbnN3ZXJzLmVhY2goZnVuY3Rpb24oaSxlKXsKICAgICAgICAgICAgd2luZG93LmlaaGlodS5BbnN3ZXIucHJvY2Vzc0Fuc3dlcigkKGUpLCRwcAogICAgICAgICAgICAgICwgaXpoQXV0aG9yUmVhcgogICAgICAgICAgICAgICwgaXpoQXV0aG9yTGlzdCk7CiAgICAgICAgfSk7CiAgICAgICAgaWYoJHJlcGx5LmNoaWxkcmVuKCcuenUtYW5zd2VyLWZvcm0tZGlzYWJsZWQtd3JhcCcpLmlzKCc6aGlkZGVuJykpewogICAgICAgICAgICB2YXIgJHBwbGE9JCgnPGE+Jyx7aHJlZjonI2RyYWZ0Jyx0YXJnZXQ6J19zZWxmJ30pCiAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0YWJsZT4nLCB7ICdjbGFzcyc6ICdwbHVzJyB9KQogICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRyPicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRkPicpKQogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dHI+JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRkPicpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGQ+JykpCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzxzcGFuPicsIHsgJ2NsYXNzJzogJ25hbWUgZnVuYycgfSkudGV4dCgnLW5ldy0nKSkKICAgICAgICAgICAgICAsICRwcGw9JCgnPGxpPicpCiAgICAgICAgICAgICAgICAuYXBwZW5kKCRwcGxhKQogICAgICAgICAgICAgICAgLmFwcGVuZFRvKCRwcCkKICAgICAgICAgICAgOwogICAgICAgIH0KICAgIH0KICAgIHZhciByZXNpemVBdXRob3JMaXN0PWZ1bmN0aW9uKCRmKXsKICAgICAgICAvLyBBZGp1c3QgQXV0aG9yTGlzdCdzIHNpemUgYW5kIGxvY2F0ZSBpdHMgcG9zaXRpb24KICAgICAgICBpZighJGZ8fCEkZi5sZW5ndGgpcmV0dXJuOwogICAgICAgIHZhciBmcm09JGYuZ2V0KDApOwogICAgICAgIHZhciB3aWR0aD13aW5kb3cuaVpoaWh1LkFuc3dlci5wcFdpZHRoCiAgICAgICAgICAsIGhlaWdodD0kd2luLmhlaWdodCgpLSRtYWluLm9mZnNldCgpLnRvcC0zLSRmLnBvc2l0aW9uKCkudG9wOwogICAgICAgIGlmKGZybS5zY3JvbGxIZWlnaHQ+aGVpZ2h0KXsKICAgICAgICAgICAgJGYuaGVpZ2h0KGhlaWdodCk7CiAgICAgICAgICAgIHdpZHRoKz0yMDsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgJGYuaGVpZ2h0KCcnKTsKICAgICAgICB9CiAgICAgICAgJGYud2lkdGgod2lkdGgpOwogICAgfTsKICAgIGlmKGlzTmFOKG51bUNvbGxhcHNlZENvdW50KSludW1Db2xsYXBzZWRDb3VudD0wOwogICAgaWYoJGxpc3RBbnN3ZXJzLmxlbmd0aHx8bnVtQ29sbGFwc2VkQ291bnQpewogICAgICAgIGlmKGl6aEF1dGhvckxpc3QpewogICAgICAgICAgICAkdW5vLmNzcyh7CiAgICAgICAgICAgICAgICAnZmxvYXQnOidub25lJwogICAgICAgICAgICAgICwgJ2xlZnQnOjktJHVuby53aWR0aCgpCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZighJGJ0bkNvbGxhcHNlZFN3aXRjaGVyLmxlbmd0aCYmIW51bUNvbGxhcHNlZENvdW50KQogICAgICAgICAgICAgICAgcmVzaXplQXV0aG9yTGlzdCgkZnJtKTsKICAgICAgICAgICAgJCgnPGRpdj4nLHsnY2xhc3MnOidtb2RhbC1kaWFsb2ctdGl0bGUnfSkuY3NzKHsKICAgICAgICAgICAgICAgICAgJ2JvcmRlci10b3AtbGVmdC1yYWRpdXMnOjAKICAgICAgICAgICAgfSkuaW5zZXJ0QmVmb3JlKCRwcFQpOwogICAgICAgICAgICAkdW5vLm1vdXNlb3ZlcihmdW5jdGlvbigpewogICAgICAgICAgICAgICAgcmVzaXplQXV0aG9yTGlzdCgkKCcuZnJhbWUnLHRoaXMpKTsKICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdsZWZ0JywnMCcpOwogICAgICAgICAgICB9KS5tb3VzZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2xlZnQnLDktJCh0aGlzKS53aWR0aCgpKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmKHdpbmRvdy5pWmhpaHUuQW5zd2VyLl9lKXsKICAgICAgICAgICAgICAgICR1bm8uY2hpbGRyZW4oJy5tZVQnKS5jc3MoJ2Rpc3BsYXknLDA+d2luZG93LmlaaGlodS5BbnN3ZXIuX2Uub2Zmc2V0VG9wLSRmcm0uc2Nyb2xsVG9wKCk/Jyc6J25vbmUnKTsKICAgICAgICAgICAgICAgICR1bm8uY2hpbGRyZW4oJy5tZUInKS5jc3MoJ2Rpc3BsYXknLCRmcm0uaGVpZ2h0KCk8d2luZG93LmlaaGlodS5BbnN3ZXIuX2Uub2Zmc2V0VG9wLSRmcm0uc2Nyb2xsVG9wKCkrd2luZG93LmlaaGlodS5BbnN3ZXIuX2Uub2Zmc2V0SGVpZ2h0PycnOidub25lJyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYoJGJ0bkNvbGxhcHNlZFN3aXRjaGVyLmxlbmd0aCl7CiAgICAgICAgICAgIGlmKG51bUNvbGxhcHNlZENvdW50PjApewogICAgICAgICAgICAgICAgJCgnI3poLXF1ZXN0aW9uLWNvbGxhcHNlZC13cmFwJykuc2hvdygpLmJpbmQoJ0RPTU5vZGVJbnNlcnRlZCcsZnVuY3Rpb24oZXZlbnQpewogICAgICAgICAgICAgICAgICAgIHZhciAkYT0kKGV2ZW50LnRhcmdldCk7CiAgICAgICAgICAgICAgICAgICAgaWYoJGEuaXMoJy56bS1pdGVtLWFuc3dlcicpKXsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmlaaGlodS5BbnN3ZXIucHJvY2Vzc0Fuc3dlcigkYSwkcHAKICAgICAgICAgICAgICAgICAgICAgICAgICAsICRib2R5LmF0dHIoJ2l6aEF1dGhvclJlYXInKT09JzEnCiAgICAgICAgICAgICAgICAgICAgICAgICAgLCAkYm9keS5hdHRyKCdpemhBdXRob3JMaXN0Jyk9PScxJwogICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnQgPSAkKCcuem0taXRlbS1hbnN3ZXJbaXpoX3Byb2Nlc3NlZD0xXScsJyN6aC1xdWVzdGlvbi1jb2xsYXBzZWQtd3JhcCcpLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoY291bnQ9PW51bUNvbGxhcHNlZENvdW50KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6ZUF1dGhvckxpc3QoJGZybSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICAkYnRuQ29sbGFwc2VkU3dpdGNoZXJbMF0uY2xpY2soKTsKICAgICAgICB9CiAgICB9CgogICAgJCgnI3poLXF1ZXN0aW9uLWFuc3dlci13cmFwJykuYmluZCgnRE9NTm9kZUluc2VydGVkJyxmdW5jdGlvbihldmVudCl7CiAgICAgICAgdmFyICRuYT0kKGV2ZW50LnRhcmdldCkuZmlsdGVyKCcuem0taXRlbS1hbnN3ZXInKTsKICAgICAgICBpZigkbmEubGVuZ3RoKXsKICAgICAgICAgICAgd2luZG93LmlaaGlodS5BbnN3ZXIucHJvY2Vzc0Fuc3dlcigkbmEsJHBwCiAgICAgICAgICAgICAgLCAkYm9keS5hdHRyKCdpemhBdXRob3JSZWFyJyk9PScxJwogICAgICAgICAgICAgICwgJGJvZHkuYXR0cignaXpoQXV0aG9yTGlzdCcpPT0nMScKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICB9KTsKICAgIC8vY29uc29sZS5sb2coKG5ldyBEYXRlKCkpLmdldFRpbWUoKSk7CgogICAgdmFyICRjbT0kKCcuem0tY29tbWVudC1ib3gnLCRxdWVzdGlvbldyYXApOwogICAgaWYoJGNtLmxlbmd0aCAmJiAkY20uaXMoJzp2aXNpYmxlJykpewogICAgICAgIHZhciBmb2N1c05hbWUgPSBpWmhpaHUuQ29tbWVudC5zY3JvbGxGb2N1c0NvbW1lbnRPblBhZ2VMb2FkKCRjbSk7CiAgICAKICAgICAgICBpWmhpaHUuQ29tbWVudC5tZXRhU2Nyb2xsVG9WaWV3Qm90dG9tKCRjbS5jbG9zZXN0KCcuem0taXRlbS1tZXRhJyksZnVuY3Rpb24oKXsKICAgICAgICAgICAgaVpoaWh1LkNvbW1lbnQucHJvY2Vzc0NvbW1lbnQoJGNtLCBmb2N1c05hbWUpOwogICAgICAgIH0pOwogICAgfQogIH0KCi8qKgogKiDphY3nva7nlYzpnaIKICovCgogICAgdmFyICRidG5TZXR0aW5ncyA9ICQoJzxsaT4nKQogICAgICAgICAgICAuYXBwZW5kKCQoJzxhPicsIHsgaHJlZjogJ2phdmFzY3JpcHQ6dm9pZCgwKTsnLCB0YWJpbmRleDogJy0xJyB9KQogICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8aT4nLCB7ICdjbGFzcyc6ICd6Zy1pY29uIHpnLWljb24tZGQtc2V0dGluZ3MgaXpoaWh1LXNldHRpbmdzJyB9KSkKICAgICAgICAgICAgICAgIC5hcHBlbmQoJ2laaGlodScpCiAgICAgICAgICAgICkuY2xpY2soZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHZhciAkc2V0dGluZ3MgPSAkKCcjaXpoLWRsZy1zZXR0aW5ncycpCiAgICAgICAgICAgICAgICAkKCcubW9kYWwtZGlhbG9nLWJnJykuc2hvdygpCiAgICAgICAgICAgICAgICAkKCcuaXpoLW9wdGlvbicsICcjaXpoLWRsZy1zZXR0aW5ncycpLmVhY2goZnVuY3Rpb24oaSwgZSl7CiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGUuZ2V0QXR0cmlidXRlKCduYW1lJykKICAgICAgICAgICAgICAgICAgICAgICwgdmFsdWUgPSB1dGlscy5nZXRDZmcoa2V5KQogICAgICAgICAgICAgICAgICAgICAgLCAkZSA9ICQoZSkKICAgICAgICAgICAgICAgICAgICBpZiAoJGUuaXMoJ2lucHV0OmNoZWNrYm94JykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYodmFsdWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGUpLmlDaGVjaygnY2hlY2snKQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJGUuaXMoJ3NlbGVjdCcpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUudmFsdWUgPSB2YWx1ZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAkc2V0dGluZ3MuY3NzKHsKICAgICAgICAgICAgICAgICAgICAnei1pbmRleCc6Jzk5JwogICAgICAgICAgICAgICAgICAsICdwb3NpdGlvbic6J2ZpeGVkJwogICAgICAgICAgICAgICAgICAsICd0b3AnOiAoJHdpbi5oZWlnaHQoKSAtICRzZXR0aW5ncy5oZWlnaHQoKSkgLyAyCiAgICAgICAgICAgICAgICAgICwgJ2xlZnQnOiAoJHdpbi53aWR0aCgpIC0gJHNldHRpbmdzLndpZHRoKCkpIC8gMgogICAgICAgICAgICAgICAgfSkuZmFkZUluKCdzbG93JykKICAgICAgICAgICAgfSkuaW5zZXJ0QmVmb3JlKCQoJ3VsI3RvcC1uYXYtcHJvZmlsZS1kcm9wZG93biBsaTpsYXN0JykpCiAgICAgICwgJGRsZ1NldHRpbmdzID0gJCgnPGRpdj4nLCB7IGlkOiAnaXpoLWRsZy1zZXR0aW5ncycsICdjbGFzcyc6ICdtb2RhbC1kaWFsb2cnLCB0YWJpbmRleDogJzAnLCBzdHlsZTogJ2Rpc3BsYXk6bm9uZTt3aWR0aDo2MDBweCd9KQogICAgICAgICAgICAuYXBwZW5kKCQoJzxkaXY+JywgeyAnY2xhc3MnOiAnbW9kYWwtZGlhbG9nLXRpdGxlIG1vZGFsLWRpYWxvZy10aXRsZS1kcmFnZ2FibGUnIH0pCiAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzxzcGFuPicsIHsgJ2NsYXNzJzogJ21vZGFsLWRpYWxvZy10aXRsZS10ZXh0JyB9KS50ZXh0KCfphY3nva7pgInpobknKSkKICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHNwYW4+JywgewogICAgICAgICAgICAgICAgICAgICdjbGFzcyc6ICdtb2RhbC1kaWFsb2ctdGl0bGUtY2xvc2UnCiAgICAgICAgICAgICAgICAgICwgY2xpY2s6IGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5tb2RhbC1kaWFsb2ctYmcnKS5oaWRlKCkKICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2l6aC1kbGctc2V0dGluZ3MnKS5maXJzdCgpLmhpZGUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICApCiAgICAgICAgICAgIC5hcHBlbmQoJCgnPGRpdj4nLCB7ICdjbGFzcyc6ICdtb2RhbC1kaWFsb2ctY29udGVudCcgfSkKICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPGRpdj4nLCB7fSkKICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzxkaXY+JywgeyAnY2xhc3MnOiAnemctc2VjdGlvbicgfSkKICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGFibGU+JywgeyAnY2xhc3MnOiAndF9zZXRfdGInLCBib3JkZXI6IDAsIGNlbGxzcGFjaW5nOiAwLCBjZWxscGFkZGluZzogNSwgd2lkdGg6ICcxMDAlJyB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGhlYWQ+Jywge30pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dHI+Jywge30pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRkPicsIHsgY29sc3BhbjogNiwgYWxpZ246ICdsZWZ0JyB9KS50ZXh0KCfvvIjmm7TmlLnlkI7orr7nva7lsIbnq4vliLvkv53lrZjvvIzkvYblj6rmnInlvZPpobXpnaLlho3mrKHmiZPlvIDml7bmiY3kvJrnlJ/mlYjvvIknKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAJLnByZXBlbmQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAkJJCgnPGI+JykudGV4dCgn5Yqf6IO95byA5YWzJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAJCSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRib2R5PicsIHt9KQovKgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRyPicsIHt9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nLCB7IGNvbHNwYW46IDQsIGFsaWduOiAnbGVmdCcgfSkudGV4dCgn5Zyo6aaW6aG155u05o6l5rWP6KeI5bi45Y676K+d6aKYJykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRkPicsIHsgYWxpZ246ICdyaWdodCd9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8aT4nLCB7ICdjbGFzcyc6ICdpY29uIGljb24taGVscCcsICdkYXRhLXRpcCc6ICIifSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGQ+JywgeyBhbGlnbjogJ3JpZ2h0J30pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzxpbnB1dD4nLCB7IHR5cGU6ICJjaGVja2JveCIsICdjbGFzcyc6ICJpemgtb3B0aW9uIiwgaWQ6ICJpWmhpaHVfc2V0SG9tZVRvcGljcyIsIG5hbWU6ICJIb21lVG9waWNzIiB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0cj4nLCB7fSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGQ+JywgeyBjb2xzcGFuOiA0LCBhbGlnbjogJ2xlZnQnIH0pLnRleHQoJ+aUueWPmOe9kemhteagt+W8j+WkluingicpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nLCB7IGFsaWduOiAncmlnaHQnfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPGk+JywgeyAnY2xhc3MnOiAnaWNvbiBpY29uLWhlbHAnLCAnZGF0YS10aXAnOiAicyR0JCog6aaW6aG16ZqQ6JeP5aSn5aS05YOPPGJyLz4qIOe8qei/m+aKleelqOaMiemSru+8iOmXrumimC/lm57nrZTpobXvvIk8YnIvPiog5oyJ6ZKu5Zu+5qCH5Yqo55S7ICJ9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nLCB7IGFsaWduOiAncmlnaHQnfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPGlucHV0PicsIHsgdHlwZTogImNoZWNrYm94IiwgJ2NsYXNzJzogIml6aC1vcHRpb24iLCBpZDogImlaaGlodV9zZXRIb21lTGF5b3V0IiwgbmFtZTogIkhvbWVMYXlvdXQiIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRyPicsIHt9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nLCB7IGNvbHNwYW46IDQsIGFsaWduOiAnbGVmdCcgfSkudGV4dCgn6Ieq5Yqo5pS26LW35a+86Iiq5qCPJykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRkPicsIHsgYWxpZ246ICdyaWdodCd9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8aT4nLCB7ICdjbGFzcyc6ICdpY29uIGljb24taGVscCcsICdkYXRhLXRpcCc6ICJzJHQkKiDmu5rliqjpobXpnaLoh7PkuIvmlrnml7bvvIzoh6rliqjmlLbotbfpobbpg6jlr7zoiKrmoI8gIn0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRkPicsIHsgYWxpZ246ICdyaWdodCd9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8aW5wdXQ+JywgeyB0eXBlOiAiY2hlY2tib3giLCAnY2xhc3MnOiAiaXpoLW9wdGlvbiIsIGlkOiAiaVpoaWh1X3NldFRvcE5hdkF1dG9Gb2xkIiwgbmFtZTogIlRvcE5hdkF1dG9Gb2xkIiB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0cj4nLCB7fSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGQ+JywgeyBjb2xzcGFuOiA0LCBhbGlnbjogJ2xlZnQnIH0pLnRleHQoJ+iwg+aVtOmmlumhteOAjOaWsOWKqOaAgeOAjeaPkOmGkuaMiemSricpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nLCB7IGFsaWduOiAncmlnaHQnfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPGk+JywgeyAnY2xhc3MnOiAnaWNvbiBpY29uLWhlbHAnLCAnZGF0YS10aXAnOiAicyR0JOaMquWIsCBUaW1lbGluZSDlj7PkuIrop5I8YnIvPuS4juagh+mimOOAjOacgOaWsOWKqOaAgeOAjeW5s+ihjCJ9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nLCB7IGFsaWduOiAncmlnaHQnfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPGlucHV0PicsIHsgdHlwZTogImNoZWNrYm94IiwgJ2NsYXNzJzogIml6aC1vcHRpb24iLCBpZDogImlaaGlodV9zZXRIb21lTm90aSIsIG5hbWU6ICJIb21lTm90aSIgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dHI+Jywge30pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRkPicsIHsgY29sc3BhbjogNCwgYWxpZ246ICdsZWZ0JyB9KS50ZXh0KCflvIDlkK/jgIzpppbpobXliIbmoI/jgI0nKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGQ+JywgeyBhbGlnbjogJ3JpZ2h0J30pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzxpPicsIHsgJ2NsYXNzJzogJ2ljb24gaWNvbi1oZWxwJywgJ2RhdGEtdGlwJzogInMkdCTlsIbpppbpobXliqjmgIHliIbnsbvljZXni6zmmL7npLrvvJo8YnIvPumXrumimOOAgeWbnuetlOOAgeS4k+agjyJ9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nLCB7IGFsaWduOiAncmlnaHQnfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPGlucHV0PicsIHsgdHlwZTogImNoZWNrYm94IiwgJ2NsYXNzJzogIml6aC1vcHRpb24iLCBpZDogImlaaGlodV9zZXRIb21lRmVlZHNDb2x1bW5zIiwgbmFtZTogIkhvbWVGZWVkc0NvbHVtbnMiIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRyPicsIHt9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nLCB7IGNvbHNwYW46IDQsIGFsaWduOiAnbGVmdCcgfSkudGV4dCgn5bCG55So5oi35L+h5oGv5oyq5Yiw5Zue562U5LiL5pa5JykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRkPicsIHsgYWxpZ246ICdyaWdodCd9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8aT4nLCB7ICdjbGFzcyc6ICdpY29uIGljb24taGVscCcsICdkYXRhLXRpcCc6ICIifSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGQ+JywgeyBhbGlnbjogJ3JpZ2h0J30pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzxpbnB1dD4nLCB7IHR5cGU6ICJjaGVja2JveCIsICdjbGFzcyc6ICJpemgtb3B0aW9uIiwgaWQ6ICJpWmhpaHVfc2V0QXV0aG9yUmVhciIsIG5hbWU6ICJBdXRob3JSZWFyIiB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0cj4nLCB7fSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGQ+JywgeyBhbGlnbjogJ2xlZnQnIH0pLnRleHQoJ+W8gOWQr+OAjOWPs+iIt+ivhOiuuuOAjScpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nLCB7IGFsaWduOiAncmlnaHQnfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPGk+JywgeyAnY2xhc3MnOiAnaWNvbiBpY29uLWhlbHAnLCAnZGF0YS10aXAnOiAicyR0JOWcqOmhtemdouWPs+S+p+a1ruWKqOaYvuekuuaJk+W8gOeahOivhOiuuuWIl+ihqDxici8+5Zyo6aaW6aG144CB6Zeu6aKY44CB5Zue562U6aG15Lit55Sf5pWIIn0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRkPicsIHsgYWxpZ246ICdyaWdodCd9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8aW5wdXQ+JywgeyB0eXBlOiAiY2hlY2tib3giLCAnY2xhc3MnOiAiaXpoLW9wdGlvbiIsIGlkOiAiaVpoaWh1X3NldFJpZ2h0Q29tbWVudCIsIG5hbWU6ICJTaG93Q29tbWVudCIgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGQ+JywgeyB3aWR0aDogMSwgbm93cmFwOiAnbm93cmFwJywgYWxpZ246ICdsZWZ0JyB9KS50ZXh0KCflhbPpl63ml7boh6rliqjljbflsY/oh7Plr7nlupTmnaHnm64nKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGQ+JywgeyBhbGlnbjogJ3JpZ2h0J30pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzxpPicsIHsgJ2NsYXNzJzogJ2ljb24gaWNvbi1oZWxwJywgJ2RhdGEtdGlwJzogInMkdCTku4Xlr7nlj7PoiLfor4TorrrnlJ/mlYgifSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGQ+JywgeyBhbGlnbjogJ3JpZ2h0J30pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzxpbnB1dD4nLCB7IHR5cGU6ICJjaGVja2JveCIsICdjbGFzcyc6ICJpemgtb3B0aW9uIiwgaWQ6ICJpWmhpaHVfc2V0UmlnaHRDb21tZW50X0F1dG9TY3JvbGxQYWdlV2hlbkNsb3NpbmciLCBuYW1lOiAiUmlnaHRDb21tZW50X0F1dG9TY3JvbGxQYWdlV2hlbkNsb3NpbmciIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRyPicsIHt9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nLCB7IGNvbHNwYW46IDQsIGFsaWduOiAnbGVmdCcgfSkudGV4dCgn5byA5ZCv44CM5b+r6YCf5bGP6JS944CN77yI5Yqg5YWl6buR5ZCN5Y2VL+WPlua2iOWFs+azqO+8ieWKn+iDvScpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nLCB7IGFsaWduOiAncmlnaHQnfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPGk+JywgeyAnY2xhc3MnOiAnaWNvbiBpY29uLWhlbHAnLCAnZGF0YS10aXAnOiAicyR0JOWcqOi1nuWQjOWIl+ihqOOAgeivhOiuuuWIl+ihqOS4reS9v+eUqCJ9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nLCB7IGFsaWduOiAncmlnaHQnfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPGlucHV0PicsIHsgdHlwZTogImNoZWNrYm94IiwgJ2NsYXNzJzogIml6aC1vcHRpb24iLCBpZDogImlaaGlodV9zZXRRdWlja0Jsb2NrIiwgbmFtZTogIlF1aWNrQmxvY2siIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRyPicsIHt9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nLCB7IGNvbHNwYW46IDQsIGFsaWduOiAnbGVmdCcgfSkudGV4dCgn5byA5ZCv44CM5b+r6YCf5pS26JeP44CN6I+c5Y2VJykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRkPicsIHsgYWxpZ246ICdyaWdodCd9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8aT4nLCB7ICdjbGFzcyc6ICdpY29uIGljb24taGVscCcsICdkYXRhLXRpcCc6ICJzJHQk6byg5qCH56e75LiK44CM5pS26JeP44CN5oyJ6ZKu5pe25pi+56S6In0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRkPicsIHsgYWxpZ246ICdyaWdodCd9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8aW5wdXQ+JywgeyB0eXBlOiAiY2hlY2tib3giLCAnY2xhc3MnOiAiaXpoLW9wdGlvbiIsIGlkOiAiaVpoaWh1X3NldFF1aWNrRmF2byIsIG5hbWU6ICJRdWlja0Zhdm8iIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRyPicsIHt9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nLCB7IGNvbHNwYW46IDQsIGFsaWduOiAnbGVmdCcgfSkudGV4dCgn5byA5ZCv44CM5Zue562U55uu5b2V44CNJykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRkPicsIHsgYWxpZ246ICdyaWdodCd9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8aT4nLCB7ICdjbGFzcyc6ICdpY29uIGljb24taGVscCcsICdkYXRhLXRpcCc6ICJzJHQk5Zyo6Zeu6aKY6aG16Z2i5bem5L6n5o6p6JeP77yM6byg5qCH56e75LiK5pe25bGV5byAPGJyLz7lubblnKjlj7PkvqfljbPml7bmmL7npLrlm57nrZTpooTop4gifSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGQ+JywgeyBhbGlnbjogJ3JpZ2h0J30pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzxpbnB1dD4nLCB7IHR5cGU6ICJjaGVja2JveCIsICdjbGFzcyc6ICJpemgtb3B0aW9uIiwgaWQ6ICJpWmhpaHVfc2V0QXV0aG9yTGlzdCIsIG5hbWU6ICJBdXRob3JMaXN0IiB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0cj4nLCB7fSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGQ+JywgeyBjb2xzcGFuOiA0LCBhbGlnbjogJ2xlZnQnIH0pLnRleHQoJ+mAieaLqeOAjOWklumDqOaQnOe0ouW8leaTjuOAjScpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nLCB7IGFsaWduOiAncmlnaHQnfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPGk+JywgeyAnY2xhc3MnOiAnaWNvbiBpY29uLWhlbHAnLCAnZGF0YS10aXAnOiAicyR0JOS9oOaHgueahCJ9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nLCB7IGFsaWduOiAncmlnaHQnfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHNlbGVjdD4nLCB7IHR5cGU6ICJjaGVja2JveCIsICdjbGFzcyc6ICJpemgtb3B0aW9uIiwgaWQ6ICJpWmhpaHVfc2V0U2VhcmNoRW5naW5lT3V0c2lkZSIsIG5hbWU6ICJTZWFyY2hFbmdpbmVPdXRzaWRlIn0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8b3B0aW9uPicsIHsgdmFsdWU6J2dvb2dsZScgfSkudGV4dCgnR29vZ2xlJykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8b3B0aW9uPicsIHsgdmFsdWU6J2JhaWR1JyB9KS50ZXh0KCfnmb7luqYnKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzxkaXY+JywgeyAnY2xhc3MnOiAnemctbGVmdCcgfSkKICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgn5b2T5YmN54mI5pys77yaJyt2ZXJzaW9uKyfvvJsnKQogICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCfmnIDlkI7mm7TmlrDvvJonK3VwZGF0ZURhdGUpCiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPGJyPicpKQogICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCfliLbkvZzvvJonKQogICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzxhPicsIHsgJ2RhdGEtdGlwJzogInAkdCR1bm9nengiLCBocmVmOiAiL3Blb3BsZS91bm9nengiIH0pLnRleHQoJ0DpkqLnm4Xpg63lrZAnKSkKICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgn77yMJykKICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8YT4nLCB7ICdkYXRhLXRpcCc6ICJwJHQkbGl1eW9uZzI1IiwgaHJlZjogIi9wZW9wbGUvbGl1eW9uZzI1IiB9KS50ZXh0KCdA5aSp54yqKOWImOWLhyknKSkKICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgn77yMJykKICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8YT4nLCB7ICdkYXRhLXRpcCc6ICJwJHQkbHVveHIiLCBocmVmOiAiL3Blb3BsZS9sdW94ciIgfSkudGV4dCgnQHl1a2lyb2NrJykpCiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ++8jCcpCiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPGE+JywgeyAnZGF0YS10aXAnOiAicCR0JG1vcmxheSIsIGhyZWY6ICIvcGVvcGxlL21vcmxheSIgfSkudGV4dCgnQOWiqOejiicpKQogICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzxicj4nKSkKICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgn5oSf6LCi77yaJykKICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8YT4nLCB7ICdkYXRhLXRpcCc6ICJwJHQkUGV0ZXJEZW5nIiwgaHJlZjogIi9wZW9wbGUvUGV0ZXJEZW5nIiB9KS50ZXh0KCdA6YKT5paH5Y2aJykpCiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ++8jCcpCiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPGE+JywgeyAnZGF0YS10aXAnOiAicCR0JGNha3ZmY3d6IiwgaHJlZjogIi9wZW9wbGUvY2FrdmZjd3oiIH0pLnRleHQoJ0DmsLTkupHpgLgnKSkKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8ZGl2PicsIHsgJ2NsYXNzJzogJ3ptLWNvbW1hbmQnIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPGE+JywgeyBpZDogJ2l6aFJlZnJlc2gnLCAnY2xhc3MnOiAnemctYnRuLWJsdWUnLCBocmVmOiAnamF2YXNjcmlwdDp2b2lkKDApOycgfSkudGV4dCgn5Yi35paw572R6aG1JykpCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApLmFwcGVuZFRvKF9kb2MuYm9keSkuZHJhZ2dhYmxlKHtoYW5kbGU6ICcubW9kYWwtZGlhbG9nLXRpdGxlLWRyYWdnYWJsZSd9KQoKICAgICQoJy5pemgtb3B0aW9uJywgJGRsZ1NldHRpbmdzKS5lYWNoKGZ1bmN0aW9uKGksIGUpewogICAgICAgIHZhciBrZXkgPSBlLmdldEF0dHJpYnV0ZSgnbmFtZScpCiAgICAgICAgICAsICRjaGsgPSAkKGUpLmZpbHRlcignaW5wdXQ6Y2hlY2tib3gnKS5pQ2hlY2soewogICAgICAgICAgICAgICAgY2hlY2tib3hDbGFzczogJ2ljaGVja2JveF9zcXVhcmUtYmx1ZScKICAgICAgICAgICAgICAsIGluY3JlYXNlQXJlYTogJzIwJScgLy8gb3B0aW9uYWwKICAgICAgICAgICAgfSkuYmluZCgnaWZDaGFuZ2VkJywgZnVuY3Rpb24oZXZlbnQpewogICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5jaGVja2VkCiAgICAgICAgICAgICAgICB1dGlscy5zZXRDZmcoa2V5LCB2YWx1ZSkKICAgICAgICAgICAgfSkKICAgICAgICAgICwgJHNlbCA9ICQoZSkuZmlsdGVyKCdzZWxlY3QnKS5iaW5kKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHV0aWxzLnNldENmZyhrZXksIHRoaXMudmFsdWUpCiAgICAgICAgICAgIH0pCiAgICB9KQogICAgJCgnI2l6aFJlZnJlc2gnKS5jbGljayhmdW5jdGlvbigpewogICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpCiAgICB9KQoKLyoKICog6K6+572uLeWxj+iUvQogKi8KaWYgKHBhZ2VJcy5TZXR0aW5nc0ZpbHRlcil7CiAgICB2YXIgYWxsPVtdCiAgICAgICwgJHNlY0Jsb2NrZWRVc2VycyA9ICQoJyNzZWN0aW9uLWJsb2NrZWQtdXNlcnMnKQogICAgICAsICRzZWNCbG9ja2VkVXNlcnNUaXRsZSA9ICRzZWNCbG9ja2VkVXNlcnMuY2hpbGRyZW4oJy5zZXR0aW5ncy1zZWN0aW9uLXRpdGxlOmZpcnN0JykuY2hpbGRyZW4oJ2gyOmZpcnN0JykKICAgICAgLCAkcG5sVW5CbG9ja2VkVXNlcnMgPSAkKCc8ZGl2PicpLmFwcGVuZFRvKCRzZWNCbG9ja2VkVXNlcnNUaXRsZSkuY3NzKHsKICAgICAgICAgICAgZmxvYXQ6ICdyaWdodCcKICAgICAgICB9KQogICAgICAsICRsYkZpbHRlckJsb2NrZWRVc2VycyA9ICQoJzxsYWJlbC8+JykuYXBwZW5kVG8oJHBubFVuQmxvY2tlZFVzZXJzKS5jc3MoewogICAgICAgICAgICBmbG9hdDogJ2xlZnQnCiAgICAgICAgfSkKICAgICAgLCAkdGJGaWx0ZXJCbG9ja2VkVXNlcnMgPSAkKCc8aW5wdXQvPicsIHsKICAgICAgICAgICAgJ2NsYXNzJzogJ3pnLWZvcm0tdGV4dC1pbnB1dCB6Zy1tcjE1JwogICAgICAgICAgLCBwbGFjZWhvbGRlcjogJ+eUqOaIt+WQjeaIluaYteensCcKICAgICAgICB9KS5hcHBlbmRUbygkcG5sVW5CbG9ja2VkVXNlcnMpLm9uKCdrZXl1cCcsIGZ1bmN0aW9uKGV2ZW50KXsKICAgICAgICAgICAgdmFyIGt3PXRoaXMudmFsdWUKICAgICAgICAgICAgICAsIG49MAogICAgICAgICAgICAgICwgJGxpc3RCbG9ja2VkVXNlcnM9JHNlY0Jsb2NrZWRVc2Vycy5maW5kKCcuYmxvY2tlZC11c2VycyA+IC5pdGVtID4gLmJvZHkgPiBhJykuZWFjaChmdW5jdGlvbihpLGUpewogICAgICAgICAgICAgICAgICAgIHZhciAkYSA9ICQoZSkKICAgICAgICAgICAgICAgICAgICAgICwgaHJlZiA9IGUuZ2V0QXR0cmlidXRlKCdocmVmJykgfHwgJycKICAgICAgICAgICAgICAgICAgICAgICwgdGV4dCA9IGUuaW5uZXJIVE1MCiAgICAgICAgICAgICAgICAgICAgICAsIG5vdE1hdGNoID0gKGhyZWYuaW5kZXhPZihrdykgPCAwICYmIHRleHQuaW5kZXhPZihrdykgPCAwKQogICAgICAgICAgICAgICAgICAgIGlmKCFub3RNYXRjaCl7CiAgICAgICAgICAgICAgICAgICAgICAgIG4rKwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAkYS5jbG9zZXN0KCcuaXRlbScpLmNzcygnZGlzcGxheScsIG5vdE1hdGNoID8gJ25vbmUnIDogJycpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAkbGJGaWx0ZXJCbG9ja2VkVXNlcnMudGV4dChbbj9uKycgJzon5pegJywn5Lq65Yy56YWN77yaJ10uam9pbignJykpCiAgICAgICAgfSkuY3NzKHsKICAgICAgICAgICAgZmxvYXQ6ICdsZWZ0JwogICAgICAgIH0pLnRyaWdnZXIoJ2tleXVwJykKICAgICAgLCBmdW5jVW5ibG9jaz1mdW5jdGlvbigpewogICAgICAgICAgICBpZihhbGwubGVuZ3RoPT0wKXtyZXR1cm59CiAgICAgICAgICAgIHZhciBlPWFsbC5zaGlmdCgpCiAgICAgICAgICAgICQucG9zdCgnL3NldHRpbmdzL3VuYmxvY2t1c2VyJywgJC5wYXJhbSh7CiAgICAgICAgICAgICAgICBfeHNyZjogJCgnaW5wdXRbbmFtZT1feHNyZl0nKS52YWwoKQogICAgICAgICAgICAgICwgdWlkOiBlLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpCiAgICAgICAgICAgIH0pKS5kb25lKGZ1bmN0aW9uKHJlc3VsdCl7CiAgICAgICAgICAgICAgICAkKGUpLnJlbW92ZSgpCiAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24ocmVzdWx0KXsKICAgICAgICAgICAgICAgIGFsbC5wdXNoKGUpCiAgICAgICAgICAgIH0pLmFsd2F5cyhmdW5jdGlvbihyZXN1bHQpewogICAgICAgICAgICAgICAgJGxiRmlsdGVyQmxvY2tlZFVzZXJzLnRleHQoW2FsbC5sZW5ndGg/YWxsLmxlbmd0aCsnICc6J+aXoCcsJ+S6uuWMuemFje+8middLmpvaW4oJycpKQogICAgICAgICAgICAgICAgZnVuY1VuYmxvY2soKQogICAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgLCBoPSR0YkZpbHRlckJsb2NrZWRVc2Vycy5vdXRlckhlaWdodCgpCiAgICAgICwgJGJ0VW5CbG9ja2VkVXNlcnMgPSAkKCc8aW5wdXQvPicsIHsKICAgICAgICAgICAgJ2NsYXNzJzogJ3pnLWJ0biB6Zy1idG4tdW5mb2xsb3cnCiAgICAgICAgICAsIHR5cGU6ICdidXR0b24nCiAgICAgICAgICAsIHZhbHVlOiAn5Y+W5raI5bGP6JS9JwogICAgICAgIH0pLmFwcGVuZFRvKCRwbmxVbkJsb2NrZWRVc2Vycykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpewogICAgICAgICAgICAkKCcjc2VjdGlvbi1ibG9ja2VkLXVzZXJzID4gLnNldHRpbmdzLWl0ZW0gPiAuc2V0dGluZ3MtaXRlbS1jb250ZW50ID4gLmJsb2NrZWQtdXNlcnMgPiAuaXRlbScpLmVhY2goZnVuY3Rpb24oaSxlKXsKICAgICAgICAgICAgICAgIHZhciAkZSA9ICQoZSkKICAgICAgICAgICAgICAgIGlmKCRlLmlzKCc6dmlzaWJsZScpKXsKICAgICAgICAgICAgICAgICAgICBhbGwucHVzaChlKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICBmdW5jVW5ibG9jaygpCiAgICAgICAgfSkuY3NzKHsKICAgICAgICAgICAgZmxvYXQ6ICdsZWZ0JwogICAgICAgIH0pLmhlaWdodChoKQogICAgJGxiRmlsdGVyQmxvY2tlZFVzZXJzLmNzcygnbGluZS1oZWlnaHQnLCBoKydweCcpCn0KCnZhciBmaXJzdFJ1biA9IHBhcnNlSW50KHV0aWxzLmdldFZhbHVlKCdpemhfZnInLCcxJykpOwoKZnVuY3Rpb24gX0ZSc2hvdygpewppZihmaXJzdFJ1bj4wICYmIGRvY3VtZW50LmRvbWFpbj09J3poaWh1LmNvbScpewogICAgdmFyIHRib3hsZWZ0PTA7CiAgICB2YXIgYWNjaXRlbTE9ICQoJyN6aC10b3AtaW5uZXIgZGl2LnRvcC1uYXYtcHJvZmlsZSAuenUtdG9wLW5hdi11c2VyaW5mbycpOwogICAgaWYoYWNjaXRlbTEubGVuZ3RoPjApewogICAgICAgIHRib3hsZWZ0ID0gYWNjaXRlbTEub2Zmc2V0KCkubGVmdDsKICAgIH0KICAgIGlmKHRib3hsZWZ0PjApewogICAgICAgICQoJzxkaXY+JywgeyBpZDogJ2laaGlodV90Ym94JywgJ2NsYXNzJzogJ3RfZnJzaG93JyB9KS5hcHBlbmRUbygnYm9keS56aGknKS5oaWRlKCkKICAgICAgICAgICAgLmFwcGVuZCgkKCc8ZGl2PicsIHsgJ2NsYXNzJzogJ3RfdHh0c2hvdyB0X3Rib3gnIH0pCiAgICAgICAgICAgICAgICAuYXBwZW5kKCfmhJ/osKLkvb/nlKgnKQogICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8Yj4nKS50ZXh0KCdpWmhpaHUnKSkKICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPGJyIC8+JykpCiAgICAgICAgICAgICAgICAuYXBwZW5kKCfmgqjlj6/pgJrov4foj5zljZXjgJBpWmhpaHXjgJHlr7nlip/og73ov5vooYzorr7nva4nKQogICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8YnIgLz4nKSkKICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHM+JykKICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzxpPicpKQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApOwogICAgICAgICQoJyNpWmhpaHVfdGJveCcpLmNzcygnbGVmdCcsdGJveGxlZnQtMTAwKS5zaG93KCkubW91c2VlbnRlcihmdW5jdGlvbigpewogICAgICAgICAgICB1dGlscy5zZXRWYWx1ZSgnaXpoX2ZyJywnMCcpOwogICAgICAgICAgICAvL19NZW51KCk7CiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9Cn0KICAgIApzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICBfRlJzaG93KCk7Cn0sMTAwMCk7CgoKICBjb25zb2xlLmxvZygnaVpoaWh1ICcrdmVyc2lvbisnIHN0YXJ0ZWQuJyk7CiAgLy9jb25zb2xlLmxvZyh3aW5kb3cuaVpoaWh1KTsKICAvL2NvbnNvbGUubG9nKChuZXcgRGF0ZSgpKS5nZXRUaW1lKCkpOwovL30pOwo="},{"name":"anti-redirect (typescript)","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":["*"],"orig_excludes":[],"orig_includes":["*www.baidu.com*","*tieba.baidu.com*","*v.baidu.com*","*www.google.*","*docs.google.*","*encrypted.google.com*","*www.so.com*","*www.zhihu.com*","*daily.zhihu.com*","*zhuanlan.zhihu.com*","*weibo.com*","*twitter.com*","*www.sogou.com*","*juejin.im*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":["baidu.com","bjyq.com.cn","163.com","hdzc.net","bjtvnews.com","sohu.com","qq.com","v4.cc"],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1512981252007},"enabled":true,"position":7,"file_url":"https://greasyfork.org/scripts/11915-anti-redirect-typescript/code/anti-redirect%20(typescript).user.js","uuid":"940abf92-5596-46e1-a189-b613f3d47cee","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgICAgIGFudGktcmVkaXJlY3QgKHR5cGVzY3JpcHQpCi8vIEBhdXRob3IgICAgICAgICAgICBBeGV0cm95Ci8vIEBjb2xsYWJvcmF0b3IgICAgICBBeGV0cm95Ci8vIEBkZXNjcmlwdGlvbiAgICAgICBHTeiEmuacrCwg5Y676Zmk5ZCE5pCc57Si5byV5pOOL+W4uOeUqOe9keermeeahOmHjeWumuWQkQovLyBAdmVyc2lvbiAgICAgICAgICAgMi4zLjEKLy8gQHVwZGF0ZSAgICAgICAgICAgIDIwMTctMDktMTkgMTc6NTk6NTQKLy8gQGdyYW50ICAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0Ci8vIEBpbmNsdWRlICAgICAgICAgICAqd3d3LmJhaWR1LmNvbSoKLy8gQGluY2x1ZGUgICAgICAgICAgICp0aWViYS5iYWlkdS5jb20qCi8vIEBpbmNsdWRlICAgICAgICAgICAqdi5iYWlkdS5jb20qCi8vIEBpbmNsdWRlICAgICAgICAgICAqd3d3Lmdvb2dsZS4qCi8vIEBpbmNsdWRlICAgICAgICAgICAqZG9jcy5nb29nbGUuKgovLyBAaW5jbHVkZSAgICAgICAgICAgKmVuY3J5cHRlZC5nb29nbGUuY29tKgovLyBAaW5jbHVkZSAgICAgICAgICAgKnd3dy5zby5jb20qCi8vIEBpbmNsdWRlICAgICAgICAgICAqd3d3LnpoaWh1LmNvbSoKLy8gQGluY2x1ZGUgICAgICAgICAgICpkYWlseS56aGlodS5jb20qCi8vIEBpbmNsdWRlICAgICAgICAgICAqemh1YW5sYW4uemhpaHUuY29tKgovLyBAaW5jbHVkZSAgICAgICAgICAgKndlaWJvLmNvbSoKLy8gQGluY2x1ZGUgICAgICAgICAgICp0d2l0dGVyLmNvbSoKLy8gQGluY2x1ZGUgICAgICAgICAgICp3d3cuc29nb3UuY29tKgovLyBAaW5jbHVkZSAgICAgICAgICAgKmp1ZWppbi5pbSoKLy8gQGNvbm5lY3QgICAgICAgICAgICoKLy8gQGNvbXBhdGlibGUgICAgICAgIGNocm9tZSAg5a6M576O6L+Q6KGMCi8vIEBjb21wYXRpYmxlICAgICAgICBmaXJlZm94ICDlroznvo7ov5DooYwKLy8gQHN1cHBvcnRVUkwgICAgICAgIGh0dHA6Ly93d3cuYnVybmluZ2FsbC5jb20KLy8gQHJ1bi1hdCAgICAgICAgICAgIGRvY3VtZW50LXN0YXJ0Ci8vIEBjb250cmlidXRpb25VUkwgICB0cm95NDUwNDA5NDA1QGdtYWlsLmNvbXxhbGlwYXkuY29tCi8vIEBuYW1lc3BhY2UgICAgICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3poLUNOL3VzZXJzLzM0MDAtYXhldHJveQovLyBAbGljZW5zZSAgICAgICAgICAgVGhlIE1JVCBMaWNlbnNlIChNSVQpOyBodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUCi8vID09L1VzZXJTY3JpcHQ9PQoKLy8gR2l0aHVi5rqQ56CBOmh0dHBzOi8vZ2l0aHViLmNvbS9heGV0cm95L2FudGktcmVkaXJlY3QKCgovKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwCi8qKioqKiovIAkvLyBUaGUgbW9kdWxlIGNhY2hlCi8qKioqKiovIAl2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9OwovKioqKioqLwovKioqKioqLyAJLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb24KLyoqKioqKi8gCWZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHsKLyoqKioqKi8KLyoqKioqKi8gCQkvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGUKLyoqKioqKi8gCQlpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkgewovKioqKioqLyAJCQlyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0czsKLyoqKioqKi8gCQl9Ci8qKioqKiovIAkJLy8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSkKLyoqKioqKi8gCQl2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7Ci8qKioqKiovIAkJCWk6IG1vZHVsZUlkLAovKioqKioqLyAJCQlsOiBmYWxzZSwKLyoqKioqKi8gCQkJZXhwb3J0czoge30KLyoqKioqKi8gCQl9OwovKioqKioqLwovKioqKioqLyAJCS8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvbgovKioqKioqLyAJCW1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pOwovKioqKioqLwovKioqKioqLyAJCS8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWQKLyoqKioqKi8gCQltb2R1bGUubCA9IHRydWU7Ci8qKioqKiovCi8qKioqKiovIAkJLy8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGUKLyoqKioqKi8gCQlyZXR1cm4gbW9kdWxlLmV4cG9ydHM7Ci8qKioqKiovIAl9Ci8qKioqKiovCi8qKioqKiovCi8qKioqKiovIAkvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKQovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlczsKLyoqKioqKi8KLyoqKioqKi8gCS8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzOwovKioqKioqLwovKioqKioqLyAJLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHsKLyoqKioqKi8gCQlpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7Ci8qKioqKiovIAkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7Ci8qKioqKiovIAkJCQljb25maWd1cmFibGU6IGZhbHNlLAovKioqKioqLyAJCQkJZW51bWVyYWJsZTogdHJ1ZSwKLyoqKioqKi8gCQkJCWdldDogZ2V0dGVyCi8qKioqKiovIAkJCX0pOwovKioqKioqLyAJCX0KLyoqKioqKi8gCX07Ci8qKioqKiovCi8qKioqKiovIAkvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlcwovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7Ci8qKioqKiovIAkJdmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/Ci8qKioqKiovIAkJCWZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6Ci8qKioqKiovIAkJCWZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07Ci8qKioqKiovIAkJX193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpOwovKioqKioqLyAJCXJldHVybiBnZXR0ZXI7Ci8qKioqKiovIAl9OwovKioqKioqLwovKioqKioqLyAJLy8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07Ci8qKioqKiovCi8qKioqKiovIAkvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfXwovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gIiI7Ci8qKioqKiovCi8qKioqKiovIAkvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHMKLyoqKioqKi8gCXJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDQpOwovKioqKioqLyB9KQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovKioqKioqLyAoWwovKiAwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwogICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CiAgICB9Owp9KSgpOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwp2YXIgZXZlbnRfZW1pdHRlcl9qc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7CnZhciBQcm92aWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIF9fZXh0ZW5kcyhQcm92aWRlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIFByb3ZpZGVyKCkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7CiAgICAgICAgX3RoaXMudGVzdCA9IC9leGFtcGxlLzsKICAgICAgICBfdGhpcy5BTlRJX1JFRElSRUNUX0RPTkVfRVZFTlQgPSAnYW50aS1yZWRpcmVjdC1kb25lJzsgLy8g55uR5ZCs5p+Q5LiqQeagh+etvu+8jOaIkOWKn+WOu+mZpOmHjeWumuWQkeS5i+WQjgogICAgICAgIF90aGlzLkFOVElfUkVESVJFQ1RfT1JJR0lOX0hSRUYgPSAnYW50aS1yZWRpcmVjdC1vcmlnaW4taHJlZic7CiAgICAgICAgX3RoaXMuY29uZmlnID0geyBkZWJ1ZzogZmFsc2UgfTsKICAgICAgICBfdGhpcy5vbihfdGhpcy5BTlRJX1JFRElSRUNUX0RPTkVfRVZFTlQsIGZ1bmN0aW9uIChhRWxlbWVudCwgcmVhbEhyZWYpIHsKICAgICAgICAgICAgaWYgKHJlYWxIcmVmKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5jb25maWcuZGVidWcgJiYgKGFFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdncmVlbicpOwogICAgICAgICAgICAgICAgYUVsZW1lbnQuc2V0QXR0cmlidXRlKF90aGlzLkFOVElfUkVESVJFQ1RfT1JJR0lOX0hSRUYsIGFFbGVtZW50LmhyZWYpOwogICAgICAgICAgICAgICAgYUVsZW1lbnQuaHJlZiA9IHJlYWxIcmVmOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgUHJvdmlkZXIucHJvdG90eXBlLnNldENvbmZpZyA9IGZ1bmN0aW9uIChjb25maWcpIHsKICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZzsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH07CiAgICBQcm92aWRlci5wcm90b3R5cGUub25TY3JvbGwgPSBmdW5jdGlvbiAoYUVsZW1lbnRMaXN0KSB7IH07CiAgICBQcm92aWRlci5wcm90b3R5cGUub25Ib3ZlciA9IGZ1bmN0aW9uIChhRWxlbWVudCkgeyB9OwogICAgUHJvdmlkZXIucHJvdG90eXBlLm9uSW5pdCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH07CiAgICByZXR1cm4gUHJvdmlkZXI7Cn0oZXZlbnRfZW1pdHRlcl9qc18xLmRlZmF1bHQpKTsKZXhwb3J0cy5Qcm92aWRlciA9IFByb3ZpZGVyOwoKCi8qKiovIH0pLAovKiAxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CnZhciB0aHJvdHRsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOwp2YXIgZGVib3VuY2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTsKdmFyIGluVmlldyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpOwpleHBvcnRzLlJFRElSRUNUX05VTSA9ICdyZWRpcmVjdC1jb3VudCc7Ci8qKgogKiDmoLnmja51cmzkuIrnmoTot6/lvoTljLnphY3vvIzljrvpmaTph43lrprlkJEKICogQHBhcmFtIHtIVE1MQW5jaG9yRWxlbWVudH0gYUVsZW1lbnQKICogQHBhcmFtIHtSZWdFeHB9IHRlc3RlcgogKiBAcmV0dXJucyB7Ym9vbGVhbn0KICovCmZ1bmN0aW9uIG1hdGNoTGlua0Zyb21VcmwoYUVsZW1lbnQsIHRlc3RlcikgewogICAgdmFyIG1hdGNoZXIgPSB0ZXN0ZXIuZXhlYyhhRWxlbWVudC5ocmVmKTsKICAgIGlmICghbWF0Y2hlciB8fCAhbWF0Y2hlci5sZW5ndGggfHwgIW1hdGNoZXJbMV0pCiAgICAgICAgcmV0dXJuICcnOwogICAgdmFyIHVybCA9ICcnOwogICAgdHJ5IHsKICAgICAgICB1cmwgPSBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hlclsxXSk7CiAgICB9CiAgICBjYXRjaCAoZSkgewogICAgICAgIHVybCA9IC9odHRwcz86XC9cLy8udGVzdChtYXRjaGVyWzFdKSA/IG1hdGNoZXJbMV0gOiAnJzsKICAgIH0KICAgIHJldHVybiB1cmw7Cn0KZXhwb3J0cy5tYXRjaExpbmtGcm9tVXJsID0gbWF0Y2hMaW5rRnJvbVVybDsKdmFyIFF1ZXJ5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gUXVlcnkocXVlcnlTdHIpIHsKICAgICAgICB0aGlzLnF1ZXJ5U3RyID0gcXVlcnlTdHI7CiAgICAgICAgdGhpcy5vYmplY3QgPSB7fTsKICAgICAgICB0aGlzLm9iamVjdCA9IHRoaXMudG9PYmplY3QocXVlcnlTdHIucmVwbGFjZSgvXlw/Ky8sICcnKSk7CiAgICB9CiAgICBRdWVyeS5wcm90b3R5cGUudG9PYmplY3QgPSBmdW5jdGlvbiAocXVlcnlTdHIpIHsKICAgICAgICB2YXIgb2JqID0ge307CiAgICAgICAgcXVlcnlTdHIuc3BsaXQoJyYnKS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHZhciBhcnIgPSBpdGVtLnNwbGl0KCc9JykgfHwgW107CiAgICAgICAgICAgIHZhciBrZXkgPSBhcnJbMF0gfHwgJyc7CiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGFyclsxXSB8fCAnJzsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGtleSA9IGRlY29kZVVSSUNvbXBvbmVudChhcnJbMF0gfHwgJycpOwogICAgICAgICAgICAgICAgdmFsdWUgPSBkZWNvZGVVUklDb21wb25lbnQoYXJyWzFdIHx8ICcnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjYXRjaCAoZXJyKSB7IH0KICAgICAgICAgICAga2V5ICYmIChvYmpba2V5XSA9IHZhbHVlKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gb2JqOwogICAgfTsKICAgIFF1ZXJ5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgYXJyID0gW107CiAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMub2JqZWN0KSB7CiAgICAgICAgICAgIGlmICh0aGlzLm9iamVjdC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLm9iamVjdFtrZXldOwogICAgICAgICAgICAgICAgYXJyLnB1c2goa2V5ICsgJz0nICsgdmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBhcnIubGVuZ3RoID8gJz8nICsgYXJyLmpvaW4oJyYnKSA6ICcnOwogICAgfTsKICAgIHJldHVybiBRdWVyeTsKfSgpKTsKZnVuY3Rpb24gcXVlcnlQYXJzZXIocXVlcnlTdHJpbmcpIHsKICAgIHJldHVybiBuZXcgUXVlcnkocXVlcnlTdHJpbmcpOwp9CmV4cG9ydHMucXVlcnlQYXJzZXIgPSBxdWVyeVBhcnNlcjsKZnVuY3Rpb24gZ2V0VGV4dChodG1sRWxlbWVudCkgewogICAgcmV0dXJuIChodG1sRWxlbWVudC5pbm5lclRleHQgfHwgaHRtbEVsZW1lbnQudGV4dENvbnRlbnQpLnRyaW0oKTsKfQpleHBvcnRzLmdldFRleHQgPSBnZXRUZXh0OwpmdW5jdGlvbiB0aHJvdHRsZURlY29yYXRvcih3YWl0LCBvcHRpb25zKSB7CiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfQogICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIG5hbWUsIGRlc2NyaXB0b3IpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgICAgICAgIGVudW1lcmFibGU6IGRlc2NyaXB0b3IuZW51bWVyYWJsZSwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgbmFtZSwgewogICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBkZXNjcmlwdG9yLmVudW1lcmFibGUsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRocm90dGxlKGRlc2NyaXB0b3IudmFsdWUsIHdhaXQsIG9wdGlvbnMpCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzW25hbWVdOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgIH07Cn0KZXhwb3J0cy50aHJvdHRsZURlY29yYXRvciA9IHRocm90dGxlRGVjb3JhdG9yOwpmdW5jdGlvbiBkZWJvdW5jZURlY29yYXRvcih3YWl0LCBvcHRpb25zKSB7CiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfQogICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIG5hbWUsIGRlc2NyaXB0b3IpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgICAgICAgIGVudW1lcmFibGU6IGRlc2NyaXB0b3IuZW51bWVyYWJsZSwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgbmFtZSwgewogICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBkZXNjcmlwdG9yLmVudW1lcmFibGUsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGRlYm91bmNlKGRlc2NyaXB0b3IudmFsdWUsIHdhaXQsIG9wdGlvbnMpCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzW25hbWVdOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgIH07Cn0KZXhwb3J0cy5kZWJvdW5jZURlY29yYXRvciA9IGRlYm91bmNlRGVjb3JhdG9yOwpmdW5jdGlvbiBpc0luVmlldyhlbGVtZW50KSB7CiAgICByZXR1cm4gaW5WaWV3LmlzKGVsZW1lbnQpOwp9CmV4cG9ydHMuaXNJblZpZXcgPSBpc0luVmlldzsKZnVuY3Rpb24gZ2V0UmVkaXJlY3QoYUVsZW1lbnQpIHsKICAgIHJldHVybiArKGFFbGVtZW50LmdldEF0dHJpYnV0ZShleHBvcnRzLlJFRElSRUNUX05VTSkgfHwgMCk7Cn0KZXhwb3J0cy5nZXRSZWRpcmVjdCA9IGdldFJlZGlyZWN0OwpmdW5jdGlvbiBpbmNyZWFzZVJlZGlyZWN0KGFFbGVtZW50KSB7CiAgICB2YXIgbnVtID0gZ2V0UmVkaXJlY3QoYUVsZW1lbnQpOwogICAgYUVsZW1lbnQuc2V0QXR0cmlidXRlKGV4cG9ydHMuUkVESVJFQ1RfTlVNLCBudW0gKyAxICsgJycpOwp9CmV4cG9ydHMuaW5jcmVhc2VSZWRpcmVjdCA9IGluY3JlYXNlUmVkaXJlY3Q7CmZ1bmN0aW9uIGRlY3JlYXNlUmVkaXJlY3QoYUVsZW1lbnQpIHsKICAgIHZhciBudW0gPSBnZXRSZWRpcmVjdChhRWxlbWVudCk7CiAgICBpZiAobnVtID4gMCkgewogICAgICAgIGFFbGVtZW50LnNldEF0dHJpYnV0ZShleHBvcnRzLlJFRElSRUNUX05VTSwgbnVtIC0gMSArICcnKTsKICAgIH0KfQpleHBvcnRzLmRlY3JlYXNlUmVkaXJlY3QgPSBkZWNyZWFzZVJlZGlyZWN0OwoKCi8qKiovIH0pLAovKiAyICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7CglpZih0cnVlKQoJCW1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpOwoJZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpCgkJZGVmaW5lKFtdLCBmYWN0b3J5KTsKCWVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKQoJCWV4cG9ydHNbImdtSHR0cCJdID0gZmFjdG9yeSgpOwoJZWxzZQoJCXJvb3RbImdtSHR0cCJdID0gZmFjdG9yeSgpOwp9KSh0aGlzLCBmdW5jdGlvbigpIHsKcmV0dXJuIC8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXAKLyoqKioqKi8gCS8vIFRoZSBtb2R1bGUgY2FjaGUKLyoqKioqKi8gCXZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307Ci8qKioqKiovCi8qKioqKiovIAkvLyBUaGUgcmVxdWlyZSBmdW5jdGlvbgovKioqKioqLyAJZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkgewovKioqKioqLwovKioqKioqLyAJCS8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZQovKioqKioqLyAJCWlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7Ci8qKioqKiovIAkJCXJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzOwovKioqKioqLyAJCX0KLyoqKioqKi8gCQkvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKQovKioqKioqLyAJCXZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHsKLyoqKioqKi8gCQkJaTogbW9kdWxlSWQsCi8qKioqKiovIAkJCWw6IGZhbHNlLAovKioqKioqLyAJCQlleHBvcnRzOiB7fQovKioqKioqLyAJCX07Ci8qKioqKiovCi8qKioqKiovIAkJLy8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uCi8qKioqKiovIAkJbW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7Ci8qKioqKiovCi8qKioqKiovIAkJLy8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZAovKioqKioqLyAJCW1vZHVsZS5sID0gdHJ1ZTsKLyoqKioqKi8KLyoqKioqKi8gCQkvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZQovKioqKioqLyAJCXJldHVybiBtb2R1bGUuZXhwb3J0czsKLyoqKioqKi8gCX0KLyoqKioqKi8KLyoqKioqKi8KLyoqKioqKi8gCS8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzOwovKioqKioqLwovKioqKioqLyAJLy8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGUKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7Ci8qKioqKiovCi8qKioqKiovIAkvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHMKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikgewovKioqKioqLyAJCWlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHsKLyoqKioqKi8gCQkJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsKLyoqKioqKi8gCQkJCWNvbmZpZ3VyYWJsZTogZmFsc2UsCi8qKioqKiovIAkJCQllbnVtZXJhYmxlOiB0cnVlLAovKioqKioqLyAJCQkJZ2V0OiBnZXR0ZXIKLyoqKioqKi8gCQkJfSk7Ci8qKioqKiovIAkJfQovKioqKioqLyAJfTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHsKLyoqKioqKi8gCQl2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID8KLyoqKioqKi8gCQkJZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDoKLyoqKioqKi8gCQkJZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTsKLyoqKioqKi8gCQlfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7Ci8qKioqKiovIAkJcmV0dXJuIGdldHRlcjsKLyoqKioqKi8gCX07Ci8qKioqKiovCi8qKioqKiovIAkvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSAiIjsKLyoqKioqKi8KLyoqKioqKi8gCS8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0cwovKioqKioqLyAJcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7Ci8qKioqKiovIH0pCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCi8qKioqKiovIChbCi8qIDAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKLyoqCiAqIENyZWF0ZWQgYnkgYXhldHJveSBvbiAxNy02LTIzLgogKi8KLy8vIDxyZWZlcmVuY2UgcGF0aD0iLi9pbmRleC5kLnRzIiAvPgp2YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHsKICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykgewogICAgICAgIHMgPSBhcmd1bWVudHNbaV07CiAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKQogICAgICAgICAgICB0W3BdID0gc1twXTsKICAgIH0KICAgIHJldHVybiB0Owp9OwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwpmdW5jdGlvbiBpc0Z1bmN0aW9uKGZ1bmMpIHsKICAgIHJldHVybiB0eXBlb2YgZnVuYyA9PT0gJ2Z1bmN0aW9uJzsKfQp2YXIgSHR0cCA9IChmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBIdHRwKGNvbmZpZykgewogICAgICAgIGlmIChjb25maWcgPT09IHZvaWQgMCkgeyBjb25maWcgPSB7fTsgfQogICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnOwogICAgfQogICAgSHR0cC5wcm90b3R5cGUuc2V0Q29uZmlnID0gZnVuY3Rpb24gKGNvbmZpZykgewogICAgICAgIGlmIChjb25maWcgPT09IHZvaWQgMCkgeyBjb25maWcgPSB7fTsgfQogICAgICAgIHRoaXMuY29uZmlnID0gX19hc3NpZ24oe30sIHRoaXMuY29uZmlnLCBjb25maWcpOwogICAgfTsKICAgIEh0dHAucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChjb25maWcpIHsKICAgICAgICByZXR1cm4gbmV3IEh0dHAoY29uZmlnKTsKICAgIH07CiAgICBIdHRwLnByb3RvdHlwZS5yZXF1ZXN0ID0gZnVuY3Rpb24gKG1ldGhvZCwgdXJsLCBkYXRhLCBoZWFkZXIsIGNvbmZpZykgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgaWYgKGRhdGEgPT09IHZvaWQgMCkgeyBkYXRhID0gJyc7IH0KICAgICAgICBpZiAoaGVhZGVyID09PSB2b2lkIDApIHsgaGVhZGVyID0ge307IH0KICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH0KICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICB2YXIgY29tbW9uUmVxdWVzdENvbmZpZyA9IHsKICAgICAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kLAogICAgICAgICAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgICAgaGVhZGVyOiBoZWFkZXIKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdmFyIEdNX3htbGh0dHBSZXF1ZXN0Q29uZmlnID0gX19hc3NpZ24oe30sIGNvbW1vblJlcXVlc3RDb25maWcsIGNvbmZpZywgX3RoaXMuY29uZmlnKTsKICAgICAgICAgICAgdmFyIG9ucmVhZHlzdGF0ZWNoYW5nZSA9IEdNX3htbGh0dHBSZXF1ZXN0Q29uZmlnLm9ucmVhZHlzdGF0ZWNoYW5nZSwgb25lcnJvciA9IEdNX3htbGh0dHBSZXF1ZXN0Q29uZmlnLm9uZXJyb3IsIG9uYWJvcnQgPSBHTV94bWxodHRwUmVxdWVzdENvbmZpZy5vbmFib3J0LCBvbnRpbWVvdXQgPSBHTV94bWxodHRwUmVxdWVzdENvbmZpZy5vbnRpbWVvdXQ7CiAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0Q29uZmlnLnN5bmNocm9ub3VzID0gdHJ1ZTsgLy8gYXN5bmMKICAgICAgICAgICAgR01feG1saHR0cFJlcXVlc3RDb25maWcub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGlzRnVuY3Rpb24ob25yZWFkeXN0YXRlY2hhbmdlKSAmJgogICAgICAgICAgICAgICAgICAgICAgICBvbnJlYWR5c3RhdGVjaGFuZ2UuY2FsbCh0aGlzLCByZXNwb25zZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UucmVhZHlTdGF0ZSAhPT0gNCkKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICByZXNwb25zZS5zdGF0dXMgPj0gMjAwICYmIHJlc3BvbnNlLnN0YXR1cyA8IDQwMAogICAgICAgICAgICAgICAgICAgID8gcmVzb2x2ZShyZXNwb25zZSkKICAgICAgICAgICAgICAgICAgICA6IHJlamVjdChyZXNwb25zZSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0Q29uZmlnLm9uZXJyb3IgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgaXNGdW5jdGlvbihvbmVycm9yKSAmJiBvbmVycm9yLmNhbGwodGhpcywgcmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0Q29uZmlnLm9uYWJvcnQgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgaXNGdW5jdGlvbihvbmFib3J0KSAmJiBvbmFib3J0LmNhbGwodGhpcywgcmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0Q29uZmlnLm9udGltZW91dCA9IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBpc0Z1bmN0aW9uKG9udGltZW91dCkgJiYgb250aW1lb3V0LmNhbGwodGhpcywgcmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGlmIChfdGhpcy5jb25maWcuZGVidWcpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCIlY1siICsgY29tbW9uUmVxdWVzdENvbmZpZy5tZXRob2QudG9VcHBlckNhc2UoKSArICJdJWM6ICIgKyBjb21tb25SZXF1ZXN0Q29uZmlnLnVybCwgJ2NvbG9yOiBncmVlbicsICdjb2xvcjogIzAwMDt0ZXh0LXN0eWxlOiB1bmRlci1saW5lJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QoX19hc3NpZ24oe30sIEdNX3htbGh0dHBSZXF1ZXN0Q29uZmlnKSk7CiAgICAgICAgfSk7CiAgICB9OwogICAgSHR0cC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHVybCwgZGF0YSwgaGVhZGVyLCBjb25maWcpIHsKICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KCdHRVQnLCB1cmwsIGRhdGEsIGhlYWRlciwgY29uZmlnKTsKICAgIH07CiAgICBIdHRwLnByb3RvdHlwZS5wb3N0ID0gZnVuY3Rpb24gKHVybCwgZGF0YSwgaGVhZGVyLCBjb25maWcpIHsKICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KCdQT1NUJywgdXJsLCBkYXRhLCBoZWFkZXIsIGNvbmZpZyk7CiAgICB9OwogICAgSHR0cC5wcm90b3R5cGUucHV0ID0gZnVuY3Rpb24gKHVybCwgZGF0YSwgaGVhZGVyLCBjb25maWcpIHsKICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KCdQVVQnLCB1cmwsIGRhdGEsIGhlYWRlciwgY29uZmlnKTsKICAgIH07CiAgICBIdHRwLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBmdW5jdGlvbiAodXJsLCBkYXRhLCBoZWFkZXIsIGNvbmZpZykgewogICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3QoJ0RFTEVURScsIHVybCwgZGF0YSwgaGVhZGVyLCBjb25maWcpOwogICAgfTsKICAgIEh0dHAucHJvdG90eXBlLmhlYWQgPSBmdW5jdGlvbiAodXJsLCBkYXRhLCBoZWFkZXIsIGNvbmZpZykgewogICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3QoJ0hFQUQnLCB1cmwsIGRhdGEsIGhlYWRlciwgY29uZmlnKTsKICAgIH07CiAgICByZXR1cm4gSHR0cDsKfSgpKTsKZXhwb3J0cy5IdHRwID0gSHR0cDsKdmFyIHRpbWVvdXQgPSA1MDAwOwpleHBvcnRzLnRpbWVvdXQgPSB0aW1lb3V0Owp2YXIgaHR0cCA9IG5ldyBIdHRwKHsgdGltZW91dDogdGltZW91dCB9KTsKZXhwb3J0cy5odHRwID0gaHR0cDsKZXhwb3J0cy5kZWZhdWx0ID0gaHR0cDsKCgovKioqLyB9KQovKioqKioqLyBdKTsKfSk7CgovKioqLyB9KSwKLyogMyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgp2YXIgZzsKCi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlCmcgPSAoZnVuY3Rpb24oKSB7CglyZXR1cm4gdGhpczsKfSkoKTsKCnRyeSB7CgkvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUCkKCWcgPSBnIHx8IEZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCkgfHwgKDEsZXZhbCkoInRoaXMiKTsKfSBjYXRjaChlKSB7CgkvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZQoJaWYodHlwZW9mIHdpbmRvdyA9PT0gIm9iamVjdCIpCgkJZyA9IHdpbmRvdzsKfQoKLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLgovLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQncwovLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59Cgptb2R1bGUuZXhwb3J0cyA9IGc7CgoKLyoqKi8gfSksCi8qIDQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKdmFyIGdtX2h0dHBfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7CnZhciBhcHBfMSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7CnZhciB6aGlodV96aHVhbmxhbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7CnZhciB6aGlodV9kYWlseV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7CnZhciB0aWViYV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7CnZhciBnb29nbGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpOwp2YXIgZ29vZ2xlX2RvY3NfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpOwp2YXIgemhpaHVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpOwp2YXIgc29fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMjApOwp2YXIgd2VvYm9fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpOwp2YXIgdHdpdHRlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7CnZhciBzb2dvdV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7CnZhciBiYWlkdV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7CnZhciBiYWlkdV92aWRlb18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7CnZhciBqdWVqaW5fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpOwp2YXIgYXBwID0gbmV3IGFwcF8xLkFwcCgpOwp2YXIgaXNEZWJ1ZyA9ICJwcm9kdWN0aW9uIiAhPT0gJ3Byb2R1Y3Rpb24nOwpnbV9odHRwXzEuZGVmYXVsdC5zZXRDb25maWcoeyBkZWJ1ZzogaXNEZWJ1ZyB9KTsKYXBwCiAgICAuc2V0Q29uZmlnKHsKICAgIGRlYnVnOiBpc0RlYnVnCn0pCiAgICAucHJvdmlkZShbCiAgICB7CiAgICAgICAgLy8g5rWL6K+V5Zyw5Z2AOiBodHRwczovL3d3dy56aGlodS5jb20vcXVlc3Rpb24vMjUyNTg3NzUKICAgICAgICBuYW1lOiAn55+l5LmOJywKICAgICAgICB0ZXN0OiAvd3d3XC56aGlodVwuY29tLywKICAgICAgICBwcm92aWRlcjogemhpaHVfMS5aaGlodVByb3ZpZGVyCiAgICB9LAogICAgewogICAgICAgIC8vIOa1i+ivleWcsOWdgDogaHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8yMDU0OTk3OAogICAgICAgIG5hbWU6ICfnn6XkuY7kuJPmoI8nLAogICAgICAgIHRlc3Q6IC96aHVhbmxhblwuemhpaHVcLmNvbS8sCiAgICAgICAgcHJvdmlkZXI6IHpoaWh1X3podWFubGFuXzEuWmhpaHVaaHVhbmxhblByb3ZpZGVyCiAgICB9LAogICAgewogICAgICAgIC8vIOa1i+ivleWcsOWdgDoKICAgICAgICBuYW1lOiAn55+l5LmO5pel5oqlJywKICAgICAgICB0ZXN0OiAvZGFpbHlcLnpoaWh1XC5jb20vLAogICAgICAgIHByb3ZpZGVyOiB6aGlodV9kYWlseV8xLlpoaWh1RGFpbHlQcm92aWRlcgogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAnR29vZ2xl5pCc57SiJywKICAgICAgICB0ZXN0OiAvXHcrXC5nb29nbGVcLi8sCiAgICAgICAgcHJvdmlkZXI6IGdvb2dsZV8xLkdvb2dsZVByb3ZpZGVyCiAgICB9LAogICAgewogICAgICAgIC8vIOa1i+ivleWcsOWdgDogaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vc3ByZWFkc2hlZXRzL2QvMVRGY0VYTWNLcndvSUFFQ0lWeUJVMEdQb1NtUnFaN0EwVkJ2cWVLWVZTd3cvaHRtbHZpZXcKICAgICAgICBuYW1lOiAnR29vZ2xlIERvY3MnLAogICAgICAgIHRlc3Q6IC9kb2NzXC5nb29nbGVcLmNvbS8sCiAgICAgICAgcHJvdmlkZXI6IGdvb2dsZV9kb2NzXzEuR29vZ2xlRG9jc1Byb3ZpZGVyCiAgICB9LAogICAgewogICAgICAgIC8vIOa1i+ivleWcsOWdgDogaHR0cHM6Ly93d3cuc28uY29tL3M/aWU9dXRmLTgmZnI9bm9uZSZzcmM9MzYwc291X25ld2hvbWUmcT1jaHJvbWUKICAgICAgICBuYW1lOiAnMzYw5pCc57SiJywKICAgICAgICB0ZXN0OiAvd3d3XC5zb1wuY29tLywKICAgICAgICBwcm92aWRlcjogc29fMS5Tb1Byb3ZpZGVyCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICfmlrDmtarlvq7ljZonLAogICAgICAgIHRlc3Q6IC9cLndlaWJvXC5jb20vLAogICAgICAgIHByb3ZpZGVyOiB3ZW9ib18xLldlYm9Qcm92aWRlcgogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAnVHdpdHRlcicsCiAgICAgICAgdGVzdDogL3R3aXR0ZXJcLmNvbS8sCiAgICAgICAgcHJvdmlkZXI6IHR3aXR0ZXJfMS5Ud2l0dGVyUHJvdmlkZXIKICAgIH0sCiAgICB7CiAgICAgICAgLy8g5rWL6K+VOiBodHRwOi8vd3d3LnNvZ291LmNvbS93ZWI/cXVlcnk9Y2hyb21lJl9hc2Y9d3d3LnNvZ291LmNvbSZfYXN0PSZ3PTAxMDE5OTAwJnA9NDAwNDAxMDAmaWU9dXRmOCZmcm9tPWluZGV4LW5vbG9naW4mc19mcm9tPWluZGV4JnN1dD0xNTI3JnNzdDA9MTUwNDM0NzM2NzYxMSZsa3Q9MCUyQzAlMkMwJnN1Z3N1dj0wMDA5MTY1MUI0OENBNDVGNTkzQjYxQTI5QjEzMTQwNSZzdWd0aW1lPTE1MDQzNDczNjc2MTEKICAgICAgICBuYW1lOiAn5pCc54uX5pCc57SiJywKICAgICAgICB0ZXN0OiAvd3d3XC5zb2dvdVwuY29tLywKICAgICAgICBwcm92aWRlcjogc29nb3VfMS5Tb0dvdVByb3ZpZGVyCiAgICB9LAogICAgewogICAgICAgIC8vIOa1i+ivlTogaHR0cHM6Ly93d3cuYmFpZHUuY29tL3M/d2Q9Y2hyb21lJnJzdl9zcHQ9MSZyc3ZfaXFpZD0weGNiMTM2MjM3MDAwZWQ0MGUmaXNzcD0xJmY9OCZyc3ZfYnA9MCZyc3ZfaWR4PTImaWU9dXRmLTgmdG49YmFpZHVsb2NhbCZyc3ZfZW50ZXI9MSZyc3Zfc3VnMz03JnJzdl9zdWcxPTcmcnN2X3N1Zzc9MTAxJnJzdl9zdWcyPTAmaW5wdXRUPTgxMyZyc3Zfc3VnND05ODkmdGltZXN0YW1wPTE1MDQzNDkyMjkyNjYmcm49NTAmdmZfYmw9MQogICAgICAgIG5hbWU6ICfnmb7luqbmkJzntKInLAogICAgICAgIHRlc3Q6IC93d3dcLmJhaWR1XC5jb20vLAogICAgICAgIHByb3ZpZGVyOiBiYWlkdV8xLkJhaWR1UHJvdmlkZXIKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogJ+eZvuW6puinhumikScsCiAgICAgICAgdGVzdDogL3ZcLmJhaWR1XC5jb20vLAogICAgICAgIHByb3ZpZGVyOiBiYWlkdV92aWRlb18xLkJhaWR1VmlkZW9Qcm92aWRlcgogICAgfSwKICAgIHsKICAgICAgICAvLyDmtYvor5XlnLDlnYA6IGh0dHA6Ly90aWViYS5iYWlkdS5jb20vcC81MzAwODQ0MTgwCiAgICAgICAgbmFtZTogJ+eZvuW6pui0tOWQpycsCiAgICAgICAgdGVzdDogL3RpZWJhXC5iYWlkdVwuY29tLywKICAgICAgICBwcm92aWRlcjogdGllYmFfMS5UaWViYVByb3ZpZGVyCiAgICB9LAogICAgewogICAgICAgIC8vIOa1i+ivleWcsOWdgDogaHR0cHM6Ly9qdWVqaW4uaW0vZW50cnkvNTlhYzhmYTU1MTg4MjUyNDI0MWE4ODAyP3V0bV9zb3VyY2U9Z29sZF9icm93c2VyX2V4dGVuc2lvbgogICAgICAgIG5hbWU6ICfmjpjph5EnLAogICAgICAgIHRlc3Q6IC9qdWVqaW5cLmltLywKICAgICAgICBwcm92aWRlcjoganVlamluXzEuSnVlamluUHJvdmlkZXIKICAgIH0KXSkKICAgIC5ib290c3RyYXAoKTsKCgovKioqLyB9KSwKLyogNSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Ci8vIFRoaXMgZmlsZSBjYW4gYmUgcmVxdWlyZWQgaW4gQnJvd3NlcmlmeSBhbmQgTm9kZS5qcyBmb3IgYXV0b21hdGljIHBvbHlmaWxsCi8vIFRvIHVzZSBpdDogIHJlcXVpcmUoJ2VzNi1wcm9taXNlL2F1dG8nKTsKCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KS5wb2x5ZmlsbCgpOwoKCi8qKiovIH0pLAovKiA2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzLCBnbG9iYWwpIHt2YXIgcmVxdWlyZTsvKiEKICogQG92ZXJ2aWV3IGVzNi1wcm9taXNlIC0gYSB0aW55IGltcGxlbWVudGF0aW9uIG9mIFByb21pc2VzL0ErLgogKiBAY29weXJpZ2h0IENvcHlyaWdodCAoYykgMjAxNCBZZWh1ZGEgS2F0eiwgVG9tIERhbGUsIFN0ZWZhbiBQZW5uZXIgYW5kIGNvbnRyaWJ1dG9ycyAoQ29udmVyc2lvbiB0byBFUzYgQVBJIGJ5IEpha2UgQXJjaGliYWxkKQogKiBAbGljZW5zZSAgIExpY2Vuc2VkIHVuZGVyIE1JVCBsaWNlbnNlCiAqICAgICAgICAgICAgU2VlIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zdGVmYW5wZW5uZXIvZXM2LXByb21pc2UvbWFzdGVyL0xJQ0VOU0UKICogQHZlcnNpb24gICA0LjEuMQogKi8KCihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7CgkgdHJ1ZSA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDoKCXR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6CgkoZ2xvYmFsLkVTNlByb21pc2UgPSBmYWN0b3J5KCkpOwp9KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JzsKCmZ1bmN0aW9uIG9iamVjdE9yRnVuY3Rpb24oeCkgewogIHZhciB0eXBlID0gdHlwZW9mIHg7CiAgcmV0dXJuIHggIT09IG51bGwgJiYgKHR5cGUgPT09ICdvYmplY3QnIHx8IHR5cGUgPT09ICdmdW5jdGlvbicpOwp9CgpmdW5jdGlvbiBpc0Z1bmN0aW9uKHgpIHsKICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7Cn0KCnZhciBfaXNBcnJheSA9IHVuZGVmaW5lZDsKaWYgKEFycmF5LmlzQXJyYXkpIHsKICBfaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7Cn0gZWxzZSB7CiAgX2lzQXJyYXkgPSBmdW5jdGlvbiAoeCkgewogICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgQXJyYXldJzsKICB9Owp9Cgp2YXIgaXNBcnJheSA9IF9pc0FycmF5OwoKdmFyIGxlbiA9IDA7CnZhciB2ZXJ0eE5leHQgPSB1bmRlZmluZWQ7CnZhciBjdXN0b21TY2hlZHVsZXJGbiA9IHVuZGVmaW5lZDsKCnZhciBhc2FwID0gZnVuY3Rpb24gYXNhcChjYWxsYmFjaywgYXJnKSB7CiAgcXVldWVbbGVuXSA9IGNhbGxiYWNrOwogIHF1ZXVlW2xlbiArIDFdID0gYXJnOwogIGxlbiArPSAyOwogIGlmIChsZW4gPT09IDIpIHsKICAgIC8vIElmIGxlbiBpcyAyLCB0aGF0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byBzY2hlZHVsZSBhbiBhc3luYyBmbHVzaC4KICAgIC8vIElmIGFkZGl0aW9uYWwgY2FsbGJhY2tzIGFyZSBxdWV1ZWQgYmVmb3JlIHRoZSBxdWV1ZSBpcyBmbHVzaGVkLCB0aGV5CiAgICAvLyB3aWxsIGJlIHByb2Nlc3NlZCBieSB0aGlzIGZsdXNoIHRoYXQgd2UgYXJlIHNjaGVkdWxpbmcuCiAgICBpZiAoY3VzdG9tU2NoZWR1bGVyRm4pIHsKICAgICAgY3VzdG9tU2NoZWR1bGVyRm4oZmx1c2gpOwogICAgfSBlbHNlIHsKICAgICAgc2NoZWR1bGVGbHVzaCgpOwogICAgfQogIH0KfTsKCmZ1bmN0aW9uIHNldFNjaGVkdWxlcihzY2hlZHVsZUZuKSB7CiAgY3VzdG9tU2NoZWR1bGVyRm4gPSBzY2hlZHVsZUZuOwp9CgpmdW5jdGlvbiBzZXRBc2FwKGFzYXBGbikgewogIGFzYXAgPSBhc2FwRm47Cn0KCnZhciBicm93c2VyV2luZG93ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB1bmRlZmluZWQ7CnZhciBicm93c2VyR2xvYmFsID0gYnJvd3NlcldpbmRvdyB8fCB7fTsKdmFyIEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyID0gYnJvd3Nlckdsb2JhbC5NdXRhdGlvbk9ic2VydmVyIHx8IGJyb3dzZXJHbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjsKdmFyIGlzTm9kZSA9IHR5cGVvZiBzZWxmID09PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgKHt9KS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXSc7CgovLyB0ZXN0IGZvciB3ZWIgd29ya2VyIGJ1dCBub3QgaW4gSUUxMAp2YXIgaXNXb3JrZXIgPSB0eXBlb2YgVWludDhDbGFtcGVkQXJyYXkgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBpbXBvcnRTY3JpcHRzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnOwoKLy8gbm9kZQpmdW5jdGlvbiB1c2VOZXh0VGljaygpIHsKICAvLyBub2RlIHZlcnNpb24gMC4xMC54IGRpc3BsYXlzIGEgZGVwcmVjYXRpb24gd2FybmluZyB3aGVuIG5leHRUaWNrIGlzIHVzZWQgcmVjdXJzaXZlbHkKICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2N1am9qcy93aGVuL2lzc3Vlcy80MTAgZm9yIGRldGFpbHMKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHByb2Nlc3MubmV4dFRpY2soZmx1c2gpOwogIH07Cn0KCi8vIHZlcnR4CmZ1bmN0aW9uIHVzZVZlcnR4VGltZXIoKSB7CiAgaWYgKHR5cGVvZiB2ZXJ0eE5leHQgIT09ICd1bmRlZmluZWQnKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2ZXJ0eE5leHQoZmx1c2gpOwogICAgfTsKICB9CgogIHJldHVybiB1c2VTZXRUaW1lb3V0KCk7Cn0KCmZ1bmN0aW9uIHVzZU11dGF0aW9uT2JzZXJ2ZXIoKSB7CiAgdmFyIGl0ZXJhdGlvbnMgPSAwOwogIHZhciBvYnNlcnZlciA9IG5ldyBCcm93c2VyTXV0YXRpb25PYnNlcnZlcihmbHVzaCk7CiAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7CiAgb2JzZXJ2ZXIub2JzZXJ2ZShub2RlLCB7IGNoYXJhY3RlckRhdGE6IHRydWUgfSk7CgogIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICBub2RlLmRhdGEgPSBpdGVyYXRpb25zID0gKytpdGVyYXRpb25zICUgMjsKICB9Owp9CgovLyB3ZWIgd29ya2VyCmZ1bmN0aW9uIHVzZU1lc3NhZ2VDaGFubmVsKCkgewogIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7CiAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmbHVzaDsKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoMCk7CiAgfTsKfQoKZnVuY3Rpb24gdXNlU2V0VGltZW91dCgpIHsKICAvLyBTdG9yZSBzZXRUaW1lb3V0IHJlZmVyZW5jZSBzbyBlczYtcHJvbWlzZSB3aWxsIGJlIHVuYWZmZWN0ZWQgYnkKICAvLyBvdGhlciBjb2RlIG1vZGlmeWluZyBzZXRUaW1lb3V0IChsaWtlIHNpbm9uLnVzZUZha2VUaW1lcnMoKSkKICB2YXIgZ2xvYmFsU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7CiAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBnbG9iYWxTZXRUaW1lb3V0KGZsdXNoLCAxKTsKICB9Owp9Cgp2YXIgcXVldWUgPSBuZXcgQXJyYXkoMTAwMCk7CmZ1bmN0aW9uIGZsdXNoKCkgewogIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDIpIHsKICAgIHZhciBjYWxsYmFjayA9IHF1ZXVlW2ldOwogICAgdmFyIGFyZyA9IHF1ZXVlW2kgKyAxXTsKCiAgICBjYWxsYmFjayhhcmcpOwoKICAgIHF1ZXVlW2ldID0gdW5kZWZpbmVkOwogICAgcXVldWVbaSArIDFdID0gdW5kZWZpbmVkOwogIH0KCiAgbGVuID0gMDsKfQoKZnVuY3Rpb24gYXR0ZW1wdFZlcnR4KCkgewogIHRyeSB7CiAgICB2YXIgciA9IHJlcXVpcmU7CiAgICB2YXIgdmVydHggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpOwogICAgdmVydHhOZXh0ID0gdmVydHgucnVuT25Mb29wIHx8IHZlcnR4LnJ1bk9uQ29udGV4dDsKICAgIHJldHVybiB1c2VWZXJ0eFRpbWVyKCk7CiAgfSBjYXRjaCAoZSkgewogICAgcmV0dXJuIHVzZVNldFRpbWVvdXQoKTsKICB9Cn0KCnZhciBzY2hlZHVsZUZsdXNoID0gdW5kZWZpbmVkOwovLyBEZWNpZGUgd2hhdCBhc3luYyBtZXRob2QgdG8gdXNlIHRvIHRyaWdnZXJpbmcgcHJvY2Vzc2luZyBvZiBxdWV1ZWQgY2FsbGJhY2tzOgppZiAoaXNOb2RlKSB7CiAgc2NoZWR1bGVGbHVzaCA9IHVzZU5leHRUaWNrKCk7Cn0gZWxzZSBpZiAoQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIpIHsKICBzY2hlZHVsZUZsdXNoID0gdXNlTXV0YXRpb25PYnNlcnZlcigpOwp9IGVsc2UgaWYgKGlzV29ya2VyKSB7CiAgc2NoZWR1bGVGbHVzaCA9IHVzZU1lc3NhZ2VDaGFubmVsKCk7Cn0gZWxzZSBpZiAoYnJvd3NlcldpbmRvdyA9PT0gdW5kZWZpbmVkICYmICJmdW5jdGlvbiIgPT09ICdmdW5jdGlvbicpIHsKICBzY2hlZHVsZUZsdXNoID0gYXR0ZW1wdFZlcnR4KCk7Cn0gZWxzZSB7CiAgc2NoZWR1bGVGbHVzaCA9IHVzZVNldFRpbWVvdXQoKTsKfQoKZnVuY3Rpb24gdGhlbihvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikgewogIHZhciBfYXJndW1lbnRzID0gYXJndW1lbnRzOwoKICB2YXIgcGFyZW50ID0gdGhpczsKCiAgdmFyIGNoaWxkID0gbmV3IHRoaXMuY29uc3RydWN0b3Iobm9vcCk7CgogIGlmIChjaGlsZFtQUk9NSVNFX0lEXSA9PT0gdW5kZWZpbmVkKSB7CiAgICBtYWtlUHJvbWlzZShjaGlsZCk7CiAgfQoKICB2YXIgX3N0YXRlID0gcGFyZW50Ll9zdGF0ZTsKCiAgaWYgKF9zdGF0ZSkgewogICAgKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGNhbGxiYWNrID0gX2FyZ3VtZW50c1tfc3RhdGUgLSAxXTsKICAgICAgYXNhcChmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIGludm9rZUNhbGxiYWNrKF9zdGF0ZSwgY2hpbGQsIGNhbGxiYWNrLCBwYXJlbnQuX3Jlc3VsdCk7CiAgICAgIH0pOwogICAgfSkoKTsKICB9IGVsc2UgewogICAgc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKTsKICB9CgogIHJldHVybiBjaGlsZDsKfQoKLyoqCiAgYFByb21pc2UucmVzb2x2ZWAgcmV0dXJucyBhIHByb21pc2UgdGhhdCB3aWxsIGJlY29tZSByZXNvbHZlZCB3aXRoIHRoZQogIHBhc3NlZCBgdmFsdWVgLiBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6CgogIGBgYGphdmFzY3JpcHQKICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7CiAgICByZXNvbHZlKDEpOwogIH0pOwoKICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpewogICAgLy8gdmFsdWUgPT09IDEKICB9KTsKICBgYGAKCiAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOgoKICBgYGBqYXZhc2NyaXB0CiAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoMSk7CgogIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7CiAgICAvLyB2YWx1ZSA9PT0gMQogIH0pOwogIGBgYAoKICBAbWV0aG9kIHJlc29sdmUKICBAc3RhdGljCiAgQHBhcmFtIHtBbnl9IHZhbHVlIHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZXNvbHZlZCB3aXRoCiAgVXNlZnVsIGZvciB0b29saW5nLgogIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB0aGF0IHdpbGwgYmVjb21lIGZ1bGZpbGxlZCB3aXRoIHRoZSBnaXZlbgogIGB2YWx1ZWAKKi8KZnVuY3Rpb24gcmVzb2x2ZSQxKG9iamVjdCkgewogIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovCiAgdmFyIENvbnN0cnVjdG9yID0gdGhpczsKCiAgaWYgKG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJiBvYmplY3QuY29uc3RydWN0b3IgPT09IENvbnN0cnVjdG9yKSB7CiAgICByZXR1cm4gb2JqZWN0OwogIH0KCiAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7CiAgcmVzb2x2ZShwcm9taXNlLCBvYmplY3QpOwogIHJldHVybiBwcm9taXNlOwp9Cgp2YXIgUFJPTUlTRV9JRCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygxNik7CgpmdW5jdGlvbiBub29wKCkge30KCnZhciBQRU5ESU5HID0gdm9pZCAwOwp2YXIgRlVMRklMTEVEID0gMTsKdmFyIFJFSkVDVEVEID0gMjsKCnZhciBHRVRfVEhFTl9FUlJPUiA9IG5ldyBFcnJvck9iamVjdCgpOwoKZnVuY3Rpb24gc2VsZkZ1bGZpbGxtZW50KCkgewogIHJldHVybiBuZXcgVHlwZUVycm9yKCJZb3UgY2Fubm90IHJlc29sdmUgYSBwcm9taXNlIHdpdGggaXRzZWxmIik7Cn0KCmZ1bmN0aW9uIGNhbm5vdFJldHVybk93bigpIHsKICByZXR1cm4gbmV3IFR5cGVFcnJvcignQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJuIHRoYXQgc2FtZSBwcm9taXNlLicpOwp9CgpmdW5jdGlvbiBnZXRUaGVuKHByb21pc2UpIHsKICB0cnkgewogICAgcmV0dXJuIHByb21pc2UudGhlbjsKICB9IGNhdGNoIChlcnJvcikgewogICAgR0VUX1RIRU5fRVJST1IuZXJyb3IgPSBlcnJvcjsKICAgIHJldHVybiBHRVRfVEhFTl9FUlJPUjsKICB9Cn0KCmZ1bmN0aW9uIHRyeVRoZW4odGhlbiQkMSwgdmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcikgewogIHRyeSB7CiAgICB0aGVuJCQxLmNhbGwodmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcik7CiAgfSBjYXRjaCAoZSkgewogICAgcmV0dXJuIGU7CiAgfQp9CgpmdW5jdGlvbiBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUsIHRoZW4kJDEpIHsKICBhc2FwKGZ1bmN0aW9uIChwcm9taXNlKSB7CiAgICB2YXIgc2VhbGVkID0gZmFsc2U7CiAgICB2YXIgZXJyb3IgPSB0cnlUaGVuKHRoZW4kJDEsIHRoZW5hYmxlLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgaWYgKHNlYWxlZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBzZWFsZWQgPSB0cnVlOwogICAgICBpZiAodGhlbmFibGUgIT09IHZhbHVlKSB7CiAgICAgICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7CiAgICAgIH0KICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgaWYgKHNlYWxlZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBzZWFsZWQgPSB0cnVlOwoKICAgICAgcmVqZWN0KHByb21pc2UsIHJlYXNvbik7CiAgICB9LCAnU2V0dGxlOiAnICsgKHByb21pc2UuX2xhYmVsIHx8ICcgdW5rbm93biBwcm9taXNlJykpOwoKICAgIGlmICghc2VhbGVkICYmIGVycm9yKSB7CiAgICAgIHNlYWxlZCA9IHRydWU7CiAgICAgIHJlamVjdChwcm9taXNlLCBlcnJvcik7CiAgICB9CiAgfSwgcHJvbWlzZSk7Cn0KCmZ1bmN0aW9uIGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlKSB7CiAgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gRlVMRklMTEVEKSB7CiAgICBmdWxmaWxsKHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpOwogIH0gZWxzZSBpZiAodGhlbmFibGUuX3N0YXRlID09PSBSRUpFQ1RFRCkgewogICAgcmVqZWN0KHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpOwogIH0gZWxzZSB7CiAgICBzdWJzY3JpYmUodGhlbmFibGUsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIHJldHVybiByZXNvbHZlKHByb21pc2UsIHZhbHVlKTsKICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgcmV0dXJuIHJlamVjdChwcm9taXNlLCByZWFzb24pOwogICAgfSk7CiAgfQp9CgpmdW5jdGlvbiBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4kJDEpIHsKICBpZiAobWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3RvciA9PT0gcHJvbWlzZS5jb25zdHJ1Y3RvciAmJiB0aGVuJCQxID09PSB0aGVuICYmIG1heWJlVGhlbmFibGUuY29uc3RydWN0b3IucmVzb2x2ZSA9PT0gcmVzb2x2ZSQxKSB7CiAgICBoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlKTsKICB9IGVsc2UgewogICAgaWYgKHRoZW4kJDEgPT09IEdFVF9USEVOX0VSUk9SKSB7CiAgICAgIHJlamVjdChwcm9taXNlLCBHRVRfVEhFTl9FUlJPUi5lcnJvcik7CiAgICAgIEdFVF9USEVOX0VSUk9SLmVycm9yID0gbnVsbDsKICAgIH0gZWxzZSBpZiAodGhlbiQkMSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7CiAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24odGhlbiQkMSkpIHsKICAgICAgaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4kJDEpOwogICAgfSBlbHNlIHsKICAgICAgZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTsKICAgIH0KICB9Cn0KCmZ1bmN0aW9uIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpIHsKICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHsKICAgIHJlamVjdChwcm9taXNlLCBzZWxmRnVsZmlsbG1lbnQoKSk7CiAgfSBlbHNlIGlmIChvYmplY3RPckZ1bmN0aW9uKHZhbHVlKSkgewogICAgaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCB2YWx1ZSwgZ2V0VGhlbih2YWx1ZSkpOwogIH0gZWxzZSB7CiAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTsKICB9Cn0KCmZ1bmN0aW9uIHB1Ymxpc2hSZWplY3Rpb24ocHJvbWlzZSkgewogIGlmIChwcm9taXNlLl9vbmVycm9yKSB7CiAgICBwcm9taXNlLl9vbmVycm9yKHByb21pc2UuX3Jlc3VsdCk7CiAgfQoKICBwdWJsaXNoKHByb21pc2UpOwp9CgpmdW5jdGlvbiBmdWxmaWxsKHByb21pc2UsIHZhbHVlKSB7CiAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7CiAgICByZXR1cm47CiAgfQoKICBwcm9taXNlLl9yZXN1bHQgPSB2YWx1ZTsKICBwcm9taXNlLl9zdGF0ZSA9IEZVTEZJTExFRDsKCiAgaWYgKHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCAhPT0gMCkgewogICAgYXNhcChwdWJsaXNoLCBwcm9taXNlKTsKICB9Cn0KCmZ1bmN0aW9uIHJlamVjdChwcm9taXNlLCByZWFzb24pIHsKICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHsKICAgIHJldHVybjsKICB9CiAgcHJvbWlzZS5fc3RhdGUgPSBSRUpFQ1RFRDsKICBwcm9taXNlLl9yZXN1bHQgPSByZWFzb247CgogIGFzYXAocHVibGlzaFJlamVjdGlvbiwgcHJvbWlzZSk7Cn0KCmZ1bmN0aW9uIHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikgewogIHZhciBfc3Vic2NyaWJlcnMgPSBwYXJlbnQuX3N1YnNjcmliZXJzOwogIHZhciBsZW5ndGggPSBfc3Vic2NyaWJlcnMubGVuZ3RoOwoKICBwYXJlbnQuX29uZXJyb3IgPSBudWxsOwoKICBfc3Vic2NyaWJlcnNbbGVuZ3RoXSA9IGNoaWxkOwogIF9zdWJzY3JpYmVyc1tsZW5ndGggKyBGVUxGSUxMRURdID0gb25GdWxmaWxsbWVudDsKICBfc3Vic2NyaWJlcnNbbGVuZ3RoICsgUkVKRUNURURdID0gb25SZWplY3Rpb247CgogIGlmIChsZW5ndGggPT09IDAgJiYgcGFyZW50Ll9zdGF0ZSkgewogICAgYXNhcChwdWJsaXNoLCBwYXJlbnQpOwogIH0KfQoKZnVuY3Rpb24gcHVibGlzaChwcm9taXNlKSB7CiAgdmFyIHN1YnNjcmliZXJzID0gcHJvbWlzZS5fc3Vic2NyaWJlcnM7CiAgdmFyIHNldHRsZWQgPSBwcm9taXNlLl9zdGF0ZTsKCiAgaWYgKHN1YnNjcmliZXJzLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuOwogIH0KCiAgdmFyIGNoaWxkID0gdW5kZWZpbmVkLAogICAgICBjYWxsYmFjayA9IHVuZGVmaW5lZCwKICAgICAgZGV0YWlsID0gcHJvbWlzZS5fcmVzdWx0OwoKICBmb3IgKHZhciBpID0gMDsgaSA8IHN1YnNjcmliZXJzLmxlbmd0aDsgaSArPSAzKSB7CiAgICBjaGlsZCA9IHN1YnNjcmliZXJzW2ldOwogICAgY2FsbGJhY2sgPSBzdWJzY3JpYmVyc1tpICsgc2V0dGxlZF07CgogICAgaWYgKGNoaWxkKSB7CiAgICAgIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIGNoaWxkLCBjYWxsYmFjaywgZGV0YWlsKTsKICAgIH0gZWxzZSB7CiAgICAgIGNhbGxiYWNrKGRldGFpbCk7CiAgICB9CiAgfQoKICBwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggPSAwOwp9CgpmdW5jdGlvbiBFcnJvck9iamVjdCgpIHsKICB0aGlzLmVycm9yID0gbnVsbDsKfQoKdmFyIFRSWV9DQVRDSF9FUlJPUiA9IG5ldyBFcnJvck9iamVjdCgpOwoKZnVuY3Rpb24gdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCkgewogIHRyeSB7CiAgICByZXR1cm4gY2FsbGJhY2soZGV0YWlsKTsKICB9IGNhdGNoIChlKSB7CiAgICBUUllfQ0FUQ0hfRVJST1IuZXJyb3IgPSBlOwogICAgcmV0dXJuIFRSWV9DQVRDSF9FUlJPUjsKICB9Cn0KCmZ1bmN0aW9uIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIHByb21pc2UsIGNhbGxiYWNrLCBkZXRhaWwpIHsKICB2YXIgaGFzQ2FsbGJhY2sgPSBpc0Z1bmN0aW9uKGNhbGxiYWNrKSwKICAgICAgdmFsdWUgPSB1bmRlZmluZWQsCiAgICAgIGVycm9yID0gdW5kZWZpbmVkLAogICAgICBzdWNjZWVkZWQgPSB1bmRlZmluZWQsCiAgICAgIGZhaWxlZCA9IHVuZGVmaW5lZDsKCiAgaWYgKGhhc0NhbGxiYWNrKSB7CiAgICB2YWx1ZSA9IHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpOwoKICAgIGlmICh2YWx1ZSA9PT0gVFJZX0NBVENIX0VSUk9SKSB7CiAgICAgIGZhaWxlZCA9IHRydWU7CiAgICAgIGVycm9yID0gdmFsdWUuZXJyb3I7CiAgICAgIHZhbHVlLmVycm9yID0gbnVsbDsKICAgIH0gZWxzZSB7CiAgICAgIHN1Y2NlZWRlZCA9IHRydWU7CiAgICB9CgogICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7CiAgICAgIHJlamVjdChwcm9taXNlLCBjYW5ub3RSZXR1cm5Pd24oKSk7CiAgICAgIHJldHVybjsKICAgIH0KICB9IGVsc2UgewogICAgdmFsdWUgPSBkZXRhaWw7CiAgICBzdWNjZWVkZWQgPSB0cnVlOwogIH0KCiAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7CiAgICAvLyBub29wCiAgfSBlbHNlIGlmIChoYXNDYWxsYmFjayAmJiBzdWNjZWVkZWQpIHsKICAgICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7CiAgICB9IGVsc2UgaWYgKGZhaWxlZCkgewogICAgICByZWplY3QocHJvbWlzZSwgZXJyb3IpOwogICAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBGVUxGSUxMRUQpIHsKICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7CiAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IFJFSkVDVEVEKSB7CiAgICAgIHJlamVjdChwcm9taXNlLCB2YWx1ZSk7CiAgICB9Cn0KCmZ1bmN0aW9uIGluaXRpYWxpemVQcm9taXNlKHByb21pc2UsIHJlc29sdmVyKSB7CiAgdHJ5IHsKICAgIHJlc29sdmVyKGZ1bmN0aW9uIHJlc29sdmVQcm9taXNlKHZhbHVlKSB7CiAgICAgIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpOwogICAgfSwgZnVuY3Rpb24gcmVqZWN0UHJvbWlzZShyZWFzb24pIHsKICAgICAgcmVqZWN0KHByb21pc2UsIHJlYXNvbik7CiAgICB9KTsKICB9IGNhdGNoIChlKSB7CiAgICByZWplY3QocHJvbWlzZSwgZSk7CiAgfQp9Cgp2YXIgaWQgPSAwOwpmdW5jdGlvbiBuZXh0SWQoKSB7CiAgcmV0dXJuIGlkKys7Cn0KCmZ1bmN0aW9uIG1ha2VQcm9taXNlKHByb21pc2UpIHsKICBwcm9taXNlW1BST01JU0VfSURdID0gaWQrKzsKICBwcm9taXNlLl9zdGF0ZSA9IHVuZGVmaW5lZDsKICBwcm9taXNlLl9yZXN1bHQgPSB1bmRlZmluZWQ7CiAgcHJvbWlzZS5fc3Vic2NyaWJlcnMgPSBbXTsKfQoKZnVuY3Rpb24gRW51bWVyYXRvciQxKENvbnN0cnVjdG9yLCBpbnB1dCkgewogIHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3IgPSBDb25zdHJ1Y3RvcjsKICB0aGlzLnByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7CgogIGlmICghdGhpcy5wcm9taXNlW1BST01JU0VfSURdKSB7CiAgICBtYWtlUHJvbWlzZSh0aGlzLnByb21pc2UpOwogIH0KCiAgaWYgKGlzQXJyYXkoaW5wdXQpKSB7CiAgICB0aGlzLmxlbmd0aCA9IGlucHV0Lmxlbmd0aDsKICAgIHRoaXMuX3JlbWFpbmluZyA9IGlucHV0Lmxlbmd0aDsKCiAgICB0aGlzLl9yZXN1bHQgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpOwoKICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgewogICAgICBmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMubGVuZ3RoID0gdGhpcy5sZW5ndGggfHwgMDsKICAgICAgdGhpcy5fZW51bWVyYXRlKGlucHV0KTsKICAgICAgaWYgKHRoaXMuX3JlbWFpbmluZyA9PT0gMCkgewogICAgICAgIGZ1bGZpbGwodGhpcy5wcm9taXNlLCB0aGlzLl9yZXN1bHQpOwogICAgICB9CiAgICB9CiAgfSBlbHNlIHsKICAgIHJlamVjdCh0aGlzLnByb21pc2UsIHZhbGlkYXRpb25FcnJvcigpKTsKICB9Cn0KCmZ1bmN0aW9uIHZhbGlkYXRpb25FcnJvcigpIHsKICByZXR1cm4gbmV3IEVycm9yKCdBcnJheSBNZXRob2RzIG11c3QgYmUgcHJvdmlkZWQgYW4gQXJyYXknKTsKfQoKRW51bWVyYXRvciQxLnByb3RvdHlwZS5fZW51bWVyYXRlID0gZnVuY3Rpb24gKGlucHV0KSB7CiAgZm9yICh2YXIgaSA9IDA7IHRoaXMuX3N0YXRlID09PSBQRU5ESU5HICYmIGkgPCBpbnB1dC5sZW5ndGg7IGkrKykgewogICAgdGhpcy5fZWFjaEVudHJ5KGlucHV0W2ldLCBpKTsKICB9Cn07CgpFbnVtZXJhdG9yJDEucHJvdG90eXBlLl9lYWNoRW50cnkgPSBmdW5jdGlvbiAoZW50cnksIGkpIHsKICB2YXIgYyA9IHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3I7CiAgdmFyIHJlc29sdmUkJDEgPSBjLnJlc29sdmU7CgogIGlmIChyZXNvbHZlJCQxID09PSByZXNvbHZlJDEpIHsKICAgIHZhciBfdGhlbiA9IGdldFRoZW4oZW50cnkpOwoKICAgIGlmIChfdGhlbiA9PT0gdGhlbiAmJiBlbnRyeS5fc3RhdGUgIT09IFBFTkRJTkcpIHsKICAgICAgdGhpcy5fc2V0dGxlZEF0KGVudHJ5Ll9zdGF0ZSwgaSwgZW50cnkuX3Jlc3VsdCk7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBfdGhlbiAhPT0gJ2Z1bmN0aW9uJykgewogICAgICB0aGlzLl9yZW1haW5pbmctLTsKICAgICAgdGhpcy5fcmVzdWx0W2ldID0gZW50cnk7CiAgICB9IGVsc2UgaWYgKGMgPT09IFByb21pc2UkMikgewogICAgICB2YXIgcHJvbWlzZSA9IG5ldyBjKG5vb3ApOwogICAgICBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIGVudHJ5LCBfdGhlbik7CiAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChwcm9taXNlLCBpKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChuZXcgYyhmdW5jdGlvbiAocmVzb2x2ZSQkMSkgewogICAgICAgIHJldHVybiByZXNvbHZlJCQxKGVudHJ5KTsKICAgICAgfSksIGkpOwogICAgfQogIH0gZWxzZSB7CiAgICB0aGlzLl93aWxsU2V0dGxlQXQocmVzb2x2ZSQkMShlbnRyeSksIGkpOwogIH0KfTsKCkVudW1lcmF0b3IkMS5wcm90b3R5cGUuX3NldHRsZWRBdCA9IGZ1bmN0aW9uIChzdGF0ZSwgaSwgdmFsdWUpIHsKICB2YXIgcHJvbWlzZSA9IHRoaXMucHJvbWlzZTsKCiAgaWYgKHByb21pc2UuX3N0YXRlID09PSBQRU5ESU5HKSB7CiAgICB0aGlzLl9yZW1haW5pbmctLTsKCiAgICBpZiAoc3RhdGUgPT09IFJFSkVDVEVEKSB7CiAgICAgIHJlamVjdChwcm9taXNlLCB2YWx1ZSk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLl9yZXN1bHRbaV0gPSB2YWx1ZTsKICAgIH0KICB9CgogIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHsKICAgIGZ1bGZpbGwocHJvbWlzZSwgdGhpcy5fcmVzdWx0KTsKICB9Cn07CgpFbnVtZXJhdG9yJDEucHJvdG90eXBlLl93aWxsU2V0dGxlQXQgPSBmdW5jdGlvbiAocHJvbWlzZSwgaSkgewogIHZhciBlbnVtZXJhdG9yID0gdGhpczsKCiAgc3Vic2NyaWJlKHByb21pc2UsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICByZXR1cm4gZW51bWVyYXRvci5fc2V0dGxlZEF0KEZVTEZJTExFRCwgaSwgdmFsdWUpOwogIH0sIGZ1bmN0aW9uIChyZWFzb24pIHsKICAgIHJldHVybiBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoUkVKRUNURUQsIGksIHJlYXNvbik7CiAgfSk7Cn07CgovKioKICBgUHJvbWlzZS5hbGxgIGFjY2VwdHMgYW4gYXJyYXkgb2YgcHJvbWlzZXMsIGFuZCByZXR1cm5zIGEgbmV3IHByb21pc2Ugd2hpY2gKICBpcyBmdWxmaWxsZWQgd2l0aCBhbiBhcnJheSBvZiBmdWxmaWxsbWVudCB2YWx1ZXMgZm9yIHRoZSBwYXNzZWQgcHJvbWlzZXMsIG9yCiAgcmVqZWN0ZWQgd2l0aCB0aGUgcmVhc29uIG9mIHRoZSBmaXJzdCBwYXNzZWQgcHJvbWlzZSB0byBiZSByZWplY3RlZC4gSXQgY2FzdHMgYWxsCiAgZWxlbWVudHMgb2YgdGhlIHBhc3NlZCBpdGVyYWJsZSB0byBwcm9taXNlcyBhcyBpdCBydW5zIHRoaXMgYWxnb3JpdGhtLgoKICBFeGFtcGxlOgoKICBgYGBqYXZhc2NyaXB0CiAgbGV0IHByb21pc2UxID0gcmVzb2x2ZSgxKTsKICBsZXQgcHJvbWlzZTIgPSByZXNvbHZlKDIpOwogIGxldCBwcm9taXNlMyA9IHJlc29sdmUoMyk7CiAgbGV0IHByb21pc2VzID0gWyBwcm9taXNlMSwgcHJvbWlzZTIsIHByb21pc2UzIF07CgogIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKGFycmF5KXsKICAgIC8vIFRoZSBhcnJheSBoZXJlIHdvdWxkIGJlIFsgMSwgMiwgMyBdOwogIH0pOwogIGBgYAoKICBJZiBhbnkgb2YgdGhlIGBwcm9taXNlc2AgZ2l2ZW4gdG8gYGFsbGAgYXJlIHJlamVjdGVkLCB0aGUgZmlyc3QgcHJvbWlzZQogIHRoYXQgaXMgcmVqZWN0ZWQgd2lsbCBiZSBnaXZlbiBhcyBhbiBhcmd1bWVudCB0byB0aGUgcmV0dXJuZWQgcHJvbWlzZXMncwogIHJlamVjdGlvbiBoYW5kbGVyLiBGb3IgZXhhbXBsZToKCiAgRXhhbXBsZToKCiAgYGBgamF2YXNjcmlwdAogIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7CiAgbGV0IHByb21pc2UyID0gcmVqZWN0KG5ldyBFcnJvcigiMiIpKTsKICBsZXQgcHJvbWlzZTMgPSByZWplY3QobmV3IEVycm9yKCIzIikpOwogIGxldCBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdOwoKICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7CiAgICAvLyBDb2RlIGhlcmUgbmV2ZXIgcnVucyBiZWNhdXNlIHRoZXJlIGFyZSByZWplY3RlZCBwcm9taXNlcyEKICB9LCBmdW5jdGlvbihlcnJvcikgewogICAgLy8gZXJyb3IubWVzc2FnZSA9PT0gIjIiCiAgfSk7CiAgYGBgCgogIEBtZXRob2QgYWxsCiAgQHN0YXRpYwogIEBwYXJhbSB7QXJyYXl9IGVudHJpZXMgYXJyYXkgb2YgcHJvbWlzZXMKICBAcGFyYW0ge1N0cmluZ30gbGFiZWwgb3B0aW9uYWwgc3RyaW5nIGZvciBsYWJlbGluZyB0aGUgcHJvbWlzZS4KICBVc2VmdWwgZm9yIHRvb2xpbmcuCiAgQHJldHVybiB7UHJvbWlzZX0gcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aGVuIGFsbCBgcHJvbWlzZXNgIGhhdmUgYmVlbgogIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQgaWYgYW55IG9mIHRoZW0gYmVjb21lIHJlamVjdGVkLgogIEBzdGF0aWMKKi8KZnVuY3Rpb24gYWxsJDEoZW50cmllcykgewogIHJldHVybiBuZXcgRW51bWVyYXRvciQxKHRoaXMsIGVudHJpZXMpLnByb21pc2U7Cn0KCi8qKgogIGBQcm9taXNlLnJhY2VgIHJldHVybnMgYSBuZXcgcHJvbWlzZSB3aGljaCBpcyBzZXR0bGVkIGluIHRoZSBzYW1lIHdheSBhcyB0aGUKICBmaXJzdCBwYXNzZWQgcHJvbWlzZSB0byBzZXR0bGUuCgogIEV4YW1wbGU6CgogIGBgYGphdmFzY3JpcHQKICBsZXQgcHJvbWlzZTEgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpewogICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICByZXNvbHZlKCdwcm9taXNlIDEnKTsKICAgIH0sIDIwMCk7CiAgfSk7CgogIGxldCBwcm9taXNlMiA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7CiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMicpOwogICAgfSwgMTAwKTsKICB9KTsKCiAgUHJvbWlzZS5yYWNlKFtwcm9taXNlMSwgcHJvbWlzZTJdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7CiAgICAvLyByZXN1bHQgPT09ICdwcm9taXNlIDInIGJlY2F1c2UgaXQgd2FzIHJlc29sdmVkIGJlZm9yZSBwcm9taXNlMQogICAgLy8gd2FzIHJlc29sdmVkLgogIH0pOwogIGBgYAoKICBgUHJvbWlzZS5yYWNlYCBpcyBkZXRlcm1pbmlzdGljIGluIHRoYXQgb25seSB0aGUgc3RhdGUgb2YgdGhlIGZpcnN0CiAgc2V0dGxlZCBwcm9taXNlIG1hdHRlcnMuIEZvciBleGFtcGxlLCBldmVuIGlmIG90aGVyIHByb21pc2VzIGdpdmVuIHRvIHRoZQogIGBwcm9taXNlc2AgYXJyYXkgYXJndW1lbnQgYXJlIHJlc29sdmVkLCBidXQgdGhlIGZpcnN0IHNldHRsZWQgcHJvbWlzZSBoYXMKICBiZWNvbWUgcmVqZWN0ZWQgYmVmb3JlIHRoZSBvdGhlciBwcm9taXNlcyBiZWNhbWUgZnVsZmlsbGVkLCB0aGUgcmV0dXJuZWQKICBwcm9taXNlIHdpbGwgYmVjb21lIHJlamVjdGVkOgoKICBgYGBqYXZhc2NyaXB0CiAgbGV0IHByb21pc2UxID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgcmVzb2x2ZSgncHJvbWlzZSAxJyk7CiAgICB9LCAyMDApOwogIH0pOwoKICBsZXQgcHJvbWlzZTIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpewogICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICByZWplY3QobmV3IEVycm9yKCdwcm9taXNlIDInKSk7CiAgICB9LCAxMDApOwogIH0pOwoKICBQcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXsKICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zCiAgfSwgZnVuY3Rpb24ocmVhc29uKXsKICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAncHJvbWlzZSAyJyBiZWNhdXNlIHByb21pc2UgMiBiZWNhbWUgcmVqZWN0ZWQgYmVmb3JlCiAgICAvLyBwcm9taXNlIDEgYmVjYW1lIGZ1bGZpbGxlZAogIH0pOwogIGBgYAoKICBBbiBleGFtcGxlIHJlYWwtd29ybGQgdXNlIGNhc2UgaXMgaW1wbGVtZW50aW5nIHRpbWVvdXRzOgoKICBgYGBqYXZhc2NyaXB0CiAgUHJvbWlzZS5yYWNlKFthamF4KCdmb28uanNvbicpLCB0aW1lb3V0KDUwMDApXSkKICBgYGAKCiAgQG1ldGhvZCByYWNlCiAgQHN0YXRpYwogIEBwYXJhbSB7QXJyYXl9IHByb21pc2VzIGFycmF5IG9mIHByb21pc2VzIHRvIG9ic2VydmUKICBVc2VmdWwgZm9yIHRvb2xpbmcuCiAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHdoaWNoIHNldHRsZXMgaW4gdGhlIHNhbWUgd2F5IGFzIHRoZSBmaXJzdCBwYXNzZWQKICBwcm9taXNlIHRvIHNldHRsZS4KKi8KZnVuY3Rpb24gcmFjZSQxKGVudHJpZXMpIHsKICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqLwogIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7CgogIGlmICghaXNBcnJheShlbnRyaWVzKSkgewogICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbiAoXywgcmVqZWN0KSB7CiAgICAgIHJldHVybiByZWplY3QobmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhbiBhcnJheSB0byByYWNlLicpKTsKICAgIH0pOwogIH0gZWxzZSB7CiAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdmFyIGxlbmd0aCA9IGVudHJpZXMubGVuZ3RoOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgQ29uc3RydWN0b3IucmVzb2x2ZShlbnRyaWVzW2ldKS50aGVuKHJlc29sdmUsIHJlamVjdCk7CiAgICAgIH0KICAgIH0pOwogIH0KfQoKLyoqCiAgYFByb21pc2UucmVqZWN0YCByZXR1cm5zIGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIHRoZSBwYXNzZWQgYHJlYXNvbmAuCiAgSXQgaXMgc2hvcnRoYW5kIGZvciB0aGUgZm9sbG93aW5nOgoKICBgYGBqYXZhc2NyaXB0CiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpewogICAgcmVqZWN0KG5ldyBFcnJvcignV0hPT1BTJykpOwogIH0pOwoKICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpewogICAgLy8gQ29kZSBoZXJlIGRvZXNuJ3QgcnVuIGJlY2F1c2UgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQhCiAgfSwgZnVuY3Rpb24ocmVhc29uKXsKICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJwogIH0pOwogIGBgYAoKICBJbnN0ZWFkIG9mIHdyaXRpbmcgdGhlIGFib3ZlLCB5b3VyIGNvZGUgbm93IHNpbXBseSBiZWNvbWVzIHRoZSBmb2xsb3dpbmc6CgogIGBgYGphdmFzY3JpcHQKICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignV0hPT1BTJykpOwoKICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpewogICAgLy8gQ29kZSBoZXJlIGRvZXNuJ3QgcnVuIGJlY2F1c2UgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQhCiAgfSwgZnVuY3Rpb24ocmVhc29uKXsKICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJwogIH0pOwogIGBgYAoKICBAbWV0aG9kIHJlamVjdAogIEBzdGF0aWMKICBAcGFyYW0ge0FueX0gcmVhc29uIHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZCB3aXRoLgogIFVzZWZ1bCBmb3IgdG9vbGluZy4KICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0aGUgZ2l2ZW4gYHJlYXNvbmAuCiovCmZ1bmN0aW9uIHJlamVjdCQxKHJlYXNvbikgewogIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovCiAgdmFyIENvbnN0cnVjdG9yID0gdGhpczsKICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTsKICByZWplY3QocHJvbWlzZSwgcmVhc29uKTsKICByZXR1cm4gcHJvbWlzZTsKfQoKZnVuY3Rpb24gbmVlZHNSZXNvbHZlcigpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGEgcmVzb2x2ZXIgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBwcm9taXNlIGNvbnN0cnVjdG9yJyk7Cn0KCmZ1bmN0aW9uIG5lZWRzTmV3KCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1Byb21pc2UnOiBQbGVhc2UgdXNlIHRoZSAnbmV3JyBvcGVyYXRvciwgdGhpcyBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLiIpOwp9CgovKioKICBQcm9taXNlIG9iamVjdHMgcmVwcmVzZW50IHRoZSBldmVudHVhbCByZXN1bHQgb2YgYW4gYXN5bmNocm9ub3VzIG9wZXJhdGlvbi4gVGhlCiAgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCwgd2hpY2gKICByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZSByZWFzb24KICB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC4KCiAgVGVybWlub2xvZ3kKICAtLS0tLS0tLS0tLQoKICAtIGBwcm9taXNlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gd2l0aCBhIGB0aGVuYCBtZXRob2Qgd2hvc2UgYmVoYXZpb3IgY29uZm9ybXMgdG8gdGhpcyBzcGVjaWZpY2F0aW9uLgogIC0gYHRoZW5hYmxlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gdGhhdCBkZWZpbmVzIGEgYHRoZW5gIG1ldGhvZC4KICAtIGB2YWx1ZWAgaXMgYW55IGxlZ2FsIEphdmFTY3JpcHQgdmFsdWUgKGluY2x1ZGluZyB1bmRlZmluZWQsIGEgdGhlbmFibGUsIG9yIGEgcHJvbWlzZSkuCiAgLSBgZXhjZXB0aW9uYCBpcyBhIHZhbHVlIHRoYXQgaXMgdGhyb3duIHVzaW5nIHRoZSB0aHJvdyBzdGF0ZW1lbnQuCiAgLSBgcmVhc29uYCBpcyBhIHZhbHVlIHRoYXQgaW5kaWNhdGVzIHdoeSBhIHByb21pc2Ugd2FzIHJlamVjdGVkLgogIC0gYHNldHRsZWRgIHRoZSBmaW5hbCByZXN0aW5nIHN0YXRlIG9mIGEgcHJvbWlzZSwgZnVsZmlsbGVkIG9yIHJlamVjdGVkLgoKICBBIHByb21pc2UgY2FuIGJlIGluIG9uZSBvZiB0aHJlZSBzdGF0ZXM6IHBlbmRpbmcsIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQuCgogIFByb21pc2VzIHRoYXQgYXJlIGZ1bGZpbGxlZCBoYXZlIGEgZnVsZmlsbG1lbnQgdmFsdWUgYW5kIGFyZSBpbiB0aGUgZnVsZmlsbGVkCiAgc3RhdGUuICBQcm9taXNlcyB0aGF0IGFyZSByZWplY3RlZCBoYXZlIGEgcmVqZWN0aW9uIHJlYXNvbiBhbmQgYXJlIGluIHRoZQogIHJlamVjdGVkIHN0YXRlLiAgQSBmdWxmaWxsbWVudCB2YWx1ZSBpcyBuZXZlciBhIHRoZW5hYmxlLgoKICBQcm9taXNlcyBjYW4gYWxzbyBiZSBzYWlkIHRvICpyZXNvbHZlKiBhIHZhbHVlLiAgSWYgdGhpcyB2YWx1ZSBpcyBhbHNvIGEKICBwcm9taXNlLCB0aGVuIHRoZSBvcmlnaW5hbCBwcm9taXNlJ3Mgc2V0dGxlZCBzdGF0ZSB3aWxsIG1hdGNoIHRoZSB2YWx1ZSdzCiAgc2V0dGxlZCBzdGF0ZS4gIFNvIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgcmVqZWN0cyB3aWxsCiAgaXRzZWxmIHJlamVjdCwgYW5kIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgZnVsZmlsbHMgd2lsbAogIGl0c2VsZiBmdWxmaWxsLgoKCiAgQmFzaWMgVXNhZ2U6CiAgLS0tLS0tLS0tLS0tCgogIGBgYGpzCiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsKICAgIC8vIG9uIHN1Y2Nlc3MKICAgIHJlc29sdmUodmFsdWUpOwoKICAgIC8vIG9uIGZhaWx1cmUKICAgIHJlamVjdChyZWFzb24pOwogIH0pOwoKICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpIHsKICAgIC8vIG9uIGZ1bGZpbGxtZW50CiAgfSwgZnVuY3Rpb24ocmVhc29uKSB7CiAgICAvLyBvbiByZWplY3Rpb24KICB9KTsKICBgYGAKCiAgQWR2YW5jZWQgVXNhZ2U6CiAgLS0tLS0tLS0tLS0tLS0tCgogIFByb21pc2VzIHNoaW5lIHdoZW4gYWJzdHJhY3RpbmcgYXdheSBhc3luY2hyb25vdXMgaW50ZXJhY3Rpb25zIHN1Y2ggYXMKICBgWE1MSHR0cFJlcXVlc3Rgcy4KCiAgYGBganMKICBmdW5jdGlvbiBnZXRKU09OKHVybCkgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7CiAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKCiAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpOwogICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gaGFuZGxlcjsKICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJzsKICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7CiAgICAgIHhoci5zZW5kKCk7CgogICAgICBmdW5jdGlvbiBoYW5kbGVyKCkgewogICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IHRoaXMuRE9ORSkgewogICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3BvbnNlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ2dldEpTT046IGAnICsgdXJsICsgJ2AgZmFpbGVkIHdpdGggc3RhdHVzOiBbJyArIHRoaXMuc3RhdHVzICsgJ10nKSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwogICAgfSk7CiAgfQoKICBnZXRKU09OKCcvcG9zdHMuanNvbicpLnRoZW4oZnVuY3Rpb24oanNvbikgewogICAgLy8gb24gZnVsZmlsbG1lbnQKICB9LCBmdW5jdGlvbihyZWFzb24pIHsKICAgIC8vIG9uIHJlamVjdGlvbgogIH0pOwogIGBgYAoKICBVbmxpa2UgY2FsbGJhY2tzLCBwcm9taXNlcyBhcmUgZ3JlYXQgY29tcG9zYWJsZSBwcmltaXRpdmVzLgoKICBgYGBqcwogIFByb21pc2UuYWxsKFsKICAgIGdldEpTT04oJy9wb3N0cycpLAogICAgZ2V0SlNPTignL2NvbW1lbnRzJykKICBdKS50aGVuKGZ1bmN0aW9uKHZhbHVlcyl7CiAgICB2YWx1ZXNbMF0gLy8gPT4gcG9zdHNKU09OCiAgICB2YWx1ZXNbMV0gLy8gPT4gY29tbWVudHNKU09OCgogICAgcmV0dXJuIHZhbHVlczsKICB9KTsKICBgYGAKCiAgQGNsYXNzIFByb21pc2UKICBAcGFyYW0ge2Z1bmN0aW9ufSByZXNvbHZlcgogIFVzZWZ1bCBmb3IgdG9vbGluZy4KICBAY29uc3RydWN0b3IKKi8KZnVuY3Rpb24gUHJvbWlzZSQyKHJlc29sdmVyKSB7CiAgdGhpc1tQUk9NSVNFX0lEXSA9IG5leHRJZCgpOwogIHRoaXMuX3Jlc3VsdCA9IHRoaXMuX3N0YXRlID0gdW5kZWZpbmVkOwogIHRoaXMuX3N1YnNjcmliZXJzID0gW107CgogIGlmIChub29wICE9PSByZXNvbHZlcikgewogICAgdHlwZW9mIHJlc29sdmVyICE9PSAnZnVuY3Rpb24nICYmIG5lZWRzUmVzb2x2ZXIoKTsKICAgIHRoaXMgaW5zdGFuY2VvZiBQcm9taXNlJDIgPyBpbml0aWFsaXplUHJvbWlzZSh0aGlzLCByZXNvbHZlcikgOiBuZWVkc05ldygpOwogIH0KfQoKUHJvbWlzZSQyLmFsbCA9IGFsbCQxOwpQcm9taXNlJDIucmFjZSA9IHJhY2UkMTsKUHJvbWlzZSQyLnJlc29sdmUgPSByZXNvbHZlJDE7ClByb21pc2UkMi5yZWplY3QgPSByZWplY3QkMTsKUHJvbWlzZSQyLl9zZXRTY2hlZHVsZXIgPSBzZXRTY2hlZHVsZXI7ClByb21pc2UkMi5fc2V0QXNhcCA9IHNldEFzYXA7ClByb21pc2UkMi5fYXNhcCA9IGFzYXA7CgpQcm9taXNlJDIucHJvdG90eXBlID0gewogIGNvbnN0cnVjdG9yOiBQcm9taXNlJDIsCgogIC8qKgogICAgVGhlIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsCiAgICB3aGljaCByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZQogICAgcmVhc29uIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLgogIAogICAgYGBganMKICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbih1c2VyKXsKICAgICAgLy8gdXNlciBpcyBhdmFpbGFibGUKICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7CiAgICAgIC8vIHVzZXIgaXMgdW5hdmFpbGFibGUsIGFuZCB5b3UgYXJlIGdpdmVuIHRoZSByZWFzb24gd2h5CiAgICB9KTsKICAgIGBgYAogIAogICAgQ2hhaW5pbmcKICAgIC0tLS0tLS0tCiAgCiAgICBUaGUgcmV0dXJuIHZhbHVlIG9mIGB0aGVuYCBpcyBpdHNlbGYgYSBwcm9taXNlLiAgVGhpcyBzZWNvbmQsICdkb3duc3RyZWFtJwogICAgcHJvbWlzZSBpcyByZXNvbHZlZCB3aXRoIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZpcnN0IHByb21pc2UncyBmdWxmaWxsbWVudAogICAgb3IgcmVqZWN0aW9uIGhhbmRsZXIsIG9yIHJlamVjdGVkIGlmIHRoZSBoYW5kbGVyIHRocm93cyBhbiBleGNlcHRpb24uCiAgCiAgICBgYGBqcwogICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgIHJldHVybiB1c2VyLm5hbWU7CiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgIHJldHVybiAnZGVmYXVsdCBuYW1lJzsKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHVzZXJOYW1lKSB7CiAgICAgIC8vIElmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgdXNlck5hbWVgIHdpbGwgYmUgdGhlIHVzZXIncyBuYW1lLCBvdGhlcndpc2UgaXQKICAgICAgLy8gd2lsbCBiZSBgJ2RlZmF1bHQgbmFtZSdgCiAgICB9KTsKICAKICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jyk7CiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScpOwogICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgLy8gbmV2ZXIgcmVhY2hlZAogICAgfSwgZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAvLyBpZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHJlYXNvbmAgd2lsbCBiZSAnRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknLgogICAgICAvLyBJZiBgZmluZFVzZXJgIHJlamVjdGVkLCBgcmVhc29uYCB3aWxsIGJlICdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jy4KICAgIH0pOwogICAgYGBgCiAgICBJZiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIGRvZXMgbm90IHNwZWNpZnkgYSByZWplY3Rpb24gaGFuZGxlciwgcmVqZWN0aW9uIHJlYXNvbnMgd2lsbCBiZSBwcm9wYWdhdGVkIGZ1cnRoZXIgZG93bnN0cmVhbS4KICAKICAgIGBgYGpzCiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgdGhyb3cgbmV3IFBlZGFnb2dpY2FsRXhjZXB0aW9uKCdVcHN0cmVhbSBlcnJvcicpOwogICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgLy8gbmV2ZXIgcmVhY2hlZAogICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgLy8gbmV2ZXIgcmVhY2hlZAogICAgfSwgZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAvLyBUaGUgYFBlZGdhZ29jaWFsRXhjZXB0aW9uYCBpcyBwcm9wYWdhdGVkIGFsbCB0aGUgd2F5IGRvd24gdG8gaGVyZQogICAgfSk7CiAgICBgYGAKICAKICAgIEFzc2ltaWxhdGlvbgogICAgLS0tLS0tLS0tLS0tCiAgCiAgICBTb21ldGltZXMgdGhlIHZhbHVlIHlvdSB3YW50IHRvIHByb3BhZ2F0ZSB0byBhIGRvd25zdHJlYW0gcHJvbWlzZSBjYW4gb25seSBiZQogICAgcmV0cmlldmVkIGFzeW5jaHJvbm91c2x5LiBUaGlzIGNhbiBiZSBhY2hpZXZlZCBieSByZXR1cm5pbmcgYSBwcm9taXNlIGluIHRoZQogICAgZnVsZmlsbG1lbnQgb3IgcmVqZWN0aW9uIGhhbmRsZXIuIFRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCB0aGVuIGJlIHBlbmRpbmcKICAgIHVudGlsIHRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHNldHRsZWQuIFRoaXMgaXMgY2FsbGVkICphc3NpbWlsYXRpb24qLgogIAogICAgYGBganMKICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikgewogICAgICByZXR1cm4gZmluZENvbW1lbnRzQnlBdXRob3IodXNlcik7CiAgICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykgewogICAgICAvLyBUaGUgdXNlcidzIGNvbW1lbnRzIGFyZSBub3cgYXZhaWxhYmxlCiAgICB9KTsKICAgIGBgYAogIAogICAgSWYgdGhlIGFzc2ltbGlhdGVkIHByb21pc2UgcmVqZWN0cywgdGhlbiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgYWxzbyByZWplY3QuCiAgCiAgICBgYGBqcwogICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTsKICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7CiAgICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgZnVsZmlsbHMsIHdlJ2xsIGhhdmUgdGhlIHZhbHVlIGhlcmUKICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCByZWplY3RzLCB3ZSdsbCBoYXZlIHRoZSByZWFzb24gaGVyZQogICAgfSk7CiAgICBgYGAKICAKICAgIFNpbXBsZSBFeGFtcGxlCiAgICAtLS0tLS0tLS0tLS0tLQogIAogICAgU3luY2hyb25vdXMgRXhhbXBsZQogIAogICAgYGBgamF2YXNjcmlwdAogICAgbGV0IHJlc3VsdDsKICAKICAgIHRyeSB7CiAgICAgIHJlc3VsdCA9IGZpbmRSZXN1bHQoKTsKICAgICAgLy8gc3VjY2VzcwogICAgfSBjYXRjaChyZWFzb24pIHsKICAgICAgLy8gZmFpbHVyZQogICAgfQogICAgYGBgCiAgCiAgICBFcnJiYWNrIEV4YW1wbGUKICAKICAgIGBgYGpzCiAgICBmaW5kUmVzdWx0KGZ1bmN0aW9uKHJlc3VsdCwgZXJyKXsKICAgICAgaWYgKGVycikgewogICAgICAgIC8vIGZhaWx1cmUKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBzdWNjZXNzCiAgICAgIH0KICAgIH0pOwogICAgYGBgCiAgCiAgICBQcm9taXNlIEV4YW1wbGU7CiAgCiAgICBgYGBqYXZhc2NyaXB0CiAgICBmaW5kUmVzdWx0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpewogICAgICAvLyBzdWNjZXNzCiAgICB9LCBmdW5jdGlvbihyZWFzb24pewogICAgICAvLyBmYWlsdXJlCiAgICB9KTsKICAgIGBgYAogIAogICAgQWR2YW5jZWQgRXhhbXBsZQogICAgLS0tLS0tLS0tLS0tLS0KICAKICAgIFN5bmNocm9ub3VzIEV4YW1wbGUKICAKICAgIGBgYGphdmFzY3JpcHQKICAgIGxldCBhdXRob3IsIGJvb2tzOwogIAogICAgdHJ5IHsKICAgICAgYXV0aG9yID0gZmluZEF1dGhvcigpOwogICAgICBib29rcyAgPSBmaW5kQm9va3NCeUF1dGhvcihhdXRob3IpOwogICAgICAvLyBzdWNjZXNzCiAgICB9IGNhdGNoKHJlYXNvbikgewogICAgICAvLyBmYWlsdXJlCiAgICB9CiAgICBgYGAKICAKICAgIEVycmJhY2sgRXhhbXBsZQogIAogICAgYGBganMKICAKICAgIGZ1bmN0aW9uIGZvdW5kQm9va3MoYm9va3MpIHsKICAKICAgIH0KICAKICAgIGZ1bmN0aW9uIGZhaWx1cmUocmVhc29uKSB7CiAgCiAgICB9CiAgCiAgICBmaW5kQXV0aG9yKGZ1bmN0aW9uKGF1dGhvciwgZXJyKXsKICAgICAgaWYgKGVycikgewogICAgICAgIGZhaWx1cmUoZXJyKTsKICAgICAgICAvLyBmYWlsdXJlCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZpbmRCb29va3NCeUF1dGhvcihhdXRob3IsIGZ1bmN0aW9uKGJvb2tzLCBlcnIpIHsKICAgICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICAgIGZhaWx1cmUoZXJyKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgZm91bmRCb29rcyhib29rcyk7CiAgICAgICAgICAgICAgfSBjYXRjaChyZWFzb24pIHsKICAgICAgICAgICAgICAgIGZhaWx1cmUocmVhc29uKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gY2F0Y2goZXJyb3IpIHsKICAgICAgICAgIGZhaWx1cmUoZXJyKTsKICAgICAgICB9CiAgICAgICAgLy8gc3VjY2VzcwogICAgICB9CiAgICB9KTsKICAgIGBgYAogIAogICAgUHJvbWlzZSBFeGFtcGxlOwogIAogICAgYGBgamF2YXNjcmlwdAogICAgZmluZEF1dGhvcigpLgogICAgICB0aGVuKGZpbmRCb29rc0J5QXV0aG9yKS4KICAgICAgdGhlbihmdW5jdGlvbihib29rcyl7CiAgICAgICAgLy8gZm91bmQgYm9va3MKICAgIH0pLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7CiAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nCiAgICB9KTsKICAgIGBgYAogIAogICAgQG1ldGhvZCB0aGVuCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvbkZ1bGZpbGxlZAogICAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3RlZAogICAgVXNlZnVsIGZvciB0b29saW5nLgogICAgQHJldHVybiB7UHJvbWlzZX0KICAqLwogIHRoZW46IHRoZW4sCgogIC8qKgogICAgYGNhdGNoYCBpcyBzaW1wbHkgc3VnYXIgZm9yIGB0aGVuKHVuZGVmaW5lZCwgb25SZWplY3Rpb24pYCB3aGljaCBtYWtlcyBpdCB0aGUgc2FtZQogICAgYXMgdGhlIGNhdGNoIGJsb2NrIG9mIGEgdHJ5L2NhdGNoIHN0YXRlbWVudC4KICAKICAgIGBgYGpzCiAgICBmdW5jdGlvbiBmaW5kQXV0aG9yKCl7CiAgICAgIHRocm93IG5ldyBFcnJvcignY291bGRuJ3QgZmluZCB0aGF0IGF1dGhvcicpOwogICAgfQogIAogICAgLy8gc3luY2hyb25vdXMKICAgIHRyeSB7CiAgICAgIGZpbmRBdXRob3IoKTsKICAgIH0gY2F0Y2gocmVhc29uKSB7CiAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nCiAgICB9CiAgCiAgICAvLyBhc3luYyB3aXRoIHByb21pc2VzCiAgICBmaW5kQXV0aG9yKCkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXsKICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmcKICAgIH0pOwogICAgYGBgCiAgCiAgICBAbWV0aG9kIGNhdGNoCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGlvbgogICAgVXNlZnVsIGZvciB0b29saW5nLgogICAgQHJldHVybiB7UHJvbWlzZX0KICAqLwogICdjYXRjaCc6IGZ1bmN0aW9uIF9jYXRjaChvblJlamVjdGlvbikgewogICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGlvbik7CiAgfQp9OwoKLypnbG9iYWwgc2VsZiovCmZ1bmN0aW9uIHBvbHlmaWxsJDEoKSB7CiAgICB2YXIgbG9jYWwgPSB1bmRlZmluZWQ7CgogICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgbG9jYWwgPSBnbG9iYWw7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIGxvY2FsID0gc2VsZjsKICAgIH0gZWxzZSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbG9jYWwgPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwb2x5ZmlsbCBmYWlsZWQgYmVjYXVzZSBnbG9iYWwgb2JqZWN0IGlzIHVuYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQnKTsKICAgICAgICB9CiAgICB9CgogICAgdmFyIFAgPSBsb2NhbC5Qcm9taXNlOwoKICAgIGlmIChQKSB7CiAgICAgICAgdmFyIHByb21pc2VUb1N0cmluZyA9IG51bGw7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcHJvbWlzZVRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFAucmVzb2x2ZSgpKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIC8vIHNpbGVudGx5IGlnbm9yZWQKICAgICAgICB9CgogICAgICAgIGlmIChwcm9taXNlVG9TdHJpbmcgPT09ICdbb2JqZWN0IFByb21pc2VdJyAmJiAhUC5jYXN0KSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICB9CgogICAgbG9jYWwuUHJvbWlzZSA9IFByb21pc2UkMjsKfQoKLy8gU3RyYW5nZSBjb21wYXQuLgpQcm9taXNlJDIucG9seWZpbGwgPSBwb2x5ZmlsbCQxOwpQcm9taXNlJDIuUHJvbWlzZSA9IFByb21pc2UkMjsKCnJldHVybiBQcm9taXNlJDI7Cgp9KSkpOwoKLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXM2LXByb21pc2UubWFwCgovKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg3KSwgX193ZWJwYWNrX3JlcXVpcmVfXygzKSkpCgovKioqLyB9KSwKLyogNyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgovLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXIKdmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9OwoKLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0Ci8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpcwovLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhCi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuCgp2YXIgY2FjaGVkU2V0VGltZW91dDsKdmFyIGNhY2hlZENsZWFyVGltZW91dDsKCmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTsKfQpmdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHsKICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7Cn0KKGZ1bmN0aW9uICgpIHsKICAgIHRyeSB7CiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0OwogICAgICAgIH0KICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDsKICAgIH0KICAgIHRyeSB7CiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7CiAgICAgICAgfQogICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7CiAgICB9Cn0gKCkpCmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7CiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkgewogICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9ucwogICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7CiAgICB9CiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZAogICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7CiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7CiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTsKICAgIH0KICAgIHRyeSB7CiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzcwogICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7CiAgICB9IGNhdGNoKGUpewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseQogICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7CiAgICAgICAgfSBjYXRjaChlKXsKICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IKICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApOwogICAgICAgIH0KICAgIH0KCgp9CmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHsKICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkgewogICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9ucwogICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTsKICAgIH0KICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWQKICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkgewogICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDsKICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7CiAgICB9CiAgICB0cnkgewogICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3MKICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7CiAgICB9IGNhdGNoIChlKXsKICAgICAgICB0cnkgewogICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5CiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpOwogICAgICAgIH0gY2F0Y2ggKGUpewogICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci4KICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dAogICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTsKICAgICAgICB9CiAgICB9CgoKCn0KdmFyIHF1ZXVlID0gW107CnZhciBkcmFpbmluZyA9IGZhbHNlOwp2YXIgY3VycmVudFF1ZXVlOwp2YXIgcXVldWVJbmRleCA9IC0xOwoKZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkgewogICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgZHJhaW5pbmcgPSBmYWxzZTsKICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7CiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTsKICAgIH0gZWxzZSB7CiAgICAgICAgcXVldWVJbmRleCA9IC0xOwogICAgfQogICAgaWYgKHF1ZXVlLmxlbmd0aCkgewogICAgICAgIGRyYWluUXVldWUoKTsKICAgIH0KfQoKZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHsKICAgIGlmIChkcmFpbmluZykgewogICAgICAgIHJldHVybjsKICAgIH0KICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spOwogICAgZHJhaW5pbmcgPSB0cnVlOwoKICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7CiAgICB3aGlsZShsZW4pIHsKICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTsKICAgICAgICBxdWV1ZSA9IFtdOwogICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHsKICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkgewogICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHF1ZXVlSW5kZXggPSAtMTsKICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7CiAgICB9CiAgICBjdXJyZW50UXVldWUgPSBudWxsOwogICAgZHJhaW5pbmcgPSBmYWxzZTsKICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTsKfQoKcHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHsKICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgewogICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldOwogICAgICAgIH0KICAgIH0KICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7CiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykgewogICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7CiAgICB9Cn07CgovLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzCmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkgewogICAgdGhpcy5mdW4gPSBmdW47CiAgICB0aGlzLmFycmF5ID0gYXJyYXk7Cn0KSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkgewogICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7Cn07CnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7CnByb2Nlc3MuYnJvd3NlciA9IHRydWU7CnByb2Nlc3MuZW52ID0ge307CnByb2Nlc3MuYXJndiA9IFtdOwpwcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXMKcHJvY2Vzcy52ZXJzaW9ucyA9IHt9OwoKZnVuY3Rpb24gbm9vcCgpIHt9Cgpwcm9jZXNzLm9uID0gbm9vcDsKcHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7CnByb2Nlc3Mub25jZSA9IG5vb3A7CnByb2Nlc3Mub2ZmID0gbm9vcDsKcHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7CnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDsKcHJvY2Vzcy5lbWl0ID0gbm9vcDsKCnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7Cn07Cgpwcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9Owpwcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikgewogICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTsKfTsKcHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTsKCgovKioqLyB9KSwKLyogOCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgovKiAoaWdub3JlZCkgKi8KCi8qKiovIH0pLAovKiA5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHsKICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7CiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09ICJvYmplY3QiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSAiZnVuY3Rpb24iKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7CiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByOwogICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjsKfTsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKdmFyIHV0aWxzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwp2YXIgQXBwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gQXBwKCkgewogICAgICAgIHRoaXMucHJvdmlkZXMgPSBbXTsKICAgICAgICB0aGlzLm9uU2Nyb2xsSGFuZGxlciA9IFtdOwogICAgICAgIHRoaXMub25Ib3ZlckhhbmRsZXIgPSBbXTsKICAgIH0KICAgIEFwcC5wcm90b3R5cGUuc2V0Q29uZmlnID0gZnVuY3Rpb24gKGNvbmZpZykgewogICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnOwogICAgICAgIHJldHVybiB0aGlzOwogICAgfTsKICAgIEFwcC5wcm90b3R5cGUucHJvdmlkZSA9IGZ1bmN0aW9uIChwcm92aWRlcnMpIHsKICAgICAgICB0aGlzLnByb3ZpZGVzID0gcHJvdmlkZXJzOwogICAgICAgIHJldHVybiB0aGlzOwogICAgfTsKICAgIEFwcC5wcm90b3R5cGUuZ2V0UHJvdmlkZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIG1hdGNoUHJvdmlkZXJzID0gW107CiAgICAgICAgdmFyIHByb3ZpZGVzID0gdGhpcy5wcm92aWRlcy5zbGljZSgpOwogICAgICAgIHdoaWxlIChwcm92aWRlcy5sZW5ndGgpIHsKICAgICAgICAgICAgdmFyIHByb3ZpZGVDb25maWcgPSBwcm92aWRlcy5zaGlmdCgpOwogICAgICAgICAgICAvLyDljLnphY3ln5/lkI3vvIzpgILlkIjmraPnoa4KICAgICAgICAgICAgaWYgKHByb3ZpZGVDb25maWcudGVzdC50ZXN0KGRvY3VtZW50LmRvbWFpbikpIHsKICAgICAgICAgICAgICAgIG1hdGNoUHJvdmlkZXJzLnB1c2gocHJvdmlkZUNvbmZpZyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIG1hdGNoUHJvdmlkZXJzOwogICAgfTsKICAgIEFwcC5wcm90b3R5cGUub25Ib3ZlciA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQ7CiAgICAgICAgaWYgKHRhcmdldC50YWdOYW1lICE9PSAnQScpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB0aGlzLm9uSG92ZXJIYW5kbGVyLmZvckVhY2goZnVuY3Rpb24gKGZ1bmMpIHsKICAgICAgICAgICAgZnVuYyh0YXJnZXQpOwogICAgICAgIH0pOwogICAgfTsKICAgIEFwcC5wcm90b3R5cGUub25TY3JvbGwgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8g562b6YCJ5omA5pyJ5Zyo5Y+v6KeG5Yy65Z+f5YaF55qEQeagh+etvgogICAgICAgIHZhciBhbGxJbnZpZXdBRWxlbWVudHMgPSBbXS5zbGljZQogICAgICAgICAgICAuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhW2hyZWZePSJodHRwIl0nKSkKICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoYUVsZW1lbnQpIHsKICAgICAgICAgICAgcmV0dXJuIHV0aWxzXzEuaXNJblZpZXcoYUVsZW1lbnQpICYmIHV0aWxzXzEuZ2V0UmVkaXJlY3QoYUVsZW1lbnQpIDw9IDI7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5vblNjcm9sbEhhbmRsZXIuZm9yRWFjaChmdW5jdGlvbiAoZnVuYykgewogICAgICAgICAgICBmdW5jKGFsbEludmlld0FFbGVtZW50cyk7CiAgICAgICAgfSk7CiAgICB9OwogICAgQXBwLnByb3RvdHlwZS5ib290c3RyYXAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgICBhZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgcHJvdmlkZXJzID0gX3RoaXMuZ2V0UHJvdmlkZXIoKTsKICAgICAgICAgICAgd2hpbGUgKHByb3ZpZGVycy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIHZhciBwcm92aWRlQ29uZmlnID0gcHJvdmlkZXJzLnNoaWZ0KCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oIltBbnRpLXJlZGlyZWN0XTogTG9hZCAiICsgcHJvdmlkZUNvbmZpZy5uYW1lKTsKICAgICAgICAgICAgICAgIHZhciBwcm92aWRlckNvbnN0cnVjdG9yID0gcHJvdmlkZUNvbmZpZy5wcm92aWRlcjsKICAgICAgICAgICAgICAgIHZhciBwcm92aWRlciA9IG5ldyBwcm92aWRlckNvbnN0cnVjdG9yKCkKICAgICAgICAgICAgICAgICAgICAuc2V0Q29uZmlnKF90aGlzLmNvbmZpZykKICAgICAgICAgICAgICAgICAgICAub25Jbml0KCk7CiAgICAgICAgICAgICAgICBfdGhpcy5vblNjcm9sbEhhbmRsZXIucHVzaChwcm92aWRlci5vblNjcm9sbC5iaW5kKHByb3ZpZGVyKSk7CiAgICAgICAgICAgICAgICBfdGhpcy5vbkhvdmVySGFuZGxlci5wdXNoKHByb3ZpZGVyLm9uSG92ZXIuYmluZChwcm92aWRlcikpOwogICAgICAgICAgICAgICAgLy8g5aaC5p6c6aG16Z2i5aSE5LqO5Yid5aeL55qE54q25oCB77yM5rKh5pyJ5rua5Yqo6L+H77yM5YiZ5Ye65Y+R5LiA5qyhb25TY3JvbGzkuovku7YKICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuc2Nyb2xsWSA8PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMub25TY3JvbGwoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMub25TY3JvbGwuYmluZCh0aGlzKSk7CiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbkhvdmVyLmJpbmQodGhpcykpOwogICAgICAgIGNvbnNvbGUubG9nKCclYyBBbnRpLVJlZGlyZWN0ICVjIENvcHlyaWdodCBceGE5IDIwMTUtJXMgJXMnLCAnZm9udC1mYW1pbHk6ICJIZWx2ZXRpY2EgTmV1ZSIsIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWY7Zm9udC1zaXplOjY0cHg7Y29sb3I6IzAwYmJlZTstd2Via2l0LXRleHQtZmlsbC1jb2xvcjojMDBiYmVlOy13ZWJraXQtdGV4dC1zdHJva2U6IDFweCAjMDBiYmVlOycsICdmb250LXNpemU6MTJweDtjb2xvcjojOTk5OTk5OycsIG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSwgJ1xuJyArICdBdXRob3IgQEF4ZXRyb3knKTsKICAgIH07CiAgICBfX2RlY29yYXRlKFsKICAgICAgICB1dGlsc18xLmRlYm91bmNlRGVjb3JhdG9yKDMwMCkKICAgIF0sIEFwcC5wcm90b3R5cGUsICJvblNjcm9sbCIsIG51bGwpOwogICAgcmV0dXJuIEFwcDsKfSgpKTsKZXhwb3J0cy5BcHAgPSBBcHA7CgoKLyoqKi8gfSksCi8qIDEwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHsvKioKICogbG9kYXNoIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPgogKiBCdWlsZDogYGxvZGFzaCBtb2R1bGFyaXplIGV4cG9ydHM9Im5wbSIgLW8gLi9gCiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIDxodHRwczovL2pxdWVyeS5vcmcvPgogKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+CiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+CiAqIENvcHlyaWdodCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9ycwogKi8KCi8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciAiRnVuY3Rpb25zIiBtZXRob2RzLiAqLwp2YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nOwoKLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovCnZhciBOQU4gPSAwIC8gMDsKCi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi8KdmFyIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nOwoKLyoqIFVzZWQgdG8gbWF0Y2ggbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZS4gKi8KdmFyIHJlVHJpbSA9IC9eXHMrfFxzKyQvZzsKCi8qKiBVc2VkIHRvIGRldGVjdCBiYWQgc2lnbmVkIGhleGFkZWNpbWFsIHN0cmluZyB2YWx1ZXMuICovCnZhciByZUlzQmFkSGV4ID0gL15bLStdMHhbMC05YS1mXSskL2k7CgovKiogVXNlZCB0byBkZXRlY3QgYmluYXJ5IHN0cmluZyB2YWx1ZXMuICovCnZhciByZUlzQmluYXJ5ID0gL14wYlswMV0rJC9pOwoKLyoqIFVzZWQgdG8gZGV0ZWN0IG9jdGFsIHN0cmluZyB2YWx1ZXMuICovCnZhciByZUlzT2N0YWwgPSAvXjBvWzAtN10rJC9pOwoKLyoqIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHdpdGhvdXQgYSBkZXBlbmRlbmN5IG9uIGByb290YC4gKi8KdmFyIGZyZWVQYXJzZUludCA9IHBhcnNlSW50OwoKLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi8KdmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbCAmJiBnbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgZ2xvYmFsOwoKLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi8KdmFyIGZyZWVTZWxmID0gdHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGY7CgovKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi8KdmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7CgovKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovCnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7CgovKioKICogVXNlZCB0byByZXNvbHZlIHRoZQogKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZykKICogb2YgdmFsdWVzLgogKi8KdmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7CgovKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovCnZhciBuYXRpdmVNYXggPSBNYXRoLm1heCwKICAgIG5hdGl2ZU1pbiA9IE1hdGgubWluOwoKLyoqCiAqIEdldHMgdGhlIHRpbWVzdGFtcCBvZiB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IGhhdmUgZWxhcHNlZCBzaW5jZQogKiB0aGUgVW5peCBlcG9jaCAoMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDKS4KICoKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgXwogKiBAc2luY2UgMi40LjAKICogQGNhdGVnb3J5IERhdGUKICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXN0YW1wLgogKiBAZXhhbXBsZQogKgogKiBfLmRlZmVyKGZ1bmN0aW9uKHN0YW1wKSB7CiAqICAgY29uc29sZS5sb2coXy5ub3coKSAtIHN0YW1wKTsKICogfSwgXy5ub3coKSk7CiAqIC8vID0+IExvZ3MgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaXQgdG9vayBmb3IgdGhlIGRlZmVycmVkIGludm9jYXRpb24uCiAqLwp2YXIgbm93ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIHJvb3QuRGF0ZS5ub3coKTsKfTsKCi8qKgogKiBDcmVhdGVzIGEgZGVib3VuY2VkIGZ1bmN0aW9uIHRoYXQgZGVsYXlzIGludm9raW5nIGBmdW5jYCB1bnRpbCBhZnRlciBgd2FpdGAKICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzCiAqIGludm9rZWQuIFRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgIG1ldGhvZCB0byBjYW5jZWwKICogZGVsYXllZCBgZnVuY2AgaW52b2NhdGlvbnMgYW5kIGEgYGZsdXNoYCBtZXRob2QgdG8gaW1tZWRpYXRlbHkgaW52b2tlIHRoZW0uCiAqIFByb3ZpZGUgYG9wdGlvbnNgIHRvIGluZGljYXRlIHdoZXRoZXIgYGZ1bmNgIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZQogKiBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlIG9mIHRoZSBgd2FpdGAgdGltZW91dC4gVGhlIGBmdW5jYCBpcyBpbnZva2VkCiAqIHdpdGggdGhlIGxhc3QgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24uIFN1YnNlcXVlbnQKICogY2FsbHMgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2AKICogaW52b2NhdGlvbi4KICoKICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpcwogKiBpbnZva2VkIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0IG9ubHkgaWYgdGhlIGRlYm91bmNlZCBmdW5jdGlvbgogKiBpcyBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuCiAqCiAqIElmIGB3YWl0YCBpcyBgMGAgYW5kIGBsZWFkaW5nYCBpcyBgZmFsc2VgLCBgZnVuY2AgaW52b2NhdGlvbiBpcyBkZWZlcnJlZAogKiB1bnRpbCB0byB0aGUgbmV4dCB0aWNrLCBzaW1pbGFyIHRvIGBzZXRUaW1lb3V0YCB3aXRoIGEgdGltZW91dCBvZiBgMGAuCiAqCiAqIFNlZSBbRGF2aWQgQ29yYmFjaG8ncyBhcnRpY2xlXShodHRwczovL2Nzcy10cmlja3MuY29tL2RlYm91bmNpbmctdGhyb3R0bGluZy1leHBsYWluZWQtZXhhbXBsZXMvKQogKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLmRlYm91bmNlYCBhbmQgYF8udGhyb3R0bGVgLgogKgogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBfCiAqIEBzaW5jZSAwLjEuMAogKiBAY2F0ZWdvcnkgRnVuY3Rpb24KICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVib3VuY2UuCiAqIEBwYXJhbSB7bnVtYmVyfSBbd2FpdD0wXSBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheS4KICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBUaGUgb3B0aW9ucyBvYmplY3QuCiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz1mYWxzZV0KICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC4KICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm1heFdhaXRdCiAqICBUaGUgbWF4aW11bSB0aW1lIGBmdW5jYCBpcyBhbGxvd2VkIHRvIGJlIGRlbGF5ZWQgYmVmb3JlIGl0J3MgaW52b2tlZC4KICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXQogKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dC4KICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZGVib3VuY2VkIGZ1bmN0aW9uLgogKiBAZXhhbXBsZQogKgogKiAvLyBBdm9pZCBjb3N0bHkgY2FsY3VsYXRpb25zIHdoaWxlIHRoZSB3aW5kb3cgc2l6ZSBpcyBpbiBmbHV4LgogKiBqUXVlcnkod2luZG93KS5vbigncmVzaXplJywgXy5kZWJvdW5jZShjYWxjdWxhdGVMYXlvdXQsIDE1MCkpOwogKgogKiAvLyBJbnZva2UgYHNlbmRNYWlsYCB3aGVuIGNsaWNrZWQsIGRlYm91bmNpbmcgc3Vic2VxdWVudCBjYWxscy4KICogalF1ZXJ5KGVsZW1lbnQpLm9uKCdjbGljaycsIF8uZGVib3VuY2Uoc2VuZE1haWwsIDMwMCwgewogKiAgICdsZWFkaW5nJzogdHJ1ZSwKICogICAndHJhaWxpbmcnOiBmYWxzZQogKiB9KSk7CiAqCiAqIC8vIEVuc3VyZSBgYmF0Y2hMb2dgIGlzIGludm9rZWQgb25jZSBhZnRlciAxIHNlY29uZCBvZiBkZWJvdW5jZWQgY2FsbHMuCiAqIHZhciBkZWJvdW5jZWQgPSBfLmRlYm91bmNlKGJhdGNoTG9nLCAyNTAsIHsgJ21heFdhaXQnOiAxMDAwIH0pOwogKiB2YXIgc291cmNlID0gbmV3IEV2ZW50U291cmNlKCcvc3RyZWFtJyk7CiAqIGpRdWVyeShzb3VyY2UpLm9uKCdtZXNzYWdlJywgZGVib3VuY2VkKTsKICoKICogLy8gQ2FuY2VsIHRoZSB0cmFpbGluZyBkZWJvdW5jZWQgaW52b2NhdGlvbi4KICogalF1ZXJ5KHdpbmRvdykub24oJ3BvcHN0YXRlJywgZGVib3VuY2VkLmNhbmNlbCk7CiAqLwpmdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7CiAgdmFyIGxhc3RBcmdzLAogICAgICBsYXN0VGhpcywKICAgICAgbWF4V2FpdCwKICAgICAgcmVzdWx0LAogICAgICB0aW1lcklkLAogICAgICBsYXN0Q2FsbFRpbWUsCiAgICAgIGxhc3RJbnZva2VUaW1lID0gMCwKICAgICAgbGVhZGluZyA9IGZhbHNlLAogICAgICBtYXhpbmcgPSBmYWxzZSwKICAgICAgdHJhaWxpbmcgPSB0cnVlOwoKICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpOwogIH0KICB3YWl0ID0gdG9OdW1iZXIod2FpdCkgfHwgMDsKICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHsKICAgIGxlYWRpbmcgPSAhIW9wdGlvbnMubGVhZGluZzsKICAgIG1heGluZyA9ICdtYXhXYWl0JyBpbiBvcHRpb25zOwogICAgbWF4V2FpdCA9IG1heGluZyA/IG5hdGl2ZU1heCh0b051bWJlcihvcHRpb25zLm1heFdhaXQpIHx8IDAsIHdhaXQpIDogbWF4V2FpdDsKICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7CiAgfQoKICBmdW5jdGlvbiBpbnZva2VGdW5jKHRpbWUpIHsKICAgIHZhciBhcmdzID0gbGFzdEFyZ3MsCiAgICAgICAgdGhpc0FyZyA9IGxhc3RUaGlzOwoKICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7CiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7CiAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpOwogICAgcmV0dXJuIHJlc3VsdDsKICB9CgogIGZ1bmN0aW9uIGxlYWRpbmdFZGdlKHRpbWUpIHsKICAgIC8vIFJlc2V0IGFueSBgbWF4V2FpdGAgdGltZXIuCiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7CiAgICAvLyBTdGFydCB0aGUgdGltZXIgZm9yIHRoZSB0cmFpbGluZyBlZGdlLgogICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTsKICAgIC8vIEludm9rZSB0aGUgbGVhZGluZyBlZGdlLgogICAgcmV0dXJuIGxlYWRpbmcgPyBpbnZva2VGdW5jKHRpbWUpIDogcmVzdWx0OwogIH0KCiAgZnVuY3Rpb24gcmVtYWluaW5nV2FpdCh0aW1lKSB7CiAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLAogICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWUsCiAgICAgICAgcmVzdWx0ID0gd2FpdCAtIHRpbWVTaW5jZUxhc3RDYWxsOwoKICAgIHJldHVybiBtYXhpbmcgPyBuYXRpdmVNaW4ocmVzdWx0LCBtYXhXYWl0IC0gdGltZVNpbmNlTGFzdEludm9rZSkgOiByZXN1bHQ7CiAgfQoKICBmdW5jdGlvbiBzaG91bGRJbnZva2UodGltZSkgewogICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSwKICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lOwoKICAgIC8vIEVpdGhlciB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsLCBhY3Rpdml0eSBoYXMgc3RvcHBlZCBhbmQgd2UncmUgYXQgdGhlCiAgICAvLyB0cmFpbGluZyBlZGdlLCB0aGUgc3lzdGVtIHRpbWUgaGFzIGdvbmUgYmFja3dhcmRzIGFuZCB3ZSdyZSB0cmVhdGluZwogICAgLy8gaXQgYXMgdGhlIHRyYWlsaW5nIGVkZ2UsIG9yIHdlJ3ZlIGhpdCB0aGUgYG1heFdhaXRgIGxpbWl0LgogICAgcmV0dXJuIChsYXN0Q2FsbFRpbWUgPT09IHVuZGVmaW5lZCB8fCAodGltZVNpbmNlTGFzdENhbGwgPj0gd2FpdCkgfHwKICAgICAgKHRpbWVTaW5jZUxhc3RDYWxsIDwgMCkgfHwgKG1heGluZyAmJiB0aW1lU2luY2VMYXN0SW52b2tlID49IG1heFdhaXQpKTsKICB9CgogIGZ1bmN0aW9uIHRpbWVyRXhwaXJlZCgpIHsKICAgIHZhciB0aW1lID0gbm93KCk7CiAgICBpZiAoc2hvdWxkSW52b2tlKHRpbWUpKSB7CiAgICAgIHJldHVybiB0cmFpbGluZ0VkZ2UodGltZSk7CiAgICB9CiAgICAvLyBSZXN0YXJ0IHRoZSB0aW1lci4KICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgcmVtYWluaW5nV2FpdCh0aW1lKSk7CiAgfQoKICBmdW5jdGlvbiB0cmFpbGluZ0VkZ2UodGltZSkgewogICAgdGltZXJJZCA9IHVuZGVmaW5lZDsKCiAgICAvLyBPbmx5IGludm9rZSBpZiB3ZSBoYXZlIGBsYXN0QXJnc2Agd2hpY2ggbWVhbnMgYGZ1bmNgIGhhcyBiZWVuCiAgICAvLyBkZWJvdW5jZWQgYXQgbGVhc3Qgb25jZS4KICAgIGlmICh0cmFpbGluZyAmJiBsYXN0QXJncykgewogICAgICByZXR1cm4gaW52b2tlRnVuYyh0aW1lKTsKICAgIH0KICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7CiAgICByZXR1cm4gcmVzdWx0OwogIH0KCiAgZnVuY3Rpb24gY2FuY2VsKCkgewogICAgaWYgKHRpbWVySWQgIT09IHVuZGVmaW5lZCkgewogICAgICBjbGVhclRpbWVvdXQodGltZXJJZCk7CiAgICB9CiAgICBsYXN0SW52b2tlVGltZSA9IDA7CiAgICBsYXN0QXJncyA9IGxhc3RDYWxsVGltZSA9IGxhc3RUaGlzID0gdGltZXJJZCA9IHVuZGVmaW5lZDsKICB9CgogIGZ1bmN0aW9uIGZsdXNoKCkgewogICAgcmV0dXJuIHRpbWVySWQgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IHRyYWlsaW5nRWRnZShub3coKSk7CiAgfQoKICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7CiAgICB2YXIgdGltZSA9IG5vdygpLAogICAgICAgIGlzSW52b2tpbmcgPSBzaG91bGRJbnZva2UodGltZSk7CgogICAgbGFzdEFyZ3MgPSBhcmd1bWVudHM7CiAgICBsYXN0VGhpcyA9IHRoaXM7CiAgICBsYXN0Q2FsbFRpbWUgPSB0aW1lOwoKICAgIGlmIChpc0ludm9raW5nKSB7CiAgICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gbGVhZGluZ0VkZ2UobGFzdENhbGxUaW1lKTsKICAgICAgfQogICAgICBpZiAobWF4aW5nKSB7CiAgICAgICAgLy8gSGFuZGxlIGludm9jYXRpb25zIGluIGEgdGlnaHQgbG9vcC4KICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpOwogICAgICAgIHJldHVybiBpbnZva2VGdW5jKGxhc3RDYWxsVGltZSk7CiAgICAgIH0KICAgIH0KICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHsKICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTsKICAgIH0KICAgIHJldHVybiByZXN1bHQ7CiAgfQogIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7CiAgZGVib3VuY2VkLmZsdXNoID0gZmx1c2g7CiAgcmV0dXJuIGRlYm91bmNlZDsKfQoKLyoqCiAqIENyZWF0ZXMgYSB0aHJvdHRsZWQgZnVuY3Rpb24gdGhhdCBvbmx5IGludm9rZXMgYGZ1bmNgIGF0IG1vc3Qgb25jZSBwZXIKICogZXZlcnkgYHdhaXRgIG1pbGxpc2Vjb25kcy4gVGhlIHRocm90dGxlZCBmdW5jdGlvbiBjb21lcyB3aXRoIGEgYGNhbmNlbGAKICogbWV0aG9kIHRvIGNhbmNlbCBkZWxheWVkIGBmdW5jYCBpbnZvY2F0aW9ucyBhbmQgYSBgZmx1c2hgIG1ldGhvZCB0bwogKiBpbW1lZGlhdGVseSBpbnZva2UgdGhlbS4gUHJvdmlkZSBgb3B0aW9uc2AgdG8gaW5kaWNhdGUgd2hldGhlciBgZnVuY2AKICogc2hvdWxkIGJlIGludm9rZWQgb24gdGhlIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YAogKiB0aW1lb3V0LiBUaGUgYGZ1bmNgIGlzIGludm9rZWQgd2l0aCB0aGUgbGFzdCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlCiAqIHRocm90dGxlZCBmdW5jdGlvbi4gU3Vic2VxdWVudCBjYWxscyB0byB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uIHJldHVybiB0aGUKICogcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYCBpbnZvY2F0aW9uLgogKgogKiAqKk5vdGU6KiogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCwgYGZ1bmNgIGlzCiAqIGludm9rZWQgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uCiAqIGlzIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC4KICoKICogSWYgYHdhaXRgIGlzIGAwYCBhbmQgYGxlYWRpbmdgIGlzIGBmYWxzZWAsIGBmdW5jYCBpbnZvY2F0aW9uIGlzIGRlZmVycmVkCiAqIHVudGlsIHRvIHRoZSBuZXh0IHRpY2ssIHNpbWlsYXIgdG8gYHNldFRpbWVvdXRgIHdpdGggYSB0aW1lb3V0IG9mIGAwYC4KICoKICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pCiAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8udGhyb3R0bGVgIGFuZCBgXy5kZWJvdW5jZWAuCiAqCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIF8KICogQHNpbmNlIDAuMS4wCiAqIEBjYXRlZ29yeSBGdW5jdGlvbgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byB0aHJvdHRsZS4KICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIHRocm90dGxlIGludm9jYXRpb25zIHRvLgogKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC4KICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPXRydWVdCiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSBsZWFkaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuCiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV0KICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuCiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHRocm90dGxlZCBmdW5jdGlvbi4KICogQGV4YW1wbGUKICoKICogLy8gQXZvaWQgZXhjZXNzaXZlbHkgdXBkYXRpbmcgdGhlIHBvc2l0aW9uIHdoaWxlIHNjcm9sbGluZy4KICogalF1ZXJ5KHdpbmRvdykub24oJ3Njcm9sbCcsIF8udGhyb3R0bGUodXBkYXRlUG9zaXRpb24sIDEwMCkpOwogKgogKiAvLyBJbnZva2UgYHJlbmV3VG9rZW5gIHdoZW4gdGhlIGNsaWNrIGV2ZW50IGlzIGZpcmVkLCBidXQgbm90IG1vcmUgdGhhbiBvbmNlIGV2ZXJ5IDUgbWludXRlcy4KICogdmFyIHRocm90dGxlZCA9IF8udGhyb3R0bGUocmVuZXdUb2tlbiwgMzAwMDAwLCB7ICd0cmFpbGluZyc6IGZhbHNlIH0pOwogKiBqUXVlcnkoZWxlbWVudCkub24oJ2NsaWNrJywgdGhyb3R0bGVkKTsKICoKICogLy8gQ2FuY2VsIHRoZSB0cmFpbGluZyB0aHJvdHRsZWQgaW52b2NhdGlvbi4KICogalF1ZXJ5KHdpbmRvdykub24oJ3BvcHN0YXRlJywgdGhyb3R0bGVkLmNhbmNlbCk7CiAqLwpmdW5jdGlvbiB0aHJvdHRsZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7CiAgdmFyIGxlYWRpbmcgPSB0cnVlLAogICAgICB0cmFpbGluZyA9IHRydWU7CgogIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7CiAgfQogIGlmIChpc09iamVjdChvcHRpb25zKSkgewogICAgbGVhZGluZyA9ICdsZWFkaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLmxlYWRpbmcgOiBsZWFkaW5nOwogICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZzsKICB9CiAgcmV0dXJuIGRlYm91bmNlKGZ1bmMsIHdhaXQsIHsKICAgICdsZWFkaW5nJzogbGVhZGluZywKICAgICdtYXhXYWl0Jzogd2FpdCwKICAgICd0cmFpbGluZyc6IHRyYWlsaW5nCiAgfSk7Cn0KCi8qKgogKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGUKICogW2xhbmd1YWdlIHR5cGVdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzKQogKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApCiAqCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIF8KICogQHNpbmNlIDAuMS4wCiAqIEBjYXRlZ29yeSBMYW5nCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC4KICogQGV4YW1wbGUKICoKICogXy5pc09iamVjdCh7fSk7CiAqIC8vID0+IHRydWUKICoKICogXy5pc09iamVjdChbMSwgMiwgM10pOwogKiAvLyA9PiB0cnVlCiAqCiAqIF8uaXNPYmplY3QoXy5ub29wKTsKICogLy8gPT4gdHJ1ZQogKgogKiBfLmlzT2JqZWN0KG51bGwpOwogKiAvLyA9PiBmYWxzZQogKi8KZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHsKICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTsKICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpOwp9CgovKioKICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgCiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgIm9iamVjdCIuCiAqCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIF8KICogQHNpbmNlIDQuMC4wCiAqIEBjYXRlZ29yeSBMYW5nCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLgogKiBAZXhhbXBsZQogKgogKiBfLmlzT2JqZWN0TGlrZSh7fSk7CiAqIC8vID0+IHRydWUKICoKICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTsKICogLy8gPT4gdHJ1ZQogKgogKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApOwogKiAvLyA9PiBmYWxzZQogKgogKiBfLmlzT2JqZWN0TGlrZShudWxsKTsKICogLy8gPT4gZmFsc2UKICovCmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkgewogIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JzsKfQoKLyoqCiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3ltYm9sYCBwcmltaXRpdmUgb3Igb2JqZWN0LgogKgogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBfCiAqIEBzaW5jZSA0LjAuMAogKiBAY2F0ZWdvcnkgTGFuZwogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBzeW1ib2wsIGVsc2UgYGZhbHNlYC4KICogQGV4YW1wbGUKICoKICogXy5pc1N5bWJvbChTeW1ib2wuaXRlcmF0b3IpOwogKiAvLyA9PiB0cnVlCiAqCiAqIF8uaXNTeW1ib2woJ2FiYycpOwogKiAvLyA9PiBmYWxzZQogKi8KZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHsKICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzeW1ib2wnIHx8CiAgICAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzeW1ib2xUYWcpOwp9CgovKioKICogQ29udmVydHMgYHZhbHVlYCB0byBhIG51bWJlci4KICoKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgXwogKiBAc2luY2UgNC4wLjAKICogQGNhdGVnb3J5IExhbmcKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy4KICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgbnVtYmVyLgogKiBAZXhhbXBsZQogKgogKiBfLnRvTnVtYmVyKDMuMik7CiAqIC8vID0+IDMuMgogKgogKiBfLnRvTnVtYmVyKE51bWJlci5NSU5fVkFMVUUpOwogKiAvLyA9PiA1ZS0zMjQKICoKICogXy50b051bWJlcihJbmZpbml0eSk7CiAqIC8vID0+IEluZmluaXR5CiAqCiAqIF8udG9OdW1iZXIoJzMuMicpOwogKiAvLyA9PiAzLjIKICovCmZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7CiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJykgewogICAgcmV0dXJuIHZhbHVlOwogIH0KICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7CiAgICByZXR1cm4gTkFOOwogIH0KICBpZiAoaXNPYmplY3QodmFsdWUpKSB7CiAgICB2YXIgb3RoZXIgPSB0eXBlb2YgdmFsdWUudmFsdWVPZiA9PSAnZnVuY3Rpb24nID8gdmFsdWUudmFsdWVPZigpIDogdmFsdWU7CiAgICB2YWx1ZSA9IGlzT2JqZWN0KG90aGVyKSA/IChvdGhlciArICcnKSA6IG90aGVyOwogIH0KICBpZiAodHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSB7CiAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6ICt2YWx1ZTsKICB9CiAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKHJlVHJpbSwgJycpOwogIHZhciBpc0JpbmFyeSA9IHJlSXNCaW5hcnkudGVzdCh2YWx1ZSk7CiAgcmV0dXJuIChpc0JpbmFyeSB8fCByZUlzT2N0YWwudGVzdCh2YWx1ZSkpCiAgICA/IGZyZWVQYXJzZUludCh2YWx1ZS5zbGljZSgyKSwgaXNCaW5hcnkgPyAyIDogOCkKICAgIDogKHJlSXNCYWRIZXgudGVzdCh2YWx1ZSkgPyBOQU4gOiArdmFsdWUpOwp9Cgptb2R1bGUuZXhwb3J0cyA9IHRocm90dGxlOwoKLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMykpKQoKLyoqKi8gfSksCi8qIDExICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHsvKioKICogbG9kYXNoIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPgogKiBCdWlsZDogYGxvZGFzaCBtb2R1bGFyaXplIGV4cG9ydHM9Im5wbSIgLW8gLi9gCiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIDxodHRwczovL2pxdWVyeS5vcmcvPgogKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+CiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+CiAqIENvcHlyaWdodCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9ycwogKi8KCi8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciAiRnVuY3Rpb25zIiBtZXRob2RzLiAqLwp2YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nOwoKLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovCnZhciBOQU4gPSAwIC8gMDsKCi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi8KdmFyIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nOwoKLyoqIFVzZWQgdG8gbWF0Y2ggbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZS4gKi8KdmFyIHJlVHJpbSA9IC9eXHMrfFxzKyQvZzsKCi8qKiBVc2VkIHRvIGRldGVjdCBiYWQgc2lnbmVkIGhleGFkZWNpbWFsIHN0cmluZyB2YWx1ZXMuICovCnZhciByZUlzQmFkSGV4ID0gL15bLStdMHhbMC05YS1mXSskL2k7CgovKiogVXNlZCB0byBkZXRlY3QgYmluYXJ5IHN0cmluZyB2YWx1ZXMuICovCnZhciByZUlzQmluYXJ5ID0gL14wYlswMV0rJC9pOwoKLyoqIFVzZWQgdG8gZGV0ZWN0IG9jdGFsIHN0cmluZyB2YWx1ZXMuICovCnZhciByZUlzT2N0YWwgPSAvXjBvWzAtN10rJC9pOwoKLyoqIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHdpdGhvdXQgYSBkZXBlbmRlbmN5IG9uIGByb290YC4gKi8KdmFyIGZyZWVQYXJzZUludCA9IHBhcnNlSW50OwoKLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi8KdmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbCAmJiBnbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgZ2xvYmFsOwoKLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi8KdmFyIGZyZWVTZWxmID0gdHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGY7CgovKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi8KdmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7CgovKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovCnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7CgovKioKICogVXNlZCB0byByZXNvbHZlIHRoZQogKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZykKICogb2YgdmFsdWVzLgogKi8KdmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7CgovKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovCnZhciBuYXRpdmVNYXggPSBNYXRoLm1heCwKICAgIG5hdGl2ZU1pbiA9IE1hdGgubWluOwoKLyoqCiAqIEdldHMgdGhlIHRpbWVzdGFtcCBvZiB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IGhhdmUgZWxhcHNlZCBzaW5jZQogKiB0aGUgVW5peCBlcG9jaCAoMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDKS4KICoKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgXwogKiBAc2luY2UgMi40LjAKICogQGNhdGVnb3J5IERhdGUKICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXN0YW1wLgogKiBAZXhhbXBsZQogKgogKiBfLmRlZmVyKGZ1bmN0aW9uKHN0YW1wKSB7CiAqICAgY29uc29sZS5sb2coXy5ub3coKSAtIHN0YW1wKTsKICogfSwgXy5ub3coKSk7CiAqIC8vID0+IExvZ3MgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaXQgdG9vayBmb3IgdGhlIGRlZmVycmVkIGludm9jYXRpb24uCiAqLwp2YXIgbm93ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIHJvb3QuRGF0ZS5ub3coKTsKfTsKCi8qKgogKiBDcmVhdGVzIGEgZGVib3VuY2VkIGZ1bmN0aW9uIHRoYXQgZGVsYXlzIGludm9raW5nIGBmdW5jYCB1bnRpbCBhZnRlciBgd2FpdGAKICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzCiAqIGludm9rZWQuIFRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgIG1ldGhvZCB0byBjYW5jZWwKICogZGVsYXllZCBgZnVuY2AgaW52b2NhdGlvbnMgYW5kIGEgYGZsdXNoYCBtZXRob2QgdG8gaW1tZWRpYXRlbHkgaW52b2tlIHRoZW0uCiAqIFByb3ZpZGUgYG9wdGlvbnNgIHRvIGluZGljYXRlIHdoZXRoZXIgYGZ1bmNgIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZQogKiBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlIG9mIHRoZSBgd2FpdGAgdGltZW91dC4gVGhlIGBmdW5jYCBpcyBpbnZva2VkCiAqIHdpdGggdGhlIGxhc3QgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24uIFN1YnNlcXVlbnQKICogY2FsbHMgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2AKICogaW52b2NhdGlvbi4KICoKICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpcwogKiBpbnZva2VkIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0IG9ubHkgaWYgdGhlIGRlYm91bmNlZCBmdW5jdGlvbgogKiBpcyBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuCiAqCiAqIElmIGB3YWl0YCBpcyBgMGAgYW5kIGBsZWFkaW5nYCBpcyBgZmFsc2VgLCBgZnVuY2AgaW52b2NhdGlvbiBpcyBkZWZlcnJlZAogKiB1bnRpbCB0byB0aGUgbmV4dCB0aWNrLCBzaW1pbGFyIHRvIGBzZXRUaW1lb3V0YCB3aXRoIGEgdGltZW91dCBvZiBgMGAuCiAqCiAqIFNlZSBbRGF2aWQgQ29yYmFjaG8ncyBhcnRpY2xlXShodHRwczovL2Nzcy10cmlja3MuY29tL2RlYm91bmNpbmctdGhyb3R0bGluZy1leHBsYWluZWQtZXhhbXBsZXMvKQogKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLmRlYm91bmNlYCBhbmQgYF8udGhyb3R0bGVgLgogKgogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBfCiAqIEBzaW5jZSAwLjEuMAogKiBAY2F0ZWdvcnkgRnVuY3Rpb24KICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVib3VuY2UuCiAqIEBwYXJhbSB7bnVtYmVyfSBbd2FpdD0wXSBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheS4KICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBUaGUgb3B0aW9ucyBvYmplY3QuCiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz1mYWxzZV0KICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC4KICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm1heFdhaXRdCiAqICBUaGUgbWF4aW11bSB0aW1lIGBmdW5jYCBpcyBhbGxvd2VkIHRvIGJlIGRlbGF5ZWQgYmVmb3JlIGl0J3MgaW52b2tlZC4KICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXQogKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dC4KICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZGVib3VuY2VkIGZ1bmN0aW9uLgogKiBAZXhhbXBsZQogKgogKiAvLyBBdm9pZCBjb3N0bHkgY2FsY3VsYXRpb25zIHdoaWxlIHRoZSB3aW5kb3cgc2l6ZSBpcyBpbiBmbHV4LgogKiBqUXVlcnkod2luZG93KS5vbigncmVzaXplJywgXy5kZWJvdW5jZShjYWxjdWxhdGVMYXlvdXQsIDE1MCkpOwogKgogKiAvLyBJbnZva2UgYHNlbmRNYWlsYCB3aGVuIGNsaWNrZWQsIGRlYm91bmNpbmcgc3Vic2VxdWVudCBjYWxscy4KICogalF1ZXJ5KGVsZW1lbnQpLm9uKCdjbGljaycsIF8uZGVib3VuY2Uoc2VuZE1haWwsIDMwMCwgewogKiAgICdsZWFkaW5nJzogdHJ1ZSwKICogICAndHJhaWxpbmcnOiBmYWxzZQogKiB9KSk7CiAqCiAqIC8vIEVuc3VyZSBgYmF0Y2hMb2dgIGlzIGludm9rZWQgb25jZSBhZnRlciAxIHNlY29uZCBvZiBkZWJvdW5jZWQgY2FsbHMuCiAqIHZhciBkZWJvdW5jZWQgPSBfLmRlYm91bmNlKGJhdGNoTG9nLCAyNTAsIHsgJ21heFdhaXQnOiAxMDAwIH0pOwogKiB2YXIgc291cmNlID0gbmV3IEV2ZW50U291cmNlKCcvc3RyZWFtJyk7CiAqIGpRdWVyeShzb3VyY2UpLm9uKCdtZXNzYWdlJywgZGVib3VuY2VkKTsKICoKICogLy8gQ2FuY2VsIHRoZSB0cmFpbGluZyBkZWJvdW5jZWQgaW52b2NhdGlvbi4KICogalF1ZXJ5KHdpbmRvdykub24oJ3BvcHN0YXRlJywgZGVib3VuY2VkLmNhbmNlbCk7CiAqLwpmdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7CiAgdmFyIGxhc3RBcmdzLAogICAgICBsYXN0VGhpcywKICAgICAgbWF4V2FpdCwKICAgICAgcmVzdWx0LAogICAgICB0aW1lcklkLAogICAgICBsYXN0Q2FsbFRpbWUsCiAgICAgIGxhc3RJbnZva2VUaW1lID0gMCwKICAgICAgbGVhZGluZyA9IGZhbHNlLAogICAgICBtYXhpbmcgPSBmYWxzZSwKICAgICAgdHJhaWxpbmcgPSB0cnVlOwoKICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpOwogIH0KICB3YWl0ID0gdG9OdW1iZXIod2FpdCkgfHwgMDsKICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHsKICAgIGxlYWRpbmcgPSAhIW9wdGlvbnMubGVhZGluZzsKICAgIG1heGluZyA9ICdtYXhXYWl0JyBpbiBvcHRpb25zOwogICAgbWF4V2FpdCA9IG1heGluZyA/IG5hdGl2ZU1heCh0b051bWJlcihvcHRpb25zLm1heFdhaXQpIHx8IDAsIHdhaXQpIDogbWF4V2FpdDsKICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7CiAgfQoKICBmdW5jdGlvbiBpbnZva2VGdW5jKHRpbWUpIHsKICAgIHZhciBhcmdzID0gbGFzdEFyZ3MsCiAgICAgICAgdGhpc0FyZyA9IGxhc3RUaGlzOwoKICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7CiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7CiAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpOwogICAgcmV0dXJuIHJlc3VsdDsKICB9CgogIGZ1bmN0aW9uIGxlYWRpbmdFZGdlKHRpbWUpIHsKICAgIC8vIFJlc2V0IGFueSBgbWF4V2FpdGAgdGltZXIuCiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7CiAgICAvLyBTdGFydCB0aGUgdGltZXIgZm9yIHRoZSB0cmFpbGluZyBlZGdlLgogICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTsKICAgIC8vIEludm9rZSB0aGUgbGVhZGluZyBlZGdlLgogICAgcmV0dXJuIGxlYWRpbmcgPyBpbnZva2VGdW5jKHRpbWUpIDogcmVzdWx0OwogIH0KCiAgZnVuY3Rpb24gcmVtYWluaW5nV2FpdCh0aW1lKSB7CiAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLAogICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWUsCiAgICAgICAgcmVzdWx0ID0gd2FpdCAtIHRpbWVTaW5jZUxhc3RDYWxsOwoKICAgIHJldHVybiBtYXhpbmcgPyBuYXRpdmVNaW4ocmVzdWx0LCBtYXhXYWl0IC0gdGltZVNpbmNlTGFzdEludm9rZSkgOiByZXN1bHQ7CiAgfQoKICBmdW5jdGlvbiBzaG91bGRJbnZva2UodGltZSkgewogICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSwKICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lOwoKICAgIC8vIEVpdGhlciB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsLCBhY3Rpdml0eSBoYXMgc3RvcHBlZCBhbmQgd2UncmUgYXQgdGhlCiAgICAvLyB0cmFpbGluZyBlZGdlLCB0aGUgc3lzdGVtIHRpbWUgaGFzIGdvbmUgYmFja3dhcmRzIGFuZCB3ZSdyZSB0cmVhdGluZwogICAgLy8gaXQgYXMgdGhlIHRyYWlsaW5nIGVkZ2UsIG9yIHdlJ3ZlIGhpdCB0aGUgYG1heFdhaXRgIGxpbWl0LgogICAgcmV0dXJuIChsYXN0Q2FsbFRpbWUgPT09IHVuZGVmaW5lZCB8fCAodGltZVNpbmNlTGFzdENhbGwgPj0gd2FpdCkgfHwKICAgICAgKHRpbWVTaW5jZUxhc3RDYWxsIDwgMCkgfHwgKG1heGluZyAmJiB0aW1lU2luY2VMYXN0SW52b2tlID49IG1heFdhaXQpKTsKICB9CgogIGZ1bmN0aW9uIHRpbWVyRXhwaXJlZCgpIHsKICAgIHZhciB0aW1lID0gbm93KCk7CiAgICBpZiAoc2hvdWxkSW52b2tlKHRpbWUpKSB7CiAgICAgIHJldHVybiB0cmFpbGluZ0VkZ2UodGltZSk7CiAgICB9CiAgICAvLyBSZXN0YXJ0IHRoZSB0aW1lci4KICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgcmVtYWluaW5nV2FpdCh0aW1lKSk7CiAgfQoKICBmdW5jdGlvbiB0cmFpbGluZ0VkZ2UodGltZSkgewogICAgdGltZXJJZCA9IHVuZGVmaW5lZDsKCiAgICAvLyBPbmx5IGludm9rZSBpZiB3ZSBoYXZlIGBsYXN0QXJnc2Agd2hpY2ggbWVhbnMgYGZ1bmNgIGhhcyBiZWVuCiAgICAvLyBkZWJvdW5jZWQgYXQgbGVhc3Qgb25jZS4KICAgIGlmICh0cmFpbGluZyAmJiBsYXN0QXJncykgewogICAgICByZXR1cm4gaW52b2tlRnVuYyh0aW1lKTsKICAgIH0KICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7CiAgICByZXR1cm4gcmVzdWx0OwogIH0KCiAgZnVuY3Rpb24gY2FuY2VsKCkgewogICAgaWYgKHRpbWVySWQgIT09IHVuZGVmaW5lZCkgewogICAgICBjbGVhclRpbWVvdXQodGltZXJJZCk7CiAgICB9CiAgICBsYXN0SW52b2tlVGltZSA9IDA7CiAgICBsYXN0QXJncyA9IGxhc3RDYWxsVGltZSA9IGxhc3RUaGlzID0gdGltZXJJZCA9IHVuZGVmaW5lZDsKICB9CgogIGZ1bmN0aW9uIGZsdXNoKCkgewogICAgcmV0dXJuIHRpbWVySWQgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IHRyYWlsaW5nRWRnZShub3coKSk7CiAgfQoKICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7CiAgICB2YXIgdGltZSA9IG5vdygpLAogICAgICAgIGlzSW52b2tpbmcgPSBzaG91bGRJbnZva2UodGltZSk7CgogICAgbGFzdEFyZ3MgPSBhcmd1bWVudHM7CiAgICBsYXN0VGhpcyA9IHRoaXM7CiAgICBsYXN0Q2FsbFRpbWUgPSB0aW1lOwoKICAgIGlmIChpc0ludm9raW5nKSB7CiAgICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gbGVhZGluZ0VkZ2UobGFzdENhbGxUaW1lKTsKICAgICAgfQogICAgICBpZiAobWF4aW5nKSB7CiAgICAgICAgLy8gSGFuZGxlIGludm9jYXRpb25zIGluIGEgdGlnaHQgbG9vcC4KICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpOwogICAgICAgIHJldHVybiBpbnZva2VGdW5jKGxhc3RDYWxsVGltZSk7CiAgICAgIH0KICAgIH0KICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHsKICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTsKICAgIH0KICAgIHJldHVybiByZXN1bHQ7CiAgfQogIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7CiAgZGVib3VuY2VkLmZsdXNoID0gZmx1c2g7CiAgcmV0dXJuIGRlYm91bmNlZDsKfQoKLyoqCiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZQogKiBbbGFuZ3VhZ2UgdHlwZV0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMpCiAqIG9mIGBPYmplY3RgLiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYCkKICoKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgXwogKiBAc2luY2UgMC4xLjAKICogQGNhdGVnb3J5IExhbmcKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLgogKiBAZXhhbXBsZQogKgogKiBfLmlzT2JqZWN0KHt9KTsKICogLy8gPT4gdHJ1ZQogKgogKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7CiAqIC8vID0+IHRydWUKICoKICogXy5pc09iamVjdChfLm5vb3ApOwogKiAvLyA9PiB0cnVlCiAqCiAqIF8uaXNPYmplY3QobnVsbCk7CiAqIC8vID0+IGZhbHNlCiAqLwpmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkgewogIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlOwogIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7Cn0KCi8qKgogKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGAKICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiAib2JqZWN0Ii4KICoKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgXwogKiBAc2luY2UgNC4wLjAKICogQGNhdGVnb3J5IExhbmcKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuCiAqIEBleGFtcGxlCiAqCiAqIF8uaXNPYmplY3RMaWtlKHt9KTsKICogLy8gPT4gdHJ1ZQogKgogKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pOwogKiAvLyA9PiB0cnVlCiAqCiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7CiAqIC8vID0+IGZhbHNlCiAqCiAqIF8uaXNPYmplY3RMaWtlKG51bGwpOwogKiAvLyA9PiBmYWxzZQogKi8KZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7CiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnOwp9CgovKioKICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTeW1ib2xgIHByaW1pdGl2ZSBvciBvYmplY3QuCiAqCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIF8KICogQHNpbmNlIDQuMC4wCiAqIEBjYXRlZ29yeSBMYW5nCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHN5bWJvbCwgZWxzZSBgZmFsc2VgLgogKiBAZXhhbXBsZQogKgogKiBfLmlzU3ltYm9sKFN5bWJvbC5pdGVyYXRvcik7CiAqIC8vID0+IHRydWUKICoKICogXy5pc1N5bWJvbCgnYWJjJyk7CiAqIC8vID0+IGZhbHNlCiAqLwpmdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkgewogIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N5bWJvbCcgfHwKICAgIChpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN5bWJvbFRhZyk7Cn0KCi8qKgogKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgbnVtYmVyLgogKgogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBfCiAqIEBzaW5jZSA0LjAuMAogKiBAY2F0ZWdvcnkgTGFuZwogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLgogKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBudW1iZXIuCiAqIEBleGFtcGxlCiAqCiAqIF8udG9OdW1iZXIoMy4yKTsKICogLy8gPT4gMy4yCiAqCiAqIF8udG9OdW1iZXIoTnVtYmVyLk1JTl9WQUxVRSk7CiAqIC8vID0+IDVlLTMyNAogKgogKiBfLnRvTnVtYmVyKEluZmluaXR5KTsKICogLy8gPT4gSW5maW5pdHkKICoKICogXy50b051bWJlcignMy4yJyk7CiAqIC8vID0+IDMuMgogKi8KZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHsKICBpZiAodHlwZW9mIHZhbHVlID09ICdudW1iZXInKSB7CiAgICByZXR1cm4gdmFsdWU7CiAgfQogIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHsKICAgIHJldHVybiBOQU47CiAgfQogIGlmIChpc09iamVjdCh2YWx1ZSkpIHsKICAgIHZhciBvdGhlciA9IHR5cGVvZiB2YWx1ZS52YWx1ZU9mID09ICdmdW5jdGlvbicgPyB2YWx1ZS52YWx1ZU9mKCkgOiB2YWx1ZTsKICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gKG90aGVyICsgJycpIDogb3RoZXI7CiAgfQogIGlmICh0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIHsKICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogK3ZhbHVlOwogIH0KICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UocmVUcmltLCAnJyk7CiAgdmFyIGlzQmluYXJ5ID0gcmVJc0JpbmFyeS50ZXN0KHZhbHVlKTsKICByZXR1cm4gKGlzQmluYXJ5IHx8IHJlSXNPY3RhbC50ZXN0KHZhbHVlKSkKICAgID8gZnJlZVBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCBpc0JpbmFyeSA/IDIgOiA4KQogICAgOiAocmVJc0JhZEhleC50ZXN0KHZhbHVlKSA/IE5BTiA6ICt2YWx1ZSk7Cn0KCm1vZHVsZS5leHBvcnRzID0gZGVib3VuY2U7CgovKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygzKSkpCgovKioqLyB9KSwKLyogMTIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLyohCiAqIGluLXZpZXcgMC42LjEgLSBHZXQgbm90aWZpZWQgd2hlbiBhIERPTSBlbGVtZW50IGVudGVycyBvciBleGl0cyB0aGUgdmlld3BvcnQuCiAqIENvcHlyaWdodCAoYykgMjAxNiBDYW0gV2llZ2VydCA8Y2FtQGNhbXdpZWdlcnQuY29tPiAtIGh0dHBzOi8vY2Ftd2llZ2VydC5naXRodWIuaW8vaW4tdmlldwogKiBMaWNlbnNlOiBNSVQKICovCiFmdW5jdGlvbih0LGUpeyB0cnVlP21vZHVsZS5leHBvcnRzPWUoKToiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXSxlKToib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5pblZpZXc9ZSgpOnQuaW5WaWV3PWUoKX0odGhpcyxmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHIpe2lmKG5bcl0pcmV0dXJuIG5bcl0uZXhwb3J0czt2YXIgaT1uW3JdPXtleHBvcnRzOnt9LGlkOnIsbG9hZGVkOiExfTtyZXR1cm4gdFtyXS5jYWxsKGkuZXhwb3J0cyxpLGkuZXhwb3J0cyxlKSxpLmxvYWRlZD0hMCxpLmV4cG9ydHN9dmFyIG49e307cmV0dXJuIGUubT10LGUuYz1uLGUucD0iIixlKDApfShbZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ImRlZmF1bHQiOnR9fXZhciBpPW4oMiksbz1yKGkpO3QuZXhwb3J0cz1vWyJkZWZhdWx0Il19LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0KXt2YXIgZT10eXBlb2YgdDtyZXR1cm4gbnVsbCE9dCYmKCJvYmplY3QiPT1lfHwiZnVuY3Rpb24iPT1lKX10LmV4cG9ydHM9bn0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ImRlZmF1bHQiOnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1uKDkpLG89cihpKSx1PW4oMyksZj1yKHUpLHM9big0KSxjPWZ1bmN0aW9uKCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cpe3ZhciB0PTEwMCxlPVsic2Nyb2xsIiwicmVzaXplIiwibG9hZCJdLG49e2hpc3Rvcnk6W119LHI9e29mZnNldDp7fSx0aHJlc2hvbGQ6MCx0ZXN0OnMuaW5WaWV3cG9ydH0saT0oMCxvWyJkZWZhdWx0Il0pKGZ1bmN0aW9uKCl7bi5oaXN0b3J5LmZvckVhY2goZnVuY3Rpb24odCl7blt0XS5jaGVjaygpfSl9LHQpO2UuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gYWRkRXZlbnRMaXN0ZW5lcih0LGkpfSksd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXImJmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGZ1bmN0aW9uKCl7bmV3IE11dGF0aW9uT2JzZXJ2ZXIoaSkub2JzZXJ2ZShkb2N1bWVudC5ib2R5LHthdHRyaWJ1dGVzOiEwLGNoaWxkTGlzdDohMCxzdWJ0cmVlOiEwfSl9KTt2YXIgdT1mdW5jdGlvbih0KXtpZigic3RyaW5nIj09dHlwZW9mIHQpe3ZhciBlPVtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0KSk7cmV0dXJuIG4uaGlzdG9yeS5pbmRleE9mKHQpPi0xP25bdF0uZWxlbWVudHM9ZTooblt0XT0oMCxmWyJkZWZhdWx0Il0pKGUsciksbi5oaXN0b3J5LnB1c2godCkpLG5bdF19fTtyZXR1cm4gdS5vZmZzZXQ9ZnVuY3Rpb24odCl7aWYodm9pZCAwPT09dClyZXR1cm4gci5vZmZzZXQ7dmFyIGU9ZnVuY3Rpb24odCl7cmV0dXJuIm51bWJlciI9PXR5cGVvZiB0fTtyZXR1cm5bInRvcCIsInJpZ2h0IiwiYm90dG9tIiwibGVmdCJdLmZvckVhY2goZSh0KT9mdW5jdGlvbihlKXtyZXR1cm4gci5vZmZzZXRbZV09dH06ZnVuY3Rpb24obil7cmV0dXJuIGUodFtuXSk/ci5vZmZzZXRbbl09dFtuXTpudWxsfSksci5vZmZzZXR9LHUudGhyZXNob2xkPWZ1bmN0aW9uKHQpe3JldHVybiJudW1iZXIiPT10eXBlb2YgdCYmdD49MCYmdDw9MT9yLnRocmVzaG9sZD10OnIudGhyZXNob2xkfSx1LnRlc3Q9ZnVuY3Rpb24odCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHQ/ci50ZXN0PXQ6ci50ZXN0fSx1LmlzPWZ1bmN0aW9uKHQpe3JldHVybiByLnRlc3QodCxyKX0sdS5vZmZzZXQoMCksdX19O2VbImRlZmF1bHQiXT1jKCl9LGZ1bmN0aW9uKHQsZSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxyJiZ0KGUsciksZX19KCksaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxyKXtuKHRoaXMsdCksdGhpcy5vcHRpb25zPXIsdGhpcy5lbGVtZW50cz1lLHRoaXMuY3VycmVudD1bXSx0aGlzLmhhbmRsZXJzPXtlbnRlcjpbXSxleGl0OltdfSx0aGlzLnNpbmdsZXM9e2VudGVyOltdLGV4aXQ6W119fXJldHVybiByKHQsW3trZXk6ImNoZWNrIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMuZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgbj10Lm9wdGlvbnMudGVzdChlLHQub3B0aW9ucykscj10LmN1cnJlbnQuaW5kZXhPZihlKSxpPXI+LTEsbz1uJiYhaSx1PSFuJiZpO28mJih0LmN1cnJlbnQucHVzaChlKSx0LmVtaXQoImVudGVyIixlKSksdSYmKHQuY3VycmVudC5zcGxpY2UociwxKSx0LmVtaXQoImV4aXQiLGUpKX0pLHRoaXN9fSx7a2V5OiJvbiIsdmFsdWU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5oYW5kbGVyc1t0XS5wdXNoKGUpLHRoaXN9fSx7a2V5OiJvbmNlIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnNpbmdsZXNbdF0udW5zaGlmdChlKSx0aGlzfX0se2tleToiZW1pdCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtmb3IoO3RoaXMuc2luZ2xlc1t0XS5sZW5ndGg7KXRoaXMuc2luZ2xlc1t0XS5wb3AoKShlKTtmb3IodmFyIG49dGhpcy5oYW5kbGVyc1t0XS5sZW5ndGg7LS1uPi0xOyl0aGlzLmhhbmRsZXJzW3RdW25dKGUpO3JldHVybiB0aGlzfX1dKSx0fSgpO2VbImRlZmF1bHQiXT1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgaSh0LGUpfX0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbih0LGUpe3ZhciBuPXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkscj1uLnRvcCxpPW4ucmlnaHQsbz1uLmJvdHRvbSx1PW4ubGVmdCxmPW4ud2lkdGgscz1uLmhlaWdodCxjPXt0Om8scjp3aW5kb3cuaW5uZXJXaWR0aC11LGI6d2luZG93LmlubmVySGVpZ2h0LXIsbDppfSxhPXt4OmUudGhyZXNob2xkKmYseTplLnRocmVzaG9sZCpzfTtyZXR1cm4gYy50PmUub2Zmc2V0LnRvcCthLnkmJmMucj5lLm9mZnNldC5yaWdodCthLngmJmMuYj5lLm9mZnNldC5ib3R0b20rYS55JiZjLmw+ZS5vZmZzZXQubGVmdCthLnh9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLGUuaW5WaWV3cG9ydD1ufSxmdW5jdGlvbih0LGUpeyhmdW5jdGlvbihlKXt2YXIgbj0ib2JqZWN0Ij09dHlwZW9mIGUmJmUmJmUuT2JqZWN0PT09T2JqZWN0JiZlO3QuZXhwb3J0cz1ufSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9big1KSxpPSJvYmplY3QiPT10eXBlb2Ygc2VsZiYmc2VsZiYmc2VsZi5PYmplY3Q9PT1PYmplY3QmJnNlbGYsbz1yfHxpfHxGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpO3QuZXhwb3J0cz1vfSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gcih0LGUsbil7ZnVuY3Rpb24gcihlKXt2YXIgbj14LHI9bTtyZXR1cm4geD1tPXZvaWQgMCxFPWUsdz10LmFwcGx5KHIsbil9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gRT10LGo9c2V0VGltZW91dChoLGUpLE0/cih0KTp3fWZ1bmN0aW9uIGwodCl7dmFyIG49dC1PLHI9dC1FLGk9ZS1uO3JldHVybiBfP2MoaSxnLXIpOml9ZnVuY3Rpb24gZCh0KXt2YXIgbj10LU8scj10LUU7cmV0dXJuIHZvaWQgMD09PU98fG4+PWV8fG48MHx8XyYmcj49Z31mdW5jdGlvbiBoKCl7dmFyIHQ9bygpO3JldHVybiBkKHQpP3AodCk6dm9pZChqPXNldFRpbWVvdXQoaCxsKHQpKSl9ZnVuY3Rpb24gcCh0KXtyZXR1cm4gaj12b2lkIDAsVCYmeD9yKHQpOih4PW09dm9pZCAwLHcpfWZ1bmN0aW9uIHYoKXt2b2lkIDAhPT1qJiZjbGVhclRpbWVvdXQoaiksRT0wLHg9Tz1tPWo9dm9pZCAwfWZ1bmN0aW9uIHkoKXtyZXR1cm4gdm9pZCAwPT09aj93OnAobygpKX1mdW5jdGlvbiBiKCl7dmFyIHQ9bygpLG49ZCh0KTtpZih4PWFyZ3VtZW50cyxtPXRoaXMsTz10LG4pe2lmKHZvaWQgMD09PWopcmV0dXJuIGEoTyk7aWYoXylyZXR1cm4gaj1zZXRUaW1lb3V0KGgsZSkscihPKX1yZXR1cm4gdm9pZCAwPT09aiYmKGo9c2V0VGltZW91dChoLGUpKSx3fXZhciB4LG0sZyx3LGosTyxFPTAsTT0hMSxfPSExLFQ9ITA7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcihmKTtyZXR1cm4gZT11KGUpfHwwLGkobikmJihNPSEhbi5sZWFkaW5nLF89Im1heFdhaXQiaW4gbixnPV8/cyh1KG4ubWF4V2FpdCl8fDAsZSk6ZyxUPSJ0cmFpbGluZyJpbiBuPyEhbi50cmFpbGluZzpUKSxiLmNhbmNlbD12LGIuZmx1c2g9eSxifXZhciBpPW4oMSksbz1uKDgpLHU9bigxMCksZj0iRXhwZWN0ZWQgYSBmdW5jdGlvbiIscz1NYXRoLm1heCxjPU1hdGgubWluO3QuZXhwb3J0cz1yfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9big2KSxpPWZ1bmN0aW9uKCl7cmV0dXJuIHIuRGF0ZS5ub3coKX07dC5leHBvcnRzPWl9LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiByKHQsZSxuKXt2YXIgcj0hMCxmPSEwO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IodSk7cmV0dXJuIG8obikmJihyPSJsZWFkaW5nImluIG4/ISFuLmxlYWRpbmc6cixmPSJ0cmFpbGluZyJpbiBuPyEhbi50cmFpbGluZzpmKSxpKHQsZSx7bGVhZGluZzpyLG1heFdhaXQ6ZSx0cmFpbGluZzpmfSl9dmFyIGk9big3KSxvPW4oMSksdT0iRXhwZWN0ZWQgYSBmdW5jdGlvbiI7dC5leHBvcnRzPXJ9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdH10LmV4cG9ydHM9bn1dKX0pOwoKLyoqKi8gfSksCi8qIDEzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwogICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CiAgICB9Owp9KSgpOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwp2YXIgcHJvdmlkZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7CnZhciB1dGlsc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKdmFyIFpoaWh1Wmh1YW5sYW5Qcm92aWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIF9fZXh0ZW5kcyhaaGlodVpodWFubGFuUHJvdmlkZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBaaGlodVpodWFubGFuUHJvdmlkZXIoKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpczsKICAgICAgICBfdGhpcy50ZXN0ID0gL2xpbmtcLnpoaWh1XC5jb21cL1w/dGFyZ2V0PSguKikvOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIFpoaWh1Wmh1YW5sYW5Qcm92aWRlci5wcm90b3R5cGUub25TY3JvbGwgPSBmdW5jdGlvbiAoYUVsZW1lbnRMaXN0KSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgICBhRWxlbWVudExpc3QuZm9yRWFjaChmdW5jdGlvbiAoYUVsZW1lbnQpIHsKICAgICAgICAgICAgX3RoaXMub25Ib3ZlcihhRWxlbWVudCk7CiAgICAgICAgfSk7CiAgICB9OwogICAgWmhpaHVaaHVhbmxhblByb3ZpZGVyLnByb3RvdHlwZS5vbkhvdmVyID0gZnVuY3Rpb24gKGFFbGVtZW50KSB7CiAgICAgICAgdGhpcy5lbWl0KHRoaXMuQU5USV9SRURJUkVDVF9ET05FX0VWRU5ULCBhRWxlbWVudCwgdXRpbHNfMS5tYXRjaExpbmtGcm9tVXJsKGFFbGVtZW50LCB0aGlzLnRlc3QpKTsKICAgIH07CiAgICByZXR1cm4gWmhpaHVaaHVhbmxhblByb3ZpZGVyOwp9KHByb3ZpZGVyXzEuUHJvdmlkZXIpKTsKZXhwb3J0cy5aaGlodVpodWFubGFuUHJvdmlkZXIgPSBaaGlodVpodWFubGFuUHJvdmlkZXI7CgoKLyoqKi8gfSksCi8qIDE0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7CglpZih0cnVlKQoJCW1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpOwoJZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpCgkJZGVmaW5lKFtdLCBmYWN0b3J5KTsKCWVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKQoJCWV4cG9ydHNbIkV2ZW50RW1pdHRlciJdID0gZmFjdG9yeSgpOwoJZWxzZQoJCXJvb3RbIkV2ZW50RW1pdHRlciJdID0gZmFjdG9yeSgpOwp9KSh0aGlzLCBmdW5jdGlvbigpIHsKcmV0dXJuIC8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXAKLyoqKioqKi8gCS8vIFRoZSBtb2R1bGUgY2FjaGUKLyoqKioqKi8gCXZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307CgovKioqKioqLyAJLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb24KLyoqKioqKi8gCWZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHsKCi8qKioqKiovIAkJLy8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlCi8qKioqKiovIAkJaWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pCi8qKioqKiovIAkJCXJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzOwoKLyoqKioqKi8gCQkvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKQovKioqKioqLyAJCXZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHsKLyoqKioqKi8gCQkJaTogbW9kdWxlSWQsCi8qKioqKiovIAkJCWw6IGZhbHNlLAovKioqKioqLyAJCQlleHBvcnRzOiB7fQovKioqKioqLyAJCX07CgovKioqKioqLyAJCS8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvbgovKioqKioqLyAJCW1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pOwoKLyoqKioqKi8gCQkvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkCi8qKioqKiovIAkJbW9kdWxlLmwgPSB0cnVlOwoKLyoqKioqKi8gCQkvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZQovKioqKioqLyAJCXJldHVybiBtb2R1bGUuZXhwb3J0czsKLyoqKioqKi8gCX0KCgovKioqKioqLyAJLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXykKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7CgovKioqKioqLyAJLy8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGUKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7CgovKioqKioqLyAJLy8gaWRlbnRpdHkgZnVuY3Rpb24gZm9yIGNhbGxpbmcgaGFybW9ueSBpbXBvcnRzIHdpdGggdGhlIGNvcnJlY3QgY29udGV4dAovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5pID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9OwoKLyoqKioqKi8gCS8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0cwovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7Ci8qKioqKiovIAkJaWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkgewovKioqKioqLyAJCQlPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgewovKioqKioqLyAJCQkJY29uZmlndXJhYmxlOiBmYWxzZSwKLyoqKioqKi8gCQkJCWVudW1lcmFibGU6IHRydWUsCi8qKioqKiovIAkJCQlnZXQ6IGdldHRlcgovKioqKioqLyAJCQl9KTsKLyoqKioqKi8gCQl9Ci8qKioqKiovIAl9OwoKLyoqKioqKi8gCS8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHsKLyoqKioqKi8gCQl2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID8KLyoqKioqKi8gCQkJZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDoKLyoqKioqKi8gCQkJZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTsKLyoqKioqKi8gCQlfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7Ci8qKioqKiovIAkJcmV0dXJuIGdldHRlcjsKLyoqKioqKi8gCX07CgovKioqKioqLyAJLy8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07CgovKioqKioqLyAJLy8gX193ZWJwYWNrX3B1YmxpY19wYXRoX18KLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ucCA9ICIiOwoKLyoqKioqKi8gCS8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0cwovKioqKioqLyAJcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7Ci8qKioqKiovIH0pCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCi8qKioqKiovIChbCi8qIDAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoX193ZWJwYWNrX2V4cG9ydHNfXywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwovKioKICogQ3JlYXRlZCBieSBheGV0cm95IG9uIDIwMTcvMy82LgogKi8KLy8vIDxyZWZlcmVuY2UgcGF0aD0iLi9pbmRleC5kLnRzIiAvPgoKdmFyIG5hbWUgPSAnQGF4ZXRyb3kvZXZlbnQtZW1pdHRlci5qcyc7CnZhciBpZF9JZGVudGlmaWVyID0gJ19faWRfXyc7CgpmdW5jdGlvbiByYW5kb21JZCgpIHsKICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDE2KTsKfQoKZnVuY3Rpb24gZmluZEluZGV4QnlJZChpZCkgewogIHJldHVybiB0aGlzLmZpbmRJbmRleChmdW5jdGlvbiAoY2FsbGJhY2spIHsKICAgIHJldHVybiBjYWxsYmFja1tpZF9JZGVudGlmaWVyXSA9PT0gaWQ7CiAgfSk7Cn0KCnZhciBkZWZpbmVQcm9wZXJ0eSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTsKCmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHsKICB0aGlzW25hbWVdID0ge307CiAgZGVmaW5lUHJvcGVydHkgJiYgZGVmaW5lUHJvcGVydHkodGhpcywgbmFtZSwgeyBlbnVtZXJhYmxlOiBmYWxzZSwgY29uZmlndXJhYmxlOiBmYWxzZSB9KTsKfQoKdmFyIHByb3RvdHlwZSA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGU7Cgpwcm90b3R5cGUuY29uc3RydWN0b3IgPSBFdmVudEVtaXR0ZXI7Cgpwcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXZlbnQsIGxpc3RlbmVyKSB7CiAgdmFyIGV2ZW50cyA9IHRoaXNbbmFtZV0sCiAgICAgIGNvbnRhaW5lciA9IGV2ZW50c1tldmVudF0gPSBldmVudHNbZXZlbnRdIHx8IFtdLAogICAgICBpZCA9IHJhbmRvbUlkKCksCiAgICAgIGluZGV4ID0gdm9pZCAwOwogIGxpc3RlbmVyW2lkX0lkZW50aWZpZXJdID0gaWQ7CiAgY29udGFpbmVyLnB1c2gobGlzdGVuZXIpOwogIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICBpbmRleCA9IGZpbmRJbmRleEJ5SWQuY2FsbChjb250YWluZXIsIGlkKTsKICAgIGluZGV4ID49IDAgJiYgY29udGFpbmVyLnNwbGljZShpbmRleCwgMSk7CiAgfTsKfTsKCnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICB0aGlzW25hbWVdW2V2ZW50XSA9IFtdOwp9OwoKcHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewogIHRoaXNbbmFtZV0gPSB7fTsKfTsKCnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gKGV2ZW50LCBsaXN0ZW5lcikgewogIHZhciBzZWxmID0gdGhpcywKICAgICAgZXZlbnRzID0gc2VsZltuYW1lXSwKICAgICAgY29udGFpbmVyID0gZXZlbnRzW2V2ZW50XSA9IGV2ZW50c1tldmVudF0gfHwgW10sCiAgICAgIGlkID0gcmFuZG9tSWQoKSwKICAgICAgaW5kZXggPSB2b2lkIDAsCiAgICAgIGNhbGxiYWNrID0gZnVuY3Rpb24gY2FsbGJhY2soKSB7CiAgICBpbmRleCA9IGZpbmRJbmRleEJ5SWQuY2FsbChjb250YWluZXIsIGlkKTsKICAgIGluZGV4ID49IDAgJiYgY29udGFpbmVyLnNwbGljZShpbmRleCwgMSk7CiAgICBsaXN0ZW5lci5hcHBseShzZWxmLCBhcmd1bWVudHMpOwogIH07CiAgY2FsbGJhY2tbaWRfSWRlbnRpZmllcl0gPSBpZDsKICBjb250YWluZXIucHVzaChjYWxsYmFjayk7Cn07Cgpwcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgc2VsZiA9IHRoaXMsCiAgICAgIGFyZ3YgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cyksCiAgICAgIGV2ZW50ID0gYXJndi5zaGlmdCgpLAogICAgICBldmVudHMgPSBzZWxmW25hbWVdOwogIChldmVudHNbJyonXSB8fCBbXSkuY29uY2F0KGV2ZW50c1tldmVudF0gfHwgW10pLm1hcChmdW5jdGlvbiAobGlzdGVuZXIpIHsKICAgIHJldHVybiBzZWxmLmVtaXR0aW5nKGV2ZW50LCBhcmd2LCBsaXN0ZW5lcik7CiAgfSk7Cn07Cgpwcm90b3R5cGUuZW1pdHRpbmcgPSBmdW5jdGlvbiAoZXZlbnQsIGRhdGFBcnJheSwgbGlzdGVuZXIpIHsKICBsaXN0ZW5lci5hcHBseSh0aGlzLCBkYXRhQXJyYXkpOwp9OwoKLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fWyJkZWZhdWx0Il0gPSBFdmVudEVtaXR0ZXI7CgovKioqLyB9KQovKioqKioqLyBdKTsKfSk7CgovKioqLyB9KSwKLyogMTUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKdmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CnZhciBwcm92aWRlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKdmFyIHV0aWxzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwp2YXIgWmhpaHVEYWlseVByb3ZpZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKFpoaWh1RGFpbHlQcm92aWRlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIFpoaWh1RGFpbHlQcm92aWRlcigpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwogICAgICAgIF90aGlzLnRlc3QgPSAvemhpaHVcLmNvbVwvXD90YXJnZXQ9KC4qKS87CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgWmhpaHVEYWlseVByb3ZpZGVyLnByb3RvdHlwZS5vblNjcm9sbCA9IGZ1bmN0aW9uIChhRWxlbWVudExpc3QpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgIGFFbGVtZW50TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChhRWxlbWVudCkgewogICAgICAgICAgICBfdGhpcy5vbkhvdmVyKGFFbGVtZW50KTsKICAgICAgICB9KTsKICAgIH07CiAgICBaaGlodURhaWx5UHJvdmlkZXIucHJvdG90eXBlLm9uSG92ZXIgPSBmdW5jdGlvbiAoYUVsZW1lbnQpIHsKICAgICAgICB0aGlzLmVtaXQodGhpcy5BTlRJX1JFRElSRUNUX0RPTkVfRVZFTlQsIGFFbGVtZW50LCB1dGlsc18xLm1hdGNoTGlua0Zyb21VcmwoYUVsZW1lbnQsIHRoaXMudGVzdCkpOwogICAgfTsKICAgIHJldHVybiBaaGlodURhaWx5UHJvdmlkZXI7Cn0ocHJvdmlkZXJfMS5Qcm92aWRlcikpOwpleHBvcnRzLlpoaWh1RGFpbHlQcm92aWRlciA9IFpoaWh1RGFpbHlQcm92aWRlcjsKCgovKioqLyB9KSwKLyogMTYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKdmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CnZhciBwcm92aWRlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKdmFyIFRpZWJhUHJvdmlkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICBfX2V4dGVuZHMoVGllYmFQcm92aWRlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIFRpZWJhUHJvdmlkZXIoKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpczsKICAgICAgICBfdGhpcy50ZXN0ID0gL2p1bXBcZCpcLmJkaW1nXC5jb20vOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIFRpZWJhUHJvdmlkZXIucHJvdG90eXBlLm9uU2Nyb2xsID0gZnVuY3Rpb24gKGFFbGVtZW50TGlzdCkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgYUVsZW1lbnRMaXN0LmZvckVhY2goZnVuY3Rpb24gKGFFbGVtZW50KSB7CiAgICAgICAgICAgIF90aGlzLm9uSG92ZXIoYUVsZW1lbnQpOwogICAgICAgIH0pOwogICAgfTsKICAgIFRpZWJhUHJvdmlkZXIucHJvdG90eXBlLm9uSG92ZXIgPSBmdW5jdGlvbiAoYUVsZW1lbnQpIHsKICAgICAgICBpZiAoIXRoaXMudGVzdC50ZXN0KGFFbGVtZW50LmhyZWYpKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgdmFyIHVybCA9ICcnOwogICAgICAgIHZhciB0ZXh0ID0gYUVsZW1lbnQuaW5uZXJUZXh0IHx8IGFFbGVtZW50LnRleHRDb250ZW50IHx8ICcnOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHVybCA9IGRlY29kZVVSSUNvbXBvbmVudCh0ZXh0KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdXJsID0gL2h0dHBzPzpcL1wvLy50ZXN0KHRleHQpID8gdGV4dCA6ICcnOwogICAgICAgIH0KICAgICAgICBpZiAodXJsKSB7CiAgICAgICAgICAgIHRoaXMuZW1pdCh0aGlzLkFOVElfUkVESVJFQ1RfRE9ORV9FVkVOVCwgYUVsZW1lbnQsIHVybCk7CiAgICAgICAgfQogICAgfTsKICAgIHJldHVybiBUaWViYVByb3ZpZGVyOwp9KHByb3ZpZGVyXzEuUHJvdmlkZXIpKTsKZXhwb3J0cy5UaWViYVByb3ZpZGVyID0gVGllYmFQcm92aWRlcjsKCgovKioqLyB9KSwKLyogMTcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKdmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CnZhciBwcm92aWRlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKdmFyIEdvb2dsZVByb3ZpZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKEdvb2dsZVByb3ZpZGVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gR29vZ2xlUHJvdmlkZXIoKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpczsKICAgICAgICBfdGhpcy50ZXN0ID0gL25vdGhpbmcvOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIEdvb2dsZVByb3ZpZGVyLnByb3RvdHlwZS5vblNjcm9sbCA9IGZ1bmN0aW9uIChhRWxlbWVudExpc3QpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgIGFFbGVtZW50TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChhRWxlbWVudCkgewogICAgICAgICAgICBfdGhpcy5vbkhvdmVyKGFFbGVtZW50KTsKICAgICAgICB9KTsKICAgIH07CiAgICBHb29nbGVQcm92aWRlci5wcm90b3R5cGUub25Ib3ZlciA9IGZ1bmN0aW9uIChhRWxlbWVudCkgewogICAgICAgIGlmIChhRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ29ubW91c2Vkb3duJykpIHsKICAgICAgICAgICAgYUVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdvbm1vdXNlZG93bicpOwogICAgICAgIH0KICAgICAgICBpZiAoYUVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWhyZWYnKSkgewogICAgICAgICAgICB2YXIgcmVhbFVybCA9IGFFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1ocmVmJyk7CiAgICAgICAgICAgIHRoaXMuZW1pdCh0aGlzLkFOVElfUkVESVJFQ1RfRE9ORV9FVkVOVCwgYUVsZW1lbnQsIHJlYWxVcmwpOwogICAgICAgIH0KICAgIH07CiAgICByZXR1cm4gR29vZ2xlUHJvdmlkZXI7Cn0ocHJvdmlkZXJfMS5Qcm92aWRlcikpOwpleHBvcnRzLkdvb2dsZVByb3ZpZGVyID0gR29vZ2xlUHJvdmlkZXI7CgoKLyoqKi8gfSksCi8qIDE4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwogICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CiAgICB9Owp9KSgpOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwp2YXIgcHJvdmlkZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7CnZhciB1dGlsc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKdmFyIEdvb2dsZURvY3NQcm92aWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIF9fZXh0ZW5kcyhHb29nbGVEb2NzUHJvdmlkZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBHb29nbGVEb2NzUHJvdmlkZXIoKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpczsKICAgICAgICBfdGhpcy50ZXN0ID0gL3d3d1wuZ29vZ2xlXC5jb21cL3VybFw/cT0oLiopLzsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBHb29nbGVEb2NzUHJvdmlkZXIucHJvdG90eXBlLm9uU2Nyb2xsID0gZnVuY3Rpb24gKGFFbGVtZW50TGlzdCkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgYUVsZW1lbnRMaXN0LmZvckVhY2goZnVuY3Rpb24gKGFFbGVtZW50KSB7CiAgICAgICAgICAgIF90aGlzLm9uSG92ZXIoYUVsZW1lbnQpOwogICAgICAgIH0pOwogICAgfTsKICAgIEdvb2dsZURvY3NQcm92aWRlci5wcm90b3R5cGUub25Ib3ZlciA9IGZ1bmN0aW9uIChhRWxlbWVudCkgewogICAgICAgIHRoaXMuZW1pdCh0aGlzLkFOVElfUkVESVJFQ1RfRE9ORV9FVkVOVCwgYUVsZW1lbnQsIHV0aWxzXzEubWF0Y2hMaW5rRnJvbVVybChhRWxlbWVudCwgdGhpcy50ZXN0KSk7CiAgICB9OwogICAgcmV0dXJuIEdvb2dsZURvY3NQcm92aWRlcjsKfShwcm92aWRlcl8xLlByb3ZpZGVyKSk7CmV4cG9ydHMuR29vZ2xlRG9jc1Byb3ZpZGVyID0gR29vZ2xlRG9jc1Byb3ZpZGVyOwoKCi8qKiovIH0pLAovKiAxOSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cgp2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAogICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwogICAgfTsKfSkoKTsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKdmFyIHByb3ZpZGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwp2YXIgdXRpbHNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7CnZhciBaaGlodVByb3ZpZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKFpoaWh1UHJvdmlkZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBaaGlodVByb3ZpZGVyKCkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7CiAgICAgICAgX3RoaXMudGVzdCA9IC96aGlodVwuY29tXC9cP3RhcmdldD0oLiopLzsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBaaGlodVByb3ZpZGVyLnByb3RvdHlwZS5vblNjcm9sbCA9IGZ1bmN0aW9uIChhRWxlbWVudExpc3QpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgIGFFbGVtZW50TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChhRWxlbWVudCkgewogICAgICAgICAgICBfdGhpcy5vbkhvdmVyKGFFbGVtZW50KTsKICAgICAgICB9KTsKICAgIH07CiAgICBaaGlodVByb3ZpZGVyLnByb3RvdHlwZS5vbkhvdmVyID0gZnVuY3Rpb24gKGFFbGVtZW50KSB7CiAgICAgICAgdGhpcy5lbWl0KHRoaXMuQU5USV9SRURJUkVDVF9ET05FX0VWRU5ULCBhRWxlbWVudCwgdXRpbHNfMS5tYXRjaExpbmtGcm9tVXJsKGFFbGVtZW50LCB0aGlzLnRlc3QpKTsKICAgIH07CiAgICByZXR1cm4gWmhpaHVQcm92aWRlcjsKfShwcm92aWRlcl8xLlByb3ZpZGVyKSk7CmV4cG9ydHMuWmhpaHVQcm92aWRlciA9IFpoaWh1UHJvdmlkZXI7CgoKLyoqKi8gfSksCi8qIDIwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwogICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CiAgICB9Owp9KSgpOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwp2YXIgcHJvdmlkZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7CnZhciB1dGlsc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKdmFyIFNvUHJvdmlkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICBfX2V4dGVuZHMoU29Qcm92aWRlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIFNvUHJvdmlkZXIoKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpczsKICAgICAgICBfdGhpcy50ZXN0ID0gL3NvXC5jb21cL2xpbmtcP3VybD0oLiopLzsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBTb1Byb3ZpZGVyLnByb3RvdHlwZS5vblNjcm9sbCA9IGZ1bmN0aW9uIChhRWxlbWVudExpc3QpIHsgfTsKICAgIFNvUHJvdmlkZXIucHJvdG90eXBlLm9uSG92ZXIgPSBmdW5jdGlvbiAoYUVsZW1lbnQpIHsKICAgICAgICB0aGlzLmVtaXQodGhpcy5BTlRJX1JFRElSRUNUX0RPTkVfRVZFTlQsIGFFbGVtZW50LCB1dGlsc18xLm1hdGNoTGlua0Zyb21VcmwoYUVsZW1lbnQsIHRoaXMudGVzdCkpOwogICAgICAgIC8vIOmineWklueahAogICAgICAgIGFFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1yZXMnKTsgLy8g5Y676Zmk54K55Ye76L+96LiqCiAgICAgICAgYUVsZW1lbnQuaHJlZiA9IGFFbGVtZW50LmhyZWYucmVwbGFjZSgvXCYocXx0fHRzfHNyYyk9W15cJl0qL2csICcnKTsKICAgICAgICB2YXIgZGF0YVVybCA9IGFFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS11cmwnKTsKICAgICAgICBpZiAoZGF0YVVybCkgewogICAgICAgICAgICBhRWxlbWVudC5ocmVmID0gZGF0YVVybDsKICAgICAgICB9CiAgICB9OwogICAgcmV0dXJuIFNvUHJvdmlkZXI7Cn0ocHJvdmlkZXJfMS5Qcm92aWRlcikpOwpleHBvcnRzLlNvUHJvdmlkZXIgPSBTb1Byb3ZpZGVyOwoKCi8qKiovIH0pLAovKiAyMSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cgp2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAogICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwogICAgfTsKfSkoKTsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKdmFyIHByb3ZpZGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwp2YXIgV2Vib1Byb3ZpZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKFdlYm9Qcm92aWRlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIFdlYm9Qcm92aWRlcigpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwogICAgICAgIF90aGlzLnRlc3QgPSAvdFwuY25cL1x3Ky87CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgV2Vib1Byb3ZpZGVyLnByb3RvdHlwZS5vblNjcm9sbCA9IGZ1bmN0aW9uIChhRWxlbWVudExpc3QpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgIGFFbGVtZW50TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChhRWxlbWVudCkgewogICAgICAgICAgICBfdGhpcy5vbkhvdmVyKGFFbGVtZW50KTsKICAgICAgICB9KTsKICAgIH07CiAgICBXZWJvUHJvdmlkZXIucHJvdG90eXBlLm9uSG92ZXIgPSBmdW5jdGlvbiAoYUVsZW1lbnQpIHsKICAgICAgICBpZiAoIXRoaXMudGVzdC50ZXN0KGFFbGVtZW50LmhyZWYpIHx8ICEvXmh0dHBzPzpcL1wvLy50ZXN0KGFFbGVtZW50LnRpdGxlKSkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIHZhciB1cmwgPSBkZWNvZGVVUklDb21wb25lbnQoYUVsZW1lbnQudGl0bGUpOwogICAgICAgIGlmICh1cmwpIHsKICAgICAgICAgICAgYUVsZW1lbnQuaHJlZiA9IHVybDsKICAgICAgICAgICAgdGhpcy5lbWl0KHRoaXMuQU5USV9SRURJUkVDVF9ET05FX0VWRU5ULCBhRWxlbWVudCwgdXJsKTsKICAgICAgICB9CiAgICB9OwogICAgcmV0dXJuIFdlYm9Qcm92aWRlcjsKfShwcm92aWRlcl8xLlByb3ZpZGVyKSk7CmV4cG9ydHMuV2Vib1Byb3ZpZGVyID0gV2Vib1Byb3ZpZGVyOwoKCi8qKiovIH0pLAovKiAyMiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cgp2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAogICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwogICAgfTsKfSkoKTsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKdmFyIHByb3ZpZGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwp2YXIgVHdpdHRlclByb3ZpZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKFR3aXR0ZXJQcm92aWRlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIFR3aXR0ZXJQcm92aWRlcigpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwogICAgICAgIF90aGlzLnRlc3QgPSAvdFwuY29cL1x3Ky87CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgVHdpdHRlclByb3ZpZGVyLnByb3RvdHlwZS5vblNjcm9sbCA9IGZ1bmN0aW9uIChhRWxlbWVudExpc3QpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgIGFFbGVtZW50TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChhRWxlbWVudCkgewogICAgICAgICAgICBfdGhpcy5vbkhvdmVyKGFFbGVtZW50KTsKICAgICAgICB9KTsKICAgIH07CiAgICBUd2l0dGVyUHJvdmlkZXIucHJvdG90eXBlLm9uSG92ZXIgPSBmdW5jdGlvbiAoYUVsZW1lbnQpIHsKICAgICAgICBpZiAoIXRoaXMudGVzdC50ZXN0KGFFbGVtZW50LmhyZWYpIHx8ICEvXmh0dHBzPzpcL1wvLy50ZXN0KGFFbGVtZW50LnRpdGxlKSkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIHZhciB1cmwgPSBkZWNvZGVVUklDb21wb25lbnQoYUVsZW1lbnQudGl0bGUpOwogICAgICAgIGlmICh1cmwpIHsKICAgICAgICAgICAgdGhpcy5lbWl0KHRoaXMuQU5USV9SRURJUkVDVF9ET05FX0VWRU5ULCBhRWxlbWVudCwgdXJsKTsKICAgICAgICB9CiAgICB9OwogICAgcmV0dXJuIFR3aXR0ZXJQcm92aWRlcjsKfShwcm92aWRlcl8xLlByb3ZpZGVyKSk7CmV4cG9ydHMuVHdpdHRlclByb3ZpZGVyID0gVHdpdHRlclByb3ZpZGVyOwoKCi8qKiovIH0pLAovKiAyMyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cgp2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAogICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwogICAgfTsKfSkoKTsKdmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykgewogICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDsKICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gIm9iamVjdCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09ICJmdW5jdGlvbiIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTsKICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7CiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByOwp9Owp2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHsKICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH0KICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9CiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH0KICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7CiAgICB9KTsKfTsKdmFyIF9fZ2VuZXJhdG9yID0gKHRoaXMgJiYgdGhpcy5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHsKICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7CiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgInRocm93IjogdmVyYigxKSwgInJldHVybiI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZzsKICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfQogICAgZnVuY3Rpb24gc3RlcChvcCkgewogICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuIik7CiAgICAgICAgd2hpbGUgKF8pIHRyeSB7CiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IHlbb3BbMF0gJiAyID8gInJldHVybiIgOiBvcFswXSA/ICJ0aHJvdyIgOiAibmV4dCJdKSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDsKICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFswLCB0LnZhbHVlXTsKICAgICAgICAgICAgc3dpdGNoIChvcFswXSkgewogICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9OwogICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlOwogICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlOwogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH0KICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfQogICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfQogICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH0KICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTsKICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9CiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07CiAgICB9Cn07Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CnZhciBnbV9odHRwXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpOwp2YXIgcHJvdmlkZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7CnZhciB1dGlsc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKdmFyIFNvR291UHJvdmlkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICBfX2V4dGVuZHMoU29Hb3VQcm92aWRlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIFNvR291UHJvdmlkZXIoKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpczsKICAgICAgICBfdGhpcy50ZXN0ID0gL3d3d1wuc29nb3VcLmNvbVwvbGlua1w/dXJsPS87CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgU29Hb3VQcm92aWRlci5wcm90b3R5cGUuaGFuZGxlck9uZUVsZW1lbnQgPSBmdW5jdGlvbiAoYUVsZW1lbnQpIHsKICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciByZXMsIGZpbmFsVXJsLCBtYXRjaGVyLCBlcnJfMTsKICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnRlc3QudGVzdChhRWxlbWVudC5ocmVmKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTsKICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxOwogICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsxLCA0LCAsIDVdKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodXRpbHNfMS5nZXRSZWRpcmVjdChhRWxlbWVudCkgPD0gMiAmJiB0aGlzLnRlc3QudGVzdChhRWxlbWVudC5ocmVmKSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdOwogICAgICAgICAgICAgICAgICAgICAgICB1dGlsc18xLmluY3JlYXNlUmVkaXJlY3QoYUVsZW1lbnQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBnbV9odHRwXzEuZGVmYXVsdC5nZXQoYUVsZW1lbnQuaHJlZildOwogICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2Euc2VudCgpOwogICAgICAgICAgICAgICAgICAgICAgICB1dGlsc18xLmRlY3JlYXNlUmVkaXJlY3QoYUVsZW1lbnQpOwogICAgICAgICAgICAgICAgICAgICAgICBmaW5hbFVybCA9IHJlcy5maW5hbFVybDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmFsVXJsICYmICF0aGlzLnRlc3QudGVzdChmaW5hbFVybCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCh0aGlzLkFOVElfUkVESVJFQ1RfRE9ORV9FVkVOVCwgYUVsZW1lbnQsIHJlcy5maW5hbFVybCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVyID0gcmVzLnJlc3BvbnNlVGV4dC5tYXRjaCgvVVJMPVsnIl0oW14nIl0rKVsnIl0vKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVyICYmIG1hdGNoZXJbMV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQodGhpcy5BTlRJX1JFRElSRUNUX0RPTkVfRVZFTlQsIGFFbGVtZW50LCBtYXRjaGVyWzFdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDM7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzMgLypicmVhayovLCA1XTsKICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgIGVycl8xID0gX2Euc2VudCgpOwogICAgICAgICAgICAgICAgICAgICAgICB1dGlsc18xLmRlY3JlYXNlUmVkaXJlY3QoYUVsZW1lbnQpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycl8xKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07CiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OiByZXR1cm4gWzIgLypyZXR1cm4qL107CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfTsKICAgIFNvR291UHJvdmlkZXIucHJvdG90eXBlLm9uU2Nyb2xsID0gZnVuY3Rpb24gKGFFbGVtZW50TGlzdCkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgYUVsZW1lbnRMaXN0LmZvckVhY2goZnVuY3Rpb24gKGFFbGVtZW50KSB7CiAgICAgICAgICAgIF90aGlzLmhhbmRsZXJPbmVFbGVtZW50KGFFbGVtZW50KTsKICAgICAgICB9KTsKICAgIH07CiAgICBTb0dvdVByb3ZpZGVyLnByb3RvdHlwZS5vbkhvdmVyID0gZnVuY3Rpb24gKGFFbGVtZW50KSB7CiAgICAgICAgdGhpcy5oYW5kbGVyT25lRWxlbWVudChhRWxlbWVudCk7CiAgICB9OwogICAgU29Hb3VQcm92aWRlci5wcm90b3R5cGUucGFyc2VQYWdlID0gZnVuY3Rpb24gKHJlcykgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgdmFyIHJlc3BvbnNlVGV4dCA9IHJlcy5yZXNwb25zZVRleHQucmVwbGFjZSgvKHNyYz1bXj5dKnxsaW5rPVtePl0pL2csICcnKTsKICAgICAgICB2YXIgaHRtbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2h0bWwnKTsKICAgICAgICBodG1sLmlubmVySFRNTCA9IHJlc3BvbnNlVGV4dDsKICAgICAgICAvLyBsZXQgc2VsZWN0b3IgPSAnI21haW4gLnJlc3VsdHMgZGl2LnZyd3JhcD5oMyc7CiAgICAgICAgLy8gbGV0IHNlbGVjdG9yID0gJyNtYWluIC5yZXN1bHRzIGgzPmEnOwogICAgICAgIHZhciBzZWxlY3RvciA9ICcjbWFpbiAucmVzdWx0cyBhW2hyZWYqPSJ3d3cuc29nb3UuY29tL2xpbms/dXJsPSJdJzsKICAgICAgICB2YXIgcmVtb3RlcyA9IFtdLnNsaWNlLmNhbGwoaHRtbC5xdWVyeVNlbGVjdG9yQWxsKCcjbWFpbiAucmVzdWx0cyBhW2hyZWZdJykpOwogICAgICAgIHZhciBsb2NhbHMgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKTsKICAgICAgICBsb2NhbHMuZm9yRWFjaChmdW5jdGlvbiAobG9jYWxFbGUpIHsKICAgICAgICAgICAgcmVtb3Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChyZW1vdGVFbGUpIHsKICAgICAgICAgICAgICAgIHZhciBsb2NhbFRleHQgPSB1dGlsc18xLmdldFRleHQobG9jYWxFbGUpOwogICAgICAgICAgICAgICAgdmFyIHJlbW90ZVRleHQgPSB1dGlsc18xLmdldFRleHQocmVtb3RlRWxlKTsKICAgICAgICAgICAgICAgIC8vIOmAmueUqOaMiemSru+8jOS+i+WmguOAkOeCueWHu+S4i+i9veOAkQogICAgICAgICAgICAgICAgaWYgKGxvY2FsRWxlLmNsYXNzTGlzdC5jb250YWlucygnc3RyLXB1YmxpYy1idG4nKSkgewogICAgICAgICAgICAgICAgICAgIGxvY2FsVGV4dCA9IHV0aWxzXzEuZ2V0VGV4dChsb2NhbEVsZS5wYXJlbnROb2RlKTsKICAgICAgICAgICAgICAgICAgICByZW1vdGVUZXh0ID0gdXRpbHNfMS5nZXRUZXh0KHJlbW90ZUVsZS5wYXJlbnROb2RlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGxvY2FsRWxlLmNsYXNzTGlzdC5jb250YWlucygnc3RyX2ltZycpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8g5Zu+54mHCiAgICAgICAgICAgICAgICAgICAgbG9jYWxUZXh0ID0gdXRpbHNfMS5nZXRUZXh0KGxvY2FsRWxlLnBhcmVudE5vZGUucGFyZW50Tm9kZSk7CiAgICAgICAgICAgICAgICAgICAgcmVtb3RlVGV4dCA9IHV0aWxzXzEuZ2V0VGV4dChyZW1vdGVFbGUucGFyZW50Tm9kZS5wYXJlbnROb2RlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICghbG9jYWxUZXh0IHx8IGxvY2FsVGV4dCAhPT0gcmVtb3RlVGV4dCkKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KF90aGlzLkFOVElfUkVESVJFQ1RfRE9ORV9FVkVOVCwgbG9jYWxFbGUsIHJlbW90ZUVsZS5ocmVmKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9OwogICAgU29Hb3VQcm92aWRlci5wcm90b3R5cGUub25Jbml0ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgaWYgKCEvd3d3XC5zb2dvdVwuY29tXC93ZWIvLnRlc3Qod2luZG93LnRvcC5sb2NhdGlvbi5ocmVmKSkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIHZhciBxdWVyeSA9IHV0aWxzXzEucXVlcnlQYXJzZXIod2luZG93LnRvcC5sb2NhdGlvbi5zZWFyY2gpOwogICAgICAgIC8vIOaQnOe0ouS9v+eUqGh0dHDmkJzntKLvvIzlvpfliLDnmoTmmK/nm7TmjqXpk77mjqUKICAgICAgICB2YXIgdXJsID0gbG9jYXRpb24ucHJvdG9jb2wKICAgICAgICAgICAgLnJlcGxhY2UoLzokLywgJycpCiAgICAgICAgICAgIC5yZXBsYWNlKCdzJywgJycpICsgIjovLyIgKyAobG9jYXRpb24uaG9zdCArIGxvY2F0aW9uLnBhdGhuYW1lICsgcXVlcnkpOwogICAgICAgIGdtX2h0dHBfMS5kZWZhdWx0CiAgICAgICAgICAgIC5nZXQodXJsKQogICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIF90aGlzLnBhcnNlUGFnZShyZXMpOwogICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH07CiAgICBfX2RlY29yYXRlKFsKICAgICAgICB1dGlsc18xLnRocm90dGxlRGVjb3JhdG9yKDUwMCkKICAgIF0sIFNvR291UHJvdmlkZXIucHJvdG90eXBlLCAib25Ib3ZlciIsIG51bGwpOwogICAgcmV0dXJuIFNvR291UHJvdmlkZXI7Cn0ocHJvdmlkZXJfMS5Qcm92aWRlcikpOwpleHBvcnRzLlNvR291UHJvdmlkZXIgPSBTb0dvdVByb3ZpZGVyOwoKCi8qKiovIH0pLAovKiAyNCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cgp2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAogICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwogICAgfTsKfSkoKTsKdmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykgewogICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDsKICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gIm9iamVjdCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09ICJmdW5jdGlvbiIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTsKICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7CiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByOwp9Owp2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHsKICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH0KICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9CiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH0KICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7CiAgICB9KTsKfTsKdmFyIF9fZ2VuZXJhdG9yID0gKHRoaXMgJiYgdGhpcy5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHsKICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7CiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgInRocm93IjogdmVyYigxKSwgInJldHVybiI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZzsKICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfQogICAgZnVuY3Rpb24gc3RlcChvcCkgewogICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuIik7CiAgICAgICAgd2hpbGUgKF8pIHRyeSB7CiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IHlbb3BbMF0gJiAyID8gInJldHVybiIgOiBvcFswXSA/ICJ0aHJvdyIgOiAibmV4dCJdKSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDsKICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFswLCB0LnZhbHVlXTsKICAgICAgICAgICAgc3dpdGNoIChvcFswXSkgewogICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9OwogICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlOwogICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlOwogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH0KICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfQogICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfQogICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH0KICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTsKICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9CiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07CiAgICB9Cn07Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CnZhciBnbV9odHRwXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpOwp2YXIgcHJvdmlkZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7CnZhciB1dGlsc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKdmFyIEJhaWR1UHJvdmlkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICBfX2V4dGVuZHMoQmFpZHVQcm92aWRlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIEJhaWR1UHJvdmlkZXIoKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpczsKICAgICAgICBfdGhpcy50ZXN0ID0gL3d3d1wuYmFpZHVcLmNvbVwvbGlua1w/dXJsPS87CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgQmFpZHVQcm92aWRlci5wcm90b3R5cGUub25TY3JvbGwgPSBmdW5jdGlvbiAoYUVsZW1lbnRMaXN0KSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgICBhRWxlbWVudExpc3QuZm9yRWFjaChmdW5jdGlvbiAoYUVsZW1lbnQpIHsKICAgICAgICAgICAgaWYgKHV0aWxzXzEuZ2V0UmVkaXJlY3QoYUVsZW1lbnQpIDw9IDIgJiYgX3RoaXMudGVzdC50ZXN0KGFFbGVtZW50LmhyZWYpKSB7CiAgICAgICAgICAgICAgICB1dGlsc18xLmluY3JlYXNlUmVkaXJlY3QoYUVsZW1lbnQpOwogICAgICAgICAgICAgICAgX3RoaXMuaGFuZGxlck9uZUVsZW1lbnQoYUVsZW1lbnQpCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgIHV0aWxzXzEuZGVjcmVhc2VSZWRpcmVjdChhRWxlbWVudCk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgdXRpbHNfMS5kZWNyZWFzZVJlZGlyZWN0KGFFbGVtZW50KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9OwogICAgQmFpZHVQcm92aWRlci5wcm90b3R5cGUuaGFuZGxlck9uZUVsZW1lbnQgPSBmdW5jdGlvbiAoYUVsZW1lbnQpIHsKICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciByZXMsIGVycl8xOwogICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDIsICwgM10pOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBnbV9odHRwXzEuZGVmYXVsdC5nZXQoYUVsZW1lbnQuaHJlZildOwogICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2Euc2VudCgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmZpbmFsVXJsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQodGhpcy5BTlRJX1JFRElSRUNUX0RPTkVfRVZFTlQsIGFFbGVtZW50LCByZXMuZmluYWxVcmwpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNdOwogICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgZXJyXzEgPSBfYS5zZW50KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyXzEpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAzXTsKICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9OwogICAgQmFpZHVQcm92aWRlci5wcm90b3R5cGUub25Ib3ZlciA9IGZ1bmN0aW9uIChhRWxlbWVudCwgY2FsbGJhY2spIHsKICAgICAgICBpZiAoIXRoaXMudGVzdC50ZXN0KGFFbGVtZW50LmhyZWYpKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgdGhpcy5oYW5kbGVyT25lRWxlbWVudChhRWxlbWVudCk7CiAgICB9OwogICAgLy8gcHJpdmF0ZSBwYXJzZVBhZ2UocmVzOiBSZXNwb25zZSQpOiB2b2lkIHt9CiAgICBCYWlkdVByb3ZpZGVyLnByb3RvdHlwZS5vbkluaXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8gaWYgKCEvd3d3XC5iYWlkdVwuY29tXC9zLy50ZXN0KHdpbmRvdy50b3AubG9jYXRpb24uaHJlZikpIHJldHVybjsKICAgICAgICAvLyBjb25zdCBxdWVyeSA9IHF1ZXJ5UGFyc2VyKHdpbmRvdy50b3AubG9jYXRpb24uc2VhcmNoKTsKICAgICAgICAvLyBjb25zdCBza2lwID0gcXVlcnkub2JqZWN0LnBuIHx8IDA7CiAgICAgICAgLy8KICAgICAgICAvLyBxdWVyeS5vYmplY3QudG4gPSAnYmFpZHVsb2NhbCc7CiAgICAgICAgLy8gcXVlcnkub2JqZWN0LnRpbWVzdGFtcCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgIC8vIHF1ZXJ5Lm9iamVjdC5ybiA9IDUwOwogICAgICAgIC8vCiAgICAgICAgLy8gY29uc3QgdXJsOiBzdHJpbmcgPSBgJHtsb2NhdGlvbi5wcm90b2NvbC5yZXBsYWNlKAogICAgICAgIC8vICAgLzokLywKICAgICAgICAvLyAgICcnCiAgICAgICAgLy8gKX06Ly8ke2xvY2F0aW9uLmhvc3QgKyBsb2NhdGlvbi5wYXRobmFtZSArIHF1ZXJ5fWA7CiAgICAgICAgLy8KICAgICAgICAvLyBQcm9taXNlLmFsbChbCiAgICAgICAgLy8gICBodHRwLmdldCh1cmwpLAogICAgICAgIC8vICAgaHR0cC5nZXQodXJsLnJlcGxhY2UoL3BuPShcZCspLywgYHBuPSR7c2tpcCArIDEwfWApKQogICAgICAgIC8vIF0pCiAgICAgICAgLy8gICAudGhlbigocmVzTGlzdDogUmVzcG9uc2UkW10pID0+IHsKICAgICAgICAvLyAgICAgaWYgKCFyZXNMaXN0IHx8ICFyZXNMaXN0Lmxlbmd0aCkgcmV0dXJuOwogICAgICAgIC8vICAgICByZXNMaXN0LmZvckVhY2gocmVzID0+IHsKICAgICAgICAvLyAgICAgICByZXR1cm4gdGhpcy5wYXJzZVBhZ2UocmVzKTsKICAgICAgICAvLyAgICAgfSk7CiAgICAgICAgLy8gICB9KQogICAgICAgIC8vICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgLy8gICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsKICAgICAgICAvLyAgIH0pOwogICAgICAgIHJldHVybiB0aGlzOwogICAgfTsKICAgIF9fZGVjb3JhdGUoWwogICAgICAgIHV0aWxzXzEudGhyb3R0bGVEZWNvcmF0b3IoNTAwKQogICAgXSwgQmFpZHVQcm92aWRlci5wcm90b3R5cGUsICJvbkhvdmVyIiwgbnVsbCk7CiAgICByZXR1cm4gQmFpZHVQcm92aWRlcjsKfShwcm92aWRlcl8xLlByb3ZpZGVyKSk7CmV4cG9ydHMuQmFpZHVQcm92aWRlciA9IEJhaWR1UHJvdmlkZXI7CgoKLyoqKi8gfSksCi8qIDI1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwogICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CiAgICB9Owp9KSgpOwp2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7CiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkOwogICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSAib2JqZWN0IiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gImZ1bmN0aW9uIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpOwogICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjsKICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7Cn07Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CnZhciBnbV9odHRwXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpOwp2YXIgcHJvdmlkZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7CnZhciB1dGlsc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKdmFyIEJhaWR1VmlkZW9Qcm92aWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIF9fZXh0ZW5kcyhCYWlkdVZpZGVvUHJvdmlkZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBCYWlkdVZpZGVvUHJvdmlkZXIoKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpczsKICAgICAgICBfdGhpcy50ZXN0ID0gL3ZcLmJhaWR1XC5jb21cL2xpbmtcP3VybD0vOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIEJhaWR1VmlkZW9Qcm92aWRlci5wcm90b3R5cGUub25TY3JvbGwgPSBmdW5jdGlvbiAoYUVsZW1lbnRMaXN0KSB7IH07CiAgICBCYWlkdVZpZGVvUHJvdmlkZXIucHJvdG90eXBlLm9uSG92ZXIgPSBmdW5jdGlvbiAoYUVsZW1lbnQpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgIGlmICghdGhpcy50ZXN0LnRlc3QoYUVsZW1lbnQuaHJlZikpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBnbV9odHRwXzEuZGVmYXVsdAogICAgICAgICAgICAuZ2V0KGFFbGVtZW50LmhyZWYpCiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgaWYgKHJlcy5maW5hbFVybCkgewogICAgICAgICAgICAgICAgX3RoaXMuZW1pdChfdGhpcy5BTlRJX1JFRElSRUNUX0RPTkVfRVZFTlQsIGFFbGVtZW50LCByZXMuZmluYWxVcmwpOwogICAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpOwogICAgICAgIH0pOwogICAgfTsKICAgIF9fZGVjb3JhdGUoWwogICAgICAgIHV0aWxzXzEudGhyb3R0bGVEZWNvcmF0b3IoNTAwKQogICAgXSwgQmFpZHVWaWRlb1Byb3ZpZGVyLnByb3RvdHlwZSwgIm9uSG92ZXIiLCBudWxsKTsKICAgIHJldHVybiBCYWlkdVZpZGVvUHJvdmlkZXI7Cn0ocHJvdmlkZXJfMS5Qcm92aWRlcikpOwpleHBvcnRzLkJhaWR1VmlkZW9Qcm92aWRlciA9IEJhaWR1VmlkZW9Qcm92aWRlcjsKCgovKioqLyB9KSwKLyogMjYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKdmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CnZhciBwcm92aWRlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKdmFyIHV0aWxzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwp2YXIgSnVlamluUHJvdmlkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICBfX2V4dGVuZHMoSnVlamluUHJvdmlkZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBKdWVqaW5Qcm92aWRlcigpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwogICAgICAgIF90aGlzLnRlc3QgPSAvbGlua1wuanVlamluXC5pbVwvXD90YXJnZXQ9KC4qKS87CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgSnVlamluUHJvdmlkZXIucHJvdG90eXBlLm9uU2Nyb2xsID0gZnVuY3Rpb24gKGFFbGVtZW50TGlzdCkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgYUVsZW1lbnRMaXN0LmZvckVhY2goZnVuY3Rpb24gKGFFbGVtZW50KSB7CiAgICAgICAgICAgIF90aGlzLm9uSG92ZXIoYUVsZW1lbnQpOwogICAgICAgIH0pOwogICAgfTsKICAgIEp1ZWppblByb3ZpZGVyLnByb3RvdHlwZS5vbkhvdmVyID0gZnVuY3Rpb24gKGFFbGVtZW50KSB7CiAgICAgICAgdGhpcy5lbWl0KHRoaXMuQU5USV9SRURJUkVDVF9ET05FX0VWRU5ULCBhRWxlbWVudCwgdXRpbHNfMS5tYXRjaExpbmtGcm9tVXJsKGFFbGVtZW50LCB0aGlzLnRlc3QpKTsKICAgIH07CiAgICByZXR1cm4gSnVlamluUHJvdmlkZXI7Cn0ocHJvdmlkZXJfMS5Qcm92aWRlcikpOwpleHBvcnRzLkp1ZWppblByb3ZpZGVyID0gSnVlamluUHJvdmlkZXI7CgoKLyoqKi8gfSkKLyoqKioqKi8gXSk7"}]}